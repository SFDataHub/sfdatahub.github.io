import zk from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function O0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fy={exports:{}},xu={},gy={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function X4(){if(Kw)return Pt;Kw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function E(U,Z,le){this.props=U,this.context=Z,this.refs=k,this.updater=le||b}E.prototype.isReactComponent={},E.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},E.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function L(){}L.prototype=E.prototype;function M(U,Z,le){this.props=U,this.context=Z,this.refs=k,this.updater=le||b}var N=M.prototype=new L;N.constructor=M,S(N,E.prototype),N.isPureReactComponent=!0;var y=Array.isArray,_=Object.prototype.hasOwnProperty,D={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function w(U,Z,le){var ee,he={},xe=null,ge=null;if(Z!=null)for(ee in Z.ref!==void 0&&(ge=Z.ref),Z.key!==void 0&&(xe=""+Z.key),Z)_.call(Z,ee)&&!C.hasOwnProperty(ee)&&(he[ee]=Z[ee]);var we=arguments.length-2;if(we===1)he.children=le;else if(1<we){for(var ve=Array(we),ce=0;ce<we;ce++)ve[ce]=arguments[ce+2];he.children=ve}if(U&&U.defaultProps)for(ee in we=U.defaultProps,we)he[ee]===void 0&&(he[ee]=we[ee]);return{$$typeof:t,type:U,key:xe,ref:ge,props:he,_owner:D.current}}function I(U,Z){return{$$typeof:t,type:U.type,key:Z,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function R(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return Z[le]})}var B=/\/+/g;function $(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?R(""+U.key):Z.toString(36)}function W(U,Z,le,ee,he){var xe=typeof U;(xe==="undefined"||xe==="boolean")&&(U=null);var ge=!1;if(U===null)ge=!0;else switch(xe){case"string":case"number":ge=!0;break;case"object":switch(U.$$typeof){case t:case e:ge=!0}}if(ge)return ge=U,he=he(ge),U=ee===""?"."+$(ge,0):ee,y(he)?(le="",U!=null&&(le=U.replace(B,"$&/")+"/"),W(he,Z,le,"",function(ce){return ce})):he!=null&&(F(he)&&(he=I(he,le+(!he.key||ge&&ge.key===he.key?"":(""+he.key).replace(B,"$&/")+"/")+U)),Z.push(he)),1;if(ge=0,ee=ee===""?".":ee+":",y(U))for(var we=0;we<U.length;we++){xe=U[we];var ve=ee+$(xe,we);ge+=W(xe,Z,le,ve,he)}else if(ve=v(U),typeof ve=="function")for(U=ve.call(U),we=0;!(xe=U.next()).done;)xe=xe.value,ve=ee+$(xe,we++),ge+=W(xe,Z,le,ve,he);else if(xe==="object")throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ge}function H(U,Z,le){if(U==null)return U;var ee=[],he=0;return W(U,ee,"","",function(xe){return Z.call(le,xe,he++)}),ee}function q(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var K={current:null},G={transition:null},se={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:G,ReactCurrentOwner:D};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Pt.Children={map:H,forEach:function(U,Z,le){H(U,function(){Z.apply(this,arguments)},le)},count:function(U){var Z=0;return H(U,function(){Z++}),Z},toArray:function(U){return H(U,function(Z){return Z})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Pt.Component=E,Pt.Fragment=s,Pt.Profiler=i,Pt.PureComponent=M,Pt.StrictMode=r,Pt.Suspense=u,Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Pt.act=ne,Pt.cloneElement=function(U,Z,le){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ee=S({},U.props),he=U.key,xe=U.ref,ge=U._owner;if(Z!=null){if(Z.ref!==void 0&&(xe=Z.ref,ge=D.current),Z.key!==void 0&&(he=""+Z.key),U.type&&U.type.defaultProps)var we=U.type.defaultProps;for(ve in Z)_.call(Z,ve)&&!C.hasOwnProperty(ve)&&(ee[ve]=Z[ve]===void 0&&we!==void 0?we[ve]:Z[ve])}var ve=arguments.length-2;if(ve===1)ee.children=le;else if(1<ve){we=Array(ve);for(var ce=0;ce<ve;ce++)we[ce]=arguments[ce+2];ee.children=we}return{$$typeof:t,type:U.type,key:he,ref:xe,props:ee,_owner:ge}},Pt.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Pt.createElement=w,Pt.createFactory=function(U){var Z=w.bind(null,U);return Z.type=U,Z},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(U){return{$$typeof:d,render:U}},Pt.isValidElement=F,Pt.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:q}},Pt.memo=function(U,Z){return{$$typeof:h,type:U,compare:Z===void 0?null:Z}},Pt.startTransition=function(U){var Z=G.transition;G.transition={};try{U()}finally{G.transition=Z}},Pt.unstable_act=ne,Pt.useCallback=function(U,Z){return K.current.useCallback(U,Z)},Pt.useContext=function(U){return K.current.useContext(U)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(U){return K.current.useDeferredValue(U)},Pt.useEffect=function(U,Z){return K.current.useEffect(U,Z)},Pt.useId=function(){return K.current.useId()},Pt.useImperativeHandle=function(U,Z,le){return K.current.useImperativeHandle(U,Z,le)},Pt.useInsertionEffect=function(U,Z){return K.current.useInsertionEffect(U,Z)},Pt.useLayoutEffect=function(U,Z){return K.current.useLayoutEffect(U,Z)},Pt.useMemo=function(U,Z){return K.current.useMemo(U,Z)},Pt.useReducer=function(U,Z,le){return K.current.useReducer(U,Z,le)},Pt.useRef=function(U){return K.current.useRef(U)},Pt.useState=function(U){return K.current.useState(U)},Pt.useSyncExternalStore=function(U,Z,le){return K.current.useSyncExternalStore(U,Z,le)},Pt.useTransition=function(){return K.current.useTransition()},Pt.version="18.3.1",Pt}var Qw;function V0(){return Qw||(Qw=1,gy.exports=X4()),gy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function Y4(){if(Xw)return xu;Xw=1;var t=V0(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,h){var p,g={},v=null,b=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(b=u.ref);for(p in u)r.call(u,p)&&!a.hasOwnProperty(p)&&(g[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)g[p]===void 0&&(g[p]=u[p]);return{$$typeof:e,type:d,key:v,ref:b,props:g,_owner:i.current}}return xu.Fragment=s,xu.jsx=l,xu.jsxs=l,xu}var Yw;function J4(){return Yw||(Yw=1,fy.exports=Y4()),fy.exports}var n=J4(),T=V0();const J=O0(T);var pm={},xy={exports:{}},cr={},yy={exports:{}},vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function Z4(){return Jw||(Jw=1,(function(t){function e(G,se){var ne=G.length;G.push(se);e:for(;0<ne;){var U=ne-1>>>1,Z=G[U];if(0<i(Z,se))G[U]=se,G[ne]=Z,ne=U;else break e}}function s(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var se=G[0],ne=G.pop();if(ne!==se){G[0]=ne;e:for(var U=0,Z=G.length,le=Z>>>1;U<le;){var ee=2*(U+1)-1,he=G[ee],xe=ee+1,ge=G[xe];if(0>i(he,ne))xe<Z&&0>i(ge,he)?(G[U]=ge,G[xe]=ne,U=xe):(G[U]=he,G[ee]=ne,U=ee);else if(xe<Z&&0>i(ge,ne))G[U]=ge,G[xe]=ne,U=xe;else break e}}return se}function i(G,se){var ne=G.sortIndex-se.sortIndex;return ne!==0?ne:G.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],h=[],p=1,g=null,v=3,b=!1,S=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(G){for(var se=s(h);se!==null;){if(se.callback===null)r(h);else if(se.startTime<=G)r(h),se.sortIndex=se.expirationTime,e(u,se);else break;se=s(h)}}function y(G){if(k=!1,N(G),!S)if(s(u)!==null)S=!0,q(_);else{var se=s(h);se!==null&&K(y,se.startTime-G)}}function _(G,se){S=!1,k&&(k=!1,L(w),w=-1),b=!0;var ne=v;try{for(N(se),g=s(u);g!==null&&(!(g.expirationTime>se)||G&&!R());){var U=g.callback;if(typeof U=="function"){g.callback=null,v=g.priorityLevel;var Z=U(g.expirationTime<=se);se=t.unstable_now(),typeof Z=="function"?g.callback=Z:g===s(u)&&r(u),N(se)}else r(u);g=s(u)}if(g!==null)var le=!0;else{var ee=s(h);ee!==null&&K(y,ee.startTime-se),le=!1}return le}finally{g=null,v=ne,b=!1}}var D=!1,C=null,w=-1,I=5,F=-1;function R(){return!(t.unstable_now()-F<I)}function B(){if(C!==null){var G=t.unstable_now();F=G;var se=!0;try{se=C(!0,G)}finally{se?$():(D=!1,C=null)}}else D=!1}var $;if(typeof M=="function")$=function(){M(B)};else if(typeof MessageChannel!="undefined"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=B,$=function(){H.postMessage(null)}}else $=function(){E(B,0)};function q(G){C=G,D||(D=!0,$())}function K(G,se){w=E(function(){G(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){S||b||(S=!0,q(_))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return s(u)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var ne=v;v=se;try{return G()}finally{v=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ne=v;v=G;try{return se()}finally{v=ne}},t.unstable_scheduleCallback=function(G,se,ne){var U=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?U+ne:U):ne=U,G){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,G={id:p++,callback:se,priorityLevel:G,startTime:ne,expirationTime:Z,sortIndex:-1},ne>U?(G.sortIndex=ne,e(h,G),s(u)===null&&G===s(h)&&(k?(L(w),w=-1):k=!0,K(y,ne-U))):(G.sortIndex=Z,e(u,G),S||b||(S=!0,q(_))),G},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(G){var se=v;return function(){var ne=v;v=se;try{return G.apply(this,arguments)}finally{v=ne}}}})(vy)),vy}var Zw;function eI(){return Zw||(Zw=1,yy.exports=Z4()),yy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function tI(){if(e2)return cr;e2=1;var t=V0(),e=eI();function s(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var d=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(o){return u.call(g,o)?!0:u.call(p,o)?!1:h.test(o)?g[o]=!0:(p[o]=!0,!1)}function b(o,c,m,x){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,m,x){if(c===null||typeof c=="undefined"||b(o,c,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function k(o,c,m,x,j,P,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=j,this.mustUseProperty=m,this.propertyName=o,this.type=c,this.sanitizeURL=P,this.removeEmptyString=V}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){E[o]=new k(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];E[c]=new k(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new k(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new k(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new k(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){E[o]=new k(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){E[o]=new k(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){E[o]=new k(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){E[o]=new k(o,5,!1,o.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(L,M);E[c]=new k(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(L,M);E[c]=new k(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(L,M);E[c]=new k(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new k(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new k(o,1,!1,o.toLowerCase(),null,!0,!0)});function N(o,c,m,x){var j=E.hasOwnProperty(c)?E[c]:null;(j!==null?j.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,m,j,x)&&(m=null),x||j===null?v(c)&&(m===null?o.removeAttribute(c):o.setAttribute(c,""+m)):j.mustUseProperty?o[j.propertyName]=m===null?j.type===3?!1:"":m:(c=j.attributeName,x=j.attributeNamespace,m===null?o.removeAttribute(c):(j=j.type,m=j===3||j===4&&m===!0?"":""+m,x?o.setAttributeNS(x,c,m):o.setAttribute(c,m))))}var y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),R=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),G=Symbol.iterator;function se(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var ne=Object.assign,U;function Z(o){if(U===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var le=!1;function ee(o,c){if(!o||le)return"";le=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(pe){var x=pe}Reflect.construct(o,[],c)}else{try{c.call()}catch(pe){x=pe}o.call(c.prototype)}else{try{throw Error()}catch(pe){x=pe}o()}}catch(pe){if(pe&&x&&typeof pe.stack=="string"){for(var j=pe.stack.split(`
`),P=x.stack.split(`
`),V=j.length-1,Q=P.length-1;1<=V&&0<=Q&&j[V]!==P[Q];)Q--;for(;1<=V&&0<=Q;V--,Q--)if(j[V]!==P[Q]){if(V!==1||Q!==1)do if(V--,Q--,0>Q||j[V]!==P[Q]){var X=`
`+j[V].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=V&&0<=Q);break}}}finally{le=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?Z(o):""}function he(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=ee(o.type,!1),o;case 11:return o=ee(o.type.render,!1),o;case 1:return o=ee(o.type,!0),o;default:return""}}function xe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case D:return"Portal";case I:return"Profiler";case w:return"StrictMode";case $:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case R:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case H:return c=o.displayName||null,c!==null?c:xe(o.type)||"Memo";case q:c=o._payload,o=o._init;try{return xe(o(c))}catch(m){}}return null}function ge(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(c);case 8:return c===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function we(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ve(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ce(o){var c=ve(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof m!="undefined"&&typeof m.get=="function"&&typeof m.set=="function"){var j=m.get,P=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(V){x=""+V,P.call(this,V)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(V){x=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function ke(o){o._valueTracker||(o._valueTracker=ce(o))}function be(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return o&&(x=ve(o)?o.checked?"true":"false":o.value),o=x,o!==m?(c.setValue(o),!0):!1}function Ue(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch(c){return o.body}}function Ke(o,c){var m=c.checked;return ne({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m!=null?m:o._wrapperState.initialChecked})}function Tt(o,c){var m=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;m=we(c.value!=null?c.value:m),o._wrapperState={initialChecked:x,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Mt(o,c){c=c.checked,c!=null&&N(o,"checked",c,!1)}function Ft(o,c){Mt(o,c);var m=we(c.value),x=c.type;if(m!=null)x==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?is(o,c.type,m):c.hasOwnProperty("defaultValue")&&is(o,c.type,we(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Vt(o,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,m||c===o.value||(o.value=c),o.defaultValue=c}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function is(o,c,m){(c!=="number"||Ue(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var Ee=Array.isArray;function Le(o,c,m,x){if(o=o.options,c){c={};for(var j=0;j<m.length;j++)c["$"+m[j]]=!0;for(m=0;m<o.length;m++)j=c.hasOwnProperty("$"+o[m].value),o[m].selected!==j&&(o[m].selected=j),j&&x&&(o[m].defaultSelected=!0)}else{for(m=""+we(m),c=null,j=0;j<o.length;j++){if(o[j].value===m){o[j].selected=!0,x&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function Ie(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(s(91));return ne({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function He(o,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(s(92));if(Ee(m)){if(1<m.length)throw Error(s(93));m=m[0]}c=m}c==null&&(c=""),m=c}o._wrapperState={initialValue:we(m)}}function ot(o,c){var m=we(c.value),x=we(c.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),c.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),x!=null&&(o.defaultValue=""+x)}function ht(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function yt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?yt(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Bt,An=(function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(c,m,x,j){MSApp.execUnsafeLocalFunction(function(){return o(c,m,x,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Bt=Bt||document.createElement("div"),Bt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Bt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Ys(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Un=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(o){Un.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ps[c]=Ps[o]})});function yr(o,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Ps.hasOwnProperty(o)&&Ps[o]?(""+c).trim():c+"px"}function Br(o,c){o=o.style;for(var m in c)if(c.hasOwnProperty(m)){var x=m.indexOf("--")===0,j=yr(m,c[m],x);m==="float"&&(m="cssFloat"),x?o.setProperty(m,j):o[m]=j}}var vr=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ue(o,c){if(c){if(vr[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(s(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(s(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(s(61))}if(c.style!=null&&typeof c.style!="object")throw Error(s(62))}}function Fe(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qe=null;function vt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var rt=null,_t=null,Jt=null;function as(o){if(o=su(o)){if(typeof rt!="function")throw Error(s(280));var c=o.stateNode;c&&(c=Tp(c),rt(o.stateNode,o.type,c))}}function Js(o){_t?Jt?Jt.push(o):Jt=[o]:_t=o}function Ci(){if(_t){var o=_t,c=Jt;if(Jt=_t=null,as(o),c)for(o=0;o<c.length;o++)as(c[o])}}function br(o,c){return o(c)}function Wo(){}var zn=!1;function ni(o,c,m){if(zn)return o(c,m);zn=!0;try{return br(o,c,m)}finally{zn=!1,(_t!==null||Jt!==null)&&(Wo(),Ci())}}function ks(o,c){var m=o.stateNode;if(m===null)return null;var x=Tp(m);if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(s(231,c,typeof m));return m}var ea=!1;if(d)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){ea=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch(o){ea=!1}function Ti(o,c,m,x,j,P,V,Q,X){var pe=Array.prototype.slice.call(arguments,3);try{c.apply(m,pe)}catch(Se){this.onError(Se)}}var Ei=!1,Zt=null,es=!1,_r=null,ta={onError:function(o){Ei=!0,Zt=o}};function ns(o,c,m,x,j,P,V,Q,X){Ei=!1,Zt=null,Ti.apply(ta,arguments)}function Zh(o,c,m,x,j,P,V,Q,X){if(ns.apply(this,arguments),Ei){if(Ei){var pe=Zt;Ei=!1,Zt=null}else throw Error(s(198));es||(es=!0,_r=pe)}}function ri(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function qo(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function ii(o){if(ri(o)!==o)throw Error(s(188))}function ep(o){var c=o.alternate;if(!c){if(c=ri(o),c===null)throw Error(s(188));return c!==o?null:o}for(var m=o,x=c;;){var j=m.return;if(j===null)break;var P=j.alternate;if(P===null){if(x=j.return,x!==null){m=x;continue}break}if(j.child===P.child){for(P=j.child;P;){if(P===m)return ii(j),o;if(P===x)return ii(j),c;P=P.sibling}throw Error(s(188))}if(m.return!==x.return)m=j,x=P;else{for(var V=!1,Q=j.child;Q;){if(Q===m){V=!0,m=j,x=P;break}if(Q===x){V=!0,x=j,m=P;break}Q=Q.sibling}if(!V){for(Q=P.child;Q;){if(Q===m){V=!0,m=P,x=j;break}if(Q===x){V=!0,x=P,m=j;break}Q=Q.sibling}if(!V)throw Error(s(189))}}if(m.alternate!==x)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?o:c}function Fd(o){return o=ep(o),o!==null?tc(o):null}function tc(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=tc(o);if(c!==null)return c;o=o.sibling}return null}var sc=e.unstable_scheduleCallback,Bd=e.unstable_cancelCallback,tp=e.unstable_shouldYield,Hg=e.unstable_requestPaint,hs=e.unstable_now,sp=e.unstable_getCurrentPriorityLevel,Ko=e.unstable_ImmediatePriority,Ga=e.unstable_UserBlockingPriority,$r=e.unstable_NormalPriority,$d=e.unstable_LowPriority,np=e.unstable_IdlePriority,Qo=null,wr=null;function rp(o){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Qo,o,void 0,(o.current.flags&128)===128)}catch(c){}}var Hn=Math.clz32?Math.clz32:ap,Od=Math.log,ip=Math.LN2;function ap(o){return o>>>=0,o===0?32:31-(Od(o)/ip|0)|0}var nc=64,rc=4194304;function Wa(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Xo(o,c){var m=o.pendingLanes;if(m===0)return 0;var x=0,j=o.suspendedLanes,P=o.pingedLanes,V=m&268435455;if(V!==0){var Q=V&~j;Q!==0?x=Wa(Q):(P&=V,P!==0&&(x=Wa(P)))}else V=m&~j,V!==0?x=Wa(V):P!==0&&(x=Wa(P));if(x===0)return 0;if(c!==0&&c!==x&&(c&j)===0&&(j=x&-x,P=c&-c,j>=P||j===16&&(P&4194240)!==0))return c;if((x&4)!==0&&(x|=m&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=x;0<c;)m=31-Hn(c),j=1<<m,x|=o[m],c&=~j;return x}function Gg(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sa(o,c){for(var m=o.suspendedLanes,x=o.pingedLanes,j=o.expirationTimes,P=o.pendingLanes;0<P;){var V=31-Hn(P),Q=1<<V,X=j[V];X===-1?((Q&m)===0||(Q&x)!==0)&&(j[V]=Gg(Q,c)):X<=c&&(o.expiredLanes|=Q),P&=~Q}}function jr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Yo(){var o=nc;return nc<<=1,(nc&4194240)===0&&(nc=64),o}function qa(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function Ka(o,c,m){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Hn(c),o[c]=m}function cs(o,c){var m=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<m;){var j=31-Hn(m),P=1<<j;c[j]=0,x[j]=-1,o[j]=-1,m&=~P}}function Qa(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var x=31-Hn(m),j=1<<x;j&c|o[x]&c&&(o[x]|=c),m&=~j}}var zt=0;function Xa(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var op,ic,lp,cp,dp,Vd=!1,Ai=[],mn=null,ai=null,oi=null,Ya=new Map,Or=new Map,Ii=[],Wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function up(o,c){switch(o){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":Ya.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(c.pointerId)}}function sr(o,c,m,x,j,P){return o===null||o.nativeEvent!==P?(o={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:P,targetContainers:[j]},c!==null&&(c=su(c),c!==null&&ic(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function qg(o,c,m,x,j){switch(c){case"focusin":return mn=sr(mn,o,c,m,x,j),!0;case"dragenter":return ai=sr(ai,o,c,m,x,j),!0;case"mouseover":return oi=sr(oi,o,c,m,x,j),!0;case"pointerover":var P=j.pointerId;return Ya.set(P,sr(Ya.get(P)||null,o,c,m,x,j)),!0;case"gotpointercapture":return P=j.pointerId,Or.set(P,sr(Or.get(P)||null,o,c,m,x,j)),!0}return!1}function hp(o){var c=sl(o.target);if(c!==null){var m=ri(c);if(m!==null){if(c=m.tag,c===13){if(c=qo(m),c!==null){o.blockedOn=c,dp(o.priority,function(){lp(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function na(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=ac(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);Qe=x,m.target.dispatchEvent(x),Qe=null}else return c=su(m),c!==null&&ic(c),o.blockedOn=m,!1;c.shift()}return!0}function Jo(o,c,m){na(o)&&m.delete(c)}function pp(){Vd=!1,mn!==null&&na(mn)&&(mn=null),ai!==null&&na(ai)&&(ai=null),oi!==null&&na(oi)&&(oi=null),Ya.forEach(Jo),Or.forEach(Jo)}function li(o,c){o.blockedOn===c&&(o.blockedOn=null,Vd||(Vd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pp)))}function ci(o){function c(j){return li(j,o)}if(0<Ai.length){li(Ai[0],o);for(var m=1;m<Ai.length;m++){var x=Ai[m];x.blockedOn===o&&(x.blockedOn=null)}}for(mn!==null&&li(mn,o),ai!==null&&li(ai,o),oi!==null&&li(oi,o),Ya.forEach(c),Or.forEach(c),m=0;m<Ii.length;m++)x=Ii[m],x.blockedOn===o&&(x.blockedOn=null);for(;0<Ii.length&&(m=Ii[0],m.blockedOn===null);)hp(m),m.blockedOn===null&&Ii.shift()}var ra=y.ReactCurrentBatchConfig,Ja=!0;function bs(o,c,m,x){var j=zt,P=ra.transition;ra.transition=null;try{zt=1,Ud(o,c,m,x)}finally{zt=j,ra.transition=P}}function Kg(o,c,m,x){var j=zt,P=ra.transition;ra.transition=null;try{zt=4,Ud(o,c,m,x)}finally{zt=j,ra.transition=P}}function Ud(o,c,m,x){if(Ja){var j=ac(o,c,m,x);if(j===null)ix(o,c,x,Zo,m),up(o,x);else if(qg(j,o,c,m,x))x.stopPropagation();else if(up(o,x),c&4&&-1<Wg.indexOf(o)){for(;j!==null;){var P=su(j);if(P!==null&&op(P),P=ac(o,c,m,x),P===null&&ix(o,c,x,Zo,m),P===j)break;j=P}j!==null&&x.stopPropagation()}else ix(o,c,x,null,m)}}var Zo=null;function ac(o,c,m,x){if(Zo=null,o=vt(x),o=sl(o),o!==null)if(c=ri(o),c===null)o=null;else if(m=c.tag,m===13){if(o=qo(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Zo=o,null}function zd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sp()){case Ko:return 1;case Ga:return 4;case $r:case $d:return 16;case np:return 536870912;default:return 16}default:return 16}}var Sr=null,oc=null,nr=null;function Hd(){if(nr)return nr;var o,c=oc,m=c.length,x,j="value"in Sr?Sr.value:Sr.textContent,P=j.length;for(o=0;o<m&&c[o]===j[o];o++);var V=m-o;for(x=1;x<=V&&c[m-x]===j[P-x];x++);return nr=j.slice(o,1<x?1-x:void 0)}function lc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Ri(){return!0}function Gd(){return!1}function fn(o){function c(m,x,j,P,V){this._reactName=m,this._targetInst=j,this.type=x,this.nativeEvent=P,this.target=V,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(m=o[Q],this[Q]=m?m(P):P[Q]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ri:Gd,this.isPropagationStopped=Gd,this}return ne(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),c}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=fn(di),Pi=ne({},di,{view:0,detail:0}),Qg=fn(Pi),dc,ia,Za,el=ne({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Za&&(Za&&o.type==="mousemove"?(dc=o.screenX-Za.screenX,ia=o.screenY-Za.screenY):ia=dc=0,Za=o),dc)},movementY:function(o){return"movementY"in o?o.movementY:ia}}),uc=fn(el),Wd=ne({},el,{dataTransfer:0}),mp=fn(Wd),hc=ne({},Pi,{relatedTarget:0}),pc=fn(hc),fp=ne({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),aa=fn(fp),gp=ne({},di,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xp=fn(gp),yp=ne({},di,{data:0}),qd=fn(yp),mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bp(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=vp[o])?!!c[o]:!1}function Li(){return bp}var f=ne({},Pi,{key:function(o){if(o.key){var c=mc[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=lc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Gn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(o){return o.type==="keypress"?lc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?lc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),A=fn(f),O=ne({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z=fn(O),ae=ne({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),me=fn(ae),Be=ne({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),os=fn(Be),Zs=ne({},el,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),qt=fn(Zs),rn=[9,13,27,32],Us=d&&"CompositionEvent"in window,Vr=null;d&&"documentMode"in document&&(Vr=document.documentMode);var Nr=d&&"TextEvent"in window&&!Vr,tl=d&&(!Us||Vr&&8<Vr&&11>=Vr),fc=" ",Ub=!1;function zb(o,c){switch(o){case"keyup":return rn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var gc=!1;function qA(o,c){switch(o){case"compositionend":return Hb(c);case"keypress":return c.which!==32?null:(Ub=!0,fc);case"textInput":return o=c.data,o===fc&&Ub?null:o;default:return null}}function KA(o,c){if(gc)return o==="compositionend"||!Us&&zb(o,c)?(o=Hd(),nr=oc=Sr=null,gc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return tl&&c.locale!=="ko"?null:c.data;default:return null}}var QA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!QA[o.type]:c==="textarea"}function Wb(o,c,m,x){Js(x),c=Np(c,"onChange"),0<c.length&&(m=new cc("onChange","change",null,m,x),o.push({event:m,listeners:c}))}var Kd=null,Qd=null;function XA(o){d_(o,0)}function _p(o){var c=_c(o);if(be(c))return o}function YA(o,c){if(o==="change")return c}var qb=!1;if(d){var Xg;if(d){var Yg="oninput"in document;if(!Yg){var Kb=document.createElement("div");Kb.setAttribute("oninput","return;"),Yg=typeof Kb.oninput=="function"}Xg=Yg}else Xg=!1;qb=Xg&&(!document.documentMode||9<document.documentMode)}function Qb(){Kd&&(Kd.detachEvent("onpropertychange",Xb),Qd=Kd=null)}function Xb(o){if(o.propertyName==="value"&&_p(Qd)){var c=[];Wb(c,Qd,o,vt(o)),ni(XA,c)}}function JA(o,c,m){o==="focusin"?(Qb(),Kd=c,Qd=m,Kd.attachEvent("onpropertychange",Xb)):o==="focusout"&&Qb()}function ZA(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return _p(Qd)}function e4(o,c){if(o==="click")return _p(c)}function t4(o,c){if(o==="input"||o==="change")return _p(c)}function s4(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ui=typeof Object.is=="function"?Object.is:s4;function Xd(o,c){if(ui(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var j=m[x];if(!u.call(c,j)||!ui(o[j],c[j]))return!1}return!0}function Yb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Jb(o,c){var m=Yb(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=c&&x>=c)return{node:m,offset:c-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Yb(m)}}function Zb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Zb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function e_(){for(var o=window,c=Ue();c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch(x){m=!1}if(m)o=c.contentWindow;else break;c=Ue(o.document)}return c}function Jg(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function n4(o){var c=e_(),m=o.focusedElem,x=o.selectionRange;if(c!==m&&m&&m.ownerDocument&&Zb(m.ownerDocument.documentElement,m)){if(x!==null&&Jg(m)){if(c=x.start,o=x.end,o===void 0&&(o=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(o,m.value.length);else if(o=(c=m.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=m.textContent.length,P=Math.min(x.start,j);x=x.end===void 0?P:Math.min(x.end,j),!o.extend&&P>x&&(j=x,x=P,P=j),j=Jb(m,P);var V=Jb(m,x);j&&V&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==V.node||o.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),P>x?(o.addRange(c),o.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),o.addRange(c)))}}for(c=[],o=m;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)o=c[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var r4=d&&"documentMode"in document&&11>=document.documentMode,xc=null,Zg=null,Yd=null,ex=!1;function t_(o,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ex||xc==null||xc!==Ue(x)||(x=xc,"selectionStart"in x&&Jg(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Yd&&Xd(Yd,x)||(Yd=x,x=Np(Zg,"onSelect"),0<x.length&&(c=new cc("onSelect","select",null,c,m),o.push({event:c,listeners:x}),c.target=xc)))}function wp(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var yc={animationend:wp("Animation","AnimationEnd"),animationiteration:wp("Animation","AnimationIteration"),animationstart:wp("Animation","AnimationStart"),transitionend:wp("Transition","TransitionEnd")},tx={},s_={};d&&(s_=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function jp(o){if(tx[o])return tx[o];if(!yc[o])return o;var c=yc[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in s_)return tx[o]=c[m];return o}var n_=jp("animationend"),r_=jp("animationiteration"),i_=jp("animationstart"),a_=jp("transitionend"),o_=new Map,l_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(o,c){o_.set(o,c),a(c,[o])}for(var sx=0;sx<l_.length;sx++){var nx=l_[sx],i4=nx.toLowerCase(),a4=nx[0].toUpperCase()+nx.slice(1);eo(i4,"on"+a4)}eo(n_,"onAnimationEnd"),eo(r_,"onAnimationIteration"),eo(i_,"onAnimationStart"),eo("dblclick","onDoubleClick"),eo("focusin","onFocus"),eo("focusout","onBlur"),eo(a_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jd));function c_(o,c,m){var x=o.type||"unknown-event";o.currentTarget=m,Zh(x,c,void 0,o),o.currentTarget=null}function d_(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],j=x.event;x=x.listeners;e:{var P=void 0;if(c)for(var V=x.length-1;0<=V;V--){var Q=x[V],X=Q.instance,pe=Q.currentTarget;if(Q=Q.listener,X!==P&&j.isPropagationStopped())break e;c_(j,Q,pe),P=X}else for(V=0;V<x.length;V++){if(Q=x[V],X=Q.instance,pe=Q.currentTarget,Q=Q.listener,X!==P&&j.isPropagationStopped())break e;c_(j,Q,pe),P=X}}}if(es)throw o=_r,es=!1,_r=null,o}function xs(o,c){var m=c[ux];m===void 0&&(m=c[ux]=new Set);var x=o+"__bubble";m.has(x)||(u_(c,o,2,!1),m.add(x))}function rx(o,c,m){var x=0;c&&(x|=4),u_(m,o,x,c)}var Sp="_reactListening"+Math.random().toString(36).slice(2);function Zd(o){if(!o[Sp]){o[Sp]=!0,r.forEach(function(m){m!=="selectionchange"&&(o4.has(m)||rx(m,!1,o),rx(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Sp]||(c[Sp]=!0,rx("selectionchange",!1,c))}}function u_(o,c,m,x){switch(zd(c)){case 1:var j=bs;break;case 4:j=Kg;break;default:j=Ud}m=j.bind(null,c,m,o),j=void 0,!ea||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),x?j!==void 0?o.addEventListener(c,m,{capture:!0,passive:j}):o.addEventListener(c,m,!0):j!==void 0?o.addEventListener(c,m,{passive:j}):o.addEventListener(c,m,!1)}function ix(o,c,m,x,j){var P=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var V=x.tag;if(V===3||V===4){var Q=x.stateNode.containerInfo;if(Q===j||Q.nodeType===8&&Q.parentNode===j)break;if(V===4)for(V=x.return;V!==null;){var X=V.tag;if((X===3||X===4)&&(X=V.stateNode.containerInfo,X===j||X.nodeType===8&&X.parentNode===j))return;V=V.return}for(;Q!==null;){if(V=sl(Q),V===null)return;if(X=V.tag,X===5||X===6){x=P=V;continue e}Q=Q.parentNode}}x=x.return}ni(function(){var pe=P,Se=vt(m),Ae=[];e:{var je=o_.get(o);if(je!==void 0){var Ge=cc,Xe=o;switch(o){case"keypress":if(lc(m)===0)break e;case"keydown":case"keyup":Ge=A;break;case"focusin":Xe="focus",Ge=pc;break;case"focusout":Xe="blur",Ge=pc;break;case"beforeblur":case"afterblur":Ge=pc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=me;break;case n_:case r_:case i_:Ge=aa;break;case a_:Ge=os;break;case"scroll":Ge=Qg;break;case"wheel":Ge=qt;break;case"copy":case"cut":case"paste":Ge=xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=z}var Ye=(c&4)!==0,Bs=!Ye&&o==="scroll",oe=Ye?je!==null?je+"Capture":null:je;Ye=[];for(var te=pe,de;te!==null;){de=te;var Pe=de.stateNode;if(de.tag===5&&Pe!==null&&(de=Pe,oe!==null&&(Pe=ks(te,oe),Pe!=null&&Ye.push(eu(te,Pe,de)))),Bs)break;te=te.return}0<Ye.length&&(je=new Ge(je,Xe,null,m,Se),Ae.push({event:je,listeners:Ye}))}}if((c&7)===0){e:{if(je=o==="mouseover"||o==="pointerover",Ge=o==="mouseout"||o==="pointerout",je&&m!==Qe&&(Xe=m.relatedTarget||m.fromElement)&&(sl(Xe)||Xe[oa]))break e;if((Ge||je)&&(je=Se.window===Se?Se:(je=Se.ownerDocument)?je.defaultView||je.parentWindow:window,Ge?(Xe=m.relatedTarget||m.toElement,Ge=pe,Xe=Xe?sl(Xe):null,Xe!==null&&(Bs=ri(Xe),Xe!==Bs||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(Ge=null,Xe=pe),Ge!==Xe)){if(Ye=uc,Pe="onMouseLeave",oe="onMouseEnter",te="mouse",(o==="pointerout"||o==="pointerover")&&(Ye=z,Pe="onPointerLeave",oe="onPointerEnter",te="pointer"),Bs=Ge==null?je:_c(Ge),de=Xe==null?je:_c(Xe),je=new Ye(Pe,te+"leave",Ge,m,Se),je.target=Bs,je.relatedTarget=de,Pe=null,sl(Se)===pe&&(Ye=new Ye(oe,te+"enter",Xe,m,Se),Ye.target=de,Ye.relatedTarget=Bs,Pe=Ye),Bs=Pe,Ge&&Xe)t:{for(Ye=Ge,oe=Xe,te=0,de=Ye;de;de=vc(de))te++;for(de=0,Pe=oe;Pe;Pe=vc(Pe))de++;for(;0<te-de;)Ye=vc(Ye),te--;for(;0<de-te;)oe=vc(oe),de--;for(;te--;){if(Ye===oe||oe!==null&&Ye===oe.alternate)break t;Ye=vc(Ye),oe=vc(oe)}Ye=null}else Ye=null;Ge!==null&&h_(Ae,je,Ge,Ye,!1),Xe!==null&&Bs!==null&&h_(Ae,Bs,Xe,Ye,!0)}}e:{if(je=pe?_c(pe):window,Ge=je.nodeName&&je.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&je.type==="file")var et=YA;else if(Gb(je))if(qb)et=t4;else{et=ZA;var it=JA}else(Ge=je.nodeName)&&Ge.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(et=e4);if(et&&(et=et(o,pe))){Wb(Ae,et,m,Se);break e}it&&it(o,je,pe),o==="focusout"&&(it=je._wrapperState)&&it.controlled&&je.type==="number"&&is(je,"number",je.value)}switch(it=pe?_c(pe):window,o){case"focusin":(Gb(it)||it.contentEditable==="true")&&(xc=it,Zg=pe,Yd=null);break;case"focusout":Yd=Zg=xc=null;break;case"mousedown":ex=!0;break;case"contextmenu":case"mouseup":case"dragend":ex=!1,t_(Ae,m,Se);break;case"selectionchange":if(r4)break;case"keydown":case"keyup":t_(Ae,m,Se)}var at;if(Us)e:{switch(o){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else gc?zb(o,m)&&(pt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(pt="onCompositionStart");pt&&(tl&&m.locale!=="ko"&&(gc||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&gc&&(at=Hd()):(Sr=Se,oc="value"in Sr?Sr.value:Sr.textContent,gc=!0)),it=Np(pe,pt),0<it.length&&(pt=new qd(pt,o,null,m,Se),Ae.push({event:pt,listeners:it}),at?pt.data=at:(at=Hb(m),at!==null&&(pt.data=at)))),(at=Nr?qA(o,m):KA(o,m))&&(pe=Np(pe,"onBeforeInput"),0<pe.length&&(Se=new qd("onBeforeInput","beforeinput",null,m,Se),Ae.push({event:Se,listeners:pe}),Se.data=at))}d_(Ae,c)})}function eu(o,c,m){return{instance:o,listener:c,currentTarget:m}}function Np(o,c){for(var m=c+"Capture",x=[];o!==null;){var j=o,P=j.stateNode;j.tag===5&&P!==null&&(j=P,P=ks(o,m),P!=null&&x.unshift(eu(o,P,j)),P=ks(o,c),P!=null&&x.push(eu(o,P,j))),o=o.return}return x}function vc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function h_(o,c,m,x,j){for(var P=c._reactName,V=[];m!==null&&m!==x;){var Q=m,X=Q.alternate,pe=Q.stateNode;if(X!==null&&X===x)break;Q.tag===5&&pe!==null&&(Q=pe,j?(X=ks(m,P),X!=null&&V.unshift(eu(m,X,Q))):j||(X=ks(m,P),X!=null&&V.push(eu(m,X,Q)))),m=m.return}V.length!==0&&o.push({event:c,listeners:V})}var l4=/\r\n?/g,c4=/\u0000|\uFFFD/g;function p_(o){return(typeof o=="string"?o:""+o).replace(l4,`
`).replace(c4,"")}function kp(o,c,m){if(c=p_(c),p_(o)!==c&&m)throw Error(s(425))}function Cp(){}var ax=null,ox=null;function lx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var cx=typeof setTimeout=="function"?setTimeout:void 0,d4=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,u4=typeof queueMicrotask=="function"?queueMicrotask:typeof m_!="undefined"?function(o){return m_.resolve(null).then(o).catch(h4)}:cx;function h4(o){setTimeout(function(){throw o})}function dx(o,c){var m=c,x=0;do{var j=m.nextSibling;if(o.removeChild(m),j&&j.nodeType===8)if(m=j.data,m==="/$"){if(x===0){o.removeChild(j),ci(c);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=j}while(m);ci(c)}function to(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function f_(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}var bc=Math.random().toString(36).slice(2),Di="__reactFiber$"+bc,tu="__reactProps$"+bc,oa="__reactContainer$"+bc,ux="__reactEvents$"+bc,p4="__reactListeners$"+bc,m4="__reactHandles$"+bc;function sl(o){var c=o[Di];if(c)return c;for(var m=o.parentNode;m;){if(c=m[oa]||m[Di]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=f_(o);o!==null;){if(m=o[Di])return m;o=f_(o)}return c}o=m,m=o.parentNode}return null}function su(o){return o=o[Di]||o[oa],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function _c(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(s(33))}function Tp(o){return o[tu]||null}var hx=[],wc=-1;function so(o){return{current:o}}function ys(o){0>wc||(o.current=hx[wc],hx[wc]=null,wc--)}function ps(o,c){wc++,hx[wc]=o.current,o.current=c}var no={},In=so(no),rr=so(!1),nl=no;function jc(o,c){var m=o.type.contextTypes;if(!m)return no;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var j={},P;for(P in m)j[P]=c[P];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function ir(o){return o=o.childContextTypes,o!=null}function Ep(){ys(rr),ys(In)}function g_(o,c,m){if(In.current!==no)throw Error(s(168));ps(In,c),ps(rr,m)}function x_(o,c,m){var x=o.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var j in x)if(!(j in c))throw Error(s(108,ge(o)||"Unknown",j));return ne({},m,x)}function Ap(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||no,nl=In.current,ps(In,o),ps(rr,rr.current),!0}function y_(o,c,m){var x=o.stateNode;if(!x)throw Error(s(169));m?(o=x_(o,c,nl),x.__reactInternalMemoizedMergedChildContext=o,ys(rr),ys(In),ps(In,o)):ys(rr),ps(rr,m)}var la=null,Ip=!1,px=!1;function v_(o){la===null?la=[o]:la.push(o)}function f4(o){Ip=!0,v_(o)}function ro(){if(!px&&la!==null){px=!0;var o=0,c=zt;try{var m=la;for(zt=1;o<m.length;o++){var x=m[o];do x=x(!0);while(x!==null)}la=null,Ip=!1}catch(j){throw la!==null&&(la=la.slice(o+1)),sc(Ko,ro),j}finally{zt=c,px=!1}}return null}var Sc=[],Nc=0,Rp=null,Pp=0,Ur=[],zr=0,rl=null,ca=1,da="";function il(o,c){Sc[Nc++]=Pp,Sc[Nc++]=Rp,Rp=o,Pp=c}function b_(o,c,m){Ur[zr++]=ca,Ur[zr++]=da,Ur[zr++]=rl,rl=o;var x=ca;o=da;var j=32-Hn(x)-1;x&=~(1<<j),m+=1;var P=32-Hn(c)+j;if(30<P){var V=j-j%5;P=(x&(1<<V)-1).toString(32),x>>=V,j-=V,ca=1<<32-Hn(c)+j|m<<j|x,da=P+o}else ca=1<<P|m<<j|x,da=o}function mx(o){o.return!==null&&(il(o,1),b_(o,1,0))}function fx(o){for(;o===Rp;)Rp=Sc[--Nc],Sc[Nc]=null,Pp=Sc[--Nc],Sc[Nc]=null;for(;o===rl;)rl=Ur[--zr],Ur[zr]=null,da=Ur[--zr],Ur[zr]=null,ca=Ur[--zr],Ur[zr]=null}var kr=null,Cr=null,_s=!1,hi=null;function __(o,c){var m=qr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=o,c=o.deletions,c===null?(o.deletions=[m],o.flags|=16):c.push(m)}function w_(o,c){switch(o.tag){case 5:var m=o.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,kr=o,Cr=to(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,kr=o,Cr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=rl!==null?{id:ca,overflow:da}:null,o.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=qr(18,null,null,0),m.stateNode=c,m.return=o,o.child=m,kr=o,Cr=null,!0):!1;default:return!1}}function gx(o){return(o.mode&1)!==0&&(o.flags&128)===0}function xx(o){if(_s){var c=Cr;if(c){var m=c;if(!w_(o,c)){if(gx(o))throw Error(s(418));c=to(m.nextSibling);var x=kr;c&&w_(o,c)?__(x,m):(o.flags=o.flags&-4097|2,_s=!1,kr=o)}}else{if(gx(o))throw Error(s(418));o.flags=o.flags&-4097|2,_s=!1,kr=o}}}function j_(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;kr=o}function Lp(o){if(o!==kr)return!1;if(!_s)return j_(o),_s=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!lx(o.type,o.memoizedProps)),c&&(c=Cr)){if(gx(o))throw S_(),Error(s(418));for(;c;)__(o,c),c=to(c.nextSibling)}if(j_(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(c===0){Cr=to(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}o=o.nextSibling}Cr=null}}else Cr=kr?to(o.stateNode.nextSibling):null;return!0}function S_(){for(var o=Cr;o;)o=to(o.nextSibling)}function kc(){Cr=kr=null,_s=!1}function yx(o){hi===null?hi=[o]:hi.push(o)}var g4=y.ReactCurrentBatchConfig;function nu(o,c,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(s(309));var x=m.stateNode}if(!x)throw Error(s(147,o));var j=x,P=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(V){var Q=j.refs;V===null?delete Q[P]:Q[P]=V},c._stringRef=P,c)}if(typeof o!="string")throw Error(s(284));if(!m._owner)throw Error(s(290,o))}return o}function Dp(o,c){throw o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function N_(o){var c=o._init;return c(o._payload)}function k_(o){function c(oe,te){if(o){var de=oe.deletions;de===null?(oe.deletions=[te],oe.flags|=16):de.push(te)}}function m(oe,te){if(!o)return null;for(;te!==null;)c(oe,te),te=te.sibling;return null}function x(oe,te){for(oe=new Map;te!==null;)te.key!==null?oe.set(te.key,te):oe.set(te.index,te),te=te.sibling;return oe}function j(oe,te){return oe=po(oe,te),oe.index=0,oe.sibling=null,oe}function P(oe,te,de){return oe.index=de,o?(de=oe.alternate,de!==null?(de=de.index,de<te?(oe.flags|=2,te):de):(oe.flags|=2,te)):(oe.flags|=1048576,te)}function V(oe){return o&&oe.alternate===null&&(oe.flags|=2),oe}function Q(oe,te,de,Pe){return te===null||te.tag!==6?(te=cy(de,oe.mode,Pe),te.return=oe,te):(te=j(te,de),te.return=oe,te)}function X(oe,te,de,Pe){var et=de.type;return et===C?Se(oe,te,de.props.children,Pe,de.key):te!==null&&(te.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===q&&N_(et)===te.type)?(Pe=j(te,de.props),Pe.ref=nu(oe,te,de),Pe.return=oe,Pe):(Pe=im(de.type,de.key,de.props,null,oe.mode,Pe),Pe.ref=nu(oe,te,de),Pe.return=oe,Pe)}function pe(oe,te,de,Pe){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=dy(de,oe.mode,Pe),te.return=oe,te):(te=j(te,de.children||[]),te.return=oe,te)}function Se(oe,te,de,Pe,et){return te===null||te.tag!==7?(te=pl(de,oe.mode,Pe,et),te.return=oe,te):(te=j(te,de),te.return=oe,te)}function Ae(oe,te,de){if(typeof te=="string"&&te!==""||typeof te=="number")return te=cy(""+te,oe.mode,de),te.return=oe,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return de=im(te.type,te.key,te.props,null,oe.mode,de),de.ref=nu(oe,null,te),de.return=oe,de;case D:return te=dy(te,oe.mode,de),te.return=oe,te;case q:var Pe=te._init;return Ae(oe,Pe(te._payload),de)}if(Ee(te)||se(te))return te=pl(te,oe.mode,de,null),te.return=oe,te;Dp(oe,te)}return null}function je(oe,te,de,Pe){var et=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return et!==null?null:Q(oe,te,""+de,Pe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case _:return de.key===et?X(oe,te,de,Pe):null;case D:return de.key===et?pe(oe,te,de,Pe):null;case q:return et=de._init,je(oe,te,et(de._payload),Pe)}if(Ee(de)||se(de))return et!==null?null:Se(oe,te,de,Pe,null);Dp(oe,de)}return null}function Ge(oe,te,de,Pe,et){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return oe=oe.get(de)||null,Q(te,oe,""+Pe,et);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case _:return oe=oe.get(Pe.key===null?de:Pe.key)||null,X(te,oe,Pe,et);case D:return oe=oe.get(Pe.key===null?de:Pe.key)||null,pe(te,oe,Pe,et);case q:var it=Pe._init;return Ge(oe,te,de,it(Pe._payload),et)}if(Ee(Pe)||se(Pe))return oe=oe.get(de)||null,Se(te,oe,Pe,et,null);Dp(te,Pe)}return null}function Xe(oe,te,de,Pe){for(var et=null,it=null,at=te,pt=te=0,ln=null;at!==null&&pt<de.length;pt++){at.index>pt?(ln=at,at=null):ln=at.sibling;var ts=je(oe,at,de[pt],Pe);if(ts===null){at===null&&(at=ln);break}o&&at&&ts.alternate===null&&c(oe,at),te=P(ts,te,pt),it===null?et=ts:it.sibling=ts,it=ts,at=ln}if(pt===de.length)return m(oe,at),_s&&il(oe,pt),et;if(at===null){for(;pt<de.length;pt++)at=Ae(oe,de[pt],Pe),at!==null&&(te=P(at,te,pt),it===null?et=at:it.sibling=at,it=at);return _s&&il(oe,pt),et}for(at=x(oe,at);pt<de.length;pt++)ln=Ge(at,oe,pt,de[pt],Pe),ln!==null&&(o&&ln.alternate!==null&&at.delete(ln.key===null?pt:ln.key),te=P(ln,te,pt),it===null?et=ln:it.sibling=ln,it=ln);return o&&at.forEach(function(mo){return c(oe,mo)}),_s&&il(oe,pt),et}function Ye(oe,te,de,Pe){var et=se(de);if(typeof et!="function")throw Error(s(150));if(de=et.call(de),de==null)throw Error(s(151));for(var it=et=null,at=te,pt=te=0,ln=null,ts=de.next();at!==null&&!ts.done;pt++,ts=de.next()){at.index>pt?(ln=at,at=null):ln=at.sibling;var mo=je(oe,at,ts.value,Pe);if(mo===null){at===null&&(at=ln);break}o&&at&&mo.alternate===null&&c(oe,at),te=P(mo,te,pt),it===null?et=mo:it.sibling=mo,it=mo,at=ln}if(ts.done)return m(oe,at),_s&&il(oe,pt),et;if(at===null){for(;!ts.done;pt++,ts=de.next())ts=Ae(oe,ts.value,Pe),ts!==null&&(te=P(ts,te,pt),it===null?et=ts:it.sibling=ts,it=ts);return _s&&il(oe,pt),et}for(at=x(oe,at);!ts.done;pt++,ts=de.next())ts=Ge(at,oe,pt,ts.value,Pe),ts!==null&&(o&&ts.alternate!==null&&at.delete(ts.key===null?pt:ts.key),te=P(ts,te,pt),it===null?et=ts:it.sibling=ts,it=ts);return o&&at.forEach(function(Q4){return c(oe,Q4)}),_s&&il(oe,pt),et}function Bs(oe,te,de,Pe){if(typeof de=="object"&&de!==null&&de.type===C&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case _:e:{for(var et=de.key,it=te;it!==null;){if(it.key===et){if(et=de.type,et===C){if(it.tag===7){m(oe,it.sibling),te=j(it,de.props.children),te.return=oe,oe=te;break e}}else if(it.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===q&&N_(et)===it.type){m(oe,it.sibling),te=j(it,de.props),te.ref=nu(oe,it,de),te.return=oe,oe=te;break e}m(oe,it);break}else c(oe,it);it=it.sibling}de.type===C?(te=pl(de.props.children,oe.mode,Pe,de.key),te.return=oe,oe=te):(Pe=im(de.type,de.key,de.props,null,oe.mode,Pe),Pe.ref=nu(oe,te,de),Pe.return=oe,oe=Pe)}return V(oe);case D:e:{for(it=de.key;te!==null;){if(te.key===it)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){m(oe,te.sibling),te=j(te,de.children||[]),te.return=oe,oe=te;break e}else{m(oe,te);break}else c(oe,te);te=te.sibling}te=dy(de,oe.mode,Pe),te.return=oe,oe=te}return V(oe);case q:return it=de._init,Bs(oe,te,it(de._payload),Pe)}if(Ee(de))return Xe(oe,te,de,Pe);if(se(de))return Ye(oe,te,de,Pe);Dp(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,te!==null&&te.tag===6?(m(oe,te.sibling),te=j(te,de),te.return=oe,oe=te):(m(oe,te),te=cy(de,oe.mode,Pe),te.return=oe,oe=te),V(oe)):m(oe,te)}return Bs}var Cc=k_(!0),C_=k_(!1),Mp=so(null),Fp=null,Tc=null,vx=null;function bx(){vx=Tc=Fp=null}function _x(o){var c=Mp.current;ys(Mp),o._currentValue=c}function wx(o,c,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===m)break;o=o.return}}function Ec(o,c){Fp=o,vx=Tc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(ar=!0),o.firstContext=null)}function Hr(o){var c=o._currentValue;if(vx!==o)if(o={context:o,memoizedValue:c,next:null},Tc===null){if(Fp===null)throw Error(s(308));Tc=o,Fp.dependencies={lanes:0,firstContext:o}}else Tc=Tc.next=o;return c}var al=null;function jx(o){al===null?al=[o]:al.push(o)}function T_(o,c,m,x){var j=c.interleaved;return j===null?(m.next=m,jx(c)):(m.next=j.next,j.next=m),c.interleaved=m,ua(o,x)}function ua(o,c){o.lanes|=c;var m=o.alternate;for(m!==null&&(m.lanes|=c),m=o,o=o.return;o!==null;)o.childLanes|=c,m=o.alternate,m!==null&&(m.childLanes|=c),m=o,o=o.return;return m.tag===3?m.stateNode:null}var io=!1;function Sx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E_(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ha(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function ao(o,c,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Xt&2)!==0){var j=x.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),x.pending=c,ua(o,m)}return j=x.interleaved,j===null?(c.next=c,jx(x)):(c.next=j.next,j.next=c),x.interleaved=c,ua(o,m)}function Bp(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,Qa(o,m)}}function A_(o,c){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var j=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var V={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};P===null?j=P=V:P=P.next=V,m=m.next}while(m!==null);P===null?j=P=c:P=P.next=c}else j=P=c;m={baseState:x.baseState,firstBaseUpdate:j,lastBaseUpdate:P,shared:x.shared,effects:x.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}function $p(o,c,m,x){var j=o.updateQueue;io=!1;var P=j.firstBaseUpdate,V=j.lastBaseUpdate,Q=j.shared.pending;if(Q!==null){j.shared.pending=null;var X=Q,pe=X.next;X.next=null,V===null?P=pe:V.next=pe,V=X;var Se=o.alternate;Se!==null&&(Se=Se.updateQueue,Q=Se.lastBaseUpdate,Q!==V&&(Q===null?Se.firstBaseUpdate=pe:Q.next=pe,Se.lastBaseUpdate=X))}if(P!==null){var Ae=j.baseState;V=0,Se=pe=X=null,Q=P;do{var je=Q.lane,Ge=Q.eventTime;if((x&je)===je){Se!==null&&(Se=Se.next={eventTime:Ge,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Xe=o,Ye=Q;switch(je=c,Ge=m,Ye.tag){case 1:if(Xe=Ye.payload,typeof Xe=="function"){Ae=Xe.call(Ge,Ae,je);break e}Ae=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Ye.payload,je=typeof Xe=="function"?Xe.call(Ge,Ae,je):Xe,je==null)break e;Ae=ne({},Ae,je);break e;case 2:io=!0}}Q.callback!==null&&Q.lane!==0&&(o.flags|=64,je=j.effects,je===null?j.effects=[Q]:je.push(Q))}else Ge={eventTime:Ge,lane:je,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Se===null?(pe=Se=Ge,X=Ae):Se=Se.next=Ge,V|=je;if(Q=Q.next,Q===null){if(Q=j.shared.pending,Q===null)break;je=Q,Q=je.next,je.next=null,j.lastBaseUpdate=je,j.shared.pending=null}}while(!0);if(Se===null&&(X=Ae),j.baseState=X,j.firstBaseUpdate=pe,j.lastBaseUpdate=Se,c=j.shared.interleaved,c!==null){j=c;do V|=j.lane,j=j.next;while(j!==c)}else P===null&&(j.shared.lanes=0);cl|=V,o.lanes=V,o.memoizedState=Ae}}function I_(o,c,m){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var x=o[c],j=x.callback;if(j!==null){if(x.callback=null,x=m,typeof j!="function")throw Error(s(191,j));j.call(x)}}}var ru={},Mi=so(ru),iu=so(ru),au=so(ru);function ol(o){if(o===ru)throw Error(s(174));return o}function Nx(o,c){switch(ps(au,c),ps(iu,o),ps(Mi,ru),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ut(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Ut(c,o)}ys(Mi),ps(Mi,c)}function Ac(){ys(Mi),ys(iu),ys(au)}function R_(o){ol(au.current);var c=ol(Mi.current),m=Ut(c,o.type);c!==m&&(ps(iu,o),ps(Mi,m))}function kx(o){iu.current===o&&(ys(Mi),ys(iu))}var Cs=so(0);function Op(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Cx=[];function Tx(){for(var o=0;o<Cx.length;o++)Cx[o]._workInProgressVersionPrimary=null;Cx.length=0}var Vp=y.ReactCurrentDispatcher,Ex=y.ReactCurrentBatchConfig,ll=0,Ts=null,en=null,an=null,Up=!1,ou=!1,lu=0,x4=0;function Rn(){throw Error(s(321))}function Ax(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!ui(o[m],c[m]))return!1;return!0}function Ix(o,c,m,x,j,P){if(ll=P,Ts=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Vp.current=o===null||o.memoizedState===null?_4:w4,o=m(x,j),ou){P=0;do{if(ou=!1,lu=0,25<=P)throw Error(s(301));P+=1,an=en=null,c.updateQueue=null,Vp.current=j4,o=m(x,j)}while(ou)}if(Vp.current=Gp,c=en!==null&&en.next!==null,ll=0,an=en=Ts=null,Up=!1,c)throw Error(s(300));return o}function Rx(){var o=lu!==0;return lu=0,o}function Fi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Ts.memoizedState=an=o:an=an.next=o,an}function Gr(){if(en===null){var o=Ts.alternate;o=o!==null?o.memoizedState:null}else o=en.next;var c=an===null?Ts.memoizedState:an.next;if(c!==null)an=c,en=o;else{if(o===null)throw Error(s(310));en=o,o={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},an===null?Ts.memoizedState=an=o:an=an.next=o}return an}function cu(o,c){return typeof c=="function"?c(o):c}function Px(o){var c=Gr(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=o;var x=en,j=x.baseQueue,P=m.pending;if(P!==null){if(j!==null){var V=j.next;j.next=P.next,P.next=V}x.baseQueue=j=P,m.pending=null}if(j!==null){P=j.next,x=x.baseState;var Q=V=null,X=null,pe=P;do{var Se=pe.lane;if((ll&Se)===Se)X!==null&&(X=X.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),x=pe.hasEagerState?pe.eagerState:o(x,pe.action);else{var Ae={lane:Se,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};X===null?(Q=X=Ae,V=x):X=X.next=Ae,Ts.lanes|=Se,cl|=Se}pe=pe.next}while(pe!==null&&pe!==P);X===null?V=x:X.next=Q,ui(x,c.memoizedState)||(ar=!0),c.memoizedState=x,c.baseState=V,c.baseQueue=X,m.lastRenderedState=x}if(o=m.interleaved,o!==null){j=o;do P=j.lane,Ts.lanes|=P,cl|=P,j=j.next;while(j!==o)}else j===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function Lx(o){var c=Gr(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=o;var x=m.dispatch,j=m.pending,P=c.memoizedState;if(j!==null){m.pending=null;var V=j=j.next;do P=o(P,V.action),V=V.next;while(V!==j);ui(P,c.memoizedState)||(ar=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),m.lastRenderedState=P}return[P,x]}function P_(){}function L_(o,c){var m=Ts,x=Gr(),j=c(),P=!ui(x.memoizedState,j);if(P&&(x.memoizedState=j,ar=!0),x=x.queue,Dx(F_.bind(null,m,x,o),[o]),x.getSnapshot!==c||P||an!==null&&an.memoizedState.tag&1){if(m.flags|=2048,du(9,M_.bind(null,m,x,j,c),void 0,null),on===null)throw Error(s(349));(ll&30)!==0||D_(m,c,j)}return j}function D_(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Ts.updateQueue,c===null?(c={lastEffect:null,stores:null},Ts.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function M_(o,c,m,x){c.value=m,c.getSnapshot=x,B_(c)&&$_(o)}function F_(o,c,m){return m(function(){B_(c)&&$_(o)})}function B_(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!ui(o,m)}catch(x){return!0}}function $_(o){var c=ua(o,1);c!==null&&gi(c,o,1,-1)}function O_(o){var c=Fi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:o},c.queue=o,o=o.dispatch=b4.bind(null,Ts,o),[c.memoizedState,o]}function du(o,c,m,x){return o={tag:o,create:c,destroy:m,deps:x,next:null},c=Ts.updateQueue,c===null?(c={lastEffect:null,stores:null},Ts.updateQueue=c,c.lastEffect=o.next=o):(m=c.lastEffect,m===null?c.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,c.lastEffect=o)),o}function V_(){return Gr().memoizedState}function zp(o,c,m,x){var j=Fi();Ts.flags|=o,j.memoizedState=du(1|c,m,void 0,x===void 0?null:x)}function Hp(o,c,m,x){var j=Gr();x=x===void 0?null:x;var P=void 0;if(en!==null){var V=en.memoizedState;if(P=V.destroy,x!==null&&Ax(x,V.deps)){j.memoizedState=du(c,m,P,x);return}}Ts.flags|=o,j.memoizedState=du(1|c,m,P,x)}function U_(o,c){return zp(8390656,8,o,c)}function Dx(o,c){return Hp(2048,8,o,c)}function z_(o,c){return Hp(4,2,o,c)}function H_(o,c){return Hp(4,4,o,c)}function G_(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function W_(o,c,m){return m=m!=null?m.concat([o]):null,Hp(4,4,G_.bind(null,c,o),m)}function Mx(){}function q_(o,c){var m=Gr();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&Ax(c,x[1])?x[0]:(m.memoizedState=[o,c],o)}function K_(o,c){var m=Gr();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&Ax(c,x[1])?x[0]:(o=o(),m.memoizedState=[o,c],o)}function Q_(o,c,m){return(ll&21)===0?(o.baseState&&(o.baseState=!1,ar=!0),o.memoizedState=m):(ui(m,c)||(m=Yo(),Ts.lanes|=m,cl|=m,o.baseState=!0),c)}function y4(o,c){var m=zt;zt=m!==0&&4>m?m:4,o(!0);var x=Ex.transition;Ex.transition={};try{o(!1),c()}finally{zt=m,Ex.transition=x}}function X_(){return Gr().memoizedState}function v4(o,c,m){var x=uo(o);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},Y_(o))J_(c,m);else if(m=T_(o,c,m,x),m!==null){var j=qn();gi(m,o,x,j),Z_(m,c,x)}}function b4(o,c,m){var x=uo(o),j={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(Y_(o))J_(c,j);else{var P=o.alternate;if(o.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var V=c.lastRenderedState,Q=P(V,m);if(j.hasEagerState=!0,j.eagerState=Q,ui(Q,V)){var X=c.interleaved;X===null?(j.next=j,jx(c)):(j.next=X.next,X.next=j),c.interleaved=j;return}}catch(pe){}finally{}m=T_(o,c,j,x),m!==null&&(j=qn(),gi(m,o,x,j),Z_(m,c,x))}}function Y_(o){var c=o.alternate;return o===Ts||c!==null&&c===Ts}function J_(o,c){ou=Up=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function Z_(o,c,m){if((m&4194240)!==0){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,Qa(o,m)}}var Gp={readContext:Hr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},_4={readContext:Hr,useCallback:function(o,c){return Fi().memoizedState=[o,c===void 0?null:c],o},useContext:Hr,useEffect:U_,useImperativeHandle:function(o,c,m){return m=m!=null?m.concat([o]):null,zp(4194308,4,G_.bind(null,c,o),m)},useLayoutEffect:function(o,c){return zp(4194308,4,o,c)},useInsertionEffect:function(o,c){return zp(4,2,o,c)},useMemo:function(o,c){var m=Fi();return c=c===void 0?null:c,o=o(),m.memoizedState=[o,c],o},useReducer:function(o,c,m){var x=Fi();return c=m!==void 0?m(c):c,x.memoizedState=x.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},x.queue=o,o=o.dispatch=v4.bind(null,Ts,o),[x.memoizedState,o]},useRef:function(o){var c=Fi();return o={current:o},c.memoizedState=o},useState:O_,useDebugValue:Mx,useDeferredValue:function(o){return Fi().memoizedState=o},useTransition:function(){var o=O_(!1),c=o[0];return o=y4.bind(null,o[1]),Fi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,m){var x=Ts,j=Fi();if(_s){if(m===void 0)throw Error(s(407));m=m()}else{if(m=c(),on===null)throw Error(s(349));(ll&30)!==0||D_(x,c,m)}j.memoizedState=m;var P={value:m,getSnapshot:c};return j.queue=P,U_(F_.bind(null,x,P,o),[o]),x.flags|=2048,du(9,M_.bind(null,x,P,m,c),void 0,null),m},useId:function(){var o=Fi(),c=on.identifierPrefix;if(_s){var m=da,x=ca;m=(x&~(1<<32-Hn(x)-1)).toString(32)+m,c=":"+c+"R"+m,m=lu++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=x4++,c=":"+c+"r"+m.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},w4={readContext:Hr,useCallback:q_,useContext:Hr,useEffect:Dx,useImperativeHandle:W_,useInsertionEffect:z_,useLayoutEffect:H_,useMemo:K_,useReducer:Px,useRef:V_,useState:function(){return Px(cu)},useDebugValue:Mx,useDeferredValue:function(o){var c=Gr();return Q_(c,en.memoizedState,o)},useTransition:function(){var o=Px(cu)[0],c=Gr().memoizedState;return[o,c]},useMutableSource:P_,useSyncExternalStore:L_,useId:X_,unstable_isNewReconciler:!1},j4={readContext:Hr,useCallback:q_,useContext:Hr,useEffect:Dx,useImperativeHandle:W_,useInsertionEffect:z_,useLayoutEffect:H_,useMemo:K_,useReducer:Lx,useRef:V_,useState:function(){return Lx(cu)},useDebugValue:Mx,useDeferredValue:function(o){var c=Gr();return en===null?c.memoizedState=o:Q_(c,en.memoizedState,o)},useTransition:function(){var o=Lx(cu)[0],c=Gr().memoizedState;return[o,c]},useMutableSource:P_,useSyncExternalStore:L_,useId:X_,unstable_isNewReconciler:!1};function pi(o,c){if(o&&o.defaultProps){c=ne({},c),o=o.defaultProps;for(var m in o)c[m]===void 0&&(c[m]=o[m]);return c}return c}function Fx(o,c,m,x){c=o.memoizedState,m=m(x,c),m=m==null?c:ne({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Wp={isMounted:function(o){return(o=o._reactInternals)?ri(o)===o:!1},enqueueSetState:function(o,c,m){o=o._reactInternals;var x=qn(),j=uo(o),P=ha(x,j);P.payload=c,m!=null&&(P.callback=m),c=ao(o,P,j),c!==null&&(gi(c,o,j,x),Bp(c,o,j))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var x=qn(),j=uo(o),P=ha(x,j);P.tag=1,P.payload=c,m!=null&&(P.callback=m),c=ao(o,P,j),c!==null&&(gi(c,o,j,x),Bp(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=qn(),x=uo(o),j=ha(m,x);j.tag=2,c!=null&&(j.callback=c),c=ao(o,j,x),c!==null&&(gi(c,o,x,m),Bp(c,o,x))}};function ew(o,c,m,x,j,P,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,P,V):c.prototype&&c.prototype.isPureReactComponent?!Xd(m,x)||!Xd(j,P):!0}function tw(o,c,m){var x=!1,j=no,P=c.contextType;return typeof P=="object"&&P!==null?P=Hr(P):(j=ir(c)?nl:In.current,x=c.contextTypes,P=(x=x!=null)?jc(o,j):no),c=new c(m,P),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Wp,o.stateNode=c,c._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=P),c}function sw(o,c,m,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==o&&Wp.enqueueReplaceState(c,c.state,null)}function Bx(o,c,m,x){var j=o.stateNode;j.props=m,j.state=o.memoizedState,j.refs={},Sx(o);var P=c.contextType;typeof P=="object"&&P!==null?j.context=Hr(P):(P=ir(c)?nl:In.current,j.context=jc(o,P)),j.state=o.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(Fx(o,c,P,m),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&Wp.enqueueReplaceState(j,j.state,null),$p(o,m,j,x),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function Ic(o,c){try{var m="",x=c;do m+=he(x),x=x.return;while(x);var j=m}catch(P){j=`
Error generating stack: `+P.message+`
`+P.stack}return{value:o,source:c,stack:j,digest:null}}function $x(o,c,m){return{value:o,source:null,stack:m!=null?m:null,digest:c!=null?c:null}}function Ox(o,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var S4=typeof WeakMap=="function"?WeakMap:Map;function nw(o,c,m){m=ha(-1,m),m.tag=3,m.payload={element:null};var x=c.value;return m.callback=function(){Zp||(Zp=!0,ty=x),Ox(o,c)},m}function rw(o,c,m){m=ha(-1,m),m.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var j=c.value;m.payload=function(){return x(j)},m.callback=function(){Ox(o,c)}}var P=o.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(m.callback=function(){Ox(o,c),typeof x!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),m}function iw(o,c,m){var x=o.pingCache;if(x===null){x=o.pingCache=new S4;var j=new Set;x.set(c,j)}else j=x.get(c),j===void 0&&(j=new Set,x.set(c,j));j.has(m)||(j.add(m),o=B4.bind(null,o,c,m),c.then(o,o))}function aw(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function ow(o,c,m,x,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=ha(-1,1),c.tag=2,ao(m,c,1))),m.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var N4=y.ReactCurrentOwner,ar=!1;function Wn(o,c,m,x){c.child=o===null?C_(c,null,m,x):Cc(c,o.child,m,x)}function lw(o,c,m,x,j){m=m.render;var P=c.ref;return Ec(c,j),x=Ix(o,c,m,x,P,j),m=Rx(),o!==null&&!ar?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,pa(o,c,j)):(_s&&m&&mx(c),c.flags|=1,Wn(o,c,x,j),c.child)}function cw(o,c,m,x,j){if(o===null){var P=m.type;return typeof P=="function"&&!ly(P)&&P.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=P,dw(o,c,P,x,j)):(o=im(m.type,null,x,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(P=o.child,(o.lanes&j)===0){var V=P.memoizedProps;if(m=m.compare,m=m!==null?m:Xd,m(V,x)&&o.ref===c.ref)return pa(o,c,j)}return c.flags|=1,o=po(P,x),o.ref=c.ref,o.return=c,c.child=o}function dw(o,c,m,x,j){if(o!==null){var P=o.memoizedProps;if(Xd(P,x)&&o.ref===c.ref)if(ar=!1,c.pendingProps=x=P,(o.lanes&j)!==0)(o.flags&131072)!==0&&(ar=!0);else return c.lanes=o.lanes,pa(o,c,j)}return Vx(o,c,m,x,j)}function uw(o,c,m){var x=c.pendingProps,j=x.children,P=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},ps(Pc,Tr),Tr|=m;else{if((m&1073741824)===0)return o=P!==null?P.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,ps(Pc,Tr),Tr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=P!==null?P.baseLanes:m,ps(Pc,Tr),Tr|=x}else P!==null?(x=P.baseLanes|m,c.memoizedState=null):x=m,ps(Pc,Tr),Tr|=x;return Wn(o,c,j,m),c.child}function hw(o,c){var m=c.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Vx(o,c,m,x,j){var P=ir(m)?nl:In.current;return P=jc(c,P),Ec(c,j),m=Ix(o,c,m,x,P,j),x=Rx(),o!==null&&!ar?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,pa(o,c,j)):(_s&&x&&mx(c),c.flags|=1,Wn(o,c,m,j),c.child)}function pw(o,c,m,x,j){if(ir(m)){var P=!0;Ap(c)}else P=!1;if(Ec(c,j),c.stateNode===null)Kp(o,c),tw(c,m,x),Bx(c,m,x,j),x=!0;else if(o===null){var V=c.stateNode,Q=c.memoizedProps;V.props=Q;var X=V.context,pe=m.contextType;typeof pe=="object"&&pe!==null?pe=Hr(pe):(pe=ir(m)?nl:In.current,pe=jc(c,pe));var Se=m.getDerivedStateFromProps,Ae=typeof Se=="function"||typeof V.getSnapshotBeforeUpdate=="function";Ae||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==x||X!==pe)&&sw(c,V,x,pe),io=!1;var je=c.memoizedState;V.state=je,$p(c,x,V,j),X=c.memoizedState,Q!==x||je!==X||rr.current||io?(typeof Se=="function"&&(Fx(c,m,Se,x),X=c.memoizedState),(Q=io||ew(c,m,Q,x,je,X,pe))?(Ae||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=X),V.props=x,V.state=X,V.context=pe,x=Q):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{V=c.stateNode,E_(o,c),Q=c.memoizedProps,pe=c.type===c.elementType?Q:pi(c.type,Q),V.props=pe,Ae=c.pendingProps,je=V.context,X=m.contextType,typeof X=="object"&&X!==null?X=Hr(X):(X=ir(m)?nl:In.current,X=jc(c,X));var Ge=m.getDerivedStateFromProps;(Se=typeof Ge=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==Ae||je!==X)&&sw(c,V,x,X),io=!1,je=c.memoizedState,V.state=je,$p(c,x,V,j);var Xe=c.memoizedState;Q!==Ae||je!==Xe||rr.current||io?(typeof Ge=="function"&&(Fx(c,m,Ge,x),Xe=c.memoizedState),(pe=io||ew(c,m,pe,x,je,Xe,X)||!1)?(Se||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(x,Xe,X),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(x,Xe,X)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&je===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&je===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Xe),V.props=x,V.state=Xe,V.context=X,x=pe):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&je===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&je===o.memoizedState||(c.flags|=1024),x=!1)}return Ux(o,c,m,x,P,j)}function Ux(o,c,m,x,j,P){hw(o,c);var V=(c.flags&128)!==0;if(!x&&!V)return j&&y_(c,m,!1),pa(o,c,P);x=c.stateNode,N4.current=c;var Q=V&&typeof m.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,o!==null&&V?(c.child=Cc(c,o.child,null,P),c.child=Cc(c,null,Q,P)):Wn(o,c,Q,P),c.memoizedState=x.state,j&&y_(c,m,!0),c.child}function mw(o){var c=o.stateNode;c.pendingContext?g_(o,c.pendingContext,c.pendingContext!==c.context):c.context&&g_(o,c.context,!1),Nx(o,c.containerInfo)}function fw(o,c,m,x,j){return kc(),yx(j),c.flags|=256,Wn(o,c,m,x),c.child}var zx={dehydrated:null,treeContext:null,retryLane:0};function Hx(o){return{baseLanes:o,cachePool:null,transitions:null}}function gw(o,c,m){var x=c.pendingProps,j=Cs.current,P=!1,V=(c.flags&128)!==0,Q;if((Q=V)||(Q=o!==null&&o.memoizedState===null?!1:(j&2)!==0),Q?(P=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),ps(Cs,j&1),o===null)return xx(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=x.children,o=x.fallback,P?(x=c.mode,P=c.child,V={mode:"hidden",children:V},(x&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=V):P=am(V,x,0,null),o=pl(o,x,m,null),P.return=c,o.return=c,P.sibling=o,c.child=P,c.child.memoizedState=Hx(m),c.memoizedState=zx,o):Gx(c,V));if(j=o.memoizedState,j!==null&&(Q=j.dehydrated,Q!==null))return k4(o,c,V,x,Q,j,m);if(P){P=x.fallback,V=c.mode,j=o.child,Q=j.sibling;var X={mode:"hidden",children:x.children};return(V&1)===0&&c.child!==j?(x=c.child,x.childLanes=0,x.pendingProps=X,c.deletions=null):(x=po(j,X),x.subtreeFlags=j.subtreeFlags&14680064),Q!==null?P=po(Q,P):(P=pl(P,V,m,null),P.flags|=2),P.return=c,x.return=c,x.sibling=P,c.child=x,x=P,P=c.child,V=o.child.memoizedState,V=V===null?Hx(m):{baseLanes:V.baseLanes|m,cachePool:null,transitions:V.transitions},P.memoizedState=V,P.childLanes=o.childLanes&~m,c.memoizedState=zx,x}return P=o.child,o=P.sibling,x=po(P,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=m),x.return=c,x.sibling=null,o!==null&&(m=c.deletions,m===null?(c.deletions=[o],c.flags|=16):m.push(o)),c.child=x,c.memoizedState=null,x}function Gx(o,c){return c=am({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function qp(o,c,m,x){return x!==null&&yx(x),Cc(c,o.child,null,m),o=Gx(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function k4(o,c,m,x,j,P,V){if(m)return c.flags&256?(c.flags&=-257,x=$x(Error(s(422))),qp(o,c,V,x)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(P=x.fallback,j=c.mode,x=am({mode:"visible",children:x.children},j,0,null),P=pl(P,j,V,null),P.flags|=2,x.return=c,P.return=c,x.sibling=P,c.child=x,(c.mode&1)!==0&&Cc(c,o.child,null,V),c.child.memoizedState=Hx(V),c.memoizedState=zx,P);if((c.mode&1)===0)return qp(o,c,V,null);if(j.data==="$!"){if(x=j.nextSibling&&j.nextSibling.dataset,x)var Q=x.dgst;return x=Q,P=Error(s(419)),x=$x(P,x,void 0),qp(o,c,V,x)}if(Q=(V&o.childLanes)!==0,ar||Q){if(x=on,x!==null){switch(V&-V){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(x.suspendedLanes|V))!==0?0:j,j!==0&&j!==P.retryLane&&(P.retryLane=j,ua(o,j),gi(x,o,j,-1))}return oy(),x=$x(Error(s(421))),qp(o,c,V,x)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=$4.bind(null,o),j._reactRetry=c,null):(o=P.treeContext,Cr=to(j.nextSibling),kr=c,_s=!0,hi=null,o!==null&&(Ur[zr++]=ca,Ur[zr++]=da,Ur[zr++]=rl,ca=o.id,da=o.overflow,rl=c),c=Gx(c,x.children),c.flags|=4096,c)}function xw(o,c,m){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),wx(o.return,c,m)}function Wx(o,c,m,x,j){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:j}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=x,P.tail=m,P.tailMode=j)}function yw(o,c,m){var x=c.pendingProps,j=x.revealOrder,P=x.tail;if(Wn(o,c,x.children,m),x=Cs.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&xw(o,m,c);else if(o.tag===19)xw(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(ps(Cs,x),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(m=c.child,j=null;m!==null;)o=m.alternate,o!==null&&Op(o)===null&&(j=m),m=m.sibling;m=j,m===null?(j=c.child,c.child=null):(j=m.sibling,m.sibling=null),Wx(c,!1,j,m,P);break;case"backwards":for(m=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&Op(o)===null){c.child=j;break}o=j.sibling,j.sibling=m,m=j,j=o}Wx(c,!0,m,null,P);break;case"together":Wx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Kp(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function pa(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),cl|=c.lanes,(m&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,m=po(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=po(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function C4(o,c,m){switch(c.tag){case 3:mw(c),kc();break;case 5:R_(c);break;case 1:ir(c.type)&&Ap(c);break;case 4:Nx(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,j=c.memoizedProps.value;ps(Mp,x._currentValue),x._currentValue=j;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(ps(Cs,Cs.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?gw(o,c,m):(ps(Cs,Cs.current&1),o=pa(o,c,m),o!==null?o.sibling:null);ps(Cs,Cs.current&1);break;case 19:if(x=(m&c.childLanes)!==0,(o.flags&128)!==0){if(x)return yw(o,c,m);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),ps(Cs,Cs.current),x)break;return null;case 22:case 23:return c.lanes=0,uw(o,c,m)}return pa(o,c,m)}var vw,qx,bw,_w;vw=function(o,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},qx=function(){},bw=function(o,c,m,x){var j=o.memoizedProps;if(j!==x){o=c.stateNode,ol(Mi.current);var P=null;switch(m){case"input":j=Ke(o,j),x=Ke(o,x),P=[];break;case"select":j=ne({},j,{value:void 0}),x=ne({},x,{value:void 0}),P=[];break;case"textarea":j=Ie(o,j),x=Ie(o,x),P=[];break;default:typeof j.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=Cp)}ue(m,x);var V;m=null;for(pe in j)if(!x.hasOwnProperty(pe)&&j.hasOwnProperty(pe)&&j[pe]!=null)if(pe==="style"){var Q=j[pe];for(V in Q)Q.hasOwnProperty(V)&&(m||(m={}),m[V]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?P||(P=[]):(P=P||[]).push(pe,null));for(pe in x){var X=x[pe];if(Q=j!=null?j[pe]:void 0,x.hasOwnProperty(pe)&&X!==Q&&(X!=null||Q!=null))if(pe==="style")if(Q){for(V in Q)!Q.hasOwnProperty(V)||X&&X.hasOwnProperty(V)||(m||(m={}),m[V]="");for(V in X)X.hasOwnProperty(V)&&Q[V]!==X[V]&&(m||(m={}),m[V]=X[V])}else m||(P||(P=[]),P.push(pe,m)),m=X;else pe==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,Q=Q?Q.__html:void 0,X!=null&&Q!==X&&(P=P||[]).push(pe,X)):pe==="children"?typeof X!="string"&&typeof X!="number"||(P=P||[]).push(pe,""+X):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(X!=null&&pe==="onScroll"&&xs("scroll",o),P||Q===X||(P=[])):(P=P||[]).push(pe,X))}m&&(P=P||[]).push("style",m);var pe=P;(c.updateQueue=pe)&&(c.flags|=4)}},_w=function(o,c,m,x){m!==x&&(c.flags|=4)};function uu(o,c){if(!_s)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Pn(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(c)for(var j=o.child;j!==null;)m|=j.lanes|j.childLanes,x|=j.subtreeFlags&14680064,x|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)m|=j.lanes|j.childLanes,x|=j.subtreeFlags,x|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=x,o.childLanes=m,c}function T4(o,c,m){var x=c.pendingProps;switch(fx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(c),null;case 1:return ir(c.type)&&Ep(),Pn(c),null;case 3:return x=c.stateNode,Ac(),ys(rr),ys(In),Tx(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Lp(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,hi!==null&&(ry(hi),hi=null))),qx(o,c),Pn(c),null;case 5:kx(c);var j=ol(au.current);if(m=c.type,o!==null&&c.stateNode!=null)bw(o,c,m,x,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(s(166));return Pn(c),null}if(o=ol(Mi.current),Lp(c)){x=c.stateNode,m=c.type;var P=c.memoizedProps;switch(x[Di]=c,x[tu]=P,o=(c.mode&1)!==0,m){case"dialog":xs("cancel",x),xs("close",x);break;case"iframe":case"object":case"embed":xs("load",x);break;case"video":case"audio":for(j=0;j<Jd.length;j++)xs(Jd[j],x);break;case"source":xs("error",x);break;case"img":case"image":case"link":xs("error",x),xs("load",x);break;case"details":xs("toggle",x);break;case"input":Tt(x,P),xs("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!P.multiple},xs("invalid",x);break;case"textarea":He(x,P),xs("invalid",x)}ue(m,P),j=null;for(var V in P)if(P.hasOwnProperty(V)){var Q=P[V];V==="children"?typeof Q=="string"?x.textContent!==Q&&(P.suppressHydrationWarning!==!0&&kp(x.textContent,Q,o),j=["children",Q]):typeof Q=="number"&&x.textContent!==""+Q&&(P.suppressHydrationWarning!==!0&&kp(x.textContent,Q,o),j=["children",""+Q]):i.hasOwnProperty(V)&&Q!=null&&V==="onScroll"&&xs("scroll",x)}switch(m){case"input":ke(x),Vt(x,P,!0);break;case"textarea":ke(x),ht(x);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(x.onclick=Cp)}x=j,c.updateQueue=x,x!==null&&(c.flags|=4)}else{V=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=yt(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=V.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=V.createElement(m,{is:x.is}):(o=V.createElement(m),m==="select"&&(V=o,x.multiple?V.multiple=!0:x.size&&(V.size=x.size))):o=V.createElementNS(o,m),o[Di]=c,o[tu]=x,vw(o,c,!1,!1),c.stateNode=o;e:{switch(V=Fe(m,x),m){case"dialog":xs("cancel",o),xs("close",o),j=x;break;case"iframe":case"object":case"embed":xs("load",o),j=x;break;case"video":case"audio":for(j=0;j<Jd.length;j++)xs(Jd[j],o);j=x;break;case"source":xs("error",o),j=x;break;case"img":case"image":case"link":xs("error",o),xs("load",o),j=x;break;case"details":xs("toggle",o),j=x;break;case"input":Tt(o,x),j=Ke(o,x),xs("invalid",o);break;case"option":j=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},j=ne({},x,{value:void 0}),xs("invalid",o);break;case"textarea":He(o,x),j=Ie(o,x),xs("invalid",o);break;default:j=x}ue(m,j),Q=j;for(P in Q)if(Q.hasOwnProperty(P)){var X=Q[P];P==="style"?Br(o,X):P==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&An(o,X)):P==="children"?typeof X=="string"?(m!=="textarea"||X!=="")&&Ys(o,X):typeof X=="number"&&Ys(o,""+X):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?X!=null&&P==="onScroll"&&xs("scroll",o):X!=null&&N(o,P,X,V))}switch(m){case"input":ke(o),Vt(o,x,!1);break;case"textarea":ke(o),ht(o);break;case"option":x.value!=null&&o.setAttribute("value",""+we(x.value));break;case"select":o.multiple=!!x.multiple,P=x.value,P!=null?Le(o,!!x.multiple,P,!1):x.defaultValue!=null&&Le(o,!!x.multiple,x.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=Cp)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Pn(c),null;case 6:if(o&&c.stateNode!=null)_w(o,c,o.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(s(166));if(m=ol(au.current),ol(Mi.current),Lp(c)){if(x=c.stateNode,m=c.memoizedProps,x[Di]=c,(P=x.nodeValue!==m)&&(o=kr,o!==null))switch(o.tag){case 3:kp(x.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&kp(x.nodeValue,m,(o.mode&1)!==0)}P&&(c.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[Di]=c,c.stateNode=x}return Pn(c),null;case 13:if(ys(Cs),x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_s&&Cr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)S_(),kc(),c.flags|=98560,P=!1;else if(P=Lp(c),x!==null&&x.dehydrated!==null){if(o===null){if(!P)throw Error(s(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(s(317));P[Di]=c}else kc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Pn(c),P=!1}else hi!==null&&(ry(hi),hi=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Cs.current&1)!==0?tn===0&&(tn=3):oy())),c.updateQueue!==null&&(c.flags|=4),Pn(c),null);case 4:return Ac(),qx(o,c),o===null&&Zd(c.stateNode.containerInfo),Pn(c),null;case 10:return _x(c.type._context),Pn(c),null;case 17:return ir(c.type)&&Ep(),Pn(c),null;case 19:if(ys(Cs),P=c.memoizedState,P===null)return Pn(c),null;if(x=(c.flags&128)!==0,V=P.rendering,V===null)if(x)uu(P,!1);else{if(tn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(V=Op(o),V!==null){for(c.flags|=128,uu(P,!1),x=V.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=m,m=c.child;m!==null;)P=m,o=x,P.flags&=14680066,V=P.alternate,V===null?(P.childLanes=0,P.lanes=o,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=V.childLanes,P.lanes=V.lanes,P.child=V.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=V.memoizedProps,P.memoizedState=V.memoizedState,P.updateQueue=V.updateQueue,P.type=V.type,o=V.dependencies,P.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return ps(Cs,Cs.current&1|2),c.child}o=o.sibling}P.tail!==null&&hs()>Lc&&(c.flags|=128,x=!0,uu(P,!1),c.lanes=4194304)}else{if(!x)if(o=Op(V),o!==null){if(c.flags|=128,x=!0,m=o.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),uu(P,!0),P.tail===null&&P.tailMode==="hidden"&&!V.alternate&&!_s)return Pn(c),null}else 2*hs()-P.renderingStartTime>Lc&&m!==1073741824&&(c.flags|=128,x=!0,uu(P,!1),c.lanes=4194304);P.isBackwards?(V.sibling=c.child,c.child=V):(m=P.last,m!==null?m.sibling=V:c.child=V,P.last=V)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=hs(),c.sibling=null,m=Cs.current,ps(Cs,x?m&1|2:m&1),c):(Pn(c),null);case 22:case 23:return ay(),x=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Tr&1073741824)!==0&&(Pn(c),c.subtreeFlags&6&&(c.flags|=8192)):Pn(c),null;case 24:return null;case 25:return null}throw Error(s(156,c.tag))}function E4(o,c){switch(fx(c),c.tag){case 1:return ir(c.type)&&Ep(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ac(),ys(rr),ys(In),Tx(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return kx(c),null;case 13:if(ys(Cs),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));kc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ys(Cs),null;case 4:return Ac(),null;case 10:return _x(c.type._context),null;case 22:case 23:return ay(),null;case 24:return null;default:return null}}var Qp=!1,Ln=!1,A4=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Rc(o,c){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){Ls(o,c,x)}else m.current=null}function Kx(o,c,m){try{m()}catch(x){Ls(o,c,x)}}var ww=!1;function I4(o,c){if(ax=Ja,o=e_(),Jg(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var j=x.anchorOffset,P=x.focusNode;x=x.focusOffset;try{m.nodeType,P.nodeType}catch(Pe){m=null;break e}var V=0,Q=-1,X=-1,pe=0,Se=0,Ae=o,je=null;t:for(;;){for(var Ge;Ae!==m||j!==0&&Ae.nodeType!==3||(Q=V+j),Ae!==P||x!==0&&Ae.nodeType!==3||(X=V+x),Ae.nodeType===3&&(V+=Ae.nodeValue.length),(Ge=Ae.firstChild)!==null;)je=Ae,Ae=Ge;for(;;){if(Ae===o)break t;if(je===m&&++pe===j&&(Q=V),je===P&&++Se===x&&(X=V),(Ge=Ae.nextSibling)!==null)break;Ae=je,je=Ae.parentNode}Ae=Ge}m=Q===-1||X===-1?null:{start:Q,end:X}}else m=null}m=m||{start:0,end:0}}else m=null;for(ox={focusedElem:o,selectionRange:m},Ja=!1,qe=c;qe!==null;)if(c=qe,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,qe=o;else for(;qe!==null;){c=qe;try{var Xe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Ye=Xe.memoizedProps,Bs=Xe.memoizedState,oe=c.stateNode,te=oe.getSnapshotBeforeUpdate(c.elementType===c.type?Ye:pi(c.type,Ye),Bs);oe.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var de=c.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Pe){Ls(c,c.return,Pe)}if(o=c.sibling,o!==null){o.return=c.return,qe=o;break}qe=c.return}return Xe=ww,ww=!1,Xe}function hu(o,c,m){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var j=x=x.next;do{if((j.tag&o)===o){var P=j.destroy;j.destroy=void 0,P!==void 0&&Kx(c,m,P)}j=j.next}while(j!==x)}}function Xp(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&o)===o){var x=m.create;m.destroy=x()}m=m.next}while(m!==c)}}function Qx(o){var c=o.ref;if(c!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof c=="function"?c(o):c.current=o}}function jw(o){var c=o.alternate;c!==null&&(o.alternate=null,jw(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Di],delete c[tu],delete c[ux],delete c[p4],delete c[m4])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Sw(o){return o.tag===5||o.tag===3||o.tag===4}function Nw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Sw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Xx(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(o,c):m.insertBefore(o,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(o,m)):(c=m,c.appendChild(o)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Cp));else if(x!==4&&(o=o.child,o!==null))for(Xx(o,c,m),o=o.sibling;o!==null;)Xx(o,c,m),o=o.sibling}function Yx(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(Yx(o,c,m),o=o.sibling;o!==null;)Yx(o,c,m),o=o.sibling}var gn=null,mi=!1;function oo(o,c,m){for(m=m.child;m!==null;)kw(o,c,m),m=m.sibling}function kw(o,c,m){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Qo,m)}catch(Q){}switch(m.tag){case 5:Ln||Rc(m,c);case 6:var x=gn,j=mi;gn=null,oo(o,c,m),gn=x,mi=j,gn!==null&&(mi?(o=gn,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):gn.removeChild(m.stateNode));break;case 18:gn!==null&&(mi?(o=gn,m=m.stateNode,o.nodeType===8?dx(o.parentNode,m):o.nodeType===1&&dx(o,m),ci(o)):dx(gn,m.stateNode));break;case 4:x=gn,j=mi,gn=m.stateNode.containerInfo,mi=!0,oo(o,c,m),gn=x,mi=j;break;case 0:case 11:case 14:case 15:if(!Ln&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){j=x=x.next;do{var P=j,V=P.destroy;P=P.tag,V!==void 0&&((P&2)!==0||(P&4)!==0)&&Kx(m,c,V),j=j.next}while(j!==x)}oo(o,c,m);break;case 1:if(!Ln&&(Rc(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(Q){Ls(m,c,Q)}oo(o,c,m);break;case 21:oo(o,c,m);break;case 22:m.mode&1?(Ln=(x=Ln)||m.memoizedState!==null,oo(o,c,m),Ln=x):oo(o,c,m);break;default:oo(o,c,m)}}function Cw(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new A4),c.forEach(function(x){var j=O4.bind(null,o,x);m.has(x)||(m.add(x),x.then(j,j))})}}function fi(o,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var j=m[x];try{var P=o,V=c,Q=V;e:for(;Q!==null;){switch(Q.tag){case 5:gn=Q.stateNode,mi=!1;break e;case 3:gn=Q.stateNode.containerInfo,mi=!0;break e;case 4:gn=Q.stateNode.containerInfo,mi=!0;break e}Q=Q.return}if(gn===null)throw Error(s(160));kw(P,V,j),gn=null,mi=!1;var X=j.alternate;X!==null&&(X.return=null),j.return=null}catch(pe){Ls(j,c,pe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Tw(c,o),c=c.sibling}function Tw(o,c){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(fi(c,o),Bi(o),x&4){try{hu(3,o,o.return),Xp(3,o)}catch(Ye){Ls(o,o.return,Ye)}try{hu(5,o,o.return)}catch(Ye){Ls(o,o.return,Ye)}}break;case 1:fi(c,o),Bi(o),x&512&&m!==null&&Rc(m,m.return);break;case 5:if(fi(c,o),Bi(o),x&512&&m!==null&&Rc(m,m.return),o.flags&32){var j=o.stateNode;try{Ys(j,"")}catch(Ye){Ls(o,o.return,Ye)}}if(x&4&&(j=o.stateNode,j!=null)){var P=o.memoizedProps,V=m!==null?m.memoizedProps:P,Q=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{Q==="input"&&P.type==="radio"&&P.name!=null&&Mt(j,P),Fe(Q,V);var pe=Fe(Q,P);for(V=0;V<X.length;V+=2){var Se=X[V],Ae=X[V+1];Se==="style"?Br(j,Ae):Se==="dangerouslySetInnerHTML"?An(j,Ae):Se==="children"?Ys(j,Ae):N(j,Se,Ae,pe)}switch(Q){case"input":Ft(j,P);break;case"textarea":ot(j,P);break;case"select":var je=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!P.multiple;var Ge=P.value;Ge!=null?Le(j,!!P.multiple,Ge,!1):je!==!!P.multiple&&(P.defaultValue!=null?Le(j,!!P.multiple,P.defaultValue,!0):Le(j,!!P.multiple,P.multiple?[]:"",!1))}j[tu]=P}catch(Ye){Ls(o,o.return,Ye)}}break;case 6:if(fi(c,o),Bi(o),x&4){if(o.stateNode===null)throw Error(s(162));j=o.stateNode,P=o.memoizedProps;try{j.nodeValue=P}catch(Ye){Ls(o,o.return,Ye)}}break;case 3:if(fi(c,o),Bi(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{ci(c.containerInfo)}catch(Ye){Ls(o,o.return,Ye)}break;case 4:fi(c,o),Bi(o);break;case 13:fi(c,o),Bi(o),j=o.child,j.flags&8192&&(P=j.memoizedState!==null,j.stateNode.isHidden=P,!P||j.alternate!==null&&j.alternate.memoizedState!==null||(ey=hs())),x&4&&Cw(o);break;case 22:if(Se=m!==null&&m.memoizedState!==null,o.mode&1?(Ln=(pe=Ln)||Se,fi(c,o),Ln=pe):fi(c,o),Bi(o),x&8192){if(pe=o.memoizedState!==null,(o.stateNode.isHidden=pe)&&!Se&&(o.mode&1)!==0)for(qe=o,Se=o.child;Se!==null;){for(Ae=qe=Se;qe!==null;){switch(je=qe,Ge=je.child,je.tag){case 0:case 11:case 14:case 15:hu(4,je,je.return);break;case 1:Rc(je,je.return);var Xe=je.stateNode;if(typeof Xe.componentWillUnmount=="function"){x=je,m=je.return;try{c=x,Xe.props=c.memoizedProps,Xe.state=c.memoizedState,Xe.componentWillUnmount()}catch(Ye){Ls(x,m,Ye)}}break;case 5:Rc(je,je.return);break;case 22:if(je.memoizedState!==null){Iw(Ae);continue}}Ge!==null?(Ge.return=je,qe=Ge):Iw(Ae)}Se=Se.sibling}e:for(Se=null,Ae=o;;){if(Ae.tag===5){if(Se===null){Se=Ae;try{j=Ae.stateNode,pe?(P=j.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(Q=Ae.stateNode,X=Ae.memoizedProps.style,V=X!=null&&X.hasOwnProperty("display")?X.display:null,Q.style.display=yr("display",V))}catch(Ye){Ls(o,o.return,Ye)}}}else if(Ae.tag===6){if(Se===null)try{Ae.stateNode.nodeValue=pe?"":Ae.memoizedProps}catch(Ye){Ls(o,o.return,Ye)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===o)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===o)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===o)break e;Se===Ae&&(Se=null),Ae=Ae.return}Se===Ae&&(Se=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:fi(c,o),Bi(o),x&4&&Cw(o);break;case 21:break;default:fi(c,o),Bi(o)}}function Bi(o){var c=o.flags;if(c&2){try{e:{for(var m=o.return;m!==null;){if(Sw(m)){var x=m;break e}m=m.return}throw Error(s(160))}switch(x.tag){case 5:var j=x.stateNode;x.flags&32&&(Ys(j,""),x.flags&=-33);var P=Nw(o);Yx(o,P,j);break;case 3:case 4:var V=x.stateNode.containerInfo,Q=Nw(o);Xx(o,Q,V);break;default:throw Error(s(161))}}catch(X){Ls(o,o.return,X)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function R4(o,c,m){qe=o,Ew(o)}function Ew(o,c,m){for(var x=(o.mode&1)!==0;qe!==null;){var j=qe,P=j.child;if(j.tag===22&&x){var V=j.memoizedState!==null||Qp;if(!V){var Q=j.alternate,X=Q!==null&&Q.memoizedState!==null||Ln;Q=Qp;var pe=Ln;if(Qp=V,(Ln=X)&&!pe)for(qe=j;qe!==null;)V=qe,X=V.child,V.tag===22&&V.memoizedState!==null?Rw(j):X!==null?(X.return=V,qe=X):Rw(j);for(;P!==null;)qe=P,Ew(P),P=P.sibling;qe=j,Qp=Q,Ln=pe}Aw(o)}else(j.subtreeFlags&8772)!==0&&P!==null?(P.return=j,qe=P):Aw(o)}}function Aw(o){for(;qe!==null;){var c=qe;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ln||Xp(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Ln)if(m===null)x.componentDidMount();else{var j=c.elementType===c.type?m.memoizedProps:pi(c.type,m.memoizedProps);x.componentDidUpdate(j,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&I_(c,P,x);break;case 3:var V=c.updateQueue;if(V!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}I_(c,V,m)}break;case 5:var Q=c.stateNode;if(m===null&&c.flags&4){m=Q;var X=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&m.focus();break;case"img":X.src&&(m.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var pe=c.alternate;if(pe!==null){var Se=pe.memoizedState;if(Se!==null){var Ae=Se.dehydrated;Ae!==null&&ci(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ln||c.flags&512&&Qx(c)}catch(je){Ls(c,c.return,je)}}if(c===o){qe=null;break}if(m=c.sibling,m!==null){m.return=c.return,qe=m;break}qe=c.return}}function Iw(o){for(;qe!==null;){var c=qe;if(c===o){qe=null;break}var m=c.sibling;if(m!==null){m.return=c.return,qe=m;break}qe=c.return}}function Rw(o){for(;qe!==null;){var c=qe;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Xp(4,c)}catch(X){Ls(c,m,X)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var j=c.return;try{x.componentDidMount()}catch(X){Ls(c,j,X)}}var P=c.return;try{Qx(c)}catch(X){Ls(c,P,X)}break;case 5:var V=c.return;try{Qx(c)}catch(X){Ls(c,V,X)}}}catch(X){Ls(c,c.return,X)}if(c===o){qe=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,qe=Q;break}qe=c.return}}var P4=Math.ceil,Yp=y.ReactCurrentDispatcher,Jx=y.ReactCurrentOwner,Wr=y.ReactCurrentBatchConfig,Xt=0,on=null,zs=null,xn=0,Tr=0,Pc=so(0),tn=0,pu=null,cl=0,Jp=0,Zx=0,mu=null,or=null,ey=0,Lc=1/0,ma=null,Zp=!1,ty=null,lo=null,em=!1,co=null,tm=0,fu=0,sy=null,sm=-1,nm=0;function qn(){return(Xt&6)!==0?hs():sm!==-1?sm:sm=hs()}function uo(o){return(o.mode&1)===0?1:(Xt&2)!==0&&xn!==0?xn&-xn:g4.transition!==null?(nm===0&&(nm=Yo()),nm):(o=zt,o!==0||(o=window.event,o=o===void 0?16:zd(o.type)),o)}function gi(o,c,m,x){if(50<fu)throw fu=0,sy=null,Error(s(185));Ka(o,m,x),((Xt&2)===0||o!==on)&&(o===on&&((Xt&2)===0&&(Jp|=m),tn===4&&ho(o,xn)),lr(o,x),m===1&&Xt===0&&(c.mode&1)===0&&(Lc=hs()+500,Ip&&ro()))}function lr(o,c){var m=o.callbackNode;sa(o,c);var x=Xo(o,o===on?xn:0);if(x===0)m!==null&&Bd(m),o.callbackNode=null,o.callbackPriority=0;else if(c=x&-x,o.callbackPriority!==c){if(m!=null&&Bd(m),c===1)o.tag===0?f4(Lw.bind(null,o)):v_(Lw.bind(null,o)),u4(function(){(Xt&6)===0&&ro()}),m=null;else{switch(Xa(x)){case 1:m=Ko;break;case 4:m=Ga;break;case 16:m=$r;break;case 536870912:m=np;break;default:m=$r}m=Uw(m,Pw.bind(null,o))}o.callbackPriority=c,o.callbackNode=m}}function Pw(o,c){if(sm=-1,nm=0,(Xt&6)!==0)throw Error(s(327));var m=o.callbackNode;if(Dc()&&o.callbackNode!==m)return null;var x=Xo(o,o===on?xn:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||c)c=rm(o,x);else{c=x;var j=Xt;Xt|=2;var P=Mw();(on!==o||xn!==c)&&(ma=null,Lc=hs()+500,ul(o,c));do try{M4();break}catch(Q){Dw(o,Q)}while(!0);bx(),Yp.current=P,Xt=j,zs!==null?c=0:(on=null,xn=0,c=tn)}if(c!==0){if(c===2&&(j=jr(o),j!==0&&(x=j,c=ny(o,j))),c===1)throw m=pu,ul(o,0),ho(o,x),lr(o,hs()),m;if(c===6)ho(o,x);else{if(j=o.current.alternate,(x&30)===0&&!L4(j)&&(c=rm(o,x),c===2&&(P=jr(o),P!==0&&(x=P,c=ny(o,P))),c===1))throw m=pu,ul(o,0),ho(o,x),lr(o,hs()),m;switch(o.finishedWork=j,o.finishedLanes=x,c){case 0:case 1:throw Error(s(345));case 2:hl(o,or,ma);break;case 3:if(ho(o,x),(x&130023424)===x&&(c=ey+500-hs(),10<c)){if(Xo(o,0)!==0)break;if(j=o.suspendedLanes,(j&x)!==x){qn(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=cx(hl.bind(null,o,or,ma),c);break}hl(o,or,ma);break;case 4:if(ho(o,x),(x&4194240)===x)break;for(c=o.eventTimes,j=-1;0<x;){var V=31-Hn(x);P=1<<V,V=c[V],V>j&&(j=V),x&=~P}if(x=j,x=hs()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*P4(x/1960))-x,10<x){o.timeoutHandle=cx(hl.bind(null,o,or,ma),x);break}hl(o,or,ma);break;case 5:hl(o,or,ma);break;default:throw Error(s(329))}}}return lr(o,hs()),o.callbackNode===m?Pw.bind(null,o):null}function ny(o,c){var m=mu;return o.current.memoizedState.isDehydrated&&(ul(o,c).flags|=256),o=rm(o,c),o!==2&&(c=or,or=m,c!==null&&ry(c)),o}function ry(o){or===null?or=o:or.push.apply(or,o)}function L4(o){for(var c=o;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var j=m[x],P=j.getSnapshot;j=j.value;try{if(!ui(P(),j))return!1}catch(V){return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ho(o,c){for(c&=~Zx,c&=~Jp,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var m=31-Hn(c),x=1<<m;o[m]=-1,c&=~x}}function Lw(o){if((Xt&6)!==0)throw Error(s(327));Dc();var c=Xo(o,0);if((c&1)===0)return lr(o,hs()),null;var m=rm(o,c);if(o.tag!==0&&m===2){var x=jr(o);x!==0&&(c=x,m=ny(o,x))}if(m===1)throw m=pu,ul(o,0),ho(o,c),lr(o,hs()),m;if(m===6)throw Error(s(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,hl(o,or,ma),lr(o,hs()),null}function iy(o,c){var m=Xt;Xt|=1;try{return o(c)}finally{Xt=m,Xt===0&&(Lc=hs()+500,Ip&&ro())}}function dl(o){co!==null&&co.tag===0&&(Xt&6)===0&&Dc();var c=Xt;Xt|=1;var m=Wr.transition,x=zt;try{if(Wr.transition=null,zt=1,o)return o()}finally{zt=x,Wr.transition=m,Xt=c,(Xt&6)===0&&ro()}}function ay(){Tr=Pc.current,ys(Pc)}function ul(o,c){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,d4(m)),zs!==null)for(m=zs.return;m!==null;){var x=m;switch(fx(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ep();break;case 3:Ac(),ys(rr),ys(In),Tx();break;case 5:kx(x);break;case 4:Ac();break;case 13:ys(Cs);break;case 19:ys(Cs);break;case 10:_x(x.type._context);break;case 22:case 23:ay()}m=m.return}if(on=o,zs=o=po(o.current,null),xn=Tr=c,tn=0,pu=null,Zx=Jp=cl=0,or=mu=null,al!==null){for(c=0;c<al.length;c++)if(m=al[c],x=m.interleaved,x!==null){m.interleaved=null;var j=x.next,P=m.pending;if(P!==null){var V=P.next;P.next=j,x.next=V}m.pending=x}al=null}return o}function Dw(o,c){do{var m=zs;try{if(bx(),Vp.current=Gp,Up){for(var x=Ts.memoizedState;x!==null;){var j=x.queue;j!==null&&(j.pending=null),x=x.next}Up=!1}if(ll=0,an=en=Ts=null,ou=!1,lu=0,Jx.current=null,m===null||m.return===null){tn=1,pu=c,zs=null;break}e:{var P=o,V=m.return,Q=m,X=c;if(c=xn,Q.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var pe=X,Se=Q,Ae=Se.tag;if((Se.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var je=Se.alternate;je?(Se.updateQueue=je.updateQueue,Se.memoizedState=je.memoizedState,Se.lanes=je.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Ge=aw(V);if(Ge!==null){Ge.flags&=-257,ow(Ge,V,Q,P,c),Ge.mode&1&&iw(P,pe,c),c=Ge,X=pe;var Xe=c.updateQueue;if(Xe===null){var Ye=new Set;Ye.add(X),c.updateQueue=Ye}else Xe.add(X);break e}else{if((c&1)===0){iw(P,pe,c),oy();break e}X=Error(s(426))}}else if(_s&&Q.mode&1){var Bs=aw(V);if(Bs!==null){(Bs.flags&65536)===0&&(Bs.flags|=256),ow(Bs,V,Q,P,c),yx(Ic(X,Q));break e}}P=X=Ic(X,Q),tn!==4&&(tn=2),mu===null?mu=[P]:mu.push(P),P=V;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var oe=nw(P,X,c);A_(P,oe);break e;case 1:Q=X;var te=P.type,de=P.stateNode;if((P.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(lo===null||!lo.has(de)))){P.flags|=65536,c&=-c,P.lanes|=c;var Pe=rw(P,Q,c);A_(P,Pe);break e}}P=P.return}while(P!==null)}Bw(m)}catch(et){c=et,zs===m&&m!==null&&(zs=m=m.return);continue}break}while(!0)}function Mw(){var o=Yp.current;return Yp.current=Gp,o===null?Gp:o}function oy(){(tn===0||tn===3||tn===2)&&(tn=4),on===null||(cl&268435455)===0&&(Jp&268435455)===0||ho(on,xn)}function rm(o,c){var m=Xt;Xt|=2;var x=Mw();(on!==o||xn!==c)&&(ma=null,ul(o,c));do try{D4();break}catch(j){Dw(o,j)}while(!0);if(bx(),Xt=m,Yp.current=x,zs!==null)throw Error(s(261));return on=null,xn=0,tn}function D4(){for(;zs!==null;)Fw(zs)}function M4(){for(;zs!==null&&!tp();)Fw(zs)}function Fw(o){var c=Vw(o.alternate,o,Tr);o.memoizedProps=o.pendingProps,c===null?Bw(o):zs=c,Jx.current=null}function Bw(o){var c=o;do{var m=c.alternate;if(o=c.return,(c.flags&32768)===0){if(m=T4(m,c,Tr),m!==null){zs=m;return}}else{if(m=E4(m,c),m!==null){m.flags&=32767,zs=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{tn=6,zs=null;return}}if(c=c.sibling,c!==null){zs=c;return}zs=c=o}while(c!==null);tn===0&&(tn=5)}function hl(o,c,m){var x=zt,j=Wr.transition;try{Wr.transition=null,zt=1,F4(o,c,m,x)}finally{Wr.transition=j,zt=x}return null}function F4(o,c,m,x){do Dc();while(co!==null);if((Xt&6)!==0)throw Error(s(327));m=o.finishedWork;var j=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0;var P=m.lanes|m.childLanes;if(cs(o,P),o===on&&(zs=on=null,xn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||em||(em=!0,Uw($r,function(){return Dc(),null})),P=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||P){P=Wr.transition,Wr.transition=null;var V=zt;zt=1;var Q=Xt;Xt|=4,Jx.current=null,I4(o,m),Tw(m,o),n4(ox),Ja=!!ax,ox=ax=null,o.current=m,R4(m),Hg(),Xt=Q,zt=V,Wr.transition=P}else o.current=m;if(em&&(em=!1,co=o,tm=j),P=o.pendingLanes,P===0&&(lo=null),rp(m.stateNode),lr(o,hs()),c!==null)for(x=o.onRecoverableError,m=0;m<c.length;m++)j=c[m],x(j.value,{componentStack:j.stack,digest:j.digest});if(Zp)throw Zp=!1,o=ty,ty=null,o;return(tm&1)!==0&&o.tag!==0&&Dc(),P=o.pendingLanes,(P&1)!==0?o===sy?fu++:(fu=0,sy=o):fu=0,ro(),null}function Dc(){if(co!==null){var o=Xa(tm),c=Wr.transition,m=zt;try{if(Wr.transition=null,zt=16>o?16:o,co===null)var x=!1;else{if(o=co,co=null,tm=0,(Xt&6)!==0)throw Error(s(331));var j=Xt;for(Xt|=4,qe=o.current;qe!==null;){var P=qe,V=P.child;if((qe.flags&16)!==0){var Q=P.deletions;if(Q!==null){for(var X=0;X<Q.length;X++){var pe=Q[X];for(qe=pe;qe!==null;){var Se=qe;switch(Se.tag){case 0:case 11:case 15:hu(8,Se,P)}var Ae=Se.child;if(Ae!==null)Ae.return=Se,qe=Ae;else for(;qe!==null;){Se=qe;var je=Se.sibling,Ge=Se.return;if(jw(Se),Se===pe){qe=null;break}if(je!==null){je.return=Ge,qe=je;break}qe=Ge}}}var Xe=P.alternate;if(Xe!==null){var Ye=Xe.child;if(Ye!==null){Xe.child=null;do{var Bs=Ye.sibling;Ye.sibling=null,Ye=Bs}while(Ye!==null)}}qe=P}}if((P.subtreeFlags&2064)!==0&&V!==null)V.return=P,qe=V;else e:for(;qe!==null;){if(P=qe,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:hu(9,P,P.return)}var oe=P.sibling;if(oe!==null){oe.return=P.return,qe=oe;break e}qe=P.return}}var te=o.current;for(qe=te;qe!==null;){V=qe;var de=V.child;if((V.subtreeFlags&2064)!==0&&de!==null)de.return=V,qe=de;else e:for(V=te;qe!==null;){if(Q=qe,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Xp(9,Q)}}catch(et){Ls(Q,Q.return,et)}if(Q===V){qe=null;break e}var Pe=Q.sibling;if(Pe!==null){Pe.return=Q.return,qe=Pe;break e}qe=Q.return}}if(Xt=j,ro(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Qo,o)}catch(et){}x=!0}return x}finally{zt=m,Wr.transition=c}}return!1}function $w(o,c,m){c=Ic(m,c),c=nw(o,c,1),o=ao(o,c,1),c=qn(),o!==null&&(Ka(o,1,c),lr(o,c))}function Ls(o,c,m){if(o.tag===3)$w(o,o,m);else for(;c!==null;){if(c.tag===3){$w(c,o,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(lo===null||!lo.has(x))){o=Ic(m,o),o=rw(c,o,1),c=ao(c,o,1),o=qn(),c!==null&&(Ka(c,1,o),lr(c,o));break}}c=c.return}}function B4(o,c,m){var x=o.pingCache;x!==null&&x.delete(c),c=qn(),o.pingedLanes|=o.suspendedLanes&m,on===o&&(xn&m)===m&&(tn===4||tn===3&&(xn&130023424)===xn&&500>hs()-ey?ul(o,0):Zx|=m),lr(o,c)}function Ow(o,c){c===0&&((o.mode&1)===0?c=1:(c=rc,rc<<=1,(rc&130023424)===0&&(rc=4194304)));var m=qn();o=ua(o,c),o!==null&&(Ka(o,c,m),lr(o,m))}function $4(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),Ow(o,m)}function O4(o,c){var m=0;switch(o.tag){case 13:var x=o.stateNode,j=o.memoizedState;j!==null&&(m=j.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(c),Ow(o,m)}var Vw;Vw=function(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps||rr.current)ar=!0;else{if((o.lanes&m)===0&&(c.flags&128)===0)return ar=!1,C4(o,c,m);ar=(o.flags&131072)!==0}else ar=!1,_s&&(c.flags&1048576)!==0&&b_(c,Pp,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;Kp(o,c),o=c.pendingProps;var j=jc(c,In.current);Ec(c,m),j=Ix(null,c,x,o,j,m);var P=Rx();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ir(x)?(P=!0,Ap(c)):P=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Sx(c),j.updater=Wp,c.stateNode=j,j._reactInternals=c,Bx(c,x,o,m),c=Ux(null,c,x,!0,P,m)):(c.tag=0,_s&&P&&mx(c),Wn(null,c,j,m),c=c.child),c;case 16:x=c.elementType;e:{switch(Kp(o,c),o=c.pendingProps,j=x._init,x=j(x._payload),c.type=x,j=c.tag=U4(x),o=pi(x,o),j){case 0:c=Vx(null,c,x,o,m);break e;case 1:c=pw(null,c,x,o,m);break e;case 11:c=lw(null,c,x,o,m);break e;case 14:c=cw(null,c,x,pi(x.type,o),m);break e}throw Error(s(306,x,""))}return c;case 0:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:pi(x,j),Vx(o,c,x,j,m);case 1:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:pi(x,j),pw(o,c,x,j,m);case 3:e:{if(mw(c),o===null)throw Error(s(387));x=c.pendingProps,P=c.memoizedState,j=P.element,E_(o,c),$p(c,x,null,m);var V=c.memoizedState;if(x=V.element,P.isDehydrated)if(P={element:x,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){j=Ic(Error(s(423)),c),c=fw(o,c,x,m,j);break e}else if(x!==j){j=Ic(Error(s(424)),c),c=fw(o,c,x,m,j);break e}else for(Cr=to(c.stateNode.containerInfo.firstChild),kr=c,_s=!0,hi=null,m=C_(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(kc(),x===j){c=pa(o,c,m);break e}Wn(o,c,x,m)}c=c.child}return c;case 5:return R_(c),o===null&&xx(c),x=c.type,j=c.pendingProps,P=o!==null?o.memoizedProps:null,V=j.children,lx(x,j)?V=null:P!==null&&lx(x,P)&&(c.flags|=32),hw(o,c),Wn(o,c,V,m),c.child;case 6:return o===null&&xx(c),null;case 13:return gw(o,c,m);case 4:return Nx(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=Cc(c,null,x,m):Wn(o,c,x,m),c.child;case 11:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:pi(x,j),lw(o,c,x,j,m);case 7:return Wn(o,c,c.pendingProps,m),c.child;case 8:return Wn(o,c,c.pendingProps.children,m),c.child;case 12:return Wn(o,c,c.pendingProps.children,m),c.child;case 10:e:{if(x=c.type._context,j=c.pendingProps,P=c.memoizedProps,V=j.value,ps(Mp,x._currentValue),x._currentValue=V,P!==null)if(ui(P.value,V)){if(P.children===j.children&&!rr.current){c=pa(o,c,m);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var Q=P.dependencies;if(Q!==null){V=P.child;for(var X=Q.firstContext;X!==null;){if(X.context===x){if(P.tag===1){X=ha(-1,m&-m),X.tag=2;var pe=P.updateQueue;if(pe!==null){pe=pe.shared;var Se=pe.pending;Se===null?X.next=X:(X.next=Se.next,Se.next=X),pe.pending=X}}P.lanes|=m,X=P.alternate,X!==null&&(X.lanes|=m),wx(P.return,m,c),Q.lanes|=m;break}X=X.next}}else if(P.tag===10)V=P.type===c.type?null:P.child;else if(P.tag===18){if(V=P.return,V===null)throw Error(s(341));V.lanes|=m,Q=V.alternate,Q!==null&&(Q.lanes|=m),wx(V,m,c),V=P.sibling}else V=P.child;if(V!==null)V.return=P;else for(V=P;V!==null;){if(V===c){V=null;break}if(P=V.sibling,P!==null){P.return=V.return,V=P;break}V=V.return}P=V}Wn(o,c,j.children,m),c=c.child}return c;case 9:return j=c.type,x=c.pendingProps.children,Ec(c,m),j=Hr(j),x=x(j),c.flags|=1,Wn(o,c,x,m),c.child;case 14:return x=c.type,j=pi(x,c.pendingProps),j=pi(x.type,j),cw(o,c,x,j,m);case 15:return dw(o,c,c.type,c.pendingProps,m);case 17:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:pi(x,j),Kp(o,c),c.tag=1,ir(x)?(o=!0,Ap(c)):o=!1,Ec(c,m),tw(c,x,j),Bx(c,x,j,m),Ux(null,c,x,!0,o,m);case 19:return yw(o,c,m);case 22:return uw(o,c,m)}throw Error(s(156,c.tag))};function Uw(o,c){return sc(o,c)}function V4(o,c,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(o,c,m,x){return new V4(o,c,m,x)}function ly(o){return o=o.prototype,!(!o||!o.isReactComponent)}function U4(o){if(typeof o=="function")return ly(o)?1:0;if(o!=null){if(o=o.$$typeof,o===B)return 11;if(o===H)return 14}return 2}function po(o,c){var m=o.alternate;return m===null?(m=qr(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function im(o,c,m,x,j,P){var V=2;if(x=o,typeof o=="function")ly(o)&&(V=1);else if(typeof o=="string")V=5;else e:switch(o){case C:return pl(m.children,j,P,c);case w:V=8,j|=8;break;case I:return o=qr(12,m,c,j|2),o.elementType=I,o.lanes=P,o;case $:return o=qr(13,m,c,j),o.elementType=$,o.lanes=P,o;case W:return o=qr(19,m,c,j),o.elementType=W,o.lanes=P,o;case K:return am(m,j,P,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:V=10;break e;case R:V=9;break e;case B:V=11;break e;case H:V=14;break e;case q:V=16,x=null;break e}throw Error(s(130,o==null?o:typeof o,""))}return c=qr(V,m,c,j),c.elementType=o,c.type=x,c.lanes=P,c}function pl(o,c,m,x){return o=qr(7,o,x,c),o.lanes=m,o}function am(o,c,m,x){return o=qr(22,o,x,c),o.elementType=K,o.lanes=m,o.stateNode={isHidden:!1},o}function cy(o,c,m){return o=qr(6,o,null,c),o.lanes=m,o}function dy(o,c,m){return c=qr(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function z4(o,c,m,x,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=x,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function uy(o,c,m,x,j,P,V,Q,X){return o=new z4(o,c,m,Q,X),c===1?(c=1,P===!0&&(c|=8)):c=0,P=qr(3,null,null,c),o.current=P,P.stateNode=o,P.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sx(P),o}function H4(o,c,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:x==null?null:""+x,children:o,containerInfo:c,implementation:m}}function zw(o){if(!o)return no;o=o._reactInternals;e:{if(ri(o)!==o||o.tag!==1)throw Error(s(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ir(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(o.tag===1){var m=o.type;if(ir(m))return x_(o,m,c)}return c}function Hw(o,c,m,x,j,P,V,Q,X){return o=uy(m,x,!0,o,j,P,V,Q,X),o.context=zw(null),m=o.current,x=qn(),j=uo(m),P=ha(x,j),P.callback=c!=null?c:null,ao(m,P,j),o.current.lanes=j,Ka(o,j,x),lr(o,x),o}function om(o,c,m,x){var j=c.current,P=qn(),V=uo(j);return m=zw(m),c.context===null?c.context=m:c.pendingContext=m,c=ha(P,V),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=ao(j,c,V),o!==null&&(gi(o,j,V,P),Bp(o,j,V)),V}function lm(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Gw(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function hy(o,c){Gw(o,c),(o=o.alternate)&&Gw(o,c)}function G4(){return null}var Ww=typeof reportError=="function"?reportError:function(o){console.error(o)};function py(o){this._internalRoot=o}cm.prototype.render=py.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));om(o,c,null,null)},cm.prototype.unmount=py.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;dl(function(){om(null,o,null,null)}),c[oa]=null}};function cm(o){this._internalRoot=o}cm.prototype.unstable_scheduleHydration=function(o){if(o){var c=cp();o={blockedOn:null,target:o,priority:c};for(var m=0;m<Ii.length&&c!==0&&c<Ii[m].priority;m++);Ii.splice(m,0,o),m===0&&hp(o)}};function my(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function dm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function qw(){}function W4(o,c,m,x,j){if(j){if(typeof x=="function"){var P=x;x=function(){var pe=lm(V);P.call(pe)}}var V=Hw(c,x,o,0,null,!1,!1,"",qw);return o._reactRootContainer=V,o[oa]=V.current,Zd(o.nodeType===8?o.parentNode:o),dl(),V}for(;j=o.lastChild;)o.removeChild(j);if(typeof x=="function"){var Q=x;x=function(){var pe=lm(X);Q.call(pe)}}var X=uy(o,0,!1,null,null,!1,!1,"",qw);return o._reactRootContainer=X,o[oa]=X.current,Zd(o.nodeType===8?o.parentNode:o),dl(function(){om(c,X,m,x)}),X}function um(o,c,m,x,j){var P=m._reactRootContainer;if(P){var V=P;if(typeof j=="function"){var Q=j;j=function(){var X=lm(V);Q.call(X)}}om(c,V,o,j)}else V=W4(m,c,o,j,x);return lm(V)}op=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var m=Wa(c.pendingLanes);m!==0&&(Qa(c,m|1),lr(c,hs()),(Xt&6)===0&&(Lc=hs()+500,ro()))}break;case 13:dl(function(){var x=ua(o,1);if(x!==null){var j=qn();gi(x,o,1,j)}}),hy(o,1)}},ic=function(o){if(o.tag===13){var c=ua(o,134217728);if(c!==null){var m=qn();gi(c,o,134217728,m)}hy(o,134217728)}},lp=function(o){if(o.tag===13){var c=uo(o),m=ua(o,c);if(m!==null){var x=qn();gi(m,o,c,x)}hy(o,c)}},cp=function(){return zt},dp=function(o,c){var m=zt;try{return zt=o,c()}finally{zt=m}},rt=function(o,c,m){switch(c){case"input":if(Ft(o,m),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==o&&x.form===o.form){var j=Tp(x);if(!j)throw Error(s(90));be(x),Ft(x,j)}}}break;case"textarea":ot(o,m);break;case"select":c=m.value,c!=null&&Le(o,!!m.multiple,c,!1)}},br=iy,Wo=dl;var q4={usingClientEntryPoint:!1,Events:[su,_c,Tp,Js,Ci,iy]},gu={findFiberByHostInstance:sl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K4={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Fd(o),o===null?null:o.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||G4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{Qo=hm.inject(K4),wr=hm}catch(o){}}return cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q4,cr.createPortal=function(o,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(c))throw Error(s(200));return H4(o,c,null,m)},cr.createRoot=function(o,c){if(!my(o))throw Error(s(299));var m=!1,x="",j=Ww;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=uy(o,1,!1,null,null,m,!1,x,j),o[oa]=c.current,Zd(o.nodeType===8?o.parentNode:o),new py(c)},cr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=Fd(c),o=o===null?null:o.stateNode,o},cr.flushSync=function(o){return dl(o)},cr.hydrate=function(o,c,m){if(!dm(c))throw Error(s(200));return um(null,o,c,!0,m)},cr.hydrateRoot=function(o,c,m){if(!my(o))throw Error(s(405));var x=m!=null&&m.hydratedSources||null,j=!1,P="",V=Ww;if(m!=null&&(m.unstable_strictMode===!0&&(j=!0),m.identifierPrefix!==void 0&&(P=m.identifierPrefix),m.onRecoverableError!==void 0&&(V=m.onRecoverableError)),c=Hw(c,null,o,1,m!=null?m:null,j,!1,P,V),o[oa]=c.current,Zd(o),x)for(o=0;o<x.length;o++)m=x[o],j=m._getVersion,j=j(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,j]:c.mutableSourceEagerHydrationData.push(m,j);return new cm(c)},cr.render=function(o,c,m){if(!dm(c))throw Error(s(200));return um(null,o,c,!1,m)},cr.unmountComponentAtNode=function(o){if(!dm(o))throw Error(s(40));return o._reactRootContainer?(dl(function(){um(null,null,o,!1,function(){o._reactRootContainer=null,o[oa]=null})}),!0):!1},cr.unstable_batchedUpdates=iy,cr.unstable_renderSubtreeIntoContainer=function(o,c,m,x){if(!dm(m))throw Error(s(200));if(o==null||o._reactInternals===void 0)throw Error(s(38));return um(o,c,m,!1,x)},cr.version="18.3.1-next-f1338f8080-20240426",cr}var t2;function Hk(){if(t2)return xy.exports;t2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xy.exports=tI(),xy.exports}var s2;function sI(){if(s2)return pm;s2=1;var t=Hk();return pm.createRoot=t.createRoot,pm.hydrateRoot=t.hydrateRoot,pm}var nI=sI();const rI=O0(nI),ft=t=>typeof t=="string",yu=()=>{let t,e;const s=new Promise((r,i)=>{t=r,e=i});return s.resolve=t,s.reject=e,s},n2=t=>t==null?"":""+t,iI=(t,e,s)=>{t.forEach(r=>{e[r]&&(s[r]=e[r])})},aI=/###/g,r2=t=>t&&t.indexOf("###")>-1?t.replace(aI,"."):t,i2=t=>!t||ft(t),Vu=(t,e,s)=>{const r=ft(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(i2(t))return{};const a=r2(r[i]);!t[a]&&s&&(t[a]=new s),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return i2(t)?{}:{obj:t,k:r2(r[i])}},a2=(t,e,s)=>{const{obj:r,k:i}=Vu(t,e,Object);if(r!==void 0||e.length===1){r[i]=s;return}let a=e[e.length-1],l=e.slice(0,e.length-1),d=Vu(t,l,Object);for(;d.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),d=Vu(t,l,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${a}`]!="undefined"&&(d.obj=void 0);d.obj[`${d.k}.${a}`]=s},oI=(t,e,s,r)=>{const{obj:i,k:a}=Vu(t,e,Object);i[a]=i[a]||[],i[a].push(s)},ff=(t,e)=>{const{obj:s,k:r}=Vu(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},lI=(t,e,s)=>{const r=ff(t,s);return r!==void 0?r:ff(e,s)},Gk=(t,e,s)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ft(t[r])||t[r]instanceof String||ft(e[r])||e[r]instanceof String?s&&(t[r]=e[r]):Gk(t[r],e[r],s):t[r]=e[r]);return t},Mc=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var cI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const dI=t=>ft(t)?t.replace(/[&<>"'\/]/g,e=>cI[e]):t;class uI{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const hI=[" ",",","?","!",";"],pI=new uI(20),mI=(t,e,s)=>{e=e||"",s=s||"";const r=hI.filter(l=>e.indexOf(l)<0&&s.indexOf(l)<0);if(r.length===0)return!0;const i=pI.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!i.test(t);if(!a){const l=t.indexOf(s);l>0&&!i.test(t.substring(0,l))&&(a=!0)}return a},Tv=(t,e,s=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(s);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let l,d="";for(let u=a;u<r.length;++u)if(u!==a&&(d+=s),d+=r[u],l=i[d],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=l}return i},ih=t=>t==null?void 0:t.replace("_","-"),fI={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var s,r;(r=(s=console==null?void 0:console[t])==null?void 0:s.apply)==null||r.call(s,console,e)}};let gI=class Ev{constructor(e,s={}){this.init(e,s)}init(e,s={}){this.prefix=s.prefix||"i18next:",this.logger=e||fI,this.options=s,this.debug=s.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,r,i){return i&&!this.debug?null:(ft(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new Ev(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ev(this.logger,e)}};var zi=new gI;class eg{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(s)||0;this.observers[r].set(s,i+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e,...s){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i.apply(i,[e,...s])})}}class o2 extends eg{constructor(e,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,r,i={}){var h,p;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,s],r&&(Array.isArray(r)?d.push(...r):ft(r)&&a?d.push(...r.split(a)):d.push(r)));const u=ff(this.data,d);return!u&&!s&&!r&&e.indexOf(".")>-1&&(e=d[0],s=d[1],r=d.slice(2).join(".")),u||!l||!ft(r)?u:Tv((p=(h=this.data)==null?void 0:h[e])==null?void 0:p[s],r,a)}addResource(e,s,r,i,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let d=[e,s];r&&(d=d.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(d=e.split("."),i=s,s=d[1]),this.addNamespaces(s),a2(this.data,d,i),a.silent||this.emit("added",e,s,r,i)}addResources(e,s,r,i={silent:!1}){for(const a in r)(ft(r[a])||Array.isArray(r[a]))&&this.addResource(e,s,a,r[a],{silent:!0});i.silent||this.emit("added",e,s,r)}addResourceBundle(e,s,r,i,a,l={silent:!1,skipCopy:!1}){let d=[e,s];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=s,s=d[1]),this.addNamespaces(s);let u=ff(this.data,d)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Gk(u,r,a):u={...u,...r},a2(this.data,d,u),l.silent||this.emit("added",e,s,r)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(i=>s[i]&&Object.keys(s[i]).length>0)}toJSON(){return this.data}}var Wk={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,r,i){return t.forEach(a=>{var l,d;e=(d=(l=this.processors[a])==null?void 0:l.process(e,s,r,i))!=null?d:e}),e}};const qk=Symbol("i18next/PATH_KEY");function xI(){const t=[],e=Object.create(null);let s;return e.get=(r,i)=>{var a;return(a=s==null?void 0:s.revoke)==null||a.call(s),i===qk?t:(t.push(i),s=Proxy.revocable(r,e),s.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Av(t,e){var r;const{[qk]:s}=t(xI());return s.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const l2={},c2=t=>!ft(t)&&typeof t!="boolean"&&typeof t!="number";class gf extends eg{constructor(e,s={}){super(),iI(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=zi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,s={interpolation:{}}){const r={...s};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=s.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!mI(e,r,i);if(l&&!d){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:ft(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:ft(a)?[a]:a}}translate(e,s,r){let i=typeof s=="object"?{...s}:s;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Av(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let p=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const g=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return v?a?{res:`${h}${p}${d}`,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${p}${d}`:a?{res:d,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:d;const b=this.resolve(e,i);let S=b==null?void 0:b.res;const k=(b==null?void 0:b.usedKey)||d,E=(b==null?void 0:b.exactUsedKey)||d,L=["[object Number]","[object Function]","[object RegExp]"],M=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,y=i.count!==void 0&&!ft(i.count),_=gf.hasDefaultValue(i),D=y?this.pluralResolver.getSuffix(g,i.count,i):"",C=i.ordinal&&y?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",w=y&&!i.ordinal&&i.count===0,I=w&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${D}`]||i[`defaultValue${C}`]||i.defaultValue;let F=S;N&&!S&&_&&(F=I);const R=c2(F),B=Object.prototype.toString.apply(F);if(N&&F&&R&&L.indexOf(B)<0&&!(ft(M)&&Array.isArray(F))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,F,{...i,ns:u}):`key '${d} (${this.language})' returned an object instead of string.`;return a?(b.res=$,b.usedParams=this.getUsedParamsDetails(i),b):$}if(l){const $=Array.isArray(F),W=$?[]:{},H=$?E:k;for(const q in F)if(Object.prototype.hasOwnProperty.call(F,q)){const K=`${H}${l}${q}`;_&&!S?W[q]=this.translate(K,{...i,defaultValue:c2(I)?I[q]:void 0,joinArrays:!1,ns:u}):W[q]=this.translate(K,{...i,joinArrays:!1,ns:u}),W[q]===K&&(W[q]=F[q])}S=W}}else if(N&&ft(M)&&Array.isArray(S))S=S.join(M),S&&(S=this.extendTranslation(S,e,i,r));else{let $=!1,W=!1;!this.isValidLookup(S)&&_&&($=!0,S=I),this.isValidLookup(S)||(W=!0,S=d);const q=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&W?void 0:S,K=_&&I!==S&&this.options.updateMissing;if(W||$||K){if(this.logger.log(K?"updateKey":"missingKey",g,h,d,K?I:S),l){const U=this.resolve(d,{...i,keySeparator:!1});U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let G=[];const se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(let U=0;U<se.length;U++)G.push(se[U]);else this.options.saveMissingTo==="all"?G=this.languageUtils.toResolveHierarchy(i.lng||this.language):G.push(i.lng||this.language);const ne=(U,Z,le)=>{var he;const ee=_&&le!==S?le:q;this.options.missingKeyHandler?this.options.missingKeyHandler(U,h,Z,ee,K,i):(he=this.backendConnector)!=null&&he.saveMissing&&this.backendConnector.saveMissing(U,h,Z,ee,K,i),this.emit("missingKey",U,h,Z,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?G.forEach(U=>{const Z=this.pluralResolver.getSuffixes(U,i);w&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Z.indexOf(`${this.options.pluralSeparator}zero`)<0&&Z.push(`${this.options.pluralSeparator}zero`),Z.forEach(le=>{ne([U],d+le,i[`defaultValue${le}`]||I)})}):ne(G,d,I))}S=this.extendTranslation(S,e,i,b,r),W&&S===d&&this.options.appendNamespaceToMissingKey&&(S=`${h}${p}${d}`),(W||$)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${d}`:d,$?S:void 0,i))}return a?(b.res=S,b.usedParams=this.getUsedParamsDetails(i),b):S}extendTranslation(e,s,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=ft(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const b=e.match(this.interpolator.nestingRegexp);g=b&&b.length}let v=r.replace&&!ft(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||i.usedLng,r),p){const b=e.match(this.interpolator.nestingRegexp),S=b&&b.length;g<S&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>(a==null?void 0:a[0])===b[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${s[0]}`),null):this.translate(...b,s),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,d=ft(l)?[l]:l;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=Wk.handle(d,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,s={}){let r,i,a,l,d;return ft(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,s),p=h.key;i=p;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const v=s.count!==void 0&&!ft(s.count),b=v&&!s.ordinal&&s.count===0,S=s.context!==void 0&&(ft(s.context)||typeof s.context=="number")&&s.context!=="",k=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);g.forEach(E=>{var L,M;this.isValidLookup(r)||(d=E,!l2[`${k[0]}-${E}`]&&((L=this.utils)!=null&&L.hasLoadedNamespace)&&!((M=this.utils)!=null&&M.hasLoadedNamespace(d))&&(l2[`${k[0]}-${E}`]=!0,this.logger.warn(`key "${i}" for languages "${k.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(N=>{var D;if(this.isValidLookup(r))return;l=N;const y=[p];if((D=this.i18nFormat)!=null&&D.addLookupKeys)this.i18nFormat.addLookupKeys(y,p,N,E,s);else{let C;v&&(C=this.pluralResolver.getSuffix(N,s.count,s));const w=`${this.options.pluralSeparator}zero`,I=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(s.ordinal&&C.indexOf(I)===0&&y.push(p+C.replace(I,this.options.pluralSeparator)),y.push(p+C),b&&y.push(p+w)),S){const F=`${p}${this.options.contextSeparator||"_"}${s.context}`;y.push(F),v&&(s.ordinal&&C.indexOf(I)===0&&y.push(F+C.replace(I,this.options.pluralSeparator)),y.push(F+C),b&&y.push(F+w))}}let _;for(;_=y.pop();)this.isValidLookup(r)||(a=_,r=this.getResource(N,E,_,s))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:l,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,s,r,i):this.resourceStore.getResource(e,s,r,i)}getUsedParamsDetails(e={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ft(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of s)delete i[a]}return i}static hasDefaultValue(e){const s="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&s===r.substring(0,s.length)&&e[r]!==void 0)return!0;return!1}}class d2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=zi.create("languageUtils")}getScriptPartFromCode(e){if(e=ih(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=ih(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(ft(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch(r){}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(r=>{if(s)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(s=i)}),!s&&this.options.supportedLngs&&e.forEach(r=>{if(s)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return s=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),ft(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let r=e[s];return r||(r=e[this.getScriptPartFromCode(s)]),r||(r=e[this.formatLanguageCode(s)]),r||(r=e[this.getLanguagePartFromCode(s)]),r||(r=e.default),r||[]}toResolveHierarchy(e,s){const r=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],e),i=[],a=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ft(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):ft(e)&&a(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&a(this.formatLanguageCode(l))}),i}}const u2={zero:0,one:1,two:2,few:3,many:4,other:5},h2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class yI{constructor(e,s={}){this.languageUtils=e,this.options=s,this.logger=zi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e,s={}){const r=ih(e==="dev"?"en":e),i=s.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(r,{type:i})}catch(d){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),h2;if(!e.match(/-|_/))return h2;const u=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(u,s)}return this.pluralRulesCache[a]=l,l}needsPlural(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,s,r={}){return this.getSuffixes(e,r).map(i=>`${s}${i}`)}getSuffixes(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>u2[i]-u2[a]).map(i=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,s,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,r))}}const p2=(t,e,s,r=".",i=!0)=>{let a=lI(t,e,s);return!a&&i&&ft(s)&&(a=Tv(t,s,r),a===void 0&&(a=Tv(e,s,r))),a},by=t=>t.replace(/\$/g,"$$$$");class vI{constructor(e={}){var s;this.logger=zi.create("interpolator"),this.options=e,this.format=((s=e==null?void 0:e.interpolation)==null?void 0:s.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:l,suffix:d,suffixEscaped:u,formatSeparator:h,unescapeSuffix:p,unescapePrefix:g,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:S,nestingSuffixEscaped:k,nestingOptionsSeparator:E,maxReplaces:L,alwaysFormat:M}=e.interpolation;this.escape=s!==void 0?s:dI,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Mc(a):l||"{{",this.suffix=d?Mc(d):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=v?Mc(v):b||Mc("$t("),this.nestingSuffix=S?Mc(S):k||Mc(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=L||1e3,this.alwaysFormat=M!==void 0?M:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,r)=>(s==null?void 0:s.source)===r?(s.lastIndex=0,s):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,s,r,i){var b;let a,l,d;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=S=>{if(S.indexOf(this.formatSeparator)<0){const M=p2(s,u,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(M,void 0,r,{...i,...s,interpolationkey:S}):M}const k=S.split(this.formatSeparator),E=k.shift().trim(),L=k.join(this.formatSeparator).trim();return this.format(p2(s,u,E,this.options.keySeparator,this.options.ignoreJSONStructure),L,r,{...i,...s,interpolationkey:E})};this.resetRegExp();const p=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=i==null?void 0:i.interpolation)==null?void 0:b.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>by(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?by(this.escape(S)):by(S)}].forEach(S=>{for(d=0;a=S.regex.exec(e);){const k=a[1].trim();if(l=h(k),l===void 0)if(typeof p=="function"){const L=p(e,a,i);l=ft(L)?L:""}else if(i&&Object.prototype.hasOwnProperty.call(i,k))l="";else if(g){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),l="";else!ft(l)&&!this.useRawValueToEscape&&(l=n2(l));const E=S.safeValue(l);if(e=e.replace(a[0],E),g?(S.regex.lastIndex+=l.length,S.regex.lastIndex-=a[0].length):S.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,s,r={}){let i,a,l;const d=(u,h)=>{var k;const p=this.nestingOptionsSeparator;if(u.indexOf(p)<0)return u;const g=u.split(new RegExp(`${p}[ ]*{`));let v=`{${g[1]}`;u=g[0],v=this.interpolate(v,l);const b=v.match(/'/g),S=v.match(/"/g);(((k=b==null?void 0:b.length)!=null?k:0)%2===0&&!S||S.length%2!==0)&&(v=v.replace(/'/g,'"'));try{l=JSON.parse(v),h&&(l={...h,...l})}catch(E){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,E),`${u}${p}${v}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];l={...r},l=l.replace&&!ft(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=s(d.call(this,i[1].trim(),l),l),a&&i[0]===e&&!ft(a))return a;ft(a)||(a=n2(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((p,g)=>this.format(p,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const bI=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(l=>{if(l){const[d,...u]=l.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),p=d.trim();s[p]||(s[p]=h),h==="false"&&(s[p]=!1),h==="true"&&(s[p]=!0),isNaN(h)||(s[p]=parseInt(h,10))}})}return{formatName:e,formatOptions:s}},m2=t=>{const e={};return(s,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const l=r+JSON.stringify(a);let d=e[l];return d||(d=t(ih(r),i),e[l]=d),d(s)}},_I=t=>(e,s,r)=>t(ih(s),r)(e);class wI{constructor(e={}){this.logger=zi.create("formatter"),this.options=e,this.init(e)}init(e,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const r=s.cacheInBuiltFormats?m2:_I;this.formats={number:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a});return d=>l.format(d)}),currency:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a,style:"currency"});return d=>l.format(d)}),datetime:r((i,a)=>{const l=new Intl.DateTimeFormat(i,{...a});return d=>l.format(d)}),relativetime:r((i,a)=>{const l=new Intl.RelativeTimeFormat(i,{...a});return d=>l.format(d,a.range||"day")}),list:r((i,a)=>{const l=new Intl.ListFormat(i,{...a});return d=>l.format(d)})}}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=m2(s)}format(e,s,r,i={}){const a=s.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(d=>d.indexOf(")")>-1)){const d=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,d)].join(this.formatSeparator)}return a.reduce((d,u)=>{var g;const{formatName:h,formatOptions:p}=bI(u);if(this.formats[h]){let v=d;try{const b=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},S=b.locale||b.lng||i.locale||i.lng||r;v=this.formats[h](d,S,{...p,...i,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${h}`);return d},e)}}const jI=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class SI extends eg{constructor(e,s,r,i={}){var a,l;super(),this.backend=e,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=zi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(a=this.backend)==null?void 0:a.init)==null||l.call(a,r,i.backend,i)}queueLoad(e,s,r,i){const a={},l={},d={},u={};return e.forEach(h=>{let p=!0;s.forEach(g=>{const v=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?l[v]===void 0&&(l[v]=!0):(this.state[v]=1,p=!1,l[v]===void 0&&(l[v]=!0),a[v]===void 0&&(a[v]=!0),u[g]===void 0&&(u[g]=!0)))}),p||(d[h]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(u)}}loaded(e,s,r){const i=e.split("|"),a=i[0],l=i[1];s&&this.emit("failedLoading",a,l,s),!s&&r&&this.store.addResourceBundle(a,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&r&&(this.state[e]=0);const d={};this.queue.forEach(u=>{oI(u.loaded,[a],l),jI(u,e),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{d[h]||(d[h]={});const p=u.loaded[h];p.length&&p.forEach(g=>{d[h][g]===void 0&&(d[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(u=>!u.done)}read(e,s,r,i=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:r,tried:i,wait:a,callback:l});return}this.readingCalls++;const d=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&p&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,r,i+1,a*2,l)},a);return}l(h,p)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,s);h&&typeof h.then=="function"?h.then(p=>d(null,p)).catch(d):d(null,h)}catch(h){d(h)}return}return u(e,s,d)}prepareLoading(e,s,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ft(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ft(s)&&(s=[s]);const a=this.queueLoad(e,s,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,s,r){this.prepareLoading(e,s,{},r)}reload(e,s,r){this.prepareLoading(e,s,{reload:!0},r)}loadOne(e,s=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(l,d)=>{l&&this.logger.warn(`${s}loading namespace ${a} for language ${i} failed`,l),!l&&d&&this.logger.log(`${s}loaded namespace ${a} for language ${i}`,d),this.loaded(e,l,d)})}saveMissing(e,s,r,i,a,l={},d=()=>{}){var u,h,p,g,v;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const b={...l,isUpdate:a},S=this.backend.create.bind(this.backend);if(S.length<6)try{let k;S.length===5?k=S(e,s,r,i,b):k=S(e,s,r,i),k&&typeof k.then=="function"?k.then(E=>d(null,E)).catch(d):d(null,k)}catch(k){d(k)}else S(e,s,r,i,d,b)}!e||!e[0]||this.store.addResource(e[0],s,r,i)}}}const f2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ft(t[1])&&(e.defaultValue=t[1]),ft(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(r=>{e[r]=s[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),g2=t=>{var e,s;return ft(t.ns)&&(t.ns=[t.ns]),ft(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ft(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((s=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:s.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},mm=()=>{},NI=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class ah extends eg{constructor(e={},s){if(super(),this.options=g2(e),this.services={},this.logger=zi,this.modules={external:[]},NI(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(e={},s){this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),e.defaultNS==null&&e.ns&&(ft(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=f2();this.options={...r,...this.options,...g2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?zi.init(i(this.modules.logger),this.options):zi.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=wI;const p=new d2(this.options);this.store=new o2(this.options.resources,this.options);const g=this.services;g.logger=zi,g.resourceStore=this.store,g.languageUtils=p,g.pluralResolver=new yI(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new vI(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new SI(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(b,...S)=>{this.emit(b,...S)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new gf(this.services,this.options),this.translator.on("*",(b,...S)=>{this.emit(b,...S)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,s||(s=mm),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const d=yu(),u=()=>{const h=(p,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(g),s(p,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),d}loadResources(e,s=mm){var a,l;let r=s;const i=ft(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const d=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>u(p)),(l=(a=this.options.preload)==null?void 0:a.forEach)==null||l.call(a,h=>u(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,s,r){const i=yu();return typeof e=="function"&&(r=e,e=void 0),typeof s=="function"&&(r=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),r||(r=mm),this.services.backendConnector.reload(e,s,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Wk.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,s){this.isLanguageChangingTo=e;const r=yu();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),s&&s(d,(...h)=>this.t(...h))},l=d=>{var p,g;!e&&!d&&this.services.languageDetector&&(d=[]);const u=ft(d)?d:d&&d[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(ft(d)?[d]:d);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||g.call(p,h)),this.loadResources(h,v=>{a(v,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,s,r){const i=(a,l,...d)=>{let u;typeof l!="object"?u=this.options.overloadTranslationOptionHandler([a,l].concat(d)):u={...l},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let p;return u.keyPrefix&&Array.isArray(a)?p=a.map(g=>(typeof g=="function"&&(g=Av(g,{...this.options,...l})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=Av(a,{...this.options,...l})),p=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(p,u)};return ft(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=r,i}t(...e){var s;return(s=this.translator)==null?void 0:s.translate(...e)}exists(...e){var s;return(s=this.translator)==null?void 0:s.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(d,u)=>{const h=this.services.backendConnector.state[`${d}|${u}`];return h===-1||h===0||h===2};if(s.precheck){const d=s.precheck(this,l);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(a,e)))}loadNamespaces(e,s){const r=yu();return this.options.ns?(ft(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),s&&s(i)}),r):(s&&s(),Promise.resolve())}loadLanguages(e,s){const r=yu();ft(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=i.concat(a),this.loadResources(l=>{r.resolve(),s&&s(l)}),r):(s&&s(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const l=new Intl.Locale(e);if(l&&l.getTextInfo){const d=l.getTextInfo();if(d&&d.direction)return d.direction}}catch(l){}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new d2(f2());return e.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},s){return new ah(e,s)}cloneInstance(e={},s=mm){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new ah(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(d=>{a[d]=this[d]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const d=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((p,g)=>(p[g]={...u[h][g]},p),u[h]),u),{});a.store=new o2(d,i),a.services.resourceStore=a.store}return a.translator=new gf(a.services,i),a.translator.on("*",(d,...u)=>{a.emit(d,...u)}),a.init(i,s),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const En=ah.createInstance();En.createInstance=ah.createInstance;En.createInstance;En.dir;En.init;En.loadResources;En.reloadResources;En.use;En.changeLanguage;En.getFixedT;En.t;En.exists;En.setDefaultNamespace;En.hasLoadedNamespace;En.loadNamespaces;En.loadLanguages;const kI=(t,e,s,r)=>{var a,l,d,u;const i=[s,{code:e,...r||{}}];if((l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Pl(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},x2={},Iv=(t,e,s,r)=>{Pl(s)&&x2[s]||(Pl(s)&&(x2[s]=new Date),kI(t,e,s,r))},Kk=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},Rv=(t,e,s)=>{t.loadNamespaces(e,Kk(t,s))},y2=(t,e,s,r)=>{if(Pl(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Rv(t,s,r);s.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,Kk(t,r))},CI=(t,e,s={})=>!e.languages||!e.languages.length?(Iv(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Pl=t=>typeof t=="string",TI=t=>typeof t=="object"&&t!==null,EI=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,AI={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},II=t=>AI[t],RI=t=>t.replace(EI,II);let Pv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:RI};const PI=(t={})=>{Pv={...Pv,...t}},LI=()=>Pv;let Qk;const DI=t=>{Qk=t},MI=()=>Qk,FI={type:"3rdParty",init(t){PI(t.options.react),DI(t)}},BI=T.createContext();class $I{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const OI=(t,e)=>{const s=T.useRef();return T.useEffect(()=>{s.current=t},[t,e]),s.current},Xk=(t,e,s,r)=>t.getFixedT(e,s,r),VI=(t,e,s,r)=>T.useCallback(Xk(t,e,s,r),[t,e,s,r]),Gl=(t,e={})=>{var y,_,D,C;const{i18n:s}=e,{i18n:r,defaultNS:i}=T.useContext(BI)||{},a=s||r||MI();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new $I),!a){Iv(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const w=(F,R)=>Pl(R)?R:TI(R)&&Pl(R.defaultValue)?R.defaultValue:Array.isArray(F)?F[F.length-1]:F,I=[w,{},!1];return I.t=w,I.i18n={},I.ready=!1,I}(y=a.options.react)!=null&&y.wait&&Iv(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...LI(),...a.options.react,...e},{useSuspense:d,keyPrefix:u}=l;let h=i||((_=a.options)==null?void 0:_.defaultNS);h=Pl(h)?[h]:h||["translation"],(C=(D=a.reportNamespaces).addUsedNamespaces)==null||C.call(D,h);const p=(a.isInitialized||a.initializedStoreOnce)&&h.every(w=>CI(w,a,l)),g=VI(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),v=()=>g,b=()=>Xk(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),[S,k]=T.useState(v);let E=h.join();e.lng&&(E=`${e.lng}${E}`);const L=OI(E),M=T.useRef(!0);T.useEffect(()=>{const{bindI18n:w,bindI18nStore:I}=l;M.current=!0,!p&&!d&&(e.lng?y2(a,e.lng,h,()=>{M.current&&k(b)}):Rv(a,h,()=>{M.current&&k(b)})),p&&L&&L!==E&&M.current&&k(b);const F=()=>{M.current&&k(b)};return w&&(a==null||a.on(w,F)),I&&(a==null||a.store.on(I,F)),()=>{M.current=!1,a&&w&&(w==null||w.split(" ").forEach(R=>a.off(R,F))),I&&a&&I.split(" ").forEach(R=>a.store.off(R,F))}},[a,E]),T.useEffect(()=>{M.current&&p&&k(v)},[a,u,p]);const N=[S,a,p];if(N.t=S,N.i18n=a,N.ready=p,p||!p&&!d)return N;throw new Promise(w=>{e.lng?y2(a,e.lng,h,()=>w()):Rv(a,h,()=>w())})},UI={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community"},zI={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}}},HI={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},GI={search:"Search?  /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},WI={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},qI={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},KI={quota:{unlimited:"No limit"}},QI={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},XI={nav:UI,account:zI,tools:HI,topbar:GI,profile:WI,help:qI,uploadCenter:KI,footer:QI},YI={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community"},JI={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fr deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}}},ZI={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},eR={search:"Suchen?  /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},tR={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},sR={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},nR={quota:{unlimited:"Kein Limit"}},rR={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},iR={nav:YI,account:JI,tools:ZI,topbar:eR,profile:tR,help:sR,uploadCenter:nR,footer:rR},aR={en:{translation:XI},de:{translation:iR}};En.use(FI).init({resources:aR,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function mt(t,e="en"){return En.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var v2="popstate";function oR(t={}){function e(i,a){let{pathname:l="/",search:d="",hash:u=""}=Wl(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Lv("",{pathname:l,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");d=h===-1?u:u.slice(0,h)}return d+"#"+(typeof a=="string"?a:oh(a))}function r(i,a){Dr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return cR(e,s,r,t)}function Ss(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Dr(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(s){}}}function lR(){return Math.random().toString(36).substring(2,10)}function b2(t,e){return{usr:t.state,key:t.key,idx:e}}function Lv(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Wl(e):e,state:s,key:e&&e.key||r||lR()}}function oh({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Wl(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function cR(t,e,s,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",u=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function g(){d="POP";let E=p(),L=E==null?null:E-h;h=E,u&&u({action:d,location:k.location,delta:L})}function v(E,L){d="PUSH";let M=Lv(k.location,E,L);s&&s(M,E),h=p()+1;let N=b2(M,h),y=k.createHref(M);try{l.pushState(N,"",y)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(y)}a&&u&&u({action:d,location:k.location,delta:1})}function b(E,L){d="REPLACE";let M=Lv(k.location,E,L);s&&s(M,E),h=p();let N=b2(M,h),y=k.createHref(M);l.replaceState(N,"",y),a&&u&&u({action:d,location:k.location,delta:0})}function S(E){return dR(E)}let k={get action(){return d},get location(){return t(i,l)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(v2,g),u=E,()=>{i.removeEventListener(v2,g),u=null}},createHref(E){return e(i,E)},createURL:S,encodeLocation(E){let L=S(E);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:b,go(E){return l.go(E)}};return k}function dR(t,e=!1){let s="http://localhost";typeof window!="undefined"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ss(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:oh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function Yk(t,e,s="/"){return uR(t,e,s,!1)}function uR(t,e,s,r){let i=typeof e=="string"?Wl(e):e,a=Ra(i.pathname||"/",s);if(a==null)return null;let l=Jk(t);hR(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=jR(a);d=_R(l[u],h,r)}return d}function Jk(t,e=[],s=[],r="",i=!1){let a=(l,d,u=i,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;Ss(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=Ea([r,p.relativePath]),v=s.concat(p);l.children&&l.children.length>0&&(Ss(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Jk(l.children,e,v,g,u)),!(l.path==null&&!l.index)&&e.push({path:g,score:vR(g,l.index),routesMeta:v})};return t.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))a(l,d);else for(let h of Zk(l.path))a(l,d,!0,h)}),e}function Zk(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=Zk(r.join("/")),d=[];return d.push(...l.map(u=>u===""?a:[a,u].join("/"))),i&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function hR(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:bR(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var pR=/^:[\w-]+$/,mR=3,fR=2,gR=1,xR=10,yR=-2,_2=t=>t==="*";function vR(t,e){let s=t.split("/"),r=s.length;return s.some(_2)&&(r+=yR),e&&(r+=fR),s.filter(i=>!_2(i)).reduce((i,a)=>i+(pR.test(a)?mR:a===""?gR:xR),r)}function bR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _R(t,e,s=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],h=d===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=xf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),v=u.route;if(!g&&h&&s&&!r[r.length-1].route.index&&(g=xf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Ea([a,g.pathname]),pathnameBase:CR(Ea([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Ea([a,g.pathnameBase]))}return l}function xf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=wR(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},v)=>{if(p==="*"){let S=d[v]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const b=d[v];return g&&!b?h[p]=void 0:h[p]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:t}}function wR(t,e=!1,s=!0){Dr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function jR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ra(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function SR(t,e="/"){let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?Wl(t):t;return{pathname:s?s.startsWith("/")?s:NR(s,e):e,search:TR(r),hash:ER(i)}}function NR(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function _y(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kR(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function U0(t){let e=kR(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function z0(t,e,s,r=!1){let i;typeof t=="string"?i=Wl(t):(i={...t},Ss(!i.pathname||!i.pathname.includes("?"),_y("?","pathname","search",i)),Ss(!i.pathname||!i.pathname.includes("#"),_y("#","pathname","hash",i)),Ss(!i.search||!i.search.includes("#"),_y("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=s;else{let g=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?e[g]:"/"}let u=SR(i,d),h=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Ea=t=>t.join("/").replace(/\/\/+/g,"/"),CR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ER=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var eC=["POST","PUT","PATCH","DELETE"];new Set(eC);var IR=["GET",...eC];new Set(IR);var Nd=T.createContext(null);Nd.displayName="DataRouter";var tg=T.createContext(null);tg.displayName="DataRouterState";T.createContext(!1);var tC=T.createContext({isTransitioning:!1});tC.displayName="ViewTransition";var RR=T.createContext(new Map);RR.displayName="Fetchers";var PR=T.createContext(null);PR.displayName="Await";var Ni=T.createContext(null);Ni.displayName="Navigation";var Ch=T.createContext(null);Ch.displayName="Location";var ti=T.createContext({outlet:null,matches:[],isDataRoute:!1});ti.displayName="Route";var H0=T.createContext(null);H0.displayName="RouteError";function LR(t,{relative:e}={}){Ss(kd(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=T.useContext(Ni),{hash:i,pathname:a,search:l}=Th(t,{relative:e}),d=a;return s!=="/"&&(d=a==="/"?s:Ea([s,a])),r.createHref({pathname:d,search:l,hash:i})}function kd(){return T.useContext(Ch)!=null}function xr(){return Ss(kd(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Ch).location}var sC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nC(t){T.useContext(Ni).static||T.useLayoutEffect(t)}function si(){let{isDataRoute:t}=T.useContext(ti);return t?QR():DR()}function DR(){Ss(kd(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Nd),{basename:e,navigator:s}=T.useContext(Ni),{matches:r}=T.useContext(ti),{pathname:i}=xr(),a=JSON.stringify(U0(r)),l=T.useRef(!1);return nC(()=>{l.current=!0}),T.useCallback((u,h={})=>{if(Dr(l.current,sC),!l.current)return;if(typeof u=="number"){s.go(u);return}let p=z0(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ea([e,p.pathname])),(h.replace?s.replace:s.push)(p,h.state,h)},[e,s,a,i,t])}var MR=T.createContext(null);function FR(t){let e=T.useContext(ti).outlet;return e&&T.createElement(MR.Provider,{value:t},e)}function sg(){let{matches:t}=T.useContext(ti),e=t[t.length-1];return e?e.params:{}}function Th(t,{relative:e}={}){let{matches:s}=T.useContext(ti),{pathname:r}=xr(),i=JSON.stringify(U0(s));return T.useMemo(()=>z0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function BR(t,e){return rC(t,e)}function rC(t,e,s,r,i){var M;Ss(kd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(Ni),{matches:l}=T.useContext(ti),d=l[l.length-1],u=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let N=g&&g.path||"";iC(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=xr(),b;if(e){let N=typeof e=="string"?Wl(e):e;Ss(p==="/"||((M=N.pathname)==null?void 0:M.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),b=N}else b=v;let S=b.pathname||"/",k=S;if(p!=="/"){let N=p.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=Yk(t,{pathname:k});Dr(g||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Dr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=zR(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Ea([p,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Ea([p,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,s,r,i);return e&&L?T.createElement(Ch.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},L):L}function $R(){let t=KR(),e=AR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),s?T.createElement("pre",{style:i},s):null,l)}var OR=T.createElement($R,null),VR=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?T.createElement(ti.Provider,{value:this.props.routeContext},T.createElement(H0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UR({routeContext:t,match:e,children:s}){let r=T.useContext(Nd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(ti.Provider,{value:t},s)}function zR(t,e=[],s=null,r=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,l=s==null?void 0:s.errors;if(l!=null){let h=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Ss(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let d=!1,u=-1;if(s)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:v}=s,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){d=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let v,b=!1,S=null,k=null;s&&(v=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||OR,d&&(u<0&&g===0?(iC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,k=null):u===g&&(b=!0,k=p.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,g+1)),L=()=>{let M;return v?M=S:b?M=k:p.route.Component?M=T.createElement(p.route.Component,null):p.route.element?M=p.route.element:M=h,T.createElement(UR,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:s!=null},children:M})};return s&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?T.createElement(VR,{location:s.location,revalidation:s.revalidation,component:S,error:v,children:L(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):L()},null)}function G0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HR(t){let e=T.useContext(Nd);return Ss(e,G0(t)),e}function GR(t){let e=T.useContext(tg);return Ss(e,G0(t)),e}function WR(t){let e=T.useContext(ti);return Ss(e,G0(t)),e}function W0(t){let e=WR(t),s=e.matches[e.matches.length-1];return Ss(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function qR(){return W0("useRouteId")}function KR(){var r;let t=T.useContext(H0),e=GR("useRouteError"),s=W0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function QR(){let{router:t}=HR("useNavigate"),e=W0("useNavigate"),s=T.useRef(!1);return nC(()=>{s.current=!0}),T.useCallback(async(i,a={})=>{Dr(s.current,sC),s.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var w2={};function iC(t,e,s){!e&&!w2[t]&&(w2[t]=!0,Dr(!1,s))}T.memo(XR);function XR({routes:t,future:e,state:s,unstable_onError:r}){return rC(t,void 0,s,r,e)}function Sl({to:t,replace:e,state:s,relative:r}){Ss(kd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(Ni);Dr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(ti),{pathname:l}=xr(),d=si(),u=z0(t,U0(a),l,r==="path"),h=JSON.stringify(u);return T.useEffect(()=>{d(JSON.parse(h),{replace:e,state:s,relative:r})},[d,h,r,e,s]),null}function aC(t){return FR(t.context)}function fe(t){Ss(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YR({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:i,static:a=!1}){Ss(!kd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof s=="string"&&(s=Wl(s));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:v="default"}=s,b=T.useMemo(()=>{let S=Ra(u,l);return S==null?null:{location:{pathname:S,search:h,hash:p,state:g,key:v},navigationType:r}},[l,u,h,p,g,v,r]);return Dr(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(Ni.Provider,{value:d},T.createElement(Ch.Provider,{children:e,value:b}))}function JR({children:t,location:e}){return BR(Dv(t),e)}function Dv(t,e=[]){let s=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let a=[...e,i];if(r.type===T.Fragment){s.push.apply(s,Dv(r.props.children,a));return}Ss(r.type===fe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ss(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Dv(r.props.children,a)),s.push(l)}),s}var Gm="get",Wm="application/x-www-form-urlencoded";function ng(t){return t!=null&&typeof t.tagName=="string"}function ZR(t){return ng(t)&&t.tagName.toLowerCase()==="button"}function eP(t){return ng(t)&&t.tagName.toLowerCase()==="form"}function tP(t){return ng(t)&&t.tagName.toLowerCase()==="input"}function sP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nP(t,e){return t.button===0&&(!e||e==="_self")&&!sP(t)}function Mv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function rP(t,e){let s=Mv(t);return e&&e.forEach((r,i)=>{s.has(i)||e.getAll(i).forEach(a=>{s.append(i,a)})}),s}var fm=null;function iP(){if(fm===null)try{new FormData(document.createElement("form"),0),fm=!1}catch(t){fm=!0}return fm}var aP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wy(t){return t!=null&&!aP.has(t)?(Dr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wm}"`),null):t}function oP(t,e){let s,r,i,a,l;if(eP(t)){let d=t.getAttribute("action");r=d?Ra(d,e):null,s=t.getAttribute("method")||Gm,i=wy(t.getAttribute("enctype"))||Wm,a=new FormData(t)}else if(ZR(t)||tP(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(r=u?Ra(u,e):null,s=t.getAttribute("formmethod")||d.getAttribute("method")||Gm,i=wy(t.getAttribute("formenctype"))||wy(d.getAttribute("enctype"))||Wm,a=new FormData(d,t),!iP()){let{name:h,type:p,value:g}=t;if(p==="image"){let v=h?`${h}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else h&&a.append(h,g)}}else{if(ng(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Gm,r=null,i=Wm,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:s.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function q0(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function lP(t,e,s){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&Ra(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function cP(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function uP(t,e,s){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await cP(a,s);return l.links?l.links():[]}return[]}));return fP(r.flat(1).filter(dP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function j2(t,e,s,r,i,a){let l=(u,h)=>s[h]?u.route.id!==s[h].route.id:!0,d=(u,h)=>{var p;return s[h].pathname!==u.pathname||((p=s[h].route.path)==null?void 0:p.endsWith("*"))&&s[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>l(u,h)||d(u,h)):a==="data"?e.filter((u,h)=>{var g;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=s[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function hP(t,e,{includeHydrateFallback:s}={}){return pP(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function pP(t){return[...new Set(t)]}function mP(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function fP(t,e){let s=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(mP(i));return s.has(a)||(s.add(a),r.push({key:a,link:i})),r},[])}function oC(){let t=T.useContext(Nd);return q0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function gP(){let t=T.useContext(tg);return q0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var K0=T.createContext(void 0);K0.displayName="FrameworkContext";function lC(){let t=T.useContext(K0);return q0(t,"You must render this element inside a <HydratedRouter> element"),t}function xP(t,e){let s=T.useContext(K0),[r,i]=T.useState(!1),[a,l]=T.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,v=T.useRef(null);T.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let k=L=>{L.forEach(M=>{l(M.isIntersecting)})},E=new IntersectionObserver(k,{threshold:.5});return v.current&&E.observe(v.current),()=>{E.disconnect()}}},[t]),T.useEffect(()=>{if(r){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[r]);let b=()=>{i(!0)},S=()=>{i(!1),l(!1)};return s?t!=="intent"?[a,v,{}]:[a,v,{onFocus:vu(d,b),onBlur:vu(u,S),onMouseEnter:vu(h,b),onMouseLeave:vu(p,S),onTouchStart:vu(g,b)}]:[!1,v,{}]}function vu(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function yP({page:t,...e}){let{router:s}=oC(),r=T.useMemo(()=>Yk(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?T.createElement(bP,{page:t,matches:r,...e}):null}function vP(t){let{manifest:e,routeModules:s}=lC(),[r,i]=T.useState([]);return T.useEffect(()=>{let a=!1;return uP(t,e,s).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,s]),r}function bP({page:t,matches:e,...s}){let r=xr(),{manifest:i,routeModules:a}=lC(),{basename:l}=oC(),{loaderData:d,matches:u}=gP(),h=T.useMemo(()=>j2(t,e,u,i,r,"data"),[t,e,u,i,r]),p=T.useMemo(()=>j2(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,k=!1;if(e.forEach(L=>{var N;let M=i.routes[L.route.id];!M||!M.hasLoader||(!h.some(y=>y.route.id===L.route.id)&&L.route.id in d&&((N=a[L.route.id])!=null&&N.shouldRevalidate)||M.hasClientLoader?k=!0:S.add(L.route.id))}),S.size===0)return[];let E=lP(t,l,"data");return k&&S.size>0&&E.searchParams.set("_routes",e.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[E.pathname+E.search]},[l,d,r,i,h,e,t,a]),v=T.useMemo(()=>hP(p,i),[p,i]),b=vP(p);return T.createElement(T.Fragment,null,g.map(S=>T.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...s})),v.map(S=>T.createElement("link",{key:S,rel:"modulepreload",href:S,...s})),b.map(({key:S,link:k})=>T.createElement("link",{key:S,nonce:s.nonce,...k})))}function _P(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var cC=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{cC&&(window.__reactRouterVersion="7.9.1")}catch(t){}function wP({basename:t,children:e,window:s}){let r=T.useRef();r.current==null&&(r.current=oR({window:s,v5Compat:!0}));let i=r.current,[a,l]=T.useState({action:i.action,location:i.location}),d=T.useCallback(u=>{T.startTransition(()=>l(u))},[l]);return T.useLayoutEffect(()=>i.listen(d),[i,d]),T.createElement(YR,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var dC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rs=T.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:u,to:h,preventScrollReset:p,viewTransition:g,...v},b){let{basename:S}=T.useContext(Ni),k=typeof h=="string"&&dC.test(h),E,L=!1;if(typeof h=="string"&&k&&(E=h,cC))try{let I=new URL(window.location.href),F=h.startsWith("//")?new URL(I.protocol+h):new URL(h),R=Ra(F.pathname,S);F.origin===I.origin&&R!=null?h=R+F.search+F.hash:L=!0}catch(I){Dr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=LR(h,{relative:i}),[N,y,_]=xP(r,v),D=NP(h,{replace:l,state:d,target:u,preventScrollReset:p,relative:i,viewTransition:g});function C(I){e&&e(I),I.defaultPrevented||D(I)}let w=T.createElement("a",{...v,..._,href:E||M,onClick:L||a?e:C,ref:_P(b,y),target:u,"data-discover":!k&&s==="render"?"true":void 0});return N&&!k?T.createElement(T.Fragment,null,w,T.createElement(yP,{page:M})):w});rs.displayName="Link";var ws=T.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:u,...h},p){let g=Th(l,{relative:h.relative}),v=xr(),b=T.useContext(tg),{navigator:S,basename:k}=T.useContext(Ni),E=b!=null&&AP(g)&&d===!0,L=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,M=v.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(M=M.toLowerCase(),N=N?N.toLowerCase():null,L=L.toLowerCase()),N&&k&&(N=Ra(N,k)||N);const y=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let _=M===L||!i&&M.startsWith(L)&&M.charAt(y)==="/",D=N!=null&&(N===L||!i&&N.startsWith(L)&&N.charAt(L.length)==="/"),C={isActive:_,isPending:D,isTransitioning:E},w=_?e:void 0,I;typeof r=="function"?I=r(C):I=[r,_?"active":null,D?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(C):a;return T.createElement(rs,{...h,"aria-current":w,className:I,ref:p,style:F,to:l,viewTransition:d},typeof u=="function"?u(C):u)});ws.displayName="NavLink";var jP=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:i,state:a,method:l=Gm,action:d,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,...v},b)=>{let S=TP(),k=EP(d,{relative:h}),E=l.toLowerCase()==="get"?"get":"post",L=typeof d=="string"&&dC.test(d),M=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let y=N.nativeEvent.submitter,_=(y==null?void 0:y.getAttribute("formmethod"))||l;S(y||N.currentTarget,{fetcherKey:e,method:_,navigate:s,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return T.createElement("form",{ref:b,method:E,action:k,onSubmit:r?u:M,...v,"data-discover":!L&&t==="render"?"true":void 0})});jP.displayName="Form";function SP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uC(t){let e=T.useContext(Nd);return Ss(e,SP(t)),e}function NP(t,{target:e,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=si(),u=xr(),h=Th(t,{relative:a});return T.useCallback(p=>{if(nP(p,e)){p.preventDefault();let g=s!==void 0?s:oh(u)===oh(h);d(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,d,h,s,r,e,t,i,a,l])}function ql(t){Dr(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(Mv(t)),s=T.useRef(!1),r=xr(),i=T.useMemo(()=>rP(r.search,s.current?null:e.current),[r.search]),a=si(),l=T.useCallback((d,u)=>{const h=Mv(typeof d=="function"?d(new URLSearchParams(i)):d);s.current=!0,a("?"+h,u)},[a,i]);return[i,l]}var kP=0,CP=()=>`__${String(++kP)}__`;function TP(){let{router:t}=uC("useSubmit"),{basename:e}=T.useContext(Ni),s=qR();return T.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:u,body:h}=oP(r,e);if(i.navigate===!1){let p=i.fetcherKey||CP();await t.fetch(p,s,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,s])}function EP(t,{relative:e}={}){let{basename:s}=T.useContext(Ni),r=T.useContext(ti);Ss(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Th(t||".",{relative:e})},l=xr();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),u=d.getAll("index");if(u.some(p=>p==="")){d.delete("index"),u.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();a.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:Ea([s,a.pathname])),oh(a)}function AP(t,{relative:e}={}){let s=T.useContext(tC);Ss(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uC("useViewTransitionState"),i=Th(t,{relative:e});if(!s.isTransitioning)return!1;let a=Ra(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=Ra(s.nextLocation.pathname,r)||s.nextLocation.pathname;return xf(i.pathname,l)!=null||xf(i.pathname,a)!=null}var IP=Hk();const RP=O0(IP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),S2=t=>{const e=LP(t);return e.charAt(0).toUpperCase()+e.slice(1)},hC=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),DP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},u)=>T.createElement("svg",{ref:u,...MP,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:hC("lucide",i),...!a&&!DP(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,p])=>T.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(t,e)=>{const s=T.forwardRef(({className:r,...i},a)=>T.createElement(FP,{ref:a,iconNode:e,className:hC(`lucide-${PP(S2(t))}`,`lucide-${t}`,r),...i}));return s.displayName=S2(t),s};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],rg=ut("aperture",BP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],OP=ut("arrow-up-right",$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UP=ut("ban",VP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],HP=ut("bell",zP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],WP=ut("book-open",GP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],KP=ut("chart-column",qP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],XP=ut("chevron-right",QP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uu=ut("circle-alert",YP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZP=ut("circle-check",JP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],qm=ut("circle-dot",eL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sL=ut("circle-user-round",tL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rL=ut("clock-3",nL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],aL=ut("cloud-upload",iL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lL=ut("compass",oL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],dL=ut("database",cL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],pC=ut("diamond",uL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pL=ut("file-text",hL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],fL=ut("folder-search",mL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xL=ut("globe",gL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],mC=ut("hexagon",yL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],bL=ut("house",vL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],wL=ut("layers",_L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],SL=ut("layout-dashboard",jL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ao=ut("loader-circle",NL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],CL=ut("messages-square",kL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],EL=ut("pencil",TL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],IL=ut("pin-off",AL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],PL=ut("pin",RL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ig=ut("refresh-ccw",LL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],ML=ut("scroll-text",DL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fv=ut("search",FL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],$L=ut("server-cog",BL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],VL=ut("settings",OL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],fC=ut("shapes",UL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],gC=ut("shield-alert",zL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],GL=ut("shield-check",HL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],xC=ut("shield-off",WL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Kl=ut("shield",qL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],QL=ut("square-activity",KL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],YL=ut("star",XL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],ZL=ut("sticky-note",JL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],t6=ut("trash-2",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Q0=ut("triangle-alert",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],r6=ut("trophy",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],a6=ut("upload",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ag=ut("users",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],c6=ut("wrench",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],yC=ut("zap",d6),u6="_topbar_1lc6k_3",h6="_topbarLeft_1lc6k_39",p6="_searchWrap_1lc6k_55",m6="_topbarRight_1lc6k_109",f6="_ico_1lc6k_125",g6="_btnIco_1lc6k_139",x6="_pill_1lc6k_173",y6="_pillActive_1lc6k_195",v6="_onlyExpanded_1lc6k_203",b6="_topbarNav_1lc6k_205",_6="_topbarLink_1lc6k_215",w6="_upload_1lc6k_225",j6="_label_1lc6k_255",S6="_avatarBtn_1lc6k_261",N6="_avatar_1lc6k_261",k6="_avatarSpinnerShell_1lc6k_289",C6="_avatarSpinner_1lc6k_289",T6="_srOnly_1lc6k_325",E6="_accountRoot_1lc6k_351",A6="_accountDropdown_1lc6k_359",I6="_accountHeader_1lc6k_389",R6="_accountName_1lc6k_401",P6="_accountSub_1lc6k_413",L6="_accountStatusText_1lc6k_423",D6="_accountPrimary_1lc6k_433",M6="_accountHint_1lc6k_455",F6="_accountItem_1lc6k_465",B6="_accountDivider_1lc6k_495",$6="_accountMiniAvatar_1lc6k_507",O6="_accountLogout_1lc6k_519",At={topbar:u6,topbarLeft:h6,searchWrap:p6,topbarRight:m6,ico:f6,btnIco:g6,pill:x6,pillActive:y6,onlyExpanded:v6,topbarNav:b6,topbarLink:_6,upload:w6,label:j6,avatarBtn:S6,avatar:N6,avatarSpinnerShell:k6,avatarSpinner:C6,srOnly:T6,accountRoot:E6,accountDropdown:A6,accountHeader:I6,accountName:R6,accountSub:P6,accountStatusText:L6,accountPrimary:D6,accountHint:M6,accountItem:F6,accountDivider:B6,accountMiniAvatar:$6,accountLogout:O6},Ua="https://auth.sfdatahub.com",V6=`${Ua}/auth/firebase-token`;async function U6(){var r,i;const t=await fetch(V6,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),s=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!s)throw new Error("Firebase token missing in response");return s}var N2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},z6=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const i=t[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],l=t[s++],d=t[s++],u=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[s++],l=t[s++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},bC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=a>>2,g=(a&3)<<4|d>>4;let v=(d&15)<<2|h>>6,b=h&63;u||(b=64,l||(v=64)),r.push(s[p],s[g],s[v],s[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):z6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],d=i<t.length?s[t.charAt(i)]:0;++i;const h=i<t.length?s[t.charAt(i)]:64;++i;const g=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||d==null||h==null||g==null)throw new H6;const v=a<<2|d>>4;if(r.push(v),h!==64){const b=d<<4&240|h>>2;if(r.push(b),g!==64){const S=h<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class H6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G6=function(t){const e=vC(t);return bC.encodeByteArray(e,!0)},yf=function(t){return G6(t).replace(/\./g,"")},_C=function(t){try{return bC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=()=>W6().__FIREBASE_DEFAULTS__,K6=()=>{if(typeof process=="undefined"||typeof N2=="undefined")return;const t=N2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Q6=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const e=t&&_C(t[1]);return e&&JSON.parse(e)},og=()=>{try{return q6()||K6()||Q6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wC=t=>{var e,s;return(s=(e=og())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},X6=t=>{const e=wC(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},jC=()=>{var t;return(t=og())===null||t===void 0?void 0:t.config},SC=t=>{var e;return(e=og())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yf(JSON.stringify(s)),yf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z6(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function eD(){var t;const e=(t=og())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(s){return!1}}function tD(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function sD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rD(){const t=Vn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iD(){return!eD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aD(){try{return typeof indexedDB=="object"}catch(t){return!1}}function oD(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="FirebaseError";class za extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=lD,Object.setPrototypeOf(this,za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eh.prototype.create)}}class Eh{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?cD(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new za(i,d,r)}}function cD(t,e){return t.replace(dD,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dD=/\{\$([^}]+)}/g;function uD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vf(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(k2(a)&&k2(l)){if(!vf(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function k2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hD(t,e){const s=new pD(t,e);return s.subscribe.bind(s)}class pD{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");mD(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=jy),i.error===void 0&&(i.error=jy),i.complete===void 0&&(i.complete=jy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(l){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mD(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){return t&&t._delegate?t._delegate:t}class Fl{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new Y6;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xD(e))try{this.getOrInitializeService({instanceIdentifier:Nl})}catch(s){}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=Nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nl){return this.instances.has(e)}getOptions(e=Nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,s){var r;const i=this.normalizeInstanceIdentifier(s),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gD(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Nl){return this.component?this.component.multipleInstances?e:Nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gD(t){return t===Nl?void 0:t}function xD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new fD(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const vD={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},bD=Gt.INFO,_D={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},wD=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_D[e];if(i)console[i](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X0{constructor(e){this.name=e,this._logLevel=bD,this._logHandler=wD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const jD=(t,e)=>e.some(s=>t instanceof s);let C2,T2;function SD(){return C2||(C2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ND(){return T2||(T2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NC=new WeakMap,Bv=new WeakMap,kC=new WeakMap,Sy=new WeakMap,Y0=new WeakMap;function kD(t){const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{s(Io(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(s=>{s instanceof IDBCursor&&NC.set(s,t)}).catch(()=>{}),Y0.set(e,t),e}function CD(t){if(Bv.has(t))return;const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{s(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Bv.set(t,e)}let $v={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kC.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Io(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TD(t){$v=t($v)}function ED(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(Ny(this),e,...s);return kC.set(r,e.sort?e.sort():[e]),Io(r)}:ND().includes(t)?function(...e){return t.apply(Ny(this),e),Io(NC.get(this))}:function(...e){return Io(t.apply(Ny(this),e))}}function AD(t){return typeof t=="function"?ED(t):(t instanceof IDBTransaction&&CD(t),jD(t,SD())?new Proxy(t,$v):t)}function Io(t){if(t instanceof IDBRequest)return kD(t);if(Sy.has(t))return Sy.get(t);const e=AD(t);return e!==t&&(Sy.set(t,e),Y0.set(e,t)),e}const Ny=t=>Y0.get(t);function ID(t,e,{blocked:s,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=Io(l);return r&&l.addEventListener("upgradeneeded",u=>{r(Io(l.result),u.oldVersion,u.newVersion,Io(l.transaction),u)}),s&&l.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const RD=["get","getKey","getAll","getAllKeys","count"],PD=["put","add","delete","clear"],ky=new Map;function E2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ky.get(e))return ky.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=PD.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RD.includes(s)))return;const a=async function(l,...d){const u=this.transaction(l,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[s](...d),i&&u.done]))[0]};return ky.set(e,a),a}TD(t=>({...t,get:(e,s,r)=>E2(e,s)||t.get(e,s,r),has:(e,s)=>!!E2(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(DD(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function DD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ov="@firebase/app",A2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new X0("@firebase/app"),MD="@firebase/app-compat",FD="@firebase/analytics-compat",BD="@firebase/analytics",$D="@firebase/app-check-compat",OD="@firebase/app-check",VD="@firebase/auth",UD="@firebase/auth-compat",zD="@firebase/database",HD="@firebase/data-connect",GD="@firebase/database-compat",WD="@firebase/functions",qD="@firebase/functions-compat",KD="@firebase/installations",QD="@firebase/installations-compat",XD="@firebase/messaging",YD="@firebase/messaging-compat",JD="@firebase/performance",ZD="@firebase/performance-compat",e8="@firebase/remote-config",t8="@firebase/remote-config-compat",s8="@firebase/storage",n8="@firebase/storage-compat",r8="@firebase/firestore",i8="@firebase/vertexai-preview",a8="@firebase/firestore-compat",o8="firebase",l8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="[DEFAULT]",c8={[Ov]:"fire-core",[MD]:"fire-core-compat",[BD]:"fire-analytics",[FD]:"fire-analytics-compat",[OD]:"fire-app-check",[$D]:"fire-app-check-compat",[VD]:"fire-auth",[UD]:"fire-auth-compat",[zD]:"fire-rtdb",[HD]:"fire-data-connect",[GD]:"fire-rtdb-compat",[WD]:"fire-fn",[qD]:"fire-fn-compat",[KD]:"fire-iid",[QD]:"fire-iid-compat",[XD]:"fire-fcm",[YD]:"fire-fcm-compat",[JD]:"fire-perf",[ZD]:"fire-perf-compat",[e8]:"fire-rc",[t8]:"fire-rc-compat",[s8]:"fire-gcs",[n8]:"fire-gcs-compat",[r8]:"fire-fst",[a8]:"fire-fst-compat",[i8]:"fire-vertex","fire-js":"fire-js",[o8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,d8=new Map,Uv=new Map;function I2(t,e){try{t.container.addComponent(e)}catch(s){Pa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function cd(t){const e=t.name;if(Uv.has(e))return Pa.debug(`There were multiple attempts to register component ${e}.`),!1;Uv.set(e,t);for(const s of lh.values())I2(s,t);for(const s of d8.values())I2(s,t);return!0}function J0(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function ja(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ro=new Eh("app","Firebase",u8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=l8;function CC(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ro.create("bad-app-name",{appName:String(i)});if(s||(s=jC()),!s)throw Ro.create("no-options");const a=lh.get(i);if(a){if(vf(s,a.options)&&vf(r,a.config))return a;throw Ro.create("duplicate-app",{appName:i})}const l=new yD(i);for(const u of Uv.values())l.addComponent(u);const d=new h8(s,r,l);return lh.set(i,d),d}function Z0(t=Vv){const e=lh.get(t);if(!e&&t===Vv&&jC())return CC();if(!e)throw Ro.create("no-app",{appName:t});return e}function p8(){return Array.from(lh.values())}function Po(t,e,s){var r;let i=(r=c8[t])!==null&&r!==void 0?r:t;s&&(i+=`-${s}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pa.warn(d.join(" "));return}cd(new Fl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="firebase-heartbeat-database",f8=1,ch="firebase-heartbeat-store";let Cy=null;function TC(){return Cy||(Cy=ID(m8,f8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ch)}catch(s){console.warn(s)}}}}).catch(t=>{throw Ro.create("idb-open",{originalErrorMessage:t.message})})),Cy}async function g8(t){try{const s=(await TC()).transaction(ch),r=await s.objectStore(ch).get(EC(t));return await s.done,r}catch(e){if(e instanceof za)Pa.warn(e.message);else{const s=Ro.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pa.warn(s.message)}}}async function R2(t,e){try{const r=(await TC()).transaction(ch,"readwrite");await r.objectStore(ch).put(e,EC(t)),await r.done}catch(s){if(s instanceof za)Pa.warn(s.message);else{const r=Ro.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Pa.warn(r.message)}}}function EC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=1024,y8=720*60*60*1e3;class v8{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new _8(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=P2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=y8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=P2(),{heartbeatsToSend:r,unsentEntries:i}=b8(this._heartbeatsCache.heartbeats),a=yf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return Pa.warn(s),""}}}function P2(){return new Date().toISOString().substring(0,10)}function b8(t,e=x8){const s=[];let r=t.slice();for(const i of t){const a=s.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),L2(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),L2(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class _8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aD()?oD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await g8(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return R2(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return R2(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function L2(t){return yf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){cd(new Fl("platform-logger",e=>new LD(e),"PRIVATE")),cd(new Fl("heartbeat",e=>new v8(e),"PRIVATE")),Po(Ov,A2,t),Po(Ov,A2,"esm2017"),Po("fire-js","")}w8("");var j8="firebase",S8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Po(j8,S8,"app");function e1(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function AC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N8=AC,IC=new Eh("auth","Firebase",AC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new X0("@firebase/auth");function k8(t,...e){bf.logLevel<=Gt.WARN&&bf.warn(`Auth (${Cd}): ${t}`,...e)}function Km(t,...e){bf.logLevel<=Gt.ERROR&&bf.error(`Auth (${Cd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t,...e){throw t1(t,...e)}function Hi(t,...e){return t1(t,...e)}function RC(t,e,s){const r=Object.assign(Object.assign({},N8()),{[e]:s});return new Eh("auth","Firebase",r).create(e,{appName:t.name})}function Lo(t){return RC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t1(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return IC.create(t,...e)}function gt(t,e,...s){if(!t)throw t1(e,...s)}function Sa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Km(e),new Error(e)}function Da(t,e){t||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function C8(){return D2()==="http:"||D2()==="https:"}function D2(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C8()||sD()||"connection"in navigator)?navigator.onLine:!0}function E8(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,s){this.shortDelay=e,this.longDelay=s,Da(s>e,"Short delay should be less than long delay!"),this.isMobile=Z6()||nD()}get(){return T8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e){Da(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=new Ih(3e4,6e4);function lg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Td(t,e,s,r,i={}){return LC(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=Ah(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return tD()||(h.referrerPolicy="no-referrer"),PC.fetch()(MC(t,t.config.apiHost,s,d),h)})}async function LC(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},A8),e);try{const i=new R8(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw gm(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gm(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw gm(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw gm(t,"user-disabled",l);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw RC(t,p,h);La(t,p)}}catch(i){if(i instanceof za)throw i;La(t,"network-request-failed",{message:String(i)})}}async function DC(t,e,s,r,i={}){const a=await Td(t,e,s,r,i);return"mfaPendingCredential"in a&&La(t,"multi-factor-auth-required",{_serverResponse:a}),a}function MC(t,e,s,r){const i=`${e}${s}?${r}`;return t.config.emulator?s1(t.config,i):`${t.config.apiScheme}://${i}`}class R8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Hi(this.auth,"network-request-failed")),I8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gm(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=Hi(t,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(t,e){return Td(t,"POST","/v1/accounts:delete",e)}async function FC(t,e){return Td(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function L8(t,e=!1){const s=nn(t),r=await s.getIdToken(e),i=n1(r);gt(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:zu(Ty(i.auth_time)),issuedAtTime:zu(Ty(i.iat)),expirationTime:zu(Ty(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ty(t){return Number(t)*1e3}function n1(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return Km("JWT malformed, contained fewer than 3 sections"),null;try{const i=_C(s);return i?JSON.parse(i):(Km("Failed to decode base64 JWT payload"),null)}catch(i){return Km("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function M2(t){const e=n1(t);return gt(e,"internal-error"),gt(typeof e.exp!="undefined","internal-error"),gt(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof za&&D8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function D8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(t){var e;const s=t.auth,r=await t.getIdToken(),i=await dh(t,FC(s,{idToken:r}));gt(i==null?void 0:i.users.length,s,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?BC(a.providerUserInfo):[],d=B8(t.providerData,l),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),p=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Hv(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function F8(t){const e=nn(t);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function B8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BC(t){return t.map(e=>{var{providerId:s}=e,r=e1(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $8(t,e){const s=await LC(t,{},async()=>{const r=Ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=MC(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",PC.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function O8(t,e){return Td(t,"POST","/v2/accounts:revokeToken",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken!="undefined","internal-error"),gt(typeof e.refreshToken!="undefined","internal-error");const s="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):M2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const s=M2(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:a}=await $8(e,s);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:a}=s,l=new td;return r&&(gt(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(gt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(gt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new td,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){gt(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Na{constructor(e){var{uid:s,auth:r,stsTokenManager:i}=e,a=e1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const s=await dh(this,this.stsTokenManager.getToken(this.auth,e));return gt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return L8(this,e)}reload(){return F8(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Na(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await _f(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ja(this.auth.app))return Promise.reject(Lo(this.auth));const e=await this.getIdToken();return await dh(this,P8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,i,a,l,d,u,h,p;const g=(r=s.displayName)!==null&&r!==void 0?r:void 0,v=(i=s.email)!==null&&i!==void 0?i:void 0,b=(a=s.phoneNumber)!==null&&a!==void 0?a:void 0,S=(l=s.photoURL)!==null&&l!==void 0?l:void 0,k=(d=s.tenantId)!==null&&d!==void 0?d:void 0,E=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,L=(h=s.createdAt)!==null&&h!==void 0?h:void 0,M=(p=s.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:y,isAnonymous:_,providerData:D,stsTokenManager:C}=s;gt(N&&C,e,"internal-error");const w=td.fromJSON(this.name,C);gt(typeof N=="string",e,"internal-error"),fo(g,e.name),fo(v,e.name),gt(typeof y=="boolean",e,"internal-error"),gt(typeof _=="boolean",e,"internal-error"),fo(b,e.name),fo(S,e.name),fo(k,e.name),fo(E,e.name),fo(L,e.name),fo(M,e.name);const I=new Na({uid:N,auth:e,email:v,emailVerified:y,displayName:g,isAnonymous:_,photoURL:S,phoneNumber:b,tenantId:k,stsTokenManager:w,createdAt:L,lastLoginAt:M});return D&&Array.isArray(D)&&(I.providerData=D.map(F=>Object.assign({},F))),E&&(I._redirectEventId=E),I}static async _fromIdTokenResponse(e,s,r=!1){const i=new td;i.updateFromServerResponse(s);const a=new Na({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _f(a),a}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];gt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?BC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new td;d.updateFromIdToken(r);const u=new Na({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Map;function ka(t){Da(t instanceof Function,"Expected a class definition");let e=F2.get(t);return e?(Da(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}$C.type="NONE";const B2=$C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e,s){return`firebase:${t}:${e}:${s}`}class sd{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Qm(this.userKey,i.apiKey,a),this.fullPersistenceKey=Qm("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Na._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new sd(ka(B2),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||ka(B2);const l=Qm(r,e.config.apiKey,e.name);let d=null;for(const h of s)try{const p=await h._get(l);if(p){const g=Na._fromJSON(e,p);h!==a&&(d=g),a=h;break}}catch(p){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new sd(a,e,r):(a=u[0],d&&await a._set(l,d.toJSON()),await Promise.all(s.map(async h=>{if(h!==a)try{await h._remove(l)}catch(p){}})),new sd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GC(e))return"Blackberry";if(WC(e))return"Webos";if(VC(e))return"Safari";if((e.includes("chrome/")||UC(e))&&!e.includes("edge/"))return"Chrome";if(HC(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OC(t=Vn()){return/firefox\//i.test(t)}function VC(t=Vn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UC(t=Vn()){return/crios\//i.test(t)}function zC(t=Vn()){return/iemobile/i.test(t)}function HC(t=Vn()){return/android/i.test(t)}function GC(t=Vn()){return/blackberry/i.test(t)}function WC(t=Vn()){return/webos/i.test(t)}function r1(t=Vn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function V8(t=Vn()){var e;return r1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function U8(){return rD()&&document.documentMode===10}function qC(t=Vn()){return r1(t)||HC(t)||WC(t)||GC(t)||/windows phone/i.test(t)||zC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e=[]){let s;switch(t){case"Browser":s=$2(Vn());break;case"Worker":s=`${$2(Vn())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Cd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=a=>new Promise((l,d)=>{try{const u=e(a);l(u)}catch(u){d(u)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e={}){return Td(t,"GET","/v2/passwordPolicy",lg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=6;class W8{constructor(e){var s,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=l.minPasswordLength)!==null&&s!==void 0?s:G8,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,i,a,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O2(this),this.idTokenSubscription=new O2(this),this.beforeStateQueue=new z8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=ka(s)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await sd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await FC(this,{idToken:e}),r=await Na._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ja(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ja(this.app))return Promise.reject(Lo(this));const s=e?nn(e):null;return s&&gt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ja(this.app)?Promise.reject(Lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ja(this.app)?Promise.reject(Lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ka(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H8(this),s=new W8(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Eh("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await O8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&ka(e)||this._popupRedirectResolver;gt(s,this,"argument-error"),this.redirectPersistenceManager=await sd.create(this,[ka(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,r,i);return()=>{l=!0,u()}}else{const u=e.addObserver(s);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&k8(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function cg(t){return nn(t)}class O2{constructor(e){this.auth=e,this.observer=null,this.addObserver=hD(s=>this.observer=s)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K8(t){i1=t}function Q8(t){return i1.loadJS(t)}function X8(){return i1.gapiScript}function Y8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t,e){const s=J0(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(vf(a,e!=null?e:{}))return i;La(i,"already-initialized")}return s.initialize({options:e})}function Z8(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(ka);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eM(t,e,s){const r=cg(t);gt(r._canInitEmulator,r,"emulator-config-failed"),gt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=QC(e),{host:l,port:d}=tM(e),u=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),sM()}function QC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tM(t){const e=QC(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:V2(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:V2(l)}}}function V2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sM(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,s){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(t,e){return DC(t,"POST","/v1/accounts:signInWithIdp",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="http://localhost";class Bl extends XC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Bl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):La("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=s,a=e1(s,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Bl(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const s=this.buildRequest();return nd(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,nd(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,nd(e,s)}buildRequest(){const e={requestUri:nM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Ah(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends YC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Rh{constructor(){super("facebook.com")}static credential(e){return Bl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch(s){return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Rh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Bl._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return jo.credential(s,r)}catch(i){return null}}}jo.GOOGLE_SIGN_IN_METHOD="google.com";jo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Rh{constructor(){super("github.com")}static credential(e){return Bl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch(s){return null}}}So.GITHUB_SIGN_IN_METHOD="github.com";So.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Rh{constructor(){super("twitter.com")}static credential(e,s){return Bl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return No.credential(s,r)}catch(i){return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const a=await Na._fromIdTokenResponse(e,r,i),l=U2(r);return new $l({user:a,providerId:l,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=U2(r);return new $l({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function U2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends za{constructor(e,s,r,i){var a;super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new wf(e,s,r,i)}}function JC(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(t,a,e,r):a})}async function rM(t,e,s=!1){const r=await dh(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return $l._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e,s=!1){const{auth:r}=t;if(ja(r.app))return Promise.reject(Lo(r));const i="reauthenticate";try{const a=await dh(t,JC(r,i,e,t),s);gt(a.idToken,r,"internal-error");const l=n1(a.idToken);gt(l,r,"internal-error");const{sub:d}=l;return gt(t.uid===d,r,"user-mismatch"),$l._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&La(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t,e,s=!1){if(ja(t.app))return Promise.reject(Lo(t));const r="signIn",i=await JC(t,r,e),a=await $l._fromIdTokenResponse(t,r,i);return s||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return DC(t,"POST","/v1/accounts:signInWithCustomToken",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){if(ja(t.app))return Promise.reject(Lo(t));const s=cg(t),r=await oM(s,{token:e,returnSecureToken:!0}),i=await $l._fromIdTokenResponse(s,"signIn",r);return await s._updateCurrentUser(i.user),i}function cM(t,e,s,r){return nn(t).onIdTokenChanged(e,s,r)}function dM(t,e,s){return nn(t).beforeAuthStateChanged(e,s)}function uM(t,e,s,r){return nn(t).onAuthStateChanged(e,s,r)}function hM(t){return nn(t).signOut()}const jf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(jf,"1"),this.storage.removeItem(jf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=1e3,mM=10;class eT extends ZC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!s&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);U8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mM):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}eT.type="LOCAL";const fM=eT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends ZC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}tT.type="SESSION";const sT=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new dg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:a}=s.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async h=>h(s.origin,a)),u=await gM(d);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,u)=>{const h=a1("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(v.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function yM(t){Gi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return typeof Gi().WorkerGlobalScope!="undefined"&&typeof Gi().importScripts=="function"}async function vM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function bM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _M(){return nT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebaseLocalStorageDb",wM=1,Sf="firebaseLocalStorage",iT="fbase_key";class Ph{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function ug(t,e){return t.transaction([Sf],e?"readwrite":"readonly").objectStore(Sf)}function jM(){const t=indexedDB.deleteDatabase(rT);return new Ph(t).toPromise()}function Gv(){const t=indexedDB.open(rT,wM);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Sf,{keyPath:iT})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Sf)?e(r):(r.close(),await jM(),e(await Gv()))})})}async function z2(t,e,s){const r=ug(t,!0).put({[iT]:e,value:s});return new Ph(r).toPromise()}async function SM(t,e){const s=ug(t,!1).get(e),r=await new Ph(s).toPromise();return r===void 0?null:r.value}function H2(t,e){const s=ug(t,!0).delete(e);return new Ph(s).toPromise()}const NM=800,kM=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gv(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>kM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dg._getInstance(_M()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await vM(),!this.activeServiceWorker)return;this.sender=new xM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(s){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gv();return await z2(e,jf,"1"),await H2(e,jf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>z2(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>SM(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>H2(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ug(i,!1).getAll();return new Ph(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const CM=aT;new Ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t,e){return e?ka(e):(gt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends XC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nd(e,this._buildIdpRequest())}_linkToIdToken(e,s){return nd(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return nd(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function EM(t){return aM(t.auth,new o1(t),t.bypassAuthState)}function AM(t){const{auth:e,user:s}=t;return gt(s,e,"internal-error"),iM(s,new o1(t),t.bypassAuthState)}async function IM(t){const{auth:e,user:s}=t;return gt(s,e,"internal-error"),rM(s,new o1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,s,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:s,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EM;case"linkViaPopup":case"linkViaRedirect":return IM;case"reauthViaPopup":case"reauthViaRedirect":return AM;default:La(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new Ih(2e3,1e4);class Wc extends oT{constructor(e,s,r,i,a){super(e,s,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Wc.currentPopupAction&&Wc.currentPopupAction.cancel(),Wc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=a1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RM.get())};e()}}Wc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="pendingRedirect",Xm=new Map;class LM extends oT{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=Xm.get(this.auth._key());if(!e){try{const r=await DM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}Xm.set(this.auth._key(),e)}return this.bypassAuthState||Xm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DM(t,e){const s=BM(e),r=FM(t);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function MM(t,e){Xm.set(t._key(),e)}function FM(t){return ka(t._redirectPersistence)}function BM(t){return Qm(PM,t.config.apiKey,t.name)}async function $M(t,e,s=!1){if(ja(t.app))return Promise.reject(Lo(t));const r=cg(t),i=TM(r,e),l=await new LM(r,i,s).execute();return l&&!s&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=600*1e3;class VM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UM(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!lT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(Hi(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OM&&this.cachedEventUids.clear(),this.cachedEventUids.has(G2(e))}saveEventToCache(e){this.cachedEventUids.add(G2(e)),this.lastProcessedEventTime=Date.now()}}function G2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e={}){return Td(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GM=/^https?/;async function WM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zM(t);for(const s of e)try{if(qM(s))return}catch(r){}La(t,"unauthorized-domain")}function qM(t){const e=zv(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&l.hostname===r}if(!GM.test(s))return!1;if(HM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=new Ih(3e4,6e4);function W2(){const t=Gi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function QM(t){return new Promise((e,s)=>{var r,i,a;function l(){W2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W2(),s(Hi(t,"network-request-failed"))},timeout:KM.get()})}if(!((i=(r=Gi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Gi().gapi)===null||a===void 0)&&a.load)l();else{const d=Y8("iframefcb");return Gi()[d]=()=>{gapi.load?l():s(Hi(t,"network-request-failed"))},Q8(`${X8()}?onload=${d}`).catch(u=>s(u))}}).catch(e=>{throw Ym=null,e})}let Ym=null;function XM(t){return Ym=Ym||QM(t),Ym}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new Ih(5e3,15e3),JM="__/auth/iframe",ZM="emulator/auth/iframe",e9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s9(t){const e=t.config;gt(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?s1(e,ZM):`https://${t.config.authDomain}/${JM}`,r={apiKey:e.apiKey,appName:t.name,v:Cd},i=t9.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${s}?${Ah(r).slice(1)}`}async function n9(t){const e=await XM(t),s=Gi().gapi;return gt(s,t,"internal-error"),e.open({where:document.body,url:s9(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e9,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Hi(t,"network-request-failed"),d=Gi().setTimeout(()=>{a(l)},YM.get());function u(){Gi().clearTimeout(d),i(r)}r.ping(u).then(u,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i9=500,a9=600,o9="_blank",l9="http://localhost";class q2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function c9(t,e,s,r=i9,i=a9){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const u=Object.assign(Object.assign({},r9),{width:r.toString(),height:i.toString(),top:a,left:l}),h=Vn().toLowerCase();s&&(d=UC(h)?o9:s),OC(h)&&(e=e||l9,u.scrollbars="yes");const p=Object.entries(u).reduce((v,[b,S])=>`${v}${b}=${S},`,"");if(V8(h)&&d!=="_self")return d9(e||"",d),new q2(null);const g=window.open(e||"",d,p);gt(g,t,"popup-blocked");try{g.focus()}catch(v){}return new q2(g)}function d9(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9="__/auth/handler",h9="emulator/auth/handler",p9=encodeURIComponent("fac");async function K2(t,e,s,r,i,a){gt(t.config.authDomain,t,"auth-domain-config-required"),gt(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:Cd,eventId:i};if(e instanceof YC){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",uD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))l[p]=g}if(e instanceof Rh){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const u=await t._getAppCheckToken(),h=u?`#${p9}=${encodeURIComponent(u)}`:"";return`${m9(t)}?${Ah(d).slice(1)}${h}`}function m9({config:t}){return t.emulator?s1(t,h9):`https://${t.authDomain}/${u9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="webStorageSupport";class f9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sT,this._completeRedirectFn=$M,this._overrideRedirectResult=MM}async _openPopup(e,s,r,i){var a;Da((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await K2(e,s,r,zv(),i);return c9(e,l,a1())}async _openRedirect(e,s,r,i){await this._originValidation(e);const a=await K2(e,s,r,zv(),i);return yM(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(Da(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await n9(e),r=new VM(e);return s.register("authEvent",i=>(gt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Ey,{type:Ey},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ey];l!==void 0&&s(!!l),La(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=WM(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return qC()||VC()||r1()}}const g9=f9;var Q2="@firebase/auth",X2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v9(t){cd(new Fl("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;gt(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KC(t)},h=new q8(r,i,a,u);return Z8(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),cd(new Fl("auth-internal",e=>{const s=cg(e.getProvider("auth").getImmediate());return(r=>new x9(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(Q2,X2,y9(t)),Po(Q2,X2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=300,_9=SC("authIdTokenMaxAge")||b9;let Y2=null;const w9=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>_9)return;const i=s==null?void 0:s.token;Y2!==i&&(Y2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function j9(t=Z0()){const e=J0(t,"auth");if(e.isInitialized())return e.getImmediate();const s=J8(t,{popupRedirectResolver:g9,persistence:[CM,fM,sT]}),r=SC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=w9(a.toString());dM(s,l,()=>l(s.currentUser)),cM(s,d=>l(d))}}const i=wC("auth");return i&&eM(s,`http://${i}`),s}function S9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}K8({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Hi("internal-error");a.customData=i,s(a)},r.type="text/javascript",r.charset="UTF-8",S9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v9("Browser");var J2=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ll,cT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,w){function I(){}I.prototype=w.prototype,C.D=w.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(F,R,B){for(var $=Array(arguments.length-2),W=2;W<arguments.length;W++)$[W-2]=arguments[W];return w.prototype[R].apply(F,$)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,w,I){I||(I=0);var F=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)F[R]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(R=0;16>R;++R)F[R]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=C.g[0],I=C.g[1],R=C.g[2];var B=C.g[3],$=w+(B^I&(R^B))+F[0]+3614090360&4294967295;w=I+($<<7&4294967295|$>>>25),$=B+(R^w&(I^R))+F[1]+3905402710&4294967295,B=w+($<<12&4294967295|$>>>20),$=R+(I^B&(w^I))+F[2]+606105819&4294967295,R=B+($<<17&4294967295|$>>>15),$=I+(w^R&(B^w))+F[3]+3250441966&4294967295,I=R+($<<22&4294967295|$>>>10),$=w+(B^I&(R^B))+F[4]+4118548399&4294967295,w=I+($<<7&4294967295|$>>>25),$=B+(R^w&(I^R))+F[5]+1200080426&4294967295,B=w+($<<12&4294967295|$>>>20),$=R+(I^B&(w^I))+F[6]+2821735955&4294967295,R=B+($<<17&4294967295|$>>>15),$=I+(w^R&(B^w))+F[7]+4249261313&4294967295,I=R+($<<22&4294967295|$>>>10),$=w+(B^I&(R^B))+F[8]+1770035416&4294967295,w=I+($<<7&4294967295|$>>>25),$=B+(R^w&(I^R))+F[9]+2336552879&4294967295,B=w+($<<12&4294967295|$>>>20),$=R+(I^B&(w^I))+F[10]+4294925233&4294967295,R=B+($<<17&4294967295|$>>>15),$=I+(w^R&(B^w))+F[11]+2304563134&4294967295,I=R+($<<22&4294967295|$>>>10),$=w+(B^I&(R^B))+F[12]+1804603682&4294967295,w=I+($<<7&4294967295|$>>>25),$=B+(R^w&(I^R))+F[13]+4254626195&4294967295,B=w+($<<12&4294967295|$>>>20),$=R+(I^B&(w^I))+F[14]+2792965006&4294967295,R=B+($<<17&4294967295|$>>>15),$=I+(w^R&(B^w))+F[15]+1236535329&4294967295,I=R+($<<22&4294967295|$>>>10),$=w+(R^B&(I^R))+F[1]+4129170786&4294967295,w=I+($<<5&4294967295|$>>>27),$=B+(I^R&(w^I))+F[6]+3225465664&4294967295,B=w+($<<9&4294967295|$>>>23),$=R+(w^I&(B^w))+F[11]+643717713&4294967295,R=B+($<<14&4294967295|$>>>18),$=I+(B^w&(R^B))+F[0]+3921069994&4294967295,I=R+($<<20&4294967295|$>>>12),$=w+(R^B&(I^R))+F[5]+3593408605&4294967295,w=I+($<<5&4294967295|$>>>27),$=B+(I^R&(w^I))+F[10]+38016083&4294967295,B=w+($<<9&4294967295|$>>>23),$=R+(w^I&(B^w))+F[15]+3634488961&4294967295,R=B+($<<14&4294967295|$>>>18),$=I+(B^w&(R^B))+F[4]+3889429448&4294967295,I=R+($<<20&4294967295|$>>>12),$=w+(R^B&(I^R))+F[9]+568446438&4294967295,w=I+($<<5&4294967295|$>>>27),$=B+(I^R&(w^I))+F[14]+3275163606&4294967295,B=w+($<<9&4294967295|$>>>23),$=R+(w^I&(B^w))+F[3]+4107603335&4294967295,R=B+($<<14&4294967295|$>>>18),$=I+(B^w&(R^B))+F[8]+1163531501&4294967295,I=R+($<<20&4294967295|$>>>12),$=w+(R^B&(I^R))+F[13]+2850285829&4294967295,w=I+($<<5&4294967295|$>>>27),$=B+(I^R&(w^I))+F[2]+4243563512&4294967295,B=w+($<<9&4294967295|$>>>23),$=R+(w^I&(B^w))+F[7]+1735328473&4294967295,R=B+($<<14&4294967295|$>>>18),$=I+(B^w&(R^B))+F[12]+2368359562&4294967295,I=R+($<<20&4294967295|$>>>12),$=w+(I^R^B)+F[5]+4294588738&4294967295,w=I+($<<4&4294967295|$>>>28),$=B+(w^I^R)+F[8]+2272392833&4294967295,B=w+($<<11&4294967295|$>>>21),$=R+(B^w^I)+F[11]+1839030562&4294967295,R=B+($<<16&4294967295|$>>>16),$=I+(R^B^w)+F[14]+4259657740&4294967295,I=R+($<<23&4294967295|$>>>9),$=w+(I^R^B)+F[1]+2763975236&4294967295,w=I+($<<4&4294967295|$>>>28),$=B+(w^I^R)+F[4]+1272893353&4294967295,B=w+($<<11&4294967295|$>>>21),$=R+(B^w^I)+F[7]+4139469664&4294967295,R=B+($<<16&4294967295|$>>>16),$=I+(R^B^w)+F[10]+3200236656&4294967295,I=R+($<<23&4294967295|$>>>9),$=w+(I^R^B)+F[13]+681279174&4294967295,w=I+($<<4&4294967295|$>>>28),$=B+(w^I^R)+F[0]+3936430074&4294967295,B=w+($<<11&4294967295|$>>>21),$=R+(B^w^I)+F[3]+3572445317&4294967295,R=B+($<<16&4294967295|$>>>16),$=I+(R^B^w)+F[6]+76029189&4294967295,I=R+($<<23&4294967295|$>>>9),$=w+(I^R^B)+F[9]+3654602809&4294967295,w=I+($<<4&4294967295|$>>>28),$=B+(w^I^R)+F[12]+3873151461&4294967295,B=w+($<<11&4294967295|$>>>21),$=R+(B^w^I)+F[15]+530742520&4294967295,R=B+($<<16&4294967295|$>>>16),$=I+(R^B^w)+F[2]+3299628645&4294967295,I=R+($<<23&4294967295|$>>>9),$=w+(R^(I|~B))+F[0]+4096336452&4294967295,w=I+($<<6&4294967295|$>>>26),$=B+(I^(w|~R))+F[7]+1126891415&4294967295,B=w+($<<10&4294967295|$>>>22),$=R+(w^(B|~I))+F[14]+2878612391&4294967295,R=B+($<<15&4294967295|$>>>17),$=I+(B^(R|~w))+F[5]+4237533241&4294967295,I=R+($<<21&4294967295|$>>>11),$=w+(R^(I|~B))+F[12]+1700485571&4294967295,w=I+($<<6&4294967295|$>>>26),$=B+(I^(w|~R))+F[3]+2399980690&4294967295,B=w+($<<10&4294967295|$>>>22),$=R+(w^(B|~I))+F[10]+4293915773&4294967295,R=B+($<<15&4294967295|$>>>17),$=I+(B^(R|~w))+F[1]+2240044497&4294967295,I=R+($<<21&4294967295|$>>>11),$=w+(R^(I|~B))+F[8]+1873313359&4294967295,w=I+($<<6&4294967295|$>>>26),$=B+(I^(w|~R))+F[15]+4264355552&4294967295,B=w+($<<10&4294967295|$>>>22),$=R+(w^(B|~I))+F[6]+2734768916&4294967295,R=B+($<<15&4294967295|$>>>17),$=I+(B^(R|~w))+F[13]+1309151649&4294967295,I=R+($<<21&4294967295|$>>>11),$=w+(R^(I|~B))+F[4]+4149444226&4294967295,w=I+($<<6&4294967295|$>>>26),$=B+(I^(w|~R))+F[11]+3174756917&4294967295,B=w+($<<10&4294967295|$>>>22),$=R+(w^(B|~I))+F[2]+718787259&4294967295,R=B+($<<15&4294967295|$>>>17),$=I+(B^(R|~w))+F[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(R+($<<21&4294967295|$>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.u=function(C,w){w===void 0&&(w=C.length);for(var I=w-this.blockSize,F=this.B,R=this.h,B=0;B<w;){if(R==0)for(;B<=I;)i(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<w;)if(F[R++]=C.charCodeAt(B++),R==this.blockSize){i(this,F),R=0;break}}else for(;B<w;)if(F[R++]=C[B++],R==this.blockSize){i(this,F),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var I=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=I&255,I/=256;for(this.u(C),C=Array(16),w=I=0;4>w;++w)for(var F=0;32>F;F+=8)C[I++]=this.g[w]>>>F&255;return C};function a(C,w){var I=d;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=w(C)}function l(C,w){this.h=w;for(var I=[],F=!0,R=C.length-1;0<=R;R--){var B=C[R]|0;F&&B==w||(I[R]=B,F=!1)}this.g=I}var d={};function u(C){return-128<=C&&128>C?a(C,function(w){return new l([w|0],0>w?-1:0)}):new l([C|0],0>C?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return g;if(0>C)return E(h(-C));for(var w=[],I=1,F=0;C>=I;F++)w[F]=C/I|0,I*=4294967296;return new l(w,0)}function p(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return E(p(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(w,8)),F=g,R=0;R<C.length;R+=8){var B=Math.min(8,C.length-R),$=parseInt(C.substring(R,R+B),w);8>B?(B=h(Math.pow(w,B)),F=F.j(B).add(h($))):(F=F.j(I),F=F.add(h($)))}return F}var g=u(0),v=u(1),b=u(16777216);t=l.prototype,t.m=function(){if(k(this))return-E(this).m();for(var C=0,w=1,I=0;I<this.g.length;I++){var F=this.i(I);C+=(0<=F?F:4294967296+F)*w,w*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(k(this))return"-"+E(this).toString(C);for(var w=h(Math.pow(C,6)),I=this,F="";;){var R=y(I,w).g;I=L(I,R.j(w));var B=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=R,S(I))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function k(C){return C.h==-1}t.l=function(C){return C=L(this,C),k(C)?-1:S(C)?0:1};function E(C){for(var w=C.g.length,I=[],F=0;F<w;F++)I[F]=~C.g[F];return new l(I,~C.h).add(v)}t.abs=function(){return k(this)?E(this):this},t.add=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],F=0,R=0;R<=w;R++){var B=F+(this.i(R)&65535)+(C.i(R)&65535),$=(B>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);F=$>>>16,B&=65535,$&=65535,I[R]=$<<16|B}return new l(I,I[I.length-1]&-2147483648?-1:0)};function L(C,w){return C.add(E(w))}t.j=function(C){if(S(this)||S(C))return g;if(k(this))return k(C)?E(this).j(E(C)):E(E(this).j(C));if(k(C))return E(this.j(E(C)));if(0>this.l(b)&&0>C.l(b))return h(this.m()*C.m());for(var w=this.g.length+C.g.length,I=[],F=0;F<2*w;F++)I[F]=0;for(F=0;F<this.g.length;F++)for(var R=0;R<C.g.length;R++){var B=this.i(F)>>>16,$=this.i(F)&65535,W=C.i(R)>>>16,H=C.i(R)&65535;I[2*F+2*R]+=$*H,M(I,2*F+2*R),I[2*F+2*R+1]+=B*H,M(I,2*F+2*R+1),I[2*F+2*R+1]+=$*W,M(I,2*F+2*R+1),I[2*F+2*R+2]+=B*W,M(I,2*F+2*R+2)}for(F=0;F<w;F++)I[F]=I[2*F+1]<<16|I[2*F];for(F=w;F<2*w;F++)I[F]=0;return new l(I,0)};function M(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function N(C,w){this.g=C,this.h=w}function y(C,w){if(S(w))throw Error("division by zero");if(S(C))return new N(g,g);if(k(C))return w=y(E(C),w),new N(E(w.g),E(w.h));if(k(w))return w=y(C,E(w)),new N(E(w.g),w.h);if(30<C.g.length){if(k(C)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var I=v,F=w;0>=F.l(C);)I=_(I),F=_(F);var R=D(I,1),B=D(F,1);for(F=D(F,2),I=D(I,2);!S(F);){var $=B.add(F);0>=$.l(C)&&(R=R.add(I),B=$),F=D(F,1),I=D(I,1)}return w=L(C,R.j(w)),new N(R,w)}for(R=g;0<=C.l(w);){for(I=Math.max(1,Math.floor(C.m()/w.m())),F=Math.ceil(Math.log(I)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=h(I),$=B.j(w);k($)||0<$.l(C);)I-=F,B=h(I),$=B.j(w);S(B)&&(B=v),R=R.add(B),C=L(C,$)}return new N(R,C)}t.A=function(C){return y(this,C).h},t.and=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],F=0;F<w;F++)I[F]=this.i(F)&C.i(F);return new l(I,this.h&C.h)},t.or=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],F=0;F<w;F++)I[F]=this.i(F)|C.i(F);return new l(I,this.h|C.h)},t.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],F=0;F<w;F++)I[F]=this.i(F)^C.i(F);return new l(I,this.h^C.h)};function _(C){for(var w=C.g.length+1,I=[],F=0;F<w;F++)I[F]=C.i(F)<<1|C.i(F-1)>>>31;return new l(I,C.h)}function D(C,w){var I=w>>5;w%=32;for(var F=C.g.length-I,R=[],B=0;B<F;B++)R[B]=0<w?C.i(B+I)>>>w|C.i(B+I+1)<<32-w:C.i(B+I);return new l(R,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=p,Ll=l}).apply(typeof J2!="undefined"?J2:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var xm=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dT,Iu,uT,Jm,Wv,hT,pT,mT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,A,O){return f==Array.prototype||f==Object.prototype||(f[A]=O.value),f};function s(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof xm=="object"&&xm];for(var A=0;A<f.length;++A){var O=f[A];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=s(this);function i(f,A){if(A)e:{var O=r;f=f.split(".");for(var z=0;z<f.length-1;z++){var ae=f[z];if(!(ae in O))break e;O=O[ae]}f=f[f.length-1],z=O[f],A=A(z),A!=z&&A!=null&&e(O,f,{configurable:!0,writable:!0,value:A})}}function a(f,A){f instanceof String&&(f+="");var O=0,z=!1,ae={next:function(){if(!z&&O<f.length){var me=O++;return{value:A(me,f[me]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}i("Array.prototype.values",function(f){return f||function(){return a(this,function(A,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(f){var A=typeof f;return A=A!="object"?A:f?Array.isArray(f)?"array":A:"null",A=="array"||A=="object"&&typeof f.length=="number"}function h(f){var A=typeof f;return A=="object"&&f!=null||A=="function"}function p(f,A,O){return f.call.apply(f.bind,arguments)}function g(f,A,O){if(!f)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,z),f.apply(A,ae)}}return function(){return f.apply(A,arguments)}}function v(f,A,O){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function b(f,A){var O=Array.prototype.slice.call(arguments,1);return function(){var z=O.slice();return z.push.apply(z,arguments),f.apply(this,z)}}function S(f,A){function O(){}O.prototype=A.prototype,f.aa=A.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(z,ae,me){for(var Be=Array(arguments.length-2),os=2;os<arguments.length;os++)Be[os-2]=arguments[os];return A.prototype[ae].apply(z,Be)}}function k(f){const A=f.length;if(0<A){const O=Array(A);for(let z=0;z<A;z++)O[z]=f[z];return O}return[]}function E(f,A){for(let O=1;O<arguments.length;O++){const z=arguments[O];if(u(z)){const ae=f.length||0,me=z.length||0;f.length=ae+me;for(let Be=0;Be<me;Be++)f[ae+Be]=z[Be]}else f.push(z)}}class L{constructor(A,O){this.i=A,this.j=O,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function M(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function y(f){return y[" "](f),f}y[" "]=function(){};var _=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function D(f,A,O){for(const z in f)A.call(O,f[z],z,f)}function C(f,A){for(const O in f)A.call(void 0,f[O],O,f)}function w(f){const A={};for(const O in f)A[O]=f[O];return A}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,A){let O,z;for(let ae=1;ae<arguments.length;ae++){z=arguments[ae];for(O in z)f[O]=z[O];for(let me=0;me<I.length;me++)O=I[me],Object.prototype.hasOwnProperty.call(z,O)&&(f[O]=z[O])}}function R(f){var A=1;f=f.split(":");const O=[];for(;0<A&&f.length;)O.push(f.shift()),A--;return f.length&&O.push(f.join(":")),O}function B(f){d.setTimeout(()=>{throw f},0)}function $(){var f=se;let A=null;return f.g&&(A=f.g,f.g=f.g.next,f.g||(f.h=null),A.next=null),A}class W{constructor(){this.h=this.g=null}add(A,O){const z=H.get();z.set(A,O),this.h?this.h.next=z:this.g=z,this.h=z}}var H=new L(()=>new q,f=>f.reset());class q{constructor(){this.next=this.g=this.h=null}set(A,O){this.h=A,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let K,G=!1,se=new W,ne=()=>{const f=d.Promise.resolve(void 0);K=()=>{f.then(U)}};var U=()=>{for(var f;f=$();){try{f.h.call(f.g)}catch(O){B(O)}var A=H;A.j(f),100>A.h&&(A.h++,f.next=A.g,A.g=f)}G=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(f,A){this.type=f,this.g=this.target=A,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,A=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};d.addEventListener("test",O,A),d.removeEventListener("test",O,A)}catch(O){}return f})();function he(f,A){if(le.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,z=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=A,A=f.relatedTarget){if(_){e:{try{y(A.nodeName);var ae=!0;break e}catch(me){}ae=!1}ae||(A=null)}}else O=="mouseover"?A=f.fromElement:O=="mouseout"&&(A=f.toElement);this.relatedTarget=A,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:xe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&he.aa.h.call(this)}}S(he,le);var xe={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),we=0;function ve(f,A,O,z,ae){this.listener=f,this.proxy=null,this.src=A,this.type=O,this.capture=!!z,this.ha=ae,this.key=++we,this.da=this.fa=!1}function ce(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ke(f){this.src=f,this.g={},this.h=0}ke.prototype.add=function(f,A,O,z,ae){var me=f.toString();f=this.g[me],f||(f=this.g[me]=[],this.h++);var Be=Ue(f,A,z,ae);return-1<Be?(A=f[Be],O||(A.fa=!1)):(A=new ve(A,this.src,me,!!z,ae),A.fa=O,f.push(A)),A};function be(f,A){var O=A.type;if(O in f.g){var z=f.g[O],ae=Array.prototype.indexOf.call(z,A,void 0),me;(me=0<=ae)&&Array.prototype.splice.call(z,ae,1),me&&(ce(A),f.g[O].length==0&&(delete f.g[O],f.h--))}}function Ue(f,A,O,z){for(var ae=0;ae<f.length;++ae){var me=f[ae];if(!me.da&&me.listener==A&&me.capture==!!O&&me.ha==z)return ae}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Tt={};function Mt(f,A,O,z,ae){if(Array.isArray(A)){for(var me=0;me<A.length;me++)Mt(f,A[me],O,z,ae);return null}return O=ht(O),f&&f[ge]?f.K(A,O,h(z)?!!z.capture:!1,ae):Ft(f,A,O,!1,z,ae)}function Ft(f,A,O,z,ae,me){if(!A)throw Error("Invalid event type");var Be=h(ae)?!!ae.capture:!!ae,os=He(f);if(os||(f[Ke]=os=new ke(f)),O=os.add(A,O,z,Be,me),O.proxy)return O;if(z=Vt(),O.proxy=z,z.src=f,z.listener=O,f.addEventListener)ee||(ae=Be),ae===void 0&&(ae=!1),f.addEventListener(A.toString(),z,ae);else if(f.attachEvent)f.attachEvent(Le(A.toString()),z);else if(f.addListener&&f.removeListener)f.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Vt(){function f(O){return A.call(f.src,f.listener,O)}const A=Ie;return f}function is(f,A,O,z,ae){if(Array.isArray(A))for(var me=0;me<A.length;me++)is(f,A[me],O,z,ae);else z=h(z)?!!z.capture:!!z,O=ht(O),f&&f[ge]?(f=f.i,A=String(A).toString(),A in f.g&&(me=f.g[A],O=Ue(me,O,z,ae),-1<O&&(ce(me[O]),Array.prototype.splice.call(me,O,1),me.length==0&&(delete f.g[A],f.h--)))):f&&(f=He(f))&&(A=f.g[A.toString()],f=-1,A&&(f=Ue(A,O,z,ae)),(O=-1<f?A[f]:null)&&Ee(O))}function Ee(f){if(typeof f!="number"&&f&&!f.da){var A=f.src;if(A&&A[ge])be(A.i,f);else{var O=f.type,z=f.proxy;A.removeEventListener?A.removeEventListener(O,z,f.capture):A.detachEvent?A.detachEvent(Le(O),z):A.addListener&&A.removeListener&&A.removeListener(z),(O=He(A))?(be(O,f),O.h==0&&(O.src=null,A[Ke]=null)):ce(f)}}}function Le(f){return f in Tt?Tt[f]:Tt[f]="on"+f}function Ie(f,A){if(f.da)f=!0;else{A=new he(A,this);var O=f.listener,z=f.ha||f.src;f.fa&&Ee(f),f=O.call(z,A)}return f}function He(f){return f=f[Ke],f instanceof ke?f:null}var ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function ht(f){return typeof f=="function"?f:(f[ot]||(f[ot]=function(A){return f.handleEvent(A)}),f[ot])}function yt(){Z.call(this),this.i=new ke(this),this.M=this,this.F=null}S(yt,Z),yt.prototype[ge]=!0,yt.prototype.removeEventListener=function(f,A,O,z){is(this,f,A,O,z)};function Ut(f,A){var O,z=f.F;if(z)for(O=[];z;z=z.F)O.push(z);if(f=f.M,z=A.type||A,typeof A=="string")A=new le(A,f);else if(A instanceof le)A.target=A.target||f;else{var ae=A;A=new le(z,f),F(A,ae)}if(ae=!0,O)for(var me=O.length-1;0<=me;me--){var Be=A.g=O[me];ae=Bt(Be,z,!0,A)&&ae}if(Be=A.g=f,ae=Bt(Be,z,!0,A)&&ae,ae=Bt(Be,z,!1,A)&&ae,O)for(me=0;me<O.length;me++)Be=A.g=O[me],ae=Bt(Be,z,!1,A)&&ae}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var f=this.i,A;for(A in f.g){for(var O=f.g[A],z=0;z<O.length;z++)ce(O[z]);delete f.g[A],f.h--}}this.F=null},yt.prototype.K=function(f,A,O,z){return this.i.add(String(f),A,!1,O,z)},yt.prototype.L=function(f,A,O,z){return this.i.add(String(f),A,!0,O,z)};function Bt(f,A,O,z){if(A=f.i.g[String(A)],!A)return!0;A=A.concat();for(var ae=!0,me=0;me<A.length;++me){var Be=A[me];if(Be&&!Be.da&&Be.capture==O){var os=Be.listener,Zs=Be.ha||Be.src;Be.fa&&be(f.i,Be),ae=os.call(Zs,z)!==!1&&ae}}return ae&&!z.defaultPrevented}function An(f,A,O){if(typeof f=="function")O&&(f=v(f,O));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(f,A||0)}function Ys(f){f.g=An(()=>{f.g=null,f.i&&(f.i=!1,Ys(f))},f.l);const A=f.h;f.h=null,f.m.apply(null,A)}class Ps extends Z{constructor(A,O){super(),this.m=A,this.l=O,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(f){Z.call(this),this.h=f,this.g={}}S(Un,Z);var yr=[];function Br(f){D(f.g,function(A,O){this.g.hasOwnProperty(O)&&Ee(A)},f),f.g={}}Un.prototype.N=function(){Un.aa.N.call(this),Br(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=d.JSON.stringify,ue=d.JSON.parse,Fe=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function Qe(){}Qe.prototype.h=null;function vt(f){return f.h||(f.h=f.i())}function rt(){}var _t={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jt(){le.call(this,"d")}S(Jt,le);function as(){le.call(this,"c")}S(as,le);var Js={},Ci=null;function br(){return Ci=Ci||new yt}Js.La="serverreachability";function Wo(f){le.call(this,Js.La,f)}S(Wo,le);function zn(f){const A=br();Ut(A,new Wo(A))}Js.STAT_EVENT="statevent";function ni(f,A){le.call(this,Js.STAT_EVENT,f),this.stat=A}S(ni,le);function ks(f){const A=br();Ut(A,new ni(A,f))}Js.Ma="timingevent";function ea(f,A){le.call(this,Js.Ma,f),this.size=A}S(ea,le);function tr(f,A){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},A)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function Ei(f,A,O,z,ae,me){f.info(function(){if(f.g)if(me)for(var Be="",os=me.split("&"),Zs=0;Zs<os.length;Zs++){var qt=os[Zs].split("=");if(1<qt.length){var rn=qt[0];qt=qt[1];var Us=rn.split("_");Be=2<=Us.length&&Us[1]=="type"?Be+(rn+"="+qt+"&"):Be+(rn+"=redacted&")}}else Be=null;else Be=me;return"XMLHTTP REQ ("+z+") [attempt "+ae+"]: "+A+`
`+O+`
`+Be})}function Zt(f,A,O,z,ae,me,Be){f.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ae+"]: "+A+`
`+O+`
`+me+" "+Be})}function es(f,A,O,z){f.info(function(){return"XMLHTTP TEXT ("+A+"): "+ta(f,O)+(z?" "+z:"")})}function _r(f,A){f.info(function(){return"TIMEOUT: "+A})}Ti.prototype.info=function(){};function ta(f,A){if(!f.g)return A;if(!A)return null;try{var O=JSON.parse(A);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var z=O[f];if(!(2>z.length)){var ae=z[1];if(Array.isArray(ae)&&!(1>ae.length)){var me=ae[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Be=1;Be<ae.length;Be++)ae[Be]=""}}}}return vr(O)}catch(os){return A}}var ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function qo(){}S(qo,Qe),qo.prototype.g=function(){return new XMLHttpRequest},qo.prototype.i=function(){return{}},ri=new qo;function ii(f,A,O,z){this.j=f,this.i=A,this.l=O,this.R=z||1,this.U=new Un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ep}function ep(){this.i=null,this.g="",this.h=!1}var Fd={},tc={};function sc(f,A,O){f.L=1,f.v=Qa(jr(A)),f.m=O,f.P=!0,Bd(f,null)}function Bd(f,A){f.F=Date.now(),hs(f),f.A=jr(f.v);var O=f.A,z=f.R;Array.isArray(z)||(z=[String(z)]),Ya(O.i,"t",z),f.C=0,O=f.j.J,f.h=new ep,f.g=yp(f.j,O?A:null,!f.m),0<f.O&&(f.M=new Ps(v(f.Y,f,f.g),f.O)),A=f.U,O=f.g,z=f.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(yr[0]=ae.toString()),ae=yr);for(var me=0;me<ae.length;me++){var Be=Mt(O,ae[me],z||A.handleEvent,!1,A.h||A);if(!Be)break;A.g[Be.key]=Be}A=f.H?w(f.H):{},f.m?(f.u||(f.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,A)):(f.u="GET",f.g.ea(f.A,f.u,null,A)),zn(),Ei(f.i,f.u,f.A,f.l,f.R,f.m)}ii.prototype.ca=function(f){f=f.target;const A=this.M;A&&nr(f)==3?A.j():this.Y(f)},ii.prototype.Y=function(f){try{if(f==this.g)e:{const Us=nr(this.g);var A=this.g.Ba();const Vr=this.g.Z();if(!(3>Us)&&(Us!=3||this.g&&(this.h.h||this.g.oa()||Hd(this.g)))){this.J||Us!=4||A==7||(A==8||0>=Vr?zn(3):zn(2)),Ko(this);var O=this.g.Z();this.X=O;t:if(tp(this)){var z=Hd(this.g);f="";var ae=z.length,me=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){$r(this),Ga(this);var Be="";break t}this.h.i=new d.TextDecoder}for(A=0;A<ae;A++)this.h.h=!0,f+=this.h.i.decode(z[A],{stream:!(me&&A==ae-1)});z.length=0,this.h.g+=f,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=O==200,Zt(this.i,this.u,this.A,this.l,this.R,Us,O),this.o){if(this.T&&!this.K){t:{if(this.g){var os,Zs=this.g;if((os=Zs.g?Zs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(os)){var qt=os;break t}}qt=null}if(O=qt)es(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$d(this,O);else{this.o=!1,this.s=3,ks(12),$r(this),Ga(this);break e}}if(this.P){O=!0;let Nr;for(;!this.J&&this.C<Be.length;)if(Nr=Hg(this,Be),Nr==tc){Us==4&&(this.s=4,ks(14),O=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==Fd){this.s=4,ks(15),es(this.i,this.l,Be,"[Invalid Chunk]"),O=!1;break}else es(this.i,this.l,Nr,null),$d(this,Nr);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Us!=4||Be.length!=0||this.h.h||(this.s=1,ks(16),O=!1),this.o=this.o&&O,!O)es(this.i,this.l,Be,"[Invalid Chunked Response]"),$r(this),Ga(this);else if(0<Be.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),Wd(rn),rn.M=!0,ks(11))}}else es(this.i,this.l,Be,null),$d(this,Be);Us==4&&$r(this),this.o&&!this.J&&(Us==4?pc(this.j,this):(this.o=!1,hs(this)))}else lc(this.g),O==400&&0<Be.indexOf("Unknown SID")?(this.s=3,ks(12)):(this.s=0,ks(13)),$r(this),Ga(this)}}}catch(Us){}finally{}};function tp(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Hg(f,A){var O=f.C,z=A.indexOf(`
`,O);return z==-1?tc:(O=Number(A.substring(O,z)),isNaN(O)?Fd:(z+=1,z+O>A.length?tc:(A=A.slice(z,z+O),f.C=z+O,A)))}ii.prototype.cancel=function(){this.J=!0,$r(this)};function hs(f){f.S=Date.now()+f.I,sp(f,f.I)}function sp(f,A){if(f.B!=null)throw Error("WatchDog timer not null");f.B=tr(v(f.ba,f),A)}function Ko(f){f.B&&(d.clearTimeout(f.B),f.B=null)}ii.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(_r(this.i,this.A),this.L!=2&&(zn(),ks(17)),$r(this),this.s=2,Ga(this)):sp(this,this.S-f)};function Ga(f){f.j.G==0||f.J||pc(f.j,f)}function $r(f){Ko(f);var A=f.M;A&&typeof A.ma=="function"&&A.ma(),f.M=null,Br(f.U),f.g&&(A=f.g,f.g=null,A.abort(),A.ma())}function $d(f,A){try{var O=f.j;if(O.G!=0&&(O.g==f||Hn(O.h,f))){if(!f.K&&Hn(O.h,f)&&O.G==3){try{var z=O.Da.g.parse(A)}catch(qt){z=null}if(Array.isArray(z)&&z.length==3){var ae=z;if(ae[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)hc(O),di(O);else break e;uc(O),ks(18)}}else O.za=ae[1],0<O.za-O.T&&37500>ae[2]&&O.F&&O.v==0&&!O.C&&(O.C=tr(v(O.Za,O),6e3));if(1>=rp(O.h)&&O.ca){try{O.ca()}catch(qt){}O.ca=void 0}}else aa(O,11)}else if((f.K||O.g==f)&&hc(O),!M(A))for(ae=O.Da.g.parse(A),A=0;A<ae.length;A++){let qt=ae[A];if(O.T=qt[0],qt=qt[1],O.G==2)if(qt[0]=="c"){O.K=qt[1],O.ia=qt[2];const rn=qt[3];rn!=null&&(O.la=rn,O.j.info("VER="+O.la));const Us=qt[4];Us!=null&&(O.Aa=Us,O.j.info("SVER="+O.Aa));const Vr=qt[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(z=1.5*Vr,O.L=z,O.j.info("backChannelRequestTimeoutMs_="+z)),z=O;const Nr=f.g;if(Nr){const tl=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var me=z.h;me.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Od(me,me.h),me.h=null))}if(z.D){const fc=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;fc&&(z.ya=fc,cs(z.I,z.D,fc))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),z=O;var Be=f;if(z.qa=xp(z,z.J?z.ia:null,z.W),Be.K){ip(z.h,Be);var os=Be,Zs=z.L;Zs&&(os.I=Zs),os.B&&(Ko(os),hs(os)),z.g=Be}else el(z);0<O.i.length&&Pi(O)}else qt[0]!="stop"&&qt[0]!="close"||aa(O,7);else O.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?aa(O,7):fn(O):qt[0]!="noop"&&O.l&&O.l.ta(qt),O.v=0)}}zn(4)}catch(qt){}}var np=class{constructor(f,A){this.g=f,this.map=A}};function Qo(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function rp(f){return f.h?1:f.g?f.g.size:0}function Hn(f,A){return f.h?f.h==A:f.g?f.g.has(A):!1}function Od(f,A){f.g?f.g.add(A):f.h=A}function ip(f,A){f.h&&f.h==A?f.h=null:f.g&&f.g.has(A)&&f.g.delete(A)}Qo.prototype.cancel=function(){if(this.i=ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ap(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let A=f.i;for(const O of f.g.values())A=A.concat(O.D);return A}return k(f.i)}function nc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var A=[],O=f.length,z=0;z<O;z++)A.push(f[z]);return A}A=[],O=0;for(z in f)A[O++]=f[z];return A}function rc(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var A=[];f=f.length;for(var O=0;O<f;O++)A.push(O);return A}A=[],O=0;for(const z in f)A[O++]=z;return A}}}function Wa(f,A){if(f.forEach&&typeof f.forEach=="function")f.forEach(A,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,A,void 0);else for(var O=rc(f),z=nc(f),ae=z.length,me=0;me<ae;me++)A.call(void 0,z[me],O&&O[me],f)}var Xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gg(f,A){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var z=f[O].indexOf("="),ae=null;if(0<=z){var me=f[O].substring(0,z);ae=f[O].substring(z+1)}else me=f[O];A(me,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function sa(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof sa){this.h=f.h,Yo(this,f.j),this.o=f.o,this.g=f.g,qa(this,f.s),this.l=f.l;var A=f.i,O=new Ai;O.i=A.i,A.g&&(O.g=new Map(A.g),O.h=A.h),Ka(this,O),this.m=f.m}else f&&(A=String(f).match(Xo))?(this.h=!1,Yo(this,A[1]||"",!0),this.o=zt(A[2]||""),this.g=zt(A[3]||"",!0),qa(this,A[4]),this.l=zt(A[5]||"",!0),Ka(this,A[6]||"",!0),this.m=zt(A[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}sa.prototype.toString=function(){var f=[],A=this.j;A&&f.push(Xa(A,ic,!0),":");var O=this.g;return(O||A=="file")&&(f.push("//"),(A=this.o)&&f.push(Xa(A,ic,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(Xa(O,O.charAt(0)=="/"?cp:lp,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",Xa(O,Vd)),f.join("")};function jr(f){return new sa(f)}function Yo(f,A,O){f.j=O?zt(A,!0):A,f.j&&(f.j=f.j.replace(/:$/,""))}function qa(f,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);f.s=A}else f.s=null}function Ka(f,A,O){A instanceof Ai?(f.i=A,Ii(f.i,f.h)):(O||(A=Xa(A,dp)),f.i=new Ai(A,f.h))}function cs(f,A,O){f.i.set(A,O)}function Qa(f){return cs(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function zt(f,A){return f?A?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Xa(f,A,O){return typeof f=="string"?(f=encodeURI(f).replace(A,op),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function op(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ic=/[#\/\?@]/g,lp=/[#\?:]/g,cp=/[#\?]/g,dp=/[#\?@]/g,Vd=/#/g;function Ai(f,A){this.h=this.g=null,this.i=f||null,this.j=!!A}function mn(f){f.g||(f.g=new Map,f.h=0,f.i&&Gg(f.i,function(A,O){f.add(decodeURIComponent(A.replace(/\+/g," ")),O)}))}t=Ai.prototype,t.add=function(f,A){mn(this),this.i=null,f=Or(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(A),this.h+=1,this};function ai(f,A){mn(f),A=Or(f,A),f.g.has(A)&&(f.i=null,f.h-=f.g.get(A).length,f.g.delete(A))}function oi(f,A){return mn(f),A=Or(f,A),f.g.has(A)}t.forEach=function(f,A){mn(this),this.g.forEach(function(O,z){O.forEach(function(ae){f.call(A,ae,z,this)},this)},this)},t.na=function(){mn(this);const f=Array.from(this.g.values()),A=Array.from(this.g.keys()),O=[];for(let z=0;z<A.length;z++){const ae=f[z];for(let me=0;me<ae.length;me++)O.push(A[z])}return O},t.V=function(f){mn(this);let A=[];if(typeof f=="string")oi(this,f)&&(A=A.concat(this.g.get(Or(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)A=A.concat(f[O])}return A},t.set=function(f,A){return mn(this),this.i=null,f=Or(this,f),oi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[A]),this.h+=1,this},t.get=function(f,A){return f?(f=this.V(f),0<f.length?String(f[0]):A):A};function Ya(f,A,O){ai(f,A),0<O.length&&(f.i=null,f.g.set(Or(f,A),k(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],A=Array.from(this.g.keys());for(var O=0;O<A.length;O++){var z=A[O];const me=encodeURIComponent(String(z)),Be=this.V(z);for(z=0;z<Be.length;z++){var ae=me;Be[z]!==""&&(ae+="="+encodeURIComponent(String(Be[z]))),f.push(ae)}}return this.i=f.join("&")};function Or(f,A){return A=String(A),f.j&&(A=A.toLowerCase()),A}function Ii(f,A){A&&!f.j&&(mn(f),f.i=null,f.g.forEach(function(O,z){var ae=z.toLowerCase();z!=ae&&(ai(this,z),Ya(this,ae,O))},f)),f.j=A}function Wg(f,A){const O=new Ti;if(d.Image){const z=new Image;z.onload=b(sr,O,"TestLoadImage: loaded",!0,A,z),z.onerror=b(sr,O,"TestLoadImage: error",!1,A,z),z.onabort=b(sr,O,"TestLoadImage: abort",!1,A,z),z.ontimeout=b(sr,O,"TestLoadImage: timeout",!1,A,z),d.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=f}else A(!1)}function up(f,A){const O=new Ti,z=new AbortController,ae=setTimeout(()=>{z.abort(),sr(O,"TestPingServer: timeout",!1,A)},1e4);fetch(f,{signal:z.signal}).then(me=>{clearTimeout(ae),me.ok?sr(O,"TestPingServer: ok",!0,A):sr(O,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ae),sr(O,"TestPingServer: error",!1,A)})}function sr(f,A,O,z,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),z(O)}catch(me){}}function qg(){this.g=new Fe}function hp(f,A,O){const z=O||"";try{Wa(f,function(ae,me){let Be=ae;h(ae)&&(Be=vr(ae)),A.push(z+me+"="+encodeURIComponent(Be))})}catch(ae){throw A.push(z+"type="+encodeURIComponent("_badmap")),ae}}function na(f){this.l=f.Ub||null,this.j=f.eb||!1}S(na,Qe),na.prototype.g=function(){return new Jo(this.l,this.j)},na.prototype.i=(function(f){return function(){return f}})({});function Jo(f,A){yt.call(this),this.D=f,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Jo,yt),t=Jo.prototype,t.open=function(f,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=A,this.readyState=1,ci(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(A.body=f),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pp(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function pp(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var A=f.value?f.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!f.done}))&&(this.response=this.responseText+=A)}f.done?li(this):ci(this),this.readyState==3&&pp(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,li(this))},t.Qa=function(f){this.g&&(this.response=f,li(this))},t.ga=function(){this.g&&li(this)};function li(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ci(f)}t.setRequestHeader=function(f,A){this.u.append(f,A)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],A=this.h.entries();for(var O=A.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=A.next();return f.join(`\r
`)};function ci(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ra(f){let A="";return D(f,function(O,z){A+=z,A+=":",A+=O,A+=`\r
`}),A}function Ja(f,A,O){e:{for(z in O){var z=!1;break e}z=!0}z||(O=ra(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):cs(f,A,O))}function bs(f){yt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(bs,yt);var Kg=/^https?$/i,Ud=["POST","PUT"];t=bs.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,A,O,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);A=A?A.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?vt(this.o):vt(ri),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(A,String(f),!0),this.B=!1}catch(me){Zo(this,me);return}if(f=O||"",O=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ae in z)O.set(ae,z[ae]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const me of z.keys())O.set(me,z.get(me));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(O.keys()).find(me=>me.toLowerCase()=="content-type"),ae=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ud,A,void 0))||z||ae||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Be]of O)this.g.setRequestHeader(me,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oc(this),this.u=!0,this.g.send(f),this.u=!1}catch(me){Zo(this,me)}};function Zo(f,A){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=A,f.m=5,ac(f),Sr(f)}function ac(f){f.A||(f.A=!0,Ut(f,"complete"),Ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ut(this,"complete"),Ut(this,"abort"),Sr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),bs.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zd(this):this.bb())},t.bb=function(){zd(this)};function zd(f){if(f.h&&typeof l!="undefined"&&(!f.v[1]||nr(f)!=4||f.Z()!=2)){if(f.u&&nr(f)==4)An(f.Ea,0,f);else if(Ut(f,"readystatechange"),nr(f)==4){f.h=!1;try{const Be=f.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var O;if(!(O=A)){var z;if(z=Be===0){var ae=String(f.D).match(Xo)[1]||null;!ae&&d.self&&d.self.location&&(ae=d.self.location.protocol.slice(0,-1)),z=!Kg.test(ae?ae.toLowerCase():"")}O=z}if(O)Ut(f,"complete"),Ut(f,"success");else{f.m=6;try{var me=2<nr(f)?f.g.statusText:""}catch(os){me=""}f.l=me+" ["+f.Z()+"]",ac(f)}}finally{Sr(f)}}}}function Sr(f,A){if(f.g){oc(f);const O=f.g,z=f.v[0]?()=>{}:null;f.g=null,f.v=null,A||Ut(f,"ready");try{O.onreadystatechange=z}catch(ae){}}}function oc(f){f.I&&(d.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function nr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var A=this.g.responseText;return f&&A.indexOf(f)==0&&(A=A.substring(f.length)),ue(A)}};function Hd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(A){return null}}function lc(f){const A={};f=(f.g&&2<=nr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<f.length;z++){if(M(f[z]))continue;var O=R(f[z]);const ae=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const me=A[ae]||[];A[ae]=me,me.push(O)}C(A,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(f,A,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||A}function Gd(f){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ri("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ri("baseRetryDelayMs",5e3,f),this.cb=Ri("retryDelaySeedMs",1e4,f),this.Wa=Ri("forwardChannelMaxRetries",2,f),this.wa=Ri("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Qo(f&&f.concurrentRequestLimit),this.Da=new qg,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gd.prototype,t.la=8,t.G=1,t.connect=function(f,A,O,z){ks(0),this.W=f,this.H=A||{},O&&z!==void 0&&(this.H.OSID=O,this.H.OAID=z),this.F=this.X,this.I=xp(this,null,this.W),Pi(this)};function fn(f){if(cc(f),f.G==3){var A=f.U++,O=jr(f.I);if(cs(O,"SID",f.K),cs(O,"RID",A),cs(O,"TYPE","terminate"),ia(f,O),A=new ii(f,f.j,A),A.L=2,A.v=Qa(jr(O)),O=!1,d.navigator&&d.navigator.sendBeacon)try{O=d.navigator.sendBeacon(A.v.toString(),"")}catch(z){}!O&&d.Image&&(new Image().src=A.v,O=!0),O||(A.g=yp(A.j,null),A.g.ea(A.v)),A.F=Date.now(),hs(A)}gp(f)}function di(f){f.g&&(Wd(f),f.g.cancel(),f.g=null)}function cc(f){di(f),f.u&&(d.clearTimeout(f.u),f.u=null),hc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function Pi(f){if(!wr(f.h)&&!f.s){f.s=!0;var A=f.Ga;K||ne(),G||(K(),G=!0),se.add(A,f),f.B=0}}function Qg(f,A){return rp(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=A.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=tr(v(f.Ga,f,A),fp(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ae=new ii(this,this.j,f);let me=this.o;if(this.S&&(me?(me=w(me),F(me,this.S)):me=this.S),this.m!==null||this.O||(ae.H=me,me=null),this.P)e:{for(var A=0,O=0;O<this.i.length;O++){t:{var z=this.i[O];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(A+=z,4096<A){A=O;break e}if(A===4096||O===this.i.length-1){A=O+1;break e}}A=1e3}else A=1e3;A=Za(this,ae,A),O=jr(this.I),cs(O,"RID",f),cs(O,"CVER",22),this.D&&cs(O,"X-HTTP-Session-Id",this.D),ia(this,O),me&&(this.O?A="headers="+encodeURIComponent(String(ra(me)))+"&"+A:this.m&&Ja(O,this.m,me)),Od(this.h,ae),this.Ua&&cs(O,"TYPE","init"),this.P?(cs(O,"$req",A),cs(O,"SID","null"),ae.T=!0,sc(ae,O,null)):sc(ae,O,A),this.G=2}}else this.G==3&&(f?dc(this,f):this.i.length==0||wr(this.h)||dc(this))};function dc(f,A){var O;A?O=A.l:O=f.U++;const z=jr(f.I);cs(z,"SID",f.K),cs(z,"RID",O),cs(z,"AID",f.T),ia(f,z),f.m&&f.o&&Ja(z,f.m,f.o),O=new ii(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),A&&(f.i=A.D.concat(f.i)),A=Za(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Od(f.h,O),sc(O,z,A)}function ia(f,A){f.H&&D(f.H,function(O,z){cs(A,z,O)}),f.l&&Wa({},function(O,z){cs(A,z,O)})}function Za(f,A,O){O=Math.min(f.i.length,O);var z=f.l?v(f.l.Na,f.l,f):null;e:{var ae=f.i;let me=-1;for(;;){const Be=["count="+O];me==-1?0<O?(me=ae[0].g,Be.push("ofs="+me)):me=0:Be.push("ofs="+me);let os=!0;for(let Zs=0;Zs<O;Zs++){let qt=ae[Zs].g;const rn=ae[Zs].map;if(qt-=me,0>qt)me=Math.max(0,ae[Zs].g-100),os=!1;else try{hp(rn,Be,"req"+qt+"_")}catch(Us){z&&z(rn)}}if(os){z=Be.join("&");break e}}}return f=f.i.splice(0,O),A.D=f,z}function el(f){if(!f.g&&!f.u){f.Y=1;var A=f.Fa;K||ne(),G||(K(),G=!0),se.add(A,f),f.v=0}}function uc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=tr(v(f.Fa,f),fp(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,mp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=tr(v(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ks(10),di(this),mp(this))};function Wd(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function mp(f){f.g=new ii(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var A=jr(f.qa);cs(A,"RID","rpc"),cs(A,"SID",f.K),cs(A,"AID",f.T),cs(A,"CI",f.F?"0":"1"),!f.F&&f.ja&&cs(A,"TO",f.ja),cs(A,"TYPE","xmlhttp"),ia(f,A),f.m&&f.o&&Ja(A,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=Qa(jr(A)),O.m=null,O.P=!0,Bd(O,f)}t.Za=function(){this.C!=null&&(this.C=null,di(this),uc(this),ks(19))};function hc(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function pc(f,A){var O=null;if(f.g==A){hc(f),Wd(f),f.g=null;var z=2}else if(Hn(f.h,A))O=A.D,ip(f.h,A),z=1;else return;if(f.G!=0){if(A.o)if(z==1){O=A.m?A.m.length:0,A=Date.now()-A.F;var ae=f.B;z=br(),Ut(z,new ea(z,O)),Pi(f)}else el(f);else if(ae=A.s,ae==3||ae==0&&0<A.X||!(z==1&&Qg(f,A)||z==2&&uc(f)))switch(O&&0<O.length&&(A=f.h,A.i=A.i.concat(O)),ae){case 1:aa(f,5);break;case 4:aa(f,10);break;case 3:aa(f,6);break;default:aa(f,2)}}}function fp(f,A){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*A}function aa(f,A){if(f.j.info("Error code "+A),A==2){var O=v(f.fb,f),z=f.Xa;const ae=!z;z=new sa(z||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Yo(z,"https"),Qa(z),ae?Wg(z.toString(),O):up(z.toString(),O)}else ks(2);f.G=0,f.l&&f.l.sa(A),gp(f),cc(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ks(2)):(this.j.info("Failed to ping google.com"),ks(1))};function gp(f){if(f.G=0,f.ka=[],f.l){const A=ap(f.h);(A.length!=0||f.i.length!=0)&&(E(f.ka,A),E(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function xp(f,A,O){var z=O instanceof sa?jr(O):new sa(O);if(z.g!="")A&&(z.g=A+"."+z.g),qa(z,z.s);else{var ae=d.location;z=ae.protocol,A=A?A+"."+ae.hostname:ae.hostname,ae=+ae.port;var me=new sa(null);z&&Yo(me,z),A&&(me.g=A),ae&&qa(me,ae),O&&(me.l=O),z=me}return O=f.D,A=f.ya,O&&A&&cs(z,O,A),cs(z,"VER",f.la),ia(f,z),z}function yp(f,A,O){if(A&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=f.Ca&&!f.pa?new bs(new na({eb:O})):new bs(f.pa),A.Ha(f.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qd(){}t=qd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mc(){}mc.prototype.g=function(f,A){return new Gn(f,A)};function Gn(f,A){yt.call(this),this.g=new Gd(A),this.l=f,this.h=A&&A.messageUrlParams||null,f=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(f?f["X-WebChannel-Content-Type"]=A.messageContentType:f={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(f?f["X-WebChannel-Client-Profile"]=A.va:f={"X-WebChannel-Client-Profile":A.va}),this.g.S=f,(f=A&&A.Sb)&&!M(f)&&(this.g.m=f),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!M(A)&&(this.g.D=A,f=this.h,f!==null&&A in f&&(f=this.h,A in f&&delete f[A])),this.j=new Li(this)}S(Gn,yt),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){fn(this.g)},Gn.prototype.o=function(f){var A=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=vr(f),f=O);A.i.push(new np(A.Ya++,f)),A.G==3&&Pi(A)},Gn.prototype.N=function(){this.g.l=null,delete this.j,fn(this.g),delete this.g,Gn.aa.N.call(this)};function vp(f){Jt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var A=f.__sm__;if(A){e:{for(const O in A){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,A=A!==null&&f in A?A[f]:void 0),this.data=A}else this.data=f}S(vp,Jt);function bp(){as.call(this),this.status=1}S(bp,as);function Li(f){this.g=f}S(Li,qd),Li.prototype.ua=function(){Ut(this.g,"a")},Li.prototype.ta=function(f){Ut(this.g,new vp(f))},Li.prototype.sa=function(f){Ut(this.g,new bp)},Li.prototype.ra=function(){Ut(this.g,"b")},mc.prototype.createWebChannel=mc.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,mT=function(){return new mc},pT=function(){return br()},hT=Js,Wv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,Jm=ns,Zh.COMPLETE="complete",uT=Zh,rt.EventType=_t,_t.OPEN="a",_t.CLOSE="b",_t.ERROR="c",_t.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Iu=rt,bs.prototype.listenOnce=bs.prototype.L,bs.prototype.getLastError=bs.prototype.Ka,bs.prototype.getLastErrorCode=bs.prototype.Ba,bs.prototype.getStatus=bs.prototype.Z,bs.prototype.getResponseJson=bs.prototype.Oa,bs.prototype.getResponseText=bs.prototype.oa,bs.prototype.send=bs.prototype.ea,bs.prototype.setWithCredentials=bs.prototype.Ha,dT=bs}).apply(typeof xm!="undefined"?xm:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const Z2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new X0("@firebase/firestore");function bu(){return Ol.logLevel}function Je(t,...e){if(Ol.logLevel<=Gt.DEBUG){const s=e.map(l1);Ol.debug(`Firestore (${Ed}): ${t}`,...s)}}function Ma(t,...e){if(Ol.logLevel<=Gt.ERROR){const s=e.map(l1);Ol.error(`Firestore (${Ed}): ${t}`,...s)}}function dd(t,...e){if(Ol.logLevel<=Gt.WARN){const s=e.map(l1);Ol.warn(`Firestore (${Ed}): ${t}`,...s)}}function l1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t="Unexpected state"){const e=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: `+t;throw Ma(e),new Error(e)}function ls(t,e){t||xt()}function St(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends za{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(Fn.UNAUTHENTICATED)))}shutdown(){}}class k9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class C9{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){ls(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,s(u)):Promise.resolve();let a=new Aa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Aa,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},d=u=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((u=>d(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Aa)}}),0),l()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ls(typeof r.accessToken=="string"),new fT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ls(e===null||typeof e=="string"),new Fn(e)}}class T9{constructor(e,s,r){this.l=e,this.h=s,this.P=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class E9{constructor(e,s,r){this.l=e,this.h=s,this.P=r}getToken(){return Promise.resolve(new T9(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable((()=>s(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){ls(this.o===void 0);const r=a=>{a.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,Je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(ls(typeof s.token=="string"),this.R=s.token,new A9(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=R9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<s&&(r+=e.charAt(i[a]%e.length))}return r}}function ss(t,e){return t<e?-1:t>e?1:0}function ud(t,e,s){return t.length===e.length&&t.every(((r,i)=>s(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fs.fromMillis(Date.now())}static fromDate(e){return Fs.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*s));return new Fs(s,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ss(this.nanoseconds,e.nanoseconds):ss(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new Fs(0,0))}static max(){return new jt(new Fs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,s,r){s===void 0?s=0:s>e.length&&xt(),r===void 0?r=e.length-s:r>e.length-s&&xt(),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return uh.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof uh?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const a=e.get(i),l=s.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class us extends uh{construct(e,s,r){return new us(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new us(s)}static emptyPath(){return new us([])}}const P9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends uh{construct(e,s,r){return new Sn(e,s,r)}static isValidIdentifier(e){return P9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sn(["__name__"])}static fromServerFormat(e){const s=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Oe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Oe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Oe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(s)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(us.fromString(e))}static fromName(e){return new nt(us.fromString(e).popFirst(5))}static empty(){return new nt(us.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&us.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return us.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new us(e.slice()))}}function L9(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(r===1e9?new Fs(s+1,0):new Fs(s,r));return new Fo(i,nt.empty(),e)}function D9(t){return new Fo(t.readTime,t.key,-1)}class Fo{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Fo(jt.min(),nt.empty(),-1)}static max(){return new Fo(jt.max(),nt.empty(),-1)}}function M9(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=nt.comparator(t.documentKey,e.documentKey),s!==0?s:ss(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==F9)throw t;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new Te(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(s,a).next(r,i)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof Te?s:Te.resolve(s)}catch(s){return Te.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):Te.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):Te.reject(s)}static resolve(e){return new Te(((s,r)=>{s(e)}))}static reject(e){return new Te(((s,r)=>{r(e)}))}static waitFor(e){return new Te(((s,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&s()}),(u=>r(u)))})),l=!0,a===i&&s()}))}static or(e){let s=Te.resolve(!1);for(const r of e)s=s.next((i=>i?Te.resolve(i):r()));return s}static forEach(e,s){const r=[];return e.forEach(((i,a)=>{r.push(s.call(this,i,a))})),this.waitFor(r)}static mapArray(e,s){return new Te(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let u=0;u<a;u++){const h=u;s(e[h]).next((p=>{l[h]=p,++d,d===a&&r(l)}),(p=>i(p)))}}))}static doWhile(e,s){return new Te(((r,i)=>{const a=()=>{e()===!0?s().next((()=>{a()}),i):r()};a()}))}}function $9(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Dh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ie(r),this.se=r=>s.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}c1.oe=-1;function hg(t){return t==null}function Nf(t){return t===0&&1/t==-1/0}function O9(t){return typeof t=="number"&&Number.isInteger(t)&&!Nf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Ql(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function xT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,s){this.comparator=e,this.root=s||_n.EMPTY}insert(e,s){return new Is(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return s+r.left.size;i<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ym(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ym(this.root,e,this.comparator,!1)}getReverseIterator(){return new ym(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ym(this.root,e,this.comparator,!0)}}class ym{constructor(e,s,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=s?r(e.key,s):1,s&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,s,r,i,a){this.key=e,this.value=s,this.color=r!=null?r:_n.RED,this.left=i!=null?i:_n.EMPTY,this.right=a!=null?a:_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,i,a){return new _n(e!=null?e:this.key,s!=null?s:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,s,r),null):a===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,s,r,i,a){return this}insert(e,s,r){return new _n(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.comparator=e,this.data=new Is(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new tj(this.data.getIterator())}getIteratorFrom(e){return new tj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new kn(this.comparator);return s.data=e,s}}class tj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new Pr([])}unionWith(e){let s=new kn(Sn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Pr(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return ud(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new yT("Invalid base64 string: "+a):a}})(e);return new Tn(s)}static fromUint8Array(e){const s=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new Tn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ss(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const V9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(t){if(ls(!!t),typeof t=="string"){let e=0;const s=V9.exec(t);if(ls(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vs(t.seconds),nanos:Vs(t.nanos)}}function Vs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vl(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function d1(t){const e=t.mapValue.fields.__previous_value__;return pg(e)?d1(e):e}function hh(t){const e=Bo(t.mapValue.fields.__local_write_time__.timestampValue);return new Fs(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,s,r,i,a,l,d,u,h){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h}}class ph{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new ph("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ph&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm={mapValue:{}};function Ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pg(t)?4:H9(t)?9007199254740991:z9(t)?10:11:xt()}function Ji(t,e){if(t===e)return!0;const s=Ul(t);if(s!==Ul(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hh(t).isEqual(hh(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Bo(i.timestampValue),d=Bo(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Vl(i.bytesValue).isEqual(Vl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Vs(i.geoPointValue.latitude)===Vs(a.geoPointValue.latitude)&&Vs(i.geoPointValue.longitude)===Vs(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Vs(i.integerValue)===Vs(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Vs(i.doubleValue),d=Vs(a.doubleValue);return l===d?Nf(l)===Nf(d):isNaN(l)&&isNaN(d)}return!1})(t,e);case 9:return ud(t.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(ej(l)!==ej(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!Ji(l[u],d[u])))return!1;return!0})(t,e);default:return xt()}}function mh(t,e){return(t.values||[]).find((s=>Ji(s,e)))!==void 0}function hd(t,e){if(t===e)return 0;const s=Ul(t),r=Ul(e);if(s!==r)return ss(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return ss(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Vs(a.integerValue||a.doubleValue),u=Vs(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1})(t,e);case 3:return sj(t.timestampValue,e.timestampValue);case 4:return sj(hh(t),hh(e));case 5:return ss(t.stringValue,e.stringValue);case 6:return(function(a,l){const d=Vl(a),u=Vl(l);return d.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),u=l.split("/");for(let h=0;h<d.length&&h<u.length;h++){const p=ss(d[h],u[h]);if(p!==0)return p}return ss(d.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=ss(Vs(a.latitude),Vs(l.latitude));return d!==0?d:ss(Vs(a.longitude),Vs(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return nj(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,u,h,p;const g=a.fields||{},v=l.fields||{},b=(d=g.value)===null||d===void 0?void 0:d.arrayValue,S=(u=v.value)===null||u===void 0?void 0:u.arrayValue,k=ss(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:nj(b,S)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===vm.mapValue&&l===vm.mapValue)return 0;if(a===vm.mapValue)return 1;if(l===vm.mapValue)return-1;const d=a.fields||{},u=Object.keys(d),h=l.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const v=ss(u[g],p[g]);if(v!==0)return v;const b=hd(d[u[g]],h[p[g]]);if(b!==0)return b}return ss(u.length,p.length)})(t.mapValue,e.mapValue);default:throw xt()}}function sj(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ss(t,e);const s=Bo(t),r=Bo(e),i=ss(s.seconds,r.seconds);return i!==0?i:ss(s.nanos,r.nanos)}function nj(t,e){const s=t.values||[],r=e.values||[];for(let i=0;i<s.length&&i<r.length;++i){const a=hd(s[i],r[i]);if(a)return a}return ss(s.length,r.length)}function pd(t){return qv(t)}function qv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(s){const r=Bo(s);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(s){return Vl(s).toBase64()})(t.bytesValue):"referenceValue"in t?(function(s){return nt.fromName(s).toString()})(t.referenceValue):"geoPointValue"in t?(function(s){return`geo(${s.latitude},${s.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(s){let r="[",i=!0;for(const a of s.values||[])i?i=!1:r+=",",r+=qv(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(s){const r=Object.keys(s.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${qv(s.fields[l])}`;return i+"}"})(t.mapValue):xt()}function kf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kv(t){return!!t&&"integerValue"in t}function u1(t){return!!t&&"arrayValue"in t}function rj(t){return!!t&&"nullValue"in t}function ij(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zm(t){return!!t&&"mapValue"in t}function z9(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function Hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ql(t.mapValue.fields,((s,r)=>e.mapValue.fields[s]=Hu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Hu(t.arrayValue.values[s]);return e}return Object.assign({},t)}function H9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!Zm(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(s)}setAll(e){let s=Sn.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,r,i),r={},i=[],s=d.popLast()}l?r[d.lastSegment()]=Hu(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(s);this.applyChanges(a,r,i)}delete(e){const s=this.field(e.popLast());Zm(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=s.mapValue.fields[e.get(r)];Zm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,r){Ql(s,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new fr(Hu(this.value))}}function vT(t){const e=[];return Ql(t.fields,((s,r)=>{const i=new Sn([s]);if(Zm(r)){const a=vT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,s,r,i,a,l,d){this.key=e,this.documentType=s,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new $n(e,0,jt.min(),jt.min(),jt.min(),fr.empty(),0)}static newFoundDocument(e,s,r,i){return new $n(e,1,s,jt.min(),r,i,0)}static newNoDocument(e,s){return new $n(e,2,s,jt.min(),jt.min(),fr.empty(),0)}static newUnknownDocument(e,s){return new $n(e,3,s,jt.min(),jt.min(),fr.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,s){this.position=e,this.inclusive=s}}function aj(t,e,s){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=nt.comparator(nt.fromName(l.referenceValue),s.key):r=hd(l,s.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function oj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Ji(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,s="asc"){this.field=e,this.dir=s}}function G9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{}class Qs extends bT{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new q9(e,s,r):s==="array-contains"?new X9(e,r):s==="in"?new Y9(e,r):s==="not-in"?new J9(e,r):s==="array-contains-any"?new Z9(e,r):new Qs(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new K9(e,r):new Q9(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(hd(s,this.value)):s!==null&&Ul(this.value)===Ul(s)&&this.matchesComparison(hd(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends bT{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new Si(e,s)}matches(e){return _T(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _T(t){return t.op==="and"}function wT(t){return W9(t)&&_T(t)}function W9(t){for(const e of t.filters)if(e instanceof Si)return!1;return!0}function Qv(t){if(t instanceof Qs)return t.field.canonicalString()+t.op.toString()+pd(t.value);if(wT(t))return t.filters.map((e=>Qv(e))).join(",");{const e=t.filters.map((s=>Qv(s))).join(",");return`${t.op}(${e})`}}function jT(t,e){return t instanceof Qs?(function(r,i){return i instanceof Qs&&r.op===i.op&&r.field.isEqual(i.field)&&Ji(r.value,i.value)})(t,e):t instanceof Si?(function(r,i){return i instanceof Si&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&jT(l,i.filters[d])),!0):!1})(t,e):void xt()}function ST(t){return t instanceof Qs?(function(s){return`${s.field.canonicalString()} ${s.op} ${pd(s.value)}`})(t):t instanceof Si?(function(s){return s.op.toString()+" {"+s.getFilters().map(ST).join(" ,")+"}"})(t):"Filter"}class q9 extends Qs{constructor(e,s,r){super(e,s,r),this.key=nt.fromName(r.referenceValue)}matches(e){const s=nt.comparator(e.key,this.key);return this.matchesComparison(s)}}class K9 extends Qs{constructor(e,s){super(e,"in",s),this.keys=NT("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class Q9 extends Qs{constructor(e,s){super(e,"not-in",s),this.keys=NT("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function NT(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map((r=>nt.fromName(r.referenceValue)))}class X9 extends Qs{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return u1(s)&&mh(s.arrayValue,this.value)}}class Y9 extends Qs{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&mh(this.value.arrayValue,s)}}class J9 extends Qs{constructor(e,s){super(e,"not-in",s)}matches(e){if(mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!mh(this.value.arrayValue,s)}}class Z9 extends Qs{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!u1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>mh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,s=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function lj(t,e=null,s=[],r=[],i=null,a=null,l=null){return new e7(t,e,s,r,i,a,l)}function h1(t){const e=St(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Qv(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),hg(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>pd(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>pd(r))).join(",")),e.ue=s}return e.ue}function p1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!G9(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!jT(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oj(t.startAt,e.startAt)&&oj(t.endAt,e.endAt)}function Xv(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,s=null,r=[],i=[],a=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function t7(t,e,s,r,i,a,l,d){return new Ha(t,e,s,r,i,a,l,d)}function m1(t){return new Ha(t)}function cj(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f1(t){return t.collectionGroup!==null}function rd(t){const e=St(t);if(e.ce===null){e.ce=[];const s=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),s.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new kn(Sn.comparator);return l.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{s.has(a.canonicalString())||a.isKeyField()||e.ce.push(new fh(a,r))})),s.has(Sn.keyField().canonicalString())||e.ce.push(new fh(Sn.keyField(),r))}return e.ce}function Wi(t){const e=St(t);return e.le||(e.le=s7(e,rd(t))),e.le}function s7(t,e){if(t.limitType==="F")return lj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new fh(i.field,a)}));const s=t.endAt?new md(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new md(t.startAt.position,t.startAt.inclusive):null;return lj(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function Yv(t,e){const s=t.filters.concat([e]);return new Ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Cf(t,e,s){return new Ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function mg(t,e){return p1(Wi(t),Wi(e))&&t.limitType===e.limitType}function kT(t){return`${h1(Wi(t))}|lt:${t.limitType}`}function zc(t){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((i=>ST(i))).join(", ")}]`),hg(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((i=>pd(i))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((i=>pd(i))).join(",")),`Target(${r})`})(Wi(t))}; limitType=${t.limitType})`}function fg(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):nt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of rd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,u){const h=aj(l,d,u);return l.inclusive?h<=0:h<0})(r.startAt,rd(r),i)||r.endAt&&!(function(l,d,u){const h=aj(l,d,u);return l.inclusive?h>=0:h>0})(r.endAt,rd(r),i))})(t,e)}function n7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CT(t){return(e,s)=>{let r=!1;for(const i of rd(t)){const a=r7(i,e,s);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function r7(t,e,s){const r=t.field.isKeyField()?nt.comparator(e.key,s.key):(function(a,l,d){const u=l.data.field(a),h=d.data.field(a);return u!==null&&h!==null?hd(u,h):xt()})(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[s]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ql(this.inner,((s,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return xT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=new Is(nt.comparator);function Fa(){return i7}const TT=new Is(nt.comparator);function Ru(...t){let e=TT;for(const s of t)e=e.insert(s.key,s);return e}function ET(t){let e=TT;return t.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function El(){return Gu()}function AT(){return Gu()}function Gu(){return new Ad((t=>t.toString()),((t,e)=>t.isEqual(e)))}const a7=new Is(nt.comparator),o7=new kn(nt.comparator);function Ot(...t){let e=o7;for(const s of t)e=e.add(s);return e}const l7=new kn(ss);function c7(){return l7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function IT(t){return{integerValue:""+t}}function d7(t,e){return O9(e)?IT(e):g1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this._=void 0}}function u7(t,e,s){return t instanceof gh?(function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&pg(a)&&(a=d1(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(s,e):t instanceof xh?PT(t,e):t instanceof yh?LT(t,e):(function(i,a){const l=RT(i,a),d=dj(l)+dj(i.Pe);return Kv(l)&&Kv(i.Pe)?IT(d):g1(i.serializer,d)})(t,e)}function h7(t,e,s){return t instanceof xh?PT(t,e):t instanceof yh?LT(t,e):s}function RT(t,e){return t instanceof Tf?(function(r){return Kv(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class gh extends gg{}class xh extends gg{constructor(e){super(),this.elements=e}}function PT(t,e){const s=DT(e);for(const r of t.elements)s.some((i=>Ji(i,r)))||s.push(r);return{arrayValue:{values:s}}}class yh extends gg{constructor(e){super(),this.elements=e}}function LT(t,e){let s=DT(e);for(const r of t.elements)s=s.filter((i=>!Ji(i,r)));return{arrayValue:{values:s}}}class Tf extends gg{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function dj(t){return Vs(t.integerValue||t.doubleValue)}function DT(t){return u1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,s){this.field=e,this.transform=s}}function m7(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof xh&&i instanceof xh||r instanceof yh&&i instanceof yh?ud(r.elements,i.elements,Ji):r instanceof Tf&&i instanceof Tf?Ji(r.Pe,i.Pe):r instanceof gh&&i instanceof gh})(t.transform,e.transform)}class f7{constructor(e,s){this.version=e,this.transformResults=s}}class ei{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xg{}function MT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new x1(t.key,ei.none()):new Mh(t.key,t.data,ei.none());{const s=t.data,r=fr.empty();let i=new kn(Sn.comparator);for(let a of e.fields)if(!i.has(a)){let l=s.field(a);l===null&&a.length>1&&(a=a.popLast(),l=s.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Uo(t.key,r,new Pr(i.toArray()),ei.none())}}function g7(t,e,s){t instanceof Mh?(function(i,a,l){const d=i.value.clone(),u=hj(i.fieldTransforms,a,l.transformResults);d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,s):t instanceof Uo?(function(i,a,l){if(!ef(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=hj(i.fieldTransforms,a,l.transformResults),u=a.data;u.setAll(FT(i)),u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,s):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,s)}function Wu(t,e,s,r){return t instanceof Mh?(function(a,l,d,u){if(!ef(a.precondition,l))return d;const h=a.value.clone(),p=pj(a.fieldTransforms,u,l);return h.setAll(p),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,s,r):t instanceof Uo?(function(a,l,d,u){if(!ef(a.precondition,l))return d;const h=pj(a.fieldTransforms,u,l),p=l.data;return p.setAll(FT(a)),p.setAll(h),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,s,r):(function(a,l,d){return ef(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(t,e,s)}function x7(t,e){let s=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=RT(r.transform,i||null);a!=null&&(s===null&&(s=fr.empty()),s.set(r.field,a))}return s||null}function uj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ud(r,i,((a,l)=>m7(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mh extends xg{constructor(e,s,r,i=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Uo extends xg{constructor(e,s,r,i,a=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function FT(t){const e=new Map;return t.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}})),e}function hj(t,e,s){const r=new Map;ls(t.length===s.length);for(let i=0;i<s.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,h7(l,d,s[i]))}return r}function pj(t,e,s){const r=new Map;for(const i of t){const a=i.transform,l=s.data.field(i.field);r.set(i.field,u7(a,l,e))}return r}class x1 extends xg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y7 extends xg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e,s,r,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&g7(a,e,r[i])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Wu(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Wu(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=AT();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=s.has(i.key)?null:d;const u=MT(l,d);u!==null&&r.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(jt.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),Ot())}isEqual(e){return this.batchId===e.batchId&&ud(this.mutations,e.mutations,((s,r)=>uj(s,r)))&&ud(this.baseMutations,e.baseMutations,((s,r)=>uj(s,r)))}}class y1{constructor(e,s,r,i){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=i}static from(e,s,r){ls(e.mutations.length===r.length);let i=(function(){return a7})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new y1(e,s,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs,Kt;function w7(t){switch(t){default:return xt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function BT(t){if(t===void 0)return Ma("GRPC error has no .code"),ye.UNKNOWN;switch(t){case Gs.OK:return ye.OK;case Gs.CANCELLED:return ye.CANCELLED;case Gs.UNKNOWN:return ye.UNKNOWN;case Gs.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Gs.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Gs.INTERNAL:return ye.INTERNAL;case Gs.UNAVAILABLE:return ye.UNAVAILABLE;case Gs.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Gs.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Gs.NOT_FOUND:return ye.NOT_FOUND;case Gs.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Gs.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Gs.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Gs.ABORTED:return ye.ABORTED;case Gs.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Gs.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Gs.DATA_LOSS:return ye.DATA_LOSS;default:return xt()}}(Kt=Gs||(Gs={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=new Ll([4294967295,4294967295],0);function mj(t){const e=j7().encode(t),s=new cT;return s.update(e),new Uint8Array(s.digest())}function fj(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ll([s,r],0),new Ll([i,a],0)]}class v1{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Pu(`Invalid padding: ${s}`);if(r<0)throw new Pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=Ll.fromNumber(this.Ie)}Ee(e,s,r){let i=e.add(s.multiply(Ll.fromNumber(r)));return i.compare(S7)===1&&(i=new Ll([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=mj(e),[r,i]=fj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);if(!this.de(l))return!1}return!0}static create(e,s,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new v1(a,i,s);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.Ie===0)return;const s=mj(e),[r,i]=fj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);this.Ae(l)}}Ae(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,s,r,i,a){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const i=new Map;return i.set(e,Fh.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new yg(jt.min(),i,new Is(ss),Fa(),Ot())}}class Fh{constructor(e,s,r,i,a){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new Fh(r,s,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,s,r,i){this.Re=e,this.removedTargetIds=s,this.key=r,this.Ve=i}}class $T{constructor(e,s){this.targetId=e,this.me=s}}class OT{constructor(e,s,r=Tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=i}}class gj{constructor(){this.fe=0,this.ge=yj(),this.pe=Tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ot(),s=Ot(),r=Ot();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:r=r.add(i);break;default:xt()}})),new Fh(this.pe,this.ye,e,s,r)}Ce(){this.we=!1,this.ge=yj()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ls(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fa(),this.qe=xj(),this.Qe=new Is(ss)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,(s=>{const r=this.Ge(s);switch(e.state){case 0:this.ze(s)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),r.De(e.resumeToken));break;default:xt()}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach(((r,i)=>{this.ze(i)&&s(i)}))}He(e){const s=e.targetId,r=e.me.count,i=this.Je(s);if(i){const a=i.target;if(Xv(a))if(r===0){const l=new nt(a.path);this.Ue(s,l,$n.newNoDocument(l,jt.min()))}else ls(r===1);else{const l=this.Ye(s);if(l!==r){const d=this.Ze(e),u=d?this.Xe(d,e,l):1;if(u!==0){this.je(s);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,h)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=s;let l,d;try{l=Vl(r).toUint8Array()}catch(u){if(u instanceof yT)return dd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new v1(l,i,a)}catch(u){return dd(u instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.Ie===0?null:d}Xe(e,s,r){return s.me.count===r-this.nt(e,s.targetId)?0:2}nt(e,s){const r=this.Le.getRemoteKeysForTarget(s);let i=0;return r.forEach((a=>{const l=this.Le.tt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(s,a,null),i++)})),i}rt(e){const s=new Map;this.Be.forEach(((a,l)=>{const d=this.Je(l);if(d){if(a.current&&Xv(d.target)){const u=new nt(d.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,$n.newNoDocument(u,e))}a.be&&(s.set(l,a.ve()),a.Ce())}}));let r=Ot();this.qe.forEach(((a,l)=>{let d=!0;l.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const i=new yg(e,s,this.Qe,this.ke,r);return this.ke=Fa(),this.qe=xj(),this.Qe=new Is(ss),i}$e(e,s){if(!this.ze(e))return;const r=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,r),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),r&&(this.ke=this.ke.insert(s,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new gj,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new kn(ss),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||Je("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gj),this.Le.getRemoteKeysForTarget(e).forEach((s=>{this.Ue(e,s,null)}))}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function xj(){return new Is(nt.comparator)}function yj(){return new Is(nt.comparator)}const k7={asc:"ASCENDING",desc:"DESCENDING"},C7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T7={and:"AND",or:"OR"};class E7{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Jv(t,e){return t.useProto3Json||hg(e)?e:{value:e}}function Ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function A7(t,e){return Ef(t,e.toTimestamp())}function qi(t){return ls(!!t),jt.fromTimestamp((function(s){const r=Bo(s);return new Fs(r.seconds,r.nanos)})(t))}function b1(t,e){return Zv(t,e).canonicalString()}function Zv(t,e){const s=(function(i){return new us(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?s:s.child(e)}function UT(t){const e=us.fromString(t);return ls(qT(e)),e}function e0(t,e){return b1(t.databaseId,e.path)}function Ay(t,e){const s=UT(e);if(s.get(1)!==t.databaseId.projectId)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new nt(HT(s))}function zT(t,e){return b1(t.databaseId,e)}function I7(t){const e=UT(t);return e.length===4?us.emptyPath():HT(e)}function t0(t){return new us(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HT(t){return ls(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vj(t,e,s){return{name:e0(t,e),fields:s.value.mapValue.fields}}function R7(t,e){let s;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:xt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(ls(p===void 0||typeof p=="string"),Tn.fromBase64String(p||"")):(ls(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Tn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(h){const p=h.code===void 0?ye.UNKNOWN:BT(h.code);return new Oe(p,h.message||"")})(l);s=new OT(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ay(t,r.document.name),a=qi(r.document.updateTime),l=r.document.createTime?qi(r.document.createTime):jt.min(),d=new fr({mapValue:{fields:r.document.fields}}),u=$n.newFoundDocument(i,a,l,d),h=r.targetIds||[],p=r.removedTargetIds||[];s=new tf(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ay(t,r.document),a=r.readTime?qi(r.readTime):jt.min(),l=$n.newNoDocument(i,a),d=r.removedTargetIds||[];s=new tf([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ay(t,r.document),a=r.removedTargetIds||[];s=new tf([],a,i,null)}else{if(!("filter"in e))return xt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new _7(i,a),d=r.targetId;s=new $T(d,l)}}return s}function P7(t,e){let s;if(e instanceof Mh)s={update:vj(t,e.key,e.value)};else if(e instanceof x1)s={delete:e0(t,e.key)};else if(e instanceof Uo)s={update:vj(t,e.key,e.data),updateMask:U7(e.fieldMask)};else{if(!(e instanceof y7))return xt();s={verify:e0(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof gh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof yh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Tf)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw xt()})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:A7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xt()})(t,e.precondition)),s}function L7(t,e){return t&&t.length>0?(ls(e!==void 0),t.map((s=>(function(i,a){let l=i.updateTime?qi(i.updateTime):qi(a);return l.isEqual(jt.min())&&(l=qi(a)),new f7(l,i.transformResults||[])})(s,e)))):[]}function D7(t,e){return{documents:[zT(t,e.path)]}}function M7(t,e){const s={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=zT(t,i);const a=(function(h){if(h.length!==0)return WT(Si.create(h,"and"))})(e.filters);a&&(s.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((p=>(function(v){return{field:Hc(v.field),direction:$7(v.dir)}})(p)))})(e.orderBy);l&&(s.structuredQuery.orderBy=l);const d=Jv(t,e.limit);return d!==null&&(s.structuredQuery.limit=d),e.startAt&&(s.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:s,parent:i}}function F7(t){let e=I7(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let i=null;if(r>0){ls(r===1);const p=s.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];s.where&&(a=(function(g){const v=GT(g);return v instanceof Si&&wT(v)?v.getFilters():[v]})(s.where));let l=[];s.orderBy&&(l=(function(g){return g.map((v=>(function(S){return new fh(Gc(S.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v)))})(s.orderBy));let d=null;s.limit&&(d=(function(g){let v;return v=typeof g=="object"?g.value:g,hg(v)?null:v})(s.limit));let u=null;s.startAt&&(u=(function(g){const v=!!g.before,b=g.values||[];return new md(b,v)})(s.startAt));let h=null;return s.endAt&&(h=(function(g){const v=!g.before,b=g.values||[];return new md(b,v)})(s.endAt)),t7(e,i,l,a,d,"F",u,h)}function B7(t,e){const s=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function GT(t){return t.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Gc(s.unaryFilter.field);return Qs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gc(s.unaryFilter.field);return Qs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gc(s.unaryFilter.field);return Qs.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Gc(s.unaryFilter.field);return Qs.create(l,"!=",{nullValue:"NULL_VALUE"});default:return xt()}})(t):t.fieldFilter!==void 0?(function(s){return Qs.create(Gc(s.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}})(s.fieldFilter.op),s.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(s){return Si.create(s.compositeFilter.filters.map((r=>GT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt()}})(s.compositeFilter.op))})(t):xt()}function $7(t){return k7[t]}function O7(t){return C7[t]}function V7(t){return T7[t]}function Hc(t){return{fieldPath:t.canonicalString()}}function Gc(t){return Sn.fromServerFormat(t.fieldPath)}function WT(t){return t instanceof Qs?(function(s){if(s.op==="=="){if(ij(s.value))return{unaryFilter:{field:Hc(s.field),op:"IS_NAN"}};if(rj(s.value))return{unaryFilter:{field:Hc(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(ij(s.value))return{unaryFilter:{field:Hc(s.field),op:"IS_NOT_NAN"}};if(rj(s.value))return{unaryFilter:{field:Hc(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(s.field),op:O7(s.op),value:s.value}}})(t):t instanceof Si?(function(s){const r=s.getFilters().map((i=>WT(i)));return r.length===1?r[0]:{compositeFilter:{op:V7(s.op),filters:r}}})(t):xt()}function U7(t){const e=[];return t.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function qT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,s,r,i,a=jt.min(),l=jt.min(),d=Tn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.ct=e}}function H7(t){const e=F7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.un=new W7}addToCollectionParentIndex(e,s){return this.un.add(s),Te.resolve()}getCollectionParents(e,s){return Te.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return Te.resolve()}deleteFieldIndex(e,s){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,s){return Te.resolve()}getDocumentsMatchingTarget(e,s){return Te.resolve(null)}getIndexType(e,s){return Te.resolve(0)}getFieldIndexes(e,s){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,s){return Te.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,s){return Te.resolve(Fo.min())}updateCollectionGroup(e,s,r){return Te.resolve()}updateIndexEntries(e,s){return Te.resolve()}}class W7{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s]||new kn(us.comparator),a=!i.has(r);return this.index[s]=i.add(r),a}has(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kn(us.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fd(0)}static kn(){return new fd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.changes=new Ad((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?Te.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,s,r,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,s)))).next((i=>(r!==null&&Wu(r.mutation,i,Pr.empty(),Fs.now()),i)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,Ot()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=Ot()){const i=El();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,r).next((a=>{let l=Ru();return a.forEach(((d,u)=>{l=l.insert(d,u.overlayedDocument)})),l}))))}getOverlayedDocuments(e,s){const r=El();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,Ot())))}populateOverlays(e,s,r){const i=[];return r.forEach((a=>{s.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{s.set(l,d)}))}))}computeViews(e,s,r,i){let a=Fa();const l=Gu(),d=(function(){return Gu()})();return s.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Uo)?a=a.insert(h.key,h):p!==void 0?(l.set(h.key,p.mutation.getFieldMask()),Wu(p.mutation,h,p.mutation.getFieldMask(),Fs.now())):l.set(h.key,Pr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,p)=>l.set(h,p))),s.forEach(((h,p)=>{var g;return d.set(h,new K7(p,(g=l.get(h))!==null&&g!==void 0?g:null))})),d)))}recalculateAndSaveOverlays(e,s){const r=Gu();let i=new Is(((l,d)=>l-d)),a=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((l=>{for(const d of l)d.keys().forEach((u=>{const h=s.get(u);if(h===null)return;let p=r.get(u)||Pr.empty();p=d.applyToLocalView(h,p),r.set(u,p);const g=(i.get(d.batchId)||Ot()).add(u);i=i.insert(d.batchId,g)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,p=u.value,g=AT();p.forEach((v=>{if(!a.has(v)){const b=MT(s.get(v),r.get(v));b!==null&&g.set(v,b),a=a.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,g))}return Te.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,i){return(function(l){return nt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):f1(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,i):this.getDocumentsMatchingCollectionQuery(e,s,r,i)}getNextDocuments(e,s,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,i-a.size):Te.resolve(El());let d=-1,u=a;return l.next((h=>Te.forEach(h,((p,g)=>(d<g.largestBatchId&&(d=g.largestBatchId),a.get(p)?Te.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{u=u.insert(p,v)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,Ot()))).next((p=>({batchId:d,changes:ET(p)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new nt(s)).next((r=>{let i=Ru();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,i){const a=s.collectionGroup;let l=Ru();return this.indexManager.getCollectionParents(e,a).next((d=>Te.forEach(d,(u=>{const h=(function(g,v){return new Ha(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(s,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,v)=>{l=l.insert(g,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,s,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,a,i)))).next((l=>{a.forEach(((u,h)=>{const p=h.getKey();l.get(p)===null&&(l=l.insert(p,$n.newInvalidDocument(p)))}));let d=Ru();return l.forEach(((u,h)=>{const p=a.get(u);p!==void 0&&Wu(p.mutation,h,Pr.empty(),Fs.now()),fg(s,h)&&(d=d.insert(u,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return Te.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,(function(i){return{id:i.id,version:i.version,createTime:qi(i.createTime)}})(s)),Te.resolve()}getNamedQuery(e,s){return Te.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,(function(i){return{name:i.name,query:H7(i.bundledQuery),readTime:qi(i.readTime)}})(s)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.overlays=new Is(nt.comparator),this.Ir=new Map}getOverlay(e,s){return Te.resolve(this.overlays.get(s))}getOverlays(e,s){const r=El();return Te.forEach(s,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((i,a)=>{this.ht(e,s,a)})),Te.resolve()}removeOverlaysForBatchId(e,s,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),Te.resolve()}getOverlaysForCollection(e,s,r){const i=El(),a=s.length+1,l=new nt(s.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!s.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,s,r,i){let a=new Is(((h,p)=>h-p));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===s&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=El(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const d=El(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>d.set(h,p))),!(d.size()>=i)););return Te.resolve(d)}ht(e,s,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new b7(s,r));let a=this.Ir.get(s);a===void 0&&(a=Ot(),this.Ir.set(s,a)),this.Ir.set(s,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.Tr=new kn(dn.Er),this.dr=new kn(dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const r=new dn(e,s);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Vr(new dn(e,s))}mr(e,s){e.forEach((r=>this.removeReference(r,s)))}gr(e){const s=new nt(new us([])),r=new dn(s,e),i=new dn(s,e+1),a=[];return this.dr.forEachInRange([r,i],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new nt(new us([])),r=new dn(s,e),i=new dn(s,e+1);let a=Ot();return this.dr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const s=new dn(e,0),r=this.Tr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return nt.comparator(e.key,s.key)||ss(e.wr,s.wr)}static Ar(e,s){return ss(e.wr,s.wr)||nt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new kn(dn.Er)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new v7(a,s,r,i);this.mutationQueue.push(l);for(const d of i)this.br=this.br.add(new dn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Te.resolve(l)}lookupMutationBatch(e,s){return Te.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,i=this.vr(r),a=i<0?0:i;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new dn(s,0),i=new dn(s,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(l=>{const d=this.Dr(l.wr);a.push(d)})),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new kn(ss);return s.forEach((i=>{const a=new dn(i,0),l=new dn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(d=>{r=r.add(d.wr)}))})),Te.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,i=r.length+1;let a=r;nt.isDocumentKey(a)||(a=a.child(""));const l=new dn(new nt(a),0);let d=new kn(ss);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(d=d.add(u.wr)),!0)}),l),Te.resolve(this.Cr(d))}Cr(e){const s=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&s.push(i)})),s}removeMutationBatch(e,s){ls(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Te.forEach(s.mutations,(i=>{const a=new dn(i.key,s.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,s){const r=new dn(s,0),i=this.br.firstAfterOrEqual(r);return Te.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.Mr=e,this.docs=(function(){return new Is(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return Te.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(s))}getEntries(e,s){let r=Fa();return s.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))})),Te.resolve(r)}getDocumentsMatchingQuery(e,s,r,i){let a=Fa();const l=s.path,d=new nt(l.child("")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||M9(D9(p),r)<=0||(i.has(p.key)||fg(s,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,s,r,i){xt()}Or(e,s){return Te.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new tF(this)}getSize(e){return Te.resolve(this.size)}}class tF extends q7{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Te.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.persistence=e,this.Nr=new Ad((s=>h1(s)),p1),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _1,this.targetCount=0,this.kr=fd.Bn()}forEachTarget(e,s){return this.Nr.forEach(((r,i)=>s(i))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.Lr&&(this.Lr=s),Te.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new fd(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,Te.resolve()}updateTargetData(e,s){return this.Kn(s),Te.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,s,r){let i=0;const a=[];return this.Nr.forEach(((l,d)=>{d.sequenceNumber<=s&&r.get(d.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Te.waitFor(a).next((()=>i))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,s){const r=this.Nr.get(s)||null;return Te.resolve(r)}addMatchingKeys(e,s,r){return this.Br.Rr(s,r),Te.resolve()}removeMatchingKeys(e,s,r){this.Br.mr(s,r);const i=this.persistence.referenceDelegate,a=[];return i&&s.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),Te.waitFor(a)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),Te.resolve()}getMatchingKeysForTargetId(e,s){const r=this.Br.yr(s);return Te.resolve(r)}containsKey(e,s){return Te.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,s){this.qr={},this.overlays={},this.Qr=new c1(0),this.Kr=!1,this.Kr=!0,this.$r=new J7,this.referenceDelegate=e(this),this.Ur=new sF(this),this.indexManager=new G7,this.remoteDocumentCache=(function(i){return new eF(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new z7(s),this.Gr=new X7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new Y7,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.qr[e.toKey()];return r||(r=new Z7(s,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,r){Je("MemoryPersistence","Starting transaction:",e);const i=new rF(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,s){return Te.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,s))))}}class rF extends B9{constructor(e){super(),this.currentSequenceNumber=e}}class w1{constructor(e){this.persistence=e,this.Jr=new _1,this.Yr=null}static Zr(e){return new w1(e)}get Xr(){if(this.Yr)return this.Yr;throw xt()}addReference(e,s,r){return this.Jr.addReference(r,s),this.Xr.delete(r.toString()),Te.resolve()}removeReference(e,s,r){return this.Jr.removeReference(r,s),this.Xr.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),Te.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,s)))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Xr,(r=>{const i=nt.fromPath(r);return this.ei(e,i).next((a=>{a||s.removeEntry(i,jt.min())}))})).next((()=>(this.Yr=null,s.apply(e))))}updateLimboDocument(e,s){return this.ei(e,s).next((r=>{r?this.Xr.delete(s.toString()):this.Xr.add(s.toString())}))}Wr(e){return 0}ei(e,s){return Te.or([()=>Te.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,s,r,i){this.targetId=e,this.fromCache=s,this.$i=r,this.Ui=i}static Wi(e,s){let r=Ot(),i=Ot();for(const a of s.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new j1(e,s.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return iD()?8:$9(Vn())>0?6:4})()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,r,i){const a={result:null};return this.Yi(e,s).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,s,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new iF;return this.Xi(e,s,l).next((d=>{if(a.result=d,this.zi)return this.es(e,s,l,d.size)}))})).next((()=>a.result))}es(e,s,r,i){return r.documentReadCount<this.ji?(bu()<=Gt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",zc(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Te.resolve()):(bu()<=Gt.DEBUG&&Je("QueryEngine","Query:",zc(s),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(bu()<=Gt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",zc(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(s))):Te.resolve())}Yi(e,s){if(cj(s))return Te.resolve(null);let r=Wi(s);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(s.limit!==null&&i===1&&(s=Cf(s,null,"F"),r=Wi(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ot(...a);return this.Ji.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(s,d);return this.ns(s,h,l,u.readTime)?this.Yi(e,Cf(s,null,"F")):this.rs(e,h,s,u)}))))})))))}Zi(e,s,r,i){return cj(s)||i.isEqual(jt.min())?Te.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(s,a);return this.ns(s,l,r,i)?Te.resolve(null):(bu()<=Gt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zc(s)),this.rs(e,l,s,L9(i,-1)).next((d=>d)))}))}ts(e,s){let r=new kn(CT(e));return s.forEach(((i,a)=>{fg(e,a)&&(r=r.add(a))})),r}ns(e,s,r,i){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const a=e.limitType==="F"?s.last():s.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,s,r){return bu()<=Gt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",zc(s)),this.Ji.getDocumentsMatchingQuery(e,s,Fo.min(),r)}rs(e,s,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(s.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,s,r,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new Is(ss),this._s=new Ad((a=>h1(a)),p1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q7(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.os)))}}function lF(t,e,s,r){return new oF(t,e,s,r)}async function KT(t,e){const s=St(t);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return s.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,s.ls(e),s.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let u=Ot();for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of a){d.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return s.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:l,addedBatchIds:d})))}))}))}function cF(t,e){const s=St(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=s.cs.newChangeBuffer({trackRemovals:!0});return(function(d,u,h,p){const g=h.batch,v=g.keys();let b=Te.resolve();return v.forEach((S=>{b=b.next((()=>p.getEntry(u,S))).next((k=>{const E=h.docVersions.get(S);ls(E!==null),k.version.compareTo(E)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(u,g)))})(s,r,e,a).next((()=>a.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let u=Ot();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u})(e)))).next((()=>s.localDocuments.getDocuments(r,i)))}))}function QT(t){const e=St(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Ur.getLastRemoteSnapshotVersion(s)))}function dF(t,e){const s=St(t),r=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const d=[];e.targetChanges.forEach(((p,g)=>{const v=i.get(g);if(!v)return;d.push(s.Ur.removeMatchingKeys(a,p.removedDocuments,g).next((()=>s.Ur.addMatchingKeys(a,p.addedDocuments,g))));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Tn.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(g,b),(function(k,E,L){return k.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,b,p)&&d.push(s.Ur.updateTargetData(a,b))}));let u=Fa(),h=Ot();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(a,p))})),d.push(uF(a,l,e.documentUpdates).next((p=>{u=p.Ps,h=p.Is}))),!r.isEqual(jt.min())){const p=s.Ur.getLastRemoteSnapshotVersion(a).next((g=>s.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(p)}return Te.waitFor(d).next((()=>l.apply(a))).next((()=>s.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(s.os=i,a)))}function uF(t,e,s){let r=Ot(),i=Ot();return s.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=Fa();return s.forEach(((d,u)=>{const h=a.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(d)),u.isNoDocument()&&u.version.isEqual(jt.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):Je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)})),{Ps:l,Is:i}}))}function hF(t,e){const s=St(t);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pF(t,e){const s=St(t);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return s.Ur.getTargetData(r,e).next((a=>a?(i=a,Te.resolve(i)):s.Ur.allocateTargetId(r).next((l=>(i=new Co(e,l,"TargetPurposeListen",r.currentSequenceNumber),s.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=s.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(r.targetId,r),s._s.set(e,r.targetId)),r}))}async function s0(t,e,s){const r=St(t),i=r.os.get(e),a=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Dh(l))throw l;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function bj(t,e,s){const r=St(t);let i=jt.min(),a=Ot();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(u,h,p){const g=St(u),v=g._s.get(p);return v!==void 0?Te.resolve(g.os.get(v)):g.Ur.getTargetData(h,p)})(r,l,Wi(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,d.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,s?i:jt.min(),s?a:Ot()))).next((d=>(mF(r,n7(e),d),{documents:d,Ts:a})))))}function mF(t,e,s){let r=t.us.get(e)||jt.min();s.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class _j{constructor(){this.activeTargetIds=c7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fF{constructor(){this.so=new _j,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,r){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _j,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm=null;function Iy(){return bm===null?bm=(function(){return 268435456+Math.round(2147483648*Math.random())})():bm++,"0x"+bm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class vF extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const r=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+s.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(s,r,i,a,l){const d=Iy(),u=this.xo(s,r.toUriEncodedString());Je("RestConnection",`Sending RPC '${s}' ${d}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,l),this.No(s,u,h,i).then((p=>(Je("RestConnection",`Received RPC '${s}' ${d}: `,p),p)),(p=>{throw dd("RestConnection",`RPC '${s}' ${d} failed with error: `,p,"url: ",u,"request:",i),p}))}Lo(s,r,i,a,l,d){return this.Mo(s,r,i,a,l)}Oo(s,r,i){s["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ed})(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>s[l]=a)),i&&i.headers.forEach(((a,l)=>s[l]=a))}xo(s,r){const i=xF[s];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,r,i){const a=Iy();return new Promise(((l,d)=>{const u=new dT;u.setWithCredentials(!0),u.listenOnce(uT.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Jm.NO_ERROR:const p=u.getResponseJson();Je(Dn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Jm.TIMEOUT:Je(Dn,`RPC '${e}' ${a} timed out`),d(new Oe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Jm.HTTP_ERROR:const g=u.getStatus();if(Je(Dn,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const S=(function(E){const L=E.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(L)>=0?L:ye.UNKNOWN})(b.status);d(new Oe(S,b.message))}else d(new Oe(ye.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new Oe(ye.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Je(Dn,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Je(Dn,`RPC '${e}' ${a} sending request:`,i),u.send(s,"POST",h,r,15)}))}Bo(e,s,r){const i=Iy(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=mT(),d=pT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,s,r),u.encodeInitMessageHeaders=!0;const p=a.join("");Je(Dn,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=l.createWebChannel(p,u);let v=!1,b=!1;const S=new yF({Io:E=>{b?Je(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(v||(Je(Dn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Je(Dn,`RPC '${e}' stream ${i} sending:`,E),g.send(E))},To:()=>g.close()}),k=(E,L,M)=>{E.listen(L,(N=>{try{M(N)}catch(y){setTimeout((()=>{throw y}),0)}}))};return k(g,Iu.EventType.OPEN,(()=>{b||(Je(Dn,`RPC '${e}' stream ${i} transport opened.`),S.yo())})),k(g,Iu.EventType.CLOSE,(()=>{b||(b=!0,Je(Dn,`RPC '${e}' stream ${i} transport closed`),S.So())})),k(g,Iu.EventType.ERROR,(E=>{b||(b=!0,dd(Dn,`RPC '${e}' stream ${i} transport errored:`,E),S.So(new Oe(ye.UNAVAILABLE,"The operation could not be completed")))})),k(g,Iu.EventType.MESSAGE,(E=>{var L;if(!b){const M=E.data[0];ls(!!M);const N=M,y=N.error||((L=N[0])===null||L===void 0?void 0:L.error);if(y){Je(Dn,`RPC '${e}' stream ${i} received error:`,y);const _=y.status;let D=(function(I){const F=Gs[I];if(F!==void 0)return BT(F)})(_),C=y.message;D===void 0&&(D=ye.INTERNAL,C="Unknown error status: "+_+" with message "+y.message),b=!0,S.So(new Oe(D,C)),g.close()}else Je(Dn,`RPC '${e}' stream ${i} received:`,M),S.bo(M)}})),k(d,hT.STAT_EVENT,(E=>{E.stat===Wv.PROXY?Je(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Wv.NOPROXY&&Je(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.wo()}),0),S}}function Ry(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){return new E7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,s,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=s,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,s,r,i,a,l,d,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new XT(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===ye.RESOURCE_EXHAUSTED?(Ma(s.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===s&&this.P_(r,i)}),(r=>{e((()=>{const i=new Oe(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,s){const r=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget((()=>this.Yo===e?s():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bF extends YT{constructor(e,s,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=R7(this.serializer,e),r=(function(a){if(!("targetChange"in a))return jt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?jt.min():l.readTime?qi(l.readTime):jt.min()})(e);return this.listener.d_(s,r)}A_(e){const s={};s.database=t0(this.serializer),s.addTarget=(function(a,l){let d;const u=l.target;if(d=Xv(u)?{documents:D7(a,u)}:{query:M7(a,u)._t},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=VT(a,l.resumeToken);const h=Jv(a,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(jt.min())>0){d.readTime=Ef(a,l.snapshotVersion.toTimestamp());const h=Jv(a,l.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=B7(this.serializer,e);r&&(s.labels=r),this.a_(s)}R_(e){const s={};s.database=t0(this.serializer),s.removeTarget=e,this.a_(s)}}class _F extends YT{constructor(e,s,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return ls(!!e.streamToken),this.lastStreamToken=e.streamToken,ls(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ls(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=L7(e.writeResults,e.commitTime),r=qi(e.commitTime);return this.listener.g_(r,s)}p_(){const e={};e.database=t0(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>P7(this.serializer,r)))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF extends class{}{constructor(e,s,r,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,Zv(s,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(ye.UNKNOWN,a.toString())}))}Lo(e,s,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Lo(e,Zv(s,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Oe(ye.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class jF{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ma(s),this.D_=!1):Je("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e,s,r,i,a){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{Xl(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=St(u);h.L_.add(4),await Bh(h),h.q_.set("Unknown"),h.L_.delete(4),await bg(h)})(this))}))})),this.q_=new jF(r,i)}}async function bg(t){if(Xl(t))for(const e of t.B_)await e(!0)}async function Bh(t){for(const e of t.B_)await e(!1)}function JT(t,e){const s=St(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),C1(s)?k1(s):Id(s).r_()&&N1(s,e))}function S1(t,e){const s=St(t),r=Id(s);s.N_.delete(e),r.r_()&&ZT(s,e),s.N_.size===0&&(r.r_()?r.o_():Xl(s)&&s.q_.set("Unknown"))}function N1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Id(t).A_(e)}function ZT(t,e){t.Q_.xe(e),Id(t).R_(e)}function k1(t){t.Q_=new N7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Id(t).start(),t.q_.v_()}function C1(t){return Xl(t)&&!Id(t).n_()&&t.N_.size>0}function Xl(t){return St(t).L_.size===0}function e3(t){t.Q_=void 0}async function NF(t){t.q_.set("Online")}async function kF(t){t.N_.forEach(((e,s)=>{N1(t,e)}))}async function CF(t,e){e3(t),C1(t)?(t.q_.M_(e),k1(t)):t.q_.set("Unknown")}async function TF(t,e,s){if(t.q_.set("Online"),e instanceof OT&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const d of a.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.N_.delete(d),i.Q_.removeTarget(d))})(t,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Af(t,r)}else if(e instanceof tf?t.Q_.Ke(e):e instanceof $T?t.Q_.He(e):t.Q_.We(e),!s.isEqual(jt.min()))try{const r=await QT(t.localStore);s.compareTo(r)>=0&&await(function(a,l){const d=a.Q_.rt(l);return d.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.N_.get(h);p&&a.N_.set(h,p.withResumeToken(u.resumeToken,l))}})),d.targetMismatches.forEach(((u,h)=>{const p=a.N_.get(u);if(!p)return;a.N_.set(u,p.withResumeToken(Tn.EMPTY_BYTE_STRING,p.snapshotVersion)),ZT(a,u);const g=new Co(p.target,u,h,p.sequenceNumber);N1(a,g)})),a.remoteSyncer.applyRemoteEvent(d)})(t,s)}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),await Af(t,r)}}async function Af(t,e,s){if(!Dh(e))throw e;t.L_.add(1),await Bh(t),t.q_.set("Offline"),s||(s=()=>QT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Je("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await bg(t)}))}function t3(t,e){return e().catch((s=>Af(t,s,e)))}async function _g(t){const e=St(t),s=$o(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EF(e);)try{const i=await hF(e.localStore,r);if(i===null){e.O_.length===0&&s.o_();break}r=i.batchId,AF(e,i)}catch(i){await Af(e,i)}s3(e)&&n3(e)}function EF(t){return Xl(t)&&t.O_.length<10}function AF(t,e){t.O_.push(e);const s=$o(t);s.r_()&&s.V_&&s.m_(e.mutations)}function s3(t){return Xl(t)&&!$o(t).n_()&&t.O_.length>0}function n3(t){$o(t).start()}async function IF(t){$o(t).p_()}async function RF(t){const e=$o(t);for(const s of t.O_)e.m_(s.mutations)}async function PF(t,e,s){const r=t.O_.shift(),i=y1.from(r,e,s);await t3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await _g(t)}async function LF(t,e){e&&$o(t).V_&&await(async function(r,i){if((function(l){return w7(l)&&l!==ye.ABORTED})(i.code)){const a=r.O_.shift();$o(r).s_(),await t3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await _g(r)}})(t,e),s3(t)&&n3(t)}async function jj(t,e){const s=St(t);s.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=Xl(s);s.L_.add(3),await Bh(s),r&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await bg(s)}async function DF(t,e){const s=St(t);e?(s.L_.delete(2),await bg(s)):e||(s.L_.add(2),await Bh(s),s.q_.set("Unknown"))}function Id(t){return t.K_||(t.K_=(function(s,r,i){const a=St(s);return a.w_(),new bF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:NF.bind(null,t),Ro:kF.bind(null,t),mo:CF.bind(null,t),d_:TF.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),C1(t)?k1(t):t.q_.set("Unknown")):(await t.K_.stop(),e3(t))}))),t.K_}function $o(t){return t.U_||(t.U_=(function(s,r,i){const a=St(s);return a.w_(),new _F(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IF.bind(null,t),mo:LF.bind(null,t),f_:RF.bind(null,t),g_:PF.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await _g(t)):(await t.U_.stop(),t.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,s,r,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,a){const l=Date.now()+r,d=new T1(e,s,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E1(t,e){if(Ma("AsyncQueue",`${e}: ${t}`),Dh(t))return new Oe(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.comparator=e?(s,r)=>e(s,r)||nt.comparator(s.key,r.key):(s,r)=>nt.comparator(s.key,r.key),this.keyedMap=Ru(),this.sortedSet=new Is(this.comparator)}static emptySet(e){return new id(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof id)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new id;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.W_=new Is(nt.comparator)}track(e){const s=e.doc.key,r=this.W_.get(s);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(s,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(s):e.type===1&&r.type===2?this.W_=this.W_.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):xt():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal(((s,r)=>{e.push(r)})),e}}class gd{constructor(e,s,r,i,a,l,d,u,h){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,s,r,i,a){const l=[];return s.forEach((d=>{l.push({type:0,doc:d})})),new gd(e,s,id.emptySet(s),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==r[i].type||!s[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class FF{constructor(){this.queries=Nj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,r){const i=St(s),a=i.queries;i.queries=Nj(),a.forEach(((l,d)=>{for(const u of d.j_)u.onError(r)}))})(this,new Oe(ye.ABORTED,"Firestore shutting down"))}}function Nj(){return new Ad((t=>kT(t)),mg)}async function r3(t,e){const s=St(t);let r=3;const i=e.query;let a=s.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new MF,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await s.onListen(i,!0);break;case 1:a.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(l){const d=E1(l,`Initialization of query '${zc(e.query)}' failed`);return void e.onError(d)}s.queries.set(i,a),a.j_.push(e),e.Z_(s.onlineState),a.z_&&e.X_(a.z_)&&A1(s)}async function i3(t,e){const s=St(t),r=e.query;let i=3;const a=s.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function BF(t,e){const s=St(t);let r=!1;for(const i of e){const a=i.query,l=s.queries.get(a);if(l){for(const d of l.j_)d.X_(i)&&(r=!0);l.z_=i}}r&&A1(s)}function $F(t,e,s){const r=St(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(s);r.queries.delete(e)}function A1(t){t.Y_.forEach((e=>{e.next()}))}var n0,kj;(kj=n0||(n0={})).ea="default",kj.Cache="cache";class a3{constructor(e,s,r){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const r=s!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=gd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==n0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.key=e}}class l3{constructor(e){this.key=e}}class OF{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ot(),this.mutatedKeys=Ot(),this.Aa=CT(e),this.Ra=new id(this.Aa)}get Va(){return this.Ta}ma(e,s){const r=s?s.fa:new Sj,i=s?s.Ra:this.Ra;let a=s?s.mutatedKeys:this.mutatedKeys,l=i,d=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const v=i.get(p),b=fg(this.query,g)?g:null,S=!!v&&this.mutatedKeys.has(v.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let E=!1;v&&b?v.data.isEqual(b.data)?S!==k&&(r.track({type:3,doc:b}),E=!0):this.ga(v,b)||(r.track({type:2,doc:b}),E=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(d=!0)):!v&&b?(r.track({type:0,doc:b}),E=!0):v&&!b&&(r.track({type:1,doc:v}),E=!0,(u||h)&&(d=!0)),E&&(b?(l=l.add(b),a=k?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Ra:l,fa:r,ns:d,mutatedKeys:a}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((p,g)=>(function(b,S){const k=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return k(b)-k(S)})(p.type,g.type)||this.Aa(p.doc,g.doc))),this.pa(r),i=i!=null&&i;const d=s&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,l.length!==0||h?{snapshot:new gd(this.query,e.Ra,a,l,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((s=>this.Ta=this.Ta.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ta=this.Ta.delete(s))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ot(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const s=[];return e.forEach((r=>{this.da.has(r)||s.push(new l3(r))})),this.da.forEach((r=>{e.has(r)||s.push(new o3(r))})),s}ba(e){this.Ta=e.Ts,this.da=Ot();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return gd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VF{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class UF{constructor(e){this.key=e,this.va=!1}}class zF{constructor(e,s,r,i,a,l){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Ad((d=>kT(d)),mg),this.Ma=new Map,this.xa=new Set,this.Oa=new Is(nt.comparator),this.Na=new Map,this.La=new _1,this.Ba={},this.ka=new Map,this.qa=fd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function HF(t,e,s=!0){const r=m3(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await c3(r,e,s,!0),i}async function GF(t,e){const s=m3(t);await c3(s,e,!0,!1)}async function c3(t,e,s,r){const i=await pF(t.localStore,Wi(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,s);let d;return r&&(d=await WF(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&s&&JT(t.remoteStore,i),d}async function WF(t,e,s,r,i){t.Ka=(g,v,b)=>(async function(k,E,L,M){let N=E.view.ma(L);N.ns&&(N=await bj(k.localStore,E.query,!1).then((({documents:C})=>E.view.ma(C,N))));const y=M&&M.targetChanges.get(E.targetId),_=M&&M.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(N,k.isPrimaryClient,y,_);return Tj(k,E.targetId,D.wa),D.snapshot})(t,g,v,b);const a=await bj(t.localStore,e,!0),l=new OF(e,a.Ts),d=l.ma(a.documents),u=Fh.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",i),h=l.applyChanges(d,t.isPrimaryClient,u);Tj(t,s,h.wa);const p=new VF(e,s,l);return t.Fa.set(e,p),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),h.snapshot}async function qF(t,e,s){const r=St(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((l=>!mg(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await s0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),s&&S1(r.remoteStore,i.targetId),r0(r,i.targetId)})).catch(Lh)):(r0(r,i.targetId),await s0(r.localStore,i.targetId,!0))}async function KF(t,e){const s=St(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),S1(s.remoteStore,r.targetId))}async function QF(t,e,s){const r=sB(t);try{const i=await(function(l,d){const u=St(l),h=Fs.now(),p=d.reduce(((b,S)=>b.add(S.key)),Ot());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let S=Fa(),k=Ot();return u.cs.getEntries(b,p).next((E=>{S=E,S.forEach(((L,M)=>{M.isValidDocument()||(k=k.add(L))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,S))).next((E=>{g=E;const L=[];for(const M of d){const N=x7(M,g.get(M.key).overlayedDocument);N!=null&&L.push(new Uo(M.key,N,vT(N.value.mapValue),ei.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,L,d)})).next((E=>{v=E;const L=E.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(b,E.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:ET(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,u){let h=l.Ba[l.currentUser.toKey()];h||(h=new Is(ss)),h=h.insert(d,u),l.Ba[l.currentUser.toKey()]=h})(r,i.batchId,s),await $h(r,i.changes),await _g(r.remoteStore)}catch(i){const a=E1(i,"Failed to persist write");s.reject(a)}}async function d3(t,e){const s=St(t);try{const r=await dF(s.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=s.Na.get(a);l&&(ls(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?ls(l.va):i.removedDocuments.size>0&&(ls(l.va),l.va=!1))})),await $h(s,r,e)}catch(r){await Lh(r)}}function Cj(t,e,s){const r=St(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const i=[];r.Fa.forEach(((a,l)=>{const d=l.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const u=St(l);u.onlineState=d;let h=!1;u.queries.forEach(((p,g)=>{for(const v of g.j_)v.Z_(d)&&(h=!0)})),h&&A1(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XF(t,e,s){const r=St(t);r.sharedClientState.updateQueryState(e,"rejected",s);const i=r.Na.get(e),a=i&&i.key;if(a){let l=new Is(nt.comparator);l=l.insert(a,$n.newNoDocument(a,jt.min()));const d=Ot().add(a),u=new yg(jt.min(),new Map,new Is(ss),l,d);await d3(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),I1(r)}else await s0(r.localStore,e,!1).then((()=>r0(r,e,s))).catch(Lh)}async function YF(t,e){const s=St(t),r=e.batch.batchId;try{const i=await cF(s.localStore,e);h3(s,r,null),u3(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await $h(s,i)}catch(i){await Lh(i)}}async function JF(t,e,s){const r=St(t);try{const i=await(function(l,d){const u=St(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,d).next((g=>(ls(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,d))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);h3(r,e,s),u3(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await $h(r,i)}catch(i){await Lh(i)}}function u3(t,e){(t.ka.get(e)||[]).forEach((s=>{s.resolve()})),t.ka.delete(e)}function h3(t,e,s){const r=St(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(s?a.reject(s):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function r0(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),s&&t.Ca.$a(r,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||p3(t,r)}))}function p3(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(S1(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),I1(t))}function Tj(t,e,s){for(const r of s)r instanceof o3?(t.La.addReference(r.key,e),ZF(t,r)):r instanceof l3?(Je("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||p3(t,r.key)):xt()}function ZF(t,e){const s=e.key,r=s.path.canonicalString();t.Oa.get(s)||t.xa.has(r)||(Je("SyncEngine","New document in limbo: "+s),t.xa.add(r),I1(t))}function I1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new nt(us.fromString(e)),r=t.qa.next();t.Na.set(r,new UF(s)),t.Oa=t.Oa.insert(s,r),JT(t.remoteStore,new Co(Wi(m1(s.path)),r,"TargetPurposeLimboResolution",c1.oe))}}async function $h(t,e,s){const r=St(t),i=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,u)=>{l.push(r.Ka(u,e,s).then((h=>{var p;if((h||s)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=s==null?void 0:s.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=j1.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(l),r.Ca.d_(i),await(async function(u,h){const p=St(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Te.forEach(h,(v=>Te.forEach(v.$i,(b=>p.persistence.referenceDelegate.addReference(g,v.targetId,b))).next((()=>Te.forEach(v.Ui,(b=>p.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))))))}catch(g){if(!Dh(g))throw g;Je("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=p.os.get(v),S=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(S);p.os=p.os.insert(v,k)}}})(r.localStore,a))}async function eB(t,e){const s=St(t);if(!s.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=await KT(s.localStore,e);s.currentUser=e,(function(a,l){a.ka.forEach((d=>{d.forEach((u=>{u.reject(new Oe(ye.CANCELLED,l))}))})),a.ka.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $h(s,r.hs)}}function tB(t,e){const s=St(t),r=s.Na.get(e);if(r&&r.va)return Ot().add(r.key);{let i=Ot();const a=s.Ma.get(e);if(!a)return i;for(const l of a){const d=s.Fa.get(l);i=i.unionWith(d.view.Va)}return i}}function m3(t){const e=St(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XF.bind(null,e),e.Ca.d_=BF.bind(null,e.eventManager),e.Ca.$a=$F.bind(null,e.eventManager),e}function sB(t){const e=St(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JF.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return lF(this.persistence,new aF,e.initialUser,this.serializer)}Ga(e){return new nF(w1.Zr,this.serializer)}Wa(e){return new fF}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class i0{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eB.bind(null,this.syncEngine),await DF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FF})()}createDatastore(e){const s=vg(e.databaseInfo.databaseId),r=(function(a){return new vF(a)})(e.databaseInfo);return(function(a,l,d,u){return new wF(a,l,d,u)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,i,a,l,d){return new SF(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(s=>Cj(this.syncEngine,s,0)),(function(){return wj.D()?new wj:new gF})())}createSyncEngine(e,s){return(function(i,a,l,d,u,h,p){const g=new zF(i,a,l,d,u,h);return p&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await(async function(i){const a=St(i);Je("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Bh(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}i0.provider={build:()=>new i0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,s,r,i,a){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=i,this.user=Fn.UNAUTHENTICATED,this.clientId=gT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Je("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=E1(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Py(t,e){t.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await KT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ej(t,e){t.asyncQueue.verifyOperationInProgress();const s=await rB(t);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener((r=>jj(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>jj(e.remoteStore,i))),t._onlineComponents=e}async function rB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await Py(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(s))throw s;dd("Error using user provided cache. Falling back to memory cache: "+s),await Py(t,new If)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await Py(t,new If);return t._offlineComponents}async function g3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await Ej(t,t._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await Ej(t,new i0))),t._onlineComponents}function iB(t){return g3(t).then((e=>e.syncEngine))}async function x3(t){const e=await g3(t),s=e.eventManager;return s.onListen=HF.bind(null,e.syncEngine),s.onUnlisten=qF.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=GF.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=KF.bind(null,e.syncEngine),s}function aB(t,e,s={}){const r=new Aa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const p=new f3({next:v=>{p.Za(),l.enqueueAndForget((()=>i3(a,g)));const b=v.docs.has(d);!b&&v.fromCache?h.reject(new Oe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&u&&u.source==="server"?h.reject(new Oe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new a3(m1(d.path),p,{includeMetadataChanges:!0,_a:!0});return r3(a,g)})(await x3(t),t.asyncQueue,e,s,r))),r.promise}function oB(t,e,s={}){const r=new Aa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const p=new f3({next:v=>{p.Za(),l.enqueueAndForget((()=>i3(a,g))),v.fromCache&&u.source==="server"?h.reject(new Oe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new a3(d,p,{includeMetadataChanges:!0,_a:!0});return r3(a,g)})(await x3(t),t.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e,s){if(!s)throw new Oe(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lB(t,e,s,r){if(e===!0&&r===!0)throw new Oe(ye.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function Ij(t){if(!nt.isDocumentKey(t))throw new Oe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rj(t){if(nt.isDocumentKey(t))throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xt()}function Ba(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=wg(t);throw new Oe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function cB(t,e){if(e<=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Oe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Oe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Oe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Oe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oh{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pj(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new N9;switch(r.type){case"firstParty":return new E9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Aj.get(s);r&&(Je("ComponentProvider","Removing Datastore"),Aj.delete(s),r.terminate())})(this),Promise.resolve()}}function dB(t,e,s,r={}){var i;const a=(t=Ba(t,Oh))._getSettings(),l=`${e}:${s}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,u;if(typeof r.mockUserToken=="string")d=r.mockUserToken,u=Fn.MOCK_USER;else{d=J6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Oe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Fn(h)}t._authCredentials=new k9(new fT(d,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class gr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Do(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class Do extends ki{constructor(e,s,r){super(e,s,m1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new nt(e))}withConverter(e){return new Do(this.firestore,e,this._path)}}function Yl(t,e,...s){if(t=nn(t),R1("collection","path",e),t instanceof Oh){const r=us.fromString(e,...s);return Rj(r),new Do(t,null,r)}{if(!(t instanceof gr||t instanceof Do))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(us.fromString(e,...s));return Rj(r),new Do(t.firestore,null,r)}}function jg(t,e){if(t=Ba(t,Oh),R1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ki(t,null,(function(r){return new Ha(us.emptyPath(),r)})(e))}function Wt(t,e,...s){if(t=nn(t),arguments.length===1&&(e=gT.newId()),R1("doc","path",e),t instanceof Oh){const r=us.fromString(e,...s);return Ij(r),new gr(t,null,new nt(r))}{if(!(t instanceof gr||t instanceof Do))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(us.fromString(e,...s));return Ij(r),new gr(t.firestore,t instanceof Do?t.converter:null,new nt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new XT(this,"async_queue_retry"),this.Vu=()=>{const r=Ry();r&&Je("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const s=Ry();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=Ry();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const s=new Aa;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Dh(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const s=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d})(r);throw Ma("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=s,s}enqueueAfterDelay(e,s,r){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const i=T1.createAndSchedule(this,e,s,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}class Vh extends Oh{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new Lj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lj(e),this._firestoreClient=void 0,await e}}}function uB(t,e){const s=typeof t=="object"?t:Z0(),r=typeof t=="string"?t:"(default)",i=J0(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=X6("firestore");a&&dB(i,...a)}return i}function Sg(t){if(t._terminated)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hB(t),t._firestoreClient}function hB(t){var e,s,r;const i=t._freezeSettings(),a=(function(d,u,h,p){return new U9(d,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,y3(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xd(Tn.fromBase64String(e))}catch(s){throw new Oe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new xd(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Oe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Oe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Oe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ss(this._lat,e._lat)||ss(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=/^__.*__$/;class mB{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,s,this.fieldTransforms):new Mh(e,this.data,s,this.fieldTransforms)}}class v3{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Uo(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function b3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class D1{constructor(e,s,r,i,a,l){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new D1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(b3(this.Cu)&&pB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fB{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||vg(e)}Qu(e,s,r,i=!1){return new D1({Cu:e,methodName:s,qu:r,path:Sn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cg(t){const e=t._freezeSettings(),s=vg(t._databaseId);return new fB(t._databaseId,!!e.ignoreUndefinedProperties,s)}function _3(t,e,s,r,i,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,s,i);F1("Data must be an object, but it was:",l,r);const d=j3(r,l);let u,h;if(a.merge)u=new Pr(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const v=a0(e,g,s);if(!l.contains(v))throw new Oe(ye.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);N3(p,v)||p.push(v)}u=new Pr(p),h=l.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=l.fieldTransforms;return new mB(new fr(d),u,h)}class Tg extends kg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tg}}class M1 extends kg{_toFieldTransform(e){return new p7(e.path,new gh)}isEqual(e){return e instanceof M1}}function gB(t,e,s,r){const i=t.Qu(1,e,s);F1("Data must be an object, but it was:",i,r);const a=[],l=fr.empty();Ql(r,((u,h)=>{const p=B1(e,u,s);h=nn(h);const g=i.Nu(p);if(h instanceof Tg)a.push(p);else{const v=Uh(h,g);v!=null&&(a.push(p),l.set(p,v))}}));const d=new Pr(a);return new v3(l,d,i.fieldTransforms)}function xB(t,e,s,r,i,a){const l=t.Qu(1,e,s),d=[a0(e,r,s)],u=[i];if(a.length%2!=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)d.push(a0(e,a[v])),u.push(a[v+1]);const h=[],p=fr.empty();for(let v=d.length-1;v>=0;--v)if(!N3(h,d[v])){const b=d[v];let S=u[v];S=nn(S);const k=l.Nu(b);if(S instanceof Tg)h.push(b);else{const E=Uh(S,k);E!=null&&(h.push(b),p.set(b,E))}}const g=new Pr(h);return new v3(p,g,l.fieldTransforms)}function w3(t,e,s,r=!1){return Uh(s,t.Qu(r?4:3,e))}function Uh(t,e){if(S3(t=nn(t)))return F1("Unsupported field value:",e,t),j3(t,e);if(t instanceof kg)return(function(r,i){if(!b3(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let u=Uh(d,i.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Fs.fromDate(r);return{timestampValue:Ef(i.serializer,a)}}if(r instanceof Fs){const a=new Fs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ef(i.serializer,a)}}if(r instanceof P1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xd)return{bytesValue:VT(i.serializer,r._byteString)};if(r instanceof gr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:b1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof L1)return(function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((u=>{if(typeof u!="number")throw d.Bu("VectorValues must only contain numeric values.");return g1(d.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${wg(r)}`)})(t,e)}function j3(t,e){const s={};return xT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ql(t,((r,i)=>{const a=Uh(i,e.Mu(r));a!=null&&(s[r]=a)})),{mapValue:{fields:s}}}function S3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fs||t instanceof P1||t instanceof xd||t instanceof gr||t instanceof kg||t instanceof L1)}function F1(t,e,s){if(!S3(s)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(s)){const r=wg(s);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function a0(t,e,s){if((e=nn(e))instanceof Ng)return e._internalPath;if(typeof e=="string")return B1(t,e);throw Rf("Field path arguments must be of type string or ",t,!1,void 0,s)}const yB=new RegExp("[~\\*/\\[\\]]");function B1(t,e,s){if(e.search(yB)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Ng(...e.split("."))._internalPath}catch(r){throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Rf(t,e,s,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${r}`),l&&(u+=` in document ${i}`),u+=")"),new Oe(ye.INVALID_ARGUMENT,d+t+u)}function N3(t,e){return t.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,s,r,i,a){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Eg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class vB extends $1{data(){return super.data()}}function Eg(t,e){return typeof e=="string"?B1(t,e):e instanceof Ng?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Oe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O1{}class zh extends O1{}function On(t,e,...s){let r=[];e instanceof O1&&r.push(e),r=r.concat(s),(function(a){const l=a.filter((u=>u instanceof V1)).length,d=a.filter((u=>u instanceof Ag)).length;if(l>1||l>0&&d>0)throw new Oe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Ag extends zh{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Ag(e,s,r)}_apply(e){const s=this._parse(e);return C3(e._query,s),new ki(e.firestore,e.converter,Yv(e._query,s))}_parse(e){const s=Cg(e.firestore);return(function(a,l,d,u,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Mj(g,p);const b=[];for(const S of g)b.push(Dj(u,a,S));v={arrayValue:{values:b}}}else v=Dj(u,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Mj(g,p),v=w3(d,l,g,p==="in"||p==="not-in");return Qs.create(h,p,v)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Mo(t,e,s){const r=e,i=Eg("where",t);return Ag._create(i,r,s)}class V1 extends O1{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new V1(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Si.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(i,a){let l=i;const d=a.getFlattenedFilters();for(const u of d)C3(l,u),l=Yv(l,u)})(e._query,s),new ki(e.firestore,e.converter,Yv(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class U1 extends zh{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new U1(e,s)}_apply(e){const s=(function(i,a,l){if(i.startAt!==null)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fh(a,l)})(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ha(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,s))}}function Ca(t,e="asc"){const s=e,r=Eg("orderBy",t);return U1._create(r,s)}class z1 extends zh{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new z1(e,s,r)}_apply(e){return new ki(e.firestore,e.converter,Cf(e._query,this._limit,this._limitType))}}function Zn(t){return cB("limit",t),z1._create("limit",t,"F")}class H1 extends zh{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new H1(e,s,r)}_apply(e){const s=k3(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,(function(i,a){return new Ha(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,s))}}function Al(...t){return H1._create("startAt",t,!0)}class G1 extends zh{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new G1(e,s,r)}_apply(e){const s=k3(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,(function(i,a){return new Ha(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,s))}}function Il(...t){return G1._create("endAt",t,!0)}function k3(t,e,s,r){if(s[0]=nn(s[0]),s[0]instanceof $1)return(function(a,l,d,u,h){if(!u)throw new Oe(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const p=[];for(const g of rd(a))if(g.field.isKeyField())p.push(kf(l,u.key));else{const v=u.data.field(g.field);if(pg(v))throw new Oe(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const b=g.field.canonicalString();throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}p.push(v)}return new md(p,h)})(t._query,t.firestore._databaseId,e,s[0]._document,r);{const i=Cg(t.firestore);return(function(l,d,u,h,p,g){const v=l.explicitOrderBy;if(p.length>v.length)throw new Oe(ye.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let S=0;S<p.length;S++){const k=p[S];if(v[S].field.isKeyField()){if(typeof k!="string")throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof k}`);if(!f1(l)&&k.indexOf("/")!==-1)throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${k}' contains a slash.`);const E=l.path.child(us.fromString(k));if(!nt.isDocumentKey(E))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const L=new nt(E);b.push(kf(d,L))}else{const E=w3(u,h,k);b.push(E)}}return new md(b,g)})(t._query,t.firestore._databaseId,i,e,s,r)}}function Dj(t,e,s){if(typeof(s=nn(s))=="string"){if(s==="")throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f1(e)&&s.indexOf("/")!==-1)throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(us.fromString(s));if(!nt.isDocumentKey(r))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kf(t,new nt(r))}if(s instanceof gr)return kf(t,s._key);throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wg(s)}.`)}function Mj(t,e){if(!Array.isArray(t)||t.length===0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C3(t,e){const s=(function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Oe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class _B{convertValue(e,s="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Ql(e,((i,a)=>{r[i]=this.convertValue(a,s)})),r}convertVectorValue(e){var s,r,i;const a=(i=(r=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((l=>Vs(l.doubleValue)));return new L1(a)}convertGeoPoint(e){return new P1(Vs(e.latitude),Vs(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=d1(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(hh(e));default:return null}}convertTimestamp(e){const s=Bo(e);return new Fs(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=us.fromString(e);ls(qT(r));const i=new ph(r.get(1),r.get(3)),a=new nt(r.popFirst(5));return i.isEqual(s)||Ma(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class E3 extends $1{constructor(e,s,r,i,a,l){super(e,s,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class sf extends E3{data(e={}){return super.data(e)}}class wB{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new sf(this._firestore,this._userDataWriter,r.key,r,new Lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Oe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const u=new sf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Lu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const u=new sf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Lu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),p=l.indexOf(d.doc.key)),{type:jB(d.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function jB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){t=Ba(t,gr);const e=Ba(t.firestore,Vh);return aB(Sg(e),t._key).then((s=>SB(e,t,s)))}class A3 extends _B{constructor(e){super(),this.firestore=e}convertBytes(e){return new xd(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,s)}}function un(t){t=Ba(t,ki);const e=Ba(t.firestore,Vh),s=Sg(e),r=new A3(e);return bB(t._query),oB(s,t._query).then((i=>new wB(e,r,t,i)))}function $a(t,e,s){t=Ba(t,gr);const r=Ba(t.firestore,Vh),i=T3(t.converter,e,s);return I3(r,[_3(Cg(r),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,ei.none())])}function I3(t,e){return(function(r,i){const a=new Aa;return r.asyncQueue.enqueueAndForget((async()=>QF(await iB(r),i,a))),a.promise})(Sg(t),e)}function SB(t,e,s){const r=s.docs.get(e._key),i=new A3(t);return new E3(t,i,e._key,r,new Lu(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Cg(e)}set(e,s,r){this._verifyNotCommitted();const i=Ly(e,this._firestore),a=T3(i.converter,s,r),l=_3(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ei.none())),this}update(e,s,r,...i){this._verifyNotCommitted();const a=Ly(e,this._firestore);let l;return l=typeof(s=nn(s))=="string"||s instanceof Ng?xB(this._dataReader,"WriteBatch.update",a._key,s,r,i):gB(this._dataReader,"WriteBatch.update",a._key,s),this._mutations.push(l.toMutation(a._key,ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=Ly(e,this._firestore);return this._mutations=this._mutations.concat(new x1(s._key,ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ly(t,e){if((t=nn(t)).firestore!==e)throw new Oe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function vi(){return new M1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(t){return Sg(t=Ba(t,Vh)),new NB(t,(e=>I3(t,e)))}(function(e,s=!0){(function(i){Ed=i})(Cd),cd(new Fl("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new Vh(new C9(r.getProvider("auth-internal")),new I9(r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Oe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ph(h.options.projectId,p)})(l,i),l);return a=Object.assign({useFetchStreams:s},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Po(Z2,"4.7.3",e),Po(Z2,"4.7.3","esm2017")})();const R3={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};R3.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const P3=p8().length?Z0():CC(R3),ct=uB(P3),_m=j9(P3),L3=T.createContext(void 0),Fj=`${Ua}/auth/session`,Bj=`${Ua}/auth/logout`,CB=({children:t})=>{const[e,s]=T.useState(null),[r,i]=T.useState("idle"),a=T.useRef({tried:!1}),l=T.useCallback(k=>{k!=null&&k.authenticated&&k.user?(s(k.user),i("authenticated")):(s(null),i("unauthenticated"))},[]),d=T.useCallback(async()=>{if(i("loading"),!Fj){console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),s(null),i("unauthenticated");return}try{const k=await fetch(Fj,{credentials:"include"});if(!k.ok)throw new Error(`Failed to fetch session (${k.status})`);const E=await k.json();l(E)}catch(k){console.error("[Auth] Failed to refresh session.",k),s(null),i("unauthenticated")}},[l]);T.useEffect(()=>{d()},[d]),T.useEffect(()=>{console.log("[AuthDebug] session user:",e);const k=_m.currentUser;console.log("[AuthDebug] firebase currentUser uid:",k==null?void 0:k.uid),k==null||k.getIdTokenResult().then(E=>{console.log("[AuthDebug] firebase claims:",E.claims)}).catch(E=>{console.warn("[AuthDebug] failed to fetch token claims",E)})},[e]),T.useEffect(()=>{const k=uM(_m,E=>{console.log("[AuthDebug] firebase currentUser uid:",E==null?void 0:E.uid)});return()=>k()},[]),T.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const k=await U6();await lM(_m,k),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(k){console.error("[AuthDebug] failed to sign in to Firebase",k)}})())},[e]);const u=T.useCallback(k=>{window.location.href=`${Ua}/auth/${k}/login`},[]),h=T.useCallback(()=>u("discord"),[u]),p=T.useCallback(()=>u("google"),[u]),g=T.useCallback(async()=>{if(await hM(_m).catch(()=>{}),!Bj){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),s(null),i("unauthenticated");return}try{const k=await fetch(Bj,{method:"POST",credentials:"include"});if(!k.ok)throw new Error(`Logout failed (${k.status})`)}catch(k){console.error("[Auth] Failed to logout. Clearing local session anyway.",k)}finally{s(null),i("unauthenticated")}},[]),v=T.useCallback(async()=>{await d()},[d]),b=r==="idle"||r==="loading",S=T.useMemo(()=>({user:e,status:r,isLoading:b,loginWithDiscord:h,loginWithGoogle:p,logout:g,refreshSession:v}),[e,r,b,h,p,g,v]);return n.jsx(L3.Provider,{value:S,children:t})},zo=()=>{const t=T.useContext(L3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},TB="https://i.pravatar.cc/72",EB=({fallbackName:t})=>{var M,N;const{user:e,status:s,logout:r,isLoading:i}=zo(),a=si(),[l,d]=T.useState(!1),u=T.useRef(null),h=s==="authenticated",p=h?(N=(M=e==null?void 0:e.displayName)!=null?M:t)!=null?N:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:TB;T.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]),T.useEffect(()=>{i&&d(!1)},[i]);const v=T.useCallback(()=>d(!1),[]),b=()=>{d(y=>!y)},S=()=>{a("/login"),v()},k=()=>{a("/settings/account"),v()},E=T.useCallback(async()=>{try{await r()}finally{v(),a("/")}},[v,r,a]),L=()=>{var y;if(i)return n.jsx("p",{className:At.accountStatusText,children:"Checking session..."});if(s==="unauthenticated")return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:At.accountHeader,children:[n.jsx("p",{className:At.accountName,children:"Not signed in"}),n.jsx("p",{className:At.accountSub,children:"Your scans stay synced when you log in."})]}),n.jsx("button",{type:"button",className:At.accountPrimary,onClick:S,children:"Sign in"}),n.jsx("p",{className:At.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(s==="authenticated"){const _=!!((y=e==null?void 0:e.roles)!=null&&y.includes("admin"));return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:At.accountHeader,children:[n.jsx("img",{className:At.accountMiniAvatar,src:g,alt:p}),n.jsxs("div",{children:[n.jsx("p",{className:At.accountName,children:p}),n.jsxs("p",{className:At.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),n.jsx("button",{type:"button",className:At.accountItem,onClick:k,children:"Account & Profile"}),_?n.jsx("a",{className:At.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,n.jsx("hr",{className:At.accountDivider}),n.jsx("button",{type:"button",className:`${At.accountItem} ${At.accountLogout}`,onClick:E,children:"Logout"})]})}return null};return n.jsxs("div",{className:At.accountRoot,ref:u,children:[i?n.jsxs("div",{className:At.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[n.jsx("span",{className:At.avatarSpinner,"aria-hidden":"true"}),n.jsx("span",{className:At.srOnly,children:"Checking login status"})]}):n.jsx("button",{type:"button",className:At.avatarBtn,"aria-haspopup":"menu","aria-expanded":l,"aria-label":p,onClick:b,children:n.jsx("img",{className:At.avatar,src:g,alt:p})}),!i&&l&&n.jsx("div",{className:At.accountDropdown,role:"menu",children:L()})]})},AB=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub",area:"main",titleKey:"nav.guideHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],$j=["guest","user","moderator","developer","admin"];function D3(t){const e=t.trim();if(!e)return"/";const s=e.startsWith("/")?e:`/${e}`;return s==="/"?s:s.replace(/\/+$/,"").toLowerCase()}function M3(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function F3(t){if(!Array.isArray(t))return;const e=t.map(s=>M3(s)).filter(Boolean);return e.length?e:void 0}function B3(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function $3(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function W1(t){var e,s,r;return{...t,id:t.id.trim(),route:D3(t.route),area:t.area.trim(),allowedRoles:(e=F3(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(s=B3(t.allowedGroups))!=null?s:t.allowedGroups,allowedUserIds:(r=$3(t.allowedUserIds))!=null?r:t.allowedUserIds}}function IB(t,e){if(!e||typeof e!="object")return null;const s=e,r=typeof s.route=="string"?s.route:"",i=typeof s.area=="string"?s.area:"",a=typeof s.id=="string"&&s.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const l={id:a,route:r,area:i,titleKey:typeof s.titleKey=="string"?s.titleKey:void 0,status:typeof s.status=="string"?s.status:void 0,minRole:M3(s.minRole),allowedRoles:F3(s.allowedRoles),allowedGroups:B3(s.allowedGroups),allowedUserIds:$3(s.allowedUserIds),showInTopbar:typeof s.showInTopbar=="boolean"?s.showInTopbar:void 0,showInSidebar:typeof s.showInSidebar=="boolean"?s.showInSidebar:void 0,navOrder:typeof s.navOrder=="number"?s.navOrder:void 0,isExperimental:typeof s.isExperimental=="boolean"?s.isExperimental:void 0,description:typeof s.description=="string"?s.description:void 0};return W1(l)}function RB(t){const e={},s={};return t.forEach(r=>{const i=W1(r);e[i.id]=i,s[i.route]=i}),{byId:e,byRoute:s}}const Ia=RB(AB),PB={...Ia,loading:!1,error:null};function LB(t,e){const s={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const l=i;s[l]=a}}),s}function DB(t){const e={...Ia.byId},s={...Ia.byRoute};return t.forEach(r=>{const i=W1(r),a=e[i.id],l=LB(a,i);e[l.id]=l,s[l.route]=l}),{byId:e,byRoute:s}}const O3=J.createContext(PB),MB=({children:t})=>{const[e,s]=J.useState({...Ia,loading:!0,error:null});J.useEffect(()=>{let i=!0;return(async()=>{try{const l=await un(Yl(ct,"feature_access")),d=[];l.forEach(h=>{const p=IB(h.id,h.data());p&&d.push(p)});const u=DB(d);i&&s({...u,loading:!1,error:null})}catch(l){const d=l,u=d==null?void 0:d.code,h=u==="permission-denied"||u==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore feature_access ${h?"not readable":"load failed"}. Falling back to defaults.`,l),i&&s(g=>({...g,loading:!1,error:l instanceof Error?l.message:"Failed to load feature access rules"}))}})(),()=>{i=!1}},[]);const r=J.useMemo(()=>e,[e]);return n.jsx(O3.Provider,{value:r,children:t})};function FB(){return J.useContext(O3)}function BB(t,e){var i,a,l;if(!t)return;const s=e!=null?e:Ia,r=D3(t);return(l=(a=(i=s.byId[t])!=null?i:s.byRoute[r])!=null?a:Ia.byId[t])!=null?l:Ia.byRoute[r]}function $B(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function OB(t,e,s,r,i){if(s)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const l=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&l!=="developer"&&l!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!l&&t.allowedRoles.includes(l);if(t.minRole){const d=$j.indexOf(l),u=$j.indexOf(t.minRole);return d>=u&&d!==-1}return!0}function Ig(){var k;let t=null;try{t=zo().user}catch(E){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:s,loading:r,error:i}=FB(),a=J.useMemo(()=>({byId:e!=null?e:Ia.byId,byRoute:s!=null?s:Ia.byRoute}),[e,s]),l=J.useMemo(()=>$B(t==null?void 0:t.roles),[t==null?void 0:t.roles]),d=J.useMemo(()=>{var E;return!!((E=t==null?void 0:t.roles)!=null&&E.includes("admin"))},[t==null?void 0:t.roles]),u=J.useMemo(()=>{var E;return(E=t==null?void 0:t.accessGroups)!=null?E:[]},[t==null?void 0:t.accessGroups]),h=(k=t==null?void 0:t.id)!=null?k:null,p=J.useCallback(E=>BB(E,a),[a]),g=J.useCallback(E=>E?OB(E,l,d,h,u):!0,[d,u,h,l]),v=J.useCallback(E=>{if(!E)return!0;const L=p(E);return g(L)},[g,p]),b=J.useCallback(E=>{if(!E)return!0;const L=p(E);return L?L.status==="hidden"||L.showInSidebar===!1?!1:g(L):!0},[g,p]),S=J.useCallback(E=>{if(!E)return!0;const L=p(E);return L?L.status==="hidden"||L.showInTopbar===!1?!1:g(L):!0},[g,p]);return{loading:r,error:i,rulesById:e,rulesByRoute:s,storeRules:a,resolveRule:p,canAccessRule:g,canAccessFeature:v,isVisibleInSidebar:b,isVisibleInTopbar:S}}const V3=T.createContext(null);function VB({children:t}){const{canAccessFeature:e}=Ig(),[s,r]=T.useState(!1),[i,a]=T.useState("csv"),l=e("main.uploadCenter"),d=T.useCallback(p=>{l&&(p!=null&&p.tab?a(p.tab):a("csv"),r(!0))},[l]),u=T.useCallback(()=>r(!1),[]),h=T.useMemo(()=>({isOpen:s,open:d,close:u,activeTab:i,setTab:a,canUse:l}),[s,d,u,i,l]);return n.jsx(V3.Provider,{value:h,children:t})}function q1(){const t=T.useContext(V3);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const xi={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},yi=t=>`https://drive.google.com/uc?export=view&id=${t}`,U3=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),pn=[{key:"warrior",label:"Warrior",iconUrl:yi(xi.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:yi(xi.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:yi(xi.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:yi(xi.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:yi(xi["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:yi(xi.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:yi(xi["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:yi(xi.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:yi(xi.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:yi(xi.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:yi(xi.paladin),fallback:""}],Oj=Object.fromEntries(pn.map(t=>[t.key,t])),o0=new Map;function Rs(t,e){o0.set(U3(t),e)}for(const t of pn)Rs(t.key,t.key),Rs(t.label,t.key);Rs("war","warrior");Rs("krieger","warrior");Rs("magier","mage");Rs("jaeger","scout");Rs("jger","scout");Rs("assa","assassin");Rs("meuchelmoerder","assassin");Rs("meuchelmrder","assassin");Rs("demonhunter","demon-hunter");Rs("dh","demon-hunter");Rs("daemonenjaeger","demon-hunter");Rs("dmonenjger","demon-hunter");Rs("zerker","berserker");Rs("battlemage","battle-mage");Rs("kampfmagier","battle-mage");Rs("bm","battle-mage");Rs("druide","druid");Rs("barde","bard");Rs("necro","necromancer");Rs("nekromant","necromancer");Rs("pala","paladin");function UB(t){const e=U3(t);if(!e)return{};const s=o0.get(e);if(s){const r=Oj[s];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of o0.entries())if(r.startsWith(e)||e.startsWith(r)){const a=Oj[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}function Rg(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const s=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(s!=null&&s[1])return s[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function nf(t){if(t==null)return;const e=Rg(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function z3(t,e=64){if(t==null)return;const s=Rg(t);if(!s)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${s}&sz=w${r}`}function H3(t,e){const s="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${s}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function G3(t,e,s,r){const i=nf(t);return i?H3(i,{w:e,h:s,fit:r}):void 0}function Fr(t,e=64){const s=z3(t,e);return s?H3(s,{w:e,h:e,fit:"contain"}):void 0}function Dy(t){if(t==null)return;const e=Rg(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function zB(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const zl=Object.assign(t=>nf(t),{id:Rg,direct:nf,thumb:z3,proxy:G3,thumbProxy:Fr,raw:Dy,gif:Dy,gifProxy:t=>{const e=Dy(t);return e&&/^https?:\/\//i.test(e)?zB(e):nf(t)}}),My=t=>Number.isFinite(t),Fc=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},HB=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function GB(t,e=64){if(!t)return;const s=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,""),r=s(t);let i=pn.find(a=>s(a.label)===r);if(i||(i=pn.find(a=>s(a.label).startsWith(r)||r.startsWith(s(a.label)))),!!i)return Fr(i.iconUrl,e)}function WB(t){const e=t.ref.parent,s=e==null?void 0:e.parent,r=s==null?void 0:s.parent;return{root:r==null?void 0:r.id,id:s==null?void 0:s.id}}function qB({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:s}){const r=si(),[i,a]=J.useState(""),[l,d]=J.useState(""),[u,h]=J.useState(!1),[p,g]=J.useState(null),[v,b]=J.useState([]),[S,k]=J.useState([]),[E,L]=J.useState([]),[M,N]=J.useState(-1),y=J.useRef(null);J.useEffect(()=>{const w=setTimeout(()=>d(i.trim()),200);return()=>clearTimeout(w)},[i]),J.useEffect(()=>{async function w(){g(null);const I=l;if(I.length<1){b([]),k([]),L([]),N(-1);return}h(!0);try{let F=function(xe){var ke,be,Ue,Ke,Tt,Mt,Ft,Vt,is,Ee,Le,Ie,He,ot,ht,yt,Ut,Bt,An,Ys,Ps,Un,yr,Br,vr,ue,Fe,Qe,vt,rt,_t,Jt,as,Js;const ge=xe.data(),{root:we,id:ve}=WB(xe),ce=ve||ge.playerId||ge.guildIdentifier||"";if(we==="players"||ge.playerId&&!ge.guildIdentifier){if(!ce||H.has(ce))return;H.add(ce),K.push({kind:"player",id:ce,name:(Ue=(be=ge.name)!=null?be:(ke=ge.values)==null?void 0:ke.Name)!=null?Ue:null,nameFold:(Ke=ge.nameFold)!=null?Ke:null,server:(Ft=(Mt=ge.server)!=null?Mt:(Tt=ge.values)==null?void 0:Tt.Server)!=null?Ft:null,guildName:(Ee=(is=ge.guildName)!=null?is:(Vt=ge.values)==null?void 0:Vt.Guild)!=null?Ee:null,className:(He=(Ie=ge.className)!=null?Ie:(Le=ge.values)==null?void 0:Le.Class)!=null?He:null,level:Fc((ht=ge.level)!=null?ht:(ot=ge.values)==null?void 0:ot.Level),ts:Fc(ge.timestamp)});return}if(we==="guilds"||ge.guildIdentifier&&!ge.playerId){if(!ce||q.has(ce))return;q.add(ce),G.push({kind:"guild",id:ce,name:(Bt=(Ut=ge.name)!=null?Ut:(yt=ge.values)==null?void 0:yt.Name)!=null?Bt:null,nameFold:(An=ge.nameFold)!=null?An:null,server:(Un=(Ps=ge.server)!=null?Ps:(Ys=ge.values)==null?void 0:Ys.Server)!=null?Un:null,memberCount:Fc((ue=(Br=ge.memberCount)!=null?Br:(yr=ge.values)==null?void 0:yr["Guild Member Count"])!=null?ue:(vr=ge.values)==null?void 0:vr.GuildMemberCount),hofRank:Fc((Js=(Jt=(rt=(Qe=ge.hofRank)!=null?Qe:(Fe=ge.values)==null?void 0:Fe["Hall of Fame Rank"])!=null?rt:(vt=ge.values)==null?void 0:vt.HoF)!=null?Jt:(_t=ge.values)==null?void 0:_t.Rank)!=null?Js:(as=ge.values)==null?void 0:as["Guild Rank"]),ts:Fc(ge.timestamp)});return}};const R=HB(I),B=jg(ct,"latest"),$=await un(On(B,Ca("nameFold"),Al(R),Il(R+""),Zn(e*6))),W=await un(On(B,Mo("nameNgrams","array-contains",R),Zn(e*6))),H=new Set,q=new Set,K=[],G=[];$.forEach(F),W.forEach(F);const se=Yl(ct,"servers"),ne=I.toLowerCase(),U=I.toUpperCase(),Z=[un(On(se,Ca("displayName"),Al(I),Il(I+""),Zn(e*4))),un(On(se,Ca("code"),Al(U),Il(U+""),Zn(e*4))),un(On(se,Ca("host"),Al(ne),Il(ne+""),Zn(e*4)))],le=await Promise.allSettled(Z),ee=new Set,he=[];for(const xe of le)xe.status==="fulfilled"&&xe.value.forEach(ge=>{var ce,ke,be,Ue,Ke;const we=ge.data(),ve=ge.id;!ve||ee.has(ve)||(ee.add(ve),he.push({kind:"server",id:ve,displayName:(ce=we.displayName)!=null?ce:null,code:(ke=we.code)!=null?ke:null,host:(be=we.host)!=null?be:null,region:(Ue=we.region)!=null?Ue:null,type:(Ke=we.type)!=null?Ke:null,numericId:Fc(we.numericId),active:typeof we.active=="boolean"?we.active:null}))});b(K.slice(0,e)),k(G.slice(0,e)),L(he.slice(0,e)),N(K.length+G.length+he.length?0:-1)}catch(F){g((F==null?void 0:F.message)||"Unbekannter Fehler bei der Suche."),b([]),k([]),L([]),N(-1)}finally{h(!1)}}return w(),()=>{}},[l,e]),J.useEffect(()=>{const w=I=>{y.current&&(y.current.contains(I.target)||(b([]),k([]),L([]),N(-1)))};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const _=[...v,...S,...E],D=w=>{w.kind==="player"?r(`/player/${encodeURIComponent(w.id)}`):w.kind==="guild"?r(`/guild/${encodeURIComponent(w.id)}`):r(`/server/${encodeURIComponent(w.id)}`),b([]),k([]),L([]),N(-1),a("")},C=w=>{if(_.length)if(w.key==="ArrowDown")w.preventDefault(),N(I=>(I+1)%_.length);else if(w.key==="ArrowUp")w.preventDefault(),N(I=>(I-1+_.length)%_.length);else if(w.key==="Enter"){w.preventDefault();const I=_[M>=0?M:0];I&&D(I)}else w.key==="Escape"&&(b([]),k([]),L([]),N(-1))};return n.jsxs("div",{ref:y,style:Nt.wrap,children:[n.jsx("input",{style:Nt.input,placeholder:t,value:i,onChange:w=>a(w.target.value),onKeyDown:C,"aria-label":"Spieler, Gilden und Server suchen"}),(u||p||v.length||S.length||E.length)&&n.jsxs("div",{style:Nt.dropdown,children:[u&&n.jsx("div",{style:Nt.hint,children:"Suche"}),p&&!u&&n.jsxs("div",{style:Nt.err,children:[" ",p]}),!u&&!p&&(v.length>0||S.length>0||E.length>0)&&n.jsxs(n.Fragment,{children:[v.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:Nt.sectionHdr,children:"Spieler"}),v.map((w,I)=>{var B,$,W,H;const F=I===M,R=(B=s==null?void 0:s(w.className,64))!=null?B:GB(w.className,64);return n.jsxs("button",{onClick:()=>D(w),style:F?Nt.itemActive:Nt.item,title:w.name||"",onMouseEnter:()=>N(I),children:[n.jsx("div",{style:Nt.iconBoxPlain,children:R?n.jsx("img",{src:R,alt:"",style:Nt.iconImgShadow,onError:q=>{const K=q.currentTarget.parentElement;K&&(K.innerHTML='<div style="font-size:12px;color:#B0C4D9;"></div>')}}):n.jsx("div",{style:Nt.iconFallback,children:(w.className||" ? ").toString().slice(0,2)})}),n.jsxs("div",{style:Nt.meta,children:[n.jsxs("div",{style:Nt.line1,children:[n.jsx("span",{style:Nt.name,children:($=w.name)!=null?$:"Unbekannt"}),My(w.level)&&n.jsxs("span",{style:Nt.badge,children:["Lvl ",w.level]})]}),n.jsxs("div",{style:Nt.line2,children:[w.guildName?n.jsxs("span",{children:["",w.guildName,""]}):n.jsx("span",{style:Nt.muted,children:""}),n.jsx("span",{style:Nt.sep,children:""}),n.jsx("span",{children:(W=w.className)!=null?W:"Klasse ?"}),n.jsx("span",{style:Nt.sep,children:""}),n.jsx("span",{children:(H=w.server)!=null?H:"Server ?"})]})]})]},`p-${w.id}-${I}`)})]}),S.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:Nt.sectionHdr,children:"Gilden"}),S.map((w,I)=>{var B,$;const F=v.length+I,R=F===M;return n.jsxs("button",{onClick:()=>D(w),style:R?Nt.itemActive:Nt.item,title:w.name||"",onMouseEnter:()=>N(F),children:[n.jsx("div",{style:Nt.iconBox,children:""}),n.jsxs("div",{style:Nt.meta,children:[n.jsxs("div",{style:Nt.line1,children:[n.jsx("span",{style:Nt.name,children:(B=w.name)!=null?B:"Unbekannt"}),My(w.hofRank)&&n.jsxs("span",{style:Nt.badge,children:["HoF #",w.hofRank]})]}),n.jsxs("div",{style:Nt.line2,children:[n.jsx("span",{children:($=w.server)!=null?$:"Server ?"}),n.jsx("span",{style:Nt.sep,children:""}),n.jsx("span",{children:My(w.memberCount)?`${w.memberCount} Mitglieder`:"Mitglieder ?"})]})]})]},`g-${w.id}-${I}`)})]}),E.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:Nt.sectionHdr,children:"Server"}),E.map((w,I)=>{var B,$,W,H,q,K;const F=v.length+S.length+I,R=F===M;return n.jsxs("button",{onClick:()=>D(w),style:R?Nt.itemActive:Nt.item,title:w.displayName||w.code||w.host||"",onMouseEnter:()=>N(F),children:[n.jsx("div",{style:Nt.iconBoxPlain,children:n.jsx("div",{style:Nt.serverGlyph,children:""})}),n.jsxs("div",{style:Nt.meta,children:[n.jsxs("div",{style:Nt.line1,children:[n.jsx("span",{style:Nt.name,children:(W=($=(B=w.displayName)!=null?B:w.code)!=null?$:w.host)!=null?W:w.id}),w.active!=null&&n.jsx("span",{style:Nt.badge,children:w.active?"Aktiv":"Inaktiv"})]}),n.jsxs("div",{style:Nt.line2,children:[n.jsx("span",{children:(H=w.code)!=null?H:""}),n.jsx("span",{style:Nt.sep,children:""}),n.jsx("span",{children:(q=w.host)!=null?q:""}),n.jsx("span",{style:Nt.sep,children:""}),n.jsx("span",{children:(K=w.region)!=null?K:""}),w.type?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:Nt.sep,children:""}),n.jsx("span",{children:w.type.toUpperCase()})]}):null]})]})]},`s-${w.id}-${I}`)})]})]}),!u&&!p&&v.length===0&&S.length===0&&E.length===0&&l.length>=1&&n.jsx("div",{style:Nt.hint,children:"Keine Treffer"})]})]})}const Nt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},muted:{opacity:.7}},wm=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function K1(t,e=64){if(!t)return;const s=wm(t);let r=pn.find(i=>wm(i.label)===s);return r||(r=pn.find(i=>wm(i.label).startsWith(s)||s.startsWith(wm(i.label)))),r?Fr(r.iconUrl,e):void 0}const KB=[{to:"/",label:"Home",featureId:"main.home"},{to:"/dashboard",label:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",label:"Guild Hub",featureId:"main.guildHub"},{to:"/community",label:"Community",featureId:"main.community"},{to:"/tools",label:"Tools",featureId:"main.tools"}];function QB(t,e){return K1(t,e)}function XB({user:t}){const{open:e,canUse:s}=q1(),{isVisibleInTopbar:r}=Ig(),i=J.useMemo(()=>KB.filter(l=>!l.featureId||r(l.featureId)),[r]),a=()=>{e({tab:"json"})};return n.jsxs("header",{className:At.topbar,children:[n.jsxs("div",{className:At.topbarLeft,children:[n.jsx("button",{className:At.btnIco,"aria-label":"Benachrichtigungen",children:n.jsx(HP,{className:At.ico})}),n.jsx("button",{className:At.btnIco,"aria-label":"Favoriten",children:n.jsx(YL,{className:At.ico})}),i.length>0?n.jsx("nav",{className:At.topbarNav,"aria-label":"Schnellzugriff",children:i.map(l=>n.jsx(ws,{to:l.to,className:({isActive:d})=>`${At.pill} ${At.topbarLink} ${d?At.pillActive:""}`,children:l.label},l.to))}):null]}),n.jsx("div",{className:At.searchWrap,children:n.jsx(qB,{placeholder:"Suchen (Spieler)",getClassIcon:QB,maxPerSection:10})}),n.jsxs("div",{className:At.topbarRight,children:[n.jsxs("a",{className:`${At.pill} ${At.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer",children:[n.jsx(xL,{className:At.ico}),"www.sfgame.net"]}),s?n.jsxs("button",{className:At.upload,"aria-label":"Scan hochladen",onClick:a,title:"Scan hochladen",children:[n.jsx(a6,{className:At.ico}),n.jsx("span",{className:At.label,children:"Scan hochladen"})]}):null,n.jsx(EB,{fallbackName:t==null?void 0:t.name})]})]})}const YB="_root_1scwm_3",JB="_expanded_1scwm_45",ZB="_headRow_1scwm_55",e$="_headTitle_1scwm_63",t$="_headDot_1scwm_65",s$="_headLabel_1scwm_67",n$="_pinBtn_1scwm_69",r$="_navScroll_1scwm_81",i$="_pad_1scwm_83",a$="_segCard_1scwm_89",o$="_segTitle_1scwm_121",l$="_navCol_1scwm_139",c$="_navItemWrap_1scwm_141",d$="_navBtn_1scwm_147",u$="_navBtnActive_1scwm_171",h$="_label_1scwm_175",p$="_trailing_1scwm_205",m$="_isOpen_1scwm_253",f$="_footer_1scwm_279",g$="_login_1scwm_281",x$="_userMeta_1scwm_303",y$="_footerLink_1scwm_317",v$="_legal_1scwm_345",b$="_labelText_1scwm_369",_$="_char_1scwm_379",w$="_mainNavCard_1scwm_447",Qt={root:YB,expanded:JB,headRow:ZB,headTitle:e$,headDot:t$,headLabel:s$,pinBtn:n$,navScroll:r$,pad:i$,segCard:a$,segTitle:o$,navCol:l$,navItemWrap:c$,navBtn:d$,navBtnActive:u$,label:h$,trailing:p$,isOpen:m$,footer:f$,login:g$,userMeta:x$,footerLink:y$,legal:v$,labelText:b$,char:_$,mainNavCard:w$},j$="_panel_90cjk_1",S$="_open_90cjk_31",N$="_col_90cjk_43",k$="_link_90cjk_55",C$="_linkActive_90cjk_73",qu={panel:j$,open:S$,col:N$,link:k$,linkActive:C$};function T$(t,e=8){const s=t.getBoundingClientRect();return{left:Math.round(s.right+e),top:Math.round(s.top)}}function E$({anchorEl:t,open:e,items:s,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[l,d]=J.useState({left:0,top:0});return J.useEffect(()=>{if(!e||!t)return;const u=()=>d(T$(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(s!=null&&s.length)&&console.log("submenu items:",s.map(u=>u.label)),RP.createPortal(n.jsx("div",{className:`${qu.panel} ${e?qu.open:""}`,style:{left:l.left,top:l.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:n.jsx("div",{className:qu.col,children:s.map(u=>r(u))})}),document.body))}const A$=[{to:"/",label:"Home",icon:n.jsx(bL,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",label:"Discover",icon:n.jsx(lL,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",label:"Dashboard",icon:n.jsx(SL,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",label:"Settings",icon:n.jsx(VL,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",label:"Guild Hub",icon:n.jsx(Kl,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",label:"Admin",icon:n.jsx(GL,{className:"ico"}),featureId:"main.admin"},{to:"/playground",label:"Playground",icon:n.jsx(rg,{className:"ico"}),featureId:"main.playground"}],I$=[{to:"/toplists",label:"Toplists",icon:n.jsx(r6,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub",label:"Guide Hub",icon:n.jsx(WP,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",label:"Tools",icon:n.jsx(c6,{className:"ico"}),i18nKey:"nav.tools",featureId:"main.tools"},{to:"/community",label:"Community",icon:n.jsx(CL,{className:"ico"}),featureId:"main.community"},{to:"/scans",label:"Scans",icon:n.jsx(fL,{className:"ico"}),featureId:"main.scans"}],R$={"/guild-hub":[{to:"/guild-hub",label:"Overview"},{to:"/guild-hub/planner",label:"Guild Planner"},{to:"/guild-hub/fusion-planner",label:"Fusion Planner"},{to:"/guild-hub/compare-guilds",label:"Gildenvergleich"},{to:"/guild-hub/waitlist",label:"Waitlist"},{to:"/guild-hub/settings",label:"Settings"}],"/discover":[{to:"/players",label:"Players"},{to:"/sfmagazine",label:"SFMagazine"},{to:"/sfmagazine/historybook",label:"History Book"},{to:"/guilds",label:"Guilds"},{to:"/servers",label:"Servers"},{to:"/scans",label:"Scans"},{to:"/discover/favorites",label:"Favorites"}],"/admin":[{to:"/admin",label:"Overview"},{to:"/admin/errors",label:"Error log"},{to:"/admin/feedback",label:"Feedback"},{to:"/admin/users",label:"Users",minRole:"mod"}],"/settings":[{to:"/settings/profile",label:"Profile"},{to:"/settings/account",label:"Account"},{to:"/settings/appearance",label:"Appearance"}],"/playground":[{to:"/playground/list-views",label:"List Views"},{to:"/playground/rescan-widget",label:"Rescan Widget"},{to:"/playground/upload-sim",label:"Upload Simulator"},{to:"/playground/hud/game-buttons",label:"HUD  Game Buttons"}]};function P$(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function L$(t,e){return t?t.filter(s=>P$(e,s.minRole)):[]}const D$=220;function M$(t=D$){const[e,s]=J.useState(!1),r=J.useRef(null),i=J.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=J.useCallback(()=>{i(),s(!0)},[i]),l=J.useCallback(()=>{i(),r.current=window.setTimeout(()=>s(!1),t)},[i,t]);return J.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:l,setOpen:s}}function Q1({text:t,isOpen:e,duration:s=1,step:r=45}){const i=J.useMemo(()=>Array.from(t),[t]);return n.jsx("span",{className:Qt.label,children:n.jsx("span",{className:Qt.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${s}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,l)=>n.jsx("span",{className:Qt.char,style:{"--i":l},"aria-hidden":"true",children:a===" "?"":a},`${t}-${l}`))})})}function F$({it:t,label:e,collapsed:s,allowSubmenus:r,subItems:i}){const a=i.length>0,{open:l,onEnter:d,onLeave:u,setOpen:h}=M$(),p=J.useRef(null),g=J.useCallback(()=>{if(!r||!a){h(!1);return}d()},[r,a,d,h]);return n.jsxs("div",{ref:p,className:`${Qt.navItemWrap} ${l?Qt.isOpen:""}`,onMouseEnter:g,onMouseLeave:u,children:[n.jsxs(ws,{to:t.to,end:!!t.end,className:({isActive:v})=>`${Qt.navBtn} ${v?Qt.navBtnActive:""}`,children:[t.icon,n.jsx(Q1,{text:e,isOpen:!s}),a&&!s&&n.jsx("span",{className:Qt.trailing,"aria-hidden":"true",children:n.jsx(XP,{className:"ico"})})]}),a&&n.jsx(E$,{anchorEl:p.current,open:l,items:i.map(({to:v,label:b})=>({to:v,label:b})),renderLink:v=>n.jsx(ws,{to:v.to,end:!0,className:({isActive:b})=>`${qu.link} ${b?qu.linkActive:""}`,children:v.label},v.to),onMouseEnter:d,onMouseLeave:u})]})}function Vj({title:t,items:e,collapsed:s,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:l}){return n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:`${Qt.navTitle} ${Qt.segTitle}`,children:t}),n.jsx("div",{className:Qt.navCol,children:e.map(d=>{if(!l(d))return null;const u=L$(R$[d.to],i),h=d.i18nKey?a(d.i18nKey):d.label;return u.length?n.jsx(F$,{it:d,label:h,collapsed:s,allowSubmenus:r,subItems:u},d.to):n.jsxs(ws,{to:d.to,end:!!d.end,className:({isActive:p})=>`${Qt.navBtn} ${p?Qt.navBtnActive:""}`,children:[d.icon,n.jsx(Q1,{text:h,isOpen:!s})]},d.to)})})]})}const B$=90,$$=180;function O$({expanded:t,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:i=!0}){var w;const a=J.useRef(null),l=J.useRef(null),[d,u]=J.useState(!1),h=J.useCallback(()=>{a.current&&(window.clearTimeout(a.current),a.current=null),l.current&&(window.clearTimeout(l.current),l.current=null)},[]),p=J.useCallback(()=>{!i||s||(h(),u(!1),a.current=window.setTimeout(()=>e(!0),B$))},[i,s,h,e]),g=J.useCallback(()=>{!i||s||(h(),l.current=window.setTimeout(()=>{e(!1),u(!1)},$$))},[i,s,h,e]);J.useEffect(()=>()=>h(),[h]),J.useEffect(()=>{s&&u(!0)},[s]);const v=I=>{I.propertyName==="width"&&t&&!s&&u(!0)};J.useEffect(()=>{if(t&&!s){const I=window.setTimeout(()=>u(!0),250);return()=>window.clearTimeout(I)}},[t,s]);const b=!t,S=s||t&&d,k=si(),{t:E}=Gl(),{status:L,user:M,logout:N}=zo(),y=L==="authenticated",_=(w=M==null?void 0:M.roles)!=null?w:[],{isVisibleInSidebar:D}=Ig(),C=()=>{y?N():k("/login")};return n.jsxs("aside",{id:"sidebar-root",className:`${Qt.root} ${t?Qt.expanded:""}`,"data-collapsed":b?"true":"false",onMouseEnter:p,onMouseLeave:g,onTransitionEnd:v,"aria-label":"Navigation",children:[n.jsxs("div",{className:Qt.headRow,children:[n.jsxs("div",{className:Qt.headTitle,children:[n.jsx("span",{className:Qt.headDot})," ",n.jsx("span",{className:Qt.headLabel,children:"Navigation"})]}),n.jsx("button",{className:Qt.pinBtn,"aria-pressed":s,title:s?"Unpin":"Pin",onClick:()=>r(!s),type:"button",children:s?n.jsx(PL,{className:"ico"}):n.jsx(IL,{className:"ico"})})]}),n.jsx("div",{className:Qt.navScroll,children:n.jsxs("div",{className:Qt.pad,children:[n.jsx("div",{className:`${Qt.segCard} ${Qt.mainNavCard}`,children:n.jsx(Vj,{items:A$,collapsed:b,allowSubmenus:S,userRoles:_,translate:E,isItemVisible:I=>{var F;return D((F=I.featureId)!=null?F:I.to)}})}),n.jsx("div",{className:Qt.segTitle,children:"Kategorien"}),n.jsx("div",{className:`${Qt.segCard} ${Qt.mainNavCard}`,children:n.jsx(Vj,{items:I$,collapsed:b,allowSubmenus:S,userRoles:_,translate:E,isItemVisible:I=>{var F;return D((F=I.featureId)!=null?F:I.to)}})})]})}),n.jsxs("div",{className:`${Qt.footer} ${Qt.segCard} ${Qt.mainNavCard}`,children:[n.jsxs("button",{className:Qt.login,type:"button",onClick:C,children:[n.jsx(Kl,{className:"ico"}),n.jsx(Q1,{text:y?"Logout":"Login",isOpen:!b})]}),y&&(M!=null&&M.displayName)?n.jsx("div",{className:Qt.userMeta,title:M.displayName,children:M.displayName}):null,n.jsx(ws,{to:"/help",className:Qt.footerLink,children:E("nav.help",{defaultValue:"Help"})}),n.jsxs("div",{className:Qt.legal,children:["(c) 2025 ",E("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const rf="/assets/logo-sfdatahub-CUdhlsEb.png";function V$({src:t,alt:e="",children:s,to:r="/",loading:i="eager",decoding:a="async"}){const l=t!=null?t:rf;return n.jsxs("div",{className:"logo-dock",children:[n.jsx(ws,{to:r,"aria-label":"Go to home",children:n.jsx("img",{className:"logo-img",src:l,alt:e,loading:i,decoding:a,onError:d=>{const u=d.currentTarget;u.src!==rf&&(u.src=rf)}})}),s]})}const U$={borderColor:"#2B4C73",background:"#1A2F4A"};function z$(){const[t,e]=T.useState(!1),[s,r]=T.useState(!1),i=s||t,{t:a}=Gl(),l=T.useMemo(()=>i?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i]),d=a("footer.about.body").split(`

`),u=[{key:"tos",to:"/playground/legal/tos",label:a("help.sections.legal.items.tos",{defaultValue:"Terms of Service (ToS)"})},{key:"privacy",to:"/playground/legal/tos",label:a("help.sections.legal.items.privacy",{defaultValue:"Privacy Policy"})},{key:"imprint",to:"/help",label:a("help.sections.legal.items.imprint",{defaultValue:"Imprint / Contact"})}];return n.jsxs("div",{id:"app-shell","data-sidebar":i?"expanded":"collapsed",style:{"--left":l},children:[n.jsx(V$,{src:"/logo.png"}),n.jsx(XB,{}),n.jsx("div",{className:"logo-fill"}),n.jsx(O$,{expanded:i,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:!s}),n.jsx("div",{className:"content",children:n.jsx("div",{className:"content-inner",children:n.jsxs("div",{className:"content-body",children:[n.jsx(aC,{}),n.jsx("div",{className:"mt-4 px-4 md:px-6",children:n.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:U$,children:[n.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:a("footer.about.title")}),n.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:d.map((h,p)=>n.jsx("p",{className:"whitespace-pre-line",children:h},`footer-about-${p}`))}),n.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[n.jsx("div",{children:a("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),n.jsx("div",{children:a("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:u.map(h=>n.jsx(rs,{to:h.to,className:"underline hover:no-underline",children:h.label},h.key))})]})})]})})})]})}const W3=T.createContext({});function X1(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Y1=T.createContext(null),J1=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function H$(t=!0){const e=T.useContext(Y1);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=e,a=T.useId();T.useEffect(()=>{t&&i(a)},[t]);const l=T.useCallback(()=>t&&r&&r(a),[a,r,t]);return!s&&r?[!1,l]:[!0]}const Z1=typeof window!="undefined",q3=Z1?T.useLayoutEffect:T.useEffect,Lr=t=>t;let K3=Lr;function eb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hl=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r},Ki=t=>t*1e3,Qi=t=>t/1e3,G$={useManualTiming:!1};function W$(t){let e=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(h){a.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,p=!1,g=!1)=>{const b=g&&r?e:s;return p&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{s.delete(h),a.delete(h)},process:h=>{if(l=h,r){i=!0;return}r=!0,[e,s]=[s,e],e.forEach(d),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const jm=["read","resolveKeyframes","update","preRender","render","postRender"],q$=40;function Q3(t,e){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,l=jm.reduce((L,M)=>(L[M]=W$(a),L),{}),{read:d,resolveKeyframes:u,update:h,preRender:p,render:g,postRender:v}=l,b=()=>{const L=performance.now();s=!1,i.delta=r?1e3/60:Math.max(Math.min(L-i.timestamp,q$),1),i.timestamp=L,i.isProcessing=!0,d.process(i),u.process(i),h.process(i),p.process(i),g.process(i),v.process(i),i.isProcessing=!1,s&&e&&(r=!1,t(b))},S=()=>{s=!0,r=!0,i.isProcessing||t(b)};return{schedule:jm.reduce((L,M)=>{const N=l[M];return L[M]=(y,_=!1,D=!1)=>(s||S(),N.schedule(y,_,D)),L},{}),cancel:L=>{for(let M=0;M<jm.length;M++)l[jm[M]].cancel(L)},state:i,steps:l}}const{schedule:gs,cancel:Oa,state:bn,steps:Fy}=Q3(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Lr,!0),X3=T.createContext({strict:!1}),Uj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yd={};for(const t in Uj)yd[t]={isEnabled:e=>Uj[t].some(s=>!!e[s])};function K$(t){for(const e in t)yd[e]={...yd[e],...t[e]}}const Q$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Q$.has(t)}let Y3=t=>!Pf(t);function X$(t){t&&(Y3=e=>e.startsWith("on")?!Pf(e):t(e))}try{X$(require("@emotion/is-prop-valid").default)}catch(t){}function Y$(t,e,s){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Y3(i)||s===!0&&Pf(i)||!e&&!Pf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function J$(t){if(typeof Proxy=="undefined")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Pg=T.createContext({});function vh(t){return typeof t=="string"||Array.isArray(t)}function Lg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const tb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sb=["initial",...tb];function Dg(t){return Lg(t.animate)||sb.some(e=>vh(t[e]))}function J3(t){return!!(Dg(t)||t.variants)}function Z$(t,e){if(Dg(t)){const{initial:s,animate:r}=t;return{initial:s===!1||vh(s)?s:void 0,animate:vh(r)?r:void 0}}return t.inherit!==!1?e:{}}function eO(t){const{initial:e,animate:s}=Z$(t,T.useContext(Pg));return T.useMemo(()=>({initial:e,animate:s}),[zj(e),zj(s)])}function zj(t){return Array.isArray(t)?t.join(" "):t}const tO=Symbol.for("motionComponentSymbol");function qc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sO(t,e,s){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):qc(s)&&(s.current=r))},[e])}const nb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nO="framerAppearId",Z3="data-"+nb(nO),{schedule:rb}=Q3(queueMicrotask,!1),e5=T.createContext({});function rO(t,e,s,r,i){var a,l;const{visualElement:d}=T.useContext(Pg),u=T.useContext(X3),h=T.useContext(Y1),p=T.useContext(J1).reducedMotion,g=T.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:d,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const v=g.current,b=T.useContext(e5);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&iO(g.current,s,i,b);const S=T.useRef(!1);T.useInsertionEffect(()=>{v&&S.current&&v.update(s,h)});const k=s[Z3],E=T.useRef(!!k&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,k))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,k)));return q3(()=>{v&&(S.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),rb.render(v.render),E.current&&v.animationState&&v.animationState.animateChanges())}),T.useEffect(()=>{v&&(!E.current&&v.animationState&&v.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)===null||L===void 0||L.call(window,k)}),E.current=!1))}),v}function iO(t,e,s,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:t5(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&qc(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function t5(t){if(t)return t.options.allowProjection!==!1?t.projection:t5(t.parent)}function aO({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:i}){var a,l;t&&K$(t);function d(h,p){let g;const v={...T.useContext(J1),...h,layoutId:oO(h)},{isStatic:b}=v,S=eO(h),k=r(h,b);if(!b&&Z1){lO();const E=cO(v);g=E.MeasureLayout,S.visualElement=rO(i,k,v,e,E.ProjectionNode)}return n.jsxs(Pg.Provider,{value:S,children:[g&&S.visualElement?n.jsx(g,{visualElement:S.visualElement,...v}):null,s(i,h,sO(k,S.visualElement,p),k,b,S.visualElement)]})}d.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const u=T.forwardRef(d);return u[tO]=i,u}function oO({layoutId:t}){const e=T.useContext(W3).id;return e&&t!==void 0?e+"-"+t:t}function lO(t,e){T.useContext(X3).strict}function cO(t){const{drag:e,layout:s}=yd;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const dO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ib(t){return typeof t!="string"||t.includes("-")?!1:!!(dO.indexOf(t)>-1||/[A-Z]/u.test(t))}function Hj(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function ab(t,e,s,r){if(typeof e=="function"){const[i,a]=Hj(r);e=e(s!==void 0?s:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Hj(r);e=e(s!==void 0?s:t.custom,i,a)}return e}const l0=t=>Array.isArray(t),uO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),hO=t=>l0(t)?t[t.length-1]||0:t,hn=t=>!!(t&&t.getVelocity);function af(t){const e=hn(t)?t.get():t;return uO(e)?e.toValue():e}function pO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},r,i,a){const l={latestValues:mO(r,i,a,t),renderState:e()};return s&&(l.onMount=d=>s({props:r,current:d,...l}),l.onUpdate=d=>s(d)),l}const s5=t=>(e,s)=>{const r=T.useContext(Pg),i=T.useContext(Y1),a=()=>pO(t,e,r,i);return s?a():X1(a)};function mO(t,e,s,r){const i={},a=r(t,{});for(const v in a)i[v]=af(a[v]);let{initial:l,animate:d}=t;const u=Dg(t),h=J3(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let p=s?s.initial===!1:!1;p=p||l===!1;const g=p?d:l;if(g&&typeof g!="boolean"&&!Lg(g)){const v=Array.isArray(g)?g:[g];for(let b=0;b<v.length;b++){const S=ab(t,v[b]);if(S){const{transitionEnd:k,transition:E,...L}=S;for(const M in L){let N=L[M];if(Array.isArray(N)){const y=p?N.length-1:0;N=N[y]}N!==null&&(i[M]=N)}for(const M in k)i[M]=k[M]}}}return i}const Rd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jl=new Set(Rd),n5=t=>e=>typeof e=="string"&&e.startsWith(t),r5=n5("--"),fO=n5("var(--"),ob=t=>fO(t)?gO.test(t.split("/*")[0].trim()):!1,gO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,i5=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Va=(t,e,s)=>s>e?e:s<t?t:s,Pd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bh={...Pd,transform:t=>Va(0,1,t)},Sm={...Pd,default:1},Hh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bo=Hh("deg"),Xi=Hh("%"),lt=Hh("px"),xO=Hh("vh"),yO=Hh("vw"),Gj={...Xi,parse:t=>Xi.parse(t)/100,transform:t=>Xi.transform(t*100)},vO={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,backgroundPositionX:lt,backgroundPositionY:lt},bO={rotate:bo,rotateX:bo,rotateY:bo,rotateZ:bo,scale:Sm,scaleX:Sm,scaleY:Sm,scaleZ:Sm,skew:bo,skewX:bo,skewY:bo,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:bh,originX:Gj,originY:Gj,originZ:lt},Wj={...Pd,transform:Math.round},lb={...vO,...bO,zIndex:Wj,size:lt,fillOpacity:bh,strokeOpacity:bh,numOctaves:Wj},_O={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wO=Rd.length;function jO(t,e,s){let r="",i=!0;for(let a=0;a<wO;a++){const l=Rd[a],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const h=i5(d,lb[l]);if(!u){i=!1;const p=_O[l]||l;r+=`${p}(${h}) `}s&&(e[l]=h)}}return r=r.trim(),s?r=s(e,i?"":r):i&&(r="none"),r}function cb(t,e,s){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const u in e){const h=e[u];if(Jl.has(u)){l=!0;continue}else if(r5(u)){i[u]=h;continue}else{const p=i5(h,lb[u]);u.startsWith("origin")?(d=!0,a[u]=p):r[u]=p}}if(e.transform||(l||s?r.transform=jO(e,t.transform,s):r.transform&&(r.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:p=0}=a;r.transformOrigin=`${u} ${h} ${p}`}}const SO={offset:"stroke-dashoffset",array:"stroke-dasharray"},NO={offset:"strokeDashoffset",array:"strokeDasharray"};function kO(t,e,s=1,r=0,i=!0){t.pathLength=1;const a=i?SO:NO;t[a.offset]=lt.transform(-r);const l=lt.transform(e),d=lt.transform(s);t[a.array]=`${l} ${d}`}function qj(t,e,s){return typeof t=="string"?t:lt.transform(e+s*t)}function CO(t,e,s){const r=qj(e,t.x,t.width),i=qj(s,t.y,t.height);return`${r} ${i}`}function db(t,{attrX:e,attrY:s,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:d=1,pathOffset:u=0,...h},p,g){if(cb(t,h,g),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:b,dimensions:S}=t;v.transform&&(S&&(b.transform=v.transform),delete v.transform),S&&(i!==void 0||a!==void 0||b.transform)&&(b.transformOrigin=CO(S,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(v.x=e),s!==void 0&&(v.y=s),r!==void 0&&(v.scale=r),l!==void 0&&kO(v,l,d,u,!1)}const ub=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),a5=()=>({...ub(),attrs:{}}),hb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function o5(t,{style:e,vars:s},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in s)t.style.setProperty(a,s[a])}const l5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function c5(t,e,s,r){o5(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(l5.has(i)?i:nb(i),e.attrs[i])}const Lf={};function TO(t){Object.assign(Lf,t)}function d5(t,{layout:e,layoutId:s}){return Jl.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Lf[t]||t==="opacity")}function pb(t,e,s){var r;const{style:i}=t,a={};for(const l in i)(hn(i[l])||e.style&&hn(e.style[l])||d5(l,t)||((r=s==null?void 0:s.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=i[l]);return a}function u5(t,e,s){const r=pb(t,e,s);for(const i in t)if(hn(t[i])||hn(e[i])){const a=Rd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function EO(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(s){e.dimensions={x:0,y:0,width:0,height:0}}}const Kj=["x","y","width","height","cx","cy","r"],AO={useVisualState:s5({scrapeMotionValuesFromProps:u5,createRenderState:a5,onUpdate:({props:t,prevProps:e,current:s,renderState:r,latestValues:i})=>{if(!s)return;let a=!!t.drag;if(!a){for(const d in i)if(Jl.has(d)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let d=0;d<Kj.length;d++){const u=Kj[d];t[u]!==e[u]&&(l=!0)}l&&gs.read(()=>{EO(s,r),gs.render(()=>{db(r,i,hb(s.tagName),t.transformTemplate),c5(s,r)})})}})},IO={useVisualState:s5({scrapeMotionValuesFromProps:pb,createRenderState:ub})};function h5(t,e,s){for(const r in e)!hn(e[r])&&!d5(r,s)&&(t[r]=e[r])}function RO({transformTemplate:t},e){return T.useMemo(()=>{const s=ub();return cb(s,e,t),Object.assign({},s.vars,s.style)},[e])}function PO(t,e){const s=t.style||{},r={};return h5(r,s,t),Object.assign(r,RO(t,e)),r}function LO(t,e){const s={},r=PO(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}function DO(t,e,s,r){const i=T.useMemo(()=>{const a=a5();return db(a,e,hb(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};h5(a,t.style,t),i.style={...a,...i.style}}return i}function MO(t=!1){return(s,r,i,{latestValues:a},l)=>{const u=(ib(s)?DO:LO)(r,a,l,s),h=Y$(r,typeof s=="string",t),p=s!==T.Fragment?{...h,...u,ref:i}:{},{children:g}=r,v=T.useMemo(()=>hn(g)?g.get():g,[g]);return T.createElement(s,{...p,children:v})}}function FO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...ib(r)?AO:IO,preloadedFeatures:t,useRender:MO(i),createVisualElement:e,Component:r};return aO(l)}}function p5(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}function Mg(t,e,s){const r=t.getProps();return ab(r,e,s!==void 0?s:r.custom,t)}const BO=eb(()=>window.ScrollTimeline!==void 0);class $O{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=s}attachTimeline(e,s){const r=this.animations.map(i=>{if(BO()&&i.attachTimeline)return i.attachTimeline(e);if(typeof s=="function")return s(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class m5 extends $O{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function mb(t,e){return t?t[e]||t.default||t:void 0}const Df=2e4;function fb(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<Df;)e+=s,r=t.next(e);return e>=Df?1/0:e}function OO(t,e=100,s){const r=s({...t,keyframes:[0,e]}),i=Math.min(fb(r),Df);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Qi(i)}}function Fg(t){return typeof t=="function"}function Qj(t,e){t.timeline=e,t.onfinish=null}const gb=t=>Array.isArray(t)&&typeof t[0]=="number",VO={linearEasing:void 0};function UO(t,e){const s=eb(t);return()=>{var r;return(r=VO[e])!==null&&r!==void 0?r:s()}}const Mf=UO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),f5=(t,e,s=10)=>{let r="";const i=Math.max(Math.round(e/s),2);for(let a=0;a<i;a++)r+=t(Hl(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function g5(t){return!!(typeof t=="function"&&Mf()||!t||typeof t=="string"&&(t in c0||Mf())||gb(t)||Array.isArray(t)&&t.every(g5))}const Du=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,c0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Du([0,.65,.55,1]),circOut:Du([.55,0,1,.45]),backIn:Du([.31,.01,.66,-.59]),backOut:Du([.33,1.53,.69,.99])};function x5(t,e){if(t)return typeof t=="function"&&Mf()?f5(t,e):gb(t)?Du(t):Array.isArray(t)?t.map(s=>x5(s,e)||c0.easeOut):c0[t]}const bi={x:!1,y:!1};function y5(){return bi.x||bi.y}function v5(t,e,s){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=s==null?void 0:s[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function b5(t,e){const s=v5(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[s,i,()=>r.abort()]}function Xj(t){return e=>{e.pointerType==="touch"||y5()||t(e)}}function zO(t,e,s={}){const[r,i,a]=b5(t,s),l=Xj(d=>{const{target:u}=d,h=e(d);if(typeof h!="function"||!u)return;const p=Xj(g=>{h(g),u.removeEventListener("pointerleave",p)});u.addEventListener("pointerleave",p,i)});return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const _5=(t,e)=>e?t===e?!0:_5(t,e.parentElement):!1,xb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,HO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function GO(t){return HO.has(t.tagName)||t.tabIndex!==-1}const Mu=new WeakSet;function Yj(t){return e=>{e.key==="Enter"&&t(e)}}function By(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WO=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=Yj(()=>{if(Mu.has(s))return;By(s,"down");const i=Yj(()=>{By(s,"up")}),a=()=>By(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",a,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function Jj(t){return xb(t)&&!y5()}function qO(t,e,s={}){const[r,i,a]=b5(t,s),l=d=>{const u=d.currentTarget;if(!Jj(d)||Mu.has(u))return;Mu.add(u);const h=e(d),p=(b,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),!(!Jj(b)||!Mu.has(u))&&(Mu.delete(u),typeof h=="function"&&h(b,{success:S}))},g=b=>{p(b,s.useGlobalTarget||_5(u,b.target))},v=b=>{p(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return r.forEach(d=>{!GO(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(s.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),d.addEventListener("focus",h=>WO(h,i),i)}),a}function KO(t){return t==="x"||t==="y"?bi[t]?null:(bi[t]=!0,()=>{bi[t]=!1}):bi.x||bi.y?null:(bi.x=bi.y=!0,()=>{bi.x=bi.y=!1})}const w5=new Set(["width","height","top","left","right","bottom",...Rd]);let of;function QO(){of=void 0}const Yi={now:()=>(of===void 0&&Yi.set(bn.isProcessing||G$.useManualTiming?bn.timestamp:performance.now()),of),set:t=>{of=t,queueMicrotask(QO)}};function yb(t,e){t.indexOf(e)===-1&&t.push(e)}function Bg(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class vb{constructor(){this.subscriptions=[]}add(e){return yb(this.subscriptions,e),()=>Bg(this.subscriptions,e)}notify(e,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function j5(t,e){return e?t*(1e3/e):0}const Zj=30,XO=t=>!isNaN(parseFloat(t)),Ku={current:void 0};class YO{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=Yi.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Yi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=XO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new vb);const r=this.events[e].add(s);return e==="change"?()=>{r(),gs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Ku.current&&Ku.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zj)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Zj);return j5(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vd(t,e){return new YO(t,e)}function JO(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,vd(s))}function ZO(t,e){const s=Mg(t,e);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const l in a){const d=hO(a[l]);JO(t,l,d)}}function eV(t){return!!(hn(t)&&t.add)}function d0(t,e){const s=t.getValue("willChange");if(eV(s))return s.add(e)}function S5(t){return t.props[Z3]}const N5=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,tV=1e-7,sV=12;function nV(t,e,s,r,i){let a,l,d=0;do l=e+(s-e)/2,a=N5(l,r,i)-t,a>0?s=l:e=l;while(Math.abs(a)>tV&&++d<sV);return l}function Gh(t,e,s,r){if(t===e&&s===r)return Lr;const i=a=>nV(a,0,1,t,s);return a=>a===0||a===1?a:N5(i(a),e,r)}const k5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,C5=t=>e=>1-t(1-e),T5=Gh(.33,1.53,.69,.99),bb=C5(T5),E5=k5(bb),A5=t=>(t*=2)<1?.5*bb(t):.5*(2-Math.pow(2,-10*(t-1))),_b=t=>1-Math.sin(Math.acos(t)),I5=C5(_b),R5=k5(_b),P5=t=>/^0[^.\s]+$/u.test(t);function rV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||P5(t):!0}const Qu=t=>Math.round(t*1e5)/1e5,wb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iV(t){return t==null}const aV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jb=(t,e)=>s=>!!(typeof s=="string"&&aV.test(s)&&s.startsWith(t)||e&&!iV(s)&&Object.prototype.hasOwnProperty.call(s,e)),L5=(t,e,s)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(wb);return{[t]:parseFloat(i),[e]:parseFloat(a),[s]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},oV=t=>Va(0,255,t),$y={...Pd,transform:t=>Math.round(oV(t))},Rl={test:jb("rgb","red"),parse:L5("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+$y.transform(t)+", "+$y.transform(e)+", "+$y.transform(s)+", "+Qu(bh.transform(r))+")"};function lV(t){let e="",s="",r="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const u0={test:jb("#"),parse:lV,transform:Rl.transform},Kc={test:jb("hsl","hue"),parse:L5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+Xi.transform(Qu(e))+", "+Xi.transform(Qu(s))+", "+Qu(bh.transform(r))+")"},Mn={test:t=>Rl.test(t)||u0.test(t)||Kc.test(t),parse:t=>Rl.test(t)?Rl.parse(t):Kc.test(t)?Kc.parse(t):u0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Rl.transform(t):Kc.transform(t)},cV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dV(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(wb))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(cV))===null||s===void 0?void 0:s.length)||0)>0}const D5="number",M5="color",uV="var",hV="var(",eS="${}",pV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _h(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(pV,u=>(Mn.test(u)?(r.color.push(a),i.push(M5),s.push(Mn.parse(u))):u.startsWith(hV)?(r.var.push(a),i.push(uV),s.push(u)):(r.number.push(a),i.push(D5),s.push(parseFloat(u))),++a,eS)).split(eS);return{values:s,split:d,indexes:r,types:i}}function F5(t){return _h(t).values}function B5(t){const{split:e,types:s}=_h(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=s[l];d===D5?a+=Qu(i[l]):d===M5?a+=Mn.transform(i[l]):a+=i[l]}return a}}const mV=t=>typeof t=="number"?0:t;function fV(t){const e=F5(t);return B5(t)(e.map(mV))}const Oo={test:dV,parse:F5,createTransformer:B5,getAnimatableNone:fV},gV=new Set(["brightness","contrast","saturate","opacity"]);function xV(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(wb)||[];if(!r)return t;const i=s.replace(r,"");let a=gV.has(e)?1:0;return r!==s&&(a*=100),e+"("+a+i+")"}const yV=/\b([a-z-]*)\(.*?\)/gu,h0={...Oo,getAnimatableNone:t=>{const e=t.match(yV);return e?e.map(xV).join(" "):t}},vV={...lb,color:Mn,backgroundColor:Mn,outlineColor:Mn,fill:Mn,stroke:Mn,borderColor:Mn,borderTopColor:Mn,borderRightColor:Mn,borderBottomColor:Mn,borderLeftColor:Mn,filter:h0,WebkitFilter:h0},Sb=t=>vV[t];function $5(t,e){let s=Sb(t);return s!==h0&&(s=Oo),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const bV=new Set(["auto","none","0"]);function _V(t,e,s){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!bV.has(a)&&_h(a).values.length&&(i=t[r]),r++}if(i&&s)for(const a of e)t[a]=$5(s,i)}const tS=t=>t===Pd||t===lt,sS=(t,e)=>parseFloat(t.split(", ")[e]),nS=(t,e)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return sS(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?sS(a[1],t):0}},wV=new Set(["x","y","z"]),jV=Rd.filter(t=>!wV.has(t));function SV(t){const e=[];return jV.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const bd={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:nS(4,13),y:nS(5,14)};bd.translateX=bd.x;bd.translateY=bd.y;const Dl=new Set;let p0=!1,m0=!1;function O5(){if(m0){const t=Array.from(Dl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const i=SV(r);i.length&&(s.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))===null||d===void 0||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}m0=!1,p0=!1,Dl.forEach(t=>t.complete()),Dl.clear()}function V5(){Dl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(m0=!0)})}function NV(){V5(),O5()}class Nb{constructor(e,s,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Dl.add(this),p0||(p0=!0,gs.read(V5),gs.resolveKeyframes(O5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&s){const u=r.readValue(s,d);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=d),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Dl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Dl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const U5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),kV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CV(t){const e=kV.exec(t);if(!e)return[,];const[,s,r,i]=e;return[`--${s!=null?s:r}`,i]}function z5(t,e,s=1){const[r,i]=CV(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return U5(l)?parseFloat(l):l}return ob(i)?z5(i,e,s+1):i}const H5=t=>e=>e.test(t),TV={test:t=>t==="auto",parse:t=>t},G5=[Pd,lt,Xi,bo,yO,xO,TV],rS=t=>G5.find(H5(t));class W5 extends Nb{constructor(e,s,r,i,a){super(e,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),ob(h))){const p=z5(h,s.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!w5.has(r)||e.length!==2)return;const[i,a]=e,l=rS(i),d=rS(a);if(l!==d)if(tS(l)&&tS(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let i=0;i<e.length;i++)rV(e[i])&&r.push(i);r.length&&_V(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:s,name:r,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const a=s.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,d=i[l];i[l]=bd[r](s.measureViewportBox(),window.getComputedStyle(s.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{s.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const iS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Oo.test(t)||t==="0")&&!t.startsWith("url("));function EV(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function AV(t,e,s,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=iS(i,e),d=iS(a,e);return!l||!d?!1:EV(t)||(s==="spring"||Fg(s))&&r}const IV=t=>t!==null;function $g(t,{repeat:e,repeatType:s="loop"},r){const i=t.filter(IV),a=e&&s!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const RV=40;class q5{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Yi.now(),this.options={autoplay:e,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>RV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&NV(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=Yi.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:d,onUpdate:u,isGenerator:h}=this.options;if(!h&&!AV(e,r,i,a))if(l)this.options.duration=0;else{u&&u($g(e,this.options,s)),d&&d(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,s);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...p},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const js=(t,e,s)=>t+(e-t)*s;function Oy(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function PV({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let i=0,a=0,l=0;if(!e)i=a=l=s;else{const d=s<.5?s*(1+e):s+e-s*e,u=2*s-d;i=Oy(u,d,t+1/3),a=Oy(u,d,t),l=Oy(u,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Ff(t,e){return s=>s>0?e:t}const Vy=(t,e,s)=>{const r=t*t,i=s*(e*e-r)+r;return i<0?0:Math.sqrt(i)},LV=[u0,Rl,Kc],DV=t=>LV.find(e=>e.test(t));function aS(t){const e=DV(t);if(!e)return!1;let s=e.parse(t);return e===Kc&&(s=PV(s)),s}const oS=(t,e)=>{const s=aS(t),r=aS(e);if(!s||!r)return Ff(t,e);const i={...s};return a=>(i.red=Vy(s.red,r.red,a),i.green=Vy(s.green,r.green,a),i.blue=Vy(s.blue,r.blue,a),i.alpha=js(s.alpha,r.alpha,a),Rl.transform(i))},MV=(t,e)=>s=>e(t(s)),Wh=(...t)=>t.reduce(MV),f0=new Set(["none","hidden"]);function FV(t,e){return f0.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function BV(t,e){return s=>js(t,e,s)}function kb(t){return typeof t=="number"?BV:typeof t=="string"?ob(t)?Ff:Mn.test(t)?oS:VV:Array.isArray(t)?K5:typeof t=="object"?Mn.test(t)?oS:$V:Ff}function K5(t,e){const s=[...t],r=s.length,i=t.map((a,l)=>kb(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)s[l]=i[l](a);return s}}function $V(t,e){const s={...t,...e},r={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kb(t[i])(t[i],e[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function OV(t,e){var s;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],d=t.indexes[l][i[l]],u=(s=t.values[d])!==null&&s!==void 0?s:0;r[a]=u,i[l]++}return r}const VV=(t,e)=>{const s=Oo.createTransformer(e),r=_h(t),i=_h(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?f0.has(t)&&!i.values.length||f0.has(e)&&!r.values.length?FV(t,e):Wh(K5(OV(r,i),i.values),s):Ff(t,e)};function Q5(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?js(t,e,s):kb(t)(t,e)}const UV=5;function X5(t,e,s){const r=Math.max(e-UV,0);return j5(s-t(r),e-r)}const Ms={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Uy=.001;function zV({duration:t=Ms.duration,bounce:e=Ms.bounce,velocity:s=Ms.velocity,mass:r=Ms.mass}){let i,a,l=1-e;l=Va(Ms.minDamping,Ms.maxDamping,l),t=Va(Ms.minDuration,Ms.maxDuration,Qi(t)),l<1?(i=h=>{const p=h*l,g=p*t,v=p-s,b=g0(h,l),S=Math.exp(-g);return Uy-v/b*S},a=h=>{const g=h*l*t,v=g*s+s,b=Math.pow(l,2)*Math.pow(h,2)*t,S=Math.exp(-g),k=g0(Math.pow(h,2),l);return(-i(h)+Uy>0?-1:1)*((v-b)*S)/k}):(i=h=>{const p=Math.exp(-h*t),g=(h-s)*t+1;return-Uy+p*g},a=h=>{const p=Math.exp(-h*t),g=(s-h)*(t*t);return p*g});const d=5/t,u=GV(i,a,d);if(t=Ki(t),isNaN(u))return{stiffness:Ms.stiffness,damping:Ms.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const HV=12;function GV(t,e,s){let r=s;for(let i=1;i<HV;i++)r=r-t(r)/e(r);return r}function g0(t,e){return t*Math.sqrt(1-e*e)}const WV=["duration","bounce"],qV=["stiffness","damping","mass"];function lS(t,e){return e.some(s=>t[s]!==void 0)}function KV(t){let e={velocity:Ms.velocity,stiffness:Ms.stiffness,damping:Ms.damping,mass:Ms.mass,isResolvedFromDuration:!1,...t};if(!lS(t,qV)&&lS(t,WV))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*Va(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ms.mass,stiffness:i,damping:a}}else{const s=zV(t);e={...e,...s,mass:Ms.mass},e.isResolvedFromDuration=!0}return e}function Cb(t=Ms.visualDuration,e=Ms.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],d={done:!1,value:a},{stiffness:u,damping:h,mass:p,duration:g,velocity:v,isResolvedFromDuration:b}=KV({...s,velocity:-Qi(s.velocity||0)}),S=v||0,k=h/(2*Math.sqrt(u*p)),E=l-a,L=Qi(Math.sqrt(u/p)),M=Math.abs(E)<5;r||(r=M?Ms.restSpeed.granular:Ms.restSpeed.default),i||(i=M?Ms.restDelta.granular:Ms.restDelta.default);let N;if(k<1){const _=g0(L,k);N=D=>{const C=Math.exp(-k*L*D);return l-C*((S+k*L*E)/_*Math.sin(_*D)+E*Math.cos(_*D))}}else if(k===1)N=_=>l-Math.exp(-L*_)*(E+(S+L*E)*_);else{const _=L*Math.sqrt(k*k-1);N=D=>{const C=Math.exp(-k*L*D),w=Math.min(_*D,300);return l-C*((S+k*L*E)*Math.sinh(w)+_*E*Math.cosh(w))/_}}const y={calculatedDuration:b&&g||null,next:_=>{const D=N(_);if(b)d.done=_>=g;else{let C=0;k<1&&(C=_===0?Ki(S):X5(N,_,D));const w=Math.abs(C)<=r,I=Math.abs(l-D)<=i;d.done=w&&I}return d.value=d.done?l:D,d},toString:()=>{const _=Math.min(fb(y),Df),D=f5(C=>y.next(_*C).value,_,30);return _+"ms "+D}};return y}function cS({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:p}){const g=t[0],v={done:!1,value:g},b=w=>d!==void 0&&w<d||u!==void 0&&w>u,S=w=>d===void 0?u:u===void 0||Math.abs(d-w)<Math.abs(u-w)?d:u;let k=s*e;const E=g+k,L=l===void 0?E:l(E);L!==E&&(k=L-g);const M=w=>-k*Math.exp(-w/r),N=w=>L+M(w),y=w=>{const I=M(w),F=N(w);v.done=Math.abs(I)<=h,v.value=v.done?L:F};let _,D;const C=w=>{b(v.value)&&(_=w,D=Cb({keyframes:[v.value,S(v.value)],velocity:X5(N,w,v.value),damping:i,stiffness:a,restDelta:h,restSpeed:p}))};return C(0),{calculatedDuration:null,next:w=>{let I=!1;return!D&&_===void 0&&(I=!0,y(w),C(w)),_!==void 0&&w>=_?D.next(w-_):(!I&&y(w),v)}}}const QV=Gh(.42,0,1,1),XV=Gh(0,0,.58,1),Y5=Gh(.42,0,.58,1),J5=t=>Array.isArray(t)&&typeof t[0]!="number",YV={linear:Lr,easeIn:QV,easeInOut:Y5,easeOut:XV,circIn:_b,circInOut:R5,circOut:I5,backIn:bb,backInOut:E5,backOut:T5,anticipate:A5},dS=t=>{if(gb(t)){K3(t.length===4);const[e,s,r,i]=t;return Gh(e,s,r,i)}else if(typeof t=="string")return YV[t];return t};function JV(t,e,s){const r=[],i=s||Q5,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||Lr:e;d=Wh(u,d)}r.push(d)}return r}function Z5(t,e,{clamp:s=!0,ease:r,mixer:i}={}){const a=t.length;if(K3(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=JV(e,r,i),u=d.length,h=p=>{if(l&&p<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const v=Hl(t[g],t[g+1],p);return d[g](v)};return s?p=>h(Va(t[0],t[a-1],p)):h}function eE(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const i=Hl(0,e,r);t.push(js(s,1,i))}}function tE(t){const e=[0];return eE(e,t.length-1),e}function ZV(t,e){return t.map(s=>s*e)}function eU(t,e){return t.map(()=>e||Y5).splice(0,t.length-1)}function Bf({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const i=J5(r)?r.map(dS):dS(r),a={done:!1,value:e[0]},l=ZV(s&&s.length===e.length?s:tE(e),t),d=Z5(l,e,{ease:Array.isArray(i)?i:eU(e,i)});return{calculatedDuration:t,next:u=>(a.value=d(u),a.done=u>=t,a)}}const tU=t=>{const e=({timestamp:s})=>t(s);return{start:()=>gs.update(e,!0),stop:()=>Oa(e),now:()=>bn.isProcessing?bn.timestamp:Yi.now()}},sU={decay:cS,inertia:cS,tween:Bf,keyframes:Bf,spring:Cb},nU=t=>t/100;class Tb extends q5{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:s,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||Nb,d=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new l(a,d,s,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,d=Fg(s)?s:sU[s]||Bf;let u,h;d!==Bf&&typeof e[0]!="number"&&(u=Wh(nU,Q5(e[0],e[1])),e=[0,100]);const p=d({...this.options,keyframes:e});a==="mirror"&&(h=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=fb(p));const{calculatedDuration:g}=p,v=g+i,b=v*(r+1)-i;return{generator:p,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:v,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:r}=this;if(!r){const{keyframes:w}=this.options;return{done:!0,value:w[w.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:u,calculatedDuration:h,totalDuration:p,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:v,repeat:b,repeatType:S,repeatDelay:k,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const L=this.currentTime-v*(this.speed>=0?1:-1),M=this.speed>=0?L<0:L>p;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let N=this.currentTime,y=a;if(b){const w=Math.min(this.currentTime,p)/g;let I=Math.floor(w),F=w%1;!F&&w>=1&&(F=1),F===1&&I--,I=Math.min(I,b+1),!!(I%2)&&(S==="reverse"?(F=1-F,k&&(F-=k/g)):S==="mirror"&&(y=l)),N=Va(0,1,F)*g}const _=M?{done:!1,value:u[0]}:y.next(N);d&&(_.value=d(_.value));let{done:D}=_;!M&&h!==null&&(D=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return C&&i!==void 0&&(_.value=$g(u,this.options,i)),E&&E(_.value),C&&this.finish(),_}get duration(){const{resolved:e}=this;return e?Qi(e.calculatedDuration):0}get time(){return Qi(this.currentTime)}set time(e){e=Ki(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Qi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=tU,onPlay:s,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),s&&s();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const rU=new Set(["opacity","clipPath","filter","transform"]);function iU(t,e,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeInOut",times:u}={}){const h={[e]:s};u&&(h.offset=u);const p=x5(d,i);return Array.isArray(p)&&(h.easing=p),t.animate(h,{delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const aU=eb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$f=10,oU=2e4;function lU(t){return Fg(t.type)||t.type==="spring"||!g5(t.ease)}function cU(t,e){const s=new Tb({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<oU;)r=s.sample(a),i.push(r.value),a+=$f;return{times:void 0,keyframes:i,duration:a-$f,ease:"linear"}}const sE={anticipate:A5,backInOut:E5,circInOut:R5};function dU(t){return t in sE}class uS extends q5{constructor(e){super(e);const{name:s,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new W5(a,(l,d)=>this.onKeyframesResolved(l,d),s,r,i),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:r=300,times:i,ease:a,type:l,motionValue:d,name:u,startTime:h}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&Mf()&&dU(a)&&(a=sE[a]),lU(this.options)){const{onComplete:g,onUpdate:v,motionValue:b,element:S,...k}=this.options,E=cU(e,k);e=E.keyframes,e.length===1&&(e[1]=e[0]),r=E.duration,i=E.times,a=E.ease,l="keyframes"}const p=iU(d.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return p.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?(Qj(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;d.set($g(e,this.options,s)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Qi(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Qi(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.currentTime=Ki(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return Lr;const{animation:r}=s;Qj(r,e)}return Lr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:r,duration:i,type:a,ease:l,times:d}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:p,onComplete:g,element:v,...b}=this.options,S=new Tb({...b,keyframes:r,duration:i,type:a,ease:l,times:d,isGenerator:!0}),k=Ki(this.time);h.setWithVelocity(S.sample(k-$f).value,S.sample(k).value,$f)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:r,repeatDelay:i,repeatType:a,damping:l,type:d}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=s.owner.getProps();return aU()&&r&&rU.has(r)&&!u&&!h&&!i&&a!=="mirror"&&l!==0&&d!=="inertia"}}const uU={type:"spring",stiffness:500,damping:25,restSpeed:10},hU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pU={type:"keyframes",duration:.8},mU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fU=(t,{keyframes:e})=>e.length>2?pU:Jl.has(t)?t.startsWith("scale")?hU(e[1]):uU:mU;function gU({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const Eb=(t,e,s,r={},i,a)=>l=>{const d=mb(r,t)||{},u=d.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ki(u);let p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:v=>{e.set(v),d.onUpdate&&d.onUpdate(v)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};gU(d)||(p={...p,...fU(t,p)}),p.duration&&(p.duration=Ki(p.duration)),p.repeatDelay&&(p.repeatDelay=Ki(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const v=$g(p.keyframes,d);if(v!==void 0)return gs.update(()=>{p.onUpdate(v),p.onComplete()}),new m5([])}return!a&&uS.supports(p)?new uS(p):new Tb(p)};function xU({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function Ab(t,e,{delay:s=0,transitionOverride:r,type:i}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:d,...u}=e;r&&(l=r);const h=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const v=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),b=u[g];if(b===void 0||p&&xU(p,g))continue;const S={delay:s,...mb(l||{},g)};let k=!1;if(window.MotionHandoffAnimation){const L=S5(t);if(L){const M=window.MotionHandoffAnimation(L,g,gs);M!==null&&(S.startTime=M,k=!0)}}d0(t,g),v.start(Eb(g,v,b,t.shouldReduceMotion&&w5.has(g)?{type:!1}:S,t,k));const E=v.animation;E&&h.push(E)}return d&&Promise.all(h).then(()=>{gs.update(()=>{d&&ZO(t,d)})}),h}function x0(t,e,s={}){var r;const i=Mg(t,e,s.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(a=s.transitionOverride);const l=i?()=>Promise.all(Ab(t,i,s)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:v}=a;return yU(t,e,p+h,g,v,s)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,p]=u==="beforeChildren"?[l,d]:[d,l];return h().then(()=>p())}else return Promise.all([l(),d(s.delay)])}function yU(t,e,s=0,r=0,i=1,a){const l=[],d=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>d-h*r;return Array.from(t.variantChildren).sort(vU).forEach((h,p)=>{h.notify("AnimationStart",e),l.push(x0(h,e,{...a,delay:s+u(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function vU(t,e){return t.sortNodePosition(e)}function bU(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>x0(t,a,s));r=Promise.all(i)}else if(typeof e=="string")r=x0(t,e,s);else{const i=typeof e=="function"?Mg(t,e,s.custom):e;r=Promise.all(Ab(t,i,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}const _U=sb.length;function nE(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?nE(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<_U;s++){const r=sb[s],i=t.props[r];(vh(i)||i===!1)&&(e[r]=i)}return e}const wU=[...tb].reverse(),jU=tb.length;function SU(t){return e=>Promise.all(e.map(({animation:s,options:r})=>bU(t,s,r)))}function NU(t){let e=SU(t),s=hS(),r=!0;const i=u=>(h,p)=>{var g;const v=Mg(t,p,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(v){const{transition:b,transitionEnd:S,...k}=v;h={...h,...k,...S}}return h};function a(u){e=u(t)}function l(u){const{props:h}=t,p=nE(t.parent)||{},g=[],v=new Set;let b={},S=1/0;for(let E=0;E<jU;E++){const L=wU[E],M=s[L],N=h[L]!==void 0?h[L]:p[L],y=vh(N),_=L===u?M.isActive:null;_===!1&&(S=E);let D=N===p[L]&&N!==h[L]&&y;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),M.protectedKeys={...b},!M.isActive&&_===null||!N&&!M.prevProp||Lg(N)||typeof N=="boolean")continue;const C=kU(M.prevProp,N);let w=C||L===u&&M.isActive&&!D&&y||E>S&&y,I=!1;const F=Array.isArray(N)?N:[N];let R=F.reduce(i(L),{});_===!1&&(R={});const{prevResolvedValues:B={}}=M,$={...B,...R},W=K=>{w=!0,v.has(K)&&(I=!0,v.delete(K)),M.needsAnimating[K]=!0;const G=t.getValue(K);G&&(G.liveStyle=!1)};for(const K in $){const G=R[K],se=B[K];if(b.hasOwnProperty(K))continue;let ne=!1;l0(G)&&l0(se)?ne=!p5(G,se):ne=G!==se,ne?G!=null?W(K):v.add(K):G!==void 0&&v.has(K)?W(K):M.protectedKeys[K]=!0}M.prevProp=N,M.prevResolvedValues=R,M.isActive&&(b={...b,...R}),r&&t.blockInitialAnimation&&(w=!1),w&&(!(D&&C)||I)&&g.push(...F.map(K=>({animation:K,options:{type:L}})))}if(v.size){const E={};v.forEach(L=>{const M=t.getBaseTarget(L),N=t.getValue(L);N&&(N.liveStyle=!0),E[L]=M!=null?M:null}),g.push({animation:E})}let k=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(g):Promise.resolve()}function d(u,h){var p;if(s[u].isActive===h)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(v=>{var b;return(b=v.animationState)===null||b===void 0?void 0:b.setActive(u,h)}),s[u].isActive=h;const g=l(u);for(const v in s)s[v].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>s,reset:()=>{s=hS(),r=!0}}}function kU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!p5(e,t):!1}function ml(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hS(){return{animate:ml(!0),whileInView:ml(),whileHover:ml(),whileTap:ml(),whileDrag:ml(),whileFocus:ml(),exit:ml()}}class Ho{constructor(e){this.isMounted=!1,this.node=e}update(){}}class CU extends Ho{constructor(e){super(e),e.animationState||(e.animationState=NU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let TU=0;class EU extends Ho{constructor(){super(...arguments),this.id=TU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const AU={animation:{Feature:CU},exit:{Feature:EU}};function wh(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function qh(t){return{point:{x:t.pageX,y:t.pageY}}}const IU=t=>e=>xb(e)&&t(e,qh(e));function Xu(t,e,s,r){return wh(t,e,IU(s),r)}const pS=(t,e)=>Math.abs(t-e);function RU(t,e){const s=pS(t.x,e.x),r=pS(t.y,e.y);return Math.sqrt(s**2+r**2)}class rE{constructor(e,s,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Hy(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=RU(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:S}=g,{timestamp:k}=bn;this.history.push({...S,timestamp:k});const{onStart:E,onMove:L}=this.handlers;v||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=zy(v,this.transformPagePoint),gs.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Hy(g.type==="pointercancel"?this.lastMoveEventInfo:zy(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,E),S&&S(g,E)},!xb(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.contextWindow=i||window;const l=qh(e),d=zy(l,this.transformPagePoint),{point:u}=d,{timestamp:h}=bn;this.history=[{...u,timestamp:h}];const{onSessionStart:p}=s;p&&p(e,Hy(d,this.history)),this.removeListeners=Wh(Xu(this.contextWindow,"pointermove",this.handlePointerMove),Xu(this.contextWindow,"pointerup",this.handlePointerUp),Xu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Oa(this.updatePoint)}}function zy(t,e){return e?{point:e(t.point)}:t}function mS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hy({point:t},e){return{point:t,delta:mS(t,iE(e)),offset:mS(t,PU(e)),velocity:LU(e,.1)}}function PU(t){return t[0]}function iE(t){return t[t.length-1]}function LU(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const i=iE(t);for(;s>=0&&(r=t[s],!(i.timestamp-r.timestamp>Ki(e)));)s--;if(!r)return{x:0,y:0};const a=Qi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const aE=1e-4,DU=1-aE,MU=1+aE,oE=.01,FU=0-oE,BU=0+oE;function Mr(t){return t.max-t.min}function $U(t,e,s){return Math.abs(t-e)<=s}function fS(t,e,s,r=.5){t.origin=r,t.originPoint=js(e.min,e.max,t.origin),t.scale=Mr(s)/Mr(e),t.translate=js(s.min,s.max,t.origin)-t.originPoint,(t.scale>=DU&&t.scale<=MU||isNaN(t.scale))&&(t.scale=1),(t.translate>=FU&&t.translate<=BU||isNaN(t.translate))&&(t.translate=0)}function Yu(t,e,s,r){fS(t.x,e.x,s.x,r?r.originX:void 0),fS(t.y,e.y,s.y,r?r.originY:void 0)}function gS(t,e,s){t.min=s.min+e.min,t.max=t.min+Mr(e)}function OU(t,e,s){gS(t.x,e.x,s.x),gS(t.y,e.y,s.y)}function xS(t,e,s){t.min=e.min-s.min,t.max=t.min+Mr(e)}function Ju(t,e,s){xS(t.x,e.x,s.x),xS(t.y,e.y,s.y)}function VU(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?js(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?js(s,t,r.max):Math.min(t,s)),t}function yS(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function UU(t,{top:e,left:s,bottom:r,right:i}){return{x:yS(t.x,s,i),y:yS(t.y,e,r)}}function vS(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function zU(t,e){return{x:vS(t.x,e.x),y:vS(t.y,e.y)}}function HU(t,e){let s=.5;const r=Mr(t),i=Mr(e);return i>r?s=Hl(e.min,e.max-r,t.min):r>i&&(s=Hl(t.min,t.max-i,e.min)),Va(0,1,s)}function GU(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const y0=.35;function WU(t=y0){return t===!1?t=0:t===!0&&(t=y0),{x:bS(t,"left","right"),y:bS(t,"top","bottom")}}function bS(t,e,s){return{min:_S(t,e),max:_S(t,s)}}function _S(t,e){return typeof t=="number"?t:t[e]||0}const wS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qc=()=>({x:wS(),y:wS()}),jS=()=>({min:0,max:0}),Ds=()=>({x:jS(),y:jS()});function Xr(t){return[t("x"),t("y")]}function lE({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function qU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function KU(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Gy(t){return t===void 0||t===1}function v0({scale:t,scaleX:e,scaleY:s}){return!Gy(t)||!Gy(e)||!Gy(s)}function kl(t){return v0(t)||cE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function cE(t){return SS(t.x)||SS(t.y)}function SS(t){return t&&t!=="0%"}function Of(t,e,s){const r=t-s,i=e*r;return s+i}function NS(t,e,s,r,i){return i!==void 0&&(t=Of(t,i,r)),Of(t,s,r)+e}function b0(t,e=0,s=1,r,i){t.min=NS(t.min,e,s,r,i),t.max=NS(t.max,e,s,r,i)}function dE(t,{x:e,y:s}){b0(t.x,e.translate,e.scale,e.originPoint),b0(t.y,s.translate,s.scale,s.originPoint)}const kS=.999999999999,CS=1.0000000000001;function QU(t,e,s,r=!1){const i=s.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=s[d],l=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Yc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,dE(t,l)),r&&kl(a.latestValues)&&Yc(t,a.latestValues))}e.x<CS&&e.x>kS&&(e.x=1),e.y<CS&&e.y>kS&&(e.y=1)}function Xc(t,e){t.min=t.min+e,t.max=t.max+e}function TS(t,e,s,r,i=.5){const a=js(t.min,t.max,i);b0(t,e,s,a,r)}function Yc(t,e){TS(t.x,e.x,e.scaleX,e.scale,e.originX),TS(t.y,e.y,e.scaleY,e.scale,e.originY)}function uE(t,e){return lE(KU(t.getBoundingClientRect(),e))}function XU(t,e,s){const r=uE(t,s),{scroll:i}=e;return i&&(Xc(r.x,i.offset.x),Xc(r.y,i.offset.y)),r}const hE=({current:t})=>t?t.ownerDocument.defaultView:null,YU=new WeakMap;class JU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ds(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(qh(p).point)},a=(p,g)=>{const{drag:v,dragPropagation:b,onDragStart:S}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KO(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xr(E=>{let L=this.getAxisMotionValue(E).get()||0;if(Xi.test(L)){const{projection:M}=this.visualElement;if(M&&M.layout){const N=M.layout.layoutBox[E];N&&(L=Mr(N)*(parseFloat(L)/100))}}this.originPoint[E]=L}),S&&gs.postRender(()=>S(p,g)),d0(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},l=(p,g)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:S,onDrag:k}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:E}=g;if(b&&this.currentDirection===null){this.currentDirection=ZU(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),k&&k(p,g)},d=(p,g)=>this.stop(p,g),u=()=>Xr(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new rE(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:hE(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&gs.postRender(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:i}=this.getProps();if(!r||!Nm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=VU(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&qc(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=UU(i.layoutBox,s):this.constraints=!1,this.elastic=WU(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Xr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=GU(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!qc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=XU(r,i.root,this.visualElement.getTransformPagePoint());let l=zU(i.layout.layoutBox,a);if(s){const d=s(qU(l));this.hasMutatedConstraints=!!d,d&&(l=lE(d))}return l}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=Xr(p=>{if(!Nm(p,s,this.currentDirection))return;let g=u&&u[p]||{};l&&(g={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:r?e[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,S)});return Promise.all(h).then(d)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return d0(this.visualElement,e),r.start(Eb(e,r,0,s,this.visualElement,!1))}stopAnimation(){Xr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xr(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Xr(s=>{const{drag:r}=this.getProps();if(!Nm(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[s];a.set(e[s]-js(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!qc(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Xr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();i[l]=HU({min:u,max:u},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Xr(l=>{if(!Nm(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(js(u,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;YU.set(this.visualElement,this);const e=this.visualElement.current,s=Xu(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();qc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),gs.read(r);const l=wh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Xr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=u[p].translate,g.set(g.get()+u[p].translate))}),this.visualElement.render())}));return()=>{l(),s(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=y0,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function Nm(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function ZU(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class ez extends Ho{constructor(e){super(e),this.removeGroupControls=Lr,this.removeListeners=Lr,this.controls=new JU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ES=t=>(e,s)=>{t&&gs.postRender(()=>t(e,s))};class tz extends Ho{constructor(){super(...arguments),this.removePointerDownListener=Lr}onPointerDown(e){this.session=new rE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ES(e),onStart:ES(s),onMove:r,onEnd:(a,l)=>{delete this.session,i&&gs.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Xu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function AS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _u={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const s=AS(t,e.target.x),r=AS(t,e.target.y);return`${s}% ${r}%`}},sz={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,i=Oo.parse(t);if(i.length>5)return r;const a=Oo.createTransformer(t),l=typeof i[0]!="number"?1:0,d=s.x.scale*e.x,u=s.y.scale*e.y;i[0+l]/=d,i[1+l]/=u;const h=js(d,u,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),a(i)}};class nz extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;TO(rz),a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),lf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==s||s===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||gs.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pE(t){const[e,s]=H$(),r=T.useContext(W3);return n.jsx(nz,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(e5),isPresent:e,safeToRemove:s})}const rz={borderRadius:{..._u,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_u,borderTopRightRadius:_u,borderBottomLeftRadius:_u,borderBottomRightRadius:_u,boxShadow:sz};function mE(t,e,s){const r=hn(t)?t:vd(t);return r.start(Eb("",r,e,s)),r.animation}function fE(t){return t instanceof SVGElement&&t.tagName!=="svg"}const iz=(t,e)=>t.depth-e.depth;class az{constructor(){this.children=[],this.isDirty=!1}add(e){yb(this.children,e),this.isDirty=!0}remove(e){Bg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iz),this.isDirty=!1,this.children.forEach(e)}}function oz(t,e){const s=Yi.now(),r=({timestamp:i})=>{const a=i-s;a>=e&&(Oa(r),t(a-e))};return gs.read(r,!0),()=>Oa(r)}const gE=["TopLeft","TopRight","BottomLeft","BottomRight"],lz=gE.length,IS=t=>typeof t=="string"?parseFloat(t):t,RS=t=>typeof t=="number"||lt.test(t);function cz(t,e,s,r,i,a){i?(t.opacity=js(0,s.opacity!==void 0?s.opacity:1,dz(r)),t.opacityExit=js(e.opacity!==void 0?e.opacity:1,0,uz(r))):a&&(t.opacity=js(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let l=0;l<lz;l++){const d=`border${gE[l]}Radius`;let u=PS(e,d),h=PS(s,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||RS(u)===RS(h)?(t[d]=Math.max(js(IS(u),IS(h),r),0),(Xi.test(h)||Xi.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||s.rotate)&&(t.rotate=js(e.rotate||0,s.rotate||0,r))}function PS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dz=xE(0,.5,I5),uz=xE(.5,.95,Lr);function xE(t,e,s){return r=>r<t?0:r>e?1:s(Hl(t,e,r))}function LS(t,e){t.min=e.min,t.max=e.max}function Kr(t,e){LS(t.x,e.x),LS(t.y,e.y)}function DS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function MS(t,e,s,r,i){return t-=e,t=Of(t,1/s,r),i!==void 0&&(t=Of(t,1/i,r)),t}function hz(t,e=0,s=1,r=.5,i,a=t,l=t){if(Xi.test(e)&&(e=parseFloat(e),e=js(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=js(a.min,a.max,r);t===a&&(d-=e),t.min=MS(t.min,e,s,d,i),t.max=MS(t.max,e,s,d,i)}function FS(t,e,[s,r,i],a,l){hz(t,e[s],e[r],e[i],e.scale,a,l)}const pz=["x","scaleX","originX"],mz=["y","scaleY","originY"];function BS(t,e,s,r){FS(t.x,e,pz,s?s.x:void 0,r?r.x:void 0),FS(t.y,e,mz,s?s.y:void 0,r?r.y:void 0)}function $S(t){return t.translate===0&&t.scale===1}function yE(t){return $S(t.x)&&$S(t.y)}function OS(t,e){return t.min===e.min&&t.max===e.max}function fz(t,e){return OS(t.x,e.x)&&OS(t.y,e.y)}function VS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function vE(t,e){return VS(t.x,e.x)&&VS(t.y,e.y)}function US(t){return Mr(t.x)/Mr(t.y)}function zS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class gz{constructor(){this.members=[]}add(e){yb(this.members,e),e.scheduleRender()}remove(e){if(Bg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xz(t,e,s){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(s==null?void 0:s.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:v,skewX:b,skewY:S}=s;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),b&&(r+=`skewX(${b}deg) `),S&&(r+=`skewY(${S}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(r+=`scale(${d}, ${u})`),r||"none"}const Cl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Fu=typeof window!="undefined"&&window.MotionDebug!==void 0,Wy=["","X","Y","Z"],yz={visibility:"hidden"},HS=1e3;let vz=0;function qy(t,e,s,r){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function bE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=S5(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",gs,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&bE(r)}function _E({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=vz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fu&&(Cl.totalNodes=Cl.resolvedTargetDeltas=Cl.recalculatedProjection=0),this.nodes.forEach(wz),this.nodes.forEach(Cz),this.nodes.forEach(Tz),this.nodes.forEach(jz),Fu&&window.MotionDebug.record(Cl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new az)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new vb),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fE(l),this.instance=l;const{layoutId:u,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=oz(v,250),lf.hasAnimatedSinceResize&&(lf.hasAnimatedSinceResize=!1,this.nodes.forEach(WS))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||p.getDefaultTransition()||Pz,{onLayoutAnimationStart:E,onLayoutAnimationComplete:L}=p.getProps(),M=!this.targetLayout||!vE(this.targetLayout,S)||b,N=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,N);const y={...mb(k,"layout"),onPlay:E,onComplete:L};(p.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y)}else v||WS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Oa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ez),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(GS);return}this.isUpdating||this.nodes.forEach(Nz),this.isUpdating=!1,this.nodes.forEach(kz),this.nodes.forEach(bz),this.nodes.forEach(_z),this.clearAllSnapshots();const d=Yi.now();bn.delta=Va(0,1e3/60,d-bn.timestamp),bn.timestamp=d,bn.isProcessing=!0,Fy.update.process(bn),Fy.preRender.process(bn),Fy.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Sz),this.sharedNodes.forEach(Az)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ds(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!yE(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&(d||kl(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),Lz(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:d}=this.options;if(!d)return Ds();const u=d.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(Dz))){const{scroll:p}=this.root;p&&(Xc(u.x,p.offset.x),Xc(u.y,p.offset.y))}return u}removeElementScroll(l){var d;const u=Ds();if(Kr(u,l),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:v}=p;p!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&Kr(u,l),Xc(u.x,g.offset.x),Xc(u.y,g.offset.y))}return u}applyTransform(l,d=!1){const u=Ds();Kr(u,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Yc(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),kl(p.latestValues)&&Yc(u,p.latestValues)}return kl(this.latestValues)&&Yc(u,this.latestValues),u}removeTransform(l){const d=Ds();Kr(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!kl(h.latestValues))continue;v0(h.latestValues)&&h.updateSnapshot();const p=Ds(),g=h.measurePageBox();Kr(p,g),BS(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return kl(this.latestValues)&&BS(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var d;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=bn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ds(),this.relativeTargetOrigin=Ds(),Ju(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ds(),this.targetWithTransforms=Ds()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kr(this.target,this.layout.layoutBox),dE(this.target,this.targetDelta)):Kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ds(),this.relativeTargetOrigin=Ds(),Ju(this.relativeTargetOrigin,this.target,b.target),Kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fu&&Cl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||v0(this.parent.latestValues)||cE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const d=this.getLead(),u=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Kr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;QU(this.layoutCorrected,this.treeScale,this.path,u),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Ds());const{target:S}=d;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DS(this.prevProjectionDelta.x,this.projectionDelta.x),DS(this.prevProjectionDelta.y,this.projectionDelta.y)),Yu(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!zS(this.projectionDelta.x,this.prevProjectionDelta.x)||!zS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Fu&&Cl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qc(),this.projectionDelta=Qc(),this.projectionDeltaWithTransform=Qc()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},g=Qc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=Ds(),b=u?u.source:void 0,S=this.layout?this.layout.source:void 0,k=b!==S,E=this.getStack(),L=!E||E.members.length<=1,M=!!(k&&!L&&this.options.crossfade===!0&&!this.path.some(Rz));this.animationProgress=0;let N;this.mixTargetDelta=y=>{const _=y/1e3;qS(g.x,l.x,_),qS(g.y,l.y,_),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ju(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Iz(this.relativeTarget,this.relativeTargetOrigin,v,_),N&&fz(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Ds()),Kr(N,this.relativeTarget)),k&&(this.animationValues=p,cz(p,h,this.latestValues,_,M,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Oa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gs.update(()=>{lf.hasAnimatedSinceResize=!0,this.currentAnimation=mE(0,HS,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:p}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&wE(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Ds();const g=Mr(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+g;const v=Mr(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+v}Kr(d,u),Yc(d,p),Yu(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new gz),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:d}=this.options;return d?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:d}=this.options;return d?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&qy("z",l,h,this.animationValues);for(let p=0;p<Wy.length;p++)qy(`rotate${Wy[p]}`,l,h,this.animationValues),qy(`skew${Wy[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}getProjectionStyles(l){var d,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yz;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=af(l==null?void 0:l.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=af(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!kl(this.latestValues)&&(k.transform=p?p({},""):"none",this.hasProjected=!1),k}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=xz(this.projectionDeltaWithTransform,this.treeScale,v),p&&(h.transform=p(v,h.transform));const{x:b,y:S}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${S.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(d=v.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const k in Lf){if(v[k]===void 0)continue;const{correct:E,applyTo:L}=Lf[k],M=h.transform==="none"?v[k]:E(v[k],g);if(L){const N=L.length;for(let y=0;y<N;y++)h[L[y]]=M}else h[k]=M}return this.options.layoutId&&(h.pointerEvents=g===this?af(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(GS),this.root.sharedNodes.clear()}}}function bz(t){t.updateLayout()}function _z(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=s.source!==t.layout.source;a==="size"?Xr(g=>{const v=l?s.measuredBox[g]:s.layoutBox[g],b=Mr(v);v.min=r[g].min,v.max=v.min+b}):wE(a,s.layoutBox,r)&&Xr(g=>{const v=l?s.measuredBox[g]:s.layoutBox[g],b=Mr(r[g]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const d=Qc();Yu(d,r,s.layoutBox);const u=Qc();l?Yu(u,t.applyTransform(i,!0),s.measuredBox):Yu(u,r,s.layoutBox);const h=!yE(d);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:b}=g;if(v&&b){const S=Ds();Ju(S,s.layoutBox,v.layoutBox);const k=Ds();Ju(k,r,b.layoutBox),vE(S,k)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=S,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:u,layoutDelta:d,hasLayoutChanged:h,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function wz(t){Fu&&Cl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Sz(t){t.clearSnapshot()}function GS(t){t.clearMeasurements()}function Nz(t){t.isLayoutDirty=!1}function kz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function WS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Cz(t){t.resolveTargetDelta()}function Tz(t){t.calcProjection()}function Ez(t){t.resetSkewAndRotation()}function Az(t){t.removeLeadSnapshot()}function qS(t,e,s){t.translate=js(e.translate,0,s),t.scale=js(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function KS(t,e,s,r){t.min=js(e.min,s.min,r),t.max=js(e.max,s.max,r)}function Iz(t,e,s,r){KS(t.x,e.x,s.x,r),KS(t.y,e.y,s.y,r)}function Rz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Pz={duration:.45,ease:[.4,0,.1,1]},QS=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),XS=QS("applewebkit/")&&!QS("chrome/")?Math.round:Lr;function YS(t){t.min=XS(t.min),t.max=XS(t.max)}function Lz(t){YS(t.x),YS(t.y)}function wE(t,e,s){return t==="position"||t==="preserve-aspect"&&!$U(US(e),US(s),.2)}function Dz(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Mz=_E({attachResizeListener:(t,e)=>wh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ky={current:void 0},jE=_E({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ky.current){const t=new Mz({});t.mount(window),t.setOptions({layoutScroll:!0}),Ky.current=t}return Ky.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Fz={pan:{Feature:tz},drag:{Feature:ez,ProjectionNode:jE,MeasureLayout:pE}};function JS(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&gs.postRender(()=>a(e,qh(e)))}class Bz extends Ho{mount(){const{current:e}=this.node;e&&(this.unmount=zO(e,s=>(JS(this.node,s,"Start"),r=>JS(this.node,r,"End"))))}unmount(){}}class $z extends Ho{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(s){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wh(wh(this.node.current,"focus",()=>this.onFocus()),wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ZS(t,e,s){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&gs.postRender(()=>a(e,qh(e)))}class Oz extends Ho{mount(){const{current:e}=this.node;e&&(this.unmount=qO(e,s=>(ZS(this.node,s,"Start"),(r,{success:i})=>ZS(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _0=new WeakMap,Qy=new WeakMap,Vz=t=>{const e=_0.get(t.target);e&&e(t)},Uz=t=>{t.forEach(Vz)};function zz({root:t,...e}){const s=t||document;Qy.has(s)||Qy.set(s,{});const r=Qy.get(s),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Uz,{root:t,...e})),r[i]}function Hz(t,e,s){const r=zz(e);return _0.set(t,s),r.observe(t),()=>{_0.delete(t),r.unobserve(t)}}const Gz={some:0,all:1};class Wz extends Ho{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=e,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Gz[i]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=h?p:g;v&&v(u)};return Hz(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(qz(e,s))&&this.startObserver()}unmount(){}}function qz({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const Kz={inView:{Feature:Wz},tap:{Feature:Oz},focus:{Feature:$z},hover:{Feature:Bz}},Qz={layout:{ProjectionNode:jE,MeasureLayout:pE}},Vf={current:null},Ib={current:!1};function SE(){if(Ib.current=!0,!!Z1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Vf.current=t.matches;t.addListener(e),e()}else Vf.current=!1}const Xz=[...G5,Mn,Oo],Yz=t=>Xz.find(H5(t)),_d=new WeakMap;function Jz(t,e,s){for(const r in e){const i=e[r],a=s[r];if(hn(i))t.addValue(r,i);else if(hn(a))t.addValue(r,vd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,vd(l!==void 0?l:i,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const eN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class NE{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Nb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Yi.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,gs.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:p}=l;this.onUpdate=p,this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=Dg(s),this.isVariantNode=J3(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const b in v){const S=v[b];u[b]!==void 0&&hn(S)&&S.set(u[b],!1)}}mount(e){this.current=e,_d.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Ib.current||SE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){_d.delete(this.current),this.projection&&this.projection.unmount(),Oa(this.notifyUpdate),Oa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jl.has(e),i=s.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&gs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yd){const s=yd[e];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ds()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<eN.length;r++){const i=eN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=Jz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=vd(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(U5(i)||P5(i))?i=parseFloat(i):!Yz(i)&&Oo.test(s)&&(i=$5(e,s)),this.setBaseTarget(e,hn(i)?i.get():i)),hn(i)?i.get():i}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=ab(this.props,r,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!hn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new vb),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class kE extends NE{constructor(){super(...arguments),this.KeyframeResolver=W5}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Zz(t){return window.getComputedStyle(t)}class CE extends kE{constructor(){super(...arguments),this.type="html",this.renderInstance=o5}readValueFromInstance(e,s){if(Jl.has(s)){const r=Sb(s);return r&&r.default||0}else{const r=Zz(e),i=(r5(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return uE(e,s)}build(e,s,r){cb(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return pb(e,s,r)}}class TE extends kE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ds}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Jl.has(s)){const r=Sb(s);return r&&r.default||0}return s=l5.has(s)?s:nb(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return u5(e,s,r)}build(e,s,r){db(e,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,s,r,i){c5(e,s,r,i)}mount(e){this.isSVGTag=hb(e.tagName),super.mount(e)}}const eH=(t,e)=>ib(t)?new TE(e):new CE(e,{allowProjection:t!==T.Fragment}),tH=FO({...AU,...Kz,...Fz,...Qz},eH),EE=J$(tH);function Bu(t){const e=X1(()=>vd(t)),{isStatic:s}=T.useContext(J1);if(s){const[,r]=T.useState(t);T.useEffect(()=>e.on("change",r),[])}return e}function AE(t,e){const s=Bu(e()),r=()=>s.set(e());return r(),q3(()=>{const i=()=>gs.preRender(r,!1,!0),a=t.map(l=>l.on("change",i));return()=>{a.forEach(l=>l()),Oa(r)}}),s}const sH=t=>t&&typeof t=="object"&&t.mix,nH=t=>sH(t)?t.mix:void 0;function rH(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],i=t[1+s],a=t[2+s],l=t[3+s],d=Z5(i,a,{mixer:nH(a[0]),...l});return e?d(r):d}function iH(t){Ku.current=[],t();const e=AE(Ku.current,t);return Ku.current=void 0,e}function km(t,e,s,r){if(typeof t=="function")return iH(t);const i=typeof e=="function"?e:rH(e,s,r);return Array.isArray(t)?tN(t,i):tN([t],([a])=>i(a))}function tN(t,e){const s=X1(()=>[]);return AE(t,()=>{s.length=0;const r=t.length;for(let i=0;i<r;i++)s[i]=t[i].get();return e(s)})}function IE(){!Ib.current&&SE();const[t]=T.useState(Vf.current);return t}const aH=(t,e,s)=>{const r=e-t;return((s-t)%r+r)%r+t};function RE(t,e){return J5(t)?t[aH(0,t.length,e)]:t}function Rb(t){return typeof t=="object"&&!Array.isArray(t)}function PE(t,e,s,r){return typeof t=="string"&&Rb(e)?v5(t,s,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function oH(t,e,s){return t*(e+1)}function sN(t,e,s,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?s:(i=r.get(e))!==null&&i!==void 0?i:t}function lH(t,e,s){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<s&&(Bg(t,i),r--)}}function cH(t,e,s,r,i,a){lH(t,i,a);for(let l=0;l<e.length;l++)t.push({value:e[l],at:js(i,a,r[l]),easing:RE(s,l)})}function dH(t,e){for(let s=0;s<t.length;s++)t[s]=t[s]/(e+1)}function uH(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const hH="easeInOut";function pH(t,{defaultTransition:e={},...s}={},r,i){const a=e.duration||.3,l=new Map,d=new Map,u={},h=new Map;let p=0,g=0,v=0;for(let b=0;b<t.length;b++){const S=t[b];if(typeof S=="string"){h.set(S,g);continue}else if(!Array.isArray(S)){h.set(S.name,sN(g,S.at,p,h));continue}let[k,E,L={}]=S;L.at!==void 0&&(g=sN(g,L.at,p,h));let M=0;const N=(y,_,D,C=0,w=0)=>{const I=mH(y),{delay:F=0,times:R=tE(I),type:B="keyframes",repeat:$,repeatType:W,repeatDelay:H=0,...q}=_;let{ease:K=e.ease||"easeOut",duration:G}=_;const se=typeof F=="function"?F(C,w):F,ne=I.length,U=Fg(B)?B:i==null?void 0:i[B];if(ne<=2&&U){let he=100;if(ne===2&&xH(I)){const we=I[1]-I[0];he=Math.abs(we)}const xe={...q};G!==void 0&&(xe.duration=Ki(G));const ge=OO(xe,he,U);K=ge.ease,G=ge.duration}G!=null||(G=a);const Z=g+se;R.length===1&&R[0]===0&&(R[1]=1);const le=R.length-I.length;if(le>0&&eE(R,le),I.length===1&&I.unshift(null),$){G=oH(G,$);const he=[...I],xe=[...R];K=Array.isArray(K)?[...K]:[K];const ge=[...K];for(let we=0;we<$;we++){I.push(...he);for(let ve=0;ve<he.length;ve++)R.push(xe[ve]+(we+1)),K.push(ve===0?"linear":RE(ge,ve-1))}dH(R,$)}const ee=Z+G;cH(D,I,K,R,Z,ee),M=Math.max(se+G,M),v=Math.max(ee,v)};if(hn(k)){const y=nN(k,d);N(E,L,rN("default",y))}else{const y=PE(k,E,r,u),_=y.length;for(let D=0;D<_;D++){E=E,L=L;const C=y[D],w=nN(C,d);for(const I in E)N(E[I],fH(L,I),rN(I,w),D,_)}}p=g,g+=M}return d.forEach((b,S)=>{for(const k in b){const E=b[k];E.sort(uH);const L=[],M=[],N=[];for(let _=0;_<E.length;_++){const{at:D,value:C,easing:w}=E[_];L.push(C),M.push(Hl(0,v,D)),N.push(w||"easeOut")}M[0]!==0&&(M.unshift(0),L.unshift(L[0]),N.unshift(hH)),M[M.length-1]!==1&&(M.push(1),L.push(null)),l.has(S)||l.set(S,{keyframes:{},transition:{}});const y=l.get(S);y.keyframes[k]=L,y.transition[k]={...e,duration:v,ease:N,times:M,...s}}}),l}function nN(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function rN(t,e){return e[t]||(e[t]=[]),e[t]}function mH(t){return Array.isArray(t)?t:[t]}function fH(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const gH=t=>typeof t=="number",xH=t=>t.every(gH);function yH(t,e){return t in e}class vH extends NE{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,s){if(yH(s,e)){const r=e[s];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,s){delete s.output[e]}measureInstanceViewportBox(){return Ds()}build(e,s){Object.assign(e.output,s)}renderInstance(e,{output:s}){Object.assign(e,s)}sortInstanceNodePosition(){return 0}}function bH(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},s=fE(t)?new TE(e):new CE(e);s.mount(t),_d.set(t,s)}function _H(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},s=new vH(e);s.mount(t),_d.set(t,s)}function wH(t,e){return hn(t)||typeof t=="number"||typeof t=="string"&&!Rb(e)}function LE(t,e,s,r){const i=[];if(wH(t,e))i.push(mE(t,Rb(e)&&e.default||e,s&&(s.default||s)));else{const a=PE(t,e,r),l=a.length;for(let d=0;d<l;d++){const u=a[d],h=u instanceof Element?bH:_H;_d.has(u)||h(u);const p=_d.get(u),g={...s};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(d,l)),i.push(...Ab(p,{...e,transition:g},{}))}}return i}function jH(t,e,s){const r=[];return pH(t,e,s,{spring:Cb}).forEach(({keyframes:a,transition:l},d)=>{r.push(...LE(d,a,l))}),r}function SH(t){return Array.isArray(t)&&t.some(Array.isArray)}function NH(t){function e(s,r,i){let a=[];return SH(s)?a=jH(s,r,t):a=LE(s,r,i,t),new m5(a)}return e}const Cm=NH(),Ta={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function kH(){return n.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+Ta.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function CH(){return n.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[n.jsxs("defs",{children:[n.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:Ta.icon,stopOpacity:"0.42"}),n.jsx("stop",{offset:"70%",stopColor:Ta.icon,stopOpacity:"0"})]}),n.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:Ta.icon,stopOpacity:"0.20"}),n.jsx("stop",{offset:"70%",stopColor:Ta.icon,stopOpacity:"0"})]})]}),n.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),n.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function iN({rounded:t="rounded-3xl",padded:e=!0,children:s}){const r=IE();return n.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:Ta.border,background:"var(--nav, "+Ta.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[n.jsx(kH,{}),n.jsx(EE.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),n.jsx(CH,{}),n.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:s})]})}const Xy={borderColor:"#2B4C73",background:"#1A2F4A"},Tm={borderColor:"#2B4C73",background:"#152A42"};function Et({hex:t,title:e,subtitle:s,actions:r,subheader:i,left:a,right:l,children:d,rounded:u="rounded-3xl",padded:h=!0,centerFramed:p=!1,leftWidth:g=0,rightWidth:v=0,stickyRails:b=!0,mode:S="card",outerPadding:k="px-4 py-3",leftPlacement:E="inside",stickyTopbar:L=!0,stickySubheader:M=!0,shellViewportOffset:N="var(--app-topbar-h,72px)",topbarHeight:y=56}){const _={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof v=="number"?`${v}px`:v},D=n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:Xy,children:t}),(e||s||r)&&n.jsxs("div",{className:[L?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:Xy,children:[n.jsxs("div",{className:"min-w-0",children:[e&&n.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),s&&n.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:s})]}),r?n.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&n.jsx("div",{className:[M?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...M?{top:L?`${y}px`:0}:{},...Xy},children:i})]}),C=S==="card"?({children:I})=>n.jsx(iN,{rounded:u,padded:h,children:I}):({children:I})=>n.jsx("div",{className:`w-full ${k}`,children:I}),w=n.jsx("div",{className:"relative min-h-0 h-full",style:_,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Tm,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),p?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:Tm,children:d}):n.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:d}),l?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Tm,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:l}):v?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"})]})});return E==="bleed"&&S==="card"?n.jsx("div",{className:`w-full ${k}`,children:n.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[D,n.jsx("div",{className:"flex-1 min-h-0",style:_,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Tm,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),n.jsx(iN,{rounded:u,padded:h,children:n.jsx("div",{className:"flex-1 min-h-0 h-full",children:w})})]})})]})}):n.jsx(C,{children:n.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${N})`},children:[D,n.jsx("div",{className:"flex-1 min-h-0",children:w})]})})}const TH="_row_x5rfq_3",EH="_colFull_x5rfq_17",AH="_colCommunity_x5rfq_31",IH="_colGuides_x5rfq_33",RH="_card_x5rfq_129",PH="_header_x5rfq_143",LH="_title_x5rfq_155",DH="_subtitle_x5rfq_157",MH="_empty_x5rfq_159",FH="_errorNote_x5rfq_161",BH="_linkBtn_x5rfq_163",$H="_primaryBtn_x5rfq_163",OH="_navBtn_x5rfq_163",VH="_closeBtn_x5rfq_163",UH="_actionsRight_x5rfq_179",zH="_tileGrid_x5rfq_185",HH="_tile_x5rfq_185",GH="_tileIcon_x5rfq_211",WH="_tileIconFallback_x5rfq_213",qH="_tileLabel_x5rfq_215",KH="_newsList_x5rfq_221",QH="_newsItem_x5rfq_223",XH="_newsMeta_x5rfq_225",YH="_newsAuthor_x5rfq_227",JH="_newsTime_x5rfq_229",ZH="_newsText_x5rfq_231",eG="_newsImage_x5rfq_233",tG="_carouselCtrls_x5rfq_241",sG="_carousel_x5rfq_241",nG="_slide_x5rfq_249",rG="_slideActive_x5rfq_251",iG="_slideInactive_x5rfq_253",aG="_slideThumb_x5rfq_255",oG="_slideFallback_x5rfq_257",lG="_slideCaption_x5rfq_259",cG="_liveCard_x5rfq_265",dG="_liveAvatar_x5rfq_267",uG="_liveAvatarFallback_x5rfq_269",hG="_liveInfo_x5rfq_271",pG="_liveName_x5rfq_273",mG="_liveMeta_x5rfq_275",fG="_liveBadge_x5rfq_277",gG="_liveViewers_x5rfq_279",xG="_modalOverlay_x5rfq_285",yG="_modal_x5rfq_285",vG="_modalHeader_x5rfq_289",bG="_modalTitle_x5rfq_291",_G="_modalFilters_x5rfq_295",wG="_formRow_x5rfq_297",jG="_formRowCheckbox_x5rfq_299",SG="_select_x5rfq_301",NG="_input_x5rfq_301",kG="_tableWrap_x5rfq_303",CG="_table_x5rfq_303",Ve={row:TH,colFull:EH,colCommunity:AH,colGuides:IH,card:RH,header:PH,title:LH,subtitle:DH,empty:MH,errorNote:FH,linkBtn:BH,primaryBtn:$H,navBtn:OH,closeBtn:VH,actionsRight:UH,tileGrid:zH,tile:HH,tileIcon:GH,tileIconFallback:WH,tileLabel:qH,newsList:KH,newsItem:QH,newsMeta:XH,newsAuthor:YH,newsTime:JH,newsText:ZH,newsImage:eG,carouselCtrls:tG,carousel:sG,slide:nG,slideActive:rG,slideInactive:iG,slideThumb:aG,slideFallback:oG,slideCaption:lG,liveCard:cG,liveAvatar:dG,liveAvatarFallback:uG,liveInfo:hG,liveName:pG,liveMeta:mG,liveBadge:fG,liveViewers:gG,modalOverlay:xG,modal:yG,modalHeader:vG,modalTitle:bG,modalFilters:_G,formRow:wG,formRowCheckbox:jG,select:SG,input:NG,tableWrap:kG,table:CG},TG=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"];async function DE(){const t=[];for(const s of TG)try{const i=await(await fetch(s,{cache:"no-store"})).text(),a=EG(i);t.push(...a)}catch(r){}const e=new Map;for(const s of t){const r=String(s["Creator Name"]||s.creator_name||s.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,s)}return Array.from(e.values())}function aN(t){const e=[];let s="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(s+='"',i++):r=!r:a===","&&!r?(e.push(s),s=""):s+=a}return e.push(s),e}function EG(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const s=aN(e[0]);return e.slice(1).map(r=>{const i=aN(r),a={};return s.forEach((l,d)=>{var u;return a[l.trim()]=((u=i[d])!=null?u:"").trim()}),a})}function AG(t){try{const e=Date.now(),s=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-s),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const l=Math.floor(a/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}catch(e){return""}}function IG(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const s=e.pathname.toLowerCase();if(s.startsWith("/shorts/"))return s.split("/")[2]||null}}catch(e){}return null}const RG=[{to:"/toplists/",label:"Toplists"},{to:"/guidehub/?tab=calculators",label:"GuideHub"},{to:"/players/",label:"Players"},{to:"/guilds/",label:"Guilds"},{to:"/community/",label:"Community"},{to:"/magazine/historybook/",label:"Historybook"},{to:"/creator-hub/",label:"Creator Hub"},{to:"/help",label:"Help"},{to:"/settings/",label:"Settings"}],oN={},PG=()=>n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.tiles",children:[n.jsxs("header",{className:Ve.header,children:[n.jsx("span",{className:Ve.title,"data-i18n":"home.title",children:"Home"}),n.jsx("span",{className:Ve.subtitle,"data-i18n":"home.subtitle",children:"Welcome back"})]}),n.jsx("div",{className:Ve.tileGrid,role:"list",children:RG.map(t=>n.jsxs(rs,{to:t.to,role:"listitem",className:Ve.tile,"aria-label":t.label,children:[oN[t.to]?n.jsx("img",{src:oN[t.to],alt:"",className:Ve.tileIcon}):n.jsx("div",{className:Ve.tileIconFallback,"aria-hidden":!0,children:t.label.slice(0,2).toUpperCase()}),n.jsx("div",{className:Ve.tileLabel,"data-i18n":`nav.${t.label.toLowerCase()}`,children:t.label})]},t.to))})]}),LG=()=>{const[t,e]=T.useState(null),[s,r]=T.useState(null);T.useEffect(()=>{async function a(){{e([]);return}}return a(),()=>{}},[]);const i=!t||t.length===0;return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.news","aria-busy":t==null,children:[n.jsx("header",{className:Ve.header,children:n.jsx("span",{className:Ve.title,"data-i18n":"home.news.title",children:"Community news"})}),n.jsxs("div",{className:Ve.newsList,children:[t==null?void 0:t.map(a=>{var l;return n.jsxs("article",{className:Ve.newsItem,children:[n.jsxs("div",{className:Ve.newsMeta,children:[n.jsx("span",{className:Ve.newsAuthor,children:a.author||"Discord"}),n.jsx("span",{className:Ve.newsTime,children:AG(a.timestamp)})]}),n.jsx("p",{className:Ve.newsText,children:a.text}),a.image&&n.jsx("img",{src:a.image,alt:"",className:Ve.newsImage}),a.url&&n.jsx("a",{href:a.url,target:"_blank",rel:"noreferrer",className:Ve.linkBtn,"data-i18n":"home.news.open_on_discord",children:"Auf Discord ffnen"})]},(l=a.id)!=null?l:`${a.author}-${a.timestamp}`)}),i&&n.jsx("div",{className:Ve.empty,"data-i18n":"home.news.empty",children:"No news yet"})]}),s&&n.jsx("div",{className:Ve.errorNote,"aria-live":"polite",children:s})]})},DG=()=>{const[t,e]=T.useState([]),[s,r]=T.useState(0),i=T.useRef(null);T.useEffect(()=>{let u=!0;async function h(){try{const g=(await DE()).map(v=>{const b=String(v["Creator Name"]||v.creator_name||v.name||"").trim(),S=String(v["YouTube Link"]||v.youtube||v.YouTube||"").trim();if(!S)return null;const k=IG(S),E=k?`https://i.ytimg.com/vi/${k}/hqdefault.jpg`:void 0;return{title:b,url:S,thumb:E}}).filter(Boolean).slice(0,12);u&&e(g)}catch(p){u&&e([])}}return h(),()=>{u=!1}},[]),T.useEffect(()=>{if(!(t.length<=1))return i.current=window.setInterval(()=>r(u=>(u+1)%t.length),6e3),()=>{i.current&&window.clearInterval(i.current)}},[t]);const a=()=>r(u=>(u-1+t.length)%Math.max(t.length,1)),l=()=>r(u=>(u+1)%Math.max(t.length,1)),d=u=>{u.key==="ArrowLeft"&&(u.preventDefault(),a()),u.key==="ArrowRight"&&(u.preventDefault(),l())};return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.youtube",children:[n.jsxs("header",{className:Ve.header,children:[n.jsx("span",{className:Ve.title,"data-i18n":"home.youtube.title",children:"YouTube"}),n.jsxs("div",{className:Ve.carouselCtrls,children:[n.jsx("button",{className:Ve.navBtn,onClick:a,"aria-label":"Prev",children:""}),n.jsx("button",{className:Ve.navBtn,onClick:l,"aria-label":"Next",children:""})]})]}),n.jsx("div",{className:Ve.carousel,tabIndex:0,onKeyDown:d,"aria-roledescription":"carousel",children:t.length===0?n.jsx("div",{className:Ve.empty,children:"No videos"}):t.map((u,h)=>n.jsxs("a",{href:u.url,target:"_blank",rel:"noreferrer",className:[Ve.slide,h===s?Ve.slideActive:Ve.slideInactive].join(" "),children:[u.thumb?n.jsx("img",{src:u.thumb,alt:"",className:Ve.slideThumb}):n.jsx("div",{className:Ve.slideFallback,children:u.title.slice(0,2).toUpperCase()}),n.jsx("div",{className:Ve.slideCaption,children:u.title})]},u.url))})]})},MG=({onOpenSchedule:t})=>{var p;const[e,s]=T.useState(null),[r,i]=T.useState(new Map),[a,l]=T.useState(0),d=T.useRef(null);if(T.useEffect(()=>{async function g(){{s([]);return}}return g(),()=>{}},[]),T.useEffect(()=>{let g=!0;async function v(){try{const b=await DE(),S=new Map;for(const k of b){const E=String(k["Creator Name"]||k.creator_name||k.name||"").trim(),L=String(k["Twitch Link"]||k.twitch||k.Twitch||"").trim();if(!E||!L)continue;const M=(()=>{try{return new URL(L).pathname.replace(/^\//,"").toLowerCase()}catch(N){return L.toLowerCase()}})();M&&S.set(M,L),S.set(E.toLowerCase(),L)}g&&i(S)}catch(b){g&&i(new Map)}}return v(),()=>{g=!1}},[]),T.useEffect(()=>{if(!(!e||e.length<=1))return d.current=window.setInterval(()=>l(g=>(g+1)%e.length),8e3),()=>{d.current&&window.clearInterval(d.current)}},[e]),!e||e.length===0)return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:Ve.header,children:n.jsx("span",{className:Ve.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsx("div",{className:Ve.empty,"data-i18n":"home.live.none",children:"Nobody is live right now."}),n.jsx("div",{className:Ve.actionsRight,children:n.jsx("button",{className:Ve.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:"Streaming-Plan anzeigen"})})]});const u=e[a],h=(()=>{const g=((u==null?void 0:u.name)||"").toLowerCase();if(u!=null&&u.url)return u.url;if(g)return r.has(g)?r.get(g):r.has(g.replace(/^@/,""))?r.get(g.replace(/^@/,"")):`https://www.twitch.tv/${g}`})();return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:Ve.header,children:n.jsx("span",{className:Ve.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsxs("div",{className:Ve.liveCard,children:[u!=null&&u.avatar?n.jsx("img",{src:u.avatar,alt:"",className:Ve.liveAvatar}):n.jsx("div",{className:Ve.liveAvatarFallback,"aria-hidden":!0,children:(p=u==null?void 0:u.name)==null?void 0:p.slice(0,2).toUpperCase()}),n.jsxs("div",{className:Ve.liveInfo,children:[n.jsx("div",{className:Ve.liveName,children:u==null?void 0:u.name}),n.jsxs("div",{className:Ve.liveMeta,children:[n.jsx("span",{className:Ve.liveBadge,children:"LIVE"}),typeof(u==null?void 0:u.viewers)=="number"&&n.jsxs("span",{className:Ve.liveViewers,children:[u.viewers.toLocaleString()," viewers"]})]})]}),h&&n.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:Ve.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:"Auf Twitch ffnen"})]}),n.jsxs("div",{className:Ve.carouselCtrls,children:[n.jsx("button",{className:Ve.navBtn,onClick:()=>l(g=>(g-1+e.length)%e.length),"aria-label":"Prev",children:""}),n.jsx("button",{className:Ve.navBtn,onClick:()=>l(g=>(g+1)%e.length),"aria-label":"Next",children:""})]})]})},FG=({open:t,onClose:e})=>{var b;const[s,r]=T.useState(null),[i,a]=T.useState("All"),[l,d]=T.useState(""),[u,h]=T.useState(!1);if(T.useEffect(()=>{if(!t)return;async function S(){{r([]);return}}return S(),()=>{}},[t]),T.useEffect(()=>{const S=k=>{k.key==="Escape"&&e()};return t&&window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[t,e]),!t)return null;const p=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),g=(s||[]).filter(S=>{if(i!=="All"&&S.platform.toLowerCase()!==i.toLowerCase()||u&&S.weekday&&S.weekday.toLowerCase()!==p.toLowerCase())return!1;if(l){const k=l.toLowerCase();if(!`${S.streamer} ${S.title}`.toLowerCase().includes(k))return!1}return!0}),v=((b=s==null?void 0:s.length)!=null?b:0)===0;return n.jsx("div",{className:Ve.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:n.jsxs("div",{className:Ve.modal,children:[n.jsxs("header",{className:Ve.modalHeader,children:[n.jsx("h2",{id:"schedule-title",className:Ve.modalTitle,"data-i18n":"home.schedule.title",children:"Streaming-Plan"}),n.jsx("button",{className:Ve.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:"Schlieen"})]}),n.jsxs("div",{className:Ve.modalFilters,children:[n.jsxs("label",{className:Ve.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.platform",children:"Platform"}),n.jsxs("select",{value:i,onChange:S=>a(S.target.value),className:Ve.select,children:[n.jsx("option",{value:"All",children:"All"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"YouTube",children:"YouTube"})]})]}),n.jsxs("label",{className:Ve.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.search",children:"Search"}),n.jsx("input",{value:l,onChange:S=>d(S.target.value),className:Ve.input,placeholder:"Streamer / Title"})]}),n.jsxs("label",{className:Ve.formRowCheckbox,children:[n.jsx("input",{type:"checkbox",checked:u,onChange:S=>h(S.target.checked)}),n.jsx("span",{"data-i18n":"home.schedule.today",children:"Nur heute"})]})]}),n.jsx("div",{className:Ve.tableWrap,children:n.jsxs("table",{className:Ve.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"weekday"}),n.jsx("th",{children:"start_utc"}),n.jsx("th",{children:"end_utc"}),n.jsx("th",{children:"timezone"}),n.jsx("th",{children:"platform"}),n.jsx("th",{children:"channel_url"}),n.jsx("th",{children:"streamer"}),n.jsx("th",{children:"title"})]})}),n.jsx("tbody",{children:v?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:Ve.empty,children:"No schedule yet"})}):g.map((S,k)=>n.jsxs("tr",{children:[n.jsx("td",{children:S.weekday}),n.jsx("td",{children:S.start_utc}),n.jsx("td",{children:S.end_utc}),n.jsx("td",{children:S.timezone}),n.jsx("td",{children:S.platform}),n.jsx("td",{children:S.channel_url?n.jsx("a",{href:S.channel_url,target:"_blank",rel:"noreferrer",children:"link"}):""}),n.jsx("td",{children:S.streamer}),n.jsx("td",{children:S.title})]},k))})]})})]})})},BG=()=>{const[t,e]=T.useState(!1);return n.jsxs(Et,{title:"home.title",subtitle:"home.subtitle",children:[n.jsx("div",{className:Ve.row,children:n.jsx("div",{className:Ve.colFull,children:n.jsx(PG,{})})}),n.jsxs("div",{className:Ve.row,children:[n.jsx("div",{className:Ve.colCommunity,children:n.jsx(LG,{})}),n.jsx("div",{className:Ve.colGuides,children:n.jsx(DG,{})})]}),n.jsx("div",{className:Ve.row,children:n.jsx("div",{className:Ve.colFull,children:n.jsx(MG,{onOpenSchedule:()=>e(!0)})})}),n.jsx(FG,{open:t,onClose:()=>e(!1)})]})},$G="_wrapper_125p4_1",OG="_card_125p4_19",VG="_logo_125p4_45",UG="_heading_125p4_61",zG="_subcopy_125p4_73",HG="_buttonStack_125p4_83",GG="_providerButton_125p4_97",WG="_discord_125p4_145",qG="_google_125p4_153",KG="_disclaimer_125p4_161",QG="_status_125p4_173",XG="_sessionBlock_125p4_183",YG="_logoutButton_125p4_197",JG="_linkButton_125p4_227",ZG="_loading_125p4_245",eW="_spinner_125p4_261",yn={wrapper:$G,card:OG,logo:VG,heading:UG,subcopy:zG,buttonStack:HG,providerButton:GG,discord:WG,google:qG,disclaimer:KG,status:QG,sessionBlock:XG,logoutButton:YG,linkButton:JG,loading:ZG,spinner:eW},tW=()=>{const t=si(),{status:e,user:s,loginWithDiscord:r,loginWithGoogle:i,logout:a}=zo(),l=e==="loading"||e==="idle",d=e==="authenticated"&&!!s,u=()=>{l||r()},h=()=>{l||i()},p=async()=>{await a()},g=()=>{t("/")};let v;return l?v=n.jsxs("div",{className:yn.loading,children:[n.jsx("div",{className:yn.spinner}),n.jsx("div",{children:"Checking session"})]}):d&&s?v=n.jsxs("div",{className:yn.sessionBlock,children:[n.jsxs("div",{className:yn.status,children:["You are logged in as ",s.displayName,"."]}),n.jsx("button",{className:yn.logoutButton,type:"button",onClick:p,children:"Logout"}),n.jsx("button",{className:yn.linkButton,type:"button",onClick:g,children:"Back to dashboard"})]}):v=n.jsxs("div",{className:yn.buttonStack,children:[n.jsx("button",{className:`${yn.providerButton} ${yn.discord}`,type:"button",onClick:u,children:"Login with Discord"}),n.jsx("button",{className:`${yn.providerButton} ${yn.google}`,type:"button",onClick:h,children:"Login with Google"})]}),n.jsx(Et,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:n.jsx("div",{className:yn.wrapper,children:n.jsxs("div",{className:yn.card,children:[n.jsx("img",{className:yn.logo,src:rf,alt:"SFDataHub logo"}),n.jsx("h1",{className:yn.heading,children:"Sign in"}),n.jsx("p",{className:yn.subcopy,children:"Choose a method to access SFDataHub."}),v,n.jsx("p",{className:yn.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})})};function sW(){return n.jsx(Et,{hex:n.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:n.jsx(nW,{}),right:n.jsx(rW,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(Yy,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),n.jsx(Yy,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),n.jsx(Yy,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function nW(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(Jy,{to:"/dashboard/kpis",children:"KPIs"}),n.jsx(Jy,{to:"/dashboard/activity",children:"Activity"}),n.jsx(Jy,{to:"/dashboard/progression",children:"Progression"})]})]})}function rW(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),n.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function Yy({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function Jy({to:t,children:e}){return n.jsx(rs,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function iW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  KPIs"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(Zy,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),n.jsx(Zy,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),n.jsx(Zy,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function Zy({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),n.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function aW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Activity"}),n.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),n.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[n.jsx("li",{children:" Neues Scan-File hochgeladen"}),n.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),n.jsx("li",{children:" Gilden-Event geplant"})]})]})}function oW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Progression"}),n.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[n.jsx(ev,{title:"Scrapbook 100%",progress:72}),n.jsx(ev,{title:"Fortress Ausbaustufe",progress:48}),n.jsx(ev,{title:"Underworld Boss",progress:35})]})]})}function ev({title:t,progress:e}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),n.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:n.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),n.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function lW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Discover"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(fl,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),n.jsx(fl,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),n.jsx(fl,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),n.jsx(fl,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),n.jsx(fl,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),n.jsx(fl,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),n.jsx(fl,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function fl({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function cW({children:t,framed:e=!0}){return e?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:Ta.border,backgroundColor:Ta.tile},children:t}):n.jsx("main",{className:"min-w-0",children:t})}function dW(t,e){if(!t)return"";const s=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return s;const r=s.includes("?")?"&":"?";return`${s}${r}bg=transparent&background=transparent`}const uW=({srcOrId:t,aspectRatio:e="16/10",height:s,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:l=!1,infoText:d="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[p,g]=T.useState(!1),v=T.useMemo(()=>dW(t,h),[t,h]),b=i?"lazy":"eager",S={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},k={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},E=s?{position:"relative",width:"100%",height:s,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},L={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return n.jsx("div",{className:a,style:S,children:n.jsx("div",{style:k,children:n.jsxs("div",{style:E,children:[n.jsx("iframe",{src:v,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:b,scrolling:"no",title:"Heyzine Flipbook"}),l&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(M=>!M),style:L,title:"Info",children:"i"}),p&&n.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[d," ",n.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},hW="#0C1C2E",pW=()=>n.jsx(Et,{children:n.jsx(cW,{children:n.jsxs("div",{style:{position:"relative",width:"100%"},children:[n.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:hW,borderRadius:16,pointerEvents:"none",zIndex:0}}),n.jsx("div",{style:{position:"relative",zIndex:1},children:n.jsx(uW,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),mW="_pageWrap_72re9_7",fW="_infoLine_72re9_17",gW="_viewerHost_72re9_43",xW="_overlay_72re9_99",yW="_dragZoneLeft_72re9_101",vW="_dragZoneRight_72re9_103",bW="_inbookLink_72re9_105",go={pageWrap:mW,infoLine:fW,viewerHost:gW,overlay:xW,dragZoneLeft:yW,dragZoneRight:vW,inbookLink:bW};var $u={exports:{}},_W=$u.exports,lN;function wW(){return lN||(lN=1,(function(t,e){(function(s,r){r(e)})(_W,(function(s){class r{constructor(y,_){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=_,this.nowDrawingDensity=this.createdDensity,this.render=y}setDensity(y){this.createdDensity=y,this.nowDrawingDensity=y}setDrawingDensity(y){this.nowDrawingDensity=y}setPosition(y){this.state.position=y}setAngle(y){this.state.angle=y}setArea(y){this.state.area=y}setHardDrawingAngle(y){this.state.hardDrawingAngle=y}setHardAngle(y){this.state.hardAngle=y,this.state.hardDrawingAngle=y}setOrientation(y){this.orientation=y}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(y,_,D){super(y,D),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=_}draw(y){const _=this.render.getContext(),D=this.render.convertToGlobal(this.state.position),C=this.render.getRect().pageWidth,w=this.render.getRect().height;_.save(),_.translate(D.x,D.y),_.beginPath();for(let I of this.state.area)I!==null&&(I=this.render.convertToGlobal(I),_.lineTo(I.x-D.x,I.y-D.y));_.rotate(this.state.angle),_.clip(),this.isLoad?_.drawImage(this.image,0,0,C,w):this.drawLoader(_,{x:0,y:0},C,w),_.restore()}simpleDraw(y){const _=this.render.getRect(),D=this.render.getContext(),C=_.pageWidth,w=_.height,I=y===1?_.left+_.pageWidth:_.left,F=_.top;this.isLoad?D.drawImage(this.image,I,F,C,w):this.drawLoader(D,{x:I,y:F},C,w)}drawLoader(y,_,D,C){y.beginPath(),y.strokeStyle="rgb(200, 200, 200)",y.fillStyle="rgb(255, 255, 255)",y.lineWidth=1,y.rect(_.x+1,_.y+1,D-1,C-1),y.stroke(),y.fill();const w={x:_.x+D/2,y:_.y+C/2};y.beginPath(),y.lineWidth=10,y.arc(w.x,w.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),y.stroke(),y.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(y,_){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=_,this.app=y,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let _=0;_<this.pages.length;_++)this.portraitSpread.push([_]);let y=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([y]),y++);for(let _=y;_<this.pages.length;_+=2)_<this.pages.length-1?this.landscapeSpread.push([_,_+1]):(this.landscapeSpread.push([_]),this.pages[_].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(y){const _=this.getSpread();for(let D=0;D<_.length;D++)if(y===_[D][0]||y===_[D][1])return D;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(y){if(y>=0&&y<this.pages.length)return this.pages[y];throw new Error("Invalid page number")}nextBy(y){const _=this.pages.indexOf(y);return _<this.pages.length-1?this.pages[_+1]:null}prevBy(y){const _=this.pages.indexOf(y);return _>0?this.pages[_-1]:null}getFlippingPage(y){const _=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return y===0?this.pages[_].newTemporaryCopy():this.pages[_-1];{const D=y===0?this.getSpread()[_+1]:this.getSpread()[_-1];return D.length===1||y===0?this.pages[D[0]]:this.pages[D[1]]}}getBottomPage(y){const _=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return y===0?this.pages[_+1]:this.pages[_-1];{const D=y===0?this.getSpread()[_+1]:this.getSpread()[_-1];return D.length===1?this.pages[D[0]]:y===0?this.pages[D[1]]:this.pages[D[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(y=null){if(y===null&&(y=this.currentPageIndex),y<0||y>=this.pages.length)return;const _=this.getSpreadIndexByPage(y);_!==null&&(this.currentSpreadIndex=_,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(y){if(!(y>=0&&y<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=y}showSpread(){const y=this.getSpread()[this.currentSpreadIndex];y.length===2?(this.render.setLeftPage(this.pages[y[0]]),this.render.setRightPage(this.pages[y[1]])):this.render.getOrientation()==="landscape"&&y[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[y[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[y[0]])),this.currentPageIndex=y[0],this.app.updatePageIndex(this.currentPageIndex)}}class l extends a{constructor(y,_,D){super(y,_),this.imagesHref=D}load(){for(const y of this.imagesHref){const _=new i(this.render,y,"soft");_.load(),this.pages.push(_)}this.createSpread()}}class d{static GetDistanceBetweenTwoPoint(y,_){return y===null||_===null?1/0:Math.sqrt(Math.pow(_.x-y.x,2)+Math.pow(_.y-y.y,2))}static GetSegmentLength(y){return d.GetDistanceBetweenTwoPoint(y[0],y[1])}static GetAngleBetweenTwoLine(y,_){const D=y[0].y-y[1].y,C=_[0].y-_[1].y,w=y[1].x-y[0].x,I=_[1].x-_[0].x;return Math.acos((D*C+w*I)/(Math.sqrt(D*D+w*w)*Math.sqrt(C*C+I*I)))}static PointInRect(y,_){return _===null?null:_.x>=y.left&&_.x<=y.width+y.left&&_.y>=y.top&&_.y<=y.top+y.height?_:null}static GetRotatedPoint(y,_,D){return{x:y.x*Math.cos(D)+y.y*Math.sin(D)+_.x,y:y.y*Math.cos(D)-y.x*Math.sin(D)+_.y}}static LimitPointToCircle(y,_,D){if(d.GetDistanceBetweenTwoPoint(y,D)<=_)return D;const C=y.x,w=y.y,I=D.x,F=D.y;let R=Math.sqrt(Math.pow(_,2)*Math.pow(C-I,2)/(Math.pow(C-I,2)+Math.pow(w-F,2)))+C;D.x<0&&(R*=-1);let B=(R-C)*(w-F)/(C-I)+w;return C-I+w===0&&(B=_),{x:R,y:B}}static GetIntersectBetweenTwoSegment(y,_,D){return d.PointInRect(y,d.GetIntersectBeetwenTwoLine(_,D))}static GetIntersectBeetwenTwoLine(y,_){const D=y[0].y-y[1].y,C=_[0].y-_[1].y,w=y[1].x-y[0].x,I=_[1].x-_[0].x,F=y[0].x*y[1].y-y[1].x*y[0].y,R=_[0].x*_[1].y-_[1].x*_[0].y,B=D*R-C*F,$=w*R-I*F,W=-(F*I-R*w)/(D*I-C*w),H=-(D*R-C*F)/(D*I-C*w);if(isFinite(W)&&isFinite(H))return{x:W,y:H};if(Math.abs(B-$)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(y,_){const D=Math.abs(y.x-_.x),C=Math.abs(y.y-_.y),w=Math.max(D,C),I=[y];function F(R,B,$,W,H){return B>R?R+H*($/W):B<R?R-H*($/W):R}for(let R=1;R<=w;R+=1)I.push({x:F(y.x,_.x,D,w,R),y:F(y.y,_.y,C,w,R)});return I}}class u extends r{constructor(y,_,D){super(y,D),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=_,this.element.classList.add("stf__item"),this.element.classList.add("--"+D)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(y){const _=y||this.nowDrawingDensity,D=this.render.convertToGlobal(this.state.position),C=this.render.getRect().pageWidth,w=this.render.getRect().height;this.element.classList.remove("--simple");const I=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${C}px;
            height: ${w}px;
        `;_==="hard"?this.drawHard(I):this.drawSoft(D,I)}drawHard(y=""){const _=this.render.getRect().left+this.render.getRect().width/2,D=this.state.hardDrawingAngle,C=y+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${D}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${_}px, 0, 0) rotateY(${D}deg);`);this.element.style.cssText=C}drawSoft(y,_=""){let D="polygon( ";for(const w of this.state.area)if(w!==null){let I=this.render.getDirection()===1?{x:-w.x+this.state.position.x,y:w.y-this.state.position.y}:{x:w.x-this.state.position.x,y:w.y-this.state.position.y};I=d.GetRotatedPoint(I,{x:0,y:0},this.state.angle),D+=I.x+"px "+I.y+"px, "}D=D.slice(0,-2),D+=")";const C=_+`transform-origin: 0 0; clip-path: ${D}; -webkit-clip-path: ${D};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${y.x}px, ${y.y}px);`:`transform: translate3d(${y.x}px, ${y.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=C}simpleDraw(y){const _=this.render.getRect(),D=_.pageWidth,C=_.height,w=y===1?_.left+_.pageWidth:_.left,I=_.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${C}px; 
            left: ${w}px; 
            top: ${I}px; 
            width: ${D}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(y){super.setOrientation(y),this.element.classList.remove("--left","--right"),this.element.classList.add(y===1?"--right":"--left")}setDrawingDensity(y){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+y),super.setDrawingDensity(y)}}class h extends a{constructor(y,_,D,C){super(y,_),this.element=D,this.pagesElement=C}load(){for(const y of this.pagesElement){const _=new u(this.render,y,y.dataset.density==="hard"?"hard":"soft");_.load(),this.pages.push(_)}this.createSpread()}}class p{constructor(y,_,D,C){this.direction=y,this.corner=_,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(D,10),this.pageHeight=parseInt(C,10)}calc(y){try{return this.position=this.calcAngleAndPosition(y),this.calculateIntersectPoint(this.position),!0}catch(_){return!1}}getFlippingClipArea(){const y=[];let _=!1;return y.push(this.rect.topLeft),y.push(this.topIntersectPoint),this.sideIntersectPoint===null?_=!0:(y.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(_=!1)),y.push(this.bottomIntersectPoint),(_||this.corner==="bottom")&&y.push(this.rect.bottomLeft),y}getBottomClipArea(){const y=[];return y.push(this.topIntersectPoint),this.corner==="top"?y.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&y.push({x:this.pageWidth,y:0}),y.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?d.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&y.push(this.sideIntersectPoint):this.corner==="top"&&y.push({x:this.pageWidth,y:this.pageHeight}),y.push(this.bottomIntersectPoint),y.push(this.topIntersectPoint),y}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const y=d.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?y:Math.PI-y}calcAngleAndPosition(y){let _=y;if(this.updateAngleAndGeometry(_),_=this.corner==="top"?this.checkPositionAtCenterLine(_,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(_,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(_.x-this.pageWidth)<1&&Math.abs(_.y)<1)throw new Error("Point is too small");return _}updateAngleAndGeometry(y){this.angle=this.calculateAngle(y),this.rect=this.getPageRect(y)}calculateAngle(y){const _=this.pageWidth-y.x+1,D=this.corner==="bottom"?this.pageHeight-y.y:y.y;let C=2*Math.acos(_/Math.sqrt(D*D+_*_));D<0&&(C=-C);const w=Math.PI-C;if(!isFinite(C)||w>=0&&w<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(C=-C),C}getPageRect(y){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],y):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],y)}getRectFromBasePoint(y,_){return{topLeft:this.getRotatedPoint(y[0],_),topRight:this.getRotatedPoint(y[1],_),bottomLeft:this.getRotatedPoint(y[2],_),bottomRight:this.getRotatedPoint(y[3],_)}}getRotatedPoint(y,_){return{x:y.x*Math.cos(this.angle)+y.y*Math.sin(this.angle)+_.x,y:y.y*Math.cos(this.angle)-y.x*Math.sin(this.angle)+_.y}}calculateIntersectPoint(y){const _={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[y,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[y,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[y,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(y,_,D){let C=y;const w=d.LimitPointToCircle(_,this.pageWidth,C);C!==w&&(C=w,this.updateAngleAndGeometry(C));const I=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let F=this.rect.bottomRight,R=this.rect.topLeft;if(this.corner==="bottom"&&(F=this.rect.topRight,R=this.rect.bottomLeft),F.x<=0){const B=d.LimitPointToCircle(D,I,R);B!==C&&(C=B,this.updateAngleAndGeometry(C))}return C}getSegmentToShadowLine(){const y=this.getShadowStartPoint();return[y,y!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(y,_){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=y,this.app=_}fold(y){this.setState("user_fold"),this.calc===null&&this.start(y),this.do(this.render.convertToPage(y))}flip(y){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(y)||(this.calc!==null&&this.render.finishAnimation(),!this.start(y)))return;const _=this.getBoundsRect();this.setState("flipping");const D=_.height/10,C=this.calc.getCorner()==="bottom"?_.height-D:D,w=this.calc.getCorner()==="bottom"?_.height:0;this.calc.calc({x:_.pageWidth-D,y:C}),this.animateFlippingTo({x:_.pageWidth-D,y:C},{x:-_.pageWidth,y:w},!0)}start(y){this.reset();const _=this.render.convertToBook(y),D=this.getBoundsRect(),C=this.getDirectionByPoint(_),w=_.y>=D.height/2?"bottom":"top";if(!this.checkDirection(C))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(C),this.bottomPage=this.app.getPageCollection().getBottomPage(C),this.render.getOrientation()==="landscape")if(C===1){const I=this.app.getPageCollection().nextBy(this.flippingPage);I!==null&&this.flippingPage.getDensity()!==I.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),I.setDrawingDensity("hard"))}else{const I=this.app.getPageCollection().prevBy(this.flippingPage);I!==null&&this.flippingPage.getDensity()!==I.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),I.setDrawingDensity("hard"))}return this.render.setDirection(C),this.calc=new p(C,w,D.pageWidth.toString(10),D.height.toString(10)),!0}catch(I){return!1}}do(y){if(this.calc!==null&&this.calc.calc(y)){const _=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*_)/100):this.flippingPage.setHardAngle(-90*(200-2*_)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),_,this.calc.getDirection())}}flipToPage(y,_){const D=this.app.getPageCollection().getCurrentSpreadIndex(),C=this.app.getPageCollection().getSpreadIndexByPage(y);try{C>D&&(this.app.getPageCollection().setCurrentSpreadIndex(C-1),this.flipNext(_)),C<D&&(this.app.getPageCollection().setCurrentSpreadIndex(C+1),this.flipPrev(_))}catch(w){}}flipNext(y){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:y==="top"?1:this.render.getRect().height-2})}flipPrev(y){this.flip({x:10,y:y==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const y=this.calc.getPosition(),_=this.getBoundsRect(),D=this.calc.getCorner()==="bottom"?_.height:0;y.x<=0?this.animateFlippingTo(y,{x:-_.pageWidth,y:D},!0):this.animateFlippingTo(y,{x:_.pageWidth,y:D},!1)}showCorner(y){if(!this.checkState("read","fold_corner"))return;const _=this.getBoundsRect(),D=_.pageWidth;if(this.isPointOnCorners(y))if(this.calc===null){if(!this.start(y))return;this.setState("fold_corner"),this.calc.calc({x:D-1,y:1});const C=50,w=this.calc.getCorner()==="bottom"?_.height-1:1,I=this.calc.getCorner()==="bottom"?_.height-C:C;this.animateFlippingTo({x:D-1,y:w},{x:D-C,y:I},!1,!1)}else this.do(this.render.convertToPage(y));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(y,_,D,C=!0){const w=d.GetCordsFromTwoPoint(y,_),I=[];for(const R of w)I.push(()=>this.do(R));const F=this.getAnimationDuration(w.length);this.render.startAnimation(I,F,()=>{this.calc&&(D&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),C&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(y){this.state!==y&&(this.app.updateState(y),this.state=y)}getDirectionByPoint(y){const _=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(y.x-_.pageWidth<=_.width/5)return 1}else if(y.x<_.width/2)return 1;return 0}getAnimationDuration(y){const _=this.app.getSettings().flippingTime;return y>=1e3?_:y/1e3*_}checkDirection(y){return y===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...y){for(const _ of y)if(this.state===_)return!0;return!1}isPointOnCorners(y){const _=this.getBoundsRect(),D=_.pageWidth,C=Math.sqrt(Math.pow(D,2)+Math.pow(_.height,2))/5,w=this.render.convertToBook(y);return w.x>0&&w.y>0&&w.x<_.width&&w.y<_.height&&(w.x<C||w.x>_.width-C)&&(w.y<C||w.y>_.height-C)}}class v{constructor(y,_){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=_,this.app=y;const D=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=D.exec(window.navigator.userAgent)!==null}render(y){if(this.animation!==null){const _=Math.round((y-this.animation.startedAt)/this.animation.durationFrame);_<this.animation.frames.length?this.animation.frames[_]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=y,this.drawFrame()}start(){this.update();const y=_=>{this.render(_),requestAnimationFrame(y)};requestAnimationFrame(y)}startAnimation(y,_,D){this.finishAnimation(),this.animation={frames:y,duration:_,durationFrame:_/y.length,onAnimateEnd:D,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const y=this.calculateBoundsRect();this.orientation!==y&&(this.orientation=y,this.app.updateOrientation(y))}calculateBoundsRect(){let y="landscape";const _=this.getBlockWidth(),D=_/2,C=this.getBlockHeight()/2,w=this.setting.width/this.setting.height;let I=this.setting.width,F=this.setting.height,R=D-I;return this.setting.size==="stretch"?(_<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(y="portrait"),I=y==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,I>this.setting.maxWidth&&(I=this.setting.maxWidth),F=I/w,F>this.getBlockHeight()&&(F=this.getBlockHeight(),I=F*w),R=y==="portrait"?D-I/2-I:D-I):_<2*I&&this.app.getSettings().usePortrait&&(y="portrait",R=D-I/2-I),this.boundsRect={left:R,top:C-F/2,width:2*I,height:F,pageWidth:I},y}setShadowData(y,_,D,C){if(!this.app.getSettings().drawShadow)return;const w=100*this.getSettings().maxShadowOpacity;this.shadow={pos:y,angle:_,width:3*this.getRect().pageWidth/4*D/100,opacity:(100-D)*w/100/100,direction:C,progress:2*D}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(y){this.pageRect=y}setDirection(y){this.direction=y}setRightPage(y){y!==null&&y.setOrientation(1),this.rightPage=y}setLeftPage(y){y!==null&&y.setOrientation(0),this.leftPage=y}setBottomPage(y){y!==null&&y.setOrientation(this.direction===1?0:1),this.bottomPage=y}setFlippingPage(y){y!==null&&y.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=y}convertToBook(y){const _=this.getRect();return{x:y.x-_.left,y:y.y-_.top}}isSafari(){return this.safari}convertToPage(y,_){_||(_=this.direction);const D=this.getRect();return{x:_===0?y.x-D.left-D.width/2:D.width/2-y.x+D.left,y:y.y-D.top}}convertToGlobal(y,_){if(_||(_=this.direction),y==null)return null;const D=this.getRect();return{x:_===0?y.x+D.left+D.width/2:D.width/2-y.x+D.left,y:y.y+D.top}}convertRectToGlobal(y,_){return _||(_=this.direction),{topLeft:this.convertToGlobal(y.topLeft,_),topRight:this.convertToGlobal(y.topRight,_),bottomLeft:this.convertToGlobal(y.bottomLeft,_),bottomRight:this.convertToGlobal(y.bottomRight,_)}}}class b extends v{constructor(y,_,D){super(y,_),this.canvas=D,this.ctx=D.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const y=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(y.left+y.pageWidth,y.top,y.width,y.height),this.ctx.clip())}drawBookShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath();const _=y.width/20;this.ctx.rect(y.left,y.top,y.width,y.height);const D={x:y.left+y.width/2-_/2,y:0};this.ctx.translate(D.x,D.y);const C=this.ctx.createLinearGradient(0,0,_,0);C.addColorStop(0,"rgba(0, 0, 0, 0)"),C.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),C.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),C.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),C.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),C.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=C,this.ctx.fillRect(0,0,_,2*y.height),this.ctx.restore()}drawOuterShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(y.left,y.top,y.width,y.height);const _=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(_.x,_.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const D=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),D.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),D.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),D.addColorStop(0,"rgba(0, 0, 0, 0)"),D.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=D,this.ctx.fillRect(0,0,this.shadow.width,2*y.height),this.ctx.restore()}drawInnerShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath();const _=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),D=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(D.topLeft.x,D.topLeft.y),this.ctx.lineTo(D.topRight.x,D.topRight.y),this.ctx.lineTo(D.bottomRight.x,D.bottomRight.y),this.ctx.lineTo(D.bottomLeft.x,D.bottomLeft.y),this.ctx.translate(_.x,_.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const C=3*this.shadow.width/4,w=this.ctx.createLinearGradient(0,0,C,0);this.shadow.direction===0?(this.ctx.translate(-C,-100),w.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),w.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),w.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),w.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=w,this.ctx.fillRect(0,0,C,2*y.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class S{constructor(y,_,D){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=w=>{if(this.checkTarget(w.target)){const I=this.getMousePos(w.clientX,w.clientY);this.app.startUserTouch(I),w.preventDefault()}},this.onTouchStart=w=>{if(this.checkTarget(w.target)&&w.changedTouches.length>0){const I=w.changedTouches[0],F=this.getMousePos(I.clientX,I.clientY);this.touchPoint={point:F,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(F)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||w.preventDefault()}},this.onMouseUp=w=>{const I=this.getMousePos(w.clientX,w.clientY);this.app.userStop(I)},this.onMouseMove=w=>{const I=this.getMousePos(w.clientX,w.clientY);this.app.userMove(I,!1)},this.onTouchMove=w=>{if(w.changedTouches.length>0){const I=w.changedTouches[0],F=this.getMousePos(I.clientX,I.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-F.x)>10||this.app.getState()!=="read")&&w.cancelable&&this.app.userMove(F,!0),this.app.getState()!=="read"&&w.preventDefault()):this.app.userMove(F,!0)}},this.onTouchEnd=w=>{if(w.changedTouches.length>0){const I=w.changedTouches[0],F=this.getMousePos(I.clientX,I.clientY);let R=!1;if(this.touchPoint!==null){const B=F.x-this.touchPoint.point.x,$=Math.abs(F.y-this.touchPoint.point.y);Math.abs(B)>this.swipeDistance&&$<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(B>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),R=!0),this.touchPoint=null}this.app.userStop(F,R)}},this.parentElement=y,y.classList.add("stf__parent"),y.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=y.querySelector(".stf__wrapper"),this.app=_;const C=this.app.getSettings().usePortrait?1:2;y.style.minWidth=D.minWidth*C+"px",y.style.minHeight=D.minHeight+"px",D.size==="fixed"&&(y.style.minWidth=D.width*C+"px",y.style.minHeight=D.height+"px"),D.autoSize&&(y.style.width="100%",y.style.maxWidth=2*D.maxWidth+"px"),y.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=D.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(y){this.wrapper.classList.remove("--portrait","--landscape"),y==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(y,_){const D=this.distElement.getBoundingClientRect();return{x:y-D.left,y:_-D.top}}checkTarget(y){return!this.app.getSettings().clickEventForward||!["a","button"].includes(y.tagName.toLowerCase())}}class k extends S{constructor(y,_,D,C){super(y,_,D),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=y.querySelector(".stf__block"),this.items=C;for(const w of C)this.distElement.appendChild(w);this.setHandlers()}clear(){for(const y of this.items)this.parentElement.appendChild(y)}updateItems(y){this.removeHandlers(),this.distElement.innerHTML="";for(const _ of y)this.distElement.appendChild(_);this.items=y,this.setHandlers()}update(){this.app.getRender().update()}}class E extends S{constructor(y,_,D){super(y,_,D),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=y.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const y=getComputedStyle(this.canvas),_=parseInt(y.getPropertyValue("width"),10),D=parseInt(y.getPropertyValue("height"),10);this.canvas.width=_,this.canvas.height=D}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class L extends v{constructor(y,_,D){super(y,_),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=D,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const y=this.getRect(),_=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let D=(100-_)*(2.5*y.pageWidth)/100+20;D>y.pageWidth&&(D=y.pageWidth);let C=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${D}px;
            height: ${y.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*_/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${y.left+y.width/2}px;
            transform-origin: 0 0;
        `;C+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=C}drawHardOuterShadow(){const y=this.getRect();let _=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*y.pageWidth)/100+20;_>y.pageWidth&&(_=y.pageWidth);let D=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${_}px;
            height: ${y.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${y.left+y.width/2}px;
            transform-origin: 0 0;
        `;D+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=D}drawInnerShadow(){const y=this.getRect(),_=3*this.shadow.width/4,D=this.getDirection()===0?_:0,C=this.getDirection()===0?"to left":"to right",w=this.convertToGlobal(this.shadow.pos),I=this.shadow.angle+3*Math.PI/2,F=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let R="polygon( ";for(const $ of F){let W=this.getDirection()===1?{x:-$.x+this.shadow.pos.x,y:$.y-this.shadow.pos.y}:{x:$.x-this.shadow.pos.x,y:$.y-this.shadow.pos.y};W=d.GetRotatedPoint(W,{x:D,y:100},I),R+=W.x+"px "+W.y+"px, "}R=R.slice(0,-2),R+=")";const B=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${_}px;
            height: ${2*y.height}px;
            background: linear-gradient(${C},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${D}px 100px;
            transform: translate3d(${w.x-D}px, ${w.y-100}px, 0) rotate(${I}rad);
            clip-path: ${R};
            -webkit-clip-path: ${R};
        `;this.innerShadow.style.cssText=B}drawOuterShadow(){const y=this.getRect(),_=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),D=this.shadow.angle+3*Math.PI/2,C=this.getDirection()===1?this.shadow.width:0,w=this.getDirection()===0?"to right":"to left",I=[{x:0,y:0},{x:y.pageWidth,y:0},{x:y.pageWidth,y:y.height},{x:0,y:y.height}];let F="polygon( ";for(const B of I)if(B!==null){let $=this.getDirection()===1?{x:-B.x+this.shadow.pos.x,y:B.y-this.shadow.pos.y}:{x:B.x-this.shadow.pos.x,y:B.y-this.shadow.pos.y};$=d.GetRotatedPoint($,{x:C,y:100},D),F+=$.x+"px "+$.y+"px, "}F=F.slice(0,-2),F+=")";const R=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*y.height}px;
            background: linear-gradient(${w}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${C}px 100px;
            transform: translate3d(${_.x-C}px, ${_.y-100}px, 0) rotate(${D}rad);
            clip-path: ${F};
            -webkit-clip-path: ${F};
        `;this.outerShadow.style.cssText=R}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const y=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(y))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const y of this.app.getPageCollection().getPages())y!==this.leftPage&&y!==this.rightPage&&y!==this.flippingPage&&y!==this.bottomPage&&(y.getElement().style.cssText="display: none"),y.getTemporaryCopy()!==this.flippingPage&&y.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class M{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(y){const _=this._default;if(Object.assign(_,y),_.size!=="stretch"&&_.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(_.width<=0||_.height<=0)throw new Error("Invalid width or height");if(_.flippingTime<=0)throw new Error("Invalid flipping time");return _.size==="stretch"?(_.minWidth<=0&&(_.minWidth=100),_.maxWidth<_.minWidth&&(_.maxWidth=2e3),_.minHeight<=0&&(_.minHeight=100),_.maxHeight<_.minHeight&&(_.maxHeight=2e3)):(_.minWidth=_.width,_.maxWidth=_.width,_.minHeight=_.height,_.maxHeight=_.height),_}}(function(N,y){y===void 0&&(y={});var _=y.insertAt;if(typeof document!="undefined"){var D=document.head||document.getElementsByTagName("head")[0],C=document.createElement("style");C.type="text/css",_==="top"&&D.firstChild?D.insertBefore(C,D.firstChild):D.appendChild(C),C.styleSheet?C.styleSheet.cssText=N:C.appendChild(document.createTextNode(N))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),s.PageFlip=class extends class{constructor(){this.events=new Map}on(N,y){return this.events.has(N)?this.events.get(N).push(y):this.events.set(N,[y]),this}off(N){this.events.delete(N)}trigger(N,y,_=null){if(this.events.has(N))for(const D of this.events.get(N))D({data:_,object:y})}}{constructor(N,y){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new M().getSettings(y),this.block=N}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(N){this.ui=new E(this.block,this,this.setting);const y=this.ui.getCanvas();this.render=new b(this,this.setting,y),this.flipController=new g(this.render,this),this.pages=new l(this,this.render,N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(N){this.ui=new k(this.block,this,this.setting,N),this.render=new L(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(N){const y=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new l(this,this.render,N),this.pages.load(),this.pages.show(y),this.trigger("update",this,{page:y,mode:this.render.getOrientation()})}updateFromHtml(N){const y=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.ui.updateItems(N),this.render.reload(),this.pages.show(y),this.trigger("update",this,{page:y,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(N){this.pages.show(N)}flipNext(N="top"){this.flipController.flipNext(N)}flipPrev(N="top"){this.flipController.flipPrev(N)}flip(N,y="top"){this.flipController.flipToPage(N,y)}updateState(N){this.trigger("changeState",this,N)}updatePageIndex(N){this.trigger("flip",this,N)}updateOrientation(N){this.ui.setOrientationStyle(N),this.update(),this.trigger("changeOrientation",this,N)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(N){return this.pages.getPage(N)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(N){this.mousePosition=N,this.isUserTouch=!0,this.isUserMove=!1}userMove(N,y){this.isUserTouch||y||!this.setting.showPageCorners?this.isUserTouch&&d.GetDistanceBetweenTwoPoint(this.mousePosition,N)>5&&(this.isUserMove=!0,this.flipController.fold(N)):this.flipController.showCorner(N)}userStop(N,y=!1){this.isUserTouch&&(this.isUserTouch=!1,y||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(N)))}},Object.defineProperty(s,"__esModule",{value:!0})}))})($u,$u.exports)),$u.exports}var jW=wW();const SW="_viewerRoot_hj39c_5",NW="_stage_hj39c_17",kW="_host_hj39c_43",CW="_hud_hj39c_91",TW="_hBtn_hj39c_125",EW="_hText_hj39c_153",AW="_title_hj39c_167",IW="_sep_hj39c_169",RW="_spacer_hj39c_171",PW="_errorBox_hj39c_175",Er={viewerRoot:SW,stage:NW,host:kW,hud:CW,hBtn:TW,hText:EW,title:AW,sep:IW,spacer:RW,errorBox:PW},LW="/".endsWith("/")?"/":"//",ME=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${LW}${e}`.replace(/\/{2,}/g,"/")},DW=async t=>{const e=ME(`flipbooks/${t}/manifest.json`),s=await fetch(e,{cache:"no-cache"});if(!s.ok)throw new Error(`Manifest not found for slug "${t}"`);return s.json()},MW=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},FW=(t,e,s)=>Math.max(e,Math.min(s,t)),Hs={hostEl:null,pf:null,slug:null},_i={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},BW=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function $W(t){for(const e of t)e&&(_i.cache.has(e)||_i.inFlight.has(e)||_i.queue.includes(e)||_i.queue.push(e));FE()}function FE(){BW(()=>{for(;_i.inFlight.size<_i.maxParallel&&_i.queue.length>0;){const t=_i.queue.shift();_i.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{_i.inFlight.delete(t),_i.cache.add(t),FE()},e.src=t}})}const OW=({slug:t,initialPage:e=1,onReady:s,onPageChange:r,noSound:i=!0})=>{const a=T.useRef(null),l=T.useRef(null),[d,u]=T.useState(null),[h,p]=T.useState(null),g=T.useRef(),v=T.useRef(),b=T.useRef(e);T.useEffect(()=>{g.current=s},[s]),T.useEffect(()=>{v.current=r},[r]),T.useEffect(()=>{b.current=e},[e]);const S=T.useMemo(()=>ME(`flipbooks/${t}`),[t]),k=T.useCallback(N=>{var y,_;if((y=N.srcset)!=null&&y.length){const D=[...N.srcset].sort((w,I)=>w.width-I.width),C=(_=D.find(w=>w.width>=1600))!=null?_:D[D.length-1];return/^https?:\/\//i.test(C.src)||C.src.startsWith("/")?C.src:`${S}/${C.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(N.src)||N.src.startsWith("/")?N.src:`${S}/${N.src}`.replace(/\/{2,}/g,"/")},[S]);T.useEffect(()=>{let N=!0;return p(null),DW(t).then(y=>{N&&u(y)}).catch(y=>{N&&p(y.message||"Failed to load flipbook manifest.")}),()=>{N=!1}},[t]),T.useEffect(()=>{const N=l.current,y=a.current;if(!N||!y||!d||(Hs.hostEl||(Hs.hostEl=document.createElement("div"),Hs.hostEl.className=Er.host),Hs.hostEl.parentElement!==N&&N.appendChild(Hs.hostEl),!Hs.hostEl.isConnected))return;if(!(!Hs.pf||Hs.slug!==t)){try{Hs.pf.update()}catch($){}return}if(Hs.pf){try{Hs.pf.destroy()}catch($){}Hs.pf=null}const D={width:d.pageWidth,height:d.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},C=new jW.PageFlip(Hs.hostEl,D);Hs.pf=C,Hs.slug=t;const w=d.pages.map(k);C.loadFromImages(w);const I=$=>{const W=[],H=$+1,q=$+2;d.pages[H]&&W.push(k(d.pages[H])),d.pages[q]&&W.push(k(d.pages[q])),$W(W)},F=()=>{var W;const $=FW(b.current,1,d.pageCount)-1;C.turnToPage($,"hard"),setTimeout(()=>I($),220),(W=g.current)==null||W.call(g,C)};C.on("init",F),C.on("flip",$=>{var H;const W=$.data;(H=v.current)==null||H.call(v,W),setTimeout(()=>I(W),220)});const R=new ResizeObserver(()=>{var $;try{($=Hs.pf)==null||$.update()}catch(W){}});R.observe(y);const B=$=>{var W,H;$.key==="ArrowLeft"&&($.preventDefault(),(W=Hs.pf)==null||W.flipPrev()),$.key==="ArrowRight"&&($.preventDefault(),(H=Hs.pf)==null||H.flipNext())};return window.addEventListener("keydown",B,{passive:!1}),()=>{window.removeEventListener("keydown",B),R.disconnect()}},[d,k,t]);const E=()=>{var N;return(N=Hs.pf)==null?void 0:N.flipPrev()},L=()=>{var N;return(N=Hs.pf)==null?void 0:N.flipNext()},M=()=>{var _;const N=a.current;if(!N)return;const y=N;(_=y.requestFullscreen||y.webkitRequestFullscreen||y.msRequestFullscreen)==null||_.call(y)};return h?n.jsxs("div",{className:Er.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):d?n.jsxs("div",{className:Er.viewerRoot,ref:a,"aria-label":d.title,children:[n.jsx("div",{className:Er.stage,ref:l}),n.jsxs("div",{className:Er.hud,children:[n.jsx("button",{className:Er.hBtn,onClick:E,"aria-label":"Zurck",children:""}),n.jsxs("div",{className:Er.hText,children:[n.jsx("span",{className:Er.title,children:d.title}),n.jsx("span",{className:Er.sep,children:""}),n.jsxs("span",{children:[d.pageCount," Seiten"]})]}),n.jsx("div",{className:Er.spacer}),MW()&&n.jsx("button",{className:Er.hBtn,onClick:M,"aria-label":"Fullscreen",children:""}),n.jsx("button",{className:Er.hBtn,onClick:L,"aria-label":"Weiter",children:""})]})]}):n.jsx("div",{className:Er.errorBox,children:"Lade Flipbook"})},VW=J.memo(OW),UW={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},zW=()=>{const t="sf-history-book",[e,s]=T.useState(1),r=T.useRef(null),i=T.useMemo(()=>{var p;return(p=UW[e])!=null?p:[]},[e]),a=T.useCallback(p=>{r.current=p},[]),l=T.useCallback(p=>{s(p+1)},[]),d=T.useCallback(p=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,p-1))}catch(v){}},[]),u=T.useCallback(()=>{var p;return(p=r.current)==null?void 0:p.flipPrev()},[]),h=T.useCallback(()=>{var p;return(p=r.current)==null?void 0:p.flipNext()},[]);return n.jsx(Et,{title:"SF History Book",children:n.jsxs("div",{className:go.pageWrap,children:[n.jsx("div",{className:go.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),n.jsxs("div",{className:go.viewerHost,children:[n.jsx(VW,{slug:t,initialPage:1,onReady:a,onPageChange:l,noSound:!0}),n.jsxs("div",{className:go.overlay,"aria-hidden":!0,children:[n.jsx("div",{className:go.dragZoneLeft,onClick:u}),n.jsx("div",{className:go.dragZoneRight,onClick:h}),i.map((p,g)=>{const v={"--t":`${p.t}%`,"--l":`${p.l}%`,"--w":`${p.w}%`,"--h":`${p.h}%`};return p.kind==="goto"?n.jsx("button",{className:go.inbookLink,style:v,"aria-label":p.label,onClick:()=>d(p.toPage)},g):n.jsx("a",{className:go.inbookLink,style:v,"aria-label":p.label,href:p.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},HW="_root_zvspc_1",GW="_hero_zvspc_15",WW="_eyebrow_zvspc_47",qW="_heading_zvspc_63",KW="_lead_zvspc_77",QW="_freshnessHint_zvspc_91",XW="_hintLabel_zvspc_105",YW="_hintText_zvspc_121",JW="_grid_zvspc_135",ZW="_card_zvspc_147",eq="_cardTitle_zvspc_163",tq="_paragraph_zvspc_177",sq="_list_zvspc_191",nq="_listItem_zvspc_207",dr={root:HW,hero:GW,eyebrow:WW,heading:qW,lead:KW,freshnessHint:QW,hintLabel:XW,hintText:YW,grid:JW,card:ZW,cardTitle:eq,paragraph:tq,list:sq,listItem:nq},rq=()=>{const{t}=Gl(),e=t("help.dataFreshness.body").split(`

`),s=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}];return n.jsx(Et,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:n.jsxs("div",{className:dr.root,children:[n.jsxs("section",{className:dr.hero,children:[n.jsxs("div",{children:[n.jsx("p",{className:dr.eyebrow,children:t("help.hero.eyebrow")}),n.jsx("h1",{className:dr.heading,children:t("help.hero.heading")}),n.jsx("p",{className:dr.lead,children:t("help.hero.lead")})]}),n.jsxs("div",{className:dr.freshnessHint,children:[n.jsx("div",{className:dr.hintLabel,children:t("help.hero.freshnessLabel")}),n.jsx("p",{className:dr.hintText,children:t("help.hero.freshnessBody")})]})]}),n.jsx("div",{className:dr.grid,children:s.map(r=>{var i;return n.jsxs("section",{className:dr.card,children:[n.jsx("h2",{className:dr.cardTitle,children:r.title}),(i=r.paragraphs)==null?void 0:i.map((a,l)=>n.jsx("p",{className:dr.paragraph,children:a},`${r.key}-p-${l}`)),r.bullets&&n.jsx("ul",{className:dr.list,children:r.bullets.map(a=>n.jsx("li",{className:dr.listItem,children:a},`${r.key}-${a}`))})]},r.key)})})]})})},BE=[{id:"eu1",label:"EU 1",region:"EU",active:!0},{id:"eu2",label:"EU 2",region:"EU",active:!0},{id:"us1",label:"US 1",region:"NA",active:!0}];Object.fromEntries(BE.map(t=>[t.id,t]));const $E="TL_FILTERS_V2",mr={servers:[],classes:[],days:"all",sortBy:"level",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function iq(){var t;try{const e=localStorage.getItem($E);if(!e)return mr;const s=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(s.days)?s.days:mr.days,i=["cards","buttons","table"].includes(s.listView)?s.listView:mr.listView,a=["hud","sheet"].includes(s.filterMode)?s.filterMode:mr.filterMode,l=typeof s.quickFav=="boolean"?s.quickFav:!!s.favoritesOnly,d=typeof s.quickActive=="boolean"?s.quickActive:!!s.activeOnly;return{...mr,...s,servers:Array.isArray(s.servers)?s.servers:[],classes:Array.isArray(s.classes)?s.classes:[],favoritesOnly:typeof s.favoritesOnly=="boolean"?s.favoritesOnly:l,activeOnly:typeof s.activeOnly=="boolean"?s.activeOnly:d,quickFav:l,quickActive:d,days:r,listView:i,filterMode:a,bottomFilterOpen:!!s.bottomFilterOpen,serverSheetOpen:!!s.serverSheetOpen,sortBy:typeof s.sortBy=="string"?s.sortBy:mr.sortBy,searchText:typeof s.searchText=="string"?s.searchText:mr.searchText}}catch(e){return mr}}function aq(t){try{localStorage.setItem($E,JSON.stringify(t))}catch(e){}}const OE=T.createContext(null),cN=t=>Array.from(new Set(t));function Em(t,e){return typeof t=="function"?t(e):t}function oq({children:t}){const[e,s]=T.useState(()=>iq());T.useEffect(()=>{aq(e)},[e]);const r=w=>s(I=>({...I,servers:cN(Em(w,I.servers))})),i=w=>s(I=>{const F=new Set(I.servers);return F.has(w)?F.delete(w):F.add(w),{...I,servers:Array.from(F)}}),a=()=>s(w=>({...w,servers:[]})),l=w=>s(I=>({...I,classes:cN(Em(w,I.classes))})),d=w=>s(I=>{const F=new Set(I.classes);return F.has(w)?F.delete(w):F.add(w),{...I,classes:Array.from(F)}}),u=()=>s(w=>({...w,classes:[]})),h=w=>s(I=>({...I,days:w})),p=w=>h(w),g=w=>s(I=>({...I,sortBy:w||"level"})),v=w=>s(I=>({...I,favoritesOnly:!!w,quickFav:!!w})),b=w=>s(I=>({...I,activeOnly:!!w,quickActive:!!w})),S=w=>s(I=>({...I,searchText:w})),k=w=>s(I=>{const F=Em(w,I.quickFav);return{...I,quickFav:F,favoritesOnly:F}}),E=w=>s(I=>{const F=Em(w,I.quickActive);return{...I,quickActive:F,activeOnly:F}}),L=w=>s(I=>({...I,filterMode:w})),M=w=>s(I=>({...I,listView:w})),N=w=>s(I=>({...I,bottomFilterOpen:!!w})),y=w=>s(I=>({...I,serverSheetOpen:!!w})),_=()=>s(mr),D=()=>_(),C=T.useMemo(()=>({servers:e.servers,classes:e.classes,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:l,toggleClass:d,clearClasses:u,setDays:h,setRange:p,setSortBy:g,setFavoritesOnly:v,setActiveOnly:b,setSearchText:S,setQuickFav:k,setQuickActive:E,setFilterMode:L,setListView:M,setBottomFilterOpen:N,setServerSheetOpen:y,resetFilters:_,resetAll:D}),[e]);return n.jsx(OE.Provider,{value:C,children:t})}function Kh(){const t=T.useContext(OE);return t||{...mr,range:mr.days,searchText:mr.searchText,quickFav:mr.quickFav,quickActive:mr.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const lq="_hudWrap_107o7_9",cq="_hudBtn_107o7_11",dq="_hudSubBtn_107o7_15",uq="_iconRow_107o7_19",hq="_segmented_107o7_21",pq="_sortLabel_107o7_27",mq="_sortSelect_107o7_29",fq="_chip_107o7_31",gq="_isActive_107o7_33",ur={hudWrap:lq,hudBtn:cq,hudSubBtn:dq,iconRow:uq,segmented:hq,sortLabel:pq,sortSelect:mq,chip:fq,isActive:gq};function xq({active:t=!1,title:e,iconUrl:s,fallback:r="",size:i=40,onClick:a}){const l=Math.round(i*.7),d=J.useMemo(()=>{const L=[],M=G3(s,l*2,l*2,"contain");M&&L.push(M);const N=Fr(s,l*2);return N&&N!==M&&L.push(N),!L.length&&s&&L.push(s),L},[s,l]),[u,h]=J.useState(0),[p,g]=J.useState(!1),[v,b]=J.useState(!1);J.useEffect(()=>h(0),[d]);const S=d[u]||"",k={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:v||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};p&&(k.background="rgba(255,255,255,.04)"),t&&(k.outline="2px solid #5C8BC6");const E={display:"block",width:l,height:l,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return n.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),style:k,children:S?n.jsx("img",{src:S,alt:e||"class",width:l,height:l,loading:"lazy",style:E,onError:()=>{h(L=>L+1<d.length?L+1:L)}}):n.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}const yq=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"90d",value:90},{label:"all",value:"all"}];function vq(){const{servers:t,classes:e,setClasses:s,range:r,setRange:i,sortBy:a,setSortBy:l,quickFav:d,setQuickFav:u,quickActive:h,setQuickActive:p,filterMode:g,setBottomFilterOpen:v,serverSheetOpen:b,setServerSheetOpen:S,resetAll:k}=Kh();return n.jsxs("div",{className:ur.hudWrap,children:[n.jsxs("button",{type:"button",className:ur.hudBtn,onClick:E=>{E.preventDefault(),E.stopPropagation(),S(!0)},"aria-haspopup":"dialog","aria-expanded":b||!1,"aria-label":`Select servers${t.length?` (${t.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",t.length?`(${t.length})`:""]}),n.jsxs("div",{className:ur.iconRow,children:[pn.map(E=>n.jsx(xq,{active:e.includes(E.key),title:E.label,iconUrl:E.iconUrl,fallback:E.fallback,size:40,onClick:()=>s(L=>L.includes(E.key)?L.filter(M=>M!==E.key):[...L,E.key])},E.key)),n.jsx("button",{type:"button",className:ur.hudSubBtn,onClick:()=>s(pn.map(E=>E.key)),children:"All"}),n.jsx("button",{type:"button",className:ur.hudSubBtn,onClick:()=>s([]),children:"None"})]}),n.jsx("div",{className:ur.segmented,role:"group","aria-label":"Range",children:yq.map(E=>n.jsx("button",{type:"button","aria-pressed":r===E.value,onClick:()=>i(E.value),children:E.label},E.label))}),n.jsx("label",{className:ur.sortLabel,htmlFor:"toplists-sort",children:"Sort"}),n.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:a,onChange:E=>l(E.target.value),className:ur.sortSelect,"aria-label":"Sort",children:[n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"lastScan",children:"Last scan"})]}),n.jsx("button",{type:"button",className:`${ur.chip} ${d?ur.isActive:""}`,onClick:()=>u(E=>!E),children:" Favorites"}),n.jsx("button",{type:"button",className:`${ur.chip} ${h?ur.isActive:""}`,onClick:()=>p(E=>!E),children:" Active"}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsx("button",{type:"button",className:ur.hudSubBtn,onClick:k,children:"Reset"}),g==="sheet"&&n.jsx("button",{type:"button",className:ur.hudBtn,onClick:E=>{E.preventDefault(),E.stopPropagation(),v(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const bq=["EU","US","INT","Fusion"],Cn={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"};function _q({open:t,onClose:e,mode:s="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:l,onClearAll:d}){const[u,h]=T.useState(""),p=T.useRef(null);T.useEffect(()=>{if(!t)return;const b=S=>{S.key==="Escape"&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e]),T.useEffect(()=>{if(t&&p.current){const b=p.current.querySelector("#sheet-serversearch");b==null||b.focus()}},[t]);const g=bq,v=b=>{const S=u.trim().toLowerCase();return S?b.toLowerCase().includes(S):!0};return t?n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:wq,onClick:b=>{b.target===b.currentTarget&&e()},children:n.jsxs("div",{ref:p,style:s==="modal"?VE:jq,className:"sf-server-sheet",children:[n.jsxs("div",{style:Sq,children:[n.jsx("h2",{id:"server-dialog-title",style:Nq,children:"Select servers"}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{type:"button",onClick:d,style:dN,children:"Clear"}),n.jsx("button",{type:"button",onClick:e,style:Rq,children:"Done"})]})]}),n.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[n.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),n.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:b=>h(b.target.value),"aria-label":"Search servers",autoComplete:"off",style:Cq})]}),n.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(b=>{const S=(r[b]||[]).filter(v);return n.jsxs("section",{"aria-labelledby":`region-${b}`,children:[n.jsxs("div",{style:Tq,children:[n.jsx("h3",{id:`region-${b}`,style:kq,children:b}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",style:dN,onClick:()=>{l?l(b):S.filter(E=>!i.includes(E)).forEach(a)},children:"Select all"})})]}),n.jsxs("div",{style:Eq,children:[S.map(k=>{const E=i.includes(k);return n.jsx("button",{type:"button",onClick:()=>a(k),"aria-pressed":E,title:k,style:{...Aq,...E?Iq:null},children:k},k)}),S.length===0&&n.jsx("div",{style:{color:Cn.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},b)})})]})}):null}const wq={position:"fixed",inset:0,background:Cn.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},VE={width:"min(900px, 100%)",background:Cn.tile,border:`1px solid ${Cn.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:Cn.text},jq={...VE,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},Sq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},Nq={fontSize:18,margin:0},kq={fontSize:14,margin:0,color:Cn.text2},Cq={width:"100%",background:Cn.input,color:Cn.text,border:`1px solid ${Cn.line}`,borderRadius:12,padding:"10px 12px"},Tq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},Eq={display:"flex",flexWrap:"wrap",gap:8},Aq={background:Cn.chip,border:`1px solid ${Cn.line}`,padding:"6px 10px",borderRadius:999,color:Cn.text},Iq={outline:`2px solid ${Cn.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},Rq={background:"#25456B",color:Cn.text,border:`1px solid ${Cn.accent}`,borderRadius:10,padding:"8px 12px"},dN={background:"transparent",color:Cn.text,border:`1px solid ${Cn.line}`,borderRadius:10,padding:"8px 12px"},Pq=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=Pq,document.head.appendChild(e)}}const Nn={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function Lq({open:t,onClose:e}){const{searchText:s,setSearchText:r,range:i,setRange:a,sortBy:l,setSortBy:d,quickFav:u,setQuickFav:h,quickActive:p,setQuickActive:g}=Kh(),v=T.useRef(null);if(T.useEffect(()=>{if(!t)return;const S=k=>{k.key==="Escape"&&e()};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[t,e]),T.useEffect(()=>{if(t&&v.current){const S=v.current.querySelector("#sheet-search");S==null||S.focus()}},[t]),!t)return null;const b=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:Dq,onClick:S=>{S.target===S.currentTarget&&e()},children:n.jsxs("div",{ref:v,style:Mq,children:[n.jsxs("div",{style:Fq,children:[n.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:Nn.text},children:"Filters"}),n.jsx("button",{type:"button",onClick:e,style:$q,children:"Done"})]}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),n.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:s,onChange:S=>r(S.target.value),"aria-label":"Search",autoComplete:"off",style:UE})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("span",{style:{color:Nn.text2,fontSize:12},children:"Range"}),n.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:b.map(S=>n.jsx("button",{type:"button","aria-pressed":i===S.value,onClick:()=>a(S.value),style:{...tv,...i===S.value?sv:null},children:S.label},S.label))})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:Nn.text2,fontSize:12},children:"Sort"}),n.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:l,onChange:S=>d(S.target.value),"aria-label":"Sort",autoComplete:"off",style:Bq,children:[n.jsx("option",{value:"sum",children:"Base Sum"}),n.jsx("option",{value:"main",children:"Main Base Stat"}),n.jsx("option",{value:"constitution",children:"Constitution"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"delta",children:" Rank"}),n.jsx("option",{value:"lastActivity",disabled:!0,children:"Last activity (disabled)"})]})]}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[n.jsx("button",{type:"button",onClick:()=>h(S=>!S),"aria-pressed":u,style:{...tv,...u?sv:null},children:" Favorites"}),n.jsx("button",{type:"button",onClick:()=>g(S=>!S),"aria-pressed":p,style:{...tv,...p?sv:null},children:" Active"})]})]})})}const Dq={position:"fixed",inset:0,background:Nn.backdrop,zIndex:60,display:"grid",alignItems:"end"},Mq={background:Nn.tile,borderTop:`1px solid ${Nn.line}`,borderLeft:`1px solid ${Nn.line}`,borderRight:`1px solid ${Nn.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:Nn.text,maxHeight:"80vh",overflow:"auto"},Fq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},UE={width:"100%",background:Nn.input,color:Nn.text,border:`1px solid ${Nn.line}`,borderRadius:12,padding:"10px 12px"},Bq={...UE,appearance:"none"},tv={background:"#14273E",border:`1px solid ${Nn.line}`,padding:"6px 10px",borderRadius:999,color:Nn.text},sv={outline:`2px solid ${Nn.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},$q={background:"#25456B",color:Nn.text,border:`1px solid ${Nn.accent}`,borderRadius:10,padding:"8px 12px"},Oq=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=Oq,document.head.appendChild(e)}}function Vq(){var i;const t=Kh(),e=(i=t==null?void 0:t.listView)!=null?i:"table",s=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:s;return e==="table"?null:n.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:n.jsxs("div",{children:["Showing ",r.length," / ",s.length]})}),e==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var l,d,u,h,p,g,v;return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[n.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(l=a.name)!=null?l:""}),n.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(d=a.server)!=null?d:""})]}),n.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",n.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(p=a.scrapbook)!=null?p:""]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[n.jsx(nv,{children:a.active?"Active":"Idle"}),a.favorite&&n.jsx(nv,{children:" Fav"}),n.jsx(nv,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(v=a.id)!=null?v:`${a.name}-${a.server}`)})}),e==="buttons"&&n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var l,d,u,h;return n.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(l=a.name)!=null?l:"",n.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(d=a.server)!=null?d:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function nv({children:t}){return n.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const Pb="stats_public",Uq="toplists_players_v1";async function zq(){try{const t=await Xs(Wt(ct,Pb,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const s=(t.data()||{}).servers;let r=null;if(Array.isArray(s))r=s;else if(typeof s=="string")try{const a=JSON.parse(s);Array.isArray(a)?r=a:console.warn("[toplistsFirestore] Server bundle string is not an array after parse")}catch(a){console.warn("[toplistsFirestore] Failed to parse server bundle string",a)}if(!Array.isArray(r))return console.warn("[toplistsFirestore] Server bundle missing/invalid, falling back to static config"),{ok:!1,error:"decode_failed",detail:"servers missing or invalid"};const i=[];for(const a of r){if(typeof a!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:a});continue}const l=a.trim();l&&i.push(l)}return{ok:!0,servers:i}}catch(t){return console.error("[toplistsFirestore] Firestore error while loading toplist servers",t),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}function w0(t){const e=a=>(a!=null?a:"").toString().trim().toLowerCase(),s=e(t.group)||"all",r=e(t.timeRange)||"all",i=e(t.sort)||"sum";return`${s}__${r}__${i}`}function Hq(t,e){const s=t.toUpperCase(),r=e.toUpperCase();return r==="ALL"?`${s}_all_sum`:`${s}_${r}_sum`}async function Gq(){try{const t=await Xs(Wt(ct,Pb,"toplists_meta_v1"));if(!t.exists())return null;const e=t.data();return!e||typeof e!="object"?null:e}catch(t){return console.error("[toplistsFirestore] meta decode failed",t),null}}const Ir=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},wi=t=>typeof t=="string"?t:null,Wq=t=>{if(!t||typeof t!="object")return null;const e=wi(t.server),s=wi(t.name),r=wi(t.class);return!e||!s||!r?null:{flag:wi(t.flag),deltaRank:Ir(t.deltaRank),server:e,name:s,class:r,level:Ir(t.level),guild:wi(t.guild),main:Ir(t.main),con:Ir(t.con),sum:Ir(t.sum),ratio:Ir(t.ratio),mine:Ir(t.mine),treasury:Ir(t.treasury),lastScan:wi(t.lastScan),deltaSum:Ir(t.deltaSum)}};async function uN(t){try{const e=await Xs(Wt(ct,Pb,Uq,"lists",t));if(!e.exists())return{ok:!1,error:"not_found"};const s=e.data()||{},r=wi(s.entity)||"players",i=wi(s.group),a=wi(s.server),l=wi(s.metric),d=wi(s.timeRange),u=Ir(s.limit),h=Array.isArray(s.rows)?s.rows:null;if(r!=="players"||!i||!a||!l||!d||u==null||!h)return console.error("[toplistsFirestore] Decode failed",{entity:r,group:i,server:a,metric:l,timeRange:d,limit:u,hasRowsArray:Array.isArray(s.rows)}),{ok:!1,error:"decode_error",detail:"missing required toplist fields"};const p=[];for(const v of h){const b=Wq(v);if(!b)return console.error("[toplistsFirestore] Row decode failed",v),{ok:!1,error:"decode_error",detail:"invalid row shape"};p.push(b)}return{ok:!0,list:{id:t,entity:"players",group:i,server:a,metric:l,timeRange:d,limit:u,updatedAt:Ir(s.updatedAt),nextUpdateAt:s.nextUpdateAt!==void 0?Ir(s.nextUpdateAt):void 0,ttlSec:s.ttlSec!==void 0?Ir(s.ttlSec):void 0,rows:p}}}catch(e){return console.error("[toplistsFirestore] Firestore error",e),{ok:!1,error:"firestore_error",detail:e==null?void 0:e.message}}}async function qq(t){const e=w0(t),s=await uN(e);if(s.ok&&s.list.rows&&s.list.rows.length>0||(t.group||"").toLowerCase()==="all")return s;const i={...t,group:"all"},a=w0(i),l=await uN(a);return l.ok?{ok:!0,list:{...l.list,group:t.group}}:s}const Kq={EU:[],US:[],INT:[],Fusion:[]},Qq=["EU","US","INT","Fusion"],Xq=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function zE(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=Xq(r);e[i].add(r)});const s={...Kq};return Qq.forEach(r=>{s[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),s}const Yq="EU",rv=zE(BE.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),HE=T.createContext(null),hN=(t,e)=>t.length===e.length&&t.every((s,r)=>s===e[r]);function Jq(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&hN(t.servers,e.servers)&&hN(t.classes,e.classes)}function Zq(t,e){return t.key===e.key&&t.dir===e.dir}function eK({children:t}){const[e,s]=T.useState({group:Yq,servers:[],classes:[],timeRange:"all"}),[r,i]=T.useState({key:"level",dir:"desc"}),[a,l]=T.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null}),d=T.useRef(new Map),[u,h]=T.useState(null),[p,g]=T.useState(null),[v,b]=T.useState(rv),S=T.useCallback(L=>{s(M=>{const N=typeof L=="function"?L(M):{...M,...L};return Jq(M,N)?M:N})},[]),k=T.useCallback(L=>{i(M=>{const N=typeof L=="function"?L(M):L;return Zq(M,N)?M:N})},[]);T.useEffect(()=>{let L=!1;return(async()=>{const M=await zq();if(!L){if(M.ok){const N=zE(M.servers);if(Object.values(N).some(_=>_.length>0)){b(N);return}}b(rv)}})().catch(M=>{L||(console.error("[ToplistsProvider] unexpected error while loading server list",M),b(rv))}),()=>{L=!0}},[]),T.useEffect(()=>{let L=!1;return(async()=>{const M=await Gq();L||h(M)})().catch(M=>{L||console.error("[ToplistsProvider] unexpected meta error",M)}),()=>{L=!0}},[]),T.useEffect(()=>{var C,w,I;let L=!1;const M="sum",N=w0({group:e.group,timeRange:e.timeRange,sort:M}),y=d.current.get(N),_=(y==null?void 0:y.list.ttlSec)!=null?y.list.ttlSec*1e3:null,D=y?_==null||Date.now()-y.cachedAt<_:!1;return y&&D?(l({rows:y.list.rows,loading:!1,error:null,lastUpdatedAt:(C=y.list.updatedAt)!=null?C:null,nextUpdateAt:(w=y.list.nextUpdateAt)!=null?w:null,ttlSec:(I=y.list.ttlSec)!=null?I:null,listId:N}),()=>{L=!0}):(l(F=>({...F,listId:N,loading:!0,error:null})),(async()=>{var $,W,H;const F=await qq({group:e.group,timeRange:e.timeRange,sort:M});if(L)return;if(F.ok){d.current.set(N,{list:F.list,cachedAt:Date.now()}),l({rows:F.list.rows,loading:!1,error:null,lastUpdatedAt:($=F.list.updatedAt)!=null?$:null,nextUpdateAt:(W=F.list.nextUpdateAt)!=null?W:null,ttlSec:(H=F.list.ttlSec)!=null?H:null,listId:N});return}const R=F.detail?` (${F.detail})`:"";let B="Firestore Fehler";F.error==="not_found"?B="Topliste nicht verfuegbar":F.error==="decode_error"&&(B="Fehler beim Lesen der Daten"),l({rows:[],loading:!1,error:`${B}${R}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:N})})().catch(F=>{L||(console.error("[ToplistsProvider] unexpected error",F),l({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:N}))}),()=>{L=!0})},[e.group,e.timeRange]),T.useEffect(()=>{var H,q;if(!u){g(null);return}const L=e.servers&&e.servers.length===1?e.servers[0]:"all",M=Hq(e.group||"ALL",L||"all"),N=(H=u.thresholds)==null?void 0:H.players,y=typeof(N==null?void 0:N.minChanges)=="number"?N.minChanges:100,_=typeof(N==null?void 0:N.maxAgeDays)=="number"?N.maxAgeDays:7,D=(q=u.scopeChange)==null?void 0:q[M],C=typeof(D==null?void 0:D.lastRebuildAtMs)=="number"?D.lastRebuildAtMs:null,w=typeof(D==null?void 0:D.lastChangeAtMs)=="number"?D.lastChangeAtMs:null,I=typeof(D==null?void 0:D.changedSinceLastRebuild)=="number"?D.changedSinceLastRebuild:0,F=C?new Date(C):null,R=w?new Date(w):null,B=C!=null?(Date.now()-C)/(1e3*60*60*24):1/0,$=y>0?Math.min(1,Math.max(0,I/y)):0,W=!!F&&(_==null||B<=_)&&(y==null||I<y);g({scopeId:M,lastRebuildAt:F,lastChangeAt:R,changesSinceLastRebuild:I,minChanges:y!=null?y:null,maxAgeDays:_!=null?_:null,progress:$,isFresh:W})},[u,e.group,e.servers]);const E=T.useMemo(()=>({player:a,playerRows:a.rows,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:p,serverGroups:v,filters:e,sort:r,setFilters:S,setSort:k}),[a,e,r,v,S,k,p]);return n.jsx(HE.Provider,{value:E,children:t})}function GE(){const t=T.useContext(HE);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}function tK(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function sK(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function nK(){return n.jsx(eK,{children:n.jsx(rK,{})})}function rK(){const t=Kh(),{filterMode:e,setFilterMode:s,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:l,serverSheetOpen:d,setServerSheetOpen:u,servers:h,setServers:p,classes:g,range:v,sortBy:b}=t,{serverGroups:S}=GE();return n.jsxs(n.Fragment,{children:[n.jsxs(Et,{mode:"card",title:"Top Lists",actions:n.jsx(aK,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?n.jsx(vq,{}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[n.jsx(Vq,{}),r==="table"&&n.jsx(iK,{servers:h!=null?h:[],classes:g!=null?g:[],range:v!=null?v:"all",sortKey:b!=null?b:"level"})]}),n.jsx(_q,{mode:"modal",open:d,onClose:()=>u(!1),serversByRegion:S,selected:h,onToggle:k=>p(E=>E.includes(k)?E.filter(L=>L!==k):[...E,k]),onSelectAllInRegion:k=>{var E;return p((E=S[k])!=null?E:[])},onClearAll:()=>p([])}),n.jsx(Lq,{open:e==="sheet"&&a,onClose:()=>l(!1)})]})}function iK({servers:t,classes:e,range:s,sortKey:r}){var E,L,M;const{playerRows:i,playerLoading:a,playerError:l,playerLastUpdatedAt:d,playerScopeStatus:u,setFilters:h,setSort:p}=GE();T.useEffect(()=>{const N=s==="all"?"all":s===60?"30d":`${s}d`,y=sK(t);h({servers:t,classes:e,timeRange:N,group:y})},[t,e,s,h]),T.useEffect(()=>{const N=tK(r);p(N)},[r,p]);const g=N=>N==null?"":new Intl.NumberFormat("en").format(N),v=N=>{if(N==null)return"";const y=g(Math.abs(N));return y?N>0?`+${y}`:`-${y}`:String(N)},b=N=>{if(N==null)return null;const y=N<1e12?N*1e3:N;return new Date(y).toLocaleString()},S=N=>N?N.toLocaleString():"",k=i||[];return n.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[n.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{children:[a?"Loading...":l?"Error":"Ready"," - ",k.length," rows"]}),n.jsx("div",{children:d?`Updated: ${b(d)}`:null})]}),u&&n.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[n.jsxs("span",{children:["Scope ",u.scopeId,"  ",u.changesSinceLastRebuild,"/",(E=u.minChanges)!=null?E:"?"," changes since last rebuild"]}),n.jsxs("span",{children:["Auto rebuild at ",(L=u.minChanges)!=null?L:"?"," changes or after ",(M=u.maxAgeDays)!=null?M:"?"," days"]}),n.jsxs("span",{children:["Last rebuild: ",S(u.lastRebuildAt)]})]}),l&&n.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),n.jsx("div",{style:{wordBreak:"break-all"},children:l}),n.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{padding:"8px 6px"},children:"#"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Flag"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Delta Rank"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Class"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Stats+"})]})}),n.jsxs("tbody",{children:[k.map((N,y)=>{var _,D,C,w;return n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("td",{style:{padding:"8px 6px"},children:y+1}),n.jsx("td",{style:{padding:"8px 6px"},children:(_=N.flag)!=null?_:""}),n.jsx("td",{style:{padding:"8px 6px"},children:v(N.deltaRank)}),n.jsx("td",{style:{padding:"8px 6px"},children:N.server}),n.jsx("td",{style:{padding:"8px 6px"},children:N.name}),n.jsx("td",{style:{padding:"8px 6px"},children:N.class}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(N.level)}),n.jsx("td",{style:{padding:"8px 6px"},children:(D=N.guild)!=null?D:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(N.main)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(N.con)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(N.sum)}),n.jsx("td",{style:{padding:"8px 6px"},children:(C=N.ratio)!=null?C:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(N.mine)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(N.treasury)}),n.jsx("td",{style:{padding:"8px 6px"},children:(w=N.lastScan)!=null?w:""}),n.jsx("td",{style:{padding:"8px 6px"},children:v(N.deltaSum)})]},`${N.name}-${N.server}-${y}`)}),a&&k.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"Loading..."})}),!a&&!l&&k.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"No results"})})]})]})})]})}function aK(){const{filterMode:t,setFilterMode:e,listView:s,setListView:r,setBottomFilterOpen:i,setServerSheetOpen:a}=Kh();return n.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[n.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[n.jsx(pN,{to:"/toplists/players",label:"Players"}),n.jsx(pN,{to:"/toplists/guilds",label:"Guilds"})]}),n.jsx("span",{className:"hidden md:inline-block w-px h-6",style:{background:"#2B4C73"}}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"Filter UI",children:[n.jsx("button",{"aria-pressed":t==="hud",onClick:()=>e("hud"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="hud"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"HUD"}),n.jsx("button",{"aria-pressed":t==="sheet",onClick:()=>e("sheet"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="sheet"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Bottom Sheet"}),n.jsx("button",{onClick:()=>i(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},children:"Open"})]}),n.jsx("button",{onClick:()=>a(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},title:"Open Server Picker",children:"Servers"}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"List View",children:[n.jsx("button",{"aria-pressed":s==="cards",onClick:()=>r("cards"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="cards"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Cards"}),n.jsx("button",{"aria-pressed":s==="buttons",onClick:()=>r("buttons"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="buttons"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Buttons"}),n.jsx("button",{"aria-pressed":s==="table",onClick:()=>r("table"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="table"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Table"})]})]})}function pN({to:t,label:e}){return n.jsx(ws,{to:t,className:({isActive:s})=>["rounded-lg px-3 py-1.5 text-sm text-white border",s?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:e})}const oK=[{rank:1,name:"Shadow Blades",server:"EU1",avgLevel:480,delta24h:1},{rank:2,name:"Arcane Legion",server:"EU2",avgLevel:472,delta24h:0}];function lK(){return n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{opacity:.8,fontSize:12},children:"Guilds  snapshot (latest)"}),oK.map(t=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"56px 1fr 120px 120px",padding:"10px 12px",borderRadius:10,border:"1px solid #2C4A73",background:"#14273E",fontSize:14,alignItems:"center"},children:[n.jsxs("div",{children:["#",t.rank]}),n.jsxs("div",{children:[t.name,"  ",t.server]}),n.jsxs("div",{children:["Avg Lv ",t.avgLevel]}),n.jsxs("div",{children:[" ",t.delta24h>0?`+${t.delta24h}`:t.delta24h," (24h)"]})]},t.rank))]})}function cK(t="players"){const e=si(),{search:s,pathname:r}=xr();return[new URLSearchParams(s).get("tab")||t,d=>{const u=new URLSearchParams(s);u.set("tab",d),e(`${r}?${u.toString()}`,{replace:!1})}]}function dK(){const[t]=cK("players");return n.jsx(oq,{children:t==="players"?n.jsx(nK,{}):n.jsx(lK,{})})}function uK(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Browse"})})}function hK(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Rankings"})})}function pK(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Stats"})})}const Am={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},mK={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},hr=(t,e)=>Math.min(Math.max(Math.round(t),0),e),fK=t=>{var s,r,i,a;const e={...Am,...t||{}};return{...e,class:hr(e.class,15),race:hr(e.race,8),mouth:hr(e.mouth,30),hair:hr(e.hair,40),hairColor:hr(e.hairColor,12),horn:hr(e.horn,10),hornColor:hr(e.hornColor,10),brows:hr(e.brows,10),eyes:hr(e.eyes,20),beard:hr(e.beard,15),nose:hr(e.nose,10),ears:hr(e.ears,10),extra:hr(e.extra,20),special:hr(e.special,200),showBorder:(s=e.showBorder)!=null?s:!0,background:(r=e.background)!=null?r:Am.background,frame:(i=e.frame)!=null?i:Am.frame,mirrorHorizontal:(a=e.mirrorHorizontal)!=null?a:Am.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function WE({config:t,label:e}){const s=T.useRef(null),r=T.useRef(null),[i,a]=T.useState("idle"),l=T.useMemo(()=>({...fK(t),background:"",frame:"",showBorder:!1}),[JSON.stringify(t||{})]);T.useEffect(()=>{let u=!1;a("loading");try{const h=s.current;if(!h){a("error");return}const p=new zk(h,l);r.current=p,a("ready")}catch(h){console.error("[PortraitMaker] failed to initialize",h),u||a("error")}return()=>{var h,p;u=!0;try{(p=(h=r.current)==null?void 0:h.dispose)==null||p.call(h)}catch(g){}r.current=null}},[l]);const d=i!=="ready"?mK[i]:null;return n.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[n.jsx("div",{className:"avatar-portrait__canvas-shell",children:n.jsx("canvas",{ref:s,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`})}),d&&n.jsx("span",{className:"avatar-portrait__status",children:d})]})}function gK({label:t,size:e=40}){const s=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return n.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:s||"?"})}function xK({className:t,label:e,size:s=40}){const r=d=>d.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=pn.find(d=>r(d.label)===i)||pn.find(d=>r(d.label).startsWith(i)||i.startsWith(r(d.label))),l=a?Fr(a.iconUrl,s*2):null;return l?n.jsx("div",{className:"player-profile__class-avatar",style:{width:s,height:s},children:n.jsx("img",{src:l,alt:"",draggable:!1})}):n.jsx(gK,{label:e,size:s})}function yK({data:t,loading:e,actionFeedback:s,onAction:r}){return n.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[n.jsx(WE,{config:t.portrait,label:t.playerName}),n.jsxs("div",{className:"player-profile__hero-body",children:[n.jsxs("div",{className:"player-profile__identity",children:[n.jsx(xK,{className:t.className,label:t.playerName,size:48}),n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__player-name",children:t.playerName}),n.jsxs("div",{className:"player-profile__player-meta",children:[n.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&n.jsxs("span",{children:[" ",t.guild]}),t.server&&n.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&n.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),t.status&&n.jsx("div",{className:`player-profile__status player-profile__status--${t.status}`,children:t.status==="online"?"aktiv":"inaktiv"})]})]}),n.jsx("div",{className:"player-profile__hero-metrics",children:t.metrics.map(i=>n.jsxs("div",{className:"player-profile__hero-metric",children:[n.jsx("div",{className:"player-profile__hero-metric-label",children:i.label}),n.jsx("div",{className:"player-profile__hero-metric-value",children:i.value}),i.hint&&n.jsx("div",{className:"player-profile__hero-metric-hint",children:i.hint})]},i.label))}),t.badges.length>0&&n.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(i=>n.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${i.tone||"neutral"}`,title:i.hint,children:[i.icon&&n.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:i.icon}),n.jsx("span",{children:i.label}),n.jsx("strong",{children:i.value})]},i.label))}),t.actions.length>0&&n.jsxs("div",{className:"player-profile__hero-actions",children:[t.actions.map(i=>n.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||i.disabled,title:i.title,onClick:()=>r==null?void 0:r(i.key),children:i.label},i.key)),s&&n.jsx("p",{className:"player-profile__hero-feedback",children:s})]})]})]})}function vK({data:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>n.jsxs("article",{className:"player-profile__card",children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&n.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),n.jsxs("div",{className:"player-profile__section",children:[n.jsxs("header",{className:"player-profile__section-head",children:[n.jsx("h3",{children:"Attribute"}),n.jsx("span",{children:"Basis vs. Gesamt"})]}),n.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>n.jsxs("div",{className:"player-profile__attr-card",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__attr-label",children:e.label}),n.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&n.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),n.jsxs("div",{className:"player-profile__split",children:[n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Resistenzen"})}),n.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]}),n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"konomie"})}),n.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function bK({items:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>n.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[n.jsxs("div",{className:"player-profile__progress-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),n.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),n.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:n.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&n.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function _K({series:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var s;return n.jsxs("article",{className:"player-profile__trend-card",children:[n.jsxs("div",{className:"player-profile__trend-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),e.subLabel&&n.jsx("div",{className:"player-profile__card-hint",children:e.subLabel})]}),n.jsxs("div",{className:"player-profile__card-value",children:[(s=e.points[e.points.length-1])==null?void 0:s.toLocaleString("de-DE"),e.unit||""]})]}),n.jsx(SK,{points:e.points})]},e.label)})})}function wK({rows:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Serververgleich"})}),n.jsx("div",{className:"player-profile__comparison-wrapper",children:n.jsxs("table",{className:"player-profile__comparison",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Kategorie"}),n.jsx("th",{children:"Spieler"}),n.jsx("th",{children:"Cluster"}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:e.label}),n.jsx("td",{children:e.playerValue}),n.jsx("td",{children:e.benchmark}),n.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function jK({entries:t}){return n.jsx("div",{className:"player-profile__tab-panel",children:n.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>n.jsxs("li",{children:[n.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),n.jsxs("div",{className:"player-profile__timeline-card",children:[n.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),n.jsx("div",{className:"player-profile__timeline-title",children:e.title}),n.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}function SK({points:t}){if(!t.length)return n.jsx("div",{className:"player-profile__trend-chart player-profile__trend-chart--empty"});const e=Math.min(...t),s=Math.max(...t),r=Math.max(1,s-e||1),a=t.map((l,d)=>{const u=t.length>1?d/(t.length-1)*100:0,h=100-(l-e)/r*100;return`${d===0?"M":"L"}${u},${h}`}).join(" ");return n.jsx("div",{className:"player-profile__trend-chart",children:n.jsx("svg",{viewBox:"0 0 100 100",role:"img","aria-label":"Verlauf",children:n.jsx("path",{d:a})})})}const NK=["Statistiken","Charts","Fortschritt","Vergleich","Historie"];function iv(){const t=sg(),e=t.id||t.pid||t.playerId||t.player||"",s=si(),[r,i]=T.useState(!0),[a,l]=T.useState(null),[d,u]=T.useState(null),[h,p]=T.useState("Statistiken"),[g,v]=T.useState(null),b=T.useRef(null);T.useEffect(()=>{let N=!1;async function y(){var _,D,C,w,I,F,R,B,$,W,H,q,K,G,se;i(!0),l(null);try{const ne=(e||"").trim();if(!ne)throw new Error("Kein Spieler gewhlt.");const U=Wt(ct,`players/${ne}/latest/latest`),Z=await Xs(U);if(!Z.exists())throw new Error("Spieler nicht gefunden.");const le=Z.data(),ee=typeof le.values=="object"&&le.values?le.values:{},he=(D=Ou((_=le.level)!=null?_:ee==null?void 0:ee.Level))!=null?D:null,xe=((w=(C=le.className)!=null?C:ee==null?void 0:ee.Class)!=null?w:null)||null,ge=((F=(I=le.guildName)!=null?I:ee==null?void 0:ee.Guild)!=null?F:null)||null,we=(B=(R=le.name)!=null?R:ee==null?void 0:ee.Name)!=null?B:ne,ve=(W=($=le.server)!=null?$:ee==null?void 0:ee.Server)!=null?W:null,ce=(q=Ou((H=le.totalStats)!=null?H:ee==null?void 0:ee["Total Stats"]))!=null?q:null,ke=(se=Ou((G=(K=ee==null?void 0:ee.Album)!=null?K:ee==null?void 0:ee["Album %"])!=null?G:ee==null?void 0:ee.AlbumPct))!=null?se:null,be=kK(Ou(le.timestamp)),Ue=typeof le.portrait=="object"?le.portrait:typeof le.portraitOptions=="object"?le.portraitOptions:typeof(ee==null?void 0:ee.portraitOptions)=="object"?ee.portraitOptions:void 0;N||u({id:ne,name:we,className:xe,level:he,guild:ge,server:ve,scrapbookPct:ke,totalStats:ce,lastScanDays:be,values:ee,portraitConfig:Ue})}catch(ne){N||(u(null),l((ne==null?void 0:ne.message)||"Unbekannter Fehler beim Laden."))}finally{N||i(!1)}}return y(),()=>{N=!0}},[e]),T.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);const S=T.useMemo(()=>d?AK(d):null,[d]),k=N=>{v(N),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>v(null),3500)},E=async N=>{if(d){if(N==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const y=`${window.location.origin}/players/profile/${d.id}`;try{await navigator.clipboard.writeText(y),k("Profil-Link wurde kopiert.")}catch(_){k("Konnte Link nicht kopieren.")}}return}if(N==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:d.name,text:`Shakes & Fidget Charakter ${d.name}`,url:window.location.href}),k("Profil geteilt.")}catch(y){k("Teilen abgebrochen.")}return}if(N==="guild"&&d.guild){s(`/guilds?search=${encodeURIComponent(d.guild)}`);return}if(N==="rescan"){k("Rescan-Queue folgt  aktuell noch Platzhalter.");return}}},L=()=>{if(!S)return null;switch(h){case"Statistiken":return n.jsx(vK,{data:S.stats});case"Charts":return n.jsx(_K,{series:S.charts});case"Fortschritt":return n.jsx(bK,{items:S.progress});case"Vergleich":return n.jsx(wK,{rows:S.comparison});case"Historie":return n.jsx(jK,{entries:S.history});default:return null}},M=()=>n.jsxs("div",{className:"player-profile__loading",children:[n.jsx("p",{children:a!=null?a:"Spieler nicht gefunden."}),n.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>s("/"),style:{marginTop:12},children:"Zur Startseite"})]});return n.jsx(Et,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsxs("div",{className:"player-profile",children:[r&&!d&&n.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!r&&(!d||!S)&&M(),S&&n.jsxs(n.Fragment,{children:[n.jsx(yK,{data:S.hero,loading:r,actionFeedback:g,onAction:E}),n.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:NK.map(N=>{const y=h===N;return n.jsx("button",{type:"button",role:"tab","aria-selected":y,className:`player-profile__tab-button ${y?"player-profile__tab-button--active":""}`,onClick:()=>p(N),children:N},N)})}),L()]})]})})}const Ou=t=>{if(t==null||t==="")return null;const e=String(t).replace(/[^0-9.-]/g,""),s=Number(e);return Number.isFinite(s)?s:null},kK=t=>{if(!t)return null;const e=Date.now()/1e3,s=Math.max(0,e-t);return Math.floor(s/86400)},av=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),CK=t=>{const e=new Map;return Object.entries(t||{}).forEach(([s,r])=>e.set(av(s),r)),{number(s,r=null){for(const i of s){const a=Ou(e.get(av(i)));if(a!=null)return a}return r},text(s,r=null){for(const i of s){const a=e.get(av(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},qE=t=>{let e=2166136261;for(let s=0;s<t.length;s++)e^=t.charCodeAt(s),e=Math.imul(e,16777619);return()=>{e+=1831565813;let s=Math.imul(e^e>>>15,1|e);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}},sn=(t,e="")=>t==null?e:t.toLocaleString("de-DE"),cf=t=>t==null?"":`${Math.round(t)}%`,mN=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,TK={warrior:1,berserker:1,paladin:1,scout:5,assassin:5,"demon hunter":6,bard:6,mage:8,"battle mage":8,necromancer:9,druid:9},EK=t=>{var r;if(t.portraitConfig)return t.portraitConfig;const e=qE(t.id||t.name),s=TK[((r=t.className)==null?void 0:r.toLowerCase())||""]||Math.floor(e()*10)+1;return{genderName:e()>.5?"female":"male",class:s,race:Math.floor(e()*8)+1,hair:Math.floor(e()*40)+1,hairColor:Math.floor(e()*10)+1,mouth:Math.floor(e()*20)+1,eyes:Math.floor(e()*20)+1,brows:Math.floor(e()*10)+1,beard:Math.floor(e()*10),nose:Math.floor(e()*10)+1,ears:Math.floor(e()*10)+1,extra:Math.floor(e()*10),background:e()>.5?"gradient":"retroGradient",frame:e()>.8?"goldenFrame":""}},AK=t=>{var W,H,q,K,G,se,ne,U,Z,le,ee;const e=t.values||{},s=CK(e),r=qE(t.id),i=(W=t.level)!=null?W:s.number(["level"]),a=(H=t.scrapbookPct)!=null?H:s.number(["album","scrapbook","albumpct"]),l=s.number(["honor","ehre"]),d=(q=t.totalStats)!=null?q:s.number(["totalstats","stats"]),p=[["Base Strength","Strke","basestrength"],["Base Dexterity","Geschick","basedexterity"],["Base Intelligence","Intelligenz","baseintelligence"],["Base Constitution","Konstitution","baseconstitution"],["Base Luck","Glck","baseluck"]].map(he=>{var xe;return(xe=s.number(he,0))!=null?xe:0}).reduce((he,xe)=>he+(xe!=null?xe:0),0),g=a!=null?a:Math.round(r()*80+10),v=(K=s.number(["fortresslevel","fortress"]))!=null?K:Math.round(r()*20)+30,b=(G=s.number(["underworld","underworldlevel"]))!=null?G:Math.round(r()*10)+20,S=(se=s.number(["tower","towerfloor"]))!=null?se:Math.round(r()*90)+10,k=(ne=s.number(["pets","petprogress"]))!=null?ne:Math.round(r()*50)+25,E=(i!=null?i:0)*1200+p+Math.round((a!=null?a:0)*3200),L=(U=s.text(["mount","reittier"]))!=null?U:"Greifendrachen (280%)",M=(Z=s.text(["guildrole","role"]))!=null?Z:"Member",N=s.number(["hofrank","halloffamerank","hofposition"]),y=[{label:"Level",value:i?`Lvl ${sn(i)}`:""},{label:"Power Score",value:sn(E)},{label:"Scrapbook",value:cf(g)},{label:"Total Stats",value:sn(d)}],_=[{label:"Mount",value:L,tone:"neutral"},{label:"Honor",value:sn(l),tone:"success"},{label:"Gildenrolle",value:M,tone:"warning"},{label:"HoF",value:N?`#${sn(N)}`:"",tone:"neutral"}],D={playerName:t.name,className:t.className,guild:t.guild,server:t.server,levelLabel:i?`Level ${sn(i)}`:void 0,lastScanLabel:(le=mN(t.lastScanDays))!=null?le:void 0,status:t.lastScanDays!=null&&t.lastScanDays<=2?"online":"offline",metrics:y,badges:_,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guild},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:EK(t)},C=[{label:"Strke",base:["Base Strength"],total:["Strength"]},{label:"Geschick",base:["Base Dexterity"],total:["Dexterity"]},{label:"Intelligenz",base:["Base Intelligence"],total:["Intelligence"]},{label:"Konstitution",base:["Base Constitution"],total:["Constitution"]},{label:"Glck",base:["Base Luck"],total:["Luck"]}],w={summary:[{label:"Power Score",value:sn(E),hint:"Level * SumBase"},{label:"Honor",value:sn(l)},{label:"HoF Platz",value:N?`#${sn(N)}`:""},{label:"Letzter Scan",value:(ee=mN(t.lastScanDays))!=null?ee:""}],attributes:C.map(he=>({label:he.label,baseLabel:sn(s.number(he.base)),totalLabel:s.number(he.total)!=null?`Gesamt ${sn(s.number(he.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(r()*40+40)}%`},{label:"Schatten",value:`${Math.round(r()*40+35)}%`},{label:"Frost",value:`${Math.round(r()*30+30)}%`},{label:"Licht",value:`${Math.round(r()*20+30)}%`}],resources:[{label:"Gold/h",value:`${sn(Math.round((i!=null?i:1)*(r()*8+3)))}k`},{label:"XP/h",value:`${sn(Math.round((i!=null?i:1)*(r()*5+2)))}k`},{label:"Mount Bonus",value:L},{label:"Quest Slots",value:`${Math.round(r()*2)+3}`}]},I=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(g!=null?g:0)/100),targetLabel:`${cf(g)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:g!=null&&g>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,S/100),targetLabel:`Ebene ${Math.round(S)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudeausbau",progress:Math.min(1,v/25),targetLabel:`Lvl ${Math.round(v)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,b/30),targetLabel:`Lvl ${Math.round(b)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,k/100),targetLabel:`${Math.round(k)} / 100`,meta:"Habitate offen"}],F=(he,xe=.12)=>{const ge=he!=null?he:Math.round(r()*100),we=[];let ve=ge*.85;for(let ce=0;ce<8;ce++)ve+=ve*(r()*xe-xe/2),we.push(Math.max(0,Math.round(ve)));return we[we.length-1]=ge,we},R=[{label:"Level Verlauf",points:F(i!=null?i:0,.06),unit:"",subLabel:"7 Tage"},{label:"Total Stats",points:F(d!=null?d:0,.18),unit:"",subLabel:"Summe Attribute"},{label:"Honor",points:F(l!=null?l:0,.25),unit:"",subLabel:"Hall of Fame"}],B=[{label:"Level",playerValue:i?`Lvl ${sn(i)}`:"",benchmark:i?`Lvl ${sn(Math.round(i*.92))}`:"",diffLabel:i?`+${Math.round(i*.08)}`:"",trend:"up"},{label:"Power Score",playerValue:sn(E),benchmark:sn(Math.round(E*.9)),diffLabel:`+${sn(Math.round(E*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:cf(g),benchmark:`${Math.min(100,Math.round((g!=null?g:60)-8))}%`,diffLabel:g!=null?`+${Math.round(g-60)}%`:"",trend:g!=null&&g>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(v)}`,benchmark:`Lvl ${Math.round(v-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(b)}`,benchmark:`Lvl ${Math.round(b-2)}`,diffLabel:"+2",trend:"neutral"}],$=IK(t,s,r);return{hero:D,stats:w,progress:I,charts:R,comparison:B,history:$}},IK=(t,e,s)=>{var l,d;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:Im(Math.round(s()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:Im(2),title:"Level-Up",description:`Erreichte Level ${sn(t.level)}`,tag:"Level"}),r.push({dateLabel:Im(10),title:"Scrapbook Meilenstein",description:`${cf((l=t.scrapbookPct)!=null?l:Math.round(s()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:Im(18),title:"Festung",description:`Fortress Level ${Math.round((d=e.number(["fortress"],Math.round(s()*20+15)))!=null?d:0)}`,tag:"Festung"}),r},Im=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function wd(t,e=300){const[s,r]=J.useState(t);return J.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function jd(t){const e=J.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[s,r]=J.useState(()=>e());return J.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=l=>r(l.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),s}const RK='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function Sd(t,e){J.useEffect(()=>{var l;if(!e)return;const s=t.current;if(!s)return;const r=()=>s.querySelectorAll(RK);(l=r()[0])==null||l.focus();const a=d=>{if(d.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],p=u[u.length-1];d.shiftKey?document.activeElement===h&&(d.preventDefault(),p.focus()):document.activeElement===p&&(d.preventDefault(),h.focus())};return s.addEventListener("keydown",a),()=>s.removeEventListener("keydown",a)},[t,e])}const PK="_page_1jzf5_1",LK="_header_1jzf5_13",DK="_headerStack_1jzf5_25",MK="_kicker_1jzf5_37",FK="_title_1jzf5_53",BK="_subtitle_1jzf5_65",$K="_headerActions_1jzf5_79",OK="_secondaryAction_1jzf5_89",VK="_infoStrip_1jzf5_131",UK="_infoCard_1jzf5_143",zK="_infoLabel_1jzf5_163",HK="_inlineFilters_1jzf5_177",GK="_filterField_1jzf5_197",WK="_select_1jzf5_227",qK="_searchInput_1jzf5_229",KK="_layout_1jzf5_249",QK="_selectionColumn_1jzf5_261",XK="_selectionCard_1jzf5_273",YK="_slotHeader_1jzf5_293",JK="_slotLabel_1jzf5_307",ZK="_slotStatus_1jzf5_323",eQ="_clearButton_1jzf5_335",tQ="_slotBody_1jzf5_355",sQ="_resultList_1jzf5_367",nQ="_emptyResult_1jzf5_385",rQ="_resultItem_1jzf5_397",iQ="_resultName_1jzf5_421",aQ="_resultMeta_1jzf5_433",oQ="_selectButton_1jzf5_445",lQ="_selectedCard_1jzf5_465",cQ="_selectedName_1jzf5_479",dQ="_selectedMeta_1jzf5_489",uQ="_selectedTagline_1jzf5_491",hQ="_comparisonColumn_1jzf5_503",pQ="_comparisonCard_1jzf5_515",mQ="_comparisonHeader_1jzf5_535",fQ="_sectionTitle_1jzf5_551",gQ="_diffBadge_1jzf5_561",xQ="_metricGrid_1jzf5_579",yQ="_metricCard_1jzf5_591",vQ="_metricLabel_1jzf5_611",bQ="_metricValues_1jzf5_627",_Q="_metricDivider_1jzf5_643",wQ="_metricDelta_1jzf5_653",jQ="_freshnessRow_1jzf5_665",SQ="_freshnessItem_1jzf5_677",NQ="_freshnessBadge_1jzf5_685",kQ="_freshnessPopover_1jzf5_733",CQ="_popoverTitle_1jzf5_757",TQ="_classCard_1jzf5_807",EQ="_classGrid_1jzf5_827",AQ="_classColumn_1jzf5_837",IQ="_classBar_1jzf5_857",RQ="_classSlice_1jzf5_873",PQ="_classLegend_1jzf5_907",LQ="_emptyState_1jzf5_931",DQ="_supportPanels_1jzf5_947",MQ="_checklistCard_1jzf5_959",FQ="_infoCardExtended_1jzf5_961",BQ="_checklist_1jzf5_959",$Q="_infoNote_1jzf5_1033",OQ="_sheetOverlay_1jzf5_1045",VQ="_sheetOpen_1jzf5_1073",UQ="_sheet_1jzf5_1045",zQ="_sheetHeader_1jzf5_1105",HQ="_sheetBody_1jzf5_1119",ie={page:PK,header:LK,headerStack:DK,kicker:MK,title:FK,subtitle:BK,headerActions:$K,secondaryAction:OK,infoStrip:VK,infoCard:UK,infoLabel:zK,inlineFilters:HK,filterField:GK,select:WK,searchInput:qK,layout:KK,selectionColumn:QK,selectionCard:XK,slotHeader:YK,slotLabel:JK,slotStatus:ZK,clearButton:eQ,slotBody:tQ,resultList:sQ,emptyResult:nQ,resultItem:rQ,resultName:iQ,resultMeta:aQ,selectButton:oQ,selectedCard:lQ,selectedName:cQ,selectedMeta:dQ,selectedTagline:uQ,comparisonColumn:hQ,comparisonCard:pQ,comparisonHeader:mQ,sectionTitle:fQ,diffBadge:gQ,metricGrid:xQ,metricCard:yQ,metricLabel:vQ,metricValues:bQ,metricDivider:_Q,metricDelta:wQ,freshnessRow:jQ,freshnessItem:SQ,freshnessBadge:NQ,freshnessPopover:kQ,popoverTitle:CQ,classCard:TQ,classGrid:EQ,classColumn:AQ,classBar:IQ,classSlice:RQ,classLegend:PQ,emptyState:LQ,supportPanels:DQ,checklistCard:MQ,infoCardExtended:FQ,checklist:BQ,infoNote:$Q,sheetOverlay:OQ,sheetOpen:VQ,sheet:UQ,sheetHeader:zQ,sheetBody:HQ},KE=["Ari","Borin","Celeste","Doran","Lena","Nix"],GQ={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},Lb={raid:"Raid",event:"Event",task:"Task"},Db={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},fN={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},gN={urgent:4,high:3,medium:2,low:1},WQ={"7d":7,"30d":30,"90d":90,all:null},ov={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},qQ=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:gl(5,20),createdAt:Kn(2,14),updatedAt:Kn(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:Pm(3),nextUpdateAt:Rm(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:gl(2,12),createdAt:Kn(4,9),updatedAt:Kn(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:Pm(8),nextUpdateAt:Rm(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:gl(7,17),createdAt:Kn(1,10),updatedAt:Kn(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:Pm(22),nextUpdateAt:Rm(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:Kn(1,19),createdAt:Kn(9,10),updatedAt:Kn(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:Kn(1,19),nextUpdateAt:gl(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:gl(12,18),createdAt:Kn(6,15),updatedAt:Kn(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:Pm(1),nextUpdateAt:Rm(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:gl(18,13),createdAt:Kn(12,18),updatedAt:Kn(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:Kn(2,16),nextUpdateAt:gl(4,9)}];function gl(t,e=12){const s=new Date;return s.setDate(s.getDate()+t),s.setHours(e,0,0,0),s.toISOString()}function Rm(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function Kn(t,e=12){const s=new Date;return s.setDate(s.getDate()-t),s.setHours(e,0,0,0),s.toISOString()}function Pm(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function xN(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function KQ(t,e,s){const r=Date.now(),i=WQ[e.range];return t.filter(a=>{const l=s===""||a.title.toLowerCase().includes(s.toLowerCase())||a.description.toLowerCase().includes(s.toLowerCase()),d=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let p=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),v=r+i*24*60*60*1e3;p=g<=v}return l&&d&&u&&h&&p})}function QQ(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"dueAt":l=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":l=gN[i.priority]-gN[a.priority];break;case"title":l=i.title.localeCompare(a.title);break;default:l=0}return s==="asc"?l:-l}),r}function XQ(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function Zi(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function Qh(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function jh(t,e){const s=new Date(t).getTime()-e;if(s<=0)return"faellig";const r=Math.floor(s/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function YQ(t){return t.length===0?null:t.reduce((e,s)=>e?fN[s.freshness]>fN[e.freshness]?s:e:s,null)}const j0=["EU-01","EU-02","US-01","US-02","ASIA-01"],Zu=new Intl.NumberFormat("de-DE");function JQ(){const t=jd("(min-width: 768px)"),[e,s]=J.useState("all"),[r,i]=J.useState(null),[a,l]=J.useState(null),[d,u]=J.useState(null),[h,p]=J.useState(null),g=[r,a].filter(Boolean).length,v=J.useMemo(()=>{const R=[d,h].filter(Boolean);if(!R.length)return 0;const B=R.reduce(($,W)=>{var H;return $+((H=W.level)!=null?H:0)},0);return Math.round(B/R.length)},[d,h]),[b,S]=J.useState(null),[k,E]=J.useState(!1),L=J.useRef(null);Sd(L,k&&!t),J.useEffect(()=>{t&&E(!1)},[t]),J.useEffect(()=>{if(!b)return;const R=$=>{const W=$.target;W&&(W.closest(`.${ie.freshnessBadge}`)||W.closest(`.${ie.freshnessPopover}`)||S(null))},B=$=>{$.key==="Escape"&&S(null)};return document.addEventListener("pointerdown",R),document.addEventListener("keydown",B),()=>{document.removeEventListener("pointerdown",R),document.removeEventListener("keydown",B)}},[b]);const M=J.useMemo(()=>d?jh(d.nextUpdateAt,Date.now()):"",[d]),N=J.useMemo(()=>h?jh(h.nextUpdateAt,Date.now()):"",[h]),y=()=>E(!0),_=()=>E(!1),D=R=>{s(R)},C=(R,B)=>{R==="playerA"?(i(B.id),u(B)):(l(B.id),p(B))},w=R=>{R==="playerA"?(i(null),u(null)):(l(null),p(null))},I=R=>{S(B=>B===R?null:R)},F=d&&h;return n.jsxs(Et,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[n.jsxs("div",{className:ie.page,children:[n.jsxs("header",{className:ie.header,children:[n.jsxs("div",{className:ie.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.kicker,children:"Players"}),n.jsx("h1",{className:ie.title,children:"Spieler vergleichen"}),n.jsx("p",{className:ie.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),n.jsx("div",{className:ie.headerActions,children:!t&&n.jsx("button",{type:"button",className:ie.secondaryAction,onClick:y,children:"Filter"})})]}),n.jsxs("div",{className:ie.infoStrip,children:[n.jsxs("div",{className:ie.infoCard,children:[n.jsx("span",{className:ie.infoLabel,children:"Slots gefuellt"}),n.jsxs("strong",{children:[Zu.format(g)," Spieler"]})]}),n.jsxs("div",{className:ie.infoCard,children:[n.jsx("span",{className:ie.infoLabel,children:"Durchschnittslevel"}),n.jsx("strong",{children:Zu.format(v)})]}),n.jsxs("div",{className:ie.infoCard,children:[n.jsx("span",{className:ie.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:ie.inlineFilters,children:n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ie.select,value:e,onChange:R=>D(R.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),j0.map(R=>n.jsx("option",{value:R,children:R},R))]})]})})]}),n.jsxs("div",{className:ie.layout,children:[n.jsxs("section",{className:ie.selectionColumn,children:[n.jsx(yN,{title:"Spieler A",slot:"playerA",selectedPlayer:d,excludeId:a,onSelect:C,onClear:w,serverFilter:e,onServerChange:D}),n.jsx(yN,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:C,onClear:w,serverFilter:e,onServerChange:D})]}),n.jsxs("section",{className:ie.comparisonColumn,children:[n.jsxs("div",{className:ie.comparisonCard,children:[n.jsxs("div",{className:ie.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.kicker,children:"Vergleich"}),n.jsx("h2",{className:ie.sectionTitle,children:"Kennzahlen"})]}),F&&n.jsxs("span",{className:ie.diffBadge,children:["Delta Level: ",Zu.format(d.level-h.level)]})]}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:ie.metricGrid,children:[n.jsx(vN,{label:"Level",aValue:d.level,bValue:h.level}),n.jsx(vN,{label:"Scrapbook (%)",aValue:d.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),n.jsx(ZQ,{playerA:d,playerB:h,countdownA:M,countdownB:N,activePopover:b,onToggle:I})]}),n.jsx(eX,{playerA:d,playerB:h})]}):n.jsx("div",{className:ie.emptyState,children:n.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:ie.supportPanels,children:[n.jsx(tX,{}),n.jsx(sX,{})]})]})]})]}),!t&&n.jsx("div",{className:`${ie.sheetOverlay} ${k?ie.sheetOpen:""}`,children:n.jsxs("div",{className:ie.sheet,role:"dialog","aria-modal":"true",ref:L,children:[n.jsxs("header",{className:ie.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:ie.clearButton,onClick:_,children:"Schliessen"})]}),n.jsx("div",{className:ie.sheetBody,children:n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ie.select,value:e,onChange:R=>D(R.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),j0.map(R=>n.jsx("option",{value:R,children:R},R))]})]})})]})})]})}function yN({title:t,slot:e,selectedPlayer:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=J.useState(""),p=wd(u,300);J.useEffect(()=>{h("")},[s,l]);const{results:g,loading:v}=nX(p,l,r);return n.jsxs("article",{className:ie.selectionCard,children:[n.jsxs("div",{className:ie.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.slotLabel,children:t}),n.jsx("p",{className:ie.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:ie.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:ie.slotBody,children:[n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ie.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),j0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:ie.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:ie.resultList,role:"list",children:[v&&n.jsx("div",{className:ie.emptyResult,children:"Lade..."}),!v&&g.length===0&&n.jsx("div",{className:ie.emptyResult,children:"Kein Spieler gefunden."}),!v&&g.map(b=>n.jsxs("div",{className:ie.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.resultName,children:b.name}),n.jsxs("p",{className:ie.resultMeta,children:[b.server," - Level ",b.level," - ",b.className]})]}),n.jsx("button",{type:"button",className:ie.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:ie.selectedCard,children:[n.jsx("p",{className:ie.selectedName,children:s.name}),n.jsxs("p",{className:ie.selectedMeta,children:[s.server," - Level ",s.level," - ",s.className," -"," ",s.guildName||"ohne Gilde"]}),n.jsx("p",{className:ie.selectedTagline,children:s.tagline})]})]})]})}function vN({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):Zu.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):Zu.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:ie.metricCard,children:[n.jsx("p",{className:ie.metricLabel,children:t}),n.jsxs("div",{className:ie.metricValues,children:[n.jsx("span",{"aria-label":"Spieler A",children:i(e)}),n.jsx("span",{className:ie.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Spieler B",children:i(s)})]}),n.jsx("p",{className:ie.metricDelta,children:l})]})}function ZQ({playerA:t,playerB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:ie.metricCard,children:[n.jsx("p",{className:ie.metricLabel,children:"Freshness"}),n.jsx("div",{className:ie.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:ie.freshnessItem,children:[n.jsxs("button",{type:"button",className:ie.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:Qh(l.lastScanAt)})]}),h&&n.jsxs("div",{className:ie.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:ie.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:Db[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:Zi(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[Zi(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function eX({playerA:t,playerB:e}){const s=J.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return n.jsxs("div",{className:ie.classColumn,children:[n.jsx("h3",{children:i.name}),n.jsx("div",{className:ie.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(l=>n.jsxs("span",{style:{width:`${l.percent}%`},className:ie.classSlice,children:[n.jsx("small",{children:l.label}),n.jsxs("strong",{children:[l.percent,"%"]})]},`${i.id}-${l.label}`))})]})};return n.jsxs("div",{className:ie.classCard,children:[n.jsx("p",{className:ie.metricLabel,children:"Stat-Verteilung"}),n.jsx("div",{className:ie.classGrid,children:[t,e].map(r)}),s.length>0&&n.jsx("ul",{className:ie.classLegend,children:s.map(i=>n.jsx("li",{children:i},i))})]})}function tX(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return n.jsxs("section",{className:ie.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:ie.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function sX(){return n.jsxs("section",{className:ie.infoCardExtended,children:[n.jsx("h3",{children:"Matchup-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:ie.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),n.jsx("button",{type:"button",className:ie.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function nX(t,e,s){const[r,i]=J.useState([]),[a,l]=J.useState(!1);return J.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const p=d.toLowerCase(),g=jg(ct,"latest"),v=await un(On(g,Ca("nameFold"),Al(p),Il(p+""),Zn(15))),b=await un(On(g,Mo("nameNgrams","array-contains",p),Zn(15))),S=new Set,k=[],E=L=>{var K,G,se,ne,U,Z,le,ee,he,xe,ge,we,ve,ce,ke,be,Ue,Ke,Tt,Mt,Ft,Vt,is,Ee,Le,Ie,He,ot,ht;const M=L.data(),y=(K=L.ref.parent)==null?void 0:K.parent,_=y==null?void 0:y.parent;if((_==null?void 0:_.id)!=="players")return;const C=(se=(G=y==null?void 0:y.id)!=null?G:M.playerIdentifier)!=null?se:L.id;if(!C||S.has(C)||s&&C===s)return;const w=(Z=(U=M.name)!=null?U:(ne=M.values)==null?void 0:ne.Name)!=null?Z:"Unbekannter Spieler",I=(he=(ee=M.server)!=null?ee:(le=M.values)==null?void 0:le.Server)!=null?he:"Unknown";if(e!=="all"&&I!==e)return;const F=(ce=(ve=(ge=M.className)!=null?ge:(xe=M.values)==null?void 0:xe.Class)!=null?ve:(we=M.values)==null?void 0:we.Class)!=null?ce:"Unbekannte Klasse",R=(Ue=(be=M.guildName)!=null?be:(ke=M.values)==null?void 0:ke.Guild)!=null?Ue:"",B=_o(M.level)||_o((Ke=M.values)==null?void 0:Ke.Level)||_o((Tt=M.values)==null?void 0:Tt.Level),$=_o(M.scrapbookPct)||_o((Mt=M.values)==null?void 0:Mt["Album %"])||_o((Ft=M.values)==null?void 0:Ft.AlbumPct)||_o((Vt=M.values)==null?void 0:Vt["Scrapbook %"]),W=(Le=(Ee=M.updatedAt)!=null?Ee:(is=M.values)==null?void 0:is.UpdatedAt)!=null?Le:M.timestamp?new Date(M.timestamp*1e3).toISOString():new Date().toISOString(),H=(Ie=M.nextUpdateAt)!=null?Ie:iX(12),q=rX((He=M.values)!=null?He:M.stats);S.add(C),k.push({id:C,name:w,tagline:(ot=M.tagline)!=null?ot:R?`Mitglied in ${R}`:F,server:I,className:F,guildName:R,level:B||0,scrapbookPct:$,lastScanAt:W,updatedAt:W,nextUpdateAt:H,freshness:(ht=M.freshness)!=null?ht:"unknown",stats:q})};v.forEach(E),b.forEach(E),u||(k.sort((L,M)=>L.name.localeCompare(M.name)),i(k))}catch(p){console.error("[Players Compare] player search failed",p),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const bN={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function rX(t={}){const e=Object.keys(bN).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:bN[r],value:_o(i)}}).filter(r=>r.value>0),s=e.reduce((r,i)=>r+i.value,0);return s?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/s*100))})):[]}function _o(t){const e=Number(t);return Number.isFinite(e)?e:0}function iX(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function aX(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(_N,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),n.jsx(_N,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function _N({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function oX(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function lX(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}function cX(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}const dX={weltenimwandel:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",freedom:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59"};function uX(t){var s;const e=cX(t);return(s=dX[e])!=null?s:null}function hX(t,e=128){var a,l;const s=uX(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=zl(s))!=null?a:null,i=r&&(l=Fr(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function Sh(t,e=128){return hX(t,e).thumb}const Zl={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},Og=(t,e)=>({...t||{},...e||{}}),wN=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),s=Math.floor((Date.now()-e.getTime())/864e5);return s<=0?"today":s===1?"yesterday":`${s}d ago`},pX=t=>Object.values(t||{}).reduce((e,s)=>e+(s||0),0),vn=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function mX(t){var v,b,S,k,E,L,M,N;const e=vn(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const s=vn(t==null?void 0:t.baseMain),r=vn(t==null?void 0:t.conBase);if(s!=null&&r!=null)return s+r;const i=(t==null?void 0:t.baseStats)||{},a=vn(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const l=vn(i==null?void 0:i.main),d=vn(i==null?void 0:i.con);if(l!=null&&d!=null)return l+d;const u=(t==null?void 0:t.values)||{},h=(b=(v=vn(u==null?void 0:u.SumBaseTotal))!=null?v:vn(u==null?void 0:u.sumBaseTotal))!=null?b:vn(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const p=(E=(k=(S=vn(u==null?void 0:u.Main))!=null?S:vn(u==null?void 0:u.main))!=null?k:vn(u==null?void 0:u.BaseMain))!=null?E:vn(u==null?void 0:u.baseMain),g=(N=(M=(L=vn(u==null?void 0:u.Con))!=null?L:vn(u==null?void 0:u.con))!=null?M:vn(u==null?void 0:u.ConBase))!=null?N:vn(u==null?void 0:u.conBase);return p!=null&&g!=null?p+g:null}function xl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function fX(t,e=56){if(!t)return;const s=xl(t),r=pn.find(i=>xl(i.label)===s||xl(i.key)===s)||pn.find(i=>xl(i.label).startsWith(s)||s.startsWith(xl(i.label))||xl(i.key).startsWith(s)||s.startsWith(xl(i.key)));return r?Fr(r.iconUrl,e):void 0}function gX({name:t,memberClass:e,online:s,theme:r=Zl}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=fX(e,56);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const xX={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},yX=({role:t})=>n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(xX[t]||""),children:t});function jN(t,e){const s=(t!=null?t:"").trim();if(s)return s;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function vX(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,s=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:s!=null&&r!=null?s+r:null;return i!=null?i.toLocaleString("de-DE"):""}function Lm({label:t,value:e,theme:s=Zl}){return n.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:s.border,background:s.tile},children:[n.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),n.jsx("div",{className:"text-lg font-semibold",style:{color:s.title},children:e})]})}function bX({member:t,theme:e,actions:s,extraKPIs:r}){var p,g,v,b,S,k,E,L,M;if(!t)return null;const i=Og(Zl,e),a=t,l=jN((g=(p=a.guildJoined)!=null?p:a.joinedAt)!=null?g:null,(v=a.guildJoinedMs)!=null?v:null),d=jN((b=a.lastActivity)!=null?b:null,(S=a.lastActivityMs)!=null?S:typeof a.lastOnline=="number"?a.lastOnline:null),u=vX(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return n.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),n.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[n.jsx("div",{className:"shrink-0",children:n.jsx(gX,{name:t.name,memberClass:(L=(E=a.class)!=null?E:(k=a.values)==null?void 0:k.Class)!=null?L:null,online:a.online,theme:i})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&n.jsx(yX,{role:a.role})]}),n.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",l,"  Last ",d]})]}),n.jsx("div",{className:"ml-auto",children:s})]}),n.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsx(Lm,{label:"Level",value:(M=a.level)!=null?M:"",theme:i}),typeof a.scrapbook=="number"&&n.jsx(Lm,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),n.jsx(Lm,{label:"Sum Base",value:u,theme:i}),n.jsx(Lm,{label:"Total Stats",value:h,theme:i}),r]})]})}function yl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function _X(t,e=40){if(!t)return;const s=yl(t);let r=pn.find(i=>yl(i.label)===s||yl(i.key)===s)||pn.find(i=>yl(i.label).startsWith(s)||s.startsWith(yl(i.label))||yl(i.key).startsWith(s)||s.startsWith(yl(i.key)));return r?Fr(r.iconUrl,e):void 0}function wX({name:t,memberClass:e,online:s,theme:r=Zl}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=_X(e,40);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const jX=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function SX({rows:t,selId:e,onSelect:s,rightCols:r,theme:i}){const a=Og(Zl,i);return n.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[n.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),n.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[n.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((l,d)=>{var u,h,p;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(d%2?"bg-slate-800/10":"")+(l.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[n.jsx(wX,{name:l.name,memberClass:(p=(h=l.class)!=null?h:(u=l.values)==null?void 0:u.Class)!=null?p:null,online:l.online,theme:a}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[l.class,l.server?`  ${l.server}`:""]})]}),n.jsx("div",{className:"justify-self-end",children:n.jsx(jX,{role:l.role})}),r(l)]},l.id)})]})]})}function vl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function NX(t,e=40){if(!t)return;const s=vl(t);let r=pn.find(i=>vl(i.label)===s||vl(i.key)===s)||pn.find(i=>vl(i.label).startsWith(s)||s.startsWith(vl(i.label))||vl(i.key).startsWith(s)||s.startsWith(vl(i.key)));return r?Fr(r.iconUrl,e):void 0}function kX({rows:t,selId:e,onSelect:s,footer:r,theme:i}){const a=Og(Zl,i);return n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(l=>{var v,b,S,k,E,L,M,N,y;const d=l,u=l.name.slice(0,2).toUpperCase(),h=NX((S=(b=d.class)!=null?b:(v=d.values)==null?void 0:v.Class)!=null?S:null,40),p=typeof d.level=="number"?d.level:typeof((k=d.values)==null?void 0:k.Level)=="number"?d.values.Level:"",g=typeof d.scrapbook=="number"?`${d.scrapbook}%`:typeof((E=d.values)==null?void 0:E.Scrapbook)=="number"?`${d.values.Scrapbook}%`:null;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(l.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:l.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[h?n.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:_=>{const D=_.currentTarget.parentElement;D&&(D.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(N=(M=d.class)!=null?M:(L=d.values)==null?void 0:L.Class)!=null?N:"",d.server?`  ${d.server}`:""]})]}),n.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(y=d.role)!=null?y:""})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:p})]}),g&&n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),n.jsx("div",{className:"mt-3",children:r(l)})]},l.id)})})}const CX=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(s=>{const r=t[s];typeof r=="number"&&(e[s]=r)}),Object.keys(e).length?e:void 0};function TX({members:t,defaultView:e="list",defaultQuery:s="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:l,renderActions:d,renderKPIs:u,theme:h}){var F;const p=T.useMemo(()=>Og(Zl,h),[h]),[g,v]=T.useState(e),[b,S]=T.useState(s),[k,E]=T.useState(r.key),[L,M]=T.useState(r.dir),[N,y]=T.useState((F=t[0])==null?void 0:F.id),_=a!=null?a:N,D=R=>{a||y(R);const B=t.find($=>$.id===R);B&&l&&l(B)},C=T.useMemo(()=>{const R=b.trim().toLowerCase();return R?t.filter(B=>B.name.toLowerCase().includes(R)||B.class.toLowerCase().includes(R)||String(B.role).toLowerCase().includes(R)):t},[t,b]),w=T.useMemo(()=>{const R=L==="asc"?1:-1,B=$=>{var W,H;switch(k){case"sumBaseStats":{const q=mX($);return q==null?-1/0:q}case"totalStats":return(H=(W=$.totalStats)!=null?W:pX(CX($.baseStats)))!=null?H:-1/0;default:return $[k]}};return[...C].sort(($,W)=>{const H=B($),q=B(W);return H===q?0:H>q?R:-R})},[C,k,L]),I=T.useMemo(()=>w.find(R=>R.id===_)||w[0],[w,_]);return n.jsxs("div",{children:[i&&n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:p.tile,borderColor:p.border},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"View"}),n.jsxs("select",{value:g,onChange:R=>v(R.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:p.border},children:[n.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),n.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"Search"}),n.jsx("input",{value:b,onChange:R=>S(R.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:p.border}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"Sort by"}),n.jsxs("select",{value:String(k),onChange:R=>E(R.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:p.border},children:[n.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),n.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),n.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),n.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),n.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),n.jsx("button",{onClick:()=>M(R=>R==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:p.border},children:L==="asc"?"":""})]})]}),n.jsx(bX,{member:I,actions:I&&(d?d(I):n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Profile"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Compare"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Message"})]})),extraKPIs:I&&u?u(I):null,theme:p}),g==="list"?n.jsx(SX,{rows:w,selId:_,onSelect:D,theme:p,rightCols:R=>{var B;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-right text-sm",children:(B=R.level)!=null?B:""}),n.jsx("div",{className:"text-right text-xs",style:{color:p.sub},children:wN(R.lastOnline)})]})}}):n.jsx(kX,{rows:w,selId:_,onSelect:D,theme:p,footer:R=>n.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:p.sub},children:n.jsxs("span",{children:["Last ",wN(R.lastOnline)]})})})]})}function EX({guildName:t,server:e,emblemUrl:s,lastScanISO:r,members:i,avgLevel:a,totalPower:l,activity7d:d,topClasses:u,tickerItems:h,href:p,onClick:g,className:v}){const b=!!IE(),S=T.useMemo(()=>{if(!r)return null;const B=Date.now()-new Date(r).getTime(),$=Math.max(0,Math.floor(B/6e4));if($<60)return`${$}m`;const W=Math.floor($/60);return W<24?`${W}h`:`${Math.floor(W/24)}d`},[r]),k=Bu(0),E=Bu(0),L=Bu(0),M=Bu(0),N=km(k,B=>Math.round(B).toString()),y=km(E,B=>Math.round(B).toString()),_=km(L,B=>Math.round(B).toLocaleString()),D=km(M,B=>`${Math.round(B)}%`);T.useEffect(()=>{const B=b?0:.6;if(B===0){k.set(i),E.set(a),L.set(l!=null?l:0),M.set(d!=null?d:0);return}const $=[Cm(k,i,{duration:B}),Cm(E,a,{duration:B}),Cm(L,l!=null?l:0,{duration:B}),Cm(M,d!=null?d:0,{duration:B})];return()=>$.forEach(W=>W.stop())},[i,a,l,d,b]);const C=T.useRef(null);T.useEffect(()=>{if(b||!C.current)return;const B=C.current;let $=0,W=0;const H=()=>{W+=.016;const q=W*14%140-20;B.style.setProperty("--s-x",`${q}%`),$=requestAnimationFrame(H)};return $=requestAnimationFrame(H),()=>cancelAnimationFrame($)},[b]);const w={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},I=100,F=p?"a":"div",R=p?{href:p}:{onClick:g};return n.jsxs(F,{...R,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",v!=null?v:""].join(" "),style:{background:`linear-gradient(135deg, ${w.bgFrom}, ${w.bgTo})`},children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),n.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[n.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[s?n.jsx("img",{src:s,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):n.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:n.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),n.jsx("div",{ref:C,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),S&&n.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:w.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${w.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",S]}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${I}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${I}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${I}deg, transparent 0 46px, ${w.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),n.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[n.jsx("h3",{className:"truncate font-extrabold",style:{color:w.title,fontSize:22},children:t}),n.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:w.soft,border:`1px solid ${w.border}`},children:e})]}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[n.jsx(Dm,{label:"Members",value:N}),n.jsx(Dm,{label:" Level",value:y}),n.jsx(Dm,{label:"Total Power",value:_}),typeof d=="number"&&n.jsx(Dm,{label:"Activity (7d)",value:D})]}),u!=null&&u.length?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:w.soft},children:"Top Classes"}),u.slice(0,3).map(B=>n.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${w.border}`,color:w.text},children:[B.iconUrl?n.jsx("img",{src:B.iconUrl,alt:B.key,className:"h-4 w-4 object-contain"}):n.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:w.accent,opacity:.85}}),n.jsxs("span",{className:"text-xs",children:[B.key," ",n.jsxs("span",{className:"opacity-70",children:["(",Math.round(B.percent),"%)"]})]})]},B.key))]}):null]})]})]}),h!=null&&h.length?n.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${w.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:n.jsx(AX,{items:h,muted:b,color:w.soft})}):null]})}function Dm({label:t,value:e}){return n.jsxs("div",{className:"relative z-10 min-w-0",children:[n.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),n.jsx(EE.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function AX({items:t,muted:e,color:s}){const r=T.useRef(null);return T.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,l=0;const d=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,l=requestAnimationFrame(d)};return l=requestAnimationFrame(d),()=>cancelAnimationFrame(l)},[e]),n.jsx("div",{className:"overflow-hidden",children:n.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:s},children:t.concat(t).map((i,a)=>n.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const IX="_wrap_q5gkc_53",RX="_banner_q5gkc_59",PX="_bannerRowTop_q5gkc_61",LX="_bannerStripe_q5gkc_71",DX="_bannerTitle_q5gkc_79",MX="_bannerRowBottom_q5gkc_93",FX="_bannerSub_q5gkc_95",BX="_monthPickerWrap_q5gkc_101",$X="_monthPickerLabel_q5gkc_113",OX="_monthPicker_q5gkc_101",VX="_monthButton_q5gkc_131",UX="_monthButtonText_q5gkc_159",zX="_chev_q5gkc_161",HX="_monthList_q5gkc_165",GX="_monthOption_q5gkc_195",WX="_monthBadge_q5gkc_221",qX="_gridRow_q5gkc_237",KX="_gridRowBottom_q5gkc_239",QX="_sideImage_q5gkc_253",XX="_sideImagePh_q5gkc_271",YX="_emblemPanel_q5gkc_275",JX="_emblemFrame_q5gkc_295",ZX="_emblemImg_q5gkc_297",eY="_emblemPlaceholder_q5gkc_299",tY="_emblemShimmer_q5gkc_307",sY="_emblemCaption_q5gkc_315",nY="_card_q5gkc_319",rY="_cardHeader_q5gkc_331",iY="_cardTitle_q5gkc_339",aY="_cardSubtitle_q5gkc_341",oY="_headerRight_q5gkc_343",lY="_cardBody_q5gkc_345",cY="_tableWrap_q5gkc_349",dY="_tableTitle_q5gkc_351",uY="_table_q5gkc_349",hY="_th_q5gkc_355",pY="_td_q5gkc_355",mY="_tdEmpty_q5gkc_365",fY="_sectionDivider_q5gkc_375",gY="_sectionStripe_q5gkc_389",xY="_sectionTitle_q5gkc_397",bt={wrap:IX,banner:RX,bannerRowTop:PX,bannerStripe:LX,bannerTitle:DX,bannerRowBottom:MX,bannerSub:FX,monthPickerWrap:BX,monthPickerLabel:$X,monthPicker:OX,monthButton:VX,monthButtonText:UX,chev:zX,monthList:HX,monthOption:GX,monthBadge:WX,gridRow:qX,gridRowBottom:KX,sideImage:QX,sideImagePh:XX,emblemPanel:YX,emblemFrame:JX,emblemImg:ZX,emblemPlaceholder:eY,emblemShimmer:tY,emblemCaption:sY,card:nY,cardHeader:rY,cardTitle:iY,cardSubtitle:aY,headerRight:oY,cardBody:lY,tableWrap:cY,tableTitle:dY,table:uY,th:hY,td:pY,tdEmpty:mY,sectionDivider:fY,sectionStripe:gY,sectionTitle:xY};function yY(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function SN(t,e="de-DE"){const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const NN=({title:t,subtitle:e,children:s,rightBadge:r})=>n.jsxs("section",{className:bt.card,children:[(t||e||r)&&n.jsxs("header",{className:bt.cardHeader,children:[n.jsxs("div",{className:bt.headerTitles,children:[t&&n.jsx("h3",{className:bt.cardTitle,children:t}),e&&n.jsx("div",{className:bt.cardSubtitle,children:e})]}),r&&n.jsx("div",{className:bt.headerRight,children:r})]}),n.jsx("div",{className:bt.cardBody,children:s})]}),kN=({block:t})=>{var r,i;const e=t.columns,s=(r=t.rows)!=null?r:[];return n.jsxs("div",{className:bt.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&n.jsx("div",{className:bt.tableTitle,children:t.title}),n.jsxs("table",{className:bt.table,children:[n.jsx("thead",{children:n.jsx("tr",{children:e.map(a=>n.jsx("th",{className:bt.th,style:{width:a.width},children:a.label},a.key))})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{className:bt.tdEmpty,colSpan:e.length,children:"No data"})}):s.map((a,l)=>{var d;return n.jsx("tr",{children:e.map(u=>{var v;const h=a[u.key],p=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?yY(p):p;return n.jsx("td",{className:bt.td,"data-align":(v=u.align)!=null?v:"left",children:u.render?u.render(a):g},u.key)})},(d=a.id)!=null?d:l)})})]}),t.footer&&n.jsx("div",{className:bt.tableFooter,children:t.footer})]})},vY=(t,e)=>{T.useEffect(()=>{function s(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[t,e])},bY=({months:t,currentKey:e,onChange:s,fallbackDate:r})=>{var p;if(!(Array.isArray(t)&&t.length>0&&e))return n.jsx("div",{className:bt.bannerSub,children:r!=null?r:""});const a=T.useRef(null),[l,d]=T.useState(!1);vY(a,()=>d(!1));const u=t.find(g=>g.key===e),h=u?`${SN(u.fromISO)}${SN(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return n.jsxs("div",{className:bt.monthPickerWrap,children:[n.jsx("div",{className:bt.monthPickerLabel,children:"Monat"}),n.jsxs("div",{className:bt.monthPicker,ref:a,children:[n.jsxs("button",{type:"button",className:bt.monthButton,onClick:()=>d(g=>!g),"aria-haspopup":"listbox","aria-expanded":l,children:[n.jsx("span",{className:bt.monthButtonText,children:(p=u==null?void 0:u.label)!=null?p:""}),n.jsx("svg",{className:bt.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),l&&n.jsx("ul",{className:bt.monthList,role:"listbox",children:t.map(g=>n.jsx("li",{children:n.jsx("button",{type:"button",className:bt.monthOption,onClick:()=>{d(!1),s==null||s(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&n.jsx("span",{className:bt.monthBadge,children:h})]})},_Y=({title:t,monthRange:e,months:s,currentMonthKey:r,onMonthChange:i})=>n.jsxs("div",{className:bt.banner,children:[n.jsxs("div",{className:bt.bannerRowTop,children:[n.jsx("div",{className:bt.bannerStripe}),n.jsx("div",{className:bt.bannerTitle,children:t}),n.jsx("div",{className:bt.bannerStripe})]}),n.jsx("div",{className:bt.bannerRowBottom,children:n.jsx(bY,{months:s,currentKey:r,onChange:i,fallbackDate:e})})]}),wY=({emblemUrl:t,caption:e})=>n.jsxs("div",{className:bt.emblemPanel,children:[n.jsxs("div",{className:bt.emblemFrame,children:[t?n.jsx("img",{src:t,alt:"Guild Emblem",className:bt.emblemImg}):n.jsx("div",{className:bt.emblemPlaceholder,children:"Emblem"}),n.jsx("div",{className:bt.emblemShimmer})]}),e&&n.jsx("div",{className:bt.emblemCaption,children:e})]}),CN=({imgUrl:t,alt:e})=>n.jsx("div",{className:bt.sideImage,children:t?n.jsx("img",{src:t,alt:e!=null?e:"side"}):n.jsx("div",{className:bt.sideImagePh,children:"Image"})}),lv=({children:t,className:e})=>n.jsx("div",{className:`${bt.gridRow} ${e!=null?e:""}`,children:t}),jY=({children:t})=>n.jsxs("div",{className:bt.sectionDivider,children:[n.jsx("div",{className:bt.sectionStripe}),n.jsx("div",{className:bt.sectionTitle,children:t}),n.jsx("div",{className:bt.sectionStripe})]}),SY=({data:t,onMonthChange:e})=>{const{header:s,panels:r,tablesTop:i,tablesBottom:a}=t;return n.jsxs("div",{className:bt.wrap,children:[n.jsx(_Y,{title:s.title,monthRange:s.monthRange,months:s.months,currentMonthKey:s.currentMonthKey,onMonthChange:e}),n.jsxs(lv,{children:[n.jsx(CN,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),n.jsx(wY,{emblemUrl:s.emblemUrl,caption:s.centerCaption}),n.jsx(CN,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),n.jsx(lv,{children:i.map((l,d)=>n.jsx(NN,{title:l.title,subtitle:l.subtitle,children:n.jsx(kN,{block:l})},d))}),n.jsx(jY,{children:"Guild Overview"}),n.jsx(lv,{className:bt.gridRowBottom,children:a.map((l,d)=>n.jsx(NN,{title:l.title,subtitle:l.subtitle,children:n.jsx(kN,{block:l})},d))})]})},NY=({guildId:t,guildName:e,guildServer:s})=>{const[r,i]=T.useState(!0),[a,l]=T.useState(null),[d,u]=T.useState(void 0),h=T.useRef({}),[p,g]=T.useState(()=>Mm(e,s));T.useEffect(()=>{let b=!1;async function S(){var k,E,L,M,N;i(!0);try{const y=Yl(ct,`guilds/${t}/history_monthly`),_=await un(y),D=[];for(const I of _.docs){const F=I.id,R=I.data();if(!R)continue;h.current[F]=R;const B=(k=R==null?void 0:R.meta)!=null?k:{},$=B.fromISO||B.baselineISO||B.firstISO||"",W=B.toISO||B.latestISO||B.nowISO||"",H=Number((E=B.daysSpan)!=null?E:Math.floor((+new Date(W)-+new Date($))/864e5))||0,q=!!((M=(L=R==null?void 0:R.status)==null?void 0:L.available)!=null?M:$&&W&&H<=40),K=B.label||new Date(F+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});D.push({key:F,label:K,fromISO:$||new Date(F+"-01").toISOString(),toISO:W||new Date(F+"-28").toISOString(),daysSpan:H,available:q,reason:q||(N=R==null?void 0:R.status)==null?void 0:N.reason})}if(D.sort((I,F)=>I.key<F.key?1:-1),b)return;if(D.length===0){l(null),u(void 0),g(Mm(e,s)),i(!1);return}l(D);const C=D[0].key;u(C);const w=h.current[C];g(TN(w,{guildName:e,guildServer:s,currentMonthKey:C,months:D}))}catch(y){console.error(y),l(null),u(void 0),g(Mm(e,s))}finally{b||i(!1)}}return S(),()=>{b=!0}},[t,e,s]);async function v(b){u(b);let S=h.current[b];if(!S)try{const k=Wt(ct,`guilds/${t}/history_monthly/${b}`),E=await Xs(k);E.exists()?(S=E.data(),h.current[b]=S):S=null}catch(k){console.error(k),S=null}if(!S){g(Mm(e,s,{currentMonthKey:b,months:a!=null?a:void 0}));return}g(TN(S,{guildName:e,guildServer:s,currentMonthKey:b,months:a!=null?a:void 0}))}return n.jsx(SY,{data:p,onMonthChange:v})};function Mm(t,e,s){return{header:{title:`${t}  Monthly Progress`,monthRange:"-",emblemUrl:Sh(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:s==null?void 0:s.currentMonthKey,months:s==null?void 0:s.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[bl("Most Base Stats gained",e?`Server ${e}`:void 0),bl("Sum Base Stats"),bl("Highest Base Stats")],tablesBottom:[bl("Main & Con"),bl("Sum Base Stats"),bl("Highest Base Stats"),bl("Highest Total Stats")]}}function bl(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function TN(t,e){var l,d,u,h,p,g,v,b;(l=t==null?void 0:t.meta)!=null;const s={title:`${e.guildName}  Monthly Progress`,monthRange:void 0,emblemUrl:Sh(e.guildName,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"",width:70,align:"right",format:"num"}],rows:((d=t==null?void 0:t.mostBaseGained)!=null?d:[]).map((S,k)=>{var E,L,M,N,y,_,D,C;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",level:(N=(M=S.levelLatest)!=null?M:S.level)!=null?N:null,base:(_=(y=S.baseLatest)!=null?y:S.base)!=null?_:null,delta:(C=(D=S.baseDelta)!=null?D:S.delta)!=null?C:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((S,k)=>{var E,L,M,N,y,_,D;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",base:(M=S.base)!=null?M:null,stam:(y=(N=S.stamDelta)!=null?N:S.staminaDelta)!=null?y:null,sho:(D=(_=S.shoDelta)!=null?_:S.shootingDelta)!=null?D:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((S,k)=>{var E,L,M,N,y;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",stats:(N=(M=S.stats)!=null?M:S.base)!=null?N:null,delta:(y=S.delta)!=null?y:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((p=t==null?void 0:t.mainAndCon)!=null?p:[]).map((S,k)=>{var E,L,M,N,y,_;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",class:(N=(M=S.class)!=null?M:S.className)!=null?N:"",stats:(y=S.stats)!=null?y:null,delta:(_=S.delta)!=null?_:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((S,k)=>{var E,L,M,N,y;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",base:(M=S.base)!=null?M:null,stam:(N=S.stamDelta)!=null?N:null,sho:(y=S.shoDelta)!=null?y:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((v=t==null?void 0:t.highestBaseStats)!=null?v:[]).map((S,k)=>{var E,L,M,N;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",stats:(M=S.stats)!=null?M:null,delta:(N=S.delta)!=null?N:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((b=t==null?void 0:t.highestTotalStats)!=null?b:[]).map((S,k)=>{var E,L,M,N;return{id:(E=S.playerId)!=null?E:k,rank:k+1,name:(L=S.name)!=null?L:"-",total:(M=S.total)!=null?M:null,delta:(N=S.delta)!=null?N:null}})}];return{header:s,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const kY="_root_r1uj3_5",CY="_sectionDivider_r1uj3_17",TY="_sectionStripe_r1uj3_31",EY="_sectionTitle_r1uj3_33",wu={root:kY,sectionDivider:CY,sectionStripe:TY,sectionTitle:EY},AY="_root_4jywc_1",IY="_accent_4jywc_31",EN={root:AY,default:"_default_4jywc_29",accent:IY};function Vo({text:t,tone:e="default",className:s}){return n.jsx("div",{className:`${EN.root} ${EN[e]} ${s!=null?s:""}`.trim(),children:t})}const RY="_card_vvv3s_3",PY="_wrap_vvv3s_31",LY="_divider_vvv3s_45",DY="_rows_vvv3s_77",MY="_row_vvv3s_77",FY="_left_vvv3s_109",BY="_label_vvv3s_111",$Y="_avgHead_vvv3s_113",OY="_avgNum_vvv3s_115",VY="_top3_vvv3s_121",UY="_chip_vvv3s_123",zY="_badge_vvv3s_151",HY="_name_vvv3s_159",GY="_score_vvv3s_161",WY="_headerSpacer_vvv3s_167",Yn={card:RY,wrap:PY,divider:LY,rows:DY,row:MY,left:FY,label:BY,avgHead:$Y,avgNum:OY,top3:VY,chip:UY,badge:zY,name:HY,score:GY,headerSpacer:WY};function qY({name:t,value:e,classLabel:s,colors:r}){const i=K1(s,64);return n.jsxs("div",{className:Yn.chip,children:[n.jsx("span",{className:Yn.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:Yn.name,children:t!=null?t:""}),n.jsx("span",{className:Yn.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function KY({snapshot:t,colors:e,title:s="Base Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var p,g;return((p=h[d])!=null?p:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return n.jsxs("div",{className:Yn.card,children:[n.jsx(Vo,{text:s}),n.jsx("div",{className:Yn.headerSpacer}),n.jsxs("div",{className:Yn.wrap,children:[n.jsx("div",{className:Yn.divider}),n.jsx("div",{className:Yn.rows,children:a.map((d,u)=>n.jsxs("div",{className:Yn.row,children:[n.jsxs("div",{className:Yn.left,children:[n.jsx("div",{className:Yn.label,children:d.label}),n.jsx("div",{className:Yn.avgHead,children:""}),n.jsx("div",{className:Yn.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:Yn.top3,children:d.list.map((h,p)=>n.jsx(qY,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},p))})]},u))})]})]})}const QY="_card_1enwc_1",XY="_wrap_1enwc_1",YY="_divider_1enwc_1",JY="_rows_1enwc_1",ZY="_row_1enwc_1",eJ="_left_1enwc_1",tJ="_label_1enwc_1",sJ="_avgHead_1enwc_1",nJ="_avgNum_1enwc_1",rJ="_top3_1enwc_1",iJ="_chip_1enwc_1",aJ="_badge_1enwc_1",oJ="_name_1enwc_1",lJ="_score_1enwc_1",cJ="_headerSpacer_1enwc_1",Jn={card:QY,wrap:XY,divider:YY,rows:JY,row:ZY,left:eJ,label:tJ,avgHead:sJ,avgNum:nJ,top3:rJ,chip:iJ,badge:aJ,name:oJ,score:lJ,headerSpacer:cJ};function dJ({name:t,value:e,classLabel:s,colors:r}){const i=K1(s,64);return n.jsxs("div",{className:Jn.chip,children:[n.jsx("span",{className:Jn.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:Jn.name,children:t!=null?t:""}),n.jsx("span",{className:Jn.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function uJ({snapshot:t,colors:e,title:s="Total Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var p,g;return((p=h[d])!=null?p:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return n.jsxs("div",{className:Jn.card,children:[n.jsx(Vo,{text:s}),n.jsx("div",{className:Jn.headerSpacer}),n.jsxs("div",{className:Jn.wrap,children:[n.jsx("div",{className:Jn.divider}),n.jsx("div",{className:Jn.rows,children:a.map((d,u)=>n.jsxs("div",{className:Jn.row,children:[n.jsxs("div",{className:Jn.left,children:[n.jsx("div",{className:Jn.label,children:d.label}),n.jsx("div",{className:Jn.avgHead,children:""}),n.jsx("div",{className:Jn.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:Jn.top3,children:d.list.map((h,p)=>n.jsx(dJ,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},p))})]},u))})]})]})}function hJ({guild:t,snapshot:e,colors:s}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Vo,{text:"General Info"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function pJ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Vo,{text:"Fortress"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function mJ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Vo,{text:"Rankings"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function fJ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Vo,{text:"Serververgleich"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const gJ=T.memo(function({guild:e,snapshot:s,emblemUrl:r,colors:i}){const a=i.icon,l=({text:d})=>n.jsxs("div",{className:wu.sectionDivider,children:[n.jsx("div",{className:wu.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),n.jsx("div",{className:wu.sectionTitle,style:{color:i.soft},children:d}),n.jsx("div",{className:wu.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return n.jsxs("div",{className:wu.root+" space-y-4",children:[n.jsx(l,{text:"GUILD OVERVIEW"}),n.jsx("div",{style:{marginTop:6,marginBottom:10},children:n.jsx(l,{text:"AVERAGE PLAYER STATS"})}),n.jsx(hJ,{guild:e,snapshot:s,colors:i}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(KY,{snapshot:s,colors:i}),n.jsx(uJ,{snapshot:s,colors:i})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(pJ,{colors:i}),n.jsx(mJ,{colors:i})]}),n.jsx("div",{className:"mt-4",children:n.jsx(fJ,{colors:i})})]})}),xJ="_wrapper_zqchq_3",yJ="_grid_zqchq_9",vJ="_tile_zqchq_13",bJ="_disabled_zqchq_37",_J="_crestWrap_zqchq_41",wJ="_crest_zqchq_41",jJ="_ring_zqchq_53",SJ="_badge_zqchq_55",NJ="_meta_zqchq_67",kJ="_nameRow_zqchq_69",CJ="_name_zqchq_69",TJ="_share_zqchq_73",EJ="_sub_zqchq_75",AJ="_tileButton_zqchq_79",IJ="_donutCard_zqchq_85",RJ="_donutHeader_zqchq_87",PJ="_legend_zqchq_91",LJ="_legendItem_zqchq_93",DJ="_legendSwatch_zqchq_95",MJ="_legendRight_zqchq_97",FJ="_centerLabel_zqchq_101",As={wrapper:xJ,grid:yJ,tile:vJ,disabled:bJ,crestWrap:_J,crest:wJ,ring:jJ,badge:SJ,meta:NJ,nameRow:kJ,name:CJ,share:TJ,sub:EJ,tileButton:AJ,donutCard:IJ,donutHeader:RJ,legend:PJ,legendItem:LJ,legendSwatch:DJ,legendRight:MJ,centerLabel:FJ},S0=56;function Uf(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function AN(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const BJ=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function $J(t){return t?/drive\.google\.com/.test(t):!1}function IN(t,e=S0){if(t)return $J(t)?Fr(t,e):t}function OJ(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const s={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return s[e]?s[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function VJ(t){var p,g,v,b,S,k;if(!t)return null;const e=t,s=t,r=(p=e.key)!=null?p:s.id,i=(g=e.label)!=null?g:s.name,a=(b=(v=s.crestUrl)!=null?v:e.iconUrl)!=null?b:s.iconUrl,l=(S=e.iconUrl)!=null?S:s.iconUrl,d=(k=e.fallback)!=null?k:s.fallback;if(!r||!i)return null;const u=IN(a,S0),h=IN(l,S0);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:d?String(d):void 0}}function QE(t,e){var p,g,v,b,S,k,E,L,M,N,y,_,D,C,w,I,F,R,B,$,W;const s={},r={},i={},a={},l=e.map(H=>H.id);for(const H of l)s[H]=0,r[H]=0,i[H]=0,a[H]=null;for(const H of Array.isArray(t)?t:[]){const q=(_=(N=(L=(k=(b=(v=(g=(p=H.classId)!=null?p:H.class)!=null?g:H.klass)!=null?v:H.playerClass)!=null?b:H.cls)!=null?k:(S=H.values)==null?void 0:S.Class)!=null?L:(E=H.values)==null?void 0:E.class)!=null?N:(M=H.values)==null?void 0:M.Klasse)!=null?_:(y=H.values)==null?void 0:y.klasse,K=OJ(q);if(!K||!l.includes(K))continue;s[K]+=1;const G=BJ((I=(C=H.level)!=null?C:(D=H.values)==null?void 0:D.Level)!=null?I:(w=H.values)==null?void 0:w.level);G!=null&&(r[K]+=G,i[K]+=1,(!a[K]||((R=(F=a[K])==null?void 0:F.level)!=null?R:-1/0)<G)&&(a[K]={id:H.id,name:(W=($=H.name)!=null?$:(B=H.values)==null?void 0:B.Name)!=null?W:null,level:G}))}const d=Object.values(s).reduce((H,q)=>H+q,0),u={},h={};return l.forEach(H=>{u[H]=d>0?s[H]/d*100:0,h[H]=i[H]>0?r[H]/i[H]:null}),{counts:s,shares:u,avg:h,top:a}}const UJ=({valuePct:t})=>{const s=2*Math.PI*28,r=s*(1-Math.max(0,Math.min(100,t))/100);return n.jsxs("svg",{className:As.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:s,strokeDashoffset:r,strokeLinecap:"round"})]})},zJ=({data:t,classMeta:e,onPickClass:s})=>{const[r,i]=T.useState({}),a=Array.isArray(t)?t:[],l=Array.isArray(e)?e:[],{counts:d,shares:u,avg:h,top:p}=T.useMemo(()=>QE(a,l),[a,l]);return n.jsx("section",{className:As.wrapper,children:n.jsx("div",{className:As.grid,style:{gridTemplateColumns:"1fr"},children:l.map(g=>{var M,N,y;const v=(M=d[g.id])!=null?M:0,b=(N=u[g.id])!=null?N:0,S=h[g.id],k=p[g.id],E=v<=0,L=r[g.id]?void 0:g.crestUrl||g.iconUrl;return n.jsxs("div",{className:`${As.tile} ${E?As.disabled:""}`,title:E?`${g.name}: kein Mitglied`:`${g.name}  ${AN(v)}  ${Uf(b)}${S?`   ${S.toFixed(1)}`:""}`,children:[n.jsxs("div",{className:As.crestWrap,children:[L?n.jsx("img",{className:As.crest,src:L,alt:g.name,onError:()=>i(_=>({..._,[g.id]:!0}))}):n.jsx("div",{className:As.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(y=g.fallback)!=null?y:""}),n.jsx(UJ,{valuePct:b}),n.jsx("div",{className:As.badge,children:AN(v)})]}),n.jsxs("div",{className:As.meta,children:[n.jsxs("div",{className:As.nameRow,children:[n.jsx("div",{className:As.name,children:g.name}),n.jsx("div",{className:As.share,children:Uf(b)})]}),n.jsxs("div",{className:As.sub,children:[S?` Lvl ${S.toFixed(1)}`:"",k?`  Top: ${k.name}${k.level?` (Lv ${k.level})`:""}`:""]})]}),!E&&s&&n.jsx("button",{className:As.tileButton,onClick:()=>s(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},HJ=({data:t,classMeta:e})=>{const s=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=T.useMemo(()=>QE(s,r),[s,r]),l=T.useMemo(()=>Object.values(a).reduce((d,u)=>d+u,0),[a]);return n.jsxs("div",{className:As.donutCard,children:[n.jsxs("div",{className:As.donutHeader,children:[n.jsx("div",{children:"Klassen-Verteilung"}),n.jsxs("div",{className:As.legendRight,children:["Gesamt: ",l]})]}),n.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[n.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[n.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,v=r.map((S,k)=>{var E;return{id:S.id,pct:(E=i[S.id])!=null?E:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*k)} 60% 55%)`}});let b=0;return v.map(S=>{const k=(S.pct||0)/100;if(k<=0)return null;const E=b,L=b+g*k;b=L;const M=L-E>Math.PI?1:0,N=130+100*Math.cos(E),y=130+100*Math.sin(E),_=130+100*Math.cos(L),D=130+100*Math.sin(L),C=130+64*Math.cos(L),w=130+64*Math.sin(L),I=130+64*Math.cos(E),F=130+64*Math.sin(E),R=`M ${N} ${y} A 100 100 0 ${M} 1 ${_} ${D} L ${C} ${w} A 64 64 0 ${M} 0 ${I} ${F} Z`;return n.jsx("path",{d:R,fill:S.color,opacity:.95},S.id)})})()]}),n.jsx("div",{className:As.legend,children:r.map((d,u)=>{var g,v;const h=(g=i[d.id])!=null?g:0,p=(v=a[d.id])!=null?v:0;return n.jsxs("div",{className:As.legendItem,title:`${d.name}: ${p}  ${Uf(h)}`,children:[n.jsx("span",{className:As.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),n.jsx("span",{children:d.name}),n.jsxs("span",{className:As.legendRight,children:[p,"  ",Uf(h)]})]},d.id)})})]}),n.jsx("div",{className:As.centerLabel,children:"Anteile je Klasse"})]})},qs={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},GJ=t=>{var e,s,r,i,a,l,d,u,h,p,g,v,b,S,k;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(s=t.class)!=null?s:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(l=t.baseMain)!=null?l:void 0,con:(d=t.conBase)!=null?d:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(p=t.treasury)!=null?p:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(v=t.attrTotal)!=null?v:void 0,conTotal:(b=t.conTotal)!=null?b:void 0,lastScan:(S=t.lastScan)!=null?S:void 0,lastActivity:(k=t.lastActivity)!=null?k:void 0}}},cv=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},WJ=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function XE({title:t,right:e,children:s}){return n.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:qs.tile,border:`1px solid ${qs.line}`},children:[(t||e)&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:qs.line},children:[n.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:qs.soft},children:t}),e]}),n.jsx("div",{className:"p-4",children:s})]})}function ju({k:t,v:e}){return n.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[n.jsx("span",{className:"opacity-80",children:t}),n.jsx("span",{className:"font-semibold",style:{color:qs.title},children:e})]})}function qJ({guild:t}){var s,r;const e=Sh(t.name,800);return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:n.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?n.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):n.jsx("div",{className:"text-6xl",children:""})})}),n.jsx(XE,{title:"GILDEN INFO",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsx(ju,{k:"Mitglieder",v:(s=t.memberCount)!=null?s:""}),n.jsx(ju,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:""}),n.jsx(ju,{k:"Server",v:(r=t.server)!=null?r:""}),n.jsx(ju,{k:"Inaktiv",v:"0"}),n.jsx(ju,{k:"Aktivitt",v:"100%"})]})})]})}function dv(){var E,L,M,N,y,_;const t=sg(),e=t.id||t.gid||t.guildId||t.guild||"",s=si(),[r,i]=T.useState(!0),[a,l]=T.useState(null),[d,u]=T.useState(null),[h,p]=T.useState(null),[g,v]=T.useState("grid"),b=T.useMemo(()=>(Array.isArray(pn)?pn:[]).map(VJ).filter(Boolean),[]);T.useEffect(()=>{let D=!1;async function C(){var w,I,F,R,B,$,W,H,q,K,G,se,ne,U,Z,le,ee,he,xe,ge,we,ve,ce,ke,be,Ue,Ke,Tt,Mt,Ft,Vt,is,Ee,Le,Ie,He,ot;i(!0),l(null);try{const ht=e.trim();if(!ht){l("Keine Gilde gewhlt."),i(!1);return}const yt=Wt(ct,`guilds/${ht}/latest/latest`),Ut=await Xs(yt);if(!Ut.exists()){l("Gilde nicht gefunden."),i(!1);return}const Bt=Ut.data(),An=(F=(I=Bt.name)!=null?I:(w=Bt.values)==null?void 0:w.Name)!=null?F:ht,Ys=($=(B=Bt.server)!=null?B:(R=Bt.values)==null?void 0:R.Server)!=null?$:null,Ps=(G=cv((K=(H=Bt.memberCount)!=null?H:(W=Bt.values)==null?void 0:W["Guild Member Count"])!=null?K:(q=Bt.values)==null?void 0:q.GuildMemberCount))!=null?G:null,Un=(ge=cv((xe=(ee=(Z=(ne=Bt.hofRank)!=null?ne:(se=Bt.values)==null?void 0:se["Hall of Fame Rank"])!=null?Z:(U=Bt.values)==null?void 0:U.HoF)!=null?ee:(le=Bt.values)==null?void 0:le.Rank)!=null?xe:(he=Bt.values)==null?void 0:he["Guild Rank"]))!=null?ge:null,yr=WJ(cv(Bt.timestamp));D||u({id:ht,name:An,server:Ys,memberCount:Ps,hofRank:Un,lastScanDays:yr});const vr=Wt(ct,`guilds/${ht}/snapshots/members_summary`),ue=await Xs(vr);if(ue.exists()&&!D){const Fe=ue.data(),Qe={guildId:String((we=Fe.guildId)!=null?we:ht),updatedAt:String((ke=(ce=Fe.updatedAt)!=null?ce:(ve=Bt.values)==null?void 0:ve.Timestamp)!=null?ke:""),updatedAtMs:Number((Ue=(be=Fe.updatedAtMs)!=null?be:Bt.timestamp*1e3)!=null?Ue:0),count:Number((Ke=Fe.count)!=null?Ke:0),hash:String((Tt=Fe.hash)!=null?Tt:""),avgLevel:(Mt=Fe.avgLevel)!=null?Mt:null,avgTreasury:(Ft=Fe.avgTreasury)!=null?Ft:null,avgMine:(Vt=Fe.avgMine)!=null?Vt:null,avgBaseMain:(is=Fe.avgBaseMain)!=null?is:null,avgConBase:(Ee=Fe.avgConBase)!=null?Ee:null,avgSumBaseTotal:(Le=Fe.avgSumBaseTotal)!=null?Le:null,avgAttrTotal:(Ie=Fe.avgAttrTotal)!=null?Ie:null,avgConTotal:(He=Fe.avgConTotal)!=null?He:null,avgTotalStats:(ot=Fe.avgTotalStats)!=null?ot:null,members:Array.isArray(Fe.members)?Fe.members:[]};p(Qe)}}catch(ht){D||l((ht==null?void 0:ht.message)||"Fehler beim Laden.")}finally{D||i(!1)}}return C(),()=>{D=!0}},[e]);const S=T.useMemo(()=>{var D;return((D=h==null?void 0:h.members)!=null?D:[]).map(C=>GJ(C))},[h]);if(r)return n.jsx(Et,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsx("div",{className:"text-sm",style:{color:qs.soft},children:"Lade Gildenprofil"})});if(!d)return n.jsx(Et,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsxs("div",{className:"text-sm",style:{color:qs.soft},children:[a!=null?a:"Unbekannter Fehler.",n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:()=>s("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const k=n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"px-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${qs.line}`,position:"relative",zIndex:2},children:[n.jsx("div",{className:"min-w-[120px]",children:n.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:qs.tile,border:`1px solid ${qs.line}`,color:qs.title},children:(E=d.server)!=null?E:"S?.EU"})}),n.jsx("div",{className:"flex-1 text-center",children:n.jsx("div",{className:"font-extrabold",style:{color:qs.title,fontSize:26,lineHeight:1.15},children:d.name})}),n.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:qs.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:""," ",n.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),n.jsx("div",{style:{height:1,background:qs.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return n.jsxs(Et,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[k,n.jsx("div",{className:"px-6 pb-8",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[n.jsx("div",{className:"col-span-12 md:col-span-3",children:n.jsx(qJ,{guild:d})}),n.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[n.jsx(gJ,{guild:d,snapshot:h,emblemUrl:Sh(d.name,512)||void 0,colors:qs}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-full max-w-[980px]",children:n.jsx(EX,{guildName:d.name,server:(L=d.server)!=null?L:"",emblemUrl:Sh(d.name,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(M=d.memberCount)!=null?M:0,avgLevel:(N=h==null?void 0:h.avgLevel)!=null?N:0,totalPower:(y=h==null?void 0:h.avgTotalStats)!=null?y:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(_=d.memberCount)!=null?_:0}`]:void 0})})}),n.jsx(KJ,{members:S,guildId:d.id,guildName:d.name,guildServer:d.server})]}),n.jsxs("div",{className:"col-span-12 md:col-span-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>v("grid"),"aria-label":"Klassenbersicht",children:n.jsx(Vo,{text:"Klassenbersicht",tone:g==="grid"?"accent":"default"})}),n.jsx("button",{onClick:()=>v("donut"),"aria-label":"Klassenverteilung",children:n.jsx(Vo,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?n.jsx(zJ,{data:S,classMeta:b,onPickClass:D=>{const C=new URL(window.location.href);C.searchParams.set("tab","bersicht"),C.searchParams.set("class",D),window.location.href=C.toString()}}):n.jsx(HJ,{data:S,classMeta:b})]})]})})]})}function KJ({members:t,guildId:e,guildName:s,guildServer:r}){const[i,a]=T.useState("bersicht");return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:qs.line},role:"tablist",children:["bersicht","Rankings","Monthly Progress","Historie"].map(l=>{const d=l===i;return n.jsx("button",{role:"tab","aria-selected":d,onClick:()=>a(l),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${d?qs.header:"transparent"}`,background:d?"rgba(45,78,120,0.35)":"transparent",color:qs.title},children:l},l)})}),n.jsxs(XE,{children:[i==="bersicht"&&n.jsx(TX,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&n.jsxs("div",{className:"text-sm",style:{color:qs.soft},children:["Platzhalter ",n.jsx("b",{children:"Rankings"}),"  Inhalt folgt."]}),i==="Monthly Progress"&&n.jsx(NY,{guildId:e,guildName:s,guildServer:r}),i==="Historie"&&n.jsxs("div",{className:"text-sm",style:{color:qs.soft},children:["Platzhalter ",n.jsx("b",{children:"Historie"}),"  Inhalt folgt."]})]})]})}function QJ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(RN,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),n.jsx(RN,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"})]})]})}function RN({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function XJ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function YJ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const cn={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function PN({children:t,style:e}){return n.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function JJ({size:t=36}){return n.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:n.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function Bc({label:t,value:e}){return n.jsxs("div",{style:{background:cn.tileAlt,border:`1px solid ${cn.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsx("div",{style:{fontSize:12,color:cn.textSoft,marginBottom:4},children:t}),n.jsx("div",{style:{fontSize:22,color:cn.title,fontWeight:700},children:e})]})}function ZJ(t){const e=t.trim(),s=e.toUpperCase(),r=e.toLowerCase(),i=s.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let l="";const d=s.match(/^([A-Z]{2})(\d{1,3})$/);if(d){const u=d[1],h=String(parseInt(d[2],10)),p=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();l=`s${h}.sfgame.${p}`}return Array.from(new Set([e,s,r,i,a,l].filter(Boolean)))}function uv(){var k,E,L,M;const t=sg(),e=si(),s=xr(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=T.useState(!0),[l,d]=T.useState(null),[u,h]=T.useState(null),[p,g]=T.useState(null);T.useEffect(()=>{let N=!1;async function y(){a(!0),d(null),h(null),g(null);try{const _=r.trim();if(!_)throw new Error("Kein Server gewhlt.");const D=Wt(ct,`servers/${_}`),C=await Xs(D);if(C.exists()){N||(h(C.id),g(C.data()));return}const w=Yl(ct,"servers"),I=ZJ(_),F=[];for(const W of I)F.push(un(On(w,Mo("code","==",W),Zn(1)))),F.push(un(On(w,Mo("displayName","==",W),Zn(1)))),F.push(un(On(w,Mo("host","==",W),Zn(1))));const R=await Promise.allSettled(F);let B=null,$=null;for(const W of R){if(W.status!=="fulfilled")continue;const H=W.value;if(!H.empty){const q=H.docs[0];B=q.id,$=q.data();break}}if(!B||!$)throw new Error("Server nicht gefunden.");N||(h(B),g($),B!==_&&e(`/server/${encodeURIComponent(B)}`,{replace:!0,state:{from:s.pathname}}))}catch(_){N||d((_==null?void 0:_.message)||"Fehler beim Laden.")}finally{N||a(!1)}}return y(),()=>{N=!0}},[r,e,s.pathname]);const v=T.useMemo(()=>n.jsxs("div",{style:{padding:24,color:cn.textSoft},children:[l!=null?l:"Unbekannter Fehler.",n.jsx("div",{style:{marginTop:12},children:n.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:cn.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[l,e]);if(i)return n.jsx(Et,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsx("div",{style:{padding:16,color:cn.textSoft},children:"Lade Serverprofil"})});if(!p)return n.jsx(Et,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:v});const b=p.displayName||p.code||u||r,S=p.active===!0?"Aktiv":p.active===!1?"Inaktiv":"";return n.jsxs(Et,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[n.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${cn.line}`},children:n.jsxs(PN,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[n.jsx(JJ,{size:36}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:18,color:cn.title,fontWeight:700},children:b}),n.jsxs("div",{style:{fontSize:12,color:cn.textSoft},children:[p.host||"","  ",p.region||"","  ",((k=p.type)==null?void 0:k.toUpperCase())||""]})]})]})}),n.jsxs(PN,{style:{paddingTop:12,paddingBottom:24},children:[n.jsxs("div",{style:{background:cn.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${cn.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0,color:cn.title,fontSize:24,fontWeight:800},children:b}),n.jsxs("div",{style:{marginTop:6,color:cn.textSoft,fontSize:13},children:[p.host||"","  ",p.region||"","  ",((E=p.type)==null?void 0:E.toUpperCase())||""]})]}),n.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[n.jsxs("span",{style:{color:cn.textSoft},children:["Status: ",S]}),n.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:p.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[n.jsx(Bc,{label:"Code",value:p.code||""}),n.jsx(Bc,{label:"Host",value:p.host||""}),n.jsx(Bc,{label:"Region",value:p.region||""}),n.jsx(Bc,{label:"Typ",value:((L=p.type)==null?void 0:L.toUpperCase())||""}),n.jsx(Bc,{label:"Numeric ID",value:(M=p.numericId)!=null?M:""}),n.jsx(Bc,{label:"Status",value:S})]}),n.jsxs("div",{style:{marginTop:16,background:cn.tileAlt,padding:15,borderRadius:12,border:`1px solid ${cn.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:cn.textSoft},children:["Platzhalter ",n.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const eZ="_page_177kv_1",tZ="_sectionCard_177kv_15",sZ="_identityCard_177kv_29",nZ="_identityGrid_177kv_39",rZ="_profileName_177kv_63",iZ="_identityMeta_177kv_77",aZ="_mainCharacter_177kv_95",oZ="_characterHeader_177kv_117",lZ="_characterTitle_177kv_131",cZ="_characterSubtitle_177kv_143",dZ="_classIcon_177kv_153",uZ="_metaGrid_177kv_181",hZ="_metaLabel_177kv_193",pZ="_metaValue_177kv_207",mZ="_portrait_177kv_217",fZ="_sectionHeader_177kv_245",gZ="_sectionHint_177kv_265",xZ="_bioText_177kv_275",yZ="_tagGroups_177kv_295",vZ="_tagGroupLabel_177kv_309",bZ="_tagList_177kv_323",_Z="_tag_177kv_295",wZ="_showcaseGrid_177kv_353",jZ="_characterCard_177kv_365",SZ="_characterCardHeader_177kv_385",NZ="_characterName_177kv_399",kZ="_badge_177kv_411",CZ="_characterMeta_177kv_433",TZ="_characterStats_177kv_449",EZ="_statGrid_177kv_465",AZ="_statTile_177kv_477",IZ="_statLabel_177kv_491",RZ="_statValue_177kv_505",PZ="_statSubtext_177kv_519",LZ="_emptyState_177kv_531",DZ="_recordsHighlights_177kv_551",MZ="_highlightCard_177kv_565",FZ="_recordType_177kv_579",BZ="_recordTitle_177kv_593",$Z="_timeline_177kv_607",OZ="_timelineItem_177kv_625",VZ="_timelineBullet_177kv_635",UZ="_timelineContent_177kv_653",zZ="_timelineTitle_177kv_661",HZ="_timelineMeta_177kv_673",GZ="_achievementsHighlights_177kv_685",WZ="_achievementCard_177kv_699",qZ="_achievementIcon_177kv_723",KZ="_achievementName_177kv_747",QZ="_achievementDesc_177kv_759",XZ="_achievementTier_177kv_771",YZ="_achievementDate_177kv_785",JZ="_achievementsGrid_177kv_795",ZZ="_achievementBadge_177kv_807",eee="_tierGold_177kv_831",tee="_tierSilver_177kv_839",see="_tierBronze_177kv_847",De={page:eZ,sectionCard:tZ,identityCard:sZ,identityGrid:nZ,profileName:rZ,identityMeta:iZ,mainCharacter:aZ,characterHeader:oZ,characterTitle:lZ,characterSubtitle:cZ,classIcon:dZ,metaGrid:uZ,metaLabel:hZ,metaValue:pZ,portrait:mZ,sectionHeader:fZ,sectionHint:gZ,bioText:xZ,tagGroups:yZ,tagGroupLabel:vZ,tagList:bZ,tag:_Z,showcaseGrid:wZ,characterCard:jZ,characterCardHeader:SZ,characterName:NZ,badge:kZ,characterMeta:CZ,characterStats:TZ,statGrid:EZ,statTile:AZ,statLabel:IZ,statValue:RZ,statSubtext:PZ,emptyState:LZ,recordsHighlights:DZ,highlightCard:MZ,recordType:FZ,recordTitle:BZ,timeline:$Z,timelineItem:OZ,timelineBullet:VZ,timelineContent:UZ,timelineTitle:zZ,timelineMeta:HZ,achievementsHighlights:GZ,achievementCard:WZ,achievementIcon:qZ,achievementName:KZ,achievementDesc:QZ,achievementTier:XZ,achievementDate:YZ,achievementsGrid:JZ,achievementBadge:ZZ,tierGold:eee,tierSilver:tee,tierBronze:see},nee={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},ree=1e3*60*60*24,LN={gold:3,silver:2,bronze:1};function iee(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const s=Date.now()-e;return s<0?0:Math.floor(s/ree)}function Fm(t){const e=new Date(t);return Number.isNaN(e.getTime())?mt("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function aee(){const{profileId:t}=sg(),e=nee,s=iee(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(p=>p.type==="record").slice(0,3),a=[...e.achievements].sort((p,g)=>LN[g.tier]-LN[p.tier]).slice(0,3),l=[{label:mt("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:mt("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:mt("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:mt("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],d=s==null?mt("profile.public.identity.dateUnknown"):s===0?mt("profile.public.identity.lastScanToday"):`${s} ${mt("profile.public.identity.daysAgoSuffix")}`,u=mt("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):mt("profile.public.identity.unknownValue");return n.jsx(Et,{title:mt("profile.public.title"),subtitle:mt("profile.public.subtitle"),centerFramed:!1,padded:!0,children:n.jsxs("div",{className:De.page,children:[n.jsx("section",{className:`${De.sectionCard} ${De.identityCard}`,children:n.jsxs("div",{className:De.identityGrid,children:[n.jsxs("div",{children:[n.jsx("h1",{className:De.profileName,children:e.profileUser.displayName}),n.jsxs("div",{className:De.identityMeta,children:[n.jsxs("span",{children:[mt("profile.public.identity.profileIdLabel"),": ",t!=null?t:mt("profile.public.identity.unknownValue")]}),n.jsxs("span",{children:[mt("profile.public.identity.lastScanLabel"),": ",d]})]}),n.jsxs("article",{className:De.mainCharacter,children:[n.jsxs("div",{className:De.characterHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:De.metaLabel,children:mt("profile.public.identity.mainCharacterLabel")}),n.jsx("div",{className:De.characterTitle,children:e.mainCharacter.name}),n.jsxs("div",{className:De.characterSubtitle,children:[e.mainCharacter.class,"  ",mt("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),n.jsx("div",{className:De.classIcon,children:e.mainCharacter.class.charAt(0)})]}),n.jsxs("div",{className:De.metaGrid,children:[n.jsxs("div",{children:[n.jsx("div",{className:De.metaLabel,children:mt("profile.public.identity.serverLabel")}),n.jsx("div",{className:De.metaValue,children:e.mainCharacter.server})]}),n.jsxs("div",{children:[n.jsx("div",{className:De.metaLabel,children:mt("profile.public.identity.guildLabel")}),n.jsx("div",{className:De.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),n.jsx("div",{className:De.portrait,children:u})]})}),n.jsxs("section",{className:De.sectionCard,children:[n.jsx("div",{className:De.sectionHeader,children:n.jsx("span",{children:mt("profile.public.bio.title")})}),n.jsx("p",{className:De.bioText,children:e.bio}),n.jsxs("div",{className:De.tagGroups,children:[n.jsxs("div",{children:[n.jsx("div",{className:De.tagGroupLabel,children:mt("profile.public.bio.languagesLabel")}),n.jsx("div",{className:De.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(p=>n.jsx("span",{className:De.tag,children:p.toUpperCase()},p)):n.jsx("span",{className:De.tag,children:mt("profile.public.identity.unknownValue")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:De.tagGroupLabel,children:mt("profile.public.bio.rolesLabel")}),n.jsx("div",{className:De.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(p=>n.jsx("span",{className:De.tag,children:mt(`profile.public.roles.${p}`)},p)):n.jsx("span",{className:De.tag,children:mt("profile.public.identity.unknownValue")})})]})]})]}),n.jsxs("section",{className:De.sectionCard,children:[n.jsxs("div",{className:De.sectionHeader,children:[n.jsx("span",{children:mt("profile.public.showcase.title")}),n.jsx("span",{className:De.sectionHint,children:mt("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?n.jsx("div",{className:De.emptyState,children:mt("profile.public.showcase.empty")}):n.jsx("div",{className:De.showcaseGrid,children:e.showcaseCharacters.map(p=>n.jsxs("article",{className:De.characterCard,children:[n.jsxs("div",{className:De.characterCardHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:De.characterName,children:p.name}),n.jsxs("div",{className:De.characterMeta,children:[n.jsx("span",{children:p.class}),n.jsxs("span",{children:[mt("profile.public.identity.levelShort")," ",p.level]})]})]}),n.jsx("span",{className:De.badge,children:mt(`profile.public.showcase.tags.${p.tag}`)})]}),n.jsxs("div",{className:De.characterMeta,children:[n.jsx("span",{children:p.server}),n.jsx("span",{children:p.guildName})]}),n.jsxs("div",{className:De.characterStats,children:[n.jsxs("span",{children:[mt("profile.public.showcase.scrapbookLabel")," ",p.scrapbookPercent,"%"]}),n.jsxs("span",{children:[mt("profile.public.showcase.highlightLabel"),": ",p.highlightProgress]})]})]},p.id))})]}),n.jsxs("section",{className:De.sectionCard,children:[n.jsx("div",{className:De.sectionHeader,children:n.jsx("span",{children:mt("profile.public.stats.title")})}),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:De.statGrid,children:l.map(p=>n.jsxs("article",{className:De.statTile,children:[n.jsx("div",{className:De.statLabel,children:p.label}),n.jsx("div",{className:De.statValue,children:p.value})]},p.label))}),n.jsxs("div",{className:De.statSubtext,children:[mt("profile.public.stats.topServersLabel"),": ",h]}),n.jsxs("div",{className:De.statSubtext,children:[mt("profile.public.stats.firstScanLabel"),": ",Fm(e.scanStats.firstScanAt)]})]})]}),n.jsxs("section",{className:De.sectionCard,children:[n.jsx("div",{className:De.sectionHeader,children:n.jsx("span",{children:mt("profile.public.records.title")})}),e.recordsAndMilestones.length===0?n.jsx("div",{className:De.emptyState,children:mt("profile.public.records.empty")}):n.jsxs(n.Fragment,{children:[i.length>0&&n.jsx("div",{className:De.recordsHighlights,children:i.map(p=>n.jsxs("article",{className:De.highlightCard,children:[n.jsx("div",{className:De.recordType,children:mt(`profile.public.records.type.${p.type}`)}),n.jsx("div",{className:De.recordTitle,children:p.title}),n.jsxs("div",{className:De.timelineMeta,children:[Fm(p.when),"  ",p.context]})]},p.id))}),n.jsx("ul",{className:De.timeline,children:e.recordsAndMilestones.map(p=>n.jsxs("li",{className:De.timelineItem,children:[n.jsx("div",{className:De.timelineBullet}),n.jsxs("div",{className:De.timelineContent,children:[n.jsx("div",{className:De.timelineTitle,children:p.title}),n.jsxs("div",{className:De.timelineMeta,children:[Fm(p.when),"  ",p.context]})]})]},p.id))})]})]}),n.jsxs("section",{className:De.sectionCard,children:[n.jsxs("div",{className:De.sectionHeader,children:[n.jsx("span",{children:mt("profile.public.achievements.title")}),e.achievements.length>0&&n.jsx("span",{className:De.sectionHint,children:mt("profile.public.achievements.highlights")})]}),e.achievements.length===0?n.jsx("div",{className:De.emptyState,children:mt("profile.public.achievements.empty")}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsx("div",{className:De.achievementsHighlights,children:a.map(p=>n.jsxs("article",{className:De.achievementCard,children:[n.jsx("div",{className:[De.achievementIcon,p.tier==="gold"?De.tierGold:p.tier==="silver"?De.tierSilver:De.tierBronze].join(" "),children:p.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:De.achievementTier,children:mt(`profile.public.achievements.tiers.${p.tier}`)}),n.jsx("div",{className:De.achievementName,children:mt(p.nameKey)}),n.jsx("div",{className:De.achievementDesc,children:mt(p.descriptionKey)}),p.unlockedAt&&n.jsx("div",{className:De.achievementDate,children:Fm(p.unlockedAt)})]},p.id))}),n.jsx("div",{className:De.achievementsGrid,children:e.achievements.map(p=>n.jsxs("article",{className:De.achievementBadge,children:[n.jsx("div",{className:[De.achievementIcon,p.tier==="gold"?De.tierGold:p.tier==="silver"?De.tierSilver:De.tierBronze].join(" "),children:p.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:De.achievementName,children:mt(p.nameKey)}),n.jsx("div",{className:De.achievementDesc,children:mt(p.descriptionKey)})]},p.id))})]})]})]})})}const oee="_wrap_k6pqt_1",lee="_centerLogoWrap_k6pqt_21",cee="_centerLogoLink_k6pqt_37",dee="_centerLogo_k6pqt_21",uee="_arc_k6pqt_55",hee="_left_k6pqt_57",pee="_right_k6pqt_59",mee="_sub_k6pqt_61",fee="_full_k6pqt_63",gee="_arcItem_k6pqt_65",xee="_iconBtn_k6pqt_71",yee="_active_k6pqt_125",vee="_iconImg_k6pqt_135",bee="_placeholderIcon_k6pqt_139",_ee="_placeholderText_k6pqt_157",wee="_iconLabel_k6pqt_161",wn={wrap:oee,centerLogoWrap:lee,centerLogoLink:cee,centerLogo:dee,arc:uee,left:hee,right:pee,sub:mee,full:fee,arcItem:gee,iconBtn:xee,active:yee,iconImg:vee,placeholderIcon:bee,placeholderText:_ee,iconLabel:wee},jee=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=xr();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),h=l.get("sub2"),p=new URL(t,window.location.origin).searchParams,g=p.get("tab"),v=p.get("sub"),b=p.get("sub2");r==="main"?a=d===g:r==="sub"?a=d===g&&!!v&&u===v:a=d===g&&!!v&&u===v&&!!b&&h===b}catch(l){a=!1}return n.jsxs(rs,{to:t,"aria-label":e,className:[wn.iconBtn,a?wn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:wn.iconImg}):n.jsx("div",{className:wn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:wn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:wn.iconLabel,children:e})]})},Bm=({items:t,side:e,anchorSide:s,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440,superOffset:d=660})=>{if((e==="sub"||e==="sub2")&&!s)return null;const u=T.useMemo(()=>{const g=t.length;if(g===0)return[];let v=-90,b=90;e==="left"?(v=90,b=270):e==="sub"||e==="sub2"?s==="left"?(v=90,b=270):(v=-90,b=90):e==="full"&&(v=0,b=360);const S=(b-v)/(g+1),k=r?190:250;return t.map((E,L)=>{const N=(v+S*(L+1))*Math.PI/180;return{it:E,x:Math.cos(N)*k,y:Math.sin(N)*k}})},[t,e,s,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`:e==="sub2"&&(g.left=s==="left"?`calc(50% - ${d}px)`:`calc(50% + ${d}px)`),g})(),p=e==="sub"?"sub":e==="sub2"?"sub2":"main";return n.jsx("div",{className:[wn.arc,e==="left"?wn.left:"",e==="right"?wn.right:"",e==="sub"?wn.sub:"",e==="sub2"?wn.sub2:"",e==="full"?wn.full:""].join(" "),style:h,children:u.map(({it:g,x:v,y:b})=>n.jsx("div",{className:wn.arcItem,style:{transform:`translate(${v}px, ${b}px)`},children:n.jsx(jee,{to:g.to,label:g.label,icon:g.icon,variant:p})},g.key))})},See=({logoSrc:t,categories:e})=>{const[s]=ql(),r=s.get("tab")||null,i=s.get("sub")||null;s.get("sub2");const a=T.useMemo(()=>e.find(N=>N.key===r)||null,[e,r]),l=(a==null?void 0:a.sub)||[],d=T.useMemo(()=>l.find(N=>N.key===i)||null,[l,i]),u=(d==null?void 0:d.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",p=T.useRef(null),[g,v]=T.useState(!1),[b,S]=T.useState(220),[k,E]=T.useState(440),[L,M]=T.useState(660);return T.useLayoutEffect(()=>{(()=>{var F,R;const _=((R=(F=p.current)==null?void 0:F.getBoundingClientRect().width)!=null?R:380)/2,C=Math.round(_+60),w=Math.round(C+220),I=Math.round(w+220);S(C),E(w),M(I),v(!0)})()},[]),T.useEffect(()=>{let N=0,y=null,_={main:b,out:k,sup:L};const D=()=>{y!=null&&window.clearTimeout(y),y=window.setTimeout(()=>{N=requestAnimationFrame(()=>{var q,K;const w=((K=(q=p.current)==null?void 0:q.getBoundingClientRect().width)!=null?K:380)/2,F=Math.round(w+60),R=Math.round(F+220),B=Math.round(R+220),$=Math.abs(F-_.main),W=Math.abs(R-_.out),H=Math.abs(B-_.sup);$>1&&S(F),W>1&&E(R),H>1&&M(B),_={main:F,out:R,sup:B}})},120)};return window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D),y!=null&&window.clearTimeout(y),N&&cancelAnimationFrame(N)}},[b,k,L]),n.jsxs("div",{className:wn.wrap,children:[n.jsx("div",{className:wn.centerLogoWrap,children:n.jsx(rs,{to:"/guidehub",className:wn.centerLogoLink,"aria-label":"Guide Hub Home",children:n.jsx("img",{ref:p,src:t,alt:"Guide Hub",className:wn.centerLogo})})}),g&&n.jsxs(n.Fragment,{children:[n.jsx(Bm,{items:e.filter(N=>N.side==="left").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"left",variant:"main",arcOffset:b}),n.jsx(Bm,{items:e.filter(N=>N.side==="right").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"right",variant:"main",arcOffset:b}),h&&l.length>0&&n.jsx(Bm,{items:l.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:k,compact:!0}),h&&u.length>0&&n.jsx(Bm,{items:u.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:L,compact:!0})]})]})},DN=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"event-list",label:"Event List",to:"/guidehub?tab=events&sub=event-list"},{key:"event-cycle",label:"Event Cycle",to:"/guidehub?tab=events&sub=event-cycle"},{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=progression&sub=early&sub2=max-item-stats-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=fortress-package-skip-order"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=underworld-pro-package-skip-order"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=early&sub2=gem-calculator"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=progression&sub=early&sub2=fortress-attack-duplication"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"dungeons",label:"Dungeons",to:"/guidehub?tab=dungeons",sub2:[]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]},{key:"class-book",label:"Class book",to:"/guidehub?tab=class-book",side:"right",sub:[]}],Nee="_topWrap_1vr4p_1",kee="_divider_1vr4p_19",Cee="_contentArea_1vr4p_53",Tee="_placeholder_1vr4p_65",Eee="_placeholderTitle_1vr4p_79",Aee="_placeholderText_1vr4p_93",$c={topWrap:Nee,divider:kee,contentArea:Cee,placeholder:Tee,placeholderTitle:Eee,placeholderText:Aee},Iee="/assets/logo_guidehub-c4zKGdF-.png";function ec({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const Ree=()=>n.jsx(ec,{title:"Game Features"});function Ns({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const Pee=()=>n.jsx(Ns,{title:"Progression"}),Lee=()=>n.jsx(Ns,{title:"Hellevator"}),Dee=()=>n.jsx(Ns,{title:"Legendary Dungeon"}),Mee=()=>n.jsx(Ns,{title:"Events"}),Fee="_card_1rxdx_21",Bee="_hoverLift_1rxdx_51",$ee="_title_1rxdx_63",Oee="_body_1rxdx_89",Vee="_iconStack_1rxdx_99",Su={card:Fee,hoverLift:Bee,title:$ee,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:Oee,iconStack:Vee};function Uee({title:t,padding:e="md",hover:s=!0,className:r="",children:i}){return n.jsxs("div",{className:[Su.card,Su[`pad-${e}`],s?Su.hoverLift:"",r].join(" "),children:[t?n.jsx("div",{className:Su.title,children:t}):null,n.jsx("div",{className:Su.body,children:i})]})}const zee=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],Hee="_grid_1amcc_3",Gee="_tileBtn_1amcc_45",Wee="_wrap_1amcc_87",qee="_headerBar_1amcc_99",Kee="_title_1amcc_117",Nu={grid:Hee,tileBtn:Gee,wrap:Wee,headerBar:qee,title:Kee};function Qee(){const[t,e]=ql(),s=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return n.jsxs("div",{className:Nu.wrap,children:[n.jsx("div",{className:Nu.headerBar,children:n.jsx("h2",{className:Nu.title,children:"Calculators"})}),n.jsx("div",{className:Nu.grid,children:zee.map(r=>n.jsx("button",{className:Nu.tileBtn,onClick:()=>s(r.slug),"aria-label":r.title,children:n.jsx(Uee,{title:r.title,padding:"md",hover:!0,children:n.jsx(n.Fragment,{children:" "})})},r.slug))})]})}const Xee=()=>n.jsx(Ns,{title:"Infographics (Dropdown inside page)"}),Yee=()=>n.jsx(Ns,{title:"Class book"}),Jee=()=>n.jsx(Ns,{title:"Dungeons"}),Zee=()=>n.jsx(ec,{title:"Fortress"}),ete=()=>n.jsx(ec,{title:"Fortress Calculator"}),tte="_wrap_1skhh_7",ste="_headerBar_1skhh_21",nte="_title_1skhh_39",rte="_meta_1skhh_55",ite="_description_1skhh_67",ate="_contentWrapper_1skhh_83",ote="_tableSection_1skhh_97",lte="_table_1skhh_97",cte="_infoBox_1skhh_151",dte="_sectionTitle_1skhh_165",ute="_divider_1skhh_181",pr={wrap:tte,headerBar:ste,title:nte,meta:rte,description:ite,contentWrapper:ate,tableSection:ote,table:lte,infoBox:cte,sectionTitle:dte,divider:ute};function hte(){return n.jsxs("div",{className:pr.wrap,children:[n.jsxs("div",{className:pr.headerBar,children:[n.jsx("h2",{className:pr.title,children:"Fortress Package skip order"}),n.jsx("span",{className:pr.meta,children:"Last updated: 21.02.2025"})]}),n.jsx("p",{className:pr.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),n.jsxs("div",{className:pr.contentWrapper,children:[n.jsxs("section",{className:pr.tableSection,children:[n.jsx("h3",{className:pr.sectionTitle,children:"Fortress Build Order"}),n.jsxs("table",{className:pr.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Building"}),n.jsx("th",{children:"Level"}),n.jsx("th",{children:"Gold Cost"}),n.jsx("th",{children:"Shroom Cost"}),n.jsx("th",{children:"Wood Cost"}),n.jsx("th",{children:"Stone Cost"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"35"}),n.jsx("td",{children:"12"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"150"}),n.jsx("td",{children:"50"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"138"}),n.jsx("td",{children:"46"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"440"}),n.jsx("td",{children:"140"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"406"}),n.jsx("td",{children:"129"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,100"}),n.jsx("td",{children:"333"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,015"}),n.jsx("td",{children:"308"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,500"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,308"}),n.jsx("td",{children:"738"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"60"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"6,000"}),n.jsx("td",{children:"2,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"5,538"}),n.jsx("td",{children:"1,849"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"7"}),n.jsx("td",{children:"70"}),n.jsx("td",{children:"48"}),n.jsx("td",{children:"13,417"}),n.jsx("td",{children:"4,433"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"80"}),n.jsx("td",{children:"78"}),n.jsx("td",{children:"27,200"}),n.jsx("td",{children:"9,280"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"720"}),n.jsx("td",{children:"240"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"1,408"}),n.jsx("td",{children:"448"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"2,640"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Gem Mine"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"17"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Treasury"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"13"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"92"}),n.jsx("td",{children:"74"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"248"}),n.jsx("td",{children:"200"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"21"}),n.jsx("td",{children:"500"}),n.jsx("td",{children:"320"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"22"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"90"}),n.jsx("td",{children:"16"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"9"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"264"}),n.jsx("td",{children:"45"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"660"}),n.jsx("td",{children:"107"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"14"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"82"}),n.jsx("td",{children:"55"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Total cost"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"577"}),n.jsx("td",{children:"363"}),n.jsx("td",{children:"99,881"}),n.jsx("td",{children:"33,218"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress Pack ressources"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"300"}),n.jsx("td",{children:"100,000"}),n.jsx("td",{children:"50,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Left over"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-577"}),n.jsx("td",{children:"-63"}),n.jsx("td",{children:"119"}),n.jsx("td",{children:"16,782"})]})]})]})]}),n.jsxs("section",{className:pr.infoBox,children:[n.jsx("h3",{className:pr.sectionTitle,children:"Important"}),n.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Archery Guild"}),n.jsx("li",{children:"Mage's Tower"}),n.jsx("li",{children:"Fortifications"})]}),n.jsx("div",{className:pr.divider}),n.jsx("h3",{className:pr.sectionTitle,children:"Total Costs"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Gold:"})," 577 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Shrooms:"})," 363 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Wood:"})," 99,881 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Stone:"})," 33,218 ",n.jsx("br",{})]}),n.jsx("h3",{className:pr.sectionTitle,children:"Remaining Resources"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Remaining Gold:"})," -577 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Wood:"})," 119 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const pte=()=>n.jsx(ec,{title:"Fortress attack duplication guide"}),mte=()=>n.jsx(ec,{title:"Underworld"}),fte=()=>n.jsx(ec,{title:"Underworld Calculator"}),gte=()=>n.jsx(ec,{title:"Underworld Pro Package skip order"}),xte=()=>n.jsx(Ns,{title:"Arena / AM"}),yte="_wrap_mm7x0_5",vte="_headerBar_mm7x0_19",bte="_title_mm7x0_37",_te="_meta_mm7x0_51",wte="_description_mm7x0_63",jte="_controls_mm7x0_79",Ste="_search_mm7x0_83",Nte="_tableWrap_mm7x0_119",kte="_table_mm7x0_119",Cte="_thead_mm7x0_143",Tte="_th_mm7x0_143",Ete="_td_mm7x0_167",Ate="_tierCell_mm7x0_179",Ite="_amountCell_mm7x0_181",Rte="_bonusCell_mm7x0_183",Pte="_tags_mm7x0_185",Lte="_tierBox_mm7x0_191",Dte="_tierIcon_mm7x0_193",Mte="_tierTexts_mm7x0_203",Fte="_tierName_mm7x0_205",Bte="_badge_mm7x0_211",$te="_badgeMax_mm7x0_231",Ote="_badgeAchiev_mm7x0_233",Vte="_badgeX2_mm7x0_235",Ute="_badgeX12_mm7x0_237",zte="_badgeX60_mm7x0_239",Hte="_iconHead_mm7x0_245",Gte="_achiev_mm7x0_261",Wte="_achievImg_mm7x0_263",qte="_dataRow_mm7x0_291",Kte="_tierCellHover_mm7x0_311",We={wrap:yte,headerBar:vte,title:bte,meta:_te,description:wte,controls:jte,search:Ste,tableWrap:Nte,table:kte,thead:Cte,th:Tte,td:Ete,tierCell:Ate,amountCell:Ite,bonusCell:Rte,tags:Pte,tierBox:Lte,tierIcon:Dte,tierTexts:Mte,tierName:Fte,badge:Bte,badgeMax:$te,badgeAchiev:Ote,badgeX2:Vte,badgeX12:Ute,badgeX60:zte,iconHead:Hte,achiev:Gte,achievImg:Wte,dataRow:qte,tierCellHover:Kte};function YE(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function Qte(t){const e=t.filter(Boolean).join(" ");return YE(e)}const Xte={fortressbanner:"DRIVE_FILE_ID_HIER",woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",fortressgemcalculatoricon:"DRIVE_FILE_ID_HIER",fortressdiagram1:"DRIVE_FILE_ID_HIER",fortressdiagram2:"DRIVE_FILE_ID_HIER",underworldbanner:"DRIVE_FILE_ID_HIER",underworldcalculatoricon:"DRIVE_FILE_ID_HIER",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",infographicsbanner:"DRIVE_FILE_ID_HIER",classbookcover:"DRIVE_FILE_ID_HIER",classbookback:"DRIVE_FILE_ID_HIER",dungeonsbanner:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450"};function Yte(t){var s;const e=Array.isArray(t)?Qte(t):YE(t!=null?t:"");return(s=Xte[e])!=null?s:null}function Vg(t,e=512){var a,l;const s=Yte(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=zl(s))!=null?a:null,i=r&&(l=Fr(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function Ml(t,e=512){return Vg(t,e).thumb}const xo={gold:"rune_gold",xp:"rune_xp",hp:"rune_hp",totalRes:"rune_totalres",singleRes:"rune_singleres",elem:"rune_elemental",item:"rune_itemquality",epics:"rune_epics"},MN={Capitalist:"achiev_capitalist","Stinking rich":"achiev_stinkingrich","Rune Master":"achiev_runemaster"};function yo({keyName:t,label:e}){const s=Vg(t,36);return n.jsxs("div",{className:We.iconHead,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:e,width:36,height:36,style:{borderRadius:6,border:"1px solid #2B4C73"}}):n.jsx("div",{style:{width:36,height:36,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(s.fallback||e).slice(0,1).toUpperCase()}),n.jsx("span",{children:e})]})}function Jte({name:t}){const e=Object.keys(MN).find(r=>t.toLowerCase().includes(r.toLowerCase())),s=Vg(e?MN[e]:"achiev_generic",16);return n.jsxs("div",{className:We.achiev,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:t,width:16,height:16,style:{borderRadius:3,border:"1px solid #2C4A73"}}):n.jsx("div",{className:We.achievImg}),n.jsx("span",{children:t})]})}const zf=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",singleRes:"14%",elemDmg:"11%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",totalRes:"5%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%",elemDmg:"12%"},{tier:"Sextillion",amount:"1 E21",gold:"11%",epics:"11%"},{tier:"Sextillion",amount:"10 E22",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"100 E23",gold:"12%",totalRes:"6%",epics:"12%"},{tier:"Septillion",amount:"1 E24",singleRes:"17%",elemDmg:"14%"},{tier:"Septillion",amount:"10 E25",gold:"13%",epics:"13%"},{tier:"Septillion",amount:"100 E26",totalRes:"7%",singleRes:"18%",elemDmg:"15%"},{tier:"Octillion",amount:"1 E27",gold:"14%",epics:"14%"},{tier:"Octillion",amount:"10 E28",singleRes:"19%",elemDmg:"16%"},{tier:"Octillion",amount:"100 E29",gold:"15%",totalRes:"8%",epics:"15%"},{tier:"Nonillion",amount:"1 E30",singleRes:"20%",elemDmg:"17%"},{tier:"Nonillion",amount:"10 E31",gold:"16%",epics:"16%"},{tier:"Nonillion",amount:"100 E32",totalRes:"9%",singleRes:"21%",elemDmg:"18%"},{tier:"Decillion",amount:"1 E33",gold:"17%",epics:"17%"},{tier:"Decillion",amount:"10 E34",singleRes:"22%",elemDmg:"19%",note:"x2 Boost"},{tier:"Decillion",amount:"100 E35",gold:"18%",totalRes:"10%",epics:"18%"},{tier:"Undecillion",amount:"1 E36",singleRes:"23%",elemDmg:"20%"},{tier:"Undecillion",amount:"10 E37",gold:"19%",epics:"19%"},{tier:"Undecillion",amount:"100 E38",totalRes:"11%",singleRes:"24%",elemDmg:"21%"},{tier:"Duodecillion",amount:"1 E39",gold:"20%",epics:"20%"},{tier:"Duodecillion",amount:"10 E40",singleRes:"25%",elemDmg:"22%"},{tier:"Duodecillion",amount:"100 E41",gold:"21%",totalRes:"12%",epics:"21%"},{tier:"Tredecillion",amount:"1 E42",singleRes:"26%",elemDmg:"23%"},{tier:"Tredecillion",amount:"10 E43",gold:"22%",epics:"22%"},{tier:"Tredecillion",amount:"100 E44",totalRes:"13%",singleRes:"27%",elemDmg:"24%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"23%",epics:"23%"},{tier:"Quattuordecillion",amount:"10 E46",singleRes:"28%",elemDmg:"25%"},{tier:"Quattuordecillion",amount:"100 E47",gold:"24%",totalRes:"14%",epics:"24%"},{tier:"Quindecillion",amount:"1 E48",singleRes:"29%",elemDmg:"26%"},{tier:"Quindecillion",amount:"10 E49",gold:"25%",epics:"25%"},{tier:"Quindecillion",amount:"100 E50",totalRes:"15%",singleRes:"30%",elemDmg:"27%"},{tier:"Sexdecillion",amount:"1 E51",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"10 E52",singleRes:"31%",elemDmg:"28%"},{tier:"Sexdecillion",amount:"100 E53",gold:"27%",totalRes:"16%",epics:"27%"},{tier:"Septendecillion",amount:"1 E54",singleRes:"32%",elemDmg:"29%"},{tier:"Septendecillion",amount:"10 E55",gold:"28%",epics:"28%"},{tier:"Septendecillion",amount:"100 E56",totalRes:"17%",singleRes:"33%",elemDmg:"30%"},{tier:"Octodecillion",amount:"1 E57",gold:"29%",epics:"29%"},{tier:"Octodecillion",amount:"10 E58",singleRes:"34%",elemDmg:"31%"},{tier:"Octodecillion",amount:"100 E59",gold:"30%",totalRes:"18%",epics:"30%"},{tier:"Novemdecillion",amount:"1 E60",singleRes:"35%",elemDmg:"32%"},{tier:"Novemdecillion",amount:"10 E61",gold:"31%",epics:"31%"},{tier:"Novemdecillion",amount:"100 E62",totalRes:"19%",singleRes:"36%",elemDmg:"33%"},{tier:"Vigintillion",amount:"1 E63",gold:"32%",epics:"32%"},{tier:"Vigintillion",amount:"10 E64",singleRes:"37%",elemDmg:"34%"},{tier:"Vigintillion",amount:"100 E65",gold:"33%",totalRes:"20%",epics:"33%"},{tier:"Unvigintillion",amount:"1 E66",singleRes:"38%",elemDmg:"35%"},{tier:"Unvigintillion",amount:"10 E67",gold:"34%",epics:"34%"},{tier:"Unvigintillion",amount:"100 E68",totalRes:"21%",singleRes:"39%",elemDmg:"36%"},{tier:"Duovigintillion",amount:"1 E69",gold:"35%",epics:"35%"},{tier:"Duovigintillion",amount:"10 E70",note:"x12 Boost"},{tier:"Duovigintillion",amount:"100 E71",totalRes:"22%",singleRes:"40%",elemDmg:"37%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"41%",elemDmg:"38%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"23%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",singleRes:"42%",elemDmg:"39%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",totalRes:"24%",singleRes:"43%",elemDmg:"40%"},{tier:"Quinvigintillion",amount:"1 E78",gold:"39%",epics:"39%"},{tier:"Quinvigintillion",amount:"10 E79",singleRes:"44%",elemDmg:"41%"},{tier:"Quinvigintillion",amount:"100 E80",gold:"40%",totalRes:"25%",epics:"40%"},{tier:"Sexvigintillion",amount:"1 E81",singleRes:"45%",elemDmg:"42%"},{tier:"Sexvigintillion",amount:"10 E82",gold:"41%",epics:"41%"},{tier:"Sexvigintillion",amount:"100 E83",totalRes:"26%",singleRes:"46%",elemDmg:"43%"},{tier:"Septenvigintillion",amount:"1 E84",gold:"42%",epics:"42%"},{tier:"Septenvigintillion",amount:"10 E85",singleRes:"47%",elemDmg:"44%"},{tier:"Septenvigintillion",amount:"100 E86",gold:"43%",totalRes:"27%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"48%",elemDmg:"45%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",totalRes:"28%",singleRes:"49%",elemDmg:"46%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",singleRes:"50%",elemDmg:"47%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",totalRes:"29%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"51%",elemDmg:"48%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",totalRes:"30%",singleRes:"52%",elemDmg:"49%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"53%",elemDmg:"50%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",totalRes:"31%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"54%",elemDmg:"51%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",epics:"50%"},{tier:"Duotrigintillion",amount:"100 E101",totalRes:"32%",singleRes:"55%",elemDmg:"52%"},{tier:"Trestrigintillion",amount:"1 E102",gold:"51%",epics:"51%"},{tier:"Trestrigintillion",amount:"10 E103",singleRes:"56%",elemDmg:"53%"},{tier:"Trestrigintillion",amount:"100 E104",gold:"52%",totalRes:"33%",epics:"52%"},{tier:"Quattuortrigintillion",amount:"1 E105",singleRes:"57%",elemDmg:"54%"},{tier:"Quattuortrigintillion",amount:"10 E106",gold:"53%",epics:"53%"},{tier:"Quattuortrigintillion",amount:"100 E107",totalRes:"34%",singleRes:"58%",elemDmg:"55%"},{tier:"Quintrigintillion",amount:"1 E108",gold:"54%",epics:"54%"},{tier:"Quintrigintillion",amount:"10 E109",singleRes:"59%",elemDmg:"56%"},{tier:"Quintrigintillion",amount:"100 E110",gold:"55%",totalRes:"35%",epics:"55%"},{tier:"Sextrigintillion",amount:"1 E111",singleRes:"60%",elemDmg:"57%",note:"x60 Boost"},{tier:"Sextrigintillion",amount:"10 E112",gold:"56%",epics:"56%"},{tier:"Sextrigintillion",amount:"100 E113",totalRes:"36%",singleRes:"61%",elemDmg:"58%"},{tier:"Septentrigintillion",amount:"1 E114",gold:"57%",epics:"57%"},{tier:"Septentrigintillion",amount:"10 E115",singleRes:"62%",elemDmg:"59%"},{tier:"Septentrigintillion",amount:"100 E116",gold:"58%",totalRes:"37%",epics:"58%"},{tier:"Octotrigintillion",amount:"1 E117",singleRes:"63%",elemDmg:"60%"},{tier:"Octotrigintillion",amount:"10 E118",gold:"59%",epics:"59%"},{tier:"Octotrigintillion",amount:"100 E119",gold:"60%",totalRes:"38%",epics:"60%"},{tier:"Noventrigintillion",amount:"1 E120",singleRes:"64%",elemDmg:"61%"},{tier:"Noventrigintillion",amount:"10 E121",gold:"61%",epics:"61%"},{tier:"Noventrigintillion",amount:"100 E122",gold:"62%",totalRes:"39%",epics:"62%"},{tier:"Quadragintillion",amount:"1 E123",singleRes:"65%",elemDmg:"62%"},{tier:"Quadragintillion",amount:"10 E124",gold:"63%",epics:"63%"},{tier:"Quadragintillion",amount:"100 E125",gold:"64%",totalRes:"40%",epics:"64%"},{tier:"Unquadragintillion",amount:"1 E126",singleRes:"66%",elemDmg:"63%"},{tier:"Unquadragintillion",amount:"10 E127",gold:"65%",epics:"65%"},{tier:"Unquadragintillion",amount:"100 E128",gold:"66%",totalRes:"41%",epics:"66%"},{tier:"Duoquadragintillion",amount:"1 E129",singleRes:"67%",elemDmg:"64%"},{tier:"Duoquadragintillion",amount:"10 E130",gold:"67%",epics:"67%"},{tier:"Duoquadragintillion",amount:"100 E131",gold:"68%",totalRes:"42%",epics:"68%"},{tier:"Trequadragintillion",amount:"1 E132",singleRes:"68%",elemDmg:"65%"},{tier:"Trequadragintillion",amount:"10 E133",gold:"69%",epics:"69%"},{tier:"Trequadragintillion",amount:"100 E134",gold:"70%",totalRes:"43%",epics:"70%"},{tier:"Quattuorquadragintillion",amount:"1 E135",singleRes:"69%",elemDmg:"66%"},{tier:"Quattuorquadragintillion",amount:"10 E136",gold:"71%",epics:"71%"},{tier:"Quattuorquadragintillion",amount:"100 E137",gold:"72%",totalRes:"44%",epics:"72%"},{tier:"Quinquadragintillion",amount:"1 E138",singleRes:"70%",elemDmg:"67%"},{tier:"Quinquadragintillion",amount:"10 E139",gold:"73%",epics:"73%"},{tier:"Quinquadragintillion",amount:"100 E140",gold:"74%",totalRes:"45%",epics:"74%"},{tier:"Sexquadragintillion",amount:"1 E141",singleRes:"71%",elemDmg:"68%"},{tier:"Sexquadragintillion",amount:"10 E142",gold:"75%",epics:"75%"},{tier:"Sexquadragintillion",amount:"100 E143",gold:"76%",totalRes:"46%",epics:"76%"},{tier:"Septenquadragintillion",amount:"1 E144",singleRes:"72%",elemDmg:"69%"},{tier:"Septenquadragintillion",amount:"10 E145",gold:"77%",epics:"77%"},{tier:"Septenquadragintillion",amount:"100 E146",gold:"78%",totalRes:"47%",epics:"78%"},{tier:"Octoquadragintillion",amount:"1 E147",singleRes:"73%",elemDmg:"70%"},{tier:"Octoquadragintillion",amount:"10 E148",gold:"79%",epics:"79%"},{tier:"Octoquadragintillion",amount:"100 E149",gold:"80%",totalRes:"48%",epics:"80%"},{tier:"Novenquadragintillion",amount:"1 E150",singleRes:"74%",elemDmg:"71%"},{tier:"Novenquadragintillion",amount:"10 E151",gold:"81%",epics:"81%"},{tier:"Novenquadragintillion",amount:"100 E152",gold:"82%",totalRes:"49%",epics:"82%"},{tier:"Quinquagintillion",amount:"1 E153",singleRes:"75%",elemDmg:"72%"},{tier:"Quinquagintillion",amount:"10 E154",gold:"83%",epics:"83%"},{tier:"Quinquagintillion",amount:"100 E155",gold:"84%",totalRes:"50%",epics:"84%"}];function hv(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function Zte(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function ese(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}const FN={Quintillion:"Capitalist Achievement",Septillion:"Stinking rich Achievement",Decillion:"Rune Master"},tse="Komplette bersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Achievements und Breakpoints sind markiert.";function sse(t){const e=t.trim().toLowerCase();return e?zf.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):zf}function nse(){const[t,e]=T.useState(""),[s,r]=T.useState(null),i=sse(t),a=T.useMemo(()=>Math.max(...zf.map(d=>hv(d.amount))),[]),l=T.useMemo(()=>{const d=new Map;for(const h of i)d.has(h.tier)||d.set(h.tier,[]),d.get(h.tier).push(h);const u=Array.from(new Set(zf.map(h=>h.tier)));return Array.from(d.entries()).sort((h,p)=>u.indexOf(h[0])-u.indexOf(p[0]))},[i]);return n.jsxs("div",{className:We.wrap,children:[n.jsxs("div",{className:We.headerBar,children:[n.jsx("h2",{className:We.title,children:"Arena Manager  Rune bonuses"}),n.jsx("span",{className:We.meta,children:"last updated: 15.01.2025"})]}),n.jsx("p",{className:We.description,children:tse}),n.jsx("div",{className:We.controls,children:n.jsx("input",{className:We.search,placeholder:"Suche (z. B. thousand, E34, x60)",value:t,onChange:d=>e(d.target.value)})}),n.jsx("div",{className:We.tableWrap,children:n.jsxs("table",{className:We.table,children:[n.jsx("thead",{className:We.thead,children:n.jsxs("tr",{className:We.headRow,children:[n.jsx("th",{className:`${We.th} ${We.tierCell}`,children:"Tier"}),n.jsx("th",{className:`${We.th} ${We.amountCell}`,children:"Amount"}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.gold,label:"Gold Bonus"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.xp,label:"XP Bonus"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.hp,label:"HP Bonus"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.totalRes,label:"Total Resistance"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.singleRes,label:"Single Resistance"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.elem,label:"Elemental Damage"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.item,label:"Improved Item Quality"})}),n.jsx("th",{className:We.th,children:n.jsx(yo,{keyName:xo.epics,label:"Chances of Epics"})}),n.jsx("th",{className:We.th,children:"Tags"})]})}),n.jsx("tbody",{children:l.map(([d,u])=>{const h=Math.max(...u.map(p=>hv(p.amount)));return u.map((p,g)=>{var S,k,E,L,M,N,y,_;const v=Math.abs(hv(p.amount)-a)<1e-6,b=ese(p.note);return n.jsxs("tr",{className:We.dataRow,onMouseEnter:()=>r(d),onMouseLeave:()=>r(null),children:[g===0&&n.jsx("td",{className:`${We.td} ${We.tierCell} ${Math.abs(h-a)<1e-6?We.tierMax:""} ${s===d?We.tierCellHover:""}`,rowSpan:u.length,children:n.jsxs("div",{className:We.tierBox,children:[n.jsx("div",{className:We.tierIcon,children:d.slice(0,1).toUpperCase()}),n.jsxs("div",{className:We.tierTexts,children:[n.jsx("div",{className:We.tierName,children:d}),FN[d]&&n.jsx(Jte,{name:FN[d]})]})]})}),n.jsx("td",{className:`${We.td} ${We.amountCell}`,children:p.amount}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(S=p.gold)!=null?S:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(k=p.xp)!=null?k:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(E=p.hp)!=null?E:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(L=p.totalRes)!=null?L:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(M=p.singleRes)!=null?M:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(N=p.elemDmg)!=null?N:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(y=p.itemQuality)!=null?y:""}),n.jsx("td",{className:`${We.td} ${We.bonusCell}`,children:(_=p.epics)!=null?_:""}),n.jsxs("td",{className:`${We.td} ${We.tags}`,children:[v&&n.jsx("span",{className:`${We.badge} ${We.badgeMax}`,children:"MAX"}),Zte(p.note)&&n.jsx("span",{className:`${We.badge} ${We.badgeAchiev}`,children:"Achievement"}),b==="x2"&&n.jsx("span",{className:`${We.badge} ${We.badgeX2}`,children:"x2"}),b==="x12"&&n.jsx("span",{className:`${We.badge} ${We.badgeX12}`,children:"x12"}),b==="x60"&&n.jsx("span",{className:`${We.badge} ${We.badgeX60}`,children:"x60"}),b==="x8"&&n.jsx("span",{className:We.badge,children:"x8"})]})]},`${d}-${g}`)})})})]})})]})}const rse="_wrap_zrza7_11",ise="_headerBar_zrza7_15",ase="_title_zrza7_31",ose="_meta_zrza7_33",lse="_centerCol_zrza7_37",cse="_text_zrza7_53",dse="_imageBox_zrza7_55",use="_imageFallback_zrza7_57",hse="_credit_zrza7_59",fa={wrap:rse,headerBar:ise,title:ase,meta:ose,centerCol:lse,text:cse,imageBox:dse,imageFallback:use,credit:hse};function pse(){const t=Vg("ambuildorder"),e=T.useMemo(()=>t.id?`https://drive.google.com/thumbnail?id=${t.id}&sz=w1024`:null,[t.id]),s=T.useMemo(()=>t.id?`https://drive.google.com/uc?export=view&id=${t.id}`:null,[t.id]),r=t.thumb||null,i=e||s||r;return n.jsxs("div",{className:fa.wrap,children:[n.jsxs("div",{className:fa.headerBar,children:[n.jsx("h2",{className:fa.title,children:"Arena Manager  Build Order"}),n.jsx("span",{className:fa.meta,children:"Last updated: 30.11.2024"})]}),n.jsxs("div",{className:fa.centerCol,children:[n.jsxs("div",{className:fa.text,children:[n.jsx("p",{children:"Build your Attractions according to the picture below for maximum efficiency."}),n.jsxs("p",{children:["Upgrading to full Platinum on all Attractions will cost you ",n.jsx("strong",{children:"4300 Mushrooms"}),"."]})]}),i?n.jsx("div",{className:fa.imageBox,children:n.jsx("img",{src:i,alt:"Arena Manager build order",loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):n.jsx("div",{className:fa.imageFallback,children:""}),n.jsxs("p",{className:fa.credit,children:["Credit to ",n.jsx("em",{children:"SF Tavern Discord"}),"."]})]})]})}const mse=()=>n.jsx(Ns,{title:"Hellevator Guide"}),fse=()=>n.jsx(Ns,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),gse=()=>n.jsx(Ns,{title:"Event List"}),xse=()=>n.jsx(Ns,{title:"Event Cycle"}),yse="_foCalc_18a5w_3",vse="_panel_18a5w_211",bse="_panelHead_18a5w_227",_se="_panelTitle_18a5w_241",wse="_controls_18a5w_243",jse="_ctrlLabel_18a5w_245",Sse="_ctrlSelect_18a5w_249",Nse="_tableWrap_18a5w_291",kse="_table_18a5w_291",Cse="_th_18a5w_305",Tse="_td_18a5w_321",Ese="_row_18a5w_333",Ase="_note_18a5w_335",Es={foCalc:yse,panel:vse,panelHead:bse,panelTitle:_se,controls:wse,ctrlLabel:jse,ctrlSelect:Sse,tableWrap:Nse,table:kse,th:Cse,td:Tse,row:Ese,note:Ase},JE={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},$s=(t,e=0)=>t*3600+e*60,re=[$s(0,15),$s(0,31),$s(1,6),$s(2,20),$s(5,0),$s(8,0),$s(11,25),$s(18,27),$s(40,0),$s(87,16),$s(190,46),$s(320,0),$s(480,0),$s(615,33),$s(800,0)],Ht=[$s(1054,17),$s(1122,51),$s(1245,42),$s(1343,20),$s(1440,0)],Ise={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:re[0]},{level:2,wood:150,stone:50,gold:20,timeSec:re[1]},{level:3,wood:440,stone:140,gold:30,timeSec:re[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:re[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:re[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:re[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:re[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:re[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:re[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:re[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:re[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:re[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:re[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:re[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:re[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:Ht[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:Ht[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:Ht[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:Ht[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:Ht[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:re[0]},{level:2,wood:138,stone:46,gold:10,timeSec:re[1]},{level:3,wood:406,stone:129,gold:15,timeSec:re[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:re[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:re[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:re[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:re[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:re[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:re[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:re[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:re[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:re[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:re[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:re[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:re[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:re[0]},{level:2,wood:28,stone:37,gold:14,timeSec:re[1]},{level:3,wood:81,stone:103,gold:21,timeSec:re[2]},{level:4,wood:203,stone:246,gold:28,timeSec:re[3]},{level:5,wood:462,stone:591,gold:35,timeSec:re[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:re[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:re[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:re[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:re[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:re[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:re[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:re[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:re[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:re[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:re[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:Ht[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:Ht[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:Ht[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:Ht[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:Ht[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:re[0]},{level:2,wood:160,stone:53,gold:50,timeSec:re[1]},{level:3,wood:469,stone:149,gold:75,timeSec:re[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:re[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:re[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:re[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:re[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:re[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:re[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:re[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:re[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:re[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:re[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:re[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:re[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:re[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:re[0]},{level:2,wood:200,stone:67,gold:30,timeSec:re[1]},{level:3,wood:587,stone:187,gold:45,timeSec:re[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:re[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:re[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:re[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:re[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:re[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:re[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:re[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:re[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:re[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:re[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:re[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:re[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:Ht[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:Ht[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:Ht[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:Ht[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:Ht[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:$s(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:re[0]},{level:2,wood:30,stone:20,gold:4,timeSec:re[1]},{level:3,wood:88,stone:56,gold:6,timeSec:re[2]},{level:4,wood:220,stone:133,gold:8,timeSec:re[3]},{level:5,wood:500,stone:320,gold:10,timeSec:re[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:re[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:re[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:re[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:re[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:re[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:re[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:re[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:re[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:re[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:re[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:Ht[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:Ht[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:Ht[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:Ht[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:Ht[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:re[0]},{level:2,wood:90,stone:16,gold:6,timeSec:re[1]},{level:3,wood:264,stone:45,gold:9,timeSec:re[2]},{level:4,wood:660,stone:107,gold:12,timeSec:re[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:re[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:re[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:re[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:re[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:re[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:re[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:re[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:re[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:re[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:re[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:re[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:Ht[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:Ht[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:Ht[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:Ht[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:Ht[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:re[0]},{level:2,wood:82,stone:55,gold:8,timeSec:re[1]},{level:3,wood:240,stone:153,gold:12,timeSec:re[2]},{level:4,wood:600,stone:364,gold:16,timeSec:re[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:re[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:re[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:re[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:re[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:re[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:re[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:re[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:re[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:re[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:re[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:re[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:re[0]},{level:2,wood:100,stone:33,gold:8,timeSec:re[1]},{level:3,wood:293,stone:93,gold:12,timeSec:re[2]},{level:4,wood:733,stone:222,gold:16,timeSec:re[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:re[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:re[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:re[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:re[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:re[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:re[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:re[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:re[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:re[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:re[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:re[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:Ht[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:Ht[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:Ht[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:Ht[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:Ht[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:re[0]},{level:2,wood:240,stone:61,gold:12,timeSec:re[1]},{level:3,wood:675,stone:205,gold:18,timeSec:re[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:re[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:re[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:re[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:re[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:re[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:re[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:re[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:re[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:re[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:re[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:re[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:re[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:re[0]},{level:2,wood:164,stone:27,gold:10,timeSec:re[1]},{level:3,wood:480,stone:76,gold:15,timeSec:re[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:re[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:re[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:re[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:re[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:re[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:re[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:re[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:re[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:re[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:re[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:re[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:re[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:re[0]},{level:2,wood:120,stone:53,gold:30,timeSec:re[1]},{level:3,wood:352,stone:149,gold:45,timeSec:re[2]},{level:4,wood:880,stone:356,gold:60,timeSec:re[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:re[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:re[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:re[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:re[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:re[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:re[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:re[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:re[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:re[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:re[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:re[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:Ht[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:Ht[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:Ht[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:Ht[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:Ht[4]}]}},Rse=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],Pse="fortress",Lse={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function Dse(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function BN(t){const e=Math.max(0,Math.round(t)),s=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=l=>l.toString().padStart(2,"0");return`${a(s)}:${a(r)}:${a(i)}`}const Mse=()=>{const[t,e]=T.useState(Pse),[s,r]=T.useState(1),i=T.useMemo(()=>{var p;const d=Lse[t],u=JE[d],h=(p=u==null?void 0:u.id)!=null?p:u;return zl.gifProxy(h)||zl.gif(h)||""},[t]),a=T.useMemo(()=>{var d,u;return(u=(d=Ise[t])==null?void 0:d.costs)!=null?u:[]},[t]),l=T.useMemo(()=>Dse(s),[s]);return n.jsxs("div",{className:`${Es.foCalc}`,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:Rse.map(d=>n.jsx("option",{value:d.key,children:d.label},d.key))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:Es.panel,children:[n.jsxs("div",{className:Es.panelHead,children:[n.jsxs("div",{className:Es.panelTitle,children:["Fortress  ",t]}),n.jsxs("div",{className:Es.controls,children:[n.jsx("span",{className:Es.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{className:Es.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:16},(d,u)=>u).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:Es.tableWrap,children:n.jsxs("table",{className:Es.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:Es.th,children:"Level"}),n.jsx("th",{className:Es.th,children:"Wood"}),n.jsx("th",{className:Es.th,children:"Stone"}),n.jsx("th",{className:Es.th,children:"Build Time"}),n.jsx("th",{className:Es.th,children:"Build Time (L2)"}),n.jsx("th",{className:Es.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:a.map(d=>{var g,v,b,S,k,E,L;const u=(g=d.timeSec)!=null?g:0,h=Math.round(u*(1-l)),p=Math.ceil(Math.ceil(h/60)/10);return n.jsxs("tr",{className:Es.row,children:[n.jsx("td",{className:Es.td,children:d.level}),n.jsx("td",{className:Es.td,children:(S=(b=(v=d.wood)==null?void 0:v.toLocaleString)==null?void 0:b.call(v))!=null?S:d.wood}),n.jsx("td",{className:Es.td,children:(L=(E=(k=d.stone)==null?void 0:k.toLocaleString)==null?void 0:E.call(k))!=null?L:d.stone}),n.jsx("td",{className:Es.td,children:BN(u)}),n.jsx("td",{className:Es.td,children:BN(h)}),n.jsx("td",{className:Es.td,children:p.toLocaleString()})]},d.level)})})]})}),n.jsx("div",{className:Es.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},Fse="_uwCalc_64lws_3",Bse="_panel_64lws_211",$se="_panelHead_64lws_227",Ose="_panelTitle_64lws_241",Vse="_controls_64lws_243",Use="_ctrlLabel_64lws_245",zse="_ctrlSelect_64lws_251",Hse="_tableWrap_64lws_295",Gse="_table_64lws_295",Wse="_th_64lws_309",qse="_td_64lws_325",Kse="_row_64lws_337",Qse="_note_64lws_339",vs={uwCalc:Fse,panel:Bse,panelHead:$se,panelTitle:Ose,controls:Vse,ctrlLabel:Use,ctrlSelect:zse,tableWrap:Hse,table:Gse,th:Wse,td:qse,row:Kse,note:Qse},Xse={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},Yse={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function Jse(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function Zse(t){const e=Math.max(0,t),s=Math.round(e),r=Math.floor(s/3600),i=Math.floor(s%3600/60),a=s%60;return{h:r,m:i,s:a}}function $N(t){const{h:e,m:s,s:r}=Zse(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(s)}:${i(r)}`}function ene(t,e){var i,a;const s=Jse(e);return((a=(i=Yse[t])==null?void 0:i.costs)!=null?a:[]).map(l=>{const d=l.timeSec*(1-s),u=Math.ceil(Math.ceil(d/60)/10);return{...l,timeAdjSec:d,skipMushroomsAdj:u}})}const tne=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],sne=()=>{const[t,e]=T.useState("hearthofdarkngif"),[s,r]=T.useState(1),i=T.useMemo(()=>{var h;const d=JE[t],u=(h=d==null?void 0:d.id)!=null?h:d;return zl.gifProxy(u)||zl.gif(u)||""},[t]),a=T.useMemo(()=>{var d;return(d=Xse[t])!=null?d:"hearthofdarkn"},[t]),l=T.useMemo(()=>ene(a,s),[a,s]);return n.jsxs("div",{className:vs.uwCalc,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:tne.map(d=>n.jsx("option",{value:d,children:d.replace(/gif$/i,"")},d))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:vs.panel,children:[n.jsxs("div",{className:vs.panelHead,children:[n.jsxs("div",{className:vs.panelTitle,children:["Underworld  ",a]}),n.jsxs("div",{className:vs.controls,children:[n.jsx("label",{htmlFor:"uw-l2",className:vs.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{id:"uw-l2",className:vs.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:15},(d,u)=>u+1).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:vs.tableWrap,children:n.jsxs("table",{className:vs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:vs.th,children:"Level"}),n.jsx("th",{className:vs.th,children:"Soul"}),n.jsx("th",{className:vs.th,children:"Gold"}),n.jsx("th",{className:vs.th,children:"Build Time"}),n.jsx("th",{className:vs.th,children:"Build Time (L2)"}),n.jsx("th",{className:vs.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:l.length===0?n.jsx("tr",{className:vs.row,children:n.jsx("td",{className:vs.td,colSpan:6,children:"No data for this building yet."})}):l.map(d=>n.jsxs("tr",{className:vs.row,children:[n.jsx("td",{className:vs.td,children:d.level}),n.jsx("td",{className:vs.td,children:d.soul}),n.jsx("td",{className:vs.td,children:d.gold}),n.jsx("td",{className:vs.td,children:$N(d.timeSec)}),n.jsx("td",{className:vs.td,children:$N(d.timeAdjSec)}),n.jsx("td",{className:vs.td,children:d.skipMushroomsAdj})]},d.level))})]})}),n.jsx("p",{className:vs.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},nne=()=>n.jsx(Ns,{title:"Max Item Stats Calculator"}),rne="_wrap_mnr0g_1",ine="_card_mnr0g_13",ane="_title_mnr0g_33",one="_form_mnr0g_45",lne="_field_mnr0g_57",cne="_input_mnr0g_71",dne="_gemsRow_mnr0g_87",une="_gemBox_mnr0g_101",hne="_disabled_mnr0g_127",pne="_gemImg_mnr0g_135",mne="_gemFallback_mnr0g_149",fne="_normalGem_mnr0g_165",gne="_blackGem_mnr0g_173",xne="_legendaryGem_mnr0g_181",yne="_gemLabel_mnr0g_189",vne="_gemValue_mnr0g_199",bne="_hint_mnr0g_211",Yt={wrap:rne,card:ine,title:ane,form:one,field:lne,input:cne,gemsRow:dne,gemBox:une,disabled:hne,gemImg:pne,gemFallback:mne,normalGem:fne,blackGem:gne,legendaryGem:xne,gemLabel:yne,gemValue:vne,hint:bne},_ne={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},wne=.25,Hf=t=>Math.round(Number.isFinite(t)?t:0);function jne(t){const e=Number(t.charLevel),s=Number(t.mineLevel),r=Number(t.guildHoK);if(s<25){const E=e*wne*(1+(s-1)*.25)+r/3;return Hf(E)}const{A:i,B:a,C:l,D:d,E:u,F:h,G:p,H:g,I:v,J:b}=_ne,k=i+a*e+l/s+d*e**2+u/s**2+h*e/s+p*e**3+g/s**3+v*e/s**2+b*e**2/s+r/3;return Hf(k)}function Sne(t){return Hf(t*(2/3))}function Nne(t){return Hf(t)}const pv={char:1e3,mine:100,hok:1e3},ZE=({initialState:t,onStateChange:e})=>{var k,E,L;const[s,r]=T.useState((k=t==null?void 0:t.charLevel)!=null?k:""),[i,a]=T.useState((E=t==null?void 0:t.mineLevel)!=null?E:""),[l,d]=T.useState((L=t==null?void 0:t.guildHoKLevel)!=null?L:""),u=(M,N,y)=>{e&&(typeof M!="number"||typeof N!="number"||typeof y!="number"||e({charLevel:M,mineLevel:N,guildHoKLevel:y}))},h=T.useMemo(()=>s===""||i===""||l===""?null:jne({charLevel:Number(s),mineLevel:Number(i),guildHoK:Number(l)}),[s,i,l]),p=T.useMemo(()=>h==null?null:Sne(h),[h]),g=T.useMemo(()=>h==null?null:Nne(h),[h]),v=Ml("luckbig"),b=Ml("blackbig"),S=Ml("legendarybig");return n.jsx("div",{className:Yt.wrap,children:n.jsxs("div",{className:Yt.card,children:[n.jsx("h2",{className:Yt.title,children:"Gem Calculator"}),n.jsxs("div",{className:Yt.form,children:[n.jsxs("label",{className:Yt.field,children:[n.jsx("span",{children:"Char Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Yt.input,placeholder:"e.g., 360",value:s,onChange:M=>{const N=M.currentTarget.value;if(N===""){r("");return}const y=Number(N),_=Number.isFinite(y)?y:"";r(_),u(_,i,l)},max:pv.char})]}),n.jsxs("label",{className:Yt.field,children:[n.jsx("span",{children:"Mine Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Yt.input,placeholder:"e.g., 10",value:i,onChange:M=>{const N=M.currentTarget.value;if(N===""){a("");return}const y=Number(N),_=Number.isFinite(y)?y:"";a(_),u(s,_,l)},max:pv.mine})]}),n.jsxs("label",{className:Yt.field,children:[n.jsx("span",{children:"Guild HoK"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Yt.input,placeholder:"e.g., 840",value:l,onChange:M=>{const N=M.currentTarget.value;if(N===""){d("");return}const y=Number(N),_=Number.isFinite(y)?y:"";d(_),u(s,i,_)},max:pv.hok})]})]}),n.jsxs("div",{className:Yt.gemsRow,children:[n.jsxs("div",{className:`${Yt.gemBox} ${h==null?Yt.disabled:""}`,children:[v?n.jsx("img",{className:Yt.gemImg,src:v,alt:"Normal Gem"}):n.jsx("div",{className:`${Yt.gemFallback} ${Yt.normalGem}`}),n.jsx("div",{className:Yt.gemLabel,children:"Normal"}),n.jsx("div",{className:Yt.gemValue,children:h!=null?h:"-"})]}),n.jsxs("div",{className:`${Yt.gemBox} ${p==null?Yt.disabled:""}`,children:[b?n.jsx("img",{className:Yt.gemImg,src:b,alt:"Black Gem"}):n.jsx("div",{className:`${Yt.gemFallback} ${Yt.blackGem}`}),n.jsx("div",{className:Yt.gemLabel,children:"Black"}),n.jsx("div",{className:Yt.gemValue,children:p!=null?p:"-"})]}),n.jsxs("div",{className:`${Yt.gemBox} ${g==null?Yt.disabled:""}`,children:[S?n.jsx("img",{className:Yt.gemImg,src:S,alt:"Legendary Gem"}):n.jsx("div",{className:`${Yt.gemFallback} ${Yt.legendaryGem}`}),n.jsx("div",{className:Yt.gemLabel,children:"Legendary"}),n.jsx("div",{className:Yt.gemValue,children:g!=null?g:"-"})]})]}),n.jsxs("p",{className:Yt.hint,children:["The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find. Actual results may vary slightly."]})]})})},kne="_container_19zdf_1",Cne="_headerBar_19zdf_13",Tne="_title_19zdf_31",Ene="_meta_19zdf_47",Ane="_description_19zdf_59",ku={container:kne,headerBar:Cne,title:Tne,meta:Ene,description:Ane},eA=({title:t,meta:e,description:s})=>n.jsxs("header",{className:ku.container,children:[n.jsxs("div",{className:ku.headerBar,children:[n.jsx("h2",{className:ku.title,children:t}),e&&n.jsx("span",{className:ku.meta,children:e})]}),s&&n.jsx("p",{className:ku.description,children:s})]}),Ine=()=>n.jsxs(n.Fragment,{children:[n.jsx(eA,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:n.jsxs(n.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find."]})}),n.jsx(ZE,{})]}),Rne="_wrapper_67xyv_1",Pne="_panel_67xyv_11",Lne="_header_67xyv_27",Dne="_title_67xyv_41",Mne="_resetBtn_67xyv_53",Fne="_table_67xyv_73",Bne="_row_67xyv_99",$ne="_name_67xyv_115",One="_selectCell_67xyv_125",Vne="_sumCell_67xyv_143",Une="_footer_67xyv_155",zne="_footerLine_67xyv_175",Hne="_note_67xyv_187",Os={wrapper:Rne,panel:Pne,header:Lne,title:Dne,resetBtn:Mne,table:Fne,row:Bne,name:$ne,selectCell:One,sumCell:Vne,footer:Une,footerLine:zne,note:Hne};function eh(t,e,s){var l;if(!Array.isArray(t)||e<=0||s<=0)return 0;const r=Math.min(e,s),i=Math.max(e,s);let a=0;for(let d=r;d<=i;d++)a+=(l=t[d])!=null?l:0;return a}function Gne(t){const e=[0];for(let s=1;s<=t;s++)e.push(s);return e}function kt(t,e){const s=[0,...t.map(r=>Number(r)||0)];if(e&&s.length<e+1)for(;s.length<e+1;)s.push(0);return s}const Wne=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:kt([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:kt([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:kt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:kt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:kt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"light_19_easteros",name:"19 Easteros",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:kt([0,0,0,9e8,0,0,0,0,0,0],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:kt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:kt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:kt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:kt([0,0,0,0,0,0,0,0,0,0],10)}],qne=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:kt([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:kt([165631756,175491135,186285917,197984244,210662291,224327317,239040847,254786681,271632931,301959487],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:kt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:kt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:kt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"shadow_19_easteros",name:"Easteros",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:kt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:kt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:kt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:kt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:kt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:kt([0,0,0,0,0,0,0,0,0,0],10)}],ON=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],Kne=(()=>{const t=[0,...ON],e=1e3-ON.length;for(let s=0;s<e;s++)t.push(3e7);return t})(),Qne=kt([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),Xne=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),wa={light:Wne.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:qne.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:Kne,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:Qne,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:Xne,specialType:"sandstorm"}]},Gf=t=>t.toLocaleString("en-US");function VN(){const t={},e={},s={};return wa.light.forEach(r=>t[r.key]={from:0,to:0}),wa.shadow.forEach(r=>e[r.key]={from:0,to:0}),wa.special.forEach(r=>{r.specialType==="twister"?s[r.key]={from:486,to:1e3}:r.specialType==="cloi"?s[r.key]={from:2,to:11}:s[r.key]={from:0,to:0}}),{light:t,shadow:e,special:s}}function tA({row:t,range:e,onChange:s}){var d,u;const r=T.useMemo(()=>Gne(t.maxLevel),[t.maxLevel]),i=(d=e.from)!=null?d:0,a=(u=e.to)!=null?u:0,l=T.useMemo(()=>i===0||a===0?0:eh(t.levels,i,a),[t.levels,i,a]);return n.jsxs("tr",{className:Os.row,children:[n.jsx("td",{className:Os.name,children:t.name}),n.jsx("td",{className:Os.selectCell,children:n.jsx("select",{value:i,onChange:h=>s({from:Number(h.target.value),to:a}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsx("td",{className:Os.selectCell,children:n.jsx("select",{value:a,onChange:h=>s({from:i,to:Number(h.target.value)}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsxs("td",{className:Os.sumCell,children:[Gf(l)," XP"]})]})}function UN({title:t,rows:e,ranges:s,setRanges:r}){const i=T.useMemo(()=>e.reduce((a,l)=>{const d=s[l.key]||{from:0,to:0};return a+eh(l.levels,d.from,d.to)},0),[e,s]);return n.jsxs("div",{className:Os.panel,children:[n.jsx("div",{className:Os.header,children:n.jsx("div",{className:Os.title,children:t})}),n.jsxs("table",{className:Os.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum XP"})]})}),n.jsx("tbody",{children:e.map(a=>{var l;return n.jsx(tA,{row:a,range:(l=s[a.key])!=null?l:{from:0,to:0},onChange:d=>r(a.key,d)},a.key)})})]}),n.jsx("div",{className:Os.footer,children:n.jsxs("div",{className:Os.footerLine,children:[n.jsxs("span",{children:["Sum Total ",t]}),n.jsxs("span",{children:[Gf(i)," XP"]})]})})]})}function sA({initialState:t,onStateChange:e}){var M,N,y;const s=T.useMemo(()=>VN(),[]),[r,i]=T.useState((M=t==null?void 0:t.light)!=null?M:s.light),[a,l]=T.useState((N=t==null?void 0:t.shadow)!=null?N:s.shadow),[d,u]=T.useState((y=t==null?void 0:t.special)!=null?y:s.special),h=(_,D,C)=>{e&&e({light:_,shadow:D,special:C})},p=(_,D)=>{i(C=>{const w={...C,[_]:D};return h(w,a,d),w})},g=(_,D)=>{l(C=>{const w={...C,[_]:D};return h(r,w,d),w})},v=(_,D)=>{u(C=>{const w={...C,[_]:D};return h(r,a,w),w})};T.useEffect(()=>{var _,D,C;if(t){i((_=t.light)!=null?_:s.light),l((D=t.shadow)!=null?D:s.shadow),u((C=t.special)!=null?C:s.special);return}i(s.light),l(s.shadow),u(s.special)},[t,s]);const b=T.useMemo(()=>wa.light.reduce((_,D)=>{const C=r[D.key];return _+(C?eh(D.levels,C.from,C.to):0)},0),[r]),S=T.useMemo(()=>wa.shadow.reduce((_,D)=>{const C=a[D.key];return _+(C?eh(D.levels,C.from,C.to):0)},0),[a]),k=T.useMemo(()=>wa.special.reduce((_,D)=>{const C=d[D.key];return _+(C?eh(D.levels,C.from,C.to):0)},0),[d]),E=b+S+k,L=()=>{const _=VN();i(_.light),l(_.shadow),u(_.special),h(_.light,_.shadow,_.special)};return n.jsxs("div",{className:Os.wrapper,children:[n.jsx(UN,{title:"Light World",rows:wa.light,ranges:r,setRanges:p}),n.jsx(UN,{title:"Shadow World",rows:wa.shadow,ranges:a,setRanges:g}),n.jsxs("div",{className:Os.panel,children:[n.jsxs("div",{className:Os.header,children:[n.jsx("div",{className:Os.title,children:"Special Dungeons"}),n.jsx("button",{className:Os.resetBtn,onClick:L,children:"RESET"})]}),n.jsxs("table",{className:Os.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum"})]})}),n.jsx("tbody",{children:wa.special.map(_=>{var D;return n.jsx(tA,{row:_,range:(D=d[_.key])!=null?D:{from:0,to:0},onChange:C=>v(_.key,C)},_.key)})})]}),n.jsxs("div",{className:Os.footer,children:[n.jsxs("div",{className:Os.footerLine,children:[n.jsx("span",{children:"Sum Total Special"}),n.jsxs("span",{children:[Gf(k)," XP"]})]}),n.jsxs("div",{className:Os.footerLine,children:[n.jsx("span",{children:"Total XP"}),n.jsxs("span",{children:[Gf(E)," XP"]})]}),n.jsxs("div",{className:Os.note,children:["Flle die XP-Arrays in ",n.jsx("code",{children:"src/lib/calculators/dungeonPauseOpenXP/data.ts"}),", dann rechnet es 1:1 wie im Sheet."]})]})]})]})}function Yne(){return n.jsx("div",{style:{padding:12},children:n.jsx(sA,{})})}const Jne=()=>n.jsx(Ns,{title:"Progression  Early Game"}),Zne="_wrap_n2poq_31",ere="_title_n2poq_33",tre="_infoBox_n2poq_39",sre="_infoTitle_n2poq_63",nre="_infoList_n2poq_73",rre="_section_n2poq_89",ire="_h2_n2poq_101",are="_h3_n2poq_103",ore="_intro_n2poq_105",lre="_ul_n2poq_107",cre="_img_n2poq_113",ds={wrap:Zne,title:ere,infoBox:tre,infoTitle:sre,infoList:nre,section:rre,h2:ire,h3:are,intro:ore,ul:lre,img:cre},dre=()=>{ql();const t=[Ml("first-weekend-guide-day1",900),Ml("first-weekend-guide-day2",900),Ml("first-weekend-guide-day3",900)];return n.jsxs("div",{className:ds.wrap,children:[n.jsx("h1",{className:ds.title,children:"First Weekend Guide"}),n.jsxs("aside",{className:ds.infoBox,role:"note","aria-label":"Important Level Tips",children:[n.jsx("div",{className:ds.infoTitle,children:"Important Level Tips"}),n.jsxs("ul",{className:ds.infoList,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),n.jsx("p",{className:ds.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),n.jsxs("div",{className:ds.section,children:[n.jsx("h2",{className:ds.h2,children:"Preparation before launch"}),n.jsxs("ul",{className:ds.ul,children:[n.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),n.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),n.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),n.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),n.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),n.jsxs("div",{className:ds.section,children:[n.jsx("h2",{className:ds.h2,children:"Day 1"}),n.jsx("h3",{className:ds.h3,children:"Level 13"}),n.jsxs("ul",{className:ds.ul,children:[n.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),n.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&n.jsx("img",{className:ds.img,src:t[0],alt:"Day 1 overview"})]}),n.jsxs("div",{className:ds.section,children:[n.jsx("h3",{className:ds.h3,children:"Level 410"}),n.jsxs("ul",{className:ds.ul,children:[n.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),n.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),n.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),n.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),n.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),n.jsxs("div",{className:ds.section,children:[n.jsx("h2",{className:ds.h2,children:"Day 2"}),n.jsx("h3",{className:ds.h3,children:"Level 1015"}),n.jsxs("ul",{className:ds.ul,children:[n.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),n.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),n.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),n.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&n.jsx("img",{className:ds.img,src:t[1],alt:"Day 2 overview"})]}),n.jsxs("div",{className:ds.section,children:[n.jsx("h2",{className:ds.h2,children:"Day 3"}),n.jsx("h3",{className:ds.h3,children:"Level 1520"}),n.jsxs("ul",{className:ds.ul,children:[n.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),n.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&n.jsx("img",{className:ds.img,src:t[2],alt:"Day 3 overview"})]})]})},ure=()=>n.jsx(Ns,{title:"Max Item Stats Calculator"}),hre=()=>n.jsx(Ns,{title:"Fortress Package skip order (Early)"}),pre=()=>n.jsx(Ns,{title:"Underworld Pro Package skip order (Early)"}),mre=()=>n.jsx(Ns,{title:"Gem Calculator (Early)"}),fre=()=>n.jsx(Ns,{title:"Fortress attack duplication guide (Early)"}),gre=()=>n.jsx(Ns,{title:"Progression  Mid Game"}),xre="_wrap_1x7jo_31",yre="_header_1x7jo_35",vre="_titles_1x7jo_55",bre="_h1_1x7jo_57",_re="_lead_1x7jo_59",wre="_ctaRow_1x7jo_63",jre="_cta_1x7jo_63",Sre="_section_1x7jo_85",Nre="_sectionGrid_1x7jo_87",kre="_card_1x7jo_99",Cre="_h2_1x7jo_103",Tre="_h3_1x7jo_105",Ere="_p_1x7jo_107",Are="_ul_1x7jo_111",Ire="_ol_1x7jo_111",Rre="_figure_1x7jo_117",Pre="_figureNarrow_1x7jo_139",Lre="_img_1x7jo_149",Dre="_fallbackImg_1x7jo_151",Mre="_figCaption_1x7jo_159",Fre="_tableWrap_1x7jo_163",Bre="_table_1x7jo_163",$re="_footer_1x7jo_217",Ore="_tools_1x7jo_219",Vre="_toolBtn_1x7jo_221",$t={wrap:xre,header:yre,titles:vre,h1:bre,lead:_re,ctaRow:wre,cta:jre,section:Sre,sectionGrid:Nre,card:kre,h2:Cre,h3:Tre,p:Ere,ul:Are,ol:Ire,figure:Rre,figureNarrow:Pre,img:Lre,fallbackImg:Dre,figCaption:Mre,tableWrap:Fre,table:Bre,footer:$re,tools:Ore,toolBtn:Vre},Ure=1400;function zre(){const t=T.useMemo(()=>Ml("goldxpcurve",Ure),[]);return n.jsxs("div",{className:$t.wrap,children:[n.jsxs("header",{className:$t.header,children:[n.jsxs("div",{className:$t.titles,children:[n.jsx("h1",{className:$t.h1,children:"Dungeon Pause"}),n.jsx("p",{className:$t.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),n.jsxs("div",{className:$t.ctaRow,children:[n.jsx(rs,{className:$t.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),n.jsx(rs,{className:$t.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),n.jsxs("section",{className:$t.section,children:[n.jsx("h2",{className:$t.h2,children:"Worum gehts?"}),n.jsxs("p",{className:$t.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",n.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",n.jsx("strong",{children:"Level 370"})," und endet um ",n.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),n.jsxs("section",{className:$t.section,children:[n.jsx("h3",{className:$t.h3,children:"XP & Gold  Verlauf"}),n.jsxs("div",{className:`${$t.figure} ${$t.figureNarrow}`,children:[t?n.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:$t.img}):n.jsx("div",{className:$t.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),n.jsx("div",{className:$t.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),n.jsxs("section",{className:$t.sectionGrid,children:[n.jsxs("div",{className:$t.card,children:[n.jsx("h3",{className:$t.h3,children:"Start & Ende"}),n.jsxs("ul",{className:$t.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",n.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",n.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),n.jsxs("div",{className:$t.card,children:[n.jsx("h3",{className:$t.h3,children:"Twister & Light/Shadow"}),n.jsxs("ul",{className:$t.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Twister:"})," bei ca. ",n.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),n.jsxs("li",{children:["Whrend der Pause weiterhin ",n.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",n.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",n.jsx("em",{children:"Devilsatt"})," &"," ",n.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),n.jsxs("section",{className:$t.section,children:[n.jsx("h3",{className:$t.h3,children:"Vorgehen"}),n.jsxs("ol",{className:$t.ol,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",n.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",n.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",n.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),n.jsxs("section",{className:$t.section,children:[n.jsx("h3",{className:$t.h3,children:"Kompaktbersicht"}),n.jsx("div",{className:$t.tableWrap,children:n.jsxs("table",{className:$t.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Aspekt"}),n.jsx("th",{children:"Empfehlung"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Start (Faustregel)"}),n.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Ende (Faustregel)"}),n.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Open XP vor Eintritt"}),n.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Twister"}),n.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Light/Shadow"}),n.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Whrend der Pause"}),n.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Pets"}),n.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Optimaler Exit"}),n.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),n.jsx("footer",{className:$t.footer,children:n.jsxs("div",{className:$t.tools,children:[n.jsx(rs,{className:$t.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),n.jsx(rs,{className:$t.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const Hre=()=>n.jsx(Ns,{title:"Dungeon Pause open XP Calculator"}),Gre="_wrap_1uhww_3",Wre="_headerBar_1uhww_15",qre="_title_1uhww_33",Kre="_meta_1uhww_45",Qre="_description_1uhww_55",Xre="_section_1uhww_69",Yre="_sectionTitle_1uhww_77",Jre="_steps_1uhww_87",$i={wrap:Gre,headerBar:Wre,title:qre,meta:Kre,description:Qre,section:Xre,sectionTitle:Yre,steps:Jre};function Zre(){return n.jsxs("div",{className:$i.wrap,children:[n.jsxs("div",{className:$i.headerBar,children:[n.jsx("h2",{className:$i.title,children:"Dungeon Pause Exit"}),n.jsx("span",{className:$i.meta,children:"Last updated: 28.03.2025"})]}),n.jsx("p",{className:$i.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),n.jsxs("section",{className:$i.section,children:[n.jsx("h3",{className:$i.sectionTitle,children:"Sequence for the Exit"}),n.jsxs("ol",{className:$i.steps,children:[n.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),n.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),n.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),n.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),n.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),n.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),n.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),n.jsxs("section",{className:$i.section,children:[n.jsx("h3",{className:$i.sectionTitle,children:"Extra Tip"}),n.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const eie=()=>n.jsx(Ns,{title:"Gem Calculator (Mid)"}),tie=()=>n.jsx(Ns,{title:"Calendar Skip"}),sie=()=>n.jsx(Ns,{title:"Progression  Late Game"}),nie="_layout_13sgm_29",rie="_side_13sgm_49",iie="_sideHead_13sgm_61",aie="_search_13sgm_71",oie="_spotBtn_13sgm_89",lie="_sideList_13sgm_109",cie="_sideItem_13sgm_111",die="_active_13sgm_119",uie="_sideTitle_13sgm_121",hie="_ico_13sgm_123",pie="_badge_13sgm_125",mie="_detail_13sgm_139",fie="_detailInner_13sgm_141",gie="_detailHead_13sgm_143",xie="_detailTitle_13sgm_145",yie="_empty_13sgm_147",vie="_grid_13sgm_151",bie="_card_13sgm_157",_ie="_cardHead_13sgm_175",wie="_btnGrid_13sgm_177",jie="_itemBtn_13sgm_179",Sie="_spotWrap_13sgm_203",Nie="_spot_13sgm_89",kie="_spotHead_13sgm_227",Cie="_spotSearch_13sgm_235",Tie="_spotClose_13sgm_243",Eie="_spotList_13sgm_253",Aie="_spotItem_13sgm_255",Iie="_spotItemEmpty_13sgm_259",Rie="_spotCat_13sgm_261",Pie="_spotLabel_13sgm_263",Lie="_mark_13sgm_267",Rt={layout:nie,side:rie,sideHead:iie,search:aie,spotBtn:oie,sideList:lie,sideItem:cie,active:die,sideTitle:uie,ico:hie,badge:pie,detail:mie,detailInner:fie,detailHead:gie,detailTitle:xie,empty:yie,grid:vie,card:bie,cardHead:_ie,btnGrid:wie,itemBtn:jie,spotWrap:Sie,spot:Nie,spotHead:kie,spotSearch:Cie,spotClose:Tie,spotList:Eie,spotItem:Aie,spotItemEmpty:Iie,spotCat:Rie,spotLabel:Pie,mark:Lie};function Die(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Cu(t,e){if(!e)return t;const s=new RegExp(`(${Die(e)})`,"ig");return t.replace(s,`<mark class="${Rt.mark}">$1</mark>`)}function zN(t){if(!t||!t.length)return 0;let e=0;for(const s of t)if(s.sub2&&s.sub2.length)if(s.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of s.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=s.sub2.length;else e+=1;return e}function Mie(t){const e=[];for(const s of t){const r=s.label;if(!(!s.sub||!s.sub.length))for(const i of s.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(l=>l.sub2&&l.sub2.length))for(const l of i.sub2)if(l.sub2&&l.sub2.length)for(const d of l.sub2)e.push({full:`${r}  ${i.label}  ${l.label}  ${d.label}`,catKey:s.key,subKey:i.key,sub2Key:d.key});else e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else for(const l of i.sub2)e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else e.push({full:`${r}  ${i.label}`,catKey:s.key,subKey:i.key})}return e}function Fie(t,e){var s;return e&&t.some(r=>r.key===e)?e:((s=t==null?void 0:t[0])==null?void 0:s.key)||""}const Bie=({categories:t,onNavigate:e,autoFocusSearch:s})=>{const[r,i]=T.useState(()=>{var M;return((M=t==null?void 0:t[0])==null?void 0:M.key)||""}),[a,l]=T.useState(""),[d,u]=T.useState(!1),h=T.useRef(null),p=T.useMemo(()=>{const M=a.trim().toLowerCase();if(!M)return t;const N=y=>y.toLowerCase().includes(M);return t.map(y=>{const _=N(y.label),D=[];for(const C of y.sub||[]){const w=N(C.label);if(C.sub2&&C.sub2.length)if(C.sub2.some(F=>F.sub2&&F.sub2.length)){const F=[];for(const R of C.sub2)if(R.sub2&&R.sub2.length){const B=R.sub2.filter($=>N($.label));B.length&&F.push({...R,sub2:B})}else N(R.label)&&F.push(R);(w||F.length)&&D.push({...C,sub2:F})}else{const F=C.sub2.filter(R=>N(R.label));(w||F.length)&&D.push({...C,sub2:F})}else w&&D.push(C)}return _||D.length?{...y,sub:D.length?D:y.sub}:null}).filter(Boolean)},[t,a]),g=T.useMemo(()=>{const M=p.length?p:t,N=Fie(M,r);return M.find(y=>y.key===N)||M[0]||null},[p,t,r]),v=T.useMemo(()=>Mie(t),[t]),[b,S]=T.useState(""),k=T.useMemo(()=>{const M=b.trim().toLowerCase();return M?v.filter(N=>N.full.toLowerCase().includes(M)):v},[v,b]);T.useEffect(()=>{const M=N=>{const y=N.key.toLowerCase()==="k";(N.metaKey||N.ctrlKey)&&y&&(N.preventDefault(),u(!0),setTimeout(()=>{var _;return(_=h.current)==null?void 0:_.focus()},0)),N.key==="Escape"&&u(!1)};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[]);const E=T.useRef(null);T.useEffect(()=>{var M;s&&((M=E.current)==null||M.focus())},[s]);const L=()=>{var D;const M=a.trim().toLowerCase(),N=(M?v.find(C=>C.full.toLowerCase().includes(M)):v[0])||null;if(N){e({tab:N.catKey,sub:N.subKey,sub2:N.sub2Key});return}const y=g,_=(D=y==null?void 0:y.sub)==null?void 0:D[0];if(!(!y||!_))if(_.sub2&&_.sub2.length)if(_.sub2.some(w=>w.sub2&&w.sub2.length)){const w=_.sub2[0];w.sub2&&w.sub2.length?e({tab:y.key,sub:_.key,sub2:w.sub2[0].key}):e({tab:y.key,sub:_.key,sub2:w.key})}else e({tab:y.key,sub:_.key,sub2:_.sub2[0].key});else e({tab:y.key,sub:_.key})};return n.jsxs("div",{className:Rt.layout,children:[n.jsxs("div",{className:Rt.side,children:[n.jsxs("div",{className:Rt.sideHead,children:[n.jsx("input",{ref:E,className:Rt.search,type:"search",placeholder:"Suche",value:a,onChange:M=>l(M.target.value),onKeyDown:M=>{M.key==="Enter"&&L()}}),n.jsx("button",{className:Rt.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var M;return(M=h.current)==null?void 0:M.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),n.jsx("div",{className:Rt.sideList,children:(p.length?p:t).map(M=>n.jsxs("div",{className:`${Rt.sideItem} ${(g==null?void 0:g.key)===M.key?Rt.active:""}`,onClick:()=>i(M.key),children:[n.jsxs("span",{className:Rt.sideTitle,children:[M.icon?n.jsx("span",{className:Rt.ico,"aria-hidden":!0,children:M.icon}):null,M.label]}),n.jsx("span",{className:Rt.badge,children:zN(M.sub)})]},M.key))})]}),n.jsx("div",{className:Rt.detail,children:g?n.jsxs("div",{className:Rt.detailInner,children:[n.jsxs("div",{className:Rt.detailHead,children:[n.jsxs("h3",{className:Rt.detailTitle,children:[g.icon?n.jsx("span",{className:Rt.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),n.jsxs("div",{className:Rt.badge,children:[zN(g.sub)," Eintrge"]})]}),n.jsx("div",{className:Rt.grid,children:(g.sub||[]).map(M=>{const N=M.sub2&&M.sub2.length>0,y=N&&M.sub2.some(_=>_.sub2&&_.sub2.length);return n.jsxs("div",{className:Rt.card,children:[n.jsx("div",{className:Rt.cardHead,dangerouslySetInnerHTML:{__html:Cu(M.label,a)}}),N?n.jsx("div",{className:Rt.btnGrid,children:y?M.sub2.flatMap(_=>_.sub2&&_.sub2.length?_.sub2.map(D=>n.jsx("button",{className:Rt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key,sub2:D.key}),dangerouslySetInnerHTML:{__html:Cu(`${_.label}  ${D.label}`,a)}},`${_.key}__${D.key}`)):[n.jsx("button",{className:Rt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key,sub2:_.key}),dangerouslySetInnerHTML:{__html:Cu(_.label,a)}},_.key)]):M.sub2.map(_=>n.jsx("button",{className:Rt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key,sub2:_.key}),dangerouslySetInnerHTML:{__html:Cu(_.label,a)}},_.key))}):n.jsx("div",{className:Rt.btnGrid,children:n.jsx("button",{className:Rt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key}),dangerouslySetInnerHTML:{__html:Cu(M.label,a)}})})]},M.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(M=>!M.sub2||!M.sub2.length?!M.label.toLowerCase().includes(a.trim().toLowerCase()):M.sub2.some(y=>y.sub2&&y.sub2.length)?M.sub2.every(y=>y.sub2&&y.sub2.length?y.sub2.every(_=>!_.label.toLowerCase().includes(a.trim().toLowerCase())):!y.label.toLowerCase().includes(a.trim().toLowerCase())):M.sub2.every(y=>!y.label.toLowerCase().includes(a.trim().toLowerCase())))?n.jsxs("div",{className:Rt.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):n.jsx("div",{className:Rt.empty,children:"Keine Kategorie gefunden."})}),d&&n.jsx("div",{className:Rt.spotWrap,onClick:()=>u(!1),children:n.jsxs("div",{className:Rt.spot,onClick:M=>M.stopPropagation(),children:[n.jsxs("div",{className:Rt.spotHead,children:[n.jsx("input",{ref:h,className:Rt.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:b,onChange:M=>S(M.target.value)}),n.jsx("button",{className:Rt.spotClose,onClick:()=>u(!1),children:"Esc"})]}),n.jsx("div",{className:Rt.spotList,children:k.length===0?n.jsx("div",{className:Rt.spotItemEmpty,children:"Keine Treffer"}):k.map((M,N)=>n.jsxs("div",{className:Rt.spotItem,onClick:()=>{u(!1),e({tab:M.catKey,sub:M.subKey,sub2:M.sub2Key})},children:[n.jsx("div",{className:Rt.spotCat,children:M.catKey}),n.jsx("div",{className:Rt.spotLabel,children:M.full})]},N))})]})})]})},$ie={gamefeatures:Ree,progression:Pee,hellevator:Lee,"legendary-dungeon":Dee,events:Mee,calculators:Qee,infographics:Xee,"class-book":Yee,dungeons:Jee},HN={gamefeatures:{fortress:Zee,underworld:mte,arenaam:xte},hellevator:{"hellevator-guide":mse},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":fse},events:{"event-list":gse,"event-cycle":xse},calculators:{"fortress-calculator":Mse,"underworld-calculator":sne,"max-item-stats-calculator":nne,"gem-calculator":Ine,"dungeon-pause-open-xp-calculator":Yne},progression:{early:Jne,mid:gre,late:sie}},mv={gamefeatures:{arenaam:{"am-rune-bonuses":nse,"am-build-order":pse},underworld:{"underworld-calculator":fte,"underworld-pro-package-skip-order":gte},fortress:{"fortress-calculator":ete,"fortress-package-skip-order":hte,"fortress-attack-duplication":pte}},progression:{early:{"first-weekend-guide":dre,"max-item-stats-calculator":ure,"fortress-package-skip-order":hre,"underworld-pro-package-skip-order":pre,"gem-calculator":mre,"fortress-attack-duplication":fre},mid:{"dungeon-pause":zre,"dungeon-pause-open-xp-calculator":Hre,"dungeon-pause-exit":Zre,"gem-calculator":eie,"calendar-skip":tie}}};function Oie(){const[t,e]=ql(),s=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;s?s&&!r?a=$ie[s]||null:s&&r&&!i?a=HN[s]&&HN[s][r]||null:s&&r&&i&&(a=mv[s]&&mv[s][r]&&mv[s][r][i]||null):a=null;const l=d=>{const u=new URLSearchParams(t);u.set("tab",d.tab),d.sub?u.set("sub",d.sub):u.delete("sub"),d.sub2?u.set("sub2",d.sub2):u.delete("sub2"),e(u,{replace:!1})};return n.jsxs(Et,{children:[n.jsx("div",{className:$c.topWrap,children:n.jsx(See,{logoSrc:Iee,categories:DN,titleI18nKey:"guides.index.title"})}),n.jsx("div",{className:$c.divider}),n.jsx("div",{className:$c.contentArea,children:a?n.jsx(a,{}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:$c.placeholder,children:[n.jsx("h2",{className:$c.placeholderTitle,children:"Guides"}),n.jsx("p",{className:$c.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),n.jsx(Bie,{categories:DN,onNavigate:l,autoFocusSearch:!1})]})})]})}const Vie="_wrap_1353r_1",Uie="_centerLogoWrap_1353r_21",zie="_centerLogoLink_1353r_37",Hie="_centerLogo_1353r_21",Gie="_arc_1353r_71",Wie="_left_1353r_73",qie="_right_1353r_75",Kie="_sub_1353r_77",Qie="_full_1353r_79",Xie="_arcItem_1353r_81",Yie="_iconBtn_1353r_87",Jie="_active_1353r_141",Zie="_iconImg_1353r_151",eae="_placeholderIcon_1353r_155",tae="_placeholderText_1353r_173",sae="_iconLabel_1353r_177",jn={wrap:Vie,centerLogoWrap:Uie,centerLogoLink:zie,centerLogo:Hie,arc:Gie,left:Wie,right:qie,sub:Kie,full:Qie,arcItem:Xie,iconBtn:Yie,active:Jie,iconImg:Zie,placeholderIcon:eae,placeholderText:tae,iconLabel:sae},nae=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=xr();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),p=new URL(t,window.location.origin).searchParams,g=p.get("tab"),v=p.get("sub");a=r==="sub"?d===g&&!!v&&u===v:d===g}catch(l){a=!1}return n.jsxs(rs,{to:t,"aria-label":e,className:[jn.iconBtn,r==="sub"?jn.muted:"",a?jn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:jn.iconImg}):n.jsx("div",{className:jn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:jn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:jn.iconLabel,children:e})]})},fv=({items:t,side:e,anchorSide:s="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440})=>{const d=T.useMemo(()=>{const h=t.length;if(h===0)return[];let p=-90,g=90;e==="left"?(p=90,g=270):e==="sub"?s==="left"?(p=90,g=270):(p=-90,g=90):e==="full"&&(p=0,g=360);const v=(g-p)/(h+1),b=r?190:250;return t.map((S,k)=>{const L=(p+v*(k+1))*Math.PI/180;return{it:S,x:Math.cos(L)*b,y:Math.sin(L)*b}})},[t,e,s,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`),h})();return n.jsx("div",{className:[jn.arc,e==="left"?jn.left:"",e==="right"?jn.right:"",e==="sub"?jn.sub:"",e==="full"?jn.full:""].join(" "),style:u,children:d.map(({it:h,x:p,y:g})=>n.jsx("div",{className:jn.arcItem,style:{transform:`translate(${p}px, ${g}px)`},children:n.jsx(nae,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},rae=["creators","scans","predictions","news","records","feedback"],N0=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],iae={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},aae=new Set(rae),oae=N0.reduce((t,e)=>(t[e.key]=e,t),{}),lae=t=>typeof t=="string"&&aae.has(t),cae=({logoSrc:t})=>{const[e]=ql(),s=e.get("tab")||null,r=T.useMemo(()=>N0.filter(b=>b.side==="left"),[]),i=T.useMemo(()=>N0.filter(b=>b.side==="right"),[]),a=lae(s)?s:null,l=a?iae[a]:[],d=a?oae[a].side:"right",u=T.useRef(null),[h,p]=T.useState(220),[g,v]=T.useState(440);return T.useEffect(()=>{const b=()=>{var N,y;const k=((y=(N=u.current)==null?void 0:N.offsetWidth)!=null?y:380)/2,L=Math.round(k+60),M=Math.round(L+220);p(L),v(M)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),n.jsxs("div",{className:jn.wrap,children:[n.jsx("div",{className:jn.centerLogoWrap,children:n.jsx(rs,{to:"/community",className:jn.centerLogoLink,"aria-label":"Community Hub Home",children:n.jsx("img",{ref:u,src:t,alt:"Community Hub",className:jn.centerLogo})})}),n.jsx(fv,{items:r.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"left",variant:"main",arcOffset:h}),n.jsx(fv,{items:i.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"right",variant:"main",arcOffset:h}),l.length>0&&n.jsx(fv,{items:l.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"sub",anchorSide:d,compact:!0,variant:"sub",outerOffset:g})]})},dae="_topWrap_1rivx_1",uae="_divider_1rivx_19",hae="_contentArea_1rivx_53",pae="_placeholder_1rivx_63",mae="_placeholderTitle_1rivx_77",fae="_placeholderText_1rivx_91",Oc={topWrap:dae,divider:uae,contentArea:hae,placeholder:pae,placeholderTitle:mae,placeholderText:fae},gae="/assets/logo_communityhub-LVMLHRD6.png",xae=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function nA(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function yae(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(l=>parseInt(l,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const s=new Date(t);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function gv(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function vae(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function bae(t){return t.avatar?t.avatar:`/avatars/${nA(t.code||t.name||"creator")}.png`}function _ae(t){const e=nA(t.code||t.name||"creator"),s=[],r=gv(t.youtube);r&&s.push({type:"YouTube",url:r});const i=gv(t.twitch);i&&s.push({type:"Twitch",url:i});const a=gv(t.discord);return a&&s.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:bae(t),description:vae(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:yae(t.latestActivity),platforms:s}}function wae(t){var s,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(s=t==null?void 0:t.generatedAt)!=null?s:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function rA(t="/data/creators-live.json"){const[e,s]=T.useState(null),[r,i]=T.useState(""),[a,l]=T.useState(!1),[d,u]=T.useState(0);return T.useEffect(()=>{let h=!1;async function p(){l(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const v=await g.json();h||s(wae(v))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),s(null))}finally{h||l(!1)}}return p(),()=>{h=!0}},[t,d]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const jae=xae,Sae=jae.map(_ae),Nae=[...Sae];function iA(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function To(t,e,s=iA){if(t<=0)return"";const r=s(t);return e?`${r} ${e}`:r}function Nh(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function kae(t,e){const s=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*s;case"views":return(r.totalViews-i.totalViews)*s;case"activity":return(Nh(r.lastActive)-Nh(i.lastActive))*s*-1;case"language":return r.language.localeCompare(i.language)*s;default:return 0}}}function Cae(t){const e={width:16,height:16};switch(t){case"YouTube":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[n.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),n.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[n.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),n.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),n.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[n.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),n.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),n.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[n.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),n.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),n.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function GN({c:t}){return n.jsxs("article",{className:"cc-card",children:[n.jsxs("header",{className:"cc-card-head",children:[n.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const s=e.currentTarget;s.onerror=null,s.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),n.jsxs("div",{className:"cc-card-title",children:[n.jsx("h3",{className:"cc-name",children:t.name}),n.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[Cae(e.type),n.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),n.jsx("p",{className:"cc-desc",children:t.description}),n.jsxs("div",{className:"cc-stats",children:[n.jsx("span",{title:"Subscribers",children:To(t.subscribers,"subs")}),n.jsx("span",{title:"Total views",children:To(t.totalViews,"views")}),n.jsx("span",{title:"Weekly views",children:To(t.weeklyViews,"/wk")}),n.jsx("span",{title:"Weekly posts",children:To(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),n.jsxs("footer",{className:"cc-meta",children:[n.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),n.jsxs("span",{className:"cc-meta-right",children:["active ",Nh(t.lastActive),"d ago"]})]})]},t.id)}function Tae({data:t}){return n.jsx("div",{className:"cc-table-wrap",children:n.jsxs("table",{className:"cc-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Lang"}),n.jsx("th",{children:"Subs"}),n.jsx("th",{children:"Total Views"}),n.jsx("th",{children:"Weekly Views"}),n.jsx("th",{children:"Weekly Posts"}),n.jsx("th",{children:"Active"})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"cc-table-name",children:[n.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),n.jsx("span",{children:e.name})]})}),n.jsx("td",{children:e.language.toUpperCase()}),n.jsx("td",{children:To(e.subscribers)}),n.jsx("td",{children:To(e.totalViews)}),n.jsx("td",{children:To(e.weeklyViews)}),n.jsx("td",{children:To(e.weeklyPosts,void 0,s=>`${s}`)}),n.jsxs("td",{children:[Nh(e.lastActive),"d"]})]},e.id))})]})})}function aA(){var Z,le;const[t,e]=T.useState("static"),[s,r]=T.useState("cards"),[i,a]=T.useState("subs"),[l,d]=T.useState("desc"),[u,h]=T.useState("all"),[p,g]=T.useState("all"),[v,b]=T.useState(0),[S,k]=T.useState(365),[E,L]=T.useState(null),[M,N]=T.useState(""),[y,_]=T.useState(!1),[D,C]=T.useState(""),[w,I]=T.useState(null),{snapshot:F,error:R}=rA(),B=(Z=F==null?void 0:F.data)!=null&&Z.length?F.data:null,$=B!=null?B:Nae,W=t==="static"?$:(le=w!=null?w:B)!=null?le:[],H=T.useMemo(()=>{const ee=new Set(W.map(he=>he.language));return Array.from(ee).sort()},[W]),q=T.useMemo(()=>W.filter(ee=>u==="all"?!0:ee.language===u).filter(ee=>p==="all"?!0:ee.platforms.some(he=>he.type===p)).filter(ee=>ee.subscribers>=v).filter(ee=>Nh(ee.lastActive)<=S).slice().sort(kae(i,l)),[W,u,p,v,S,i,l]);T.useEffect(()=>{if(!E&&q.length){const ee=q[Math.floor(Math.random()*q.length)];L(ee.id)}},[q,E]);const K=T.useMemo(()=>q.find(ee=>ee.id===E)||null,[q,E]),G=T.useMemo(()=>q.slice().sort((ee,he)=>he.weeklyViews-ee.weeklyViews).slice(0,5),[q]),se=T.useMemo(()=>q.slice().sort((ee,he)=>he.weeklyPosts-ee.weeklyPosts).slice(0,5),[q]);async function ne(){C(""),_(!0);try{const ee=await fetch(M,{headers:{Accept:"application/json"}});if(!ee.ok)throw new Error(`HTTP ${ee.status}`);const he=await ee.json(),xe=Array.isArray(he)?he:Array.isArray(he==null?void 0:he.data)?he.data:[];I(xe)}catch(ee){C((ee==null?void 0:ee.message)||"Fetch failed")}finally{_(!1)}}const U=q.length===0;return n.jsxs("section",{className:"cc-wrap",children:[n.jsxs("div",{className:"cc-heading",children:[n.jsx("h1",{children:"Content Creator Hub"}),n.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),F&&n.jsxs("p",{className:"cc-sync",children:[n.jsxs("span",{children:["Live stats synced ",new Date(F.generatedAt).toLocaleString()]}),n.jsxs("span",{children:[F.data.length," profiles"]})]}),R&&n.jsx("p",{className:"cc-sync-error",children:R})]}),n.jsxs("div",{className:"cc-toolbar",children:[n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Data"}),n.jsxs("select",{value:t,onChange:ee=>e(ee.target.value),children:[n.jsx("option",{value:"static",children:"Static"}),n.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"View"}),n.jsxs("select",{value:s,onChange:ee=>r(ee.target.value),children:[n.jsx("option",{value:"cards",children:"Cards"}),n.jsx("option",{value:"table",children:"Table"}),n.jsx("option",{value:"json",children:"JSON"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Sort by"}),n.jsxs("select",{value:i,onChange:ee=>a(ee.target.value),children:[n.jsx("option",{value:"subs",children:"Subs"}),n.jsx("option",{value:"views",children:"Views"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"language",children:"Language"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Dir"}),n.jsxs("select",{value:l,onChange:ee=>d(ee.target.value),children:[n.jsx("option",{value:"desc",children:"Desc"}),n.jsx("option",{value:"asc",children:"Asc"})]})]})]}),n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Language"}),n.jsxs("select",{value:u,onChange:ee=>h(ee.target.value),children:[n.jsx("option",{value:"all",children:"All"}),H.map(ee=>n.jsx("option",{value:ee,children:ee.toUpperCase()},ee))]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Platform"}),n.jsxs("select",{value:p,onChange:ee=>g(ee.target.value),children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"YouTube",children:"YouTube"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"TikTok",children:"TikTok"}),n.jsx("option",{value:"Discord",children:"Discord"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Min subs"}),n.jsx("input",{type:"number",min:0,value:v,onChange:ee=>b(Number(ee.target.value||0)),placeholder:"0"})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Active within"}),n.jsxs("select",{value:S,onChange:ee=>k(Number(ee.target.value)),children:[n.jsx("option",{value:7,children:"7 days"}),n.jsx("option",{value:30,children:"30 days"}),n.jsx("option",{value:90,children:"90 days"}),n.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&n.jsxs("div",{className:"cc-api",children:[n.jsxs("div",{className:"cc-api-ctrls",children:[n.jsxs("label",{className:"cc-field cc-field-grow",children:[n.jsx("span",{children:"API URL"}),n.jsx("input",{type:"url",value:M,onChange:ee=>N(ee.target.value),placeholder:"https://api.example.com/creators"})]}),n.jsx("button",{className:"cc-btn",onClick:ne,disabled:!M||y,children:y?"Loading":"Fetch"})]}),D&&n.jsx("div",{className:"cc-api-error",children:D}),n.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),K&&n.jsxs("div",{className:"cc-spotlight",children:[n.jsxs("div",{className:"cc-spot-head",children:[n.jsx("h2",{children:"Random CC Spotlight"}),n.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!q.length)return;const ee=q[Math.floor(Math.random()*q.length)];L(ee.id)},children:"Shuffle"})]}),n.jsx(GN,{c:K})]}),n.jsxs("div",{className:"cc-main",children:[n.jsxs("div",{className:"cc-main-left",children:[U&&n.jsxs("div",{className:"cc-empty",children:[n.jsx("h3",{children:"No creators match the filters"}),n.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!U&&s==="cards"&&n.jsx("div",{className:"cc-grid",children:q.map(ee=>n.jsx(GN,{c:ee},ee.id))}),!U&&s==="table"&&n.jsx(Tae,{data:q}),s==="json"&&n.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(q,null,2)})]}),n.jsxs("aside",{className:"cc-main-right",children:[n.jsxs("div",{className:"cc-side",children:[n.jsx("h3",{children:"Weekly Toplists"}),n.jsxs("div",{className:"cc-toplist",children:[n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Views"}),n.jsx("ol",{children:G.map(ee=>n.jsxs("li",{children:[n.jsx("span",{children:ee.name}),n.jsx("span",{className:"cc-top-val",children:iA(ee.weeklyViews)})]},ee.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Posts"}),n.jsx("ol",{children:se.map(ee=>n.jsxs("li",{children:[n.jsx("span",{children:ee.name}),n.jsx("span",{className:"cc-top-val",children:ee.weeklyPosts})]},ee.id))})]})]})]}),n.jsxs("div",{className:"cc-side cc-legal",children:[n.jsx("h3",{children:"Legal & Disclaimer"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Only public data; no embedding without permission."}),n.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),n.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function oA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Scans"}),n.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function lA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Predictions"}),n.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function cA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  News"}),n.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function dA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Feedback"}),n.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const Eae=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],xv=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],Aae={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},Iae=t=>Aae[t],Rae=(t,e=64)=>{var i;const s=Iae(t),r=zl(s);return r&&(i=Fr(r,e))!=null?i:null},Pae="_recordsPage_kdw96_1",Lae="_navArea_kdw96_15",Dae="_tabList_kdw96_27",Mae="_tabButton_kdw96_55",Fae="_tabButtonActive_kdw96_101",Bae="_sectionContent_kdw96_115",$ae="_placeholderPanel_kdw96_127",Oae="_placeholderTitle_kdw96_143",Vae="_placeholderText_kdw96_157",Uae="_milestoneSection_kdw96_171",zae="_sectionHeader_kdw96_183",Hae="_filterBar_kdw96_197",Gae="_filterButtons_kdw96_231",Wae="_filterButton_kdw96_231",qae="_filterButtonActive_kdw96_295",Kae="_filterSelectWrapper_kdw96_309",Qae="_filterLabel_kdw96_321",Xae="_filterSelect_kdw96_309",Yae="_emptyFilterMessage_kdw96_355",Jae="_currentSection_kdw96_369",Zae="_currentGrid_kdw96_381",eoe="_currentCard_kdw96_393",toe="_categoryLabel_kdw96_419",soe="_recordTitle_kdw96_433",noe="_currentDetails_kdw96_445",roe="_notes_kdw96_457",ioe="_infoPanel_kdw96_469",aoe="_infoCard_kdw96_481",ooe="_disclaimerCard_kdw96_483",loe="_infoHeader_kdw96_525",coe="_infoAuthor_kdw96_539",doe="_authorName_kdw96_557",uoe="_authorBadge_kdw96_565",hoe="_infoAuthorIcon_kdw96_591",poe="_infoDate_kdw96_623",moe="_infoBody_kdw96_633",foe="_infoTitle_kdw96_645",goe="_infoLink_kdw96_665",xoe="_milestoneGrid_kdw96_719",yoe="_milestoneCard_kdw96_731",voe="_milestoneCategory_kdw96_757",boe="_milestoneTitle_kdw96_771",_oe="_milestoneDetails_kdw96_785",woe="_detailRow_kdw96_797",joe="_detailLabel_kdw96_809",Soe="_detailValue_kdw96_823",Noe="_sourceLink_kdw96_833",koe="_emptyState_kdw96_855",ze={recordsPage:Pae,navArea:Lae,tabList:Dae,tabButton:Mae,tabButtonActive:Fae,sectionContent:Bae,placeholderPanel:$ae,placeholderTitle:Oae,placeholderText:Vae,milestoneSection:Uae,sectionHeader:zae,filterBar:Hae,filterButtons:Gae,filterButton:Wae,filterButtonActive:qae,filterSelectWrapper:Kae,filterLabel:Qae,filterSelect:Xae,emptyFilterMessage:Yae,currentSection:Jae,currentGrid:Zae,currentCard:eoe,categoryLabel:toe,recordTitle:soe,currentDetails:noe,notes:roe,infoPanel:ioe,infoCard:aoe,disclaimerCard:ooe,infoHeader:loe,infoAuthor:coe,authorName:doe,authorBadge:uoe,infoAuthorIcon:hoe,infoDate:poe,infoBody:moe,infoTitle:foe,infoLink:goe,milestoneGrid:xoe,milestoneCard:yoe,milestoneCategory:voe,milestoneTitle:boe,milestoneDetails:_oe,detailRow:woe,detailLabel:joe,detailValue:Soe,sourceLink:Noe,emptyState:koe},Coe=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],Toe={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},Eoe=({title:t,description:e,hint:s})=>n.jsxs("article",{className:ze.placeholderPanel,children:[n.jsx("h2",{className:ze.placeholderTitle,children:t}),n.jsx("p",{className:ze.placeholderText,children:e}),s&&n.jsx("p",{className:ze.emptyState,children:s})]}),Aoe=()=>{const[t,e]=T.useState("all"),s=T.useMemo(()=>{const a=new Set,l=[];for(const d of xv)a.has(d.category)||(a.add(d.category),l.push(d.category));return["all",...l]},[]),r=t==="all"?xv:xv.filter(a=>a.category===t),i=a=>{e(a)};return n.jsxs("section",{className:ze.milestoneSection,"aria-label":"Records milestones",children:[n.jsxs("div",{className:ze.sectionHeader,children:[n.jsx("p",{children:"Milestones"}),n.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),n.jsxs("div",{className:ze.filterBar,children:[n.jsx("div",{className:ze.filterButtons,children:s.map(a=>n.jsx("button",{type:"button",className:[ze.filterButton,t===a&&ze.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),n.jsxs("label",{className:ze.filterSelectWrapper,children:[n.jsx("span",{className:ze.filterLabel,children:"Category"}),n.jsx("select",{value:t,onChange:a=>i(a.target.value),className:ze.filterSelect,children:s.map(a=>n.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?n.jsx("p",{className:ze.emptyFilterMessage,children:"No milestones fall into this category yet."}):n.jsx("div",{className:ze.milestoneGrid,children:r.map(a=>n.jsxs("article",{className:ze.milestoneCard,children:[n.jsx("span",{className:ze.milestoneCategory,children:a.category}),n.jsx("h3",{className:ze.milestoneTitle,children:a.achievement}),n.jsxs("div",{className:ze.milestoneDetails,children:[n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Name"}),n.jsx("span",{className:ze.detailValue,children:a.name})]}),n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Server"}),n.jsx("span",{className:ze.detailValue,children:a.server})]}),n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Date"}),n.jsx("span",{className:ze.detailValue,children:a.date})]}),a.notes&&n.jsx("p",{className:ze.notes,children:a.notes}),a.source&&n.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:ze.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},Ioe=()=>n.jsxs("section",{className:ze.currentSection,"aria-label":"Current community records",children:[n.jsxs("div",{className:ze.sectionHeader,children:[n.jsx("p",{children:"Current Records"}),n.jsx("h2",{children:"The latest verified achievements"})]}),n.jsx("div",{className:ze.currentGrid,children:Eae.map((t,e)=>n.jsxs("article",{className:ze.currentCard,children:[n.jsx("span",{className:ze.categoryLabel,children:t.category}),n.jsx("h3",{className:ze.recordTitle,children:t.record}),n.jsxs("div",{className:ze.currentDetails,children:[n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Class"}),n.jsx("span",{className:ze.detailValue,children:t.classType})]}),n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Player"}),n.jsx("span",{className:ze.detailValue,children:t.playerName})]}),n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Server"}),n.jsx("span",{className:ze.detailValue,children:t.server})]}),n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Days"}),n.jsx("span",{className:ze.detailValue,children:t.days})]}),t.release&&n.jsxs("div",{className:ze.detailRow,children:[n.jsx("span",{className:ze.detailLabel,children:"Release"}),n.jsx("span",{className:ze.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&n.jsxs("p",{className:ze.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&n.jsx("p",{className:ze.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),Tu={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function uA(){const[t,e]=T.useState("current"),s=Rae("infoCard",32),r=()=>{if(t==="current")return n.jsx(Ioe,{});if(t==="milestones")return n.jsx(Aoe,{});const i=Toe[t];return n.jsx(Eoe,{title:i.title,description:i.description,hint:i.hint})};return n.jsxs("section",{className:ze.recordsPage,children:[n.jsx(eA,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),n.jsxs("div",{className:ze.infoPanel,children:[n.jsxs("div",{className:ze.infoCard,children:[n.jsxs("div",{className:ze.infoHeader,children:[n.jsxs("div",{className:ze.infoAuthor,children:[s?n.jsx("img",{src:s,alt:"Community Data",className:ze.infoAuthorIcon}):null,n.jsx("span",{className:ze.authorName,children:"S&F Tavern Info"}),n.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:ze.authorBadge,children:"Discord"})]}),n.jsx("span",{className:ze.infoDate,children:"11.12.2020 14:08"})]}),n.jsxs("div",{className:ze.infoBody,children:[n.jsx("h3",{className:ze.infoTitle,children:Tu.title}),Tu.paragraphs.map(i=>n.jsx("p",{children:i},i))]}),n.jsxs("div",{className:ze.infoLink,children:[n.jsx("span",{children:Tu.linkLabel}),n.jsx("a",{href:Tu.linkUrl,target:"_blank",rel:"noreferrer",children:Tu.linkUrl})]})]}),n.jsxs("div",{className:ze.disclaimerCard,children:[n.jsx("h3",{className:ze.infoTitle,children:"Disclaimer"}),n.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),n.jsx("div",{className:ze.navArea,children:n.jsx("nav",{className:ze.tabList,"aria-label":"Records navigation",children:Coe.map(i=>n.jsx("button",{type:"button",className:`${ze.tabButton} ${t===i.key?ze.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),n.jsx("div",{className:ze.sectionContent,children:r()})]})}const Roe={creators:aA,scans:oA,predictions:lA,news:cA,records:uA,feedback:dA};function Poe(){const[t]=ql(),e=t.get("tab")||"",s=Roe[e];return n.jsxs(Et,{children:[n.jsx("div",{className:Oc.topWrap,children:n.jsx(cae,{logoSrc:gae})}),n.jsx("div",{className:Oc.divider}),n.jsx("div",{className:Oc.contentArea,children:s?n.jsx(s,{}):n.jsxs("div",{className:Oc.placeholder,children:[n.jsx("h2",{className:Oc.placeholderTitle,children:"Community"}),n.jsx("p",{className:Oc.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function Loe(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsxs(rs,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),n.jsxs(rs,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),n.jsxs(rs,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function Doe(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Letzter Scan"}),n.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function Moe(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Archiv"}),n.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function Foe(){return n.jsx(Et,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:n.jsx(Boe,{}),right:n.jsx($oe,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[n.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n.jsx(rs,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),n.jsx(rs,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx($m,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),n.jsx($m,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),n.jsx($m,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),n.jsx($m,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function Boe(){return n.jsxs("nav",{className:"space-y-2 text-sm",children:[n.jsx(Eu,{to:"/guild-hub/planner",children:"Planner"}),n.jsx(Eu,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),n.jsx(Eu,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),n.jsx(Eu,{to:"/guild-hub/waitlist",children:"Waitlist"}),n.jsx(Eu,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function $oe(){return n.jsxs("aside",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function $m({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function Eu({to:t,children:e}){return n.jsx(ws,{to:t,className:({isActive:s})=>`block rounded-lg border px-3 py-2 no-underline ${s?"font-semibold":""}`,style:({isActive:s})=>({borderColor:s?"#2B6DE0":"#2B4C73",background:s?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:s?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const Ooe="_page_1mlmy_1",Voe="_header_1mlmy_13",Uoe="_headerStack_1mlmy_25",zoe="_kicker_1mlmy_37",Hoe="_title_1mlmy_53",Goe="_headerActions_1mlmy_65",Woe="_primaryAction_1mlmy_77",qoe="_secondaryAction_1mlmy_79",Koe="_infoStrip_1mlmy_127",Qoe="_infoBlock_1mlmy_147",Xoe="_infoLabel_1mlmy_161",Yoe="_freshnessWrapper_1mlmy_181",Joe="_freshnessBadge_1mlmy_189",Zoe="_badge_f0_1mlmy_213",ele="_badge_f1_1mlmy_215",tle="_badge_f2_1mlmy_217",sle="_badge_f3_1mlmy_219",nle="_badge_f4_1mlmy_221",rle="_badge_f5_1mlmy_223",ile="_badge_f6_1mlmy_225",ale="_badge_f7_1mlmy_227",ole="_badge_unknown_1mlmy_229",lle="_popover_1mlmy_233",cle="_popoverLabel_1mlmy_265",dle="_filterToolbar_1mlmy_275",ule="_filterSheetButton_1mlmy_285",hle="_inlineFilters_1mlmy_303",ple="_searchInput_1mlmy_315",mle="_select_1mlmy_317",fle="_ownerGroup_1mlmy_335",gle="_ownerChip_1mlmy_347",xle="_ownerChipActive_1mlmy_365",yle="_sortGroup_1mlmy_375",vle="_sortLabel_1mlmy_387",ble="_directionButton_1mlmy_397",_le="_listBody_1mlmy_415",wle="_tableWrapper_1mlmy_427",jle="_table_1mlmy_427",Sle="_stickyColumn_1mlmy_481",Nle="_rowTitleButton_1mlmy_495",kle="_tableStatus_1mlmy_513",Cle="_cardList_1mlmy_533",Tle="_card_1mlmy_533",Ele="_cardHeader_1mlmy_565",Ale="_cardTitle_1mlmy_577",Ile="_cardMeta_1mlmy_595",Rle="_cardDescription_1mlmy_611",Ple="_cardFooter_1mlmy_623",Lle="_cardLabel_1mlmy_639",Dle="_scanBadge_1mlmy_649",Mle="_emptyState_1mlmy_665",Fle="_sheetBackdrop_1mlmy_681",Ble="_sheet_1mlmy_681",$le="_sheetHandle_1mlmy_721",Ole="_sheetBody_1mlmy_739",Vle="_sheetLabel_1mlmy_755",Ule="_sheetActions_1mlmy_793",zle="_overlay_1mlmy_807",Hle="_panel_1mlmy_825",Gle="_modal_1mlmy_851",Wle="_drawer_1mlmy_861",qle="_panelHeader_1mlmy_869",Kle="_panelControls_1mlmy_883",Qle="_panelDescription_1mlmy_913",Xle="_detailGrid_1mlmy_925",Yle="_panelFooter_1mlmy_957",Jle="_formOverlay_1mlmy_969",Zle="_formPanel_1mlmy_991",ece="_formGrid_1mlmy_1017",tce="_menuWrapper_1mlmy_1029",sce="_dotsButton_1mlmy_1037",nce="_menu_1mlmy_1029",rce="_pagination_1mlmy_1109",Ne={page:Ooe,header:Voe,headerStack:Uoe,kicker:zoe,title:Hoe,headerActions:Goe,primaryAction:Woe,secondaryAction:qoe,infoStrip:Koe,infoBlock:Qoe,infoLabel:Xoe,freshnessWrapper:Yoe,freshnessBadge:Joe,badge_f0:Zoe,badge_f1:ele,badge_f2:tle,badge_f3:sle,badge_f4:nle,badge_f5:rle,badge_f6:ile,badge_f7:ale,badge_unknown:ole,popover:lle,popoverLabel:cle,filterToolbar:dle,filterSheetButton:ule,inlineFilters:hle,searchInput:ple,select:mle,ownerGroup:fle,ownerChip:gle,ownerChipActive:xle,sortGroup:yle,sortLabel:vle,directionButton:ble,listBody:_le,tableWrapper:wle,table:jle,stickyColumn:Sle,rowTitleButton:Nle,tableStatus:kle,cardList:Cle,card:Tle,cardHeader:Ele,cardTitle:Ale,cardMeta:Ile,cardDescription:Rle,cardFooter:Ple,cardLabel:Lle,scanBadge:Dle,emptyState:Mle,sheetBackdrop:Fle,sheet:Ble,sheetHandle:$le,sheetBody:Ole,sheetLabel:Vle,sheetActions:Ule,overlay:zle,panel:Hle,modal:Gle,drawer:Wle,panelHeader:qle,panelControls:Kle,panelDescription:Qle,detailGrid:Xle,panelFooter:Yle,formOverlay:Jle,formPanel:Zle,formGrid:ece,menuWrapper:tce,dotsButton:sce,menu:nce,pagination:rce};function ice(){var ne;const[t,e]=J.useState(qQ),[s,r]=J.useState(ov),[i,a]=J.useState(ov),l=wd(s.q,300),d=J.useMemo(()=>{const U=KQ(t,s,l);return QQ(U,s.sort,s.dir)},[t,s,l]),u=J.useMemo(()=>XQ(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),p=J.useMemo(()=>Array.from(new Set(t.map(U=>U.owner))),[t]),g=jd("(min-width: 768px)"),v=jd("(min-width: 1024px)"),[b,S]=J.useState(!1),[k,E]=J.useState(null),L=(ne=t.find(U=>U.id===k))!=null?ne:null,M=J.useRef(null);Sd(M,!!L&&!v);const[N,y]=J.useState(null),[_,D]=J.useState(!1),C=J.useRef(null);Sd(C,_);const w=J.useMemo(()=>YQ(t),[t]),I=J.useMemo(()=>w?jh(w.nextUpdateAt,Date.now()):"",[w]),F=g,R=v,B=n.jsxs("div",{className:Ne.headerActions,children:[n.jsx("button",{type:"button",className:Ne.primaryAction,onClick:()=>{y(null),D(!0)},children:"Neuer Eintrag"}),!g&&n.jsx("button",{type:"button",className:Ne.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>S(!0),children:"Filter"})]}),$=U=>{const Z=xN(U);r(Z),a(Z)},W=(U,Z)=>{const le=xN({...s,[U]:Z,page:U==="page"||U==="pageSize"?Z:1});$(le)},H=()=>{$(i),S(!1)},q=()=>{$(ov),S(!1)},K=(U,Z=!1)=>{if(Z)a(le=>{const he=le.owner.includes(U)?le.owner.filter(xe=>xe!==U):[...le.owner,U];return{...le,owner:he}});else{const ee=s.owner.includes(U)?s.owner.filter(he=>he!==U):[...s.owner,U];W("owner",ee)}},G=(U,Z)=>{e(le=>le.map(ee=>ee.id===U?{...ee,status:Z,updatedAt:new Date().toISOString()}:ee))},se=U=>{e(Z=>Z.some(ee=>ee.id===U.id)?Z.map(ee=>ee.id===U.id?U:ee):[U,...Z]),D(!1)};return n.jsxs(Et,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[n.jsxs("div",{className:Ne.page,children:[n.jsxs("header",{className:Ne.header,children:[n.jsxs("div",{className:Ne.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ne.kicker,children:"Deployment"}),n.jsx("h1",{className:Ne.title,children:"Planer"})]}),B]}),n.jsxs("div",{className:Ne.infoStrip,children:[n.jsxs("div",{className:Ne.infoBlock,children:[n.jsx("span",{className:Ne.infoLabel,children:"Offen"}),n.jsx("strong",{children:d.filter(U=>U.status==="open").length})]}),n.jsxs("div",{className:Ne.infoBlock,children:[n.jsx("span",{className:Ne.infoLabel,children:"In Arbeit"}),n.jsx("strong",{children:d.filter(U=>U.status==="in_progress").length})]}),w&&n.jsx(ace,{code:w.freshness,label:Db[w.freshness],updatedAt:w.lastScanAt,nextUpdateAt:w.nextUpdateAt,countdown:I})]})]}),n.jsx("section",{className:Ne.filterToolbar,children:g?n.jsx(oce,{filters:s,owners:p,onChange:W,onOwnerToggle:U=>K(U,!1)}):n.jsx("button",{type:"button",className:Ne.filterSheetButton,onClick:()=>S(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),n.jsx("section",{className:Ne.listBody,children:F?n.jsx(lce,{items:u,sort:s.sort,dir:s.dir,onSortChange:U=>{const Z=s.sort===U&&s.dir==="asc"?"desc":"asc";W("sort",U),W("dir",Z)},onSelect:U=>E(U.id),onStatusChange:G,onEdit:U=>{y(U),D(!0)}}):n.jsx(cce,{items:u,onSelect:U=>E(U.id),onStatusChange:G,onEdit:U=>{y(U),D(!0)}})}),n.jsx(uce,{page:s.page,totalPages:h,onChange:U=>W("page",U)})]}),b&&n.jsx(dce,{filters:i,owners:p,onChange:a,onOwnerToggle:U=>K(U,!0),onClose:()=>S(!1),onApply:H,onReset:q}),L&&n.jsx(pA,{ref:M,item:L,mode:R?"drawer":"modal",onClose:()=>E(null),onEdit:()=>{y(L),D(!0),E(null)},onStatusChange:G}),_&&n.jsx(mA,{ref:C,owners:p.length?p:KE,item:N,onClose:()=>D(!1),onSubmit:se})]})}function ace({code:t,label:e,updatedAt:s,nextUpdateAt:r,countdown:i}){var d;const[a,l]=J.useState(!1);return n.jsxs("div",{className:Ne.freshnessWrapper,children:[n.jsx("button",{type:"button",className:`${Ne.freshnessBadge} ${(d=Ne[`badge_${t}`])!=null?d:""}`,"aria-label":`Freshness ${e}`,onClick:()=>l(u=>!u),children:e}),a&&n.jsxs("div",{className:Ne.popover,role:"dialog","aria-label":"Freshness Details",children:[n.jsxs("div",{children:[n.jsx("span",{className:Ne.popoverLabel,children:"Zuletzt gescannt"}),n.jsx("strong",{children:Zi(s)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ne.popoverLabel,children:"Naechster Scan"}),n.jsx("strong",{children:Zi(r)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ne.popoverLabel,children:"Countdown"}),n.jsx("strong",{children:i})]})]})]})}function oce({filters:t,owners:e,onChange:s,onOwnerToggle:r}){return n.jsxs("div",{className:Ne.inlineFilters,children:[n.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:Ne.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>s("q",i.target.value)}),n.jsxs("select",{className:Ne.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>s("type",i.target.value),children:[n.jsx("option",{value:"all",children:"Typ (alle)"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]}),n.jsxs("select",{className:Ne.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>s("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("select",{className:Ne.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>s("range",i.target.value),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]}),n.jsx("div",{className:Ne.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return n.jsx("button",{type:"button",className:`${Ne.ownerChip} ${a?Ne.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Ne.sortGroup,children:[n.jsx("label",{htmlFor:"planner-sort",className:Ne.sortLabel,children:"Sortieren"}),n.jsxs("select",{id:"planner-sort",name:"plannerSort",className:Ne.select,value:t.sort,onChange:i=>s("sort",i.target.value),children:[n.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),n.jsx("option",{value:"priority",children:"Prioritaet"}),n.jsx("option",{value:"title",children:"Titel"})]}),n.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:Ne.directionButton,onClick:()=>s("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function lce({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:l}){const d=u=>e===u?s==="asc"?" ":" ":"";return t.length===0?n.jsx(hA,{}):n.jsx("div",{className:Ne.tableWrapper,children:n.jsxs("table",{className:Ne.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Ne.stickyColumn,onClick:()=>r("title"),children:["Titel",d("title")]}),n.jsx("th",{children:"Typ"}),n.jsx("th",{children:"Owner"}),n.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",d("dueAt")]}),n.jsx("th",{children:"Status"}),n.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",d("updatedAt")]}),n.jsx("th",{})]})}),n.jsx("tbody",{children:t.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:Ne.stickyColumn,children:n.jsx("button",{type:"button",className:Ne.rowTitleButton,onClick:()=>i(u),children:u.title})}),n.jsx("td",{children:Lb[u.type]}),n.jsx("td",{children:u.owner}),n.jsx("td",{children:Zi(u.dueAt)}),n.jsx("td",{children:n.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:Ne.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),n.jsx("td",{children:Qh(u.updatedAt)}),n.jsx("td",{children:n.jsx(fA,{onEdit:()=>l(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function cce({items:t,onSelect:e,onStatusChange:s,onEdit:r}){return t.length===0?n.jsx(hA,{}):n.jsx("div",{className:Ne.cardList,children:t.map(i=>n.jsxs("article",{className:Ne.card,children:[n.jsxs("div",{className:Ne.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Ne.cardTitle,onClick:()=>e(i),children:i.title}),n.jsxs("div",{className:Ne.cardMeta,children:[n.jsx("span",{children:Lb[i.type]}),n.jsx("span",{children:GQ[i.status]}),n.jsxs("span",{children:["Due ",Zi(i.dueAt)]})]})]}),n.jsx(fA,{onEdit:()=>r(i),onComplete:()=>s(i.id,"done")})]}),n.jsx("p",{className:Ne.cardDescription,children:i.description}),n.jsxs("div",{className:Ne.cardFooter,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ne.cardLabel,children:"Owner"}),n.jsx("strong",{children:i.owner})]}),n.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:Ne.tableStatus,value:i.status,onChange:a=>s(i.id,a.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("span",{className:Ne.scanBadge,children:["Letzter Scan ",Qh(i.lastScanAt)]})]})]},i.id))})}function hA(){return n.jsx("div",{className:Ne.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function dce({filters:t,owners:e,onChange:s,onOwnerToggle:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Ne.sheetBackdrop,role:"presentation",onClick:i,children:n.jsxs("div",{className:Ne.sheet,role:"dialog","aria-label":"Filter",onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Ne.sheetHandle}),n.jsxs("div",{className:Ne.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Ne.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:d=>s(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Typ",n.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:d=>s(u=>({...u,type:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Status",n.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:d=>s(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Zeitraum",n.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:d=>s(u=>({...u,range:d.target.value})),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]})]}),n.jsxs("div",{className:Ne.sheetLabel,children:["Owner",n.jsx("div",{className:Ne.ownerGroup,children:e.map(d=>{const u=t.owner.includes(d);return n.jsx("button",{type:"button",className:`${Ne.ownerChip} ${u?Ne.ownerChipActive:""}`,onClick:()=>r(d),children:d},d)})})]})]}),n.jsxs("div",{className:Ne.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Ne.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const pA=J.forwardRef(({item:t,mode:e,onClose:s,onEdit:r,onStatusChange:i},a)=>n.jsx("div",{className:Ne.overlay,children:n.jsxs("div",{ref:a,className:`${Ne.panel} ${e==="drawer"?Ne.drawer:Ne.modal}`,children:[n.jsxs("header",{className:Ne.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ne.cardLabel,children:Lb[t.type]}),n.jsx("h2",{children:t.title})]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("div",{className:Ne.panelControls,children:[n.jsxs("label",{children:["Status",n.jsxs("select",{value:t.status,onChange:l=>i(t.id,l.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{disabled:!0,value:t.priority,children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsx("p",{className:Ne.panelDescription,children:t.description}),n.jsxs("dl",{className:Ne.detailGrid,children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Owner"}),n.jsx("dd",{children:t.owner})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Assignees"}),n.jsx("dd",{children:t.assignees.join(", ")})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Termin"}),n.jsx("dd",{children:Zi(t.dueAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt aktualisiert"}),n.jsx("dd",{children:Qh(t.updatedAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Erstellt"}),n.jsx("dd",{children:Zi(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Tags"}),n.jsx("dd",{children:t.tags.join(", ")})]})]}),n.jsxs("div",{className:Ne.panelFooter,children:[n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Ne.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));pA.displayName="DetailPanel";const mA=J.forwardRef(({owners:t,item:e,onClose:s,onSubmit:r},i)=>{const[a,l]=J.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:KE[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});J.useEffect(()=>{e&&l(e)},[JSON.stringify(e)]);const d=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{l(p=>{const v=p.tags.includes(h)?p.tags.filter(b=>b!==h):[...p.tags,h];return{...p,tags:v}})};return n.jsx("div",{className:Ne.formOverlay,children:n.jsxs("form",{ref:i,className:Ne.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Ne.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ne.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),n.jsx("h2",{children:e?e.title:"Planner Task"})]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Titel",n.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>l(p=>({...p,title:h.target.value})),required:!0})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Beschreibung",n.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>l(p=>({...p,description:h.target.value})),rows:4})]}),n.jsxs("div",{className:Ne.formGrid,children:[n.jsxs("label",{children:["Typ",n.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>l(p=>({...p,type:h.target.value})),children:[n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>l(p=>({...p,status:h.target.value})),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Owner",n.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>l(p=>({...p,owner:h.target.value})),children:t.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>l(p=>({...p,priority:h.target.value})),children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Termin",n.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>l(p=>({...p,dueAt:new Date(h.target.value).toISOString()}))})]}),n.jsxs("div",{className:Ne.sheetLabel,children:["Tags",n.jsx("div",{className:Ne.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const p=a.tags.includes(h);return n.jsx("button",{type:"button",className:`${Ne.ownerChip} ${p?Ne.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),n.jsxs("footer",{className:Ne.panelFooter,children:[n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Ne.primaryAction,children:"Speichern"})]})]})})});mA.displayName="PlannerFormOverlay";function fA({onEdit:t,onComplete:e}){const[s,r]=J.useState(!1),i=J.useRef(null);return J.useEffect(()=>{if(!s)return;const a=l=>{var d;(d=i.current)!=null&&d.contains(l.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[s]),n.jsxs("div",{className:Ne.menuWrapper,ref:i,children:[n.jsx("button",{type:"button",className:Ne.dotsButton,"aria-haspopup":"menu","aria-expanded":s,onClick:()=>r(a=>!a),children:"..."}),s&&n.jsxs("div",{className:Ne.menu,role:"menu",children:[n.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),n.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),n.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function uce({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Ne.pagination,children:[n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const hce="_page_1cvuk_1",pce="_header_1cvuk_13",mce="_headerLeading_1cvuk_29",fce="_backLink_1cvuk_41",gce="_headerStack_1cvuk_77",xce="_kicker_1cvuk_89",yce="_title_1cvuk_105",vce="_subtitle_1cvuk_117",bce="_headerActions_1cvuk_129",_ce="_plannerNotice_1cvuk_141",wce="_noticeItem_1cvuk_163",jce="_noticeWarning_1cvuk_185",Sce="_noticeDot_1cvuk_197",Nce="_tabSection_1cvuk_213",kce="_tabBar_1cvuk_225",Cce="_tabItem_1cvuk_239",Tce="_tabItemActive_1cvuk_279",Ece="_tabLabel_1cvuk_291",Ace="_tabHelper_1cvuk_301",Ice="_tabPanel_1cvuk_311",Rce="_tabBadge_1cvuk_331",Pce="_primaryAction_1cvuk_1331",Lce="_secondaryAction_1cvuk_1333",Dce="_infoStrip_1cvuk_1383",Mce="_infoBlock_1cvuk_1403",Fce="_infoLabel_1cvuk_1415",Bce="_infoHint_1cvuk_1441",$ce="_stageGrid_1cvuk_1453",Oce="_panel_1cvuk_1465",Vce="_panelHeader_1cvuk_1487",Uce="_panelKicker_1cvuk_1501",zce="_panelTitle_1cvuk_1517",Hce="_panelLead_1cvuk_1529",Gce="_badge_1cvuk_1541",Wce="_panelBody_1cvuk_1563",qce="_placeholderGrid_1cvuk_1575",Kce="_placeholderCard_1cvuk_1587",Qce="_placeholderTitle_1cvuk_1609",Xce="_placeholderText_1cvuk_1619",Yce="_helperSection_1cvuk_1631",Jce="_helperCard_1cvuk_1639",Zce="_helperKicker_1cvuk_1661",ede="_helperTitle_1cvuk_1677",tde="_helperText_1cvuk_1689",sde="_helperActions_1cvuk_1701",st={page:hce,header:pce,headerLeading:mce,backLink:fce,headerStack:gce,kicker:xce,title:yce,subtitle:vce,headerActions:bce,plannerNotice:_ce,noticeItem:wce,noticeWarning:jce,noticeDot:Sce,tabSection:Nce,tabBar:kce,tabItem:Cce,tabItemActive:Tce,tabLabel:Ece,tabHelper:Ace,tabPanel:Ice,tabBadge:Rce,primaryAction:Pce,secondaryAction:Lce,infoStrip:Dce,infoBlock:Mce,infoLabel:Fce,infoHint:Bce,stageGrid:$ce,panel:Oce,panelHeader:Vce,panelKicker:Uce,panelTitle:zce,panelLead:Hce,badge:Gce,panelBody:Wce,placeholderGrid:qce,placeholderCard:Kce,placeholderTitle:Qce,placeholderText:Xce,helperSection:Yce,helperCard:Jce,helperKicker:Zce,helperTitle:ede,helperText:tde,helperActions:sde},nde="_setupGrid_rdp6l_1",rde="_setupLeft_rdp6l_13",ide="_setupRight_rdp6l_15",ade="_card_rdp6l_27",ode="_cardHeader_rdp6l_49",lde="_cardKicker_rdp6l_61",cde="_cardTitle_rdp6l_77",dde="_cardText_rdp6l_89",ude="_toggleGroup_rdp6l_101",hde="_toggleButton_rdp6l_113",pde="_toggleButtonActive_rdp6l_143",mde="_modeHint_rdp6l_155",fde="_formGrid_rdp6l_167",gde="_formField_rdp6l_179",xde="_formLabel_rdp6l_191",yde="_input_rdp6l_201",vde="_suggestions_rdp6l_231",bde="_suggestionBtn_rdp6l_257",_de="_suggestionName_rdp6l_297",wde="_suggestionMeta_rdp6l_305",jde="_partnerActions_rdp6l_315",Sde="_primaryAction_rdp6l_329",Nde="_secondaryAction_rdp6l_331",kde="_partnerList_rdp6l_381",Cde="_partnerRow_rdp6l_393",Tde="_partnerName_rdp6l_413",Ede="_partnerMeta_rdp6l_423",Ade="_removeButton_rdp6l_433",Ide="_emptyState_rdp6l_463",Rde="_previewBlock_rdp6l_473",Pde="_previewLabel_rdp6l_485",Lde="_previewValue_rdp6l_499",Dde="_previewCard_rdp6l_509",Mde="_previewTitle_rdp6l_523",Fde="_previewMeta_rdp6l_533",Bde="_previewList_rdp6l_543",$de="_previewItem_rdp6l_555",Ode="_setupInfo_rdp6l_569",Vde="_setupWarning_rdp6l_593",Ude="_setupInfoIcon_rdp6l_605",zde="_setupInfoTitle_rdp6l_629",Hde="_setupInfoText_rdp6l_639",Me={setupGrid:nde,setupLeft:rde,setupRight:ide,card:ade,cardHeader:ode,cardKicker:lde,cardTitle:cde,cardText:dde,toggleGroup:ude,toggleButton:hde,toggleButtonActive:pde,modeHint:mde,formGrid:fde,formField:gde,formLabel:xde,input:yde,suggestions:vde,suggestionBtn:bde,suggestionName:_de,suggestionMeta:wde,partnerActions:jde,primaryAction:Sde,secondaryAction:Nde,partnerList:kde,partnerRow:Cde,partnerName:Tde,partnerMeta:Ede,removeButton:Ade,emptyState:Ide,previewBlock:Rde,previewLabel:Pde,previewValue:Lde,previewCard:Dde,previewTitle:Mde,previewMeta:Fde,previewList:Bde,previewItem:$de,setupInfo:Ode,setupWarning:Vde,setupInfoIcon:Ude,setupInfoTitle:zde,setupInfoText:Hde};function Gde({setupState:t,onChangeMode:e,onChangeBaseGuild:s,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var E,L,M,N,y,_,D,C,w,I;const[a,l]=J.useState(()=>{var F,R,B,$;return{name:(R=(F=t.baseGuild)==null?void 0:F.name)!=null?R:"",server:($=(B=t.baseGuild)==null?void 0:B.server)!=null?$:""}}),[d,u]=J.useState({id:void 0,name:"",server:""}),h=wd(a.name,250),p=wd(d.name,250),g=WN(h,a.server||"all"),v=WN(p,d.server||"all"),b=!!((L=(E=t.baseGuild)==null?void 0:E.name)!=null&&L.trim()&&((N=(M=t.baseGuild)==null?void 0:M.server)!=null&&N.trim())),S=t.partnerGuilds.length>0;J.useEffect(()=>{var R,B,$,W;const F={name:(B=(R=t.baseGuild)==null?void 0:R.name)!=null?B:"",server:(W=($=t.baseGuild)==null?void 0:$.server)!=null?W:""};(F.name!==a.name||F.server!==a.server)&&l(F)},[(y=t.baseGuild)==null?void 0:y.name,(_=t.baseGuild)==null?void 0:_.server]);const k=()=>{!d.name.trim()||!d.server.trim()||(r(d),u({id:void 0,name:"",server:""}))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Me.setupGrid,children:[n.jsxs("div",{className:Me.setupLeft,children:[n.jsxs("div",{className:Me.card,children:[n.jsx("div",{className:Me.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Me.cardKicker,children:"Modus"}),n.jsx("h3",{className:Me.cardTitle,children:"Scan-based oder manuell"}),n.jsx("p",{className:Me.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),n.jsxs("div",{className:Me.toggleGroup,role:"group","aria-label":"Setup Modus",children:[n.jsx("button",{type:"button",className:`${Me.toggleButton} ${t.mode==="scan"?Me.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),n.jsx("button",{type:"button",className:`${Me.toggleButton} ${t.mode==="manual"?Me.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),n.jsx("p",{className:Me.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),n.jsxs("div",{className:Me.card,children:[n.jsx("div",{className:Me.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Me.cardKicker,children:"Base Guild"}),n.jsx("h3",{className:Me.cardTitle,children:"Stammdaten"}),n.jsx("p",{className:Me.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),n.jsxs("div",{className:Me.formGrid,children:[n.jsxs("label",{className:Me.formField,children:[n.jsx("span",{className:Me.formLabel,children:"Guild name"}),n.jsx("input",{type:"text",className:Me.input,value:a.name,onChange:F=>{const R=F.target.value;l(B=>({...B,name:R}))},onBlur:()=>s({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&n.jsx("div",{className:Me.suggestions,children:g.map(F=>n.jsxs("button",{type:"button",className:Me.suggestionBtn,onClick:()=>{l({name:F.name,server:F.server}),s({id:F.id,name:F.name,server:F.server})},children:[n.jsx("span",{className:Me.suggestionName,children:F.name}),n.jsx("span",{className:Me.suggestionMeta,children:F.server})]},F.id))})]}),n.jsxs("label",{className:Me.formField,children:[n.jsx("span",{className:Me.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:Me.input,value:a.server,onChange:F=>{const R=F.target.value;l(B=>({...B,server:R}))},onBlur:()=>s({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),n.jsxs("div",{className:Me.card,children:[n.jsx("div",{className:Me.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Me.cardKicker,children:"Partner Guilds"}),n.jsx("h3",{className:Me.cardTitle,children:"Partner hinzufuegen"}),n.jsx("p",{className:Me.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),n.jsxs("div",{className:Me.formGrid,children:[n.jsxs("label",{className:Me.formField,children:[n.jsx("span",{className:Me.formLabel,children:"Name"}),n.jsx("input",{type:"text",className:Me.input,value:d.name,onChange:F=>u(R=>({...R,name:F.target.value})),placeholder:"z.B. Nova Alliance"}),v.length>0&&n.jsx("div",{className:Me.suggestions,children:v.map(F=>n.jsxs("button",{type:"button",className:Me.suggestionBtn,onClick:()=>u({id:F.id,name:F.name,server:F.server}),children:[n.jsx("span",{className:Me.suggestionName,children:F.name}),n.jsx("span",{className:Me.suggestionMeta,children:F.server})]},F.id))})]}),n.jsxs("label",{className:Me.formField,children:[n.jsx("span",{className:Me.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:Me.input,value:d.server,onChange:F=>u(R=>({...R,server:F.target.value})),placeholder:"z.B. EU-02"})]})]}),n.jsxs("div",{className:Me.partnerActions,children:[n.jsx("button",{type:"button",className:Me.primaryAction,onClick:k,children:"Add partner guild"}),n.jsx("button",{type:"button",className:Me.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),n.jsx("div",{className:Me.partnerList,children:t.partnerGuilds.length===0?n.jsx("div",{className:Me.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(F=>n.jsxs("div",{className:Me.partnerRow,children:[n.jsxs("div",{children:[n.jsx("div",{className:Me.partnerName,children:F.name||"Unbenannt"}),n.jsx("div",{className:Me.partnerMeta,children:F.server||"Server n/a"})]}),n.jsx("button",{type:"button",className:Me.removeButton,onClick:()=>i(F.id),children:"Remove"})]},F.id))})]})]}),n.jsx("aside",{className:Me.setupRight,children:n.jsxs("div",{className:Me.card,children:[n.jsx("div",{className:Me.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Me.cardKicker,children:"Preview"}),n.jsx("h3",{className:Me.cardTitle,children:"Uebersicht"}),n.jsx("p",{className:Me.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),n.jsxs("div",{className:Me.previewBlock,children:[n.jsx("div",{className:Me.previewLabel,children:"Modus"}),n.jsx("div",{className:Me.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),n.jsxs("div",{className:Me.previewBlock,children:[n.jsx("div",{className:Me.previewLabel,children:"Base Guild"}),n.jsx("div",{className:Me.previewCard,children:(D=t.baseGuild)!=null&&D.name||(C=t.baseGuild)!=null&&C.server?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Me.previewTitle,children:((w=t.baseGuild)==null?void 0:w.name)||"Unbenannt"}),n.jsx("div",{className:Me.previewMeta,children:((I=t.baseGuild)==null?void 0:I.server)||"Server n/a"})]}):n.jsx("div",{className:Me.emptyState,children:"No base guild selected yet."})})]}),n.jsxs("div",{className:Me.previewBlock,children:[n.jsx("div",{className:Me.previewLabel,children:"Partner Guilds"}),n.jsx("div",{className:Me.previewList,children:t.partnerGuilds.length===0?n.jsx("div",{className:Me.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(F=>n.jsxs("div",{className:Me.previewItem,children:[n.jsx("div",{className:Me.previewTitle,children:F.name||"Unbenannt"}),n.jsx("div",{className:Me.previewMeta,children:F.server||"Server n/a"})]},F.id))})]})]})})]}),b?S?null:n.jsxs("div",{className:Me.setupInfo,role:"status","aria-live":"polite",children:[n.jsx("span",{className:Me.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:Me.setupInfoTitle,children:"Optional: add partner guilds."}),n.jsx("p",{className:Me.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):n.jsxs("div",{className:`${Me.setupInfo} ${Me.setupWarning}`,role:"status","aria-live":"polite",children:[n.jsx("span",{className:Me.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:Me.setupInfoTitle,children:"No base guild selected yet."}),n.jsx("p",{className:Me.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function WN(t,e){const[s,r]=J.useState([]);return J.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function l(){try{const d=jg(ct,"latest"),u=await un(On(d,Ca("nameFold"),Al(i),Il(i+""),Zn(12))),h=await un(On(d,Mo("nameNgrams","array-contains",i),Zn(12))),p=new Set,g=[],v=b=>{var _,D,C,w,I,F,R,B,$,W;const S=b.data(),E=(_=b.ref.parent)==null?void 0:_.parent;if(((D=E==null?void 0:E.parent)==null?void 0:D.id)!=="guilds")return;const M=(w=(C=E==null?void 0:E.id)!=null?C:S.guildIdentifier)!=null?w:b.id;if(!M||p.has(M))return;const N=(R=(F=S.server)!=null?F:(I=S.values)==null?void 0:I.Server)!=null?R:"Unknown";if(e!=="all"&&N!==e)return;const y=(W=($=S.name)!=null?$:(B=S.values)==null?void 0:B.Name)!=null?W:"Unbekannte Gilde";p.add(M),g.push({id:M,name:y,server:N})};u.forEach(v),h.forEach(v),a||(g.sort((b,S)=>b.name.localeCompare(S.name)),r(g))}catch(d){console.error("[FusionPlanner] guild search failed",d),a||r([])}}return l(),()=>{a=!0}},[t,e]),s}const Wde="_membersContainer_1ctw8_1",qde="_scenarioSwitcher_1ctw8_13",Kde="_scenarioButton_1ctw8_25",Qde="_scenarioButtonActive_1ctw8_63",Xde="_scenarioButtonName_1ctw8_75",Yde="_scenarioButtonDesc_1ctw8_83",Jde="_setupInfo_1ctw8_93",Zde="_setupInfoHeader_1ctw8_113",eue="_setupInfoTitle_1ctw8_127",tue="_setupInfoMode_1ctw8_139",sue="_setupInfoRow_1ctw8_163",nue="_setupInfoLabel_1ctw8_175",rue="_setupInfoValue_1ctw8_189",iue="_setupInfoMeta_1ctw8_199",aue="_setupInfoPartners_1ctw8_209",oue="_setupInfoBadge_1ctw8_221",lue="_setupInfoEmpty_1ctw8_245",cue="_membersSummary_1ctw8_255",due="_membersSummaryItem_1ctw8_275",uue="_membersSummaryLabel_1ctw8_287",hue="_membersSummaryValue_1ctw8_301",pue="_maxSlotsInput_1ctw8_313",mue="_membersTable_1ctw8_331",fue="_membersRow_1ctw8_349",gue="_membersHead_1ctw8_375",xue="_membersCell_1ctw8_385",yue="_memberName_1ctw8_395",vue="_memberBadge_1ctw8_403",bue="_assignmentCell_1ctw8_427",_ue="_assignmentBadge_1ctw8_439",wue="_assignmentBadgeMain_1ctw8_463",jue="_assignmentBadgePartner_1ctw8_475",Sue="_assignmentBadgeWatch_1ctw8_487",Nue="_assignmentBadgeIdle_1ctw8_499",kue="_assignmentActions_1ctw8_507",Cue="_assignmentButton_1ctw8_519",Tue="_assignmentButtonActive_1ctw8_551",Eue="_decisionGroup_1ctw8_563",Aue="_decisionButton_1ctw8_575",Iue="_decisionButtonActive_1ctw8_607",Rue="_emptyWrap_1ctw8_619",Pue="_emptyTitle_1ctw8_633",Lue="_emptyText_1ctw8_641",Due="_contextMenuBackdrop_1ctw8_651",Mue="_contextMenu_1ctw8_651",Fue="_contextMenuItem_1ctw8_693",Bue="_partnerPickerCell_1ctw8_725",$ue="_partnerLabel_1ctw8_737",Oue="_partnerSelect_1ctw8_751",Re={membersContainer:Wde,scenarioSwitcher:qde,scenarioButton:Kde,scenarioButtonActive:Qde,scenarioButtonName:Xde,scenarioButtonDesc:Yde,setupInfo:Jde,setupInfoHeader:Zde,setupInfoTitle:eue,setupInfoMode:tue,setupInfoRow:sue,setupInfoLabel:nue,setupInfoValue:rue,setupInfoMeta:iue,setupInfoPartners:aue,setupInfoBadge:oue,setupInfoEmpty:lue,membersSummary:cue,membersSummaryItem:due,membersSummaryLabel:uue,membersSummaryValue:hue,maxSlotsInput:pue,membersTable:mue,membersRow:fue,membersHead:gue,membersCell:xue,memberName:yue,memberBadge:vue,assignmentCell:bue,assignmentBadge:_ue,assignmentBadgeMain:wue,assignmentBadgePartner:jue,assignmentBadgeWatch:Sue,assignmentBadgeIdle:Nue,assignmentActions:kue,assignmentButton:Cue,assignmentButtonActive:Tue,decisionGroup:Eue,decisionButton:Aue,decisionButtonActive:Iue,emptyWrap:Rue,emptyTitle:Pue,emptyText:Lue,contextMenuBackdrop:Due,contextMenu:Mue,contextMenuItem:Fue,partnerPickerCell:Bue,partnerLabel:$ue,partnerSelect:Oue};function Vue({members:t,scenario:e,onChangeScenarioDecision:s,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var C,w,I,F,R,B;const[l,d]=J.useState(null),u=J.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map(($,W)=>({id:$.id,label:$.name||`Partner ${W+1}`})):[{id:"partner-default",label:"Partner guild"}],p=J.useCallback(($,W)=>{d({memberId:$,...W})},[]),g=J.useCallback(()=>{d(null)},[]),v=J.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),b=J.useCallback(($,W,H)=>{v(),u.current=window.setTimeout(()=>{p($,{x:W,y:H})},550)},[v,p]);J.useEffect(()=>()=>v(),[v]);const S=J.useCallback(($,W,H)=>{if(W==="main")s($,"take"),r($,"main");else if(W==="partner"){const q=H?`partner:${H}`:"partner";s($,"take"),r($,q)}else s($,"bench"),r($,"none");g()},[g,s,r]),k=J.useCallback(($,W)=>{s($,W),W==="take"?r($,"main"):r($,"none")},[s,r]);if(!!!((w=(C=a.baseGuild)==null?void 0:C.name)!=null&&w.trim()&&((F=(I=a.baseGuild)==null?void 0:I.server)!=null&&F.trim())))return n.jsxs("div",{className:Re.emptyWrap,children:[n.jsx("h3",{className:Re.emptyTitle,children:"No base guild configured"}),n.jsx("p",{className:Re.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return n.jsxs("div",{className:Re.emptyWrap,children:[n.jsx("h3",{className:Re.emptyTitle,children:"Members & Slots"}),n.jsx("p",{className:Re.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return n.jsxs("div",{className:Re.emptyWrap,children:[n.jsx("h3",{className:Re.emptyTitle,children:"No members found"}),n.jsx("p",{className:Re.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const L=(R=e.decisions)!=null?R:{},M=(B=e.targetGuildAssignments)!=null?B:{},N=t.filter($=>L[$.id]==="take").length,y=t.filter($=>L[$.id]==="bench").length,_=t.filter($=>L[$.id]==="drop").length,D=Math.max(0,e.maxSlots-e.reservedSlots-N);return n.jsxs("div",{className:Re.membersContainer,children:[n.jsx("div",{className:Re.scenarioSwitcher,children:n.jsxs("div",{className:`${Re.scenarioButton} ${Re.scenarioButtonActive}`,children:[n.jsx("span",{className:Re.scenarioButtonName,children:e.name}),e.description?n.jsx("span",{className:Re.scenarioButtonDesc,children:e.description}):null]})}),n.jsxs("div",{className:Re.setupInfo,children:[n.jsxs("div",{className:Re.setupInfoHeader,children:[n.jsx("div",{className:Re.setupInfoTitle,children:"Planning for"}),n.jsx("span",{className:Re.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?n.jsxs("div",{className:Re.setupInfoRow,children:[n.jsx("span",{className:Re.setupInfoLabel,children:"Base Guild"}),n.jsxs("span",{className:Re.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:Re.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):n.jsx("div",{className:Re.setupInfoEmpty,children:"No base guild selected in Setup tab."}),n.jsxs("div",{className:Re.setupInfoRow,children:[n.jsx("span",{className:Re.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?n.jsx("div",{className:Re.setupInfoPartners,children:a.partnerGuilds.map($=>n.jsxs("span",{className:Re.setupInfoBadge,children:[$.name||"Unbenannt",n.jsxs("span",{className:Re.setupInfoMeta,children:[" (",$.server||"Server n/a",")"]})]},$.id))}):n.jsx("span",{className:Re.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),n.jsxs("div",{className:Re.membersSummary,children:[n.jsxs("div",{className:Re.membersSummaryItem,children:[n.jsx("div",{className:Re.membersSummaryLabel,children:"Selected"}),n.jsxs("div",{className:Re.membersSummaryValue,children:[N," / ",e.maxSlots]})]}),n.jsxs("div",{className:Re.membersSummaryItem,children:[n.jsx("div",{className:Re.membersSummaryLabel,children:"Free slots"}),n.jsx("div",{className:Re.membersSummaryValue,children:D})]}),n.jsxs("div",{className:Re.membersSummaryItem,children:[n.jsx("div",{className:Re.membersSummaryLabel,children:"Bench"}),n.jsx("div",{className:Re.membersSummaryValue,children:y})]}),n.jsxs("div",{className:Re.membersSummaryItem,children:[n.jsx("div",{className:Re.membersSummaryLabel,children:"Drop"}),n.jsx("div",{className:Re.membersSummaryValue,children:_})]}),n.jsxs("div",{className:Re.membersSummaryItem,children:[n.jsx("div",{className:Re.membersSummaryLabel,children:"Reserved"}),n.jsx("div",{className:Re.membersSummaryValue,children:e.reservedSlots})]}),n.jsxs("div",{className:Re.membersSummaryItem,children:[n.jsx("div",{className:Re.membersSummaryLabel,children:"Max slots"}),n.jsx("input",{type:"number",className:Re.maxSlotsInput,value:e.maxSlots,min:0,onChange:$=>i(Number($.target.value))})]})]}),n.jsxs("div",{className:Re.membersTable,children:[n.jsxs("div",{className:`${Re.membersRow} ${Re.membersHead}`,children:[n.jsx("div",{className:Re.membersCell,children:"Name"}),n.jsx("div",{className:Re.membersCell,children:"Level"}),n.jsx("div",{className:Re.membersCell,children:"Guild"}),n.jsx("div",{className:Re.membersCell,children:"Class"}),n.jsx("div",{className:Re.membersCell,children:"Plan"}),n.jsx("div",{className:Re.membersCell,children:"Decision"}),n.jsx("div",{className:Re.membersCell,children:"Partner"})]}),t.map($=>{var ne,U,Z,le,ee,he,xe,ge,we;const W=(ne=L[$.id])!=null?ne:"undecided",H=(U=M[$.id])!=null?U:"none",q=H&&H.toString().startsWith("partner:")?H.split(":")[1]:null,K=(he=(Z=h.find(ve=>ve.id===q))==null?void 0:Z.label)!=null?he:H==="partner"?(ee=(le=h[0])==null?void 0:le.label)!=null?ee:"Partner guild":null,G=W==="take"&&H==="main"?"main":W==="take"&&(H==="partner"||q)?"partner":W==="bench"?"watch":"unassigned",se=G==="main"?"Main guild":G==="partner"?K||"Partner guild":G==="watch"?"Watchlist":"Not planned";return n.jsxs("div",{className:Re.membersRow,onContextMenu:ve=>{ve.preventDefault(),p($.id,{x:ve.clientX,y:ve.clientY})},onTouchStart:ve=>{const ce=ve.touches[0];ce&&b($.id,ce.clientX,ce.clientY)},onTouchEnd:v,onTouchCancel:v,children:[n.jsx("div",{className:Re.membersCell,children:n.jsx("div",{className:Re.memberName,children:$.name})}),n.jsx("div",{className:Re.membersCell,children:n.jsxs("span",{className:Re.memberBadge,children:["Lvl ",$.level]})}),n.jsx("div",{className:Re.membersCell,children:$.guildName}),n.jsx("div",{className:Re.membersCell,children:(ge=(xe=$.className)!=null?xe:$.class)!=null?ge:"?"}),n.jsxs("div",{className:`${Re.membersCell} ${Re.assignmentCell}`,children:[n.jsx("span",{className:`${Re.assignmentBadge} ${G==="main"?Re.assignmentBadgeMain:G==="partner"?Re.assignmentBadgePartner:G==="watch"?Re.assignmentBadgeWatch:Re.assignmentBadgeIdle}`,children:se}),n.jsxs("div",{className:Re.assignmentActions,role:"group","aria-label":"Target guild selection",children:[n.jsx("button",{type:"button",className:`${Re.assignmentButton} ${G==="main"?Re.assignmentButtonActive:""}`,onClick:()=>S($.id,"main"),children:"Main"}),n.jsx("button",{type:"button",className:`${Re.assignmentButton} ${G==="watch"?Re.assignmentButtonActive:""}`,onClick:()=>S($.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",className:`${Re.assignmentButton} ${G==="partner"?Re.assignmentButtonActive:""}`,onClick:()=>S($.id,"partner"),children:"Partner"})]})]}),n.jsx("div",{className:Re.membersCell,children:n.jsx("div",{className:Re.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(ve=>n.jsx("button",{type:"button",className:`${Re.decisionButton} ${W===ve?Re.decisionButtonActive:""}`,onClick:()=>k($.id,ve),children:ve==="take"?"Take":ve==="bench"?"Bench":ve==="drop"?"Drop":"?"},ve))})}),n.jsxs("div",{className:`${Re.membersCell} ${Re.partnerPickerCell}`,children:[n.jsx("label",{className:Re.partnerLabel,htmlFor:`partner-select-${$.id}`,children:"Partner"}),n.jsx("select",{id:`partner-select-${$.id}`,className:Re.partnerSelect,value:q!=null?q:(we=h[0])==null?void 0:we.id,onChange:ve=>S($.id,"partner",ve.target.value),children:h.map(ve=>n.jsx("option",{value:ve.id,children:ve.label},ve.id))})]})]},$.id)})]}),l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Re.contextMenuBackdrop,onClick:g}),n.jsxs("div",{className:Re.contextMenu,style:{top:l.y,left:l.x},children:[n.jsx("button",{type:"button",className:Re.contextMenuItem,onClick:()=>S(l.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Re.contextMenuItem,onClick:()=>S(l.memberId,"watch"),children:"Move to Watchlist"}),h.map($=>n.jsxs("button",{type:"button",className:Re.contextMenuItem,onClick:()=>S(l.memberId,"partner",$.id),children:["Move to ",$.label]},$.id))]})]}):null]})}const Uue="_overview_6ytw3_1",zue="_contextBox_6ytw3_15",Hue="_contextKicker_6ytw3_35",Gue="_contextTitle_6ytw3_51",Wue="_contextText_6ytw3_61",que="_contextDetails_6ytw3_71",Kue="_detailItem_6ytw3_85",Que="_detailLabel_6ytw3_99",Xue="_detailValue_6ytw3_113",Yue="_kpiGrid_6ytw3_121",Jue="_kpiCard_6ytw3_133",Zue="_kpiLabel_6ytw3_153",ehe="_kpiValue_6ytw3_167",the="_columnsWrapper_6ytw3_177",she="_column_6ytw3_177",nhe="_columnDropTarget_6ytw3_213",rhe="_columnHeader_6ytw3_223",ihe="_columnKicker_6ytw3_235",ahe="_columnTitle_6ytw3_251",ohe="_columnCount_6ytw3_259",lhe="_columnBody_6ytw3_281",che="_memberCard_6ytw3_293",dhe="_memberTop_6ytw3_337",uhe="_memberName_6ytw3_349",hhe="_memberMeta_6ytw3_357",phe="_memberBadge_6ytw3_369",mhe="_memberBottom_6ytw3_395",fhe="_memberGuild_6ytw3_409",ghe="_memberServer_6ytw3_419",xhe="_memberActions_6ytw3_427",yhe="_emptyList_6ytw3_469",vhe="_emptyWrap_6ytw3_487",bhe="_emptyTitle_6ytw3_501",_he="_emptyText_6ytw3_509",whe="_addPartnerCard_6ytw3_519",jhe="_contextMenuBackdrop_6ytw3_559",She="_contextMenu_6ytw3_559",Nhe="_contextMenuItem_6ytw3_601",Ze={overview:Uue,contextBox:zue,contextKicker:Hue,contextTitle:Gue,contextText:Wue,contextDetails:que,detailItem:Kue,detailLabel:Que,detailValue:Xue,kpiGrid:Yue,kpiCard:Jue,kpiLabel:Zue,kpiValue:ehe,columnsWrapper:the,column:she,columnDropTarget:nhe,columnHeader:rhe,columnKicker:ihe,columnTitle:ahe,columnCount:ohe,columnBody:lhe,memberCard:che,memberTop:dhe,memberName:uhe,memberMeta:hhe,memberBadge:phe,memberBottom:mhe,memberGuild:fhe,memberServer:ghe,memberActions:xhe,emptyList:yhe,emptyWrap:vhe,emptyTitle:bhe,emptyText:_he,addPartnerCard:whe,contextMenuBackdrop:jhe,contextMenu:She,contextMenuItem:Nhe};function khe({members:t,scenario:e,setupState:s,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var H,q,K;const l=(H=e==null?void 0:e.decisions)!=null?H:{},d=(q=e==null?void 0:e.targetGuildAssignments)!=null?q:{},u=s.partnerGuilds.length>0?s.partnerGuilds.map((G,se)=>({id:G.id,label:G.name||`Partner ${se+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(G=>l[G.id]==="take"&&d[G.id]==="main"),p=t.filter(G=>l[G.id]==="bench"),g=u.reduce((G,se)=>(G[se.id]=t.filter(ne=>{const U=d[ne.id];return l[ne.id]==="take"&&(U===`partner:${se.id}`||U==="partner")}),G),{}),v=t.filter(G=>!h.includes(G)&&!p.includes(G)&&!Object.values(g).some(se=>se.includes(G))),[b,S]=J.useState(null),[k,E]=J.useState(null),L=J.useRef(null),M=t.length,N=h.length,y=p.length,_=Object.values(g).reduce((G,se)=>G+se.length,0),D=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-N-_):0,C=J.useCallback((G,se,ne)=>{G&&(se==="main"?(r(G,"take"),i(G,"main")):se==="partner"?(r(G,"take"),i(G,ne?`partner:${ne}`:"partner")):se==="unassigned"?(r(G,"undecided"),i(G,"none")):(r(G,"bench"),i(G,"none")),E(null))},[r,i]),w=J.useCallback((G,se)=>ne=>{ne.preventDefault();const U=ne.dataTransfer.getData("text/plain");U&&C(U,G,se),S(null)},[C]),I=J.useCallback(G=>se=>{se.preventDefault(),S(G)},[]),F=J.useCallback(()=>S(null),[]),R=J.useCallback((G,se)=>{E({memberId:G,...se})},[]),B=J.useCallback(()=>{L.current!==null&&(window.clearTimeout(L.current),L.current=null)},[]),$=J.useCallback((G,se,ne)=>{B(),L.current=window.setTimeout(()=>{R(G,{x:se,y:ne})},550)},[B,R]);if(J.useEffect(()=>()=>B(),[B]),!e)return n.jsxs("div",{className:Ze.emptyWrap,children:[n.jsx("h3",{className:Ze.emptyTitle,children:"Overview"}),n.jsx("p",{className:Ze.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return n.jsxs("div",{className:Ze.emptyWrap,children:[n.jsx("h3",{className:Ze.emptyTitle,children:"No members loaded"}),n.jsx("p",{className:Ze.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const W=(G,se,ne,U,Z)=>n.jsxs("div",{className:`${Ze.column} ${b===G?Ze.columnDropTarget:""}`,onDragOver:I(G),onDragEnter:I(G),onDragLeave:F,onDrop:w(G,Z),children:[n.jsxs("div",{className:Ze.columnHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ze.columnKicker,children:ne}),n.jsx("h4",{className:Ze.columnTitle,children:se})]}),n.jsx("span",{className:Ze.columnCount,children:U.length})]}),n.jsx("div",{className:Ze.columnBody,children:U.length?U.map(le=>{var ee,he,xe,ge;return n.jsxs("div",{className:Ze.memberCard,draggable:!0,onDragStart:we=>we.dataTransfer.setData("text/plain",le.id),onContextMenu:we=>{we.preventDefault(),R(le.id,{x:we.clientX,y:we.clientY})},onTouchStart:we=>{const ve=we.touches[0];ve&&$(le.id,ve.clientX,ve.clientY)},onTouchEnd:B,onTouchCancel:B,children:[n.jsxs("div",{className:Ze.memberTop,children:[n.jsxs("div",{children:[n.jsx("div",{className:Ze.memberName,children:le.name}),n.jsxs("p",{className:Ze.memberMeta,children:[(he=(ee=le.className)!=null?ee:le.class)!=null?he:"Unknown","  ",(xe=le.role)!=null?xe:"Unknown"]})]}),n.jsxs("span",{className:Ze.memberBadge,children:["Lvl ",(ge=le.level)!=null?ge:"?"]})]}),n.jsxs("div",{className:Ze.memberBottom,children:[n.jsxs("span",{className:Ze.memberGuild,children:[le.guildName," ",n.jsxs("span",{className:Ze.memberServer,children:["(",le.server||"Server n/a",")"]})]}),n.jsxs("div",{className:Ze.memberActions,children:[n.jsx("button",{type:"button",onClick:()=>C(le.id,"main"),children:"Main"}),n.jsx("button",{type:"button",onClick:()=>C(le.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",onClick:()=>C(le.id,"partner"),children:"Partner"})]})]})]},le.id)}):n.jsx("div",{className:Ze.emptyList,children:"No players in this list yet."})})]});return n.jsxs("div",{className:Ze.overview,children:[n.jsxs("div",{className:Ze.contextBox,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ze.contextKicker,children:"Setup"}),n.jsx("h3",{className:Ze.contextTitle,children:"Fusion Overview"}),n.jsx("p",{className:Ze.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),n.jsxs("div",{className:Ze.contextDetails,children:[n.jsxs("div",{className:Ze.detailItem,children:[n.jsx("span",{className:Ze.detailLabel,children:"Base Guild"}),n.jsx("strong",{className:Ze.detailValue,children:((K=s.baseGuild)==null?void 0:K.name)||"Unbenannt"})]}),n.jsxs("div",{className:Ze.detailItem,children:[n.jsx("span",{className:Ze.detailLabel,children:"Partner Guilds"}),n.jsx("strong",{className:Ze.detailValue,children:s.partnerGuilds.length})]}),n.jsxs("div",{className:Ze.detailItem,children:[n.jsx("span",{className:Ze.detailLabel,children:"Max Slots"}),n.jsx("strong",{className:Ze.detailValue,children:e.maxSlots})]})]})]}),n.jsxs("div",{className:Ze.kpiGrid,children:[n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Total players"}),n.jsx("strong",{className:Ze.kpiValue,children:M})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Main guild"}),n.jsx("strong",{className:Ze.kpiValue,children:N})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Watchlist"}),n.jsx("strong",{className:Ze.kpiValue,children:y})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Partner guild"}),n.jsx("strong",{className:Ze.kpiValue,children:_})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Free slots"}),n.jsx("strong",{className:Ze.kpiValue,children:D})]})]}),n.jsxs("div",{className:Ze.columnsWrapper,children:[W("unassigned","Unassigned","Noch ohne Planung",v),W("main","Main guild","Take & Assign main",h),W("watch","Watchlist","Bench for review",p),u.map(G=>{var se;return W("partner",G.label,"Take & Assign partner",(se=g[G.id])!=null?se:[],G.id)}),n.jsx("button",{type:"button",className:Ze.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),k?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Ze.contextMenuBackdrop,onClick:()=>E(null)}),n.jsxs("div",{className:Ze.contextMenu,style:{top:k.y,left:k.x},children:[n.jsx("button",{type:"button",className:Ze.contextMenuItem,onClick:()=>C(k.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Ze.contextMenuItem,onClick:()=>C(k.memberId,"watch"),children:"Move to Watchlist"}),u.map(G=>n.jsxs("button",{type:"button",className:Ze.contextMenuItem,onClick:()=>C(k.memberId,"partner",G.id),children:["Move to ",G.label]},G.id))]})]}):null]})}const Che="_scenariosTab_3v4iw_1",The="_scenariosHeader_3v4iw_13",Ehe="_scenariosTitle_3v4iw_35",Ahe="_scenariosText_3v4iw_45",Ihe="_scenarioInfo_3v4iw_57",Rhe="_headerActions_3v4iw_71",Phe="_createButton_3v4iw_81",Lhe="_scenarioList_3v4iw_115",Dhe="_scenarioCard_3v4iw_127",Mhe="_scenarioCardActive_3v4iw_147",Fhe="_scenarioCardTop_3v4iw_157",Bhe="_cardKicker_3v4iw_169",$he="_cardTitle_3v4iw_185",Ohe="_cardText_3v4iw_197",Vhe="_scenarioActiveBadge_3v4iw_209",Uhe="_scenarioMeta_3v4iw_231",zhe="_scenarioMetaLabel_3v4iw_243",Hhe="_scenarioMetaValue_3v4iw_259",Ghe="_scenarioStats_3v4iw_269",Whe="_scenarioStatItem_3v4iw_281",qhe="_scenarioStatLabel_3v4iw_295",Khe="_scenarioStatValue_3v4iw_311",Qhe="_scenarioActions_3v4iw_321",Xhe="_scenarioActionButton_3v4iw_337",Yhe="_scenarioActionActive_3v4iw_367",Jhe="_scenarioActionGroup_3v4iw_377",Zhe="_secondaryActionButton_3v4iw_389",epe="_deleteActionButton_3v4iw_391",tpe="_deleteActionDisabled_3v4iw_443",Ct={scenariosTab:Che,scenariosHeader:The,scenariosTitle:Ehe,scenariosText:Ahe,scenarioInfo:Ihe,headerActions:Rhe,createButton:Phe,scenarioList:Lhe,scenarioCard:Dhe,scenarioCardActive:Mhe,scenarioCardTop:Fhe,cardKicker:Bhe,cardTitle:$he,cardText:Ohe,scenarioActiveBadge:Vhe,scenarioMeta:Uhe,scenarioMetaLabel:zhe,scenarioMetaValue:Hhe,scenarioStats:Ghe,scenarioStatItem:Whe,scenarioStatLabel:qhe,scenarioStatValue:Khe,scenarioActions:Qhe,scenarioActionButton:Xhe,scenarioActionActive:Yhe,scenarioActionGroup:Jhe,secondaryActionButton:Zhe,deleteActionButton:epe,deleteActionDisabled:tpe};function spe({scenarios:t,activeScenarioId:e,onSetActiveScenario:s,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:l}){const d=J.useCallback(p=>{const g=Object.values(p.decisions),v=g.filter(E=>E==="take").length,b=g.filter(E=>E==="bench").length,S=g.filter(E=>E==="drop").length,k=Math.max(0,p.maxSlots-p.reservedSlots-v);return{selected:v,bench:b,drop:S,free:k}},[]),u=p=>{const g=window.prompt("Neuer Szenario-Name",p.name);g!==null&&a(p.id,g)},h=p=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&l(p.id)};return n.jsxs("div",{className:Ct.scenariosTab,children:[n.jsxs("div",{className:Ct.scenariosHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ct.cardKicker,children:"Scenarios"}),n.jsx("h3",{className:Ct.scenariosTitle,children:"Fusion Plans verwalten"}),n.jsx("p",{className:Ct.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),n.jsx("div",{className:Ct.headerActions,children:n.jsx("button",{type:"button",className:Ct.createButton,onClick:r,children:"Neues Szenario"})})]}),n.jsx("p",{className:Ct.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),n.jsx("div",{className:Ct.scenarioList,children:t.map(p=>{const g=d(p),v=p.id===e,b=t.length<=1;return n.jsxs("article",{className:`${Ct.scenarioCard} ${v?Ct.scenarioCardActive:""}`,children:[n.jsxs("div",{className:Ct.scenarioCardTop,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ct.cardKicker,children:"Scenario"}),n.jsx("h3",{className:Ct.cardTitle,children:p.name}),p.description?n.jsx("p",{className:Ct.cardText,children:p.description}):null]}),v?n.jsx("span",{className:Ct.scenarioActiveBadge,children:"Active"}):null]}),n.jsxs("div",{className:Ct.scenarioMeta,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ct.scenarioMetaLabel,children:"Max slots"}),n.jsx("span",{className:Ct.scenarioMetaValue,children:p.maxSlots})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ct.scenarioMetaLabel,children:"Reserved"}),n.jsx("span",{className:Ct.scenarioMetaValue,children:p.reservedSlots})]})]}),n.jsxs("div",{className:Ct.scenarioStats,children:[n.jsxs("div",{className:Ct.scenarioStatItem,children:[n.jsx("span",{className:Ct.scenarioStatLabel,children:"Selected"}),n.jsx("strong",{className:Ct.scenarioStatValue,children:g.selected})]}),n.jsxs("div",{className:Ct.scenarioStatItem,children:[n.jsx("span",{className:Ct.scenarioStatLabel,children:"Free"}),n.jsx("strong",{className:Ct.scenarioStatValue,children:g.free})]}),n.jsxs("div",{className:Ct.scenarioStatItem,children:[n.jsx("span",{className:Ct.scenarioStatLabel,children:"Bench"}),n.jsx("strong",{className:Ct.scenarioStatValue,children:g.bench})]}),n.jsxs("div",{className:Ct.scenarioStatItem,children:[n.jsx("span",{className:Ct.scenarioStatLabel,children:"Drop"}),n.jsx("strong",{className:Ct.scenarioStatValue,children:g.drop})]})]}),n.jsxs("div",{className:Ct.scenarioActions,children:[n.jsx("button",{type:"button",className:`${Ct.scenarioActionButton} ${v?Ct.scenarioActionActive:""}`,onClick:()=>s(p.id),children:"Set active"}),n.jsxs("div",{className:Ct.scenarioActionGroup,children:[n.jsx("button",{type:"button",className:Ct.secondaryActionButton,onClick:()=>i(p.id),children:"Duplicate"}),n.jsx("button",{type:"button",className:Ct.secondaryActionButton,onClick:()=>u(p),children:"Rename"}),n.jsx("button",{type:"button",className:`${Ct.deleteActionButton} ${b?Ct.deleteActionDisabled:""}`,onClick:()=>h(p),disabled:b,children:"Delete"})]})]})]},p.id)})})]})}const npe="_resultWrap_179wi_1",rpe="_emptyState_179wi_13",ipe="_emptyTitle_179wi_35",ape="_emptyText_179wi_43",ope="_resultHeader_179wi_55",lpe="_resultKicker_179wi_79",cpe="_resultTitle_179wi_95",dpe="_resultText_179wi_107",upe="_emptyNote_179wi_119",hpe="_setupSummary_179wi_131",ppe="_setupSummaryTitle_179wi_149",mpe="_setupSummaryRow_179wi_159",fpe="_setupSummaryLabel_179wi_171",gpe="_setupSummaryValue_179wi_185",xpe="_setupSummaryMeta_179wi_195",ype="_setupSummaryTags_179wi_205",vpe="_setupSummaryTag_179wi_205",bpe="_classDistribution_179wi_241",_pe="_resultStats_179wi_253",wpe="_resultStatBadge_179wi_267",jpe="_resultStatBadgeMuted_179wi_269",Spe="_group_179wi_307",Npe="_groupHeader_179wi_327",kpe="_groupTitle_179wi_341",Cpe="_groupHint_179wi_351",Tpe="_groupBadge_179wi_361",Epe="_badgeSuccess_179wi_387",Ape="_badgeMuted_179wi_399",Ipe="_badgeDanger_179wi_409",Rpe="_groupEmpty_179wi_421",Ppe="_groupTable_179wi_437",Lpe="_groupRow_179wi_455",Dpe="_groupHead_179wi_327",Mpe="_groupCell_179wi_491",Fpe="_memberName_179wi_501",Bpe="_memberBadge_179wi_509",tt={resultWrap:npe,emptyState:rpe,emptyTitle:ipe,emptyText:ape,resultHeader:ope,resultKicker:lpe,resultTitle:cpe,resultText:dpe,emptyNote:upe,setupSummary:hpe,setupSummaryTitle:ppe,setupSummaryRow:mpe,setupSummaryLabel:fpe,setupSummaryValue:gpe,setupSummaryMeta:xpe,setupSummaryTags:ype,setupSummaryTag:vpe,classDistribution:bpe,resultStats:_pe,resultStatBadge:wpe,resultStatBadgeMuted:jpe,group:Spe,groupHeader:Npe,groupTitle:kpe,groupHint:Cpe,groupBadge:Tpe,badgeSuccess:Epe,badgeMuted:Ape,badgeDanger:Ipe,groupEmpty:Rpe,groupTable:Ppe,groupRow:Lpe,groupHead:Dpe,groupCell:Mpe,memberName:Fpe,memberBadge:Bpe};function $pe({members:t,scenario:e,setupState:s}){var S;if(!e)return n.jsxs("div",{className:tt.emptyState,children:[n.jsx("h3",{className:tt.emptyTitle,children:"No scenario selected"}),n.jsx("p",{className:tt.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return n.jsxs("div",{className:tt.emptyState,children:[n.jsx("h3",{className:tt.emptyTitle,children:"No members available"}),n.jsx("p",{className:tt.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:l}=J.useMemo(()=>{const k=[],E=[],L=[],M=[];return t.forEach(N=>{var _;const y=(_=e.decisions[N.id])!=null?_:"undecided";y==="take"?k.push(N):y==="bench"?E.push(N):y==="drop"?L.push(N):M.push(N)}),{takeMembers:k,benchMembers:E,dropMembers:L,undecidedMembers:M}},[t,e.decisions]),d=r.length,u=i.length,h=a.length,p=Math.max(0,e.maxSlots-d),g=e.maxSlots?Math.round(d/e.maxSlots*100):0,v=J.useMemo(()=>{const k=r.reduce((L,M)=>{var y,_;const N=(y=M.className)!=null?y:M.class;return N&&(L[N]=((_=L[N])!=null?_:0)+1),L},{});return Object.entries(k).map(([L,M])=>`${L}: ${M}`).join(" | ")},[r]),b=(k,E,L,M)=>n.jsxs("div",{className:tt.group,children:[n.jsxs("div",{className:tt.groupHeader,children:[n.jsxs("div",{children:[n.jsx("h4",{className:tt.groupTitle,children:k}),n.jsx("span",{className:tt.groupHint,children:E})]}),n.jsx("span",{className:`${tt.groupBadge} ${M}`,children:L.length})]}),L.length===0?n.jsx("div",{className:tt.groupEmpty,children:"No players in this group."}):n.jsxs("div",{className:tt.groupTable,role:"table",children:[n.jsxs("div",{className:`${tt.groupRow} ${tt.groupHead}`,role:"row",children:[n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Name"}),n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Level"}),n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Guild"}),n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Class"})]}),L.map(N=>{var y,_;return n.jsxs("div",{className:tt.groupRow,role:"row",children:[n.jsx("div",{className:tt.groupCell,role:"cell",children:n.jsx("span",{className:tt.memberName,children:N.name})}),n.jsx("div",{className:tt.groupCell,role:"cell",children:n.jsxs("span",{className:tt.memberBadge,children:["Lvl ",N.level]})}),n.jsx("div",{className:tt.groupCell,role:"cell",children:N.guildName}),n.jsx("div",{className:tt.groupCell,role:"cell",children:(_=(y=N.className)!=null?y:N.class)!=null?_:"-"})]},N.id)})]})]});return n.jsxs("div",{className:tt.resultWrap,children:[n.jsxs("div",{className:tt.resultHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:tt.resultKicker,children:"Final Plan"}),n.jsx("h3",{className:tt.resultTitle,children:e.name}),n.jsx("p",{className:tt.resultText,children:(S=e.description)!=null?S:"Zusammenfassung des aktuellen Plans."}),r.length===0?n.jsx("p",{className:tt.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,v?n.jsxs("p",{className:tt.classDistribution,children:["Class distribution: ",v]}):null,n.jsxs("div",{className:tt.setupSummary,children:[n.jsx("div",{className:tt.setupSummaryTitle,children:"Fusion plan between"}),s.baseGuild?n.jsxs("div",{className:tt.setupSummaryRow,children:[n.jsx("span",{className:tt.setupSummaryLabel,children:"Base"}),n.jsxs("span",{className:tt.setupSummaryValue,children:[s.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:tt.setupSummaryMeta,children:["(",s.baseGuild.server||"Server n/a",")"]})]})]}):n.jsxs("div",{className:tt.setupSummaryRow,children:[n.jsx("span",{className:tt.setupSummaryLabel,children:"Base"}),n.jsx("span",{className:tt.setupSummaryMeta,children:"No base guild selected."})]}),n.jsxs("div",{className:tt.setupSummaryRow,children:[n.jsx("span",{className:tt.setupSummaryLabel,children:"Partners"}),s.partnerGuilds.length?n.jsx("div",{className:tt.setupSummaryTags,children:s.partnerGuilds.map(k=>n.jsxs("span",{className:tt.setupSummaryTag,children:[k.name||"Unbenannt"," ",n.jsxs("span",{className:tt.setupSummaryMeta,children:["(",k.server||"Server n/a",")"]})]},k.id))}):n.jsx("span",{className:tt.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),n.jsxs("div",{className:tt.resultStats,children:[n.jsxs("span",{className:tt.resultStatBadge,children:["Members selected: ",d," / ",e.maxSlots]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Bench: ",u]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Drop: ",h]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Free slots: ",p]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Utilization: ",g,"%"]}),l.length>0?n.jsxs("span",{className:tt.resultStatBadgeMuted,children:["Undecided: ",l.length]}):null]})]}),b("Final roster (selected)","Take",r,tt.badgeSuccess),b("Bench (waiting list)","Bench",i,tt.badgeMuted),b("Not included","Drop",a,tt.badgeDanger)]})}const Om=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],qN=t=>t.reduce((e,s)=>(e[s.id]="undecided",e),{}),KN=t=>t.reduce((e,s)=>(e[s.id]="none",e),{}),Ope=(t,e,s)=>{var r,i,a,l,d,u,h,p,g,v,b,S,k,E,L,M;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(l=t.role)!=null?l:"Unknown",level:(d=t.level)!=null?d:void 0,guildName:e,server:s,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(p=t.conBase)!=null?p:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(v=t.totalStats)!=null?v:void 0,values:{treasury:(b=t.treasury)!=null?b:void 0,mine:(S=t.mine)!=null?S:void 0,attrTotal:(k=t.attrTotal)!=null?k:void 0,conTotal:(E=t.conTotal)!=null?E:void 0,lastScan:(L=t.lastScan)!=null?L:void 0,lastActivity:(M=t.lastActivity)!=null?M:void 0}}},Vpe=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const s=(i=t.name)==null?void 0:i.trim();return s||null},QN=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,XN=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],Upe=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function zpe(){var $;const[t,e]=J.useState("setup"),[s,r]=J.useState(Om),[i,a]=J.useState(!1),[l,d]=J.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=J.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:qN(Om),targetGuildAssignments:KN(Om),isDefault:!0}]),[p,g]=J.useState("plan-a"),v=J.useMemo(()=>{var W,H;return(H=(W=u.find(q=>q.id===p))!=null?W:u[0])!=null?H:null},[p,u]),b=J.useMemo(()=>{var K,G;const W=l.baseGuild,H=(K=W==null?void 0:W.name)==null?void 0:K.trim(),q=(G=W==null?void 0:W.server)==null?void 0:G.trim();return!!(H&&q)},[l.baseGuild]),S=J.useMemo(()=>s.length>0,[s.length]),k=J.useMemo(()=>u.length>0,[u.length]),E=J.useMemo(()=>{const W=[];return b||W.push("Setup incomplete - no base guild selected."),b&&!S&&W.push("No members loaded yet. Check scans or setup."),k||W.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),W},[b,S,k]),L=(W,H)=>{h(q=>q.map(K=>K.id===p?{...K,decisions:{...K.decisions,[W]:H}}:K))},M=(W,H)=>{h(q=>q.map(K=>{var G;return K.id===p?{...K,targetGuildAssignments:{...(G=K.targetGuildAssignments)!=null?G:{},[W]:H}}:K}))},N=W=>{const H=Number(W)||0;h(q=>q.map(K=>K.id===p?{...K,maxSlots:Math.max(0,H)}:K))},y=()=>{h(W=>{const H={id:QN(),name:`Plan ${W.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:qN(s),targetGuildAssignments:KN(s)};return g(H.id),[...W,H]})},_=W=>{h(H=>{var G;const q=H.find(se=>se.id===W);if(!q)return H;const K={...q,id:QN(),name:`${q.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...q.decisions},targetGuildAssignments:{...(G=q.targetGuildAssignments)!=null?G:{}}};return g(K.id),[...H,K]})},D=(W,H)=>{const q=H.trim();q&&h(K=>K.map(G=>G.id===W?{...G,name:q}:G))},C=W=>{h(H=>{if(H.length<=1)return H;const q=H.filter(K=>K.id!==W);return q.length?(p===W&&g(q[0].id),q):H})};J.useEffect(()=>{if(l.mode!=="scan"){a(!1),r(Om);return}const W=[l.baseGuild,...l.partnerGuilds].filter(Boolean);if(W.length===0){a(!1),r([]);return}let H=!1;async function q(){var K,G,se,ne,U,Z,le,ee,he,xe;a(!0);try{const ge=[];for(const we of W){const ve=Vpe(we);if(!ve)continue;const ce=Wt(ct,`guilds/${ve}/latest/latest`),ke=await Xs(ce),be=ke.exists()?ke.data():null,Ue=(U=(ne=(G=(K=we.name)==null?void 0:K.trim())!=null?G:be==null?void 0:be.name)!=null?ne:(se=be==null?void 0:be.values)==null?void 0:se.Name)!=null?U:ve,Ke=(xe=(he=(le=(Z=we.server)==null?void 0:Z.trim())!=null?le:be==null?void 0:be.server)!=null?he:(ee=be==null?void 0:be.values)==null?void 0:ee.Server)!=null?xe:null,Tt=Wt(ct,`guilds/${ve}/snapshots/members_summary`),Mt=await Xs(Tt);if(!Mt.exists())continue;const Ft=Mt.data();(Array.isArray(Ft.members)?Ft.members:[]).forEach(is=>{ge.push(Ope(is,Ue,Ke))})}H||r(ge)}catch(ge){console.error("[FusionPlanner] Failed to load members",ge),H||r([])}finally{H||a(!1)}}return r([]),q(),()=>{H=!0}},[l.baseGuild,l.partnerGuilds,l.mode]),J.useEffect(()=>{i||h(W=>W.map(H=>{var se;const q=new Set(s.map(ne=>ne.id)),K={...H.decisions},G={...(se=H.targetGuildAssignments)!=null?se:{}};return s.forEach(ne=>{K[ne.id]||(K[ne.id]="undecided"),G[ne.id]||(G[ne.id]="none")}),Object.keys(K).forEach(ne=>{q.has(ne)||delete K[ne]}),Object.keys(G).forEach(ne=>{q.has(ne)||delete G[ne]}),{...H,decisions:K,targetGuildAssignments:G}}))},[s,i]);const w=W=>{d(H=>({...H,mode:W}))},I=W=>{d(H=>{var K,G,se;const q=(K=H.baseGuild)!=null?K:{id:"base-1",kind:"base",name:"",server:""};return{...H,baseGuild:{...q,...W.id?{id:W.id}:{},name:(G=W.name)!=null?G:q.name,server:(se=W.server)!=null?se:q.server}}})},F=W=>{var G;if(!W.name.trim()||!W.server.trim())return;const H=W.name.trim(),q=W.server.trim(),K=(G=W.id)==null?void 0:G.trim();d(se=>({...se,partnerGuilds:[...se.partnerGuilds,{id:K&&!K.startsWith("partner-")?K:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:H,server:q,kind:"partner"}]}))},R=W=>{d(H=>({...H,partnerGuilds:H.partnerGuilds.filter(q=>q.id!==W)}))},B=()=>{switch(t){case"setup":return n.jsx(Gde,{setupState:l,onChangeMode:w,onChangeBaseGuild:I,onAddPartnerGuild:F,onRemovePartnerGuild:R});case"members":return n.jsx(Vue,{members:s,scenario:v,onChangeScenarioDecision:L,onChangeScenarioTargetGuild:M,onChangeScenarioMaxSlots:N,setupState:l});case"overview":return n.jsx(khe,{members:s,scenario:v,setupState:l,onChangeScenarioDecision:L,onChangeScenarioTargetGuild:M,onAddPartnerGuild:W=>F({name:W,server:"tbd"})});case"scenarios":return n.jsx(spe,{scenarios:u,activeScenarioId:p,onSetActiveScenario:g,onCreateScenario:y,onDuplicateScenario:_,onRenameScenario:D,onDeleteScenario:C});case"result":return n.jsx($pe,{members:s,scenario:v,setupState:l});default:return null}};return n.jsx(Et,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:n.jsxs("div",{className:st.page,children:[n.jsxs("header",{className:st.header,children:[n.jsxs("div",{className:st.headerLeading,children:[n.jsx(rs,{to:"/guild-hub",className:st.backLink,children:"Back to Guild Hub"}),n.jsxs("div",{className:st.headerStack,children:[n.jsx("p",{className:st.kicker,children:"Guild Hub"}),n.jsx("h1",{className:st.title,children:"Fusion Planner"}),n.jsx("p",{className:st.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),n.jsxs("div",{className:st.headerActions,children:[n.jsx("button",{type:"button",className:st.primaryAction,children:"Neues Setup"}),n.jsx("button",{type:"button",className:st.secondaryAction,children:"Checkliste"})]})]}),E.length?n.jsx("div",{className:st.plannerNotice,role:"status","aria-live":"polite",children:E.map(W=>n.jsxs("div",{className:`${st.noticeItem} ${W.toLowerCase().includes("no base guild")?st.noticeWarning:""}`,children:[n.jsx("span",{className:st.noticeDot,"aria-hidden":!0}),n.jsx("span",{children:W})]},W))}):null,n.jsxs("section",{className:st.tabSection,"aria-label":"Fusion Planner Tabs",children:[n.jsx("div",{className:st.tabBar,children:XN.map(W=>{const H=W.key===t;return n.jsxs("button",{type:"button",className:`${st.tabItem} ${H?st.tabItemActive:""}`,onClick:()=>e(W.key),"aria-pressed":H,children:[n.jsx("span",{className:st.tabLabel,children:W.label}),n.jsx("span",{className:st.tabHelper,children:W.helper})]},W.key)})}),n.jsxs("div",{className:st.tabPanel,children:[n.jsx("span",{className:st.tabBadge,children:($=XN.find(W=>W.key===t))==null?void 0:$.label}),B()]})]}),n.jsxs("section",{className:st.infoStrip,children:[n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Status"}),n.jsx("strong",{children:"Entwurf"}),n.jsx("p",{className:st.infoHint,children:"Bereit fuer weitere Eingaben."})]}),n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Slots geplant"}),n.jsx("strong",{children:"0 / 40"}),n.jsx("p",{className:st.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Szenarien"}),n.jsx("strong",{children:"3"}),n.jsx("p",{className:st.infoHint,children:"Baseline, Optimistic, Risiko."})]}),n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Letztes Update"}),n.jsx("strong",{children:"vor wenigen Minuten"}),n.jsx("p",{className:st.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),n.jsx("section",{className:st.stageGrid,children:Upe.map(W=>n.jsxs("article",{className:st.panel,children:[n.jsxs("div",{className:st.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:st.panelKicker,children:W.step}),n.jsx("h2",{className:st.panelTitle,children:W.title}),n.jsx("p",{className:st.panelLead,children:W.description})]}),W.badge?n.jsx("span",{className:st.badge,children:W.badge}):null]}),n.jsx("div",{className:st.panelBody,children:n.jsx("div",{className:st.placeholderGrid,children:W.placeholders.map(H=>n.jsxs("div",{className:st.placeholderCard,children:[n.jsx("div",{className:st.placeholderTitle,children:H}),n.jsx("p",{className:st.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},H))})})]},W.key))}),n.jsx("section",{className:st.helperSection,children:n.jsxs("div",{className:st.helperCard,children:[n.jsxs("div",{children:[n.jsx("p",{className:st.helperKicker,children:"Result"}),n.jsx("h3",{className:st.helperTitle,children:"Finaler Merge-Plan"}),n.jsx("p",{className:st.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),n.jsxs("div",{className:st.helperActions,children:[n.jsx("button",{type:"button",className:st.secondaryAction,children:"Teilen"}),n.jsx("button",{type:"button",className:st.primaryAction,children:"Review starten"})]})]})})]})})}const k0=["EU-01","EU-02","US-01","US-02","ASIA-01"],th=new Intl.NumberFormat("de-DE");function Hpe(){const t=jd("(min-width: 768px)"),[e,s]=J.useState("all"),[r,i]=J.useState(null),[a,l]=J.useState(null),[d,u]=J.useState(null),[h,p]=J.useState(null),g=[r,a].filter(Boolean).length,v=J.useMemo(()=>{const R=[d,h].filter(Boolean);if(!R.length)return 0;const B=R.reduce(($,W)=>{var H;return $+((H=W.members)!=null?H:0)},0);return Math.round(B/R.length)},[d,h]),[b,S]=J.useState(null),[k,E]=J.useState(!1),L=J.useRef(null);Sd(L,k&&!t),J.useEffect(()=>{t&&E(!1)},[t]),J.useEffect(()=>{if(!b)return;const R=$=>{const W=$.target;W&&(W.closest(`.${ie.freshnessBadge}`)||W.closest(`.${ie.freshnessPopover}`)||S(null))},B=$=>{$.key==="Escape"&&S(null)};return document.addEventListener("pointerdown",R),document.addEventListener("keydown",B),()=>{document.removeEventListener("pointerdown",R),document.removeEventListener("keydown",B)}},[b]);const M=J.useMemo(()=>d?jh(d.nextUpdateAt,Date.now()):"",[d]),N=J.useMemo(()=>h?jh(h.nextUpdateAt,Date.now()):"",[h]),y=()=>E(!0),_=()=>E(!1),D=R=>{s(R)},C=(R,B)=>{R==="guildA"?(i(B.id),u(B)):(l(B.id),p(B))},w=R=>{R==="guildA"?(i(null),u(null)):(l(null),p(null))},I=R=>{S(B=>B===R?null:R)},F=d&&h;return n.jsxs(Et,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[n.jsxs("div",{className:ie.page,children:[n.jsxs("header",{className:ie.header,children:[n.jsxs("div",{className:ie.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.kicker,children:"Guild Hub"}),n.jsx("h1",{className:ie.title,children:"Gilden vergleichen"}),n.jsx("p",{className:ie.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),n.jsx("div",{className:ie.headerActions,children:!t&&n.jsx("button",{type:"button",className:ie.secondaryAction,onClick:y,children:"Filter"})})]}),n.jsxs("div",{className:ie.infoStrip,children:[n.jsxs("div",{className:ie.infoCard,children:[n.jsx("span",{className:ie.infoLabel,children:"Pool"}),n.jsxs("strong",{children:[th.format(g)," Gilden"]})]}),n.jsxs("div",{className:ie.infoCard,children:[n.jsx("span",{className:ie.infoLabel,children:"Durchschnitt Mitglieder"}),n.jsx("strong",{children:th.format(v)})]}),n.jsxs("div",{className:ie.infoCard,children:[n.jsx("span",{className:ie.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:ie.inlineFilters,children:n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ie.select,value:e,onChange:R=>D(R.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),k0.map(R=>n.jsx("option",{value:R,children:R},R))]})]})})]}),n.jsxs("div",{className:ie.layout,children:[n.jsxs("section",{className:ie.selectionColumn,children:[n.jsx(YN,{title:"Gilde A",slot:"guildA",selectedGuild:d,excludeId:a,onSelect:C,onClear:w,serverFilter:e,onServerChange:D}),n.jsx(YN,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:C,onClear:w,serverFilter:e,onServerChange:D})]}),n.jsxs("section",{className:ie.comparisonColumn,children:[n.jsxs("div",{className:ie.comparisonCard,children:[n.jsxs("div",{className:ie.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.kicker,children:"Vergleich"}),n.jsx("h2",{className:ie.sectionTitle,children:"Kennzahlen"})]}),F&&n.jsxs("span",{className:ie.diffBadge,children:["Delta Mitglieder:"," ",th.format(d.members-h.members)]})]}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:ie.metricGrid,children:[n.jsx(JN,{label:"Mitglieder",aValue:d.members,bValue:h.members}),n.jsx(JN,{label:"Durchschnittslevel",aValue:d.avgLevel,bValue:h.avgLevel,isDecimal:!0}),n.jsx(Gpe,{guildA:d,guildB:h,countdownA:M,countdownB:N,activePopover:b,onToggle:I})]}),n.jsx(Wpe,{guildA:d,guildB:h})]}):n.jsx("div",{className:ie.emptyState,children:n.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:ie.supportPanels,children:[n.jsx(qpe,{}),n.jsx(Kpe,{})]})]})]})]}),!t&&n.jsx("div",{className:`${ie.sheetOverlay} ${k?ie.sheetOpen:""}`,children:n.jsxs("div",{className:ie.sheet,role:"dialog","aria-modal":"true",ref:L,children:[n.jsxs("header",{className:ie.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:ie.clearButton,onClick:_,children:"Schliessen"})]}),n.jsx("div",{className:ie.sheetBody,children:n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ie.select,value:e,onChange:R=>D(R.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),k0.map(R=>n.jsx("option",{value:R,children:R},R))]})]})})]})})]})}function YN({title:t,slot:e,selectedGuild:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=J.useState(""),p=wd(u,300);J.useEffect(()=>{h("")},[s,l]);const{results:g,loading:v}=Qpe(p,l,r);return n.jsxs("article",{className:ie.selectionCard,children:[n.jsxs("div",{className:ie.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.slotLabel,children:t}),n.jsx("p",{className:ie.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:ie.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:ie.slotBody,children:[n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ie.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),k0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:ie.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:ie.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:ie.resultList,role:"list",children:[v&&n.jsx("div",{className:ie.emptyResult,children:"Lade..."}),!v&&g.length===0&&n.jsx("div",{className:ie.emptyResult,children:"Keine Gilde gefunden."}),!v&&g.map(b=>n.jsxs("div",{className:ie.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:ie.resultName,children:b.name}),n.jsxs("p",{className:ie.resultMeta,children:[b.server," - ",b.members," Mitglieder"]})]}),n.jsx("button",{type:"button",className:ie.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:ie.selectedCard,children:[n.jsx("p",{className:ie.selectedName,children:s.name}),n.jsxs("p",{className:ie.selectedMeta,children:[s.server," - ",s.members," Mitglieder - Durchschnittslevel"," ",s.avgLevel.toFixed(1)]}),n.jsx("p",{className:ie.selectedTagline,children:s.tagline})]})]})]})}function JN({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):th.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):th.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:ie.metricCard,children:[n.jsx("p",{className:ie.metricLabel,children:t}),n.jsxs("div",{className:ie.metricValues,children:[n.jsx("span",{"aria-label":"Gilde A",children:i(e)}),n.jsx("span",{className:ie.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Gilde B",children:i(s)})]}),n.jsx("p",{className:ie.metricDelta,children:l})]})}function Gpe({guildA:t,guildB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:ie.metricCard,children:[n.jsx("p",{className:ie.metricLabel,children:"Freshness"}),n.jsx("div",{className:ie.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:ie.freshnessItem,children:[n.jsxs("button",{type:"button",className:ie.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:Qh(l.lastScanAt)})]}),h&&n.jsxs("div",{className:ie.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:ie.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:Db[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:Zi(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[Zi(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function Wpe({guildA:t,guildB:e}){const s=J.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return n.jsxs("div",{className:ie.classCard,children:[n.jsx("p",{className:ie.metricLabel,children:"Klassenverteilung"}),n.jsx("div",{className:ie.classGrid,children:[t,e].map(r=>n.jsxs("div",{className:ie.classColumn,children:[n.jsx("h3",{children:r.name}),n.jsx("div",{className:ie.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>n.jsxs("span",{style:{width:`${i.percent}%`},className:ie.classSlice,children:[n.jsx("small",{children:i.label}),n.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),n.jsx("ul",{className:ie.classLegend,children:s.map(r=>n.jsx("li",{children:r},r))})]})}function qpe(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return n.jsxs("section",{className:ie.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:ie.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function Kpe(){return n.jsxs("section",{className:ie.infoCardExtended,children:[n.jsx("h3",{children:"Transfers-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:ie.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),n.jsx("button",{type:"button",className:ie.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function Qpe(t,e,s){const[r,i]=J.useState([]),[a,l]=J.useState(!1);return J.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const p=d.toLowerCase(),g=jg(ct,"latest"),v=await un(On(g,Ca("nameFold"),Al(p),Il(p+""),Zn(15))),b=await un(On(g,Mo("nameNgrams","array-contains",p),Zn(15))),S=new Set,k=[],E=L=>{var B,$,W,H,q,K,G,se,ne,U,Z,le,ee,he,xe,ge,we,ve,ce,ke,be;const M=L.data(),y=(B=L.ref.parent)==null?void 0:B.parent,_=y==null?void 0:y.parent;if((_==null?void 0:_.id)!=="guilds")return;const C=(W=($=y==null?void 0:y.id)!=null?$:M.guildIdentifier)!=null?W:L.id;if(!C||S.has(C)||s&&C===s)return;const w=(K=(q=M.name)!=null?q:(H=M.values)==null?void 0:H.Name)!=null?K:"Unbekannte Gilde",I=(ne=(se=M.server)!=null?se:(G=M.values)==null?void 0:G.Server)!=null?ne:"Unknown";if(e!=="all"&&I!==e)return;const F=(he=(ee=(Z=M.memberCount)!=null?Z:(U=M.values)==null?void 0:U["Guild Member Count"])!=null?ee:(le=M.values)==null?void 0:le.GuildMemberCount)!=null?he:0,R=(we=(ge=M.updatedAt)!=null?ge:(xe=M.values)==null?void 0:xe.UpdatedAt)!=null?we:M.timestamp?new Date(M.timestamp*1e3).toISOString():new Date().toISOString();S.add(C),k.push({id:C,name:w,tagline:(ve=M.tagline)!=null?ve:"",server:I,members:F,avgLevel:(be=(ke=M.avgLevel)!=null?ke:(ce=M.values)==null?void 0:ce.AvgLevel)!=null?be:0,lastScanAt:R,updatedAt:R,nextUpdateAt:R,freshness:"unknown",classes:[]})};v.forEach(E),b.forEach(E),u||(k.sort((L,M)=>L.name.localeCompare(M.name)),i(k))}catch(p){console.error("[GuildHub CompareGuilds] guild search failed",p),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const Xpe="_page_o27vc_1",Ype="_header_o27vc_13",Jpe="_headerStack_o27vc_25",Zpe="_kicker_o27vc_37",eme="_title_o27vc_53",tme="_headerActions_o27vc_65",sme="_primaryAction_o27vc_77",nme="_secondaryAction_o27vc_79",rme="_infoStrip_o27vc_109",ime="_infoPill_o27vc_129",ame="_freshnessWrapper_o27vc_163",ome="_freshnessBadge_o27vc_171",lme="_popover_o27vc_191",cme="_popoverLabel_o27vc_221",dme="_filterToolbar_o27vc_231",ume="_filterSheetButton_o27vc_241",hme="_inlineFilters_o27vc_259",pme="_searchInput_o27vc_271",mme="_select_o27vc_273",fme="_chipGroup_o27vc_295",gme="_chip_o27vc_295",xme="_chipActive_o27vc_325",yme="_levelRow_o27vc_335",vme="_sortControls_o27vc_363",bme="_sortLabel_o27vc_375",_me="_directionButton_o27vc_385",wme="_listBody_o27vc_403",jme="_tableWrapper_o27vc_415",Sme="_table_o27vc_415",Nme="_cardFooter_o27vc_459",kme="_panel_o27vc_461",Cme="_formPanel_o27vc_463",Tme="_statusSelect_o27vc_481",Eme="_stickyColumn_o27vc_515",Ame="_rowButton_o27vc_529",Ime="_scanBadge_o27vc_545",Rme="_cardList_o27vc_561",Pme="_card_o27vc_459",Lme="_cardHeader_o27vc_593",Dme="_cardTitle_o27vc_605",Mme="_cardMeta_o27vc_623",Fme="_cardNotes_o27vc_635",Bme="_emptyState_o27vc_659",$me="_sheetBackdrop_o27vc_675",Ome="_sheet_o27vc_675",Vme="_sheetHandle_o27vc_717",Ume="_sheetBody_o27vc_733",zme="_sheetLabel_o27vc_749",Hme="_sheetActions_o27vc_785",Gme="_overlay_o27vc_797",Wme="_drawer_o27vc_837",qme="_modal_o27vc_845",Kme="_panelHeader_o27vc_853",Qme="_section_o27vc_867",Xme="_tagRow_o27vc_899",Yme="_historyList_o27vc_913",Jme="_panelFooter_o27vc_943",Zme="_formOverlay_o27vc_955",efe="_formGrid_o27vc_1003",tfe="_warning_o27vc_1015",sfe="_pagination_o27vc_1033",Ce={page:Xpe,header:Ype,headerStack:Jpe,kicker:Zpe,title:eme,headerActions:tme,primaryAction:sme,secondaryAction:nme,infoStrip:rme,infoPill:ime,freshnessWrapper:ame,freshnessBadge:ome,popover:lme,popoverLabel:cme,filterToolbar:dme,filterSheetButton:ume,inlineFilters:hme,searchInput:pme,select:mme,chipGroup:fme,chip:gme,chipActive:xme,levelRow:yme,sortControls:vme,sortLabel:bme,directionButton:_me,listBody:wme,tableWrapper:jme,table:Sme,cardFooter:Nme,panel:kme,formPanel:Cme,statusSelect:Tme,stickyColumn:Eme,rowButton:Ame,scanBadge:Ime,cardList:Rme,card:Pme,cardHeader:Lme,cardTitle:Dme,cardMeta:Mme,cardNotes:Fme,emptyState:Bme,sheetBackdrop:$me,sheet:Ome,sheetHandle:Vme,sheetBody:Ume,sheetLabel:zme,sheetActions:Hme,overlay:Gme,drawer:Wme,modal:qme,panelHeader:Kme,section:Qme,tagRow:Xme,historyList:Yme,panelFooter:Jme,formOverlay:Zme,formGrid:efe,warning:tfe,pagination:sfe},Wf=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],qf=["EU-01","EU-02","US-01","US-02","ASIA-01"],Mb={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},ZN={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},yv={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},nfe=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:vo(2),updatedAt:vo(3),freshness:"f1",history:[{date:Ar(1),message:"Interview abgeschlossen"},{date:Ar(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:vo(10),updatedAt:vo(11),freshness:"f3",history:[{date:Ar(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:vo(20),updatedAt:vo(5),freshness:"f4",history:[{date:Ar(4),message:"Probe erfolgreich"},{date:Ar(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:Ar(2),updatedAt:Ar(2),freshness:"f5",history:[{date:Ar(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:Ar(3),updatedAt:Ar(1),freshness:"f6",history:[{date:Ar(1),message:"Bewerbung zurueckgezogen"},{date:Ar(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:vo(5),updatedAt:vo(5),freshness:"f2",history:[{date:Ar(1),message:"Profil verifiziert"}]}];function ek(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function rfe(t,e,s){const r=s.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),l=e.status==="all"||i.status===e.status,d=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&l&&d&&u&&h})}function ife(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"name":l=i.name.localeCompare(a.name);break;case"level":l=i.level-a.level;break;case"status":l=i.status.localeCompare(a.status);break;case"lastScan":l=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return s==="asc"?l:-l}),r}function afe(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function df(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function ofe(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function lfe(t){return t.length?t.reduce((e,s)=>e?ZN[s.freshness]>ZN[e.freshness]?s:e:s,null):null}function Ar(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function vo(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function cfe(){var H;const[t,e]=J.useState(nfe),[s,r]=J.useState(yv),[i,a]=J.useState(yv),l=wd(s.q,300),d=J.useMemo(()=>{const q=rfe(t,s,l);return ife(q,s.sort,s.dir)},[t,s,l]),u=J.useMemo(()=>afe(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),p=jd("(min-width: 768px)"),g=jd("(min-width: 1024px)"),[v,b]=J.useState(!1),[S,k]=J.useState(null),E=(H=t.find(q=>q.id===S))!=null?H:null,L=J.useRef(null);Sd(L,!!E&&!g);const[M,N]=J.useState(null),[y,_]=J.useState(!1),D=J.useRef(null);Sd(D,y);const C=J.useMemo(()=>lfe(t),[t]),w=C&&C.lastScanAt?ofe(C.lastScanAt):"unbekannt",I=q=>{const K=ek(q);r(K),a(K)},F=(q,K)=>{const G=ek({...s,[q]:K,page:q==="page"?K:1});I(G)},R=()=>{I(i),b(!1)},B=()=>{I(yv),b(!1)},$=(q,K)=>{e(G=>G.map(se=>se.id===q?{...se,status:K,updatedAt:new Date().toISOString()}:se))},W=q=>{e(K=>K.some(se=>se.id===q.id)?K.map(se=>se.id===q.id?q:se):[q,...K]),_(!1)};return n.jsxs(Et,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[n.jsxs("div",{className:Ce.page,children:[n.jsxs("header",{className:Ce.header,children:[n.jsxs("div",{className:Ce.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.kicker,children:"Recruiting"}),n.jsx("h1",{className:Ce.title,children:"Waitlist"})]}),n.jsxs("div",{className:Ce.headerActions,children:[n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:()=>{N(null),_(!0)},children:"Neuer Eintrag"}),!p&&n.jsx("button",{type:"button",className:Ce.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>b(!0),children:"Filter"})]})]}),n.jsxs("div",{className:Ce.infoStrip,children:[n.jsx(vv,{label:"Neu",value:d.filter(q=>q.status==="new").length}),n.jsx(vv,{label:"In Review",value:d.filter(q=>q.status==="in_review").length}),n.jsx(vv,{label:"Zugesagt",value:d.filter(q=>q.status==="accepted").length}),C&&n.jsx(dfe,{label:Mb[C.freshness],updatedAt:C.lastScanAt,countdown:w})]})]}),n.jsx("section",{className:Ce.filterToolbar,children:p?n.jsx(ufe,{filters:s,onChange:F,onToggleClass:q=>{const K=s.classes.includes(q)?s.classes.filter(G=>G!==q):[...s.classes,q];F("classes",K)},onToggleServer:q=>{const K=s.servers.includes(q)?s.servers.filter(G=>G!==q):[...s.servers,q];F("servers",K)}}):n.jsx("button",{type:"button",className:Ce.filterSheetButton,onClick:()=>b(!0),children:"Filter & Sortierung"})}),n.jsx("section",{className:Ce.listBody,children:p?n.jsx(hfe,{items:u,sort:s.sort,dir:s.dir,onSortChange:q=>{const K=s.sort===q&&s.dir==="asc"?"desc":"asc";F("sort",q),F("dir",K)},onSelect:k,onStatusChange:$}):n.jsx(pfe,{items:u,onSelect:k,onStatusChange:$})}),n.jsx(ffe,{page:s.page,totalPages:h,onChange:q=>F("page",q)})]}),v&&n.jsx(mfe,{filters:i,onChange:a,onToggleClass:q=>a(K=>({...K,classes:K.classes.includes(q)?K.classes.filter(G=>G!==q):[...K.classes,q]})),onToggleServer:q=>a(K=>({...K,servers:K.servers.includes(q)?K.servers.filter(G=>G!==q):[...K.servers,q]})),onClose:()=>b(!1),onApply:R,onReset:B}),E&&n.jsx(xA,{ref:L,item:E,mode:g?"drawer":"modal",onClose:()=>k(null),onEdit:()=>{N(E),_(!0),k(null)}}),y&&n.jsx(yA,{ref:D,item:M,entries:t,onClose:()=>_(!1),onSubmit:W})]})}function vv({label:t,value:e}){return n.jsxs("div",{className:Ce.infoPill,children:[n.jsx("span",{children:t}),n.jsx("strong",{children:e})]})}function dfe({label:t,updatedAt:e,countdown:s}){const[r,i]=J.useState(!1);return n.jsxs("div",{className:Ce.freshnessWrapper,children:[n.jsx("button",{type:"button",className:Ce.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&n.jsxs("div",{className:Ce.popover,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Letzter Scan"}),n.jsx("strong",{children:df(e)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Aktualisiert"}),n.jsx("strong",{children:s})]})]})]})}function ufe({filters:t,onChange:e,onToggleClass:s,onToggleServer:r}){return n.jsxs("div",{className:Ce.inlineFilters,children:[n.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:Ce.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),n.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:Ce.select,value:t.status,onChange:i=>e("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("div",{className:Ce.chipGroup,children:Wf.map(i=>{const a=t.classes.includes(i);return n.jsx("button",{type:"button",className:`${Ce.chip} ${a?Ce.chipActive:""}`,onClick:()=>s(i),children:i},i)})}),n.jsx("div",{className:Ce.chipGroup,children:qf.map(i=>{const a=t.servers.includes(i);return n.jsx("button",{type:"button",className:`${Ce.chip} ${a?Ce.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Ce.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),n.jsxs("div",{className:Ce.sortControls,children:[n.jsx("label",{className:Ce.sortLabel,children:"Sortieren"}),n.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[n.jsx("option",{value:"name",children:"Name"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastScan",children:"Letzter Scan"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),n.jsx("button",{type:"button",className:Ce.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function hfe({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a}){const l=d=>e===d?s==="asc"?" ":" ":"";return t.length?n.jsx("div",{className:Ce.tableWrapper,children:n.jsxs("table",{className:Ce.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Ce.stickyColumn,onClick:()=>r("name"),children:["Name",l("name")]}),n.jsx("th",{children:"Klasse"}),n.jsxs("th",{onClick:()=>r("level"),children:["Level",l("level")]}),n.jsx("th",{children:"Server"}),n.jsxs("th",{onClick:()=>r("status"),children:["Status",l("status")]}),n.jsx("th",{children:"Notizen"}),n.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",l("lastScan")]})]})}),n.jsx("tbody",{children:t.map(d=>n.jsxs("tr",{children:[n.jsx("td",{className:Ce.stickyColumn,children:n.jsx("button",{type:"button",className:Ce.rowButton,onClick:()=>i(d.id),children:d.name})}),n.jsx("td",{children:d.classRole}),n.jsx("td",{children:d.level}),n.jsx("td",{children:d.server}),n.jsx("td",{children:n.jsxs("select",{className:Ce.statusSelect,name:`waitlistStatus-${d.id}`,"aria-label":`Status fuer ${d.name}`,value:d.status,onChange:u=>a(d.id,u.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),n.jsxs("td",{children:[d.notes.slice(0,64),"..."]}),n.jsx("td",{children:n.jsx("span",{className:Ce.scanBadge,children:Mb[d.freshness]})})]},d.id))})]})}):n.jsx(gA,{})}function pfe({items:t,onSelect:e,onStatusChange:s}){return t.length?n.jsx("div",{className:Ce.cardList,children:t.map(r=>n.jsxs("article",{className:Ce.card,children:[n.jsxs("div",{className:Ce.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Ce.cardTitle,onClick:()=>e(r.id),children:r.name}),n.jsxs("p",{className:Ce.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),n.jsx("span",{className:Ce.scanBadge,children:Mb[r.freshness]})]}),n.jsxs("p",{className:Ce.cardNotes,children:[r.notes.slice(0,160),"..."]}),n.jsxs("div",{className:Ce.cardFooter,children:[n.jsxs("select",{className:Ce.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>s(r.id,i.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):n.jsx(gA,{})}function gA(){return n.jsx("div",{className:Ce.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function mfe({filters:t,onChange:e,onToggleClass:s,onToggleServer:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Ce.sheetBackdrop,onClick:i,children:n.jsxs("div",{className:Ce.sheet,onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Ce.sheetHandle}),n.jsxs("div",{className:Ce.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Ce.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:d=>e(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Status",n.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:d=>e(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),n.jsxs("div",{className:Ce.sheetLabel,children:["Klassen",n.jsx("div",{className:Ce.chipGroup,children:Wf.map(d=>{const u=t.classes.includes(d);return n.jsx("button",{type:"button",className:`${Ce.chip} ${u?Ce.chipActive:""}`,"aria-label":`Klasse ${d}`,onClick:()=>s(d),children:d},d)})})]}),n.jsxs("div",{className:Ce.sheetLabel,children:["Server",n.jsx("div",{className:Ce.chipGroup,children:qf.map(d=>{const u=t.servers.includes(d);return n.jsx("button",{type:"button",className:`${Ce.chip} ${u?Ce.chipActive:""}`,"aria-label":`Server ${d}`,onClick:()=>r(d),children:d},d)})})]}),n.jsxs("div",{className:Ce.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:d=>e(u=>({...u,lvMin:Number(d.target.value)}))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:d=>e(u=>({...u,lvMax:Number(d.target.value)}))})]})]})]}),n.jsxs("div",{className:Ce.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const xA=J.forwardRef(({item:t,mode:e,onClose:s,onEdit:r},i)=>n.jsx("div",{className:Ce.overlay,children:n.jsxs("div",{ref:i,className:`${Ce.panel} ${e==="drawer"?Ce.drawer:Ce.modal}`,children:[n.jsxs("header",{className:Ce.panelHeader,children:[n.jsxs("div",{children:[n.jsxs("p",{className:Ce.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),n.jsx("h2",{children:t.name})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("section",{className:Ce.section,children:[n.jsx("h3",{children:"Kontakt"}),n.jsx("p",{children:t.contact}),n.jsxs("p",{children:["Quelle: ",t.source]})]}),n.jsxs("section",{className:Ce.section,children:[n.jsx("h3",{children:"Notizen"}),n.jsx("p",{children:t.notes})]}),n.jsxs("section",{className:Ce.section,children:[n.jsx("h3",{children:"Tags"}),n.jsx("div",{className:Ce.tagRow,children:t.tags.length?t.tags.map(a=>n.jsx("span",{children:a},a)):n.jsx("span",{children:"Keine"})})]}),n.jsxs("section",{className:Ce.section,children:[n.jsx("h3",{children:"Historie"}),n.jsx("ul",{className:Ce.historyList,children:t.history.map(a=>n.jsxs("li",{children:[n.jsx("span",{children:df(a.date)}),n.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),n.jsxs("section",{className:Ce.section,children:[n.jsx("h3",{children:"Scan-Infos"}),n.jsxs("p",{children:["Letzter Scan: ",df(t.lastScanAt)]}),n.jsxs("p",{children:["Aktualisiert: ",df(t.updatedAt)]})]}),n.jsxs("footer",{className:Ce.panelFooter,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:s,children:"Schliessen"})]})]})}));xA.displayName="DetailPanel";const yA=J.forwardRef(({item:t,entries:e,onClose:s,onSubmit:r},i)=>{const[a,l]=J.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:Wf[0],level:1,server:qf[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});J.useEffect(()=>{t&&l(t)},[JSON.stringify(t)]);const d=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return n.jsx("div",{className:Ce.formOverlay,children:n.jsxs("form",{ref:i,className:Ce.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Ce.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.cardMeta,children:t?"Bearbeiten":"Neu"}),n.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Schliessen"})]}),u&&n.jsx("div",{className:Ce.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),n.jsxs("label",{className:Ce.sheetLabel,children:["Name",n.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>l(p=>({...p,name:h.target.value}))})]}),n.jsxs("div",{className:Ce.formGrid,children:[n.jsxs("label",{children:["Klasse",n.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>l(p=>({...p,classRole:h.target.value})),children:Wf.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Level",n.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>l(p=>({...p,level:Number(h.target.value)}))})]}),n.jsxs("label",{children:["Server",n.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>l(p=>({...p,server:h.target.value})),children:qf.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>l(p=>({...p,status:h.target.value})),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Kontakt",n.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>l(p=>({...p,contact:h.target.value}))})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Quelle",n.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>l(p=>({...p,source:h.target.value}))})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Notizen",n.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>l(p=>({...p,notes:h.target.value})),rows:4})]}),n.jsxs("footer",{className:Ce.panelFooter,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Ce.primaryAction,children:"Speichern"})]})]})})});yA.displayName="WaitlistForm";function ffe({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Ce.pagination,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const gfe=["tab","sub","sub2","q","sort","dir","page","pageSize"];function Ld(t=[]){const[e,s]=ql(),r=J.useMemo(()=>[...t].sort().join("|"),[t]),i=J.useMemo(()=>{const p=new Set([...gfe]);return t.forEach(g=>p.add(g)),Array.from(p)},[r]),a=J.useMemo(()=>{const p={};return i.forEach(g=>{const v=e.get(g);v!==null&&(p[g]=v)}),p},[e,i]),l=J.useCallback((p,g)=>{var b;const v=new URLSearchParams(e);Object.entries(p).forEach(([S,k])=>{k==null||k===""?v.delete(S):v.set(S,String(k))}),s(v,{replace:(b=g==null?void 0:g.replace)!=null?b:!1})},[e,s]),d=J.useCallback(p=>{const g=new URLSearchParams(e);(p&&p.length>0?p:i).forEach(b=>g.delete(b)),s(g,{replace:!0})},[e,s,i]),u=J.useCallback((p,g="")=>{var v;return(v=a[p])!=null?v:g},[a]),h=J.useCallback((p,g=0)=>{const v=a[p],b=v?Number(v):NaN;return Number.isFinite(b)?b:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:l,resetParams:d}}function xfe(){return Ld(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Activity"})})}function yfe(){return Ld(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Imports"})})}function vfe(){return Ld(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Announcements"})})}function bfe(){return Ld(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Events"})})}function _fe(){return Ld(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Roles"})})}function wfe(){return Ld(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Settings"})})}const jfe=[{icon:n.jsx(ag,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:n.jsx(QL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:n.jsx($L,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],Sfe=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],Nfe=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function kfe(){return n.jsx(Et,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(rs,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:n.jsx(Cfe,{}),right:n.jsx(Tfe,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:jfe.map(t=>n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),n.jsx(rs,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),n.jsx("ul",{className:"space-y-3",children:Sfe.map(t=>n.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[n.jsx(Q0,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),n.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),n.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function Cfe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),n.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[n.jsx(rs,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),n.jsx(rs,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),n.jsx(rs,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),n.jsx(rs,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),n.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[n.jsx("li",{children:" Pager rotation: Ops Team"}),n.jsx("li",{children:" Slack channel: #sf-alerts"}),n.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function Tfe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),n.jsx("ul",{className:"mt-3 space-y-2",children:Nfe.map(t=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),n.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),n.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const Efe=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function Afe(){return n.jsx(Et,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:n.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Time"}),n.jsx("span",{children:"Service"}),n.jsx("span",{className:"text-right",children:"Severity"})]}),n.jsx("ul",{children:Efe.map(t=>n.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),n.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:Ife(t.severity)},children:t.severity})]},t.id))})]})})}function Ife(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const ji={background:"#152A42",borderColor:"#2B4C73"},Jc={background:"#1A2F4A",borderColor:"#2B4C73"},bv=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function Rfe(){const{data:t,loading:e,refreshing:s,error:r,refresh:i}=Mfe(),a=J.useMemo(()=>[{label:"Total uploads",value:Yr(t.metrics.totalUploads),hint:`${Yr(t.metrics.last24h)} in the last 24h`,icon:n.jsx(aL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:kh(t.metrics.successRate),hint:`${Yr(t.metrics.failed)} failed`,icon:n.jsx(KP,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?_v(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${_v(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:n.jsx(rL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:tk(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:n.jsx(dL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:Yr(t.metrics.uniqueUploaders),hint:`${Yr(t.metrics.uniqueGuilds)} guilds represented`,icon:n.jsx(ag,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:Yr(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:n.jsx(gC,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return n.jsx(Et,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:n.jsx(Pfe,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:s}),right:n.jsx(Lfe,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(l=>n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[l.icon,l.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:l.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:l.hint})]},l.label))}),n.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:Jc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Zc(l.status)},"aria-hidden":"true"}),Fb(l.status)]}),n.jsx("span",{className:"font-semibold",children:Yr(l.count)})]}),n.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:n.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(l.share*100,100).toFixed(1)}%`,backgroundColor:Zc(l.status)}})}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[kh(l.share)," of window"]})]},l.status))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:Jc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-semibold",children:l.hourLabel}),n.jsxs("span",{children:[Yr(l.total)," uploads"]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:Zc("success")},"aria-hidden":"true"}),"Success ",Yr(l.success)]}),n.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:Zc("failed")},"aria-hidden":"true"}),"Failed ",Yr(l.failed)]})]})]},l.hourLabel))})]})]}),n.jsxs("section",{className:"rounded-2xl border",style:ji,children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Ao,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?n.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[n.jsx(Q0,{className:"h-3.5 w-3.5"}),r]}):n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(OP,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),n.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Status"}),n.jsx("span",{children:"Uploader"}),n.jsx("span",{children:"Guild"}),n.jsx("span",{className:"text-right",children:"Processing"}),n.jsx("span",{className:"text-right",children:"File size"})]}),n.jsx("ul",{children:t.recentUploads.map(l=>{var d,u,h,p;return n.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:l.id}),n.jsx("span",{children:n.jsx(Dfe,{status:l.status})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(d=l.uploaderName)!=null?d:l.uploaderId)!=null?u:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.uploadedAt?l.uploadedAt.toLocaleString():"Timestamp missing"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(p=(h=l.guildName)!=null?h:l.guildId)!=null?p:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.errorCode?`Issue: ${l.errorCode}`:"Healthy"})]}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.processingMs?_v(l.processingMs):"Pending"}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.fileSizeBytes?tk(l.fileSizeBytes):""})]},l.id)})})]})]})})}function Pfe({breakdown:t,onRefresh:e,loading:s,refreshing:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{className:"rounded-2xl border p-4",style:ji,children:[n.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[n.jsx("span",{children:"Controls"}),n.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[n.jsx(ig,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),n.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:ji,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>n.jsxs("li",{className:"flex items-center justify-between gap-2",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Zc(i.status)},"aria-hidden":"true"}),Fb(i.status)]}),n.jsx("span",{children:kh(i.share)})]},i.status))}),s&&n.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[n.jsx(Ao,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:ji,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(qm,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(qm,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(qm,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function Lfe({issues:t,failures:e,uploaders:s,guilds:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(gC,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),n.jsx("span",{children:"Top failure signatures"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:Jc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{children:i.code}),n.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(Q0,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("span",{children:"Latest failed uploads"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:Jc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),n.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(ag,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Uploader leaderboard"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:s.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:Jc,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",kh(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:Yr(i.count)})]},i.id))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ji,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(pL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Guild spotlight"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:Jc,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",kh(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:Yr(i.count)})]},i.id))})]})]})}function Dfe({status:t}){const e=Zc(t);return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[n.jsx(qm,{className:"h-3 w-3","aria-hidden":"true"}),Fb(t)]})}function Mfe(){const[t,e]=J.useState(bv),[s,r]=J.useState(!0),[i,a]=J.useState(!1),[l,d]=J.useState(null),u=J.useCallback(async(p=!1)=>{p?a(!0):r(!0);try{const g=Yl(ct,"scanUploads"),v=On(g,Ca("uploadedAt","desc"),Zn(100)),S=(await un(v)).docs.map(k=>Ffe(k.id,k.data()));S.length>0?(e(S),d(null)):(e(bv),d("No uploads in window  showing fallback snapshot"))}catch(g){console.error("[ScansUploaded] Failed to load Firestore data",g),d("Live data unavailable  fallback snapshot active"),e(bv)}finally{p?a(!1):r(!1)}},[]);J.useEffect(()=>{u(!1)},[u]);const h=J.useMemo(()=>$fe(t),[t]);return{loading:s,refreshing:i,error:l,data:h,refresh:J.useCallback(()=>u(!0),[u])}}function Ffe(t,e){const s=Bfe(e.status);return{id:t,status:s,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof Fs?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function Bfe(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function $fe(t){var I,F;const e=new Map,s=new Map,r=new Map,i=new Map,a=[];let l=0,d=0;const h=Date.now()-1440*60*1e3,p=new Map;t.forEach(R=>{var H,q,K,G,se,ne,U,Z,le,ee,he,xe,ge,we,ve,ce,ke;const B=(H=e.get(R.status))!=null?H:0;if(e.set(R.status,B+1),R.uploadedAt&&R.uploadedAt.getTime()>=h&&(d+=1),R.processingMs!=null&&a.push(R.processingMs),R.fileSizeBytes!=null&&(l+=R.fileSizeBytes),R.status==="failed"&&R.errorCode){const be=(q=s.get(R.errorCode))!=null?q:{count:0,lastSeen:null};s.set(R.errorCode,{count:be.count+1,lastSeen:!be.lastSeen||R.uploadedAt&&be.lastSeen<R.uploadedAt?R.uploadedAt:be.lastSeen})}const $=(G=(K=R.uploaderId)!=null?K:R.uploaderName)!=null?G:`anon-${R.id}`,W=(U=r.get($))!=null?U:{name:(ne=(se=R.uploaderName)!=null?se:R.uploaderId)!=null?ne:"Unknown",success:0,total:0};if(r.set($,{name:(le=(Z=R.uploaderName)!=null?Z:R.uploaderId)!=null?le:"Unknown",success:W.success+(R.status==="success"?1:0),total:W.total+1}),R.guildId||R.guildName){const be=(he=(ee=R.guildId)!=null?ee:R.guildName)!=null?he:`guild-${R.id}`,Ue=(we=i.get(be))!=null?we:{name:(ge=(xe=R.guildName)!=null?xe:R.guildId)!=null?ge:"Unknown",success:0,total:0};i.set(be,{name:(ce=(ve=R.guildName)!=null?ve:R.guildId)!=null?ce:"Unknown",success:Ue.success+(R.status==="success"?1:0),total:Ue.total+1})}if(R.uploadedAt){const be=new Date(R.uploadedAt);be.setMinutes(0,0,0);const Ue=be.toISOString(),Ke=(ke=p.get(Ue))!=null?ke:{hourLabel:Vfe(be),timestamp:be,total:0,success:0,failed:0};p.set(Ue,{hourLabel:Ke.hourLabel,timestamp:Ke.timestamp,total:Ke.total+1,success:Ke.success+(R.status==="success"?1:0),failed:Ke.failed+(R.status==="failed"?1:0)})}});const g=t.length,v=(I=e.get("success"))!=null?I:0,b=(F=e.get("failed"))!=null?F:0,S=a.length?a.reduce((R,B)=>R+B,0)/a.length:null,k=a.length?Ofe(a,95):null,E=r.size,L=i.size,M=Array.from(e.entries()).map(([R,B])=>({status:R,count:B,share:g?B/g:0})).sort((R,B)=>B.count-R.count),N=Array.from(p.values()).sort((R,B)=>B.timestamp.getTime()-R.timestamp.getTime()).slice(0,12),y=Array.from(s.entries()).map(([R,B])=>({code:R,...B})).sort((R,B)=>B.count-R.count).slice(0,6),_=[...t].sort((R,B)=>{var $,W,H,q;return((W=($=B.uploadedAt)==null?void 0:$.getTime())!=null?W:0)-((q=(H=R.uploadedAt)==null?void 0:H.getTime())!=null?q:0)}).slice(0,12),D=t.filter(R=>R.status==="failed").sort((R,B)=>{var $,W,H,q;return((W=($=B.uploadedAt)==null?void 0:$.getTime())!=null?W:0)-((q=(H=R.uploadedAt)==null?void 0:H.getTime())!=null?q:0)}),C=Array.from(r.entries()).map(([R,B])=>({id:R,name:B.name,count:B.total,successRate:B.total?B.success/B.total:0})).sort((R,B)=>B.count-R.count).slice(0,5),w=Array.from(i.entries()).map(([R,B])=>({id:R,name:B.name,count:B.total,successRate:B.total?B.success/B.total:0})).sort((R,B)=>B.count-R.count).slice(0,5);return{metrics:{totalUploads:g,last24h:d,successRate:g?v/g:0,failed:b,avgProcessingMs:S,p95ProcessingMs:k,uniqueUploaders:E,uniqueGuilds:L,totalFileSizeBytes:l},statusBreakdown:M,timeline:N,issues:y,recentFailures:D,recentUploads:_,topUploaders:C,topGuilds:w}}function Ofe(t,e){const s=[...t].sort((d,u)=>d-u);if(s.length===0)return 0;const r=e/100*(s.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return s[i];const l=r-i;return s[i]*(1-l)+s[a]*l}function Yr(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function kh(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function _v(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function tk(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let s=t,r=0;for(;s>=1024&&r<e.length-1;)s/=1024,r+=1;return`${s.toFixed(s>=10?0:1)} ${e[r]}`}function Zc(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function Fb(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function Vfe(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function wv({label:t,value:e,hint:s}){return n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),n.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),s&&n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:s})]})}function Ufe(){var d,u,h,p,g,v;const{snapshot:t,error:e,loading:s,refresh:r}=rA(),i=(d=t==null?void 0:t.warnings)!=null?d:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,l=(p=t==null?void 0:t.stats)!=null?p:{};return n.jsx(Et,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:s,children:s?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(wv,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),n.jsx(wv,{label:"Creators tracked",value:a?a.toString():"0"}),n.jsx(wv,{label:"API lookups",value:`${(g=l.youtubeLookups)!=null?g:0}  ${(v=l.twitchLookups)!=null?v:0}`,hint:"YouTube  Twitch"})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?n.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):n.jsx("ul",{className:"space-y-2",children:i.map((b,S)=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[b.creator,"  ",b.scope]}),n.jsx("div",{className:"text-xs text-[#B0C4D9]",children:b.message}),b.source&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:b.source})]},`${b.scope}-${S}`))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),n.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{children:["Add the following environment variables (e.g. in ",n.jsx("code",{children:".env.local"}),"):",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),n.jsxs("li",{children:["Execute the sync script:",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),n.jsxs("li",{children:["Commit/deploy the generated ",n.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&n.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const Ug=`${Ua}/admin/users`,zfe=25,Bb=()=>{if(!Ug)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},sk=t=>typeof t!="number"?null:Fs.fromMillis(t),$b=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:sk(t.createdAt),lastLoginAt:sk(t.lastLoginAt),status:t.status,notes:t.notes}},Hfe=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:zfe)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const s=e.toString();return s?`?${s}`:""},Ob=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function nk(t={}){var r;Bb();const e=Hfe(t),s=`${Ug}${e}`;try{const i=await fetch(s,{credentials:"include"});if(!i.ok)throw await Ob(i);const a=await i.json();return{users:a.users.map($b),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function Gfe(t){Bb();const e=await fetch(`${Ug}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await Ob(e);const s=await e.json();return $b(s.user)}async function Wfe(t,e){Bb();const s=await fetch(`${Ug}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw await Ob(s);const r=await s.json();return $b(r.user)}const vA=`${Ua}/admin/audit-events`,qfe=50,Kfe=()=>{if(!vA)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},Qfe=t=>typeof t!="number"?null:Fs.fromMillis(t),Xfe=t=>{var e,s;return{id:t.id,createdAt:Qfe(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(s=t.changes)!=null?s:{},context:t.context}},Yfe=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:qfe)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const s=e.toString();return s?`?${s}`:""},Jfe=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function C0(t={}){var i;Kfe();const e=`${vA}${Yfe(t)}`,s=await fetch(e,{credentials:"include"});if(!s.ok)throw await Jfe(s);const r=await s.json();return{events:r.events.map(Xfe),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function Zfe(t,e=10){return C0({targetUserId:t,limit:e})}const ege=20,tge=50,sh={borderColor:"#2B4C73",background:"#152A42"},bA={background:"#1A2F4A"};function sge(){var d;const{status:t,user:e}=zo(),s=(d=e==null?void 0:e.roles)!=null?d:[],r=s.includes("admin"),i=r||s.includes("mod"),[a,l]=T.useState("users");return t==="loading"||t==="idle"?n.jsx(Et,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[n.jsx(Ao,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?n.jsx(Et,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:n.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[n.jsx(Kl,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:n.jsx(nge,{activeTab:a,onChange:l}),children:a==="users"?n.jsx(rge,{isAdmin:r}):n.jsx(ige,{isAdmin:r,onSelectUser:u=>{l("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):n.jsx(Et,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[n.jsx(xC,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),n.jsxs("p",{children:["You need at least the ",n.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function nge({activeTab:t,onChange:e}){const s=[{key:"users",label:"Users",icon:n.jsx(ag,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:n.jsx(ML,{className:"h-4 w-4"})}];return n.jsx("div",{className:"flex gap-2",children:s.map(r=>n.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function rge({isAdmin:t}){const[e,s]=T.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=T.useState(""),a=E0(r,350);T.useEffect(()=>{s(ce=>ce.search===a?ce:{...ce,search:a})},[a]);const[l,d]=T.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=T.useState(0),p=T.useMemo(()=>({pageSize:ege,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);T.useEffect(()=>{let ce=!1;return d(ke=>({...ke,loading:!0,error:null})),nk(p).then(ke=>{ce||d({items:ke.users,cursor:ke.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(ke=>{ce||d(be=>({...be,loading:!1,loadingMore:!1,error:ke instanceof Error?ke.message:"Failed to load users"}))}),()=>{ce=!0}},[p,u]);const g=()=>h(ce=>ce+1),v=async()=>{if(l.cursor){d(ce=>({...ce,loadingMore:!0,error:null}));try{const ce=await nk({...p,cursor:l.cursor});d(ke=>({items:[...ke.items,...ce.users],cursor:ce.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(ce){d(ke=>{var be;return{...ke,loadingMore:!1,error:(be=ce==null?void 0:ce.message)!=null?be:"Failed to load additional users"}})}}},[b,S]=T.useState(null),[k,E]=T.useState(null),[L,M]=T.useState(!1),[N,y]=T.useState(null),[_,D]=T.useState(""),[C,w]=T.useState(!1),[I,F]=T.useState(null),[R,B]=T.useState(!1),[$,W]=T.useState(!1),[H,q]=T.useState([]),[K,G]=T.useState(!1),[se,ne]=T.useState(null),U=T.useRef(null);T.useEffect(()=>{U.current=b},[b]);const Z=T.useRef(!1);T.useEffect(()=>{Z.current=C},[C]);const le=T.useCallback(async ce=>{var ke;G(!0),ne(null);try{const be=await Zfe(ce,12);U.current===ce&&q(be.events)}catch(be){U.current===ce&&ne((ke=be==null?void 0:be.message)!=null?ke:"Failed to load audit history")}finally{U.current===ce&&G(!1)}},[]);T.useEffect(()=>{var Ue;if(!b){E(null),D(""),w(!1),q([]),ne(null),W(!1);return}const ce=b,ke=l.items.find(Ke=>Ke.id===ce);ke?(E(ke),D((Ue=ke.notes)!=null?Ue:"")):(E(null),D("")),w(!1),M(!0),y(null);let be=!1;return Gfe(ce).then(Ke=>{var Tt;be||U.current!==ce||(E(Ke),D((Tt=Ke.notes)!=null?Tt:""),w(!1),M(!1))}).catch(Ke=>{var Tt;be||U.current!==ce||(M(!1),y((Tt=Ke==null?void 0:Ke.message)!=null?Tt:"Failed to load user"))}),le(ce),()=>{be=!0}},[b,l.items,le]),T.useEffect(()=>{var ke;if(!b)return;const ce=l.items.find(be=>be.id===b);ce&&(E(be=>be&&be.id===ce.id?{...be,...ce}:ce),Z.current||D((ke=ce.notes)!=null?ke:""))},[l.items,b]);const ee=T.useCallback(ce=>{d(ke=>({...ke,items:ke.items.map(be=>be.id===ce.id?ce:be)}))},[]),he=T.useCallback(async ce=>{var ke,be;if(k){B(!0),F(null);try{const Ue=await Wfe(k.id,ce);E(Ue),ee(Ue),"notes"in ce&&(w(!1),D((ke=Ue.notes)!=null?ke:"")),await le(Ue.id)}catch(Ue){F((be=Ue==null?void 0:Ue.message)!=null?be:"Failed to update user")}finally{B(!1)}}},[k,le,ee]),xe=ce=>{if(!k||!t||ce==="user")return;const ke=new Set(k.roles);ke.has(ce)?ke.delete(ce):ke.add(ce),ke.add("user"),he({roles:Array.from(ke)})},ge=ce=>{!k||!t||T0(k.status)===ce||ce==="banned"&&!window.confirm(`Ban ${nh(k)}? They will lose access to the control panel.`)||he({status:ce})},we=ce=>{D(ce),w(!0)},ve=()=>{!k||!t||!C||he({notes:_.trim().length?_:null})};return T.useEffect(()=>{if(typeof window=="undefined")return;const ce=ke=>{const be=ke.detail;be!=null&&be.userId&&S(be.userId)};return window.addEventListener("sf-admin-open-user",ce),()=>{window.removeEventListener("sf-admin-open-user",ce)}},[]),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:sh,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(Fv,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:ce=>i(ce.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(uf,{label:"Role",value:e.role,onChange:ce=>s(ke=>({...ke,role:ce})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),n.jsx(uf,{label:"Status",value:e.status,onChange:ce=>s(ke=>({...ke,status:ce})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),n.jsx(uf,{label:"Provider",value:e.provider,onChange:ce=>s(ke=>({...ke,provider:ce})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(ig,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("div",{className:"rounded-2xl border",style:sh,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#B0C4D9]",children:[l.items.length," users ",e.search?"filtered":""]}),l.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(Ao,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:bA,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"User ID"}),n.jsx("th",{className:"px-4 py-2",children:"Display name"}),n.jsx("th",{className:"px-4 py-2",children:"Role"}),n.jsx("th",{className:"px-4 py-2",children:"Status"}),n.jsx("th",{className:"px-4 py-2",children:"Providers"}),n.jsx("th",{className:"px-4 py-2",children:"Created"}),n.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),n.jsx("tbody",{children:l.items.map(ce=>{var be,Ue,Ke;const ke=ce.id===b;return n.jsxs("tr",{onClick:()=>S(ce.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${ke?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:ce.userId}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wA,{url:NA(ce),name:nh(ce)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm",children:nh(ce)}),(be=ce.profile)!=null&&be.displayName&&ce.profile.displayName!==ce.displayName?n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:ce.profile.displayName}):null]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(jA,{role:SA(ce.roles)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(oge,{status:T0(ce.status)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Kf,{provider:"discord",active:!!((Ue=ce.providers)!=null&&Ue.discord)}),n.jsx(Kf,{provider:"google",active:!!((Ke=ce.providers)!=null&&Ke.google)})]})}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:ad(ce.createdAt)}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:ad(ce.lastLoginAt)})]},ce.id)})})]}),!l.loading&&!l.items.length&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),l.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(Uu,{className:"h-3.5 w-3.5"}),l.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:l.cursor?"More users available":"End of list"}),n.jsx("button",{type:"button",onClick:v,disabled:!l.cursor||l.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:l.loadingMore?"Loading...":"Load more"})]})]}),n.jsx("aside",{className:"rounded-2xl border p-3",style:sh,children:k?n.jsx(age,{user:k,isAdmin:t,detailLoading:L,detailError:N,notesValue:_,notesDirty:C,onNotesChange:we,onNotesSave:ve,onRoleToggle:xe,onStatusChange:ge,actionError:I,actionPending:R,auditEntries:H,auditLoading:K,auditError:se,onRefreshAudit:()=>k&&le(k.id),showRawJson:$,toggleRawJson:()=>W(ce=>!ce)}):n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[n.jsx(sL,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function ige({isAdmin:t,onSelectUser:e}){const[s,r]=T.useState({actor:"",target:"",action:"all"}),[i,a]=T.useState(""),[l,d]=T.useState(""),u=E0(i,350),h=E0(l,350);T.useEffect(()=>{r(L=>L.actor===u&&L.target===h?L:{...L,actor:u,target:h})},[u,h]);const[p,g]=T.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[v,b]=T.useState(0),S=T.useMemo(()=>{const L=s.action==="all"?void 0:s.action,M=s.actor.includes(":")?s.actor:void 0,N=s.target.includes(":")?s.target:void 0;return{limit:tge,action:L,actorUserId:M,targetUserId:N}},[s]);T.useEffect(()=>{let L=!1;return g(M=>({...M,loading:!0,error:null})),C0(S).then(M=>{L||g({items:M.events,cursor:M.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(M=>{L||g(N=>{var y;return{...N,loading:!1,loadingMore:!1,error:(y=M==null?void 0:M.message)!=null?y:"Failed to load audit log"}})}),()=>{L=!0}},[S,v]);const k=async()=>{if(p.cursor){g(L=>({...L,loadingMore:!0,error:null}));try{const L=await C0({...S,cursor:p.cursor});g(M=>({items:[...M.items,...L.events],cursor:L.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(L){g(M=>{var N;return{...M,loadingMore:!1,error:(N=L==null?void 0:L.message)!=null?N:"Failed to load more events"}})}}},E=T.useMemo(()=>{const L=s.actor.trim().toLowerCase(),M=s.target.trim().toLowerCase();return p.items.filter(N=>{var D;const y=!L||N.actorUserId.toLowerCase().includes(L)||((D=N.actorDisplayName)!=null?D:"").toLowerCase().includes(L),_=!M||N.targetUserId.toLowerCase().includes(M);return y&&_})},[p.items,s.actor,s.target]);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:sh,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(Fv,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:L=>a(L.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(Fv,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Target user id",value:l,onChange:L=>d(L.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(uf,{label:"Action",value:s.action,onChange:L=>r(M=>({...M,action:L})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:()=>b(L=>L+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(ig,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"rounded-2xl border",style:sh,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#8AA5C4]",children:[E.length," events"]}),p.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(Ao,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:bA,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"Time"}),n.jsx("th",{className:"px-4 py-2",children:"Actor"}),n.jsx("th",{className:"px-4 py-2",children:"Target User"}),n.jsx("th",{className:"px-4 py-2",children:"Action"}),n.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),n.jsx("tbody",{children:E.map(L=>{var M;return n.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:ad(L.createdAt)}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("div",{className:"text-white",children:(M=L.actorDisplayName)!=null?M:"N/A"}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:L.actorUserId})]}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(L.targetUserId),children:L.targetUserId})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(_A,{action:L.action})}),n.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:L.summary})]},L.id)})})]}),!E.length&&!p.loading&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),p.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(Uu,{className:"h-3.5 w-3.5"}),p.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:p.cursor?"More events available":"End of audit log"}),n.jsx("button",{type:"button",onClick:k,disabled:!p.cursor||p.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:p.loadingMore?"Loading...":"Load more"})]})]}),!t&&n.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function age({user:t,isAdmin:e,detailLoading:s,detailError:r,notesValue:i,notesDirty:a,onNotesChange:l,onNotesSave:d,onRoleToggle:u,onStatusChange:h,actionError:p,actionPending:g,auditEntries:v,auditLoading:b,auditError:S,onRefreshAudit:k,showRawJson:E,toggleRawJson:L}){var N,y;const M=SA(t.roles);return n.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[s&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[n.jsx(Ao,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[n.jsx(Uu,{className:"h-3.5 w-3.5"}),r]}),n.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wA,{url:NA(t),name:nh(t),size:56}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"truncate text-base text-white",children:nh(t)}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),n.jsxs("div",{className:"mt-1 flex gap-1",children:[n.jsx(jA,{role:M}),n.jsx(Kf,{provider:"discord",active:!!((N=t.providers)!=null&&N.discord)}),n.jsx(Kf,{provider:"google",active:!!((y=t.providers)!=null&&y.google)})]})]})]})}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(_=>n.jsx("button",{type:"button",onClick:()=>u(_),disabled:!e||_==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(_)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:_},_))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),n.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(_=>n.jsx("button",{type:"button",onClick:()=>h(_),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${T0(t.status)===_?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:_},_))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&n.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),n.jsx("textarea",{value:i,onChange:_=>l(_.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ao,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&n.jsx("button",{type:"button",onClick:d,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),p&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(Uu,{className:"h-3 w-3"}),p]})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),n.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsx(ig,{className:"h-3 w-3"}),"Refresh"]})]}),b&&n.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[n.jsx(Ao,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),S&&n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(Uu,{className:"h-3 w-3"}),S]}),!b&&!v.length&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),n.jsx("ul",{className:"space-y-2",children:v.map(_=>{var D;return n.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[n.jsx("span",{children:ad(_.createdAt)}),n.jsx(_A,{action:_.action})]}),n.jsx("div",{className:"mt-1 text-white",children:(D=_.actorDisplayName)!=null?D:_.actorUserId}),n.jsx("div",{className:"text-[#C8D6EC]",children:_.summary})]},_.id)})})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),n.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[n.jsx(ZL,{className:"h-3 w-3"}),E?"Hide raw JSON":"Show raw JSON"]})]}),n.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[n.jsx(Vm,{label:"Created",value:ad(t.createdAt)}),n.jsx(Vm,{label:"Last login",value:ad(t.lastLoginAt)}),n.jsx(Vm,{label:"Primary provider",value:t.primaryProvider}),n.jsx(Vm,{label:"Roles",value:t.roles.join(", ")})]}),E&&n.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function _A({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return n.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function Vm({label:t,value:e}){return e?n.jsxs("div",{className:"flex justify-between gap-2",children:[n.jsx("span",{className:"text-[#6E86A6]",children:t}),n.jsx("span",{className:"text-white",children:e})]}):null}function uf({label:t,value:e,options:s,onChange:r}){return n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[#8AA5C4]",children:t}),n.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:s.map(i=>n.jsx("option",{value:i.value,children:i.label},i.value))})]})}function wA({url:t,name:e,size:s=32}){return t?n.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:s,height:s,borderColor:"#2B4C73"}}):n.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:s,height:s,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function jA({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return n.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function oge({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:n.jsx(ZP,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:n.jsx(Kl,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:n.jsx(UP,{className:"h-3 w-3"})}},{label:s,color:r,icon:i}=e[t];return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,s]})}function Kf({provider:t,active:e}){const s=t==="discord"?"D":"G";return n.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:s})}function SA(t){const e=["admin","mod","creator","user"];for(const s of e)if(t.includes(s))return s;return"user"}function nh(t){var e,s,r,i,a,l,d,u,h;return(h=(u=(a=(s=t.displayName)!=null?s:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(d=(l=t.providers)==null?void 0:l.google)==null?void 0:d.displayName)!=null?h:t.userId}function NA(t){var e,s,r,i,a,l,d;return(d=(l=(r=t.avatarUrl)!=null?r:(s=(e=t.providers)==null?void 0:e.discord)==null?void 0:s.avatarUrl)!=null?l:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?d:null}function T0(t){return t!=null?t:"active"}function ad(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function E0(t,e){const[s,r]=T.useState(t);return T.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function lge(){return n.jsx(Et,{title:"Einstellungen",subtitle:"Profil, Sicherheit, Anzeige",centerFramed:!0,children:n.jsx("div",{className:"space-y-4",children:n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsx("h3",{className:"mb-2 text-sm",style:{color:"#F5F9FF"},children:"Profil"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["Anzeigename",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]}),n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["E-Mail",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]})]})]})})})}const kA="user_settings";async function rk(t){if(!t)return null;try{const e=Wt(ct,kA,t),s=await Xs(e);if(!s.exists())return null;const r=s.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function cge(t,e){if(t)try{const s=Wt(ct,kA,t);await $a(s,e,{merge:!0})}catch(s){throw console.error("[UserSettings] Failed to update settings",s),s}}const CA="user_tools_state";async function dge(t){var e;if(!t)return null;try{const s=Wt(ct,CA,t),r=await Xs(s);return r.exists()&&(e=r.data())!=null?e:null}catch(s){return console.warn("[UserToolsSettings] Failed to load tools settings",s),null}}async function uge(t,e){if(t)try{const s=Wt(ct,CA,t),r={...e,updatedAt:new Date().toISOString()};await $a(s,r,{merge:!0})}catch(s){throw console.error("[UserToolsSettings] Failed to save tools settings",s),s}}const hge="_page_rpt6g_1",pge="_tabs_rpt6g_17",mge="_tab_rpt6g_17",fge="_tabActive_rpt6g_71",gge="_banner_rpt6g_87",xge="_bannerSuccess_rpt6g_101",yge="_bannerError_rpt6g_113",vge="_card_rpt6g_125",bge="_cardTitle_rpt6g_145",_ge="_settingsForm_rpt6g_159",wge="_formRow_rpt6g_173",jge="_selectInput_rpt6g_185",Sge="_checkboxRow_rpt6g_203",Nge="_settingsFooter_rpt6g_227",kge="_inlineStatus_rpt6g_245",Cge="_helperText_rpt6g_259",Tge="_secondaryButton_rpt6g_271",Ege="_cardSubtitle_rpt6g_297",Age="_identityHeader_rpt6g_309",Ige="_identityAvatar_rpt6g_323",Rge="_identityName_rpt6g_337",Pge="_identityProvider_rpt6g_351",Lge="_identityForm_rpt6g_363",Dge="_nameInputWrap_rpt6g_379",Mge="_nameLabel_rpt6g_395",Fge="_nameInput_rpt6g_379",Bge="_nameSaveButton_rpt6g_427",$ge="_feedbackError_rpt6g_471",Oge="_feedbackSuccess_rpt6g_483",Vge="_metaGrid_rpt6g_495",Uge="_metaItem_rpt6g_507",zge="_metaLabel_rpt6g_521",Hge="_metaValue_rpt6g_535",Gge="_serviceList_rpt6g_549",Wge="_serviceRow_rpt6g_559",qge="_serviceName_rpt6g_587",Kge="_serviceStatus_rpt6g_601",Qge="_serviceAction_rpt6g_613",Xge="_securityText_rpt6g_645",Yge="_securityNote_rpt6g_657",Jge="_logoutButton_rpt6g_669",Zge="_loadingState_rpt6g_701",exe="_emptyState_rpt6g_703",txe="_emptyStateTitle_rpt6g_721",sxe="_emptyStateText_rpt6g_733",nxe="_primaryButton_rpt6g_745",$e={page:hge,tabs:pge,tab:mge,tabActive:fge,banner:gge,bannerSuccess:xge,bannerError:yge,card:vge,cardTitle:bge,settingsForm:_ge,formRow:wge,selectInput:jge,checkboxRow:Sge,settingsFooter:Nge,inlineStatus:kge,helperText:Cge,secondaryButton:Tge,cardSubtitle:Ege,identityHeader:Age,identityAvatar:Ige,identityName:Rge,identityProvider:Pge,identityForm:Lge,nameInputWrap:Dge,nameLabel:Mge,nameInput:Fge,nameSaveButton:Bge,feedbackError:$ge,feedbackSuccess:Oge,metaGrid:Vge,metaItem:Uge,metaLabel:zge,metaValue:Hge,serviceList:Gge,serviceRow:Wge,serviceName:qge,serviceStatus:Kge,serviceAction:Qge,securityText:Xge,securityNote:Yge,logoutButton:Jge,loadingState:Zge,emptyState:exe,emptyStateTitle:txe,emptyStateText:sxe,primaryButton:nxe},rxe="https://i.pravatar.cc/72",Um=`${Ua}/auth/account/profile`,jv=`${Ua}/auth/google/link/start`,ik=3,ak=32,ok=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},ixe=()=>{const{status:t,user:e,logout:s,refreshSession:r}=zo(),i=si(),a=xr(),{t:l,i18n:d}=Gl(),[u,h]=T.useState("overview"),[p,g]=T.useState(null),[v,b]=T.useState(null),[S,k]=T.useState(!1),[E,L]=T.useState(null),[M,N]=T.useState(!1),[y,_]=T.useState(!1),[D,C]=T.useState(null),[w,I]=T.useState(null),[F,R]=T.useState(!0),[B,$]=T.useState(!1),[W,H]=T.useState(null),[q,K]=T.useState(!1),G=T.useMemo(()=>{const Le=new URLSearchParams(a.search);return Le.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:Le.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),se=t==="loading"||t==="idle",ne=t==="authenticated"&&!!e,U=e==null?void 0:e.id,Z=T.useMemo(()=>({language:d.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[d.language]);T.useEffect(()=>{if(!U){g(null),b(null),L(null),k(!1),C(null),I(null),R(!1),$(!1),H(null),K(!1);return}let Le=!0;return(async()=>{k(!0),L(null),_(!1);try{const He=await rk(U),ot=He?{...Z,...He}:Z;if(!Le)return;g(ot),b(ot)}catch(He){if(!Le)return;L(l("account.settings.error","Could not load settings."))}finally{Le&&k(!1)}})(),()=>{Le=!1}},[U,Z,l]),T.useEffect(()=>{if(!U)return;let Le=!0;const Ie={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{R(!0),H(null),K(!1);try{const ot=await dge(U);if(!Le)return;const ht=ot?{...Ie,...ot}:Ie;C(ht),I(ht)}catch(ot){if(!Le)return;H(l("account.tools.loadError","Could not load tools settings."))}finally{Le&&R(!1)}})(),()=>{Le=!1}},[U,l]);const le=()=>{i("/login")},ee=async()=>{await s(),i("/")},he=()=>{if(!jv){window.alert("Auth service is not configured for Google linking.");return}window.location.href=jv},xe=()=>n.jsx("div",{className:$e.loadingState,children:"Checking session..."}),ge=()=>n.jsxs("div",{className:$e.emptyState,children:[n.jsx("p",{className:$e.emptyStateTitle,children:"You are not signed in."}),n.jsx("p",{className:$e.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),n.jsx("button",{type:"button",className:$e.primaryButton,onClick:le,children:"Go to sign-in"})]}),we=()=>{if(!G)return null;const Le=G.type==="success"?`${$e.banner} ${$e.bannerSuccess}`:`${$e.banner} ${$e.bannerError}`;return n.jsx("div",{className:Le,children:G.message})},ve=()=>{var Bt,An,Ys;if(!e)return null;const Le=(Bt=e.providers)==null?void 0:Bt.discord,Ie=(An=e.providers)==null?void 0:An.google,He=!!Le,ot=!!Ie,ht=!!jv,yt=ht?ot?Ie!=null&&Ie.displayName?`Connected as ${Ie.displayName}`:"Connected":"Not connected":"Auth service not configured",Ut=[{key:"discord",name:"Discord",status:He?`Connected as ${(Ys=Le==null?void 0:Le.displayName)!=null?Ys:e.displayName}`:"Not connected",actionLabel:He?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:yt,actionLabel:ot?"Connected":"Connect",disabled:ot||!ht,onClick:ot||!ht?void 0:he},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return n.jsxs("section",{className:$e.card,children:[n.jsx("h2",{className:$e.cardTitle,children:"Connected services"}),n.jsx("p",{className:$e.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),n.jsx("div",{className:$e.serviceList,children:Ut.map(Ps=>n.jsxs("div",{className:$e.serviceRow,children:[n.jsxs("div",{children:[n.jsx("p",{className:$e.serviceName,children:Ps.name}),n.jsx("p",{className:$e.serviceStatus,children:Ps.status})]}),n.jsx("button",{type:"button",className:$e.serviceAction,disabled:Ps.disabled,onClick:Ps.onClick,children:Ps.actionLabel})]},Ps.key))})]})},ce=()=>n.jsxs("section",{className:$e.card,children:[n.jsx("h2",{className:$e.cardTitle,children:"Security & session"}),n.jsx("p",{className:$e.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),n.jsx("p",{className:$e.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),n.jsx("button",{type:"button",className:$e.logoutButton,onClick:ee,children:"Log out from this device"}),n.jsx("p",{className:$e.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),ke=(Le,Ie)=>{p&&(g(He=>({...He!=null?He:Z,[Le]:Ie})),_(!1))},be=!!(p&&v&&JSON.stringify(p)!==JSON.stringify(v)),Ue=!!(D&&w&&JSON.stringify(D)!==JSON.stringify(w)),Ke=async()=>{if(!(!U||!p||M||!be))try{N(!0),L(null),await cge(U,p),b(p),_(!0)}catch(Le){L(l("account.settings.saveError","Could not save settings. Please try again."))}finally{N(!1)}},Tt=(Le,Ie)=>{D&&(C(He=>({...He!=null?He:{},[Le]:Ie})),K(!1))},Mt=async()=>{if(!(!U||!D||B||!Ue))try{$(!0),H(null),await uge(U,D),I(D),K(!0)}catch(Le){H(l("account.tools.save.error","Could not save settings. Please try again."))}finally{$(!1)}},Ft=()=>{var Le,Ie;return n.jsxs("section",{className:$e.card,children:[n.jsx("h2",{className:$e.cardTitle,children:l("account.settings.title","Settings")}),n.jsx("p",{className:$e.cardSubtitle,children:l("account.settings.subtitle","Configure your personal preferences.")}),S&&n.jsx("p",{className:$e.helperText,children:l("account.settings.loading","Loading settings...")}),E&&n.jsxs("div",{className:$e.feedbackError,children:[n.jsx("p",{children:E}),n.jsx("button",{type:"button",className:$e.secondaryButton,onClick:()=>{U&&(L(null),_(!1),k(!0),rk(U).then(He=>{const ot=He?{...Z,...He}:Z;g(ot),b(ot)}).catch(()=>{L(l("account.settings.error","Could not load settings."))}).finally(()=>k(!1)))},children:l("account.settings.retry","Retry")})]}),p&&!S&&n.jsxs("div",{className:$e.settingsForm,children:[n.jsxs("div",{className:$e.formRow,children:[n.jsx("label",{className:$e.nameLabel,htmlFor:"settings-language",children:l("account.settings.language.label","Preferred language")}),n.jsxs("select",{id:"settings-language",className:$e.selectInput,value:(Le=p.language)!=null?Le:Z.language,onChange:He=>ke("language",He.target.value),children:[n.jsx("option",{value:"en",children:l("topbar.lang_en","English")}),n.jsx("option",{value:"de",children:l("topbar.lang_de","Deutsch")})]})]}),n.jsxs("div",{className:$e.formRow,children:[n.jsx("label",{className:$e.nameLabel,htmlFor:"settings-section",children:l("account.settings.defaultSection.label","Default section")}),n.jsxs("select",{id:"settings-section",className:$e.selectInput,value:(Ie=p.defaultSection)!=null?Ie:Z.defaultSection,onChange:He=>ke("defaultSection",He.target.value),children:[n.jsx("option",{value:"home",children:l("nav.home","Home")}),n.jsx("option",{value:"toplists",children:l("nav.toplists","Top Lists")}),n.jsx("option",{value:"guilds",children:l("nav.guilds","Guilds")}),n.jsx("option",{value:"tools",children:l("nav.tools","Tools")}),n.jsx("option",{value:"community",children:l("nav.community","Community")})]})]}),n.jsxs("label",{className:$e.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!p.compactTables,onChange:He=>ke("compactTables",He.target.checked)}),n.jsx("span",{children:l("account.settings.compactTables.label","Use compact table layout")})]}),n.jsxs("label",{className:$e.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!p.showExperimentalFeatures,onChange:He=>ke("showExperimentalFeatures",He.target.checked)}),n.jsx("span",{children:l("account.settings.experimental.label","Enable experimental features")})]})]}),n.jsxs("div",{className:$e.settingsFooter,children:[n.jsxs("div",{className:$e.inlineStatus,children:[y?n.jsx("span",{className:$e.feedbackSuccess,children:l("account.settings.saved","Settings saved.")}):be?null:n.jsx("span",{className:$e.helperText,children:l("account.settings.noChanges","No changes to save.")}),M&&n.jsx("span",{className:$e.helperText,children:l("account.settings.saving","Saving...")})]}),n.jsx("button",{type:"button",className:$e.primaryButton,disabled:!be||M||!p,onClick:Ke,children:l("account.settings.save","Save settings")})]})]})},Vt=()=>{const Le=[{key:"overview",label:"Overview"},{key:"settings",label:"Settings"},{key:"tools",label:"Tools"}];return n.jsx("div",{className:$e.tabs,role:"tablist","aria-label":"Account sections",children:Le.map(Ie=>{const He=u===Ie.key;return n.jsx("button",{type:"button",className:`${$e.tab} ${He?$e.tabActive:""}`,onClick:()=>h(Ie.key),role:"tab","aria-selected":He,children:Ie.label},Ie.key)})})},is=()=>{var Le;if(!e)return null;switch(u){case"overview":return n.jsxs(n.Fragment,{children:[n.jsx(axe,{user:e,refreshSession:r}),ve(),ce()]});case"settings":return Ft();case"tools":return n.jsxs("section",{className:$e.card,children:[n.jsx("h2",{className:$e.cardTitle,children:l("account.tools.title","Tools settings")}),n.jsx("p",{className:$e.cardSubtitle,children:l("account.tools.subtitle","Configure how tools behave for your account.")}),F&&n.jsx("p",{className:$e.helperText,children:l("account.tools.loading","Loading tools settings...")}),W&&n.jsx("p",{className:$e.feedbackError,children:W}),D&&!F&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:$e.settingsForm,children:[n.jsxs("div",{className:$e.formRow,children:[n.jsx("label",{className:$e.nameLabel,htmlFor:"tools-default-set",children:l("account.tools.defaultSet.label","Default set ID")}),n.jsx("input",{id:"tools-default-set",type:"text",className:$e.nameInput,value:(Le=D.defaultSetId)!=null?Le:"",onChange:Ie=>Tt("defaultSetId",Ie.target.value),placeholder:l("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),n.jsxs("label",{className:$e.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!D.showToolsIntro,onChange:Ie=>Tt("showToolsIntro",Ie.target.checked)}),n.jsx("span",{children:l("account.tools.showIntro.label","Show tools intro")})]}),n.jsxs("label",{className:$e.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!D.enableExperimentalTools,onChange:Ie=>Tt("enableExperimentalTools",Ie.target.checked)}),n.jsx("span",{children:l("account.tools.experimental.label","Enable experimental tools")})]})]}),n.jsxs("div",{className:$e.settingsFooter,children:[n.jsxs("div",{className:$e.inlineStatus,children:[q?n.jsx("span",{className:$e.feedbackSuccess,children:l("account.tools.save.success","Settings saved.")}):Ue?null:n.jsx("span",{className:$e.helperText,children:l("account.tools.save.noChanges","No changes to save.")}),B&&n.jsx("span",{className:$e.helperText,children:l("account.tools.save.saving","Saving...")})]}),n.jsx("button",{type:"button",className:$e.primaryButton,disabled:F||B||!Ue||!D,onClick:Mt,children:l("account.tools.save.cta","Save settings")})]})]})]});default:return null}},Ee=()=>se?xe():ne?n.jsxs(n.Fragment,{children:[Vt(),is()]}):ge();return n.jsx(Et,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:n.jsxs("div",{className:$e.page,children:[we(),Ee()]})})};function axe({user:t,refreshSession:e}){var D;const[s,r]=T.useState(()=>{var C;return(C=t==null?void 0:t.displayName)!=null?C:""}),[i,a]=T.useState(!1),[l,d]=T.useState(null),[u,h]=T.useState(!1),p=(t==null?void 0:t.avatarUrl)||rxe,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",v=(D=t==null?void 0:t.displayName)!=null?D:"",b=s.trim(),S=b.length===0||b.length>=ik&&b.length<=ak,k=!!t&&b.length>0&&b!==v,E=!!(Um&&S&&k&&!i),L=b.length>0&&!S?`Name must be between ${ik} and ${ak} characters.`:null;T.useEffect(()=>{var C;r((C=t==null?void 0:t.displayName)!=null?C:""),h(!1),d(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const M=T.useMemo(()=>{var C;return t?[{label:"SFDataHub ID",value:t.id},(C=t.roles)!=null&&C.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:ok(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:ok(t.lastLoginAt)}:null].filter(w=>!!(w!=null&&w.value)):[]},[t]),N=async()=>{var C,w;if(!E||!Um){Um||d("Auth service is not configured.");return}try{a(!0),d(null),h(!1);const I=await fetch(Um,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:b})});if(!I.ok){const F=await I.json().catch(()=>null);throw new Error((C=F==null?void 0:F.error)!=null?C:"Failed to update name.")}await e(),h(!0),r(b)}catch(I){const F=(w=I==null?void 0:I.message)!=null?w:"Failed to update name.";d(F)}finally{a(!1)}},y=C=>{C.key==="Enter"&&(C.preventDefault(),E&&N())},_=()=>{E&&N()};return t?n.jsxs("section",{className:$e.card,children:[n.jsxs("div",{className:$e.identityHeader,children:[n.jsx("img",{src:p,alt:"",className:$e.identityAvatar}),n.jsxs("div",{children:[n.jsx("p",{className:$e.identityName,children:t.displayName||"Unbenannter Nutzer"}),n.jsxs("p",{className:$e.identityProvider,children:[g," sign-in"]})]}),n.jsx("span",{className:$e.statusBadge,children:"Verified"})]}),n.jsxs("div",{className:$e.identityForm,children:[n.jsxs("div",{className:$e.nameInputWrap,children:[n.jsx("label",{className:$e.nameLabel,children:"Display name"}),n.jsx("input",{type:"text",className:$e.nameInput,value:s,onChange:C=>r(C.target.value),onKeyDown:y,onBlur:_,placeholder:"Enter your display name"})]}),n.jsx("button",{type:"button",className:$e.nameSaveButton,disabled:!E,onClick:N,children:i?"Saving...":"Save"})]}),L&&n.jsx("p",{className:$e.feedbackError,children:L}),l&&n.jsx("p",{className:$e.feedbackError,children:l}),u&&n.jsx("p",{className:$e.feedbackSuccess,children:"Name updated."}),M.length>0&&n.jsx("div",{className:$e.metaGrid,children:M.map(C=>n.jsxs("div",{className:$e.metaItem,children:[n.jsx("span",{className:$e.metaLabel,children:C.label}),n.jsx("span",{className:$e.metaValue,children:C.value})]},C.label))})]}):null}const Dt={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function oxe(){return n.jsx("div",{style:Dt.wrap,children:n.jsxs("div",{style:Dt.grid,children:[n.jsxs("aside",{style:Dt.tile,children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),n.jsx("p",{style:Dt.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),n.jsxs("nav",{children:[n.jsx("div",{style:Dt.groupLabel,children:"Allgemein"}),n.jsx(ws,{to:"list-views",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"List-View Switcher"}),n.jsx(ws,{to:"rescan-widget",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Rescan Widget (auto)"}),n.jsx(ws,{to:"upload-sim",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Upload Simulator"}),n.jsx(ws,{to:"hud/game-buttons",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"HUD  Game Buttons"}),n.jsx(ws,{to:"theme-maker",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Theme / Template Maker"}),n.jsx(ws,{to:"theme-maker-pro",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Theme / Template Maker  Pro"}),n.jsx("div",{style:Dt.groupLabel,children:"Templates"}),n.jsx(ws,{to:"templates/content-shell",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"ContentShell Template"}),n.jsx(ws,{to:"templates/blank",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Leere Vorlage"}),n.jsx(ws,{to:"templates/blank-alt",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Leere Vorlage (Neu)"}),n.jsx(ws,{to:"templates/blank-layout-2",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Leere Vorlage  Layout 2"}),n.jsx(ws,{to:"templates/blank-layout-3",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Leere Vorlage  Layout 3"}),n.jsx(ws,{to:"templates/blank-layout-4",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"Leere Vorlage  Layout 4"}),n.jsx("div",{style:Dt.groupLabel,children:"Guide Hub Demos"}),n.jsx(ws,{to:"am-rune-bonuses-demos",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),n.jsx("div",{style:Dt.groupLabel,children:"Graphics / Portraits"}),n.jsx(ws,{to:"portrait-maker",style:({isActive:t})=>({...Dt.link,...t?Dt.active:{}}),children:"PortraitMaker Demo"})]})]}),n.jsx("section",{style:Dt.tile,children:n.jsx(aC,{})})]})})}const lxe="_page_1kokx_1",cxe="_topBar_1kokx_17",dxe="_tabs_1kokx_31",uxe="_tab_1kokx_31",hxe="_tabActive_1kokx_63",pxe="_searchWrap_1kokx_73",mxe="_input_1kokx_85",fxe="_stickyIcons_1kokx_105",gxe="_iconBtn_1kokx_129",xxe="_tableWrap_1kokx_161",yxe="_table_1kokx_161",vxe="_th_1kokx_181",bxe="_td_1kokx_181",_xe="_row_1kokx_201",wxe="_chips_1kokx_219",jxe="_chip_1kokx_219",Sxe="_badges_1kokx_249",Nxe="_badge_1kokx_249",kxe="_badgeMax_1kokx_275",Cxe="_badgeAchiev_1kokx_277",Txe="_badgeX2_1kokx_279",Exe="_badgeX12_1kokx_281",Axe="_badgeX60_1kokx_283",Ixe="_section_1kokx_289",Rxe="_sectionHeader_1kokx_297",Pxe="_cardList_1kokx_315",Lxe="_card_1kokx_315",Dxe="_cardMax_1kokx_353",Mxe="_iconXL_1kokx_355",Fxe="_split_1kokx_369",Bxe="_left_1kokx_379",$xe="_leftBtn_1kokx_399",Oxe="_leftBtnActive_1kokx_411",Vxe="_detail_1kokx_413",Uxe="_grid_1kokx_433",zxe="_tile_1kokx_443",Hxe="_drawer_1kokx_457",Gxe="_timeline_1kokx_487",Wxe="_node_1kokx_493",qxe="_dot_1kokx_501",dt={page:lxe,topBar:cxe,tabs:dxe,tab:uxe,tabActive:hxe,searchWrap:pxe,input:mxe,stickyIcons:fxe,iconBtn:gxe,tableWrap:xxe,table:yxe,th:vxe,td:bxe,row:_xe,chips:wxe,chip:jxe,badges:Sxe,badge:Nxe,badgeMax:kxe,badgeAchiev:Cxe,badgeX2:Txe,badgeX12:Exe,badgeX60:Axe,section:Ixe,sectionHeader:Rxe,cardList:Pxe,card:Lxe,cardMax:Dxe,iconXL:Mxe,split:Fxe,left:Bxe,leftBtn:$xe,leftBtnActive:Oxe,detail:Vxe,grid:Uxe,tile:zxe,drawer:Hxe,timeline:Gxe,node:Wxe,dot:qxe},lk=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function Zr(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function Kxe(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function Qxe(t){var s,r;const e=(r=(s=t.note)==null?void 0:s.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function Qf({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:dt.iconBtn,title:t||"Rune",children:e})}function Vb({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:dt.iconXL,title:t||"Rune",children:e})}function Xxe(t){const e=new Map;for(const s of t){const r=s.tier&&s.tier.trim()!==""?s.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(s)}return Array.from(e.entries())}function Xh({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),n.jsx("div",{className:dt.chips,children:e.map((s,r)=>n.jsx("span",{className:dt.chip,children:s},r))})}function Yh({r:t,isMax:e}){const s=[];e&&s.push({label:"MAX",cls:dt.badgeMax}),Kxe(t)&&s.push({label:"Achievement",cls:dt.badgeAchiev});const r=Qxe(t);return r==="x2"&&s.push({label:"x2",cls:dt.badgeX2}),r==="x12"&&s.push({label:"x12",cls:dt.badgeX12}),r==="x60"&&s.push({label:"x60",cls:dt.badgeX60}),s.length===0?null:n.jsx("div",{className:dt.badges,children:s.map((i,a)=>{var l;return n.jsx("span",{className:`${dt.badge} ${(l=i.cls)!=null?l:""}`,children:i.label},a)})})}function Yxe(t){const e=t.trim().toLowerCase();return e?lk.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):lk}function Jxe({data:t}){const e=Math.max(...t.map(i=>Zr(i.amount))),s=T.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:dt.stickyIcons,children:s.map((i,a)=>n.jsx("div",{onClick:()=>r(i),children:n.jsx(Qf,{label:i||"(no tier)"})},a))}),n.jsx("div",{className:dt.tableWrap,children:n.jsxs("table",{className:dt.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:dt.th,style:{width:42}}),n.jsx("th",{className:dt.th,style:{width:120},children:"Amount"}),n.jsx("th",{className:dt.th,children:"Bonuses"}),n.jsx("th",{className:dt.th,style:{width:220},children:"Tags"})]})}),n.jsx("tbody",{children:t.map((i,a)=>{const l=Math.abs(Zr(i.amount)-e)<1e-6;return n.jsxs("tr",{className:dt.row,"data-tier":i.tier||"(no tier)",children:[n.jsx("td",{className:dt.td,children:n.jsx(Qf,{label:i.tier||""})}),n.jsx("td",{className:dt.td,children:i.amount}),n.jsx("td",{className:dt.td,children:n.jsx(Xh,{r:i})}),n.jsx("td",{className:dt.td,children:n.jsx(Yh,{r:i,isMax:l})})]},a)})})]})})]})}function Zxe({data:t}){const e=Xxe(t),s=Math.max(...t.map(r=>Zr(r.amount)));return n.jsx(n.Fragment,{children:e.map(([r,i])=>n.jsxs("section",{className:dt.section,children:[n.jsx("div",{className:dt.sectionHeader,children:r}),n.jsx("div",{className:dt.cardList,children:i.map((a,l)=>{const d=Math.abs(Zr(a.amount)-s)<1e-6;return n.jsxs("div",{className:`${dt.card} ${d?dt.cardMax:""}`,children:[n.jsx(Vb,{label:r}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:a.amount}),n.jsx(Yh,{r:a,isMax:d})]}),n.jsx(Xh,{r:a})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},l)})})]},r))})}function eye({data:t}){var l;const e=Array.from(new Set(t.map(d=>d.tier||"(no tier)"))),[s,r]=T.useState((l=e[0])!=null?l:""),i=t.filter(d=>(d.tier||"(no tier)")===s),a=Math.max(...t.map(d=>Zr(d.amount)));return n.jsxs("div",{className:dt.split,children:[n.jsx("div",{className:dt.left,children:e.map(d=>n.jsxs("button",{className:`${dt.leftBtn} ${d===s?dt.leftBtnActive:""}`,onClick:()=>r(d),children:[n.jsx(Qf,{label:d}),n.jsx("span",{children:d})]},d))}),n.jsxs("div",{className:dt.detail,children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx(Vb,{label:s}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:s}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((d,u)=>{const h=Math.abs(Zr(d.amount)-a)<1e-6;return n.jsxs("div",{className:dt.card,style:{gridTemplateColumns:"1fr auto"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:d.amount}),n.jsx(Yh,{r:d,isMax:h})]}),n.jsx(Xh,{r:d})]}),n.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function tye({data:t}){const[e,s]=T.useState(null),r=Math.max(...t.map(i=>Zr(i.amount)));return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:dt.grid,children:t.map((i,a)=>n.jsx("div",{className:dt.tile,onClick:()=>s(i),title:i.tier||"",children:n.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[n.jsx(Qf,{label:i.tier||""}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&n.jsxs("div",{className:dt.drawer,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx(Vb,{label:e.tier||""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:e.amount}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),n.jsx("button",{className:dt.tab,onClick:()=>s(null),children:"Close"})]}),n.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:n.jsx(Yh,{r:e,isMax:Math.abs(Zr(e.amount)-r)<1e-6})}),n.jsx(Xh,{r:e})]})]})}function sye({data:t}){const e=Math.max(...t.map(r=>Zr(r.amount))),s=[...t].sort((r,i)=>Zr(r.amount)-Zr(i.amount));return n.jsx("div",{className:dt.timeline,children:s.map((r,i)=>{const a=Math.abs(Zr(r.amount)-e)<1e-6;return n.jsxs("div",{className:dt.node,children:[n.jsx("div",{className:dt.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx("strong",{children:r.amount}),n.jsx(Yh,{r,isMax:a})]}),n.jsx(Xh,{r})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const nye=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function rye(){const[t,e]=T.useState("A: Compact Table"),[s,r]=T.useState(""),i=Yxe(s);return n.jsxs("div",{className:dt.page,children:[n.jsxs("div",{className:dt.topBar,children:[n.jsx("div",{className:dt.tabs,children:nye.map(a=>n.jsx("button",{onClick:()=>e(a),className:`${dt.tab} ${t===a?dt.tabActive:""}`,children:a},a))}),n.jsx("div",{className:dt.searchWrap,children:n.jsx("input",{className:dt.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:s,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&n.jsx(Jxe,{data:i}),t==="B: Card Track"&&n.jsx(Zxe,{data:i}),t==="C: Two-Pane"&&n.jsx(eye,{data:i}),t==="D: Icon Grid + Drawer"&&n.jsx(tye,{data:i}),t==="E: Timeline"&&n.jsx(sye,{data:i})]})}function iye(){return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),n.jsx("div",{className:"mt-4 grid gap-3",children:n.jsx(ws,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const _e={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},aye=()=>n.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),Tl={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function oye(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function Dd(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",oye(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function TA(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",s={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},l={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},d={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},p={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},v={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},b={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:s,crystal:r,carbon:i,chrome:a,gold:l,obsidian:d,neon:u,plasma:h,aurora:p,satin:g,matte:v,holo:b}[t.material]}function Go(t){const e={color:_e.title,borderColor:_e.border,...TA(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const Jh=({children:t})=>n.jsx("span",{className:"relative z-10",children:t});function Md({fx:t,clip:e}){return n.jsxs(n.Fragment,{children:[t.shine&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:n.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&n.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&n.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&n.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((s,r)=>n.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function lye({fx:t,children:e}){const s=Dd(t),r=Go(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),n.jsx(Md,{fx:t,clip:i}),t.withIcon&&n.jsx(pC,{size:16,className:"relative z-10"}),n.jsx(Jh,{children:e})]})}function cye({fx:t,children:e}){const s=Dd(t),r=Go(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(Md,{fx:t,clip:i}),t.withIcon&&n.jsx(mC,{size:16,className:"relative z-10"}),n.jsx(Jh,{children:e})]})}function dye({fx:t,children:e}){const s=Dd(t),r=Go(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(Md,{fx:t,clip:i}),t.withIcon&&n.jsx(Kl,{size:16,className:"relative z-10"}),n.jsx(Jh,{children:e})]})}function uye({fx:t,children:e}){const s=Dd(t),r=Go(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${_e.tile}, ${_e.active})`}}),n.jsx(Md,{fx:t,clip:i}),t.withIcon&&n.jsx(fC,{size:16,className:"relative z-10"}),n.jsx(Jh,{children:e})]})}function hye({fx:t,children:e}){const s=Dd(t),r=Go(t);return n.jsxs("button",{disabled:t.disabled,className:`${s} rounded-full overflow-hidden`,style:r,children:[n.jsx(Md,{fx:t}),t.withIcon&&n.jsx(rg,{size:16,className:"relative z-10"}),n.jsx(Jh,{children:e})]})}function pye({fx:t,tabs:e}){const[s,r]=T.useState(0);return n.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:_e.tile,border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:e.map((i,a)=>n.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===s?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===s?_e.active:"transparent",border:a===s&&t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:[t.withIcon&&a===s&&n.jsx(rg,{size:14,className:"inline mr-1"}),i]},a))})}function mye({fx:t}){const e=Dd(t),s=Go(t);return n.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:s,"aria-label":"Icon action",children:n.jsx(yC,{})})}const A0={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function fye({fx:t,setFx:e}){const s=(d,u)=>e(h=>({...h,[d]:u})),r=d=>e(u=>({...u,[d]:!u[d]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],l=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return n.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:_e.tile,border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:[n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${_e.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:_e.title},children:"Presets"}),Object.keys(A0).map(d=>n.jsx("button",{onClick:()=>e(u=>A0[d](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:_e.btn,borderColor:_e.border,color:_e.title},children:d},d))]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${_e.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:_e.title},children:"Material"}),i.map(d=>n.jsx("button",{onClick:()=>s("material",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===d?"":"opacity-70"}`,style:{backgroundColor:t.material===d?_e.active:_e.btn,borderColor:_e.border,color:_e.title},children:d},d)),n.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:_e.title},children:"Size"}),["sm","md","lg"].map(d=>n.jsx("button",{onClick:()=>s("size",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===d?"":"opacity-70"}`,style:{backgroundColor:t.size===d?_e.active:_e.btn,borderColor:_e.border,color:_e.title},children:d.toUpperCase()},d)),n.jsx("button",{onClick:()=>e(d=>({...d,withIcon:!d.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?_e.active:_e.btn,borderColor:_e.border,color:_e.title},children:"Icon"}),n.jsx("button",{onClick:()=>e(d=>({...d,disabled:!d.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?_e.active:_e.btn,borderColor:_e.border,color:_e.title},children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${_e.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:_e.title},children:"Core FX"}),a.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?_e.active:_e.btn,borderColor:_e.border,color:_e.title},children:u},d))]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:_e.title},children:"Advanced"}),l.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?_e.active:_e.btn,borderColor:_e.border,color:_e.title},children:u},d))]}),n.jsx("button",{onClick:()=>e(Tl),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:_e.btn,borderColor:_e.border,color:_e.title},children:"Reset"})]})}function fs({fx:t,className:e="",style:s={},children:r,clip:i}){const a=Go(t);return n.jsxs("div",{className:`relative ${e}`,style:{...a,...s},children:[n.jsx(Md,{fx:t,clip:i}),n.jsx("div",{className:"relative z-10",children:r})]})}function er({fx:t,className:e="",children:s}){return n.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:_e.tile,border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:s})}function gye({fx:t}){const[e,s]=T.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Toggle Chips"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return n.jsx(fs,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:_e.border},children:n.jsx("button",{onClick:()=>s(l=>a?l.filter(d=>d!==i):[...l,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function xye({fx:t}){return n.jsxs(er,{fx:t,className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",style:{color:_e.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>n.jsx(fs,{fx:t,className:"rounded-xl border p-2",style:{borderColor:_e.border},children:n.jsxs("button",{className:"relative",children:[n.jsx(yC,{size:16}),e===3&&n.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function yye({fx:t}){return n.jsxs(fs,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Breadcrumb HUD"}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>n.jsx(fs,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:_e.border},children:e},e))})]})}function vye({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Stat Tiles"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(s=>n.jsxs(fs,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:_e.border},children:[n.jsx("div",{className:"text-[10px] opacity-80",children:s.k}),n.jsx("div",{className:"text-sm",children:s.v}),n.jsx("div",{className:"text-[11px] opacity-80",children:s.d})]},s.k))})]})}function bye({fx:t}){const[e,s]=T.useState(.66);return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Meter / Energy Bar"}),n.jsx(fs,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:_e.border},children:n.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),n.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsxs("button",{onClick:()=>s(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function _ye({fx:t}){return n.jsxs(er,{fx:t,className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-sm",style:{color:_e.title},children:"Badge / Medal"}),n.jsxs(fs,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:_e.border},children:[n.jsx(Kl,{size:16}),n.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function wye({fx:t}){const[e,s]=T.useState(!1);return n.jsxs(er,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:_e.title},children:"Toast / Notification"}),n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&n.jsxs(fs,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:_e.border},children:[n.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),n.jsx("button",{onClick:()=>s(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function jye({fx:t}){const[e,s]=T.useState(!0);return n.jsxs(er,{fx:t,className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:_e.title},children:"Toggle Switch"}),n.jsxs(fs,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:_e.border},children:[n.jsx("button",{onClick:()=>s(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),n.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function Sye({fx:t}){const[e,s]=T.useState(!1),r=["Overview","Stats","Activity","Hydra"];return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Dropdown HUD"}),n.jsx(fs,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:_e.border},children:n.jsx("button",{onClick:()=>s(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&n.jsx(fs,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:_e.border},children:r.map(i=>n.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function Nye({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Radial Menu (Preview)"}),n.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[n.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"}}),e.map((s,r)=>{const i=r/e.length*Math.PI*2,a=56,l=56+Math.cos(i)*a,d=56+Math.sin(i)*a;return n.jsx(fs,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:l,top:d,borderColor:_e.border},children:s},s)}),n.jsx(fs,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:_e.border},children:"Menu"})]})]})}function kye({fx:t}){const e=[1,2,3,4,5],[s,r]=T.useState(2);return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Pagination HUD"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>n.jsx(fs,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===s?"":"opacity-80"}`,style:{borderColor:_e.border},children:n.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function Cye({fx:t}){const[e,s]=T.useState(!1);return n.jsxs(er,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:_e.title},children:"Modal HUD"}),n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&n.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:n.jsxs(fs,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:_e.border},children:[n.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),n.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>s(!1),children:"Cancel"})}),n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function Tye({fx:t}){const[e,s]=T.useState("");return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Search HUD"}),n.jsx(fs,{fx:t,className:"rounded-lg border p-2",style:{borderColor:_e.border},children:n.jsx("input",{value:e,onChange:r=>s(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function Eye({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[s,r]=T.useState("Bravo");return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"List Selectable"}),n.jsx("div",{className:"space-y-2",children:e.map(i=>n.jsx(fs,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${s===i?"":"opacity-80"}`,style:{borderColor:_e.border},children:n.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function Aye({fx:t}){const e=["Init","Scan","Verify","Done"],[s,r]=T.useState(1);return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Steps"}),n.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>n.jsxs(J.Fragment,{children:[n.jsx(fs,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=s?"":"opacity-70"}`,style:{borderColor:_e.border},children:a+1}),a<e.length-1&&n.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,s-1)),children:"Back"})}),n.jsx(fs,{fx:t,className:"rounded-md border",style:{borderColor:_e.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,s+1)),children:"Next"})})]})]})}function Iye({fx:t}){const e=["","","","","",""];return n.jsxs(er,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:_e.title},children:"Dock Bar"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map((s,r)=>n.jsx(fs,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:_e.border},children:s},r))})]})}function Rye(){const[t,e]=T.useState(Tl);return n.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:_e.bg,color:_e.txt},children:[n.jsx(aye,{}),n.jsxs("header",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wL,{}),n.jsx("h1",{className:"text-xl font-bold",style:{color:_e.title},children:"Game Buttons Playground"}),n.jsx("span",{className:"text-xs",style:{color:_e.txt2},children:"(Materials + FX extended + Presets)"})]})}),n.jsx(fye,{fx:t,setFx:e})]}),n.jsxs("section",{className:"grid gap-4",children:[n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:_e.tile,border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:_e.title},children:"Shapes"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(lye,{fx:t,children:[n.jsx(pC,{size:16})," Diamond"]}),n.jsxs(cye,{fx:t,children:[n.jsx(mC,{size:16})," Hex"]}),n.jsxs(dye,{fx:t,children:[n.jsx(Kl,{size:16})," Octagon/Shield"]}),n.jsxs(uye,{fx:t,children:[n.jsx(fC,{size:16})," Shard"]}),n.jsxs(hye,{fx:t,children:[n.jsx(rg,{size:16})," Pill/Chip"]}),n.jsx(mye,{fx:t})]})]}),n.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:_e.tile,border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold",style:{color:_e.title},children:"Tabs"}),n.jsx(pye,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),n.jsx("section",{className:"grid gap-4",children:n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:_e.tile,border:t.baseBorder?`1px solid ${_e.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:_e.title},children:"More HUD Patterns"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[n.jsx(gye,{fx:t}),n.jsx(xye,{fx:t}),n.jsx(yye,{fx:t}),n.jsx(vye,{fx:t}),n.jsx(bye,{fx:t}),n.jsx(_ye,{fx:t}),n.jsx(wye,{fx:t}),n.jsx(jye,{fx:t}),n.jsx(Sye,{fx:t}),n.jsx(Nye,{fx:t}),n.jsx(kye,{fx:t}),n.jsx(Cye,{fx:t}),n.jsx(Tye,{fx:t}),n.jsx(Eye,{fx:t}),n.jsx(Aye,{fx:t}),n.jsx(Iye,{fx:t})]})]})}),n.jsx(Pye,{}),n.jsx("footer",{className:"text-center text-xs",style:{color:_e.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function Pye(){return T.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(Tl.material),"Material type present");const e=Go(Tl);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=TA({...Tl,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof Tl[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries(A0).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...Tl});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const rh={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},ck={Arcade:{...rh,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...rh,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},Vc={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},EA={display:"grid",gap:8,alignItems:"center"};function ga({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...EA,gridTemplateColumns:"120px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function Sv({label:t,value:e,min:s,max:r,onChange:i}){return n.jsxs("label",{style:{...EA,gridTemplateColumns:"120px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),n.jsx("input",{type:"number",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function dk(){const[t,e]=J.useState(rh),s=J.useRef(null),r=u=>{const h=s.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};J.useEffect(()=>{r(t)},[t]);const i=u=>e(ck[u]),a=()=>e(rh),l=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},d=async u=>{const h=await u.text();e({...rh,...JSON.parse(h)})};return n.jsxs("div",{ref:s,style:{color:"var(--text, #FFFFFF)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(ck).map(u=>n.jsx("button",{style:Vc,onClick:()=>i(u),children:u},u)),n.jsx("button",{style:Vc,onClick:a,children:"Default"}),n.jsx("button",{style:Vc,onClick:l,children:"Export JSON"}),n.jsxs("label",{style:{...Vc,display:"inline-block"},children:["Import JSON",n.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&d(u.target.files[0]),style:{display:"none"}})]})]}),n.jsx(ga,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),n.jsx(ga,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),n.jsx(ga,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),n.jsx(ga,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),n.jsx(ga,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),n.jsx(ga,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),n.jsx(ga,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),n.jsx(ga,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),n.jsx(ga,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),n.jsx(Sv,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),n.jsx(Sv,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),n.jsx(Sv,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),n.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[n.jsx("button",{style:{...Vc,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),n.jsx("button",{style:Vc,children:"Secondary"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const I0={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},uk={"SFDataHub (Default)":{...I0},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},zg={display:"grid",gap:8,alignItems:"center"},_l={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},wl={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function Qr({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...zg,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function xa({label:t,value:e,min:s,max:r,step:i=1,onChange:a,suffix:l}){return n.jsxs("label",{style:{...zg,gridTemplateColumns:"140px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value))}),n.jsx("input",{type:"number",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value||"0"))})]})}function Lye({label:t,checked:e,onChange:s}){return n.jsxs("label",{style:{...zg,gridTemplateColumns:"1fr 46px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"checkbox",checked:e,onChange:r=>s(r.target.checked)})]})}function hk(){const[t,e]=J.useState(I0),s=J.useRef(null),r=h=>{const p=s.current;p&&(p.style.setProperty("--page",h.page),p.style.setProperty("--tile",h.tile),p.style.setProperty("--tile-hover",h.tileHover),p.style.setProperty("--nav",h.nav),p.style.setProperty("--active",h.active),p.style.setProperty("--text",h.text),p.style.setProperty("--text-soft",h.textSoft),p.style.setProperty("--title",h.title),p.style.setProperty("--line",h.line),p.style.setProperty("--accent",h.accent),p.style.setProperty("--success",h.success),p.style.setProperty("--warning",h.warning),p.style.setProperty("--danger",h.danger),p.style.setProperty("--radius",`${h.radius}px`),p.style.setProperty("--border",`${h.border}px`),p.style.setProperty("--gap",`${h.gap}px`),p.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),p.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),p.style.setProperty("--noise",`${h.noise}%`),p.style.setProperty("--font",h.fontFamily),p.style.setProperty("--font-size",`${h.fontSize}px`),p.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),p.style.setProperty("--glow",`${h.glow}`),p.style.setProperty("--scanlines",`${h.scanlines}`))};J.useEffect(()=>{r(t)},[t]);const i=(h,p)=>e(g=>({...g,[h]:p})),a=h=>e(p=>({...p,...uk[h]})),l=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download="sfdatahub-theme-pro.json",p.click()},d=async h=>{try{const p=await h.text(),g=JSON.parse(p);e({...t,...g})}catch(p){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return n.jsxs("div",{ref:s,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(uk).map(h=>n.jsx("button",{style:_l,onClick:()=>a(h),children:h},h)),n.jsx("button",{style:_l,onClick:()=>e(I0),children:"Reset"}),n.jsx("button",{style:_l,onClick:l,children:"Export"}),n.jsxs("label",{style:{..._l,display:"inline-block"},children:["Import",n.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&d(h.target.files[0])})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(Qr,{label:"Page",value:t.page,onChange:h=>i("page",h)}),n.jsx(Qr,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),n.jsx(Qr,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),n.jsx(Qr,{label:"Active",value:t.active,onChange:h=>i("active",h)}),n.jsx(Qr,{label:"Text",value:t.text,onChange:h=>i("text",h)}),n.jsx(Qr,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),n.jsx(Qr,{label:"Title",value:t.title,onChange:h=>i("title",h)}),n.jsx(Qr,{label:"Line",value:t.line,onChange:h=>i("line",h)}),n.jsx(Qr,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[n.jsx(Qr,{label:"Success",value:t.success,onChange:h=>i("success",h)}),n.jsx(Qr,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),n.jsx(Qr,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(xa,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),n.jsx(xa,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),n.jsx(xa,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),n.jsx(xa,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),n.jsx(xa,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),n.jsx(xa,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("label",{style:{...zg,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),n.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),n.jsx(xa,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),n.jsx(Lye,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(xa,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),n.jsx(xa,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[n.jsxs("span",{style:wl,children:[n.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),n.jsx("span",{style:{...wl,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),n.jsx("span",{style:{...wl,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),n.jsx("span",{style:{...wl,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),n.jsxs("span",{style:wl,children:["Radius: ",t.radius]}),n.jsxs("span",{style:wl,children:["Shadow: ",t.shadow]}),n.jsxs("span",{style:wl,children:["Noise: ",t.noise,"%"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),n.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",n.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),n.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,p)=>n.jsxs("div",{style:{display:"grid",gap:4},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[n.jsx("span",{children:h.label}),n.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),n.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:n.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},p))}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[n.jsx("button",{style:{..._l,background:"var(--tile-hover)"},children:"Open Profile"}),n.jsx("button",{style:{..._l,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,p)=>n.jsx("button",{style:{..._l,background:p===0?"var(--tile-hover)":"transparent",borderColor:p===0?"var(--active)":"var(--line)",boxShadow:p===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,p)=>n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),n.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),n.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},p))}),n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[n.jsx("div",{style:{padding:10},children:"Attribute"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,p)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:p%2?"rgba(255,255,255,.025)":"transparent"},children:[n.jsx("div",{style:{padding:10},children:h[0]}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),n.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},p))]})]})]}),n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const pk=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function Dye(t=120){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,className:pk[s%pk.length],level:200+s%50,guild:s%3===0?`Guild ${s%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const Nv={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function mk(){const[t,e]=T.useState("rows"),[s,r]=T.useState(0),[i,a]=T.useState(""),[l,d]=T.useState(60),u=T.useMemo(()=>Dye(240),[]),h=T.useMemo(()=>u.filter(p=>p.level>=s).filter(p=>p.name.toLowerCase().includes(i.toLowerCase())).slice(0,l),[u,s,i,l]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("select",{value:t,onChange:p=>e(p.target.value),children:[n.jsx("option",{value:"rows",children:"Compact Rows"}),n.jsx("option",{value:"cards",children:"Card Grid"}),n.jsx("option",{value:"masonry",children:"Masonry"})]}),n.jsx("input",{placeholder:"Search",value:i,onChange:p=>a(p.target.value)}),n.jsxs("label",{children:["Min Level ",n.jsx("input",{type:"number",value:s,onChange:p=>r(parseInt(p.target.value||"0")),style:{marginLeft:8,width:90}})]}),n.jsxs("label",{children:["Limit ",n.jsx("input",{type:"number",value:l,onChange:p=>d(parseInt(p.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&n.jsx("div",{style:{...Nv,padding:0,overflow:"hidden"},children:h.map(p=>{var g;return n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:700},children:[p.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:p.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),n.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=p.kpi)==null?void 0:g.toFixed(1)})]})]},p.id)})}),t==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(p=>{var g;return n.jsxs("div",{style:Nv,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:p.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:p.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]}),n.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[n.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),n.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=p.kpi)==null?void 0:g.toFixed(1)})]})]},p.id)})}),t==="masonry"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(p=>n.jsxs("div",{style:{...Nv,height:140+parseInt(p.id)%3*40},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:p.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:p.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]}),n.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},p.id))})]})}function fk(t=24){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,server:`EU${1+s%3}`,lastScanMinsAgo:60+s*7%240});return e}function gk(){const[t,e]=T.useState(120),[s,r]=T.useState(()=>fk(24));T.useEffect(()=>{const a=setInterval(()=>{r(l=>{if(!l.length)return l;const d=Math.floor(Math.random()*l.length),u=[...l];return u[d]={...u[d],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),T.useEffect(()=>{const a=setInterval(()=>{r(l=>l.map(d=>({...d,lastScanMinsAgo:d.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=T.useMemo(()=>s.filter(a=>a.lastScanMinsAgo>t),[s,t]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{children:["Freshness TTL (min) ",n.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),n.jsx("button",{onClick:()=>r(fk(24)),children:"Reset Demo Data"})]}),n.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),n.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[n.jsx("div",{children:"Player"}),n.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{children:[a.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),n.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&n.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function Mye(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),s=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:s}}function xk(){const[t,e]=T.useState("idle"),[s,r]=T.useState(null),[i,a]=T.useState(!1),l=T.useCallback(async d=>{var h;d.preventDefault(),a(!1);const u=(h=d.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const p=await u.text(),{isHar:g,isSf:v}=Mye(p);if(e("parsing"),await new Promise(b=>setTimeout(b,600)),!g&&!v){e("error"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":v?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(p.length/2500)} (rough).`})}catch(p){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(p==null?void 0:p.message)||"Parse failed"})}}},[]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),n.jsx("div",{onDragOver:d=>{d.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:l,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),n.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),n.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Status:"})," ",t]}),s?n.jsxs("ul",{children:[n.jsxs("li",{children:["isHar: ",String(s.isHar)]}),n.jsxs("li",{children:["isSf: ",String(s.isSf)]}),n.jsxs("li",{children:["sizeKB: ",s.sizeKB]}),s.error&&n.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",s.error]}),s.summary&&n.jsxs("li",{children:["summary: ",s.summary]})]}):n.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const Fye="_wrap_hxkkn_3",Bye="_left_hxkkn_17",$ye="_right_hxkkn_25",Oye="_canvasCard_hxkkn_33",Vye="_hint_hxkkn_83",Uye="_panel_hxkkn_95",zye="_panelTitle_hxkkn_109",Hye="_panelBody_hxkkn_121",ya={wrap:Fye,left:Bye,right:$ye,canvasCard:Oye,hint:Vye,panel:Uye,panelTitle:zye,panelBody:Hye},Gye=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],Wye=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function qye(){const[t,e]=T.useState("Canvas ist vorbereitet (526526)."),s=T.useRef(null),[r,i]=T.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,l]=T.useState(!0);T.useEffect(()=>{const p=document.getElementById("PortraitCanvas");if(!p){e("Fehler: Canvas nicht gefunden.");return}try{s.current&&typeof s.current.dispose=="function"&&s.current.dispose()}catch(b){}let g=console.error;a&&(console.error=(...b)=>{var k;const S=String((k=b==null?void 0:b[0])!=null?k:"");S.includes("Failed to load URL")&&S.includes("PortraitMaker-res/portraits/")||g(...b)});let v=null;try{v=new zk(p,{...r}),s.current=v,e("Rendering")}catch(b){a&&(console.error=g),g("Error initializing PortraitMaker:",b),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return v&&(v.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{v&&typeof v.dispose=="function"&&v.dispose()}finally{a&&(console.error=g)}}},[r,a]);const d=()=>{const p=document.getElementById("PortraitCanvas");if(!p)return;const g=p.toDataURL("image/png"),v=document.createElement("a");v.href=g,v.download="portrait.png",v.click()},u=p=>{i(g=>({...g,genderName:p,beard:p==="female"?0:g.beard}))},h=r.special!==0;return n.jsxs("div",{className:ya.wrap,children:[n.jsx("div",{className:ya.left,children:n.jsxs("div",{className:ya.canvasCard,children:[n.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),n.jsx("div",{className:ya.hint,children:t})]})}),n.jsx("div",{className:ya.right,children:n.jsxs("div",{className:ya.panel,children:[n.jsx("h2",{className:ya.panelTitle,children:"Controls"}),n.jsx("div",{className:ya.panelBody,children:n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",n.jsx("input",{type:"number",value:r.special,onChange:p=>i(g=>({...g,special:Number(p.target.value||0)})),style:{width:100}})]}),n.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[n.jsxs("label",{children:["Gender:",n.jsxs("select",{value:r.genderName,onChange:p=>u(p.target.value),children:[n.jsx("option",{value:"male",children:"male"}),n.jsx("option",{value:"female",children:"female"})]})]}),n.jsxs("label",{children:["Class:",n.jsx("input",{type:"number",min:1,value:r.class,onChange:p=>i(g=>({...g,class:Number(p.target.value||0)})),style:{width:80}})]}),n.jsxs("label",{children:["Race:",n.jsx("input",{type:"number",min:1,value:r.race,onChange:p=>i(g=>({...g,race:Number(p.target.value||0)})),style:{width:80}})]})]}),n.jsxs("label",{children:["Background:",n.jsx("select",{value:r.background,onChange:p=>i(g=>({...g,background:p.target.value})),children:Gye.map(p=>n.jsx("option",{value:p,children:p===""?"transparent":p},p))})]}),n.jsxs("label",{children:["Frame:",n.jsx("select",{value:r.frame,onChange:p=>i(g=>({...g,frame:p.target.value})),children:Wye.map(p=>n.jsx("option",{value:p,children:p===""?"none":p},p))})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:p=>i(g=>({...g,showBorder:p.target.checked}))}),"showBorder"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:a,onChange:p=>l(p.target.checked)}),"Mute 404 logs (Playground)"]}),n.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:n.jsx("button",{onClick:d,children:"Export PNG"})}),h&&n.jsxs("div",{className:ya.hint,children:["Hinweis: Bei ",n.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const Kye=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],Qye=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],Xye=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function Yye(){return n.jsx(Et,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),n.jsx("ul",{className:"mt-2 space-y-2",children:Kye.map(t=>n.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[n.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),n.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),n.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[n.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),n.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),n.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),n.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:Qye.map(t=>n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),n.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),n.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),n.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:Xye.map(t=>n.jsx("li",{children:t},t))})]})]}),children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),n.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),n.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),n.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),n.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),n.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),n.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),n.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),n.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),n.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const Jye={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function Zye(){return n.jsx(Et,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:n.jsx("div",{className:"flex w-full justify-center pt-10",children:n.jsx(WE,{config:Jye,label:"Playground Avatar"})})})}const eve=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function tve(){return n.jsx(Et,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:eve.map(t=>n.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),n.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),n.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const sve="_avatarFrameMask_1pzs8_5",nve="_avatarFrameOverlay_1pzs8_7",yk={avatarFrameMask:sve,avatarFrameOverlay:nve},rve=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function ive(){return n.jsx(Et,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:n.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[n.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:rve.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),n.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),n.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),n.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:yk.avatarFrameMask,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:yk.avatarFrameOverlay,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const ave=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function ove(){return n.jsx(Et,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"flex w-full flex-col gap-4",children:ave.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,n.jsx("span",{children:"Leer"})]}),n.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),n.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function lve(){return n.jsx(Et,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),n.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const Y={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},cve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},dve={maxWidth:1200,margin:"0 auto"},uve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function hve(){return n.jsx("div",{style:cve,children:n.jsxs("div",{style:dve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"HAR Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:uve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),n.jsxs("div",{style:{border:`1px dashed ${Y.line}`,borderRadius:12,padding:24,textAlign:"center",background:Y.tileAlt},children:["Drop .har file here or"," ",n.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),n.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const pve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},mve={maxWidth:1200,margin:"0 auto"},fve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function gve(){return n.jsx("div",{style:pve,children:n.jsxs("div",{style:mve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"JSON/CSV Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:fve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{children:["Upload JSON ",n.jsx("input",{type:"file",accept:".json"})]}),n.jsxs("label",{children:["Upload CSV ",n.jsx("input",{type:"file",accept:".csv"})]})]}),n.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const xve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},yve={maxWidth:1200,margin:"0 auto"},vve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function bve(){return n.jsx("div",{style:xve,children:n.jsxs("div",{style:yve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Index Schema Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:vve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const _ve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},wve={maxWidth:1200,margin:"0 auto"},jve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Sve(){return n.jsx("div",{style:_ve,children:n.jsxs("div",{style:wve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Player Profile (Contained) Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:jve,children:[n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${Y.line}`}}),n.jsxs("div",{children:[n.jsx("h3",{style:{margin:"4px 0",color:Y.title},children:"NightRaven"}),n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>n.jsx("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const Nve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},kve={maxWidth:1200,margin:"0 auto"},Cve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Tve(){return n.jsx("div",{style:Nve,children:n.jsxs("div",{style:kve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Guild Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Cve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:Y.title},children:"Ravens"}),n.jsx("span",{children:"Avg Lvl 465"}),n.jsx("span",{children:"Fresh scans 82%"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:Y.title},children:"Arcana"}),n.jsx("span",{children:"Avg Lvl 458"}),n.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const Eve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},Ave={maxWidth:1200,margin:"0 auto"},Ive={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Rve(){return n.jsx("div",{style:Eve,children:n.jsxs("div",{style:Ave,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Server Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Ive,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const Pve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},Lve={maxWidth:1200,margin:"0 auto"},Dve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Mve(){return n.jsx("div",{style:Pve,children:n.jsxs("div",{style:Lve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Rankings Views Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Dve,children:[n.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>n.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${Y.line}`,borderRadius:10},children:t},t))}),n.jsx("div",{style:{border:`1px solid ${Y.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[n.jsx("b",{style:{color:Y.title},children:t.name}),n.jsx("span",{children:t.delta}),n.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const Fve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},Bve={maxWidth:1200,margin:"0 auto"},$ve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Ove(){return n.jsx("div",{style:Fve,children:n.jsxs("div",{style:Bve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"KPI Dashboard Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:$ve,children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>n.jsx("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const Vve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},Uve={maxWidth:1200,margin:"0 auto"},zve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Hve(){return n.jsx("div",{style:Vve,children:n.jsxs("div",{style:Uve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Progression Tracker Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:zve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),n.jsx("div",{style:{height:160,border:`1px dashed ${Y.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const Gve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},Wve={maxWidth:1200,margin:"0 auto"},qve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Kve(){return n.jsx("div",{style:Gve,children:n.jsxs("div",{style:Wve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Legendary & Pets Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:qve,children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"Legendary Tracker"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Shadow Bow "}),n.jsx("li",{children:"Mythic Ring "})]})]}),n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"Pets"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Firewolf 4/5"}),n.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const Qve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},Xve={maxWidth:1200,margin:"0 auto"},Yve={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function Jve(){return n.jsx("div",{style:Qve,children:n.jsxs("div",{style:Xve,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Community Scans Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Yve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>n.jsx("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const Zve={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},e0e={maxWidth:1200,margin:"0 auto"},t0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function s0e(){return n.jsx("div",{style:Zve,children:n.jsxs("div",{style:e0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Creator Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:t0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const n0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},r0e={maxWidth:1200,margin:"0 auto"},i0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function a0e(){return n.jsx("div",{style:n0e,children:n.jsxs("div",{style:r0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Feedback Form Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:i0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Category"}),n.jsxs("select",{style:{background:"#152A42",color:Y.text,border:`1px solid ${Y.line}`,borderRadius:8,padding:"6px 8px"},children:[n.jsx("option",{children:"UI"}),n.jsx("option",{children:"Data"}),n.jsx("option",{children:"Bug"})]})]}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Message"}),n.jsx("textarea",{rows:4,style:{background:"#152A42",color:Y.text,border:`1px solid ${Y.line}`,borderRadius:8,padding:"6px 8px"}})]}),n.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${Y.line}`,borderRadius:10},children:"Send"})]})})]})})}const o0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},l0e={maxWidth:1200,margin:"0 auto"},c0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function d0e(){return n.jsx("div",{style:o0e,children:n.jsxs("div",{style:l0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Feedback Admin Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:c0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),n.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("span",{children:t}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),n.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const u0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},h0e={maxWidth:1200,margin:"0 auto"},p0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function m0e(){return n.jsx("div",{style:u0e,children:n.jsxs("div",{style:h0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Tutorials Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:p0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Step highlights"}),n.jsx("li",{children:"Progress bar"}),n.jsx("li",{children:"Badges"})]})]})})]})})}const f0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},g0e={maxWidth:1200,margin:"0 auto"},x0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function y0e(){return n.jsx("div",{style:f0e,children:n.jsxs("div",{style:g0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Wiki & FAQ Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:x0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),n.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${Y.line}`,borderRadius:10}}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"How to import HAR?"}),n.jsx("li",{children:"What data is stored?"})]})]})})]})})}const v0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},b0e={maxWidth:1200,margin:"0 auto"},_0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function w0e(){return n.jsx("div",{style:v0e,children:n.jsxs("div",{style:b0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Settings Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:_0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("label",{children:["Language",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"EN"}),n.jsx("option",{children:"DE"})]})]}),n.jsxs("label",{children:["Theme",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"Dark"}),n.jsx("option",{children:"Custom"})]})]}),n.jsxs("label",{children:["Notifications",n.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),n.jsxs("label",{children:["Privacy",n.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const j0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},S0e={maxWidth:1200,margin:"0 auto"},N0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function k0e(){return n.jsx("div",{style:j0e,children:n.jsxs("div",{style:S0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"ToS & Privacy Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:N0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),n.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:n.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),n.jsxs("label",{style:{marginTop:8},children:[n.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const C0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},T0e={maxWidth:1200,margin:"0 auto"},E0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function A0e(){return n.jsx("div",{style:C0e,children:n.jsxs("div",{style:T0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Transparency Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:E0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),n.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const I0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},R0e={maxWidth:1200,margin:"0 auto"},P0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function L0e(){return n.jsx("div",{style:I0e,children:n.jsxs("div",{style:R0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"PWA Update Flow Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:P0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[n.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const D0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},M0e={maxWidth:1200,margin:"0 auto"},F0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function B0e(){return n.jsx("div",{style:D0e,children:n.jsxs("div",{style:M0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"PWA Install Prompt Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:F0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[n.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${Y.line}`,borderRadius:20}}),n.jsxs("div",{children:[n.jsx("b",{style:{color:Y.title},children:"Install SFDataHub"}),n.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const $0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},O0e={maxWidth:1200,margin:"0 auto"},V0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function U0e(){return n.jsx("div",{style:$0e,children:n.jsxs("div",{style:O0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Connect Manual Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:V0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:[n.jsx("b",{style:{color:Y.title},children:"View source"}),n.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const z0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},H0e={maxWidth:1200,margin:"0 auto"},G0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function W0e(){return n.jsx("div",{style:z0e,children:n.jsxs("div",{style:H0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Connect Userscript Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:G0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx("div",{children:"Install/Enable check"}),n.jsx("div",{children:"Events preview"})]})]})})]})})}const q0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},K0e={maxWidth:1200,margin:"0 auto"},Q0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function X0e(){return n.jsx("div",{style:q0e,children:n.jsxs("div",{style:K0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Exports Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Q0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"CSV/Excel"}),n.jsx("div",{children:"Tabs, widths, locales"})]}),n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"JSON API"}),n.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const Y0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},J0e={maxWidth:1200,margin:"0 auto"},Z0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function e1e(){return n.jsx("div",{style:Y0e,children:n.jsxs("div",{style:J0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Deeplinks Demo Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Z0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),n.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const t1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},s1e={maxWidth:1200,margin:"0 auto"},n1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function r1e(){return n.jsx("div",{style:t1e,children:n.jsxs("div",{style:s1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Servers Editor Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:n1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[n.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),n.jsxs("select",{children:[n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Disabled"})]}),n.jsx("button",{children:"Add"})]})]})})]})})}const i1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},a1e={maxWidth:1200,margin:"0 auto"},o1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function l1e(){return n.jsx("div",{style:i1e,children:n.jsxs("div",{style:a1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Jobs & Queues Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:o1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),n.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const c1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},d1e={maxWidth:1200,margin:"0 auto"},u1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function h1e(){return n.jsx("div",{style:c1e,children:n.jsxs("div",{style:d1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Feature Flags Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:u1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[n.jsx("span",{children:"Beta: New Rankings"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox",defaultChecked:!0})}),n.jsx("span",{children:"Widgets v2"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox"})})]})]})})]})})}const p1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},m1e={maxWidth:1200,margin:"0 auto"},f1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function g1e(){return n.jsx("div",{style:p1e,children:n.jsxs("div",{style:m1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Table Performance Lab Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:f1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),n.jsx("div",{style:{height:160,border:`1px dashed ${Y.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const x1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},y1e={maxWidth:1200,margin:"0 auto"},v1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function b1e(){return n.jsx("div",{style:x1e,children:n.jsxs("div",{style:y1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:v1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),n.jsx("div",{style:{height:180,border:`1px dashed ${Y.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const _1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},w1e={maxWidth:1200,margin:"0 auto"},j1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function S1e(){return n.jsx("div",{style:_1e,children:n.jsxs("div",{style:w1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Accessibility Pass Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:j1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Focus ring visible"}),n.jsx("li",{children:"Skip links"}),n.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const N1e=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function k1e({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:s,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:l}){const{t:d}=Gl(),[u,h]=T.useState(null);T.useEffect(()=>{const L=N1e(r);if(!L){h(null);return}const M=()=>{const y=Date.now(),_=Math.max(0,Math.floor((L-y)/1e3));h(_)};M();const N=window.setInterval(M,1e3);return()=>window.clearInterval(N)},[r]);const p=u!==null&&u>0,g=!t||a||!e||p,v=T.useMemo(()=>{if(u===null||u<=0)return null;const L=Math.floor(u/60),M=u%60;return`${String(L).padStart(2,"0")}:${String(M).padStart(2,"0")}`},[u]),b=a?d("tools.sync.saving"):v?d("tools.sync.cooldownLabel",{time:v}):d("tools.sync.buttonSave"),S=T.useMemo(()=>d(e?"tools.sync.statusUnsynced":s?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,s,d]),k=T.useMemo(()=>{if(e)return null;if(s){const L=typeof s=="string"?new Date(s):s;return`${d("tools.sync.lastSyncLabel")}: ${L.toLocaleTimeString()}`}return d("tools.sync.noChanges")},[e,s,d]),E=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return n.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[n.jsx("button",{type:"button",disabled:g,onClick:i,className:E,children:b}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:S}),k&&n.jsx("p",{className:"text-sm text-slate-200",children:k}),l&&n.jsx("p",{className:"text-sm text-rose-400",children:l})]})]})})}const zm=3,AA="sfdatahub.tools.sets.v1",vk=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],Uc=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],C1e=300*1e3;async function T1e(t,e){const s=Wt(Yl(ct,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",s.path);const r={version:1,updatedAt:vi(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await $a(s,r,{merge:!1})}const E1e=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(AA);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function A1e(){var Vt,is;const{t}=Gl(),{user:e,status:s,loginWithDiscord:r}=zo(),i=s==="authenticated"&&!!e,a=T.useMemo(()=>E1e(),[]),l=T.useMemo(()=>{var Ee;return(Ee=a==null?void 0:a.sets)!=null&&Ee.length?a.sets.slice(0,zm):vk},[a]),d=T.useMemo(()=>{var Le,Ie,He,ot;const Ee=a==null?void 0:a.activeSetId;return Ee&&l.some(ht=>ht.id===Ee)?Ee:(ot=(He=(Le=l[0])==null?void 0:Le.id)!=null?He:(Ie=vk[0])==null?void 0:Ie.id)!=null?ot:"set-main-dh"},[a,l]),u=T.useMemo(()=>{var Le,Ie;const Ee=a==null?void 0:a.activeToolId;return Ee&&Uc.some(He=>He.id===Ee)?Ee:(Ie=(Le=Uc[0])==null?void 0:Le.id)!=null?Ie:"gemSim"},[a]),[h,p]=T.useState(l),[g,v]=T.useState(d),[b,S]=T.useState(u),[k,E]=T.useState(null),[L,M]=T.useState(""),[N,y]=T.useState(""),[_,D]=T.useState(!1),[C,w]=T.useState(null),[I,F]=T.useState(null),[R,B]=T.useState(!1),[$,W]=T.useState(null),H=T.useRef(null),q=T.useRef(!0);T.useEffect(()=>{if(typeof window!="undefined")try{const Ee={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:b};window.localStorage.setItem(AA,JSON.stringify(Ee))}catch(Ee){console.warn("Failed to persist tools state",Ee)}},[h,g,b]),T.useEffect(()=>{if(!i){D(!1),q.current=!0;return}if(q.current){q.current=!1;return}D(!0)},[i,h,g,b]);const K=T.useMemo(()=>{var Ee;return(Ee=h.find(Le=>Le.id===g))!=null?Ee:h[0]},[g,h]),G=T.useMemo(()=>{var Ee;return(Ee=Uc.find(Le=>Le.id===b))!=null?Ee:Uc[0]},[b]),se=(Vt=K==null?void 0:K.tools)==null?void 0:Vt.gemSim,ne=(is=K==null?void 0:K.tools)==null?void 0:is.dungeonPauseOpenXP,U=h.length,Z=U>=zm,le=()=>{if(Z)return;const Ee=U+1,Le=t("tools.sets.defaultName","New Set"),Ie={id:`set-${Date.now()}`,name:`${Le} ${Ee}`,classLabel:"Class TBD",serverLabel:"Server TBD"};p(He=>[...He,Ie]),v(Ie.id)},ee=()=>{r()},he=()=>{if(!K){console.warn("No active set to export.");return}const Ee={version:1,type:"toolSet",set:K},Le=new Blob([JSON.stringify(Ee,null,2)],{type:"application/json"}),Ie=URL.createObjectURL(Le),He=document.createElement("a"),ot=K.name.toLowerCase().replace(/\s+/g,"-");He.href=Ie,He.download=`sfdatahub-set-${ot}.json`,He.click(),URL.revokeObjectURL(Ie)},xe=()=>{var Ee;(Ee=H.current)==null||Ee.click()},ge=Ee=>{var ht,yt;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Le=t("tools.sets.deleteConfirmTitle"),Ie=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Le}

${Ie}`))return;const He=h.filter(Ut=>Ut.id!==Ee),ot=Ee===g?(yt=(ht=He[0])==null?void 0:ht.id)!=null?yt:null:g;p(He),ot&&v(ot)},we=Ee=>{const Le=h.find(Ie=>Ie.id===Ee);Le&&(E(Ee),M(Le.name),y(""))},ve=()=>{E(null),M(""),y("")},ce=()=>{if(!k)return;const Ee=L.trim();if(!Ee){y(t("tools.sets.renameErrorEmpty"));return}p(Le=>Le.map(Ie=>Ie.id===k?{...Ie,name:Ee}:Ie)),E(null),M(""),y("")},ke=async Ee=>{var Ie,He;const Le=(He=(Ie=Ee.target)==null?void 0:Ie.files)==null?void 0:He[0];if(Le)try{if(h.length>=zm){alert(t("tools.sets.importErrorMaxReached"));return}const ot=await Le.text(),ht=JSON.parse(ot);if((ht==null?void 0:ht.version)!==1||(ht==null?void 0:ht.type)!=="toolSet"||typeof(ht==null?void 0:ht.set)!="object")throw new Error("invalid payload");const{set:yt}=ht;if(typeof(yt==null?void 0:yt.name)!="string"||typeof(yt==null?void 0:yt.classLabel)!="string"||typeof(yt==null?void 0:yt.serverLabel)!="string")throw new Error("invalid set");const Ut={...yt,id:`imported-${Date.now()}`,name:yt.name,classLabel:yt.classLabel,serverLabel:yt.serverLabel};p(Bt=>[...Bt,Ut]),v(Ut.id)}catch(ot){console.error("Failed to import set",ot),alert(t("tools.sets.importErrorInvalid"))}finally{Ee.target.value=""}},be=Ee=>{g&&(p(Le=>Le.map(Ie=>{var ot;if(Ie.id!==g)return Ie;const He={...(ot=Ie.tools)!=null?ot:{},gemSim:Ee};return{...Ie,tools:He}})),D(!0))},Ue=Ee=>{g&&(p(Le=>Le.map(Ie=>{var ot;if(Ie.id!==g)return Ie;const He={...(ot=Ie.tools)!=null?ot:{},dungeonPauseOpenXP:Ee};return{...Ie,tools:He}})),D(!0))},Ke=`${U}/${zm}`,Tt=t(G.labelKey,G.defaultLabel),Mt=t(G.descriptionKey,G.defaultDescription),Ft=async()=>{if(!i)return;const Ee=e==null?void 0:e.id;if(!(!Ee||R||I!==null&&I>Date.now())&&_){B(!0),W(null);try{await T1e(Ee,{sets:h,activeSetId:g,activeToolId:b});const Ie=Date.now(),He=Ie+C1e;D(!1),w(new Date(Ie)),F(He)}catch(Ie){console.error("Failed to sync tools state",Ie),W(t("tools.sync.error"))}finally{B(!1)}}};return n.jsx(Et,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),n.jsx("span",{className:"text-xs text-slate-400",children:Ke})]}),n.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(Ee=>{const Le=Ee.id===g;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>v(Ee.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Le?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-sm font-semibold text-slate-50",children:Ee.name}),n.jsx("span",{role:"button",tabIndex:0,onClick:Ie=>{Ie.stopPropagation(),we(Ee.id)},onKeyDown:Ie=>{(Ie.key==="Enter"||Ie.key===" ")&&(Ie.preventDefault(),Ie.stopPropagation(),we(Ee.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:n.jsx(EL,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-xs text-emerald-200/90",children:Ee.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:Ee.serverLabel}),Le&&n.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&n.jsx("button",{type:"button",onClick:Ie=>{Ie.stopPropagation(),ge(Ee.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},Ee.id)}),n.jsxs("button",{type:"button",onClick:le,disabled:Z,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",Z?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[n.jsx("span",{className:"text-lg",children:"+"}),n.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[n.jsx("button",{type:"button",onClick:he,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),n.jsx("button",{type:"button",onClick:xe,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),n.jsx("input",{ref:H,type:"file",accept:"application/json",className:"hidden",onChange:ke})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),n.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:Uc.map(Ee=>{const Le=Ee.id===b,Ie=t(Ee.labelKey,Ee.defaultLabel);return n.jsxs("button",{type:"button",onClick:()=>S(Ee.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Le?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[n.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),n.jsx("span",{children:Ie})]},Ee.id)})})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),n.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),n.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(Ee=>n.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),n.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:Ee})]},Ee))})]}),n.jsx(k1e,{isLoggedIn:i,hasUnsyncedChanges:_,lastSyncedAt:C,cooldownUntil:I,onSyncClick:Ft,isSaving:R,syncError:$})]}):n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),n.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),n.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(Ee=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),n.jsx("span",{children:Ee})]},Ee))})]}),n.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:n.jsx("button",{type:"button",onClick:ee,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:Tt}),n.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(K==null?void 0:K.name)||"kein Set"]})]}),n.jsx("div",{className:"flex gap-2",children:Uc.map(Ee=>n.jsx("div",{className:["h-2 w-8 rounded-full transition",b===Ee.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},Ee.id))})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsx("div",{className:"text-sm text-slate-300",children:Mt}),n.jsx("div",{className:"mt-4",children:b==="gemSim"?n.jsx(ZE,{initialState:se,onStateChange:be}):b==="dungeonPauseOpenXP"?n.jsx(sA,{initialState:ne,onStateChange:Ue},g):n.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",n.jsx("br",{}),"(z. B. ",Tt,")"]})})]}),n.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:K==null?void 0:K.name}),n.jsx("div",{className:"text-sm text-emerald-200/90",children:K==null?void 0:K.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:K==null?void 0:K.serverLabel})]}),n.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",n.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),k&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:ve}),n.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),n.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),n.jsx("input",{value:L,onChange:Ee=>M(Ee.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),N&&n.jsx("p",{className:"mt-2 text-xs text-rose-400",children:N}),n.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:ve,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),n.jsx("button",{type:"button",onClick:ce,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const I1e="_backdrop_19xh2_1",R1e="_panel_19xh2_19",P1e="_header_19xh2_43",L1e="_tabs_19xh2_63",D1e="_tabBtn_19xh2_75",M1e="_tabActive_19xh2_97",F1e="_closeBtn_19xh2_101",B1e="_content_19xh2_123",Oi={backdrop:I1e,panel:R1e,header:P1e,tabs:L1e,tabBtn:D1e,tabActive:M1e,closeBtn:F1e,content:B1e},Ui=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const s=Number(e);return Number.isFinite(s)?s:0},$1e=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let s=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/);return s?{group:"EU",serverKey:`EU${s[1]||s[2]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(s=e.match(/F(\d+)/),s?{group:"FUSION",serverKey:`F${s[1]}`}:{group:"ALL",serverKey:"all"})},O1e={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Dexterity",Mage:"Base Intelligence","Battle Mage":"Base Intelligence",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},ko=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,V1e=t=>{const e={str:Ui(ko(t,"Base Strength")),dex:Ui(ko(t,"Base Dexterity")),intl:Ui(ko(t,"Base Intelligence")),con:Ui(ko(t,"Base Constitution")),luck:Ui(ko(t,"Base Luck"))},s=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:s}},U1e=(t,e)=>{var w,I;const{playerId:s,name:r,className:i,level:a,server:l,guildIdentifier:d,guildName:u,timestamp:h,updatedAt:p,values:g={}}=t||{},v=Ui(a),{group:b,serverKey:S}=$1e(l),k=V1e(g),E=(w=O1e[String(i)])!=null?w:"Base Intelligence",L=Ui(ko(g,E)),M=k.sum,N=k.con,y=v>0?M/v:0,_=Ui(ko(g,"Gem Mine")),D=Ui(ko(g,"Treasury")),C=e?e():null;return{playerId:String(s!=null?s:""),name:String(r!=null?r:""),class:String(i!=null?i:""),level:v,group:b,serverKey:S,guildId:d?String(d):"",guildName:u?String(u):"",sum:M,main:L,con:N,ratio:y,mine:_,treasury:D,timestamp:Ui(h),updatedAtFromLatest:(I=p!=null?p:C)!=null?I:null}},Jr=t=>String(t!=null?t:"").trim(),IA=t=>Jr(t).toUpperCase(),Lt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),bk=t=>t<10?`0${t}`:String(t),z1e=t=>{const e=t?new Date(t*1e3):new Date;return+`${e.getFullYear()}${bk(e.getMonth()+1)}${bk(e.getDate())}`},hf=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),_k=t=>{const e=hf(t);if(!e)return[];const s=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(s))},wk=t=>{const e=new Set;for(const s of t)for(let r=1;r<=s.length;r++)e.add(s.slice(0,r));return Array.from(e)},jk=t=>{var s;const e=String((s=t==null?void 0:t.code)!=null?s:"").toLowerCase();return e.includes("permission")||e.includes("already")||e.includes("failed-precondition")},R0=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},Sk=t=>{const e=R0(t);return Number.isFinite(e!=null?e:NaN)?Math.trunc(e):null},H1e=t=>{const e=Lt(t);for(const[s,r]of Object.entries(RA))if(Lt(r)===e)return Number(s);return null},Nk=t=>{var a;const e=t==null?"":String(t).trim();if(!e)return{classId:null,className:null};const s=Number(e);if(Number.isInteger(s)&&!Number.isNaN(s)){const l=s;return{classId:l,className:(a=RA[l])!=null?a:String(l)}}return{classId:H1e(e),className:e}},ms={PLAYERS:{IDENTIFIER:Lt("Identifier"),PID:Lt("ID"),GUILD_IDENTIFIER:Lt("Guild Identifier"),SERVER:Lt("Server"),NAME:Lt("Name"),TIMESTAMP:Lt("Timestamp"),LEVEL:Lt("Level"),CLASS:Lt("Class"),GUILD:Lt("Guild")},GUILDS:{GUILD_IDENTIFIER:Lt("Guild Identifier"),SERVER:Lt("Server"),NAME:Lt("Name"),MEMBER_COUNT:Lt("Guild Member Count"),TIMESTAMP:Lt("Timestamp"),HOF:Lt("Hall of Fame Rank"),HOF_ALT:Lt("HoF"),RANK:Lt("Rank"),GUILD_RANK:Lt("Guild Rank")}},RA={1:"Warrior",2:"Mage",3:"Scout",4:"Assassin",5:"Battle Mage",6:"Berserker",7:"Demon Hunter",8:"Bard"},PA=[ms.PLAYERS.LEVEL,Lt("Level"),Lt("Lvl"),Lt("Stufe")],LA=[ms.PLAYERS.CLASS,Lt("Class"),Lt("ClassID"),Lt("Class ID"),Lt("CharClass"),Lt("Klasse")],DA=t=>{const e=new Map;return t.forEach(s=>{const r=Lt(s);e.has(r)||e.set(r,s)}),e},ed=t=>{const e=new Set;for(const s of t)Object.keys(s).forEach(r=>e.add(r));return Array.from(e)},Rr=(t,e,s)=>{const r=e.get(s);return r&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:_a(t,s)},P0=(t,e,s)=>s.map(r=>Rr(t,e,r)).find(r=>r!=null&&String(r)!==""),G1e=new Set([Lt("Strength"),Lt("Dexterity"),Lt("Intelligence"),Lt("Constitution"),Lt("Luck"),Lt("Attribute")]),W1e=["equipment"],q1e=t=>G1e.has(t)||W1e.some(e=>t.includes(e)),_a=(t,e)=>{for(const s of Object.keys(t))if(Lt(s)===e)return t[s]};function Xf(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,p=new Date(l,a,i,d,u,h);if(!Number.isNaN(p.getTime()))return Math.floor(p.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function kk(t){const e=new Date(t*1e3),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-r);const i=new Date(Date.UTC(s.getUTCFullYear(),0,1)),a=Math.ceil(((+s-+i)/864e5+1)/7),l=s.getUTCFullYear(),d=a.toString().padStart(2,"0");return`${l}-W${d}`}function Ck(t){const e=new Date(t*1e3),s=new Date(e),r=(s.getDay()+6)%7;s.setHours(0,0,0,0),s.setDate(s.getDate()-r);const i=Math.floor(s.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function Tk(t){const e=new Date(t*1e3),s=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${s}-${r}`}function Ek(t){const e=new Date(t*1e3),s=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(s.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function K1e(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function Yf(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[]};const r=K1e((u=s[0])!=null?u:""),i=h=>{const p=[];let g="",v=!1;for(let b=0;b<h.length;b++){const S=h[b];S==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:S===r&&!v?(p.push(g),g=""):g+=S}return p.push(g),p},l=(s[0]?i(s[0]).map(Jr):[]).map((h,p)=>h||`col${p}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const p=i(s[h]);if(p.every(v=>Jr(v)===""))continue;const g={};for(let v=0;v<l.length;v++)g[l[v]]=p[v]!=null?Jr(p[v]):"";d.push(g)}return{headers:l,rows:d}}function Q1e(t){const e={};for(let s=0;s<t.length;s++){const r=Lt(t[s]);PA.includes(r)&&e.levelIndex==null&&(e.levelIndex=s),LA.includes(r)&&e.classIndex==null&&(e.classIndex=s)}if(e.levelIndex==null){const s=t.findIndex(r=>r.trim()==="Level");s>=0&&(e.levelIndex=s)}if(e.classIndex==null){const s=t.findIndex(r=>r.trim()==="Class");s>=0&&(e.classIndex=s)}return e}function MA(t,e){var d;const s=e&&e.length?e:ed(t),r=DA(s),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[],l=Q1e(s);for(const u of t){const h=(d=Rr(u,r,ms.PLAYERS.PID))!=null?d:Rr(u,r,ms.PLAYERS.IDENTIFIER),p=Jr(h);if(!p){i.missingIdentifier++;continue}const g=Xf(Rr(u,r,ms.PLAYERS.TIMESTAMP));if(g==null){i.badTimestamp++;continue}const v=Rr(u,r,ms.PLAYERS.SERVER),b=v&&Jr(v)!==""?IA(v):void 0;if(!b){i.missingServer++;continue}const S=Rr(u,r,ms.PLAYERS.NAME),k=S!=null&&Jr(S)!==""?String(S):null,E=Rr(u,r,ms.PLAYERS.GUILD_IDENTIFIER),L=E!=null&&Jr(E)!==""?String(E):null,M=Rr(u,r,ms.PLAYERS.GUILD),N=M!=null&&Jr(M)!==""?String(M):null,y=l.levelIndex!=null?Sk(u[s[l.levelIndex]]):Sk(P0(u,r,PA)),_=l.classIndex!=null?Nk(u[s[l.classIndex]]):Nk(P0(u,r,LA));a.push({playerId:p,server:b,name:k,timestampSec:g,guildIdentifier:L,guildName:N,level:y,classId:_.classId,className:_.className,raw:u})}return{rows:a,stats:i,headers:s}}function FA(t,e){const s=e&&e.length?e:ed(t),r=DA(s),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[];for(const l of t){const d=Rr(l,r,ms.GUILDS.GUILD_IDENTIFIER),u=Jr(d);if(!u){i.missingIdentifier++;continue}const h=Xf(Rr(l,r,ms.GUILDS.TIMESTAMP));if(h==null){i.badTimestamp++;continue}const p=Rr(l,r,ms.GUILDS.SERVER),g=p&&Jr(p)!==""?IA(p):void 0;if(!g){i.missingServer++;continue}const v=Rr(l,r,ms.GUILDS.NAME),b=v!=null&&Jr(v)!==""?String(v):null,S=R0(Rr(l,r,ms.GUILDS.MEMBER_COUNT)),k=R0(P0(l,r,[ms.GUILDS.HOF,ms.GUILDS.HOF_ALT,ms.GUILDS.RANK,ms.GUILDS.GUILD_RANK]));a.push({guildIdentifier:u,server:g,name:b,timestampSec:h,memberCount:S,hofRank:k,raw:l})}return{rows:a,stats:i,headers:s}}function X1e(t){const e=Yf(t);return MA(e.rows,e.headers).rows}function Y1e(t){const e=Yf(t);return FA(e.rows,e.headers).rows}const Ak="stats_cache_player_derived",J1e="stats_index_players_daily_compact",pf=40,Ik=120;async function od(t,e,s,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:s});for(let i=0;i<t.length;i+=e){const a=kB(ct),l=t.slice(i,i+e);for(const d of l)d(a);r==null||r({phase:"write",current:Math.min(i+l.length,t.length),total:t.length,pass:s}),await a.commit(),await new Promise(d=>setTimeout(d,12))}r==null||r({phase:"done",current:1,total:1,pass:s})}async function Rk(t,e,s){var p,g,v;const r=[];if(!t.length)return r;let i=0,a=0,l=0,d=0;const u=b=>{e==null||e({phase:b,current:b==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:l,error:d,kind:s})};u("prepare");const h=ct.bulkWriter;if(typeof h=="function"){const b=h.call(ct,{throttling:!0}),S=()=>{i++,u("write")};for(const{ref:k,data:E,key:L}of t)b.create(k,E).then(()=>{a++,r.push({key:L,status:"created"}),S()}).catch(M=>{var y,_;const N=String((y=M==null?void 0:M.code)!=null?y:"").toLowerCase();N.includes("already")&&N.includes("exist")?(l++,r.push({key:L,status:"duplicate"})):(d++,r.push({key:L,status:"error",message:String((_=M==null?void 0:M.message)!=null?_:M)})),S()});try{await b.close()}catch(k){console.warn("[ImportCsv] bulkWriter close with errors",{error:k})}return u("done"),r}for(const{ref:b,data:S,key:k}of t){try{await $a(b,S),a++,r.push({key:k,status:"created"})}catch(E){const L=String((p=E==null?void 0:E.code)!=null?p:"").toLowerCase();L.includes("permission")||L.includes("already")?(l++,r.push({key:k,status:"duplicate",message:String((g=E==null?void 0:E.message)!=null?g:E)})):(d++,r.push({key:k,status:"error",message:String((v=E==null?void 0:E.message)!=null?v:E)}))}i++,u("write")}return u("done"),r}async function Z1e(t,e,s,r){if(!t.length&&!e.length&&!s.length)return;const i=t.length+e.length+s.length,a=ct.bulkWriter;if(typeof a=="function"){const h=a.call(ct,{throttling:!0});r==null||r({phase:"prepare",current:0,total:i,pass:"latest"});for(const{ref:p,data:g}of t)h.set(p,g,{merge:!0});for(const{pid:p,data:g}of e)h.set(Wt(ct,`${Ak}/${p}`),g,{merge:!0});for(const{ref:p,data:g}of s)h.set(p,g,{merge:!0});r==null||r({phase:"write",current:i,total:i,pass:"latest"}),await h.close(),r==null||r({phase:"done",current:1,total:1,pass:"latest"});return}const l=t.map(({ref:h,data:p})=>g=>g.set(h,p,{merge:!0})),d=e.map(({pid:h,data:p})=>g=>g.set(Wt(ct,`${Ak}/${h}`),p,{merge:!0})),u=s.map(({ref:h,data:p})=>g=>g.set(h,p,{merge:!0}));await od(l,pf,"latest",r),await od(d,pf,"latest",r),await od(u,pf,"latest",r)}function Hm(t,e){const s={};for(const r of e){const i=Lt(r);if(q1e(i)){let a=null,l;for(const d of t){const u=d.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,l=u)}s[r]=l!=null?l:""}else{let a="";for(let l=t.length-1;l>=0;l--){const d=t[l].row[r];if(d!=null&&String(d)!==""){a=d;break}}s[r]=a}}return s}async function Pk(t){var i;const e=await Xs(t);if(!e.exists())return 0;const s=e.data();if(((i=s==null?void 0:s.values)==null?void 0:i.Timestamp)!=null){const a=Xf(s.values.Timestamp);if(a!=null)return a}if((s==null?void 0:s.timestampRaw)!=null){const a=Xf(s.timestampRaw);if(a!=null)return a}if(typeof(s==null?void 0:s.ts)=="number")return s.ts;const r=s==null?void 0:s.timestamp;if(typeof r=="number")return r>9999999999?Math.floor(r/1e3):r;if(typeof r=="string"){const a=Date.parse(r);return Number.isFinite(a)?Math.floor(a/1e3):0}return 0}async function Lk(t,e){var p,g,v,b,S,k,E;const s=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},l=[],d=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');const u=e.onProgress?(L=>{var M;return(M=e.onProgress)==null?void 0:M.call(e,{...L,kind:e.kind})}):void 0;if(e.kind==="players"){const L=[],M=[],N=[],y=new Map,_=[];let D=[],C=[];if(e.rows&&Array.isArray(e.rows))D=e.rows,C=ed(D);else if(e.raw&&typeof e.raw=="string"){const H=Yf(e.raw);D=H.rows,C=H.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:w,stats:I,headers:F}=MA(D,C);a.skippedMissingIdentifier+=I.missingIdentifier,a.skippedBadTs+=I.badTimestamp,a.skippedMissingServer+=I.missingServer;const R=F.length?F:ed(D),B=new Map;for(const H of w){const q=`${H.playerId}__${H.server}__${H.timestampSec}`;L.push({key:q,ref:Wt(ct,`players/${H.playerId}/scans/${H.timestampSec}`),data:{playerId:H.playerId,server:H.server,timestamp:H.timestampSec,timestampRaw:_a(H.raw,ms.PLAYERS.TIMESTAMP),name:H.name,values:H.raw,createdAt:vi()}}),B.has(H.playerId)||B.set(H.playerId,[]),B.get(H.playerId).push({row:H.raw,ts:H.timestampSec,parsed:H})}const $=await Rk(L,u,"players");l.push(...$),a.writtenScanPlayers=$.filter(H=>H.status==="created").length;for(const[H,q]of B){q.sort((be,Ue)=>be.ts-Ue.ts);const K=q[q.length-1],G=K.parsed,se=G.server,ne=G.name,U=(p=G.level)!=null?p:null,Z=(g=G.className)!=null?g:null,le=(v=G.guildName)!=null?v:null,ee=G.guildIdentifier,he=ne!=null?ne:"",xe=_k(he),ge=wk(xe),we=Wt(ct,`players/${H}/latest/latest`),ve=await Pk(we);if(K.ts>ve){const be=vi();M.push({ref:we,data:{playerId:H,server:se,timestamp:K.ts,timestampRaw:_a(K.row,ms.PLAYERS.TIMESTAMP),name:ne,values:K.row,updatedAt:be,nameFold:hf(he),nameTokens:xe,nameNgrams:ge,level:U,className:Z,guildName:le,guildNameFold:le?hf(le):null}});const Ue={playerId:H,name:ne,className:Z,level:U,server:se,guildIdentifier:ee||void 0,guildName:le||void 0,values:K.row,timestamp:K.ts,updatedAt:be},Ke=U1e(Ue,vi);N.push({pid:H,data:Ke});const Tt=z1e(K.ts),Mt=[{scopeId:"all_all_sum",group:"ALL",serverKey:"all"},{scopeId:`${Ke.group||"ALL"}_all_sum`,group:Ke.group||"ALL",serverKey:"all"}];Ke.serverKey&&Ke.serverKey!=="all"&&Mt.push({scopeId:`${Ke.group||"ALL"}_${Ke.serverKey}_sum`,group:Ke.group||"ALL",serverKey:Ke.serverKey});for(const Ft of Mt){const Vt=`${Tt}__${Ft.scopeId}`;y.has(Vt)||y.set(Vt,{dateKey:Tt,scopeId:Ft.scopeId,group:Ft.group,serverKey:Ft.serverKey,ids:[],vals:[]});const is=y.get(Vt);is.ids.push(H),is.vals.push(Number((b=Ke.sum)!=null?b:0))}a.writtenLatestPlayers++}const ce=new Map,ke=new Map;for(const be of q){const Ue=kk(be.ts),Ke=Tk(be.ts);ce.has(Ue)||ce.set(Ue,[]),ke.has(Ke)||ke.set(Ke,[]),ce.get(Ue).push(be),ke.get(Ke).push(be)}for(const[be,Ue]of ce){Ue.sort((Ft,Vt)=>Ft.ts-Vt.ts);const Ke=Hm(Ue,R),Tt=Ck(Ue[Ue.length-1].ts),Mt=Ue[Ue.length-1];_.push(Ft=>{const Vt=Wt(ct,`players/${H}/history_weekly/${be}`);Ft.set(Vt,{playerId:H,weekId:be,periodStartSec:Tt.start,periodEndSec:Tt.end,lastTs:Mt.ts,lastTimestampRaw:_a(Mt.row,ms.PLAYERS.TIMESTAMP),server:Mt.parsed.server,name:Mt.parsed.name,values:Ke,updatedAt:vi()},{merge:!0})}),a.writtenWeeklyPlayers++}for(const[be,Ue]of ke){Ue.sort((Ft,Vt)=>Ft.ts-Vt.ts);const Ke=Hm(Ue,R),Tt=Ek(Ue[Ue.length-1].ts),Mt=Ue[Ue.length-1];_.push(Ft=>{const Vt=Wt(ct,`players/${H}/history_monthly/${be}`);Ft.set(Vt,{playerId:H,monthId:be,periodStartSec:Tt.start,periodEndSec:Tt.end,lastTs:Mt.ts,lastTimestampRaw:_a(Mt.row,ms.PLAYERS.TIMESTAMP),server:Mt.parsed.server,name:Mt.parsed.name,values:Ke,updatedAt:vi()},{merge:!0})}),a.writtenMonthlyPlayers++}}const W=[];for(const{dateKey:H,scopeId:q,group:K,serverKey:G,ids:se,vals:ne}of y.values()){const U=se.map((he,xe)=>{var ge;return{id:he,val:(ge=ne[xe])!=null?ge:0}});U.sort((he,xe)=>xe.val-he.val);const Z=U.map(he=>he.id),le=U.map(he=>he.val),ee=U.map((he,xe)=>xe+1);W.push({ref:Wt(ct,`${J1e}/${H}__${q}`),data:{n:U.length,ids:Z,vals:le,ranks:ee,generatedAt:Date.now(),group:K,serverKey:G,metric:"sum",dateKey:H}})}await Z1e(M,N,W,u),await od(_,Ik,"history",u)}if(e.kind==="guilds"){const L=[],M=[],N=[];let y=[],_=[];if(e.rows&&Array.isArray(e.rows))y=e.rows,_=ed(y);else if(e.raw&&typeof e.raw=="string"){const B=Yf(e.raw);y=B.rows,_=B.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:D,stats:C,headers:w}=FA(y,_);a.skippedMissingGuildIdentifier+=C.missingIdentifier,a.skippedBadTsGuild+=C.badTimestamp,a.skippedMissingServer+=C.missingServer;const I=w.length?w:ed(y),F=new Map;for(const B of D){const $=`${B.guildIdentifier}__${B.server}__${B.timestampSec}`;L.push({key:$,ref:Wt(ct,`guilds/${B.guildIdentifier}/scans/${B.timestampSec}`),data:{guildIdentifier:B.guildIdentifier,server:B.server,timestamp:B.timestampSec,timestampRaw:_a(B.raw,ms.GUILDS.TIMESTAMP),name:B.name,values:B.raw,createdAt:vi()}}),F.has(B.guildIdentifier)||F.set(B.guildIdentifier,[]),F.get(B.guildIdentifier).push({row:B.raw,ts:B.timestampSec,parsed:B})}const R=await Rk(L,u,"guilds");d.push(...R),a.writtenScanGuilds=R.filter(B=>B.status==="created").length;for(const[B,$]of F){$.sort((he,xe)=>he.ts-xe.ts);const W=$[$.length-1],H=W.parsed,q=(S=H.name)!=null?S:"",K=_k(q),G=wk(K),se=(k=H.memberCount)!=null?k:null,ne=(E=H.hofRank)!=null?E:null,U=Wt(ct,`guilds/${B}/latest/latest`),Z=await Pk(U);W.ts>Z&&(M.push(he=>{he.set(U,{guildIdentifier:B,server:H.server,timestamp:W.ts,timestampRaw:_a(W.row,ms.GUILDS.TIMESTAMP),name:H.name,values:W.row,updatedAt:vi(),nameFold:hf(q),nameTokens:K,nameNgrams:G,memberCount:se,hofRank:ne},{merge:!0})}),a.writtenLatestGuilds++);const le=new Map,ee=new Map;for(const he of $){const xe=kk(he.ts),ge=Tk(he.ts);le.has(xe)||le.set(xe,[]),ee.has(ge)||ee.set(ge,[]),le.get(xe).push(he),ee.get(ge).push(he)}for(const[he,xe]of le){xe.sort((ce,ke)=>ce.ts-ke.ts);const ge=Hm(xe,I),we=Ck(xe[xe.length-1].ts),ve=xe[xe.length-1];N.push(ce=>{const ke=Wt(ct,`guilds/${B}/history_weekly/${he}`);ce.set(ke,{guildIdentifier:B,weekId:he,periodStartSec:we.start,periodEndSec:we.end,lastTs:ve.ts,lastTimestampRaw:_a(ve.row,ms.GUILDS.TIMESTAMP),server:ve.parsed.server,name:ve.parsed.name,values:ge,updatedAt:vi()},{merge:!0})}),a.writtenWeeklyGuilds++}for(const[he,xe]of ee){xe.sort((ce,ke)=>ce.ts-ke.ts);const ge=Hm(xe,I),we=Ek(xe[xe.length-1].ts),ve=xe[xe.length-1];N.push(ce=>{const ke=Wt(ct,`guilds/${B}/history_monthly/${he}`);ce.set(ke,{guildIdentifier:B,monthId:he,periodStartSec:we.start,periodEndSec:we.end,lastTs:ve.ts,lastTimestampRaw:_a(ve.row,ms.GUILDS.TIMESTAMP),server:ve.parsed.server,name:ve.parsed.name,values:ge,updatedAt:vi()},{merge:!0})}),a.writtenMonthlyGuilds++}}try{await od(M,pf,"latest",u)}catch(B){if(jk(B))console.warn("[ImportCsv] guild latest write skipped (duplicate/permission)",{error:B});else throw B}try{await od(N,Ik,"history",u)}catch(B){if(jk(B))console.warn("[ImportCsv] guild history write skipped (duplicate/permission)",{error:B});else throw B}}const h=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:h-s,playerResults:l,guildResults:d}}const wt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),ebe=t=>String(t!=null?t:"").trim(),L0=t=>ebe(t).toUpperCase(),D0=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function Bn(t,e){for(const s of Object.keys(t))if(wt(s)===e)return t[s]}function va(t,e){for(const s of e){const r=Bn(t,s);if(r!=null&&String(r)!=="")return r}}function jl(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function ld(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,p=new Date(l,a,i,d,u,h);if(!Number.isNaN(p.getTime()))return Math.floor(p.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const Ws={GUILD_IDENTIFIER:wt("Guild Identifier"),SERVER:wt("Server"),NAME:wt("Name"),TIMESTAMP:wt("Timestamp"),LEVEL:wt("Level"),CLASS:wt("Class"),GUILD:wt("Guild"),GUILD_ROLE:[wt("Role"),wt("Guild Role")],TREASURY:[wt("Treasury"),wt("Fortress Treasury"),wt("Treasury Level"),wt("Festungsschatzkammer")],MINE:[wt("Mine"),wt("Gem Mine"),wt("Mine Level"),wt("Festungsmine")],BASE_MAIN:[wt("Base"),wt("Base Attribute"),wt("BaseMain"),wt("Basis Attribut")],CON_BASE:[wt("Con Base"),wt("Constitution Base"),wt("Base Constitution"),wt("Basis Konstitution"),wt("conbase")],ATTR_TOT:[wt("Attribute"),wt("Attr Total"),wt("Attribut"),wt("Attribut Gesamt")],CON_TOT:[wt("Constitution"),wt("Constitution Total"),wt("Konstitution"),wt("Konstitution Gesamt")],LAST_ACTIVE:[wt("Last Active"),wt("LastActivity"),wt("Letzte Aktivitt")],GUILD_JOINED:[wt("Guild Joined"),wt("Joined Guild"),wt("Gildenbeitritt")]},mf={GUILD_IDENTIFIER:wt("Guild Identifier"),SERVER:wt("Server"),NAME:wt("Name")};function Dk(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function tbe(t){let e=5381;for(let s=0;s<t.length;s++)e=e*33^t.charCodeAt(s);return(e>>>0).toString(36)}function sbe(t){var s;const e=new Map;for(const r of t){const i=String((s=Bn(r,mf.GUILD_IDENTIFIER))!=null?s:"").trim(),a=Bn(r,mf.SERVER),l=Bn(r,mf.NAME);if(!i||!a||!l)continue;const d=`${L0(a)}__${D0(String(l))}`;e.set(d,i)}return e}function nbe(t){var N,y;const e=Bn(t,Ws.TIMESTAMP),s=ld(e),r=va(t,Ws.LAST_ACTIVE),i=ld(r),a=va(t,Ws.GUILD_JOINED),l=ld(a),d=jl(Bn(t,Ws.LEVEL)),u=(()=>{const _=Bn(t,Ws.CLASS);return _!=null&&String(_).trim()!==""?String(_):null})(),h=(()=>{const _=va(t,Ws.GUILD_ROLE);return _!=null&&String(_).trim()!==""?String(_):null})(),p=jl(va(t,Ws.TREASURY)),g=jl(va(t,Ws.MINE)),v=jl(va(t,Ws.BASE_MAIN)),b=jl(va(t,Ws.CON_BASE)),S=jl(va(t,Ws.ATTR_TOT)),k=jl(va(t,Ws.CON_TOT)),E=v!=null&&b!=null?v+b:null,L=S!=null&&k!=null?S+k:null,M=(()=>{const _=Bn(t,Ws.NAME);return _!=null&&String(_).trim()!==""?String(_):null})();return{id:String((y=(N=t==null?void 0:t.ID)!=null?N:t==null?void 0:t.Identifier)!=null?y:""),name:M,class:u,role:h,level:d,treasury:p,mine:g,baseMain:v,conBase:b,sumBaseTotal:E,attrTotal:S,conTotal:k,totalStats:L,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:s!=null?s*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:l!=null?l*1e3:null}}function ba(t,e){const s=t.map(r=>r[e]).filter(r=>typeof r=="number");return s.length?s.reduce((r,i)=>r+i,0)/s.length:null}const rbe=t=>{const e=t==null?void 0:t.code;if(!e)return!1;const s=String(e).toLowerCase();return s==="permission-denied"||s==="already-exists"||s==="failed-precondition"};async function ibe(t){var l,d,u;const e=Wt(ct,`guilds/${t}/latest/latest`),s=await Xs(e);if(!s.exists())return{sec:null,raw:null};const r=s.data()||{},i=(u=(d=r.timestampRaw)!=null?d:(l=r.values)==null?void 0:l.Timestamp)!=null?u:null;let a=null;return typeof r.timestamp=="number"?a=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(a=ld(i)),{sec:a,raw:i}}async function abe(t){const e=Wt(ct,`guilds/${t}/snapshots/members_summary`),s=await Xs(e);if(!s.exists())return 0;const r=s.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=ld(r.updatedAt);if(i!=null)return i}return 0}async function obe(t,e){var l,d,u,h,p,g,v;const s=sbe(e||[]),r=new Set;for(const b of e||[]){const S=String((l=Bn(b,mf.GUILD_IDENTIFIER))!=null?l:"").trim();S&&r.add(S)}for(const b of t||[]){const S=Bn(b,Ws.SERVER);let k=String((d=Bn(b,Ws.GUILD_IDENTIFIER))!=null?d:"").trim();if(!k){const E=(u=Bn(b,Ws.GUILD))!=null?u:b.Guild;if(E&&S){const L=`${L0(S)}__${D0(String(E))}`,M=s.get(L);M&&(k=M)}}k&&r.add(k)}let i=0,a=null;for(const b of r){const{sec:S,raw:k}=await ibe(b);if(S==null)continue;const E=await abe(b);if(S<=E)continue;const L=new Map;for(const q of t||[]){const K=Bn(q,Ws.SERVER);let G=String((h=Bn(q,Ws.GUILD_IDENTIFIER))!=null?h:"").trim();if(!G){const U=(p=Bn(q,Ws.GUILD))!=null?p:q.Guild;if(U&&K){const Z=`${L0(K)}__${D0(String(U))}`,le=s.get(Z);le&&(G=le)}}if(G!==b)continue;const se=ld(Bn(q,Ws.TIMESTAMP));if(se==null||se!==S)continue;const ne=String((v=(g=q==null?void 0:q.ID)!=null?g:q==null?void 0:q.Identifier)!=null?v:"").trim();ne&&(L.has(ne)||L.set(ne,q))}const M=Array.from(L.values()),N=[];for(const q of M)N.push(nbe(q));N.sort((q,K)=>{var ne,U;const G=Dk(q.role),se=Dk(K.role);return G!==se?G-se:((ne=q.name)!=null?ne:"").toLowerCase().localeCompare(((U=K.name)!=null?U:"").toLowerCase())});const y=ba(N,"level"),_=ba(N,"treasury"),D=ba(N,"mine"),C=ba(N,"baseMain"),w=ba(N,"conBase"),I=ba(N,"sumBaseTotal"),F=ba(N,"attrTotal"),R=ba(N,"conTotal"),B=ba(N,"totalStats"),$=JSON.stringify({gid:b,tsSec:S,members:N.map(q=>{var K,G,se,ne,U,Z,le,ee,he,xe,ge,we,ve;return{id:q.id,name:(K=q.name)!=null?K:"",class:(G=q.class)!=null?G:"",role:(se=q.role)!=null?se:"",level:(ne=q.level)!=null?ne:null,treasury:(U=q.treasury)!=null?U:null,mine:(Z=q.mine)!=null?Z:null,baseMain:(le=q.baseMain)!=null?le:null,conBase:(ee=q.conBase)!=null?ee:null,sumBaseTotal:(he=q.sumBaseTotal)!=null?he:null,attrTotal:(xe=q.attrTotal)!=null?xe:null,conTotal:(ge=q.conTotal)!=null?ge:null,totalStats:(we=q.totalStats)!=null?we:null,guildJoinedMs:(ve=q.guildJoinedMs)!=null?ve:null}})}),W=tbe($),H=Wt(ct,`guilds/${b}/snapshots/members_summary`);try{await $a(H,{guildId:b,count:N.length,updatedAt:k!=null?k:String(S),updatedAtMs:S*1e3,hash:W,avgLevel:y,avgTreasury:_,avgMine:D,avgBaseMain:C,avgConBase:w,avgSumBaseTotal:I,avgAttrTotal:F,avgConTotal:R,avgTotalStats:B,members:N,updatedAtServer:vi()},{merge:!0}),i++}catch(q){if(rbe(q)){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows duplicate/permission",{gid:b,error:q});continue}console.error("[ImportSelectionToDb] writeGuildSnapshotsFromRows fatal",{gid:b,error:q}),a=a||q}}if(a)throw a;return{guildsProcessed:r.size,snapshotsWritten:i}}function lbe(t){const e=new Date(t),s=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${s}-${r}`}async function cbe(t,e,s,r){var u,h,p;const i=Wt(ct,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await Xs(i);if(!a.exists())return await $a(i,s,{merge:!1}),{first:s,firstTsMs:(u=s.updatedAtMs)!=null?u:s.timestamp?s.timestamp*1e3:r};const l=a.data(),d=(h=l.updatedAtMs)!=null?h:l.timestamp?l.timestamp*1e3:r;return r<d?(await $a(i,s,{merge:!1}),{first:s,firstTsMs:(p=s.updatedAtMs)!=null?p:s.timestamp?s.timestamp*1e3:r}):{first:l,firstTsMs:d}}async function dbe(t,e,s){const r=Wt(ct,`guilds/${t}/history_monthly/${e}`);await $a(r,s,{merge:!0})}function ube(t){var M,N,y,_,D,C,w,I,F,R,B,$,W;const{guildId:e,monthKey:s,server:r,first:i,firstTsMs:a,latest:l,latestTsMs:d}=t,u=a!=null?Math.floor((d-a)/864e5):null,h=u!=null&&u<=40,p={available:h};h||(p.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:s,label:new Date(`${s}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(d).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(d/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:p};if(!h||!i)return g;const v=new Map;for(const H of i.members||[])H.playerId&&v.set(H.playerId,H);const b=[],S=[],k=[],E=[],L=[];for(const H of l.members||[]){if(!H.playerId)continue;const q=v.get(H.playerId)||null,K=(M=H.sumBaseTotal)!=null?M:null,G=(N=q==null?void 0:q.sumBaseTotal)!=null?N:null,se=K!=null&&G!=null?K-G:0,ne=(y=H.totalStats)!=null?y:null,U=(_=q==null?void 0:q.totalStats)!=null?_:null,Z=ne!=null&&U!=null?ne-U:0;b.push({playerId:H.playerId,name:(D=H.name)!=null?D:null,class:(C=H.class)!=null?C:null,levelLatest:(w=H.level)!=null?w:null,baseLatest:K,baseDelta:se}),S.push({playerId:H.playerId,name:(I=H.name)!=null?I:null,base:K,stamDelta:null,shoDelta:null}),k.push({playerId:H.playerId,name:(F=H.name)!=null?F:null,stats:K,delta:se}),E.push({playerId:H.playerId,name:(R=H.name)!=null?R:null,total:ne,delta:Z}),L.push({playerId:H.playerId,name:(B=H.name)!=null?B:null,class:($=H.class)!=null?$:null,stats:(W=H.baseMain)!=null?W:null,delta:(q==null?void 0:q.baseMain)!=null&&H.baseMain!=null?H.baseMain-q.baseMain:0})}return b.sort((H,q)=>{var K,G;return((K=q.baseDelta)!=null?K:-1/0)-((G=H.baseDelta)!=null?G:-1/0)}),k.sort((H,q)=>{var K,G;return((K=q.stats)!=null?K:-1/0)-((G=H.stats)!=null?G:-1/0)}),E.sort((H,q)=>{var K,G;return((K=q.total)!=null?K:-1/0)-((G=H.total)!=null?G:-1/0)}),S.sort((H,q)=>{var K,G;return((K=q.base)!=null?K:-1/0)-((G=H.base)!=null?G:-1/0)}),L.sort((H,q)=>{var K,G;return((K=q.stats)!=null?K:-1/0)-((G=H.stats)!=null?G:-1/0)}),{...g,mostBaseGained:b.slice(0,50),sumBaseStats:S.slice(0,50),highestBaseStats:k.slice(0,50),highestTotalStats:E.slice(0,50),mainAndCon:L.slice(0,50)}}const M0=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),Mk=(t,e)=>{for(const s of Object.keys(t))if(M0(s)===e)return t[s]};async function BA(t,e){var p,g;const{playersRows:s,guildsRows:r}=t,i=[];let a=[],l=[],d=!0;const u=e!=null&&e.onProgress?(v,b)=>{var S;return(S=e.onProgress)==null?void 0:S.call(e,{...v,kind:b})}:void 0;try{const v=await Lk(null,{kind:"guilds",rows:r,onProgress:u?b=>u(b,"guilds"):void 0});i.push(v),Array.isArray(v.guildResults)&&(l=v.guildResults)}catch(v){console.error("[ImportSelectionToDb] guild import error",v),d=!1}try{const v=await Lk(null,{kind:"players",rows:s,onProgress:u?b=>u(b,"players"):void 0});i.push(v),Array.isArray(v.playerResults)&&(a=v.playerResults)}catch(v){console.error("[ImportSelectionToDb] player import error",v),d=!1}try{await obe(s,r)}catch(v){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",v),d=!1}const h=new Set;for(const v of r){const b=Mk(v,M0("Guild Identifier"));b&&h.add(String(b))}for(const v of s){const b=Mk(v,M0("Guild Identifier"));b&&h.add(String(b))}for(const v of h){const b=Wt(ct,`guilds/${v}/snapshots/members_summary`),S=await Xs(b);if(!S.exists())continue;const k=S.data(),E=Number((p=k.updatedAtMs)!=null?p:k.timestamp?k.timestamp*1e3:Date.now()),L=lbe(E);let M=null,N=null;try{const _=await cbe(v,L,k,E);M=_.first,N=_.firstTsMs}catch(_){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:v,monthKey:L,error:_})}const y=ube({guildId:v,monthKey:L,server:(g=k.server)!=null?g:null,first:M,firstTsMs:N,latest:k,latestTsMs:E});try{await dbe(v,L,y)}catch(_){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:v,monthKey:L,error:_})}}return{ok:d,players:a,guilds:l,reports:i}}const kv=t=>String(t!=null?t:"").trim(),Xn=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,"");function hbe(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function F0(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[],delimiter:","};const r=hbe((u=s[0])!=null?u:""),i=h=>{const p=[];let g="",v=!1;for(let b=0;b<h.length;b++){const S=h[b];S==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:S===r&&!v?(p.push(g),g=""):g+=S}return p.push(g),p},l=(s[0]?i(s[0]).map(kv):[]).map((h,p)=>h||`col${p}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const p=i(s[h]);if(p.every(v=>kv(v)===""))continue;const g={};for(let v=0;v<l.length;v++)g[l[v]]=p[v]!=null?kv(p[v]):"";d.push(g)}return{headers:l,rows:d,delimiter:r}}const Ks={PLAYERS:{IDENTIFIER:Xn("Identifier"),PID:Xn("ID"),GUILD_IDENTIFIER:Xn("Guild Identifier"),TIMESTAMP:Xn("Timestamp"),NAME:Xn("Name"),SERVER:Xn("Server"),OWN:Xn("Own")},GUILDS:{GUILD_IDENTIFIER:Xn("Guild Identifier"),GUILD_MEMBER_COUNT:Xn("Guild Member Count"),NAME:Xn("Name"),TIMESTAMP:Xn("Timestamp"),SERVER:Xn("Server")}},$A=(t,e)=>{const s=new Set(t.map(Xn));return e.every(r=>s.has(r))},Vi=(t,e)=>{for(const s of Object.keys(t))if(Xn(s)===e)return t[s]};function pbe(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function Fk(t){const e=t.map(Xn),s=a=>e.includes(a);let r=0,i=0;return s(Ks.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),s(Ks.PLAYERS.IDENTIFIER)&&(r+=2),s(Ks.PLAYERS.TIMESTAMP)&&(r+=1),s(Ks.GUILDS.GUILD_IDENTIFIER)&&(i+=2),s(Ks.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),s(Ks.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||s(Ks.PLAYERS.IDENTIFIER)?"players":"guilds"}function B0(t,e){const s=pbe(t);if(s!=="unknown"){const i=Fk(e);return i!=="unknown"&&i!==s?{kind:s,via:"filename",warn:`Per Dateiname als "${s}" klassifiziert, Header deuten auf "${i}".`}:{kind:s,via:"filename"}}const r=Fk(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function OA(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=Date.parse(e);return Number.isFinite(s)?Math.floor(s/1e3):null}function mbe(t,e){var r;const s=[];if(!$A(e,[Ks.PLAYERS.GUILD_IDENTIFIER]))return s;for(const i of t){const a=Vi(i,Ks.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const l=Vi(i,Ks.PLAYERS.SERVER),d=l&&String(l).trim()!==""?String(l).trim().toUpperCase():void 0;s.push({guildIdentifier:String(a),id:Vi(i,Ks.PLAYERS.IDENTIFIER)||void 0,name:Vi(i,Ks.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(Vi(i,Ks.PLAYERS.OWN)).toLowerCase()),server:d,tsSec:(r=OA(Vi(i,Ks.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return s}function fbe(t,e){const s=[];if(!$A(e,[Ks.GUILDS.GUILD_IDENTIFIER,Ks.GUILDS.GUILD_MEMBER_COUNT]))return s;for(const r of t){const i=Vi(r,Ks.GUILDS.GUILD_IDENTIFIER),a=Number(Vi(r,Ks.GUILDS.GUILD_MEMBER_COUNT));if(!i||!Number.isFinite(a))continue;const l=OA(Vi(r,Ks.GUILDS.TIMESTAMP));s.push({guildIdentifier:String(i),name:Vi(r,Ks.GUILDS.NAME)||void 0,memberCount:a,tsSec:l!=null?l:void 0})}return s}function VA(t){var d,u,h,p,g,v,b,S;let e=[],s=[];for(const k of t){const E=F0(k.text),{kind:L}=B0(k.name,E.headers);L==="players"?e=e.concat(X1e(k.text)):L==="guilds"&&(s=s.concat(Y1e(k.text)))}const r=[],i=new Map,a=new Map;for(const k of e){const E={playerId:k.playerId,name:(d=k.name)!=null?d:"",server:k.server,guildId:(u=k.guildIdentifier)!=null?u:void 0,level:(h=k.level)!=null?h:void 0,className:(p=k.className)!=null?p:void 0,scanTimestampSec:k.timestampSec};r.push(E),k.guildIdentifier&&(i.has(k.guildIdentifier)||i.set(k.guildIdentifier,[]),i.get(k.guildIdentifier).push(E),a.has(k.guildIdentifier)||a.set(k.guildIdentifier,k.server))}const l=[];for(const k of s){const E=(g=i.get(k.guildIdentifier))!=null?g:[];l.push({guildId:k.guildIdentifier,name:(v=k.name)!=null?v:k.guildIdentifier,server:k.server,memberCount:(b=k.memberCount)!=null?b:E.length,scanTimestampSec:k.timestampSec,members:E.map(L=>({playerId:L.playerId,name:L.name,level:L.level,className:L.className}))}),i.delete(k.guildIdentifier)}for(const[k,E]of i.entries()){if(!E.length)continue;const L=a.get(k);if(!L)continue;const M=E.reduce((N,y)=>Math.max(N,y.scanTimestampSec),E[0].scanTimestampSec);l.push({guildId:k,name:k,server:L,memberCount:E.length,scanTimestampSec:M,members:E.map(N=>({playerId:N.playerId,name:N.name,level:N.level,className:N.className}))})}return{filename:(S=t[0])==null?void 0:S.name,players:r,guilds:l}}function gbe(t,e){var E,L,M,N,y,_;const s=[],r=new Map;for(const D of t){const C=D.id||"",w=(E=D.server)==null?void 0:E.toUpperCase();if(C){const I=`${w!=null?w:"NO"}::${C}`;r.has(I)||r.set(I,{server:w,id:C,name:D.name||"",own:!!D.own})}}const i=r.size,a=t.length,l=Array.from(r.values()).filter(D=>D.own).length,d=new Map;for(const D of r.values())D.server&&d.set(D.server,((L=d.get(D.server))!=null?L:0)+1);const u=Array.from(d.entries()).map(([D,C])=>({server:D,players:C})).sort((D,C)=>C.players-D.players),h=u.length,p=new Map;for(const D of t)p.set(D.guildIdentifier,((M=p.get(D.guildIdentifier))!=null?M:0)+1);const g=new Set,v=new Map;for(const D of e)g.add(D.guildIdentifier),v.set(D.guildIdentifier,{name:D.name||"",declared:D.memberCount});for(const D of p.keys())g.add(D);let b=0;const S=[];for(const D of g){const C=(N=v.get(D))==null?void 0:N.declared,w=(y=p.get(D))!=null?y:0,I=C!=null&&w===C;I&&b++,S.push({id:D,name:((_=v.get(D))==null?void 0:_.name)||"",declaredCount:C!=null?C:0,playersCount:w,full:I})}[...v.values()].some(D=>Number.isFinite(D.declared))||s.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),S.sort((D,C)=>D.name?D.name.localeCompare(C.name):D.id.localeCompare(C.id));const k=Array.from(r.values()).sort((D,C)=>(D.server||"")===(C.server||"")?D.name.localeCompare(C.name):(D.server||"").localeCompare(C.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:l,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:b,notes:s,playersList:k,guildsList:S}}function UA({mode:t="db",onBuildUploadSession:e}){const[s,r]=T.useState([]),[i,a]=T.useState(null),[l,d]=T.useState(!1),[u,h]=T.useState(null),[p,g]=T.useState(!1),[v,b]=T.useState(null),[S,k]=T.useState([]),[E,L]=T.useState(null);T.useEffect(()=>{const R=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=R}},[]);const M=T.useCallback(async R=>{var B;d(!0),h(null),a(null),k([]),b(null);try{const $=Array.from(R).slice(0,2),W=[];let H=[],q=[];for(const K of $){const G=K,se=await G.text(),ne=F0(se),{kind:U,warn:Z}=B0(G.name,ne.headers);W.push({name:G.name,size:G.size||se.length,rows:ne.rows.length,delimiter:ne.delimiter,text:se,kind:U,warn:Z}),U==="players"?H=H.concat(mbe(ne.rows,ne.headers)):U==="guilds"&&(q=q.concat(fbe(ne.rows,ne.headers)))}r(W),a(gbe(H,q))}catch($){h(String((B=$==null?void 0:$.message)!=null?B:$))}finally{d(!1)}},[]),N=T.useCallback(async R=>{!R||R.length===0||await M(R)},[M]),y=T.useCallback(async R=>{R.preventDefault();const B=R.dataTransfer.files;!B||!B.length||await M(B)},[M]),_=T.useCallback(()=>{const R=s.map(B=>({name:B.name,text:B.text}));return VA(R)},[s]);async function D(){var R;if(s.length){g(!0),L({phase:"prepare",current:0,total:0}),b(null),k([]);try{let B=[],$=[];for(const H of s){const q=F0(H.text),{kind:K}=B0(H.name,q.headers);K==="players"&&(B=B.concat(q.rows)),K==="guilds"&&($=$.concat(q.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!B.length,hasGuildsCsv:!!$.length,playersRows:B.length,guildsRows:$.length}),!$.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!B.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const W=await BA({playersRows:B,guildsRows:$},{onProgress:H=>L(H)});L({phase:"done",current:1,total:1}),k(W.reports),b("Import abgeschlossen.")}catch(B){console.error("[UploadCenter] Import error:",B),b(`Fehler beim Import: ${(R=B==null?void 0:B.message)!=null?R:B}`)}finally{g(!1),setTimeout(()=>L(null),1200)}}}const C=T.useCallback(async()=>{var R;if(!(t!=="session"||!e||!s.length)){g(!0),b(null),k([]),h(null),L(null);try{const B=_();e(B),b("Session prepared locally.")}catch(B){console.error("[UploadCenter] Session build error:",B),b(`Fehler beim Import: ${(R=B==null?void 0:B.message)!=null?R:B}`)}finally{g(!1)}}},[t,e,s,_]),w=T.useMemo(()=>s.map(R=>`${R.name} (${R.rows} rows, ${R.delimiter}, ${R.kind}${R.warn?" ":""})`),[s]),I=T.useMemo(()=>s.reduce((R,B)=>R+B.rows,0),[s]),F=E?Math.floor(100*E.current/Math.max(1,E.total||1)):0;return n.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[n.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[n.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),n.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[w.map((R,B)=>n.jsx("span",{className:"uc-chip",title:s[B].warn||"",children:R},B)),s.length>0&&n.jsxs("span",{className:"uc-chip",children:["Total: ",I," rows"]})]}),n.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[E&&t==="db"&&n.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[n.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:n.jsx("div",{style:{width:`${F}%`,height:"100%",background:"#2E75F0"}})}),n.jsxs("span",{style:{color:"#D6E4F7"},children:[F,"%"]})]}),n.jsx("button",{onClick:t==="session"?C:D,disabled:!s.length||!i||p||t==="session"&&!e,className:"uc-btn",children:p?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),v&&n.jsx("span",{style:{color:v.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:v})]})]}),n.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[n.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),n.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:R=>N(R.target.files),disabled:l})]}),n.jsx("div",{onDragOver:R=>R.preventDefault(),onDrop:y,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),l&&n.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&n.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[n.jsx("b",{children:"Fehler:"})," ",u]}),i&&n.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[n.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:n.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),n.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[n.jsx(Au,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),n.jsx(Au,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),n.jsx(Au,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),n.jsx(Au,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),n.jsx(Au,{label:"Verschiedene Server",value:i.servers})]}),n.jsxs("div",{style:{marginTop:12},children:[n.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),n.jsx("tbody",{children:i.perServer.map(R=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:R.server}),n.jsx("td",{style:{textAlign:"right"},children:R.players})]},R.server))})]})]}),n.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[n.jsxs("details",{children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),n.jsx("tbody",{children:i.playersList.map((R,B)=>{var $,W;return n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:($=R.server)!=null?$:""}),n.jsx("td",{children:R.id}),n.jsx("td",{children:R.name||""}),n.jsx("td",{children:R.own?"":""})]},`${(W=R.server)!=null?W:"NO"}-${R.id}-${B}`)})})]})})]}),n.jsxs("details",{open:!0,children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),n.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),n.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),n.jsx("tbody",{children:i.guildsList.map((R,B)=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:R.id}),n.jsx("td",{children:R.name||""}),n.jsx("td",{style:{textAlign:"right"},children:R.declaredCount||0}),n.jsx("td",{style:{textAlign:"right"},children:R.playersCount}),n.jsx("td",{style:{textAlign:"center"},children:R.full?"":""})]},`${R.id}-${B}`))})]})})]})]}),!!i.notes.length&&n.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",n.jsx("ul",{children:i.notes.map((R,B)=>n.jsx("li",{children:R},B))})]})]})]})}function Au({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[n.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),n.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),s&&n.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:s})]})}function xbe(){return n.jsxs("div",{children:[n.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),n.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",n.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function ybe(){const{isOpen:t,close:e,activeTab:s,setTab:r,canUse:i}=q1();return!t||!i?null:n.jsx("div",{className:Oi.backdrop,onClick:e,children:n.jsxs("div",{className:Oi.panel,onClick:a=>a.stopPropagation(),children:[n.jsxs("div",{className:Oi.header,children:[n.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),n.jsxs("div",{className:Oi.tabs,children:[n.jsx("button",{type:"button",className:`${Oi.tabBtn} ${s==="csv"?Oi.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),n.jsx("button",{type:"button",className:`${Oi.tabBtn} ${s==="json"?Oi.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),n.jsx("button",{type:"button",className:Oi.closeBtn,onClick:e,children:"Schlieen"})]}),n.jsx("div",{className:Oi.content,children:s==="csv"?n.jsx(UA,{mode:"db"}):n.jsx(xbe,{})})]})})}const zA="sfdatahub_upload_sessions_v1",Cv={sessions:[],activeSessionId:null},vbe=()=>{var t,e,s,r,i,a;if(typeof window=="undefined")return Cv;try{const l=window.localStorage.getItem(zA);if(!l)return Cv;const d=JSON.parse(l);if(d&&typeof d=="object"){if("version"in d&&(d==null?void 0:d.version)===1&&d.type==="uploadCenter.sessions"&&Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(s=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?s:null}}if(Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(l){console.warn("[UploadCenterSessions] Failed to parse persisted state",l)}return Cv},HA=T.createContext(null);function bbe({children:t}){const e=T.useMemo(()=>vbe(),[]),[s,r]=T.useState(()=>e.sessions),[i,a]=T.useState(()=>e.activeSessionId),l=T.useCallback(N=>({...N,players:N.players.map(y=>({...y,status:"pending"})),guilds:N.guilds.map(y=>({...y,status:"pending"}))}),[]);T.useEffect(()=>{if(typeof window!="undefined")try{const N={version:1,type:"uploadCenter.sessions",sessions:s,activeSessionId:i};window.localStorage.setItem(zA,JSON.stringify(N))}catch(N){console.warn("[UploadCenterSessions] Failed to persist state",N)}},[s,i]);const d=T.useCallback(N=>{const y=l(N);r(_=>[..._,y]),a(y.id)},[l]),u=T.useCallback(N=>{a(N)},[]),h=T.useCallback(N=>{r(y=>{const _=y.filter(D=>D.id!==N);return a(D=>{var C,w;return D===N?(w=(C=_[0])==null?void 0:C.id)!=null?w:null:D}),_})},[]),p=T.useCallback(()=>{r([]),a(null)},[]),g=T.useCallback((N,y,_,D)=>{r(C=>C.map(w=>{if(w.id!==N)return w;if(y==="player"){const F=w.players.map(R=>R.key===_?{...R,selected:D}:R);return{...w,players:F}}const I=w.guilds.map(F=>F.key===_?{...F,selected:D}:F);return{...w,guilds:I}}))},[]),v=T.useCallback((N,y,_)=>{r(D=>D.map(C=>{if(C.id!==N)return C;if(y==="player"){const I=C.players.map(F=>({...F,selected:_}));return{...C,players:I}}const w=C.guilds.map(I=>({...I,selected:_}));return{...C,guilds:w}}))},[]),b=T.useCallback((N,y,_)=>{r(D=>D.map(C=>{if(C.id!==N)return C;const w=C.guilds.find(B=>B.key===y);if(!w)return C;const I=w.guildId,F=C.players.map(B=>B.guildId===I?{...B,selected:_}:B),R=C.guilds.map(B=>B.key===y?{...B,selected:_}:B);return{...C,players:F,guilds:R}}))},[]),S=T.useCallback((N,y,_)=>{r(D=>D.map(C=>{if(C.id!==N)return C;let w;const I=C.players.map($=>$.key!==y?$:(w=$.guildId,{...$,selected:_}));if(!w)return{...C,players:I};const F=I.filter($=>$.guildId===w),R=F.length>0&&F.every($=>$.selected),B=C.guilds.map($=>$.guildId!==w?$:_===!1?{...$,selected:!1}:R?{...$,selected:!0}:$);return{...C,players:I,guilds:B}}))},[]),k=T.useCallback((N,y)=>{r(_=>_.map(D=>{if(D.id!==N)return D;const C=D.players.map(I=>({...I,selected:y})),w=D.guilds.map(I=>{if(!y)return{...I,selected:!1};const F=C.filter(B=>B.guildId===I.guildId),R=F.length>0&&F.every(B=>B.selected);return{...I,selected:R}});return{...D,players:C,guilds:w}}))},[]),E=T.useCallback((N,y)=>{r(_=>_.map(D=>{if(D.id!==N)return D;const C=D.guilds.map(I=>({...I,selected:y})),w=D.players.map(I=>y&&I.guildId?{...I,selected:!0}:!y&&I.guildId?{...I,selected:!1}:I);return{...D,guilds:C,players:w}}))},[]),L=T.useCallback((N,y,_,D)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:N,kind:y,recordKey:_,status:D}),r(C=>C.map(w=>{if(w.id!==N)return w;if(y==="player"){const F=w.players.map(R=>R.key===_?{...R,status:D}:R);return{...w,players:F}}const I=w.guilds.map(F=>F.key===_?{...F,status:D}:F);return{...w,guilds:I}}))},[]),M=T.useMemo(()=>({sessions:s,activeSessionId:i,addSession:d,setActiveSession:u,removeSession:h,clearAllSessions:p,toggleRecordSelection:g,selectAllInSession:v,selectGuildWithPlayers:b,updateGuildSelectionFromPlayer:S,selectAllPlayersWithGuilds:k,selectAllGuildsWithPlayers:E,setRecordStatus:L}),[s,i,d,u,h,p,g,v,b,S,k,E,L]);return n.jsx(HA.Provider,{value:M,children:t})}function _be(){const t=T.useContext(HA);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}function wbe({route:t,featureId:e,fallback:s=null,children:r}){var p;const{resolveRule:i,canAccessFeature:a,canAccessRule:l}=Ig(),d=(p=e!=null?e:t)!=null?p:"/",u=J.useMemo(()=>i(d),[i,d]);return J.useEffect(()=>{u||console.debug(`[FeatureGate] No rule found for target "${d}", allowing by default.`)},[u,d]),J.useMemo(()=>!e&&!t?!0:u?l(u):a(d),[a,l,e,t,u,d])?n.jsx(n.Fragment,{children:r}):n.jsx(n.Fragment,{children:s})}const Bk="pending";function $k(t,e,s){const r=t.players.map(a=>{var d;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(d=a.guildId)!=null?d:void 0,level:a.level,className:a.className,selected:!0,status:Bk}}),i=t.guilds.map(a=>{var u;const l=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,d=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:l,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:d,selected:!0,status:Bk}});return{id:e,createdAt:s,sourceFilename:t.filename,scanUploadId:void 0,players:r,guilds:i}}const $0=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${r}`};async function jbe(t){var s,r,i,a;if(!t)return console.warn("[UploadCenterUsage] Missing userId, returning empty usage."),{date:null,guilds:0,players:0};const e=Wt(ct,"users",t);try{const l=await Xs(e);if(!l.exists())return console.warn("[UploadCenterUsage] User document does not exist.",{userId:t}),{date:null,guilds:0,players:0};const d=(s=l.data())==null?void 0:s.uploadCenter,u=(r=d==null?void 0:d.usage)!=null?r:{};return{date:typeof(u==null?void 0:u.date)=="string"?u.date:null,guilds:Number((i=u==null?void 0:u.guilds)!=null?i:0)||0,players:Number((a=u==null?void 0:u.players)!=null?a:0)||0}}catch(l){return console.error("[UploadCenterUsage] Failed to fetch usage data.",{userId:t,error:l}),{date:null,guilds:0,players:0}}}async function Sbe(t,e,s){var b,S,k;if(!t){console.warn("[UploadCenterUsage] Missing userId, skipping usage update.");return}const r=$0(),i=Wt(ct,"users",t);let a;try{a=await Xs(i)}catch(E){console.error("[UploadCenterUsage] Failed to fetch user document.",{userId:t,error:E});return}if(!a.exists()){console.warn("[UploadCenterUsage] User document does not exist.",{userId:t});return}const l=(b=a.data())==null?void 0:b.uploadCenter,d=l==null?void 0:l.usage,u=(d==null?void 0:d.date)===r,h=u?Number((S=d==null?void 0:d.guilds)!=null?S:0):0,p=u?Number((k=d==null?void 0:d.players)!=null?k:0):0,g=h+Number(e!=null?e:0),v=p+Number(s!=null?s:0);try{await $a(i,{uploadCenter:{...l!=null?l:{},usage:{date:r,guilds:g,players:v}}},{merge:!0})}catch(E){console.error("[UploadCenterUsage] Failed to update usage data.",{userId:t,error:E})}}const Eo={enabled:!0,dailyGuildLimit:9999,dailyPlayerLimit:999999},Jf=t=>{if(t==null||typeof t=="boolean"||typeof t=="string"&&t.trim()==="")return null;const e=Number(t);return Number.isFinite(e)&&e>=0?e:null},Nbe=t=>{if(!t||typeof t!="object")return;const e={};return Object.entries(t).forEach(([s,r])=>{if(!r||typeof r!="object")return;const i=r,a=Jf(i.dailyGuildLimit),l=Jf(i.dailyPlayerLimit),d=i.enabled,u={};typeof d=="boolean"&&(u.enabled=d),a!==null&&(u.dailyGuildLimit=a),l!==null&&(u.dailyPlayerLimit=l),Object.keys(u).length>0&&(e[s]=u)}),Object.keys(e).length>0?e:void 0};async function kbe(t){const e=Wt(ct,"upload_quota_config","default");try{const s=await Xs(e);if(!s.exists())return console.warn("[UploadQuota] Missing config document. Using defaults."),Eo;const r=s.data(),i=Jf(r==null?void 0:r.dailyGuildLimit),a=Jf(r==null?void 0:r.dailyPlayerLimit),l=Nbe(r==null?void 0:r.roles),d={dailyGuildLimit:i!=null?i:Eo.dailyGuildLimit,dailyPlayerLimit:a!=null?a:Eo.dailyPlayerLimit};typeof(r==null?void 0:r.enabled)=="boolean"&&(d.enabled=r.enabled),l&&(d.roles=l);const u=r&&Object.prototype.hasOwnProperty.call(r,"dailyGuildLimit")&&i===null,h=r&&Object.prototype.hasOwnProperty.call(r,"dailyPlayerLimit")&&a===null;return(u||h)&&console.warn("[UploadQuota] Invalid config payload. Using defaults.",{data:r}),d}catch(s){return console.error("[UploadQuota] Failed to load quota config.",{userId:t==null?void 0:t.id,error:s}),Eo}}function Cbe(t,e){var a,l,d;const s=Array.isArray(e)?e.filter(u=>typeof u=="string"&&u.length>0):[],r=Number.isFinite(t.dailyGuildLimit)?t.dailyGuildLimit:Eo.dailyGuildLimit,i=Number.isFinite(t.dailyPlayerLimit)?t.dailyPlayerLimit:Eo.dailyPlayerLimit;for(const u of s){const h=(a=t.roles)==null?void 0:a[u];if(!h||h.enabled===!1)continue;const p=(l=h.dailyGuildLimit)!=null?l:r,g=(d=h.dailyPlayerLimit)!=null?d:i;return console.debug("[UploadQuota] Applying role override for upload limits.",{role:u,guildLimit:p,playerLimit:g}),{dailyGuildLimit:p,dailyPlayerLimit:g}}return{dailyGuildLimit:r,dailyPlayerLimit:i}}async function Tbe(t){var u,h,p;const e=(u=t==null?void 0:t.id)!=null?u:null,s=(p=(h=t==null?void 0:t.uploadCenter)==null?void 0:h.usage)!=null?p:{date:null,guilds:0,players:0},r=Array.isArray(t==null?void 0:t.roles)?t.roles:[],[i,a]=await Promise.all([kbe(t),e?jbe(e):Promise.resolve(null)]),l=Cbe(i,r);return{config:{...i,dailyGuildLimit:l.dailyGuildLimit,dailyPlayerLimit:l.dailyPlayerLimit},usage:a!=null?a:s}}const Ebe=(t,e)=>`${Ua}/scan-uploads/${encodeURIComponent(t)}/${e}.csv`,Abe=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function Ok(t,e){const s=Ebe(t,e);console.log(`[scan-uploads] Fetching ${e} CSV for scanId=${t}`);const r=await fetch(s,{method:"GET",credentials:"include",headers:{Accept:"text/csv"}});if(!r.ok)throw console.error(`[scan-uploads] Failed to fetch ${e} CSV for scanId=${t} (status ${r.status})`),await Abe(r);const i=await r.text();return console.log(`[scan-uploads] Fetched ${e} CSV for scanId=${t} (${i.length} chars)`),i}const Ibe=t=>{const[e,s]=T.useState([]),[r,i]=T.useState(!1),[a,l]=T.useState(null);return T.useEffect(()=>{if(!t){s([]),i(!1),l(null);return}let d=!0;return(async()=>{i(!0),l(null);try{const h=Yl(ct,"scan_uploads"),p=On(h,Mo("discordUserId","==",t),Ca("uploadedAt","desc")),g=await un(p);if(!d)return;const v=g.docs.map(b=>({id:b.id,...b.data()}));console.log(`[upload-center] Loaded ${v.length} scan_uploads for current user (remote sessions)`),s(v)}catch(h){if(!d)return;console.error("[upload-center] Failed to load scan_uploads for current user",h),l(h instanceof Error?h:new Error("Failed to load scan uploads")),s([])}finally{d&&i(!1)}})(),()=>{d=!1}},[t]),{items:e,loading:r,error:a}},GA="sfdatahub_upload_quota_v1",WA=t=>{var e,s;return{date:typeof(t==null?void 0:t.date)=="string"?t.date:null,guilds:Number((e=t==null?void 0:t.guilds)!=null?e:0)||0,players:Number((s=t==null?void 0:t.players)!=null?s:0)||0}},Vk=(t,e)=>{if(typeof window=="undefined")return;const s={version:1,config:t,usage:WA(e),storedAt:new Date().toISOString()};try{window.localStorage.setItem(GA,JSON.stringify(s))}catch(r){console.warn("[UploadQuotaStorage] Failed to persist quota data",r)}},Rbe=()=>{var t,e;if(typeof window=="undefined")return null;try{const s=window.localStorage.getItem(GA);if(!s)return null;const r=JSON.parse(s);return!r||typeof r!="object"||r.version!==1||typeof((t=r.config)==null?void 0:t.dailyGuildLimit)!="number"||typeof((e=r.config)==null?void 0:e.dailyPlayerLimit)!="number"?null:{version:1,config:{dailyGuildLimit:Number(r.config.dailyGuildLimit)||0,dailyPlayerLimit:Number(r.config.dailyPlayerLimit)||0},usage:WA(r.usage),storedAt:typeof r.storedAt=="string"?r.storedAt:""}}catch(s){return console.warn("[UploadQuotaStorage] Failed to read quota data",s),null}},Zf=(t,e)=>Math.max(t-e,0),Uk=(t,e,s)=>{var l,d,u;const r=e.date===s,i=r&&(l=e.guilds)!=null?l:0,a=r&&(d=e.players)!=null?d:0;return{config:t,usageDate:(u=e.date)!=null?u:null,usedGuildsToday:i,usedPlayersToday:a,remainingGuilds:Zf(t.dailyGuildLimit,i),remainingPlayers:Zf(t.dailyPlayerLimit,a),today:s}},Pbe=({className:t})=>{if(!t)return n.jsx("span",{title:"Unknown class",className:"text-xs text-center text-zinc-400 block",children:"Unknown"});const{url:e,fallback:s}=UB(t),r=e?Fr(e,28):void 0;return r?n.jsx("img",{src:r,alt:t,title:t,className:"mx-auto h-6 w-6 rounded-full object-contain",draggable:!1}):s?n.jsx("span",{title:t,className:"mx-auto text-center text-sm leading-none",style:{display:"block"},children:s}):n.jsx("span",{title:t,className:"text-xs text-center text-zinc-400 block",children:t})};function Lbe(){return n.jsx(Et,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:n.jsx(Dbe,{})},"upload-center-shell")}function Dbe(){var Ut,Bt,An,Ys,Ps,Un,yr,Br,vr;const{sessions:t,activeSessionId:e,addSession:s,setActiveSession:r,removeSession:i,selectGuildWithPlayers:a,updateGuildSelectionFromPlayer:l,selectAllPlayersWithGuilds:d,selectAllGuildsWithPlayers:u,setRecordStatus:h}=_be(),{t:p}=Gl(),{user:g}=zo(),v=(An=(Bt=(Ut=g==null?void 0:g.providers)==null?void 0:Ut.discord)==null?void 0:Bt.id)!=null?An:(g==null?void 0:g.provider)==="discord"?g.id:null,{items:b,loading:S,error:k}=Ibe(v),E=!!v,L=t.find(ue=>ue.id===e)||null,M=T.useMemo(()=>new Set(t.map(ue=>ue.scanUploadId).filter(ue=>!!ue)),[t]),[N,y]=J.useState(new Set),[_,D]=T.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),[C,w]=T.useState("all"),[I,F]=T.useState("all"),[R,B]=T.useState(!1),[$,W]=T.useState(!1),[H,q]=T.useState(null),[K,G]=T.useState(null),[se,ne]=T.useState(()=>Uk(Eo,{date:null,guilds:0,players:0},$0())),[U,Z]=T.useState(null);T.useEffect(()=>{var _t,Jt;let ue=!0;const Fe=$0(),Qe=(Jt=(_t=g==null?void 0:g.uploadCenter)==null?void 0:_t.usage)!=null?Jt:{date:null,guilds:0,players:0},vt=(as,Js)=>{ue&&(ne(Uk(as,Js,Fe)),Z(null))};vt(Eo,Qe);const rt=Rbe();return rt&&vt(rt.config,rt.usage),(async()=>{try{const as=await Tbe(g!=null?g:null);if(!ue)return;vt(as.config,as.usage),Vk(as.config,as.usage)}catch(as){console.error("[UploadCenter] Failed to refresh upload quota",as),ue&&Z("Could not refresh upload quota. Using last known values.")}})(),()=>{ue=!1}},[g,(Ps=(Ys=g==null?void 0:g.uploadCenter)==null?void 0:Ys.usage)==null?void 0:Ps.date,(yr=(Un=g==null?void 0:g.uploadCenter)==null?void 0:Un.usage)==null?void 0:yr.guilds,(vr=(Br=g==null?void 0:g.uploadCenter)==null?void 0:Br.usage)==null?void 0:vr.players]);const le=T.useCallback(ue=>{const Fe=`csv_${Date.now()}`,Qe=new Date().toISOString(),vt=$k(ue,Fe,Qe);s(vt),r(Fe)},[s,r]),ee=ue=>{const Fe=new Date(ue);return Number.isNaN(Fe.getTime())?"Unknown date":Fe.toLocaleString()},he=ue=>{y(Fe=>{const Qe=new Set(Fe);return Qe.has(ue)?Qe.delete(ue):Qe.add(ue),Qe})},xe=ue=>{var rt,_t;const Fe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Qe={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},vt={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return n.jsx("span",{className:`${Fe} ${(rt=Qe[ue])!=null?rt:Qe.pending}`,children:(_t=vt[ue])!=null?_t:ue})},ge=ue=>{if(!ue)return"Unknown date";try{if(typeof ue.toDate=="function")return ue.toDate().toLocaleString()}catch(Fe){}return"Unknown date"},we=ue=>{var _t,Jt,as;const Fe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Qe={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",stored:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",received:"bg-sky-500/10 text-sky-100 border border-sky-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},vt={pending:"PENDING",stored:"STORED",received:"RECEIVED",error:"ERROR"},rt=(_t=ue==null?void 0:ue.toLowerCase())!=null?_t:"pending";return n.jsx("span",{className:`${Fe} ${(Jt=Qe[rt])!=null?Jt:Qe.pending}`,children:(as=vt[rt])!=null?as:ue||"PENDING"})},ve=T.useCallback((ue,Fe,Qe)=>{const vt=ue==="created"||ue==="duplicate";return Qe&&vt?!1:Fe==="all"?!0:Fe==="pending"?ue==="pending":Fe==="inDb"?vt:Fe==="error"?ue==="error":!0},[]),ce=T.useMemo(()=>L?L.players.filter(ue=>ve(ue.status,C,R)):[],[L,ve,C,R]),ke=T.useMemo(()=>L?L.guilds.filter(ue=>ve(ue.status,I,$)):[],[L,ve,I,$]),be=T.useCallback(async ue=>{if(ue!=null&&ue.id){G(null),q(ue.id);try{const Fe=[],Qe=ue.queueId||ue.scanId||ue.id,vt=ue.hasPlayersCsv!==!1,rt=ue.hasGuildsCsv!==!1;if(vt){const br=await Ok(ue.id,"players");Fe.push({name:`players.scan-${Qe}.csv`,text:br})}if(rt){const br=await Ok(ue.id,"guilds");Fe.push({name:`guilds.scan-${Qe}.csv`,text:br})}if(!Fe.length)throw new Error("No CSV data available for this scan.");const _t=VA(Fe);_t.filename=Qe||_t.filename;const Jt=`scan_${ue.id}_${Date.now()}`,as=new Date().toISOString(),Ci={...$k(_t,Jt,as),scanUploadId:ue.id};s(Ci),r(Jt),console.log(`[upload-center] Loaded remote scan session for scanId=${ue.id} (session ${Jt})`)}catch(Fe){console.error(`[upload-center] Failed to load remote scan session for scanId=${ue==null?void 0:ue.id}`,Fe),G(Fe instanceof Error?Fe.message:"Failed to load remote scan session.")}finally{q(null)}}},[s,r]),Ue=T.useMemo(()=>{if(!L)return!1;const ue=L.players.some(Qe=>Qe.selected),Fe=L.guilds.some(Qe=>Qe.selected);return ue||Fe},[L]),Ke=_.phase==="uploading"||_.phase==="finalizing",Tt=()=>{if(!L)return null;const ue=L.players.filter(rt=>rt.selected),Fe=L.guilds.filter(rt=>rt.selected);if(!ue.length&&!Fe.length)return null;const Qe=ue.map(rt=>{var _t,Jt,as;return{Identifier:rt.playerId,"Guild Identifier":(_t=rt.guildId)!=null?_t:"",Timestamp:rt.scanTimestampSec,Server:rt.server,Name:rt.name,Class:(Jt=rt.className)!=null?Jt:"",Level:(as=rt.level)!=null?as:""}}),vt=Fe.map(rt=>{var _t;return{"Guild Identifier":rt.guildId,"Guild Member Count":(_t=rt.memberCount)!=null?_t:rt.members.length,Timestamp:rt.scanTimestampSec,Name:rt.name,Server:rt.server}});return{playersRows:Qe,guildsRows:vt}},Mt=T.useCallback((ue,Fe)=>{ne(Qe=>{const vt=Qe.usedGuildsToday+ue,rt=Qe.usedPlayersToday+Fe,_t={...Qe,usedGuildsToday:vt,usedPlayersToday:rt,remainingGuilds:Zf(Qe.config.dailyGuildLimit,vt),remainingPlayers:Zf(Qe.config.dailyPlayerLimit,rt),usageDate:Qe.today};return Vk(Qe.config,{date:Qe.today,guilds:vt,players:rt}),_t})},[]),Ft=T.useMemo(()=>se.usageDate?se.usageDate===se.today?"Today":se.usageDate:"No uploads yet",[se.today,se.usageDate]),Vt=se.config.dailyPlayerLimit===0,is=se.config.dailyGuildLimit===0,Ee=Vt?p("uploadCenter.quota.unlimited"):se.config.dailyPlayerLimit,Le=is?p("uploadCenter.quota.unlimited"):se.config.dailyGuildLimit,Ie=Vt?p("uploadCenter.quota.unlimited"):`${Ee} limit today`,He=is?p("uploadCenter.quota.unlimited"):`${Le} limit today`,ot=Vt?p("uploadCenter.quota.unlimited"):se.remainingPlayers,ht=is?p("uploadCenter.quota.unlimited"):se.remainingGuilds,yt=async()=>{var tr,Ti,Ei;if(!L)return;const ue=Tt();if(!ue)return;const Fe=L.players.filter(Zt=>Zt.selected),Qe=L.guilds.filter(Zt=>Zt.selected),vt=Fe.length+Qe.length;if(!vt)return;const rt=(tr=g==null?void 0:g.id)!=null?tr:null,{config:_t,usedGuildsToday:Jt,usedPlayersToday:as}=se,Js=Jt+Qe.length,Ci=as+Fe.length,br=Js>_t.dailyGuildLimit,Wo=Ci>_t.dailyPlayerLimit;if(br||Wo){Z(`Daily quota exceeded: You can import up to ${_t.dailyGuildLimit} guilds / ${_t.dailyPlayerLimit} players per day. Today you already imported ${Jt} guilds / ${as} players. This selection would bring you to ${Js} guilds / ${Ci} players.`);return}Z(null),D({phase:"uploading",processed:0,total:vt,created:0,duplicate:0,error:0});const zn={processed:0,created:0,duplicate:0,error:0},ni={processed:0,created:0,duplicate:0,error:0},ks=()=>{const Zt=Math.min(zn.processed+ni.processed,vt),es=Zt>=vt&&vt>0?"finalizing":"uploading";D({phase:es,processed:Zt,total:vt,created:zn.created+ni.created,duplicate:zn.duplicate+ni.duplicate,error:zn.error+ni.error})},ea=Zt=>es=>{var ta;if((es==null?void 0:es.pass)!=="scans")return;const _r=Zt==="players"?zn:ni;typeof es.current=="number"&&(_r.processed=Math.min(es.current,(ta=es.total)!=null?ta:es.current)),typeof es.created=="number"&&(_r.created=es.created),typeof es.duplicate=="number"&&(_r.duplicate=es.duplicate),typeof es.error=="number"&&(_r.error=es.error),ks()};try{console.log("[UploadCenter] starting selection upload",{players:Fe.length,guilds:Qe.length});const Zt=await BA(ue,{onProgress:ns=>{(ns==null?void 0:ns.kind)==="players"?ea("players")(ns):(ns==null?void 0:ns.kind)==="guilds"&&ea("guilds")(ns)}}),es=L.id;let _r=!1,ta=!1;if(console.log("[UploadCenter] importSelectionToDb result",{playersSample:(Ti=Zt==null?void 0:Zt.players)==null?void 0:Ti.slice(0,5),guildsSample:(Ei=Zt==null?void 0:Zt.guilds)==null?void 0:Ei.slice(0,5),selectedPlayerKeys:Fe.slice(0,5).map(ns=>ns.key),selectedGuildKeys:Qe.slice(0,5).map(ns=>ns.key)}),((Zt==null?void 0:Zt.players)||[]).forEach(ns=>{_r=!0,h(es,"player",ns.key,ns.status)}),((Zt==null?void 0:Zt.guilds)||[]).forEach(ns=>{ta=!0,h(es,"guild",ns.key,ns.status)}),!_r&&!ta&&(Fe.forEach(ns=>h(es,"player",ns.key,"created")),Qe.forEach(ns=>h(es,"guild",ns.key,"created"))),Fe.length||Qe.length)if(Mt(Qe.length,Fe.length),!rt)console.warn("[UploadCenter] Cannot persist upload usage because the user ID is missing.");else try{await Sbe(rt,Qe.length,Fe.length)}catch(ns){console.error("[UploadCenter] Failed to record upload usage.",ns)}}catch(Zt){console.error("[UploadCenter] Failed to upload selection",Zt)}finally{D(Zt=>({...Zt,phase:"done"}))}};return n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),n.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),n.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 md:p-5",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Upload quota"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Daily limits & usage"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Values are cached locally in your browser so you can resume uploads across page reloads."})]}),n.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-800/80 px-3 py-2 text-xs text-slate-200",children:["Last upload: ",Ft]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3",children:[n.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-emerald-200/80",children:"Players"}),n.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-semibold text-emerald-50",children:ot}),n.jsx("span",{className:"text-sm text-emerald-100/80",children:"remaining"})]}),n.jsxs("div",{className:"mt-1 text-xs text-emerald-100/70",children:[se.usedPlayersToday," used / ",Ie]})]}),n.jsxs("div",{className:"rounded-xl border border-sky-400/40 bg-sky-500/5 p-3",children:[n.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-sky-200/80",children:"Guilds"}),n.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-semibold text-sky-50",children:ht}),n.jsx("span",{className:"text-sm text-sky-100/80",children:"remaining"})]}),n.jsxs("div",{className:"mt-1 text-xs text-sky-100/70",children:[se.usedGuildsToday," used / ",He]})]})]}),U&&n.jsx("div",{className:"mt-3 rounded-xl border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-50",children:U})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[n.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),n.jsx(UA,{mode:"session",onBuildUploadSession:le})]}),n.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):n.jsx("div",{className:"flex flex-col gap-3",children:t.map(ue=>{const Fe=ue.id===e;return n.jsxs("button",{type:"button",onClick:()=>r(ue.id),className:["w-full rounded-xl border px-4 py-3 text-left transition",Fe?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:ue.sourceFilename||"Unnamed session"}),n.jsx("span",{className:"text-xs text-slate-400",children:ee(ue.createdAt)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players: ",ue.players.length]}),n.jsxs("div",{children:["Guilds: ",ue.guilds.length]})]}),n.jsx("button",{type:"button",onClick:Qe=>{Qe.stopPropagation(),window.confirm("Remove this session from the list? This will NOT delete any data from the database.")&&i(ue.id)},className:"rounded-full p-1 transition text-red-400 hover:text-red-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-300","aria-label":"Remove session",title:"Remove this session from the list",children:n.jsx(t6,{className:"h-4 w-4"})})]})]}),Fe&&n.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},ue.id)})}),n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"Scan uploads from Discord bot"}),K&&n.jsx("div",{className:"rounded-xl border border-amber-400/60 bg-amber-500/10 p-3 text-sm text-amber-100",children:K}),E?S?n.jsx("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Loading scan uploads..."}):k?n.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100",children:"Error loading scan uploads."}):b.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"No scan uploads from Discord bot yet."}):n.jsx("div",{className:"flex flex-col gap-3",children:b.map(ue=>{const Fe=H===ue.id,Qe=M.has(ue.id),vt=Fe||Qe;return n.jsxs("button",{type:"button",onClick:()=>{vt||be(ue)},disabled:vt,title:Qe?"This scan is already loaded above. Remove it there to load it again.":void 0,className:["w-full rounded-xl border px-4 py-3 text-left text-slate-100 transition","border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:text-emerald-50",vt?"cursor-not-allowed opacity-70 bg-slate-700/60 text-slate-400":""].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:ue.queueId||ue.scanId||ue.id}),n.jsx("span",{className:"text-xs text-slate-400",children:ge(ue.uploadedAt)}),ue.discordUsername&&n.jsx("span",{className:"text-xs text-slate-400",children:ue.discordUsername})]}),n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players CSV: ",ue.hasPlayersCsv?"yes":"no"]}),n.jsxs("div",{children:["Guilds CSV: ",ue.hasGuildsCsv?"yes":"no"]})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[we(ue.status),ue.serverCode&&n.jsxs("span",{className:"rounded-full border border-slate-600/70 bg-slate-800/60 px-2 py-0.5",children:["Server: ",ue.serverCode]}),ue.lastError&&n.jsxs("span",{className:"rounded-full border border-rose-500/60 bg-rose-500/10 px-2 py-0.5 text-rose-100",children:["Error: ",ue.lastError]}),n.jsx("span",{className:"rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-emerald-100",children:Qe?"Loaded":Fe?"Loading...":"Load into preview"})]})]},ue.id)})}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Link your Discord account to see bot uploads here."})]})]})}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[n.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:yt,disabled:Ke||!L||!Ue,children:_.phase==="uploading"?"Uploading...":_.phase==="finalizing"?"Finalizing...":"Upload selected to DB"}),U&&n.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100",children:U}),_.total>0&&n.jsx("div",{className:"text-xs text-slate-300",children:_.phase==="uploading"?n.jsxs(n.Fragment,{children:["Uploading ",_.processed," / ",_.total," records (",Math.round(_.processed/Math.max(_.total,1)*100),"%) - ",_.created," created, ",_.duplicate," duplicates, ",_.error," errors"]}):_.phase==="finalizing"?n.jsxs(n.Fragment,{children:["Finalizing import - ",_.created," created, ",_.duplicate," duplicates, ",_.error," errors"]}):_.phase==="done"?n.jsxs(n.Fragment,{children:["Upload finished: ",_.created," created, ",_.duplicate," duplicates, ",_.error," errors"]}):null}),L?n.jsx("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:`Active session: ${L.sourceFilename||L.id} - ${L.players.length} players, ${L.guilds.length} guilds`}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),L&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",L.players.length," total,"," ",L.players.filter(ue=>ue.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>d(L.id,!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>d(L.id,!1),children:"Clear selection"})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[n.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ue=>n.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",C===ue?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>w(ue),children:ue==="all"?"All":ue==="pending"?"Pending":ue==="inDb"?"In DB":"Error"},ue))}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:R,onChange:ue=>B(ue.target.checked)}),n.jsx("span",{children:"Hide uploaded"})]})]}),ce.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:ce.map(ue=>{var Fe;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:ue.selected,onChange:()=>l(L.id,ue.key,!ue.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ue.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:ue.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:(Fe=ue.level)!=null?Fe:""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:n.jsx(Pbe,{className:ue.className})}),n.jsx("td",{className:"px-3 py-2",children:xe(ue.status)})]},ue.key)})})]})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",L.guilds.length," total,"," ",L.guilds.filter(ue=>ue.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>u(L.id,!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>u(L.id,!1),children:"Clear selection"})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[n.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ue=>n.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",I===ue?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>F(ue),children:ue==="all"?"All":ue==="pending"?"Pending":ue==="inDb"?"In DB":"Error"},ue))}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:$,onChange:ue=>W(ue.target.checked)}),n.jsx("span",{children:"Hide uploaded"})]})]}),ke.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:ke.map(ue=>{var vt;const Fe=N.has(ue.key),Qe=(vt=ue.memberCount)!=null?vt:ue.members.length;return n.jsxs(J.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>he(ue.key),"aria-expanded":Fe,children:Fe?"Collapse":"Expand"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:ue.selected,onChange:()=>a(L.id,ue.key,!ue.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ue.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:ue.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:Qe}),n.jsx("td",{className:"px-3 py-2",children:xe(ue.status)})]}),Fe&&n.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:n.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[n.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),ue.members.length===0?n.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):n.jsxs("table",{className:"w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),n.jsx("tbody",{children:ue.members.map(rt=>{var _t,Jt;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-2 py-1",children:rt.name||""}),n.jsx("td",{className:"px-2 py-1",children:(_t=rt.level)!=null?_t:""}),n.jsx("td",{className:"px-2 py-1",children:(Jt=rt.className)!=null?Jt:""})]},rt.key)})})]})]})})]},ue.key)})})]})})]})]})]})})]})}function Mbe(){const{canUse:t}=q1();return t?n.jsx(Lbe,{}):n.jsx(Et,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[n.jsx(xC,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),n.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const Fbe=t=>()=>n.jsx("div",{style:{padding:16},children:n.jsx("h2",{style:{color:"var(--title)"},children:t})}),Qn=Fbe("Diese Unterseite existiert in der neuen Struktur nicht mehr."),It=(t,e,s,r=n.jsx(Sl,{to:"/",replace:!0}))=>n.jsx(wbe,{featureId:t,route:e,fallback:r,children:s});rI.createRoot(document.getElementById("root")).render(n.jsx(J.StrictMode,{children:n.jsx(CB,{children:n.jsx(MB,{children:n.jsx(VB,{children:n.jsxs(bbe,{children:[n.jsx(wP,{children:n.jsx(JR,{children:n.jsxs(fe,{element:n.jsx(z$,{}),children:[n.jsx(fe,{path:"/",element:It("main.home","/",n.jsx(BG,{}),n.jsx(Sl,{to:"/login",replace:!0}))}),n.jsx(fe,{path:"/login",element:n.jsx(tW,{})}),n.jsx(fe,{path:"/dashboard",element:It("main.dashboard","/dashboard",n.jsx(sW,{}))}),n.jsx(fe,{path:"/dashboard/kpis",element:It("main.dashboard","/dashboard",n.jsx(iW,{}))}),n.jsx(fe,{path:"/dashboard/activity",element:It("main.dashboard","/dashboard",n.jsx(aW,{}))}),n.jsx(fe,{path:"/dashboard/progression",element:It("main.dashboard","/dashboard",n.jsx(oW,{}))}),n.jsx(fe,{path:"/discover",element:It("main.discover","/discover",n.jsx(lW,{}))}),n.jsx(fe,{path:"/toplists",element:It("main.toplists","/toplists",n.jsx(dK,{}))}),n.jsx(fe,{path:"/sfmagazine",element:n.jsx(pW,{})}),n.jsx(fe,{path:"/sfmagazine/historybook",element:n.jsx(zW,{})}),n.jsx(fe,{path:"/help",element:n.jsx(rq,{})}),n.jsx(fe,{path:"/players",element:n.jsx(uK,{})}),n.jsx(fe,{path:"/players/rankings",element:n.jsx(hK,{})}),n.jsx(fe,{path:"/players/stats",element:n.jsx(pK,{})}),n.jsx(fe,{path:"/players/profile",element:n.jsx(iv,{})}),n.jsx(fe,{path:"/players/profile/:playerId",element:n.jsx(iv,{})}),n.jsx(fe,{path:"/players/compare",element:n.jsx(JQ,{})}),n.jsx(fe,{path:"/player/:playerId",element:n.jsx(iv,{})}),n.jsx(fe,{path:"/guilds",element:n.jsx(aX,{})}),n.jsx(fe,{path:"/guilds/rankings",element:n.jsx(oX,{})}),n.jsx(fe,{path:"/guilds/stats",element:n.jsx(lX,{})}),n.jsx(fe,{path:"/guilds/profile",element:n.jsx(dv,{})}),n.jsx(fe,{path:"/guilds/profile/:guildId",element:n.jsx(dv,{})}),n.jsx(fe,{path:"/guild/:guildId",element:n.jsx(dv,{})}),n.jsx(fe,{path:"/servers",element:n.jsx(QJ,{})}),n.jsx(fe,{path:"/servers/rankings",element:n.jsx(XJ,{})}),n.jsx(fe,{path:"/servers/stats",element:n.jsx(YJ,{})}),n.jsx(fe,{path:"/servers/profile",element:n.jsx(uv,{})}),n.jsx(fe,{path:"/servers/profile/:serverId",element:n.jsx(uv,{})}),n.jsx(fe,{path:"/server/:serverId",element:n.jsx(uv,{})}),n.jsx(fe,{path:"/u/:profileId",element:n.jsx(aee,{})}),n.jsx(fe,{path:"/guidehub/*",element:It("main.guidehub","/guidehub",n.jsx(Oie,{}))}),n.jsx(fe,{path:"/tools",element:It("main.tools","/tools",n.jsx(A1e,{}))}),n.jsx(fe,{path:"/upload-center",element:It("main.uploadCenter","/upload-center",n.jsx(Mbe,{}),n.jsx(Sl,{to:"/login",replace:!0}))}),n.jsx(fe,{path:"/UploadCenter",element:n.jsx(Sl,{to:"/upload-center",replace:!0})}),n.jsx(fe,{path:"/community",element:It("main.community","/community",n.jsx(Poe,{}))}),n.jsx(fe,{path:"/community/scans",element:It("main.community","/community",n.jsx(oA,{}))}),n.jsx(fe,{path:"/community/predictions",element:It("main.community","/community",n.jsx(lA,{}))}),n.jsx(fe,{path:"/community/creators",element:It("main.community","/community",n.jsx(aA,{}))}),n.jsx(fe,{path:"/community/feedback",element:It("main.community","/community",n.jsx(dA,{}))}),n.jsx(fe,{path:"/community/news",element:It("main.community","/community",n.jsx(cA,{}))}),n.jsx(fe,{path:"/community/records",element:It("main.community","/community",n.jsx(uA,{}))}),n.jsx(fe,{path:"/scans",element:It("main.scans","/scans",n.jsx(Loe,{}))}),n.jsx(fe,{path:"/scans/latest",element:It("main.scans","/scans",n.jsx(Doe,{}))}),n.jsx(fe,{path:"/scans/archive",element:It("main.scans","/scans",n.jsx(Moe,{}))}),n.jsx(fe,{path:"/guild-hub",element:It("main.guildHub","/guild-hub",n.jsx(Foe,{}))}),n.jsx(fe,{path:"/guild-hub/planner",element:It("main.guildHub","/guild-hub",n.jsx(ice,{}))}),n.jsx(fe,{path:"/guild-hub/fusion-planner",element:It("main.guildHub","/guild-hub",n.jsx(zpe,{}))}),n.jsx(fe,{path:"/guild-hub/compare-guilds",element:It("main.guildHub","/guild-hub",n.jsx(Hpe,{}))}),n.jsx(fe,{path:"/guild-hub/waitlist",element:It("main.guildHub","/guild-hub",n.jsx(cfe,{}))}),n.jsx(fe,{path:"/guild-hub/activity",element:It("main.guildHub","/guild-hub",n.jsx(xfe,{}))}),n.jsx(fe,{path:"/guild-hub/imports",element:It("main.guildHub","/guild-hub",n.jsx(yfe,{}))}),n.jsx(fe,{path:"/guild-hub/announcements",element:It("main.guildHub","/guild-hub",n.jsx(vfe,{}))}),n.jsx(fe,{path:"/guild-hub/events",element:It("main.guildHub","/guild-hub",n.jsx(bfe,{}))}),n.jsx(fe,{path:"/guild-hub/roles",element:It("main.guildHub","/guild-hub",n.jsx(_fe,{}))}),n.jsx(fe,{path:"/guild-hub/settings",element:It("main.guildHub","/guild-hub",n.jsx(wfe,{}))}),n.jsx(fe,{path:"/admin",element:It("main.admin","/admin",n.jsx(kfe,{}))}),n.jsx(fe,{path:"/admin/errors",element:It("main.admin","/admin",n.jsx(Afe,{}))}),n.jsx(fe,{path:"/admin/scans-uploaded",element:It("main.admin","/admin",n.jsx(Rfe,{}))}),n.jsx(fe,{path:"/admin/creators-api",element:It("main.admin","/admin",n.jsx(Ufe,{}))}),n.jsx(fe,{path:"/admin/users",element:It("main.admin","/admin",n.jsx(sge,{}))}),n.jsx(fe,{path:"/settings",element:It("main.settings","/settings",n.jsx(lge,{}))}),n.jsx(fe,{path:"/settings/account",element:It("main.settings","/settings",n.jsx(ixe,{}))}),n.jsxs(fe,{path:"/playground",element:It("main.playground","/playground",n.jsx(oxe,{})),children:[n.jsx(fe,{index:!0,element:n.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),n.jsx(fe,{path:"list-views",element:n.jsx(mk,{})}),n.jsx(fe,{path:"rescan-widget",element:n.jsx(gk,{})}),n.jsx(fe,{path:"upload-sim",element:n.jsx(xk,{})}),n.jsx(fe,{path:"theme-maker",element:n.jsx(dk,{})}),n.jsx(fe,{path:"theme-maker-pro",element:n.jsx(hk,{})}),n.jsx(fe,{path:"am-rune-bonuses-demos",element:n.jsx(rye,{})}),n.jsx(fe,{path:"templates/content-shell",element:n.jsx(Yye,{})}),n.jsx(fe,{path:"templates/blank",element:n.jsx(Zye,{})}),n.jsx(fe,{path:"templates/blank-alt",element:n.jsx(tve,{})}),n.jsx(fe,{path:"templates/blank-layout-2",element:n.jsx(ive,{})}),n.jsx(fe,{path:"templates/blank-layout-3",element:n.jsx(ove,{})}),n.jsx(fe,{path:"templates/blank-layout-4",element:n.jsx(lve,{})}),n.jsx(fe,{path:"portrait-maker",element:n.jsx(qye,{})}),n.jsx(fe,{path:"hud",element:n.jsx(iye,{})}),n.jsx(fe,{path:"hud/game-buttons",element:n.jsx(Rye,{})}),n.jsx(fe,{path:"core-ui/theme-maker",element:n.jsx(dk,{})}),n.jsx(fe,{path:"core-ui/theme-maker-pro",element:n.jsx(hk,{})}),n.jsx(fe,{path:"core-ui/list-views",element:n.jsx(mk,{})}),n.jsx(fe,{path:"sync/rescan",element:n.jsx(gk,{})}),n.jsx(fe,{path:"upload/sim",element:n.jsx(xk,{})}),n.jsx(fe,{path:"import/har",element:n.jsx(hve,{})}),n.jsx(fe,{path:"import/json-csv",element:n.jsx(gve,{})}),n.jsx(fe,{path:"import/schema",element:n.jsx(bve,{})}),n.jsx(fe,{path:"hubs/player-contained",element:n.jsx(Sve,{})}),n.jsx(fe,{path:"hubs/guilds",element:n.jsx(Tve,{})}),n.jsx(fe,{path:"hubs/servers",element:n.jsx(Rve,{})}),n.jsx(fe,{path:"rankings/views",element:n.jsx(Mve,{})}),n.jsx(fe,{path:"analytics/kpi",element:n.jsx(Ove,{})}),n.jsx(fe,{path:"analytics/progression",element:n.jsx(Hve,{})}),n.jsx(fe,{path:"analytics/legendary-pets",element:n.jsx(Kve,{})}),n.jsx(fe,{path:"community/scans",element:n.jsx(Jve,{})}),n.jsx(fe,{path:"community/creators",element:n.jsx(s0e,{})}),n.jsx(fe,{path:"feedback/form",element:n.jsx(a0e,{})}),n.jsx(fe,{path:"feedback/admin",element:n.jsx(d0e,{})}),n.jsx(fe,{path:"help/tutorials",element:n.jsx(m0e,{})}),n.jsx(fe,{path:"help/wiki",element:n.jsx(y0e,{})}),n.jsx(fe,{path:"legal/tos",element:n.jsx(k0e,{})}),n.jsx(fe,{path:"legal/transparency",element:n.jsx(A0e,{})}),n.jsx(fe,{path:"settings",element:n.jsx(w0e,{})}),n.jsx(fe,{path:"pwa/update",element:n.jsx(L0e,{})}),n.jsx(fe,{path:"pwa/install",element:n.jsx(B0e,{})}),n.jsx(fe,{path:"connect/manual",element:n.jsx(U0e,{})}),n.jsx(fe,{path:"connect/userscript",element:n.jsx(W0e,{})}),n.jsx(fe,{path:"interop/exports",element:n.jsx(X0e,{})}),n.jsx(fe,{path:"interop/deeplinks",element:n.jsx(e1e,{})}),n.jsx(fe,{path:"admin/servers",element:n.jsx(r1e,{})}),n.jsx(fe,{path:"admin/jobs",element:n.jsx(l1e,{})}),n.jsx(fe,{path:"admin/flags",element:n.jsx(h1e,{})}),n.jsx(fe,{path:"perf/table-lab",element:n.jsx(g1e,{})}),n.jsx(fe,{path:"mobile/filters",element:n.jsx(b1e,{})}),n.jsx(fe,{path:"qa/a11y",element:n.jsx(S1e,{})})]}),n.jsx(fe,{path:"/latest-scan",element:n.jsx(Sl,{to:"/scans/latest",replace:!0})}),n.jsx(fe,{path:"/old-scans",element:n.jsx(Sl,{to:"/scans/archive",replace:!0})}),n.jsx(fe,{path:"/favorites",element:Qn()}),n.jsx(fe,{path:"/notifications",element:Qn()}),n.jsx(fe,{path:"/guilds/planner",element:Qn()}),n.jsx(fe,{path:"/guilds/fusion",element:Qn()}),n.jsx(fe,{path:"/guilds/academy",element:Qn()}),n.jsx(fe,{path:"/toplists/players",element:Qn()}),n.jsx(fe,{path:"/toplists/guilds",element:Qn()}),n.jsx(fe,{path:"/toplists/servers",element:Qn()}),n.jsx(fe,{path:"/settings/profile",element:Qn()}),n.jsx(fe,{path:"/settings/appearance",element:Qn()}),n.jsx(fe,{path:"/players/search",element:Qn()}),n.jsx(fe,{path:"/servers/list",element:Qn()}),n.jsx(fe,{path:"/servers/trend",element:Qn()}),n.jsx(fe,{path:"/scans/upload",element:Qn()}),n.jsx(fe,{path:"/scans/history",element:Qn()}),n.jsx(fe,{path:"*",element:n.jsx(Sl,{to:"/",replace:!0})})]})})}),n.jsx(ybe,{})]})})})})}));

import kC from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function p1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ly={exports:{}},Pu={},Dy={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function U4(){if(S2)return Ht;S2=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,N={};function C(U,Y,ce){this.props=U,this.context=Y,this.refs=N,this.updater=ce||b}C.prototype.isReactComponent={},C.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function R(){}R.prototype=C.prototype;function D(U,Y,ce){this.props=U,this.context=Y,this.refs=N,this.updater=ce||b}var A=D.prototype=new R;A.constructor=D,_(A,C.prototype),A.isPureReactComponent=!0;var y=Array.isArray,w=Object.prototype.hasOwnProperty,M={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(U,Y,ce){var oe,me={},_e=null,Pe=null;if(Y!=null)for(oe in Y.ref!==void 0&&(Pe=Y.ref),Y.key!==void 0&&(_e=""+Y.key),Y)w.call(Y,oe)&&!k.hasOwnProperty(oe)&&(me[oe]=Y[oe]);var te=arguments.length-2;if(te===1)me.children=ce;else if(1<te){for(var fe=Array(te),ae=0;ae<te;ae++)fe[ae]=arguments[ae+2];me.children=fe}if(U&&U.defaultProps)for(oe in te=U.defaultProps,te)me[oe]===void 0&&(me[oe]=te[oe]);return{$$typeof:t,type:U,key:_e,ref:Pe,props:me,_owner:M.current}}function T(U,Y){return{$$typeof:t,type:U.type,key:Y,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function I(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ce){return Y[ce]})}var B=/\/+/g;function $(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?I(""+U.key):Y.toString(36)}function H(U,Y,ce,oe,me){var _e=typeof U;(_e==="undefined"||_e==="boolean")&&(U=null);var Pe=!1;if(U===null)Pe=!0;else switch(_e){case"string":case"number":Pe=!0;break;case"object":switch(U.$$typeof){case t:case e:Pe=!0}}if(Pe)return Pe=U,me=me(Pe),U=oe===""?"."+$(Pe,0):oe,y(me)?(ce="",U!=null&&(ce=U.replace(B,"$&/")+"/"),H(me,Y,ce,"",function(ae){return ae})):me!=null&&(F(me)&&(me=T(me,ce+(!me.key||Pe&&Pe.key===me.key?"":(""+me.key).replace(B,"$&/")+"/")+U)),Y.push(me)),1;if(Pe=0,oe=oe===""?".":oe+":",y(U))for(var te=0;te<U.length;te++){_e=U[te];var fe=oe+$(_e,te);Pe+=H(_e,Y,ce,fe,me)}else if(fe=v(U),typeof fe=="function")for(U=fe.call(U),te=0;!(_e=U.next()).done;)_e=_e.value,fe=oe+$(_e,te++),Pe+=H(_e,Y,ce,fe,me);else if(_e==="object")throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Pe}function z(U,Y,ce){if(U==null)return U;var oe=[],me=0;return H(U,oe,"","",function(_e){return Y.call(ce,_e,me++)}),oe}function W(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(ce){(U._status===0||U._status===-1)&&(U._status=1,U._result=ce)},function(ce){(U._status===0||U._status===-1)&&(U._status=2,U._result=ce)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var K={current:null},q={transition:null},se={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:q,ReactCurrentOwner:M};function re(){throw Error("act(...) is not supported in production builds of React.")}return Ht.Children={map:z,forEach:function(U,Y,ce){z(U,function(){Y.apply(this,arguments)},ce)},count:function(U){var Y=0;return z(U,function(){Y++}),Y},toArray:function(U){return z(U,function(Y){return Y})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ht.Component=C,Ht.Fragment=s,Ht.Profiler=i,Ht.PureComponent=D,Ht.StrictMode=r,Ht.Suspense=u,Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Ht.act=re,Ht.cloneElement=function(U,Y,ce){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var oe=_({},U.props),me=U.key,_e=U.ref,Pe=U._owner;if(Y!=null){if(Y.ref!==void 0&&(_e=Y.ref,Pe=M.current),Y.key!==void 0&&(me=""+Y.key),U.type&&U.type.defaultProps)var te=U.type.defaultProps;for(fe in Y)w.call(Y,fe)&&!k.hasOwnProperty(fe)&&(oe[fe]=Y[fe]===void 0&&te!==void 0?te[fe]:Y[fe])}var fe=arguments.length-2;if(fe===1)oe.children=ce;else if(1<fe){te=Array(fe);for(var ae=0;ae<fe;ae++)te[ae]=arguments[ae+2];oe.children=te}return{$$typeof:t,type:U.type,key:me,ref:_e,props:oe,_owner:Pe}},Ht.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Ht.createElement=S,Ht.createFactory=function(U){var Y=S.bind(null,U);return Y.type=U,Y},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(U){return{$$typeof:d,render:U}},Ht.isValidElement=F,Ht.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:W}},Ht.memo=function(U,Y){return{$$typeof:h,type:U,compare:Y===void 0?null:Y}},Ht.startTransition=function(U){var Y=q.transition;q.transition={};try{U()}finally{q.transition=Y}},Ht.unstable_act=re,Ht.useCallback=function(U,Y){return K.current.useCallback(U,Y)},Ht.useContext=function(U){return K.current.useContext(U)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(U){return K.current.useDeferredValue(U)},Ht.useEffect=function(U,Y){return K.current.useEffect(U,Y)},Ht.useId=function(){return K.current.useId()},Ht.useImperativeHandle=function(U,Y,ce){return K.current.useImperativeHandle(U,Y,ce)},Ht.useInsertionEffect=function(U,Y){return K.current.useInsertionEffect(U,Y)},Ht.useLayoutEffect=function(U,Y){return K.current.useLayoutEffect(U,Y)},Ht.useMemo=function(U,Y){return K.current.useMemo(U,Y)},Ht.useReducer=function(U,Y,ce){return K.current.useReducer(U,Y,ce)},Ht.useRef=function(U){return K.current.useRef(U)},Ht.useState=function(U){return K.current.useState(U)},Ht.useSyncExternalStore=function(U,Y,ce){return K.current.useSyncExternalStore(U,Y,ce)},Ht.useTransition=function(){return K.current.useTransition()},Ht.version="18.3.1",Ht}var N2;function f1(){return N2||(N2=1,Dy.exports=U4()),Dy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function z4(){if(k2)return Pu;k2=1;var t=f1(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,h){var m,g={},v=null,b=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(b=u.ref);for(m in u)r.call(u,m)&&!a.hasOwnProperty(m)&&(g[m]=u[m]);if(d&&d.defaultProps)for(m in u=d.defaultProps,u)g[m]===void 0&&(g[m]=u[m]);return{$$typeof:e,type:d,key:v,ref:b,props:g,_owner:i.current}}return Pu.Fragment=s,Pu.jsx=l,Pu.jsxs=l,Pu}var C2;function H4(){return C2||(C2=1,Ly.exports=z4()),Ly.exports}var n=H4(),E=f1();const X=p1(E);var Ep={},My={exports:{}},wr={},Fy={exports:{}},By={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function G4(){return T2||(T2=1,(function(t){function e(q,se){var re=q.length;q.push(se);e:for(;0<re;){var U=re-1>>>1,Y=q[U];if(0<i(Y,se))q[U]=se,q[re]=Y,re=U;else break e}}function s(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var se=q[0],re=q.pop();if(re!==se){q[0]=re;e:for(var U=0,Y=q.length,ce=Y>>>1;U<ce;){var oe=2*(U+1)-1,me=q[oe],_e=oe+1,Pe=q[_e];if(0>i(me,re))_e<Y&&0>i(Pe,me)?(q[U]=Pe,q[_e]=re,U=_e):(q[U]=me,q[oe]=re,U=oe);else if(_e<Y&&0>i(Pe,re))q[U]=Pe,q[_e]=re,U=_e;else break e}}return se}function i(q,se){var re=q.sortIndex-se.sortIndex;return re!==0?re:q.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],h=[],m=1,g=null,v=3,b=!1,_=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var se=s(h);se!==null;){if(se.callback===null)r(h);else if(se.startTime<=q)r(h),se.sortIndex=se.expirationTime,e(u,se);else break;se=s(h)}}function y(q){if(N=!1,A(q),!_)if(s(u)!==null)_=!0,W(w);else{var se=s(h);se!==null&&K(y,se.startTime-q)}}function w(q,se){_=!1,N&&(N=!1,R(S),S=-1),b=!0;var re=v;try{for(A(se),g=s(u);g!==null&&(!(g.expirationTime>se)||q&&!I());){var U=g.callback;if(typeof U=="function"){g.callback=null,v=g.priorityLevel;var Y=U(g.expirationTime<=se);se=t.unstable_now(),typeof Y=="function"?g.callback=Y:g===s(u)&&r(u),A(se)}else r(u);g=s(u)}if(g!==null)var ce=!0;else{var oe=s(h);oe!==null&&K(y,oe.startTime-se),ce=!1}return ce}finally{g=null,v=re,b=!1}}var M=!1,k=null,S=-1,T=5,F=-1;function I(){return!(t.unstable_now()-F<T)}function B(){if(k!==null){var q=t.unstable_now();F=q;var se=!0;try{se=k(!0,q)}finally{se?$():(M=!1,k=null)}}else M=!1}var $;if(typeof D=="function")$=function(){D(B)};else if(typeof MessageChannel!="undefined"){var H=new MessageChannel,z=H.port2;H.port1.onmessage=B,$=function(){z.postMessage(null)}}else $=function(){C(B,0)};function W(q){k=q,M||(M=!0,$())}function K(q,se){S=C(function(){q(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){_||b||(_=!0,W(w))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return s(u)},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var re=v;v=se;try{return q()}finally{v=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,se){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=v;v=q;try{return se()}finally{v=re}},t.unstable_scheduleCallback=function(q,se,re){var U=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?U+re:U):re=U,q){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=re+Y,q={id:m++,callback:se,priorityLevel:q,startTime:re,expirationTime:Y,sortIndex:-1},re>U?(q.sortIndex=re,e(h,q),s(u)===null&&q===s(h)&&(N?(R(S),S=-1):N=!0,K(y,re-U))):(q.sortIndex=Y,e(u,q),_||b||(_=!0,W(w))),q},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(q){var se=v;return function(){var re=v;v=se;try{return q.apply(this,arguments)}finally{v=re}}}})(By)),By}var E2;function W4(){return E2||(E2=1,Fy.exports=G4()),Fy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function q4(){if(A2)return wr;A2=1;var t=f1(),e=W4();function s(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var d=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return u.call(g,o)?!0:u.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function b(o,c,p,x){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function _(o,c,p,x){if(c===null||typeof c=="undefined"||b(o,c,p,x))return!0;if(x)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function N(o,c,p,x,j,L,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=j,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=L,this.removeEmptyString=V}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new N(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];C[c]=new N(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new N(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new N(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new N(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new N(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new N(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new N(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new N(o,5,!1,o.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function D(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(R,D);C[c]=new N(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(R,D);C[c]=new N(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(R,D);C[c]=new N(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new N(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new N(o,1,!1,o.toLowerCase(),null,!0,!0)});function A(o,c,p,x){var j=C.hasOwnProperty(c)?C[c]:null;(j!==null?j.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,p,j,x)&&(p=null),x||j===null?v(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):j.mustUseProperty?o[j.propertyName]=p===null?j.type===3?!1:"":p:(c=j.attributeName,x=j.attributeNamespace,p===null?o.removeAttribute(c):(j=j.type,p=j===3||j===4&&p===!0?"":""+p,x?o.setAttributeNS(x,c,p):o.setAttribute(c,p))))}var y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),M=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),I=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),q=Symbol.iterator;function se(o){return o===null||typeof o!="object"?null:(o=q&&o[q]||o["@@iterator"],typeof o=="function"?o:null)}var re=Object.assign,U;function Y(o){if(U===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var ce=!1;function oe(o,c){if(!o||ce)return"";ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(pe){var x=pe}Reflect.construct(o,[],c)}else{try{c.call()}catch(pe){x=pe}o.call(c.prototype)}else{try{throw Error()}catch(pe){x=pe}o()}}catch(pe){if(pe&&x&&typeof pe.stack=="string"){for(var j=pe.stack.split(`
`),L=x.stack.split(`
`),V=j.length-1,Q=L.length-1;1<=V&&0<=Q&&j[V]!==L[Q];)Q--;for(;1<=V&&0<=Q;V--,Q--)if(j[V]!==L[Q]){if(V!==1||Q!==1)do if(V--,Q--,0>Q||j[V]!==L[Q]){var Z=`
`+j[V].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=V&&0<=Q);break}}}finally{ce=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?Y(o):""}function me(o){switch(o.tag){case 5:return Y(o.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return o=oe(o.type,!1),o;case 11:return o=oe(o.type.render,!1),o;case 1:return o=oe(o.type,!0),o;default:return""}}function _e(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case M:return"Portal";case T:return"Profiler";case S:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case I:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case z:return c=o.displayName||null,c!==null?c:_e(o.type)||"Memo";case W:c=o._payload,o=o._init;try{return _e(o(c))}catch(p){}}return null}function Pe(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(c);case 8:return c===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function te(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function fe(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ae(o){var c=fe(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var j=p.get,L=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(V){x=""+V,L.call(this,V)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return x},setValue:function(V){x=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function be(o){o._valueTracker||(o._valueTracker=ae(o))}function ye(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),x="";return o&&(x=fe(o)?o.checked?"true":"false":o.value),o=x,o!==p?(c.setValue(o),!0):!1}function Ie(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch(c){return o.body}}function $e(o,c){var p=c.checked;return re({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p!=null?p:o._wrapperState.initialChecked})}function Ge(o,c){var p=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;p=te(c.value!=null?c.value:p),o._wrapperState={initialChecked:x,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function nt(o,c){c=c.checked,c!=null&&A(o,"checked",c,!1)}function at(o,c){nt(o,c);var p=te(c.value),x=c.type;if(p!=null)x==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?$t(o,c.type,p):c.hasOwnProperty("defaultValue")&&$t(o,c.type,te(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function ft(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function $t(o,c,p){(c!=="number"||Ie(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var je=Array.isArray;function Je(o,c,p,x){if(o=o.options,c){c={};for(var j=0;j<p.length;j++)c["$"+p[j]]=!0;for(p=0;p<o.length;p++)j=c.hasOwnProperty("$"+o[p].value),o[p].selected!==j&&(o[p].selected=j),j&&x&&(o[p].defaultSelected=!0)}else{for(p=""+te(p),c=null,j=0;j<o.length;j++){if(o[j].value===p){o[j].selected=!0,x&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function Ke(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(s(91));return re({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function bt(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(s(92));if(je(p)){if(1<p.length)throw Error(s(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:te(p)}}function kt(o,c){var p=te(c.value),x=te(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),x!=null&&(o.defaultValue=""+x)}function Oe(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Te(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function De(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Te(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var et,ht=(function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(c,p,x,j){MSApp.execUnsafeLocalFunction(function(){return o(c,p,x,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(et=et||document.createElement("div"),et.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=et.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function we(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Os=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(o){Os.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Gs[c]=Gs[o]})});function Ws(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Gs.hasOwnProperty(o)&&Gs[o]?(""+c).trim():c+"px"}function qs(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var x=p.indexOf("--")===0,j=Ws(p,c[p],x);p==="float"&&(p="cssFloat"),x?o.setProperty(p,j):o[p]=j}}var cs=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function es(o,c){if(c){if(cs[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(s(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(s(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(s(61))}if(c.style!=null&&typeof c.style!="object")throw Error(s(62))}}function dt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J=null;function Ve(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var He=null,tt=null,lt=null;function _t(o){if(o=yu(o)){if(typeof He!="function")throw Error(s(280));var c=o.stateNode;c&&(c=Hm(c),He(o.stateNode,o.type,c))}}function ts(o){tt?lt?lt.push(o):lt=[o]:tt=o}function Cs(){if(tt){var o=tt,c=lt;if(lt=tt=null,_t(o),c)for(o=0;o<c.length;o++)_t(c[o])}}function Nn(o,c){return o(c)}function mr(){}var fn=!1;function Vi(o,c,p){if(fn)return o(c,p);fn=!0;try{return Nn(o,c,p)}finally{fn=!1,(tt!==null||lt!==null)&&(mr(),Cs())}}function us(o,c){var p=o.stateNode;if(p===null)return null;var x=Hm(p);if(x===null)return null;p=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(s(231,c,typeof p));return p}var tr=!1;if(d)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){tr=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch(o){tr=!1}function Pr(o,c,p,x,j,L,V,Q,Z){var pe=Array.prototype.slice.call(arguments,3);try{c.apply(p,pe)}catch(ke){this.onError(ke)}}var Lr=!1,Jr=null,kn=!1,ss=null,gs={onError:function(o){Lr=!0,Jr=o}};function Cn(o,c,p,x,j,L,V,Q,Z){Lr=!1,Jr=null,Pr.apply(gs,arguments)}function Dr(o,c,p,x,j,L,V,Q,Z){if(Cn.apply(this,arguments),Lr){if(Lr){var pe=Jr;Lr=!1,Jr=null}else throw Error(s(198));kn||(kn=!0,ss=pe)}}function Vt(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function Ui(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function pr(o){if(Vt(o)!==o)throw Error(s(188))}function dl(o){var c=o.alternate;if(!c){if(c=Vt(o),c===null)throw Error(s(188));return c!==o?null:o}for(var p=o,x=c;;){var j=p.return;if(j===null)break;var L=j.alternate;if(L===null){if(x=j.return,x!==null){p=x;continue}break}if(j.child===L.child){for(L=j.child;L;){if(L===p)return pr(j),o;if(L===x)return pr(j),c;L=L.sibling}throw Error(s(188))}if(p.return!==x.return)p=j,x=L;else{for(var V=!1,Q=j.child;Q;){if(Q===p){V=!0,p=j,x=L;break}if(Q===x){V=!0,x=j,p=L;break}Q=Q.sibling}if(!V){for(Q=L.child;Q;){if(Q===p){V=!0,p=L,x=j;break}if(Q===x){V=!0,x=L,p=j;break}Q=Q.sibling}if(!V)throw Error(s(189))}}if(p.alternate!==x)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?o:c}function oo(o){return o=dl(o),o!==null?fa(o):null}function fa(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=fa(o);if(c!==null)return c;o=o.sibling}return null}var ga=e.unstable_scheduleCallback,lo=e.unstable_cancelCallback,ul=e.unstable_shouldYield,yc=e.unstable_requestPaint,ms=e.unstable_now,hl=e.unstable_getCurrentPriorityLevel,zi=e.unstable_ImmediatePriority,gi=e.unstable_UserBlockingPriority,sr=e.unstable_NormalPriority,tu=e.unstable_LowPriority,vm=e.unstable_IdlePriority,ml=null,Mr=null;function bm(o){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(ml,o,void 0,(o.current.flags&128)===128)}catch(c){}}var nr=Math.clz32?Math.clz32:wm,su=Math.log,_m=Math.LN2;function wm(o){return o>>>=0,o===0?32:31-(su(o)/_m|0)|0}var vc=64,bc=4194304;function co(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function pl(o,c){var p=o.pendingLanes;if(p===0)return 0;var x=0,j=o.suspendedLanes,L=o.pingedLanes,V=p&268435455;if(V!==0){var Q=V&~j;Q!==0?x=co(Q):(L&=V,L!==0&&(x=co(L)))}else V=p&~j,V!==0?x=co(V):L!==0&&(x=co(L));if(x===0)return 0;if(c!==0&&c!==x&&(c&j)===0&&(j=x&-x,L=c&-c,j>=L||j===16&&(L&4194240)!==0))return c;if((x&4)!==0&&(x|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=x;0<c;)p=31-nr(c),j=1<<p,x|=o[p],c&=~j;return x}function dx(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xa(o,c){for(var p=o.suspendedLanes,x=o.pingedLanes,j=o.expirationTimes,L=o.pendingLanes;0<L;){var V=31-nr(L),Q=1<<V,Z=j[V];Z===-1?((Q&p)===0||(Q&x)!==0)&&(j[V]=dx(Q,c)):Z<=c&&(o.expiredLanes|=Q),L&=~Q}}function Fr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function fl(){var o=vc;return vc<<=1,(vc&4194240)===0&&(vc=64),o}function uo(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function ho(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-nr(c),o[c]=p}function xs(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<p;){var j=31-nr(p),L=1<<j;c[j]=0,x[j]=-1,o[j]=-1,p&=~L}}function mo(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var x=31-nr(p),j=1<<x;j&c|o[x]&c&&(o[x]|=c),p&=~j}}var Yt=0;function po(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var jm,_c,Sm,Nm,km,nu=!1,Hi=[],Tn=null,xi=null,yi=null,fo=new Map,Zr=new Map,Gi=[],ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cm(o,c){switch(o){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":fo.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(c.pointerId)}}function fr(o,c,p,x,j,L){return o===null||o.nativeEvent!==L?(o={blockedOn:c,domEventName:p,eventSystemFlags:x,nativeEvent:L,targetContainers:[j]},c!==null&&(c=yu(c),c!==null&&_c(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function hx(o,c,p,x,j){switch(c){case"focusin":return Tn=fr(Tn,o,c,p,x,j),!0;case"dragenter":return xi=fr(xi,o,c,p,x,j),!0;case"mouseover":return yi=fr(yi,o,c,p,x,j),!0;case"pointerover":var L=j.pointerId;return fo.set(L,fr(fo.get(L)||null,o,c,p,x,j)),!0;case"gotpointercapture":return L=j.pointerId,Zr.set(L,fr(Zr.get(L)||null,o,c,p,x,j)),!0}return!1}function Tm(o){var c=bl(o.target);if(c!==null){var p=Vt(c);if(p!==null){if(c=p.tag,c===13){if(c=Ui(p),c!==null){o.blockedOn=c,km(o.priority,function(){Sm(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ya(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=wc(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var x=new p.constructor(p.type,p);J=x,p.target.dispatchEvent(x),J=null}else return c=yu(p),c!==null&&_c(c),o.blockedOn=p,!1;c.shift()}return!0}function gl(o,c,p){ya(o)&&p.delete(c)}function Em(){nu=!1,Tn!==null&&ya(Tn)&&(Tn=null),xi!==null&&ya(xi)&&(xi=null),yi!==null&&ya(yi)&&(yi=null),fo.forEach(gl),Zr.forEach(gl)}function vi(o,c){o.blockedOn===c&&(o.blockedOn=null,nu||(nu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Em)))}function bi(o){function c(j){return vi(j,o)}if(0<Hi.length){vi(Hi[0],o);for(var p=1;p<Hi.length;p++){var x=Hi[p];x.blockedOn===o&&(x.blockedOn=null)}}for(Tn!==null&&vi(Tn,o),xi!==null&&vi(xi,o),yi!==null&&vi(yi,o),fo.forEach(c),Zr.forEach(c),p=0;p<Gi.length;p++)x=Gi[p],x.blockedOn===o&&(x.blockedOn=null);for(;0<Gi.length&&(p=Gi[0],p.blockedOn===null);)Tm(p),p.blockedOn===null&&Gi.shift()}var va=y.ReactCurrentBatchConfig,go=!0;function Ts(o,c,p,x){var j=Yt,L=va.transition;va.transition=null;try{Yt=1,ru(o,c,p,x)}finally{Yt=j,va.transition=L}}function mx(o,c,p,x){var j=Yt,L=va.transition;va.transition=null;try{Yt=4,ru(o,c,p,x)}finally{Yt=j,va.transition=L}}function ru(o,c,p,x){if(go){var j=wc(o,c,p,x);if(j===null)Sx(o,c,x,xl,p),Cm(o,x);else if(hx(j,o,c,p,x))x.stopPropagation();else if(Cm(o,x),c&4&&-1<ux.indexOf(o)){for(;j!==null;){var L=yu(j);if(L!==null&&jm(L),L=wc(o,c,p,x),L===null&&Sx(o,c,x,xl,p),L===j)break;j=L}j!==null&&x.stopPropagation()}else Sx(o,c,x,null,p)}}var xl=null;function wc(o,c,p,x){if(xl=null,o=Ve(x),o=bl(o),o!==null)if(c=Vt(o),c===null)o=null;else if(p=c.tag,p===13){if(o=Ui(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return xl=o,null}function iu(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hl()){case zi:return 1;case gi:return 4;case sr:case tu:return 16;case vm:return 536870912;default:return 16}default:return 16}}var Br=null,jc=null,gr=null;function au(){if(gr)return gr;var o,c=jc,p=c.length,x,j="value"in Br?Br.value:Br.textContent,L=j.length;for(o=0;o<p&&c[o]===j[o];o++);var V=p-o;for(x=1;x<=V&&c[p-x]===j[L-x];x++);return gr=j.slice(o,1<x?1-x:void 0)}function Sc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Wi(){return!0}function ou(){return!1}function En(o){function c(p,x,j,L,V){this._reactName=p,this._targetInst=j,this.type=x,this.nativeEvent=L,this.target=V,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(p=o[Q],this[Q]=p?p(L):L[Q]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Wi:ou,this.isPropagationStopped=ou,this}return re(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),c}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=En(_i),qi=re({},_i,{view:0,detail:0}),px=En(qi),kc,ba,xo,yl=re({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ki,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==xo&&(xo&&o.type==="mousemove"?(kc=o.screenX-xo.screenX,ba=o.screenY-xo.screenY):ba=kc=0,xo=o),kc)},movementY:function(o){return"movementY"in o?o.movementY:ba}}),Cc=En(yl),lu=re({},yl,{dataTransfer:0}),Am=En(lu),Tc=re({},qi,{relatedTarget:0}),Ec=En(Tc),Im=re({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),_a=En(Im),Rm=re({},_i,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Pm=En(Rm),Lm=re({},_i,{data:0}),cu=En(Lm),Ac={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mm(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Dm[o])?!!c[o]:!1}function Ki(){return Mm}var f=re({},qi,{key:function(o){if(o.key){var c=Ac[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Sc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rr[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ki,charCode:function(o){return o.type==="keypress"?Sc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Sc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),P=En(f),O=re({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G=En(O),de=re({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ki}),ge=En(de),ze=re({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),ps=En(ze),cn=re({},yl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ns=En(cn),gn=[9,13,27,32],Zs=d&&"CompositionEvent"in window,ei=null;d&&"documentMode"in document&&(ei=document.documentMode);var $r=d&&"TextEvent"in window&&!ei,vl=d&&(!Zs||ei&&8<ei&&11>=ei),Ic=" ",y_=!1;function v_(o,c){switch(o){case"keyup":return gn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Rc=!1;function $I(o,c){switch(o){case"compositionend":return b_(c);case"keypress":return c.which!==32?null:(y_=!0,Ic);case"textInput":return o=c.data,o===Ic&&y_?null:o;default:return null}}function OI(o,c){if(Rc)return o==="compositionend"||!Zs&&v_(o,c)?(o=au(),gr=jc=Br=null,Rc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return vl&&c.locale!=="ko"?null:c.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function __(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!VI[o.type]:c==="textarea"}function w_(o,c,p,x){ts(x),c=Vm(c,"onChange"),0<c.length&&(p=new Nc("onChange","change",null,p,x),o.push({event:p,listeners:c}))}var du=null,uu=null;function UI(o){O_(o,0)}function Fm(o){var c=Fc(o);if(ye(c))return o}function zI(o,c){if(o==="change")return c}var j_=!1;if(d){var fx;if(d){var gx="oninput"in document;if(!gx){var S_=document.createElement("div");S_.setAttribute("oninput","return;"),gx=typeof S_.oninput=="function"}fx=gx}else fx=!1;j_=fx&&(!document.documentMode||9<document.documentMode)}function N_(){du&&(du.detachEvent("onpropertychange",k_),uu=du=null)}function k_(o){if(o.propertyName==="value"&&Fm(uu)){var c=[];w_(c,uu,o,Ve(o)),Vi(UI,c)}}function HI(o,c,p){o==="focusin"?(N_(),du=c,uu=p,du.attachEvent("onpropertychange",k_)):o==="focusout"&&N_()}function GI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Fm(uu)}function WI(o,c){if(o==="click")return Fm(c)}function qI(o,c){if(o==="input"||o==="change")return Fm(c)}function KI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var wi=typeof Object.is=="function"?Object.is:KI;function hu(o,c){if(wi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),x=Object.keys(c);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var j=p[x];if(!u.call(c,j)||!wi(o[j],c[j]))return!1}return!0}function C_(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function T_(o,c){var p=C_(o);o=0;for(var x;p;){if(p.nodeType===3){if(x=o+p.textContent.length,o<=c&&x>=c)return{node:p,offset:c-o};o=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=C_(p)}}function E_(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?E_(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function A_(){for(var o=window,c=Ie();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch(x){p=!1}if(p)o=c.contentWindow;else break;c=Ie(o.document)}return c}function xx(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function QI(o){var c=A_(),p=o.focusedElem,x=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&E_(p.ownerDocument.documentElement,p)){if(x!==null&&xx(p)){if(c=x.start,o=x.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=p.textContent.length,L=Math.min(x.start,j);x=x.end===void 0?L:Math.min(x.end,j),!o.extend&&L>x&&(j=x,x=L,L=j),j=T_(p,L);var V=T_(p,x);j&&V&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==V.node||o.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),L>x?(o.addRange(c),o.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var XI=d&&"documentMode"in document&&11>=document.documentMode,Pc=null,yx=null,mu=null,vx=!1;function I_(o,c,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;vx||Pc==null||Pc!==Ie(x)||(x=Pc,"selectionStart"in x&&xx(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),mu&&hu(mu,x)||(mu=x,x=Vm(yx,"onSelect"),0<x.length&&(c=new Nc("onSelect","select",null,c,p),o.push({event:c,listeners:x}),c.target=Pc)))}function Bm(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Lc={animationend:Bm("Animation","AnimationEnd"),animationiteration:Bm("Animation","AnimationIteration"),animationstart:Bm("Animation","AnimationStart"),transitionend:Bm("Transition","TransitionEnd")},bx={},R_={};d&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function $m(o){if(bx[o])return bx[o];if(!Lc[o])return o;var c=Lc[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in R_)return bx[o]=c[p];return o}var P_=$m("animationend"),L_=$m("animationiteration"),D_=$m("animationstart"),M_=$m("transitionend"),F_=new Map,B_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yo(o,c){F_.set(o,c),a(c,[o])}for(var _x=0;_x<B_.length;_x++){var wx=B_[_x],YI=wx.toLowerCase(),JI=wx[0].toUpperCase()+wx.slice(1);yo(YI,"on"+JI)}yo(P_,"onAnimationEnd"),yo(L_,"onAnimationIteration"),yo(D_,"onAnimationStart"),yo("dblclick","onDoubleClick"),yo("focusin","onFocus"),yo("focusout","onBlur"),yo(M_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZI=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function $_(o,c,p){var x=o.type||"unknown-event";o.currentTarget=p,Dr(x,c,void 0,o),o.currentTarget=null}function O_(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var x=o[p],j=x.event;x=x.listeners;e:{var L=void 0;if(c)for(var V=x.length-1;0<=V;V--){var Q=x[V],Z=Q.instance,pe=Q.currentTarget;if(Q=Q.listener,Z!==L&&j.isPropagationStopped())break e;$_(j,Q,pe),L=Z}else for(V=0;V<x.length;V++){if(Q=x[V],Z=Q.instance,pe=Q.currentTarget,Q=Q.listener,Z!==L&&j.isPropagationStopped())break e;$_(j,Q,pe),L=Z}}}if(kn)throw o=ss,kn=!1,ss=null,o}function Ss(o,c){var p=c[Ax];p===void 0&&(p=c[Ax]=new Set);var x=o+"__bubble";p.has(x)||(V_(c,o,2,!1),p.add(x))}function jx(o,c,p){var x=0;c&&(x|=4),V_(p,o,x,c)}var Om="_reactListening"+Math.random().toString(36).slice(2);function fu(o){if(!o[Om]){o[Om]=!0,r.forEach(function(p){p!=="selectionchange"&&(ZI.has(p)||jx(p,!1,o),jx(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Om]||(c[Om]=!0,jx("selectionchange",!1,c))}}function V_(o,c,p,x){switch(iu(c)){case 1:var j=Ts;break;case 4:j=mx;break;default:j=ru}p=j.bind(null,c,p,o),j=void 0,!tr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),x?j!==void 0?o.addEventListener(c,p,{capture:!0,passive:j}):o.addEventListener(c,p,!0):j!==void 0?o.addEventListener(c,p,{passive:j}):o.addEventListener(c,p,!1)}function Sx(o,c,p,x,j){var L=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var V=x.tag;if(V===3||V===4){var Q=x.stateNode.containerInfo;if(Q===j||Q.nodeType===8&&Q.parentNode===j)break;if(V===4)for(V=x.return;V!==null;){var Z=V.tag;if((Z===3||Z===4)&&(Z=V.stateNode.containerInfo,Z===j||Z.nodeType===8&&Z.parentNode===j))return;V=V.return}for(;Q!==null;){if(V=bl(Q),V===null)return;if(Z=V.tag,Z===5||Z===6){x=L=V;continue e}Q=Q.parentNode}}x=x.return}Vi(function(){var pe=L,ke=Ve(p),Re=[];e:{var Ne=F_.get(o);if(Ne!==void 0){var Xe=Nc,st=o;switch(o){case"keypress":if(Sc(p)===0)break e;case"keydown":case"keyup":Xe=P;break;case"focusin":st="focus",Xe=Ec;break;case"focusout":st="blur",Xe=Ec;break;case"beforeblur":case"afterblur":Xe=Ec;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=Am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=ge;break;case P_:case L_:case D_:Xe=_a;break;case M_:Xe=ps;break;case"scroll":Xe=px;break;case"wheel":Xe=ns;break;case"copy":case"cut":case"paste":Xe=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=G}var rt=(c&4)!==0,Ks=!rt&&o==="scroll",ue=rt?Ne!==null?Ne+"Capture":null:Ne;rt=[];for(var ne=pe,he;ne!==null;){he=ne;var Me=he.stateNode;if(he.tag===5&&Me!==null&&(he=Me,ue!==null&&(Me=us(ne,ue),Me!=null&&rt.push(gu(ne,Me,he)))),Ks)break;ne=ne.return}0<rt.length&&(Ne=new Xe(Ne,st,null,p,ke),Re.push({event:Ne,listeners:rt}))}}if((c&7)===0){e:{if(Ne=o==="mouseover"||o==="pointerover",Xe=o==="mouseout"||o==="pointerout",Ne&&p!==J&&(st=p.relatedTarget||p.fromElement)&&(bl(st)||st[wa]))break e;if((Xe||Ne)&&(Ne=ke.window===ke?ke:(Ne=ke.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Xe?(st=p.relatedTarget||p.toElement,Xe=pe,st=st?bl(st):null,st!==null&&(Ks=Vt(st),st!==Ks||st.tag!==5&&st.tag!==6)&&(st=null)):(Xe=null,st=pe),Xe!==st)){if(rt=Cc,Me="onMouseLeave",ue="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(rt=G,Me="onPointerLeave",ue="onPointerEnter",ne="pointer"),Ks=Xe==null?Ne:Fc(Xe),he=st==null?Ne:Fc(st),Ne=new rt(Me,ne+"leave",Xe,p,ke),Ne.target=Ks,Ne.relatedTarget=he,Me=null,bl(ke)===pe&&(rt=new rt(ue,ne+"enter",st,p,ke),rt.target=he,rt.relatedTarget=Ks,Me=rt),Ks=Me,Xe&&st)t:{for(rt=Xe,ue=st,ne=0,he=rt;he;he=Dc(he))ne++;for(he=0,Me=ue;Me;Me=Dc(Me))he++;for(;0<ne-he;)rt=Dc(rt),ne--;for(;0<he-ne;)ue=Dc(ue),he--;for(;ne--;){if(rt===ue||ue!==null&&rt===ue.alternate)break t;rt=Dc(rt),ue=Dc(ue)}rt=null}else rt=null;Xe!==null&&U_(Re,Ne,Xe,rt,!1),st!==null&&Ks!==null&&U_(Re,Ks,st,rt,!0)}}e:{if(Ne=pe?Fc(pe):window,Xe=Ne.nodeName&&Ne.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ne.type==="file")var ct=zI;else if(__(Ne))if(j_)ct=qI;else{ct=GI;var yt=HI}else(Xe=Ne.nodeName)&&Xe.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(ct=WI);if(ct&&(ct=ct(o,pe))){w_(Re,ct,p,ke);break e}yt&&yt(o,Ne,pe),o==="focusout"&&(yt=Ne._wrapperState)&&yt.controlled&&Ne.type==="number"&&$t(Ne,"number",Ne.value)}switch(yt=pe?Fc(pe):window,o){case"focusin":(__(yt)||yt.contentEditable==="true")&&(Pc=yt,yx=pe,mu=null);break;case"focusout":mu=yx=Pc=null;break;case"mousedown":vx=!0;break;case"contextmenu":case"mouseup":case"dragend":vx=!1,I_(Re,p,ke);break;case"selectionchange":if(XI)break;case"keydown":case"keyup":I_(Re,p,ke)}var vt;if(Zs)e:{switch(o){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else Rc?v_(o,p)&&(Nt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Nt="onCompositionStart");Nt&&(vl&&p.locale!=="ko"&&(Rc||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Rc&&(vt=au()):(Br=ke,jc="value"in Br?Br.value:Br.textContent,Rc=!0)),yt=Vm(pe,Nt),0<yt.length&&(Nt=new cu(Nt,o,null,p,ke),Re.push({event:Nt,listeners:yt}),vt?Nt.data=vt:(vt=b_(p),vt!==null&&(Nt.data=vt)))),(vt=$r?$I(o,p):OI(o,p))&&(pe=Vm(pe,"onBeforeInput"),0<pe.length&&(ke=new cu("onBeforeInput","beforeinput",null,p,ke),Re.push({event:ke,listeners:pe}),ke.data=vt))}O_(Re,c)})}function gu(o,c,p){return{instance:o,listener:c,currentTarget:p}}function Vm(o,c){for(var p=c+"Capture",x=[];o!==null;){var j=o,L=j.stateNode;j.tag===5&&L!==null&&(j=L,L=us(o,p),L!=null&&x.unshift(gu(o,L,j)),L=us(o,c),L!=null&&x.push(gu(o,L,j))),o=o.return}return x}function Dc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function U_(o,c,p,x,j){for(var L=c._reactName,V=[];p!==null&&p!==x;){var Q=p,Z=Q.alternate,pe=Q.stateNode;if(Z!==null&&Z===x)break;Q.tag===5&&pe!==null&&(Q=pe,j?(Z=us(p,L),Z!=null&&V.unshift(gu(p,Z,Q))):j||(Z=us(p,L),Z!=null&&V.push(gu(p,Z,Q)))),p=p.return}V.length!==0&&o.push({event:c,listeners:V})}var e4=/\r\n?/g,t4=/\u0000|\uFFFD/g;function z_(o){return(typeof o=="string"?o:""+o).replace(e4,`
`).replace(t4,"")}function Um(o,c,p){if(c=z_(c),z_(o)!==c&&p)throw Error(s(425))}function zm(){}var Nx=null,kx=null;function Cx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Tx=typeof setTimeout=="function"?setTimeout:void 0,s4=typeof clearTimeout=="function"?clearTimeout:void 0,H_=typeof Promise=="function"?Promise:void 0,n4=typeof queueMicrotask=="function"?queueMicrotask:typeof H_!="undefined"?function(o){return H_.resolve(null).then(o).catch(r4)}:Tx;function r4(o){setTimeout(function(){throw o})}function Ex(o,c){var p=c,x=0;do{var j=p.nextSibling;if(o.removeChild(p),j&&j.nodeType===8)if(p=j.data,p==="/$"){if(x===0){o.removeChild(j),bi(c);return}x--}else p!=="$"&&p!=="$?"&&p!=="$!"||x++;p=j}while(p);bi(c)}function vo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function G_(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var Mc=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Mc,xu="__reactProps$"+Mc,wa="__reactContainer$"+Mc,Ax="__reactEvents$"+Mc,i4="__reactListeners$"+Mc,a4="__reactHandles$"+Mc;function bl(o){var c=o[Qi];if(c)return c;for(var p=o.parentNode;p;){if(c=p[wa]||p[Qi]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=G_(o);o!==null;){if(p=o[Qi])return p;o=G_(o)}return c}o=p,p=o.parentNode}return null}function yu(o){return o=o[Qi]||o[wa],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Fc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(s(33))}function Hm(o){return o[xu]||null}var Ix=[],Bc=-1;function bo(o){return{current:o}}function Ns(o){0>Bc||(o.current=Ix[Bc],Ix[Bc]=null,Bc--)}function bs(o,c){Bc++,Ix[Bc]=o.current,o.current=c}var _o={},Gn=bo(_o),xr=bo(!1),_l=_o;function $c(o,c){var p=o.type.contextTypes;if(!p)return _o;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var j={},L;for(L in p)j[L]=c[L];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function yr(o){return o=o.childContextTypes,o!=null}function Gm(){Ns(xr),Ns(Gn)}function W_(o,c,p){if(Gn.current!==_o)throw Error(s(168));bs(Gn,c),bs(xr,p)}function q_(o,c,p){var x=o.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return p;x=x.getChildContext();for(var j in x)if(!(j in c))throw Error(s(108,Pe(o)||"Unknown",j));return re({},p,x)}function Wm(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||_o,_l=Gn.current,bs(Gn,o),bs(xr,xr.current),!0}function K_(o,c,p){var x=o.stateNode;if(!x)throw Error(s(169));p?(o=q_(o,c,_l),x.__reactInternalMemoizedMergedChildContext=o,Ns(xr),Ns(Gn),bs(Gn,o)):Ns(xr),bs(xr,p)}var ja=null,qm=!1,Rx=!1;function Q_(o){ja===null?ja=[o]:ja.push(o)}function o4(o){qm=!0,Q_(o)}function wo(){if(!Rx&&ja!==null){Rx=!0;var o=0,c=Yt;try{var p=ja;for(Yt=1;o<p.length;o++){var x=p[o];do x=x(!0);while(x!==null)}ja=null,qm=!1}catch(j){throw ja!==null&&(ja=ja.slice(o+1)),ga(zi,wo),j}finally{Yt=c,Rx=!1}}return null}var Oc=[],Vc=0,Km=null,Qm=0,ti=[],si=0,wl=null,Sa=1,Na="";function jl(o,c){Oc[Vc++]=Qm,Oc[Vc++]=Km,Km=o,Qm=c}function X_(o,c,p){ti[si++]=Sa,ti[si++]=Na,ti[si++]=wl,wl=o;var x=Sa;o=Na;var j=32-nr(x)-1;x&=~(1<<j),p+=1;var L=32-nr(c)+j;if(30<L){var V=j-j%5;L=(x&(1<<V)-1).toString(32),x>>=V,j-=V,Sa=1<<32-nr(c)+j|p<<j|x,Na=L+o}else Sa=1<<L|p<<j|x,Na=o}function Px(o){o.return!==null&&(jl(o,1),X_(o,1,0))}function Lx(o){for(;o===Km;)Km=Oc[--Vc],Oc[Vc]=null,Qm=Oc[--Vc],Oc[Vc]=null;for(;o===wl;)wl=ti[--si],ti[si]=null,Na=ti[--si],ti[si]=null,Sa=ti[--si],ti[si]=null}var Or=null,Vr=null,Es=!1,ji=null;function Y_(o,c){var p=ai(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function J_(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Or=o,Vr=vo(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Or=o,Vr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=wl!==null?{id:Sa,overflow:Na}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=ai(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,Or=o,Vr=null,!0):!1;default:return!1}}function Dx(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Mx(o){if(Es){var c=Vr;if(c){var p=c;if(!J_(o,c)){if(Dx(o))throw Error(s(418));c=vo(p.nextSibling);var x=Or;c&&J_(o,c)?Y_(x,p):(o.flags=o.flags&-4097|2,Es=!1,Or=o)}}else{if(Dx(o))throw Error(s(418));o.flags=o.flags&-4097|2,Es=!1,Or=o}}}function Z_(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Or=o}function Xm(o){if(o!==Or)return!1;if(!Es)return Z_(o),Es=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Cx(o.type,o.memoizedProps)),c&&(c=Vr)){if(Dx(o))throw ew(),Error(s(418));for(;c;)Y_(o,c),c=vo(c.nextSibling)}if(Z_(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){Vr=vo(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}Vr=null}}else Vr=Or?vo(o.stateNode.nextSibling):null;return!0}function ew(){for(var o=Vr;o;)o=vo(o.nextSibling)}function Uc(){Vr=Or=null,Es=!1}function Fx(o){ji===null?ji=[o]:ji.push(o)}var l4=y.ReactCurrentBatchConfig;function vu(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(s(309));var x=p.stateNode}if(!x)throw Error(s(147,o));var j=x,L=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(V){var Q=j.refs;V===null?delete Q[L]:Q[L]=V},c._stringRef=L,c)}if(typeof o!="string")throw Error(s(284));if(!p._owner)throw Error(s(290,o))}return o}function Ym(o,c){throw o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function tw(o){var c=o._init;return c(o._payload)}function sw(o){function c(ue,ne){if(o){var he=ue.deletions;he===null?(ue.deletions=[ne],ue.flags|=16):he.push(ne)}}function p(ue,ne){if(!o)return null;for(;ne!==null;)c(ue,ne),ne=ne.sibling;return null}function x(ue,ne){for(ue=new Map;ne!==null;)ne.key!==null?ue.set(ne.key,ne):ue.set(ne.index,ne),ne=ne.sibling;return ue}function j(ue,ne){return ue=Ao(ue,ne),ue.index=0,ue.sibling=null,ue}function L(ue,ne,he){return ue.index=he,o?(he=ue.alternate,he!==null?(he=he.index,he<ne?(ue.flags|=2,ne):he):(ue.flags|=2,ne)):(ue.flags|=1048576,ne)}function V(ue){return o&&ue.alternate===null&&(ue.flags|=2),ue}function Q(ue,ne,he,Me){return ne===null||ne.tag!==6?(ne=Ty(he,ue.mode,Me),ne.return=ue,ne):(ne=j(ne,he),ne.return=ue,ne)}function Z(ue,ne,he,Me){var ct=he.type;return ct===k?ke(ue,ne,he.props.children,Me,he.key):ne!==null&&(ne.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===W&&tw(ct)===ne.type)?(Me=j(ne,he.props),Me.ref=vu(ue,ne,he),Me.return=ue,Me):(Me=_p(he.type,he.key,he.props,null,ue.mode,Me),Me.ref=vu(ue,ne,he),Me.return=ue,Me)}function pe(ue,ne,he,Me){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?(ne=Ey(he,ue.mode,Me),ne.return=ue,ne):(ne=j(ne,he.children||[]),ne.return=ue,ne)}function ke(ue,ne,he,Me,ct){return ne===null||ne.tag!==7?(ne=Il(he,ue.mode,Me,ct),ne.return=ue,ne):(ne=j(ne,he),ne.return=ue,ne)}function Re(ue,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Ty(""+ne,ue.mode,he),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return he=_p(ne.type,ne.key,ne.props,null,ue.mode,he),he.ref=vu(ue,null,ne),he.return=ue,he;case M:return ne=Ey(ne,ue.mode,he),ne.return=ue,ne;case W:var Me=ne._init;return Re(ue,Me(ne._payload),he)}if(je(ne)||se(ne))return ne=Il(ne,ue.mode,he,null),ne.return=ue,ne;Ym(ue,ne)}return null}function Ne(ue,ne,he,Me){var ct=ne!==null?ne.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return ct!==null?null:Q(ue,ne,""+he,Me);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return he.key===ct?Z(ue,ne,he,Me):null;case M:return he.key===ct?pe(ue,ne,he,Me):null;case W:return ct=he._init,Ne(ue,ne,ct(he._payload),Me)}if(je(he)||se(he))return ct!==null?null:ke(ue,ne,he,Me,null);Ym(ue,he)}return null}function Xe(ue,ne,he,Me,ct){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ue=ue.get(he)||null,Q(ne,ue,""+Me,ct);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case w:return ue=ue.get(Me.key===null?he:Me.key)||null,Z(ne,ue,Me,ct);case M:return ue=ue.get(Me.key===null?he:Me.key)||null,pe(ne,ue,Me,ct);case W:var yt=Me._init;return Xe(ue,ne,he,yt(Me._payload),ct)}if(je(Me)||se(Me))return ue=ue.get(he)||null,ke(ne,ue,Me,ct,null);Ym(ne,Me)}return null}function st(ue,ne,he,Me){for(var ct=null,yt=null,vt=ne,Nt=ne=0,vn=null;vt!==null&&Nt<he.length;Nt++){vt.index>Nt?(vn=vt,vt=null):vn=vt.sibling;var os=Ne(ue,vt,he[Nt],Me);if(os===null){vt===null&&(vt=vn);break}o&&vt&&os.alternate===null&&c(ue,vt),ne=L(os,ne,Nt),yt===null?ct=os:yt.sibling=os,yt=os,vt=vn}if(Nt===he.length)return p(ue,vt),Es&&jl(ue,Nt),ct;if(vt===null){for(;Nt<he.length;Nt++)vt=Re(ue,he[Nt],Me),vt!==null&&(ne=L(vt,ne,Nt),yt===null?ct=vt:yt.sibling=vt,yt=vt);return Es&&jl(ue,Nt),ct}for(vt=x(ue,vt);Nt<he.length;Nt++)vn=Xe(vt,ue,Nt,he[Nt],Me),vn!==null&&(o&&vn.alternate!==null&&vt.delete(vn.key===null?Nt:vn.key),ne=L(vn,ne,Nt),yt===null?ct=vn:yt.sibling=vn,yt=vn);return o&&vt.forEach(function(Io){return c(ue,Io)}),Es&&jl(ue,Nt),ct}function rt(ue,ne,he,Me){var ct=se(he);if(typeof ct!="function")throw Error(s(150));if(he=ct.call(he),he==null)throw Error(s(151));for(var yt=ct=null,vt=ne,Nt=ne=0,vn=null,os=he.next();vt!==null&&!os.done;Nt++,os=he.next()){vt.index>Nt?(vn=vt,vt=null):vn=vt.sibling;var Io=Ne(ue,vt,os.value,Me);if(Io===null){vt===null&&(vt=vn);break}o&&vt&&Io.alternate===null&&c(ue,vt),ne=L(Io,ne,Nt),yt===null?ct=Io:yt.sibling=Io,yt=Io,vt=vn}if(os.done)return p(ue,vt),Es&&jl(ue,Nt),ct;if(vt===null){for(;!os.done;Nt++,os=he.next())os=Re(ue,os.value,Me),os!==null&&(ne=L(os,ne,Nt),yt===null?ct=os:yt.sibling=os,yt=os);return Es&&jl(ue,Nt),ct}for(vt=x(ue,vt);!os.done;Nt++,os=he.next())os=Xe(vt,ue,Nt,os.value,Me),os!==null&&(o&&os.alternate!==null&&vt.delete(os.key===null?Nt:os.key),ne=L(os,ne,Nt),yt===null?ct=os:yt.sibling=os,yt=os);return o&&vt.forEach(function(V4){return c(ue,V4)}),Es&&jl(ue,Nt),ct}function Ks(ue,ne,he,Me){if(typeof he=="object"&&he!==null&&he.type===k&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case w:e:{for(var ct=he.key,yt=ne;yt!==null;){if(yt.key===ct){if(ct=he.type,ct===k){if(yt.tag===7){p(ue,yt.sibling),ne=j(yt,he.props.children),ne.return=ue,ue=ne;break e}}else if(yt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===W&&tw(ct)===yt.type){p(ue,yt.sibling),ne=j(yt,he.props),ne.ref=vu(ue,yt,he),ne.return=ue,ue=ne;break e}p(ue,yt);break}else c(ue,yt);yt=yt.sibling}he.type===k?(ne=Il(he.props.children,ue.mode,Me,he.key),ne.return=ue,ue=ne):(Me=_p(he.type,he.key,he.props,null,ue.mode,Me),Me.ref=vu(ue,ne,he),Me.return=ue,ue=Me)}return V(ue);case M:e:{for(yt=he.key;ne!==null;){if(ne.key===yt)if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){p(ue,ne.sibling),ne=j(ne,he.children||[]),ne.return=ue,ue=ne;break e}else{p(ue,ne);break}else c(ue,ne);ne=ne.sibling}ne=Ey(he,ue.mode,Me),ne.return=ue,ue=ne}return V(ue);case W:return yt=he._init,Ks(ue,ne,yt(he._payload),Me)}if(je(he))return st(ue,ne,he,Me);if(se(he))return rt(ue,ne,he,Me);Ym(ue,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ne!==null&&ne.tag===6?(p(ue,ne.sibling),ne=j(ne,he),ne.return=ue,ue=ne):(p(ue,ne),ne=Ty(he,ue.mode,Me),ne.return=ue,ue=ne),V(ue)):p(ue,ne)}return Ks}var zc=sw(!0),nw=sw(!1),Jm=bo(null),Zm=null,Hc=null,Bx=null;function $x(){Bx=Hc=Zm=null}function Ox(o){var c=Jm.current;Ns(Jm),o._currentValue=c}function Vx(o,c,p){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===p)break;o=o.return}}function Gc(o,c){Zm=o,Bx=Hc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(vr=!0),o.firstContext=null)}function ni(o){var c=o._currentValue;if(Bx!==o)if(o={context:o,memoizedValue:c,next:null},Hc===null){if(Zm===null)throw Error(s(308));Hc=o,Zm.dependencies={lanes:0,firstContext:o}}else Hc=Hc.next=o;return c}var Sl=null;function Ux(o){Sl===null?Sl=[o]:Sl.push(o)}function rw(o,c,p,x){var j=c.interleaved;return j===null?(p.next=p,Ux(c)):(p.next=j.next,j.next=p),c.interleaved=p,ka(o,x)}function ka(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var jo=!1;function zx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iw(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ca(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function So(o,c,p){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(is&2)!==0){var j=x.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),x.pending=c,ka(o,p)}return j=x.interleaved,j===null?(c.next=c,Ux(x)):(c.next=j.next,j.next=c),x.interleaved=c,ka(o,p)}function ep(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var x=c.lanes;x&=o.pendingLanes,p|=x,c.lanes=p,mo(o,p)}}function aw(o,c){var p=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var j=null,L=null;if(p=p.firstBaseUpdate,p!==null){do{var V={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};L===null?j=L=V:L=L.next=V,p=p.next}while(p!==null);L===null?j=L=c:L=L.next=c}else j=L=c;p={baseState:x.baseState,firstBaseUpdate:j,lastBaseUpdate:L,shared:x.shared,effects:x.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function tp(o,c,p,x){var j=o.updateQueue;jo=!1;var L=j.firstBaseUpdate,V=j.lastBaseUpdate,Q=j.shared.pending;if(Q!==null){j.shared.pending=null;var Z=Q,pe=Z.next;Z.next=null,V===null?L=pe:V.next=pe,V=Z;var ke=o.alternate;ke!==null&&(ke=ke.updateQueue,Q=ke.lastBaseUpdate,Q!==V&&(Q===null?ke.firstBaseUpdate=pe:Q.next=pe,ke.lastBaseUpdate=Z))}if(L!==null){var Re=j.baseState;V=0,ke=pe=Z=null,Q=L;do{var Ne=Q.lane,Xe=Q.eventTime;if((x&Ne)===Ne){ke!==null&&(ke=ke.next={eventTime:Xe,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var st=o,rt=Q;switch(Ne=c,Xe=p,rt.tag){case 1:if(st=rt.payload,typeof st=="function"){Re=st.call(Xe,Re,Ne);break e}Re=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=rt.payload,Ne=typeof st=="function"?st.call(Xe,Re,Ne):st,Ne==null)break e;Re=re({},Re,Ne);break e;case 2:jo=!0}}Q.callback!==null&&Q.lane!==0&&(o.flags|=64,Ne=j.effects,Ne===null?j.effects=[Q]:Ne.push(Q))}else Xe={eventTime:Xe,lane:Ne,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ke===null?(pe=ke=Xe,Z=Re):ke=ke.next=Xe,V|=Ne;if(Q=Q.next,Q===null){if(Q=j.shared.pending,Q===null)break;Ne=Q,Q=Ne.next,Ne.next=null,j.lastBaseUpdate=Ne,j.shared.pending=null}}while(!0);if(ke===null&&(Z=Re),j.baseState=Z,j.firstBaseUpdate=pe,j.lastBaseUpdate=ke,c=j.shared.interleaved,c!==null){j=c;do V|=j.lane,j=j.next;while(j!==c)}else L===null&&(j.shared.lanes=0);Cl|=V,o.lanes=V,o.memoizedState=Re}}function ow(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var x=o[c],j=x.callback;if(j!==null){if(x.callback=null,x=p,typeof j!="function")throw Error(s(191,j));j.call(x)}}}var bu={},Xi=bo(bu),_u=bo(bu),wu=bo(bu);function Nl(o){if(o===bu)throw Error(s(174));return o}function Hx(o,c){switch(bs(wu,c),bs(_u,o),bs(Xi,bu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:De(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=De(c,o)}Ns(Xi),bs(Xi,c)}function Wc(){Ns(Xi),Ns(_u),Ns(wu)}function lw(o){Nl(wu.current);var c=Nl(Xi.current),p=De(c,o.type);c!==p&&(bs(_u,o),bs(Xi,p))}function Gx(o){_u.current===o&&(Ns(Xi),Ns(_u))}var Ls=bo(0);function sp(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Wx=[];function qx(){for(var o=0;o<Wx.length;o++)Wx[o]._workInProgressVersionPrimary=null;Wx.length=0}var np=y.ReactCurrentDispatcher,Kx=y.ReactCurrentBatchConfig,kl=0,Ds=null,dn=null,xn=null,rp=!1,ju=!1,Su=0,c4=0;function Wn(){throw Error(s(321))}function Qx(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!wi(o[p],c[p]))return!1;return!0}function Xx(o,c,p,x,j,L){if(kl=L,Ds=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,np.current=o===null||o.memoizedState===null?m4:p4,o=p(x,j),ju){L=0;do{if(ju=!1,Su=0,25<=L)throw Error(s(301));L+=1,xn=dn=null,c.updateQueue=null,np.current=f4,o=p(x,j)}while(ju)}if(np.current=op,c=dn!==null&&dn.next!==null,kl=0,xn=dn=Ds=null,rp=!1,c)throw Error(s(300));return o}function Yx(){var o=Su!==0;return Su=0,o}function Yi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Ds.memoizedState=xn=o:xn=xn.next=o,xn}function ri(){if(dn===null){var o=Ds.alternate;o=o!==null?o.memoizedState:null}else o=dn.next;var c=xn===null?Ds.memoizedState:xn.next;if(c!==null)xn=c,dn=o;else{if(o===null)throw Error(s(310));dn=o,o={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},xn===null?Ds.memoizedState=xn=o:xn=xn.next=o}return xn}function Nu(o,c){return typeof c=="function"?c(o):c}function Jx(o){var c=ri(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var x=dn,j=x.baseQueue,L=p.pending;if(L!==null){if(j!==null){var V=j.next;j.next=L.next,L.next=V}x.baseQueue=j=L,p.pending=null}if(j!==null){L=j.next,x=x.baseState;var Q=V=null,Z=null,pe=L;do{var ke=pe.lane;if((kl&ke)===ke)Z!==null&&(Z=Z.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),x=pe.hasEagerState?pe.eagerState:o(x,pe.action);else{var Re={lane:ke,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};Z===null?(Q=Z=Re,V=x):Z=Z.next=Re,Ds.lanes|=ke,Cl|=ke}pe=pe.next}while(pe!==null&&pe!==L);Z===null?V=x:Z.next=Q,wi(x,c.memoizedState)||(vr=!0),c.memoizedState=x,c.baseState=V,c.baseQueue=Z,p.lastRenderedState=x}if(o=p.interleaved,o!==null){j=o;do L=j.lane,Ds.lanes|=L,Cl|=L,j=j.next;while(j!==o)}else j===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Zx(o){var c=ri(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var x=p.dispatch,j=p.pending,L=c.memoizedState;if(j!==null){p.pending=null;var V=j=j.next;do L=o(L,V.action),V=V.next;while(V!==j);wi(L,c.memoizedState)||(vr=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),p.lastRenderedState=L}return[L,x]}function cw(){}function dw(o,c){var p=Ds,x=ri(),j=c(),L=!wi(x.memoizedState,j);if(L&&(x.memoizedState=j,vr=!0),x=x.queue,ey(mw.bind(null,p,x,o),[o]),x.getSnapshot!==c||L||xn!==null&&xn.memoizedState.tag&1){if(p.flags|=2048,ku(9,hw.bind(null,p,x,j,c),void 0,null),yn===null)throw Error(s(349));(kl&30)!==0||uw(p,c,j)}return j}function uw(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=Ds.updateQueue,c===null?(c={lastEffect:null,stores:null},Ds.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function hw(o,c,p,x){c.value=p,c.getSnapshot=x,pw(c)&&fw(o)}function mw(o,c,p){return p(function(){pw(c)&&fw(o)})}function pw(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!wi(o,p)}catch(x){return!0}}function fw(o){var c=ka(o,1);c!==null&&Ci(c,o,1,-1)}function gw(o){var c=Yi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:o},c.queue=o,o=o.dispatch=h4.bind(null,Ds,o),[c.memoizedState,o]}function ku(o,c,p,x){return o={tag:o,create:c,destroy:p,deps:x,next:null},c=Ds.updateQueue,c===null?(c={lastEffect:null,stores:null},Ds.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(x=p.next,p.next=o,o.next=x,c.lastEffect=o)),o}function xw(){return ri().memoizedState}function ip(o,c,p,x){var j=Yi();Ds.flags|=o,j.memoizedState=ku(1|c,p,void 0,x===void 0?null:x)}function ap(o,c,p,x){var j=ri();x=x===void 0?null:x;var L=void 0;if(dn!==null){var V=dn.memoizedState;if(L=V.destroy,x!==null&&Qx(x,V.deps)){j.memoizedState=ku(c,p,L,x);return}}Ds.flags|=o,j.memoizedState=ku(1|c,p,L,x)}function yw(o,c){return ip(8390656,8,o,c)}function ey(o,c){return ap(2048,8,o,c)}function vw(o,c){return ap(4,2,o,c)}function bw(o,c){return ap(4,4,o,c)}function _w(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function ww(o,c,p){return p=p!=null?p.concat([o]):null,ap(4,4,_w.bind(null,c,o),p)}function ty(){}function jw(o,c){var p=ri();c=c===void 0?null:c;var x=p.memoizedState;return x!==null&&c!==null&&Qx(c,x[1])?x[0]:(p.memoizedState=[o,c],o)}function Sw(o,c){var p=ri();c=c===void 0?null:c;var x=p.memoizedState;return x!==null&&c!==null&&Qx(c,x[1])?x[0]:(o=o(),p.memoizedState=[o,c],o)}function Nw(o,c,p){return(kl&21)===0?(o.baseState&&(o.baseState=!1,vr=!0),o.memoizedState=p):(wi(p,c)||(p=fl(),Ds.lanes|=p,Cl|=p,o.baseState=!0),c)}function d4(o,c){var p=Yt;Yt=p!==0&&4>p?p:4,o(!0);var x=Kx.transition;Kx.transition={};try{o(!1),c()}finally{Yt=p,Kx.transition=x}}function kw(){return ri().memoizedState}function u4(o,c,p){var x=To(o);if(p={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null},Cw(o))Tw(c,p);else if(p=rw(o,c,p,x),p!==null){var j=ar();Ci(p,o,x,j),Ew(p,c,x)}}function h4(o,c,p){var x=To(o),j={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null};if(Cw(o))Tw(c,j);else{var L=o.alternate;if(o.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var V=c.lastRenderedState,Q=L(V,p);if(j.hasEagerState=!0,j.eagerState=Q,wi(Q,V)){var Z=c.interleaved;Z===null?(j.next=j,Ux(c)):(j.next=Z.next,Z.next=j),c.interleaved=j;return}}catch(pe){}finally{}p=rw(o,c,j,x),p!==null&&(j=ar(),Ci(p,o,x,j),Ew(p,c,x))}}function Cw(o){var c=o.alternate;return o===Ds||c!==null&&c===Ds}function Tw(o,c){ju=rp=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function Ew(o,c,p){if((p&4194240)!==0){var x=c.lanes;x&=o.pendingLanes,p|=x,c.lanes=p,mo(o,p)}}var op={readContext:ni,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},m4={readContext:ni,useCallback:function(o,c){return Yi().memoizedState=[o,c===void 0?null:c],o},useContext:ni,useEffect:yw,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,ip(4194308,4,_w.bind(null,c,o),p)},useLayoutEffect:function(o,c){return ip(4194308,4,o,c)},useInsertionEffect:function(o,c){return ip(4,2,o,c)},useMemo:function(o,c){var p=Yi();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var x=Yi();return c=p!==void 0?p(c):c,x.memoizedState=x.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},x.queue=o,o=o.dispatch=u4.bind(null,Ds,o),[x.memoizedState,o]},useRef:function(o){var c=Yi();return o={current:o},c.memoizedState=o},useState:gw,useDebugValue:ty,useDeferredValue:function(o){return Yi().memoizedState=o},useTransition:function(){var o=gw(!1),c=o[0];return o=d4.bind(null,o[1]),Yi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var x=Ds,j=Yi();if(Es){if(p===void 0)throw Error(s(407));p=p()}else{if(p=c(),yn===null)throw Error(s(349));(kl&30)!==0||uw(x,c,p)}j.memoizedState=p;var L={value:p,getSnapshot:c};return j.queue=L,yw(mw.bind(null,x,L,o),[o]),x.flags|=2048,ku(9,hw.bind(null,x,L,p,c),void 0,null),p},useId:function(){var o=Yi(),c=yn.identifierPrefix;if(Es){var p=Na,x=Sa;p=(x&~(1<<32-nr(x)-1)).toString(32)+p,c=":"+c+"R"+p,p=Su++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=c4++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},p4={readContext:ni,useCallback:jw,useContext:ni,useEffect:ey,useImperativeHandle:ww,useInsertionEffect:vw,useLayoutEffect:bw,useMemo:Sw,useReducer:Jx,useRef:xw,useState:function(){return Jx(Nu)},useDebugValue:ty,useDeferredValue:function(o){var c=ri();return Nw(c,dn.memoizedState,o)},useTransition:function(){var o=Jx(Nu)[0],c=ri().memoizedState;return[o,c]},useMutableSource:cw,useSyncExternalStore:dw,useId:kw,unstable_isNewReconciler:!1},f4={readContext:ni,useCallback:jw,useContext:ni,useEffect:ey,useImperativeHandle:ww,useInsertionEffect:vw,useLayoutEffect:bw,useMemo:Sw,useReducer:Zx,useRef:xw,useState:function(){return Zx(Nu)},useDebugValue:ty,useDeferredValue:function(o){var c=ri();return dn===null?c.memoizedState=o:Nw(c,dn.memoizedState,o)},useTransition:function(){var o=Zx(Nu)[0],c=ri().memoizedState;return[o,c]},useMutableSource:cw,useSyncExternalStore:dw,useId:kw,unstable_isNewReconciler:!1};function Si(o,c){if(o&&o.defaultProps){c=re({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function sy(o,c,p,x){c=o.memoizedState,p=p(x,c),p=p==null?c:re({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var lp={isMounted:function(o){return(o=o._reactInternals)?Vt(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var x=ar(),j=To(o),L=Ca(x,j);L.payload=c,p!=null&&(L.callback=p),c=So(o,L,j),c!==null&&(Ci(c,o,j,x),ep(c,o,j))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var x=ar(),j=To(o),L=Ca(x,j);L.tag=1,L.payload=c,p!=null&&(L.callback=p),c=So(o,L,j),c!==null&&(Ci(c,o,j,x),ep(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=ar(),x=To(o),j=Ca(p,x);j.tag=2,c!=null&&(j.callback=c),c=So(o,j,x),c!==null&&(Ci(c,o,x,p),ep(c,o,x))}};function Aw(o,c,p,x,j,L,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,L,V):c.prototype&&c.prototype.isPureReactComponent?!hu(p,x)||!hu(j,L):!0}function Iw(o,c,p){var x=!1,j=_o,L=c.contextType;return typeof L=="object"&&L!==null?L=ni(L):(j=yr(c)?_l:Gn.current,x=c.contextTypes,L=(x=x!=null)?$c(o,j):_o),c=new c(p,L),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=lp,o.stateNode=c,c._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=L),c}function Rw(o,c,p,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,x),c.state!==o&&lp.enqueueReplaceState(c,c.state,null)}function ny(o,c,p,x){var j=o.stateNode;j.props=p,j.state=o.memoizedState,j.refs={},zx(o);var L=c.contextType;typeof L=="object"&&L!==null?j.context=ni(L):(L=yr(c)?_l:Gn.current,j.context=$c(o,L)),j.state=o.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&(sy(o,c,L,p),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&lp.enqueueReplaceState(j,j.state,null),tp(o,p,j,x),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function qc(o,c){try{var p="",x=c;do p+=me(x),x=x.return;while(x);var j=p}catch(L){j=`
Error generating stack: `+L.message+`
`+L.stack}return{value:o,source:c,stack:j,digest:null}}function ry(o,c,p){return{value:o,source:null,stack:p!=null?p:null,digest:c!=null?c:null}}function iy(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var g4=typeof WeakMap=="function"?WeakMap:Map;function Pw(o,c,p){p=Ca(-1,p),p.tag=3,p.payload={element:null};var x=c.value;return p.callback=function(){fp||(fp=!0,by=x),iy(o,c)},p}function Lw(o,c,p){p=Ca(-1,p),p.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var j=c.value;p.payload=function(){return x(j)},p.callback=function(){iy(o,c)}}var L=o.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(p.callback=function(){iy(o,c),typeof x!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),p}function Dw(o,c,p){var x=o.pingCache;if(x===null){x=o.pingCache=new g4;var j=new Set;x.set(c,j)}else j=x.get(c),j===void 0&&(j=new Set,x.set(c,j));j.has(p)||(j.add(p),o=A4.bind(null,o,c,p),c.then(o,o))}function Mw(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Fw(o,c,p,x,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Ca(-1,1),c.tag=2,So(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var x4=y.ReactCurrentOwner,vr=!1;function ir(o,c,p,x){c.child=o===null?nw(c,null,p,x):zc(c,o.child,p,x)}function Bw(o,c,p,x,j){p=p.render;var L=c.ref;return Gc(c,j),x=Xx(o,c,p,x,L,j),p=Yx(),o!==null&&!vr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,Ta(o,c,j)):(Es&&p&&Px(c),c.flags|=1,ir(o,c,x,j),c.child)}function $w(o,c,p,x,j){if(o===null){var L=p.type;return typeof L=="function"&&!Cy(L)&&L.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=L,Ow(o,c,L,x,j)):(o=_p(p.type,null,x,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(L=o.child,(o.lanes&j)===0){var V=L.memoizedProps;if(p=p.compare,p=p!==null?p:hu,p(V,x)&&o.ref===c.ref)return Ta(o,c,j)}return c.flags|=1,o=Ao(L,x),o.ref=c.ref,o.return=c,c.child=o}function Ow(o,c,p,x,j){if(o!==null){var L=o.memoizedProps;if(hu(L,x)&&o.ref===c.ref)if(vr=!1,c.pendingProps=x=L,(o.lanes&j)!==0)(o.flags&131072)!==0&&(vr=!0);else return c.lanes=o.lanes,Ta(o,c,j)}return ay(o,c,p,x,j)}function Vw(o,c,p){var x=c.pendingProps,j=x.children,L=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},bs(Qc,Ur),Ur|=p;else{if((p&1073741824)===0)return o=L!==null?L.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,bs(Qc,Ur),Ur|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=L!==null?L.baseLanes:p,bs(Qc,Ur),Ur|=x}else L!==null?(x=L.baseLanes|p,c.memoizedState=null):x=p,bs(Qc,Ur),Ur|=x;return ir(o,c,j,p),c.child}function Uw(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function ay(o,c,p,x,j){var L=yr(p)?_l:Gn.current;return L=$c(c,L),Gc(c,j),p=Xx(o,c,p,x,L,j),x=Yx(),o!==null&&!vr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,Ta(o,c,j)):(Es&&x&&Px(c),c.flags|=1,ir(o,c,p,j),c.child)}function zw(o,c,p,x,j){if(yr(p)){var L=!0;Wm(c)}else L=!1;if(Gc(c,j),c.stateNode===null)dp(o,c),Iw(c,p,x),ny(c,p,x,j),x=!0;else if(o===null){var V=c.stateNode,Q=c.memoizedProps;V.props=Q;var Z=V.context,pe=p.contextType;typeof pe=="object"&&pe!==null?pe=ni(pe):(pe=yr(p)?_l:Gn.current,pe=$c(c,pe));var ke=p.getDerivedStateFromProps,Re=typeof ke=="function"||typeof V.getSnapshotBeforeUpdate=="function";Re||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==x||Z!==pe)&&Rw(c,V,x,pe),jo=!1;var Ne=c.memoizedState;V.state=Ne,tp(c,x,V,j),Z=c.memoizedState,Q!==x||Ne!==Z||xr.current||jo?(typeof ke=="function"&&(sy(c,p,ke,x),Z=c.memoizedState),(Q=jo||Aw(c,p,Q,x,Ne,Z,pe))?(Re||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=Z),V.props=x,V.state=Z,V.context=pe,x=Q):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{V=c.stateNode,iw(o,c),Q=c.memoizedProps,pe=c.type===c.elementType?Q:Si(c.type,Q),V.props=pe,Re=c.pendingProps,Ne=V.context,Z=p.contextType,typeof Z=="object"&&Z!==null?Z=ni(Z):(Z=yr(p)?_l:Gn.current,Z=$c(c,Z));var Xe=p.getDerivedStateFromProps;(ke=typeof Xe=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==Re||Ne!==Z)&&Rw(c,V,x,Z),jo=!1,Ne=c.memoizedState,V.state=Ne,tp(c,x,V,j);var st=c.memoizedState;Q!==Re||Ne!==st||xr.current||jo?(typeof Xe=="function"&&(sy(c,p,Xe,x),st=c.memoizedState),(pe=jo||Aw(c,p,pe,x,Ne,st,Z)||!1)?(ke||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(x,st,Z),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(x,st,Z)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=st),V.props=x,V.state=st,V.context=Z,x=pe):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),x=!1)}return oy(o,c,p,x,L,j)}function oy(o,c,p,x,j,L){Uw(o,c);var V=(c.flags&128)!==0;if(!x&&!V)return j&&K_(c,p,!1),Ta(o,c,L);x=c.stateNode,x4.current=c;var Q=V&&typeof p.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,o!==null&&V?(c.child=zc(c,o.child,null,L),c.child=zc(c,null,Q,L)):ir(o,c,Q,L),c.memoizedState=x.state,j&&K_(c,p,!0),c.child}function Hw(o){var c=o.stateNode;c.pendingContext?W_(o,c.pendingContext,c.pendingContext!==c.context):c.context&&W_(o,c.context,!1),Hx(o,c.containerInfo)}function Gw(o,c,p,x,j){return Uc(),Fx(j),c.flags|=256,ir(o,c,p,x),c.child}var ly={dehydrated:null,treeContext:null,retryLane:0};function cy(o){return{baseLanes:o,cachePool:null,transitions:null}}function Ww(o,c,p){var x=c.pendingProps,j=Ls.current,L=!1,V=(c.flags&128)!==0,Q;if((Q=V)||(Q=o!==null&&o.memoizedState===null?!1:(j&2)!==0),Q?(L=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),bs(Ls,j&1),o===null)return Mx(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=x.children,o=x.fallback,L?(x=c.mode,L=c.child,V={mode:"hidden",children:V},(x&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=V):L=wp(V,x,0,null),o=Il(o,x,p,null),L.return=c,o.return=c,L.sibling=o,c.child=L,c.child.memoizedState=cy(p),c.memoizedState=ly,o):dy(c,V));if(j=o.memoizedState,j!==null&&(Q=j.dehydrated,Q!==null))return y4(o,c,V,x,Q,j,p);if(L){L=x.fallback,V=c.mode,j=o.child,Q=j.sibling;var Z={mode:"hidden",children:x.children};return(V&1)===0&&c.child!==j?(x=c.child,x.childLanes=0,x.pendingProps=Z,c.deletions=null):(x=Ao(j,Z),x.subtreeFlags=j.subtreeFlags&14680064),Q!==null?L=Ao(Q,L):(L=Il(L,V,p,null),L.flags|=2),L.return=c,x.return=c,x.sibling=L,c.child=x,x=L,L=c.child,V=o.child.memoizedState,V=V===null?cy(p):{baseLanes:V.baseLanes|p,cachePool:null,transitions:V.transitions},L.memoizedState=V,L.childLanes=o.childLanes&~p,c.memoizedState=ly,x}return L=o.child,o=L.sibling,x=Ao(L,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=p),x.return=c,x.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=x,c.memoizedState=null,x}function dy(o,c){return c=wp({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function cp(o,c,p,x){return x!==null&&Fx(x),zc(c,o.child,null,p),o=dy(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function y4(o,c,p,x,j,L,V){if(p)return c.flags&256?(c.flags&=-257,x=ry(Error(s(422))),cp(o,c,V,x)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(L=x.fallback,j=c.mode,x=wp({mode:"visible",children:x.children},j,0,null),L=Il(L,j,V,null),L.flags|=2,x.return=c,L.return=c,x.sibling=L,c.child=x,(c.mode&1)!==0&&zc(c,o.child,null,V),c.child.memoizedState=cy(V),c.memoizedState=ly,L);if((c.mode&1)===0)return cp(o,c,V,null);if(j.data==="$!"){if(x=j.nextSibling&&j.nextSibling.dataset,x)var Q=x.dgst;return x=Q,L=Error(s(419)),x=ry(L,x,void 0),cp(o,c,V,x)}if(Q=(V&o.childLanes)!==0,vr||Q){if(x=yn,x!==null){switch(V&-V){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(x.suspendedLanes|V))!==0?0:j,j!==0&&j!==L.retryLane&&(L.retryLane=j,ka(o,j),Ci(x,o,j,-1))}return ky(),x=ry(Error(s(421))),cp(o,c,V,x)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=I4.bind(null,o),j._reactRetry=c,null):(o=L.treeContext,Vr=vo(j.nextSibling),Or=c,Es=!0,ji=null,o!==null&&(ti[si++]=Sa,ti[si++]=Na,ti[si++]=wl,Sa=o.id,Na=o.overflow,wl=c),c=dy(c,x.children),c.flags|=4096,c)}function qw(o,c,p){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),Vx(o.return,c,p)}function uy(o,c,p,x,j){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:j}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=x,L.tail=p,L.tailMode=j)}function Kw(o,c,p){var x=c.pendingProps,j=x.revealOrder,L=x.tail;if(ir(o,c,x.children,p),x=Ls.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&qw(o,p,c);else if(o.tag===19)qw(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(bs(Ls,x),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(p=c.child,j=null;p!==null;)o=p.alternate,o!==null&&sp(o)===null&&(j=p),p=p.sibling;p=j,p===null?(j=c.child,c.child=null):(j=p.sibling,p.sibling=null),uy(c,!1,j,p,L);break;case"backwards":for(p=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&sp(o)===null){c.child=j;break}o=j.sibling,j.sibling=p,p=j,j=o}uy(c,!0,p,null,L);break;case"together":uy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function dp(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ta(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Cl|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,p=Ao(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Ao(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function v4(o,c,p){switch(c.tag){case 3:Hw(c),Uc();break;case 5:lw(c);break;case 1:yr(c.type)&&Wm(c);break;case 4:Hx(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,j=c.memoizedProps.value;bs(Jm,x._currentValue),x._currentValue=j;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(bs(Ls,Ls.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?Ww(o,c,p):(bs(Ls,Ls.current&1),o=Ta(o,c,p),o!==null?o.sibling:null);bs(Ls,Ls.current&1);break;case 19:if(x=(p&c.childLanes)!==0,(o.flags&128)!==0){if(x)return Kw(o,c,p);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),bs(Ls,Ls.current),x)break;return null;case 22:case 23:return c.lanes=0,Vw(o,c,p)}return Ta(o,c,p)}var Qw,hy,Xw,Yw;Qw=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},hy=function(){},Xw=function(o,c,p,x){var j=o.memoizedProps;if(j!==x){o=c.stateNode,Nl(Xi.current);var L=null;switch(p){case"input":j=$e(o,j),x=$e(o,x),L=[];break;case"select":j=re({},j,{value:void 0}),x=re({},x,{value:void 0}),L=[];break;case"textarea":j=Ke(o,j),x=Ke(o,x),L=[];break;default:typeof j.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=zm)}es(p,x);var V;p=null;for(pe in j)if(!x.hasOwnProperty(pe)&&j.hasOwnProperty(pe)&&j[pe]!=null)if(pe==="style"){var Q=j[pe];for(V in Q)Q.hasOwnProperty(V)&&(p||(p={}),p[V]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?L||(L=[]):(L=L||[]).push(pe,null));for(pe in x){var Z=x[pe];if(Q=j!=null?j[pe]:void 0,x.hasOwnProperty(pe)&&Z!==Q&&(Z!=null||Q!=null))if(pe==="style")if(Q){for(V in Q)!Q.hasOwnProperty(V)||Z&&Z.hasOwnProperty(V)||(p||(p={}),p[V]="");for(V in Z)Z.hasOwnProperty(V)&&Q[V]!==Z[V]&&(p||(p={}),p[V]=Z[V])}else p||(L||(L=[]),L.push(pe,p)),p=Z;else pe==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Q=Q?Q.__html:void 0,Z!=null&&Q!==Z&&(L=L||[]).push(pe,Z)):pe==="children"?typeof Z!="string"&&typeof Z!="number"||(L=L||[]).push(pe,""+Z):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(Z!=null&&pe==="onScroll"&&Ss("scroll",o),L||Q===Z||(L=[])):(L=L||[]).push(pe,Z))}p&&(L=L||[]).push("style",p);var pe=L;(c.updateQueue=pe)&&(c.flags|=4)}},Yw=function(o,c,p,x){p!==x&&(c.flags|=4)};function Cu(o,c){if(!Es)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function qn(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,x=0;if(c)for(var j=o.child;j!==null;)p|=j.lanes|j.childLanes,x|=j.subtreeFlags&14680064,x|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)p|=j.lanes|j.childLanes,x|=j.subtreeFlags,x|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=x,o.childLanes=p,c}function b4(o,c,p){var x=c.pendingProps;switch(Lx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(c),null;case 1:return yr(c.type)&&Gm(),qn(c),null;case 3:return x=c.stateNode,Wc(),Ns(xr),Ns(Gn),qx(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Xm(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ji!==null&&(jy(ji),ji=null))),hy(o,c),qn(c),null;case 5:Gx(c);var j=Nl(wu.current);if(p=c.type,o!==null&&c.stateNode!=null)Xw(o,c,p,x,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(s(166));return qn(c),null}if(o=Nl(Xi.current),Xm(c)){x=c.stateNode,p=c.type;var L=c.memoizedProps;switch(x[Qi]=c,x[xu]=L,o=(c.mode&1)!==0,p){case"dialog":Ss("cancel",x),Ss("close",x);break;case"iframe":case"object":case"embed":Ss("load",x);break;case"video":case"audio":for(j=0;j<pu.length;j++)Ss(pu[j],x);break;case"source":Ss("error",x);break;case"img":case"image":case"link":Ss("error",x),Ss("load",x);break;case"details":Ss("toggle",x);break;case"input":Ge(x,L),Ss("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!L.multiple},Ss("invalid",x);break;case"textarea":bt(x,L),Ss("invalid",x)}es(p,L),j=null;for(var V in L)if(L.hasOwnProperty(V)){var Q=L[V];V==="children"?typeof Q=="string"?x.textContent!==Q&&(L.suppressHydrationWarning!==!0&&Um(x.textContent,Q,o),j=["children",Q]):typeof Q=="number"&&x.textContent!==""+Q&&(L.suppressHydrationWarning!==!0&&Um(x.textContent,Q,o),j=["children",""+Q]):i.hasOwnProperty(V)&&Q!=null&&V==="onScroll"&&Ss("scroll",x)}switch(p){case"input":be(x),ft(x,L,!0);break;case"textarea":be(x),Oe(x);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(x.onclick=zm)}x=j,c.updateQueue=x,x!==null&&(c.flags|=4)}else{V=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Te(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=V.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=V.createElement(p,{is:x.is}):(o=V.createElement(p),p==="select"&&(V=o,x.multiple?V.multiple=!0:x.size&&(V.size=x.size))):o=V.createElementNS(o,p),o[Qi]=c,o[xu]=x,Qw(o,c,!1,!1),c.stateNode=o;e:{switch(V=dt(p,x),p){case"dialog":Ss("cancel",o),Ss("close",o),j=x;break;case"iframe":case"object":case"embed":Ss("load",o),j=x;break;case"video":case"audio":for(j=0;j<pu.length;j++)Ss(pu[j],o);j=x;break;case"source":Ss("error",o),j=x;break;case"img":case"image":case"link":Ss("error",o),Ss("load",o),j=x;break;case"details":Ss("toggle",o),j=x;break;case"input":Ge(o,x),j=$e(o,x),Ss("invalid",o);break;case"option":j=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},j=re({},x,{value:void 0}),Ss("invalid",o);break;case"textarea":bt(o,x),j=Ke(o,x),Ss("invalid",o);break;default:j=x}es(p,j),Q=j;for(L in Q)if(Q.hasOwnProperty(L)){var Z=Q[L];L==="style"?qs(o,Z):L==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&ht(o,Z)):L==="children"?typeof Z=="string"?(p!=="textarea"||Z!=="")&&we(o,Z):typeof Z=="number"&&we(o,""+Z):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?Z!=null&&L==="onScroll"&&Ss("scroll",o):Z!=null&&A(o,L,Z,V))}switch(p){case"input":be(o),ft(o,x,!1);break;case"textarea":be(o),Oe(o);break;case"option":x.value!=null&&o.setAttribute("value",""+te(x.value));break;case"select":o.multiple=!!x.multiple,L=x.value,L!=null?Je(o,!!x.multiple,L,!1):x.defaultValue!=null&&Je(o,!!x.multiple,x.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=zm)}switch(p){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return qn(c),null;case 6:if(o&&c.stateNode!=null)Yw(o,c,o.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(s(166));if(p=Nl(wu.current),Nl(Xi.current),Xm(c)){if(x=c.stateNode,p=c.memoizedProps,x[Qi]=c,(L=x.nodeValue!==p)&&(o=Or,o!==null))switch(o.tag){case 3:Um(x.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Um(x.nodeValue,p,(o.mode&1)!==0)}L&&(c.flags|=4)}else x=(p.nodeType===9?p:p.ownerDocument).createTextNode(x),x[Qi]=c,c.stateNode=x}return qn(c),null;case 13:if(Ns(Ls),x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Es&&Vr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)ew(),Uc(),c.flags|=98560,L=!1;else if(L=Xm(c),x!==null&&x.dehydrated!==null){if(o===null){if(!L)throw Error(s(318));if(L=c.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));L[Qi]=c}else Uc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;qn(c),L=!1}else ji!==null&&(jy(ji),ji=null),L=!0;if(!L)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Ls.current&1)!==0?un===0&&(un=3):ky())),c.updateQueue!==null&&(c.flags|=4),qn(c),null);case 4:return Wc(),hy(o,c),o===null&&fu(c.stateNode.containerInfo),qn(c),null;case 10:return Ox(c.type._context),qn(c),null;case 17:return yr(c.type)&&Gm(),qn(c),null;case 19:if(Ns(Ls),L=c.memoizedState,L===null)return qn(c),null;if(x=(c.flags&128)!==0,V=L.rendering,V===null)if(x)Cu(L,!1);else{if(un!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(V=sp(o),V!==null){for(c.flags|=128,Cu(L,!1),x=V.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=p,p=c.child;p!==null;)L=p,o=x,L.flags&=14680066,V=L.alternate,V===null?(L.childLanes=0,L.lanes=o,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=V.childLanes,L.lanes=V.lanes,L.child=V.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=V.memoizedProps,L.memoizedState=V.memoizedState,L.updateQueue=V.updateQueue,L.type=V.type,o=V.dependencies,L.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return bs(Ls,Ls.current&1|2),c.child}o=o.sibling}L.tail!==null&&ms()>Xc&&(c.flags|=128,x=!0,Cu(L,!1),c.lanes=4194304)}else{if(!x)if(o=sp(V),o!==null){if(c.flags|=128,x=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),Cu(L,!0),L.tail===null&&L.tailMode==="hidden"&&!V.alternate&&!Es)return qn(c),null}else 2*ms()-L.renderingStartTime>Xc&&p!==1073741824&&(c.flags|=128,x=!0,Cu(L,!1),c.lanes=4194304);L.isBackwards?(V.sibling=c.child,c.child=V):(p=L.last,p!==null?p.sibling=V:c.child=V,L.last=V)}return L.tail!==null?(c=L.tail,L.rendering=c,L.tail=c.sibling,L.renderingStartTime=ms(),c.sibling=null,p=Ls.current,bs(Ls,x?p&1|2:p&1),c):(qn(c),null);case 22:case 23:return Ny(),x=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Ur&1073741824)!==0&&(qn(c),c.subtreeFlags&6&&(c.flags|=8192)):qn(c),null;case 24:return null;case 25:return null}throw Error(s(156,c.tag))}function _4(o,c){switch(Lx(c),c.tag){case 1:return yr(c.type)&&Gm(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Wc(),Ns(xr),Ns(Gn),qx(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Gx(c),null;case 13:if(Ns(Ls),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));Uc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ns(Ls),null;case 4:return Wc(),null;case 10:return Ox(c.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var up=!1,Kn=!1,w4=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Kc(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(x){Vs(o,c,x)}else p.current=null}function my(o,c,p){try{p()}catch(x){Vs(o,c,x)}}var Jw=!1;function j4(o,c){if(Nx=go,o=A_(),xx(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var j=x.anchorOffset,L=x.focusNode;x=x.focusOffset;try{p.nodeType,L.nodeType}catch(Me){p=null;break e}var V=0,Q=-1,Z=-1,pe=0,ke=0,Re=o,Ne=null;t:for(;;){for(var Xe;Re!==p||j!==0&&Re.nodeType!==3||(Q=V+j),Re!==L||x!==0&&Re.nodeType!==3||(Z=V+x),Re.nodeType===3&&(V+=Re.nodeValue.length),(Xe=Re.firstChild)!==null;)Ne=Re,Re=Xe;for(;;){if(Re===o)break t;if(Ne===p&&++pe===j&&(Q=V),Ne===L&&++ke===x&&(Z=V),(Xe=Re.nextSibling)!==null)break;Re=Ne,Ne=Re.parentNode}Re=Xe}p=Q===-1||Z===-1?null:{start:Q,end:Z}}else p=null}p=p||{start:0,end:0}}else p=null;for(kx={focusedElem:o,selectionRange:p},go=!1,Ze=c;Ze!==null;)if(c=Ze,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ze=o;else for(;Ze!==null;){c=Ze;try{var st=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var rt=st.memoizedProps,Ks=st.memoizedState,ue=c.stateNode,ne=ue.getSnapshotBeforeUpdate(c.elementType===c.type?rt:Si(c.type,rt),Ks);ue.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var he=c.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Me){Vs(c,c.return,Me)}if(o=c.sibling,o!==null){o.return=c.return,Ze=o;break}Ze=c.return}return st=Jw,Jw=!1,st}function Tu(o,c,p){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var j=x=x.next;do{if((j.tag&o)===o){var L=j.destroy;j.destroy=void 0,L!==void 0&&my(c,p,L)}j=j.next}while(j!==x)}}function hp(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var x=p.create;p.destroy=x()}p=p.next}while(p!==c)}}function py(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function Zw(o){var c=o.alternate;c!==null&&(o.alternate=null,Zw(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Qi],delete c[xu],delete c[Ax],delete c[i4],delete c[a4])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function e2(o){return o.tag===5||o.tag===3||o.tag===4}function t2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||e2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function fy(o,c,p){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=zm));else if(x!==4&&(o=o.child,o!==null))for(fy(o,c,p),o=o.sibling;o!==null;)fy(o,c,p),o=o.sibling}function gy(o,c,p){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(gy(o,c,p),o=o.sibling;o!==null;)gy(o,c,p),o=o.sibling}var An=null,Ni=!1;function No(o,c,p){for(p=p.child;p!==null;)s2(o,c,p),p=p.sibling}function s2(o,c,p){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(ml,p)}catch(Q){}switch(p.tag){case 5:Kn||Kc(p,c);case 6:var x=An,j=Ni;An=null,No(o,c,p),An=x,Ni=j,An!==null&&(Ni?(o=An,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):An.removeChild(p.stateNode));break;case 18:An!==null&&(Ni?(o=An,p=p.stateNode,o.nodeType===8?Ex(o.parentNode,p):o.nodeType===1&&Ex(o,p),bi(o)):Ex(An,p.stateNode));break;case 4:x=An,j=Ni,An=p.stateNode.containerInfo,Ni=!0,No(o,c,p),An=x,Ni=j;break;case 0:case 11:case 14:case 15:if(!Kn&&(x=p.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){j=x=x.next;do{var L=j,V=L.destroy;L=L.tag,V!==void 0&&((L&2)!==0||(L&4)!==0)&&my(p,c,V),j=j.next}while(j!==x)}No(o,c,p);break;case 1:if(!Kn&&(Kc(p,c),x=p.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=p.memoizedProps,x.state=p.memoizedState,x.componentWillUnmount()}catch(Q){Vs(p,c,Q)}No(o,c,p);break;case 21:No(o,c,p);break;case 22:p.mode&1?(Kn=(x=Kn)||p.memoizedState!==null,No(o,c,p),Kn=x):No(o,c,p);break;default:No(o,c,p)}}function n2(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new w4),c.forEach(function(x){var j=R4.bind(null,o,x);p.has(x)||(p.add(x),x.then(j,j))})}}function ki(o,c){var p=c.deletions;if(p!==null)for(var x=0;x<p.length;x++){var j=p[x];try{var L=o,V=c,Q=V;e:for(;Q!==null;){switch(Q.tag){case 5:An=Q.stateNode,Ni=!1;break e;case 3:An=Q.stateNode.containerInfo,Ni=!0;break e;case 4:An=Q.stateNode.containerInfo,Ni=!0;break e}Q=Q.return}if(An===null)throw Error(s(160));s2(L,V,j),An=null,Ni=!1;var Z=j.alternate;Z!==null&&(Z.return=null),j.return=null}catch(pe){Vs(j,c,pe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)r2(c,o),c=c.sibling}function r2(o,c){var p=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ki(c,o),Ji(o),x&4){try{Tu(3,o,o.return),hp(3,o)}catch(rt){Vs(o,o.return,rt)}try{Tu(5,o,o.return)}catch(rt){Vs(o,o.return,rt)}}break;case 1:ki(c,o),Ji(o),x&512&&p!==null&&Kc(p,p.return);break;case 5:if(ki(c,o),Ji(o),x&512&&p!==null&&Kc(p,p.return),o.flags&32){var j=o.stateNode;try{we(j,"")}catch(rt){Vs(o,o.return,rt)}}if(x&4&&(j=o.stateNode,j!=null)){var L=o.memoizedProps,V=p!==null?p.memoizedProps:L,Q=o.type,Z=o.updateQueue;if(o.updateQueue=null,Z!==null)try{Q==="input"&&L.type==="radio"&&L.name!=null&&nt(j,L),dt(Q,V);var pe=dt(Q,L);for(V=0;V<Z.length;V+=2){var ke=Z[V],Re=Z[V+1];ke==="style"?qs(j,Re):ke==="dangerouslySetInnerHTML"?ht(j,Re):ke==="children"?we(j,Re):A(j,ke,Re,pe)}switch(Q){case"input":at(j,L);break;case"textarea":kt(j,L);break;case"select":var Ne=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!L.multiple;var Xe=L.value;Xe!=null?Je(j,!!L.multiple,Xe,!1):Ne!==!!L.multiple&&(L.defaultValue!=null?Je(j,!!L.multiple,L.defaultValue,!0):Je(j,!!L.multiple,L.multiple?[]:"",!1))}j[xu]=L}catch(rt){Vs(o,o.return,rt)}}break;case 6:if(ki(c,o),Ji(o),x&4){if(o.stateNode===null)throw Error(s(162));j=o.stateNode,L=o.memoizedProps;try{j.nodeValue=L}catch(rt){Vs(o,o.return,rt)}}break;case 3:if(ki(c,o),Ji(o),x&4&&p!==null&&p.memoizedState.isDehydrated)try{bi(c.containerInfo)}catch(rt){Vs(o,o.return,rt)}break;case 4:ki(c,o),Ji(o);break;case 13:ki(c,o),Ji(o),j=o.child,j.flags&8192&&(L=j.memoizedState!==null,j.stateNode.isHidden=L,!L||j.alternate!==null&&j.alternate.memoizedState!==null||(vy=ms())),x&4&&n2(o);break;case 22:if(ke=p!==null&&p.memoizedState!==null,o.mode&1?(Kn=(pe=Kn)||ke,ki(c,o),Kn=pe):ki(c,o),Ji(o),x&8192){if(pe=o.memoizedState!==null,(o.stateNode.isHidden=pe)&&!ke&&(o.mode&1)!==0)for(Ze=o,ke=o.child;ke!==null;){for(Re=Ze=ke;Ze!==null;){switch(Ne=Ze,Xe=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:Tu(4,Ne,Ne.return);break;case 1:Kc(Ne,Ne.return);var st=Ne.stateNode;if(typeof st.componentWillUnmount=="function"){x=Ne,p=Ne.return;try{c=x,st.props=c.memoizedProps,st.state=c.memoizedState,st.componentWillUnmount()}catch(rt){Vs(x,p,rt)}}break;case 5:Kc(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){o2(Re);continue}}Xe!==null?(Xe.return=Ne,Ze=Xe):o2(Re)}ke=ke.sibling}e:for(ke=null,Re=o;;){if(Re.tag===5){if(ke===null){ke=Re;try{j=Re.stateNode,pe?(L=j.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(Q=Re.stateNode,Z=Re.memoizedProps.style,V=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,Q.style.display=Ws("display",V))}catch(rt){Vs(o,o.return,rt)}}}else if(Re.tag===6){if(ke===null)try{Re.stateNode.nodeValue=pe?"":Re.memoizedProps}catch(rt){Vs(o,o.return,rt)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===o)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===o)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===o)break e;ke===Re&&(ke=null),Re=Re.return}ke===Re&&(ke=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:ki(c,o),Ji(o),x&4&&n2(o);break;case 21:break;default:ki(c,o),Ji(o)}}function Ji(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if(e2(p)){var x=p;break e}p=p.return}throw Error(s(160))}switch(x.tag){case 5:var j=x.stateNode;x.flags&32&&(we(j,""),x.flags&=-33);var L=t2(o);gy(o,L,j);break;case 3:case 4:var V=x.stateNode.containerInfo,Q=t2(o);fy(o,Q,V);break;default:throw Error(s(161))}}catch(Z){Vs(o,o.return,Z)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function S4(o,c,p){Ze=o,i2(o)}function i2(o,c,p){for(var x=(o.mode&1)!==0;Ze!==null;){var j=Ze,L=j.child;if(j.tag===22&&x){var V=j.memoizedState!==null||up;if(!V){var Q=j.alternate,Z=Q!==null&&Q.memoizedState!==null||Kn;Q=up;var pe=Kn;if(up=V,(Kn=Z)&&!pe)for(Ze=j;Ze!==null;)V=Ze,Z=V.child,V.tag===22&&V.memoizedState!==null?l2(j):Z!==null?(Z.return=V,Ze=Z):l2(j);for(;L!==null;)Ze=L,i2(L),L=L.sibling;Ze=j,up=Q,Kn=pe}a2(o)}else(j.subtreeFlags&8772)!==0&&L!==null?(L.return=j,Ze=L):a2(o)}}function a2(o){for(;Ze!==null;){var c=Ze;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Kn||hp(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Kn)if(p===null)x.componentDidMount();else{var j=c.elementType===c.type?p.memoizedProps:Si(c.type,p.memoizedProps);x.componentDidUpdate(j,p.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&ow(c,L,x);break;case 3:var V=c.updateQueue;if(V!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}ow(c,V,p)}break;case 5:var Q=c.stateNode;if(p===null&&c.flags&4){p=Q;var Z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&p.focus();break;case"img":Z.src&&(p.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var pe=c.alternate;if(pe!==null){var ke=pe.memoizedState;if(ke!==null){var Re=ke.dehydrated;Re!==null&&bi(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Kn||c.flags&512&&py(c)}catch(Ne){Vs(c,c.return,Ne)}}if(c===o){Ze=null;break}if(p=c.sibling,p!==null){p.return=c.return,Ze=p;break}Ze=c.return}}function o2(o){for(;Ze!==null;){var c=Ze;if(c===o){Ze=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Ze=p;break}Ze=c.return}}function l2(o){for(;Ze!==null;){var c=Ze;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{hp(4,c)}catch(Z){Vs(c,p,Z)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var j=c.return;try{x.componentDidMount()}catch(Z){Vs(c,j,Z)}}var L=c.return;try{py(c)}catch(Z){Vs(c,L,Z)}break;case 5:var V=c.return;try{py(c)}catch(Z){Vs(c,V,Z)}}}catch(Z){Vs(c,c.return,Z)}if(c===o){Ze=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,Ze=Q;break}Ze=c.return}}var N4=Math.ceil,mp=y.ReactCurrentDispatcher,xy=y.ReactCurrentOwner,ii=y.ReactCurrentBatchConfig,is=0,yn=null,en=null,In=0,Ur=0,Qc=bo(0),un=0,Eu=null,Cl=0,pp=0,yy=0,Au=null,br=null,vy=0,Xc=1/0,Ea=null,fp=!1,by=null,ko=null,gp=!1,Co=null,xp=0,Iu=0,_y=null,yp=-1,vp=0;function ar(){return(is&6)!==0?ms():yp!==-1?yp:yp=ms()}function To(o){return(o.mode&1)===0?1:(is&2)!==0&&In!==0?In&-In:l4.transition!==null?(vp===0&&(vp=fl()),vp):(o=Yt,o!==0||(o=window.event,o=o===void 0?16:iu(o.type)),o)}function Ci(o,c,p,x){if(50<Iu)throw Iu=0,_y=null,Error(s(185));ho(o,p,x),((is&2)===0||o!==yn)&&(o===yn&&((is&2)===0&&(pp|=p),un===4&&Eo(o,In)),_r(o,x),p===1&&is===0&&(c.mode&1)===0&&(Xc=ms()+500,qm&&wo()))}function _r(o,c){var p=o.callbackNode;xa(o,c);var x=pl(o,o===yn?In:0);if(x===0)p!==null&&lo(p),o.callbackNode=null,o.callbackPriority=0;else if(c=x&-x,o.callbackPriority!==c){if(p!=null&&lo(p),c===1)o.tag===0?o4(d2.bind(null,o)):Q_(d2.bind(null,o)),n4(function(){(is&6)===0&&wo()}),p=null;else{switch(po(x)){case 1:p=zi;break;case 4:p=gi;break;case 16:p=sr;break;case 536870912:p=vm;break;default:p=sr}p=y2(p,c2.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function c2(o,c){if(yp=-1,vp=0,(is&6)!==0)throw Error(s(327));var p=o.callbackNode;if(Yc()&&o.callbackNode!==p)return null;var x=pl(o,o===yn?In:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||c)c=bp(o,x);else{c=x;var j=is;is|=2;var L=h2();(yn!==o||In!==c)&&(Ea=null,Xc=ms()+500,El(o,c));do try{T4();break}catch(Q){u2(o,Q)}while(!0);$x(),mp.current=L,is=j,en!==null?c=0:(yn=null,In=0,c=un)}if(c!==0){if(c===2&&(j=Fr(o),j!==0&&(x=j,c=wy(o,j))),c===1)throw p=Eu,El(o,0),Eo(o,x),_r(o,ms()),p;if(c===6)Eo(o,x);else{if(j=o.current.alternate,(x&30)===0&&!k4(j)&&(c=bp(o,x),c===2&&(L=Fr(o),L!==0&&(x=L,c=wy(o,L))),c===1))throw p=Eu,El(o,0),Eo(o,x),_r(o,ms()),p;switch(o.finishedWork=j,o.finishedLanes=x,c){case 0:case 1:throw Error(s(345));case 2:Al(o,br,Ea);break;case 3:if(Eo(o,x),(x&130023424)===x&&(c=vy+500-ms(),10<c)){if(pl(o,0)!==0)break;if(j=o.suspendedLanes,(j&x)!==x){ar(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=Tx(Al.bind(null,o,br,Ea),c);break}Al(o,br,Ea);break;case 4:if(Eo(o,x),(x&4194240)===x)break;for(c=o.eventTimes,j=-1;0<x;){var V=31-nr(x);L=1<<V,V=c[V],V>j&&(j=V),x&=~L}if(x=j,x=ms()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*N4(x/1960))-x,10<x){o.timeoutHandle=Tx(Al.bind(null,o,br,Ea),x);break}Al(o,br,Ea);break;case 5:Al(o,br,Ea);break;default:throw Error(s(329))}}}return _r(o,ms()),o.callbackNode===p?c2.bind(null,o):null}function wy(o,c){var p=Au;return o.current.memoizedState.isDehydrated&&(El(o,c).flags|=256),o=bp(o,c),o!==2&&(c=br,br=p,c!==null&&jy(c)),o}function jy(o){br===null?br=o:br.push.apply(br,o)}function k4(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var x=0;x<p.length;x++){var j=p[x],L=j.getSnapshot;j=j.value;try{if(!wi(L(),j))return!1}catch(V){return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Eo(o,c){for(c&=~yy,c&=~pp,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-nr(c),x=1<<p;o[p]=-1,c&=~x}}function d2(o){if((is&6)!==0)throw Error(s(327));Yc();var c=pl(o,0);if((c&1)===0)return _r(o,ms()),null;var p=bp(o,c);if(o.tag!==0&&p===2){var x=Fr(o);x!==0&&(c=x,p=wy(o,x))}if(p===1)throw p=Eu,El(o,0),Eo(o,c),_r(o,ms()),p;if(p===6)throw Error(s(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Al(o,br,Ea),_r(o,ms()),null}function Sy(o,c){var p=is;is|=1;try{return o(c)}finally{is=p,is===0&&(Xc=ms()+500,qm&&wo())}}function Tl(o){Co!==null&&Co.tag===0&&(is&6)===0&&Yc();var c=is;is|=1;var p=ii.transition,x=Yt;try{if(ii.transition=null,Yt=1,o)return o()}finally{Yt=x,ii.transition=p,is=c,(is&6)===0&&wo()}}function Ny(){Ur=Qc.current,Ns(Qc)}function El(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,s4(p)),en!==null)for(p=en.return;p!==null;){var x=p;switch(Lx(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Gm();break;case 3:Wc(),Ns(xr),Ns(Gn),qx();break;case 5:Gx(x);break;case 4:Wc();break;case 13:Ns(Ls);break;case 19:Ns(Ls);break;case 10:Ox(x.type._context);break;case 22:case 23:Ny()}p=p.return}if(yn=o,en=o=Ao(o.current,null),In=Ur=c,un=0,Eu=null,yy=pp=Cl=0,br=Au=null,Sl!==null){for(c=0;c<Sl.length;c++)if(p=Sl[c],x=p.interleaved,x!==null){p.interleaved=null;var j=x.next,L=p.pending;if(L!==null){var V=L.next;L.next=j,x.next=V}p.pending=x}Sl=null}return o}function u2(o,c){do{var p=en;try{if($x(),np.current=op,rp){for(var x=Ds.memoizedState;x!==null;){var j=x.queue;j!==null&&(j.pending=null),x=x.next}rp=!1}if(kl=0,xn=dn=Ds=null,ju=!1,Su=0,xy.current=null,p===null||p.return===null){un=1,Eu=c,en=null;break}e:{var L=o,V=p.return,Q=p,Z=c;if(c=In,Q.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var pe=Z,ke=Q,Re=ke.tag;if((ke.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ne=ke.alternate;Ne?(ke.updateQueue=Ne.updateQueue,ke.memoizedState=Ne.memoizedState,ke.lanes=Ne.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Xe=Mw(V);if(Xe!==null){Xe.flags&=-257,Fw(Xe,V,Q,L,c),Xe.mode&1&&Dw(L,pe,c),c=Xe,Z=pe;var st=c.updateQueue;if(st===null){var rt=new Set;rt.add(Z),c.updateQueue=rt}else st.add(Z);break e}else{if((c&1)===0){Dw(L,pe,c),ky();break e}Z=Error(s(426))}}else if(Es&&Q.mode&1){var Ks=Mw(V);if(Ks!==null){(Ks.flags&65536)===0&&(Ks.flags|=256),Fw(Ks,V,Q,L,c),Fx(qc(Z,Q));break e}}L=Z=qc(Z,Q),un!==4&&(un=2),Au===null?Au=[L]:Au.push(L),L=V;do{switch(L.tag){case 3:L.flags|=65536,c&=-c,L.lanes|=c;var ue=Pw(L,Z,c);aw(L,ue);break e;case 1:Q=Z;var ne=L.type,he=L.stateNode;if((L.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(ko===null||!ko.has(he)))){L.flags|=65536,c&=-c,L.lanes|=c;var Me=Lw(L,Q,c);aw(L,Me);break e}}L=L.return}while(L!==null)}p2(p)}catch(ct){c=ct,en===p&&p!==null&&(en=p=p.return);continue}break}while(!0)}function h2(){var o=mp.current;return mp.current=op,o===null?op:o}function ky(){(un===0||un===3||un===2)&&(un=4),yn===null||(Cl&268435455)===0&&(pp&268435455)===0||Eo(yn,In)}function bp(o,c){var p=is;is|=2;var x=h2();(yn!==o||In!==c)&&(Ea=null,El(o,c));do try{C4();break}catch(j){u2(o,j)}while(!0);if($x(),is=p,mp.current=x,en!==null)throw Error(s(261));return yn=null,In=0,un}function C4(){for(;en!==null;)m2(en)}function T4(){for(;en!==null&&!ul();)m2(en)}function m2(o){var c=x2(o.alternate,o,Ur);o.memoizedProps=o.pendingProps,c===null?p2(o):en=c,xy.current=null}function p2(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=b4(p,c,Ur),p!==null){en=p;return}}else{if(p=_4(p,c),p!==null){p.flags&=32767,en=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{un=6,en=null;return}}if(c=c.sibling,c!==null){en=c;return}en=c=o}while(c!==null);un===0&&(un=5)}function Al(o,c,p){var x=Yt,j=ii.transition;try{ii.transition=null,Yt=1,E4(o,c,p,x)}finally{ii.transition=j,Yt=x}return null}function E4(o,c,p,x){do Yc();while(Co!==null);if((is&6)!==0)throw Error(s(327));p=o.finishedWork;var j=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0;var L=p.lanes|p.childLanes;if(xs(o,L),o===yn&&(en=yn=null,In=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||gp||(gp=!0,y2(sr,function(){return Yc(),null})),L=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||L){L=ii.transition,ii.transition=null;var V=Yt;Yt=1;var Q=is;is|=4,xy.current=null,j4(o,p),r2(p,o),QI(kx),go=!!Nx,kx=Nx=null,o.current=p,S4(p),yc(),is=Q,Yt=V,ii.transition=L}else o.current=p;if(gp&&(gp=!1,Co=o,xp=j),L=o.pendingLanes,L===0&&(ko=null),bm(p.stateNode),_r(o,ms()),c!==null)for(x=o.onRecoverableError,p=0;p<c.length;p++)j=c[p],x(j.value,{componentStack:j.stack,digest:j.digest});if(fp)throw fp=!1,o=by,by=null,o;return(xp&1)!==0&&o.tag!==0&&Yc(),L=o.pendingLanes,(L&1)!==0?o===_y?Iu++:(Iu=0,_y=o):Iu=0,wo(),null}function Yc(){if(Co!==null){var o=po(xp),c=ii.transition,p=Yt;try{if(ii.transition=null,Yt=16>o?16:o,Co===null)var x=!1;else{if(o=Co,Co=null,xp=0,(is&6)!==0)throw Error(s(331));var j=is;for(is|=4,Ze=o.current;Ze!==null;){var L=Ze,V=L.child;if((Ze.flags&16)!==0){var Q=L.deletions;if(Q!==null){for(var Z=0;Z<Q.length;Z++){var pe=Q[Z];for(Ze=pe;Ze!==null;){var ke=Ze;switch(ke.tag){case 0:case 11:case 15:Tu(8,ke,L)}var Re=ke.child;if(Re!==null)Re.return=ke,Ze=Re;else for(;Ze!==null;){ke=Ze;var Ne=ke.sibling,Xe=ke.return;if(Zw(ke),ke===pe){Ze=null;break}if(Ne!==null){Ne.return=Xe,Ze=Ne;break}Ze=Xe}}}var st=L.alternate;if(st!==null){var rt=st.child;if(rt!==null){st.child=null;do{var Ks=rt.sibling;rt.sibling=null,rt=Ks}while(rt!==null)}}Ze=L}}if((L.subtreeFlags&2064)!==0&&V!==null)V.return=L,Ze=V;else e:for(;Ze!==null;){if(L=Ze,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:Tu(9,L,L.return)}var ue=L.sibling;if(ue!==null){ue.return=L.return,Ze=ue;break e}Ze=L.return}}var ne=o.current;for(Ze=ne;Ze!==null;){V=Ze;var he=V.child;if((V.subtreeFlags&2064)!==0&&he!==null)he.return=V,Ze=he;else e:for(V=ne;Ze!==null;){if(Q=Ze,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:hp(9,Q)}}catch(ct){Vs(Q,Q.return,ct)}if(Q===V){Ze=null;break e}var Me=Q.sibling;if(Me!==null){Me.return=Q.return,Ze=Me;break e}Ze=Q.return}}if(is=j,wo(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(ml,o)}catch(ct){}x=!0}return x}finally{Yt=p,ii.transition=c}}return!1}function f2(o,c,p){c=qc(p,c),c=Pw(o,c,1),o=So(o,c,1),c=ar(),o!==null&&(ho(o,1,c),_r(o,c))}function Vs(o,c,p){if(o.tag===3)f2(o,o,p);else for(;c!==null;){if(c.tag===3){f2(c,o,p);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ko===null||!ko.has(x))){o=qc(p,o),o=Lw(c,o,1),c=So(c,o,1),o=ar(),c!==null&&(ho(c,1,o),_r(c,o));break}}c=c.return}}function A4(o,c,p){var x=o.pingCache;x!==null&&x.delete(c),c=ar(),o.pingedLanes|=o.suspendedLanes&p,yn===o&&(In&p)===p&&(un===4||un===3&&(In&130023424)===In&&500>ms()-vy?El(o,0):yy|=p),_r(o,c)}function g2(o,c){c===0&&((o.mode&1)===0?c=1:(c=bc,bc<<=1,(bc&130023424)===0&&(bc=4194304)));var p=ar();o=ka(o,c),o!==null&&(ho(o,c,p),_r(o,p))}function I4(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),g2(o,p)}function R4(o,c){var p=0;switch(o.tag){case 13:var x=o.stateNode,j=o.memoizedState;j!==null&&(p=j.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(c),g2(o,p)}var x2;x2=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||xr.current)vr=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return vr=!1,v4(o,c,p);vr=(o.flags&131072)!==0}else vr=!1,Es&&(c.flags&1048576)!==0&&X_(c,Qm,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;dp(o,c),o=c.pendingProps;var j=$c(c,Gn.current);Gc(c,p),j=Xx(null,c,x,o,j,p);var L=Yx();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,yr(x)?(L=!0,Wm(c)):L=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,zx(c),j.updater=lp,c.stateNode=j,j._reactInternals=c,ny(c,x,o,p),c=oy(null,c,x,!0,L,p)):(c.tag=0,Es&&L&&Px(c),ir(null,c,j,p),c=c.child),c;case 16:x=c.elementType;e:{switch(dp(o,c),o=c.pendingProps,j=x._init,x=j(x._payload),c.type=x,j=c.tag=L4(x),o=Si(x,o),j){case 0:c=ay(null,c,x,o,p);break e;case 1:c=zw(null,c,x,o,p);break e;case 11:c=Bw(null,c,x,o,p);break e;case 14:c=$w(null,c,x,Si(x.type,o),p);break e}throw Error(s(306,x,""))}return c;case 0:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:Si(x,j),ay(o,c,x,j,p);case 1:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:Si(x,j),zw(o,c,x,j,p);case 3:e:{if(Hw(c),o===null)throw Error(s(387));x=c.pendingProps,L=c.memoizedState,j=L.element,iw(o,c),tp(c,x,null,p);var V=c.memoizedState;if(x=V.element,L.isDehydrated)if(L={element:x,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){j=qc(Error(s(423)),c),c=Gw(o,c,x,p,j);break e}else if(x!==j){j=qc(Error(s(424)),c),c=Gw(o,c,x,p,j);break e}else for(Vr=vo(c.stateNode.containerInfo.firstChild),Or=c,Es=!0,ji=null,p=nw(c,null,x,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Uc(),x===j){c=Ta(o,c,p);break e}ir(o,c,x,p)}c=c.child}return c;case 5:return lw(c),o===null&&Mx(c),x=c.type,j=c.pendingProps,L=o!==null?o.memoizedProps:null,V=j.children,Cx(x,j)?V=null:L!==null&&Cx(x,L)&&(c.flags|=32),Uw(o,c),ir(o,c,V,p),c.child;case 6:return o===null&&Mx(c),null;case 13:return Ww(o,c,p);case 4:return Hx(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=zc(c,null,x,p):ir(o,c,x,p),c.child;case 11:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:Si(x,j),Bw(o,c,x,j,p);case 7:return ir(o,c,c.pendingProps,p),c.child;case 8:return ir(o,c,c.pendingProps.children,p),c.child;case 12:return ir(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(x=c.type._context,j=c.pendingProps,L=c.memoizedProps,V=j.value,bs(Jm,x._currentValue),x._currentValue=V,L!==null)if(wi(L.value,V)){if(L.children===j.children&&!xr.current){c=Ta(o,c,p);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var Q=L.dependencies;if(Q!==null){V=L.child;for(var Z=Q.firstContext;Z!==null;){if(Z.context===x){if(L.tag===1){Z=Ca(-1,p&-p),Z.tag=2;var pe=L.updateQueue;if(pe!==null){pe=pe.shared;var ke=pe.pending;ke===null?Z.next=Z:(Z.next=ke.next,ke.next=Z),pe.pending=Z}}L.lanes|=p,Z=L.alternate,Z!==null&&(Z.lanes|=p),Vx(L.return,p,c),Q.lanes|=p;break}Z=Z.next}}else if(L.tag===10)V=L.type===c.type?null:L.child;else if(L.tag===18){if(V=L.return,V===null)throw Error(s(341));V.lanes|=p,Q=V.alternate,Q!==null&&(Q.lanes|=p),Vx(V,p,c),V=L.sibling}else V=L.child;if(V!==null)V.return=L;else for(V=L;V!==null;){if(V===c){V=null;break}if(L=V.sibling,L!==null){L.return=V.return,V=L;break}V=V.return}L=V}ir(o,c,j.children,p),c=c.child}return c;case 9:return j=c.type,x=c.pendingProps.children,Gc(c,p),j=ni(j),x=x(j),c.flags|=1,ir(o,c,x,p),c.child;case 14:return x=c.type,j=Si(x,c.pendingProps),j=Si(x.type,j),$w(o,c,x,j,p);case 15:return Ow(o,c,c.type,c.pendingProps,p);case 17:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:Si(x,j),dp(o,c),c.tag=1,yr(x)?(o=!0,Wm(c)):o=!1,Gc(c,p),Iw(c,x,j),ny(c,x,j,p),oy(null,c,x,!0,o,p);case 19:return Kw(o,c,p);case 22:return Vw(o,c,p)}throw Error(s(156,c.tag))};function y2(o,c){return ga(o,c)}function P4(o,c,p,x){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(o,c,p,x){return new P4(o,c,p,x)}function Cy(o){return o=o.prototype,!(!o||!o.isReactComponent)}function L4(o){if(typeof o=="function")return Cy(o)?1:0;if(o!=null){if(o=o.$$typeof,o===B)return 11;if(o===z)return 14}return 2}function Ao(o,c){var p=o.alternate;return p===null?(p=ai(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function _p(o,c,p,x,j,L){var V=2;if(x=o,typeof o=="function")Cy(o)&&(V=1);else if(typeof o=="string")V=5;else e:switch(o){case k:return Il(p.children,j,L,c);case S:V=8,j|=8;break;case T:return o=ai(12,p,c,j|2),o.elementType=T,o.lanes=L,o;case $:return o=ai(13,p,c,j),o.elementType=$,o.lanes=L,o;case H:return o=ai(19,p,c,j),o.elementType=H,o.lanes=L,o;case K:return wp(p,j,L,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:V=10;break e;case I:V=9;break e;case B:V=11;break e;case z:V=14;break e;case W:V=16,x=null;break e}throw Error(s(130,o==null?o:typeof o,""))}return c=ai(V,p,c,j),c.elementType=o,c.type=x,c.lanes=L,c}function Il(o,c,p,x){return o=ai(7,o,x,c),o.lanes=p,o}function wp(o,c,p,x){return o=ai(22,o,x,c),o.elementType=K,o.lanes=p,o.stateNode={isHidden:!1},o}function Ty(o,c,p){return o=ai(6,o,null,c),o.lanes=p,o}function Ey(o,c,p){return c=ai(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function D4(o,c,p,x,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=x,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Ay(o,c,p,x,j,L,V,Q,Z){return o=new D4(o,c,p,Q,Z),c===1?(c=1,L===!0&&(c|=8)):c=0,L=ai(3,null,null,c),o.current=L,L.stateNode=o,L.memoizedState={element:x,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},zx(L),o}function M4(o,c,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:x==null?null:""+x,children:o,containerInfo:c,implementation:p}}function v2(o){if(!o)return _o;o=o._reactInternals;e:{if(Vt(o)!==o||o.tag!==1)throw Error(s(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(yr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(o.tag===1){var p=o.type;if(yr(p))return q_(o,p,c)}return c}function b2(o,c,p,x,j,L,V,Q,Z){return o=Ay(p,x,!0,o,j,L,V,Q,Z),o.context=v2(null),p=o.current,x=ar(),j=To(p),L=Ca(x,j),L.callback=c!=null?c:null,So(p,L,j),o.current.lanes=j,ho(o,j,x),_r(o,x),o}function jp(o,c,p,x){var j=c.current,L=ar(),V=To(j);return p=v2(p),c.context===null?c.context=p:c.pendingContext=p,c=Ca(L,V),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=So(j,c,V),o!==null&&(Ci(o,j,V,L),ep(o,j,V)),V}function Sp(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function _2(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function Iy(o,c){_2(o,c),(o=o.alternate)&&_2(o,c)}function F4(){return null}var w2=typeof reportError=="function"?reportError:function(o){console.error(o)};function Ry(o){this._internalRoot=o}Np.prototype.render=Ry.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));jp(o,c,null,null)},Np.prototype.unmount=Ry.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Tl(function(){jp(null,o,null,null)}),c[wa]=null}};function Np(o){this._internalRoot=o}Np.prototype.unstable_scheduleHydration=function(o){if(o){var c=Nm();o={blockedOn:null,target:o,priority:c};for(var p=0;p<Gi.length&&c!==0&&c<Gi[p].priority;p++);Gi.splice(p,0,o),p===0&&Tm(o)}};function Py(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function kp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function j2(){}function B4(o,c,p,x,j){if(j){if(typeof x=="function"){var L=x;x=function(){var pe=Sp(V);L.call(pe)}}var V=b2(c,x,o,0,null,!1,!1,"",j2);return o._reactRootContainer=V,o[wa]=V.current,fu(o.nodeType===8?o.parentNode:o),Tl(),V}for(;j=o.lastChild;)o.removeChild(j);if(typeof x=="function"){var Q=x;x=function(){var pe=Sp(Z);Q.call(pe)}}var Z=Ay(o,0,!1,null,null,!1,!1,"",j2);return o._reactRootContainer=Z,o[wa]=Z.current,fu(o.nodeType===8?o.parentNode:o),Tl(function(){jp(c,Z,p,x)}),Z}function Cp(o,c,p,x,j){var L=p._reactRootContainer;if(L){var V=L;if(typeof j=="function"){var Q=j;j=function(){var Z=Sp(V);Q.call(Z)}}jp(c,V,o,j)}else V=B4(p,c,o,j,x);return Sp(V)}jm=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=co(c.pendingLanes);p!==0&&(mo(c,p|1),_r(c,ms()),(is&6)===0&&(Xc=ms()+500,wo()))}break;case 13:Tl(function(){var x=ka(o,1);if(x!==null){var j=ar();Ci(x,o,1,j)}}),Iy(o,1)}},_c=function(o){if(o.tag===13){var c=ka(o,134217728);if(c!==null){var p=ar();Ci(c,o,134217728,p)}Iy(o,134217728)}},Sm=function(o){if(o.tag===13){var c=To(o),p=ka(o,c);if(p!==null){var x=ar();Ci(p,o,c,x)}Iy(o,c)}},Nm=function(){return Yt},km=function(o,c){var p=Yt;try{return Yt=o,c()}finally{Yt=p}},He=function(o,c,p){switch(c){case"input":if(at(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var x=p[c];if(x!==o&&x.form===o.form){var j=Hm(x);if(!j)throw Error(s(90));ye(x),at(x,j)}}}break;case"textarea":kt(o,p);break;case"select":c=p.value,c!=null&&Je(o,!!p.multiple,c,!1)}},Nn=Sy,mr=Tl;var $4={usingClientEntryPoint:!1,Events:[yu,Fc,Hm,ts,Cs,Sy]},Ru={findFiberByHostInstance:bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O4={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=oo(o),o===null?null:o.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||F4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{ml=Tp.inject(O4),Mr=Tp}catch(o){}}return wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$4,wr.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Py(c))throw Error(s(200));return M4(o,c,null,p)},wr.createRoot=function(o,c){if(!Py(o))throw Error(s(299));var p=!1,x="",j=w2;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=Ay(o,1,!1,null,null,p,!1,x,j),o[wa]=c.current,fu(o.nodeType===8?o.parentNode:o),new Ry(c)},wr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=oo(c),o=o===null?null:o.stateNode,o},wr.flushSync=function(o){return Tl(o)},wr.hydrate=function(o,c,p){if(!kp(c))throw Error(s(200));return Cp(null,o,c,!0,p)},wr.hydrateRoot=function(o,c,p){if(!Py(o))throw Error(s(405));var x=p!=null&&p.hydratedSources||null,j=!1,L="",V=w2;if(p!=null&&(p.unstable_strictMode===!0&&(j=!0),p.identifierPrefix!==void 0&&(L=p.identifierPrefix),p.onRecoverableError!==void 0&&(V=p.onRecoverableError)),c=b2(c,null,o,1,p!=null?p:null,j,!1,L,V),o[wa]=c.current,fu(o),x)for(o=0;o<x.length;o++)p=x[o],j=p._getVersion,j=j(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,j]:c.mutableSourceEagerHydrationData.push(p,j);return new Np(c)},wr.render=function(o,c,p){if(!kp(c))throw Error(s(200));return Cp(null,o,c,!1,p)},wr.unmountComponentAtNode=function(o){if(!kp(o))throw Error(s(40));return o._reactRootContainer?(Tl(function(){Cp(null,null,o,!1,function(){o._reactRootContainer=null,o[wa]=null})}),!0):!1},wr.unstable_batchedUpdates=Sy,wr.unstable_renderSubtreeIntoContainer=function(o,c,p,x){if(!kp(p))throw Error(s(200));if(o==null||o._reactInternals===void 0)throw Error(s(38));return Cp(o,c,p,!1,x)},wr.version="18.3.1-next-f1338f8080-20240426",wr}var I2;function CC(){if(I2)return My.exports;I2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),My.exports=q4(),My.exports}var R2;function K4(){if(R2)return Ep;R2=1;var t=CC();return Ep.createRoot=t.createRoot,Ep.hydrateRoot=t.hydrateRoot,Ep}var Q4=K4();const X4=p1(Q4),Tt=t=>typeof t=="string",Lu=()=>{let t,e;const s=new Promise((r,i)=>{t=r,e=i});return s.resolve=t,s.reject=e,s},P2=t=>t==null?"":""+t,Y4=(t,e,s)=>{t.forEach(r=>{e[r]&&(s[r]=e[r])})},J4=/###/g,L2=t=>t&&t.indexOf("###")>-1?t.replace(J4,"."):t,D2=t=>!t||Tt(t),rh=(t,e,s)=>{const r=Tt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(D2(t))return{};const a=L2(r[i]);!t[a]&&s&&(t[a]=new s),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return D2(t)?{}:{obj:t,k:L2(r[i])}},M2=(t,e,s)=>{const{obj:r,k:i}=rh(t,e,Object);if(r!==void 0||e.length===1){r[i]=s;return}let a=e[e.length-1],l=e.slice(0,e.length-1),d=rh(t,l,Object);for(;d.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),d=rh(t,l,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${a}`]!="undefined"&&(d.obj=void 0);d.obj[`${d.k}.${a}`]=s},Z4=(t,e,s,r)=>{const{obj:i,k:a}=rh(t,e,Object);i[a]=i[a]||[],i[a].push(s)},Lf=(t,e)=>{const{obj:s,k:r}=rh(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},eR=(t,e,s)=>{const r=Lf(t,s);return r!==void 0?r:Lf(e,s)},TC=(t,e,s)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Tt(t[r])||t[r]instanceof String||Tt(e[r])||e[r]instanceof String?s&&(t[r]=e[r]):TC(t[r],e[r],s):t[r]=e[r]);return t},Jc=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var tR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const sR=t=>Tt(t)?t.replace(/[&<>"'\/]/g,e=>tR[e]):t;class nR{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const rR=[" ",",","?","!",";"],iR=new nR(20),aR=(t,e,s)=>{e=e||"",s=s||"";const r=rR.filter(l=>e.indexOf(l)<0&&s.indexOf(l)<0);if(r.length===0)return!0;const i=iR.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!i.test(t);if(!a){const l=t.indexOf(s);l>0&&!i.test(t.substring(0,l))&&(a=!0)}return a},s0=(t,e,s=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(s);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let l,d="";for(let u=a;u<r.length;++u)if(u!==a&&(d+=s),d+=r[u],l=i[d],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=l}return i},jh=t=>t==null?void 0:t.replace("_","-"),oR={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var s,r;(r=(s=console==null?void 0:console[t])==null?void 0:s.apply)==null||r.call(s,console,e)}};let lR=class n0{constructor(e,s={}){this.init(e,s)}init(e,s={}){this.prefix=s.prefix||"i18next:",this.logger=e||oR,this.options=s,this.debug=s.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,r,i){return i&&!this.debug?null:(Tt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new n0(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new n0(this.logger,e)}};var na=new lR;class vg{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(s)||0;this.observers[r].set(s,i+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e,...s){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i.apply(i,[e,...s])})}}class F2 extends vg{constructor(e,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,r,i={}){var h,m;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,s],r&&(Array.isArray(r)?d.push(...r):Tt(r)&&a?d.push(...r.split(a)):d.push(r)));const u=Lf(this.data,d);return!u&&!s&&!r&&e.indexOf(".")>-1&&(e=d[0],s=d[1],r=d.slice(2).join(".")),u||!l||!Tt(r)?u:s0((m=(h=this.data)==null?void 0:h[e])==null?void 0:m[s],r,a)}addResource(e,s,r,i,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let d=[e,s];r&&(d=d.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(d=e.split("."),i=s,s=d[1]),this.addNamespaces(s),M2(this.data,d,i),a.silent||this.emit("added",e,s,r,i)}addResources(e,s,r,i={silent:!1}){for(const a in r)(Tt(r[a])||Array.isArray(r[a]))&&this.addResource(e,s,a,r[a],{silent:!0});i.silent||this.emit("added",e,s,r)}addResourceBundle(e,s,r,i,a,l={silent:!1,skipCopy:!1}){let d=[e,s];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=s,s=d[1]),this.addNamespaces(s);let u=Lf(this.data,d)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?TC(u,r,a):u={...u,...r},M2(this.data,d,u),l.silent||this.emit("added",e,s,r)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(i=>s[i]&&Object.keys(s[i]).length>0)}toJSON(){return this.data}}var EC={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,r,i){return t.forEach(a=>{var l,d;e=(d=(l=this.processors[a])==null?void 0:l.process(e,s,r,i))!=null?d:e}),e}};const AC=Symbol("i18next/PATH_KEY");function cR(){const t=[],e=Object.create(null);let s;return e.get=(r,i)=>{var a;return(a=s==null?void 0:s.revoke)==null||a.call(s),i===AC?t:(t.push(i),s=Proxy.revocable(r,e),s.proxy)},Proxy.revocable(Object.create(null),e).proxy}function r0(t,e){var r;const{[AC]:s}=t(cR());return s.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const B2={},$2=t=>!Tt(t)&&typeof t!="boolean"&&typeof t!="number";class Df extends vg{constructor(e,s={}){super(),Y4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=na.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,s={interpolation:{}}){const r={...s};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=s.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!aR(e,r,i);if(l&&!d){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:Tt(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:Tt(a)?[a]:a}}translate(e,s,r){let i=typeof s=="object"?{...s}:s;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=r0(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const g=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return v?a?{res:`${h}${m}${d}`,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${m}${d}`:a?{res:d,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:d;const b=this.resolve(e,i);let _=b==null?void 0:b.res;const N=(b==null?void 0:b.usedKey)||d,C=(b==null?void 0:b.exactUsedKey)||d,R=["[object Number]","[object Function]","[object RegExp]"],D=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,y=i.count!==void 0&&!Tt(i.count),w=Df.hasDefaultValue(i),M=y?this.pluralResolver.getSuffix(g,i.count,i):"",k=i.ordinal&&y?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",S=y&&!i.ordinal&&i.count===0,T=S&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${M}`]||i[`defaultValue${k}`]||i.defaultValue;let F=_;A&&!_&&w&&(F=T);const I=$2(F),B=Object.prototype.toString.apply(F);if(A&&F&&I&&R.indexOf(B)<0&&!(Tt(D)&&Array.isArray(F))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,F,{...i,ns:u}):`key '${d} (${this.language})' returned an object instead of string.`;return a?(b.res=$,b.usedParams=this.getUsedParamsDetails(i),b):$}if(l){const $=Array.isArray(F),H=$?[]:{},z=$?C:N;for(const W in F)if(Object.prototype.hasOwnProperty.call(F,W)){const K=`${z}${l}${W}`;w&&!_?H[W]=this.translate(K,{...i,defaultValue:$2(T)?T[W]:void 0,joinArrays:!1,ns:u}):H[W]=this.translate(K,{...i,joinArrays:!1,ns:u}),H[W]===K&&(H[W]=F[W])}_=H}}else if(A&&Tt(D)&&Array.isArray(_))_=_.join(D),_&&(_=this.extendTranslation(_,e,i,r));else{let $=!1,H=!1;!this.isValidLookup(_)&&w&&($=!0,_=T),this.isValidLookup(_)||(H=!0,_=d);const W=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&H?void 0:_,K=w&&T!==_&&this.options.updateMissing;if(H||$||K){if(this.logger.log(K?"updateKey":"missingKey",g,h,d,K?T:_),l){const U=this.resolve(d,{...i,keySeparator:!1});U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(let U=0;U<se.length;U++)q.push(se[U]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(i.lng||this.language):q.push(i.lng||this.language);const re=(U,Y,ce)=>{var me;const oe=w&&ce!==_?ce:W;this.options.missingKeyHandler?this.options.missingKeyHandler(U,h,Y,oe,K,i):(me=this.backendConnector)!=null&&me.saveMissing&&this.backendConnector.saveMissing(U,h,Y,oe,K,i),this.emit("missingKey",U,h,Y,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?q.forEach(U=>{const Y=this.pluralResolver.getSuffixes(U,i);S&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(ce=>{re([U],d+ce,i[`defaultValue${ce}`]||T)})}):re(q,d,T))}_=this.extendTranslation(_,e,i,b,r),H&&_===d&&this.options.appendNamespaceToMissingKey&&(_=`${h}${m}${d}`),(H||$)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${d}`:d,$?_:void 0,i))}return a?(b.res=_,b.usedParams=this.getUsedParamsDetails(i),b):_}extendTranslation(e,s,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=Tt(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(m){const b=e.match(this.interpolator.nestingRegexp);g=b&&b.length}let v=r.replace&&!Tt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||i.usedLng,r),m){const b=e.match(this.interpolator.nestingRegexp),_=b&&b.length;g<_&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>(a==null?void 0:a[0])===b[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${s[0]}`),null):this.translate(...b,s),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,d=Tt(l)?[l]:l;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=EC.handle(d,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,s={}){let r,i,a,l,d;return Tt(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,s),m=h.key;i=m;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const v=s.count!==void 0&&!Tt(s.count),b=v&&!s.ordinal&&s.count===0,_=s.context!==void 0&&(Tt(s.context)||typeof s.context=="number")&&s.context!=="",N=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);g.forEach(C=>{var R,D;this.isValidLookup(r)||(d=C,!B2[`${N[0]}-${C}`]&&((R=this.utils)!=null&&R.hasLoadedNamespace)&&!((D=this.utils)!=null&&D.hasLoadedNamespace(d))&&(B2[`${N[0]}-${C}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(A=>{var M;if(this.isValidLookup(r))return;l=A;const y=[m];if((M=this.i18nFormat)!=null&&M.addLookupKeys)this.i18nFormat.addLookupKeys(y,m,A,C,s);else{let k;v&&(k=this.pluralResolver.getSuffix(A,s.count,s));const S=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(s.ordinal&&k.indexOf(T)===0&&y.push(m+k.replace(T,this.options.pluralSeparator)),y.push(m+k),b&&y.push(m+S)),_){const F=`${m}${this.options.contextSeparator||"_"}${s.context}`;y.push(F),v&&(s.ordinal&&k.indexOf(T)===0&&y.push(F+k.replace(T,this.options.pluralSeparator)),y.push(F+k),b&&y.push(F+S))}}let w;for(;w=y.pop();)this.isValidLookup(r)||(a=w,r=this.getResource(A,C,w,s))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:l,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,s,r,i):this.resourceStore.getResource(e,s,r,i)}getUsedParamsDetails(e={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Tt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of s)delete i[a]}return i}static hasDefaultValue(e){const s="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&s===r.substring(0,s.length)&&e[r]!==void 0)return!0;return!1}}class O2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=na.create("languageUtils")}getScriptPartFromCode(e){if(e=jh(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=jh(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(Tt(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch(r){}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(r=>{if(s)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(s=i)}),!s&&this.options.supportedLngs&&e.forEach(r=>{if(s)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return s=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),Tt(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let r=e[s];return r||(r=e[this.getScriptPartFromCode(s)]),r||(r=e[this.formatLanguageCode(s)]),r||(r=e[this.getLanguagePartFromCode(s)]),r||(r=e.default),r||[]}toResolveHierarchy(e,s){const r=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],e),i=[],a=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Tt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Tt(e)&&a(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&a(this.formatLanguageCode(l))}),i}}const V2={zero:0,one:1,two:2,few:3,many:4,other:5},U2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class dR{constructor(e,s={}){this.languageUtils=e,this.options=s,this.logger=na.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e,s={}){const r=jh(e==="dev"?"en":e),i=s.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(r,{type:i})}catch(d){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),U2;if(!e.match(/-|_/))return U2;const u=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(u,s)}return this.pluralRulesCache[a]=l,l}needsPlural(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,s,r={}){return this.getSuffixes(e,r).map(i=>`${s}${i}`)}getSuffixes(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>V2[i]-V2[a]).map(i=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,s,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,r))}}const z2=(t,e,s,r=".",i=!0)=>{let a=eR(t,e,s);return!a&&i&&Tt(s)&&(a=s0(t,s,r),a===void 0&&(a=s0(e,s,r))),a},$y=t=>t.replace(/\$/g,"$$$$");class uR{constructor(e={}){var s;this.logger=na.create("interpolator"),this.options=e,this.format=((s=e==null?void 0:e.interpolation)==null?void 0:s.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:l,suffix:d,suffixEscaped:u,formatSeparator:h,unescapeSuffix:m,unescapePrefix:g,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:_,nestingSuffixEscaped:N,nestingOptionsSeparator:C,maxReplaces:R,alwaysFormat:D}=e.interpolation;this.escape=s!==void 0?s:sR,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Jc(a):l||"{{",this.suffix=d?Jc(d):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=v?Jc(v):b||Jc("$t("),this.nestingSuffix=_?Jc(_):N||Jc(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=R||1e3,this.alwaysFormat=D!==void 0?D:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,r)=>(s==null?void 0:s.source)===r?(s.lastIndex=0,s):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,s,r,i){var b;let a,l,d;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=_=>{if(_.indexOf(this.formatSeparator)<0){const D=z2(s,u,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(D,void 0,r,{...i,...s,interpolationkey:_}):D}const N=_.split(this.formatSeparator),C=N.shift().trim(),R=N.join(this.formatSeparator).trim();return this.format(z2(s,u,C,this.options.keySeparator,this.options.ignoreJSONStructure),R,r,{...i,...s,interpolationkey:C})};this.resetRegExp();const m=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=i==null?void 0:i.interpolation)==null?void 0:b.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>$y(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?$y(this.escape(_)):$y(_)}].forEach(_=>{for(d=0;a=_.regex.exec(e);){const N=a[1].trim();if(l=h(N),l===void 0)if(typeof m=="function"){const R=m(e,a,i);l=Tt(R)?R:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))l="";else if(g){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${e}`),l="";else!Tt(l)&&!this.useRawValueToEscape&&(l=P2(l));const C=_.safeValue(l);if(e=e.replace(a[0],C),g?(_.regex.lastIndex+=l.length,_.regex.lastIndex-=a[0].length):_.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,s,r={}){let i,a,l;const d=(u,h)=>{var N;const m=this.nestingOptionsSeparator;if(u.indexOf(m)<0)return u;const g=u.split(new RegExp(`${m}[ ]*{`));let v=`{${g[1]}`;u=g[0],v=this.interpolate(v,l);const b=v.match(/'/g),_=v.match(/"/g);(((N=b==null?void 0:b.length)!=null?N:0)%2===0&&!_||_.length%2!==0)&&(v=v.replace(/'/g,'"'));try{l=JSON.parse(v),h&&(l={...h,...l})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,C),`${u}${m}${v}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];l={...r},l=l.replace&&!Tt(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=s(d.call(this,i[1].trim(),l),l),a&&i[0]===e&&!Tt(a))return a;Tt(a)||(a=P2(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((m,g)=>this.format(m,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const hR=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(l=>{if(l){const[d,...u]=l.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),m=d.trim();s[m]||(s[m]=h),h==="false"&&(s[m]=!1),h==="true"&&(s[m]=!0),isNaN(h)||(s[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:s}},H2=t=>{const e={};return(s,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const l=r+JSON.stringify(a);let d=e[l];return d||(d=t(jh(r),i),e[l]=d),d(s)}},mR=t=>(e,s,r)=>t(jh(s),r)(e);class pR{constructor(e={}){this.logger=na.create("formatter"),this.options=e,this.init(e)}init(e,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const r=s.cacheInBuiltFormats?H2:mR;this.formats={number:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a});return d=>l.format(d)}),currency:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a,style:"currency"});return d=>l.format(d)}),datetime:r((i,a)=>{const l=new Intl.DateTimeFormat(i,{...a});return d=>l.format(d)}),relativetime:r((i,a)=>{const l=new Intl.RelativeTimeFormat(i,{...a});return d=>l.format(d,a.range||"day")}),list:r((i,a)=>{const l=new Intl.ListFormat(i,{...a});return d=>l.format(d)})}}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=H2(s)}format(e,s,r,i={}){const a=s.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(d=>d.indexOf(")")>-1)){const d=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,d)].join(this.formatSeparator)}return a.reduce((d,u)=>{var g;const{formatName:h,formatOptions:m}=hR(u);if(this.formats[h]){let v=d;try{const b=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},_=b.locale||b.lng||i.locale||i.lng||r;v=this.formats[h](d,_,{...m,...i,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${h}`);return d},e)}}const fR=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class gR extends vg{constructor(e,s,r,i={}){var a,l;super(),this.backend=e,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=na.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(a=this.backend)==null?void 0:a.init)==null||l.call(a,r,i.backend,i)}queueLoad(e,s,r,i){const a={},l={},d={},u={};return e.forEach(h=>{let m=!0;s.forEach(g=>{const v=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?l[v]===void 0&&(l[v]=!0):(this.state[v]=1,m=!1,l[v]===void 0&&(l[v]=!0),a[v]===void 0&&(a[v]=!0),u[g]===void 0&&(u[g]=!0)))}),m||(d[h]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(u)}}loaded(e,s,r){const i=e.split("|"),a=i[0],l=i[1];s&&this.emit("failedLoading",a,l,s),!s&&r&&this.store.addResourceBundle(a,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&r&&(this.state[e]=0);const d={};this.queue.forEach(u=>{Z4(u.loaded,[a],l),fR(u,e),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{d[h]||(d[h]={});const m=u.loaded[h];m.length&&m.forEach(g=>{d[h][g]===void 0&&(d[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(u=>!u.done)}read(e,s,r,i=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:r,tried:i,wait:a,callback:l});return}this.readingCalls++;const d=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,r,i+1,a*2,l)},a);return}l(h,m)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,s);h&&typeof h.then=="function"?h.then(m=>d(null,m)).catch(d):d(null,h)}catch(h){d(h)}return}return u(e,s,d)}prepareLoading(e,s,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Tt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Tt(s)&&(s=[s]);const a=this.queueLoad(e,s,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,s,r){this.prepareLoading(e,s,{},r)}reload(e,s,r){this.prepareLoading(e,s,{reload:!0},r)}loadOne(e,s=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(l,d)=>{l&&this.logger.warn(`${s}loading namespace ${a} for language ${i} failed`,l),!l&&d&&this.logger.log(`${s}loaded namespace ${a} for language ${i}`,d),this.loaded(e,l,d)})}saveMissing(e,s,r,i,a,l={},d=()=>{}){var u,h,m,g,v;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(m=this.services)==null?void 0:m.utils)!=null&&g.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const b={...l,isUpdate:a},_=this.backend.create.bind(this.backend);if(_.length<6)try{let N;_.length===5?N=_(e,s,r,i,b):N=_(e,s,r,i),N&&typeof N.then=="function"?N.then(C=>d(null,C)).catch(d):d(null,N)}catch(N){d(N)}else _(e,s,r,i,d,b)}!e||!e[0]||this.store.addResource(e[0],s,r,i)}}}const G2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Tt(t[1])&&(e.defaultValue=t[1]),Tt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(r=>{e[r]=s[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),W2=t=>{var e,s;return Tt(t.ns)&&(t.ns=[t.ns]),Tt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Tt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((s=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:s.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Ap=()=>{},xR=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class Sh extends vg{constructor(e={},s){if(super(),this.options=W2(e),this.services={},this.logger=na,this.modules={external:[]},xR(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(e={},s){this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),e.defaultNS==null&&e.ns&&(Tt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=G2();this.options={...r,...this.options,...W2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?na.init(i(this.modules.logger),this.options):na.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=pR;const m=new O2(this.options);this.store=new F2(this.options.resources,this.options);const g=this.services;g.logger=na,g.resourceStore=this.store,g.languageUtils=m,g.pluralResolver=new dR(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new uR(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new gR(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(b,..._)=>{this.emit(b,..._)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Df(this.services,this.options),this.translator.on("*",(b,..._)=>{this.emit(b,..._)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,s||(s=Ap),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const d=Lu(),u=()=>{const h=(m,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(g),s(m,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),d}loadResources(e,s=Ap){var a,l;let r=s;const i=Tt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const d=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>u(m)),(l=(a=this.options.preload)==null?void 0:a.forEach)==null||l.call(a,h=>u(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,s,r){const i=Lu();return typeof e=="function"&&(r=e,e=void 0),typeof s=="function"&&(r=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),r||(r=Ap),this.services.backendConnector.reload(e,s,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&EC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,s){this.isLanguageChangingTo=e;const r=Lu();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),s&&s(d,(...h)=>this.t(...h))},l=d=>{var m,g;!e&&!d&&this.services.languageDetector&&(d=[]);const u=Tt(d)?d:d&&d[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Tt(d)?[d]:d);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(m=this.services.languageDetector)==null?void 0:m.cacheUserLanguage)==null||g.call(m,h)),this.loadResources(h,v=>{a(v,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,s,r){const i=(a,l,...d)=>{let u;typeof l!="object"?u=this.options.overloadTranslationOptionHandler([a,l].concat(d)):u={...l},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let m;return u.keyPrefix&&Array.isArray(a)?m=a.map(g=>(typeof g=="function"&&(g=r0(g,{...this.options,...l})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=r0(a,{...this.options,...l})),m=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(m,u)};return Tt(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=r,i}t(...e){var s;return(s=this.translator)==null?void 0:s.translate(...e)}exists(...e){var s;return(s=this.translator)==null?void 0:s.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(d,u)=>{const h=this.services.backendConnector.state[`${d}|${u}`];return h===-1||h===0||h===2};if(s.precheck){const d=s.precheck(this,l);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(a,e)))}loadNamespaces(e,s){const r=Lu();return this.options.ns?(Tt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),s&&s(i)}),r):(s&&s(),Promise.resolve())}loadLanguages(e,s){const r=Lu();Tt(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=i.concat(a),this.loadResources(l=>{r.resolve(),s&&s(l)}),r):(s&&s(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const l=new Intl.Locale(e);if(l&&l.getTextInfo){const d=l.getTextInfo();if(d&&d.direction)return d.direction}}catch(l){}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new O2(G2());return e.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},s){return new Sh(e,s)}cloneInstance(e={},s=Ap){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new Sh(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(d=>{a[d]=this[d]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const d=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((m,g)=>(m[g]={...u[h][g]},m),u[h]),u),{});a.store=new F2(d,i),a.services.resourceStore=a.store}return a.translator=new Df(a.services,i),a.translator.on("*",(d,...u)=>{a.emit(d,...u)}),a.init(i,s),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const zn=Sh.createInstance();zn.createInstance=Sh.createInstance;zn.createInstance;zn.dir;zn.init;zn.loadResources;zn.reloadResources;zn.use;zn.changeLanguage;zn.getFixedT;zn.t;zn.exists;zn.setDefaultNamespace;zn.hasLoadedNamespace;zn.loadNamespaces;zn.loadLanguages;const yR=(t,e,s,r)=>{var a,l,d,u;const i=[s,{code:e,...r||{}}];if((l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Yl(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},q2={},i0=(t,e,s,r)=>{Yl(s)&&q2[s]||(Yl(s)&&(q2[s]=new Date),yR(t,e,s,r))},IC=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},a0=(t,e,s)=>{t.loadNamespaces(e,IC(t,s))},K2=(t,e,s,r)=>{if(Yl(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(e)>-1)return a0(t,s,r);s.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,IC(t,r))},vR=(t,e,s={})=>!e.languages||!e.languages.length?(i0(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Yl=t=>typeof t=="string",bR=t=>typeof t=="object"&&t!==null,_R=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,wR={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},jR=t=>wR[t],SR=t=>t.replace(_R,jR);let o0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:SR};const NR=(t={})=>{o0={...o0,...t}},kR=()=>o0;let RC;const CR=t=>{RC=t},TR=()=>RC,ER={type:"3rdParty",init(t){NR(t.options.react),CR(t)}},AR=E.createContext();class IR{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const RR=(t,e)=>{const s=E.useRef();return E.useEffect(()=>{s.current=t},[t,e]),s.current},PC=(t,e,s,r)=>t.getFixedT(e,s,r),PR=(t,e,s,r)=>E.useCallback(PC(t,e,s,r),[t,e,s,r]),no=(t,e={})=>{var y,w,M,k;const{i18n:s}=e,{i18n:r,defaultNS:i}=E.useContext(AR)||{},a=s||r||TR();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new IR),!a){i0(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(F,I)=>Yl(I)?I:bR(I)&&Yl(I.defaultValue)?I.defaultValue:Array.isArray(F)?F[F.length-1]:F,T=[S,{},!1];return T.t=S,T.i18n={},T.ready=!1,T}(y=a.options.react)!=null&&y.wait&&i0(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...kR(),...a.options.react,...e},{useSuspense:d,keyPrefix:u}=l;let h=i||((w=a.options)==null?void 0:w.defaultNS);h=Yl(h)?[h]:h||["translation"],(k=(M=a.reportNamespaces).addUsedNamespaces)==null||k.call(M,h);const m=(a.isInitialized||a.initializedStoreOnce)&&h.every(S=>vR(S,a,l)),g=PR(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),v=()=>g,b=()=>PC(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),[_,N]=E.useState(v);let C=h.join();e.lng&&(C=`${e.lng}${C}`);const R=RR(C),D=E.useRef(!0);E.useEffect(()=>{const{bindI18n:S,bindI18nStore:T}=l;D.current=!0,!m&&!d&&(e.lng?K2(a,e.lng,h,()=>{D.current&&N(b)}):a0(a,h,()=>{D.current&&N(b)})),m&&R&&R!==C&&D.current&&N(b);const F=()=>{D.current&&N(b)};return S&&(a==null||a.on(S,F)),T&&(a==null||a.store.on(T,F)),()=>{D.current=!1,a&&S&&(S==null||S.split(" ").forEach(I=>a.off(I,F))),T&&a&&T.split(" ").forEach(I=>a.store.off(I,F))}},[a,C]),E.useEffect(()=>{D.current&&m&&N(v)},[a,u,m]);const A=[_,a,m];if(A.t=_,A.i18n=a,A.ready=m,m||!m&&!d)return A;throw new Promise(S=>{e.lng?K2(a,e.lng,h,()=>S()):a0(a,h,()=>S())})},LR={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community"},DR={connectedCharacters:{title:"Connected characters",empty:"No characters linked yet. Link a character in your account to see it here.",loginPrompt:"Sign in to see your linked characters.",ctaGuest:"Open start guide",ctaAuthed:"Open linked characters guide",chip:{server:"Server",class:"Class"}}},MR={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}},connectedCharacters:{title:"Connected characters",subtitle:"These game characters are linked to your SFDataHub account.",loading:"Refreshing characters...",empty:{title:"No characters linked yet",description:'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.',cta:"Click to learn how linking works"},actions:{refresh:"Refresh",refreshing:"Refreshing...",unlink:"Disconnect character"},confirmation:{title:"Are you sure you want to unlink this character?",cancel:"Cancel",confirm:"Yes, unlink",confirming:"Unlinking..."},errors:{serviceUnavailable:"Auth service is not configured for unlinking.",unlink:"Could not unlink character."},columns:{character:"Character",server:"Server",playerId:"Player ID",class:"Class",level:"Level",guild:"Guild",lastVerified:"Last linked",source:"Source",actions:"Actions"},method:{discord:"Discord bot"},help:{title:"How does linking work?",show:"Show",hide:"Hide",steps:{link:'Link a character via the Discord bot using the "!connect char" command.',verify:"We match the character to your latest verified scan; keep your game data up to date.",refresh:"After linking, click Refresh here to sync the latest characters from the auth service.",unlink:"You can unlink any character in the Actions column; the source column shows how it was linked."},footnote:"Tip: Click Refresh after linking or unlinking to update this table."}}},FR={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},BR={search:"Search?  /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},$R={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},OR={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},VR={quota:{unlimited:"No limit"}},UR={inputLabel:"Search players, guilds and servers",loading:"Loading",recents:"Recent searches",minCharsHint:"Type at least 3 characters",noResults:"No results",players:"Players",guilds:"Guilds",servers:"Servers",active:"Active",inactive:"Inactive",guildMembers:"{{count}} members",guildMembersUnknown:"Members ?",moreResults:"More results press Enter",recentLabel:"Recent"},zR={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},HR={nav:LR,sidebar:DR,account:MR,tools:FR,topbar:BR,profile:$R,help:OR,uploadCenter:VR,search:UR,footer:zR},GR={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community"},WR={connectedCharacters:{title:"Verknuepfte Charaktere",empty:"Noch keine Charaktere verknuepft. Verknuepfe einen Charakter in deinem Account, damit er hier erscheint.",loginPrompt:"Bitte einloggen, um verknuepfte Charaktere zu sehen.",ctaGuest:"Start-Guide oeffnen",ctaAuthed:"Zum Account-Tab wechseln",chip:{server:"Server",class:"Klasse"}}},qR={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fuer deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}},connectedCharacters:{title:"Verknuepfte Charaktere",subtitle:"Diese Spielcharaktere sind mit deinem SFDataHub-Account verknuepft.",loading:"Charaktere werden aktualisiert...",empty:{title:"Noch keine Charaktere verknuepft",description:'Nutze den Befehl "!connect char" im Discord-Bot, verknuepfe deinen Account und klicke dann hier auf "Refresh".',cta:"Klicke hier, um zu erfahren, wie das Verknuepfen funktioniert"},actions:{refresh:"Refresh",refreshing:"Aktualisiere...",unlink:"Charakter trennen"},confirmation:{title:"Moechtest du diesen Charakter wirklich trennen?",cancel:"Abbrechen",confirm:"Ja, trennen",confirming:"Trenne..."},errors:{serviceUnavailable:"Auth-Service ist fuer das Trennen nicht konfiguriert.",unlink:"Charakter konnte nicht getrennt werden."},columns:{character:"Charakter",server:"Server",playerId:"Player ID",class:"Klasse",level:"Level",guild:"Gilde",lastVerified:"Zuletzt verknuepft",source:"Quelle",actions:"Aktionen"},method:{discord:"Discord-Bot"},help:{title:"Wie funktioniert das Verknuepfen?",show:"Anzeigen",hide:"Ausblenden",steps:{link:'Verknuepfe einen Charakter ueber den Discord-Bot mit dem Befehl "!connect char".',verify:"Wir gleichen den Charakter mit deinem letzten verifizierten Scan ab; halte deine Daten aktuell.",refresh:"Klicke nach dem Verknuepfen auf Refresh, damit die Liste aktualisiert wird.",unlink:"Du kannst jeden Charakter ueber die Spalte Aktionen trennen; die Quelle zeigt, wie er verknuepft wurde."},footnote:"Tipp: Nach dem Verknuepfen oder Trennen immer kurz auf Refresh klicken."}}},KR={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},QR={search:"Suchen?  /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},XR={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},YR={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},JR={quota:{unlimited:"Kein Limit"}},ZR={inputLabel:"Spieler, Gilden und Server suchen",loading:"Ldt?",recents:"Letzte Suchen",minCharsHint:"Mindestens 3 Zeichen eingeben?",noResults:"Keine Treffer",players:"Spieler",guilds:"Gilden",servers:"Server",active:"Aktiv",inactive:"Inaktiv",guildMembers:"{{count}} Mitglieder",guildMembersUnknown:"Mitglieder ?",moreResults:"Mehr Ergebnisse? Enter drcken",recentLabel:"Kuerzlich"},eP={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},tP={nav:GR,sidebar:WR,account:qR,tools:KR,topbar:QR,profile:XR,help:YR,uploadCenter:JR,search:ZR,footer:eP},sP={en:{translation:HR},de:{translation:tP}};zn.use(ER).init({resources:sP,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function Ct(t,e="en"){return zn.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Q2="popstate";function nP(t={}){function e(i,a){let{pathname:l="/",search:d="",hash:u=""}=dc(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),l0("",{pathname:l,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");d=h===-1?u:u.slice(0,h)}return d+"#"+(typeof a=="string"?a:Nh(a))}function r(i,a){Xr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return iP(e,s,r,t)}function Rs(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Xr(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(s){}}}function rP(){return Math.random().toString(36).substring(2,10)}function X2(t,e){return{usr:t.state,key:t.key,idx:e}}function l0(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?dc(e):e,state:s,key:e&&e.key||r||rP()}}function Nh({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function dc(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function iP(t,e,s,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",u=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){d="POP";let C=m(),R=C==null?null:C-h;h=C,u&&u({action:d,location:N.location,delta:R})}function v(C,R){d="PUSH";let D=l0(N.location,C,R);s&&s(D,C),h=m()+1;let A=X2(D,h),y=N.createHref(D);try{l.pushState(A,"",y)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(y)}a&&u&&u({action:d,location:N.location,delta:1})}function b(C,R){d="REPLACE";let D=l0(N.location,C,R);s&&s(D,C),h=m();let A=X2(D,h),y=N.createHref(D);l.replaceState(A,"",y),a&&u&&u({action:d,location:N.location,delta:0})}function _(C){return aP(C)}let N={get action(){return d},get location(){return t(i,l)},listen(C){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Q2,g),u=C,()=>{i.removeEventListener(Q2,g),u=null}},createHref(C){return e(i,C)},createURL:_,encodeLocation(C){let R=_(C);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:b,go(C){return l.go(C)}};return N}function aP(t,e=!1){let s="http://localhost";typeof window!="undefined"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Rs(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Nh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function LC(t,e,s="/"){return oP(t,e,s,!1)}function oP(t,e,s,r){let i=typeof e=="string"?dc(e):e,a=qa(i.pathname||"/",s);if(a==null)return null;let l=DC(t);lP(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=vP(a);d=xP(l[u],h,r)}return d}function DC(t,e=[],s=[],r="",i=!1){let a=(l,d,u=i,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;Rs(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Ha([r,m.relativePath]),v=s.concat(m);l.children&&l.children.length>0&&(Rs(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),DC(l.children,e,v,g,u)),!(l.path==null&&!l.index)&&e.push({path:g,score:fP(g,l.index),routesMeta:v})};return t.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))a(l,d);else for(let h of MC(l.path))a(l,d,!0,h)}),e}function MC(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=MC(r.join("/")),d=[];return d.push(...l.map(u=>u===""?a:[a,u].join("/"))),i&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function lP(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:gP(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var cP=/^:[\w-]+$/,dP=3,uP=2,hP=1,mP=10,pP=-2,Y2=t=>t==="*";function fP(t,e){let s=t.split("/"),r=s.length;return s.some(Y2)&&(r+=pP),e&&(r+=uP),s.filter(i=>!Y2(i)).reduce((i,a)=>i+(cP.test(a)?dP:a===""?hP:mP),r)}function gP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function xP(t,e,s=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],h=d===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=Mf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),v=u.route;if(!g&&h&&s&&!r[r.length-1].route.index&&(g=Mf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Ha([a,g.pathname]),pathnameBase:jP(Ha([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Ha([a,g.pathnameBase]))}return l}function Mf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=yP(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},v)=>{if(m==="*"){let _=d[v]||"";l=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=d[v];return g&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:t}}function yP(t,e=!1,s=!0){Xr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function qa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function bP(t,e="/"){let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?dc(t):t;return{pathname:s?s.startsWith("/")?s:_P(s,e):e,search:SP(r),hash:NP(i)}}function _P(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Oy(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wP(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function g1(t){let e=wP(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function x1(t,e,s,r=!1){let i;typeof t=="string"?i=dc(t):(i={...t},Rs(!i.pathname||!i.pathname.includes("?"),Oy("?","pathname","search",i)),Rs(!i.pathname||!i.pathname.includes("#"),Oy("#","pathname","hash",i)),Rs(!i.search||!i.search.includes("#"),Oy("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=s;else{let g=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?e[g]:"/"}let u=bP(i,d),h=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var Ha=t=>t.join("/").replace(/\/\/+/g,"/"),jP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var FC=["POST","PUT","PATCH","DELETE"];new Set(FC);var CP=["GET",...FC];new Set(CP);var Ud=E.createContext(null);Ud.displayName="DataRouter";var bg=E.createContext(null);bg.displayName="DataRouterState";E.createContext(!1);var BC=E.createContext({isTransitioning:!1});BC.displayName="ViewTransition";var TP=E.createContext(new Map);TP.displayName="Fetchers";var EP=E.createContext(null);EP.displayName="Await";var $i=E.createContext(null);$i.displayName="Navigation";var Wh=E.createContext(null);Wh.displayName="Location";var pi=E.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var y1=E.createContext(null);y1.displayName="RouteError";function AP(t,{relative:e}={}){Rs(zd(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=E.useContext($i),{hash:i,pathname:a,search:l}=qh(t,{relative:e}),d=a;return s!=="/"&&(d=a==="/"?s:Ha([s,a])),r.createHref({pathname:d,search:l,hash:i})}function zd(){return E.useContext(Wh)!=null}function Ir(){return Rs(zd(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Wh).location}var $C="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OC(t){E.useContext($i).static||E.useLayoutEffect(t)}function fi(){let{isDataRoute:t}=E.useContext(pi);return t?GP():IP()}function IP(){Rs(zd(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(Ud),{basename:e,navigator:s}=E.useContext($i),{matches:r}=E.useContext(pi),{pathname:i}=Ir(),a=JSON.stringify(g1(r)),l=E.useRef(!1);return OC(()=>{l.current=!0}),E.useCallback((u,h={})=>{if(Xr(l.current,$C),!l.current)return;if(typeof u=="number"){s.go(u);return}let m=x1(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ha([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,a,i,t])}var RP=E.createContext(null);function PP(t){let e=E.useContext(pi).outlet;return e&&E.createElement(RP.Provider,{value:t},e)}function _g(){let{matches:t}=E.useContext(pi),e=t[t.length-1];return e?e.params:{}}function qh(t,{relative:e}={}){let{matches:s}=E.useContext(pi),{pathname:r}=Ir(),i=JSON.stringify(g1(s));return E.useMemo(()=>x1(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function LP(t,e){return VC(t,e)}function VC(t,e,s,r,i){var D;Rs(zd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=E.useContext($i),{matches:l}=E.useContext(pi),d=l[l.length-1],u=d?d.params:{},h=d?d.pathname:"/",m=d?d.pathnameBase:"/",g=d&&d.route;{let A=g&&g.path||"";UC(h,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=Ir(),b;if(e){let A=typeof e=="string"?dc(e):e;Rs(m==="/"||((D=A.pathname)==null?void 0:D.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${A.pathname}" was given in the \`location\` prop.`),b=A}else b=v;let _=b.pathname||"/",N=_;if(m!=="/"){let A=m.replace(/^\//,"").split("/");N="/"+_.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=LC(t,{pathname:N});Xr(g||C!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Xr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=$P(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Ha([m,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?m:Ha([m,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,s,r,i);return e&&R?E.createElement(Wh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},R):R}function DP(){let t=HP(),e=kP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:a},"ErrorBoundary")," or"," ",E.createElement("code",{style:a},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),s?E.createElement("pre",{style:i},s):null,l)}var MP=E.createElement(DP,null),FP=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?E.createElement(pi.Provider,{value:this.props.routeContext},E.createElement(y1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BP({routeContext:t,match:e,children:s}){let r=E.useContext(Ud);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(pi.Provider,{value:t},s)}function $P(t,e=[],s=null,r=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,l=s==null?void 0:s.errors;if(l!=null){let h=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Rs(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let d=!1,u=-1;if(s)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:g,errors:v}=s,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){d=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,m,g)=>{let v,b=!1,_=null,N=null;s&&(v=l&&m.route.id?l[m.route.id]:void 0,_=m.route.errorElement||MP,d&&(u<0&&g===0?(UC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):u===g&&(b=!0,N=m.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,g+1)),R=()=>{let D;return v?D=_:b?D=N:m.route.Component?D=E.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=h,E.createElement(BP,{match:m,routeContext:{outlet:h,matches:C,isDataRoute:s!=null},children:D})};return s&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?E.createElement(FP,{location:s.location,revalidation:s.revalidation,component:_,error:v,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):R()},null)}function v1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OP(t){let e=E.useContext(Ud);return Rs(e,v1(t)),e}function VP(t){let e=E.useContext(bg);return Rs(e,v1(t)),e}function UP(t){let e=E.useContext(pi);return Rs(e,v1(t)),e}function b1(t){let e=UP(t),s=e.matches[e.matches.length-1];return Rs(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function zP(){return b1("useRouteId")}function HP(){var r;let t=E.useContext(y1),e=VP("useRouteError"),s=b1("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function GP(){let{router:t}=OP("useNavigate"),e=b1("useNavigate"),s=E.useRef(!1);return OC(()=>{s.current=!0}),E.useCallback(async(i,a={})=>{Xr(s.current,$C),s.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var J2={};function UC(t,e,s){!e&&!J2[t]&&(J2[t]=!0,Xr(!1,s))}E.memo(WP);function WP({routes:t,future:e,state:s,unstable_onError:r}){return VC(t,void 0,s,r,e)}function Ul({to:t,replace:e,state:s,relative:r}){Rs(zd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=E.useContext($i);Xr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=E.useContext(pi),{pathname:l}=Ir(),d=fi(),u=x1(t,g1(a),l,r==="path"),h=JSON.stringify(u);return E.useEffect(()=>{d(JSON.parse(h),{replace:e,state:s,relative:r})},[d,h,r,e,s]),null}function zC(t){return PP(t.context)}function xe(t){Rs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qP({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:i,static:a=!1}){Rs(!zd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof s=="string"&&(s=dc(s));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:v="default"}=s,b=E.useMemo(()=>{let _=qa(u,l);return _==null?null:{location:{pathname:_,search:h,hash:m,state:g,key:v},navigationType:r}},[l,u,h,m,g,v,r]);return Xr(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:E.createElement($i.Provider,{value:d},E.createElement(Wh.Provider,{children:e,value:b}))}function KP({children:t,location:e}){return LP(c0(t),e)}function c0(t,e=[]){let s=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let a=[...e,i];if(r.type===E.Fragment){s.push.apply(s,c0(r.props.children,a));return}Rs(r.type===xe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rs(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=c0(r.props.children,a)),s.push(l)}),s}var df="get",uf="application/x-www-form-urlencoded";function wg(t){return t!=null&&typeof t.tagName=="string"}function QP(t){return wg(t)&&t.tagName.toLowerCase()==="button"}function XP(t){return wg(t)&&t.tagName.toLowerCase()==="form"}function YP(t){return wg(t)&&t.tagName.toLowerCase()==="input"}function JP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZP(t,e){return t.button===0&&(!e||e==="_self")&&!JP(t)}function d0(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function eL(t,e){let s=d0(t);return e&&e.forEach((r,i)=>{s.has(i)||e.getAll(i).forEach(a=>{s.append(i,a)})}),s}var Ip=null;function tL(){if(Ip===null)try{new FormData(document.createElement("form"),0),Ip=!1}catch(t){Ip=!0}return Ip}var sL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vy(t){return t!=null&&!sL.has(t)?(Xr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uf}"`),null):t}function nL(t,e){let s,r,i,a,l;if(XP(t)){let d=t.getAttribute("action");r=d?qa(d,e):null,s=t.getAttribute("method")||df,i=Vy(t.getAttribute("enctype"))||uf,a=new FormData(t)}else if(QP(t)||YP(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(r=u?qa(u,e):null,s=t.getAttribute("formmethod")||d.getAttribute("method")||df,i=Vy(t.getAttribute("formenctype"))||Vy(d.getAttribute("enctype"))||uf,a=new FormData(d,t),!tL()){let{name:h,type:m,value:g}=t;if(m==="image"){let v=h?`${h}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else h&&a.append(h,g)}}else{if(wg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=df,r=null,i=uf,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:s.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _1(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function rL(t,e,s){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&qa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function iL(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function oL(t,e,s){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await iL(a,s);return l.links?l.links():[]}return[]}));return uL(r.flat(1).filter(aL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Z2(t,e,s,r,i,a){let l=(u,h)=>s[h]?u.route.id!==s[h].route.id:!0,d=(u,h)=>{var m;return s[h].pathname!==u.pathname||((m=s[h].route.path)==null?void 0:m.endsWith("*"))&&s[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>l(u,h)||d(u,h)):a==="data"?e.filter((u,h)=>{var g;let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=s[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function lL(t,e,{includeHydrateFallback:s}={}){return cL(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function cL(t){return[...new Set(t)]}function dL(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function uL(t,e){let s=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(dL(i));return s.has(a)||(s.add(a),r.push({key:a,link:i})),r},[])}function HC(){let t=E.useContext(Ud);return _1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hL(){let t=E.useContext(bg);return _1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var w1=E.createContext(void 0);w1.displayName="FrameworkContext";function GC(){let t=E.useContext(w1);return _1(t,"You must render this element inside a <HydratedRouter> element"),t}function mL(t,e){let s=E.useContext(w1),[r,i]=E.useState(!1),[a,l]=E.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,v=E.useRef(null);E.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let N=R=>{R.forEach(D=>{l(D.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[t]),E.useEffect(()=>{if(r){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),l(!1)};return s?t!=="intent"?[a,v,{}]:[a,v,{onFocus:Du(d,b),onBlur:Du(u,_),onMouseEnter:Du(h,b),onMouseLeave:Du(m,_),onTouchStart:Du(g,b)}]:[!1,v,{}]}function Du(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function pL({page:t,...e}){let{router:s}=HC(),r=E.useMemo(()=>LC(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?E.createElement(gL,{page:t,matches:r,...e}):null}function fL(t){let{manifest:e,routeModules:s}=GC(),[r,i]=E.useState([]);return E.useEffect(()=>{let a=!1;return oL(t,e,s).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,s]),r}function gL({page:t,matches:e,...s}){let r=Ir(),{manifest:i,routeModules:a}=GC(),{basename:l}=HC(),{loaderData:d,matches:u}=hL(),h=E.useMemo(()=>Z2(t,e,u,i,r,"data"),[t,e,u,i,r]),m=E.useMemo(()=>Z2(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=E.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,N=!1;if(e.forEach(R=>{var A;let D=i.routes[R.route.id];!D||!D.hasLoader||(!h.some(y=>y.route.id===R.route.id)&&R.route.id in d&&((A=a[R.route.id])!=null&&A.shouldRevalidate)||D.hasClientLoader?N=!0:_.add(R.route.id))}),_.size===0)return[];let C=rL(t,l,"data");return N&&_.size>0&&C.searchParams.set("_routes",e.filter(R=>_.has(R.route.id)).map(R=>R.route.id).join(",")),[C.pathname+C.search]},[l,d,r,i,h,e,t,a]),v=E.useMemo(()=>lL(m,i),[m,i]),b=fL(m);return E.createElement(E.Fragment,null,g.map(_=>E.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),v.map(_=>E.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),b.map(({key:_,link:N})=>E.createElement("link",{key:_,nonce:s.nonce,...N})))}function xL(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var WC=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{WC&&(window.__reactRouterVersion="7.9.1")}catch(t){}function yL({basename:t,children:e,window:s}){let r=E.useRef();r.current==null&&(r.current=nP({window:s,v5Compat:!0}));let i=r.current,[a,l]=E.useState({action:i.action,location:i.location}),d=E.useCallback(u=>{E.startTransition(()=>l(u))},[l]);return E.useLayoutEffect(()=>i.listen(d),[i,d]),E.createElement(qP,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var qC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hs=E.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:u,to:h,preventScrollReset:m,viewTransition:g,...v},b){let{basename:_}=E.useContext($i),N=typeof h=="string"&&qC.test(h),C,R=!1;if(typeof h=="string"&&N&&(C=h,WC))try{let T=new URL(window.location.href),F=h.startsWith("//")?new URL(T.protocol+h):new URL(h),I=qa(F.pathname,_);F.origin===T.origin&&I!=null?h=I+F.search+F.hash:R=!0}catch(T){Xr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=AP(h,{relative:i}),[A,y,w]=mL(r,v),M=_L(h,{replace:l,state:d,target:u,preventScrollReset:m,relative:i,viewTransition:g});function k(T){e&&e(T),T.defaultPrevented||M(T)}let S=E.createElement("a",{...v,...w,href:C||D,onClick:R||a?e:k,ref:xL(b,y),target:u,"data-discover":!N&&s==="render"?"true":void 0});return A&&!N?E.createElement(E.Fragment,null,S,E.createElement(pL,{page:D})):S});hs.displayName="Link";var As=E.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:u,...h},m){let g=qh(l,{relative:h.relative}),v=Ir(),b=E.useContext(bg),{navigator:_,basename:N}=E.useContext($i),C=b!=null&&kL(g)&&d===!0,R=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,D=v.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(D=D.toLowerCase(),A=A?A.toLowerCase():null,R=R.toLowerCase()),A&&N&&(A=qa(A,N)||A);const y=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let w=D===R||!i&&D.startsWith(R)&&D.charAt(y)==="/",M=A!=null&&(A===R||!i&&A.startsWith(R)&&A.charAt(R.length)==="/"),k={isActive:w,isPending:M,isTransitioning:C},S=w?e:void 0,T;typeof r=="function"?T=r(k):T=[r,w?"active":null,M?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(k):a;return E.createElement(hs,{...h,"aria-current":S,className:T,ref:m,style:F,to:l,viewTransition:d},typeof u=="function"?u(k):u)});As.displayName="NavLink";var vL=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:i,state:a,method:l=df,action:d,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:g,...v},b)=>{let _=SL(),N=NL(d,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&qC.test(d),D=A=>{if(u&&u(A),A.defaultPrevented)return;A.preventDefault();let y=A.nativeEvent.submitter,w=(y==null?void 0:y.getAttribute("formmethod"))||l;_(y||A.currentTarget,{fetcherKey:e,method:w,navigate:s,replace:i,state:a,relative:h,preventScrollReset:m,viewTransition:g})};return E.createElement("form",{ref:b,method:C,action:N,onSubmit:r?u:D,...v,"data-discover":!R&&t==="render"?"true":void 0})});vL.displayName="Form";function bL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KC(t){let e=E.useContext(Ud);return Rs(e,bL(t)),e}function _L(t,{target:e,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=fi(),u=Ir(),h=qh(t,{relative:a});return E.useCallback(m=>{if(ZP(m,e)){m.preventDefault();let g=s!==void 0?s:Nh(u)===Nh(h);d(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,d,h,s,r,e,t,i,a,l])}function al(t){Xr(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=E.useRef(d0(t)),s=E.useRef(!1),r=Ir(),i=E.useMemo(()=>eL(r.search,s.current?null:e.current),[r.search]),a=fi(),l=E.useCallback((d,u)=>{const h=d0(typeof d=="function"?d(new URLSearchParams(i)):d);s.current=!0,a("?"+h,u)},[a,i]);return[i,l]}var wL=0,jL=()=>`__${String(++wL)}__`;function SL(){let{router:t}=KC("useSubmit"),{basename:e}=E.useContext($i),s=zP();return E.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:u,body:h}=nL(r,e);if(i.navigate===!1){let m=i.fetcherKey||jL();await t.fetch(m,s,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,s])}function NL(t,{relative:e}={}){let{basename:s}=E.useContext($i),r=E.useContext(pi);Rs(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...qh(t||".",{relative:e})},l=Ir();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),u=d.getAll("index");if(u.some(m=>m==="")){d.delete("index"),u.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:Ha([s,a.pathname])),Nh(a)}function kL(t,{relative:e}={}){let s=E.useContext(BC);Rs(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=KC("useViewTransitionState"),i=qh(t,{relative:e});if(!s.isTransitioning)return!1;let a=qa(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=qa(s.nextLocation.pathname,r)||s.nextLocation.pathname;return Mf(i.pathname,l)!=null||Mf(i.pathname,a)!=null}var CL=CC();const TL=p1(CL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AL=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),ej=t=>{const e=AL(t);return e.charAt(0).toUpperCase()+e.slice(1)},QC=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),IL=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},u)=>E.createElement("svg",{ref:u,...RL,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:QC("lucide",i),...!a&&!IL(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,m])=>E.createElement(h,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>{const s=E.forwardRef(({className:r,...i},a)=>E.createElement(PL,{ref:a,iconNode:e,className:QC(`lucide-${EL(ej(t))}`,`lucide-${t}`,r),...i}));return s.displayName=ej(t),s};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],jg=St("aperture",LL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ML=St("arrow-up-right",DL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BL=St("ban",FL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],OL=St("bell",$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],UL=St("book-open",VL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],HL=St("chart-column",zL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],WL=St("chevron-right",GL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ih=St("circle-alert",qL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QL=St("circle-check",KL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],hf=St("circle-dot",XL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JL=St("circle-user-round",YL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],e6=St("clock-3",ZL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],s6=St("cloud-upload",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],r6=St("compass",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],a6=St("database",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],XC=St("diamond",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],c6=St("file-text",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],u6=St("folder-search",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],m6=St("globe",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],YC=St("hexagon",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],g6=St("house",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],y6=St("layers",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],b6=St("layout-dashboard",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ko=St("loader-circle",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],j6=St("messages-square",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],N6=St("pencil",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],C6=St("pin-off",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],E6=St("pin",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Sg=St("refresh-ccw",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],R6=St("scroll-text",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],u0=St("search",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],D6=St("server-cog",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F6=St("settings",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],JC=St("shapes",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ZC=St("shield-alert",$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],V6=St("shield-check",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],eT=St("shield-off",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uc=St("shield",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],G6=St("square-activity",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],q6=St("star",W6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],Q6=St("sticky-note",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Y6=St("trash-2",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],j1=St("triangle-alert",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],eD=St("trophy",Z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sD=St("upload",tD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ng=St("users",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],iD=St("wrench",rD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tT=St("zap",aD),oD="_topbar_1lc6k_3",lD="_topbarLeft_1lc6k_39",cD="_searchWrap_1lc6k_55",dD="_topbarRight_1lc6k_109",uD="_ico_1lc6k_125",hD="_btnIco_1lc6k_139",mD="_pill_1lc6k_173",pD="_pillActive_1lc6k_195",fD="_onlyExpanded_1lc6k_203",gD="_topbarNav_1lc6k_205",xD="_topbarLink_1lc6k_215",yD="_upload_1lc6k_225",vD="_label_1lc6k_255",bD="_avatarBtn_1lc6k_261",_D="_avatar_1lc6k_261",wD="_avatarSpinnerShell_1lc6k_289",jD="_avatarSpinner_1lc6k_289",SD="_srOnly_1lc6k_325",ND="_accountRoot_1lc6k_351",kD="_accountDropdown_1lc6k_359",CD="_accountHeader_1lc6k_389",TD="_accountName_1lc6k_401",ED="_accountSub_1lc6k_413",AD="_accountStatusText_1lc6k_423",ID="_accountPrimary_1lc6k_433",RD="_accountHint_1lc6k_455",PD="_accountItem_1lc6k_465",LD="_accountDivider_1lc6k_495",DD="_accountMiniAvatar_1lc6k_507",MD="_accountLogout_1lc6k_519",Ot={topbar:oD,topbarLeft:lD,searchWrap:cD,topbarRight:dD,ico:uD,btnIco:hD,pill:mD,pillActive:pD,onlyExpanded:fD,topbarNav:gD,topbarLink:xD,upload:yD,label:vD,avatarBtn:bD,avatar:_D,avatarSpinnerShell:wD,avatarSpinner:jD,srOnly:SD,accountRoot:ND,accountDropdown:kD,accountHeader:CD,accountName:TD,accountSub:ED,accountStatusText:AD,accountPrimary:ID,accountHint:RD,accountItem:PD,accountDivider:LD,accountMiniAvatar:DD,accountLogout:MD},pa="https://auth.sfdatahub.com",FD=`${pa}/auth/firebase-token`;async function BD(){var r,i;const t=await fetch(FD,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),s=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!s)throw new Error("Firebase token missing in response");return s}var tj={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},$D=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const i=t[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],l=t[s++],d=t[s++],u=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[s++],l=t[s++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=a>>2,g=(a&3)<<4|d>>4;let v=(d&15)<<2|h>>6,b=h&63;u||(b=64,l||(v=64)),r.push(s[m],s[g],s[v],s[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$D(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],d=i<t.length?s[t.charAt(i)]:0;++i;const h=i<t.length?s[t.charAt(i)]:64;++i;const g=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||d==null||h==null||g==null)throw new OD;const v=a<<2|d>>4;if(r.push(v),h!==64){const b=d<<4&240|h>>2;if(r.push(b),g!==64){const _=h<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VD=function(t){const e=sT(t);return nT.encodeByteArray(e,!0)},Ff=function(t){return VD(t).replace(/\./g,"")},rT=function(t){try{return nT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=()=>UD().__FIREBASE_DEFAULTS__,HD=()=>{if(typeof process=="undefined"||typeof tj=="undefined")return;const t=tj.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GD=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const e=t&&rT(t[1]);return e&&JSON.parse(e)},kg=()=>{try{return zD()||HD()||GD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iT=t=>{var e,s;return(s=(e=kg())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},WD=t=>{const e=iT(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},aT=()=>{var t;return(t=kg())===null||t===void 0?void 0:t.config},oT=t=>{var e;return(e=kg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ff(JSON.stringify(s)),Ff(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QD(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function XD(){var t;const e=(t=kg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(s){return!1}}function YD(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function JD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e8(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t8(){return!XD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s8(){try{return typeof indexedDB=="object"}catch(t){return!1}}function n8(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="FirebaseError";class ro extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=r8,Object.setPrototypeOf(this,ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kh.prototype.create)}}class Kh{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?i8(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new ro(i,d,r)}}function i8(t,e){return t.replace(a8,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const a8=/\{\$([^}]+)}/g;function o8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bf(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(sj(a)&&sj(l)){if(!Bf(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function sj(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function l8(t,e){const s=new c8(t,e);return s.subscribe.bind(s)}class c8{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");d8(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=Uy),i.error===void 0&&(i.error=Uy),i.complete===void 0&&(i.complete=Uy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(l){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d8(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function Uy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){return t&&t._delegate?t._delegate:t}class sc{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new qD;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m8(e))try{this.getOrInitializeService({instanceIdentifier:zl})}catch(s){}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=zl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zl){return this.instances.has(e)}getOptions(e=zl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,s){var r;const i=this.normalizeInstanceIdentifier(s),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h8(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=zl){return this.component?this.component.multipleInstances?e:zl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h8(t){return t===zl?void 0:t}function m8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new u8(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Zt||(Zt={}));const f8={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},g8=Zt.INFO,x8={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},y8=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=x8[e];if(i)console[i](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class S1{constructor(e){this.name=e,this._logLevel=g8,this._logHandler=y8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const v8=(t,e)=>e.some(s=>t instanceof s);let nj,rj;function b8(){return nj||(nj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _8(){return rj||(rj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,h0=new WeakMap,cT=new WeakMap,zy=new WeakMap,N1=new WeakMap;function w8(t){const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{s(Qo(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(s=>{s instanceof IDBCursor&&lT.set(s,t)}).catch(()=>{}),N1.set(e,t),e}function j8(t){if(h0.has(t))return;const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{s(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});h0.set(t,e)}let m0={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return h0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cT.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Qo(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S8(t){m0=t(m0)}function N8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(Hy(this),e,...s);return cT.set(r,e.sort?e.sort():[e]),Qo(r)}:_8().includes(t)?function(...e){return t.apply(Hy(this),e),Qo(lT.get(this))}:function(...e){return Qo(t.apply(Hy(this),e))}}function k8(t){return typeof t=="function"?N8(t):(t instanceof IDBTransaction&&j8(t),v8(t,b8())?new Proxy(t,m0):t)}function Qo(t){if(t instanceof IDBRequest)return w8(t);if(zy.has(t))return zy.get(t);const e=k8(t);return e!==t&&(zy.set(t,e),N1.set(e,t)),e}const Hy=t=>N1.get(t);function C8(t,e,{blocked:s,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=Qo(l);return r&&l.addEventListener("upgradeneeded",u=>{r(Qo(l.result),u.oldVersion,u.newVersion,Qo(l.transaction),u)}),s&&l.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const T8=["get","getKey","getAll","getAllKeys","count"],E8=["put","add","delete","clear"],Gy=new Map;function ij(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=E8.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||T8.includes(s)))return;const a=async function(l,...d){const u=this.transaction(l,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[s](...d),i&&u.done]))[0]};return Gy.set(e,a),a}S8(t=>({...t,get:(e,s,r)=>ij(e,s)||t.get(e,s,r),has:(e,s)=>!!ij(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(I8(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function I8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const p0="@firebase/app",aj="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new S1("@firebase/app"),R8="@firebase/app-compat",P8="@firebase/analytics-compat",L8="@firebase/analytics",D8="@firebase/app-check-compat",M8="@firebase/app-check",F8="@firebase/auth",B8="@firebase/auth-compat",$8="@firebase/database",O8="@firebase/data-connect",V8="@firebase/database-compat",U8="@firebase/functions",z8="@firebase/functions-compat",H8="@firebase/installations",G8="@firebase/installations-compat",W8="@firebase/messaging",q8="@firebase/messaging-compat",K8="@firebase/performance",Q8="@firebase/performance-compat",X8="@firebase/remote-config",Y8="@firebase/remote-config-compat",J8="@firebase/storage",Z8="@firebase/storage-compat",eM="@firebase/firestore",tM="@firebase/vertexai-preview",sM="@firebase/firestore-compat",nM="firebase",rM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="[DEFAULT]",iM={[p0]:"fire-core",[R8]:"fire-core-compat",[L8]:"fire-analytics",[P8]:"fire-analytics-compat",[M8]:"fire-app-check",[D8]:"fire-app-check-compat",[F8]:"fire-auth",[B8]:"fire-auth-compat",[$8]:"fire-rtdb",[O8]:"fire-data-connect",[V8]:"fire-rtdb-compat",[U8]:"fire-fn",[z8]:"fire-fn-compat",[H8]:"fire-iid",[G8]:"fire-iid-compat",[W8]:"fire-fcm",[q8]:"fire-fcm-compat",[K8]:"fire-perf",[Q8]:"fire-perf-compat",[X8]:"fire-rc",[Y8]:"fire-rc-compat",[J8]:"fire-gcs",[Z8]:"fire-gcs-compat",[eM]:"fire-fst",[sM]:"fire-fst-compat",[tM]:"fire-vertex","fire-js":"fire-js",[nM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,aM=new Map,g0=new Map;function oj(t,e){try{t.container.addComponent(e)}catch(s){Ka.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function kd(t){const e=t.name;if(g0.has(e))return Ka.debug(`There were multiple attempts to register component ${e}.`),!1;g0.set(e,t);for(const s of kh.values())oj(s,t);for(const s of aM.values())oj(s,t);return!0}function k1(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function $a(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new Kh("app","Firebase",oM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=rM;function dT(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:f0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xo.create("bad-app-name",{appName:String(i)});if(s||(s=aT()),!s)throw Xo.create("no-options");const a=kh.get(i);if(a){if(Bf(s,a.options)&&Bf(r,a.config))return a;throw Xo.create("duplicate-app",{appName:i})}const l=new p8(i);for(const u of g0.values())l.addComponent(u);const d=new lM(s,r,l);return kh.set(i,d),d}function C1(t=f0){const e=kh.get(t);if(!e&&t===f0&&aT())return dT();if(!e)throw Xo.create("no-app",{appName:t});return e}function cM(){return Array.from(kh.values())}function Yo(t,e,s){var r;let i=(r=iM[t])!==null&&r!==void 0?r:t;s&&(i+=`-${s}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ka.warn(d.join(" "));return}kd(new sc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="firebase-heartbeat-database",uM=1,Ch="firebase-heartbeat-store";let Wy=null;function uT(){return Wy||(Wy=C8(dM,uM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ch)}catch(s){console.warn(s)}}}}).catch(t=>{throw Xo.create("idb-open",{originalErrorMessage:t.message})})),Wy}async function hM(t){try{const s=(await uT()).transaction(Ch),r=await s.objectStore(Ch).get(hT(t));return await s.done,r}catch(e){if(e instanceof ro)Ka.warn(e.message);else{const s=Xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ka.warn(s.message)}}}async function lj(t,e){try{const r=(await uT()).transaction(Ch,"readwrite");await r.objectStore(Ch).put(e,hT(t)),await r.done}catch(s){if(s instanceof ro)Ka.warn(s.message);else{const r=Xo.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Ka.warn(r.message)}}}function hT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=1024,pM=720*60*60*1e3;class fM{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new xM(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=cj();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=pM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ka.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=cj(),{heartbeatsToSend:r,unsentEntries:i}=gM(this._heartbeatsCache.heartbeats),a=Ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return Ka.warn(s),""}}}function cj(){return new Date().toISOString().substring(0,10)}function gM(t,e=mM){const s=[];let r=t.slice();for(const i of t){const a=s.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),dj(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),dj(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class xM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s8()?n8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await hM(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return lj(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return lj(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dj(t){return Ff(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t){kd(new sc("platform-logger",e=>new A8(e),"PRIVATE")),kd(new sc("heartbeat",e=>new fM(e),"PRIVATE")),Yo(p0,aj,t),Yo(p0,aj,"esm2017"),Yo("fire-js","")}yM("");var vM="firebase",bM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo(vM,bM,"app");function T1(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function mT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _M=mT,pT=new Kh("auth","Firebase",mT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new S1("@firebase/auth");function wM(t,...e){$f.logLevel<=Zt.WARN&&$f.warn(`Auth (${Hd}): ${t}`,...e)}function mf(t,...e){$f.logLevel<=Zt.ERROR&&$f.error(`Auth (${Hd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t,...e){throw E1(t,...e)}function ra(t,...e){return E1(t,...e)}function fT(t,e,s){const r=Object.assign(Object.assign({},_M()),{[e]:s});return new Kh("auth","Firebase",r).create(e,{appName:t.name})}function Jo(t){return fT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E1(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return pT.create(t,...e)}function Et(t,e,...s){if(!t)throw E1(e,...s)}function Oa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mf(e),new Error(e)}function Xa(t,e){t||Oa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jM(){return uj()==="http:"||uj()==="https:"}function uj(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jM()||JD()||"connection"in navigator)?navigator.onLine:!0}function NM(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,s){this.shortDelay=e,this.longDelay=s,Xa(s>e,"Short delay should be less than long delay!"),this.isMobile=QD()||ZD()}get(){return SM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){Xa(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new Xh(3e4,6e4);function Cg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gd(t,e,s,r,i={}){return xT(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=Qh(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return YD()||(h.referrerPolicy="no-referrer"),gT.fetch()(vT(t,t.config.apiHost,s,d),h)})}async function xT(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kM),e);try{const i=new TM(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Rp(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rp(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw Rp(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw Rp(t,"user-disabled",l);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw fT(t,m,h);Qa(t,m)}}catch(i){if(i instanceof ro)throw i;Qa(t,"network-request-failed",{message:String(i)})}}async function yT(t,e,s,r,i={}){const a=await Gd(t,e,s,r,i);return"mfaPendingCredential"in a&&Qa(t,"multi-factor-auth-required",{_serverResponse:a}),a}function vT(t,e,s,r){const i=`${e}${s}?${r}`;return t.config.emulator?A1(t.config,i):`${t.config.apiScheme}://${i}`}class TM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(ra(this.auth,"network-request-failed")),CM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rp(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=ra(t,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){return Gd(t,"POST","/v1/accounts:delete",e)}async function bT(t,e){return Gd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function AM(t,e=!1){const s=pn(t),r=await s.getIdToken(e),i=I1(r);Et(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:ah(qy(i.auth_time)),issuedAtTime:ah(qy(i.iat)),expirationTime:ah(qy(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function qy(t){return Number(t)*1e3}function I1(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const i=rT(s);return i?JSON.parse(i):(mf("Failed to decode base64 JWT payload"),null)}catch(i){return mf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hj(t){const e=I1(t);return Et(e,"internal-error"),Et(typeof e.exp!="undefined","internal-error"),Et(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof ro&&IM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(t){var e;const s=t.auth,r=await t.getIdToken(),i=await Th(t,bT(s,{idToken:r}));Et(i==null?void 0:i.users.length,s,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?_T(a.providerUserInfo):[],d=LM(t.providerData,l),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),m=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new y0(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function PM(t){const e=pn(t);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _T(t){return t.map(e=>{var{providerId:s}=e,r=T1(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e){const s=await xT(t,{},async()=>{const r=Qh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=vT(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",gT.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function MM(t,e){return Gd(t,"POST","/v2/accounts:revokeToken",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken!="undefined","internal-error"),Et(typeof e.refreshToken!="undefined","internal-error");const s="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):hj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const s=hj(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:a}=await DM(e,s);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:a}=s,l=new yd;return r&&(Et(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Et(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Et(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yd,this.toJSON())}_performRefresh(){return Oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){Et(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Va{constructor(e){var{uid:s,auth:r,stsTokenManager:i}=e,a=T1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new y0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const s=await Th(this,this.stsTokenManager.getToken(this.auth,e));return Et(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return AM(this,e)}reload(){return PM(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Va(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($a(this.auth.app))return Promise.reject(Jo(this.auth));const e=await this.getIdToken();return await Th(this,EM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,i,a,l,d,u,h,m;const g=(r=s.displayName)!==null&&r!==void 0?r:void 0,v=(i=s.email)!==null&&i!==void 0?i:void 0,b=(a=s.phoneNumber)!==null&&a!==void 0?a:void 0,_=(l=s.photoURL)!==null&&l!==void 0?l:void 0,N=(d=s.tenantId)!==null&&d!==void 0?d:void 0,C=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,R=(h=s.createdAt)!==null&&h!==void 0?h:void 0,D=(m=s.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:A,emailVerified:y,isAnonymous:w,providerData:M,stsTokenManager:k}=s;Et(A&&k,e,"internal-error");const S=yd.fromJSON(this.name,k);Et(typeof A=="string",e,"internal-error"),Ro(g,e.name),Ro(v,e.name),Et(typeof y=="boolean",e,"internal-error"),Et(typeof w=="boolean",e,"internal-error"),Ro(b,e.name),Ro(_,e.name),Ro(N,e.name),Ro(C,e.name),Ro(R,e.name),Ro(D,e.name);const T=new Va({uid:A,auth:e,email:v,emailVerified:y,displayName:g,isAnonymous:w,photoURL:_,phoneNumber:b,tenantId:N,stsTokenManager:S,createdAt:R,lastLoginAt:D});return M&&Array.isArray(M)&&(T.providerData=M.map(F=>Object.assign({},F))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,s,r=!1){const i=new yd;i.updateFromServerResponse(s);const a=new Va({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Of(a),a}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];Et(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?_T(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new yd;d.updateFromIdToken(r);const u=new Va({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new y0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new Map;function Ua(t){Xa(t instanceof Function,"Expected a class definition");let e=mj.get(t);return e?(Xa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mj.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}wT.type="NONE";const pj=wT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t,e,s){return`firebase:${t}:${e}:${s}`}class vd{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=pf(this.userKey,i.apiKey,a),this.fullPersistenceKey=pf("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Va._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new vd(Ua(pj),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Ua(pj);const l=pf(r,e.config.apiKey,e.name);let d=null;for(const h of s)try{const m=await h._get(l);if(m){const g=Va._fromJSON(e,m);h!==a&&(d=g),a=h;break}}catch(m){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new vd(a,e,r):(a=u[0],d&&await a._set(l,d.toJSON()),await Promise.all(s.map(async h=>{if(h!==a)try{await h._remove(l)}catch(m){}})),new vd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TT(e))return"Blackberry";if(ET(e))return"Webos";if(ST(e))return"Safari";if((e.includes("chrome/")||NT(e))&&!e.includes("edge/"))return"Chrome";if(CT(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jT(t=er()){return/firefox\//i.test(t)}function ST(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NT(t=er()){return/crios\//i.test(t)}function kT(t=er()){return/iemobile/i.test(t)}function CT(t=er()){return/android/i.test(t)}function TT(t=er()){return/blackberry/i.test(t)}function ET(t=er()){return/webos/i.test(t)}function R1(t=er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FM(t=er()){var e;return R1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BM(){return e8()&&document.documentMode===10}function AT(t=er()){return R1(t)||CT(t)||ET(t)||TT(t)||/windows phone/i.test(t)||kT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e=[]){let s;switch(t){case"Browser":s=fj(er());break;case"Worker":s=`${fj(er())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Hd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=a=>new Promise((l,d)=>{try{const u=e(a);l(u)}catch(u){d(u)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e={}){return Gd(t,"GET","/v2/passwordPolicy",Cg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=6;class UM{constructor(e){var s,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=l.minPasswordLength)!==null&&s!==void 0?s:VM,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,i,a,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gj(this),this.idTokenSubscription=new gj(this),this.beforeStateQueue=new $M(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Ua(s)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await vd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await bT(this,{idToken:e}),r=await Va._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if($a(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($a(this.app))return Promise.reject(Jo(this));const s=e?pn(e):null;return s&&Et(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $a(this.app)?Promise.reject(Jo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $a(this.app)?Promise.reject(Jo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OM(this),s=new UM(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kh("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await MM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Ua(e)||this._popupRedirectResolver;Et(s,this,"argument-error"),this.redirectPersistenceManager=await vd.create(this,[Ua(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,r,i);return()=>{l=!0,u()}}else{const u=e.addObserver(s);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&wM(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function Tg(t){return pn(t)}class gj{constructor(e){this.auth=e,this.observer=null,this.addObserver=l8(s=>this.observer=s)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HM(t){P1=t}function GM(t){return P1.loadJS(t)}function WM(){return P1.gapiScript}function qM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t,e){const s=k1(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(Bf(a,e!=null?e:{}))return i;Qa(i,"already-initialized")}return s.initialize({options:e})}function QM(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(Ua);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XM(t,e,s){const r=Tg(t);Et(r._canInitEmulator,r,"emulator-config-failed"),Et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=RT(e),{host:l,port:d}=YM(e),u=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),JM()}function RT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YM(t){const e=RT(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:xj(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:xj(l)}}}function xj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JM(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Oa("not implemented")}_getIdTokenResponse(e){return Oa("not implemented")}_linkToIdToken(e,s){return Oa("not implemented")}_getReauthenticationResolver(e){return Oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t,e){return yT(t,"POST","/v1/accounts:signInWithIdp",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="http://localhost";class nc extends PT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new nc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Qa("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=s,a=T1(s,["providerId","signInMethod"]);if(!r||!i)return null;const l=new nc(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const s=this.buildRequest();return bd(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,bd(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,bd(e,s)}buildRequest(){const e={requestUri:ZM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Qh(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends LT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Yh{constructor(){super("facebook.com")}static credential(e){return nc._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch(s){return null}}}Oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return nc._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Vo.credential(s,r)}catch(i){return null}}}Vo.GOOGLE_SIGN_IN_METHOD="google.com";Vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Yh{constructor(){super("github.com")}static credential(e){return nc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch(s){return null}}}Uo.GITHUB_SIGN_IN_METHOD="github.com";Uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Yh{constructor(){super("twitter.com")}static credential(e,s){return nc._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return zo.credential(s,r)}catch(i){return null}}}zo.TWITTER_SIGN_IN_METHOD="twitter.com";zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const a=await Va._fromIdTokenResponse(e,r,i),l=yj(r);return new rc({user:a,providerId:l,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=yj(r);return new rc({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function yj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends ro{constructor(e,s,r,i){var a;super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new Vf(e,s,r,i)}}function DT(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vf._fromErrorAndOperation(t,a,e,r):a})}async function e9(t,e,s=!1){const r=await Th(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return rc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t9(t,e,s=!1){const{auth:r}=t;if($a(r.app))return Promise.reject(Jo(r));const i="reauthenticate";try{const a=await Th(t,DT(r,i,e,t),s);Et(a.idToken,r,"internal-error");const l=I1(a.idToken);Et(l,r,"internal-error");const{sub:d}=l;return Et(t.uid===d,r,"user-mismatch"),rc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(t,e,s=!1){if($a(t.app))return Promise.reject(Jo(t));const r="signIn",i=await DT(t,r,e),a=await rc._fromIdTokenResponse(t,r,i);return s||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n9(t,e){return yT(t,"POST","/v1/accounts:signInWithCustomToken",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9(t,e){if($a(t.app))return Promise.reject(Jo(t));const s=Tg(t),r=await n9(s,{token:e,returnSecureToken:!0}),i=await rc._fromIdTokenResponse(s,"signIn",r);return await s._updateCurrentUser(i.user),i}function i9(t,e,s,r){return pn(t).onIdTokenChanged(e,s,r)}function a9(t,e,s){return pn(t).beforeAuthStateChanged(e,s)}function o9(t,e,s,r){return pn(t).onAuthStateChanged(e,s,r)}function l9(t){return pn(t).signOut()}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=1e3,d9=10;class FT extends MT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!s&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);BM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,d9):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},c9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}FT.type="LOCAL";const u9=FT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT extends MT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}BT.type="SESSION";const $T=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new Eg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:a}=s.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async h=>h(s.origin,a)),u=await h9(d);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,u)=>{const h=L1("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(v.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(){return window}function p9(t){ia().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){return typeof ia().WorkerGlobalScope!="undefined"&&typeof ia().importScripts=="function"}async function f9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function g9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x9(){return OT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firebaseLocalStorageDb",y9=1,zf="firebaseLocalStorage",UT="fbase_key";class Jh{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ag(t,e){return t.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function v9(){const t=indexedDB.deleteDatabase(VT);return new Jh(t).toPromise()}function v0(){const t=indexedDB.open(VT,y9);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zf,{keyPath:UT})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zf)?e(r):(r.close(),await v9(),e(await v0()))})})}async function vj(t,e,s){const r=Ag(t,!0).put({[UT]:e,value:s});return new Jh(r).toPromise()}async function b9(t,e){const s=Ag(t,!1).get(e),r=await new Jh(s).toPromise();return r===void 0?null:r.value}function bj(t,e){const s=Ag(t,!0).delete(e);return new Jh(s).toPromise()}const _9=800,w9=3;class zT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v0(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>w9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eg._getInstance(x9()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await f9(),!this.activeServiceWorker)return;this.sender=new m9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(s){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v0();return await vj(e,Uf,"1"),await bj(e,Uf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>vj(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>b9(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>bj(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Ag(i,!1).getAll();return new Jh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zT.type="LOCAL";const j9=zT;new Xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t,e){return e?Ua(e):(Et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends PT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bd(e,this._buildIdpRequest())}_linkToIdToken(e,s){return bd(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return bd(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function N9(t){return s9(t.auth,new D1(t),t.bypassAuthState)}function k9(t){const{auth:e,user:s}=t;return Et(s,e,"internal-error"),t9(s,new D1(t),t.bypassAuthState)}async function C9(t){const{auth:e,user:s}=t;return Et(s,e,"internal-error"),e9(s,new D1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,s,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:s,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N9;case"linkViaPopup":case"linkViaRedirect":return C9;case"reauthViaPopup":case"reauthViaRedirect":return k9;default:Qa(this.auth,"internal-error")}}resolve(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=new Xh(2e3,1e4);class cd extends HT{constructor(e,s,r,i,a){super(e,s,i,a),this.provider=r,this.authWindow=null,this.pollId=null,cd.currentPopupAction&&cd.currentPopupAction.cancel(),cd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){Xa(this.filter.length===1,"Popup operations only handle one event");const e=L1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ra(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ra(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ra(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T9.get())};e()}}cd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="pendingRedirect",ff=new Map;class A9 extends HT{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=ff.get(this.auth._key());if(!e){try{const r=await I9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}ff.set(this.auth._key(),e)}return this.bypassAuthState||ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I9(t,e){const s=L9(e),r=P9(t);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function R9(t,e){ff.set(t._key(),e)}function P9(t){return Ua(t._redirectPersistence)}function L9(t){return pf(E9,t.config.apiKey,t.name)}async function D9(t,e,s=!1){if($a(t.app))return Promise.reject(Jo(t));const r=Tg(t),i=S9(r,e),l=await new A9(r,i,s).execute();return l&&!s&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=600*1e3;class F9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B9(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!GT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(ra(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M9&&this.cachedEventUids.clear(),this.cachedEventUids.has(_j(e))}saveEventToCache(e){this.cachedEventUids.add(_j(e)),this.lastProcessedEventTime=Date.now()}}function _j(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $9(t,e={}){return Gd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V9=/^https?/;async function U9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $9(t);for(const s of e)try{if(z9(s))return}catch(r){}Qa(t,"unauthorized-domain")}function z9(t){const e=x0(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&l.hostname===r}if(!V9.test(s))return!1;if(O9.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=new Xh(3e4,6e4);function wj(){const t=ia().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function G9(t){return new Promise((e,s)=>{var r,i,a;function l(){wj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wj(),s(ra(t,"network-request-failed"))},timeout:H9.get()})}if(!((i=(r=ia().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ia().gapi)===null||a===void 0)&&a.load)l();else{const d=qM("iframefcb");return ia()[d]=()=>{gapi.load?l():s(ra(t,"network-request-failed"))},GM(`${WM()}?onload=${d}`).catch(u=>s(u))}}).catch(e=>{throw gf=null,e})}let gf=null;function W9(t){return gf=gf||G9(t),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=new Xh(5e3,15e3),K9="__/auth/iframe",Q9="emulator/auth/iframe",X9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J9(t){const e=t.config;Et(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?A1(e,Q9):`https://${t.config.authDomain}/${K9}`,r={apiKey:e.apiKey,appName:t.name,v:Hd},i=Y9.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${s}?${Qh(r).slice(1)}`}async function Z9(t){const e=await W9(t),s=ia().gapi;return Et(s,t,"internal-error"),e.open({where:document.body,url:J9(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X9,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=ra(t,"network-request-failed"),d=ia().setTimeout(()=>{a(l)},q9.get());function u(){ia().clearTimeout(d),i(r)}r.ping(u).then(u,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tF=500,sF=600,nF="_blank",rF="http://localhost";class jj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function iF(t,e,s,r=tF,i=sF){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const u=Object.assign(Object.assign({},eF),{width:r.toString(),height:i.toString(),top:a,left:l}),h=er().toLowerCase();s&&(d=NT(h)?nF:s),jT(h)&&(e=e||rF,u.scrollbars="yes");const m=Object.entries(u).reduce((v,[b,_])=>`${v}${b}=${_},`,"");if(FM(h)&&d!=="_self")return aF(e||"",d),new jj(null);const g=window.open(e||"",d,m);Et(g,t,"popup-blocked");try{g.focus()}catch(v){}return new jj(g)}function aF(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF="__/auth/handler",lF="emulator/auth/handler",cF=encodeURIComponent("fac");async function Sj(t,e,s,r,i,a){Et(t.config.authDomain,t,"auth-domain-config-required"),Et(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:Hd,eventId:i};if(e instanceof LT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",o8(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof Yh){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const m of Object.keys(d))d[m]===void 0&&delete d[m];const u=await t._getAppCheckToken(),h=u?`#${cF}=${encodeURIComponent(u)}`:"";return`${dF(t)}?${Qh(d).slice(1)}${h}`}function dF({config:t}){return t.emulator?A1(t,lF):`https://${t.authDomain}/${oF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="webStorageSupport";class uF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$T,this._completeRedirectFn=D9,this._overrideRedirectResult=R9}async _openPopup(e,s,r,i){var a;Xa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Sj(e,s,r,x0(),i);return iF(e,l,L1())}async _openRedirect(e,s,r,i){await this._originValidation(e);const a=await Sj(e,s,r,x0(),i);return p9(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(Xa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await Z9(e),r=new F9(e);return s.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Ky,{type:Ky},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ky];l!==void 0&&s(!!l),Qa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=U9(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return AT()||ST()||R1()}}const hF=uF;var Nj="@firebase/auth",kj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fF(t){kd(new sc("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;Et(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(t)},h=new zM(r,i,a,u);return QM(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),kd(new sc("auth-internal",e=>{const s=Tg(e.getProvider("auth").getImmediate());return(r=>new mF(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yo(Nj,kj,pF(t)),Yo(Nj,kj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=300,xF=oT("authIdTokenMaxAge")||gF;let Cj=null;const yF=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>xF)return;const i=s==null?void 0:s.token;Cj!==i&&(Cj=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vF(t=C1()){const e=k1(t,"auth");if(e.isInitialized())return e.getImmediate();const s=KM(t,{popupRedirectResolver:hF,persistence:[j9,u9,$T]}),r=oT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=yF(a.toString());a9(s,l,()=>l(s.currentUser)),i9(s,d=>l(d))}}const i=iT("auth");return i&&XM(s,`http://${i}`),s}function bF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HM({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=ra("internal-error");a.customData=i,s(a)},r.type="text/javascript",r.charset="UTF-8",bF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fF("Browser");var Tj=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jl,WT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function T(){}T.prototype=S.prototype,k.D=S.prototype,k.prototype=new T,k.prototype.constructor=k,k.C=function(F,I,B){for(var $=Array(arguments.length-2),H=2;H<arguments.length;H++)$[H-2]=arguments[H];return S.prototype[I].apply(F,$)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,S,T){T||(T=0);var F=Array(16);if(typeof S=="string")for(var I=0;16>I;++I)F[I]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(I=0;16>I;++I)F[I]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=k.g[0],T=k.g[1],I=k.g[2];var B=k.g[3],$=S+(B^T&(I^B))+F[0]+3614090360&4294967295;S=T+($<<7&4294967295|$>>>25),$=B+(I^S&(T^I))+F[1]+3905402710&4294967295,B=S+($<<12&4294967295|$>>>20),$=I+(T^B&(S^T))+F[2]+606105819&4294967295,I=B+($<<17&4294967295|$>>>15),$=T+(S^I&(B^S))+F[3]+3250441966&4294967295,T=I+($<<22&4294967295|$>>>10),$=S+(B^T&(I^B))+F[4]+4118548399&4294967295,S=T+($<<7&4294967295|$>>>25),$=B+(I^S&(T^I))+F[5]+1200080426&4294967295,B=S+($<<12&4294967295|$>>>20),$=I+(T^B&(S^T))+F[6]+2821735955&4294967295,I=B+($<<17&4294967295|$>>>15),$=T+(S^I&(B^S))+F[7]+4249261313&4294967295,T=I+($<<22&4294967295|$>>>10),$=S+(B^T&(I^B))+F[8]+1770035416&4294967295,S=T+($<<7&4294967295|$>>>25),$=B+(I^S&(T^I))+F[9]+2336552879&4294967295,B=S+($<<12&4294967295|$>>>20),$=I+(T^B&(S^T))+F[10]+4294925233&4294967295,I=B+($<<17&4294967295|$>>>15),$=T+(S^I&(B^S))+F[11]+2304563134&4294967295,T=I+($<<22&4294967295|$>>>10),$=S+(B^T&(I^B))+F[12]+1804603682&4294967295,S=T+($<<7&4294967295|$>>>25),$=B+(I^S&(T^I))+F[13]+4254626195&4294967295,B=S+($<<12&4294967295|$>>>20),$=I+(T^B&(S^T))+F[14]+2792965006&4294967295,I=B+($<<17&4294967295|$>>>15),$=T+(S^I&(B^S))+F[15]+1236535329&4294967295,T=I+($<<22&4294967295|$>>>10),$=S+(I^B&(T^I))+F[1]+4129170786&4294967295,S=T+($<<5&4294967295|$>>>27),$=B+(T^I&(S^T))+F[6]+3225465664&4294967295,B=S+($<<9&4294967295|$>>>23),$=I+(S^T&(B^S))+F[11]+643717713&4294967295,I=B+($<<14&4294967295|$>>>18),$=T+(B^S&(I^B))+F[0]+3921069994&4294967295,T=I+($<<20&4294967295|$>>>12),$=S+(I^B&(T^I))+F[5]+3593408605&4294967295,S=T+($<<5&4294967295|$>>>27),$=B+(T^I&(S^T))+F[10]+38016083&4294967295,B=S+($<<9&4294967295|$>>>23),$=I+(S^T&(B^S))+F[15]+3634488961&4294967295,I=B+($<<14&4294967295|$>>>18),$=T+(B^S&(I^B))+F[4]+3889429448&4294967295,T=I+($<<20&4294967295|$>>>12),$=S+(I^B&(T^I))+F[9]+568446438&4294967295,S=T+($<<5&4294967295|$>>>27),$=B+(T^I&(S^T))+F[14]+3275163606&4294967295,B=S+($<<9&4294967295|$>>>23),$=I+(S^T&(B^S))+F[3]+4107603335&4294967295,I=B+($<<14&4294967295|$>>>18),$=T+(B^S&(I^B))+F[8]+1163531501&4294967295,T=I+($<<20&4294967295|$>>>12),$=S+(I^B&(T^I))+F[13]+2850285829&4294967295,S=T+($<<5&4294967295|$>>>27),$=B+(T^I&(S^T))+F[2]+4243563512&4294967295,B=S+($<<9&4294967295|$>>>23),$=I+(S^T&(B^S))+F[7]+1735328473&4294967295,I=B+($<<14&4294967295|$>>>18),$=T+(B^S&(I^B))+F[12]+2368359562&4294967295,T=I+($<<20&4294967295|$>>>12),$=S+(T^I^B)+F[5]+4294588738&4294967295,S=T+($<<4&4294967295|$>>>28),$=B+(S^T^I)+F[8]+2272392833&4294967295,B=S+($<<11&4294967295|$>>>21),$=I+(B^S^T)+F[11]+1839030562&4294967295,I=B+($<<16&4294967295|$>>>16),$=T+(I^B^S)+F[14]+4259657740&4294967295,T=I+($<<23&4294967295|$>>>9),$=S+(T^I^B)+F[1]+2763975236&4294967295,S=T+($<<4&4294967295|$>>>28),$=B+(S^T^I)+F[4]+1272893353&4294967295,B=S+($<<11&4294967295|$>>>21),$=I+(B^S^T)+F[7]+4139469664&4294967295,I=B+($<<16&4294967295|$>>>16),$=T+(I^B^S)+F[10]+3200236656&4294967295,T=I+($<<23&4294967295|$>>>9),$=S+(T^I^B)+F[13]+681279174&4294967295,S=T+($<<4&4294967295|$>>>28),$=B+(S^T^I)+F[0]+3936430074&4294967295,B=S+($<<11&4294967295|$>>>21),$=I+(B^S^T)+F[3]+3572445317&4294967295,I=B+($<<16&4294967295|$>>>16),$=T+(I^B^S)+F[6]+76029189&4294967295,T=I+($<<23&4294967295|$>>>9),$=S+(T^I^B)+F[9]+3654602809&4294967295,S=T+($<<4&4294967295|$>>>28),$=B+(S^T^I)+F[12]+3873151461&4294967295,B=S+($<<11&4294967295|$>>>21),$=I+(B^S^T)+F[15]+530742520&4294967295,I=B+($<<16&4294967295|$>>>16),$=T+(I^B^S)+F[2]+3299628645&4294967295,T=I+($<<23&4294967295|$>>>9),$=S+(I^(T|~B))+F[0]+4096336452&4294967295,S=T+($<<6&4294967295|$>>>26),$=B+(T^(S|~I))+F[7]+1126891415&4294967295,B=S+($<<10&4294967295|$>>>22),$=I+(S^(B|~T))+F[14]+2878612391&4294967295,I=B+($<<15&4294967295|$>>>17),$=T+(B^(I|~S))+F[5]+4237533241&4294967295,T=I+($<<21&4294967295|$>>>11),$=S+(I^(T|~B))+F[12]+1700485571&4294967295,S=T+($<<6&4294967295|$>>>26),$=B+(T^(S|~I))+F[3]+2399980690&4294967295,B=S+($<<10&4294967295|$>>>22),$=I+(S^(B|~T))+F[10]+4293915773&4294967295,I=B+($<<15&4294967295|$>>>17),$=T+(B^(I|~S))+F[1]+2240044497&4294967295,T=I+($<<21&4294967295|$>>>11),$=S+(I^(T|~B))+F[8]+1873313359&4294967295,S=T+($<<6&4294967295|$>>>26),$=B+(T^(S|~I))+F[15]+4264355552&4294967295,B=S+($<<10&4294967295|$>>>22),$=I+(S^(B|~T))+F[6]+2734768916&4294967295,I=B+($<<15&4294967295|$>>>17),$=T+(B^(I|~S))+F[13]+1309151649&4294967295,T=I+($<<21&4294967295|$>>>11),$=S+(I^(T|~B))+F[4]+4149444226&4294967295,S=T+($<<6&4294967295|$>>>26),$=B+(T^(S|~I))+F[11]+3174756917&4294967295,B=S+($<<10&4294967295|$>>>22),$=I+(S^(B|~T))+F[2]+718787259&4294967295,I=B+($<<15&4294967295|$>>>17),$=T+(B^(I|~S))+F[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(I+($<<21&4294967295|$>>>11))&4294967295,k.g[2]=k.g[2]+I&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var T=S-this.blockSize,F=this.B,I=this.h,B=0;B<S;){if(I==0)for(;B<=T;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<S;)if(F[I++]=k.charCodeAt(B++),I==this.blockSize){i(this,F),I=0;break}}else for(;B<S;)if(F[I++]=k[B++],I==this.blockSize){i(this,F),I=0;break}}this.h=I,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var T=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=T&255,T/=256;for(this.u(k),k=Array(16),S=T=0;4>S;++S)for(var F=0;32>F;F+=8)k[T++]=this.g[S]>>>F&255;return k};function a(k,S){var T=d;return Object.prototype.hasOwnProperty.call(T,k)?T[k]:T[k]=S(k)}function l(k,S){this.h=S;for(var T=[],F=!0,I=k.length-1;0<=I;I--){var B=k[I]|0;F&&B==S||(T[I]=B,F=!1)}this.g=T}var d={};function u(k){return-128<=k&&128>k?a(k,function(S){return new l([S|0],0>S?-1:0)}):new l([k|0],0>k?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return g;if(0>k)return C(h(-k));for(var S=[],T=1,F=0;k>=T;F++)S[F]=k/T|0,T*=4294967296;return new l(S,0)}function m(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return C(m(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(S,8)),F=g,I=0;I<k.length;I+=8){var B=Math.min(8,k.length-I),$=parseInt(k.substring(I,I+B),S);8>B?(B=h(Math.pow(S,B)),F=F.j(B).add(h($))):(F=F.j(T),F=F.add(h($)))}return F}var g=u(0),v=u(1),b=u(16777216);t=l.prototype,t.m=function(){if(N(this))return-C(this).m();for(var k=0,S=1,T=0;T<this.g.length;T++){var F=this.i(T);k+=(0<=F?F:4294967296+F)*S,S*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(N(this))return"-"+C(this).toString(k);for(var S=h(Math.pow(k,6)),T=this,F="";;){var I=y(T,S).g;T=R(T,I.j(S));var B=((0<T.g.length?T.g[0]:T.h)>>>0).toString(k);if(T=I,_(T))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function N(k){return k.h==-1}t.l=function(k){return k=R(this,k),N(k)?-1:_(k)?0:1};function C(k){for(var S=k.g.length,T=[],F=0;F<S;F++)T[F]=~k.g[F];return new l(T,~k.h).add(v)}t.abs=function(){return N(this)?C(this):this},t.add=function(k){for(var S=Math.max(this.g.length,k.g.length),T=[],F=0,I=0;I<=S;I++){var B=F+(this.i(I)&65535)+(k.i(I)&65535),$=(B>>>16)+(this.i(I)>>>16)+(k.i(I)>>>16);F=$>>>16,B&=65535,$&=65535,T[I]=$<<16|B}return new l(T,T[T.length-1]&-2147483648?-1:0)};function R(k,S){return k.add(C(S))}t.j=function(k){if(_(this)||_(k))return g;if(N(this))return N(k)?C(this).j(C(k)):C(C(this).j(k));if(N(k))return C(this.j(C(k)));if(0>this.l(b)&&0>k.l(b))return h(this.m()*k.m());for(var S=this.g.length+k.g.length,T=[],F=0;F<2*S;F++)T[F]=0;for(F=0;F<this.g.length;F++)for(var I=0;I<k.g.length;I++){var B=this.i(F)>>>16,$=this.i(F)&65535,H=k.i(I)>>>16,z=k.i(I)&65535;T[2*F+2*I]+=$*z,D(T,2*F+2*I),T[2*F+2*I+1]+=B*z,D(T,2*F+2*I+1),T[2*F+2*I+1]+=$*H,D(T,2*F+2*I+1),T[2*F+2*I+2]+=B*H,D(T,2*F+2*I+2)}for(F=0;F<S;F++)T[F]=T[2*F+1]<<16|T[2*F];for(F=S;F<2*S;F++)T[F]=0;return new l(T,0)};function D(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function A(k,S){this.g=k,this.h=S}function y(k,S){if(_(S))throw Error("division by zero");if(_(k))return new A(g,g);if(N(k))return S=y(C(k),S),new A(C(S.g),C(S.h));if(N(S))return S=y(k,C(S)),new A(C(S.g),S.h);if(30<k.g.length){if(N(k)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var T=v,F=S;0>=F.l(k);)T=w(T),F=w(F);var I=M(T,1),B=M(F,1);for(F=M(F,2),T=M(T,2);!_(F);){var $=B.add(F);0>=$.l(k)&&(I=I.add(T),B=$),F=M(F,1),T=M(T,1)}return S=R(k,I.j(S)),new A(I,S)}for(I=g;0<=k.l(S);){for(T=Math.max(1,Math.floor(k.m()/S.m())),F=Math.ceil(Math.log(T)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=h(T),$=B.j(S);N($)||0<$.l(k);)T-=F,B=h(T),$=B.j(S);_(B)&&(B=v),I=I.add(B),k=R(k,$)}return new A(I,k)}t.A=function(k){return y(this,k).h},t.and=function(k){for(var S=Math.max(this.g.length,k.g.length),T=[],F=0;F<S;F++)T[F]=this.i(F)&k.i(F);return new l(T,this.h&k.h)},t.or=function(k){for(var S=Math.max(this.g.length,k.g.length),T=[],F=0;F<S;F++)T[F]=this.i(F)|k.i(F);return new l(T,this.h|k.h)},t.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),T=[],F=0;F<S;F++)T[F]=this.i(F)^k.i(F);return new l(T,this.h^k.h)};function w(k){for(var S=k.g.length+1,T=[],F=0;F<S;F++)T[F]=k.i(F)<<1|k.i(F-1)>>>31;return new l(T,k.h)}function M(k,S){var T=S>>5;S%=32;for(var F=k.g.length-T,I=[],B=0;B<F;B++)I[B]=0<S?k.i(B+T)>>>S|k.i(B+T+1)<<32-S:k.i(B+T);return new l(I,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,WT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=m,Jl=l}).apply(typeof Tj!="undefined"?Tj:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Pp=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qT,Ku,KT,xf,b0,QT,XT,YT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,P,O){return f==Array.prototype||f==Object.prototype||(f[P]=O.value),f};function s(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pp=="object"&&Pp];for(var P=0;P<f.length;++P){var O=f[P];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=s(this);function i(f,P){if(P)e:{var O=r;f=f.split(".");for(var G=0;G<f.length-1;G++){var de=f[G];if(!(de in O))break e;O=O[de]}f=f[f.length-1],G=O[f],P=P(G),P!=G&&P!=null&&e(O,f,{configurable:!0,writable:!0,value:P})}}function a(f,P){f instanceof String&&(f+="");var O=0,G=!1,de={next:function(){if(!G&&O<f.length){var ge=O++;return{value:P(ge,f[ge]),done:!1}}return G=!0,{done:!0,value:void 0}}};return de[Symbol.iterator]=function(){return de},de}i("Array.prototype.values",function(f){return f||function(){return a(this,function(P,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(f){var P=typeof f;return P=P!="object"?P:f?Array.isArray(f)?"array":P:"null",P=="array"||P=="object"&&typeof f.length=="number"}function h(f){var P=typeof f;return P=="object"&&f!=null||P=="function"}function m(f,P,O){return f.call.apply(f.bind,arguments)}function g(f,P,O){if(!f)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var de=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(de,G),f.apply(P,de)}}return function(){return f.apply(P,arguments)}}function v(f,P,O){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,v.apply(null,arguments)}function b(f,P){var O=Array.prototype.slice.call(arguments,1);return function(){var G=O.slice();return G.push.apply(G,arguments),f.apply(this,G)}}function _(f,P){function O(){}O.prototype=P.prototype,f.aa=P.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(G,de,ge){for(var ze=Array(arguments.length-2),ps=2;ps<arguments.length;ps++)ze[ps-2]=arguments[ps];return P.prototype[de].apply(G,ze)}}function N(f){const P=f.length;if(0<P){const O=Array(P);for(let G=0;G<P;G++)O[G]=f[G];return O}return[]}function C(f,P){for(let O=1;O<arguments.length;O++){const G=arguments[O];if(u(G)){const de=f.length||0,ge=G.length||0;f.length=de+ge;for(let ze=0;ze<ge;ze++)f[de+ze]=G[ze]}else f.push(G)}}class R{constructor(P,O){this.i=P,this.j=O,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function D(f){return/^[\s\xa0]*$/.test(f)}function A(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function y(f){return y[" "](f),f}y[" "]=function(){};var w=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function M(f,P,O){for(const G in f)P.call(O,f[G],G,f)}function k(f,P){for(const O in f)P.call(void 0,f[O],O,f)}function S(f){const P={};for(const O in f)P[O]=f[O];return P}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,P){let O,G;for(let de=1;de<arguments.length;de++){G=arguments[de];for(O in G)f[O]=G[O];for(let ge=0;ge<T.length;ge++)O=T[ge],Object.prototype.hasOwnProperty.call(G,O)&&(f[O]=G[O])}}function I(f){var P=1;f=f.split(":");const O=[];for(;0<P&&f.length;)O.push(f.shift()),P--;return f.length&&O.push(f.join(":")),O}function B(f){d.setTimeout(()=>{throw f},0)}function $(){var f=se;let P=null;return f.g&&(P=f.g,f.g=f.g.next,f.g||(f.h=null),P.next=null),P}class H{constructor(){this.h=this.g=null}add(P,O){const G=z.get();G.set(P,O),this.h?this.h.next=G:this.g=G,this.h=G}}var z=new R(()=>new W,f=>f.reset());class W{constructor(){this.next=this.g=this.h=null}set(P,O){this.h=P,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let K,q=!1,se=new H,re=()=>{const f=d.Promise.resolve(void 0);K=()=>{f.then(U)}};var U=()=>{for(var f;f=$();){try{f.h.call(f.g)}catch(O){B(O)}var P=z;P.j(f),100>P.h&&(P.h++,f.next=P.g,P.g=f)}q=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(f,P){this.type=f,this.g=this.target=P,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,P=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};d.addEventListener("test",O,P),d.removeEventListener("test",O,P)}catch(O){}return f})();function me(f,P){if(ce.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,G=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=P,P=f.relatedTarget){if(w){e:{try{y(P.nodeName);var de=!0;break e}catch(ge){}de=!1}de||(P=null)}}else O=="mouseover"?P=f.fromElement:O=="mouseout"&&(P=f.toElement);this.relatedTarget=P,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_e[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&me.aa.h.call(this)}}_(me,ce);var _e={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),te=0;function fe(f,P,O,G,de){this.listener=f,this.proxy=null,this.src=P,this.type=O,this.capture=!!G,this.ha=de,this.key=++te,this.da=this.fa=!1}function ae(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function be(f){this.src=f,this.g={},this.h=0}be.prototype.add=function(f,P,O,G,de){var ge=f.toString();f=this.g[ge],f||(f=this.g[ge]=[],this.h++);var ze=Ie(f,P,G,de);return-1<ze?(P=f[ze],O||(P.fa=!1)):(P=new fe(P,this.src,ge,!!G,de),P.fa=O,f.push(P)),P};function ye(f,P){var O=P.type;if(O in f.g){var G=f.g[O],de=Array.prototype.indexOf.call(G,P,void 0),ge;(ge=0<=de)&&Array.prototype.splice.call(G,de,1),ge&&(ae(P),f.g[O].length==0&&(delete f.g[O],f.h--))}}function Ie(f,P,O,G){for(var de=0;de<f.length;++de){var ge=f[de];if(!ge.da&&ge.listener==P&&ge.capture==!!O&&ge.ha==G)return de}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),Ge={};function nt(f,P,O,G,de){if(Array.isArray(P)){for(var ge=0;ge<P.length;ge++)nt(f,P[ge],O,G,de);return null}return O=Oe(O),f&&f[Pe]?f.K(P,O,h(G)?!!G.capture:!1,de):at(f,P,O,!1,G,de)}function at(f,P,O,G,de,ge){if(!P)throw Error("Invalid event type");var ze=h(de)?!!de.capture:!!de,ps=bt(f);if(ps||(f[$e]=ps=new be(f)),O=ps.add(P,O,G,ze,ge),O.proxy)return O;if(G=ft(),O.proxy=G,G.src=f,G.listener=O,f.addEventListener)oe||(de=ze),de===void 0&&(de=!1),f.addEventListener(P.toString(),G,de);else if(f.attachEvent)f.attachEvent(Je(P.toString()),G);else if(f.addListener&&f.removeListener)f.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return O}function ft(){function f(O){return P.call(f.src,f.listener,O)}const P=Ke;return f}function $t(f,P,O,G,de){if(Array.isArray(P))for(var ge=0;ge<P.length;ge++)$t(f,P[ge],O,G,de);else G=h(G)?!!G.capture:!!G,O=Oe(O),f&&f[Pe]?(f=f.i,P=String(P).toString(),P in f.g&&(ge=f.g[P],O=Ie(ge,O,G,de),-1<O&&(ae(ge[O]),Array.prototype.splice.call(ge,O,1),ge.length==0&&(delete f.g[P],f.h--)))):f&&(f=bt(f))&&(P=f.g[P.toString()],f=-1,P&&(f=Ie(P,O,G,de)),(O=-1<f?P[f]:null)&&je(O))}function je(f){if(typeof f!="number"&&f&&!f.da){var P=f.src;if(P&&P[Pe])ye(P.i,f);else{var O=f.type,G=f.proxy;P.removeEventListener?P.removeEventListener(O,G,f.capture):P.detachEvent?P.detachEvent(Je(O),G):P.addListener&&P.removeListener&&P.removeListener(G),(O=bt(P))?(ye(O,f),O.h==0&&(O.src=null,P[$e]=null)):ae(f)}}}function Je(f){return f in Ge?Ge[f]:Ge[f]="on"+f}function Ke(f,P){if(f.da)f=!0;else{P=new me(P,this);var O=f.listener,G=f.ha||f.src;f.fa&&je(f),f=O.call(G,P)}return f}function bt(f){return f=f[$e],f instanceof be?f:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe(f){return typeof f=="function"?f:(f[kt]||(f[kt]=function(P){return f.handleEvent(P)}),f[kt])}function Te(){Y.call(this),this.i=new be(this),this.M=this,this.F=null}_(Te,Y),Te.prototype[Pe]=!0,Te.prototype.removeEventListener=function(f,P,O,G){$t(this,f,P,O,G)};function De(f,P){var O,G=f.F;if(G)for(O=[];G;G=G.F)O.push(G);if(f=f.M,G=P.type||P,typeof P=="string")P=new ce(P,f);else if(P instanceof ce)P.target=P.target||f;else{var de=P;P=new ce(G,f),F(P,de)}if(de=!0,O)for(var ge=O.length-1;0<=ge;ge--){var ze=P.g=O[ge];de=et(ze,G,!0,P)&&de}if(ze=P.g=f,de=et(ze,G,!0,P)&&de,de=et(ze,G,!1,P)&&de,O)for(ge=0;ge<O.length;ge++)ze=P.g=O[ge],de=et(ze,G,!1,P)&&de}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var f=this.i,P;for(P in f.g){for(var O=f.g[P],G=0;G<O.length;G++)ae(O[G]);delete f.g[P],f.h--}}this.F=null},Te.prototype.K=function(f,P,O,G){return this.i.add(String(f),P,!1,O,G)},Te.prototype.L=function(f,P,O,G){return this.i.add(String(f),P,!0,O,G)};function et(f,P,O,G){if(P=f.i.g[String(P)],!P)return!0;P=P.concat();for(var de=!0,ge=0;ge<P.length;++ge){var ze=P[ge];if(ze&&!ze.da&&ze.capture==O){var ps=ze.listener,cn=ze.ha||ze.src;ze.fa&&ye(f.i,ze),de=ps.call(cn,G)!==!1&&de}}return de&&!G.defaultPrevented}function ht(f,P,O){if(typeof f=="function")O&&(f=v(f,O));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:d.setTimeout(f,P||0)}function we(f){f.g=ht(()=>{f.g=null,f.i&&(f.i=!1,we(f))},f.l);const P=f.h;f.h=null,f.m.apply(null,P)}class Gs extends Y{constructor(P,O){super(),this.m=P,this.l=O,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(f){Y.call(this),this.h=f,this.g={}}_(Os,Y);var Ws=[];function qs(f){M(f.g,function(P,O){this.g.hasOwnProperty(O)&&je(P)},f),f.g={}}Os.prototype.N=function(){Os.aa.N.call(this),qs(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=d.JSON.stringify,es=d.JSON.parse,dt=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function J(){}J.prototype.h=null;function Ve(f){return f.h||(f.h=f.i())}function He(){}var tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lt(){ce.call(this,"d")}_(lt,ce);function _t(){ce.call(this,"c")}_(_t,ce);var ts={},Cs=null;function Nn(){return Cs=Cs||new Te}ts.La="serverreachability";function mr(f){ce.call(this,ts.La,f)}_(mr,ce);function fn(f){const P=Nn();De(P,new mr(P))}ts.STAT_EVENT="statevent";function Vi(f,P){ce.call(this,ts.STAT_EVENT,f),this.stat=P}_(Vi,ce);function us(f){const P=Nn();De(P,new Vi(P,f))}ts.Ma="timingevent";function tr(f,P){ce.call(this,ts.Ma,f),this.size=P}_(tr,ce);function Hn(f,P){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},P)}function Pr(){this.g=!0}Pr.prototype.xa=function(){this.g=!1};function Lr(f,P,O,G,de,ge){f.info(function(){if(f.g)if(ge)for(var ze="",ps=ge.split("&"),cn=0;cn<ps.length;cn++){var ns=ps[cn].split("=");if(1<ns.length){var gn=ns[0];ns=ns[1];var Zs=gn.split("_");ze=2<=Zs.length&&Zs[1]=="type"?ze+(gn+"="+ns+"&"):ze+(gn+"=redacted&")}}else ze=null;else ze=ge;return"XMLHTTP REQ ("+G+") [attempt "+de+"]: "+P+`
`+O+`
`+ze})}function Jr(f,P,O,G,de,ge,ze){f.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+de+"]: "+P+`
`+O+`
`+ge+" "+ze})}function kn(f,P,O,G){f.info(function(){return"XMLHTTP TEXT ("+P+"): "+gs(f,O)+(G?" "+G:"")})}function ss(f,P){f.info(function(){return"TIMEOUT: "+P})}Pr.prototype.info=function(){};function gs(f,P){if(!f.g)return P;if(!P)return null;try{var O=JSON.parse(P);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var G=O[f];if(!(2>G.length)){var de=G[1];if(Array.isArray(de)&&!(1>de.length)){var ge=de[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var ze=1;ze<de.length;ze++)de[ze]=""}}}}return cs(O)}catch(ps){return P}}var Cn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Ui(){}_(Ui,J),Ui.prototype.g=function(){return new XMLHttpRequest},Ui.prototype.i=function(){return{}},Vt=new Ui;function pr(f,P,O,G){this.j=f,this.i=P,this.l=O,this.R=G||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dl}function dl(){this.i=null,this.g="",this.h=!1}var oo={},fa={};function ga(f,P,O){f.L=1,f.v=mo(Fr(P)),f.m=O,f.P=!0,lo(f,null)}function lo(f,P){f.F=Date.now(),ms(f),f.A=Fr(f.v);var O=f.A,G=f.R;Array.isArray(G)||(G=[String(G)]),fo(O.i,"t",G),f.C=0,O=f.j.J,f.h=new dl,f.g=Lm(f.j,O?P:null,!f.m),0<f.O&&(f.M=new Gs(v(f.Y,f,f.g),f.O)),P=f.U,O=f.g,G=f.ca;var de="readystatechange";Array.isArray(de)||(de&&(Ws[0]=de.toString()),de=Ws);for(var ge=0;ge<de.length;ge++){var ze=nt(O,de[ge],G||P.handleEvent,!1,P.h||P);if(!ze)break;P.g[ze.key]=ze}P=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,P)):(f.u="GET",f.g.ea(f.A,f.u,null,P)),fn(),Lr(f.i,f.u,f.A,f.l,f.R,f.m)}pr.prototype.ca=function(f){f=f.target;const P=this.M;P&&gr(f)==3?P.j():this.Y(f)},pr.prototype.Y=function(f){try{if(f==this.g)e:{const Zs=gr(this.g);var P=this.g.Ba();const ei=this.g.Z();if(!(3>Zs)&&(Zs!=3||this.g&&(this.h.h||this.g.oa()||au(this.g)))){this.J||Zs!=4||P==7||(P==8||0>=ei?fn(3):fn(2)),zi(this);var O=this.g.Z();this.X=O;t:if(ul(this)){var G=au(this.g);f="";var de=G.length,ge=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){sr(this),gi(this);var ze="";break t}this.h.i=new d.TextDecoder}for(P=0;P<de;P++)this.h.h=!0,f+=this.h.i.decode(G[P],{stream:!(ge&&P==de-1)});G.length=0,this.h.g+=f,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=O==200,Jr(this.i,this.u,this.A,this.l,this.R,Zs,O),this.o){if(this.T&&!this.K){t:{if(this.g){var ps,cn=this.g;if((ps=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ps)){var ns=ps;break t}}ns=null}if(O=ns)kn(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,O);else{this.o=!1,this.s=3,us(12),sr(this),gi(this);break e}}if(this.P){O=!0;let $r;for(;!this.J&&this.C<ze.length;)if($r=yc(this,ze),$r==fa){Zs==4&&(this.s=4,us(14),O=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if($r==oo){this.s=4,us(15),kn(this.i,this.l,ze,"[Invalid Chunk]"),O=!1;break}else kn(this.i,this.l,$r,null),tu(this,$r);if(ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zs!=4||ze.length!=0||this.h.h||(this.s=1,us(16),O=!1),this.o=this.o&&O,!O)kn(this.i,this.l,ze,"[Invalid Chunked Response]"),sr(this),gi(this);else if(0<ze.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),lu(gn),gn.M=!0,us(11))}}else kn(this.i,this.l,ze,null),tu(this,ze);Zs==4&&sr(this),this.o&&!this.J&&(Zs==4?Ec(this.j,this):(this.o=!1,ms(this)))}else Sc(this.g),O==400&&0<ze.indexOf("Unknown SID")?(this.s=3,us(12)):(this.s=0,us(13)),sr(this),gi(this)}}}catch(Zs){}finally{}};function ul(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function yc(f,P){var O=f.C,G=P.indexOf(`
`,O);return G==-1?fa:(O=Number(P.substring(O,G)),isNaN(O)?oo:(G+=1,G+O>P.length?fa:(P=P.slice(G,G+O),f.C=G+O,P)))}pr.prototype.cancel=function(){this.J=!0,sr(this)};function ms(f){f.S=Date.now()+f.I,hl(f,f.I)}function hl(f,P){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Hn(v(f.ba,f),P)}function zi(f){f.B&&(d.clearTimeout(f.B),f.B=null)}pr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ss(this.i,this.A),this.L!=2&&(fn(),us(17)),sr(this),this.s=2,gi(this)):hl(this,this.S-f)};function gi(f){f.j.G==0||f.J||Ec(f.j,f)}function sr(f){zi(f);var P=f.M;P&&typeof P.ma=="function"&&P.ma(),f.M=null,qs(f.U),f.g&&(P=f.g,f.g=null,P.abort(),P.ma())}function tu(f,P){try{var O=f.j;if(O.G!=0&&(O.g==f||nr(O.h,f))){if(!f.K&&nr(O.h,f)&&O.G==3){try{var G=O.Da.g.parse(P)}catch(ns){G=null}if(Array.isArray(G)&&G.length==3){var de=G;if(de[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)Tc(O),_i(O);else break e;Cc(O),us(18)}}else O.za=de[1],0<O.za-O.T&&37500>de[2]&&O.F&&O.v==0&&!O.C&&(O.C=Hn(v(O.Za,O),6e3));if(1>=bm(O.h)&&O.ca){try{O.ca()}catch(ns){}O.ca=void 0}}else _a(O,11)}else if((f.K||O.g==f)&&Tc(O),!D(P))for(de=O.Da.g.parse(P),P=0;P<de.length;P++){let ns=de[P];if(O.T=ns[0],ns=ns[1],O.G==2)if(ns[0]=="c"){O.K=ns[1],O.ia=ns[2];const gn=ns[3];gn!=null&&(O.la=gn,O.j.info("VER="+O.la));const Zs=ns[4];Zs!=null&&(O.Aa=Zs,O.j.info("SVER="+O.Aa));const ei=ns[5];ei!=null&&typeof ei=="number"&&0<ei&&(G=1.5*ei,O.L=G,O.j.info("backChannelRequestTimeoutMs_="+G)),G=O;const $r=f.g;if($r){const vl=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var ge=G.h;ge.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(su(ge,ge.h),ge.h=null))}if(G.D){const Ic=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;Ic&&(G.ya=Ic,xs(G.I,G.D,Ic))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),G=O;var ze=f;if(G.qa=Pm(G,G.J?G.ia:null,G.W),ze.K){_m(G.h,ze);var ps=ze,cn=G.L;cn&&(ps.I=cn),ps.B&&(zi(ps),ms(ps)),G.g=ze}else yl(G);0<O.i.length&&qi(O)}else ns[0]!="stop"&&ns[0]!="close"||_a(O,7);else O.G==3&&(ns[0]=="stop"||ns[0]=="close"?ns[0]=="stop"?_a(O,7):En(O):ns[0]!="noop"&&O.l&&O.l.ta(ns),O.v=0)}}fn(4)}catch(ns){}}var vm=class{constructor(f,P){this.g=f,this.map=P}};function ml(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function bm(f){return f.h?1:f.g?f.g.size:0}function nr(f,P){return f.h?f.h==P:f.g?f.g.has(P):!1}function su(f,P){f.g?f.g.add(P):f.h=P}function _m(f,P){f.h&&f.h==P?f.h=null:f.g&&f.g.has(P)&&f.g.delete(P)}ml.prototype.cancel=function(){if(this.i=wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function wm(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let P=f.i;for(const O of f.g.values())P=P.concat(O.D);return P}return N(f.i)}function vc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var P=[],O=f.length,G=0;G<O;G++)P.push(f[G]);return P}P=[],O=0;for(G in f)P[O++]=f[G];return P}function bc(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var P=[];f=f.length;for(var O=0;O<f;O++)P.push(O);return P}P=[],O=0;for(const G in f)P[O++]=G;return P}}}function co(f,P){if(f.forEach&&typeof f.forEach=="function")f.forEach(P,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,P,void 0);else for(var O=bc(f),G=vc(f),de=G.length,ge=0;ge<de;ge++)P.call(void 0,G[ge],O&&O[ge],f)}var pl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dx(f,P){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var G=f[O].indexOf("="),de=null;if(0<=G){var ge=f[O].substring(0,G);de=f[O].substring(G+1)}else ge=f[O];P(ge,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function xa(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof xa){this.h=f.h,fl(this,f.j),this.o=f.o,this.g=f.g,uo(this,f.s),this.l=f.l;var P=f.i,O=new Hi;O.i=P.i,P.g&&(O.g=new Map(P.g),O.h=P.h),ho(this,O),this.m=f.m}else f&&(P=String(f).match(pl))?(this.h=!1,fl(this,P[1]||"",!0),this.o=Yt(P[2]||""),this.g=Yt(P[3]||"",!0),uo(this,P[4]),this.l=Yt(P[5]||"",!0),ho(this,P[6]||"",!0),this.m=Yt(P[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}xa.prototype.toString=function(){var f=[],P=this.j;P&&f.push(po(P,_c,!0),":");var O=this.g;return(O||P=="file")&&(f.push("//"),(P=this.o)&&f.push(po(P,_c,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(po(O,O.charAt(0)=="/"?Nm:Sm,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",po(O,nu)),f.join("")};function Fr(f){return new xa(f)}function fl(f,P,O){f.j=O?Yt(P,!0):P,f.j&&(f.j=f.j.replace(/:$/,""))}function uo(f,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);f.s=P}else f.s=null}function ho(f,P,O){P instanceof Hi?(f.i=P,Gi(f.i,f.h)):(O||(P=po(P,km)),f.i=new Hi(P,f.h))}function xs(f,P,O){f.i.set(P,O)}function mo(f){return xs(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Yt(f,P){return f?P?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function po(f,P,O){return typeof f=="string"?(f=encodeURI(f).replace(P,jm),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function jm(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var _c=/[#\/\?@]/g,Sm=/[#\?:]/g,Nm=/[#\?]/g,km=/[#\?@]/g,nu=/#/g;function Hi(f,P){this.h=this.g=null,this.i=f||null,this.j=!!P}function Tn(f){f.g||(f.g=new Map,f.h=0,f.i&&dx(f.i,function(P,O){f.add(decodeURIComponent(P.replace(/\+/g," ")),O)}))}t=Hi.prototype,t.add=function(f,P){Tn(this),this.i=null,f=Zr(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(P),this.h+=1,this};function xi(f,P){Tn(f),P=Zr(f,P),f.g.has(P)&&(f.i=null,f.h-=f.g.get(P).length,f.g.delete(P))}function yi(f,P){return Tn(f),P=Zr(f,P),f.g.has(P)}t.forEach=function(f,P){Tn(this),this.g.forEach(function(O,G){O.forEach(function(de){f.call(P,de,G,this)},this)},this)},t.na=function(){Tn(this);const f=Array.from(this.g.values()),P=Array.from(this.g.keys()),O=[];for(let G=0;G<P.length;G++){const de=f[G];for(let ge=0;ge<de.length;ge++)O.push(P[G])}return O},t.V=function(f){Tn(this);let P=[];if(typeof f=="string")yi(this,f)&&(P=P.concat(this.g.get(Zr(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)P=P.concat(f[O])}return P},t.set=function(f,P){return Tn(this),this.i=null,f=Zr(this,f),yi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[P]),this.h+=1,this},t.get=function(f,P){return f?(f=this.V(f),0<f.length?String(f[0]):P):P};function fo(f,P,O){xi(f,P),0<O.length&&(f.i=null,f.g.set(Zr(f,P),N(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],P=Array.from(this.g.keys());for(var O=0;O<P.length;O++){var G=P[O];const ge=encodeURIComponent(String(G)),ze=this.V(G);for(G=0;G<ze.length;G++){var de=ge;ze[G]!==""&&(de+="="+encodeURIComponent(String(ze[G]))),f.push(de)}}return this.i=f.join("&")};function Zr(f,P){return P=String(P),f.j&&(P=P.toLowerCase()),P}function Gi(f,P){P&&!f.j&&(Tn(f),f.i=null,f.g.forEach(function(O,G){var de=G.toLowerCase();G!=de&&(xi(this,G),fo(this,de,O))},f)),f.j=P}function ux(f,P){const O=new Pr;if(d.Image){const G=new Image;G.onload=b(fr,O,"TestLoadImage: loaded",!0,P,G),G.onerror=b(fr,O,"TestLoadImage: error",!1,P,G),G.onabort=b(fr,O,"TestLoadImage: abort",!1,P,G),G.ontimeout=b(fr,O,"TestLoadImage: timeout",!1,P,G),d.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=f}else P(!1)}function Cm(f,P){const O=new Pr,G=new AbortController,de=setTimeout(()=>{G.abort(),fr(O,"TestPingServer: timeout",!1,P)},1e4);fetch(f,{signal:G.signal}).then(ge=>{clearTimeout(de),ge.ok?fr(O,"TestPingServer: ok",!0,P):fr(O,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(de),fr(O,"TestPingServer: error",!1,P)})}function fr(f,P,O,G,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),G(O)}catch(ge){}}function hx(){this.g=new dt}function Tm(f,P,O){const G=O||"";try{co(f,function(de,ge){let ze=de;h(de)&&(ze=cs(de)),P.push(G+ge+"="+encodeURIComponent(ze))})}catch(de){throw P.push(G+"type="+encodeURIComponent("_badmap")),de}}function ya(f){this.l=f.Ub||null,this.j=f.eb||!1}_(ya,J),ya.prototype.g=function(){return new gl(this.l,this.j)},ya.prototype.i=(function(f){return function(){return f}})({});function gl(f,P){Te.call(this),this.D=f,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(gl,Te),t=gl.prototype,t.open=function(f,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=P,this.readyState=1,bi(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(P.body=f),(this.D||d).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Em(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Em(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var P=f.value?f.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!f.done}))&&(this.response=this.responseText+=P)}f.done?vi(this):bi(this),this.readyState==3&&Em(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,vi(this))},t.Qa=function(f){this.g&&(this.response=f,vi(this))},t.ga=function(){this.g&&vi(this)};function vi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,bi(f)}t.setRequestHeader=function(f,P){this.u.append(f,P)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],P=this.h.entries();for(var O=P.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=P.next();return f.join(`\r
`)};function bi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function va(f){let P="";return M(f,function(O,G){P+=G,P+=":",P+=O,P+=`\r
`}),P}function go(f,P,O){e:{for(G in O){var G=!1;break e}G=!0}G||(O=va(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):xs(f,P,O))}function Ts(f){Te.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ts,Te);var mx=/^https?$/i,ru=["POST","PUT"];t=Ts.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,P,O,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);P=P?P.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?Ve(this.o):Ve(Vt),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(P,String(f),!0),this.B=!1}catch(ge){xl(this,ge);return}if(f=O||"",O=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var de in G)O.set(de,G[de]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ge of G.keys())O.set(ge,G.get(ge));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(O.keys()).find(ge=>ge.toLowerCase()=="content-type"),de=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ru,P,void 0))||G||de||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,ze]of O)this.g.setRequestHeader(ge,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jc(this),this.u=!0,this.g.send(f),this.u=!1}catch(ge){xl(this,ge)}};function xl(f,P){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=P,f.m=5,wc(f),Br(f)}function wc(f){f.A||(f.A=!0,De(f,"complete"),De(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,De(this,"complete"),De(this,"abort"),Br(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Br(this,!0)),Ts.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?iu(this):this.bb())},t.bb=function(){iu(this)};function iu(f){if(f.h&&typeof l!="undefined"&&(!f.v[1]||gr(f)!=4||f.Z()!=2)){if(f.u&&gr(f)==4)ht(f.Ea,0,f);else if(De(f,"readystatechange"),gr(f)==4){f.h=!1;try{const ze=f.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var O;if(!(O=P)){var G;if(G=ze===0){var de=String(f.D).match(pl)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),G=!mx.test(de?de.toLowerCase():"")}O=G}if(O)De(f,"complete"),De(f,"success");else{f.m=6;try{var ge=2<gr(f)?f.g.statusText:""}catch(ps){ge=""}f.l=ge+" ["+f.Z()+"]",wc(f)}}finally{Br(f)}}}}function Br(f,P){if(f.g){jc(f);const O=f.g,G=f.v[0]?()=>{}:null;f.g=null,f.v=null,P||De(f,"ready");try{O.onreadystatechange=G}catch(de){}}}function jc(f){f.I&&(d.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function gr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var P=this.g.responseText;return f&&P.indexOf(f)==0&&(P=P.substring(f.length)),es(P)}};function au(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(P){return null}}function Sc(f){const P={};f=(f.g&&2<=gr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<f.length;G++){if(D(f[G]))continue;var O=I(f[G]);const de=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ge=P[de]||[];P[de]=ge,ge.push(O)}k(P,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(f,P,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||P}function ou(f){this.Aa=0,this.i=[],this.j=new Pr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wi("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wi("baseRetryDelayMs",5e3,f),this.cb=Wi("retryDelaySeedMs",1e4,f),this.Wa=Wi("forwardChannelMaxRetries",2,f),this.wa=Wi("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ml(f&&f.concurrentRequestLimit),this.Da=new hx,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ou.prototype,t.la=8,t.G=1,t.connect=function(f,P,O,G){us(0),this.W=f,this.H=P||{},O&&G!==void 0&&(this.H.OSID=O,this.H.OAID=G),this.F=this.X,this.I=Pm(this,null,this.W),qi(this)};function En(f){if(Nc(f),f.G==3){var P=f.U++,O=Fr(f.I);if(xs(O,"SID",f.K),xs(O,"RID",P),xs(O,"TYPE","terminate"),ba(f,O),P=new pr(f,f.j,P),P.L=2,P.v=mo(Fr(O)),O=!1,d.navigator&&d.navigator.sendBeacon)try{O=d.navigator.sendBeacon(P.v.toString(),"")}catch(G){}!O&&d.Image&&(new Image().src=P.v,O=!0),O||(P.g=Lm(P.j,null),P.g.ea(P.v)),P.F=Date.now(),ms(P)}Rm(f)}function _i(f){f.g&&(lu(f),f.g.cancel(),f.g=null)}function Nc(f){_i(f),f.u&&(d.clearTimeout(f.u),f.u=null),Tc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function qi(f){if(!Mr(f.h)&&!f.s){f.s=!0;var P=f.Ga;K||re(),q||(K(),q=!0),se.add(P,f),f.B=0}}function px(f,P){return bm(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=P.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Hn(v(f.Ga,f,P),Im(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const de=new pr(this,this.j,f);let ge=this.o;if(this.S&&(ge?(ge=S(ge),F(ge,this.S)):ge=this.S),this.m!==null||this.O||(de.H=ge,ge=null),this.P)e:{for(var P=0,O=0;O<this.i.length;O++){t:{var G=this.i[O];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(P+=G,4096<P){P=O;break e}if(P===4096||O===this.i.length-1){P=O+1;break e}}P=1e3}else P=1e3;P=xo(this,de,P),O=Fr(this.I),xs(O,"RID",f),xs(O,"CVER",22),this.D&&xs(O,"X-HTTP-Session-Id",this.D),ba(this,O),ge&&(this.O?P="headers="+encodeURIComponent(String(va(ge)))+"&"+P:this.m&&go(O,this.m,ge)),su(this.h,de),this.Ua&&xs(O,"TYPE","init"),this.P?(xs(O,"$req",P),xs(O,"SID","null"),de.T=!0,ga(de,O,null)):ga(de,O,P),this.G=2}}else this.G==3&&(f?kc(this,f):this.i.length==0||Mr(this.h)||kc(this))};function kc(f,P){var O;P?O=P.l:O=f.U++;const G=Fr(f.I);xs(G,"SID",f.K),xs(G,"RID",O),xs(G,"AID",f.T),ba(f,G),f.m&&f.o&&go(G,f.m,f.o),O=new pr(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),P&&(f.i=P.D.concat(f.i)),P=xo(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),su(f.h,O),ga(O,G,P)}function ba(f,P){f.H&&M(f.H,function(O,G){xs(P,G,O)}),f.l&&co({},function(O,G){xs(P,G,O)})}function xo(f,P,O){O=Math.min(f.i.length,O);var G=f.l?v(f.l.Na,f.l,f):null;e:{var de=f.i;let ge=-1;for(;;){const ze=["count="+O];ge==-1?0<O?(ge=de[0].g,ze.push("ofs="+ge)):ge=0:ze.push("ofs="+ge);let ps=!0;for(let cn=0;cn<O;cn++){let ns=de[cn].g;const gn=de[cn].map;if(ns-=ge,0>ns)ge=Math.max(0,de[cn].g-100),ps=!1;else try{Tm(gn,ze,"req"+ns+"_")}catch(Zs){G&&G(gn)}}if(ps){G=ze.join("&");break e}}}return f=f.i.splice(0,O),P.D=f,G}function yl(f){if(!f.g&&!f.u){f.Y=1;var P=f.Fa;K||re(),q||(K(),q=!0),se.add(P,f),f.v=0}}function Cc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Hn(v(f.Fa,f),Im(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Am(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Hn(v(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,us(10),_i(this),Am(this))};function lu(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function Am(f){f.g=new pr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var P=Fr(f.qa);xs(P,"RID","rpc"),xs(P,"SID",f.K),xs(P,"AID",f.T),xs(P,"CI",f.F?"0":"1"),!f.F&&f.ja&&xs(P,"TO",f.ja),xs(P,"TYPE","xmlhttp"),ba(f,P),f.m&&f.o&&go(P,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=mo(Fr(P)),O.m=null,O.P=!0,lo(O,f)}t.Za=function(){this.C!=null&&(this.C=null,_i(this),Cc(this),us(19))};function Tc(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function Ec(f,P){var O=null;if(f.g==P){Tc(f),lu(f),f.g=null;var G=2}else if(nr(f.h,P))O=P.D,_m(f.h,P),G=1;else return;if(f.G!=0){if(P.o)if(G==1){O=P.m?P.m.length:0,P=Date.now()-P.F;var de=f.B;G=Nn(),De(G,new tr(G,O)),qi(f)}else yl(f);else if(de=P.s,de==3||de==0&&0<P.X||!(G==1&&px(f,P)||G==2&&Cc(f)))switch(O&&0<O.length&&(P=f.h,P.i=P.i.concat(O)),de){case 1:_a(f,5);break;case 4:_a(f,10);break;case 3:_a(f,6);break;default:_a(f,2)}}}function Im(f,P){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*P}function _a(f,P){if(f.j.info("Error code "+P),P==2){var O=v(f.fb,f),G=f.Xa;const de=!G;G=new xa(G||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||fl(G,"https"),mo(G),de?ux(G.toString(),O):Cm(G.toString(),O)}else us(2);f.G=0,f.l&&f.l.sa(P),Rm(f),Nc(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),us(2)):(this.j.info("Failed to ping google.com"),us(1))};function Rm(f){if(f.G=0,f.ka=[],f.l){const P=wm(f.h);(P.length!=0||f.i.length!=0)&&(C(f.ka,P),C(f.ka,f.i),f.h.i.length=0,N(f.i),f.i.length=0),f.l.ra()}}function Pm(f,P,O){var G=O instanceof xa?Fr(O):new xa(O);if(G.g!="")P&&(G.g=P+"."+G.g),uo(G,G.s);else{var de=d.location;G=de.protocol,P=P?P+"."+de.hostname:de.hostname,de=+de.port;var ge=new xa(null);G&&fl(ge,G),P&&(ge.g=P),de&&uo(ge,de),O&&(ge.l=O),G=ge}return O=f.D,P=f.ya,O&&P&&xs(G,O,P),xs(G,"VER",f.la),ba(f,G),G}function Lm(f,P,O){if(P&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=f.Ca&&!f.pa?new Ts(new ya({eb:O})):new Ts(f.pa),P.Ha(f.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}t=cu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ac(){}Ac.prototype.g=function(f,P){return new rr(f,P)};function rr(f,P){Te.call(this),this.g=new ou(P),this.l=f,this.h=P&&P.messageUrlParams||null,f=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(f?f["X-WebChannel-Content-Type"]=P.messageContentType:f={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(f?f["X-WebChannel-Client-Profile"]=P.va:f={"X-WebChannel-Client-Profile":P.va}),this.g.S=f,(f=P&&P.Sb)&&!D(f)&&(this.g.m=f),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!D(P)&&(this.g.D=P,f=this.h,f!==null&&P in f&&(f=this.h,P in f&&delete f[P])),this.j=new Ki(this)}_(rr,Te),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){En(this.g)},rr.prototype.o=function(f){var P=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=cs(f),f=O);P.i.push(new vm(P.Ya++,f)),P.G==3&&qi(P)},rr.prototype.N=function(){this.g.l=null,delete this.j,En(this.g),delete this.g,rr.aa.N.call(this)};function Dm(f){lt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var P=f.__sm__;if(P){e:{for(const O in P){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,P=P!==null&&f in P?P[f]:void 0),this.data=P}else this.data=f}_(Dm,lt);function Mm(){_t.call(this),this.status=1}_(Mm,_t);function Ki(f){this.g=f}_(Ki,cu),Ki.prototype.ua=function(){De(this.g,"a")},Ki.prototype.ta=function(f){De(this.g,new Dm(f))},Ki.prototype.sa=function(f){De(this.g,new Mm)},Ki.prototype.ra=function(){De(this.g,"b")},Ac.prototype.createWebChannel=Ac.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,YT=function(){return new Ac},XT=function(){return Nn()},QT=ts,b0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cn.NO_ERROR=0,Cn.TIMEOUT=8,Cn.HTTP_ERROR=6,xf=Cn,Dr.COMPLETE="complete",KT=Dr,He.EventType=tt,tt.OPEN="a",tt.CLOSE="b",tt.ERROR="c",tt.MESSAGE="d",Te.prototype.listen=Te.prototype.K,Ku=He,Ts.prototype.listenOnce=Ts.prototype.L,Ts.prototype.getLastError=Ts.prototype.Ka,Ts.prototype.getLastErrorCode=Ts.prototype.Ba,Ts.prototype.getStatus=Ts.prototype.Z,Ts.prototype.getResponseJson=Ts.prototype.Oa,Ts.prototype.getResponseText=Ts.prototype.oa,Ts.prototype.send=Ts.prototype.ea,Ts.prototype.setWithCredentials=Ts.prototype.Ha,qT=Ts}).apply(typeof Pp!="undefined"?Pp:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const Ej="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new S1("@firebase/firestore");function Mu(){return ic.logLevel}function it(t,...e){if(ic.logLevel<=Zt.DEBUG){const s=e.map(M1);ic.debug(`Firestore (${Wd}): ${t}`,...s)}}function Ya(t,...e){if(ic.logLevel<=Zt.ERROR){const s=e.map(M1);ic.error(`Firestore (${Wd}): ${t}`,...s)}}function Cd(t,...e){if(ic.logLevel<=Zt.WARN){const s=e.map(M1);ic.warn(`Firestore (${Wd}): ${t}`,...s)}}function M1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t="Unexpected state"){const e=`FIRESTORE (${Wd}) INTERNAL ASSERTION FAILED: `+t;throw Ya(e),new Error(e)}function fs(t,e){t||At()}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends ro{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(Yn.UNAUTHENTICATED)))}shutdown(){}}class wF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class jF{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){fs(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,s(u)):Promise.resolve();let a=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ga,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},d=u=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((u=>d(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ga)}}),0),l()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fs(typeof r.accessToken=="string"),new JT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fs(e===null||typeof e=="string"),new Yn(e)}}class SF{constructor(e,s,r){this.l=e,this.h=s,this.P=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NF{constructor(e,s,r){this.l=e,this.h=s,this.P=r}getToken(){return Promise.resolve(new SF(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable((()=>s(Yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){fs(this.o===void 0);const r=a=>{a.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,it("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(fs(typeof s.token=="string"),this.R=s.token,new kF(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TF(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<s&&(r+=e.charAt(i[a]%e.length))}return r}}function ls(t,e){return t<e?-1:t>e?1:0}function Td(t,e,s){return t.length===e.length&&t.every(((r,i)=>s(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new We(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new We(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new We(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hs.fromMillis(Date.now())}static fromDate(e){return Hs.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*s));return new Hs(s,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ls(this.nanoseconds,e.nanoseconds):ls(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Hs(0,0))}static max(){return new Lt(new Hs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,s,r){s===void 0?s=0:s>e.length&&At(),r===void 0?r=e.length-s:r>e.length-s&&At(),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Eh.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Eh?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const a=e.get(i),l=s.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class vs extends Eh{construct(e,s,r){return new vs(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new vs(s)}static emptyPath(){return new vs([])}}const EF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Eh{construct(e,s,r){return new Bn(e,s,r)}static isValidIdentifier(e){return EF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const s=[];let r="",i=0;const a=()=>{if(r.length===0)throw new We(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new We(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new We(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new We(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(s)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.path=e}static fromPath(e){return new pt(vs.fromString(e))}static fromName(e){return new pt(vs.fromString(e).popFirst(5))}static empty(){return new pt(vs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return vs.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new vs(e.slice()))}}function AF(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(r===1e9?new Hs(s+1,0):new Hs(s,r));return new tl(i,pt.empty(),e)}function IF(t){return new tl(t.readTime,t.key,-1)}class tl{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new tl(Lt.min(),pt.empty(),-1)}static max(){return new tl(Lt.max(),pt.empty(),-1)}}function RF(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=pt.comparator(t.documentKey,e.documentKey),s!==0?s:ls(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==PF)throw t;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new Ae(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(s,a).next(r,i)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof Ae?s:Ae.resolve(s)}catch(s){return Ae.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):Ae.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):Ae.reject(s)}static resolve(e){return new Ae(((s,r)=>{s(e)}))}static reject(e){return new Ae(((s,r)=>{r(e)}))}static waitFor(e){return new Ae(((s,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&s()}),(u=>r(u)))})),l=!0,a===i&&s()}))}static or(e){let s=Ae.resolve(!1);for(const r of e)s=s.next((i=>i?Ae.resolve(i):r()));return s}static forEach(e,s){const r=[];return e.forEach(((i,a)=>{r.push(s.call(this,i,a))})),this.waitFor(r)}static mapArray(e,s){return new Ae(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let u=0;u<a;u++){const h=u;s(e[h]).next((m=>{l[h]=m,++d,d===a&&r(l)}),(m=>i(m)))}}))}static doWhile(e,s){return new Ae(((r,i)=>{const a=()=>{e()===!0?s().next((()=>{a()}),i):r()};a()}))}}function DF(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function em(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ie(r),this.se=r=>s.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}F1.oe=-1;function Ig(t){return t==null}function Hf(t){return t===0&&1/t==-1/0}function MF(t){return typeof t=="number"&&Number.isInteger(t)&&!Hf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function hc(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function e3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,s){this.comparator=e,this.root=s||Dn.EMPTY}insert(e,s){return new Bs(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Bs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return s+r.left.size;i<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lp(this.root,e,this.comparator,!0)}}class Lp{constructor(e,s,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=s?r(e.key,s):1,s&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,s,r,i,a){this.key=e,this.value=s,this.color=r!=null?r:Dn.RED,this.left=i!=null?i:Dn.EMPTY,this.right=a!=null?a:Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,i,a){return new Dn(e!=null?e:this.key,s!=null?s:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,s,r),null):a===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return Dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(e,s,r,i,a){return this}insert(e,s,r){return new Dn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.comparator=e,this.data=new Bs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Ij(this.data.getIterator())}getIteratorFrom(e){return new Ij(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new On(this.comparator);return s.data=e,s}}class Ij{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Kr([])}unionWith(e){let s=new On(Bn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Kr(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Td(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new t3("Invalid base64 string: "+a):a}})(e);return new Un(s)}static fromUint8Array(e){const s=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new Un(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ls(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const FF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sl(t){if(fs(!!t),typeof t=="string"){let e=0;const s=FF.exec(t);if(fs(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ys(t.seconds),nanos:Ys(t.nanos)}}function Ys(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ac(t){return typeof t=="string"?Un.fromBase64String(t):Un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function B1(t){const e=t.mapValue.fields.__previous_value__;return Rg(e)?B1(e):e}function Ah(t){const e=sl(t.mapValue.fields.__local_write_time__.timestampValue);return new Hs(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,s,r,i,a,l,d,u,h){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h}}class Ih{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new Ih("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ih&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp={mapValue:{}};function oc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rg(t)?4:OF(t)?9007199254740991:$F(t)?10:11:At()}function ha(t,e){if(t===e)return!0;const s=oc(t);if(s!==oc(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ah(t).isEqual(Ah(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=sl(i.timestampValue),d=sl(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return ac(i.bytesValue).isEqual(ac(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Ys(i.geoPointValue.latitude)===Ys(a.geoPointValue.latitude)&&Ys(i.geoPointValue.longitude)===Ys(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Ys(i.integerValue)===Ys(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Ys(i.doubleValue),d=Ys(a.doubleValue);return l===d?Hf(l)===Hf(d):isNaN(l)&&isNaN(d)}return!1})(t,e);case 9:return Td(t.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(Aj(l)!==Aj(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!ha(l[u],d[u])))return!1;return!0})(t,e);default:return At()}}function Rh(t,e){return(t.values||[]).find((s=>ha(s,e)))!==void 0}function Ed(t,e){if(t===e)return 0;const s=oc(t),r=oc(e);if(s!==r)return ls(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return ls(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Ys(a.integerValue||a.doubleValue),u=Ys(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1})(t,e);case 3:return Rj(t.timestampValue,e.timestampValue);case 4:return Rj(Ah(t),Ah(e));case 5:return ls(t.stringValue,e.stringValue);case 6:return(function(a,l){const d=ac(a),u=ac(l);return d.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),u=l.split("/");for(let h=0;h<d.length&&h<u.length;h++){const m=ls(d[h],u[h]);if(m!==0)return m}return ls(d.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=ls(Ys(a.latitude),Ys(l.latitude));return d!==0?d:ls(Ys(a.longitude),Ys(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pj(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,u,h,m;const g=a.fields||{},v=l.fields||{},b=(d=g.value)===null||d===void 0?void 0:d.arrayValue,_=(u=v.value)===null||u===void 0?void 0:u.arrayValue,N=ls(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((m=_==null?void 0:_.values)===null||m===void 0?void 0:m.length)||0);return N!==0?N:Pj(b,_)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Dp.mapValue&&l===Dp.mapValue)return 0;if(a===Dp.mapValue)return 1;if(l===Dp.mapValue)return-1;const d=a.fields||{},u=Object.keys(d),h=l.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const v=ls(u[g],m[g]);if(v!==0)return v;const b=Ed(d[u[g]],h[m[g]]);if(b!==0)return b}return ls(u.length,m.length)})(t.mapValue,e.mapValue);default:throw At()}}function Rj(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ls(t,e);const s=sl(t),r=sl(e),i=ls(s.seconds,r.seconds);return i!==0?i:ls(s.nanos,r.nanos)}function Pj(t,e){const s=t.values||[],r=e.values||[];for(let i=0;i<s.length&&i<r.length;++i){const a=Ed(s[i],r[i]);if(a)return a}return ls(s.length,r.length)}function Ad(t){return _0(t)}function _0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(s){const r=sl(s);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(s){return ac(s).toBase64()})(t.bytesValue):"referenceValue"in t?(function(s){return pt.fromName(s).toString()})(t.referenceValue):"geoPointValue"in t?(function(s){return`geo(${s.latitude},${s.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(s){let r="[",i=!0;for(const a of s.values||[])i?i=!1:r+=",",r+=_0(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(s){const r=Object.keys(s.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${_0(s.fields[l])}`;return i+"}"})(t.mapValue):At()}function Gf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function w0(t){return!!t&&"integerValue"in t}function $1(t){return!!t&&"arrayValue"in t}function Lj(t){return!!t&&"nullValue"in t}function Dj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yf(t){return!!t&&"mapValue"in t}function $F(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function oh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hc(t.mapValue.fields,((s,r)=>e.mapValue.fields[s]=oh(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=oh(t.arrayValue.values[s]);return e}return Object.assign({},t)}function OF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.value=e}static empty(){return new Er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!yf(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=oh(s)}setAll(e){let s=Bn.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,r,i),r={},i=[],s=d.popLast()}l?r[d.lastSegment()]=oh(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(s);this.applyChanges(a,r,i)}delete(e){const s=this.field(e.popLast());yf(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=s.mapValue.fields[e.get(r)];yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,r){hc(s,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Er(oh(this.value))}}function s3(t){const e=[];return hc(t.fields,((s,r)=>{const i=new Bn([s]);if(yf(r)){const a=s3(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,s,r,i,a,l,d){this.key=e,this.documentType=s,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Zn(e,0,Lt.min(),Lt.min(),Lt.min(),Er.empty(),0)}static newFoundDocument(e,s,r,i){return new Zn(e,1,s,Lt.min(),r,i,0)}static newNoDocument(e,s){return new Zn(e,2,s,Lt.min(),Lt.min(),Er.empty(),0)}static newUnknownDocument(e,s){return new Zn(e,3,s,Lt.min(),Lt.min(),Er.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,s){this.position=e,this.inclusive=s}}function Mj(t,e,s){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=pt.comparator(pt.fromName(l.referenceValue),s.key):r=Ed(l,s.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!ha(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,s="asc"){this.field=e,this.dir=s}}function VF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{}class ln extends n3{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new zF(e,s,r):s==="array-contains"?new WF(e,r):s==="in"?new qF(e,r):s==="not-in"?new KF(e,r):s==="array-contains-any"?new QF(e,r):new ln(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new HF(e,r):new GF(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(Ed(s,this.value)):s!==null&&oc(this.value)===oc(s)&&this.matchesComparison(Ed(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends n3{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new Bi(e,s)}matches(e){return r3(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function r3(t){return t.op==="and"}function i3(t){return UF(t)&&r3(t)}function UF(t){for(const e of t.filters)if(e instanceof Bi)return!1;return!0}function j0(t){if(t instanceof ln)return t.field.canonicalString()+t.op.toString()+Ad(t.value);if(i3(t))return t.filters.map((e=>j0(e))).join(",");{const e=t.filters.map((s=>j0(s))).join(",");return`${t.op}(${e})`}}function a3(t,e){return t instanceof ln?(function(r,i){return i instanceof ln&&r.op===i.op&&r.field.isEqual(i.field)&&ha(r.value,i.value)})(t,e):t instanceof Bi?(function(r,i){return i instanceof Bi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&a3(l,i.filters[d])),!0):!1})(t,e):void At()}function o3(t){return t instanceof ln?(function(s){return`${s.field.canonicalString()} ${s.op} ${Ad(s.value)}`})(t):t instanceof Bi?(function(s){return s.op.toString()+" {"+s.getFilters().map(o3).join(" ,")+"}"})(t):"Filter"}class zF extends ln{constructor(e,s,r){super(e,s,r),this.key=pt.fromName(r.referenceValue)}matches(e){const s=pt.comparator(e.key,this.key);return this.matchesComparison(s)}}class HF extends ln{constructor(e,s){super(e,"in",s),this.keys=l3("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class GF extends ln{constructor(e,s){super(e,"not-in",s),this.keys=l3("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function l3(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map((r=>pt.fromName(r.referenceValue)))}class WF extends ln{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return $1(s)&&Rh(s.arrayValue,this.value)}}class qF extends ln{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Rh(this.value.arrayValue,s)}}class KF extends ln{constructor(e,s){super(e,"not-in",s)}matches(e){if(Rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!Rh(this.value.arrayValue,s)}}class QF extends ln{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!$1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>Rh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,s=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function Bj(t,e=null,s=[],r=[],i=null,a=null,l=null){return new XF(t,e,s,r,i,a,l)}function O1(t){const e=Dt(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>j0(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Ig(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>Ad(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>Ad(r))).join(",")),e.ue=s}return e.ue}function V1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!VF(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!a3(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fj(t.startAt,e.startAt)&&Fj(t.endAt,e.endAt)}function S0(t){return pt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,s=null,r=[],i=[],a=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YF(t,e,s,r,i,a,l,d){return new io(t,e,s,r,i,a,l,d)}function U1(t){return new io(t)}function $j(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function z1(t){return t.collectionGroup!==null}function _d(t){const e=Dt(t);if(e.ce===null){e.ce=[];const s=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),s.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new On(Bn.comparator);return l.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{s.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Ph(a,r))})),s.has(Bn.keyField().canonicalString())||e.ce.push(new Ph(Bn.keyField(),r))}return e.ce}function aa(t){const e=Dt(t);return e.le||(e.le=JF(e,_d(t))),e.le}function JF(t,e){if(t.limitType==="F")return Bj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Ph(i.field,a)}));const s=t.endAt?new Id(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Id(t.startAt.position,t.startAt.inclusive):null;return Bj(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function N0(t,e){const s=t.filters.concat([e]);return new io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Wf(t,e,s){return new io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Pg(t,e){return V1(aa(t),aa(e))&&t.limitType===e.limitType}function c3(t){return`${O1(aa(t))}|lt:${t.limitType}`}function id(t){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((i=>o3(i))).join(", ")}]`),Ig(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((i=>Ad(i))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((i=>Ad(i))).join(",")),`Target(${r})`})(aa(t))}; limitType=${t.limitType})`}function Lg(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):pt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of _d(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,u){const h=Mj(l,d,u);return l.inclusive?h<=0:h<0})(r.startAt,_d(r),i)||r.endAt&&!(function(l,d,u){const h=Mj(l,d,u);return l.inclusive?h>=0:h>0})(r.endAt,_d(r),i))})(t,e)}function ZF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d3(t){return(e,s)=>{let r=!1;for(const i of _d(t)){const a=e7(i,e,s);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function e7(t,e,s){const r=t.field.isKeyField()?pt.comparator(e.key,s.key):(function(a,l,d){const u=l.data.field(a),h=d.data.field(a);return u!==null&&h!==null?Ed(u,h):At()})(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[s]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,((s,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return e3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=new Bs(pt.comparator);function Ja(){return t7}const u3=new Bs(pt.comparator);function Qu(...t){let e=u3;for(const s of t)e=e.insert(s.key,s);return e}function h3(t){let e=u3;return t.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function Ql(){return lh()}function m3(){return lh()}function lh(){return new qd((t=>t.toString()),((t,e)=>t.isEqual(e)))}const s7=new Bs(pt.comparator),n7=new On(pt.comparator);function Xt(...t){let e=n7;for(const s of t)e=e.add(s);return e}const r7=new On(ls);function i7(){return r7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(e)?"-0":e}}function p3(t){return{integerValue:""+t}}function a7(t,e){return MF(e)?p3(e):H1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this._=void 0}}function o7(t,e,s){return t instanceof Lh?(function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Rg(a)&&(a=B1(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(s,e):t instanceof Dh?g3(t,e):t instanceof Mh?x3(t,e):(function(i,a){const l=f3(i,a),d=Oj(l)+Oj(i.Pe);return w0(l)&&w0(i.Pe)?p3(d):H1(i.serializer,d)})(t,e)}function l7(t,e,s){return t instanceof Dh?g3(t,e):t instanceof Mh?x3(t,e):s}function f3(t,e){return t instanceof qf?(function(r){return w0(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Lh extends Dg{}class Dh extends Dg{constructor(e){super(),this.elements=e}}function g3(t,e){const s=y3(e);for(const r of t.elements)s.some((i=>ha(i,r)))||s.push(r);return{arrayValue:{values:s}}}class Mh extends Dg{constructor(e){super(),this.elements=e}}function x3(t,e){let s=y3(e);for(const r of t.elements)s=s.filter((i=>!ha(i,r)));return{arrayValue:{values:s}}}class qf extends Dg{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function Oj(t){return Ys(t.integerValue||t.doubleValue)}function y3(t){return $1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,s){this.field=e,this.transform=s}}function d7(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Dh&&i instanceof Dh||r instanceof Mh&&i instanceof Mh?Td(r.elements,i.elements,ha):r instanceof qf&&i instanceof qf?ha(r.Pe,i.Pe):r instanceof Lh&&i instanceof Lh})(t.transform,e.transform)}class u7{constructor(e,s){this.version=e,this.transformResults=s}}class mi{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mg{}function v3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new G1(t.key,mi.none()):new tm(t.key,t.data,mi.none());{const s=t.data,r=Er.empty();let i=new On(Bn.comparator);for(let a of e.fields)if(!i.has(a)){let l=s.field(a);l===null&&a.length>1&&(a=a.popLast(),l=s.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new ol(t.key,r,new Kr(i.toArray()),mi.none())}}function h7(t,e,s){t instanceof tm?(function(i,a,l){const d=i.value.clone(),u=Uj(i.fieldTransforms,a,l.transformResults);d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,s):t instanceof ol?(function(i,a,l){if(!vf(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=Uj(i.fieldTransforms,a,l.transformResults),u=a.data;u.setAll(b3(i)),u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,s):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,s)}function ch(t,e,s,r){return t instanceof tm?(function(a,l,d,u){if(!vf(a.precondition,l))return d;const h=a.value.clone(),m=zj(a.fieldTransforms,u,l);return h.setAll(m),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,s,r):t instanceof ol?(function(a,l,d,u){if(!vf(a.precondition,l))return d;const h=zj(a.fieldTransforms,u,l),m=l.data;return m.setAll(b3(a)),m.setAll(h),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,s,r):(function(a,l,d){return vf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(t,e,s)}function m7(t,e){let s=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=f3(r.transform,i||null);a!=null&&(s===null&&(s=Er.empty()),s.set(r.field,a))}return s||null}function Vj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Td(r,i,((a,l)=>d7(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tm extends Mg{constructor(e,s,r,i=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ol extends Mg{constructor(e,s,r,i,a=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function b3(t){const e=new Map;return t.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}})),e}function Uj(t,e,s){const r=new Map;fs(t.length===s.length);for(let i=0;i<s.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,l7(l,d,s[i]))}return r}function zj(t,e,s){const r=new Map;for(const i of t){const a=i.transform,l=s.data.field(i.field);r.set(i.field,o7(a,l,e))}return r}class G1 extends Mg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p7 extends Mg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,s,r,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&h7(a,e,r[i])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=ch(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=ch(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=m3();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=s.has(i.key)?null:d;const u=v3(l,d);u!==null&&r.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(Lt.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),Xt())}isEqual(e){return this.batchId===e.batchId&&Td(this.mutations,e.mutations,((s,r)=>Vj(s,r)))&&Td(this.baseMutations,e.baseMutations,((s,r)=>Vj(s,r)))}}class W1{constructor(e,s,r,i){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=i}static from(e,s,r){fs(e.mutations.length===r.length);let i=(function(){return s7})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new W1(e,s,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,rs;function y7(t){switch(t){default:return At();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function _3(t){if(t===void 0)return Ya("GRPC error has no .code"),ve.UNKNOWN;switch(t){case sn.OK:return ve.OK;case sn.CANCELLED:return ve.CANCELLED;case sn.UNKNOWN:return ve.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ve.INTERNAL;case sn.UNAVAILABLE:return ve.UNAVAILABLE;case sn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case sn.NOT_FOUND:return ve.NOT_FOUND;case sn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case sn.ABORTED:return ve.ABORTED;case sn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case sn.DATA_LOSS:return ve.DATA_LOSS;default:return At()}}(rs=sn||(sn={}))[rs.OK=0]="OK",rs[rs.CANCELLED=1]="CANCELLED",rs[rs.UNKNOWN=2]="UNKNOWN",rs[rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rs[rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rs[rs.NOT_FOUND=5]="NOT_FOUND",rs[rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",rs[rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",rs[rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",rs[rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rs[rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rs[rs.ABORTED=10]="ABORTED",rs[rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",rs[rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",rs[rs.INTERNAL=13]="INTERNAL",rs[rs.UNAVAILABLE=14]="UNAVAILABLE",rs[rs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=new Jl([4294967295,4294967295],0);function Hj(t){const e=v7().encode(t),s=new WT;return s.update(e),new Uint8Array(s.digest())}function Gj(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Jl([s,r],0),new Jl([i,a],0)]}class q1{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Xu(`Invalid padding: ${s}`);if(r<0)throw new Xu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xu(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Xu(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=Jl.fromNumber(this.Ie)}Ee(e,s,r){let i=e.add(s.multiply(Jl.fromNumber(r)));return i.compare(b7)===1&&(i=new Jl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=Hj(e),[r,i]=Gj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);if(!this.de(l))return!1}return!0}static create(e,s,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new q1(a,i,s);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.Ie===0)return;const s=Hj(e),[r,i]=Gj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);this.Ae(l)}}Ae(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,s,r,i,a){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const i=new Map;return i.set(e,sm.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Fg(Lt.min(),i,new Bs(ls),Ja(),Xt())}}class sm{constructor(e,s,r,i,a){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new sm(r,s,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,s,r,i){this.Re=e,this.removedTargetIds=s,this.key=r,this.Ve=i}}class w3{constructor(e,s){this.targetId=e,this.me=s}}class j3{constructor(e,s,r=Un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=i}}class Wj{constructor(){this.fe=0,this.ge=Kj(),this.pe=Un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xt(),s=Xt(),r=Xt();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:r=r.add(i);break;default:At()}})),new sm(this.pe,this.ye,e,s,r)}Ce(){this.we=!1,this.ge=Kj()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fs(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ja(),this.qe=qj(),this.Qe=new Bs(ls)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,(s=>{const r=this.Ge(s);switch(e.state){case 0:this.ze(s)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),r.De(e.resumeToken));break;default:At()}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach(((r,i)=>{this.ze(i)&&s(i)}))}He(e){const s=e.targetId,r=e.me.count,i=this.Je(s);if(i){const a=i.target;if(S0(a))if(r===0){const l=new pt(a.path);this.Ue(s,l,Zn.newNoDocument(l,Lt.min()))}else fs(r===1);else{const l=this.Ye(s);if(l!==r){const d=this.Ze(e),u=d?this.Xe(d,e,l):1;if(u!==0){this.je(s);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,h)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=s;let l,d;try{l=ac(r).toUint8Array()}catch(u){if(u instanceof t3)return Cd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new q1(l,i,a)}catch(u){return Cd(u instanceof Xu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.Ie===0?null:d}Xe(e,s,r){return s.me.count===r-this.nt(e,s.targetId)?0:2}nt(e,s){const r=this.Le.getRemoteKeysForTarget(s);let i=0;return r.forEach((a=>{const l=this.Le.tt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(s,a,null),i++)})),i}rt(e){const s=new Map;this.Be.forEach(((a,l)=>{const d=this.Je(l);if(d){if(a.current&&S0(d.target)){const u=new pt(d.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,Zn.newNoDocument(u,e))}a.be&&(s.set(l,a.ve()),a.Ce())}}));let r=Xt();this.qe.forEach(((a,l)=>{let d=!0;l.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const i=new Fg(e,s,this.Qe,this.ke,r);return this.ke=Ja(),this.qe=qj(),this.Qe=new Bs(ls),i}$e(e,s){if(!this.ze(e))return;const r=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,r),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),r&&(this.ke=this.ke.insert(s,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new Wj,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new On(ls),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||it("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wj),this.Le.getRemoteKeysForTarget(e).forEach((s=>{this.Ue(e,s,null)}))}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function qj(){return new Bs(pt.comparator)}function Kj(){return new Bs(pt.comparator)}const w7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S7={and:"AND",or:"OR"};class N7{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function k0(t,e){return t.useProto3Json||Ig(e)?e:{value:e}}function Kf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function k7(t,e){return Kf(t,e.toTimestamp())}function oa(t){return fs(!!t),Lt.fromTimestamp((function(s){const r=sl(s);return new Hs(r.seconds,r.nanos)})(t))}function K1(t,e){return C0(t,e).canonicalString()}function C0(t,e){const s=(function(i){return new vs(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?s:s.child(e)}function N3(t){const e=vs.fromString(t);return fs(A3(e)),e}function T0(t,e){return K1(t.databaseId,e.path)}function Qy(t,e){const s=N3(e);if(s.get(1)!==t.databaseId.projectId)throw new We(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new We(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new pt(C3(s))}function k3(t,e){return K1(t.databaseId,e)}function C7(t){const e=N3(t);return e.length===4?vs.emptyPath():C3(e)}function E0(t){return new vs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function C3(t){return fs(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Qj(t,e,s){return{name:T0(t,e),fields:s.value.mapValue.fields}}function T7(t,e){let s;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:At()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,m){return h.useProto3Json?(fs(m===void 0||typeof m=="string"),Un.fromBase64String(m||"")):(fs(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Un.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(h){const m=h.code===void 0?ve.UNKNOWN:_3(h.code);return new We(m,h.message||"")})(l);s=new j3(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qy(t,r.document.name),a=oa(r.document.updateTime),l=r.document.createTime?oa(r.document.createTime):Lt.min(),d=new Er({mapValue:{fields:r.document.fields}}),u=Zn.newFoundDocument(i,a,l,d),h=r.targetIds||[],m=r.removedTargetIds||[];s=new bf(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qy(t,r.document),a=r.readTime?oa(r.readTime):Lt.min(),l=Zn.newNoDocument(i,a),d=r.removedTargetIds||[];s=new bf([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qy(t,r.document),a=r.removedTargetIds||[];s=new bf([],a,i,null)}else{if(!("filter"in e))return At();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new x7(i,a),d=r.targetId;s=new w3(d,l)}}return s}function E7(t,e){let s;if(e instanceof tm)s={update:Qj(t,e.key,e.value)};else if(e instanceof G1)s={delete:T0(t,e.key)};else if(e instanceof ol)s={update:Qj(t,e.key,e.data),updateMask:B7(e.fieldMask)};else{if(!(e instanceof p7))return At();s={verify:T0(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof Lh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Dh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Mh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof qf)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw At()})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:k7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:At()})(t,e.precondition)),s}function A7(t,e){return t&&t.length>0?(fs(e!==void 0),t.map((s=>(function(i,a){let l=i.updateTime?oa(i.updateTime):oa(a);return l.isEqual(Lt.min())&&(l=oa(a)),new u7(l,i.transformResults||[])})(s,e)))):[]}function I7(t,e){return{documents:[k3(t,e.path)]}}function R7(t,e){const s={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=k3(t,i);const a=(function(h){if(h.length!==0)return E3(Bi.create(h,"and"))})(e.filters);a&&(s.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:ad(v.field),direction:D7(v.dir)}})(m)))})(e.orderBy);l&&(s.structuredQuery.orderBy=l);const d=k0(t,e.limit);return d!==null&&(s.structuredQuery.limit=d),e.startAt&&(s.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:s,parent:i}}function P7(t){let e=C7(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let i=null;if(r>0){fs(r===1);const m=s.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];s.where&&(a=(function(g){const v=T3(g);return v instanceof Bi&&i3(v)?v.getFilters():[v]})(s.where));let l=[];s.orderBy&&(l=(function(g){return g.map((v=>(function(_){return new Ph(od(_.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(v)))})(s.orderBy));let d=null;s.limit&&(d=(function(g){let v;return v=typeof g=="object"?g.value:g,Ig(v)?null:v})(s.limit));let u=null;s.startAt&&(u=(function(g){const v=!!g.before,b=g.values||[];return new Id(b,v)})(s.startAt));let h=null;return s.endAt&&(h=(function(g){const v=!g.before,b=g.values||[];return new Id(b,v)})(s.endAt)),YF(e,i,l,a,d,"F",u,h)}function L7(t,e){const s=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function T3(t){return t.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=od(s.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=od(s.unaryFilter.field);return ln.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=od(s.unaryFilter.field);return ln.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=od(s.unaryFilter.field);return ln.create(l,"!=",{nullValue:"NULL_VALUE"});default:return At()}})(t):t.fieldFilter!==void 0?(function(s){return ln.create(od(s.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}})(s.fieldFilter.op),s.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(s){return Bi.create(s.compositeFilter.filters.map((r=>T3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return At()}})(s.compositeFilter.op))})(t):At()}function D7(t){return w7[t]}function M7(t){return j7[t]}function F7(t){return S7[t]}function ad(t){return{fieldPath:t.canonicalString()}}function od(t){return Bn.fromServerFormat(t.fieldPath)}function E3(t){return t instanceof ln?(function(s){if(s.op==="=="){if(Dj(s.value))return{unaryFilter:{field:ad(s.field),op:"IS_NAN"}};if(Lj(s.value))return{unaryFilter:{field:ad(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Dj(s.value))return{unaryFilter:{field:ad(s.field),op:"IS_NOT_NAN"}};if(Lj(s.value))return{unaryFilter:{field:ad(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ad(s.field),op:M7(s.op),value:s.value}}})(t):t instanceof Bi?(function(s){const r=s.getFilters().map((i=>E3(i)));return r.length===1?r[0]:{compositeFilter:{op:F7(s.op),filters:r}}})(t):At()}function B7(t){const e=[];return t.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function A3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,s,r,i,a=Lt.min(),l=Lt.min(),d=Un.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new Go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e){this.ct=e}}function O7(t){const e=P7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.un=new U7}addToCollectionParentIndex(e,s){return this.un.add(s),Ae.resolve()}getCollectionParents(e,s){return Ae.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return Ae.resolve()}deleteFieldIndex(e,s){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,s){return Ae.resolve()}getDocumentsMatchingTarget(e,s){return Ae.resolve(null)}getIndexType(e,s){return Ae.resolve(0)}getFieldIndexes(e,s){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,s){return Ae.resolve(tl.min())}getMinOffsetFromCollectionGroup(e,s){return Ae.resolve(tl.min())}updateCollectionGroup(e,s,r){return Ae.resolve()}updateIndexEntries(e,s){return Ae.resolve()}}class U7{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s]||new On(vs.comparator),a=!i.has(r);return this.index[s]=i.add(r),a}has(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(vs.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Rd(0)}static kn(){return new Rd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this.changes=new qd((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?Ae.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e,s,r,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,s)))).next((i=>(r!==null&&ch(r.mutation,i,Kr.empty(),Hs.now()),i)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,Xt()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=Xt()){const i=Ql();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,r).next((a=>{let l=Qu();return a.forEach(((d,u)=>{l=l.insert(d,u.overlayedDocument)})),l}))))}getOverlayedDocuments(e,s){const r=Ql();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,Xt())))}populateOverlays(e,s,r){const i=[];return r.forEach((a=>{s.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{s.set(l,d)}))}))}computeViews(e,s,r,i){let a=Ja();const l=lh(),d=(function(){return lh()})();return s.forEach(((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof ol)?a=a.insert(h.key,h):m!==void 0?(l.set(h.key,m.mutation.getFieldMask()),ch(m.mutation,h,m.mutation.getFieldMask(),Hs.now())):l.set(h.key,Kr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,m)=>l.set(h,m))),s.forEach(((h,m)=>{var g;return d.set(h,new H7(m,(g=l.get(h))!==null&&g!==void 0?g:null))})),d)))}recalculateAndSaveOverlays(e,s){const r=lh();let i=new Bs(((l,d)=>l-d)),a=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((l=>{for(const d of l)d.keys().forEach((u=>{const h=s.get(u);if(h===null)return;let m=r.get(u)||Kr.empty();m=d.applyToLocalView(h,m),r.set(u,m);const g=(i.get(d.batchId)||Xt()).add(u);i=i.insert(d.batchId,g)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,m=u.value,g=m3();m.forEach((v=>{if(!a.has(v)){const b=v3(s.get(v),r.get(v));b!==null&&g.set(v,b),a=a.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,g))}return Ae.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,i){return(function(l){return pt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):z1(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,i):this.getDocumentsMatchingCollectionQuery(e,s,r,i)}getNextDocuments(e,s,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,i-a.size):Ae.resolve(Ql());let d=-1,u=a;return l.next((h=>Ae.forEach(h,((m,g)=>(d<g.largestBatchId&&(d=g.largestBatchId),a.get(m)?Ae.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{u=u.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,Xt()))).next((m=>({batchId:d,changes:h3(m)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new pt(s)).next((r=>{let i=Qu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,i){const a=s.collectionGroup;let l=Qu();return this.indexManager.getCollectionParents(e,a).next((d=>Ae.forEach(d,(u=>{const h=(function(g,v){return new io(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(s,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{l=l.insert(g,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,s,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,a,i)))).next((l=>{a.forEach(((u,h)=>{const m=h.getKey();l.get(m)===null&&(l=l.insert(m,Zn.newInvalidDocument(m)))}));let d=Qu();return l.forEach(((u,h)=>{const m=a.get(u);m!==void 0&&ch(m.mutation,h,Kr.empty(),Hs.now()),Lg(s,h)&&(d=d.insert(u,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return Ae.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,(function(i){return{id:i.id,version:i.version,createTime:oa(i.createTime)}})(s)),Ae.resolve()}getNamedQuery(e,s){return Ae.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,(function(i){return{name:i.name,query:O7(i.bundledQuery),readTime:oa(i.readTime)}})(s)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.overlays=new Bs(pt.comparator),this.Ir=new Map}getOverlay(e,s){return Ae.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Ql();return Ae.forEach(s,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((i,a)=>{this.ht(e,s,a)})),Ae.resolve()}removeOverlaysForBatchId(e,s,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),Ae.resolve()}getOverlaysForCollection(e,s,r){const i=Ql(),a=s.length+1,l=new pt(s.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!s.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ae.resolve(i)}getOverlaysForCollectionGroup(e,s,r,i){let a=new Bs(((h,m)=>h-m));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===s&&h.largestBatchId>r){let m=a.get(h.largestBatchId);m===null&&(m=Ql(),a=a.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const d=Ql(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,m)=>d.set(h,m))),!(d.size()>=i)););return Ae.resolve(d)}ht(e,s,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new g7(s,r));let a=this.Ir.get(s);a===void 0&&(a=Xt(),this.Ir.set(s,a)),this.Ir.set(s,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.Tr=new On(wn.Er),this.dr=new On(wn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const r=new wn(e,s);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Vr(new wn(e,s))}mr(e,s){e.forEach((r=>this.removeReference(r,s)))}gr(e){const s=new pt(new vs([])),r=new wn(s,e),i=new wn(s,e+1),a=[];return this.dr.forEachInRange([r,i],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new pt(new vs([])),r=new wn(s,e),i=new wn(s,e+1);let a=Xt();return this.dr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const s=new wn(e,0),r=this.Tr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return pt.comparator(e.key,s.key)||ls(e.wr,s.wr)}static Ar(e,s){return ls(e.wr,s.wr)||pt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new On(wn.Er)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new f7(a,s,r,i);this.mutationQueue.push(l);for(const d of i)this.br=this.br.add(new wn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Ae.resolve(l)}lookupMutationBatch(e,s){return Ae.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,i=this.vr(r),a=i<0?0:i;return Ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new wn(s,0),i=new wn(s,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(l=>{const d=this.Dr(l.wr);a.push(d)})),Ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new On(ls);return s.forEach((i=>{const a=new wn(i,0),l=new wn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(d=>{r=r.add(d.wr)}))})),Ae.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,i=r.length+1;let a=r;pt.isDocumentKey(a)||(a=a.child(""));const l=new wn(new pt(a),0);let d=new On(ls);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(d=d.add(u.wr)),!0)}),l),Ae.resolve(this.Cr(d))}Cr(e){const s=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&s.push(i)})),s}removeMutationBatch(e,s){fs(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ae.forEach(s.mutations,(i=>{const a=new wn(i.key,s.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,s){const r=new wn(s,0),i=this.br.firstAfterOrEqual(r);return Ae.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.Mr=e,this.docs=(function(){return new Bs(pt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return Ae.resolve(r?r.document.mutableCopy():Zn.newInvalidDocument(s))}getEntries(e,s){let r=Ja();return s.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Zn.newInvalidDocument(i))})),Ae.resolve(r)}getDocumentsMatchingQuery(e,s,r,i){let a=Ja();const l=s.path,d=new pt(l.child("")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||RF(IF(m),r)<=0||(i.has(m.key)||Lg(s,m))&&(a=a.insert(m.key,m.mutableCopy()))}return Ae.resolve(a)}getAllFromCollectionGroup(e,s,r,i){At()}Or(e,s){return Ae.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new Y7(this)}getSize(e){return Ae.resolve(this.size)}}class Y7 extends z7{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Ae.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.persistence=e,this.Nr=new qd((s=>O1(s)),V1),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Q1,this.targetCount=0,this.kr=Rd.Bn()}forEachTarget(e,s){return this.Nr.forEach(((r,i)=>s(i))),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.Lr&&(this.Lr=s),Ae.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new Rd(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,Ae.resolve()}updateTargetData(e,s){return this.Kn(s),Ae.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,s,r){let i=0;const a=[];return this.Nr.forEach(((l,d)=>{d.sequenceNumber<=s&&r.get(d.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Ae.waitFor(a).next((()=>i))}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,s){const r=this.Nr.get(s)||null;return Ae.resolve(r)}addMatchingKeys(e,s,r){return this.Br.Rr(s,r),Ae.resolve()}removeMatchingKeys(e,s,r){this.Br.mr(s,r);const i=this.persistence.referenceDelegate,a=[];return i&&s.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),Ae.waitFor(a)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),Ae.resolve()}getMatchingKeysForTargetId(e,s){const r=this.Br.yr(s);return Ae.resolve(r)}containsKey(e,s){return Ae.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,s){this.qr={},this.overlays={},this.Qr=new F1(0),this.Kr=!1,this.Kr=!0,this.$r=new K7,this.referenceDelegate=e(this),this.Ur=new J7(this),this.indexManager=new V7,this.remoteDocumentCache=(function(i){return new X7(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new $7(s),this.Gr=new W7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new q7,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.qr[e.toKey()];return r||(r=new Q7(s,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,r){it("MemoryPersistence","Starting transaction:",e);const i=new eB(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,s){return Ae.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,s))))}}class eB extends LF{constructor(e){super(),this.currentSequenceNumber=e}}class X1{constructor(e){this.persistence=e,this.Jr=new Q1,this.Yr=null}static Zr(e){return new X1(e)}get Xr(){if(this.Yr)return this.Yr;throw At()}addReference(e,s,r){return this.Jr.addReference(r,s),this.Xr.delete(r.toString()),Ae.resolve()}removeReference(e,s,r){return this.Jr.removeReference(r,s),this.Xr.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),Ae.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,s)))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.Xr,(r=>{const i=pt.fromPath(r);return this.ei(e,i).next((a=>{a||s.removeEntry(i,Lt.min())}))})).next((()=>(this.Yr=null,s.apply(e))))}updateLimboDocument(e,s){return this.ei(e,s).next((r=>{r?this.Xr.delete(s.toString()):this.Xr.add(s.toString())}))}Wr(e){return 0}ei(e,s){return Ae.or([()=>Ae.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,s,r,i){this.targetId=e,this.fromCache=s,this.$i=r,this.Ui=i}static Wi(e,s){let r=Xt(),i=Xt();for(const a of s.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Y1(e,s.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return t8()?8:DF(er())>0?6:4})()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,r,i){const a={result:null};return this.Yi(e,s).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,s,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new tB;return this.Xi(e,s,l).next((d=>{if(a.result=d,this.zi)return this.es(e,s,l,d.size)}))})).next((()=>a.result))}es(e,s,r,i){return r.documentReadCount<this.ji?(Mu()<=Zt.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",id(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ae.resolve()):(Mu()<=Zt.DEBUG&&it("QueryEngine","Query:",id(s),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mu()<=Zt.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",id(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,aa(s))):Ae.resolve())}Yi(e,s){if($j(s))return Ae.resolve(null);let r=aa(s);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(s.limit!==null&&i===1&&(s=Wf(s,null,"F"),r=aa(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Xt(...a);return this.Ji.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(s,d);return this.ns(s,h,l,u.readTime)?this.Yi(e,Wf(s,null,"F")):this.rs(e,h,s,u)}))))})))))}Zi(e,s,r,i){return $j(s)||i.isEqual(Lt.min())?Ae.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(s,a);return this.ns(s,l,r,i)?Ae.resolve(null):(Mu()<=Zt.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),id(s)),this.rs(e,l,s,AF(i,-1)).next((d=>d)))}))}ts(e,s){let r=new On(d3(e));return s.forEach(((i,a)=>{Lg(e,a)&&(r=r.add(a))})),r}ns(e,s,r,i){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const a=e.limitType==="F"?s.last():s.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,s,r){return Mu()<=Zt.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",id(s)),this.Ji.getDocumentsMatchingQuery(e,s,tl.min(),r)}rs(e,s,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(s.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,s,r,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new Bs(ls),this._s=new qd((a=>O1(a)),V1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G7(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.os)))}}function rB(t,e,s,r){return new nB(t,e,s,r)}async function I3(t,e){const s=Dt(t);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return s.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,s.ls(e),s.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let u=Xt();for(const h of i){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of a){d.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return s.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:l,addedBatchIds:d})))}))}))}function iB(t,e){const s=Dt(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=s.cs.newChangeBuffer({trackRemovals:!0});return(function(d,u,h,m){const g=h.batch,v=g.keys();let b=Ae.resolve();return v.forEach((_=>{b=b.next((()=>m.getEntry(u,_))).next((N=>{const C=h.docVersions.get(_);fs(C!==null),N.version.compareTo(C)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),m.addEntry(N)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(u,g)))})(s,r,e,a).next((()=>a.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let u=Xt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u})(e)))).next((()=>s.localDocuments.getDocuments(r,i)))}))}function R3(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Ur.getLastRemoteSnapshotVersion(s)))}function aB(t,e){const s=Dt(t),r=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const d=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;d.push(s.Ur.removeMatchingKeys(a,m.removedDocuments,g).next((()=>s.Ur.addMatchingKeys(a,m.addedDocuments,g))));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Un.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(g,b),(function(N,C,R){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(v,b,m)&&d.push(s.Ur.updateTargetData(a,b))}));let u=Ja(),h=Xt();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(a,m))})),d.push(oB(a,l,e.documentUpdates).next((m=>{u=m.Ps,h=m.Is}))),!r.isEqual(Lt.min())){const m=s.Ur.getLastRemoteSnapshotVersion(a).next((g=>s.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(m)}return Ae.waitFor(d).next((()=>l.apply(a))).next((()=>s.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(s.os=i,a)))}function oB(t,e,s){let r=Xt(),i=Xt();return s.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=Ja();return s.forEach(((d,u)=>{const h=a.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(d)),u.isNoDocument()&&u.version.isEqual(Lt.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):it("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)})),{Ps:l,Is:i}}))}function lB(t,e){const s=Dt(t);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function cB(t,e){const s=Dt(t);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return s.Ur.getTargetData(r,e).next((a=>a?(i=a,Ae.resolve(i)):s.Ur.allocateTargetId(r).next((l=>(i=new Go(e,l,"TargetPurposeListen",r.currentSequenceNumber),s.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=s.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(r.targetId,r),s._s.set(e,r.targetId)),r}))}async function A0(t,e,s){const r=Dt(t),i=r.os.get(e),a=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!em(l))throw l;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Xj(t,e,s){const r=Dt(t);let i=Lt.min(),a=Xt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(u,h,m){const g=Dt(u),v=g._s.get(m);return v!==void 0?Ae.resolve(g.os.get(v)):g.Ur.getTargetData(h,m)})(r,l,aa(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,d.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,s?i:Lt.min(),s?a:Xt()))).next((d=>(dB(r,ZF(e),d),{documents:d,Ts:a})))))}function dB(t,e,s){let r=t.us.get(e)||Lt.min();s.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class Yj{constructor(){this.activeTargetIds=i7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uB{constructor(){this.so=new Yj,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,r){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yj,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp=null;function Xy(){return Mp===null?Mp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mp++,"0x"+Mp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class fB extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const r=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+s.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(s,r,i,a,l){const d=Xy(),u=this.xo(s,r.toUriEncodedString());it("RestConnection",`Sending RPC '${s}' ${d}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,l),this.No(s,u,h,i).then((m=>(it("RestConnection",`Received RPC '${s}' ${d}: `,m),m)),(m=>{throw Cd("RestConnection",`RPC '${s}' ${d} failed with error: `,m,"url: ",u,"request:",i),m}))}Lo(s,r,i,a,l,d){return this.Mo(s,r,i,a,l)}Oo(s,r,i){s["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wd})(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>s[l]=a)),i&&i.headers.forEach(((a,l)=>s[l]=a))}xo(s,r){const i=mB[s];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,r,i){const a=Xy();return new Promise(((l,d)=>{const u=new qT;u.setWithCredentials(!0),u.listenOnce(KT.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case xf.NO_ERROR:const m=u.getResponseJson();it(Qn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case xf.TIMEOUT:it(Qn,`RPC '${e}' ${a} timed out`),d(new We(ve.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const g=u.getStatus();if(it(Qn,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const _=(function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(R)>=0?R:ve.UNKNOWN})(b.status);d(new We(_,b.message))}else d(new We(ve.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new We(ve.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{it(Qn,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);it(Qn,`RPC '${e}' ${a} sending request:`,i),u.send(s,"POST",h,r,15)}))}Bo(e,s,r){const i=Xy(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=YT(),d=XT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,s,r),u.encodeInitMessageHeaders=!0;const m=a.join("");it(Qn,`Creating RPC '${e}' stream ${i}: ${m}`,u);const g=l.createWebChannel(m,u);let v=!1,b=!1;const _=new pB({Io:C=>{b?it(Qn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(it(Qn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),it(Qn,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},To:()=>g.close()}),N=(C,R,D)=>{C.listen(R,(A=>{try{D(A)}catch(y){setTimeout((()=>{throw y}),0)}}))};return N(g,Ku.EventType.OPEN,(()=>{b||(it(Qn,`RPC '${e}' stream ${i} transport opened.`),_.yo())})),N(g,Ku.EventType.CLOSE,(()=>{b||(b=!0,it(Qn,`RPC '${e}' stream ${i} transport closed`),_.So())})),N(g,Ku.EventType.ERROR,(C=>{b||(b=!0,Cd(Qn,`RPC '${e}' stream ${i} transport errored:`,C),_.So(new We(ve.UNAVAILABLE,"The operation could not be completed")))})),N(g,Ku.EventType.MESSAGE,(C=>{var R;if(!b){const D=C.data[0];fs(!!D);const A=D,y=A.error||((R=A[0])===null||R===void 0?void 0:R.error);if(y){it(Qn,`RPC '${e}' stream ${i} received error:`,y);const w=y.status;let M=(function(T){const F=sn[T];if(F!==void 0)return _3(F)})(w),k=y.message;M===void 0&&(M=ve.INTERNAL,k="Unknown error status: "+w+" with message "+y.message),b=!0,_.So(new We(M,k)),g.close()}else it(Qn,`RPC '${e}' stream ${i} received:`,D),_.bo(D)}})),N(d,QT.STAT_EVENT,(C=>{C.stat===b0.PROXY?it(Qn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===b0.NOPROXY&&it(Qn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.wo()}),0),_}}function Yy(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){return new N7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,s,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=s,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-r);i>0&&it("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,s,r,i,a,l,d,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new P3(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===ve.RESOURCE_EXHAUSTED?(Ya(s.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===s&&this.P_(r,i)}),(r=>{e((()=>{const i=new We(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,s){const r=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget((()=>this.Yo===e?s():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gB extends L3{constructor(e,s,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=T7(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Lt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Lt.min():l.readTime?oa(l.readTime):Lt.min()})(e);return this.listener.d_(s,r)}A_(e){const s={};s.database=E0(this.serializer),s.addTarget=(function(a,l){let d;const u=l.target;if(d=S0(u)?{documents:I7(a,u)}:{query:R7(a,u)._t},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=S3(a,l.resumeToken);const h=k0(a,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(Lt.min())>0){d.readTime=Kf(a,l.snapshotVersion.toTimestamp());const h=k0(a,l.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=L7(this.serializer,e);r&&(s.labels=r),this.a_(s)}R_(e){const s={};s.database=E0(this.serializer),s.removeTarget=e,this.a_(s)}}class xB extends L3{constructor(e,s,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return fs(!!e.streamToken),this.lastStreamToken=e.streamToken,fs(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=A7(e.writeResults,e.commitTime),r=oa(e.commitTime);return this.listener.g_(r,s)}p_(){const e={};e.database=E0(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>E7(this.serializer,r)))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB extends class{}{constructor(e,s,r,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new We(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,C0(s,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(ve.UNKNOWN,a.toString())}))}Lo(e,s,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Lo(e,C0(s,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new We(ve.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class vB{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ya(s),this.D_=!1):it("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,s,r,i,a){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{mc(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=Dt(u);h.L_.add(4),await nm(h),h.q_.set("Unknown"),h.L_.delete(4),await $g(h)})(this))}))})),this.q_=new vB(r,i)}}async function $g(t){if(mc(t))for(const e of t.B_)await e(!0)}async function nm(t){for(const e of t.B_)await e(!1)}function D3(t,e){const s=Dt(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),tb(s)?eb(s):Kd(s).r_()&&Z1(s,e))}function J1(t,e){const s=Dt(t),r=Kd(s);s.N_.delete(e),r.r_()&&M3(s,e),s.N_.size===0&&(r.r_()?r.o_():mc(s)&&s.q_.set("Unknown"))}function Z1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Kd(t).A_(e)}function M3(t,e){t.Q_.xe(e),Kd(t).R_(e)}function eb(t){t.Q_=new _7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Kd(t).start(),t.q_.v_()}function tb(t){return mc(t)&&!Kd(t).n_()&&t.N_.size>0}function mc(t){return Dt(t).L_.size===0}function F3(t){t.Q_=void 0}async function _B(t){t.q_.set("Online")}async function wB(t){t.N_.forEach(((e,s)=>{Z1(t,e)}))}async function jB(t,e){F3(t),tb(t)?(t.q_.M_(e),eb(t)):t.q_.set("Unknown")}async function SB(t,e,s){if(t.q_.set("Online"),e instanceof j3&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const d of a.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.N_.delete(d),i.Q_.removeTarget(d))})(t,e)}catch(r){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qf(t,r)}else if(e instanceof bf?t.Q_.Ke(e):e instanceof w3?t.Q_.He(e):t.Q_.We(e),!s.isEqual(Lt.min()))try{const r=await R3(t.localStore);s.compareTo(r)>=0&&await(function(a,l){const d=a.Q_.rt(l);return d.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.N_.get(h);m&&a.N_.set(h,m.withResumeToken(u.resumeToken,l))}})),d.targetMismatches.forEach(((u,h)=>{const m=a.N_.get(u);if(!m)return;a.N_.set(u,m.withResumeToken(Un.EMPTY_BYTE_STRING,m.snapshotVersion)),M3(a,u);const g=new Go(m.target,u,h,m.sequenceNumber);Z1(a,g)})),a.remoteSyncer.applyRemoteEvent(d)})(t,s)}catch(r){it("RemoteStore","Failed to raise snapshot:",r),await Qf(t,r)}}async function Qf(t,e,s){if(!em(e))throw e;t.L_.add(1),await nm(t),t.q_.set("Offline"),s||(s=()=>R3(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{it("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await $g(t)}))}function B3(t,e){return e().catch((s=>Qf(t,s,e)))}async function Og(t){const e=Dt(t),s=nl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;NB(e);)try{const i=await lB(e.localStore,r);if(i===null){e.O_.length===0&&s.o_();break}r=i.batchId,kB(e,i)}catch(i){await Qf(e,i)}$3(e)&&O3(e)}function NB(t){return mc(t)&&t.O_.length<10}function kB(t,e){t.O_.push(e);const s=nl(t);s.r_()&&s.V_&&s.m_(e.mutations)}function $3(t){return mc(t)&&!nl(t).n_()&&t.O_.length>0}function O3(t){nl(t).start()}async function CB(t){nl(t).p_()}async function TB(t){const e=nl(t);for(const s of t.O_)e.m_(s.mutations)}async function EB(t,e,s){const r=t.O_.shift(),i=W1.from(r,e,s);await B3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Og(t)}async function AB(t,e){e&&nl(t).V_&&await(async function(r,i){if((function(l){return y7(l)&&l!==ve.ABORTED})(i.code)){const a=r.O_.shift();nl(r).s_(),await B3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Og(r)}})(t,e),$3(t)&&O3(t)}async function Zj(t,e){const s=Dt(t);s.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const r=mc(s);s.L_.add(3),await nm(s),r&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await $g(s)}async function IB(t,e){const s=Dt(t);e?(s.L_.delete(2),await $g(s)):e||(s.L_.add(2),await nm(s),s.q_.set("Unknown"))}function Kd(t){return t.K_||(t.K_=(function(s,r,i){const a=Dt(s);return a.w_(),new gB(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:_B.bind(null,t),Ro:wB.bind(null,t),mo:jB.bind(null,t),d_:SB.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),tb(t)?eb(t):t.q_.set("Unknown")):(await t.K_.stop(),F3(t))}))),t.K_}function nl(t){return t.U_||(t.U_=(function(s,r,i){const a=Dt(s);return a.w_(),new xB(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:CB.bind(null,t),mo:AB.bind(null,t),f_:TB.bind(null,t),g_:EB.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Og(t)):(await t.U_.stop(),t.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,s,r,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,a){const l=Date.now()+r,d=new sb(e,s,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nb(t,e){if(Ya("AsyncQueue",`${e}: ${t}`),em(t))return new We(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.comparator=e?(s,r)=>e(s,r)||pt.comparator(s.key,r.key):(s,r)=>pt.comparator(s.key,r.key),this.keyedMap=Qu(),this.sortedSet=new Bs(this.comparator)}static emptySet(e){return new wd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof wd)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new wd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.W_=new Bs(pt.comparator)}track(e){const s=e.doc.key,r=this.W_.get(s);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(s,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(s):e.type===1&&r.type===2?this.W_=this.W_.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):At():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal(((s,r)=>{e.push(r)})),e}}class Pd{constructor(e,s,r,i,a,l,d,u,h){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,s,r,i,a){const l=[];return s.forEach((d=>{l.push({type:0,doc:d})})),new Pd(e,s,wd.emptySet(s),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==r[i].type||!s[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class PB{constructor(){this.queries=tS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,r){const i=Dt(s),a=i.queries;i.queries=tS(),a.forEach(((l,d)=>{for(const u of d.j_)u.onError(r)}))})(this,new We(ve.ABORTED,"Firestore shutting down"))}}function tS(){return new qd((t=>c3(t)),Pg)}async function V3(t,e){const s=Dt(t);let r=3;const i=e.query;let a=s.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new RB,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await s.onListen(i,!0);break;case 1:a.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(l){const d=nb(l,`Initialization of query '${id(e.query)}' failed`);return void e.onError(d)}s.queries.set(i,a),a.j_.push(e),e.Z_(s.onlineState),a.z_&&e.X_(a.z_)&&rb(s)}async function U3(t,e){const s=Dt(t),r=e.query;let i=3;const a=s.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function LB(t,e){const s=Dt(t);let r=!1;for(const i of e){const a=i.query,l=s.queries.get(a);if(l){for(const d of l.j_)d.X_(i)&&(r=!0);l.z_=i}}r&&rb(s)}function DB(t,e,s){const r=Dt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(s);r.queries.delete(e)}function rb(t){t.Y_.forEach((e=>{e.next()}))}var I0,sS;(sS=I0||(I0={})).ea="default",sS.Cache="cache";class z3{constructor(e,s,r){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const r=s!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=Pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==I0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.key=e}}class G3{constructor(e){this.key=e}}class MB{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xt(),this.mutatedKeys=Xt(),this.Aa=d3(e),this.Ra=new wd(this.Aa)}get Va(){return this.Ta}ma(e,s){const r=s?s.fa:new eS,i=s?s.Ra:this.Ra;let a=s?s.mutatedKeys:this.mutatedKeys,l=i,d=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),b=Lg(this.query,g)?g:null,_=!!v&&this.mutatedKeys.has(v.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let C=!1;v&&b?v.data.isEqual(b.data)?_!==N&&(r.track({type:3,doc:b}),C=!0):this.ga(v,b)||(r.track({type:2,doc:b}),C=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(d=!0)):!v&&b?(r.track({type:0,doc:b}),C=!0):v&&!b&&(r.track({type:1,doc:v}),C=!0,(u||h)&&(d=!0)),C&&(b?(l=l.add(b),a=N?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ra:l,fa:r,ns:d,mutatedKeys:a}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((m,g)=>(function(b,_){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return N(b)-N(_)})(m.type,g.type)||this.Aa(m.doc,g.doc))),this.pa(r),i=i!=null&&i;const d=s&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,l.length!==0||h?{snapshot:new Pd(this.query,e.Ra,a,l,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new eS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((s=>this.Ta=this.Ta.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ta=this.Ta.delete(s))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xt(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const s=[];return e.forEach((r=>{this.da.has(r)||s.push(new G3(r))})),this.da.forEach((r=>{e.has(r)||s.push(new H3(r))})),s}ba(e){this.Ta=e.Ts,this.da=Xt();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return Pd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FB{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class BB{constructor(e){this.key=e,this.va=!1}}class $B{constructor(e,s,r,i,a,l){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new qd((d=>c3(d)),Pg),this.Ma=new Map,this.xa=new Set,this.Oa=new Bs(pt.comparator),this.Na=new Map,this.La=new Q1,this.Ba={},this.ka=new Map,this.qa=Rd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function OB(t,e,s=!0){const r=Y3(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await W3(r,e,s,!0),i}async function VB(t,e){const s=Y3(t);await W3(s,e,!0,!1)}async function W3(t,e,s,r){const i=await cB(t.localStore,aa(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,s);let d;return r&&(d=await UB(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&s&&D3(t.remoteStore,i),d}async function UB(t,e,s,r,i){t.Ka=(g,v,b)=>(async function(N,C,R,D){let A=C.view.ma(R);A.ns&&(A=await Xj(N.localStore,C.query,!1).then((({documents:k})=>C.view.ma(k,A))));const y=D&&D.targetChanges.get(C.targetId),w=D&&D.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(A,N.isPrimaryClient,y,w);return rS(N,C.targetId,M.wa),M.snapshot})(t,g,v,b);const a=await Xj(t.localStore,e,!0),l=new MB(e,a.Ts),d=l.ma(a.documents),u=sm.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",i),h=l.applyChanges(d,t.isPrimaryClient,u);rS(t,s,h.wa);const m=new FB(e,s,l);return t.Fa.set(e,m),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),h.snapshot}async function zB(t,e,s){const r=Dt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((l=>!Pg(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await A0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),s&&J1(r.remoteStore,i.targetId),R0(r,i.targetId)})).catch(Zh)):(R0(r,i.targetId),await A0(r.localStore,i.targetId,!0))}async function HB(t,e){const s=Dt(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),J1(s.remoteStore,r.targetId))}async function GB(t,e,s){const r=JB(t);try{const i=await(function(l,d){const u=Dt(l),h=Hs.now(),m=d.reduce(((b,_)=>b.add(_.key)),Xt());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=Ja(),N=Xt();return u.cs.getEntries(b,m).next((C=>{_=C,_.forEach(((R,D)=>{D.isValidDocument()||(N=N.add(R))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((C=>{g=C;const R=[];for(const D of d){const A=m7(D,g.get(D.key).overlayedDocument);A!=null&&R.push(new ol(D.key,A,s3(A.value.mapValue),mi.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,R,d)})).next((C=>{v=C;const R=C.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(b,C.batchId,R)}))})).then((()=>({batchId:v.batchId,changes:h3(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,u){let h=l.Ba[l.currentUser.toKey()];h||(h=new Bs(ls)),h=h.insert(d,u),l.Ba[l.currentUser.toKey()]=h})(r,i.batchId,s),await rm(r,i.changes),await Og(r.remoteStore)}catch(i){const a=nb(i,"Failed to persist write");s.reject(a)}}async function q3(t,e){const s=Dt(t);try{const r=await aB(s.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=s.Na.get(a);l&&(fs(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?fs(l.va):i.removedDocuments.size>0&&(fs(l.va),l.va=!1))})),await rm(s,r,e)}catch(r){await Zh(r)}}function nS(t,e,s){const r=Dt(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const i=[];r.Fa.forEach(((a,l)=>{const d=l.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const u=Dt(l);u.onlineState=d;let h=!1;u.queries.forEach(((m,g)=>{for(const v of g.j_)v.Z_(d)&&(h=!0)})),h&&rb(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WB(t,e,s){const r=Dt(t);r.sharedClientState.updateQueryState(e,"rejected",s);const i=r.Na.get(e),a=i&&i.key;if(a){let l=new Bs(pt.comparator);l=l.insert(a,Zn.newNoDocument(a,Lt.min()));const d=Xt().add(a),u=new Fg(Lt.min(),new Map,new Bs(ls),l,d);await q3(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),ib(r)}else await A0(r.localStore,e,!1).then((()=>R0(r,e,s))).catch(Zh)}async function qB(t,e){const s=Dt(t),r=e.batch.batchId;try{const i=await iB(s.localStore,e);Q3(s,r,null),K3(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await rm(s,i)}catch(i){await Zh(i)}}async function KB(t,e,s){const r=Dt(t);try{const i=await(function(l,d){const u=Dt(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return u.mutationQueue.lookupMutationBatch(h,d).next((g=>(fs(g!==null),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,d))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>u.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);Q3(r,e,s),K3(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await rm(r,i)}catch(i){await Zh(i)}}function K3(t,e){(t.ka.get(e)||[]).forEach((s=>{s.resolve()})),t.ka.delete(e)}function Q3(t,e,s){const r=Dt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(s?a.reject(s):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function R0(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),s&&t.Ca.$a(r,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||X3(t,r)}))}function X3(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(J1(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),ib(t))}function rS(t,e,s){for(const r of s)r instanceof H3?(t.La.addReference(r.key,e),QB(t,r)):r instanceof G3?(it("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||X3(t,r.key)):At()}function QB(t,e){const s=e.key,r=s.path.canonicalString();t.Oa.get(s)||t.xa.has(r)||(it("SyncEngine","New document in limbo: "+s),t.xa.add(r),ib(t))}function ib(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new pt(vs.fromString(e)),r=t.qa.next();t.Na.set(r,new BB(s)),t.Oa=t.Oa.insert(s,r),D3(t.remoteStore,new Go(aa(U1(s.path)),r,"TargetPurposeLimboResolution",F1.oe))}}async function rm(t,e,s){const r=Dt(t),i=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,u)=>{l.push(r.Ka(u,e,s).then((h=>{var m;if((h||s)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=s==null?void 0:s.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=Y1.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(l),r.Ca.d_(i),await(async function(u,h){const m=Dt(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Ae.forEach(h,(v=>Ae.forEach(v.$i,(b=>m.persistence.referenceDelegate.addReference(g,v.targetId,b))).next((()=>Ae.forEach(v.Ui,(b=>m.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))))))}catch(g){if(!em(g))throw g;it("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=m.os.get(v),_=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(_);m.os=m.os.insert(v,N)}}})(r.localStore,a))}async function XB(t,e){const s=Dt(t);if(!s.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const r=await I3(s.localStore,e);s.currentUser=e,(function(a,l){a.ka.forEach((d=>{d.forEach((u=>{u.reject(new We(ve.CANCELLED,l))}))})),a.ka.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rm(s,r.hs)}}function YB(t,e){const s=Dt(t),r=s.Na.get(e);if(r&&r.va)return Xt().add(r.key);{let i=Xt();const a=s.Ma.get(e);if(!a)return i;for(const l of a){const d=s.Fa.get(l);i=i.unionWith(d.view.Va)}return i}}function Y3(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WB.bind(null,e),e.Ca.d_=LB.bind(null,e.eventManager),e.Ca.$a=DB.bind(null,e.eventManager),e}function JB(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KB.bind(null,e),e}class Xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return rB(this.persistence,new sB,e.initialUser,this.serializer)}Ga(e){return new Z7(X1.Zr,this.serializer)}Wa(e){return new uB}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xf.provider={build:()=>new Xf};class P0{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XB.bind(null,this.syncEngine),await IB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PB})()}createDatastore(e){const s=Bg(e.databaseInfo.databaseId),r=(function(a){return new fB(a)})(e.databaseInfo);return(function(a,l,d,u){return new yB(a,l,d,u)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,i,a,l,d){return new bB(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(s=>nS(this.syncEngine,s,0)),(function(){return Jj.D()?new Jj:new hB})())}createSyncEngine(e,s){return(function(i,a,l,d,u,h,m){const g=new $B(i,a,l,d,u,h);return m&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await(async function(i){const a=Dt(i);it("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await nm(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}P0.provider={build:()=>new P0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ya("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,s,r,i,a){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=i,this.user=Yn.UNAUTHENTICATED,this.clientId=ZT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{it("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(it("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=nb(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Jy(t,e){t.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await I3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function iS(t,e){t.asyncQueue.verifyOperationInProgress();const s=await e$(t);it("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener((r=>Zj(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Zj(e.remoteStore,i))),t._onlineComponents=e}async function e$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jy(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(s))throw s;Cd("Error using user provided cache. Falling back to memory cache: "+s),await Jy(t,new Xf)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await Jy(t,new Xf);return t._offlineComponents}async function Z3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await iS(t,t._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await iS(t,new P0))),t._onlineComponents}function t$(t){return Z3(t).then((e=>e.syncEngine))}async function e5(t){const e=await Z3(t),s=e.eventManager;return s.onListen=OB.bind(null,e.syncEngine),s.onUnlisten=zB.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=VB.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=HB.bind(null,e.syncEngine),s}function s$(t,e,s={}){const r=new Ga;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const m=new J3({next:v=>{m.Za(),l.enqueueAndForget((()=>U3(a,g)));const b=v.docs.has(d);!b&&v.fromCache?h.reject(new We(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&u&&u.source==="server"?h.reject(new We(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new z3(U1(d.path),m,{includeMetadataChanges:!0,_a:!0});return V3(a,g)})(await e5(t),t.asyncQueue,e,s,r))),r.promise}function n$(t,e,s={}){const r=new Ga;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const m=new J3({next:v=>{m.Za(),l.enqueueAndForget((()=>U3(a,g))),v.fromCache&&u.source==="server"?h.reject(new We(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new z3(d,m,{includeMetadataChanges:!0,_a:!0});return V3(a,g)})(await e5(t),t.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e,s){if(!s)throw new We(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function r$(t,e,s,r){if(e===!0&&r===!0)throw new We(ve.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function oS(t){if(!pt.isDocumentKey(t))throw new We(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lS(t){if(pt.isDocumentKey(t))throw new We(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":At()}function Za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Vg(t);throw new We(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function i$(t,e){if(e<=0)throw new We(ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new We(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t5((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new We(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new We(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new We(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _F;switch(r.type){case"firstParty":return new NF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=aS.get(s);r&&(it("ComponentProvider","Removing Datastore"),aS.delete(s),r.terminate())})(this),Promise.resolve()}}function a$(t,e,s,r={}){var i;const a=(t=Za(t,im))._getSettings(),l=`${e}:${s}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&Cd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,u;if(typeof r.mockUserToken=="string")d=r.mockUserToken,u=Yn.MOCK_USER;else{d=KD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new We(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yn(h)}t._authCredentials=new wF(new JT(d,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class Ar{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class Zo extends Oi{constructor(e,s,r){super(e,s,U1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new pt(e))}withConverter(e){return new Zo(this.firestore,e,this._path)}}function pc(t,e,...s){if(t=pn(t),ab("collection","path",e),t instanceof im){const r=vs.fromString(e,...s);return lS(r),new Zo(t,null,r)}{if(!(t instanceof Ar||t instanceof Zo))throw new We(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vs.fromString(e,...s));return lS(r),new Zo(t.firestore,null,r)}}function am(t,e){if(t=Za(t,im),ab("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new We(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oi(t,null,(function(r){return new io(vs.emptyPath(),r)})(e))}function qt(t,e,...s){if(t=pn(t),arguments.length===1&&(e=ZT.newId()),ab("doc","path",e),t instanceof im){const r=vs.fromString(e,...s);return oS(r),new Ar(t,null,new pt(r))}{if(!(t instanceof Ar||t instanceof Zo))throw new We(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vs.fromString(e,...s));return oS(r),new Ar(t.firestore,t instanceof Zo?t.converter:null,new pt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new P3(this,"async_queue_retry"),this.Vu=()=>{const r=Yy();r&&it("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const s=Yy();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=Yy();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const s=new Ga;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!em(e))throw e;it("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const s=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d})(r);throw Ya("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=s,s}enqueueAfterDelay(e,s,r){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const i=sb.createAndSchedule(this,e,s,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&At()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}class om extends im{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new dS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dS(e),this._firestoreClient=void 0,await e}}}function o$(t,e){const s=typeof t=="object"?t:C1(),r=typeof t=="string"?t:"(default)",i=k1(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=WD("firestore");a&&a$(i,...a)}return i}function Ug(t){if(t._terminated)throw new We(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||l$(t),t._firestoreClient}function l$(t){var e,s,r;const i=t._freezeSettings(),a=(function(d,u,h,m){return new BF(d,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,t5(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ZB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ld(Un.fromBase64String(e))}catch(s){throw new We(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Ld(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new We(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new We(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new We(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ls(this._lat,e._lat)||ls(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=/^__.*__$/;class d${constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new ol(e,this.data,this.fieldMask,s,this.fieldTransforms):new tm(e,this.data,s,this.fieldTransforms)}}class s5{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new ol(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function n5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class cb{constructor(e,s,r,i,a,l){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(n5(this.Cu)&&c$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class u${constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Bg(e)}Qu(e,s,r,i=!1){return new cb({Cu:e,methodName:s,qu:r,path:Bn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gg(t){const e=t._freezeSettings(),s=Bg(t._databaseId);return new u$(t._databaseId,!!e.ignoreUndefinedProperties,s)}function r5(t,e,s,r,i,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,s,i);ub("Data must be an object, but it was:",l,r);const d=a5(r,l);let u,h;if(a.merge)u=new Kr(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const v=L0(e,g,s);if(!l.contains(v))throw new We(ve.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);l5(m,v)||m.push(v)}u=new Kr(m),h=l.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=l.fieldTransforms;return new d$(new Er(d),u,h)}class Wg extends Hg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wg}}class db extends Hg{_toFieldTransform(e){return new c7(e.path,new Lh)}isEqual(e){return e instanceof db}}function h$(t,e,s,r){const i=t.Qu(1,e,s);ub("Data must be an object, but it was:",i,r);const a=[],l=Er.empty();hc(r,((u,h)=>{const m=hb(e,u,s);h=pn(h);const g=i.Nu(m);if(h instanceof Wg)a.push(m);else{const v=lm(h,g);v!=null&&(a.push(m),l.set(m,v))}}));const d=new Kr(a);return new s5(l,d,i.fieldTransforms)}function m$(t,e,s,r,i,a){const l=t.Qu(1,e,s),d=[L0(e,r,s)],u=[i];if(a.length%2!=0)throw new We(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)d.push(L0(e,a[v])),u.push(a[v+1]);const h=[],m=Er.empty();for(let v=d.length-1;v>=0;--v)if(!l5(h,d[v])){const b=d[v];let _=u[v];_=pn(_);const N=l.Nu(b);if(_ instanceof Wg)h.push(b);else{const C=lm(_,N);C!=null&&(h.push(b),m.set(b,C))}}const g=new Kr(h);return new s5(m,g,l.fieldTransforms)}function i5(t,e,s,r=!1){return lm(s,t.Qu(r?4:3,e))}function lm(t,e){if(o5(t=pn(t)))return ub("Unsupported field value:",e,t),a5(t,e);if(t instanceof Hg)return(function(r,i){if(!n5(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let u=lm(d,i.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Hs.fromDate(r);return{timestampValue:Kf(i.serializer,a)}}if(r instanceof Hs){const a=new Hs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kf(i.serializer,a)}}if(r instanceof ob)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ld)return{bytesValue:S3(i.serializer,r._byteString)};if(r instanceof Ar){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:K1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lb)return(function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((u=>{if(typeof u!="number")throw d.Bu("VectorValues must only contain numeric values.");return H1(d.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Vg(r)}`)})(t,e)}function a5(t,e){const s={};return e3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(t,((r,i)=>{const a=lm(i,e.Mu(r));a!=null&&(s[r]=a)})),{mapValue:{fields:s}}}function o5(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Hs||t instanceof ob||t instanceof Ld||t instanceof Ar||t instanceof Hg||t instanceof lb)}function ub(t,e,s){if(!o5(s)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(s)){const r=Vg(s);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function L0(t,e,s){if((e=pn(e))instanceof zg)return e._internalPath;if(typeof e=="string")return hb(t,e);throw Yf("Field path arguments must be of type string or ",t,!1,void 0,s)}const p$=new RegExp("[~\\*/\\[\\]]");function hb(t,e,s){if(e.search(p$)>=0)throw Yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new zg(...e.split("."))._internalPath}catch(r){throw Yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Yf(t,e,s,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${r}`),l&&(u+=` in document ${i}`),u+=")"),new We(ve.INVALID_ARGUMENT,d+t+u)}function l5(t,e){return t.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,s,r,i,a){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(qg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class f$ extends mb{data(){return super.data()}}function qg(t,e){return typeof e=="string"?hb(t,e):e instanceof zg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pb{}class cm extends pb{}function an(t,e,...s){let r=[];e instanceof pb&&r.push(e),r=r.concat(s),(function(a){const l=a.filter((u=>u instanceof fb)).length,d=a.filter((u=>u instanceof Kg)).length;if(l>1||l>0&&d>0)throw new We(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Kg extends cm{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Kg(e,s,r)}_apply(e){const s=this._parse(e);return d5(e._query,s),new Oi(e.firestore,e.converter,N0(e._query,s))}_parse(e){const s=Gg(e.firestore);return(function(a,l,d,u,h,m,g){let v;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new We(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){hS(g,m);const b=[];for(const _ of g)b.push(uS(u,a,_));v={arrayValue:{values:b}}}else v=uS(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||hS(g,m),v=i5(d,l,g,m==="in"||m==="not-in");return ln.create(h,m,v)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function el(t,e,s){const r=e,i=qg("where",t);return Kg._create(i,r,s)}class fb extends pb{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new fb(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Bi.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(i,a){let l=i;const d=a.getFlattenedFilters();for(const u of d)d5(l,u),l=N0(l,u)})(e._query,s),new Oi(e.firestore,e.converter,N0(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gb extends cm{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new gb(e,s)}_apply(e){const s=(function(i,a,l){if(i.startAt!==null)throw new We(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ph(a,l)})(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new io(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,s))}}function Wr(t,e="asc"){const s=e,r=qg("orderBy",t);return gb._create(r,s)}class xb extends cm{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new xb(e,s,r)}_apply(e){return new Oi(e.firestore,e.converter,Wf(e._query,this._limit,this._limitType))}}function hn(t){return i$("limit",t),xb._create("limit",t,"F")}class Qg extends cm{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new Qg(e,s,r)}_apply(e){const s=c5(e,this.type,this._docOrFields,this._inclusive);return new Oi(e.firestore,e.converter,(function(i,a){return new io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,s))}}function Ri(...t){return Qg._create("startAt",t,!0)}function x$(...t){return Qg._create("startAfter",t,!1)}class yb extends cm{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new yb(e,s,r)}_apply(e){const s=c5(e,this.type,this._docOrFields,this._inclusive);return new Oi(e.firestore,e.converter,(function(i,a){return new io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,s))}}function Pi(...t){return yb._create("endAt",t,!0)}function c5(t,e,s,r){if(s[0]=pn(s[0]),s[0]instanceof mb)return(function(a,l,d,u,h){if(!u)throw new We(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const m=[];for(const g of _d(a))if(g.field.isKeyField())m.push(Gf(l,u.key));else{const v=u.data.field(g.field);if(Rg(v))throw new We(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const b=g.field.canonicalString();throw new We(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(v)}return new Id(m,h)})(t._query,t.firestore._databaseId,e,s[0]._document,r);{const i=Gg(t.firestore);return(function(l,d,u,h,m,g){const v=l.explicitOrderBy;if(m.length>v.length)throw new We(ve.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let _=0;_<m.length;_++){const N=m[_];if(v[_].field.isKeyField()){if(typeof N!="string")throw new We(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof N}`);if(!z1(l)&&N.indexOf("/")!==-1)throw new We(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${N}' contains a slash.`);const C=l.path.child(vs.fromString(N));if(!pt.isDocumentKey(C))throw new We(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const R=new pt(C);b.push(Gf(d,R))}else{const C=i5(u,h,N);b.push(C)}}return new Id(b,g)})(t._query,t.firestore._databaseId,i,e,s,r)}}function uS(t,e,s){if(typeof(s=pn(s))=="string"){if(s==="")throw new We(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z1(e)&&s.indexOf("/")!==-1)throw new We(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(vs.fromString(s));if(!pt.isDocumentKey(r))throw new We(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gf(t,new pt(r))}if(s instanceof Ar)return Gf(t,s._key);throw new We(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vg(s)}.`)}function hS(t,e){if(!Array.isArray(t)||t.length===0)throw new We(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d5(t,e){const s=(function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new We(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class y${convertValue(e,s="none"){switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ys(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw At()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return hc(e,((i,a)=>{r[i]=this.convertValue(a,s)})),r}convertVectorValue(e){var s,r,i;const a=(i=(r=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((l=>Ys(l.doubleValue)));return new lb(a)}convertGeoPoint(e){return new ob(Ys(e.latitude),Ys(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=B1(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(Ah(e));default:return null}}convertTimestamp(e){const s=sl(e);return new Hs(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=vs.fromString(e);fs(A3(r));const i=new Ih(r.get(1),r.get(3)),a=new pt(r.popFirst(5));return i.isEqual(s)||Ya(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class h5 extends mb{constructor(e,s,r,i,a,l){super(e,s,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(qg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class _f extends h5{data(e={}){return super.data(e)}}class v${constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Yu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new _f(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new We(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const u=new _f(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Yu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const u=new _f(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Yu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),m=l.indexOf(d.doc.key)),{type:b$(d.type),doc:u,oldIndex:h,newIndex:m}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function b$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){t=Za(t,Ar);const e=Za(t.firestore,om);return s$(Ug(e),t._key).then((s=>_$(e,t,s)))}class m5 extends y${constructor(e){super(),this.firestore=e}convertBytes(e){return new Ld(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,s)}}function mn(t){t=Za(t,Oi);const e=Za(t.firestore,om),s=Ug(e),r=new m5(e);return g$(t._query),n$(s,t._query).then((i=>new v$(e,r,t,i)))}function eo(t,e,s){t=Za(t,Ar);const r=Za(t.firestore,om),i=u5(t.converter,e,s);return p5(r,[r5(Gg(r),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,mi.none())])}function p5(t,e){return(function(r,i){const a=new Ga;return r.asyncQueue.enqueueAndForget((async()=>GB(await t$(r),i,a))),a.promise})(Ug(t),e)}function _$(t,e,s){const r=s.docs.get(e._key),i=new m5(t);return new h5(t,i,e._key,r,new Yu(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Gg(e)}set(e,s,r){this._verifyNotCommitted();const i=Zy(e,this._firestore),a=u5(i.converter,s,r),l=r5(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,mi.none())),this}update(e,s,r,...i){this._verifyNotCommitted();const a=Zy(e,this._firestore);let l;return l=typeof(s=pn(s))=="string"||s instanceof zg?m$(this._dataReader,"WriteBatch.update",a._key,s,r,i):h$(this._dataReader,"WriteBatch.update",a._key,s),this._mutations.push(l.toMutation(a._key,mi.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=Zy(e,this._firestore);return this._mutations=this._mutations.concat(new G1(s._key,mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zy(t,e){if((t=pn(t)).firestore!==e)throw new We(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ai(){return new db("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(t){return Ug(t=Za(t,om)),new w$(t,(e=>p5(t,e)))}(function(e,s=!0){(function(i){Wd=i})(Hd),kd(new sc("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new om(new jF(r.getProvider("auth-internal")),new CF(r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new We(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ih(h.options.projectId,m)})(l,i),l);return a=Object.assign({useFetchStreams:s},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Yo(Ej,"4.7.3",e),Yo(Ej,"4.7.3","esm2017")})();const f5={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};f5.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const g5=cM().length?C1():dT(f5),xt=o$(g5),Fp=vF(g5),x5=E.createContext(void 0),mS=`${pa}/auth/session`,pS=`${pa}/auth/logout`,S$=({children:t})=>{const[e,s]=E.useState(null),[r,i]=E.useState("idle"),a=E.useRef({tried:!1}),l=E.useCallback(N=>{N!=null&&N.authenticated&&N.user?(s(N.user),i("authenticated")):(s(null),i("unauthenticated"))},[]),d=E.useCallback(async N=>{if(N!=null&&N.silent||i("loading"),!mS){console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),s(null),i("unauthenticated");return}try{const C=await fetch(mS,{credentials:"include"});if(!C.ok)throw new Error(`Failed to fetch session (${C.status})`);const R=await C.json();l(R)}catch(C){console.error("[Auth] Failed to refresh session.",C),s(null),i("unauthenticated")}},[l]);E.useEffect(()=>{d()},[d]),E.useEffect(()=>{console.log("[AuthDebug] session user:",e);const N=Fp.currentUser;console.log("[AuthDebug] firebase currentUser uid:",N==null?void 0:N.uid),N==null||N.getIdTokenResult().then(C=>{console.log("[AuthDebug] firebase claims:",C.claims)}).catch(C=>{console.warn("[AuthDebug] failed to fetch token claims",C)})},[e]),E.useEffect(()=>{const N=o9(Fp,C=>{console.log("[AuthDebug] firebase currentUser uid:",C==null?void 0:C.uid)});return()=>N()},[]),E.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const N=await BD();await r9(Fp,N),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(N){console.error("[AuthDebug] failed to sign in to Firebase",N)}})())},[e]);const u=E.useCallback(N=>{window.location.href=`${pa}/auth/${N}/login`},[]),h=E.useCallback(()=>u("discord"),[u]),m=E.useCallback(()=>u("google"),[u]),g=E.useCallback(async()=>{if(await l9(Fp).catch(()=>{}),!pS){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),s(null),i("unauthenticated");return}try{const N=await fetch(pS,{method:"POST",credentials:"include"});if(!N.ok)throw new Error(`Logout failed (${N.status})`)}catch(N){console.error("[Auth] Failed to logout. Clearing local session anyway.",N)}finally{s(null),i("unauthenticated")}},[]),v=E.useCallback(async N=>{await d(N)},[d]),b=r==="idle"||r==="loading",_=E.useMemo(()=>({user:e,status:r,isLoading:b,loginWithDiscord:h,loginWithGoogle:m,logout:g,refreshSession:v}),[e,r,b,h,m,g,v]);return n.jsx(x5.Provider,{value:_,children:t})},ao=()=>{const t=E.useContext(x5);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},N$="https://i.pravatar.cc/72",k$=({fallbackName:t})=>{var D,A;const{user:e,status:s,logout:r,isLoading:i}=ao(),a=fi(),[l,d]=E.useState(!1),u=E.useRef(null),h=s==="authenticated",m=h?(A=(D=e==null?void 0:e.displayName)!=null?D:t)!=null?A:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:N$;E.useEffect(()=>{const y=w=>{u.current&&!u.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]),E.useEffect(()=>{i&&d(!1)},[i]);const v=E.useCallback(()=>d(!1),[]),b=()=>{d(y=>!y)},_=()=>{a("/login"),v()},N=()=>{a("/settings/account"),v()},C=E.useCallback(async()=>{try{await r()}finally{v(),a("/")}},[v,r,a]),R=()=>{var y;if(i)return n.jsx("p",{className:Ot.accountStatusText,children:"Checking session..."});if(s==="unauthenticated")return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Ot.accountHeader,children:[n.jsx("p",{className:Ot.accountName,children:"Not signed in"}),n.jsx("p",{className:Ot.accountSub,children:"Your scans stay synced when you log in."})]}),n.jsx("button",{type:"button",className:Ot.accountPrimary,onClick:_,children:"Sign in"}),n.jsx("p",{className:Ot.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(s==="authenticated"){const w=!!((y=e==null?void 0:e.roles)!=null&&y.includes("admin"));return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Ot.accountHeader,children:[n.jsx("img",{className:Ot.accountMiniAvatar,src:g,alt:m}),n.jsxs("div",{children:[n.jsx("p",{className:Ot.accountName,children:m}),n.jsxs("p",{className:Ot.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),n.jsx("button",{type:"button",className:Ot.accountItem,onClick:N,children:"Account & Profile"}),w?n.jsx("a",{className:Ot.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,n.jsx("hr",{className:Ot.accountDivider}),n.jsx("button",{type:"button",className:`${Ot.accountItem} ${Ot.accountLogout}`,onClick:C,children:"Logout"})]})}return null};return n.jsxs("div",{className:Ot.accountRoot,ref:u,children:[i?n.jsxs("div",{className:Ot.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[n.jsx("span",{className:Ot.avatarSpinner,"aria-hidden":"true"}),n.jsx("span",{className:Ot.srOnly,children:"Checking login status"})]}):n.jsx("button",{type:"button",className:Ot.avatarBtn,"aria-haspopup":"menu","aria-expanded":l,"aria-label":m,onClick:b,children:n.jsx("img",{className:Ot.avatar,src:g,alt:m})}),!i&&l&&n.jsx("div",{className:Ot.accountDropdown,role:"menu",children:R()})]})},C$="sfh:debug:firestoreReadsCallsite",D0=new Map;let T$=1;const Bp=(...t)=>{console.log(...t)},vb=()=>!1,y5=()=>!vb()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(C$)==="1",bb=(t,e)=>t?t.split("/").filter(Boolean)[0]||e||"unknown":e!=null?e:"unknown",E$=()=>{if(!y5())return;const t=new Error;if(!t.stack)return;const s=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracegetdoc")&&!r.toLowerCase().includes("tracegetdocs"));return s[1]||s[0]},Fh=t=>vb()?{id:T$++,name:t,startedAt:performance.now(),reads:[]}:null,v5=(t,e)=>{var r;if(!t)return;const s=bb(e.collection||e.path);t.reads.push({collection:s,path:e.path,op:e.op,docCount:e.docCount,startedAt:performance.now(),callsite:E$()}),D0.set(s,((r=D0.get(s))!=null?r:0)+e.docCount)},Ba=t=>{var l;if(!t)return;t.endedAt=performance.now();const e=Math.round(t.endedAt-t.startedAt),s=t.reads.reduce((d,u)=>{var h;return d[u.collection]=((h=d[u.collection])!=null?h:0)+u.docCount,d},{}),r=t.reads.reduce((d,u)=>d+u.docCount,0),i=t.reads.map(d=>({op:d.op,path:d.path,collection:d.collection,docs:d.docCount,callsite:d.callsite})),a=`[FirestoreTrace] ${t.name} - ${r} reads in ${e}ms`;if(console.groupCollapsed(a),Bp("Breakdown by collection",s),Bp("Entries",i),y5()){const d=(l=t.reads.find(u=>u.callsite))==null?void 0:l.callsite;d&&Bp("Top callsite",d)}Bp("Totals (page lifetime)",Object.fromEntries(D0.entries())),console.groupEnd()},b5=async(t,e,s)=>{const r=await s(),i=r!=null&&r.exists?r.exists()?1:0:1;return v5(t,{collection:bb(e.path),path:e.path,op:"getDoc",docCount:i}),r},Wl=async(t,e,s,r)=>{var d,u,h;const i=await s(),a=(d=i==null?void 0:i.size)!=null?d:Array.isArray(i==null?void 0:i.docs)?i.docs.length:0,l=(h=(u=e.path)!=null?u:r==null?void 0:r.collectionHint)!=null?h:"unknown";return v5(t,{collection:bb(l,r==null?void 0:r.collectionHint),path:l,op:"getDocs",docCount:typeof a=="number"?a:0}),i},A$=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub",area:"main",titleKey:"nav.guideHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],fS=["guest","user","moderator","developer","admin"];function _5(t){const e=t.trim();if(!e)return"/";const s=e.startsWith("/")?e:`/${e}`;return s==="/"?s:s.replace(/\/+$/,"").toLowerCase()}function w5(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function j5(t){if(!Array.isArray(t))return;const e=t.map(s=>w5(s)).filter(Boolean);return e.length?e:void 0}function S5(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function N5(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function _b(t){var e,s,r;return{...t,id:t.id.trim(),route:_5(t.route),area:t.area.trim(),allowedRoles:(e=j5(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(s=S5(t.allowedGroups))!=null?s:t.allowedGroups,allowedUserIds:(r=N5(t.allowedUserIds))!=null?r:t.allowedUserIds}}function I$(t,e){if(!e||typeof e!="object")return null;const s=e,r=typeof s.route=="string"?s.route:"",i=typeof s.area=="string"?s.area:"",a=typeof s.id=="string"&&s.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const l={id:a,route:r,area:i,titleKey:typeof s.titleKey=="string"?s.titleKey:void 0,status:typeof s.status=="string"?s.status:void 0,minRole:w5(s.minRole),allowedRoles:j5(s.allowedRoles),allowedGroups:S5(s.allowedGroups),allowedUserIds:N5(s.allowedUserIds),showInTopbar:typeof s.showInTopbar=="boolean"?s.showInTopbar:void 0,showInSidebar:typeof s.showInSidebar=="boolean"?s.showInSidebar:void 0,navOrder:typeof s.navOrder=="number"?s.navOrder:void 0,isExperimental:typeof s.isExperimental=="boolean"?s.isExperimental:void 0,description:typeof s.description=="string"?s.description:void 0};return _b(l)}function R$(t){const e={},s={};return t.forEach(r=>{const i=_b(r);e[i.id]=i,s[i.route]=i}),{byId:e,byRoute:s}}const Wa=R$(A$),P$={...Wa,loading:!1,error:null},L$=300*1e3;let ld=null,Ju=null;const D$=async t=>{const e=Date.now();return Ju&&e-Ju.fetchedAt<L$?Ju:ld||(ld=(async()=>{const s=pc(xt,"feature_access"),r=await Wl(t,s,()=>mn(s),{collectionHint:"feature_access"}),i=[];r.forEach(d=>{const u=I$(d.id,d.data());u&&i.push(u)});const l={rules:F$(i),fetchedAt:Date.now()};return Ju=l,l})().finally(()=>{ld=null}),ld)};function M$(t,e){const s={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const l=i;s[l]=a}}),s}function F$(t){const e={...Wa.byId},s={...Wa.byRoute};return t.forEach(r=>{const i=_b(r),a=e[i.id],l=M$(a,i);e[l.id]=l,s[l.route]=l}),{byId:e,byRoute:s}}const k5=X.createContext(P$),B$=({children:t})=>{const[e,s]=X.useState({...Wa,loading:!0,error:null});X.useEffect(()=>{let i=!0;return(async()=>{const d=vb()&&!Ju&&!ld?Fh("FeatureAccess:load"):null;try{const{rules:u}=await D$(d);i&&s({...u,loading:!1,error:null})}catch(u){const h=u,m=h==null?void 0:h.code,g=m==="permission-denied"||m==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore feature_access ${g?"not readable":"load failed"}. Falling back to defaults.`,u),i&&s(b=>({...b,loading:!1,error:u instanceof Error?u.message:"Failed to load feature access rules"}))}finally{Ba(d)}})(),()=>{i=!1}},[]);const r=X.useMemo(()=>e,[e]);return n.jsx(k5.Provider,{value:r,children:t})};function $$(){return X.useContext(k5)}function O$(t,e){var i,a,l;if(!t)return;const s=e!=null?e:Wa,r=_5(t);return(l=(a=(i=s.byId[t])!=null?i:s.byRoute[r])!=null?a:Wa.byId[t])!=null?l:Wa.byRoute[r]}function V$(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function U$(t,e,s,r,i){if(s)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const l=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&l!=="developer"&&l!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!l&&t.allowedRoles.includes(l);if(t.minRole){const d=fS.indexOf(l),u=fS.indexOf(t.minRole);return d>=u&&d!==-1}return!0}function Xg(){var N;let t=null;try{t=ao().user}catch(C){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:s,loading:r,error:i}=$$(),a=X.useMemo(()=>({byId:e!=null?e:Wa.byId,byRoute:s!=null?s:Wa.byRoute}),[e,s]),l=X.useMemo(()=>V$(t==null?void 0:t.roles),[t==null?void 0:t.roles]),d=X.useMemo(()=>{var C;return!!((C=t==null?void 0:t.roles)!=null&&C.includes("admin"))},[t==null?void 0:t.roles]),u=X.useMemo(()=>{var C;return(C=t==null?void 0:t.accessGroups)!=null?C:[]},[t==null?void 0:t.accessGroups]),h=(N=t==null?void 0:t.id)!=null?N:null,m=X.useCallback(C=>O$(C,a),[a]),g=X.useCallback(C=>C?U$(C,l,d,h,u):!0,[d,u,h,l]),v=X.useCallback(C=>{if(!C)return!0;const R=m(C);return g(R)},[g,m]),b=X.useCallback(C=>{if(!C)return!0;const R=m(C);return R?R.status==="hidden"||R.showInSidebar===!1?!1:g(R):!0},[g,m]),_=X.useCallback(C=>{if(!C)return!0;const R=m(C);return R?R.status==="hidden"||R.showInTopbar===!1?!1:g(R):!0},[g,m]);return{loading:r,error:i,rulesById:e,rulesByRoute:s,storeRules:a,resolveRule:m,canAccessRule:g,canAccessFeature:v,isVisibleInSidebar:b,isVisibleInTopbar:_}}const C5=E.createContext(null);function z$({children:t}){const{canAccessFeature:e}=Xg(),[s,r]=E.useState(!1),[i,a]=E.useState("csv"),l=e("main.uploadCenter"),d=E.useCallback(m=>{l&&(m!=null&&m.tab?a(m.tab):a("csv"),r(!0))},[l]),u=E.useCallback(()=>r(!1),[]),h=E.useMemo(()=>({isOpen:s,open:d,close:u,activeTab:i,setTab:a,canUse:l}),[s,d,u,i,l]);return n.jsx(C5.Provider,{value:h,children:t})}function wb(){const t=E.useContext(C5);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const Ti={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},Ei=t=>`https://drive.google.com/uc?export=view&id=${t}`,T5=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),Sn=[{key:"warrior",label:"Warrior",iconUrl:Ei(Ti.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:Ei(Ti.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:Ei(Ti.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:Ei(Ti.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:Ei(Ti["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:Ei(Ti.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:Ei(Ti["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:Ei(Ti.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:Ei(Ti.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:Ei(Ti.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:Ei(Ti.paladin),fallback:""}],gS=Object.fromEntries(Sn.map(t=>[t.key,t])),M0=new Map;function $s(t,e){M0.set(T5(t),e)}for(const t of Sn)$s(t.key,t.key),$s(t.label,t.key);$s("war","warrior");$s("krieger","warrior");$s("magier","mage");$s("jaeger","scout");$s("jger","scout");$s("assa","assassin");$s("meuchelmoerder","assassin");$s("meuchelmrder","assassin");$s("demonhunter","demon-hunter");$s("dh","demon-hunter");$s("daemonenjaeger","demon-hunter");$s("dmonenjger","demon-hunter");$s("zerker","berserker");$s("battlemage","battle-mage");$s("kampfmagier","battle-mage");$s("bm","battle-mage");$s("druide","druid");$s("barde","bard");$s("necro","necromancer");$s("nekromant","necromancer");$s("pala","paladin");function E5(t){const e=T5(t);if(!e)return{};const s=M0.get(e);if(s){const r=gS[s];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of M0.entries())if(r.startsWith(e)||e.startsWith(r)){const a=gS[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}function Yg(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const s=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(s!=null&&s[1])return s[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function wf(t){if(t==null)return;const e=Yg(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function A5(t,e=64){if(t==null)return;const s=Yg(t);if(!s)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${s}&sz=w${r}`}function I5(t,e){const s="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${s}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function R5(t,e,s,r){const i=wf(t);return i?I5(i,{w:e,h:s,fit:r}):void 0}function Rr(t,e=64){const s=A5(t,e);return s?I5(s,{w:e,h:e,fit:"contain"}):void 0}function ev(t){if(t==null)return;const e=Yg(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function H$(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const lc=Object.assign(t=>wf(t),{id:Yg,direct:wf,thumb:A5,proxy:R5,thumbProxy:Rr,raw:ev,gif:ev,gifProxy:t=>{const e=ev(t);return e&&/^https?:\/\//i.test(e)?H$(e):wf(t)}}),Jg="sfh:search:cache:v1:universal:",P5=`${Jg}lru`,G$=720*60,dh=150,Qd=()=>typeof window!="undefined"&&!!window.localStorage,W$=t=>t.trim().replace(/\s+/g," ").toLowerCase(),L5=(...t)=>{try{Qd()&&window.localStorage.getItem("sfh:debug:firestoreReads")==="1"&&console.debug(...t)}catch(e){}},D5=()=>{if(!Qd())return[];try{const t=window.localStorage.getItem(P5);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.filter(s=>typeof s=="string"):[]}catch(t){return[]}},M5=t=>{if(Qd())try{window.localStorage.setItem(P5,JSON.stringify(t.slice(0,dh)))}catch(e){}},F5=t=>{const e=D5().filter(s=>s!==t);e.unshift(t),M5(e.slice(0,dh))},q$=()=>{const t=D5();if(t.length<=dh)return;const e=t.slice(0,dh);if(M5(e),!!Qd())try{t.slice(dh).forEach(r=>window.localStorage.removeItem(Jg+r))}catch(s){}},K$=t=>{if(!Qd())return null;try{const e=window.localStorage.getItem(Jg+t);if(!e)return null;const s=JSON.parse(e);return!s||typeof s.ts!="number"||typeof s.ttlSec!="number"||Date.now()-s.ts>s.ttlSec*1e3?null:(L5("[SearchCache] hit",t),F5(t),s)}catch(e){return null}},Q$=(t,e,s=G$)=>{if(!Qd())return;const r={...e,ts:Date.now(),ttlSec:s};try{window.localStorage.setItem(Jg+t,JSON.stringify(r)),F5(t),q$(),L5("[SearchCache] store",t,{players:e.players.length,guilds:e.guilds.length})}catch(i){}},$p=3,X$=350,Po=25,Op=10,jb="sfh:search:recents",B5=20,tv=t=>Number.isFinite(t),Zc=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},Y$=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),ql=()=>{try{const t=typeof window!="undefined"?window.localStorage.getItem(jb):null;if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.slice(0,B5).map(s=>{var r,i,a,l,d,u,h,m,g;return(s==null?void 0:s.kind)==="player"||(s==null?void 0:s.kind)==="guild"?{kind:s.kind,id:String((i=(r=s.id)!=null?r:s.value)!=null?i:""),server:(l=(a=s.server)!=null?a:s.serverId)!=null?l:null,name:(u=(d=s.name)!=null?d:s.label)!=null?u:null,className:(h=s.className)!=null?h:null,level:typeof s.level=="number"?s.level:null,guildName:(m=s.guildName)!=null?m:null}:(s==null?void 0:s.kind)==="query"?{kind:"query",value:String((g=s.value)!=null?g:"")}:null}).filter(Boolean):[]}catch(t){return[]}},Zl=t=>{var s;if(t.kind==="query")return`query:${t.value}`;const e=(s=t.server)!=null?s:"";return`${t.kind}:${e}:${t.id}`},xS=t=>{var e,s,r,i,a,l,d,u,h;if(t.kind!=="player"||t.name&&t.className&&t.server||typeof window=="undefined")return t;try{const m=window.localStorage.getItem(`player-profile-cache:${t.id}`);if(!m)return t;const g=JSON.parse(m),v=(g==null?void 0:g.data)||{};return{...t,name:(s=(e=t.name)!=null?e:v.name)!=null?s:null,className:(i=(r=t.className)!=null?r:v.className)!=null?i:null,server:(l=(a=t.server)!=null?a:v.server)!=null?l:null,level:(d=t.level)!=null?d:typeof v.level=="number"?v.level:null,guildName:(h=(u=t.guildName)!=null?u:v.guild)!=null?h:null}}catch(m){return t}},sv=t=>{if(typeof window!="undefined")try{const e=ql().map(xS),s=t.kind==="player"?xS(t):t,r=Zl(s),i=[s,...e.filter(a=>Zl(a)!==r)];window.localStorage.setItem(jb,JSON.stringify(i.slice(0,B5)))}catch(e){}},nv=(t,e)=>{try{const s=ql().filter(r=>Zl(r)!==t);window.localStorage.setItem(jb,JSON.stringify(s)),e(s)}catch(s){e(r=>r.filter(i=>Zl(i)!==t))}};function J$(t){const e=t.ref.parent,s=e==null?void 0:e.parent,r=s==null?void 0:s.parent;return{root:r==null?void 0:r.id,id:s==null?void 0:s.id}}function Z$({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:s}){const{t:r}=no(),i=fi(),[a,l]=X.useState(""),[d,u]=X.useState(""),[h,m]=X.useState(!1),[g,v]=X.useState(null),[b,_]=X.useState([]),[N,C]=X.useState([]),[R,D]=X.useState([]),[A,y]=X.useState(!1),[w,M]=X.useState(!1),[k,S]=X.useState(ql()),[T,F]=X.useState(-1),[I,B]=X.useState(!1),[$,H]=X.useState(!1),[z,W]=X.useState(null),K=X.useRef(null),q=X.useRef(0);X.useEffect(()=>{const te=setTimeout(()=>u(a.trim()),X$);return()=>clearTimeout(te)},[a]),X.useEffect(()=>{let te=!1;async function fe(){const ae=d,be=W$(ae);if(ae.length<$p){_([]),C([]),D([]),y(!1),M(!1),F(k.length?0:-1),W(null);return}const ye=K$(be);if(ye){_(ye.players.slice(0,Op).map(Ge=>{var nt,at,ft;return{kind:"player",id:String(Ge.playerId),name:Ge.name,server:(nt=Ge.server)!=null?nt:null,className:(at=Ge.className)!=null?at:null,guildName:(ft=Ge.guildName)!=null?ft:null,nameFold:null,level:null}})),C(ye.guilds.slice(0,Op).map(Ge=>{var nt;return{kind:"guild",id:Ge.guildId,name:Ge.name,server:(nt=Ge.server)!=null?nt:null,memberCount:null,hofRank:null}})),y(ye.playersHasMore),M(ye.guildsHasMore),D([]),F(ye.players.length+ye.guilds.length?0:-1),W("cache");return}B(!0);const Ie=Fh("Search:universal");v(null),m(!0);const $e=++q.current;try{let Ge=function(dt){var lt,_t,ts,Cs,Nn,mr,fn,Vi,us,tr,Hn,Pr,Lr,Jr,kn,ss,gs,Cn,Dr,Vt,Ui,pr,dl,oo,fa,ga,lo,ul,yc,ms,hl,zi,gi,sr;const J=dt.data(),{root:Ve,id:He}=J$(dt),tt=He||J.playerId||J.guildIdentifier||"";if(Ve==="players"||J.playerId&&!J.guildIdentifier){if(!tt||Ke.has(tt))return;Ke.add(tt),kt.push({kind:"player",id:tt,name:(ts=(_t=J.name)!=null?_t:(lt=J.values)==null?void 0:lt.Name)!=null?ts:null,nameFold:(Cs=J.nameFold)!=null?Cs:null,server:(fn=(mr=J.server)!=null?mr:(Nn=J.values)==null?void 0:Nn.Server)!=null?fn:null,guildName:(tr=(us=J.guildName)!=null?us:(Vi=J.values)==null?void 0:Vi.Guild)!=null?tr:null,className:(Lr=(Pr=J.className)!=null?Pr:(Hn=J.values)==null?void 0:Hn.Class)!=null?Lr:null,level:Zc((kn=J.level)!=null?kn:(Jr=J.values)==null?void 0:Jr.Level),ts:Zc(J.timestamp)});return}if(Ve==="guilds"||J.guildIdentifier&&!J.playerId){if(!tt||bt.has(tt))return;bt.add(tt),Oe.push({kind:"guild",id:tt,name:(Cn=(gs=J.name)!=null?gs:(ss=J.values)==null?void 0:ss.Name)!=null?Cn:null,nameFold:(Dr=J.nameFold)!=null?Dr:null,server:(pr=(Ui=J.server)!=null?Ui:(Vt=J.values)==null?void 0:Vt.Server)!=null?pr:null,memberCount:Zc((ga=(oo=J.memberCount)!=null?oo:(dl=J.values)==null?void 0:dl["Guild Member Count"])!=null?ga:(fa=J.values)==null?void 0:fa.GuildMemberCount),hofRank:Zc((sr=(zi=(ms=(ul=J.hofRank)!=null?ul:(lo=J.values)==null?void 0:lo["Hall of Fame Rank"])!=null?ms:(yc=J.values)==null?void 0:yc.HoF)!=null?zi:(hl=J.values)==null?void 0:hl.Rank)!=null?sr:(gi=J.values)==null?void 0:gi["Guild Rank"]),ts:Zc(J.timestamp)});return}};const nt=Y$(ae),at=am(xt,"latest"),ft=an(at,Wr("nameFold"),Ri(nt),Pi(nt+""),hn(Po)),$t=await Wl(Ie,ft,()=>mn(ft),{collectionHint:"latest"}),je=an(at,el("nameNgrams","array-contains",nt),hn(Po)),Je=await Wl(Ie,je,()=>mn(je),{collectionHint:"latest"}),Ke=new Set,bt=new Set,kt=[],Oe=[];$t.forEach(Ge),Je.forEach(Ge);const Te=kt.slice(0,Po),De=Oe.slice(0,Po);if($e!==q.current||te){Ba(Ie);return}const et=pc(xt,"servers"),ht=ae.toLowerCase(),we=ae.toUpperCase(),Gs=[Wl(Ie,an(et,Wr("displayName"),Ri(ae),Pi(ae+""),hn(e)),()=>mn(an(et,Wr("displayName"),Ri(ae),Pi(ae+""),hn(e))),{collectionHint:"servers"}),Wl(Ie,an(et,Wr("code"),Ri(we),Pi(we+""),hn(e)),()=>mn(an(et,Wr("code"),Ri(we),Pi(we+""),hn(e))),{collectionHint:"servers"}),Wl(Ie,an(et,Wr("host"),Ri(ht),Pi(ht+""),hn(e)),()=>mn(an(et,Wr("host"),Ri(ht),Pi(ht+""),hn(e))),{collectionHint:"servers"})],Os=await Promise.allSettled(Gs),Ws=new Set,qs=[];for(const dt of Os)dt.status==="fulfilled"&&dt.value.forEach(J=>{var tt,lt,_t,ts,Cs;const Ve=J.data(),He=J.id;!He||Ws.has(He)||(Ws.add(He),qs.push({kind:"server",id:He,displayName:(tt=Ve.displayName)!=null?tt:null,code:(lt=Ve.code)!=null?lt:null,host:(_t=Ve.host)!=null?_t:null,region:(ts=Ve.region)!=null?ts:null,type:(Cs=Ve.type)!=null?Cs:null,numericId:Zc(Ve.numericId),active:typeof Ve.active=="boolean"?Ve.active:null}))});const cs=[],es=dt=>{for(const J of dt){if(cs.length>=Op)break;cs.push(J)}};es(Te),es(De),cs.length<Op&&(es(Te.slice(cs.length)),es(De.slice(cs.length))),_(cs.filter(dt=>dt.kind==="player")),C(cs.filter(dt=>dt.kind==="guild")),D(qs.slice(0,e)),y(Te.length===Po),M(De.length===Po),F(cs.length+qs.length?0:-1),W("live"),Q$(be,{players:Te.map(dt=>({playerId:dt.id,name:dt.name,server:dt.server,className:dt.className,guildName:dt.guildName})),guilds:De.map(dt=>{var J;return{guildId:dt.id,name:dt.name,server:(J=dt.server)!=null?J:void 0}}),playersHasMore:Te.length===Po,guildsHasMore:De.length===Po})}catch(Ge){v((Ge==null?void 0:Ge.message)||"Unbekannter Fehler bei der Suche."),_([]),C([]),D([]),F(-1)}finally{Ba(Ie),m(!1)}}return fe(),()=>{te=!0}},[d,e,k.length]),X.useEffect(()=>{const te=fe=>{K.current&&(K.current.contains(fe.target)||(_([]),C([]),D([]),F(-1),B(!1),H(!1)))};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]);const se=I&&a.trim().length<$p&&k.length>0,re=I&&(h||g||se||[...b,...N,...R].length>0||$&&a.trim().length<$p),U=k.filter(te=>te.kind==="player"||te.kind==="guild").map(te=>{var fe,ae,be,ye,Ie,$e,Ge;return te.kind==="player"?{kind:"player",id:te.id,name:(fe=te.name)!=null?fe:null,nameFold:null,server:(ae=te.server)!=null?ae:null,guildName:(be=te.guildName)!=null?be:null,className:(ye=te.className)!=null?ye:null,level:(Ie=te.level)!=null?Ie:null,ts:null}:{kind:"guild",id:te.id,name:($e=te.name)!=null?$e:null,nameFold:null,server:(Ge=te.server)!=null?Ge:null,memberCount:null,hofRank:null,ts:null}}),Y=se?U:[...b,...N,...R],ce=te=>{te.kind==="player"?(sv({kind:"player",id:te.id,name:te.name,className:te.className,level:te.level,guildName:te.guildName,server:te.server}),S(ql()),i(`/player/${encodeURIComponent(te.id)}`)):te.kind==="guild"?(sv({kind:"guild",id:te.id,name:te.name,server:te.server}),S(ql()),i(`/guild/${encodeURIComponent(te.id)}`)):i(`/server/${encodeURIComponent(te.id)}`),_([]),C([]),D([]),F(-1),l(""),B(!1),W(null)},oe=()=>{a.trim().length<$p||(sv({kind:"query",value:a.trim()}),S(ql()),i(`/search?q=${encodeURIComponent(a.trim())}`),B(!1))},me=te=>{if(te.key==="Enter"){te.preventDefault(),T>=0&&Y[T]?ce(Y[T]):oe();return}if(te.key==="Escape"){_([]),C([]),D([]),F(-1),B(!1);return}Y.length&&(te.key==="ArrowDown"?(te.preventDefault(),F(fe=>(fe+1)%Y.length)):te.key==="ArrowUp"&&(te.preventDefault(),F(fe=>(fe-1+Y.length)%Y.length)))},_e=(te,fe,ae=!1,be)=>{var Ie,$e,Ge,nt,at,ft;const ye=fe===T;return n.jsxs("button",{onClick:()=>ce(te),style:ye?gt.itemActive:gt.item,title:te.name||"",onMouseEnter:()=>F(fe),children:[n.jsx("div",{style:gt.iconBox,children:s?n.jsx("img",{src:s((Ie=te.className)!=null?Ie:void 0,64),alt:($e=te.className)!=null?$e:"class icon",style:gt.iconImgShadow,loading:"lazy"}):n.jsx("span",{style:gt.iconFallback,children:(Ge=te.className)!=null?Ge:"?"})}),n.jsxs("div",{style:gt.meta,children:[n.jsxs("div",{style:gt.line1,children:[n.jsx("span",{style:gt.name,children:(nt=te.name)!=null?nt:te.id}),tv(te.level)&&n.jsxs("span",{style:gt.badge,children:["Lvl ",te.level]}),ae&&n.jsx("span",{style:gt.recentsBadge,children:r("search.recentLabel","Recent")}),ae&&be&&n.jsx("button",{type:"button",style:gt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:$t=>{$t.preventDefault(),$t.stopPropagation(),nv(be,S)},children:""})]}),n.jsxs("div",{style:gt.line2,children:[n.jsx("span",{children:(at=te.className)!=null?at:"Klasse ?"}),n.jsx("span",{style:gt.sep,children:""}),n.jsx("span",{children:(ft=te.server)!=null?ft:"Server ?"})]})]})]},`p-${te.id}-${fe}-${ae?"r":"s"}`)},Pe=(te,fe,ae=!1,be)=>{var Ie,$e;const ye=fe===T;return n.jsxs("button",{onClick:()=>ce(te),style:ye?gt.itemActive:gt.item,title:te.name||"",onMouseEnter:()=>F(fe),children:[n.jsx("div",{style:gt.iconBox,children:""}),n.jsxs("div",{style:gt.meta,children:[n.jsxs("div",{style:gt.line1,children:[n.jsx("span",{style:gt.name,children:(Ie=te.name)!=null?Ie:te.id}),tv(te.hofRank)&&n.jsxs("span",{style:gt.badge,children:["HoF #",te.hofRank]}),ae&&n.jsx("span",{style:gt.recentsBadge,children:r("search.recentLabel","Recent")}),ae&&be&&n.jsx("button",{type:"button",style:gt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Ge=>{Ge.preventDefault(),Ge.stopPropagation(),nv(be,S)},children:""})]}),n.jsxs("div",{style:gt.line2,children:[n.jsx("span",{children:($e=te.server)!=null?$e:"Server ?"}),n.jsx("span",{style:gt.sep,children:""}),n.jsx("span",{children:tv(te.memberCount)?r("search.guildMembers","{{count}} members",{count:te.memberCount}):r("search.guildMembersUnknown","Members ?")})]})]})]},`g-${te.id}-${fe}-${ae?"r":"s"}`)};return n.jsxs("div",{ref:K,style:gt.wrap,children:[n.jsx("input",{style:gt.input,placeholder:t,value:a,onChange:te=>l(te.target.value),onKeyDown:me,onFocus:()=>{H(!0),B(!0)},onBlur:()=>{H(!1)},"aria-label":r("search.inputLabel","Spieler, Gilden und Server suchen")}),re&&n.jsxs("div",{style:gt.dropdown,children:[h&&n.jsx("div",{style:gt.hint,children:r("search.loading","Laden ")}),g&&n.jsx("div",{style:gt.err,children:g}),!h&&!g&&se&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:gt.sectionHdr,children:r("search.recents","Recent searches")}),k.length===0&&n.jsx("div",{style:gt.hint,children:r("search.minCharsHint","Type at least 3 characters")}),k.map((te,fe)=>{var ae,be,ye,Ie,$e,Ge,nt;if(te.kind==="query"){const at=Zl(te);return n.jsx("button",{style:gt.item,onClick:()=>{l(te.value),u(te.value),B(!1),S(ql())},children:n.jsx("div",{style:gt.meta,children:n.jsxs("div",{style:gt.line1,children:[n.jsx("span",{style:gt.name,children:te.value}),n.jsx("span",{style:gt.recentsBadge,children:r("search.recentLabel","Recent")}),n.jsx("button",{type:"button",style:gt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:ft=>{ft.preventDefault(),ft.stopPropagation(),nv(at,S)},children:""})]})})},`rq-${fe}`)}if(te.kind==="player"){const at={kind:"player",id:te.id,name:(ae=te.name)!=null?ae:null,server:(be=te.server)!=null?be:null,guildName:(ye=te.guildName)!=null?ye:null,className:(Ie=te.className)!=null?Ie:null,level:($e=te.level)!=null?$e:null},ft=Zl(te);return n.jsx(X.Fragment,{children:_e(at,fe,!0,ft)},`rp-${te.id}-${fe}`)}if(te.kind==="guild"){const at={kind:"guild",id:te.id,name:(Ge=te.name)!=null?Ge:null,server:(nt=te.server)!=null?nt:null,memberCount:null,hofRank:null},ft=Zl(te);return n.jsx(X.Fragment,{children:Pe(at,fe+b.length,!0,ft)},`rg-${te.id}-${fe}`)}return null})]}),!h&&!g&&!se&&Y.length===0&&n.jsx("div",{style:gt.hint,children:r("search.noResults","No results")}),!h&&!g&&b.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:gt.sectionHdr,children:r("search.players","Players")}),b.map((te,fe)=>_e(te,fe))]}),!h&&!g&&N.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:gt.sectionHdr,children:r("search.guilds","Guilds")}),N.map((te,fe)=>{const ae=b.length+fe;return Pe(te,ae)})]}),!h&&!g&&R.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:gt.sectionHdr,children:r("search.servers","Servers")}),R.map((te,fe)=>{var ye,Ie,$e,Ge,nt,at;const ae=b.length+N.length+fe,be=ae===T;return n.jsxs("button",{onClick:()=>ce(te),style:be?gt.itemActive:gt.item,title:te.displayName||te.code||te.host||"",onMouseEnter:()=>F(ae),children:[n.jsx("div",{style:gt.iconBoxPlain,children:n.jsx("div",{style:gt.serverGlyph,children:""})}),n.jsxs("div",{style:gt.meta,children:[n.jsxs("div",{style:gt.line1,children:[n.jsx("span",{style:gt.name,children:($e=(Ie=(ye=te.displayName)!=null?ye:te.code)!=null?Ie:te.host)!=null?$e:te.id}),te.active!=null&&n.jsx("span",{style:gt.badge,children:te.active?r("search.active","Active"):r("search.inactive","Inactive")})]}),n.jsxs("div",{style:gt.line2,children:[n.jsx("span",{children:(Ge=te.code)!=null?Ge:"?"}),n.jsx("span",{style:gt.sep,children:""}),n.jsx("span",{children:(nt=te.host)!=null?nt:"?"}),n.jsx("span",{style:gt.sep,children:""}),n.jsx("span",{children:(at=te.region)!=null?at:"?"}),te.type?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:gt.sep,children:""}),n.jsx("span",{children:te.type.toUpperCase()})]}):null]})]})]},`s-${te.id}-${fe}`)})]}),(A||w)&&n.jsx("button",{style:gt.moreCta,onClick:oe,children:r("search.moreResults","More results press Enter")})]})]})}const gt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},moreCta:{width:"100%",border:"1px dashed rgba(255,255,255,0.3)",background:"transparent",color:"#d6e4f7",padding:"10px 12px",borderRadius:10,cursor:"pointer",marginTop:8},recentsBadge:{marginLeft:8,fontSize:11,color:"#8aa5c4",border:"1px solid rgba(255,255,255,0.2)",padding:"0 6px",borderRadius:12},clearBtn:{marginLeft:8,background:"transparent",border:"none",color:"rgba(214,228,247,0.85)",cursor:"pointer",fontSize:12,padding:"0 4px"}},Vp=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function Sb(t,e=64){if(!t)return;const s=Vp(t);let r=Sn.find(i=>Vp(i.label)===s);return r||(r=Sn.find(i=>Vp(i.label).startsWith(s)||s.startsWith(Vp(i.label)))),r?Rr(r.iconUrl,e):void 0}const eO=[{to:"/",label:"Home",featureId:"main.home"},{to:"/dashboard",label:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",label:"Guild Hub",featureId:"main.guildHub"},{to:"/community",label:"Community",featureId:"main.community"},{to:"/tools",label:"Tools",featureId:"main.tools"}];function tO(t,e){return Sb(t,e)}function sO({user:t}){const{open:e,canUse:s}=wb(),{isVisibleInTopbar:r}=Xg(),i=X.useMemo(()=>eO.filter(l=>!l.featureId||r(l.featureId)),[r]),a=()=>{e({tab:"json"})};return n.jsxs("header",{className:Ot.topbar,children:[n.jsxs("div",{className:Ot.topbarLeft,children:[n.jsx("button",{className:Ot.btnIco,"aria-label":"Benachrichtigungen",children:n.jsx(OL,{className:Ot.ico})}),n.jsx("button",{className:Ot.btnIco,"aria-label":"Favoriten",children:n.jsx(q6,{className:Ot.ico})}),i.length>0?n.jsx("nav",{className:Ot.topbarNav,"aria-label":"Schnellzugriff",children:i.map(l=>n.jsx(As,{to:l.to,className:({isActive:d})=>`${Ot.pill} ${Ot.topbarLink} ${d?Ot.pillActive:""}`,children:l.label},l.to))}):null]}),n.jsx("div",{className:Ot.searchWrap,children:n.jsx(Z$,{placeholder:"Suchen (Spieler)",getClassIcon:tO,maxPerSection:10})}),n.jsxs("div",{className:Ot.topbarRight,children:[n.jsxs("a",{className:`${Ot.pill} ${Ot.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer",children:[n.jsx(m6,{className:Ot.ico}),"www.sfgame.net"]}),s?n.jsxs("button",{className:Ot.upload,"aria-label":"Scan hochladen",onClick:a,title:"Scan hochladen",children:[n.jsx(sD,{className:Ot.ico}),n.jsx("span",{className:Ot.label,children:"Scan hochladen"})]}):null,n.jsx(k$,{fallbackName:t==null?void 0:t.name})]})]})}const nO="_root_jjyom_3",rO="_expanded_jjyom_45",iO="_headRow_jjyom_55",aO="_headTitle_jjyom_63",oO="_headDot_jjyom_65",lO="_headLabel_jjyom_67",cO="_pinBtn_jjyom_69",dO="_navScroll_jjyom_81",uO="_pad_jjyom_83",hO="_segCard_jjyom_89",mO="_segTitle_jjyom_121",pO="_connectedCharactersCard_jjyom_139",fO="_connectedCharactersTitle_jjyom_145",gO="_connectedCharactersList_jjyom_159",xO="_characterChip_jjyom_175",yO="_characterChipId_jjyom_215",vO="_characterChipMeta_jjyom_223",bO="_connectedCharactersEmpty_jjyom_231",_O="_connectedCharactersEmptyText_jjyom_285",wO="_connectedCharactersEmptyCta_jjyom_291",jO="_navCol_jjyom_341",SO="_navItemWrap_jjyom_343",NO="_navBtn_jjyom_349",kO="_navBtnActive_jjyom_373",CO="_label_jjyom_377",TO="_trailing_jjyom_407",EO="_isOpen_jjyom_455",AO="_footer_jjyom_481",IO="_login_jjyom_483",RO="_userMeta_jjyom_505",PO="_footerLink_jjyom_519",LO="_legal_jjyom_547",DO="_labelText_jjyom_571",MO="_char_jjyom_175",FO="_mainNavCard_jjyom_649",It={root:nO,expanded:rO,headRow:iO,headTitle:aO,headDot:oO,headLabel:lO,pinBtn:cO,navScroll:dO,pad:uO,segCard:hO,segTitle:mO,connectedCharactersCard:pO,connectedCharactersTitle:fO,connectedCharactersList:gO,characterChip:xO,characterChipId:yO,characterChipMeta:vO,connectedCharactersEmpty:bO,connectedCharactersEmptyText:_O,connectedCharactersEmptyCta:wO,navCol:jO,navItemWrap:SO,navBtn:NO,navBtnActive:kO,label:CO,trailing:TO,isOpen:EO,footer:AO,login:IO,userMeta:RO,footerLink:PO,legal:LO,labelText:DO,char:MO,mainNavCard:FO},BO="_panel_90cjk_1",$O="_open_90cjk_31",OO="_col_90cjk_43",VO="_link_90cjk_55",UO="_linkActive_90cjk_73",uh={panel:BO,open:$O,col:OO,link:VO,linkActive:UO};function zO(t,e=8){const s=t.getBoundingClientRect();return{left:Math.round(s.right+e),top:Math.round(s.top)}}function HO({anchorEl:t,open:e,items:s,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[l,d]=X.useState({left:0,top:0});return X.useEffect(()=>{if(!e||!t)return;const u=()=>d(zO(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(s!=null&&s.length)&&console.log("submenu items:",s.map(u=>u.label)),TL.createPortal(n.jsx("div",{className:`${uh.panel} ${e?uh.open:""}`,style:{left:l.left,top:l.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:n.jsx("div",{className:uh.col,children:s.map(u=>r(u))})}),document.body))}const GO=[{to:"/",label:"Home",icon:n.jsx(g6,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",label:"Discover",icon:n.jsx(r6,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",label:"Dashboard",icon:n.jsx(b6,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",label:"Settings",icon:n.jsx(F6,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",label:"Guild Hub",icon:n.jsx(uc,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",label:"Admin",icon:n.jsx(V6,{className:"ico"}),featureId:"main.admin"},{to:"/playground",label:"Playground",icon:n.jsx(jg,{className:"ico"}),featureId:"main.playground"}],WO=[{to:"/toplists",label:"Toplists",icon:n.jsx(eD,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub",label:"Guide Hub",icon:n.jsx(UL,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",label:"Tools",icon:n.jsx(iD,{className:"ico"}),i18nKey:"nav.tools",featureId:"main.tools"},{to:"/community",label:"Community",icon:n.jsx(j6,{className:"ico"}),featureId:"main.community"},{to:"/scans",label:"Scans",icon:n.jsx(u6,{className:"ico"}),featureId:"main.scans"}],qO={"/guild-hub":[{to:"/guild-hub",label:"Overview"},{to:"/guild-hub/planner",label:"Guild Planner"},{to:"/guild-hub/fusion-planner",label:"Fusion Planner"},{to:"/guild-hub/compare-guilds",label:"Gildenvergleich"},{to:"/guild-hub/waitlist",label:"Waitlist"},{to:"/guild-hub/settings",label:"Settings"}],"/discover":[{to:"/players",label:"Players"},{to:"/sfmagazine",label:"SFMagazine"},{to:"/sfmagazine/historybook",label:"History Book"},{to:"/guilds",label:"Guilds"},{to:"/servers",label:"Servers"},{to:"/scans",label:"Scans"},{to:"/discover/favorites",label:"Favorites"}],"/admin":[{to:"/admin",label:"Overview"},{to:"/admin/errors",label:"Error log"},{to:"/admin/feedback",label:"Feedback"},{to:"/admin/users",label:"Users",minRole:"mod"}],"/settings":[{to:"/settings/profile",label:"Profile"},{to:"/settings/account",label:"Account"},{to:"/settings/appearance",label:"Appearance"}],"/playground":[{to:"/playground/list-views",label:"List Views"},{to:"/playground/rescan-widget",label:"Rescan Widget"},{to:"/playground/upload-sim",label:"Upload Simulator"},{to:"/playground/hud/game-buttons",label:"HUD  Game Buttons"}]};function KO(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function QO(t,e){return t?t.filter(s=>KO(e,s.minRole)):[]}const XO=220;function YO(t=XO){const[e,s]=X.useState(!1),r=X.useRef(null),i=X.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=X.useCallback(()=>{i(),s(!0)},[i]),l=X.useCallback(()=>{i(),r.current=window.setTimeout(()=>s(!1),t)},[i,t]);return X.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:l,setOpen:s}}function Nb({text:t,isOpen:e,duration:s=1,step:r=45}){const i=X.useMemo(()=>Array.from(t),[t]);return n.jsx("span",{className:It.label,children:n.jsx("span",{className:It.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${s}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,l)=>n.jsx("span",{className:It.char,style:{"--i":l},"aria-hidden":"true",children:a===" "?"":a},`${t}-${l}`))})})}function JO({it:t,label:e,collapsed:s,allowSubmenus:r,subItems:i}){const a=i.length>0,{open:l,onEnter:d,onLeave:u,setOpen:h}=YO(),m=X.useRef(null),g=X.useCallback(()=>{if(!r||!a){h(!1);return}d()},[r,a,d,h]);return n.jsxs("div",{ref:m,className:`${It.navItemWrap} ${l?It.isOpen:""}`,onMouseEnter:g,onMouseLeave:u,children:[n.jsxs(As,{to:t.to,end:!!t.end,className:({isActive:v})=>`${It.navBtn} ${v?It.navBtnActive:""}`,children:[t.icon,n.jsx(Nb,{text:e,isOpen:!s}),a&&!s&&n.jsx("span",{className:It.trailing,"aria-hidden":"true",children:n.jsx(WL,{className:"ico"})})]}),a&&n.jsx(HO,{anchorEl:m.current,open:l,items:i.map(({to:v,label:b})=>({to:v,label:b})),renderLink:v=>n.jsx(As,{to:v.to,end:!0,className:({isActive:b})=>`${uh.link} ${b?uh.linkActive:""}`,children:v.label},v.to),onMouseEnter:d,onMouseLeave:u})]})}function yS({title:t,items:e,collapsed:s,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:l}){return n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:`${It.navTitle} ${It.segTitle}`,children:t}),n.jsx("div",{className:It.navCol,children:e.map(d=>{if(!l(d))return null;const u=QO(qO[d.to],i),h=d.i18nKey?a(d.i18nKey):d.label;return u.length?n.jsx(JO,{it:d,label:h,collapsed:s,allowSubmenus:r,subItems:u},d.to):n.jsxs(As,{to:d.to,end:!!d.end,className:({isActive:m})=>`${It.navBtn} ${m?It.navBtnActive:""}`,children:[d.icon,n.jsx(Nb,{text:h,isOpen:!s})]},d.to)})})]})}const ZO=90,eV=180;function tV({expanded:t,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:i=!0}){var $;const a=X.useRef(null),l=X.useRef(null),[d,u]=X.useState(!1),h=X.useCallback(()=>{a.current&&(window.clearTimeout(a.current),a.current=null),l.current&&(window.clearTimeout(l.current),l.current=null)},[]),m=X.useCallback(()=>{!i||s||(h(),u(!1),a.current=window.setTimeout(()=>e(!0),ZO))},[i,s,h,e]),g=X.useCallback(()=>{!i||s||(h(),l.current=window.setTimeout(()=>{e(!1),u(!1)},eV))},[i,s,h,e]);X.useEffect(()=>()=>h(),[h]),X.useEffect(()=>{s&&u(!0)},[s]);const v=H=>{H.propertyName==="width"&&t&&!s&&u(!0)};X.useEffect(()=>{if(t&&!s){const H=window.setTimeout(()=>u(!0),250);return()=>window.clearTimeout(H)}},[t,s]);const b=!t,_=s||t&&d,N=fi(),{t:C}=no(),{status:R,user:D,logout:A}=ao(),y=R==="authenticated",w=($=D==null?void 0:D.roles)!=null?$:[],M=X.useMemo(()=>{var H;return(H=D==null?void 0:D.linkedPlayers)!=null?H:[]},[D==null?void 0:D.linkedPlayers]),{isVisibleInSidebar:k}=Xg(),S=()=>{y?A():N("/login")},T=H=>{N(`/player/${H}`)},F=()=>{M.length>0||N(y?"/settings/account?tab=connected-characters&openHelp=1":"/help#linking")},I=y?C("sidebar.connectedCharacters.empty",{defaultValue:"No characters linked yet. Link a character in your account to see it here."}):C("sidebar.connectedCharacters.loginPrompt",{defaultValue:"Sign in to see your linked characters."}),B=y?C("sidebar.connectedCharacters.ctaAuthed",{defaultValue:"Open linked characters guide"}):C("sidebar.connectedCharacters.ctaGuest",{defaultValue:"Open start guide"});return n.jsxs("aside",{id:"sidebar-root",className:`${It.root} ${t?It.expanded:""}`,"data-collapsed":b?"true":"false",onMouseEnter:m,onMouseLeave:g,onTransitionEnd:v,"aria-label":"Navigation",children:[n.jsxs("div",{className:It.headRow,children:[n.jsxs("div",{className:It.headTitle,children:[n.jsx("span",{className:It.headDot})," ",n.jsx("span",{className:It.headLabel,children:"Navigation"})]}),n.jsx("button",{className:It.pinBtn,"aria-pressed":s,title:s?"Unpin":"Pin",onClick:()=>r(!s),type:"button",children:s?n.jsx(E6,{className:"ico"}):n.jsx(C6,{className:"ico"})})]}),n.jsx("div",{className:It.navScroll,children:n.jsxs("div",{className:It.pad,children:[n.jsx("div",{className:`${It.segCard} ${It.mainNavCard}`,children:n.jsx(yS,{items:GO,collapsed:b,allowSubmenus:_,userRoles:w,translate:C,isItemVisible:H=>{var z;return k((z=H.featureId)!=null?z:H.to)}})}),n.jsx("div",{className:It.segTitle,children:"Kategorien"}),n.jsx("div",{className:`${It.segCard} ${It.mainNavCard}`,children:n.jsx(yS,{items:WO,collapsed:b,allowSubmenus:_,userRoles:w,translate:C,isItemVisible:H=>{var z;return k((z=H.featureId)!=null?z:H.to)}})}),n.jsxs("div",{className:`${It.segCard} ${It.mainNavCard} ${It.connectedCharactersCard}`,children:[n.jsx("div",{className:It.connectedCharactersTitle,children:C("sidebar.connectedCharacters.title",{defaultValue:"Connected characters"})}),M.length===0?n.jsxs("button",{type:"button",className:It.connectedCharactersEmpty,onClick:F,children:[n.jsx("span",{className:It.connectedCharactersEmptyText,children:I}),n.jsx("span",{className:It.connectedCharactersEmptyCta,children:B})]}):n.jsx("div",{className:It.connectedCharactersList,"data-collapsed":b?"true":"false",children:M.map(H=>{var q,se;const z=[H.server,H.class].filter(Boolean).join(" | "),W=(q=H.playerId)!=null?q:"-",K=`${(se=H.server)!=null?se:"server"}-${W}`;return n.jsxs("button",{type:"button",className:It.characterChip,onClick:()=>T(W),children:[n.jsx("span",{className:It.characterChipId,children:W}),z&&n.jsx("span",{className:It.characterChipMeta,children:z})]},K)})})]})]})}),n.jsxs("div",{className:`${It.footer} ${It.segCard} ${It.mainNavCard}`,children:[n.jsxs("button",{className:It.login,type:"button",onClick:S,children:[n.jsx(uc,{className:"ico"}),n.jsx(Nb,{text:y?"Logout":"Login",isOpen:!b})]}),y&&(D!=null&&D.displayName)?n.jsx("div",{className:It.userMeta,title:D.displayName,children:D.displayName}):null,n.jsx(As,{to:"/help",className:It.footerLink,children:C("nav.help",{defaultValue:"Help"})}),n.jsxs("div",{className:It.legal,children:["(c) 2025 ",C("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const jf="/assets/logo-sfdatahub-CUdhlsEb.png";function sV({src:t,alt:e="",children:s,to:r="/",loading:i="eager",decoding:a="async"}){const l=t!=null?t:jf;return n.jsxs("div",{className:"logo-dock",children:[n.jsx(As,{to:r,"aria-label":"Go to home",children:n.jsx("img",{className:"logo-img",src:l,alt:e,loading:i,decoding:a,onError:d=>{const u=d.currentTarget;u.src!==jf&&(u.src=jf)}})}),s]})}const nV={borderColor:"#2B4C73",background:"#1A2F4A"};function rV(){const[t,e]=E.useState(!1),[s,r]=E.useState(!1),i=s||t,{t:a}=no(),l=E.useMemo(()=>i?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i]),d=a("footer.about.body").split(`

`),u=[{key:"tos",to:"/playground/legal/tos",label:a("help.sections.legal.items.tos",{defaultValue:"Terms of Service (ToS)"})},{key:"privacy",to:"/playground/legal/tos",label:a("help.sections.legal.items.privacy",{defaultValue:"Privacy Policy"})},{key:"imprint",to:"/help",label:a("help.sections.legal.items.imprint",{defaultValue:"Imprint / Contact"})}];return n.jsxs("div",{id:"app-shell","data-sidebar":i?"expanded":"collapsed",style:{"--left":l},children:[n.jsx(sV,{src:"/logo.png"}),n.jsx(sO,{}),n.jsx("div",{className:"logo-fill"}),n.jsx(tV,{expanded:i,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:!s}),n.jsx("div",{className:"content",children:n.jsx("div",{className:"content-inner",children:n.jsxs("div",{className:"content-body",children:[n.jsx(zC,{}),n.jsx("div",{className:"mt-4 px-4 md:px-6",children:n.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:nV,children:[n.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:a("footer.about.title")}),n.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:d.map((h,m)=>n.jsx("p",{className:"whitespace-pre-line",children:h},`footer-about-${m}`))}),n.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[n.jsx("div",{children:a("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),n.jsx("div",{children:a("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:u.map(h=>n.jsx(hs,{to:h.to,className:"underline hover:no-underline",children:h.label},h.key))})]})})]})})})]})}const $5=E.createContext({});function kb(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const Cb=E.createContext(null),Tb=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function iV(t=!0){const e=E.useContext(Cb);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=e,a=E.useId();E.useEffect(()=>{t&&i(a)},[t]);const l=E.useCallback(()=>t&&r&&r(a),[a,r,t]);return!s&&r?[!1,l]:[!0]}const Eb=typeof window!="undefined",O5=Eb?E.useLayoutEffect:E.useEffect,Qr=t=>t;let V5=Qr;function Ab(t){let e;return()=>(e===void 0&&(e=t()),e)}const cc=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r},la=t=>t*1e3,ca=t=>t/1e3,aV={useManualTiming:!1};function oV(t){let e=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(h){a.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,m=!1,g=!1)=>{const b=g&&r?e:s;return m&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{s.delete(h),a.delete(h)},process:h=>{if(l=h,r){i=!0;return}r=!0,[e,s]=[s,e],e.forEach(d),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const Up=["read","resolveKeyframes","update","preRender","render","postRender"],lV=40;function U5(t,e){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,l=Up.reduce((R,D)=>(R[D]=oV(a),R),{}),{read:d,resolveKeyframes:u,update:h,preRender:m,render:g,postRender:v}=l,b=()=>{const R=performance.now();s=!1,i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,lV),1),i.timestamp=R,i.isProcessing=!0,d.process(i),u.process(i),h.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,s&&e&&(r=!1,t(b))},_=()=>{s=!0,r=!0,i.isProcessing||t(b)};return{schedule:Up.reduce((R,D)=>{const A=l[D];return R[D]=(y,w=!1,M=!1)=>(s||_(),A.schedule(y,w,M)),R},{}),cancel:R=>{for(let D=0;D<Up.length;D++)l[Up[D]].cancel(R)},state:i,steps:l}}const{schedule:js,cancel:to,state:Ln,steps:rv}=U5(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Qr,!0),z5=E.createContext({strict:!1}),vS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dd={};for(const t in vS)Dd[t]={isEnabled:e=>vS[t].some(s=>!!e[s])};function cV(t){for(const e in t)Dd[e]={...Dd[e],...t[e]}}const dV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dV.has(t)}let H5=t=>!Jf(t);function uV(t){t&&(H5=e=>e.startsWith("on")?!Jf(e):t(e))}try{uV(require("@emotion/is-prop-valid").default)}catch(t){}function hV(t,e,s){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(H5(i)||s===!0&&Jf(i)||!e&&!Jf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function mV(t){if(typeof Proxy=="undefined")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Zg=E.createContext({});function Bh(t){return typeof t=="string"||Array.isArray(t)}function ex(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ib=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rb=["initial",...Ib];function tx(t){return ex(t.animate)||Rb.some(e=>Bh(t[e]))}function G5(t){return!!(tx(t)||t.variants)}function pV(t,e){if(tx(t)){const{initial:s,animate:r}=t;return{initial:s===!1||Bh(s)?s:void 0,animate:Bh(r)?r:void 0}}return t.inherit!==!1?e:{}}function fV(t){const{initial:e,animate:s}=pV(t,E.useContext(Zg));return E.useMemo(()=>({initial:e,animate:s}),[bS(e),bS(s)])}function bS(t){return Array.isArray(t)?t.join(" "):t}const gV=Symbol.for("motionComponentSymbol");function dd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function xV(t,e,s){return E.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):dd(s)&&(s.current=r))},[e])}const Pb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yV="framerAppearId",W5="data-"+Pb(yV),{schedule:Lb}=U5(queueMicrotask,!1),q5=E.createContext({});function vV(t,e,s,r,i){var a,l;const{visualElement:d}=E.useContext(Zg),u=E.useContext(z5),h=E.useContext(Cb),m=E.useContext(Tb).reducedMotion,g=E.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:d,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const v=g.current,b=E.useContext(q5);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&bV(g.current,s,i,b);const _=E.useRef(!1);E.useInsertionEffect(()=>{v&&_.current&&v.update(s,h)});const N=s[W5],C=E.useRef(!!N&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return O5(()=>{v&&(_.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),Lb.render(v.render),C.current&&v.animationState&&v.animationState.animateChanges())}),E.useEffect(()=>{v&&(!C.current&&v.animationState&&v.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,N)}),C.current=!1))}),v}function bV(t,e,s,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:K5(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&dd(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function K5(t){if(t)return t.options.allowProjection!==!1?t.projection:K5(t.parent)}function _V({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:i}){var a,l;t&&cV(t);function d(h,m){let g;const v={...E.useContext(Tb),...h,layoutId:wV(h)},{isStatic:b}=v,_=fV(h),N=r(h,b);if(!b&&Eb){jV();const C=SV(v);g=C.MeasureLayout,_.visualElement=vV(i,N,v,e,C.ProjectionNode)}return n.jsxs(Zg.Provider,{value:_,children:[g&&_.visualElement?n.jsx(g,{visualElement:_.visualElement,...v}):null,s(i,h,xV(N,_.visualElement,m),N,b,_.visualElement)]})}d.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const u=E.forwardRef(d);return u[gV]=i,u}function wV({layoutId:t}){const e=E.useContext($5).id;return e&&t!==void 0?e+"-"+t:t}function jV(t,e){E.useContext(z5).strict}function SV(t){const{drag:e,layout:s}=Dd;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const NV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Db(t){return typeof t!="string"||t.includes("-")?!1:!!(NV.indexOf(t)>-1||/[A-Z]/u.test(t))}function _S(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function Mb(t,e,s,r){if(typeof e=="function"){const[i,a]=_S(r);e=e(s!==void 0?s:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=_S(r);e=e(s!==void 0?s:t.custom,i,a)}return e}const F0=t=>Array.isArray(t),kV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),CV=t=>F0(t)?t[t.length-1]||0:t,jn=t=>!!(t&&t.getVelocity);function Sf(t){const e=jn(t)?t.get():t;return kV(e)?e.toValue():e}function TV({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},r,i,a){const l={latestValues:EV(r,i,a,t),renderState:e()};return s&&(l.onMount=d=>s({props:r,current:d,...l}),l.onUpdate=d=>s(d)),l}const Q5=t=>(e,s)=>{const r=E.useContext(Zg),i=E.useContext(Cb),a=()=>TV(t,e,r,i);return s?a():kb(a)};function EV(t,e,s,r){const i={},a=r(t,{});for(const v in a)i[v]=Sf(a[v]);let{initial:l,animate:d}=t;const u=tx(t),h=G5(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let m=s?s.initial===!1:!1;m=m||l===!1;const g=m?d:l;if(g&&typeof g!="boolean"&&!ex(g)){const v=Array.isArray(g)?g:[g];for(let b=0;b<v.length;b++){const _=Mb(t,v[b]);if(_){const{transitionEnd:N,transition:C,...R}=_;for(const D in R){let A=R[D];if(Array.isArray(A)){const y=m?A.length-1:0;A=A[y]}A!==null&&(i[D]=A)}for(const D in N)i[D]=N[D]}}}return i}const Xd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fc=new Set(Xd),X5=t=>e=>typeof e=="string"&&e.startsWith(t),Y5=X5("--"),AV=X5("var(--"),Fb=t=>AV(t)?IV.test(t.split("/*")[0].trim()):!1,IV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,J5=(t,e)=>e&&typeof t=="number"?e.transform(t):t,so=(t,e,s)=>s>e?e:s<t?t:s,Yd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$h={...Yd,transform:t=>so(0,1,t)},zp={...Yd,default:1},dm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Bo=dm("deg"),da=dm("%"),wt=dm("px"),RV=dm("vh"),PV=dm("vw"),wS={...da,parse:t=>da.parse(t)/100,transform:t=>da.transform(t*100)},LV={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,backgroundPositionX:wt,backgroundPositionY:wt},DV={rotate:Bo,rotateX:Bo,rotateY:Bo,rotateZ:Bo,scale:zp,scaleX:zp,scaleY:zp,scaleZ:zp,skew:Bo,skewX:Bo,skewY:Bo,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:$h,originX:wS,originY:wS,originZ:wt},jS={...Yd,transform:Math.round},Bb={...LV,...DV,zIndex:jS,size:wt,fillOpacity:$h,strokeOpacity:$h,numOctaves:jS},MV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FV=Xd.length;function BV(t,e,s){let r="",i=!0;for(let a=0;a<FV;a++){const l=Xd[a],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const h=J5(d,Bb[l]);if(!u){i=!1;const m=MV[l]||l;r+=`${m}(${h}) `}s&&(e[l]=h)}}return r=r.trim(),s?r=s(e,i?"":r):i&&(r="none"),r}function $b(t,e,s){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const u in e){const h=e[u];if(fc.has(u)){l=!0;continue}else if(Y5(u)){i[u]=h;continue}else{const m=J5(h,Bb[u]);u.startsWith("origin")?(d=!0,a[u]=m):r[u]=m}}if(e.transform||(l||s?r.transform=BV(e,t.transform,s):r.transform&&(r.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:m=0}=a;r.transformOrigin=`${u} ${h} ${m}`}}const $V={offset:"stroke-dashoffset",array:"stroke-dasharray"},OV={offset:"strokeDashoffset",array:"strokeDasharray"};function VV(t,e,s=1,r=0,i=!0){t.pathLength=1;const a=i?$V:OV;t[a.offset]=wt.transform(-r);const l=wt.transform(e),d=wt.transform(s);t[a.array]=`${l} ${d}`}function SS(t,e,s){return typeof t=="string"?t:wt.transform(e+s*t)}function UV(t,e,s){const r=SS(e,t.x,t.width),i=SS(s,t.y,t.height);return`${r} ${i}`}function Ob(t,{attrX:e,attrY:s,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:d=1,pathOffset:u=0,...h},m,g){if($b(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:b,dimensions:_}=t;v.transform&&(_&&(b.transform=v.transform),delete v.transform),_&&(i!==void 0||a!==void 0||b.transform)&&(b.transformOrigin=UV(_,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(v.x=e),s!==void 0&&(v.y=s),r!==void 0&&(v.scale=r),l!==void 0&&VV(v,l,d,u,!1)}const Vb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Z5=()=>({...Vb(),attrs:{}}),Ub=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eE(t,{style:e,vars:s},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in s)t.style.setProperty(a,s[a])}const tE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sE(t,e,s,r){eE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(tE.has(i)?i:Pb(i),e.attrs[i])}const Zf={};function zV(t){Object.assign(Zf,t)}function nE(t,{layout:e,layoutId:s}){return fc.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Zf[t]||t==="opacity")}function zb(t,e,s){var r;const{style:i}=t,a={};for(const l in i)(jn(i[l])||e.style&&jn(e.style[l])||nE(l,t)||((r=s==null?void 0:s.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=i[l]);return a}function rE(t,e,s){const r=zb(t,e,s);for(const i in t)if(jn(t[i])||jn(e[i])){const a=Xd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function HV(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(s){e.dimensions={x:0,y:0,width:0,height:0}}}const NS=["x","y","width","height","cx","cy","r"],GV={useVisualState:Q5({scrapeMotionValuesFromProps:rE,createRenderState:Z5,onUpdate:({props:t,prevProps:e,current:s,renderState:r,latestValues:i})=>{if(!s)return;let a=!!t.drag;if(!a){for(const d in i)if(fc.has(d)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let d=0;d<NS.length;d++){const u=NS[d];t[u]!==e[u]&&(l=!0)}l&&js.read(()=>{HV(s,r),js.render(()=>{Ob(r,i,Ub(s.tagName),t.transformTemplate),sE(s,r)})})}})},WV={useVisualState:Q5({scrapeMotionValuesFromProps:zb,createRenderState:Vb})};function iE(t,e,s){for(const r in e)!jn(e[r])&&!nE(r,s)&&(t[r]=e[r])}function qV({transformTemplate:t},e){return E.useMemo(()=>{const s=Vb();return $b(s,e,t),Object.assign({},s.vars,s.style)},[e])}function KV(t,e){const s=t.style||{},r={};return iE(r,s,t),Object.assign(r,qV(t,e)),r}function QV(t,e){const s={},r=KV(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}function XV(t,e,s,r){const i=E.useMemo(()=>{const a=Z5();return Ob(a,e,Ub(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};iE(a,t.style,t),i.style={...a,...i.style}}return i}function YV(t=!1){return(s,r,i,{latestValues:a},l)=>{const u=(Db(s)?XV:QV)(r,a,l,s),h=hV(r,typeof s=="string",t),m=s!==E.Fragment?{...h,...u,ref:i}:{},{children:g}=r,v=E.useMemo(()=>jn(g)?g.get():g,[g]);return E.createElement(s,{...m,children:v})}}function JV(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...Db(r)?GV:WV,preloadedFeatures:t,useRender:YV(i),createVisualElement:e,Component:r};return _V(l)}}function aE(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}function sx(t,e,s){const r=t.getProps();return Mb(r,e,s!==void 0?s:r.custom,t)}const ZV=Ab(()=>window.ScrollTimeline!==void 0);class eU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=s}attachTimeline(e,s){const r=this.animations.map(i=>{if(ZV()&&i.attachTimeline)return i.attachTimeline(e);if(typeof s=="function")return s(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class oE extends eU{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function Hb(t,e){return t?t[e]||t.default||t:void 0}const eg=2e4;function Gb(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<eg;)e+=s,r=t.next(e);return e>=eg?1/0:e}function tU(t,e=100,s){const r=s({...t,keyframes:[0,e]}),i=Math.min(Gb(r),eg);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:ca(i)}}function nx(t){return typeof t=="function"}function kS(t,e){t.timeline=e,t.onfinish=null}const Wb=t=>Array.isArray(t)&&typeof t[0]=="number",sU={linearEasing:void 0};function nU(t,e){const s=Ab(t);return()=>{var r;return(r=sU[e])!==null&&r!==void 0?r:s()}}const tg=nU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),lE=(t,e,s=10)=>{let r="";const i=Math.max(Math.round(e/s),2);for(let a=0;a<i;a++)r+=t(cc(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function cE(t){return!!(typeof t=="function"&&tg()||!t||typeof t=="string"&&(t in B0||tg())||Wb(t)||Array.isArray(t)&&t.every(cE))}const Zu=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,B0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zu([0,.65,.55,1]),circOut:Zu([.55,0,1,.45]),backIn:Zu([.31,.01,.66,-.59]),backOut:Zu([.33,1.53,.69,.99])};function dE(t,e){if(t)return typeof t=="function"&&tg()?lE(t,e):Wb(t)?Zu(t):Array.isArray(t)?t.map(s=>dE(s,e)||B0.easeOut):B0[t]}const Ii={x:!1,y:!1};function uE(){return Ii.x||Ii.y}function hE(t,e,s){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=s==null?void 0:s[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function mE(t,e){const s=hE(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[s,i,()=>r.abort()]}function CS(t){return e=>{e.pointerType==="touch"||uE()||t(e)}}function rU(t,e,s={}){const[r,i,a]=mE(t,s),l=CS(d=>{const{target:u}=d,h=e(d);if(typeof h!="function"||!u)return;const m=CS(g=>{h(g),u.removeEventListener("pointerleave",m)});u.addEventListener("pointerleave",m,i)});return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const pE=(t,e)=>e?t===e?!0:pE(t,e.parentElement):!1,qb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aU(t){return iU.has(t.tagName)||t.tabIndex!==-1}const eh=new WeakSet;function TS(t){return e=>{e.key==="Enter"&&t(e)}}function iv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const oU=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=TS(()=>{if(eh.has(s))return;iv(s,"down");const i=TS(()=>{iv(s,"up")}),a=()=>iv(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",a,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function ES(t){return qb(t)&&!uE()}function lU(t,e,s={}){const[r,i,a]=mE(t,s),l=d=>{const u=d.currentTarget;if(!ES(d)||eh.has(u))return;eh.add(u);const h=e(d),m=(b,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),!(!ES(b)||!eh.has(u))&&(eh.delete(u),typeof h=="function"&&h(b,{success:_}))},g=b=>{m(b,s.useGlobalTarget||pE(u,b.target))},v=b=>{m(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return r.forEach(d=>{!aU(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(s.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),d.addEventListener("focus",h=>oU(h,i),i)}),a}function cU(t){return t==="x"||t==="y"?Ii[t]?null:(Ii[t]=!0,()=>{Ii[t]=!1}):Ii.x||Ii.y?null:(Ii.x=Ii.y=!0,()=>{Ii.x=Ii.y=!1})}const fE=new Set(["width","height","top","left","right","bottom",...Xd]);let Nf;function dU(){Nf=void 0}const ua={now:()=>(Nf===void 0&&ua.set(Ln.isProcessing||aV.useManualTiming?Ln.timestamp:performance.now()),Nf),set:t=>{Nf=t,queueMicrotask(dU)}};function Kb(t,e){t.indexOf(e)===-1&&t.push(e)}function rx(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Qb{constructor(){this.subscriptions=[]}add(e){return Kb(this.subscriptions,e),()=>rx(this.subscriptions,e)}notify(e,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function gE(t,e){return e?t*(1e3/e):0}const AS=30,uU=t=>!isNaN(parseFloat(t)),hh={current:void 0};class hU{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=ua.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=ua.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=uU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Qb);const r=this.events[e].add(s);return e==="change"?()=>{r(),js.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return hh.current&&hh.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ua.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>AS)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,AS);return gE(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Md(t,e){return new hU(t,e)}function mU(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Md(s))}function pU(t,e){const s=sx(t,e);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const l in a){const d=CV(a[l]);mU(t,l,d)}}function fU(t){return!!(jn(t)&&t.add)}function $0(t,e){const s=t.getValue("willChange");if(fU(s))return s.add(e)}function xE(t){return t.props[W5]}const yE=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,gU=1e-7,xU=12;function yU(t,e,s,r,i){let a,l,d=0;do l=e+(s-e)/2,a=yE(l,r,i)-t,a>0?s=l:e=l;while(Math.abs(a)>gU&&++d<xU);return l}function um(t,e,s,r){if(t===e&&s===r)return Qr;const i=a=>yU(a,0,1,t,s);return a=>a===0||a===1?a:yE(i(a),e,r)}const vE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bE=t=>e=>1-t(1-e),_E=um(.33,1.53,.69,.99),Xb=bE(_E),wE=vE(Xb),jE=t=>(t*=2)<1?.5*Xb(t):.5*(2-Math.pow(2,-10*(t-1))),Yb=t=>1-Math.sin(Math.acos(t)),SE=bE(Yb),NE=vE(Yb),kE=t=>/^0[^.\s]+$/u.test(t);function vU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||kE(t):!0}const mh=t=>Math.round(t*1e5)/1e5,Jb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bU(t){return t==null}const _U=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zb=(t,e)=>s=>!!(typeof s=="string"&&_U.test(s)&&s.startsWith(t)||e&&!bU(s)&&Object.prototype.hasOwnProperty.call(s,e)),CE=(t,e,s)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(Jb);return{[t]:parseFloat(i),[e]:parseFloat(a),[s]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},wU=t=>so(0,255,t),av={...Yd,transform:t=>Math.round(wU(t))},Xl={test:Zb("rgb","red"),parse:CE("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+av.transform(t)+", "+av.transform(e)+", "+av.transform(s)+", "+mh($h.transform(r))+")"};function jU(t){let e="",s="",r="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const O0={test:Zb("#"),parse:jU,transform:Xl.transform},ud={test:Zb("hsl","hue"),parse:CE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+da.transform(mh(e))+", "+da.transform(mh(s))+", "+mh($h.transform(r))+")"},Xn={test:t=>Xl.test(t)||O0.test(t)||ud.test(t),parse:t=>Xl.test(t)?Xl.parse(t):ud.test(t)?ud.parse(t):O0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xl.transform(t):ud.transform(t)},SU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NU(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Jb))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(SU))===null||s===void 0?void 0:s.length)||0)>0}const TE="number",EE="color",kU="var",CU="var(",IS="${}",TU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Oh(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(TU,u=>(Xn.test(u)?(r.color.push(a),i.push(EE),s.push(Xn.parse(u))):u.startsWith(CU)?(r.var.push(a),i.push(kU),s.push(u)):(r.number.push(a),i.push(TE),s.push(parseFloat(u))),++a,IS)).split(IS);return{values:s,split:d,indexes:r,types:i}}function AE(t){return Oh(t).values}function IE(t){const{split:e,types:s}=Oh(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=s[l];d===TE?a+=mh(i[l]):d===EE?a+=Xn.transform(i[l]):a+=i[l]}return a}}const EU=t=>typeof t=="number"?0:t;function AU(t){const e=AE(t);return IE(t)(e.map(EU))}const rl={test:NU,parse:AE,createTransformer:IE,getAnimatableNone:AU},IU=new Set(["brightness","contrast","saturate","opacity"]);function RU(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(Jb)||[];if(!r)return t;const i=s.replace(r,"");let a=IU.has(e)?1:0;return r!==s&&(a*=100),e+"("+a+i+")"}const PU=/\b([a-z-]*)\(.*?\)/gu,V0={...rl,getAnimatableNone:t=>{const e=t.match(PU);return e?e.map(RU).join(" "):t}},LU={...Bb,color:Xn,backgroundColor:Xn,outlineColor:Xn,fill:Xn,stroke:Xn,borderColor:Xn,borderTopColor:Xn,borderRightColor:Xn,borderBottomColor:Xn,borderLeftColor:Xn,filter:V0,WebkitFilter:V0},e_=t=>LU[t];function RE(t,e){let s=e_(t);return s!==V0&&(s=rl),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const DU=new Set(["auto","none","0"]);function MU(t,e,s){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!DU.has(a)&&Oh(a).values.length&&(i=t[r]),r++}if(i&&s)for(const a of e)t[a]=RE(s,i)}const RS=t=>t===Yd||t===wt,PS=(t,e)=>parseFloat(t.split(", ")[e]),LS=(t,e)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return PS(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?PS(a[1],t):0}},FU=new Set(["x","y","z"]),BU=Xd.filter(t=>!FU.has(t));function $U(t){const e=[];return BU.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const Fd={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:LS(4,13),y:LS(5,14)};Fd.translateX=Fd.x;Fd.translateY=Fd.y;const ec=new Set;let U0=!1,z0=!1;function PE(){if(z0){const t=Array.from(ec).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const i=$U(r);i.length&&(s.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))===null||d===void 0||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}z0=!1,U0=!1,ec.forEach(t=>t.complete()),ec.clear()}function LE(){ec.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(z0=!0)})}function OU(){LE(),PE()}class t_{constructor(e,s,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ec.add(this),U0||(U0=!0,js.read(LE),js.resolveKeyframes(PE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&s){const u=r.readValue(s,d);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=d),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ec.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ec.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const DE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),VU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UU(t){const e=VU.exec(t);if(!e)return[,];const[,s,r,i]=e;return[`--${s!=null?s:r}`,i]}function ME(t,e,s=1){const[r,i]=UU(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return DE(l)?parseFloat(l):l}return Fb(i)?ME(i,e,s+1):i}const FE=t=>e=>e.test(t),zU={test:t=>t==="auto",parse:t=>t},BE=[Yd,wt,da,Bo,PV,RV,zU],DS=t=>BE.find(FE(t));class $E extends t_{constructor(e,s,r,i,a){super(e,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),Fb(h))){const m=ME(h,s.current);m!==void 0&&(e[u]=m),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!fE.has(r)||e.length!==2)return;const[i,a]=e,l=DS(i),d=DS(a);if(l!==d)if(RS(l)&&RS(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let i=0;i<e.length;i++)vU(e[i])&&r.push(i);r.length&&MU(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:s,name:r,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const a=s.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,d=i[l];i[l]=Fd[r](s.measureViewportBox(),window.getComputedStyle(s.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{s.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const MS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(rl.test(t)||t==="0")&&!t.startsWith("url("));function HU(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function GU(t,e,s,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=MS(i,e),d=MS(a,e);return!l||!d?!1:HU(t)||(s==="spring"||nx(s))&&r}const WU=t=>t!==null;function ix(t,{repeat:e,repeatType:s="loop"},r){const i=t.filter(WU),a=e&&s!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const qU=40;class OE{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ua.now(),this.options={autoplay:e,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>qU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&OU(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=ua.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:d,onUpdate:u,isGenerator:h}=this.options;if(!h&&!GU(e,r,i,a))if(l)this.options.duration=0;else{u&&u(ix(e,this.options,s)),d&&d(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,s);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...m},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Is=(t,e,s)=>t+(e-t)*s;function ov(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function KU({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let i=0,a=0,l=0;if(!e)i=a=l=s;else{const d=s<.5?s*(1+e):s+e-s*e,u=2*s-d;i=ov(u,d,t+1/3),a=ov(u,d,t),l=ov(u,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function sg(t,e){return s=>s>0?e:t}const lv=(t,e,s)=>{const r=t*t,i=s*(e*e-r)+r;return i<0?0:Math.sqrt(i)},QU=[O0,Xl,ud],XU=t=>QU.find(e=>e.test(t));function FS(t){const e=XU(t);if(!e)return!1;let s=e.parse(t);return e===ud&&(s=KU(s)),s}const BS=(t,e)=>{const s=FS(t),r=FS(e);if(!s||!r)return sg(t,e);const i={...s};return a=>(i.red=lv(s.red,r.red,a),i.green=lv(s.green,r.green,a),i.blue=lv(s.blue,r.blue,a),i.alpha=Is(s.alpha,r.alpha,a),Xl.transform(i))},YU=(t,e)=>s=>e(t(s)),hm=(...t)=>t.reduce(YU),H0=new Set(["none","hidden"]);function JU(t,e){return H0.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function ZU(t,e){return s=>Is(t,e,s)}function s_(t){return typeof t=="number"?ZU:typeof t=="string"?Fb(t)?sg:Xn.test(t)?BS:sz:Array.isArray(t)?VE:typeof t=="object"?Xn.test(t)?BS:ez:sg}function VE(t,e){const s=[...t],r=s.length,i=t.map((a,l)=>s_(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)s[l]=i[l](a);return s}}function ez(t,e){const s={...t,...e},r={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(r[i]=s_(t[i])(t[i],e[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function tz(t,e){var s;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],d=t.indexes[l][i[l]],u=(s=t.values[d])!==null&&s!==void 0?s:0;r[a]=u,i[l]++}return r}const sz=(t,e)=>{const s=rl.createTransformer(e),r=Oh(t),i=Oh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?H0.has(t)&&!i.values.length||H0.has(e)&&!r.values.length?JU(t,e):hm(VE(tz(r,i),i.values),s):sg(t,e)};function UE(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Is(t,e,s):s_(t)(t,e)}const nz=5;function zE(t,e,s){const r=Math.max(e-nz,0);return gE(s-t(r),e-r)}const zs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cv=.001;function rz({duration:t=zs.duration,bounce:e=zs.bounce,velocity:s=zs.velocity,mass:r=zs.mass}){let i,a,l=1-e;l=so(zs.minDamping,zs.maxDamping,l),t=so(zs.minDuration,zs.maxDuration,ca(t)),l<1?(i=h=>{const m=h*l,g=m*t,v=m-s,b=G0(h,l),_=Math.exp(-g);return cv-v/b*_},a=h=>{const g=h*l*t,v=g*s+s,b=Math.pow(l,2)*Math.pow(h,2)*t,_=Math.exp(-g),N=G0(Math.pow(h,2),l);return(-i(h)+cv>0?-1:1)*((v-b)*_)/N}):(i=h=>{const m=Math.exp(-h*t),g=(h-s)*t+1;return-cv+m*g},a=h=>{const m=Math.exp(-h*t),g=(s-h)*(t*t);return m*g});const d=5/t,u=az(i,a,d);if(t=la(t),isNaN(u))return{stiffness:zs.stiffness,damping:zs.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const iz=12;function az(t,e,s){let r=s;for(let i=1;i<iz;i++)r=r-t(r)/e(r);return r}function G0(t,e){return t*Math.sqrt(1-e*e)}const oz=["duration","bounce"],lz=["stiffness","damping","mass"];function $S(t,e){return e.some(s=>t[s]!==void 0)}function cz(t){let e={velocity:zs.velocity,stiffness:zs.stiffness,damping:zs.damping,mass:zs.mass,isResolvedFromDuration:!1,...t};if(!$S(t,lz)&&$S(t,oz))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*so(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:zs.mass,stiffness:i,damping:a}}else{const s=rz(t);e={...e,...s,mass:zs.mass},e.isResolvedFromDuration=!0}return e}function n_(t=zs.visualDuration,e=zs.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],d={done:!1,value:a},{stiffness:u,damping:h,mass:m,duration:g,velocity:v,isResolvedFromDuration:b}=cz({...s,velocity:-ca(s.velocity||0)}),_=v||0,N=h/(2*Math.sqrt(u*m)),C=l-a,R=ca(Math.sqrt(u/m)),D=Math.abs(C)<5;r||(r=D?zs.restSpeed.granular:zs.restSpeed.default),i||(i=D?zs.restDelta.granular:zs.restDelta.default);let A;if(N<1){const w=G0(R,N);A=M=>{const k=Math.exp(-N*R*M);return l-k*((_+N*R*C)/w*Math.sin(w*M)+C*Math.cos(w*M))}}else if(N===1)A=w=>l-Math.exp(-R*w)*(C+(_+R*C)*w);else{const w=R*Math.sqrt(N*N-1);A=M=>{const k=Math.exp(-N*R*M),S=Math.min(w*M,300);return l-k*((_+N*R*C)*Math.sinh(S)+w*C*Math.cosh(S))/w}}const y={calculatedDuration:b&&g||null,next:w=>{const M=A(w);if(b)d.done=w>=g;else{let k=0;N<1&&(k=w===0?la(_):zE(A,w,M));const S=Math.abs(k)<=r,T=Math.abs(l-M)<=i;d.done=S&&T}return d.value=d.done?l:M,d},toString:()=>{const w=Math.min(Gb(y),eg),M=lE(k=>y.next(w*k).value,w,30);return w+"ms "+M}};return y}function OS({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},b=S=>d!==void 0&&S<d||u!==void 0&&S>u,_=S=>d===void 0?u:u===void 0||Math.abs(d-S)<Math.abs(u-S)?d:u;let N=s*e;const C=g+N,R=l===void 0?C:l(C);R!==C&&(N=R-g);const D=S=>-N*Math.exp(-S/r),A=S=>R+D(S),y=S=>{const T=D(S),F=A(S);v.done=Math.abs(T)<=h,v.value=v.done?R:F};let w,M;const k=S=>{b(v.value)&&(w=S,M=n_({keyframes:[v.value,_(v.value)],velocity:zE(A,S,v.value),damping:i,stiffness:a,restDelta:h,restSpeed:m}))};return k(0),{calculatedDuration:null,next:S=>{let T=!1;return!M&&w===void 0&&(T=!0,y(S),k(S)),w!==void 0&&S>=w?M.next(S-w):(!T&&y(S),v)}}}const dz=um(.42,0,1,1),uz=um(0,0,.58,1),HE=um(.42,0,.58,1),GE=t=>Array.isArray(t)&&typeof t[0]!="number",hz={linear:Qr,easeIn:dz,easeInOut:HE,easeOut:uz,circIn:Yb,circInOut:NE,circOut:SE,backIn:Xb,backInOut:wE,backOut:_E,anticipate:jE},VS=t=>{if(Wb(t)){V5(t.length===4);const[e,s,r,i]=t;return um(e,s,r,i)}else if(typeof t=="string")return hz[t];return t};function mz(t,e,s){const r=[],i=s||UE,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||Qr:e;d=hm(u,d)}r.push(d)}return r}function WE(t,e,{clamp:s=!0,ease:r,mixer:i}={}){const a=t.length;if(V5(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=mz(e,r,i),u=d.length,h=m=>{if(l&&m<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const v=cc(t[g],t[g+1],m);return d[g](v)};return s?m=>h(so(t[0],t[a-1],m)):h}function qE(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const i=cc(0,e,r);t.push(Is(s,1,i))}}function KE(t){const e=[0];return qE(e,t.length-1),e}function pz(t,e){return t.map(s=>s*e)}function fz(t,e){return t.map(()=>e||HE).splice(0,t.length-1)}function ng({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const i=GE(r)?r.map(VS):VS(r),a={done:!1,value:e[0]},l=pz(s&&s.length===e.length?s:KE(e),t),d=WE(l,e,{ease:Array.isArray(i)?i:fz(e,i)});return{calculatedDuration:t,next:u=>(a.value=d(u),a.done=u>=t,a)}}const gz=t=>{const e=({timestamp:s})=>t(s);return{start:()=>js.update(e,!0),stop:()=>to(e),now:()=>Ln.isProcessing?Ln.timestamp:ua.now()}},xz={decay:OS,inertia:OS,tween:ng,keyframes:ng,spring:n_},yz=t=>t/100;class r_ extends OE{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:s,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||t_,d=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new l(a,d,s,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,d=nx(s)?s:xz[s]||ng;let u,h;d!==ng&&typeof e[0]!="number"&&(u=hm(yz,UE(e[0],e[1])),e=[0,100]);const m=d({...this.options,keyframes:e});a==="mirror"&&(h=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=Gb(m));const{calculatedDuration:g}=m,v=g+i,b=v*(r+1)-i;return{generator:m,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:v,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:u,calculatedDuration:h,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:v,repeat:b,repeatType:_,repeatDelay:N,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-v*(this.speed>=0?1:-1),D=this.speed>=0?R<0:R>m;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let A=this.currentTime,y=a;if(b){const S=Math.min(this.currentTime,m)/g;let T=Math.floor(S),F=S%1;!F&&S>=1&&(F=1),F===1&&T--,T=Math.min(T,b+1),!!(T%2)&&(_==="reverse"?(F=1-F,N&&(F-=N/g)):_==="mirror"&&(y=l)),A=so(0,1,F)*g}const w=D?{done:!1,value:u[0]}:y.next(A);d&&(w.value=d(w.value));let{done:M}=w;!D&&h!==null&&(M=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&i!==void 0&&(w.value=ix(u,this.options,i)),C&&C(w.value),k&&this.finish(),w}get duration(){const{resolved:e}=this;return e?ca(e.calculatedDuration):0}get time(){return ca(this.currentTime)}set time(e){e=la(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=ca(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=gz,onPlay:s,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),s&&s();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const vz=new Set(["opacity","clipPath","filter","transform"]);function bz(t,e,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeInOut",times:u}={}){const h={[e]:s};u&&(h.offset=u);const m=dE(d,i);return Array.isArray(m)&&(h.easing=m),t.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const _z=Ab(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rg=10,wz=2e4;function jz(t){return nx(t.type)||t.type==="spring"||!cE(t.ease)}function Sz(t,e){const s=new r_({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<wz;)r=s.sample(a),i.push(r.value),a+=rg;return{times:void 0,keyframes:i,duration:a-rg,ease:"linear"}}const QE={anticipate:jE,backInOut:wE,circInOut:NE};function Nz(t){return t in QE}class US extends OE{constructor(e){super(e);const{name:s,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new $E(a,(l,d)=>this.onKeyframesResolved(l,d),s,r,i),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:r=300,times:i,ease:a,type:l,motionValue:d,name:u,startTime:h}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&tg()&&Nz(a)&&(a=QE[a]),jz(this.options)){const{onComplete:g,onUpdate:v,motionValue:b,element:_,...N}=this.options,C=Sz(e,N);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,i=C.times,a=C.ease,l="keyframes"}const m=bz(d.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return m.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?(kS(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;d.set(ix(e,this.options,s)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return ca(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return ca(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.currentTime=la(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return Qr;const{animation:r}=s;kS(r,e)}return Qr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:r,duration:i,type:a,ease:l,times:d}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:m,onComplete:g,element:v,...b}=this.options,_=new r_({...b,keyframes:r,duration:i,type:a,ease:l,times:d,isGenerator:!0}),N=la(this.time);h.setWithVelocity(_.sample(N-rg).value,_.sample(N).value,rg)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:r,repeatDelay:i,repeatType:a,damping:l,type:d}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=s.owner.getProps();return _z()&&r&&vz.has(r)&&!u&&!h&&!i&&a!=="mirror"&&l!==0&&d!=="inertia"}}const kz={type:"spring",stiffness:500,damping:25,restSpeed:10},Cz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Tz={type:"keyframes",duration:.8},Ez={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Az=(t,{keyframes:e})=>e.length>2?Tz:fc.has(t)?t.startsWith("scale")?Cz(e[1]):kz:Ez;function Iz({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const i_=(t,e,s,r={},i,a)=>l=>{const d=Hb(r,t)||{},u=d.delay||r.delay||0;let{elapsed:h=0}=r;h=h-la(u);let m={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:v=>{e.set(v),d.onUpdate&&d.onUpdate(v)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};Iz(d)||(m={...m,...Az(t,m)}),m.duration&&(m.duration=la(m.duration)),m.repeatDelay&&(m.repeatDelay=la(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const v=ix(m.keyframes,d);if(v!==void 0)return js.update(()=>{m.onUpdate(v),m.onComplete()}),new oE([])}return!a&&US.supports(m)?new US(m):new r_(m)};function Rz({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function a_(t,e,{delay:s=0,transitionOverride:r,type:i}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:d,...u}=e;r&&(l=r);const h=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const v=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),b=u[g];if(b===void 0||m&&Rz(m,g))continue;const _={delay:s,...Hb(l||{},g)};let N=!1;if(window.MotionHandoffAnimation){const R=xE(t);if(R){const D=window.MotionHandoffAnimation(R,g,js);D!==null&&(_.startTime=D,N=!0)}}$0(t,g),v.start(i_(g,v,b,t.shouldReduceMotion&&fE.has(g)?{type:!1}:_,t,N));const C=v.animation;C&&h.push(C)}return d&&Promise.all(h).then(()=>{js.update(()=>{d&&pU(t,d)})}),h}function W0(t,e,s={}){var r;const i=sx(t,e,s.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(a=s.transitionOverride);const l=i?()=>Promise.all(a_(t,i,s)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:v}=a;return Pz(t,e,m+h,g,v,s)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,m]=u==="beforeChildren"?[l,d]:[d,l];return h().then(()=>m())}else return Promise.all([l(),d(s.delay)])}function Pz(t,e,s=0,r=0,i=1,a){const l=[],d=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>d-h*r;return Array.from(t.variantChildren).sort(Lz).forEach((h,m)=>{h.notify("AnimationStart",e),l.push(W0(h,e,{...a,delay:s+u(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function Lz(t,e){return t.sortNodePosition(e)}function Dz(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>W0(t,a,s));r=Promise.all(i)}else if(typeof e=="string")r=W0(t,e,s);else{const i=typeof e=="function"?sx(t,e,s.custom):e;r=Promise.all(a_(t,i,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Mz=Rb.length;function XE(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?XE(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Mz;s++){const r=Rb[s],i=t.props[r];(Bh(i)||i===!1)&&(e[r]=i)}return e}const Fz=[...Ib].reverse(),Bz=Ib.length;function $z(t){return e=>Promise.all(e.map(({animation:s,options:r})=>Dz(t,s,r)))}function Oz(t){let e=$z(t),s=zS(),r=!0;const i=u=>(h,m)=>{var g;const v=sx(t,m,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(v){const{transition:b,transitionEnd:_,...N}=v;h={...h,...N,..._}}return h};function a(u){e=u(t)}function l(u){const{props:h}=t,m=XE(t.parent)||{},g=[],v=new Set;let b={},_=1/0;for(let C=0;C<Bz;C++){const R=Fz[C],D=s[R],A=h[R]!==void 0?h[R]:m[R],y=Bh(A),w=R===u?D.isActive:null;w===!1&&(_=C);let M=A===m[R]&&A!==h[R]&&y;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),D.protectedKeys={...b},!D.isActive&&w===null||!A&&!D.prevProp||ex(A)||typeof A=="boolean")continue;const k=Vz(D.prevProp,A);let S=k||R===u&&D.isActive&&!M&&y||C>_&&y,T=!1;const F=Array.isArray(A)?A:[A];let I=F.reduce(i(R),{});w===!1&&(I={});const{prevResolvedValues:B={}}=D,$={...B,...I},H=K=>{S=!0,v.has(K)&&(T=!0,v.delete(K)),D.needsAnimating[K]=!0;const q=t.getValue(K);q&&(q.liveStyle=!1)};for(const K in $){const q=I[K],se=B[K];if(b.hasOwnProperty(K))continue;let re=!1;F0(q)&&F0(se)?re=!aE(q,se):re=q!==se,re?q!=null?H(K):v.add(K):q!==void 0&&v.has(K)?H(K):D.protectedKeys[K]=!0}D.prevProp=A,D.prevResolvedValues=I,D.isActive&&(b={...b,...I}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(M&&k)||T)&&g.push(...F.map(K=>({animation:K,options:{type:R}})))}if(v.size){const C={};v.forEach(R=>{const D=t.getBaseTarget(R),A=t.getValue(R);A&&(A.liveStyle=!0),C[R]=D!=null?D:null}),g.push({animation:C})}let N=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(g):Promise.resolve()}function d(u,h){var m;if(s[u].isActive===h)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(v=>{var b;return(b=v.animationState)===null||b===void 0?void 0:b.setActive(u,h)}),s[u].isActive=h;const g=l(u);for(const v in s)s[v].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>s,reset:()=>{s=zS(),r=!0}}}function Vz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aE(e,t):!1}function Rl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zS(){return{animate:Rl(!0),whileInView:Rl(),whileHover:Rl(),whileTap:Rl(),whileDrag:Rl(),whileFocus:Rl(),exit:Rl()}}class ll{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Uz extends ll{constructor(e){super(e),e.animationState||(e.animationState=Oz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ex(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let zz=0;class Hz extends ll{constructor(){super(...arguments),this.id=zz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Gz={animation:{Feature:Uz},exit:{Feature:Hz}};function Vh(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function mm(t){return{point:{x:t.pageX,y:t.pageY}}}const Wz=t=>e=>qb(e)&&t(e,mm(e));function ph(t,e,s,r){return Vh(t,e,Wz(s),r)}const HS=(t,e)=>Math.abs(t-e);function qz(t,e){const s=HS(t.x,e.x),r=HS(t.y,e.y);return Math.sqrt(s**2+r**2)}class YE{constructor(e,s,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=uv(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=qz(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:_}=g,{timestamp:N}=Ln;this.history.push({..._,timestamp:N});const{onStart:C,onMove:R}=this.handlers;v||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=dv(v,this.transformPagePoint),js.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:_,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=uv(g.type==="pointercancel"?this.lastMoveEventInfo:dv(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,C),_&&_(g,C)},!qb(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.contextWindow=i||window;const l=mm(e),d=dv(l,this.transformPagePoint),{point:u}=d,{timestamp:h}=Ln;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=s;m&&m(e,uv(d,this.history)),this.removeListeners=hm(ph(this.contextWindow,"pointermove",this.handlePointerMove),ph(this.contextWindow,"pointerup",this.handlePointerUp),ph(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),to(this.updatePoint)}}function dv(t,e){return e?{point:e(t.point)}:t}function GS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function uv({point:t},e){return{point:t,delta:GS(t,JE(e)),offset:GS(t,Kz(e)),velocity:Qz(e,.1)}}function Kz(t){return t[0]}function JE(t){return t[t.length-1]}function Qz(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const i=JE(t);for(;s>=0&&(r=t[s],!(i.timestamp-r.timestamp>la(e)));)s--;if(!r)return{x:0,y:0};const a=ca(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const ZE=1e-4,Xz=1-ZE,Yz=1+ZE,eA=.01,Jz=0-eA,Zz=0+eA;function Yr(t){return t.max-t.min}function eH(t,e,s){return Math.abs(t-e)<=s}function WS(t,e,s,r=.5){t.origin=r,t.originPoint=Is(e.min,e.max,t.origin),t.scale=Yr(s)/Yr(e),t.translate=Is(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Xz&&t.scale<=Yz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Jz&&t.translate<=Zz||isNaN(t.translate))&&(t.translate=0)}function fh(t,e,s,r){WS(t.x,e.x,s.x,r?r.originX:void 0),WS(t.y,e.y,s.y,r?r.originY:void 0)}function qS(t,e,s){t.min=s.min+e.min,t.max=t.min+Yr(e)}function tH(t,e,s){qS(t.x,e.x,s.x),qS(t.y,e.y,s.y)}function KS(t,e,s){t.min=e.min-s.min,t.max=t.min+Yr(e)}function gh(t,e,s){KS(t.x,e.x,s.x),KS(t.y,e.y,s.y)}function sH(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?Is(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?Is(s,t,r.max):Math.min(t,s)),t}function QS(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function nH(t,{top:e,left:s,bottom:r,right:i}){return{x:QS(t.x,s,i),y:QS(t.y,e,r)}}function XS(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function rH(t,e){return{x:XS(t.x,e.x),y:XS(t.y,e.y)}}function iH(t,e){let s=.5;const r=Yr(t),i=Yr(e);return i>r?s=cc(e.min,e.max-r,t.min):r>i&&(s=cc(t.min,t.max-i,e.min)),so(0,1,s)}function aH(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const q0=.35;function oH(t=q0){return t===!1?t=0:t===!0&&(t=q0),{x:YS(t,"left","right"),y:YS(t,"top","bottom")}}function YS(t,e,s){return{min:JS(t,e),max:JS(t,s)}}function JS(t,e){return typeof t=="number"?t:t[e]||0}const ZS=()=>({translate:0,scale:1,origin:0,originPoint:0}),hd=()=>({x:ZS(),y:ZS()}),eN=()=>({min:0,max:0}),Us=()=>({x:eN(),y:eN()});function ci(t){return[t("x"),t("y")]}function tA({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function lH({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cH(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function hv(t){return t===void 0||t===1}function K0({scale:t,scaleX:e,scaleY:s}){return!hv(t)||!hv(e)||!hv(s)}function Hl(t){return K0(t)||sA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function sA(t){return tN(t.x)||tN(t.y)}function tN(t){return t&&t!=="0%"}function ig(t,e,s){const r=t-s,i=e*r;return s+i}function sN(t,e,s,r,i){return i!==void 0&&(t=ig(t,i,r)),ig(t,s,r)+e}function Q0(t,e=0,s=1,r,i){t.min=sN(t.min,e,s,r,i),t.max=sN(t.max,e,s,r,i)}function nA(t,{x:e,y:s}){Q0(t.x,e.translate,e.scale,e.originPoint),Q0(t.y,s.translate,s.scale,s.originPoint)}const nN=.999999999999,rN=1.0000000000001;function dH(t,e,s,r=!1){const i=s.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=s[d],l=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&pd(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,nA(t,l)),r&&Hl(a.latestValues)&&pd(t,a.latestValues))}e.x<rN&&e.x>nN&&(e.x=1),e.y<rN&&e.y>nN&&(e.y=1)}function md(t,e){t.min=t.min+e,t.max=t.max+e}function iN(t,e,s,r,i=.5){const a=Is(t.min,t.max,i);Q0(t,e,s,a,r)}function pd(t,e){iN(t.x,e.x,e.scaleX,e.scale,e.originX),iN(t.y,e.y,e.scaleY,e.scale,e.originY)}function rA(t,e){return tA(cH(t.getBoundingClientRect(),e))}function uH(t,e,s){const r=rA(t,s),{scroll:i}=e;return i&&(md(r.x,i.offset.x),md(r.y,i.offset.y)),r}const iA=({current:t})=>t?t.ownerDocument.defaultView:null,hH=new WeakMap;class mH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Us(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(mm(m).point)},a=(m,g)=>{const{drag:v,dragPropagation:b,onDragStart:_}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cU(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ci(C=>{let R=this.getAxisMotionValue(C).get()||0;if(da.test(R)){const{projection:D}=this.visualElement;if(D&&D.layout){const A=D.layout.layoutBox[C];A&&(R=Yr(A)*(parseFloat(R)/100))}}this.originPoint[C]=R}),_&&js.postRender(()=>_(m,g)),$0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:_,onDrag:N}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:C}=g;if(b&&this.currentDirection===null){this.currentDirection=pH(C),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),N&&N(m,g)},d=(m,g)=>this.stop(m,g),u=()=>ci(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new YE(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:iA(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&js.postRender(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:i}=this.getProps();if(!r||!Hp(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=sH(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&dd(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=nH(i.layoutBox,s):this.constraints=!1,this.elastic=oH(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ci(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=aH(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!dd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=uH(r,i.root,this.visualElement.getTransformPagePoint());let l=rH(i.layout.layoutBox,a);if(s){const d=s(lH(l));this.hasMutatedConstraints=!!d,d&&(l=tA(d))}return l}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=ci(m=>{if(!Hp(m,s,this.currentDirection))return;let g=u&&u[m]||{};l&&(g={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,_)});return Promise.all(h).then(d)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return $0(this.visualElement,e),r.start(i_(e,r,0,s,this.visualElement,!1))}stopAnimation(){ci(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ci(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ci(s=>{const{drag:r}=this.getProps();if(!Hp(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[s];a.set(e[s]-Is(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!dd(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ci(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();i[l]=iH({min:u,max:u},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ci(l=>{if(!Hp(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(Is(u,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;hH.set(this.visualElement,this);const e=this.visualElement.current,s=ph(e,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();dd(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),js.read(r);const l=Vh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ci(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())}));return()=>{l(),s(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=q0,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function Hp(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function pH(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class fH extends ll{constructor(e){super(e),this.removeGroupControls=Qr,this.removeListeners=Qr,this.controls=new mH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qr}unmount(){this.removeGroupControls(),this.removeListeners()}}const aN=t=>(e,s)=>{t&&js.postRender(()=>t(e,s))};class gH extends ll{constructor(){super(...arguments),this.removePointerDownListener=Qr}onPointerDown(e){this.session=new YE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:aN(e),onStart:aN(s),onMove:r,onEnd:(a,l)=>{delete this.session,i&&js.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=ph(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const kf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(wt.test(t))t=parseFloat(t);else return t;const s=oN(t,e.target.x),r=oN(t,e.target.y);return`${s}% ${r}%`}},xH={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,i=rl.parse(t);if(i.length>5)return r;const a=rl.createTransformer(t),l=typeof i[0]!="number"?1:0,d=s.x.scale*e.x,u=s.y.scale*e.y;i[0+l]/=d,i[1+l]/=u;const h=Is(d,u,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),a(i)}};class yH extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;zV(vH),a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),kf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==s||s===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||js.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Lb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function aA(t){const[e,s]=iV(),r=E.useContext($5);return n.jsx(yH,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(q5),isPresent:e,safeToRemove:s})}const vH={borderRadius:{...Fu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fu,borderTopRightRadius:Fu,borderBottomLeftRadius:Fu,borderBottomRightRadius:Fu,boxShadow:xH};function oA(t,e,s){const r=jn(t)?t:Md(t);return r.start(i_("",r,e,s)),r.animation}function lA(t){return t instanceof SVGElement&&t.tagName!=="svg"}const bH=(t,e)=>t.depth-e.depth;class _H{constructor(){this.children=[],this.isDirty=!1}add(e){Kb(this.children,e),this.isDirty=!0}remove(e){rx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(bH),this.isDirty=!1,this.children.forEach(e)}}function wH(t,e){const s=ua.now(),r=({timestamp:i})=>{const a=i-s;a>=e&&(to(r),t(a-e))};return js.read(r,!0),()=>to(r)}const cA=["TopLeft","TopRight","BottomLeft","BottomRight"],jH=cA.length,lN=t=>typeof t=="string"?parseFloat(t):t,cN=t=>typeof t=="number"||wt.test(t);function SH(t,e,s,r,i,a){i?(t.opacity=Is(0,s.opacity!==void 0?s.opacity:1,NH(r)),t.opacityExit=Is(e.opacity!==void 0?e.opacity:1,0,kH(r))):a&&(t.opacity=Is(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let l=0;l<jH;l++){const d=`border${cA[l]}Radius`;let u=dN(e,d),h=dN(s,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||cN(u)===cN(h)?(t[d]=Math.max(Is(lN(u),lN(h),r),0),(da.test(h)||da.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||s.rotate)&&(t.rotate=Is(e.rotate||0,s.rotate||0,r))}function dN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const NH=dA(0,.5,SE),kH=dA(.5,.95,Qr);function dA(t,e,s){return r=>r<t?0:r>e?1:s(cc(t,e,r))}function uN(t,e){t.min=e.min,t.max=e.max}function oi(t,e){uN(t.x,e.x),uN(t.y,e.y)}function hN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mN(t,e,s,r,i){return t-=e,t=ig(t,1/s,r),i!==void 0&&(t=ig(t,1/i,r)),t}function CH(t,e=0,s=1,r=.5,i,a=t,l=t){if(da.test(e)&&(e=parseFloat(e),e=Is(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=Is(a.min,a.max,r);t===a&&(d-=e),t.min=mN(t.min,e,s,d,i),t.max=mN(t.max,e,s,d,i)}function pN(t,e,[s,r,i],a,l){CH(t,e[s],e[r],e[i],e.scale,a,l)}const TH=["x","scaleX","originX"],EH=["y","scaleY","originY"];function fN(t,e,s,r){pN(t.x,e,TH,s?s.x:void 0,r?r.x:void 0),pN(t.y,e,EH,s?s.y:void 0,r?r.y:void 0)}function gN(t){return t.translate===0&&t.scale===1}function uA(t){return gN(t.x)&&gN(t.y)}function xN(t,e){return t.min===e.min&&t.max===e.max}function AH(t,e){return xN(t.x,e.x)&&xN(t.y,e.y)}function yN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function hA(t,e){return yN(t.x,e.x)&&yN(t.y,e.y)}function vN(t){return Yr(t.x)/Yr(t.y)}function bN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class IH{constructor(){this.members=[]}add(e){Kb(this.members,e),e.scheduleRender()}remove(e){if(rx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RH(t,e,s){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(s==null?void 0:s.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:v,skewX:b,skewY:_}=s;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(r+=`scale(${d}, ${u})`),r||"none"}const Gl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},th=typeof window!="undefined"&&window.MotionDebug!==void 0,mv=["","X","Y","Z"],PH={visibility:"hidden"},_N=1e3;let LH=0;function pv(t,e,s,r){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=xE(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",js,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mA(r)}function pA({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=LH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,th&&(Gl.totalNodes=Gl.resolvedTargetDeltas=Gl.recalculatedProjection=0),this.nodes.forEach(FH),this.nodes.forEach(UH),this.nodes.forEach(zH),this.nodes.forEach(BH),th&&window.MotionDebug.record(Gl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new _H)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Qb),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lA(l),this.instance=l;const{layoutId:u,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=wH(v,250),kf.hasAnimatedSinceResize&&(kf.hasAnimatedSinceResize=!1,this.nodes.forEach(jN))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||m.getDefaultTransition()||KH,{onLayoutAnimationStart:C,onLayoutAnimationComplete:R}=m.getProps(),D=!this.targetLayout||!hA(this.targetLayout,_)||b,A=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||v&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,A);const y={...Hb(N,"layout"),onPlay:C,onComplete:R};(m.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y)}else v||jN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,to(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HH),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wN);return}this.isUpdating||this.nodes.forEach(OH),this.isUpdating=!1,this.nodes.forEach(VH),this.nodes.forEach(DH),this.nodes.forEach(MH),this.clearAllSnapshots();const d=ua.now();Ln.delta=so(0,1e3/60,d-Ln.timestamp),Ln.timestamp=d,Ln.isProcessing=!0,rv.update.process(Ln),rv.preRender.process(Ln),rv.render.process(Ln),Ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($H),this.sharedNodes.forEach(GH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,js.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){js.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Us(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!uA(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;l&&(d||Hl(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),QH(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:d}=this.options;if(!d)return Us();const u=d.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(XH))){const{scroll:m}=this.root;m&&(md(u.x,m.offset.x),md(u.y,m.offset.y))}return u}removeElementScroll(l){var d;const u=Us();if(oi(u,l),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return u;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&oi(u,l),md(u.x,g.offset.x),md(u.y,g.offset.y))}return u}applyTransform(l,d=!1){const u=Us();oi(u,l);for(let h=0;h<this.path.length;h++){const m=this.path[h];!d&&m.options.layoutScroll&&m.scroll&&m!==m.root&&pd(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Hl(m.latestValues)&&pd(u,m.latestValues)}return Hl(this.latestValues)&&pd(u,this.latestValues),u}removeTransform(l){const d=Us();oi(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Hl(h.latestValues))continue;K0(h.latestValues)&&h.updateSnapshot();const m=Us(),g=h.measurePageBox();oi(m,g),fN(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Hl(this.latestValues)&&fN(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var d;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Ln.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Us(),this.relativeTargetOrigin=Us(),gh(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Us(),this.targetWithTransforms=Us()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):oi(this.target,this.layout.layoutBox),nA(this.target,this.targetDelta)):oi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Us(),this.relativeTargetOrigin=Us(),gh(this.relativeTargetOrigin,this.target,b.target),oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}th&&Gl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||K0(this.parent.latestValues)||sA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const d=this.getLead(),u=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ln.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;oi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;dH(this.layoutCorrected,this.treeScale,this.path,u),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Us());const{target:_}=d;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hN(this.prevProjectionDelta.x,this.projectionDelta.x),hN(this.prevProjectionDelta.y,this.projectionDelta.y)),fh(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!bN(this.projectionDelta.x,this.prevProjectionDelta.x)||!bN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),th&&Gl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hd(),this.projectionDelta=hd(),this.projectionDeltaWithTransform=hd()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=hd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=Us(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,N=b!==_,C=this.getStack(),R=!C||C.members.length<=1,D=!!(N&&!R&&this.options.crossfade===!0&&!this.path.some(qH));this.animationProgress=0;let A;this.mixTargetDelta=y=>{const w=y/1e3;SN(g.x,l.x,w),SN(g.y,l.y,w),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),WH(this.relativeTarget,this.relativeTargetOrigin,v,w),A&&AH(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Us()),oi(A,this.relativeTarget)),N&&(this.animationValues=m,SH(m,h,this.latestValues,w,D,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(to(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=js.update(()=>{kf.hasAnimatedSinceResize=!0,this.currentAnimation=oA(0,_N,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_N),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:m}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&fA(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Us();const g=Yr(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+g;const v=Yr(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+v}oi(d,u),pd(d,m),fh(this.projectionDeltaWithTransform,this.layoutCorrected,d,m)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new IH),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:d}=this.options;return d?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:d}=this.options;return d?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&pv("z",l,h,this.animationValues);for(let m=0;m<mv.length;m++)pv(`rotate${mv[m]}`,l,h,this.animationValues),pv(`skew${mv[m]}`,l,h,this.animationValues);l.render();for(const m in h)l.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);l.scheduleRender()}getProjectionStyles(l){var d,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PH;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Sf(l==null?void 0:l.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Sf(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Hl(this.latestValues)&&(N.transform=m?m({},""):"none",this.hasProjected=!1),N}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=RH(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:b,y:_}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${_.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(d=v.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const N in Zf){if(v[N]===void 0)continue;const{correct:C,applyTo:R}=Zf[N],D=h.transform==="none"?v[N]:C(v[N],g);if(R){const A=R.length;for(let y=0;y<A;y++)h[R[y]]=D}else h[N]=D}return this.options.layoutId&&(h.pointerEvents=g===this?Sf(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(wN),this.root.sharedNodes.clear()}}}function DH(t){t.updateLayout()}function MH(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=s.source!==t.layout.source;a==="size"?ci(g=>{const v=l?s.measuredBox[g]:s.layoutBox[g],b=Yr(v);v.min=r[g].min,v.max=v.min+b}):fA(a,s.layoutBox,r)&&ci(g=>{const v=l?s.measuredBox[g]:s.layoutBox[g],b=Yr(r[g]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const d=hd();fh(d,r,s.layoutBox);const u=hd();l?fh(u,t.applyTransform(i,!0),s.measuredBox):fh(u,r,s.layoutBox);const h=!uA(d);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:b}=g;if(v&&b){const _=Us();gh(_,s.layoutBox,v.layoutBox);const N=Us();gh(N,r,b.layoutBox),hA(_,N)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:u,layoutDelta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function FH(t){th&&Gl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $H(t){t.clearSnapshot()}function wN(t){t.clearMeasurements()}function OH(t){t.isLayoutDirty=!1}function VH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function jN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function UH(t){t.resolveTargetDelta()}function zH(t){t.calcProjection()}function HH(t){t.resetSkewAndRotation()}function GH(t){t.removeLeadSnapshot()}function SN(t,e,s){t.translate=Is(e.translate,0,s),t.scale=Is(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function NN(t,e,s,r){t.min=Is(e.min,s.min,r),t.max=Is(e.max,s.max,r)}function WH(t,e,s,r){NN(t.x,e.x,s.x,r),NN(t.y,e.y,s.y,r)}function qH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const KH={duration:.45,ease:[.4,0,.1,1]},kN=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CN=kN("applewebkit/")&&!kN("chrome/")?Math.round:Qr;function TN(t){t.min=CN(t.min),t.max=CN(t.max)}function QH(t){TN(t.x),TN(t.y)}function fA(t,e,s){return t==="position"||t==="preserve-aspect"&&!eH(vN(e),vN(s),.2)}function XH(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const YH=pA({attachResizeListener:(t,e)=>Vh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fv={current:void 0},gA=pA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fv.current){const t=new YH({});t.mount(window),t.setOptions({layoutScroll:!0}),fv.current=t}return fv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JH={pan:{Feature:gH},drag:{Feature:fH,ProjectionNode:gA,MeasureLayout:aA}};function EN(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&js.postRender(()=>a(e,mm(e)))}class ZH extends ll{mount(){const{current:e}=this.node;e&&(this.unmount=rU(e,s=>(EN(this.node,s,"Start"),r=>EN(this.node,r,"End"))))}unmount(){}}class eG extends ll{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(s){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hm(Vh(this.node.current,"focus",()=>this.onFocus()),Vh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AN(t,e,s){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&js.postRender(()=>a(e,mm(e)))}class tG extends ll{mount(){const{current:e}=this.node;e&&(this.unmount=lU(e,s=>(AN(this.node,s,"Start"),(r,{success:i})=>AN(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const X0=new WeakMap,gv=new WeakMap,sG=t=>{const e=X0.get(t.target);e&&e(t)},nG=t=>{t.forEach(sG)};function rG({root:t,...e}){const s=t||document;gv.has(s)||gv.set(s,{});const r=gv.get(s),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(nG,{root:t,...e})),r[i]}function iG(t,e,s){const r=rG(e);return X0.set(t,s),r.observe(t),()=>{X0.delete(t),r.unobserve(t)}}const aG={some:0,all:1};class oG extends ll{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=e,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:aG[i]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(u)};return iG(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(lG(e,s))&&this.startObserver()}unmount(){}}function lG({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const cG={inView:{Feature:oG},tap:{Feature:tG},focus:{Feature:eG},hover:{Feature:ZH}},dG={layout:{ProjectionNode:gA,MeasureLayout:aA}},ag={current:null},o_={current:!1};function xA(){if(o_.current=!0,!!Eb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ag.current=t.matches;t.addListener(e),e()}else ag.current=!1}const uG=[...BE,Xn,rl],hG=t=>uG.find(FE(t)),Bd=new WeakMap;function mG(t,e,s){for(const r in e){const i=e[r],a=s[r];if(jn(i))t.addValue(r,i);else if(jn(a))t.addValue(r,Md(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,Md(l!==void 0?l:i,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const IN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yA{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=ua.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,js.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:m}=l;this.onUpdate=m,this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=tx(s),this.isVariantNode=G5(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const b in v){const _=v[b];u[b]!==void 0&&jn(_)&&_.set(u[b],!1)}}mount(e){this.current=e,Bd.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),o_.current||xA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ag.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bd.delete(this.current),this.projection&&this.projection.unmount(),to(this.notifyUpdate),to(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=fc.has(e),i=s.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&js.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Dd){const s=Dd[e];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Us()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<IN.length;r++){const i=IN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=mG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=Md(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(DE(i)||kE(i))?i=parseFloat(i):!hG(i)&&rl.test(s)&&(i=RE(e,s)),this.setBaseTarget(e,jn(i)?i.get():i)),jn(i)?i.get():i}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=Mb(this.props,r,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!jn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Qb),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class vA extends yA{constructor(){super(...arguments),this.KeyframeResolver=$E}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jn(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function pG(t){return window.getComputedStyle(t)}class bA extends vA{constructor(){super(...arguments),this.type="html",this.renderInstance=eE}readValueFromInstance(e,s){if(fc.has(s)){const r=e_(s);return r&&r.default||0}else{const r=pG(e),i=(Y5(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return rA(e,s)}build(e,s,r){$b(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return zb(e,s,r)}}class _A extends vA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Us}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(fc.has(s)){const r=e_(s);return r&&r.default||0}return s=tE.has(s)?s:Pb(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return rE(e,s,r)}build(e,s,r){Ob(e,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,s,r,i){sE(e,s,r,i)}mount(e){this.isSVGTag=Ub(e.tagName),super.mount(e)}}const fG=(t,e)=>Db(t)?new _A(e):new bA(e,{allowProjection:t!==E.Fragment}),gG=JV({...Gz,...cG,...JH,...dG},fG),wA=mV(gG);function sh(t){const e=kb(()=>Md(t)),{isStatic:s}=E.useContext(Tb);if(s){const[,r]=E.useState(t);E.useEffect(()=>e.on("change",r),[])}return e}function jA(t,e){const s=sh(e()),r=()=>s.set(e());return r(),O5(()=>{const i=()=>js.preRender(r,!1,!0),a=t.map(l=>l.on("change",i));return()=>{a.forEach(l=>l()),to(r)}}),s}const xG=t=>t&&typeof t=="object"&&t.mix,yG=t=>xG(t)?t.mix:void 0;function vG(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],i=t[1+s],a=t[2+s],l=t[3+s],d=WE(i,a,{mixer:yG(a[0]),...l});return e?d(r):d}function bG(t){hh.current=[],t();const e=jA(hh.current,t);return hh.current=void 0,e}function Gp(t,e,s,r){if(typeof t=="function")return bG(t);const i=typeof e=="function"?e:vG(e,s,r);return Array.isArray(t)?RN(t,i):RN([t],([a])=>i(a))}function RN(t,e){const s=kb(()=>[]);return jA(t,()=>{s.length=0;const r=t.length;for(let i=0;i<r;i++)s[i]=t[i].get();return e(s)})}function SA(){!o_.current&&xA();const[t]=E.useState(ag.current);return t}const _G=(t,e,s)=>{const r=e-t;return((s-t)%r+r)%r+t};function NA(t,e){return GE(t)?t[_G(0,t.length,e)]:t}function l_(t){return typeof t=="object"&&!Array.isArray(t)}function kA(t,e,s,r){return typeof t=="string"&&l_(e)?hE(t,s,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function wG(t,e,s){return t*(e+1)}function PN(t,e,s,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?s:(i=r.get(e))!==null&&i!==void 0?i:t}function jG(t,e,s){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<s&&(rx(t,i),r--)}}function SG(t,e,s,r,i,a){jG(t,i,a);for(let l=0;l<e.length;l++)t.push({value:e[l],at:Is(i,a,r[l]),easing:NA(s,l)})}function NG(t,e){for(let s=0;s<t.length;s++)t[s]=t[s]/(e+1)}function kG(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const CG="easeInOut";function TG(t,{defaultTransition:e={},...s}={},r,i){const a=e.duration||.3,l=new Map,d=new Map,u={},h=new Map;let m=0,g=0,v=0;for(let b=0;b<t.length;b++){const _=t[b];if(typeof _=="string"){h.set(_,g);continue}else if(!Array.isArray(_)){h.set(_.name,PN(g,_.at,m,h));continue}let[N,C,R={}]=_;R.at!==void 0&&(g=PN(g,R.at,m,h));let D=0;const A=(y,w,M,k=0,S=0)=>{const T=EG(y),{delay:F=0,times:I=KE(T),type:B="keyframes",repeat:$,repeatType:H,repeatDelay:z=0,...W}=w;let{ease:K=e.ease||"easeOut",duration:q}=w;const se=typeof F=="function"?F(k,S):F,re=T.length,U=nx(B)?B:i==null?void 0:i[B];if(re<=2&&U){let me=100;if(re===2&&RG(T)){const te=T[1]-T[0];me=Math.abs(te)}const _e={...W};q!==void 0&&(_e.duration=la(q));const Pe=tU(_e,me,U);K=Pe.ease,q=Pe.duration}q!=null||(q=a);const Y=g+se;I.length===1&&I[0]===0&&(I[1]=1);const ce=I.length-T.length;if(ce>0&&qE(I,ce),T.length===1&&T.unshift(null),$){q=wG(q,$);const me=[...T],_e=[...I];K=Array.isArray(K)?[...K]:[K];const Pe=[...K];for(let te=0;te<$;te++){T.push(...me);for(let fe=0;fe<me.length;fe++)I.push(_e[fe]+(te+1)),K.push(fe===0?"linear":NA(Pe,fe-1))}NG(I,$)}const oe=Y+q;SG(M,T,K,I,Y,oe),D=Math.max(se+q,D),v=Math.max(oe,v)};if(jn(N)){const y=LN(N,d);A(C,R,DN("default",y))}else{const y=kA(N,C,r,u),w=y.length;for(let M=0;M<w;M++){C=C,R=R;const k=y[M],S=LN(k,d);for(const T in C)A(C[T],AG(R,T),DN(T,S),M,w)}}m=g,g+=D}return d.forEach((b,_)=>{for(const N in b){const C=b[N];C.sort(kG);const R=[],D=[],A=[];for(let w=0;w<C.length;w++){const{at:M,value:k,easing:S}=C[w];R.push(k),D.push(cc(0,v,M)),A.push(S||"easeOut")}D[0]!==0&&(D.unshift(0),R.unshift(R[0]),A.unshift(CG)),D[D.length-1]!==1&&(D.push(1),R.push(null)),l.has(_)||l.set(_,{keyframes:{},transition:{}});const y=l.get(_);y.keyframes[N]=R,y.transition[N]={...e,duration:v,ease:A,times:D,...s}}}),l}function LN(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function DN(t,e){return e[t]||(e[t]=[]),e[t]}function EG(t){return Array.isArray(t)?t:[t]}function AG(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const IG=t=>typeof t=="number",RG=t=>t.every(IG);function PG(t,e){return t in e}class LG extends yA{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,s){if(PG(s,e)){const r=e[s];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,s){delete s.output[e]}measureInstanceViewportBox(){return Us()}build(e,s){Object.assign(e.output,s)}renderInstance(e,{output:s}){Object.assign(e,s)}sortInstanceNodePosition(){return 0}}function DG(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},s=lA(t)?new _A(e):new bA(e);s.mount(t),Bd.set(t,s)}function MG(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},s=new LG(e);s.mount(t),Bd.set(t,s)}function FG(t,e){return jn(t)||typeof t=="number"||typeof t=="string"&&!l_(e)}function CA(t,e,s,r){const i=[];if(FG(t,e))i.push(oA(t,l_(e)&&e.default||e,s&&(s.default||s)));else{const a=kA(t,e,r),l=a.length;for(let d=0;d<l;d++){const u=a[d],h=u instanceof Element?DG:MG;Bd.has(u)||h(u);const m=Bd.get(u),g={...s};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(d,l)),i.push(...a_(m,{...e,transition:g},{}))}}return i}function BG(t,e,s){const r=[];return TG(t,e,s,{spring:n_}).forEach(({keyframes:a,transition:l},d)=>{r.push(...CA(d,a,l))}),r}function $G(t){return Array.isArray(t)&&t.some(Array.isArray)}function OG(t){function e(s,r,i){let a=[];return $G(s)?a=BG(s,r,t):a=CA(s,r,i,t),new oE(a)}return e}const Wp=OG(),za={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function VG(){return n.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+za.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function UG(){return n.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[n.jsxs("defs",{children:[n.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:za.icon,stopOpacity:"0.42"}),n.jsx("stop",{offset:"70%",stopColor:za.icon,stopOpacity:"0"})]}),n.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:za.icon,stopOpacity:"0.20"}),n.jsx("stop",{offset:"70%",stopColor:za.icon,stopOpacity:"0"})]})]}),n.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),n.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function MN({rounded:t="rounded-3xl",padded:e=!0,children:s}){const r=SA();return n.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:za.border,background:"var(--nav, "+za.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[n.jsx(VG,{}),n.jsx(wA.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),n.jsx(UG,{}),n.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:s})]})}const xv={borderColor:"#2B4C73",background:"#1A2F4A"},qp={borderColor:"#2B4C73",background:"#152A42"};function Bt({hex:t,title:e,subtitle:s,actions:r,subheader:i,left:a,right:l,children:d,rounded:u="rounded-3xl",padded:h=!0,centerFramed:m=!1,leftWidth:g=0,rightWidth:v=0,stickyRails:b=!0,mode:_="card",outerPadding:N="px-4 py-3",leftPlacement:C="inside",stickyTopbar:R=!0,stickySubheader:D=!0,shellViewportOffset:A="var(--app-topbar-h,72px)",topbarHeight:y=56}){const w={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof v=="number"?`${v}px`:v},M=n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:xv,children:t}),(e||s||r)&&n.jsxs("div",{className:[R?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:xv,children:[n.jsxs("div",{className:"min-w-0",children:[e&&n.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),s&&n.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:s})]}),r?n.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&n.jsx("div",{className:[D?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...D?{top:R?`${y}px`:0}:{},...xv},children:i})]}),k=_==="card"?({children:T})=>n.jsx(MN,{rounded:u,padded:h,children:T}):({children:T})=>n.jsx("div",{className:`w-full ${N}`,children:T}),S=n.jsx("div",{className:"relative min-h-0 h-full",style:w,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...qp,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),m?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:qp,children:d}):n.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:d}),l?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...qp,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:l}):v?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"})]})});return C==="bleed"&&_==="card"?n.jsx("div",{className:`w-full ${N}`,children:n.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[M,n.jsx("div",{className:"flex-1 min-h-0",style:w,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...qp,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),n.jsx(MN,{rounded:u,padded:h,children:n.jsx("div",{className:"flex-1 min-h-0 h-full",children:S})})]})})]})}):n.jsx(k,{children:n.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${A})`},children:[M,n.jsx("div",{className:"flex-1 min-h-0",children:S})]})})}const zG="_row_x5rfq_3",HG="_colFull_x5rfq_17",GG="_colCommunity_x5rfq_31",WG="_colGuides_x5rfq_33",qG="_card_x5rfq_129",KG="_header_x5rfq_143",QG="_title_x5rfq_155",XG="_subtitle_x5rfq_157",YG="_empty_x5rfq_159",JG="_errorNote_x5rfq_161",ZG="_linkBtn_x5rfq_163",eW="_primaryBtn_x5rfq_163",tW="_navBtn_x5rfq_163",sW="_closeBtn_x5rfq_163",nW="_actionsRight_x5rfq_179",rW="_tileGrid_x5rfq_185",iW="_tile_x5rfq_185",aW="_tileIcon_x5rfq_211",oW="_tileIconFallback_x5rfq_213",lW="_tileLabel_x5rfq_215",cW="_newsList_x5rfq_221",dW="_newsItem_x5rfq_223",uW="_newsMeta_x5rfq_225",hW="_newsAuthor_x5rfq_227",mW="_newsTime_x5rfq_229",pW="_newsText_x5rfq_231",fW="_newsImage_x5rfq_233",gW="_carouselCtrls_x5rfq_241",xW="_carousel_x5rfq_241",yW="_slide_x5rfq_249",vW="_slideActive_x5rfq_251",bW="_slideInactive_x5rfq_253",_W="_slideThumb_x5rfq_255",wW="_slideFallback_x5rfq_257",jW="_slideCaption_x5rfq_259",SW="_liveCard_x5rfq_265",NW="_liveAvatar_x5rfq_267",kW="_liveAvatarFallback_x5rfq_269",CW="_liveInfo_x5rfq_271",TW="_liveName_x5rfq_273",EW="_liveMeta_x5rfq_275",AW="_liveBadge_x5rfq_277",IW="_liveViewers_x5rfq_279",RW="_modalOverlay_x5rfq_285",PW="_modal_x5rfq_285",LW="_modalHeader_x5rfq_289",DW="_modalTitle_x5rfq_291",MW="_modalFilters_x5rfq_295",FW="_formRow_x5rfq_297",BW="_formRowCheckbox_x5rfq_299",$W="_select_x5rfq_301",OW="_input_x5rfq_301",VW="_tableWrap_x5rfq_303",UW="_table_x5rfq_303",qe={row:zG,colFull:HG,colCommunity:GG,colGuides:WG,card:qG,header:KG,title:QG,subtitle:XG,empty:YG,errorNote:JG,linkBtn:ZG,primaryBtn:eW,navBtn:tW,closeBtn:sW,actionsRight:nW,tileGrid:rW,tile:iW,tileIcon:aW,tileIconFallback:oW,tileLabel:lW,newsList:cW,newsItem:dW,newsMeta:uW,newsAuthor:hW,newsTime:mW,newsText:pW,newsImage:fW,carouselCtrls:gW,carousel:xW,slide:yW,slideActive:vW,slideInactive:bW,slideThumb:_W,slideFallback:wW,slideCaption:jW,liveCard:SW,liveAvatar:NW,liveAvatarFallback:kW,liveInfo:CW,liveName:TW,liveMeta:EW,liveBadge:AW,liveViewers:IW,modalOverlay:RW,modal:PW,modalHeader:LW,modalTitle:DW,modalFilters:MW,formRow:FW,formRowCheckbox:BW,select:$W,input:OW,tableWrap:VW,table:UW},zW=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"];async function TA(){const t=[];for(const s of zW)try{const i=await(await fetch(s,{cache:"no-store"})).text(),a=HW(i);t.push(...a)}catch(r){}const e=new Map;for(const s of t){const r=String(s["Creator Name"]||s.creator_name||s.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,s)}return Array.from(e.values())}function FN(t){const e=[];let s="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(s+='"',i++):r=!r:a===","&&!r?(e.push(s),s=""):s+=a}return e.push(s),e}function HW(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const s=FN(e[0]);return e.slice(1).map(r=>{const i=FN(r),a={};return s.forEach((l,d)=>{var u;return a[l.trim()]=((u=i[d])!=null?u:"").trim()}),a})}function GW(t){try{const e=Date.now(),s=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-s),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const l=Math.floor(a/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}catch(e){return""}}function WW(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const s=e.pathname.toLowerCase();if(s.startsWith("/shorts/"))return s.split("/")[2]||null}}catch(e){}return null}const qW=[{to:"/toplists/",label:"Toplists"},{to:"/guidehub/?tab=calculators",label:"GuideHub"},{to:"/players/",label:"Players"},{to:"/guilds/",label:"Guilds"},{to:"/community/",label:"Community"},{to:"/magazine/historybook/",label:"Historybook"},{to:"/creator-hub/",label:"Creator Hub"},{to:"/help",label:"Help"},{to:"/settings/",label:"Settings"}],BN={},KW=()=>n.jsxs("section",{className:qe.card,"data-i18n-scope":"home.tiles",children:[n.jsxs("header",{className:qe.header,children:[n.jsx("span",{className:qe.title,"data-i18n":"home.title",children:"Home"}),n.jsx("span",{className:qe.subtitle,"data-i18n":"home.subtitle",children:"Welcome back"})]}),n.jsx("div",{className:qe.tileGrid,role:"list",children:qW.map(t=>n.jsxs(hs,{to:t.to,role:"listitem",className:qe.tile,"aria-label":t.label,children:[BN[t.to]?n.jsx("img",{src:BN[t.to],alt:"",className:qe.tileIcon}):n.jsx("div",{className:qe.tileIconFallback,"aria-hidden":!0,children:t.label.slice(0,2).toUpperCase()}),n.jsx("div",{className:qe.tileLabel,"data-i18n":`nav.${t.label.toLowerCase()}`,children:t.label})]},t.to))})]}),QW=()=>{const[t,e]=E.useState(null),[s,r]=E.useState(null);E.useEffect(()=>{async function a(){{e([]);return}}return a(),()=>{}},[]);const i=!t||t.length===0;return n.jsxs("section",{className:qe.card,"data-i18n-scope":"home.news","aria-busy":t==null,children:[n.jsx("header",{className:qe.header,children:n.jsx("span",{className:qe.title,"data-i18n":"home.news.title",children:"Community news"})}),n.jsxs("div",{className:qe.newsList,children:[t==null?void 0:t.map(a=>{var l;return n.jsxs("article",{className:qe.newsItem,children:[n.jsxs("div",{className:qe.newsMeta,children:[n.jsx("span",{className:qe.newsAuthor,children:a.author||"Discord"}),n.jsx("span",{className:qe.newsTime,children:GW(a.timestamp)})]}),n.jsx("p",{className:qe.newsText,children:a.text}),a.image&&n.jsx("img",{src:a.image,alt:"",className:qe.newsImage}),a.url&&n.jsx("a",{href:a.url,target:"_blank",rel:"noreferrer",className:qe.linkBtn,"data-i18n":"home.news.open_on_discord",children:"Auf Discord ffnen"})]},(l=a.id)!=null?l:`${a.author}-${a.timestamp}`)}),i&&n.jsx("div",{className:qe.empty,"data-i18n":"home.news.empty",children:"No news yet"})]}),s&&n.jsx("div",{className:qe.errorNote,"aria-live":"polite",children:s})]})},XW=()=>{const[t,e]=E.useState([]),[s,r]=E.useState(0),i=E.useRef(null);E.useEffect(()=>{let u=!0;async function h(){try{const g=(await TA()).map(v=>{const b=String(v["Creator Name"]||v.creator_name||v.name||"").trim(),_=String(v["YouTube Link"]||v.youtube||v.YouTube||"").trim();if(!_)return null;const N=WW(_),C=N?`https://i.ytimg.com/vi/${N}/hqdefault.jpg`:void 0;return{title:b,url:_,thumb:C}}).filter(Boolean).slice(0,12);u&&e(g)}catch(m){u&&e([])}}return h(),()=>{u=!1}},[]),E.useEffect(()=>{if(!(t.length<=1))return i.current=window.setInterval(()=>r(u=>(u+1)%t.length),6e3),()=>{i.current&&window.clearInterval(i.current)}},[t]);const a=()=>r(u=>(u-1+t.length)%Math.max(t.length,1)),l=()=>r(u=>(u+1)%Math.max(t.length,1)),d=u=>{u.key==="ArrowLeft"&&(u.preventDefault(),a()),u.key==="ArrowRight"&&(u.preventDefault(),l())};return n.jsxs("section",{className:qe.card,"data-i18n-scope":"home.youtube",children:[n.jsxs("header",{className:qe.header,children:[n.jsx("span",{className:qe.title,"data-i18n":"home.youtube.title",children:"YouTube"}),n.jsxs("div",{className:qe.carouselCtrls,children:[n.jsx("button",{className:qe.navBtn,onClick:a,"aria-label":"Prev",children:""}),n.jsx("button",{className:qe.navBtn,onClick:l,"aria-label":"Next",children:""})]})]}),n.jsx("div",{className:qe.carousel,tabIndex:0,onKeyDown:d,"aria-roledescription":"carousel",children:t.length===0?n.jsx("div",{className:qe.empty,children:"No videos"}):t.map((u,h)=>n.jsxs("a",{href:u.url,target:"_blank",rel:"noreferrer",className:[qe.slide,h===s?qe.slideActive:qe.slideInactive].join(" "),children:[u.thumb?n.jsx("img",{src:u.thumb,alt:"",className:qe.slideThumb}):n.jsx("div",{className:qe.slideFallback,children:u.title.slice(0,2).toUpperCase()}),n.jsx("div",{className:qe.slideCaption,children:u.title})]},u.url))})]})},YW=({onOpenSchedule:t})=>{var m;const[e,s]=E.useState(null),[r,i]=E.useState(new Map),[a,l]=E.useState(0),d=E.useRef(null);if(E.useEffect(()=>{async function g(){{s([]);return}}return g(),()=>{}},[]),E.useEffect(()=>{let g=!0;async function v(){try{const b=await TA(),_=new Map;for(const N of b){const C=String(N["Creator Name"]||N.creator_name||N.name||"").trim(),R=String(N["Twitch Link"]||N.twitch||N.Twitch||"").trim();if(!C||!R)continue;const D=(()=>{try{return new URL(R).pathname.replace(/^\//,"").toLowerCase()}catch(A){return R.toLowerCase()}})();D&&_.set(D,R),_.set(C.toLowerCase(),R)}g&&i(_)}catch(b){g&&i(new Map)}}return v(),()=>{g=!1}},[]),E.useEffect(()=>{if(!(!e||e.length<=1))return d.current=window.setInterval(()=>l(g=>(g+1)%e.length),8e3),()=>{d.current&&window.clearInterval(d.current)}},[e]),!e||e.length===0)return n.jsxs("section",{className:qe.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:qe.header,children:n.jsx("span",{className:qe.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsx("div",{className:qe.empty,"data-i18n":"home.live.none",children:"Nobody is live right now."}),n.jsx("div",{className:qe.actionsRight,children:n.jsx("button",{className:qe.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:"Streaming-Plan anzeigen"})})]});const u=e[a],h=(()=>{const g=((u==null?void 0:u.name)||"").toLowerCase();if(u!=null&&u.url)return u.url;if(g)return r.has(g)?r.get(g):r.has(g.replace(/^@/,""))?r.get(g.replace(/^@/,"")):`https://www.twitch.tv/${g}`})();return n.jsxs("section",{className:qe.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:qe.header,children:n.jsx("span",{className:qe.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsxs("div",{className:qe.liveCard,children:[u!=null&&u.avatar?n.jsx("img",{src:u.avatar,alt:"",className:qe.liveAvatar}):n.jsx("div",{className:qe.liveAvatarFallback,"aria-hidden":!0,children:(m=u==null?void 0:u.name)==null?void 0:m.slice(0,2).toUpperCase()}),n.jsxs("div",{className:qe.liveInfo,children:[n.jsx("div",{className:qe.liveName,children:u==null?void 0:u.name}),n.jsxs("div",{className:qe.liveMeta,children:[n.jsx("span",{className:qe.liveBadge,children:"LIVE"}),typeof(u==null?void 0:u.viewers)=="number"&&n.jsxs("span",{className:qe.liveViewers,children:[u.viewers.toLocaleString()," viewers"]})]})]}),h&&n.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:qe.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:"Auf Twitch ffnen"})]}),n.jsxs("div",{className:qe.carouselCtrls,children:[n.jsx("button",{className:qe.navBtn,onClick:()=>l(g=>(g-1+e.length)%e.length),"aria-label":"Prev",children:""}),n.jsx("button",{className:qe.navBtn,onClick:()=>l(g=>(g+1)%e.length),"aria-label":"Next",children:""})]})]})},JW=({open:t,onClose:e})=>{var b;const[s,r]=E.useState(null),[i,a]=E.useState("All"),[l,d]=E.useState(""),[u,h]=E.useState(!1);if(E.useEffect(()=>{if(!t)return;async function _(){{r([]);return}}return _(),()=>{}},[t]),E.useEffect(()=>{const _=N=>{N.key==="Escape"&&e()};return t&&window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[t,e]),!t)return null;const m=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),g=(s||[]).filter(_=>{if(i!=="All"&&_.platform.toLowerCase()!==i.toLowerCase()||u&&_.weekday&&_.weekday.toLowerCase()!==m.toLowerCase())return!1;if(l){const N=l.toLowerCase();if(!`${_.streamer} ${_.title}`.toLowerCase().includes(N))return!1}return!0}),v=((b=s==null?void 0:s.length)!=null?b:0)===0;return n.jsx("div",{className:qe.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:n.jsxs("div",{className:qe.modal,children:[n.jsxs("header",{className:qe.modalHeader,children:[n.jsx("h2",{id:"schedule-title",className:qe.modalTitle,"data-i18n":"home.schedule.title",children:"Streaming-Plan"}),n.jsx("button",{className:qe.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:"Schlieen"})]}),n.jsxs("div",{className:qe.modalFilters,children:[n.jsxs("label",{className:qe.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.platform",children:"Platform"}),n.jsxs("select",{value:i,onChange:_=>a(_.target.value),className:qe.select,children:[n.jsx("option",{value:"All",children:"All"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"YouTube",children:"YouTube"})]})]}),n.jsxs("label",{className:qe.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.search",children:"Search"}),n.jsx("input",{value:l,onChange:_=>d(_.target.value),className:qe.input,placeholder:"Streamer / Title"})]}),n.jsxs("label",{className:qe.formRowCheckbox,children:[n.jsx("input",{type:"checkbox",checked:u,onChange:_=>h(_.target.checked)}),n.jsx("span",{"data-i18n":"home.schedule.today",children:"Nur heute"})]})]}),n.jsx("div",{className:qe.tableWrap,children:n.jsxs("table",{className:qe.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"weekday"}),n.jsx("th",{children:"start_utc"}),n.jsx("th",{children:"end_utc"}),n.jsx("th",{children:"timezone"}),n.jsx("th",{children:"platform"}),n.jsx("th",{children:"channel_url"}),n.jsx("th",{children:"streamer"}),n.jsx("th",{children:"title"})]})}),n.jsx("tbody",{children:v?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:qe.empty,children:"No schedule yet"})}):g.map((_,N)=>n.jsxs("tr",{children:[n.jsx("td",{children:_.weekday}),n.jsx("td",{children:_.start_utc}),n.jsx("td",{children:_.end_utc}),n.jsx("td",{children:_.timezone}),n.jsx("td",{children:_.platform}),n.jsx("td",{children:_.channel_url?n.jsx("a",{href:_.channel_url,target:"_blank",rel:"noreferrer",children:"link"}):""}),n.jsx("td",{children:_.streamer}),n.jsx("td",{children:_.title})]},N))})]})})]})})},ZW=()=>{const[t,e]=E.useState(!1);return n.jsxs(Bt,{title:"home.title",subtitle:"home.subtitle",children:[n.jsx("div",{className:qe.row,children:n.jsx("div",{className:qe.colFull,children:n.jsx(KW,{})})}),n.jsxs("div",{className:qe.row,children:[n.jsx("div",{className:qe.colCommunity,children:n.jsx(QW,{})}),n.jsx("div",{className:qe.colGuides,children:n.jsx(XW,{})})]}),n.jsx("div",{className:qe.row,children:n.jsx("div",{className:qe.colFull,children:n.jsx(YW,{onOpenSchedule:()=>e(!0)})})}),n.jsx(JW,{open:t,onClose:()=>e(!1)})]})},eq="_wrapper_125p4_1",tq="_card_125p4_19",sq="_logo_125p4_45",nq="_heading_125p4_61",rq="_subcopy_125p4_73",iq="_buttonStack_125p4_83",aq="_providerButton_125p4_97",oq="_discord_125p4_145",lq="_google_125p4_153",cq="_disclaimer_125p4_161",dq="_status_125p4_173",uq="_sessionBlock_125p4_183",hq="_logoutButton_125p4_197",mq="_linkButton_125p4_227",pq="_loading_125p4_245",fq="_spinner_125p4_261",Rn={wrapper:eq,card:tq,logo:sq,heading:nq,subcopy:rq,buttonStack:iq,providerButton:aq,discord:oq,google:lq,disclaimer:cq,status:dq,sessionBlock:uq,logoutButton:hq,linkButton:mq,loading:pq,spinner:fq},gq=()=>{const t=fi(),{status:e,user:s,loginWithDiscord:r,loginWithGoogle:i,logout:a}=ao(),l=e==="loading"||e==="idle",d=e==="authenticated"&&!!s,u=()=>{l||r()},h=()=>{l||i()},m=async()=>{await a()},g=()=>{t("/")};let v;return l?v=n.jsxs("div",{className:Rn.loading,children:[n.jsx("div",{className:Rn.spinner}),n.jsx("div",{children:"Checking session"})]}):d&&s?v=n.jsxs("div",{className:Rn.sessionBlock,children:[n.jsxs("div",{className:Rn.status,children:["You are logged in as ",s.displayName,"."]}),n.jsx("button",{className:Rn.logoutButton,type:"button",onClick:m,children:"Logout"}),n.jsx("button",{className:Rn.linkButton,type:"button",onClick:g,children:"Back to dashboard"})]}):v=n.jsxs("div",{className:Rn.buttonStack,children:[n.jsx("button",{className:`${Rn.providerButton} ${Rn.discord}`,type:"button",onClick:u,children:"Login with Discord"}),n.jsx("button",{className:`${Rn.providerButton} ${Rn.google}`,type:"button",onClick:h,children:"Login with Google"})]}),n.jsx(Bt,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:n.jsx("div",{className:Rn.wrapper,children:n.jsxs("div",{className:Rn.card,children:[n.jsx("img",{className:Rn.logo,src:jf,alt:"SFDataHub logo"}),n.jsx("h1",{className:Rn.heading,children:"Sign in"}),n.jsx("p",{className:Rn.subcopy,children:"Choose a method to access SFDataHub."}),v,n.jsx("p",{className:Rn.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})})};function xq(){return n.jsx(Bt,{hex:n.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:n.jsx(yq,{}),right:n.jsx(vq,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(yv,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),n.jsx(yv,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),n.jsx(yv,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function yq(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(vv,{to:"/dashboard/kpis",children:"KPIs"}),n.jsx(vv,{to:"/dashboard/activity",children:"Activity"}),n.jsx(vv,{to:"/dashboard/progression",children:"Progression"})]})]})}function vq(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),n.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function yv({to:t,title:e,desc:s}){return n.jsxs(hs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function vv({to:t,children:e}){return n.jsx(hs,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function bq(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  KPIs"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(bv,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),n.jsx(bv,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),n.jsx(bv,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function bv({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),n.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function _q(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Activity"}),n.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),n.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[n.jsx("li",{children:" Neues Scan-File hochgeladen"}),n.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),n.jsx("li",{children:" Gilden-Event geplant"})]})]})}function wq(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Progression"}),n.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[n.jsx(_v,{title:"Scrapbook 100%",progress:72}),n.jsx(_v,{title:"Fortress Ausbaustufe",progress:48}),n.jsx(_v,{title:"Underworld Boss",progress:35})]})]})}function _v({title:t,progress:e}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),n.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:n.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),n.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function jq(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Discover"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(Pl,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),n.jsx(Pl,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),n.jsx(Pl,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),n.jsx(Pl,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),n.jsx(Pl,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),n.jsx(Pl,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),n.jsx(Pl,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function Pl({to:t,title:e,desc:s}){return n.jsxs(hs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function Sq({children:t,framed:e=!0}){return e?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:za.border,backgroundColor:za.tile},children:t}):n.jsx("main",{className:"min-w-0",children:t})}function Nq(t,e){if(!t)return"";const s=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return s;const r=s.includes("?")?"&":"?";return`${s}${r}bg=transparent&background=transparent`}const kq=({srcOrId:t,aspectRatio:e="16/10",height:s,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:l=!1,infoText:d="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[m,g]=E.useState(!1),v=E.useMemo(()=>Nq(t,h),[t,h]),b=i?"lazy":"eager",_={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},N={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},C=s?{position:"relative",width:"100%",height:s,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},R={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return n.jsx("div",{className:a,style:_,children:n.jsx("div",{style:N,children:n.jsxs("div",{style:C,children:[n.jsx("iframe",{src:v,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:b,scrolling:"no",title:"Heyzine Flipbook"}),l&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(D=>!D),style:R,title:"Info",children:"i"}),m&&n.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[d," ",n.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},Cq="#0C1C2E",Tq=()=>n.jsx(Bt,{children:n.jsx(Sq,{children:n.jsxs("div",{style:{position:"relative",width:"100%"},children:[n.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:Cq,borderRadius:16,pointerEvents:"none",zIndex:0}}),n.jsx("div",{style:{position:"relative",zIndex:1},children:n.jsx(kq,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),Eq="_pageWrap_72re9_7",Aq="_infoLine_72re9_17",Iq="_viewerHost_72re9_43",Rq="_overlay_72re9_99",Pq="_dragZoneLeft_72re9_101",Lq="_dragZoneRight_72re9_103",Dq="_inbookLink_72re9_105",Lo={pageWrap:Eq,infoLine:Aq,viewerHost:Iq,overlay:Rq,dragZoneLeft:Pq,dragZoneRight:Lq,inbookLink:Dq};var nh={exports:{}},Mq=nh.exports,$N;function Fq(){return $N||($N=1,(function(t,e){(function(s,r){r(e)})(Mq,(function(s){class r{constructor(y,w){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=w,this.nowDrawingDensity=this.createdDensity,this.render=y}setDensity(y){this.createdDensity=y,this.nowDrawingDensity=y}setDrawingDensity(y){this.nowDrawingDensity=y}setPosition(y){this.state.position=y}setAngle(y){this.state.angle=y}setArea(y){this.state.area=y}setHardDrawingAngle(y){this.state.hardDrawingAngle=y}setHardAngle(y){this.state.hardAngle=y,this.state.hardDrawingAngle=y}setOrientation(y){this.orientation=y}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(y,w,M){super(y,M),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=w}draw(y){const w=this.render.getContext(),M=this.render.convertToGlobal(this.state.position),k=this.render.getRect().pageWidth,S=this.render.getRect().height;w.save(),w.translate(M.x,M.y),w.beginPath();for(let T of this.state.area)T!==null&&(T=this.render.convertToGlobal(T),w.lineTo(T.x-M.x,T.y-M.y));w.rotate(this.state.angle),w.clip(),this.isLoad?w.drawImage(this.image,0,0,k,S):this.drawLoader(w,{x:0,y:0},k,S),w.restore()}simpleDraw(y){const w=this.render.getRect(),M=this.render.getContext(),k=w.pageWidth,S=w.height,T=y===1?w.left+w.pageWidth:w.left,F=w.top;this.isLoad?M.drawImage(this.image,T,F,k,S):this.drawLoader(M,{x:T,y:F},k,S)}drawLoader(y,w,M,k){y.beginPath(),y.strokeStyle="rgb(200, 200, 200)",y.fillStyle="rgb(255, 255, 255)",y.lineWidth=1,y.rect(w.x+1,w.y+1,M-1,k-1),y.stroke(),y.fill();const S={x:w.x+M/2,y:w.y+k/2};y.beginPath(),y.lineWidth=10,y.arc(S.x,S.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),y.stroke(),y.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(y,w){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=w,this.app=y,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let w=0;w<this.pages.length;w++)this.portraitSpread.push([w]);let y=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([y]),y++);for(let w=y;w<this.pages.length;w+=2)w<this.pages.length-1?this.landscapeSpread.push([w,w+1]):(this.landscapeSpread.push([w]),this.pages[w].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(y){const w=this.getSpread();for(let M=0;M<w.length;M++)if(y===w[M][0]||y===w[M][1])return M;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(y){if(y>=0&&y<this.pages.length)return this.pages[y];throw new Error("Invalid page number")}nextBy(y){const w=this.pages.indexOf(y);return w<this.pages.length-1?this.pages[w+1]:null}prevBy(y){const w=this.pages.indexOf(y);return w>0?this.pages[w-1]:null}getFlippingPage(y){const w=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return y===0?this.pages[w].newTemporaryCopy():this.pages[w-1];{const M=y===0?this.getSpread()[w+1]:this.getSpread()[w-1];return M.length===1||y===0?this.pages[M[0]]:this.pages[M[1]]}}getBottomPage(y){const w=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return y===0?this.pages[w+1]:this.pages[w-1];{const M=y===0?this.getSpread()[w+1]:this.getSpread()[w-1];return M.length===1?this.pages[M[0]]:y===0?this.pages[M[1]]:this.pages[M[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(y=null){if(y===null&&(y=this.currentPageIndex),y<0||y>=this.pages.length)return;const w=this.getSpreadIndexByPage(y);w!==null&&(this.currentSpreadIndex=w,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(y){if(!(y>=0&&y<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=y}showSpread(){const y=this.getSpread()[this.currentSpreadIndex];y.length===2?(this.render.setLeftPage(this.pages[y[0]]),this.render.setRightPage(this.pages[y[1]])):this.render.getOrientation()==="landscape"&&y[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[y[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[y[0]])),this.currentPageIndex=y[0],this.app.updatePageIndex(this.currentPageIndex)}}class l extends a{constructor(y,w,M){super(y,w),this.imagesHref=M}load(){for(const y of this.imagesHref){const w=new i(this.render,y,"soft");w.load(),this.pages.push(w)}this.createSpread()}}class d{static GetDistanceBetweenTwoPoint(y,w){return y===null||w===null?1/0:Math.sqrt(Math.pow(w.x-y.x,2)+Math.pow(w.y-y.y,2))}static GetSegmentLength(y){return d.GetDistanceBetweenTwoPoint(y[0],y[1])}static GetAngleBetweenTwoLine(y,w){const M=y[0].y-y[1].y,k=w[0].y-w[1].y,S=y[1].x-y[0].x,T=w[1].x-w[0].x;return Math.acos((M*k+S*T)/(Math.sqrt(M*M+S*S)*Math.sqrt(k*k+T*T)))}static PointInRect(y,w){return w===null?null:w.x>=y.left&&w.x<=y.width+y.left&&w.y>=y.top&&w.y<=y.top+y.height?w:null}static GetRotatedPoint(y,w,M){return{x:y.x*Math.cos(M)+y.y*Math.sin(M)+w.x,y:y.y*Math.cos(M)-y.x*Math.sin(M)+w.y}}static LimitPointToCircle(y,w,M){if(d.GetDistanceBetweenTwoPoint(y,M)<=w)return M;const k=y.x,S=y.y,T=M.x,F=M.y;let I=Math.sqrt(Math.pow(w,2)*Math.pow(k-T,2)/(Math.pow(k-T,2)+Math.pow(S-F,2)))+k;M.x<0&&(I*=-1);let B=(I-k)*(S-F)/(k-T)+S;return k-T+S===0&&(B=w),{x:I,y:B}}static GetIntersectBetweenTwoSegment(y,w,M){return d.PointInRect(y,d.GetIntersectBeetwenTwoLine(w,M))}static GetIntersectBeetwenTwoLine(y,w){const M=y[0].y-y[1].y,k=w[0].y-w[1].y,S=y[1].x-y[0].x,T=w[1].x-w[0].x,F=y[0].x*y[1].y-y[1].x*y[0].y,I=w[0].x*w[1].y-w[1].x*w[0].y,B=M*I-k*F,$=S*I-T*F,H=-(F*T-I*S)/(M*T-k*S),z=-(M*I-k*F)/(M*T-k*S);if(isFinite(H)&&isFinite(z))return{x:H,y:z};if(Math.abs(B-$)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(y,w){const M=Math.abs(y.x-w.x),k=Math.abs(y.y-w.y),S=Math.max(M,k),T=[y];function F(I,B,$,H,z){return B>I?I+z*($/H):B<I?I-z*($/H):I}for(let I=1;I<=S;I+=1)T.push({x:F(y.x,w.x,M,S,I),y:F(y.y,w.y,k,S,I)});return T}}class u extends r{constructor(y,w,M){super(y,M),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=w,this.element.classList.add("stf__item"),this.element.classList.add("--"+M)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(y){const w=y||this.nowDrawingDensity,M=this.render.convertToGlobal(this.state.position),k=this.render.getRect().pageWidth,S=this.render.getRect().height;this.element.classList.remove("--simple");const T=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${k}px;
            height: ${S}px;
        `;w==="hard"?this.drawHard(T):this.drawSoft(M,T)}drawHard(y=""){const w=this.render.getRect().left+this.render.getRect().width/2,M=this.state.hardDrawingAngle,k=y+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${M}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${w}px, 0, 0) rotateY(${M}deg);`);this.element.style.cssText=k}drawSoft(y,w=""){let M="polygon( ";for(const S of this.state.area)if(S!==null){let T=this.render.getDirection()===1?{x:-S.x+this.state.position.x,y:S.y-this.state.position.y}:{x:S.x-this.state.position.x,y:S.y-this.state.position.y};T=d.GetRotatedPoint(T,{x:0,y:0},this.state.angle),M+=T.x+"px "+T.y+"px, "}M=M.slice(0,-2),M+=")";const k=w+`transform-origin: 0 0; clip-path: ${M}; -webkit-clip-path: ${M};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${y.x}px, ${y.y}px);`:`transform: translate3d(${y.x}px, ${y.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=k}simpleDraw(y){const w=this.render.getRect(),M=w.pageWidth,k=w.height,S=y===1?w.left+w.pageWidth:w.left,T=w.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${k}px; 
            left: ${S}px; 
            top: ${T}px; 
            width: ${M}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(y){super.setOrientation(y),this.element.classList.remove("--left","--right"),this.element.classList.add(y===1?"--right":"--left")}setDrawingDensity(y){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+y),super.setDrawingDensity(y)}}class h extends a{constructor(y,w,M,k){super(y,w),this.element=M,this.pagesElement=k}load(){for(const y of this.pagesElement){const w=new u(this.render,y,y.dataset.density==="hard"?"hard":"soft");w.load(),this.pages.push(w)}this.createSpread()}}class m{constructor(y,w,M,k){this.direction=y,this.corner=w,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(M,10),this.pageHeight=parseInt(k,10)}calc(y){try{return this.position=this.calcAngleAndPosition(y),this.calculateIntersectPoint(this.position),!0}catch(w){return!1}}getFlippingClipArea(){const y=[];let w=!1;return y.push(this.rect.topLeft),y.push(this.topIntersectPoint),this.sideIntersectPoint===null?w=!0:(y.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(w=!1)),y.push(this.bottomIntersectPoint),(w||this.corner==="bottom")&&y.push(this.rect.bottomLeft),y}getBottomClipArea(){const y=[];return y.push(this.topIntersectPoint),this.corner==="top"?y.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&y.push({x:this.pageWidth,y:0}),y.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?d.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&y.push(this.sideIntersectPoint):this.corner==="top"&&y.push({x:this.pageWidth,y:this.pageHeight}),y.push(this.bottomIntersectPoint),y.push(this.topIntersectPoint),y}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const y=d.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?y:Math.PI-y}calcAngleAndPosition(y){let w=y;if(this.updateAngleAndGeometry(w),w=this.corner==="top"?this.checkPositionAtCenterLine(w,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(w,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(w.x-this.pageWidth)<1&&Math.abs(w.y)<1)throw new Error("Point is too small");return w}updateAngleAndGeometry(y){this.angle=this.calculateAngle(y),this.rect=this.getPageRect(y)}calculateAngle(y){const w=this.pageWidth-y.x+1,M=this.corner==="bottom"?this.pageHeight-y.y:y.y;let k=2*Math.acos(w/Math.sqrt(M*M+w*w));M<0&&(k=-k);const S=Math.PI-k;if(!isFinite(k)||S>=0&&S<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(k=-k),k}getPageRect(y){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],y):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],y)}getRectFromBasePoint(y,w){return{topLeft:this.getRotatedPoint(y[0],w),topRight:this.getRotatedPoint(y[1],w),bottomLeft:this.getRotatedPoint(y[2],w),bottomRight:this.getRotatedPoint(y[3],w)}}getRotatedPoint(y,w){return{x:y.x*Math.cos(this.angle)+y.y*Math.sin(this.angle)+w.x,y:y.y*Math.cos(this.angle)-y.x*Math.sin(this.angle)+w.y}}calculateIntersectPoint(y){const w={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[y,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[y,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[y,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(y,w,M){let k=y;const S=d.LimitPointToCircle(w,this.pageWidth,k);k!==S&&(k=S,this.updateAngleAndGeometry(k));const T=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let F=this.rect.bottomRight,I=this.rect.topLeft;if(this.corner==="bottom"&&(F=this.rect.topRight,I=this.rect.bottomLeft),F.x<=0){const B=d.LimitPointToCircle(M,T,I);B!==k&&(k=B,this.updateAngleAndGeometry(k))}return k}getSegmentToShadowLine(){const y=this.getShadowStartPoint();return[y,y!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(y,w){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=y,this.app=w}fold(y){this.setState("user_fold"),this.calc===null&&this.start(y),this.do(this.render.convertToPage(y))}flip(y){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(y)||(this.calc!==null&&this.render.finishAnimation(),!this.start(y)))return;const w=this.getBoundsRect();this.setState("flipping");const M=w.height/10,k=this.calc.getCorner()==="bottom"?w.height-M:M,S=this.calc.getCorner()==="bottom"?w.height:0;this.calc.calc({x:w.pageWidth-M,y:k}),this.animateFlippingTo({x:w.pageWidth-M,y:k},{x:-w.pageWidth,y:S},!0)}start(y){this.reset();const w=this.render.convertToBook(y),M=this.getBoundsRect(),k=this.getDirectionByPoint(w),S=w.y>=M.height/2?"bottom":"top";if(!this.checkDirection(k))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(k),this.bottomPage=this.app.getPageCollection().getBottomPage(k),this.render.getOrientation()==="landscape")if(k===1){const T=this.app.getPageCollection().nextBy(this.flippingPage);T!==null&&this.flippingPage.getDensity()!==T.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),T.setDrawingDensity("hard"))}else{const T=this.app.getPageCollection().prevBy(this.flippingPage);T!==null&&this.flippingPage.getDensity()!==T.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),T.setDrawingDensity("hard"))}return this.render.setDirection(k),this.calc=new m(k,S,M.pageWidth.toString(10),M.height.toString(10)),!0}catch(T){return!1}}do(y){if(this.calc!==null&&this.calc.calc(y)){const w=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*w)/100):this.flippingPage.setHardAngle(-90*(200-2*w)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),w,this.calc.getDirection())}}flipToPage(y,w){const M=this.app.getPageCollection().getCurrentSpreadIndex(),k=this.app.getPageCollection().getSpreadIndexByPage(y);try{k>M&&(this.app.getPageCollection().setCurrentSpreadIndex(k-1),this.flipNext(w)),k<M&&(this.app.getPageCollection().setCurrentSpreadIndex(k+1),this.flipPrev(w))}catch(S){}}flipNext(y){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:y==="top"?1:this.render.getRect().height-2})}flipPrev(y){this.flip({x:10,y:y==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const y=this.calc.getPosition(),w=this.getBoundsRect(),M=this.calc.getCorner()==="bottom"?w.height:0;y.x<=0?this.animateFlippingTo(y,{x:-w.pageWidth,y:M},!0):this.animateFlippingTo(y,{x:w.pageWidth,y:M},!1)}showCorner(y){if(!this.checkState("read","fold_corner"))return;const w=this.getBoundsRect(),M=w.pageWidth;if(this.isPointOnCorners(y))if(this.calc===null){if(!this.start(y))return;this.setState("fold_corner"),this.calc.calc({x:M-1,y:1});const k=50,S=this.calc.getCorner()==="bottom"?w.height-1:1,T=this.calc.getCorner()==="bottom"?w.height-k:k;this.animateFlippingTo({x:M-1,y:S},{x:M-k,y:T},!1,!1)}else this.do(this.render.convertToPage(y));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(y,w,M,k=!0){const S=d.GetCordsFromTwoPoint(y,w),T=[];for(const I of S)T.push(()=>this.do(I));const F=this.getAnimationDuration(S.length);this.render.startAnimation(T,F,()=>{this.calc&&(M&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),k&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(y){this.state!==y&&(this.app.updateState(y),this.state=y)}getDirectionByPoint(y){const w=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(y.x-w.pageWidth<=w.width/5)return 1}else if(y.x<w.width/2)return 1;return 0}getAnimationDuration(y){const w=this.app.getSettings().flippingTime;return y>=1e3?w:y/1e3*w}checkDirection(y){return y===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...y){for(const w of y)if(this.state===w)return!0;return!1}isPointOnCorners(y){const w=this.getBoundsRect(),M=w.pageWidth,k=Math.sqrt(Math.pow(M,2)+Math.pow(w.height,2))/5,S=this.render.convertToBook(y);return S.x>0&&S.y>0&&S.x<w.width&&S.y<w.height&&(S.x<k||S.x>w.width-k)&&(S.y<k||S.y>w.height-k)}}class v{constructor(y,w){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=w,this.app=y;const M=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=M.exec(window.navigator.userAgent)!==null}render(y){if(this.animation!==null){const w=Math.round((y-this.animation.startedAt)/this.animation.durationFrame);w<this.animation.frames.length?this.animation.frames[w]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=y,this.drawFrame()}start(){this.update();const y=w=>{this.render(w),requestAnimationFrame(y)};requestAnimationFrame(y)}startAnimation(y,w,M){this.finishAnimation(),this.animation={frames:y,duration:w,durationFrame:w/y.length,onAnimateEnd:M,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const y=this.calculateBoundsRect();this.orientation!==y&&(this.orientation=y,this.app.updateOrientation(y))}calculateBoundsRect(){let y="landscape";const w=this.getBlockWidth(),M=w/2,k=this.getBlockHeight()/2,S=this.setting.width/this.setting.height;let T=this.setting.width,F=this.setting.height,I=M-T;return this.setting.size==="stretch"?(w<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(y="portrait"),T=y==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,T>this.setting.maxWidth&&(T=this.setting.maxWidth),F=T/S,F>this.getBlockHeight()&&(F=this.getBlockHeight(),T=F*S),I=y==="portrait"?M-T/2-T:M-T):w<2*T&&this.app.getSettings().usePortrait&&(y="portrait",I=M-T/2-T),this.boundsRect={left:I,top:k-F/2,width:2*T,height:F,pageWidth:T},y}setShadowData(y,w,M,k){if(!this.app.getSettings().drawShadow)return;const S=100*this.getSettings().maxShadowOpacity;this.shadow={pos:y,angle:w,width:3*this.getRect().pageWidth/4*M/100,opacity:(100-M)*S/100/100,direction:k,progress:2*M}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(y){this.pageRect=y}setDirection(y){this.direction=y}setRightPage(y){y!==null&&y.setOrientation(1),this.rightPage=y}setLeftPage(y){y!==null&&y.setOrientation(0),this.leftPage=y}setBottomPage(y){y!==null&&y.setOrientation(this.direction===1?0:1),this.bottomPage=y}setFlippingPage(y){y!==null&&y.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=y}convertToBook(y){const w=this.getRect();return{x:y.x-w.left,y:y.y-w.top}}isSafari(){return this.safari}convertToPage(y,w){w||(w=this.direction);const M=this.getRect();return{x:w===0?y.x-M.left-M.width/2:M.width/2-y.x+M.left,y:y.y-M.top}}convertToGlobal(y,w){if(w||(w=this.direction),y==null)return null;const M=this.getRect();return{x:w===0?y.x+M.left+M.width/2:M.width/2-y.x+M.left,y:y.y+M.top}}convertRectToGlobal(y,w){return w||(w=this.direction),{topLeft:this.convertToGlobal(y.topLeft,w),topRight:this.convertToGlobal(y.topRight,w),bottomLeft:this.convertToGlobal(y.bottomLeft,w),bottomRight:this.convertToGlobal(y.bottomRight,w)}}}class b extends v{constructor(y,w,M){super(y,w),this.canvas=M,this.ctx=M.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const y=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(y.left+y.pageWidth,y.top,y.width,y.height),this.ctx.clip())}drawBookShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath();const w=y.width/20;this.ctx.rect(y.left,y.top,y.width,y.height);const M={x:y.left+y.width/2-w/2,y:0};this.ctx.translate(M.x,M.y);const k=this.ctx.createLinearGradient(0,0,w,0);k.addColorStop(0,"rgba(0, 0, 0, 0)"),k.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),k.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),k.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),k.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),k.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=k,this.ctx.fillRect(0,0,w,2*y.height),this.ctx.restore()}drawOuterShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(y.left,y.top,y.width,y.height);const w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(w.x,w.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const M=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),M.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),M.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),M.addColorStop(0,"rgba(0, 0, 0, 0)"),M.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=M,this.ctx.fillRect(0,0,this.shadow.width,2*y.height),this.ctx.restore()}drawInnerShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath();const w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),M=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(M.topLeft.x,M.topLeft.y),this.ctx.lineTo(M.topRight.x,M.topRight.y),this.ctx.lineTo(M.bottomRight.x,M.bottomRight.y),this.ctx.lineTo(M.bottomLeft.x,M.bottomLeft.y),this.ctx.translate(w.x,w.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const k=3*this.shadow.width/4,S=this.ctx.createLinearGradient(0,0,k,0);this.shadow.direction===0?(this.ctx.translate(-k,-100),S.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),S.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=S,this.ctx.fillRect(0,0,k,2*y.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class _{constructor(y,w,M){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=S=>{if(this.checkTarget(S.target)){const T=this.getMousePos(S.clientX,S.clientY);this.app.startUserTouch(T),S.preventDefault()}},this.onTouchStart=S=>{if(this.checkTarget(S.target)&&S.changedTouches.length>0){const T=S.changedTouches[0],F=this.getMousePos(T.clientX,T.clientY);this.touchPoint={point:F,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(F)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||S.preventDefault()}},this.onMouseUp=S=>{const T=this.getMousePos(S.clientX,S.clientY);this.app.userStop(T)},this.onMouseMove=S=>{const T=this.getMousePos(S.clientX,S.clientY);this.app.userMove(T,!1)},this.onTouchMove=S=>{if(S.changedTouches.length>0){const T=S.changedTouches[0],F=this.getMousePos(T.clientX,T.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-F.x)>10||this.app.getState()!=="read")&&S.cancelable&&this.app.userMove(F,!0),this.app.getState()!=="read"&&S.preventDefault()):this.app.userMove(F,!0)}},this.onTouchEnd=S=>{if(S.changedTouches.length>0){const T=S.changedTouches[0],F=this.getMousePos(T.clientX,T.clientY);let I=!1;if(this.touchPoint!==null){const B=F.x-this.touchPoint.point.x,$=Math.abs(F.y-this.touchPoint.point.y);Math.abs(B)>this.swipeDistance&&$<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(B>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),I=!0),this.touchPoint=null}this.app.userStop(F,I)}},this.parentElement=y,y.classList.add("stf__parent"),y.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=y.querySelector(".stf__wrapper"),this.app=w;const k=this.app.getSettings().usePortrait?1:2;y.style.minWidth=M.minWidth*k+"px",y.style.minHeight=M.minHeight+"px",M.size==="fixed"&&(y.style.minWidth=M.width*k+"px",y.style.minHeight=M.height+"px"),M.autoSize&&(y.style.width="100%",y.style.maxWidth=2*M.maxWidth+"px"),y.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=M.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(y){this.wrapper.classList.remove("--portrait","--landscape"),y==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(y,w){const M=this.distElement.getBoundingClientRect();return{x:y-M.left,y:w-M.top}}checkTarget(y){return!this.app.getSettings().clickEventForward||!["a","button"].includes(y.tagName.toLowerCase())}}class N extends _{constructor(y,w,M,k){super(y,w,M),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=y.querySelector(".stf__block"),this.items=k;for(const S of k)this.distElement.appendChild(S);this.setHandlers()}clear(){for(const y of this.items)this.parentElement.appendChild(y)}updateItems(y){this.removeHandlers(),this.distElement.innerHTML="";for(const w of y)this.distElement.appendChild(w);this.items=y,this.setHandlers()}update(){this.app.getRender().update()}}class C extends _{constructor(y,w,M){super(y,w,M),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=y.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const y=getComputedStyle(this.canvas),w=parseInt(y.getPropertyValue("width"),10),M=parseInt(y.getPropertyValue("height"),10);this.canvas.width=w,this.canvas.height=M}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class R extends v{constructor(y,w,M){super(y,w),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=M,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const y=this.getRect(),w=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let M=(100-w)*(2.5*y.pageWidth)/100+20;M>y.pageWidth&&(M=y.pageWidth);let k=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${M}px;
            height: ${y.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*w/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${y.left+y.width/2}px;
            transform-origin: 0 0;
        `;k+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=k}drawHardOuterShadow(){const y=this.getRect();let w=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*y.pageWidth)/100+20;w>y.pageWidth&&(w=y.pageWidth);let M=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${w}px;
            height: ${y.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${y.left+y.width/2}px;
            transform-origin: 0 0;
        `;M+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=M}drawInnerShadow(){const y=this.getRect(),w=3*this.shadow.width/4,M=this.getDirection()===0?w:0,k=this.getDirection()===0?"to left":"to right",S=this.convertToGlobal(this.shadow.pos),T=this.shadow.angle+3*Math.PI/2,F=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let I="polygon( ";for(const $ of F){let H=this.getDirection()===1?{x:-$.x+this.shadow.pos.x,y:$.y-this.shadow.pos.y}:{x:$.x-this.shadow.pos.x,y:$.y-this.shadow.pos.y};H=d.GetRotatedPoint(H,{x:M,y:100},T),I+=H.x+"px "+H.y+"px, "}I=I.slice(0,-2),I+=")";const B=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${w}px;
            height: ${2*y.height}px;
            background: linear-gradient(${k},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${M}px 100px;
            transform: translate3d(${S.x-M}px, ${S.y-100}px, 0) rotate(${T}rad);
            clip-path: ${I};
            -webkit-clip-path: ${I};
        `;this.innerShadow.style.cssText=B}drawOuterShadow(){const y=this.getRect(),w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),M=this.shadow.angle+3*Math.PI/2,k=this.getDirection()===1?this.shadow.width:0,S=this.getDirection()===0?"to right":"to left",T=[{x:0,y:0},{x:y.pageWidth,y:0},{x:y.pageWidth,y:y.height},{x:0,y:y.height}];let F="polygon( ";for(const B of T)if(B!==null){let $=this.getDirection()===1?{x:-B.x+this.shadow.pos.x,y:B.y-this.shadow.pos.y}:{x:B.x-this.shadow.pos.x,y:B.y-this.shadow.pos.y};$=d.GetRotatedPoint($,{x:k,y:100},M),F+=$.x+"px "+$.y+"px, "}F=F.slice(0,-2),F+=")";const I=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*y.height}px;
            background: linear-gradient(${S}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${k}px 100px;
            transform: translate3d(${w.x-k}px, ${w.y-100}px, 0) rotate(${M}rad);
            clip-path: ${F};
            -webkit-clip-path: ${F};
        `;this.outerShadow.style.cssText=I}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const y=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(y))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const y of this.app.getPageCollection().getPages())y!==this.leftPage&&y!==this.rightPage&&y!==this.flippingPage&&y!==this.bottomPage&&(y.getElement().style.cssText="display: none"),y.getTemporaryCopy()!==this.flippingPage&&y.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class D{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(y){const w=this._default;if(Object.assign(w,y),w.size!=="stretch"&&w.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(w.width<=0||w.height<=0)throw new Error("Invalid width or height");if(w.flippingTime<=0)throw new Error("Invalid flipping time");return w.size==="stretch"?(w.minWidth<=0&&(w.minWidth=100),w.maxWidth<w.minWidth&&(w.maxWidth=2e3),w.minHeight<=0&&(w.minHeight=100),w.maxHeight<w.minHeight&&(w.maxHeight=2e3)):(w.minWidth=w.width,w.maxWidth=w.width,w.minHeight=w.height,w.maxHeight=w.height),w}}(function(A,y){y===void 0&&(y={});var w=y.insertAt;if(typeof document!="undefined"){var M=document.head||document.getElementsByTagName("head")[0],k=document.createElement("style");k.type="text/css",w==="top"&&M.firstChild?M.insertBefore(k,M.firstChild):M.appendChild(k),k.styleSheet?k.styleSheet.cssText=A:k.appendChild(document.createTextNode(A))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),s.PageFlip=class extends class{constructor(){this.events=new Map}on(A,y){return this.events.has(A)?this.events.get(A).push(y):this.events.set(A,[y]),this}off(A){this.events.delete(A)}trigger(A,y,w=null){if(this.events.has(A))for(const M of this.events.get(A))M({data:w,object:y})}}{constructor(A,y){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new D().getSettings(y),this.block=A}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(A){this.ui=new C(this.block,this,this.setting);const y=this.ui.getCanvas();this.render=new b(this,this.setting,y),this.flipController=new g(this.render,this),this.pages=new l(this,this.render,A),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(A){this.ui=new N(this.block,this,this.setting,A),this.render=new R(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),A),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(A){const y=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new l(this,this.render,A),this.pages.load(),this.pages.show(y),this.trigger("update",this,{page:y,mode:this.render.getOrientation()})}updateFromHtml(A){const y=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),A),this.pages.load(),this.ui.updateItems(A),this.render.reload(),this.pages.show(y),this.trigger("update",this,{page:y,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(A){this.pages.show(A)}flipNext(A="top"){this.flipController.flipNext(A)}flipPrev(A="top"){this.flipController.flipPrev(A)}flip(A,y="top"){this.flipController.flipToPage(A,y)}updateState(A){this.trigger("changeState",this,A)}updatePageIndex(A){this.trigger("flip",this,A)}updateOrientation(A){this.ui.setOrientationStyle(A),this.update(),this.trigger("changeOrientation",this,A)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(A){return this.pages.getPage(A)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(A){this.mousePosition=A,this.isUserTouch=!0,this.isUserMove=!1}userMove(A,y){this.isUserTouch||y||!this.setting.showPageCorners?this.isUserTouch&&d.GetDistanceBetweenTwoPoint(this.mousePosition,A)>5&&(this.isUserMove=!0,this.flipController.fold(A)):this.flipController.showCorner(A)}userStop(A,y=!1){this.isUserTouch&&(this.isUserTouch=!1,y||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(A)))}},Object.defineProperty(s,"__esModule",{value:!0})}))})(nh,nh.exports)),nh.exports}var Bq=Fq();const $q="_viewerRoot_hj39c_5",Oq="_stage_hj39c_17",Vq="_host_hj39c_43",Uq="_hud_hj39c_91",zq="_hBtn_hj39c_125",Hq="_hText_hj39c_153",Gq="_title_hj39c_167",Wq="_sep_hj39c_169",qq="_spacer_hj39c_171",Kq="_errorBox_hj39c_175",zr={viewerRoot:$q,stage:Oq,host:Vq,hud:Uq,hBtn:zq,hText:Hq,title:Gq,sep:Wq,spacer:qq,errorBox:Kq},Qq="/".endsWith("/")?"/":"//",EA=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${Qq}${e}`.replace(/\/{2,}/g,"/")},Xq=async t=>{const e=EA(`flipbooks/${t}/manifest.json`),s=await fetch(e,{cache:"no-cache"});if(!s.ok)throw new Error(`Manifest not found for slug "${t}"`);return s.json()},Yq=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},Jq=(t,e,s)=>Math.max(e,Math.min(s,t)),tn={hostEl:null,pf:null,slug:null},Li={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},Zq=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function eK(t){for(const e of t)e&&(Li.cache.has(e)||Li.inFlight.has(e)||Li.queue.includes(e)||Li.queue.push(e));AA()}function AA(){Zq(()=>{for(;Li.inFlight.size<Li.maxParallel&&Li.queue.length>0;){const t=Li.queue.shift();Li.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{Li.inFlight.delete(t),Li.cache.add(t),AA()},e.src=t}})}const tK=({slug:t,initialPage:e=1,onReady:s,onPageChange:r,noSound:i=!0})=>{const a=E.useRef(null),l=E.useRef(null),[d,u]=E.useState(null),[h,m]=E.useState(null),g=E.useRef(),v=E.useRef(),b=E.useRef(e);E.useEffect(()=>{g.current=s},[s]),E.useEffect(()=>{v.current=r},[r]),E.useEffect(()=>{b.current=e},[e]);const _=E.useMemo(()=>EA(`flipbooks/${t}`),[t]),N=E.useCallback(A=>{var y,w;if((y=A.srcset)!=null&&y.length){const M=[...A.srcset].sort((S,T)=>S.width-T.width),k=(w=M.find(S=>S.width>=1600))!=null?w:M[M.length-1];return/^https?:\/\//i.test(k.src)||k.src.startsWith("/")?k.src:`${_}/${k.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(A.src)||A.src.startsWith("/")?A.src:`${_}/${A.src}`.replace(/\/{2,}/g,"/")},[_]);E.useEffect(()=>{let A=!0;return m(null),Xq(t).then(y=>{A&&u(y)}).catch(y=>{A&&m(y.message||"Failed to load flipbook manifest.")}),()=>{A=!1}},[t]),E.useEffect(()=>{const A=l.current,y=a.current;if(!A||!y||!d||(tn.hostEl||(tn.hostEl=document.createElement("div"),tn.hostEl.className=zr.host),tn.hostEl.parentElement!==A&&A.appendChild(tn.hostEl),!tn.hostEl.isConnected))return;if(!(!tn.pf||tn.slug!==t)){try{tn.pf.update()}catch($){}return}if(tn.pf){try{tn.pf.destroy()}catch($){}tn.pf=null}const M={width:d.pageWidth,height:d.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},k=new Bq.PageFlip(tn.hostEl,M);tn.pf=k,tn.slug=t;const S=d.pages.map(N);k.loadFromImages(S);const T=$=>{const H=[],z=$+1,W=$+2;d.pages[z]&&H.push(N(d.pages[z])),d.pages[W]&&H.push(N(d.pages[W])),eK(H)},F=()=>{var H;const $=Jq(b.current,1,d.pageCount)-1;k.turnToPage($,"hard"),setTimeout(()=>T($),220),(H=g.current)==null||H.call(g,k)};k.on("init",F),k.on("flip",$=>{var z;const H=$.data;(z=v.current)==null||z.call(v,H),setTimeout(()=>T(H),220)});const I=new ResizeObserver(()=>{var $;try{($=tn.pf)==null||$.update()}catch(H){}});I.observe(y);const B=$=>{var H,z;$.key==="ArrowLeft"&&($.preventDefault(),(H=tn.pf)==null||H.flipPrev()),$.key==="ArrowRight"&&($.preventDefault(),(z=tn.pf)==null||z.flipNext())};return window.addEventListener("keydown",B,{passive:!1}),()=>{window.removeEventListener("keydown",B),I.disconnect()}},[d,N,t]);const C=()=>{var A;return(A=tn.pf)==null?void 0:A.flipPrev()},R=()=>{var A;return(A=tn.pf)==null?void 0:A.flipNext()},D=()=>{var w;const A=a.current;if(!A)return;const y=A;(w=y.requestFullscreen||y.webkitRequestFullscreen||y.msRequestFullscreen)==null||w.call(y)};return h?n.jsxs("div",{className:zr.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):d?n.jsxs("div",{className:zr.viewerRoot,ref:a,"aria-label":d.title,children:[n.jsx("div",{className:zr.stage,ref:l}),n.jsxs("div",{className:zr.hud,children:[n.jsx("button",{className:zr.hBtn,onClick:C,"aria-label":"Zurck",children:""}),n.jsxs("div",{className:zr.hText,children:[n.jsx("span",{className:zr.title,children:d.title}),n.jsx("span",{className:zr.sep,children:""}),n.jsxs("span",{children:[d.pageCount," Seiten"]})]}),n.jsx("div",{className:zr.spacer}),Yq()&&n.jsx("button",{className:zr.hBtn,onClick:D,"aria-label":"Fullscreen",children:""}),n.jsx("button",{className:zr.hBtn,onClick:R,"aria-label":"Weiter",children:""})]})]}):n.jsx("div",{className:zr.errorBox,children:"Lade Flipbook"})},sK=X.memo(tK),nK={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},rK=()=>{const t="sf-history-book",[e,s]=E.useState(1),r=E.useRef(null),i=E.useMemo(()=>{var m;return(m=nK[e])!=null?m:[]},[e]),a=E.useCallback(m=>{r.current=m},[]),l=E.useCallback(m=>{s(m+1)},[]),d=E.useCallback(m=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,m-1))}catch(v){}},[]),u=E.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipPrev()},[]),h=E.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipNext()},[]);return n.jsx(Bt,{title:"SF History Book",children:n.jsxs("div",{className:Lo.pageWrap,children:[n.jsx("div",{className:Lo.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),n.jsxs("div",{className:Lo.viewerHost,children:[n.jsx(sK,{slug:t,initialPage:1,onReady:a,onPageChange:l,noSound:!0}),n.jsxs("div",{className:Lo.overlay,"aria-hidden":!0,children:[n.jsx("div",{className:Lo.dragZoneLeft,onClick:u}),n.jsx("div",{className:Lo.dragZoneRight,onClick:h}),i.map((m,g)=>{const v={"--t":`${m.t}%`,"--l":`${m.l}%`,"--w":`${m.w}%`,"--h":`${m.h}%`};return m.kind==="goto"?n.jsx("button",{className:Lo.inbookLink,style:v,"aria-label":m.label,onClick:()=>d(m.toPage)},g):n.jsx("a",{className:Lo.inbookLink,style:v,"aria-label":m.label,href:m.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},iK="_root_zvspc_1",aK="_hero_zvspc_15",oK="_eyebrow_zvspc_47",lK="_heading_zvspc_63",cK="_lead_zvspc_77",dK="_freshnessHint_zvspc_91",uK="_hintLabel_zvspc_105",hK="_hintText_zvspc_121",mK="_grid_zvspc_135",pK="_card_zvspc_147",fK="_cardTitle_zvspc_163",gK="_paragraph_zvspc_177",xK="_list_zvspc_191",yK="_listItem_zvspc_207",jr={root:iK,hero:aK,eyebrow:oK,heading:lK,lead:cK,freshnessHint:dK,hintLabel:uK,hintText:hK,grid:mK,card:pK,cardTitle:fK,paragraph:gK,list:xK,listItem:yK},vK=()=>{const{t}=no(),e=t("help.dataFreshness.body").split(`

`),s=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}];return n.jsx(Bt,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:n.jsxs("div",{className:jr.root,children:[n.jsxs("section",{className:jr.hero,children:[n.jsxs("div",{children:[n.jsx("p",{className:jr.eyebrow,children:t("help.hero.eyebrow")}),n.jsx("h1",{className:jr.heading,children:t("help.hero.heading")}),n.jsx("p",{className:jr.lead,children:t("help.hero.lead")})]}),n.jsxs("div",{className:jr.freshnessHint,children:[n.jsx("div",{className:jr.hintLabel,children:t("help.hero.freshnessLabel")}),n.jsx("p",{className:jr.hintText,children:t("help.hero.freshnessBody")})]})]}),n.jsx("div",{className:jr.grid,children:s.map(r=>{var a;const i=r.key==="login"?"linking":void 0;return n.jsxs("section",{id:i,className:jr.card,children:[n.jsx("h2",{className:jr.cardTitle,children:r.title}),(a=r.paragraphs)==null?void 0:a.map((l,d)=>n.jsx("p",{className:jr.paragraph,children:l},`${r.key}-p-${d}`)),r.bullets&&n.jsx("ul",{className:jr.list,children:r.bullets.map(l=>n.jsx("li",{className:jr.listItem,children:l},`${r.key}-${l}`))})]},r.key)})})]})})},IA=[{id:"eu1",label:"EU 1",region:"EU",active:!0},{id:"eu2",label:"EU 2",region:"EU",active:!0},{id:"us1",label:"US 1",region:"NA",active:!0}];Object.fromEntries(IA.map(t=>[t.id,t]));const RA="TL_FILTERS_V2",Tr={servers:[],classes:[],days:"all",sortBy:"level",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function bK(){var t;try{const e=localStorage.getItem(RA);if(!e)return Tr;const s=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(s.days)?s.days:Tr.days,i=["cards","buttons","table"].includes(s.listView)?s.listView:Tr.listView,a=["hud","sheet"].includes(s.filterMode)?s.filterMode:Tr.filterMode,l=typeof s.quickFav=="boolean"?s.quickFav:!!s.favoritesOnly,d=typeof s.quickActive=="boolean"?s.quickActive:!!s.activeOnly;return{...Tr,...s,servers:Array.isArray(s.servers)?s.servers:[],classes:Array.isArray(s.classes)?s.classes:[],favoritesOnly:typeof s.favoritesOnly=="boolean"?s.favoritesOnly:l,activeOnly:typeof s.activeOnly=="boolean"?s.activeOnly:d,quickFav:l,quickActive:d,days:r,listView:i,filterMode:a,bottomFilterOpen:!!s.bottomFilterOpen,serverSheetOpen:!!s.serverSheetOpen,sortBy:typeof s.sortBy=="string"?s.sortBy:Tr.sortBy,searchText:typeof s.searchText=="string"?s.searchText:Tr.searchText}}catch(e){return Tr}}function _K(t){try{localStorage.setItem(RA,JSON.stringify(t))}catch(e){}}const PA=E.createContext(null),ON=t=>Array.from(new Set(t));function Kp(t,e){return typeof t=="function"?t(e):t}function wK({children:t}){const[e,s]=E.useState(()=>bK());E.useEffect(()=>{_K(e)},[e]);const r=S=>s(T=>({...T,servers:ON(Kp(S,T.servers))})),i=S=>s(T=>{const F=new Set(T.servers);return F.has(S)?F.delete(S):F.add(S),{...T,servers:Array.from(F)}}),a=()=>s(S=>({...S,servers:[]})),l=S=>s(T=>({...T,classes:ON(Kp(S,T.classes))})),d=S=>s(T=>{const F=new Set(T.classes);return F.has(S)?F.delete(S):F.add(S),{...T,classes:Array.from(F)}}),u=()=>s(S=>({...S,classes:[]})),h=S=>s(T=>({...T,days:S})),m=S=>h(S),g=S=>s(T=>({...T,sortBy:S||"level"})),v=S=>s(T=>({...T,favoritesOnly:!!S,quickFav:!!S})),b=S=>s(T=>({...T,activeOnly:!!S,quickActive:!!S})),_=S=>s(T=>({...T,searchText:S})),N=S=>s(T=>{const F=Kp(S,T.quickFav);return{...T,quickFav:F,favoritesOnly:F}}),C=S=>s(T=>{const F=Kp(S,T.quickActive);return{...T,quickActive:F,activeOnly:F}}),R=S=>s(T=>({...T,filterMode:S})),D=S=>s(T=>({...T,listView:S})),A=S=>s(T=>({...T,bottomFilterOpen:!!S})),y=S=>s(T=>({...T,serverSheetOpen:!!S})),w=()=>s(Tr),M=()=>w(),k=E.useMemo(()=>({servers:e.servers,classes:e.classes,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:l,toggleClass:d,clearClasses:u,setDays:h,setRange:m,setSortBy:g,setFavoritesOnly:v,setActiveOnly:b,setSearchText:_,setQuickFav:N,setQuickActive:C,setFilterMode:R,setListView:D,setBottomFilterOpen:A,setServerSheetOpen:y,resetFilters:w,resetAll:M}),[e]);return n.jsx(PA.Provider,{value:k,children:t})}function pm(){const t=E.useContext(PA);return t||{...Tr,range:Tr.days,searchText:Tr.searchText,quickFav:Tr.quickFav,quickActive:Tr.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const jK="_hudWrap_107o7_9",SK="_hudBtn_107o7_11",NK="_hudSubBtn_107o7_15",kK="_iconRow_107o7_19",CK="_segmented_107o7_21",TK="_sortLabel_107o7_27",EK="_sortSelect_107o7_29",AK="_chip_107o7_31",IK="_isActive_107o7_33",Sr={hudWrap:jK,hudBtn:SK,hudSubBtn:NK,iconRow:kK,segmented:CK,sortLabel:TK,sortSelect:EK,chip:AK,isActive:IK};function RK({active:t=!1,title:e,iconUrl:s,fallback:r="",size:i=40,onClick:a}){const l=Math.round(i*.7),d=X.useMemo(()=>{const R=[],D=R5(s,l*2,l*2,"contain");D&&R.push(D);const A=Rr(s,l*2);return A&&A!==D&&R.push(A),!R.length&&s&&R.push(s),R},[s,l]),[u,h]=X.useState(0),[m,g]=X.useState(!1),[v,b]=X.useState(!1);X.useEffect(()=>h(0),[d]);const _=d[u]||"",N={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:v||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};m&&(N.background="rgba(255,255,255,.04)"),t&&(N.outline="2px solid #5C8BC6");const C={display:"block",width:l,height:l,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return n.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),style:N,children:_?n.jsx("img",{src:_,alt:e||"class",width:l,height:l,loading:"lazy",style:C,onError:()=>{h(R=>R+1<d.length?R+1:R)}}):n.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}const PK=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"90d",value:90},{label:"all",value:"all"}];function LK(){const{servers:t,classes:e,setClasses:s,range:r,setRange:i,sortBy:a,setSortBy:l,quickFav:d,setQuickFav:u,quickActive:h,setQuickActive:m,filterMode:g,setBottomFilterOpen:v,serverSheetOpen:b,setServerSheetOpen:_,resetAll:N}=pm();return n.jsxs("div",{className:Sr.hudWrap,children:[n.jsxs("button",{type:"button",className:Sr.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),_(!0)},"aria-haspopup":"dialog","aria-expanded":b||!1,"aria-label":`Select servers${t.length?` (${t.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",t.length?`(${t.length})`:""]}),n.jsxs("div",{className:Sr.iconRow,children:[Sn.map(C=>n.jsx(RK,{active:e.includes(C.key),title:C.label,iconUrl:C.iconUrl,fallback:C.fallback,size:40,onClick:()=>s(R=>R.includes(C.key)?R.filter(D=>D!==C.key):[...R,C.key])},C.key)),n.jsx("button",{type:"button",className:Sr.hudSubBtn,onClick:()=>s(Sn.map(C=>C.key)),children:"All"}),n.jsx("button",{type:"button",className:Sr.hudSubBtn,onClick:()=>s([]),children:"None"})]}),n.jsx("div",{className:Sr.segmented,role:"group","aria-label":"Range",children:PK.map(C=>n.jsx("button",{type:"button","aria-pressed":r===C.value,onClick:()=>i(C.value),children:C.label},C.label))}),n.jsx("label",{className:Sr.sortLabel,htmlFor:"toplists-sort",children:"Sort"}),n.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:a,onChange:C=>l(C.target.value),className:Sr.sortSelect,"aria-label":"Sort",children:[n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"lastScan",children:"Last scan"})]}),n.jsx("button",{type:"button",className:`${Sr.chip} ${d?Sr.isActive:""}`,onClick:()=>u(C=>!C),children:" Favorites"}),n.jsx("button",{type:"button",className:`${Sr.chip} ${h?Sr.isActive:""}`,onClick:()=>m(C=>!C),children:" Active"}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsx("button",{type:"button",className:Sr.hudSubBtn,onClick:N,children:"Reset"}),g==="sheet"&&n.jsx("button",{type:"button",className:Sr.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),v(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const DK=["EU","US","INT","Fusion"],Vn={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"};function MK({open:t,onClose:e,mode:s="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:l,onClearAll:d}){const[u,h]=E.useState(""),m=E.useRef(null);E.useEffect(()=>{if(!t)return;const b=_=>{_.key==="Escape"&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e]),E.useEffect(()=>{if(t&&m.current){const b=m.current.querySelector("#sheet-serversearch");b==null||b.focus()}},[t]);const g=DK,v=b=>{const _=u.trim().toLowerCase();return _?b.toLowerCase().includes(_):!0};return t?n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:FK,onClick:b=>{b.target===b.currentTarget&&e()},children:n.jsxs("div",{ref:m,style:s==="modal"?LA:BK,className:"sf-server-sheet",children:[n.jsxs("div",{style:$K,children:[n.jsx("h2",{id:"server-dialog-title",style:OK,children:"Select servers"}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{type:"button",onClick:d,style:VN,children:"Clear"}),n.jsx("button",{type:"button",onClick:e,style:qK,children:"Done"})]})]}),n.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[n.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),n.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:b=>h(b.target.value),"aria-label":"Search servers",autoComplete:"off",style:UK})]}),n.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(b=>{const _=(r[b]||[]).filter(v);return n.jsxs("section",{"aria-labelledby":`region-${b}`,children:[n.jsxs("div",{style:zK,children:[n.jsx("h3",{id:`region-${b}`,style:VK,children:b}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",style:VN,onClick:()=>{l?l(b):_.filter(C=>!i.includes(C)).forEach(a)},children:"Select all"})})]}),n.jsxs("div",{style:HK,children:[_.map(N=>{const C=i.includes(N);return n.jsx("button",{type:"button",onClick:()=>a(N),"aria-pressed":C,title:N,style:{...GK,...C?WK:null},children:N},N)}),_.length===0&&n.jsx("div",{style:{color:Vn.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},b)})})]})}):null}const FK={position:"fixed",inset:0,background:Vn.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},LA={width:"min(900px, 100%)",background:Vn.tile,border:`1px solid ${Vn.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:Vn.text},BK={...LA,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},$K={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},OK={fontSize:18,margin:0},VK={fontSize:14,margin:0,color:Vn.text2},UK={width:"100%",background:Vn.input,color:Vn.text,border:`1px solid ${Vn.line}`,borderRadius:12,padding:"10px 12px"},zK={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},HK={display:"flex",flexWrap:"wrap",gap:8},GK={background:Vn.chip,border:`1px solid ${Vn.line}`,padding:"6px 10px",borderRadius:999,color:Vn.text},WK={outline:`2px solid ${Vn.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},qK={background:"#25456B",color:Vn.text,border:`1px solid ${Vn.accent}`,borderRadius:10,padding:"8px 12px"},VN={background:"transparent",color:Vn.text,border:`1px solid ${Vn.line}`,borderRadius:10,padding:"8px 12px"},KK=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=KK,document.head.appendChild(e)}}const $n={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function QK({open:t,onClose:e}){const{searchText:s,setSearchText:r,range:i,setRange:a,sortBy:l,setSortBy:d,quickFav:u,setQuickFav:h,quickActive:m,setQuickActive:g}=pm(),v=E.useRef(null);if(E.useEffect(()=>{if(!t)return;const _=N=>{N.key==="Escape"&&e()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[t,e]),E.useEffect(()=>{if(t&&v.current){const _=v.current.querySelector("#sheet-search");_==null||_.focus()}},[t]),!t)return null;const b=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:XK,onClick:_=>{_.target===_.currentTarget&&e()},children:n.jsxs("div",{ref:v,style:YK,children:[n.jsxs("div",{style:JK,children:[n.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:$n.text},children:"Filters"}),n.jsx("button",{type:"button",onClick:e,style:eQ,children:"Done"})]}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),n.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:s,onChange:_=>r(_.target.value),"aria-label":"Search",autoComplete:"off",style:DA})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("span",{style:{color:$n.text2,fontSize:12},children:"Range"}),n.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:b.map(_=>n.jsx("button",{type:"button","aria-pressed":i===_.value,onClick:()=>a(_.value),style:{...wv,...i===_.value?jv:null},children:_.label},_.label))})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:$n.text2,fontSize:12},children:"Sort"}),n.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:l,onChange:_=>d(_.target.value),"aria-label":"Sort",autoComplete:"off",style:ZK,children:[n.jsx("option",{value:"sum",children:"Base Sum"}),n.jsx("option",{value:"main",children:"Main Base Stat"}),n.jsx("option",{value:"constitution",children:"Constitution"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"delta",children:" Rank"}),n.jsx("option",{value:"lastActivity",disabled:!0,children:"Last activity (disabled)"})]})]}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[n.jsx("button",{type:"button",onClick:()=>h(_=>!_),"aria-pressed":u,style:{...wv,...u?jv:null},children:" Favorites"}),n.jsx("button",{type:"button",onClick:()=>g(_=>!_),"aria-pressed":m,style:{...wv,...m?jv:null},children:" Active"})]})]})})}const XK={position:"fixed",inset:0,background:$n.backdrop,zIndex:60,display:"grid",alignItems:"end"},YK={background:$n.tile,borderTop:`1px solid ${$n.line}`,borderLeft:`1px solid ${$n.line}`,borderRight:`1px solid ${$n.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:$n.text,maxHeight:"80vh",overflow:"auto"},JK={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},DA={width:"100%",background:$n.input,color:$n.text,border:`1px solid ${$n.line}`,borderRadius:12,padding:"10px 12px"},ZK={...DA,appearance:"none"},wv={background:"#14273E",border:`1px solid ${$n.line}`,padding:"6px 10px",borderRadius:999,color:$n.text},jv={outline:`2px solid ${$n.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},eQ={background:"#25456B",color:$n.text,border:`1px solid ${$n.accent}`,borderRadius:10,padding:"8px 12px"},tQ=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=tQ,document.head.appendChild(e)}}function sQ(){var i;const t=pm(),e=(i=t==null?void 0:t.listView)!=null?i:"table",s=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:s;return e==="table"?null:n.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:n.jsxs("div",{children:["Showing ",r.length," / ",s.length]})}),e==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var l,d,u,h,m,g,v;return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[n.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(l=a.name)!=null?l:""}),n.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(d=a.server)!=null?d:""})]}),n.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",n.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(m=a.scrapbook)!=null?m:""]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[n.jsx(Sv,{children:a.active?"Active":"Idle"}),a.favorite&&n.jsx(Sv,{children:" Fav"}),n.jsx(Sv,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(v=a.id)!=null?v:`${a.name}-${a.server}`)})}),e==="buttons"&&n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var l,d,u,h;return n.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(l=a.name)!=null?l:"",n.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(d=a.server)!=null?d:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function Sv({children:t}){return n.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const c_="stats_public",nQ="toplists_players_v1";async function rQ(){try{const t=await Js(qt(xt,c_,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const s=(t.data()||{}).servers;let r=null;if(Array.isArray(s))r=s;else if(typeof s=="string")try{const a=JSON.parse(s);Array.isArray(a)?r=a:console.warn("[toplistsFirestore] Server bundle string is not an array after parse")}catch(a){console.warn("[toplistsFirestore] Failed to parse server bundle string",a)}if(!Array.isArray(r))return console.warn("[toplistsFirestore] Server bundle missing/invalid, falling back to static config"),{ok:!1,error:"decode_failed",detail:"servers missing or invalid"};const i=[];for(const a of r){if(typeof a!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:a});continue}const l=a.trim();l&&i.push(l)}return{ok:!0,servers:i}}catch(t){return console.error("[toplistsFirestore] Firestore error while loading toplist servers",t),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}function Y0(t){const e=a=>(a!=null?a:"").toString().trim().toLowerCase(),s=e(t.group)||"all",r=e(t.timeRange)||"all",i=e(t.sort)||"sum";return`${s}__${r}__${i}`}function iQ(t,e){const s=t.toUpperCase(),r=e.toUpperCase();return r==="ALL"?`${s}_all_sum`:`${s}_${r}_sum`}async function aQ(){try{const t=await Js(qt(xt,c_,"toplists_meta_v1"));if(!t.exists())return null;const e=t.data();return!e||typeof e!="object"?null:e}catch(t){return console.error("[toplistsFirestore] meta decode failed",t),null}}const Gr=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},Di=t=>typeof t=="string"?t:null,oQ=t=>{if(!t||typeof t!="object")return null;const e=Di(t.server),s=Di(t.name),r=Di(t.class);return!e||!s||!r?null:{flag:Di(t.flag),deltaRank:Gr(t.deltaRank),server:e,name:s,class:r,level:Gr(t.level),guild:Di(t.guild),main:Gr(t.main),con:Gr(t.con),sum:Gr(t.sum),ratio:Gr(t.ratio),mine:Gr(t.mine),treasury:Gr(t.treasury),lastScan:Di(t.lastScan),deltaSum:Gr(t.deltaSum)}};async function UN(t){try{const e=await Js(qt(xt,c_,nQ,"lists",t));if(!e.exists())return{ok:!1,error:"not_found"};const s=e.data()||{},r=Di(s.entity)||"players",i=Di(s.group),a=Di(s.server),l=Di(s.metric),d=Di(s.timeRange),u=Gr(s.limit),h=Array.isArray(s.rows)?s.rows:null;if(r!=="players"||!i||!a||!l||!d||u==null||!h)return console.error("[toplistsFirestore] Decode failed",{entity:r,group:i,server:a,metric:l,timeRange:d,limit:u,hasRowsArray:Array.isArray(s.rows)}),{ok:!1,error:"decode_error",detail:"missing required toplist fields"};const m=[];for(const v of h){const b=oQ(v);if(!b)return console.error("[toplistsFirestore] Row decode failed",v),{ok:!1,error:"decode_error",detail:"invalid row shape"};m.push(b)}return{ok:!0,list:{id:t,entity:"players",group:i,server:a,metric:l,timeRange:d,limit:u,updatedAt:Gr(s.updatedAt),nextUpdateAt:s.nextUpdateAt!==void 0?Gr(s.nextUpdateAt):void 0,ttlSec:s.ttlSec!==void 0?Gr(s.ttlSec):void 0,rows:m}}}catch(e){return console.error("[toplistsFirestore] Firestore error",e),{ok:!1,error:"firestore_error",detail:e==null?void 0:e.message}}}async function lQ(t){const e=Y0(t),s=await UN(e);if(s.ok&&s.list.rows&&s.list.rows.length>0||(t.group||"").toLowerCase()==="all")return s;const i={...t,group:"all"},a=Y0(i),l=await UN(a);return l.ok?{ok:!0,list:{...l.list,group:t.group}}:s}const cQ={EU:[],US:[],INT:[],Fusion:[]},dQ=["EU","US","INT","Fusion"],uQ=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function MA(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=uQ(r);e[i].add(r)});const s={...cQ};return dQ.forEach(r=>{s[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),s}const hQ="EU",Nv=MA(IA.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),FA=E.createContext(null),zN=(t,e)=>t.length===e.length&&t.every((s,r)=>s===e[r]);function mQ(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&zN(t.servers,e.servers)&&zN(t.classes,e.classes)}function pQ(t,e){return t.key===e.key&&t.dir===e.dir}function fQ({children:t}){const[e,s]=E.useState({group:hQ,servers:[],classes:[],timeRange:"all"}),[r,i]=E.useState({key:"level",dir:"desc"}),[a,l]=E.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null}),d=E.useRef(new Map),[u,h]=E.useState(null),[m,g]=E.useState(null),[v,b]=E.useState(Nv),_=E.useCallback(R=>{s(D=>{const A=typeof R=="function"?R(D):{...D,...R};return mQ(D,A)?D:A})},[]),N=E.useCallback(R=>{i(D=>{const A=typeof R=="function"?R(D):R;return pQ(D,A)?D:A})},[]);E.useEffect(()=>{let R=!1;return(async()=>{const D=await rQ();if(!R){if(D.ok){const A=MA(D.servers);if(Object.values(A).some(w=>w.length>0)){b(A);return}}b(Nv)}})().catch(D=>{R||(console.error("[ToplistsProvider] unexpected error while loading server list",D),b(Nv))}),()=>{R=!0}},[]),E.useEffect(()=>{let R=!1;return(async()=>{const D=await aQ();R||h(D)})().catch(D=>{R||console.error("[ToplistsProvider] unexpected meta error",D)}),()=>{R=!0}},[]),E.useEffect(()=>{var k,S,T;let R=!1;const D="sum",A=Y0({group:e.group,timeRange:e.timeRange,sort:D}),y=d.current.get(A),w=(y==null?void 0:y.list.ttlSec)!=null?y.list.ttlSec*1e3:null,M=y?w==null||Date.now()-y.cachedAt<w:!1;return y&&M?(l({rows:y.list.rows,loading:!1,error:null,lastUpdatedAt:(k=y.list.updatedAt)!=null?k:null,nextUpdateAt:(S=y.list.nextUpdateAt)!=null?S:null,ttlSec:(T=y.list.ttlSec)!=null?T:null,listId:A}),()=>{R=!0}):(l(F=>({...F,listId:A,loading:!0,error:null})),(async()=>{var $,H,z;const F=await lQ({group:e.group,timeRange:e.timeRange,sort:D});if(R)return;if(F.ok){d.current.set(A,{list:F.list,cachedAt:Date.now()}),l({rows:F.list.rows,loading:!1,error:null,lastUpdatedAt:($=F.list.updatedAt)!=null?$:null,nextUpdateAt:(H=F.list.nextUpdateAt)!=null?H:null,ttlSec:(z=F.list.ttlSec)!=null?z:null,listId:A});return}const I=F.detail?` (${F.detail})`:"";let B="Firestore Fehler";F.error==="not_found"?B="Topliste nicht verfuegbar":F.error==="decode_error"&&(B="Fehler beim Lesen der Daten"),l({rows:[],loading:!1,error:`${B}${I}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:A})})().catch(F=>{R||(console.error("[ToplistsProvider] unexpected error",F),l({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:A}))}),()=>{R=!0})},[e.group,e.timeRange]),E.useEffect(()=>{var z,W;if(!u){g(null);return}const R=e.servers&&e.servers.length===1?e.servers[0]:"all",D=iQ(e.group||"ALL",R||"all"),A=(z=u.thresholds)==null?void 0:z.players,y=typeof(A==null?void 0:A.minChanges)=="number"?A.minChanges:100,w=typeof(A==null?void 0:A.maxAgeDays)=="number"?A.maxAgeDays:7,M=(W=u.scopeChange)==null?void 0:W[D],k=typeof(M==null?void 0:M.lastRebuildAtMs)=="number"?M.lastRebuildAtMs:null,S=typeof(M==null?void 0:M.lastChangeAtMs)=="number"?M.lastChangeAtMs:null,T=typeof(M==null?void 0:M.changedSinceLastRebuild)=="number"?M.changedSinceLastRebuild:0,F=k?new Date(k):null,I=S?new Date(S):null,B=k!=null?(Date.now()-k)/(1e3*60*60*24):1/0,$=y>0?Math.min(1,Math.max(0,T/y)):0,H=!!F&&(w==null||B<=w)&&(y==null||T<y);g({scopeId:D,lastRebuildAt:F,lastChangeAt:I,changesSinceLastRebuild:T,minChanges:y!=null?y:null,maxAgeDays:w!=null?w:null,progress:$,isFresh:H})},[u,e.group,e.servers]);const C=E.useMemo(()=>({player:a,playerRows:a.rows,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:m,serverGroups:v,filters:e,sort:r,setFilters:_,setSort:N}),[a,e,r,v,_,N,m]);return n.jsx(FA.Provider,{value:C,children:t})}function BA(){const t=E.useContext(FA);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}function gQ(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function xQ(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function yQ(){return n.jsx(fQ,{children:n.jsx(vQ,{})})}function vQ(){const t=pm(),{filterMode:e,setFilterMode:s,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:l,serverSheetOpen:d,setServerSheetOpen:u,servers:h,setServers:m,classes:g,range:v,sortBy:b}=t,{serverGroups:_}=BA();return n.jsxs(n.Fragment,{children:[n.jsxs(Bt,{mode:"card",title:"Top Lists",actions:n.jsx(_Q,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?n.jsx(LK,{}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[n.jsx(sQ,{}),r==="table"&&n.jsx(bQ,{servers:h!=null?h:[],classes:g!=null?g:[],range:v!=null?v:"all",sortKey:b!=null?b:"level"})]}),n.jsx(MK,{mode:"modal",open:d,onClose:()=>u(!1),serversByRegion:_,selected:h,onToggle:N=>m(C=>C.includes(N)?C.filter(R=>R!==N):[...C,N]),onSelectAllInRegion:N=>{var C;return m((C=_[N])!=null?C:[])},onClearAll:()=>m([])}),n.jsx(QK,{open:e==="sheet"&&a,onClose:()=>l(!1)})]})}function bQ({servers:t,classes:e,range:s,sortKey:r}){var C,R,D;const{playerRows:i,playerLoading:a,playerError:l,playerLastUpdatedAt:d,playerScopeStatus:u,setFilters:h,setSort:m}=BA();E.useEffect(()=>{const A=s==="all"?"all":s===60?"30d":`${s}d`,y=xQ(t);h({servers:t,classes:e,timeRange:A,group:y})},[t,e,s,h]),E.useEffect(()=>{const A=gQ(r);m(A)},[r,m]);const g=A=>A==null?"":new Intl.NumberFormat("en").format(A),v=A=>{if(A==null)return"";const y=g(Math.abs(A));return y?A>0?`+${y}`:`-${y}`:String(A)},b=A=>{if(A==null)return null;const y=A<1e12?A*1e3:A;return new Date(y).toLocaleString()},_=A=>A?A.toLocaleString():"",N=i||[];return n.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[n.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{children:[a?"Loading...":l?"Error":"Ready"," - ",N.length," rows"]}),n.jsx("div",{children:d?`Updated: ${b(d)}`:null})]}),u&&n.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[n.jsxs("span",{children:["Scope ",u.scopeId,"  ",u.changesSinceLastRebuild,"/",(C=u.minChanges)!=null?C:"?"," changes since last rebuild"]}),n.jsxs("span",{children:["Auto rebuild at ",(R=u.minChanges)!=null?R:"?"," changes or after ",(D=u.maxAgeDays)!=null?D:"?"," days"]}),n.jsxs("span",{children:["Last rebuild: ",_(u.lastRebuildAt)]})]}),l&&n.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),n.jsx("div",{style:{wordBreak:"break-all"},children:l}),n.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{padding:"8px 6px"},children:"#"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Flag"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Delta Rank"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Class"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Stats+"})]})}),n.jsxs("tbody",{children:[N.map((A,y)=>{var w,M,k,S;return n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("td",{style:{padding:"8px 6px"},children:y+1}),n.jsx("td",{style:{padding:"8px 6px"},children:(w=A.flag)!=null?w:""}),n.jsx("td",{style:{padding:"8px 6px"},children:v(A.deltaRank)}),n.jsx("td",{style:{padding:"8px 6px"},children:A.server}),n.jsx("td",{style:{padding:"8px 6px"},children:A.name}),n.jsx("td",{style:{padding:"8px 6px"},children:A.class}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(A.level)}),n.jsx("td",{style:{padding:"8px 6px"},children:(M=A.guild)!=null?M:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(A.main)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(A.con)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(A.sum)}),n.jsx("td",{style:{padding:"8px 6px"},children:(k=A.ratio)!=null?k:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(A.mine)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(A.treasury)}),n.jsx("td",{style:{padding:"8px 6px"},children:(S=A.lastScan)!=null?S:""}),n.jsx("td",{style:{padding:"8px 6px"},children:v(A.deltaSum)})]},`${A.name}-${A.server}-${y}`)}),a&&N.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"Loading..."})}),!a&&!l&&N.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"No results"})})]})]})})]})}function _Q(){const{filterMode:t,setFilterMode:e,listView:s,setListView:r,setBottomFilterOpen:i,setServerSheetOpen:a}=pm();return n.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[n.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[n.jsx(HN,{to:"/toplists/players",label:"Players"}),n.jsx(HN,{to:"/toplists/guilds",label:"Guilds"})]}),n.jsx("span",{className:"hidden md:inline-block w-px h-6",style:{background:"#2B4C73"}}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"Filter UI",children:[n.jsx("button",{"aria-pressed":t==="hud",onClick:()=>e("hud"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="hud"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"HUD"}),n.jsx("button",{"aria-pressed":t==="sheet",onClick:()=>e("sheet"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="sheet"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Bottom Sheet"}),n.jsx("button",{onClick:()=>i(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},children:"Open"})]}),n.jsx("button",{onClick:()=>a(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},title:"Open Server Picker",children:"Servers"}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"List View",children:[n.jsx("button",{"aria-pressed":s==="cards",onClick:()=>r("cards"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="cards"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Cards"}),n.jsx("button",{"aria-pressed":s==="buttons",onClick:()=>r("buttons"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="buttons"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Buttons"}),n.jsx("button",{"aria-pressed":s==="table",onClick:()=>r("table"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="table"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Table"})]})]})}function HN({to:t,label:e}){return n.jsx(As,{to:t,className:({isActive:s})=>["rounded-lg px-3 py-1.5 text-sm text-white border",s?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:e})}const wQ=[{rank:1,name:"Shadow Blades",server:"EU1",avgLevel:480,delta24h:1},{rank:2,name:"Arcane Legion",server:"EU2",avgLevel:472,delta24h:0}];function jQ(){return n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{opacity:.8,fontSize:12},children:"Guilds  snapshot (latest)"}),wQ.map(t=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"56px 1fr 120px 120px",padding:"10px 12px",borderRadius:10,border:"1px solid #2C4A73",background:"#14273E",fontSize:14,alignItems:"center"},children:[n.jsxs("div",{children:["#",t.rank]}),n.jsxs("div",{children:[t.name,"  ",t.server]}),n.jsxs("div",{children:["Avg Lv ",t.avgLevel]}),n.jsxs("div",{children:[" ",t.delta24h>0?`+${t.delta24h}`:t.delta24h," (24h)"]})]},t.rank))]})}function SQ(t="players"){const e=fi(),{search:s,pathname:r}=Ir();return[new URLSearchParams(s).get("tab")||t,d=>{const u=new URLSearchParams(s);u.set("tab",d),e(`${r}?${u.toString()}`,{replace:!1})}]}function NQ(){const[t]=SQ("players");return n.jsx(wK,{children:t==="players"?n.jsx(yQ,{}):n.jsx(jQ,{})})}function kQ(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Browse"})})}function CQ(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Rankings"})})}function TQ(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Stats"})})}const EQ="/assets/demo-avatar-special.png",GN={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!1,background:"gradient",frame:"",mirrorHorizontal:!0},AQ={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},Nr=(t,e)=>Math.min(Math.max(Math.round(t),0),e),IQ=t=>{var s;const e={...GN,...t||{}};return{...e,class:Nr(e.class,15),race:Nr(e.race,8),mouth:Nr(e.mouth,30),hair:Nr(e.hair,40),hairColor:Nr(e.hairColor,12),horn:Nr(e.horn,10),hornColor:Nr(e.hornColor,10),brows:Nr(e.brows,10),eyes:Nr(e.eyes,20),beard:Nr(e.beard,15),nose:Nr(e.nose,10),ears:Nr(e.ears,10),extra:Nr(e.extra,20),special:Nr(e.special,200),showBorder:!1,background:"",frame:"",mirrorHorizontal:(s=e.mirrorHorizontal)!=null?s:GN.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function $A({config:t,label:e,fallbackImage:s,fallbackLabel:r}){const i=E.useRef(null),a=E.useRef(null),[l,d]=E.useState("idle"),u=E.useMemo(()=>!t||Object.keys(t||{}).length===0?null:IQ(t),[JSON.stringify(t||{})]);E.useEffect(()=>{let b=!1;if(!u){d("idle");return}d("loading");try{const _=i.current;if(!_){d("error");return}const N=new kC(_,u);a.current=N,d("ready")}catch(_){console.error("[PortraitMaker] failed to initialize",_),b||d("error")}return()=>{var _,N;b=!0;try{(N=(_=a.current)==null?void 0:_.dispose)==null||N.call(_)}catch(C){}a.current=null}},[u]);const h=u&&l!=="ready"?AQ[l]:null,m=s||EQ,g=r||e,v=!u||l==="error";return n.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[n.jsxs("div",{className:"avatar-portrait__canvas-shell",children:[!v&&n.jsx("canvas",{ref:i,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`}),v&&n.jsx("img",{src:m,alt:g,className:"avatar-portrait__fallback",draggable:!1,width:240,height:240})]}),h&&n.jsx("span",{className:"avatar-portrait__status",children:h})]})}const kv=[{key:"str",label:"STR",name:"Strength"},{key:"dex",label:"DEX",name:"Dexterity"},{key:"int",label:"INT",name:"Intelligence"},{key:"con",label:"CON",name:"Constitution"},{key:"lck",label:"LCK",name:"Luck"}],RQ=8,Cv=t=>typeof t=="number"&&Number.isFinite(t)?t.toLocaleString("de-DE"):"-",Tv=(t,e)=>e<=0?0:Math.min(100,Math.max(0,t/e*100)),WN=t=>typeof t=="number"&&Number.isFinite(t);function PQ({baseStats:t,totalStats:e,benchmarks:s,mode:r,onModeChange:i}){const[a,l]=E.useState("base"),d=kv.some(C=>WN(e==null?void 0:e[C.key])),h=(r!=null?r:a)==="total"&&d?"total":"base",m=C=>{C==="total"&&!d||(i?i(C):l(C))},g=kv.map(C=>{const R=h==="total"?e:t,D=R==null?void 0:R[C.key];return WN(D)?D:0}),v=Math.max(...g,0),b=v>0?v*1.05:1,_=h==="base",N=h==="base"?"Base Stats":"Total Stats";return n.jsxs("div",{className:"player-profile__attribute-bars",children:[n.jsxs("div",{className:"player-profile__attribute-bars-head",children:[n.jsx("div",{className:"player-profile__card-label",children:N}),n.jsxs("div",{className:"player-profile__attribute-toggle",role:"group","aria-label":"Attribute Ansicht",children:[n.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${h==="base"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":h==="base",onClick:()=>m("base"),children:"Base"}),n.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${h==="total"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":h==="total",onClick:()=>m("total"),disabled:!d,children:"Total"})]})]}),n.jsx("div",{className:"player-profile__attribute-bars-list",children:kv.map(C=>{var H,z,W;const R=h==="total"?e:t,D=Number(R==null?void 0:R[C.key])||0,A=_?(H=s==null?void 0:s.serverAvg)==null?void 0:H[C.key]:void 0,y=_?(z=s==null?void 0:s.guildAvg)==null?void 0:z[C.key]:void 0,w=_?(W=s==null?void 0:s.scaleMax)==null?void 0:W[C.key]:void 0,M=Number(A)||0,k=Number(y)||0,S=typeof w=="number"&&Number.isFinite(w),T=Math.max(S?Number(w):b,D,M,k,1),F=Tv(D,T),I=Tv(M,T),B=Tv(k,T),$=Math.min(1,Math.max(0,F/100));return n.jsxs("div",{className:"player-profile__attribute-bar-row",children:[n.jsxs("div",{className:"player-profile__attribute-bar-label","aria-hidden":!0,children:[n.jsx("span",{className:"player-profile__attribute-bar-icon",children:C.label}),n.jsx("span",{className:"player-profile__attribute-bar-name",children:C.name})]}),n.jsxs("div",{className:"player-profile__attribute-bar-track",role:"presentation",children:[n.jsx("div",{className:"player-profile__attribute-bar-fill",style:{transform:`scaleX(${$})`,minWidth:D>0&&F<100?RQ:void 0},"aria-hidden":!0}),Number.isFinite(A)&&n.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--server",style:{left:`${I}%`},"aria-hidden":!0}),Number.isFinite(y)&&n.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--guild",style:{left:`${B}%`},"aria-hidden":!0})]}),n.jsxs("div",{className:"player-profile__attribute-bar-values",children:[n.jsx("div",{className:"player-profile__attribute-bar-value",children:Cv(D)}),Number.isFinite(A)&&n.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Server ",Cv(A)]}),Number.isFinite(y)&&n.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Gilde ",Cv(y)]})]})]},C.key)})})]})}function LQ({label:t,size:e=40}){const s=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return n.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:s||"?"})}function DQ({className:t,label:e,size:s=40}){const r=d=>d.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=Sn.find(d=>r(d.label)===i)||Sn.find(d=>r(d.label).startsWith(i)||i.startsWith(r(d.label))),l=a?Rr(a.iconUrl,s*2):null;return l?n.jsx("div",{className:"player-profile__class-avatar",style:{width:s,height:s},children:n.jsx("img",{src:l,alt:"",draggable:!1})}):n.jsx(LQ,{label:e,size:s})}function MQ({data:t,loading:e,actionFeedback:s,onAction:r}){const[i,a]=E.useState("base"),l=b=>b.toLowerCase().replace(/[^a-z0-9]+/g,""),d=Sn.find(b=>l(b.label)===l(t.className||""))||Sn.find(b=>l(b.label).startsWith(l(t.className||""))||l(t.className||"").startsWith(l(b.label))),u=t.portraitFallbackUrl||(d?Rr(d.iconUrl,420):void 0)||"/assets/demo-avatar-special.png",h=t.portraitFallbackLabel||t.className||t.playerName,m=t.hasPortrait===!1?void 0:t.portrait,g=b=>typeof b=="number"&&Number.isFinite(b)?b.toLocaleString("de-DE"):"-",v=E.useMemo(()=>t.metrics.map(b=>{if(b.label==="Total Base Stats"&&i==="total"){const _=t.totalStats;if(_){const N=(Number(_.str)||0)+(Number(_.dex)||0)+(Number(_.int)||0)+(Number(_.con)||0)+(Number(_.lck)||0);return{...b,label:"Total Stats",value:g(N)}}}return b}),[t.metrics,t.totalStats,i]);return n.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[n.jsxs("div",{className:"player-profile__hero-portrait",children:[n.jsxs("div",{className:"player-profile__identity player-profile__identity--overlay",children:[n.jsx(DQ,{className:t.className,label:t.playerName,size:48}),n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__player-name",children:t.playerName}),n.jsxs("div",{className:"player-profile__player-meta",children:[n.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&n.jsxs("span",{children:[" ",t.guild]}),t.server&&n.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&n.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),t.status&&n.jsx("div",{className:`player-profile__status player-profile__status--${t.status}`,children:t.status==="online"?"aktiv":"inaktiv"})]})]}),n.jsx($A,{config:m,label:t.playerName,fallbackImage:u,fallbackLabel:h})]}),n.jsxs("div",{className:"player-profile__hero-body",children:[n.jsx("div",{className:"player-profile__hero-metrics",children:v.map(b=>n.jsxs("div",{className:"player-profile__hero-metric",children:[n.jsx("div",{className:"player-profile__hero-metric-label",children:b.label}),n.jsx("div",{className:"player-profile__hero-metric-value",children:b.value}),b.hint&&n.jsx("div",{className:"player-profile__hero-metric-hint",children:b.hint})]},b.label))}),t.baseStats&&n.jsx(PQ,{baseStats:t.baseStats,totalStats:t.totalStats,benchmarks:t.baseStatBenchmarks,mode:i,onModeChange:a}),t.badges.length>0&&n.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(b=>n.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${b.tone||"neutral"}`,title:b.hint,children:[b.icon&&n.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:b.icon}),n.jsx("span",{children:b.label}),n.jsx("strong",{children:b.value})]},b.label))}),t.actions.length>0&&n.jsxs("div",{className:"player-profile__hero-actions",children:[t.actions.map(b=>n.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||b.disabled,title:b.title,onClick:()=>r==null?void 0:r(b.key),children:b.label},b.key)),s&&n.jsx("p",{className:"player-profile__hero-feedback",children:s})]})]})]})}function FQ({data:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>n.jsxs("article",{className:"player-profile__card",children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&n.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),n.jsxs("div",{className:"player-profile__section",children:[n.jsxs("header",{className:"player-profile__section-head",children:[n.jsx("h3",{children:"Attribute"}),n.jsx("span",{children:"Basis vs. Gesamt"})]}),n.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>n.jsxs("div",{className:"player-profile__attr-card",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__attr-label",children:e.label}),n.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&n.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),n.jsxs("div",{className:"player-profile__split",children:[n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Resistenzen"})}),n.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]}),n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"konomie"})}),n.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function BQ({items:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>n.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[n.jsxs("div",{className:"player-profile__progress-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),n.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),n.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:n.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&n.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function $Q({series:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var s;return n.jsxs("article",{className:"player-profile__trend-card",children:[n.jsxs("div",{className:"player-profile__trend-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),e.subLabel&&n.jsx("div",{className:"player-profile__card-hint",children:e.subLabel})]}),n.jsxs("div",{className:"player-profile__card-value",children:[(s=e.points[e.points.length-1])==null?void 0:s.toLocaleString("de-DE"),e.unit||""]})]}),n.jsx(UQ,{points:e.points})]},e.label)})})}function OQ({rows:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Serververgleich"})}),n.jsx("div",{className:"player-profile__comparison-wrapper",children:n.jsxs("table",{className:"player-profile__comparison",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Kategorie"}),n.jsx("th",{children:"Spieler"}),n.jsx("th",{children:"Cluster"}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:e.label}),n.jsx("td",{children:e.playerValue}),n.jsx("td",{children:e.benchmark}),n.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function VQ({entries:t}){return n.jsx("div",{className:"player-profile__tab-panel",children:n.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>n.jsxs("li",{children:[n.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),n.jsxs("div",{className:"player-profile__timeline-card",children:[n.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),n.jsx("div",{className:"player-profile__timeline-title",children:e.title}),n.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}function UQ({points:t}){if(!t.length)return n.jsx("div",{className:"player-profile__trend-chart player-profile__trend-chart--empty"});const e=Math.min(...t),s=Math.max(...t),r=Math.max(1,s-e||1),a=t.map((l,d)=>{const u=t.length>1?d/(t.length-1)*100:0,h=100-(l-e)/r*100;return`${d===0?"M":"L"}${u},${h}`}).join(" ");return n.jsx("div",{className:"player-profile__trend-chart",children:n.jsx("svg",{viewBox:"0 0 100 100",role:"img","aria-label":"Verlauf",children:n.jsx("path",{d:a})})})}const zQ={genderName:"male",class:1,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:1,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},kr=(t,e,s=0)=>{if(!Array.isArray(t)||e<0)return s;const r=t[e],i=typeof r=="number"?r:Number(r);return Number.isFinite(i)?i:s},HQ=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}};function qN(t){const e=kr(t,18),s=kr(t,21),r=kr(t,25),i=kr(t,705),a=kr(t,28)&255,l=Math.floor(e/100),d=Math.max(l,1),u=Math.floor(e/100);return{...zQ,genderName:a===1?"female":"male",class:kr(t,29)&65535,race:kr(t,27)&65535,mouth:kr(t,17),hair:Math.max(e%100,0),brows:Math.max(kr(t,19)%100,0),eyes:kr(t,20),beard:Math.max(s%100,0),nose:kr(t,22),ears:kr(t,23),extra:kr(t,24),horn:Math.max(r%100,0),special:Math.min(kr(t,26),0),hairColor:d,hornColor:a===1?1:u===0?d:u,frame:HQ(i)}}function GQ(t){return typeof t!="string"||!t.trim()?[]:t.split("/").map(e=>{const s=Number(e.trim());return Number.isFinite(s)?s:0})}const WQ={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},ds=(t,e=0)=>{const s=typeof t=="number"?t:Number(t);return Number.isFinite(s)?s:e},qQ=t=>t&&typeof t=="object"&&Object.values(t).some(e=>e!=null),KN=t=>{if(typeof t!="string")return[];const e=t.trim();if(!e)return[];const s=e.toLowerCase().replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"");return s?[s]:[]},Bu=new Map,QN="avatar-cache:",KQ=1440*60*1e3,QQ=async(t,e,s,r)=>{var D,A;const i=Number(t),a=String(t!=null?t:"").trim(),l=(D=KN(e)[0])!=null?D:"",d=typeof s=="string"&&s.trim()?s.trim():"",h=(y=>{if(!y)return"";const w=y.trim().toLowerCase();if(!w)return"";const M=w.split("/").filter(Boolean).pop()||w,[k,...S]=M.split("__"),T=S.join("__");if(k&&T){const F=KN(T)[0];if(F)return`${k}__${F}`}return a&&l?`${a}__${l}`:M.replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"")})(d)||(a&&l?`${a}__${l}`:"");if(!h)return null;const g=(()=>{var y;if(Bu.has(h))return(y=Bu.get(h))!=null?y:null;try{const w=typeof window!="undefined"?window.localStorage.getItem(`${QN}${h}`):null;if(!w)return null;const M=JSON.parse(w);return!(M!=null&&M.data)||typeof M.savedAt!="number"||!(Date.now()-M.savedAt<KQ)?null:M.data}catch(w){return null}})();if(g)return Bu.set(h,g),g;const v=await b5(r!=null?r:null,qt(xt,"linked_players","avatars","avatars",h),()=>Js(qt(xt,"linked_players","avatars","avatars",h)));if(!v.exists())return Bu.set(h,null),null;const b=v.data(),_=(b==null?void 0:b.portrait)||{},N=qQ(_),C={genderName:(_==null?void 0:_.genderName)==="female"?"female":"male",classId:ds(_==null?void 0:_.classId),raceId:ds(_==null?void 0:_.raceId),mouth:ds(_==null?void 0:_.mouth),hair:ds(_==null?void 0:_.hair),hairColor:ds(_==null?void 0:_.hairColor),horn:ds(_==null?void 0:_.horn),hornColor:ds(_==null?void 0:_.hornColor),brows:ds(_==null?void 0:_.brows),eyes:ds(_==null?void 0:_.eyes),beard:ds(_==null?void 0:_.beard),nose:ds(_==null?void 0:_.nose),ears:ds(_==null?void 0:_.ears),extra:ds(_==null?void 0:_.extra),special:ds(_==null?void 0:_.special),frameId:ds(_==null?void 0:_.frameId),frame:typeof(_==null?void 0:_.frame)=="string"?_.frame:void 0,background:typeof(_==null?void 0:_.background)=="string"?_.background:void 0,showBorder:typeof(_==null?void 0:_.showBorder)=="boolean"?_.showBorder:void 0,mirrorHorizontal:typeof(_==null?void 0:_.mirrorHorizontal)=="boolean"?_.mirrorHorizontal:void 0},R={playerId:ds(b==null?void 0:b.playerId,i),server:typeof(b==null?void 0:b.server)=="string"?b.server:e,portrait:C,updatedAt:(A=b==null?void 0:b.updatedAt)!=null?A:null,hasPortraitData:N};if(Bu.set(h,R),typeof window!="undefined")try{window.localStorage.setItem(`${QN}${h}`,JSON.stringify({data:R,savedAt:Date.now()}))}catch(y){}return R},XQ=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}},YQ=["","goldenFrame","twitchFrame","zenFrame","silverFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"],JQ=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],ZQ=(t,e)=>{const s=(t==null?void 0:t.portrait)||{},r={...WQ,...e||{}},i=XQ(ds(s.frameId,0)),a=typeof s.frame=="string"&&YQ.includes(s.frame)?s.frame:"",l=typeof s.background=="string"&&JQ.includes(s.background)?s.background:r.background;return{...r,genderName:s.genderName==="female"?"female":r.genderName,class:ds(s.classId,r.class),race:ds(s.raceId,r.race),mouth:ds(s.mouth,r.mouth),hair:ds(s.hair,r.hair),hairColor:ds(s.hairColor,r.hairColor),horn:ds(s.horn,r.horn),hornColor:ds(s.hornColor,r.hornColor),brows:ds(s.brows,r.brows),eyes:ds(s.eyes,r.eyes),beard:ds(s.beard,r.beard),nose:ds(s.nose,r.nose),ears:ds(s.ears,r.ears),extra:ds(s.extra,r.extra),special:ds(s.special,r.special),frame:i||a||r.frame||"",background:l,showBorder:typeof s.showBorder=="boolean"?s.showBorder:r.showBorder,mirrorHorizontal:typeof s.mirrorHorizontal=="boolean"?s.mirrorHorizontal:r.mirrorHorizontal}},eX=["Statistiken","Charts","Fortschritt","Vergleich","Historie"],tX="player-profile-cache:",sX=900*1e3;function Ev(){const t=_g(),e=t.id||t.pid||t.playerId||t.player||"",s=fi(),[r,i]=E.useState(!0),[a,l]=E.useState(null),[d,u]=E.useState(null),[h,m]=E.useState("Statistiken"),[g,v]=E.useState(null),[b,_]=E.useState(null),[,N]=E.useState(!1),[,C]=E.useState(null),R=E.useRef(null),D=E.useRef(null),A=()=>{var F;return(F=D.current)==null?void 0:F.parentElement};E.useEffect(()=>{let F=!1;const I=Fh("PlayerProfile:load");async function B(){var W,K,q,se,re,U,Y,ce,oe,me,_e,Pe,te,fe,ae,be,ye,Ie,$e,Ge,nt,at,ft,$t,je,Je,Ke,bt,kt,Oe;i(!0),l(null);const $=`${tX}${e}`,z=(()=>{try{const Te=typeof window!="undefined"?window.localStorage.getItem($):null;if(!Te)return null;const De=JSON.parse(Te);return!(De!=null&&De.data)||typeof De.timestamp!="number"||!(Date.now()-De.timestamp<sX)?null:{data:De.data,timestamp:De.timestamp,version:typeof De.version=="number"?De.version:null}}catch(Te){return null}})();if(z){u(z.data),Ba(I),i(!1);return}try{const Te=(e||"").trim();if(!Te)throw new Error("Kein Spieler gewhlt.");const De=qt(xt,`players/${Te}/latest/latest`),et=await b5(I,De,()=>Js(De));if(!et.exists())throw new Error("Spieler nicht gefunden.");const ht=et.data(),we=typeof ht.values=="object"&&ht.values?ht.values:{};ht.timestampRaw!=null&&we.timestampRaw==null&&(we.timestampRaw=ht.timestampRaw);const Gs=Array.isArray(ht.save)&&ht.save||Array.isArray(we==null?void 0:we.save)&&we.save||Array.isArray(ht.saveArray)&&ht.saveArray||Array.isArray(we==null?void 0:we.saveArray)&&we.saveArray||void 0,Os=typeof ht.save=="string"&&ht.save||typeof(we==null?void 0:we.save)=="string"&&we.save||typeof ht.saveString=="string"&&ht.saveString||typeof(we==null?void 0:we.saveString)=="string"&&we.saveString||void 0,Ws=(K=Mi((W=ht.level)!=null?W:we==null?void 0:we.Level))!=null?K:null,qs=((se=(q=ht.className)!=null?q:we==null?void 0:we.Class)!=null?se:null)||null,cs=((U=(re=ht.guildName)!=null?re:we==null?void 0:we.Guild)!=null?U:null)||null,es=(ce=(Y=ht.name)!=null?Y:we==null?void 0:we.Name)!=null?ce:Te,dt=(me=(oe=ht.server)!=null?oe:we==null?void 0:we.Server)!=null?me:null,J=typeof dt=="string"?dt.trim().toLowerCase().replace(/\./g,"_"):"",Ve=(fe=(te=(Pe=(_e=ht.avatarIdentifier)!=null?_e:ht.identifier)!=null?Pe:we==null?void 0:we.avatarIdentifier)!=null?te:we==null?void 0:we.identifier)!=null?fe:J?`${Te}__${J}`:null,He=(be=Mi((ae=ht.totalStats)!=null?ae:we==null?void 0:we["Total Stats"]))!=null?be:null,tt=(bt=(Ke=(Je=(je=($t=(ft=(at=(nt=(Ge=($e=(Ie=(ye=ht.scrapbookPct)!=null?ye:ht.scrapbook)!=null?Ie:we==null?void 0:we.scrapbookPct)!=null?$e:we==null?void 0:we.scrapbook)!=null?Ge:we==null?void 0:we["Scrapbook %"])!=null?nt:we==null?void 0:we.Scrapbook)!=null?at:we==null?void 0:we.Album)!=null?ft:we==null?void 0:we["Album %"])!=null?$t:we==null?void 0:we.AlbumPct)!=null?je:we==null?void 0:we.AlbumPercent)!=null?Je:we==null?void 0:we.AlbumPercentage)!=null?Ke:we==null?void 0:we.AlbumCompletion)!=null?bt:we==null?void 0:we.AlbumProgress,lt=(kt=Mi(tt))!=null?kt:null,_t=(Oe=Mi(ht.timestamp))!=null?Oe:Mi(we==null?void 0:we.timestamp),ts=nX(_t),Cs=typeof ht.portrait=="object"?ht.portrait:typeof ht.portraitOptions=="object"?ht.portraitOptions:typeof(we==null?void 0:we.portraitOptions)=="object"?we.portraitOptions:void 0,Nn={id:Te,name:es,className:qs,level:Ws,guild:cs,server:dt,avatarIdentifier:Ve,scrapbookPct:lt,totalStats:He,lastScanDays:ts,values:we,portraitConfig:Cs,saveArray:Gs,saveString:Os};if(typeof window!="undefined")try{window.localStorage.setItem($,JSON.stringify({data:Nn,timestamp:Date.now(),version:_t!=null?_t:null}))}catch(mr){}F||u(Nn)}catch(Te){F||(u(null),l((Te==null?void 0:Te.message)||"Unbekannter Fehler beim Laden."))}finally{Ba(I),F||i(!1)}}return B(),()=>{F=!0}},[e]);const y=F=>{var $;const I=A(),B=($=I==null?void 0:I.scrollTop)!=null?$:null;m(F),I&&B!=null&&requestAnimationFrame(()=>{I.scrollTo({top:B})})};E.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),E.useEffect(()=>{let F=!1;return(async()=>{var H,z;const B=Fh("PlayerProfile:avatar");if(!(d!=null&&d.id)){_(null),N(!1),C(null),Ba(B);return}const $=Mi(d.id);if($==null){_(null),N(!1),C(null),Ba(B);return}N(!0),C(null);try{const W=await QQ($,(H=d.server)!=null?H:"",(z=d.avatarIdentifier)!=null?z:void 0,B);F||_(W)}catch(W){F||(_(null),C(W instanceof Error?W:new Error("AvatarSnapshot failed")))}finally{Ba(B),F||N(!1)}})(),()=>{F=!0}},[d==null?void 0:d.id,d==null?void 0:d.server]);const w=E.useMemo(()=>d?oX(d,b):null,[d,b]),M=F=>{v(F),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>v(null),3500)},k=async F=>{if(d){if(F==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const I=`${window.location.origin}/players/profile/${d.id}`;try{await navigator.clipboard.writeText(I),M("Profil-Link wurde kopiert.")}catch(B){M("Konnte Link nicht kopieren.")}}return}if(F==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:d.name,text:`Shakes & Fidget Charakter ${d.name}`,url:window.location.href}),M("Profil geteilt.")}catch(I){M("Teilen abgebrochen.")}return}if(F==="guild"&&d.guild){s(`/guilds?search=${encodeURIComponent(d.guild)}`);return}if(F==="rescan"){M("Rescan-Queue folgt  aktuell noch Platzhalter.");return}}},S=()=>{if(!w)return null;switch(h){case"Statistiken":return n.jsx(FQ,{data:w.stats});case"Charts":return n.jsx($Q,{series:w.charts});case"Fortschritt":return n.jsx(BQ,{items:w.progress});case"Vergleich":return n.jsx(OQ,{rows:w.comparison});case"Historie":return n.jsx(VQ,{entries:w.history});default:return null}},T=()=>n.jsxs("div",{className:"player-profile__loading",children:[n.jsx("p",{children:a!=null?a:"Spieler nicht gefunden."}),n.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>s("/"),style:{marginTop:12},children:"Zur Startseite"})]});return n.jsx(Bt,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsxs("div",{className:"player-profile",ref:D,children:[r&&!d&&n.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!r&&(!d||!w)&&T(),w&&n.jsxs(n.Fragment,{children:[n.jsx(MQ,{data:w.hero,loading:r,actionFeedback:g,onAction:k}),n.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:eX.map(F=>{const I=h===F;return n.jsx("button",{type:"button",role:"tab","aria-selected":I,className:`player-profile__tab-button ${I?"player-profile__tab-button--active":""}`,onClick:()=>y(F),children:F},F)})}),S()]})]})})}const Mi=t=>{if(t==null||t==="")return null;if(typeof t=="number")return Number.isFinite(t)?t:null;const e=String(t).trim(),s=e.startsWith("-")?-1:1,r=e.replace(/^[+-]/,"").replace(/[\s%]/g,""),i=r.lastIndexOf(","),a=r.lastIndexOf("."),l=Math.max(i,a);let d="";if(l>-1){const h=r.slice(l+1).replace(/[^0-9]/g,""),m=r.slice(0,l).replace(/[^0-9]/g,"");h.length>0&&h.length<=2?d=`${m}.${h}`:d=(m+h).replace(/[^0-9]/g,"")}else d=r.replace(/[^0-9]/g,"");if(!d)return null;const u=Number(d)*s;return Number.isFinite(u)?u:null},nX=t=>{if(!t)return null;const e=Date.now()/1e3,s=Math.max(0,e-t);return Math.floor(s/86400)},Av=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),rX=t=>{const e=new Map;return Object.entries(t||{}).forEach(([s,r])=>e.set(Av(s),r)),{number(s,r=null){for(const i of s){const a=Mi(e.get(Av(i)));if(a!=null)return a}return r},text(s,r=null){for(const i of s){const a=e.get(Av(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},iX=t=>{let e=2166136261;for(let s=0;s<t.length;s++)e^=t.charCodeAt(s),e=Math.imul(e,16777619);return()=>{e+=1831565813;let s=Math.imul(e^e>>>15,1|e);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}},bn=(t,e="")=>t==null?e:t.toLocaleString("de-DE"),Cf=t=>{if(t==null)return"";const e=Math.floor(t*100)/100,s=e%1!==0;return`${e.toLocaleString("de-DE",{minimumFractionDigits:s?2:0,maximumFractionDigits:2})}%`},XN=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,YN=t=>{if(t==null)return null;const e=new Date(t*1e3);if(Number.isNaN(e.getTime()))return null;const s=r=>String(r).padStart(2,"0");return`${s(e.getDate())}.${s(e.getMonth()+1)}.${e.getFullYear()} ${s(e.getHours())}:${s(e.getMinutes())}`},aX=(t,e)=>{let s;const r=t.portraitConfig&&Object.keys(t.portraitConfig).length>0;if(Array.isArray(t.saveArray)&&t.saveArray.length>0)s=qN(t.saveArray);else if(t.saveString){const i=GQ(t.saveString);s=i.length>0?qN(i):void 0}else r&&(s={...t.portraitConfig});return e!=null&&e.hasPortraitData?{config:ZQ(e,s),hasData:!0}:s?{config:s,hasData:!0}:{config:void 0,hasData:!1}},oX=(t,e)=>{var ft,$t,je,Je,Ke,bt,kt,Oe,Te,De,et,ht,we,Gs,Os,Ws,qs,cs;const s=t.values||{},r=rX(s),i=iX(t.id),a=aX(t,e),l=E5((ft=t.className)!=null?ft:void 0),d=Rr(l.url,420)||"/assets/demo-avatar-special.png",u=t.className?`Klassenbild ${t.className}`:"Portrait-Platzhalter",h=["album","album%","albumpct","albumpercent","albumpercentage","albumcompletion","albumprogress","scrapbook","scrapbook%","scrapbookpct","scrapbookpercent"],m=["honor","ehre","honour","honorpoints","ehrepunkte"],g=["hofrank","halloffamerank","hofposition","halloffameposition","hofplatz","halloffame","hof"],v=["mount","reittier","mountname"],b=["mountpct","mountpercent","mountpercentage","mountspeed","mountbonus","mountvalue"],_=["guildrole","role","guildrank","gildenrolle"],N=($t=t.level)!=null?$t:r.number(["level"]),C=(je=t.scrapbookPct)!=null?je:r.number(h),R=r.number(m),D=(Je=t.totalStats)!=null?Je:r.number(["totalstats","stats"]),A=[{key:"str",label:"St??rke",base:["Base Strength","St??rke","basestrength"],total:["Strength"]},{key:"dex",label:"Geschick",base:["Base Dexterity","Geschick","basedexterity"],total:["Dexterity"]},{key:"int",label:"Intelligenz",base:["Base Intelligence","Intelligenz","baseintelligence"],total:["Intelligence"]},{key:"con",label:"Konstitution",base:["Base Constitution","Konstitution","baseconstitution"],total:["Constitution"]},{key:"lck",label:"Gl??ck",base:["Base Luck","Gl??ck","baseluck"],total:["Luck"]}],y={str:0,dex:0,int:0,con:0,lck:0},w={str:0,dex:0,int:0,con:0,lck:0};let M=!1,k=!1;A.forEach(es=>{const dt=r.number(es.base);dt!=null&&(y[es.key]=dt,M=!0);const J=r.number(es.total);J!=null&&(w[es.key]=J,k=!0)});const S=M?Object.values(y).reduce((es,dt)=>es+dt,0):null,T=C!=null?C:null,F=(Ke=r.number(["fortresslevel","fortress"]))!=null?Ke:Math.round(i()*20)+30,I=(bt=r.number(["underworld","underworldlevel"]))!=null?bt:Math.round(i()*10)+20,B=(kt=r.number(["tower","towerfloor"]))!=null?kt:Math.round(i()*90)+10,$=(Oe=r.number(["pets","petprogress"]))!=null?Oe:Math.round(i()*50)+25,H=(N!=null?N:0)*1200+(S!=null?S:0)+Math.round((C!=null?C:0)*3200),z=r.text(v),W=z&&/[a-zA-Z]/.test(z)||z&&/%/.test(z)?z:null,K=(we=(ht=(et=(De=(Te=s==null?void 0:s["Mount %"])!=null?Te:s==null?void 0:s["mount %"])!=null?De:s==null?void 0:s.MountPct)!=null?et:s==null?void 0:s.mountPct)!=null?ht:s==null?void 0:s.MountBonus)!=null?we:s==null?void 0:s.mountBonus,q=(Gs=Mi(K))!=null?Gs:r.number(b),se=W?Mi((W.match(/(\d+)\s*%/)||[])[1]):null,re=q!=null?q:se;let U="";W?U=re!=null&&!/%/.test(W)?`${W} (${Math.round(re)}%)`:W:re!=null&&(U=`${Math.round(re)}%`);const Y=r.text(_),ce=Mi(s==null?void 0:s.Rank),oe=ce!=null?ce:r.number(g),me=r.text(["timestampraw"]),_e=r.number(["timestamp"]),te=[{label:"Last Scan",value:me&&/^\s*\d+\s*$/.test(me)?(Os=YN(Mi(me)))!=null?Os:me:(Ws=me!=null?me:YN(_e))!=null?Ws:"-"},{label:"Level",value:N!=null?`Lvl ${bn(N)}`:"-"},{label:"Scrapbook",value:Cf(T)},{label:"Total Base Stats",value:S!=null?bn(S):"-"}],fe=[{label:"Mount",value:U!=null?U:"",tone:"neutral"},{label:"Honor",value:bn(R),tone:"success"},{label:"Gildenrolle",value:Y!=null?Y:"",tone:"warning"},{label:"HoF",value:oe!=null?`#${bn(oe)}`:"",tone:"neutral"}],ae=M?y:void 0,be={playerName:t.name,className:t.className,guild:t.guild,server:t.server,levelLabel:N?`Level ${bn(N)}`:void 0,lastScanLabel:(qs=XN(t.lastScanDays))!=null?qs:void 0,status:t.lastScanDays!=null&&t.lastScanDays<=2?"online":"offline",metrics:te,badges:fe,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guild},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:a.hasData?a.config:void 0,hasPortrait:a.hasData,portraitFallbackUrl:d,portraitFallbackLabel:u,baseStats:ae,totalStats:k?w:void 0},ye={summary:[{label:"Power Score",value:bn(H),hint:"Level * SumBase"},{label:"Honor",value:bn(R)},{label:"HoF Platz",value:oe?`#${bn(oe)}`:""},{label:"Letzter Scan",value:(cs=XN(t.lastScanDays))!=null?cs:""}],attributes:A.map(es=>({label:es.label,baseLabel:bn(r.number(es.base)),totalLabel:r.number(es.total)!=null?`Gesamt ${bn(r.number(es.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(i()*40+40)}%`},{label:"Schatten",value:`${Math.round(i()*40+35)}%`},{label:"Frost",value:`${Math.round(i()*30+30)}%`},{label:"Licht",value:`${Math.round(i()*20+30)}%`}],resources:[{label:"Gold/h",value:`${bn(Math.round((N!=null?N:1)*(i()*8+3)))}k`},{label:"XP/h",value:`${bn(Math.round((N!=null?N:1)*(i()*5+2)))}k`},{label:"Mount Bonus",value:U},{label:"Quest Slots",value:`${Math.round(i()*2)+3}`}]},Ie=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(T!=null?T:0)/100),targetLabel:`${Cf(T)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:T!=null&&T>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,B/100),targetLabel:`Ebene ${Math.round(B)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudeausbau",progress:Math.min(1,F/25),targetLabel:`Lvl ${Math.round(F)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,I/30),targetLabel:`Lvl ${Math.round(I)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,$/100),targetLabel:`${Math.round($)} / 100`,meta:"Habitate offen"}],$e=(es,dt=.12)=>{const J=es!=null?es:Math.round(i()*100),Ve=[];let He=J*.85;for(let tt=0;tt<8;tt++)He+=He*(i()*dt-dt/2),Ve.push(Math.max(0,Math.round(He)));return Ve[Ve.length-1]=J,Ve},Ge=[{label:"Level Verlauf",points:$e(N!=null?N:0,.06),unit:"",subLabel:"7 Tage"},{label:"Total Stats",points:$e(D!=null?D:0,.18),unit:"",subLabel:"Summe Attribute"},{label:"Honor",points:$e(R!=null?R:0,.25),unit:"",subLabel:"Hall of Fame"}],nt=[{label:"Level",playerValue:N?`Lvl ${bn(N)}`:"",benchmark:N?`Lvl ${bn(Math.round(N*.92))}`:"",diffLabel:N?`+${Math.round(N*.08)}`:"",trend:"up"},{label:"Power Score",playerValue:bn(H),benchmark:bn(Math.round(H*.9)),diffLabel:`+${bn(Math.round(H*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:Cf(T),benchmark:`${Math.min(100,Math.round((T!=null?T:60)-8))}%`,diffLabel:T!=null?`+${Math.round(T-60)}%`:"",trend:T!=null&&T>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(F)}`,benchmark:`Lvl ${Math.round(F-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(I)}`,benchmark:`Lvl ${Math.round(I-2)}`,diffLabel:"+2",trend:"neutral"}],at=lX(t,r,i);return{hero:be,stats:ye,progress:Ie,charts:Ge,comparison:nt,history:at}},lX=(t,e,s)=>{var l,d;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:Qp(Math.round(s()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:Qp(2),title:"Level-Up",description:`Erreichte Level ${bn(t.level)}`,tag:"Level"}),r.push({dateLabel:Qp(10),title:"Scrapbook Meilenstein",description:`${Cf((l=t.scrapbookPct)!=null?l:Math.round(s()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:Qp(18),title:"Festung",description:`Fortress Level ${Math.round((d=e.number(["fortress"],Math.round(s()*20+15)))!=null?d:0)}`,tag:"Festung"}),r},Qp=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function $d(t,e=300){const[s,r]=X.useState(t);return X.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function Od(t){const e=X.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[s,r]=X.useState(()=>e());return X.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=l=>r(l.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),s}const cX='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function Vd(t,e){X.useEffect(()=>{var l;if(!e)return;const s=t.current;if(!s)return;const r=()=>s.querySelectorAll(cX);(l=r()[0])==null||l.focus();const a=d=>{if(d.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],m=u[u.length-1];d.shiftKey?document.activeElement===h&&(d.preventDefault(),m.focus()):document.activeElement===m&&(d.preventDefault(),h.focus())};return s.addEventListener("keydown",a),()=>s.removeEventListener("keydown",a)},[t,e])}const dX="_page_1jzf5_1",uX="_header_1jzf5_13",hX="_headerStack_1jzf5_25",mX="_kicker_1jzf5_37",pX="_title_1jzf5_53",fX="_subtitle_1jzf5_65",gX="_headerActions_1jzf5_79",xX="_secondaryAction_1jzf5_89",yX="_infoStrip_1jzf5_131",vX="_infoCard_1jzf5_143",bX="_infoLabel_1jzf5_163",_X="_inlineFilters_1jzf5_177",wX="_filterField_1jzf5_197",jX="_select_1jzf5_227",SX="_searchInput_1jzf5_229",NX="_layout_1jzf5_249",kX="_selectionColumn_1jzf5_261",CX="_selectionCard_1jzf5_273",TX="_slotHeader_1jzf5_293",EX="_slotLabel_1jzf5_307",AX="_slotStatus_1jzf5_323",IX="_clearButton_1jzf5_335",RX="_slotBody_1jzf5_355",PX="_resultList_1jzf5_367",LX="_emptyResult_1jzf5_385",DX="_resultItem_1jzf5_397",MX="_resultName_1jzf5_421",FX="_resultMeta_1jzf5_433",BX="_selectButton_1jzf5_445",$X="_selectedCard_1jzf5_465",OX="_selectedName_1jzf5_479",VX="_selectedMeta_1jzf5_489",UX="_selectedTagline_1jzf5_491",zX="_comparisonColumn_1jzf5_503",HX="_comparisonCard_1jzf5_515",GX="_comparisonHeader_1jzf5_535",WX="_sectionTitle_1jzf5_551",qX="_diffBadge_1jzf5_561",KX="_metricGrid_1jzf5_579",QX="_metricCard_1jzf5_591",XX="_metricLabel_1jzf5_611",YX="_metricValues_1jzf5_627",JX="_metricDivider_1jzf5_643",ZX="_metricDelta_1jzf5_653",eY="_freshnessRow_1jzf5_665",tY="_freshnessItem_1jzf5_677",sY="_freshnessBadge_1jzf5_685",nY="_freshnessPopover_1jzf5_733",rY="_popoverTitle_1jzf5_757",iY="_classCard_1jzf5_807",aY="_classGrid_1jzf5_827",oY="_classColumn_1jzf5_837",lY="_classBar_1jzf5_857",cY="_classSlice_1jzf5_873",dY="_classLegend_1jzf5_907",uY="_emptyState_1jzf5_931",hY="_supportPanels_1jzf5_947",mY="_checklistCard_1jzf5_959",pY="_infoCardExtended_1jzf5_961",fY="_checklist_1jzf5_959",gY="_infoNote_1jzf5_1033",xY="_sheetOverlay_1jzf5_1045",yY="_sheetOpen_1jzf5_1073",vY="_sheet_1jzf5_1045",bY="_sheetHeader_1jzf5_1105",_Y="_sheetBody_1jzf5_1119",le={page:dX,header:uX,headerStack:hX,kicker:mX,title:pX,subtitle:fX,headerActions:gX,secondaryAction:xX,infoStrip:yX,infoCard:vX,infoLabel:bX,inlineFilters:_X,filterField:wX,select:jX,searchInput:SX,layout:NX,selectionColumn:kX,selectionCard:CX,slotHeader:TX,slotLabel:EX,slotStatus:AX,clearButton:IX,slotBody:RX,resultList:PX,emptyResult:LX,resultItem:DX,resultName:MX,resultMeta:FX,selectButton:BX,selectedCard:$X,selectedName:OX,selectedMeta:VX,selectedTagline:UX,comparisonColumn:zX,comparisonCard:HX,comparisonHeader:GX,sectionTitle:WX,diffBadge:qX,metricGrid:KX,metricCard:QX,metricLabel:XX,metricValues:YX,metricDivider:JX,metricDelta:ZX,freshnessRow:eY,freshnessItem:tY,freshnessBadge:sY,freshnessPopover:nY,popoverTitle:rY,classCard:iY,classGrid:aY,classColumn:oY,classBar:lY,classSlice:cY,classLegend:dY,emptyState:uY,supportPanels:hY,checklistCard:mY,infoCardExtended:pY,checklist:fY,infoNote:gY,sheetOverlay:xY,sheetOpen:yY,sheet:vY,sheetHeader:bY,sheetBody:_Y},OA=["Ari","Borin","Celeste","Doran","Lena","Nix"],wY={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},d_={raid:"Raid",event:"Event",task:"Task"},u_={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},JN={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},ZN={urgent:4,high:3,medium:2,low:1},jY={"7d":7,"30d":30,"90d":90,all:null},Iv={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},SY=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:Ll(5,20),createdAt:or(2,14),updatedAt:or(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:Yp(3),nextUpdateAt:Xp(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:Ll(2,12),createdAt:or(4,9),updatedAt:or(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:Yp(8),nextUpdateAt:Xp(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:Ll(7,17),createdAt:or(1,10),updatedAt:or(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:Yp(22),nextUpdateAt:Xp(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:or(1,19),createdAt:or(9,10),updatedAt:or(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:or(1,19),nextUpdateAt:Ll(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:Ll(12,18),createdAt:or(6,15),updatedAt:or(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:Yp(1),nextUpdateAt:Xp(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:Ll(18,13),createdAt:or(12,18),updatedAt:or(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:or(2,16),nextUpdateAt:Ll(4,9)}];function Ll(t,e=12){const s=new Date;return s.setDate(s.getDate()+t),s.setHours(e,0,0,0),s.toISOString()}function Xp(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function or(t,e=12){const s=new Date;return s.setDate(s.getDate()-t),s.setHours(e,0,0,0),s.toISOString()}function Yp(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function ek(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function NY(t,e,s){const r=Date.now(),i=jY[e.range];return t.filter(a=>{const l=s===""||a.title.toLowerCase().includes(s.toLowerCase())||a.description.toLowerCase().includes(s.toLowerCase()),d=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let m=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),v=r+i*24*60*60*1e3;m=g<=v}return l&&d&&u&&h&&m})}function kY(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"dueAt":l=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":l=ZN[i.priority]-ZN[a.priority];break;case"title":l=i.title.localeCompare(a.title);break;default:l=0}return s==="asc"?l:-l}),r}function CY(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function ma(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function fm(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function Uh(t,e){const s=new Date(t).getTime()-e;if(s<=0)return"faellig";const r=Math.floor(s/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function TY(t){return t.length===0?null:t.reduce((e,s)=>e?JN[s.freshness]>JN[e.freshness]?s:e:s,null)}const J0=["EU-01","EU-02","US-01","US-02","ASIA-01"],xh=new Intl.NumberFormat("de-DE");function EY(){const t=Od("(min-width: 768px)"),[e,s]=X.useState("all"),[r,i]=X.useState(null),[a,l]=X.useState(null),[d,u]=X.useState(null),[h,m]=X.useState(null),g=[r,a].filter(Boolean).length,v=X.useMemo(()=>{const I=[d,h].filter(Boolean);if(!I.length)return 0;const B=I.reduce(($,H)=>{var z;return $+((z=H.level)!=null?z:0)},0);return Math.round(B/I.length)},[d,h]),[b,_]=X.useState(null),[N,C]=X.useState(!1),R=X.useRef(null);Vd(R,N&&!t),X.useEffect(()=>{t&&C(!1)},[t]),X.useEffect(()=>{if(!b)return;const I=$=>{const H=$.target;H&&(H.closest(`.${le.freshnessBadge}`)||H.closest(`.${le.freshnessPopover}`)||_(null))},B=$=>{$.key==="Escape"&&_(null)};return document.addEventListener("pointerdown",I),document.addEventListener("keydown",B),()=>{document.removeEventListener("pointerdown",I),document.removeEventListener("keydown",B)}},[b]);const D=X.useMemo(()=>d?Uh(d.nextUpdateAt,Date.now()):"",[d]),A=X.useMemo(()=>h?Uh(h.nextUpdateAt,Date.now()):"",[h]),y=()=>C(!0),w=()=>C(!1),M=I=>{s(I)},k=(I,B)=>{I==="playerA"?(i(B.id),u(B)):(l(B.id),m(B))},S=I=>{I==="playerA"?(i(null),u(null)):(l(null),m(null))},T=I=>{_(B=>B===I?null:I)},F=d&&h;return n.jsxs(Bt,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[n.jsxs("div",{className:le.page,children:[n.jsxs("header",{className:le.header,children:[n.jsxs("div",{className:le.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.kicker,children:"Players"}),n.jsx("h1",{className:le.title,children:"Spieler vergleichen"}),n.jsx("p",{className:le.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),n.jsx("div",{className:le.headerActions,children:!t&&n.jsx("button",{type:"button",className:le.secondaryAction,onClick:y,children:"Filter"})})]}),n.jsxs("div",{className:le.infoStrip,children:[n.jsxs("div",{className:le.infoCard,children:[n.jsx("span",{className:le.infoLabel,children:"Slots gefuellt"}),n.jsxs("strong",{children:[xh.format(g)," Spieler"]})]}),n.jsxs("div",{className:le.infoCard,children:[n.jsx("span",{className:le.infoLabel,children:"Durchschnittslevel"}),n.jsx("strong",{children:xh.format(v)})]}),n.jsxs("div",{className:le.infoCard,children:[n.jsx("span",{className:le.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:le.inlineFilters,children:n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:le.select,value:e,onChange:I=>M(I.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),J0.map(I=>n.jsx("option",{value:I,children:I},I))]})]})})]}),n.jsxs("div",{className:le.layout,children:[n.jsxs("section",{className:le.selectionColumn,children:[n.jsx(tk,{title:"Spieler A",slot:"playerA",selectedPlayer:d,excludeId:a,onSelect:k,onClear:S,serverFilter:e,onServerChange:M}),n.jsx(tk,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:k,onClear:S,serverFilter:e,onServerChange:M})]}),n.jsxs("section",{className:le.comparisonColumn,children:[n.jsxs("div",{className:le.comparisonCard,children:[n.jsxs("div",{className:le.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.kicker,children:"Vergleich"}),n.jsx("h2",{className:le.sectionTitle,children:"Kennzahlen"})]}),F&&n.jsxs("span",{className:le.diffBadge,children:["Delta Level: ",xh.format(d.level-h.level)]})]}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:le.metricGrid,children:[n.jsx(sk,{label:"Level",aValue:d.level,bValue:h.level}),n.jsx(sk,{label:"Scrapbook (%)",aValue:d.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),n.jsx(AY,{playerA:d,playerB:h,countdownA:D,countdownB:A,activePopover:b,onToggle:T})]}),n.jsx(IY,{playerA:d,playerB:h})]}):n.jsx("div",{className:le.emptyState,children:n.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:le.supportPanels,children:[n.jsx(RY,{}),n.jsx(PY,{})]})]})]})]}),!t&&n.jsx("div",{className:`${le.sheetOverlay} ${N?le.sheetOpen:""}`,children:n.jsxs("div",{className:le.sheet,role:"dialog","aria-modal":"true",ref:R,children:[n.jsxs("header",{className:le.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:le.clearButton,onClick:w,children:"Schliessen"})]}),n.jsx("div",{className:le.sheetBody,children:n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:le.select,value:e,onChange:I=>M(I.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),J0.map(I=>n.jsx("option",{value:I,children:I},I))]})]})})]})})]})}function tk({title:t,slot:e,selectedPlayer:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=X.useState(""),m=$d(u,300);X.useEffect(()=>{h("")},[s,l]);const{results:g,loading:v}=LY(m,l,r);return n.jsxs("article",{className:le.selectionCard,children:[n.jsxs("div",{className:le.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.slotLabel,children:t}),n.jsx("p",{className:le.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:le.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:le.slotBody,children:[n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:le.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),J0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:le.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:le.resultList,role:"list",children:[v&&n.jsx("div",{className:le.emptyResult,children:"Lade..."}),!v&&g.length===0&&n.jsx("div",{className:le.emptyResult,children:"Kein Spieler gefunden."}),!v&&g.map(b=>n.jsxs("div",{className:le.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.resultName,children:b.name}),n.jsxs("p",{className:le.resultMeta,children:[b.server," - Level ",b.level," - ",b.className]})]}),n.jsx("button",{type:"button",className:le.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:le.selectedCard,children:[n.jsx("p",{className:le.selectedName,children:s.name}),n.jsxs("p",{className:le.selectedMeta,children:[s.server," - Level ",s.level," - ",s.className," -"," ",s.guildName||"ohne Gilde"]}),n.jsx("p",{className:le.selectedTagline,children:s.tagline})]})]})]})}function sk({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):xh.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):xh.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:le.metricCard,children:[n.jsx("p",{className:le.metricLabel,children:t}),n.jsxs("div",{className:le.metricValues,children:[n.jsx("span",{"aria-label":"Spieler A",children:i(e)}),n.jsx("span",{className:le.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Spieler B",children:i(s)})]}),n.jsx("p",{className:le.metricDelta,children:l})]})}function AY({playerA:t,playerB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:le.metricCard,children:[n.jsx("p",{className:le.metricLabel,children:"Freshness"}),n.jsx("div",{className:le.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:le.freshnessItem,children:[n.jsxs("button",{type:"button",className:le.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:fm(l.lastScanAt)})]}),h&&n.jsxs("div",{className:le.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:le.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:u_[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:ma(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[ma(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function IY({playerA:t,playerB:e}){const s=X.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return n.jsxs("div",{className:le.classColumn,children:[n.jsx("h3",{children:i.name}),n.jsx("div",{className:le.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(l=>n.jsxs("span",{style:{width:`${l.percent}%`},className:le.classSlice,children:[n.jsx("small",{children:l.label}),n.jsxs("strong",{children:[l.percent,"%"]})]},`${i.id}-${l.label}`))})]})};return n.jsxs("div",{className:le.classCard,children:[n.jsx("p",{className:le.metricLabel,children:"Stat-Verteilung"}),n.jsx("div",{className:le.classGrid,children:[t,e].map(r)}),s.length>0&&n.jsx("ul",{className:le.classLegend,children:s.map(i=>n.jsx("li",{children:i},i))})]})}function RY(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return n.jsxs("section",{className:le.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:le.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function PY(){return n.jsxs("section",{className:le.infoCardExtended,children:[n.jsx("h3",{children:"Matchup-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:le.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),n.jsx("button",{type:"button",className:le.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function LY(t,e,s){const[r,i]=X.useState([]),[a,l]=X.useState(!1);return X.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const m=d.toLowerCase(),g=am(xt,"latest"),v=await mn(an(g,Wr("nameFold"),Ri(m),Pi(m+""),hn(15))),b=await mn(an(g,el("nameNgrams","array-contains",m),hn(15))),_=new Set,N=[],C=R=>{var K,q,se,re,U,Y,ce,oe,me,_e,Pe,te,fe,ae,be,ye,Ie,$e,Ge,nt,at,ft,$t,je,Je,Ke,bt,kt,Oe;const D=R.data(),y=(K=R.ref.parent)==null?void 0:K.parent,w=y==null?void 0:y.parent;if((w==null?void 0:w.id)!=="players")return;const k=(se=(q=y==null?void 0:y.id)!=null?q:D.playerIdentifier)!=null?se:R.id;if(!k||_.has(k)||s&&k===s)return;const S=(Y=(U=D.name)!=null?U:(re=D.values)==null?void 0:re.Name)!=null?Y:"Unbekannter Spieler",T=(me=(oe=D.server)!=null?oe:(ce=D.values)==null?void 0:ce.Server)!=null?me:"Unknown";if(e!=="all"&&T!==e)return;const F=(ae=(fe=(Pe=D.className)!=null?Pe:(_e=D.values)==null?void 0:_e.Class)!=null?fe:(te=D.values)==null?void 0:te.Class)!=null?ae:"Unbekannte Klasse",I=(Ie=(ye=D.guildName)!=null?ye:(be=D.values)==null?void 0:be.Guild)!=null?Ie:"",B=$o(D.level)||$o(($e=D.values)==null?void 0:$e.Level)||$o((Ge=D.values)==null?void 0:Ge.Level),$=$o(D.scrapbookPct)||$o((nt=D.values)==null?void 0:nt["Album %"])||$o((at=D.values)==null?void 0:at.AlbumPct)||$o((ft=D.values)==null?void 0:ft["Scrapbook %"]),H=(Je=(je=D.updatedAt)!=null?je:($t=D.values)==null?void 0:$t.UpdatedAt)!=null?Je:D.timestamp?new Date(D.timestamp*1e3).toISOString():new Date().toISOString(),z=(Ke=D.nextUpdateAt)!=null?Ke:MY(12),W=DY((bt=D.values)!=null?bt:D.stats);_.add(k),N.push({id:k,name:S,tagline:(kt=D.tagline)!=null?kt:I?`Mitglied in ${I}`:F,server:T,className:F,guildName:I,level:B||0,scrapbookPct:$,lastScanAt:H,updatedAt:H,nextUpdateAt:z,freshness:(Oe=D.freshness)!=null?Oe:"unknown",stats:W})};v.forEach(C),b.forEach(C),u||(N.sort((R,D)=>R.name.localeCompare(D.name)),i(N))}catch(m){console.error("[Players Compare] player search failed",m),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const nk={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function DY(t={}){const e=Object.keys(nk).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:nk[r],value:$o(i)}}).filter(r=>r.value>0),s=e.reduce((r,i)=>r+i.value,0);return s?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/s*100))})):[]}function $o(t){const e=Number(t);return Number.isFinite(e)?e:0}function MY(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function FY(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(rk,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),n.jsx(rk,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function rk({to:t,title:e,desc:s}){return n.jsxs(hs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function BY(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function $Y(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}function OY(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}const VY={weltenimwandel:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",freedom:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59"};function UY(t){var s;const e=OY(t);return(s=VY[e])!=null?s:null}function zY(t,e=128){var a,l;const s=UY(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=lc(s))!=null?a:null,i=r&&(l=Rr(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function zh(t,e=128){return zY(t,e).thumb}const gc={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},ax=(t,e)=>({...t||{},...e||{}}),ik=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),s=Math.floor((Date.now()-e.getTime())/864e5);return s<=0?"today":s===1?"yesterday":`${s}d ago`},HY=t=>Object.values(t||{}).reduce((e,s)=>e+(s||0),0),Pn=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function GY(t){var v,b,_,N,C,R,D,A;const e=Pn(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const s=Pn(t==null?void 0:t.baseMain),r=Pn(t==null?void 0:t.conBase);if(s!=null&&r!=null)return s+r;const i=(t==null?void 0:t.baseStats)||{},a=Pn(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const l=Pn(i==null?void 0:i.main),d=Pn(i==null?void 0:i.con);if(l!=null&&d!=null)return l+d;const u=(t==null?void 0:t.values)||{},h=(b=(v=Pn(u==null?void 0:u.SumBaseTotal))!=null?v:Pn(u==null?void 0:u.sumBaseTotal))!=null?b:Pn(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const m=(C=(N=(_=Pn(u==null?void 0:u.Main))!=null?_:Pn(u==null?void 0:u.main))!=null?N:Pn(u==null?void 0:u.BaseMain))!=null?C:Pn(u==null?void 0:u.baseMain),g=(A=(D=(R=Pn(u==null?void 0:u.Con))!=null?R:Pn(u==null?void 0:u.con))!=null?D:Pn(u==null?void 0:u.ConBase))!=null?A:Pn(u==null?void 0:u.conBase);return m!=null&&g!=null?m+g:null}function Dl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function WY(t,e=56){if(!t)return;const s=Dl(t),r=Sn.find(i=>Dl(i.label)===s||Dl(i.key)===s)||Sn.find(i=>Dl(i.label).startsWith(s)||s.startsWith(Dl(i.label))||Dl(i.key).startsWith(s)||s.startsWith(Dl(i.key)));return r?Rr(r.iconUrl,e):void 0}function qY({name:t,memberClass:e,online:s,theme:r=gc}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=WY(e,56);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const KY={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},QY=({role:t})=>n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(KY[t]||""),children:t});function ak(t,e){const s=(t!=null?t:"").trim();if(s)return s;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function XY(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,s=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:s!=null&&r!=null?s+r:null;return i!=null?i.toLocaleString("de-DE"):""}function Jp({label:t,value:e,theme:s=gc}){return n.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:s.border,background:s.tile},children:[n.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),n.jsx("div",{className:"text-lg font-semibold",style:{color:s.title},children:e})]})}function YY({member:t,theme:e,actions:s,extraKPIs:r}){var m,g,v,b,_,N,C,R,D;if(!t)return null;const i=ax(gc,e),a=t,l=ak((g=(m=a.guildJoined)!=null?m:a.joinedAt)!=null?g:null,(v=a.guildJoinedMs)!=null?v:null),d=ak((b=a.lastActivity)!=null?b:null,(_=a.lastActivityMs)!=null?_:typeof a.lastOnline=="number"?a.lastOnline:null),u=XY(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return n.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),n.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[n.jsx("div",{className:"shrink-0",children:n.jsx(qY,{name:t.name,memberClass:(R=(C=a.class)!=null?C:(N=a.values)==null?void 0:N.Class)!=null?R:null,online:a.online,theme:i})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&n.jsx(QY,{role:a.role})]}),n.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",l,"  Last ",d]})]}),n.jsx("div",{className:"ml-auto",children:s})]}),n.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsx(Jp,{label:"Level",value:(D=a.level)!=null?D:"",theme:i}),typeof a.scrapbook=="number"&&n.jsx(Jp,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),n.jsx(Jp,{label:"Sum Base",value:u,theme:i}),n.jsx(Jp,{label:"Total Stats",value:h,theme:i}),r]})]})}function Ml(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function JY(t,e=40){if(!t)return;const s=Ml(t);let r=Sn.find(i=>Ml(i.label)===s||Ml(i.key)===s)||Sn.find(i=>Ml(i.label).startsWith(s)||s.startsWith(Ml(i.label))||Ml(i.key).startsWith(s)||s.startsWith(Ml(i.key)));return r?Rr(r.iconUrl,e):void 0}function ZY({name:t,memberClass:e,online:s,theme:r=gc}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=JY(e,40);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const eJ=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function tJ({rows:t,selId:e,onSelect:s,rightCols:r,theme:i}){const a=ax(gc,i);return n.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[n.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),n.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[n.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((l,d)=>{var u,h,m;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(d%2?"bg-slate-800/10":"")+(l.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[n.jsx(ZY,{name:l.name,memberClass:(m=(h=l.class)!=null?h:(u=l.values)==null?void 0:u.Class)!=null?m:null,online:l.online,theme:a}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[l.class,l.server?`  ${l.server}`:""]})]}),n.jsx("div",{className:"justify-self-end",children:n.jsx(eJ,{role:l.role})}),r(l)]},l.id)})]})]})}function Fl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function sJ(t,e=40){if(!t)return;const s=Fl(t);let r=Sn.find(i=>Fl(i.label)===s||Fl(i.key)===s)||Sn.find(i=>Fl(i.label).startsWith(s)||s.startsWith(Fl(i.label))||Fl(i.key).startsWith(s)||s.startsWith(Fl(i.key)));return r?Rr(r.iconUrl,e):void 0}function nJ({rows:t,selId:e,onSelect:s,footer:r,theme:i}){const a=ax(gc,i);return n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(l=>{var v,b,_,N,C,R,D,A,y;const d=l,u=l.name.slice(0,2).toUpperCase(),h=sJ((_=(b=d.class)!=null?b:(v=d.values)==null?void 0:v.Class)!=null?_:null,40),m=typeof d.level=="number"?d.level:typeof((N=d.values)==null?void 0:N.Level)=="number"?d.values.Level:"",g=typeof d.scrapbook=="number"?`${d.scrapbook}%`:typeof((C=d.values)==null?void 0:C.Scrapbook)=="number"?`${d.values.Scrapbook}%`:null;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(l.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:l.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[h?n.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:w=>{const M=w.currentTarget.parentElement;M&&(M.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(A=(D=d.class)!=null?D:(R=d.values)==null?void 0:R.Class)!=null?A:"",d.server?`  ${d.server}`:""]})]}),n.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(y=d.role)!=null?y:""})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:m})]}),g&&n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),n.jsx("div",{className:"mt-3",children:r(l)})]},l.id)})})}const rJ=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(s=>{const r=t[s];typeof r=="number"&&(e[s]=r)}),Object.keys(e).length?e:void 0};function iJ({members:t,defaultView:e="list",defaultQuery:s="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:l,renderActions:d,renderKPIs:u,theme:h}){var F;const m=E.useMemo(()=>ax(gc,h),[h]),[g,v]=E.useState(e),[b,_]=E.useState(s),[N,C]=E.useState(r.key),[R,D]=E.useState(r.dir),[A,y]=E.useState((F=t[0])==null?void 0:F.id),w=a!=null?a:A,M=I=>{a||y(I);const B=t.find($=>$.id===I);B&&l&&l(B)},k=E.useMemo(()=>{const I=b.trim().toLowerCase();return I?t.filter(B=>B.name.toLowerCase().includes(I)||B.class.toLowerCase().includes(I)||String(B.role).toLowerCase().includes(I)):t},[t,b]),S=E.useMemo(()=>{const I=R==="asc"?1:-1,B=$=>{var H,z;switch(N){case"sumBaseStats":{const W=GY($);return W==null?-1/0:W}case"totalStats":return(z=(H=$.totalStats)!=null?H:HY(rJ($.baseStats)))!=null?z:-1/0;default:return $[N]}};return[...k].sort(($,H)=>{const z=B($),W=B(H);return z===W?0:z>W?I:-I})},[k,N,R]),T=E.useMemo(()=>S.find(I=>I.id===w)||S[0],[S,w]);return n.jsxs("div",{children:[i&&n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:m.tile,borderColor:m.border},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"View"}),n.jsxs("select",{value:g,onChange:I=>v(I.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[n.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),n.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Search"}),n.jsx("input",{value:b,onChange:I=>_(I.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:m.border}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Sort by"}),n.jsxs("select",{value:String(N),onChange:I=>C(I.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[n.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),n.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),n.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),n.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),n.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),n.jsx("button",{onClick:()=>D(I=>I==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:m.border},children:R==="asc"?"":""})]})]}),n.jsx(YY,{member:T,actions:T&&(d?d(T):n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Profile"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Compare"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Message"})]})),extraKPIs:T&&u?u(T):null,theme:m}),g==="list"?n.jsx(tJ,{rows:S,selId:w,onSelect:M,theme:m,rightCols:I=>{var B;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-right text-sm",children:(B=I.level)!=null?B:""}),n.jsx("div",{className:"text-right text-xs",style:{color:m.sub},children:ik(I.lastOnline)})]})}}):n.jsx(nJ,{rows:S,selId:w,onSelect:M,theme:m,footer:I=>n.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:m.sub},children:n.jsxs("span",{children:["Last ",ik(I.lastOnline)]})})})]})}function aJ({guildName:t,server:e,emblemUrl:s,lastScanISO:r,members:i,avgLevel:a,totalPower:l,activity7d:d,topClasses:u,tickerItems:h,href:m,onClick:g,className:v}){const b=!!SA(),_=E.useMemo(()=>{if(!r)return null;const B=Date.now()-new Date(r).getTime(),$=Math.max(0,Math.floor(B/6e4));if($<60)return`${$}m`;const H=Math.floor($/60);return H<24?`${H}h`:`${Math.floor(H/24)}d`},[r]),N=sh(0),C=sh(0),R=sh(0),D=sh(0),A=Gp(N,B=>Math.round(B).toString()),y=Gp(C,B=>Math.round(B).toString()),w=Gp(R,B=>Math.round(B).toLocaleString()),M=Gp(D,B=>`${Math.round(B)}%`);E.useEffect(()=>{const B=b?0:.6;if(B===0){N.set(i),C.set(a),R.set(l!=null?l:0),D.set(d!=null?d:0);return}const $=[Wp(N,i,{duration:B}),Wp(C,a,{duration:B}),Wp(R,l!=null?l:0,{duration:B}),Wp(D,d!=null?d:0,{duration:B})];return()=>$.forEach(H=>H.stop())},[i,a,l,d,b]);const k=E.useRef(null);E.useEffect(()=>{if(b||!k.current)return;const B=k.current;let $=0,H=0;const z=()=>{H+=.016;const W=H*14%140-20;B.style.setProperty("--s-x",`${W}%`),$=requestAnimationFrame(z)};return $=requestAnimationFrame(z),()=>cancelAnimationFrame($)},[b]);const S={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},T=100,F=m?"a":"div",I=m?{href:m}:{onClick:g};return n.jsxs(F,{...I,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",v!=null?v:""].join(" "),style:{background:`linear-gradient(135deg, ${S.bgFrom}, ${S.bgTo})`},children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),n.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[n.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[s?n.jsx("img",{src:s,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):n.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:n.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),n.jsx("div",{ref:k,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),_&&n.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:S.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${S.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",_]}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${T}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${T}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${T}deg, transparent 0 46px, ${S.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),n.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[n.jsx("h3",{className:"truncate font-extrabold",style:{color:S.title,fontSize:22},children:t}),n.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:S.soft,border:`1px solid ${S.border}`},children:e})]}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[n.jsx(Zp,{label:"Members",value:A}),n.jsx(Zp,{label:" Level",value:y}),n.jsx(Zp,{label:"Total Power",value:w}),typeof d=="number"&&n.jsx(Zp,{label:"Activity (7d)",value:M})]}),u!=null&&u.length?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:S.soft},children:"Top Classes"}),u.slice(0,3).map(B=>n.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${S.border}`,color:S.text},children:[B.iconUrl?n.jsx("img",{src:B.iconUrl,alt:B.key,className:"h-4 w-4 object-contain"}):n.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:S.accent,opacity:.85}}),n.jsxs("span",{className:"text-xs",children:[B.key," ",n.jsxs("span",{className:"opacity-70",children:["(",Math.round(B.percent),"%)"]})]})]},B.key))]}):null]})]})]}),h!=null&&h.length?n.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${S.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:n.jsx(oJ,{items:h,muted:b,color:S.soft})}):null]})}function Zp({label:t,value:e}){return n.jsxs("div",{className:"relative z-10 min-w-0",children:[n.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),n.jsx(wA.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function oJ({items:t,muted:e,color:s}){const r=E.useRef(null);return E.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,l=0;const d=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,l=requestAnimationFrame(d)};return l=requestAnimationFrame(d),()=>cancelAnimationFrame(l)},[e]),n.jsx("div",{className:"overflow-hidden",children:n.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:s},children:t.concat(t).map((i,a)=>n.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const lJ="_wrap_q5gkc_53",cJ="_banner_q5gkc_59",dJ="_bannerRowTop_q5gkc_61",uJ="_bannerStripe_q5gkc_71",hJ="_bannerTitle_q5gkc_79",mJ="_bannerRowBottom_q5gkc_93",pJ="_bannerSub_q5gkc_95",fJ="_monthPickerWrap_q5gkc_101",gJ="_monthPickerLabel_q5gkc_113",xJ="_monthPicker_q5gkc_101",yJ="_monthButton_q5gkc_131",vJ="_monthButtonText_q5gkc_159",bJ="_chev_q5gkc_161",_J="_monthList_q5gkc_165",wJ="_monthOption_q5gkc_195",jJ="_monthBadge_q5gkc_221",SJ="_gridRow_q5gkc_237",NJ="_gridRowBottom_q5gkc_239",kJ="_sideImage_q5gkc_253",CJ="_sideImagePh_q5gkc_271",TJ="_emblemPanel_q5gkc_275",EJ="_emblemFrame_q5gkc_295",AJ="_emblemImg_q5gkc_297",IJ="_emblemPlaceholder_q5gkc_299",RJ="_emblemShimmer_q5gkc_307",PJ="_emblemCaption_q5gkc_315",LJ="_card_q5gkc_319",DJ="_cardHeader_q5gkc_331",MJ="_cardTitle_q5gkc_339",FJ="_cardSubtitle_q5gkc_341",BJ="_headerRight_q5gkc_343",$J="_cardBody_q5gkc_345",OJ="_tableWrap_q5gkc_349",VJ="_tableTitle_q5gkc_351",UJ="_table_q5gkc_349",zJ="_th_q5gkc_355",HJ="_td_q5gkc_355",GJ="_tdEmpty_q5gkc_365",WJ="_sectionDivider_q5gkc_375",qJ="_sectionStripe_q5gkc_389",KJ="_sectionTitle_q5gkc_397",Rt={wrap:lJ,banner:cJ,bannerRowTop:dJ,bannerStripe:uJ,bannerTitle:hJ,bannerRowBottom:mJ,bannerSub:pJ,monthPickerWrap:fJ,monthPickerLabel:gJ,monthPicker:xJ,monthButton:yJ,monthButtonText:vJ,chev:bJ,monthList:_J,monthOption:wJ,monthBadge:jJ,gridRow:SJ,gridRowBottom:NJ,sideImage:kJ,sideImagePh:CJ,emblemPanel:TJ,emblemFrame:EJ,emblemImg:AJ,emblemPlaceholder:IJ,emblemShimmer:RJ,emblemCaption:PJ,card:LJ,cardHeader:DJ,cardTitle:MJ,cardSubtitle:FJ,headerRight:BJ,cardBody:$J,tableWrap:OJ,tableTitle:VJ,table:UJ,th:zJ,td:HJ,tdEmpty:GJ,sectionDivider:WJ,sectionStripe:qJ,sectionTitle:KJ};function QJ(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function ok(t,e="de-DE"){const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const lk=({title:t,subtitle:e,children:s,rightBadge:r})=>n.jsxs("section",{className:Rt.card,children:[(t||e||r)&&n.jsxs("header",{className:Rt.cardHeader,children:[n.jsxs("div",{className:Rt.headerTitles,children:[t&&n.jsx("h3",{className:Rt.cardTitle,children:t}),e&&n.jsx("div",{className:Rt.cardSubtitle,children:e})]}),r&&n.jsx("div",{className:Rt.headerRight,children:r})]}),n.jsx("div",{className:Rt.cardBody,children:s})]}),ck=({block:t})=>{var r,i;const e=t.columns,s=(r=t.rows)!=null?r:[];return n.jsxs("div",{className:Rt.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&n.jsx("div",{className:Rt.tableTitle,children:t.title}),n.jsxs("table",{className:Rt.table,children:[n.jsx("thead",{children:n.jsx("tr",{children:e.map(a=>n.jsx("th",{className:Rt.th,style:{width:a.width},children:a.label},a.key))})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{className:Rt.tdEmpty,colSpan:e.length,children:"No data"})}):s.map((a,l)=>{var d;return n.jsx("tr",{children:e.map(u=>{var v;const h=a[u.key],m=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?QJ(m):m;return n.jsx("td",{className:Rt.td,"data-align":(v=u.align)!=null?v:"left",children:u.render?u.render(a):g},u.key)})},(d=a.id)!=null?d:l)})})]}),t.footer&&n.jsx("div",{className:Rt.tableFooter,children:t.footer})]})},XJ=(t,e)=>{E.useEffect(()=>{function s(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[t,e])},YJ=({months:t,currentKey:e,onChange:s,fallbackDate:r})=>{var m;if(!(Array.isArray(t)&&t.length>0&&e))return n.jsx("div",{className:Rt.bannerSub,children:r!=null?r:""});const a=E.useRef(null),[l,d]=E.useState(!1);XJ(a,()=>d(!1));const u=t.find(g=>g.key===e),h=u?`${ok(u.fromISO)}${ok(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return n.jsxs("div",{className:Rt.monthPickerWrap,children:[n.jsx("div",{className:Rt.monthPickerLabel,children:"Monat"}),n.jsxs("div",{className:Rt.monthPicker,ref:a,children:[n.jsxs("button",{type:"button",className:Rt.monthButton,onClick:()=>d(g=>!g),"aria-haspopup":"listbox","aria-expanded":l,children:[n.jsx("span",{className:Rt.monthButtonText,children:(m=u==null?void 0:u.label)!=null?m:""}),n.jsx("svg",{className:Rt.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),l&&n.jsx("ul",{className:Rt.monthList,role:"listbox",children:t.map(g=>n.jsx("li",{children:n.jsx("button",{type:"button",className:Rt.monthOption,onClick:()=>{d(!1),s==null||s(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&n.jsx("span",{className:Rt.monthBadge,children:h})]})},JJ=({title:t,monthRange:e,months:s,currentMonthKey:r,onMonthChange:i})=>n.jsxs("div",{className:Rt.banner,children:[n.jsxs("div",{className:Rt.bannerRowTop,children:[n.jsx("div",{className:Rt.bannerStripe}),n.jsx("div",{className:Rt.bannerTitle,children:t}),n.jsx("div",{className:Rt.bannerStripe})]}),n.jsx("div",{className:Rt.bannerRowBottom,children:n.jsx(YJ,{months:s,currentKey:r,onChange:i,fallbackDate:e})})]}),ZJ=({emblemUrl:t,caption:e})=>n.jsxs("div",{className:Rt.emblemPanel,children:[n.jsxs("div",{className:Rt.emblemFrame,children:[t?n.jsx("img",{src:t,alt:"Guild Emblem",className:Rt.emblemImg}):n.jsx("div",{className:Rt.emblemPlaceholder,children:"Emblem"}),n.jsx("div",{className:Rt.emblemShimmer})]}),e&&n.jsx("div",{className:Rt.emblemCaption,children:e})]}),dk=({imgUrl:t,alt:e})=>n.jsx("div",{className:Rt.sideImage,children:t?n.jsx("img",{src:t,alt:e!=null?e:"side"}):n.jsx("div",{className:Rt.sideImagePh,children:"Image"})}),Rv=({children:t,className:e})=>n.jsx("div",{className:`${Rt.gridRow} ${e!=null?e:""}`,children:t}),eZ=({children:t})=>n.jsxs("div",{className:Rt.sectionDivider,children:[n.jsx("div",{className:Rt.sectionStripe}),n.jsx("div",{className:Rt.sectionTitle,children:t}),n.jsx("div",{className:Rt.sectionStripe})]}),tZ=({data:t,onMonthChange:e})=>{const{header:s,panels:r,tablesTop:i,tablesBottom:a}=t;return n.jsxs("div",{className:Rt.wrap,children:[n.jsx(JJ,{title:s.title,monthRange:s.monthRange,months:s.months,currentMonthKey:s.currentMonthKey,onMonthChange:e}),n.jsxs(Rv,{children:[n.jsx(dk,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),n.jsx(ZJ,{emblemUrl:s.emblemUrl,caption:s.centerCaption}),n.jsx(dk,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),n.jsx(Rv,{children:i.map((l,d)=>n.jsx(lk,{title:l.title,subtitle:l.subtitle,children:n.jsx(ck,{block:l})},d))}),n.jsx(eZ,{children:"Guild Overview"}),n.jsx(Rv,{className:Rt.gridRowBottom,children:a.map((l,d)=>n.jsx(lk,{title:l.title,subtitle:l.subtitle,children:n.jsx(ck,{block:l})},d))})]})},sZ=({guildId:t,guildName:e,guildServer:s})=>{const[r,i]=E.useState(!0),[a,l]=E.useState(null),[d,u]=E.useState(void 0),h=E.useRef({}),[m,g]=E.useState(()=>ef(e,s));E.useEffect(()=>{let b=!1;async function _(){var N,C,R,D,A;i(!0);try{const y=pc(xt,`guilds/${t}/history_monthly`),w=await mn(y),M=[];for(const T of w.docs){const F=T.id,I=T.data();if(!I)continue;h.current[F]=I;const B=(N=I==null?void 0:I.meta)!=null?N:{},$=B.fromISO||B.baselineISO||B.firstISO||"",H=B.toISO||B.latestISO||B.nowISO||"",z=Number((C=B.daysSpan)!=null?C:Math.floor((+new Date(H)-+new Date($))/864e5))||0,W=!!((D=(R=I==null?void 0:I.status)==null?void 0:R.available)!=null?D:$&&H&&z<=40),K=B.label||new Date(F+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});M.push({key:F,label:K,fromISO:$||new Date(F+"-01").toISOString(),toISO:H||new Date(F+"-28").toISOString(),daysSpan:z,available:W,reason:W||(A=I==null?void 0:I.status)==null?void 0:A.reason})}if(M.sort((T,F)=>T.key<F.key?1:-1),b)return;if(M.length===0){l(null),u(void 0),g(ef(e,s)),i(!1);return}l(M);const k=M[0].key;u(k);const S=h.current[k];g(uk(S,{guildName:e,guildServer:s,currentMonthKey:k,months:M}))}catch(y){console.error(y),l(null),u(void 0),g(ef(e,s))}finally{b||i(!1)}}return _(),()=>{b=!0}},[t,e,s]);async function v(b){u(b);let _=h.current[b];if(!_)try{const N=qt(xt,`guilds/${t}/history_monthly/${b}`),C=await Js(N);C.exists()?(_=C.data(),h.current[b]=_):_=null}catch(N){console.error(N),_=null}if(!_){g(ef(e,s,{currentMonthKey:b,months:a!=null?a:void 0}));return}g(uk(_,{guildName:e,guildServer:s,currentMonthKey:b,months:a!=null?a:void 0}))}return n.jsx(tZ,{data:m,onMonthChange:v})};function ef(t,e,s){return{header:{title:`${t}  Monthly Progress`,monthRange:"-",emblemUrl:zh(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:s==null?void 0:s.currentMonthKey,months:s==null?void 0:s.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[Bl("Most Base Stats gained",e?`Server ${e}`:void 0),Bl("Sum Base Stats"),Bl("Highest Base Stats")],tablesBottom:[Bl("Main & Con"),Bl("Sum Base Stats"),Bl("Highest Base Stats"),Bl("Highest Total Stats")]}}function Bl(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function uk(t,e){var l,d,u,h,m,g,v,b;(l=t==null?void 0:t.meta)!=null;const s={title:`${e.guildName}  Monthly Progress`,monthRange:void 0,emblemUrl:zh(e.guildName,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"",width:70,align:"right",format:"num"}],rows:((d=t==null?void 0:t.mostBaseGained)!=null?d:[]).map((_,N)=>{var C,R,D,A,y,w,M,k;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",level:(A=(D=_.levelLatest)!=null?D:_.level)!=null?A:null,base:(w=(y=_.baseLatest)!=null?y:_.base)!=null?w:null,delta:(k=(M=_.baseDelta)!=null?M:_.delta)!=null?k:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((_,N)=>{var C,R,D,A,y,w,M;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",base:(D=_.base)!=null?D:null,stam:(y=(A=_.stamDelta)!=null?A:_.staminaDelta)!=null?y:null,sho:(M=(w=_.shoDelta)!=null?w:_.shootingDelta)!=null?M:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((_,N)=>{var C,R,D,A,y;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",stats:(A=(D=_.stats)!=null?D:_.base)!=null?A:null,delta:(y=_.delta)!=null?y:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((m=t==null?void 0:t.mainAndCon)!=null?m:[]).map((_,N)=>{var C,R,D,A,y,w;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",class:(A=(D=_.class)!=null?D:_.className)!=null?A:"",stats:(y=_.stats)!=null?y:null,delta:(w=_.delta)!=null?w:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((_,N)=>{var C,R,D,A,y;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",base:(D=_.base)!=null?D:null,stam:(A=_.stamDelta)!=null?A:null,sho:(y=_.shoDelta)!=null?y:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((v=t==null?void 0:t.highestBaseStats)!=null?v:[]).map((_,N)=>{var C,R,D,A;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",stats:(D=_.stats)!=null?D:null,delta:(A=_.delta)!=null?A:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((b=t==null?void 0:t.highestTotalStats)!=null?b:[]).map((_,N)=>{var C,R,D,A;return{id:(C=_.playerId)!=null?C:N,rank:N+1,name:(R=_.name)!=null?R:"-",total:(D=_.total)!=null?D:null,delta:(A=_.delta)!=null?A:null}})}];return{header:s,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const nZ="_root_r1uj3_5",rZ="_sectionDivider_r1uj3_17",iZ="_sectionStripe_r1uj3_31",aZ="_sectionTitle_r1uj3_33",$u={root:nZ,sectionDivider:rZ,sectionStripe:iZ,sectionTitle:aZ},oZ="_root_4jywc_1",lZ="_accent_4jywc_31",hk={root:oZ,default:"_default_4jywc_29",accent:lZ};function il({text:t,tone:e="default",className:s}){return n.jsx("div",{className:`${hk.root} ${hk[e]} ${s!=null?s:""}`.trim(),children:t})}const cZ="_card_vvv3s_3",dZ="_wrap_vvv3s_31",uZ="_divider_vvv3s_45",hZ="_rows_vvv3s_77",mZ="_row_vvv3s_77",pZ="_left_vvv3s_109",fZ="_label_vvv3s_111",gZ="_avgHead_vvv3s_113",xZ="_avgNum_vvv3s_115",yZ="_top3_vvv3s_121",vZ="_chip_vvv3s_123",bZ="_badge_vvv3s_151",_Z="_name_vvv3s_159",wZ="_score_vvv3s_161",jZ="_headerSpacer_vvv3s_167",dr={card:cZ,wrap:dZ,divider:uZ,rows:hZ,row:mZ,left:pZ,label:fZ,avgHead:gZ,avgNum:xZ,top3:yZ,chip:vZ,badge:bZ,name:_Z,score:wZ,headerSpacer:jZ};function SZ({name:t,value:e,classLabel:s,colors:r}){const i=Sb(s,64);return n.jsxs("div",{className:dr.chip,children:[n.jsx("span",{className:dr.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:dr.name,children:t!=null?t:""}),n.jsx("span",{className:dr.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function NZ({snapshot:t,colors:e,title:s="Base Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var m,g;return((m=h[d])!=null?m:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return n.jsxs("div",{className:dr.card,children:[n.jsx(il,{text:s}),n.jsx("div",{className:dr.headerSpacer}),n.jsxs("div",{className:dr.wrap,children:[n.jsx("div",{className:dr.divider}),n.jsx("div",{className:dr.rows,children:a.map((d,u)=>n.jsxs("div",{className:dr.row,children:[n.jsxs("div",{className:dr.left,children:[n.jsx("div",{className:dr.label,children:d.label}),n.jsx("div",{className:dr.avgHead,children:""}),n.jsx("div",{className:dr.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:dr.top3,children:d.list.map((h,m)=>n.jsx(SZ,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}const kZ="_card_1enwc_1",CZ="_wrap_1enwc_1",TZ="_divider_1enwc_1",EZ="_rows_1enwc_1",AZ="_row_1enwc_1",IZ="_left_1enwc_1",RZ="_label_1enwc_1",PZ="_avgHead_1enwc_1",LZ="_avgNum_1enwc_1",DZ="_top3_1enwc_1",MZ="_chip_1enwc_1",FZ="_badge_1enwc_1",BZ="_name_1enwc_1",$Z="_score_1enwc_1",OZ="_headerSpacer_1enwc_1",ur={card:kZ,wrap:CZ,divider:TZ,rows:EZ,row:AZ,left:IZ,label:RZ,avgHead:PZ,avgNum:LZ,top3:DZ,chip:MZ,badge:FZ,name:BZ,score:$Z,headerSpacer:OZ};function VZ({name:t,value:e,classLabel:s,colors:r}){const i=Sb(s,64);return n.jsxs("div",{className:ur.chip,children:[n.jsx("span",{className:ur.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:ur.name,children:t!=null?t:""}),n.jsx("span",{className:ur.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function UZ({snapshot:t,colors:e,title:s="Total Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var m,g;return((m=h[d])!=null?m:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return n.jsxs("div",{className:ur.card,children:[n.jsx(il,{text:s}),n.jsx("div",{className:ur.headerSpacer}),n.jsxs("div",{className:ur.wrap,children:[n.jsx("div",{className:ur.divider}),n.jsx("div",{className:ur.rows,children:a.map((d,u)=>n.jsxs("div",{className:ur.row,children:[n.jsxs("div",{className:ur.left,children:[n.jsx("div",{className:ur.label,children:d.label}),n.jsx("div",{className:ur.avgHead,children:""}),n.jsx("div",{className:ur.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:ur.top3,children:d.list.map((h,m)=>n.jsx(VZ,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}function zZ({guild:t,snapshot:e,colors:s}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(il,{text:"General Info"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function HZ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(il,{text:"Fortress"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function GZ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(il,{text:"Rankings"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function WZ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(il,{text:"Serververgleich"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const qZ=E.memo(function({guild:e,snapshot:s,emblemUrl:r,colors:i}){const a=i.icon,l=({text:d})=>n.jsxs("div",{className:$u.sectionDivider,children:[n.jsx("div",{className:$u.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),n.jsx("div",{className:$u.sectionTitle,style:{color:i.soft},children:d}),n.jsx("div",{className:$u.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return n.jsxs("div",{className:$u.root+" space-y-4",children:[n.jsx(l,{text:"GUILD OVERVIEW"}),n.jsx("div",{style:{marginTop:6,marginBottom:10},children:n.jsx(l,{text:"AVERAGE PLAYER STATS"})}),n.jsx(zZ,{guild:e,snapshot:s,colors:i}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(NZ,{snapshot:s,colors:i}),n.jsx(UZ,{snapshot:s,colors:i})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(HZ,{colors:i}),n.jsx(GZ,{colors:i})]}),n.jsx("div",{className:"mt-4",children:n.jsx(WZ,{colors:i})})]})}),KZ="_wrapper_zqchq_3",QZ="_grid_zqchq_9",XZ="_tile_zqchq_13",YZ="_disabled_zqchq_37",JZ="_crestWrap_zqchq_41",ZZ="_crest_zqchq_41",eee="_ring_zqchq_53",tee="_badge_zqchq_55",see="_meta_zqchq_67",nee="_nameRow_zqchq_69",ree="_name_zqchq_69",iee="_share_zqchq_73",aee="_sub_zqchq_75",oee="_tileButton_zqchq_79",lee="_donutCard_zqchq_85",cee="_donutHeader_zqchq_87",dee="_legend_zqchq_91",uee="_legendItem_zqchq_93",hee="_legendSwatch_zqchq_95",mee="_legendRight_zqchq_97",pee="_centerLabel_zqchq_101",Fs={wrapper:KZ,grid:QZ,tile:XZ,disabled:YZ,crestWrap:JZ,crest:ZZ,ring:eee,badge:tee,meta:see,nameRow:nee,name:ree,share:iee,sub:aee,tileButton:oee,donutCard:lee,donutHeader:cee,legend:dee,legendItem:uee,legendSwatch:hee,legendRight:mee,centerLabel:pee},Z0=56;function og(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function mk(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const fee=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function gee(t){return t?/drive\.google\.com/.test(t):!1}function pk(t,e=Z0){if(t)return gee(t)?Rr(t,e):t}function xee(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const s={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return s[e]?s[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function yee(t){var m,g,v,b,_,N;if(!t)return null;const e=t,s=t,r=(m=e.key)!=null?m:s.id,i=(g=e.label)!=null?g:s.name,a=(b=(v=s.crestUrl)!=null?v:e.iconUrl)!=null?b:s.iconUrl,l=(_=e.iconUrl)!=null?_:s.iconUrl,d=(N=e.fallback)!=null?N:s.fallback;if(!r||!i)return null;const u=pk(a,Z0),h=pk(l,Z0);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:d?String(d):void 0}}function VA(t,e){var m,g,v,b,_,N,C,R,D,A,y,w,M,k,S,T,F,I,B,$,H;const s={},r={},i={},a={},l=e.map(z=>z.id);for(const z of l)s[z]=0,r[z]=0,i[z]=0,a[z]=null;for(const z of Array.isArray(t)?t:[]){const W=(w=(A=(R=(N=(b=(v=(g=(m=z.classId)!=null?m:z.class)!=null?g:z.klass)!=null?v:z.playerClass)!=null?b:z.cls)!=null?N:(_=z.values)==null?void 0:_.Class)!=null?R:(C=z.values)==null?void 0:C.class)!=null?A:(D=z.values)==null?void 0:D.Klasse)!=null?w:(y=z.values)==null?void 0:y.klasse,K=xee(W);if(!K||!l.includes(K))continue;s[K]+=1;const q=fee((T=(k=z.level)!=null?k:(M=z.values)==null?void 0:M.Level)!=null?T:(S=z.values)==null?void 0:S.level);q!=null&&(r[K]+=q,i[K]+=1,(!a[K]||((I=(F=a[K])==null?void 0:F.level)!=null?I:-1/0)<q)&&(a[K]={id:z.id,name:(H=($=z.name)!=null?$:(B=z.values)==null?void 0:B.Name)!=null?H:null,level:q}))}const d=Object.values(s).reduce((z,W)=>z+W,0),u={},h={};return l.forEach(z=>{u[z]=d>0?s[z]/d*100:0,h[z]=i[z]>0?r[z]/i[z]:null}),{counts:s,shares:u,avg:h,top:a}}const vee=({valuePct:t})=>{const s=2*Math.PI*28,r=s*(1-Math.max(0,Math.min(100,t))/100);return n.jsxs("svg",{className:Fs.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:s,strokeDashoffset:r,strokeLinecap:"round"})]})},bee=({data:t,classMeta:e,onPickClass:s})=>{const[r,i]=E.useState({}),a=Array.isArray(t)?t:[],l=Array.isArray(e)?e:[],{counts:d,shares:u,avg:h,top:m}=E.useMemo(()=>VA(a,l),[a,l]);return n.jsx("section",{className:Fs.wrapper,children:n.jsx("div",{className:Fs.grid,style:{gridTemplateColumns:"1fr"},children:l.map(g=>{var D,A,y;const v=(D=d[g.id])!=null?D:0,b=(A=u[g.id])!=null?A:0,_=h[g.id],N=m[g.id],C=v<=0,R=r[g.id]?void 0:g.crestUrl||g.iconUrl;return n.jsxs("div",{className:`${Fs.tile} ${C?Fs.disabled:""}`,title:C?`${g.name}: kein Mitglied`:`${g.name}  ${mk(v)}  ${og(b)}${_?`   ${_.toFixed(1)}`:""}`,children:[n.jsxs("div",{className:Fs.crestWrap,children:[R?n.jsx("img",{className:Fs.crest,src:R,alt:g.name,onError:()=>i(w=>({...w,[g.id]:!0}))}):n.jsx("div",{className:Fs.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(y=g.fallback)!=null?y:""}),n.jsx(vee,{valuePct:b}),n.jsx("div",{className:Fs.badge,children:mk(v)})]}),n.jsxs("div",{className:Fs.meta,children:[n.jsxs("div",{className:Fs.nameRow,children:[n.jsx("div",{className:Fs.name,children:g.name}),n.jsx("div",{className:Fs.share,children:og(b)})]}),n.jsxs("div",{className:Fs.sub,children:[_?` Lvl ${_.toFixed(1)}`:"",N?`  Top: ${N.name}${N.level?` (Lv ${N.level})`:""}`:""]})]}),!C&&s&&n.jsx("button",{className:Fs.tileButton,onClick:()=>s(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},_ee=({data:t,classMeta:e})=>{const s=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=E.useMemo(()=>VA(s,r),[s,r]),l=E.useMemo(()=>Object.values(a).reduce((d,u)=>d+u,0),[a]);return n.jsxs("div",{className:Fs.donutCard,children:[n.jsxs("div",{className:Fs.donutHeader,children:[n.jsx("div",{children:"Klassen-Verteilung"}),n.jsxs("div",{className:Fs.legendRight,children:["Gesamt: ",l]})]}),n.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[n.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[n.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,v=r.map((_,N)=>{var C;return{id:_.id,pct:(C=i[_.id])!=null?C:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*N)} 60% 55%)`}});let b=0;return v.map(_=>{const N=(_.pct||0)/100;if(N<=0)return null;const C=b,R=b+g*N;b=R;const D=R-C>Math.PI?1:0,A=130+100*Math.cos(C),y=130+100*Math.sin(C),w=130+100*Math.cos(R),M=130+100*Math.sin(R),k=130+64*Math.cos(R),S=130+64*Math.sin(R),T=130+64*Math.cos(C),F=130+64*Math.sin(C),I=`M ${A} ${y} A 100 100 0 ${D} 1 ${w} ${M} L ${k} ${S} A 64 64 0 ${D} 0 ${T} ${F} Z`;return n.jsx("path",{d:I,fill:_.color,opacity:.95},_.id)})})()]}),n.jsx("div",{className:Fs.legend,children:r.map((d,u)=>{var g,v;const h=(g=i[d.id])!=null?g:0,m=(v=a[d.id])!=null?v:0;return n.jsxs("div",{className:Fs.legendItem,title:`${d.name}: ${m}  ${og(h)}`,children:[n.jsx("span",{className:Fs.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),n.jsx("span",{children:d.name}),n.jsxs("span",{className:Fs.legendRight,children:[m,"  ",og(h)]})]},d.id)})})]}),n.jsx("div",{className:Fs.centerLabel,children:"Anteile je Klasse"})]})},rn={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},wee=t=>{var e,s,r,i,a,l,d,u,h,m,g,v,b,_,N;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(s=t.class)!=null?s:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(l=t.baseMain)!=null?l:void 0,con:(d=t.conBase)!=null?d:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(m=t.treasury)!=null?m:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(v=t.attrTotal)!=null?v:void 0,conTotal:(b=t.conTotal)!=null?b:void 0,lastScan:(_=t.lastScan)!=null?_:void 0,lastActivity:(N=t.lastActivity)!=null?N:void 0}}},Pv=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},jee=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function UA({title:t,right:e,children:s}){return n.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:rn.tile,border:`1px solid ${rn.line}`},children:[(t||e)&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:rn.line},children:[n.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:rn.soft},children:t}),e]}),n.jsx("div",{className:"p-4",children:s})]})}function Ou({k:t,v:e}){return n.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[n.jsx("span",{className:"opacity-80",children:t}),n.jsx("span",{className:"font-semibold",style:{color:rn.title},children:e})]})}function See({guild:t}){var s,r;const e=zh(t.name,800);return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:n.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?n.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):n.jsx("div",{className:"text-6xl",children:""})})}),n.jsx(UA,{title:"GILDEN INFO",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsx(Ou,{k:"Mitglieder",v:(s=t.memberCount)!=null?s:""}),n.jsx(Ou,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:""}),n.jsx(Ou,{k:"Server",v:(r=t.server)!=null?r:""}),n.jsx(Ou,{k:"Inaktiv",v:"0"}),n.jsx(Ou,{k:"Aktivitt",v:"100%"})]})})]})}function Lv(){var C,R,D,A,y,w;const t=_g(),e=t.id||t.gid||t.guildId||t.guild||"",s=fi(),[r,i]=E.useState(!0),[a,l]=E.useState(null),[d,u]=E.useState(null),[h,m]=E.useState(null),[g,v]=E.useState("grid"),b=E.useMemo(()=>(Array.isArray(Sn)?Sn:[]).map(yee).filter(Boolean),[]);E.useEffect(()=>{let M=!1;async function k(){var S,T,F,I,B,$,H,z,W,K,q,se,re,U,Y,ce,oe,me,_e,Pe,te,fe,ae,be,ye,Ie,$e,Ge,nt,at,ft,$t,je,Je,Ke,bt,kt;i(!0),l(null);try{const Oe=e.trim();if(!Oe){l("Keine Gilde gewhlt."),i(!1);return}const Te=qt(xt,`guilds/${Oe}/latest/latest`),De=await Js(Te);if(!De.exists()){l("Gilde nicht gefunden."),i(!1);return}const et=De.data(),ht=(F=(T=et.name)!=null?T:(S=et.values)==null?void 0:S.Name)!=null?F:Oe,we=($=(B=et.server)!=null?B:(I=et.values)==null?void 0:I.Server)!=null?$:null,Gs=(q=Pv((K=(z=et.memberCount)!=null?z:(H=et.values)==null?void 0:H["Guild Member Count"])!=null?K:(W=et.values)==null?void 0:W.GuildMemberCount))!=null?q:null,Os=(Pe=Pv((_e=(oe=(Y=(re=et.hofRank)!=null?re:(se=et.values)==null?void 0:se["Hall of Fame Rank"])!=null?Y:(U=et.values)==null?void 0:U.HoF)!=null?oe:(ce=et.values)==null?void 0:ce.Rank)!=null?_e:(me=et.values)==null?void 0:me["Guild Rank"]))!=null?Pe:null,Ws=jee(Pv(et.timestamp));M||u({id:Oe,name:ht,server:we,memberCount:Gs,hofRank:Os,lastScanDays:Ws});const cs=qt(xt,`guilds/${Oe}/snapshots/members_summary`),es=await Js(cs);if(es.exists()&&!M){const dt=es.data(),J={guildId:String((te=dt.guildId)!=null?te:Oe),updatedAt:String((be=(ae=dt.updatedAt)!=null?ae:(fe=et.values)==null?void 0:fe.Timestamp)!=null?be:""),updatedAtMs:Number((Ie=(ye=dt.updatedAtMs)!=null?ye:et.timestamp*1e3)!=null?Ie:0),count:Number(($e=dt.count)!=null?$e:0),hash:String((Ge=dt.hash)!=null?Ge:""),avgLevel:(nt=dt.avgLevel)!=null?nt:null,avgTreasury:(at=dt.avgTreasury)!=null?at:null,avgMine:(ft=dt.avgMine)!=null?ft:null,avgBaseMain:($t=dt.avgBaseMain)!=null?$t:null,avgConBase:(je=dt.avgConBase)!=null?je:null,avgSumBaseTotal:(Je=dt.avgSumBaseTotal)!=null?Je:null,avgAttrTotal:(Ke=dt.avgAttrTotal)!=null?Ke:null,avgConTotal:(bt=dt.avgConTotal)!=null?bt:null,avgTotalStats:(kt=dt.avgTotalStats)!=null?kt:null,members:Array.isArray(dt.members)?dt.members:[]};m(J)}}catch(Oe){M||l((Oe==null?void 0:Oe.message)||"Fehler beim Laden.")}finally{M||i(!1)}}return k(),()=>{M=!0}},[e]);const _=E.useMemo(()=>{var M;return((M=h==null?void 0:h.members)!=null?M:[]).map(k=>wee(k))},[h]);if(r)return n.jsx(Bt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsx("div",{className:"text-sm",style:{color:rn.soft},children:"Lade Gildenprofil"})});if(!d)return n.jsx(Bt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsxs("div",{className:"text-sm",style:{color:rn.soft},children:[a!=null?a:"Unbekannter Fehler.",n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:()=>s("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const N=n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"px-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${rn.line}`,position:"relative",zIndex:2},children:[n.jsx("div",{className:"min-w-[120px]",children:n.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:rn.tile,border:`1px solid ${rn.line}`,color:rn.title},children:(C=d.server)!=null?C:"S?.EU"})}),n.jsx("div",{className:"flex-1 text-center",children:n.jsx("div",{className:"font-extrabold",style:{color:rn.title,fontSize:26,lineHeight:1.15},children:d.name})}),n.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:rn.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:""," ",n.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),n.jsx("div",{style:{height:1,background:rn.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return n.jsxs(Bt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[N,n.jsx("div",{className:"px-6 pb-8",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[n.jsx("div",{className:"col-span-12 md:col-span-3",children:n.jsx(See,{guild:d})}),n.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[n.jsx(qZ,{guild:d,snapshot:h,emblemUrl:zh(d.name,512)||void 0,colors:rn}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-full max-w-[980px]",children:n.jsx(aJ,{guildName:d.name,server:(R=d.server)!=null?R:"",emblemUrl:zh(d.name,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(D=d.memberCount)!=null?D:0,avgLevel:(A=h==null?void 0:h.avgLevel)!=null?A:0,totalPower:(y=h==null?void 0:h.avgTotalStats)!=null?y:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(w=d.memberCount)!=null?w:0}`]:void 0})})}),n.jsx(Nee,{members:_,guildId:d.id,guildName:d.name,guildServer:d.server})]}),n.jsxs("div",{className:"col-span-12 md:col-span-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>v("grid"),"aria-label":"Klassenbersicht",children:n.jsx(il,{text:"Klassenbersicht",tone:g==="grid"?"accent":"default"})}),n.jsx("button",{onClick:()=>v("donut"),"aria-label":"Klassenverteilung",children:n.jsx(il,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?n.jsx(bee,{data:_,classMeta:b,onPickClass:M=>{const k=new URL(window.location.href);k.searchParams.set("tab","bersicht"),k.searchParams.set("class",M),window.location.href=k.toString()}}):n.jsx(_ee,{data:_,classMeta:b})]})]})})]})}function Nee({members:t,guildId:e,guildName:s,guildServer:r}){const[i,a]=E.useState("bersicht");return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:rn.line},role:"tablist",children:["bersicht","Rankings","Monthly Progress","Historie"].map(l=>{const d=l===i;return n.jsx("button",{role:"tab","aria-selected":d,onClick:()=>a(l),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${d?rn.header:"transparent"}`,background:d?"rgba(45,78,120,0.35)":"transparent",color:rn.title},children:l},l)})}),n.jsxs(UA,{children:[i==="bersicht"&&n.jsx(iJ,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&n.jsxs("div",{className:"text-sm",style:{color:rn.soft},children:["Platzhalter ",n.jsx("b",{children:"Rankings"}),"  Inhalt folgt."]}),i==="Monthly Progress"&&n.jsx(sZ,{guildId:e,guildName:s,guildServer:r}),i==="Historie"&&n.jsxs("div",{className:"text-sm",style:{color:rn.soft},children:["Platzhalter ",n.jsx("b",{children:"Historie"}),"  Inhalt folgt."]})]})]})}function kee(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(fk,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),n.jsx(fk,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"})]})]})}function fk({to:t,title:e,desc:s}){return n.jsxs(hs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function Cee(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function Tee(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const _n={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function gk({children:t,style:e}){return n.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function Eee({size:t=36}){return n.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:n.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function ed({label:t,value:e}){return n.jsxs("div",{style:{background:_n.tileAlt,border:`1px solid ${_n.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsx("div",{style:{fontSize:12,color:_n.textSoft,marginBottom:4},children:t}),n.jsx("div",{style:{fontSize:22,color:_n.title,fontWeight:700},children:e})]})}function Aee(t){const e=t.trim(),s=e.toUpperCase(),r=e.toLowerCase(),i=s.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let l="";const d=s.match(/^([A-Z]{2})(\d{1,3})$/);if(d){const u=d[1],h=String(parseInt(d[2],10)),m=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();l=`s${h}.sfgame.${m}`}return Array.from(new Set([e,s,r,i,a,l].filter(Boolean)))}function Dv(){var N,C,R,D;const t=_g(),e=fi(),s=Ir(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=E.useState(!0),[l,d]=E.useState(null),[u,h]=E.useState(null),[m,g]=E.useState(null);E.useEffect(()=>{let A=!1;async function y(){a(!0),d(null),h(null),g(null);try{const w=r.trim();if(!w)throw new Error("Kein Server gewhlt.");const M=qt(xt,`servers/${w}`),k=await Js(M);if(k.exists()){A||(h(k.id),g(k.data()));return}const S=pc(xt,"servers"),T=Aee(w),F=[];for(const H of T)F.push(mn(an(S,el("code","==",H),hn(1)))),F.push(mn(an(S,el("displayName","==",H),hn(1)))),F.push(mn(an(S,el("host","==",H),hn(1))));const I=await Promise.allSettled(F);let B=null,$=null;for(const H of I){if(H.status!=="fulfilled")continue;const z=H.value;if(!z.empty){const W=z.docs[0];B=W.id,$=W.data();break}}if(!B||!$)throw new Error("Server nicht gefunden.");A||(h(B),g($),B!==w&&e(`/server/${encodeURIComponent(B)}`,{replace:!0,state:{from:s.pathname}}))}catch(w){A||d((w==null?void 0:w.message)||"Fehler beim Laden.")}finally{A||a(!1)}}return y(),()=>{A=!0}},[r,e,s.pathname]);const v=E.useMemo(()=>n.jsxs("div",{style:{padding:24,color:_n.textSoft},children:[l!=null?l:"Unbekannter Fehler.",n.jsx("div",{style:{marginTop:12},children:n.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:_n.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[l,e]);if(i)return n.jsx(Bt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsx("div",{style:{padding:16,color:_n.textSoft},children:"Lade Serverprofil"})});if(!m)return n.jsx(Bt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:v});const b=m.displayName||m.code||u||r,_=m.active===!0?"Aktiv":m.active===!1?"Inaktiv":"";return n.jsxs(Bt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[n.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${_n.line}`},children:n.jsxs(gk,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[n.jsx(Eee,{size:36}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:18,color:_n.title,fontWeight:700},children:b}),n.jsxs("div",{style:{fontSize:12,color:_n.textSoft},children:[m.host||"","  ",m.region||"","  ",((N=m.type)==null?void 0:N.toUpperCase())||""]})]})]})}),n.jsxs(gk,{style:{paddingTop:12,paddingBottom:24},children:[n.jsxs("div",{style:{background:_n.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${_n.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0,color:_n.title,fontSize:24,fontWeight:800},children:b}),n.jsxs("div",{style:{marginTop:6,color:_n.textSoft,fontSize:13},children:[m.host||"","  ",m.region||"","  ",((C=m.type)==null?void 0:C.toUpperCase())||""]})]}),n.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[n.jsxs("span",{style:{color:_n.textSoft},children:["Status: ",_]}),n.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:m.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[n.jsx(ed,{label:"Code",value:m.code||""}),n.jsx(ed,{label:"Host",value:m.host||""}),n.jsx(ed,{label:"Region",value:m.region||""}),n.jsx(ed,{label:"Typ",value:((R=m.type)==null?void 0:R.toUpperCase())||""}),n.jsx(ed,{label:"Numeric ID",value:(D=m.numericId)!=null?D:""}),n.jsx(ed,{label:"Status",value:_})]}),n.jsxs("div",{style:{marginTop:16,background:_n.tileAlt,padding:15,borderRadius:12,border:`1px solid ${_n.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:_n.textSoft},children:["Platzhalter ",n.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const Iee="_page_177kv_1",Ree="_sectionCard_177kv_15",Pee="_identityCard_177kv_29",Lee="_identityGrid_177kv_39",Dee="_profileName_177kv_63",Mee="_identityMeta_177kv_77",Fee="_mainCharacter_177kv_95",Bee="_characterHeader_177kv_117",$ee="_characterTitle_177kv_131",Oee="_characterSubtitle_177kv_143",Vee="_classIcon_177kv_153",Uee="_metaGrid_177kv_181",zee="_metaLabel_177kv_193",Hee="_metaValue_177kv_207",Gee="_portrait_177kv_217",Wee="_sectionHeader_177kv_245",qee="_sectionHint_177kv_265",Kee="_bioText_177kv_275",Qee="_tagGroups_177kv_295",Xee="_tagGroupLabel_177kv_309",Yee="_tagList_177kv_323",Jee="_tag_177kv_295",Zee="_showcaseGrid_177kv_353",ete="_characterCard_177kv_365",tte="_characterCardHeader_177kv_385",ste="_characterName_177kv_399",nte="_badge_177kv_411",rte="_characterMeta_177kv_433",ite="_characterStats_177kv_449",ate="_statGrid_177kv_465",ote="_statTile_177kv_477",lte="_statLabel_177kv_491",cte="_statValue_177kv_505",dte="_statSubtext_177kv_519",ute="_emptyState_177kv_531",hte="_recordsHighlights_177kv_551",mte="_highlightCard_177kv_565",pte="_recordType_177kv_579",fte="_recordTitle_177kv_593",gte="_timeline_177kv_607",xte="_timelineItem_177kv_625",yte="_timelineBullet_177kv_635",vte="_timelineContent_177kv_653",bte="_timelineTitle_177kv_661",_te="_timelineMeta_177kv_673",wte="_achievementsHighlights_177kv_685",jte="_achievementCard_177kv_699",Ste="_achievementIcon_177kv_723",Nte="_achievementName_177kv_747",kte="_achievementDesc_177kv_759",Cte="_achievementTier_177kv_771",Tte="_achievementDate_177kv_785",Ete="_achievementsGrid_177kv_795",Ate="_achievementBadge_177kv_807",Ite="_tierGold_177kv_831",Rte="_tierSilver_177kv_839",Pte="_tierBronze_177kv_847",Be={page:Iee,sectionCard:Ree,identityCard:Pee,identityGrid:Lee,profileName:Dee,identityMeta:Mee,mainCharacter:Fee,characterHeader:Bee,characterTitle:$ee,characterSubtitle:Oee,classIcon:Vee,metaGrid:Uee,metaLabel:zee,metaValue:Hee,portrait:Gee,sectionHeader:Wee,sectionHint:qee,bioText:Kee,tagGroups:Qee,tagGroupLabel:Xee,tagList:Yee,tag:Jee,showcaseGrid:Zee,characterCard:ete,characterCardHeader:tte,characterName:ste,badge:nte,characterMeta:rte,characterStats:ite,statGrid:ate,statTile:ote,statLabel:lte,statValue:cte,statSubtext:dte,emptyState:ute,recordsHighlights:hte,highlightCard:mte,recordType:pte,recordTitle:fte,timeline:gte,timelineItem:xte,timelineBullet:yte,timelineContent:vte,timelineTitle:bte,timelineMeta:_te,achievementsHighlights:wte,achievementCard:jte,achievementIcon:Ste,achievementName:Nte,achievementDesc:kte,achievementTier:Cte,achievementDate:Tte,achievementsGrid:Ete,achievementBadge:Ate,tierGold:Ite,tierSilver:Rte,tierBronze:Pte},Lte={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},Dte=1e3*60*60*24,xk={gold:3,silver:2,bronze:1};function Mte(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const s=Date.now()-e;return s<0?0:Math.floor(s/Dte)}function tf(t){const e=new Date(t);return Number.isNaN(e.getTime())?Ct("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function Fte(){const{profileId:t}=_g(),e=Lte,s=Mte(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(m=>m.type==="record").slice(0,3),a=[...e.achievements].sort((m,g)=>xk[g.tier]-xk[m.tier]).slice(0,3),l=[{label:Ct("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:Ct("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:Ct("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:Ct("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],d=s==null?Ct("profile.public.identity.dateUnknown"):s===0?Ct("profile.public.identity.lastScanToday"):`${s} ${Ct("profile.public.identity.daysAgoSuffix")}`,u=Ct("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):Ct("profile.public.identity.unknownValue");return n.jsx(Bt,{title:Ct("profile.public.title"),subtitle:Ct("profile.public.subtitle"),centerFramed:!1,padded:!0,children:n.jsxs("div",{className:Be.page,children:[n.jsx("section",{className:`${Be.sectionCard} ${Be.identityCard}`,children:n.jsxs("div",{className:Be.identityGrid,children:[n.jsxs("div",{children:[n.jsx("h1",{className:Be.profileName,children:e.profileUser.displayName}),n.jsxs("div",{className:Be.identityMeta,children:[n.jsxs("span",{children:[Ct("profile.public.identity.profileIdLabel"),": ",t!=null?t:Ct("profile.public.identity.unknownValue")]}),n.jsxs("span",{children:[Ct("profile.public.identity.lastScanLabel"),": ",d]})]}),n.jsxs("article",{className:Be.mainCharacter,children:[n.jsxs("div",{className:Be.characterHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:Be.metaLabel,children:Ct("profile.public.identity.mainCharacterLabel")}),n.jsx("div",{className:Be.characterTitle,children:e.mainCharacter.name}),n.jsxs("div",{className:Be.characterSubtitle,children:[e.mainCharacter.class,"  ",Ct("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),n.jsx("div",{className:Be.classIcon,children:e.mainCharacter.class.charAt(0)})]}),n.jsxs("div",{className:Be.metaGrid,children:[n.jsxs("div",{children:[n.jsx("div",{className:Be.metaLabel,children:Ct("profile.public.identity.serverLabel")}),n.jsx("div",{className:Be.metaValue,children:e.mainCharacter.server})]}),n.jsxs("div",{children:[n.jsx("div",{className:Be.metaLabel,children:Ct("profile.public.identity.guildLabel")}),n.jsx("div",{className:Be.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),n.jsx("div",{className:Be.portrait,children:u})]})}),n.jsxs("section",{className:Be.sectionCard,children:[n.jsx("div",{className:Be.sectionHeader,children:n.jsx("span",{children:Ct("profile.public.bio.title")})}),n.jsx("p",{className:Be.bioText,children:e.bio}),n.jsxs("div",{className:Be.tagGroups,children:[n.jsxs("div",{children:[n.jsx("div",{className:Be.tagGroupLabel,children:Ct("profile.public.bio.languagesLabel")}),n.jsx("div",{className:Be.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(m=>n.jsx("span",{className:Be.tag,children:m.toUpperCase()},m)):n.jsx("span",{className:Be.tag,children:Ct("profile.public.identity.unknownValue")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:Be.tagGroupLabel,children:Ct("profile.public.bio.rolesLabel")}),n.jsx("div",{className:Be.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(m=>n.jsx("span",{className:Be.tag,children:Ct(`profile.public.roles.${m}`)},m)):n.jsx("span",{className:Be.tag,children:Ct("profile.public.identity.unknownValue")})})]})]})]}),n.jsxs("section",{className:Be.sectionCard,children:[n.jsxs("div",{className:Be.sectionHeader,children:[n.jsx("span",{children:Ct("profile.public.showcase.title")}),n.jsx("span",{className:Be.sectionHint,children:Ct("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?n.jsx("div",{className:Be.emptyState,children:Ct("profile.public.showcase.empty")}):n.jsx("div",{className:Be.showcaseGrid,children:e.showcaseCharacters.map(m=>n.jsxs("article",{className:Be.characterCard,children:[n.jsxs("div",{className:Be.characterCardHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:Be.characterName,children:m.name}),n.jsxs("div",{className:Be.characterMeta,children:[n.jsx("span",{children:m.class}),n.jsxs("span",{children:[Ct("profile.public.identity.levelShort")," ",m.level]})]})]}),n.jsx("span",{className:Be.badge,children:Ct(`profile.public.showcase.tags.${m.tag}`)})]}),n.jsxs("div",{className:Be.characterMeta,children:[n.jsx("span",{children:m.server}),n.jsx("span",{children:m.guildName})]}),n.jsxs("div",{className:Be.characterStats,children:[n.jsxs("span",{children:[Ct("profile.public.showcase.scrapbookLabel")," ",m.scrapbookPercent,"%"]}),n.jsxs("span",{children:[Ct("profile.public.showcase.highlightLabel"),": ",m.highlightProgress]})]})]},m.id))})]}),n.jsxs("section",{className:Be.sectionCard,children:[n.jsx("div",{className:Be.sectionHeader,children:n.jsx("span",{children:Ct("profile.public.stats.title")})}),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Be.statGrid,children:l.map(m=>n.jsxs("article",{className:Be.statTile,children:[n.jsx("div",{className:Be.statLabel,children:m.label}),n.jsx("div",{className:Be.statValue,children:m.value})]},m.label))}),n.jsxs("div",{className:Be.statSubtext,children:[Ct("profile.public.stats.topServersLabel"),": ",h]}),n.jsxs("div",{className:Be.statSubtext,children:[Ct("profile.public.stats.firstScanLabel"),": ",tf(e.scanStats.firstScanAt)]})]})]}),n.jsxs("section",{className:Be.sectionCard,children:[n.jsx("div",{className:Be.sectionHeader,children:n.jsx("span",{children:Ct("profile.public.records.title")})}),e.recordsAndMilestones.length===0?n.jsx("div",{className:Be.emptyState,children:Ct("profile.public.records.empty")}):n.jsxs(n.Fragment,{children:[i.length>0&&n.jsx("div",{className:Be.recordsHighlights,children:i.map(m=>n.jsxs("article",{className:Be.highlightCard,children:[n.jsx("div",{className:Be.recordType,children:Ct(`profile.public.records.type.${m.type}`)}),n.jsx("div",{className:Be.recordTitle,children:m.title}),n.jsxs("div",{className:Be.timelineMeta,children:[tf(m.when),"  ",m.context]})]},m.id))}),n.jsx("ul",{className:Be.timeline,children:e.recordsAndMilestones.map(m=>n.jsxs("li",{className:Be.timelineItem,children:[n.jsx("div",{className:Be.timelineBullet}),n.jsxs("div",{className:Be.timelineContent,children:[n.jsx("div",{className:Be.timelineTitle,children:m.title}),n.jsxs("div",{className:Be.timelineMeta,children:[tf(m.when),"  ",m.context]})]})]},m.id))})]})]}),n.jsxs("section",{className:Be.sectionCard,children:[n.jsxs("div",{className:Be.sectionHeader,children:[n.jsx("span",{children:Ct("profile.public.achievements.title")}),e.achievements.length>0&&n.jsx("span",{className:Be.sectionHint,children:Ct("profile.public.achievements.highlights")})]}),e.achievements.length===0?n.jsx("div",{className:Be.emptyState,children:Ct("profile.public.achievements.empty")}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsx("div",{className:Be.achievementsHighlights,children:a.map(m=>n.jsxs("article",{className:Be.achievementCard,children:[n.jsx("div",{className:[Be.achievementIcon,m.tier==="gold"?Be.tierGold:m.tier==="silver"?Be.tierSilver:Be.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:Be.achievementTier,children:Ct(`profile.public.achievements.tiers.${m.tier}`)}),n.jsx("div",{className:Be.achievementName,children:Ct(m.nameKey)}),n.jsx("div",{className:Be.achievementDesc,children:Ct(m.descriptionKey)}),m.unlockedAt&&n.jsx("div",{className:Be.achievementDate,children:tf(m.unlockedAt)})]},m.id))}),n.jsx("div",{className:Be.achievementsGrid,children:e.achievements.map(m=>n.jsxs("article",{className:Be.achievementBadge,children:[n.jsx("div",{className:[Be.achievementIcon,m.tier==="gold"?Be.tierGold:m.tier==="silver"?Be.tierSilver:Be.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:Be.achievementName,children:Ct(m.nameKey)}),n.jsx("div",{className:Be.achievementDesc,children:Ct(m.descriptionKey)})]},m.id))})]})]})]})})}const Bte="_wrap_k6pqt_1",$te="_centerLogoWrap_k6pqt_21",Ote="_centerLogoLink_k6pqt_37",Vte="_centerLogo_k6pqt_21",Ute="_arc_k6pqt_55",zte="_left_k6pqt_57",Hte="_right_k6pqt_59",Gte="_sub_k6pqt_61",Wte="_full_k6pqt_63",qte="_arcItem_k6pqt_65",Kte="_iconBtn_k6pqt_71",Qte="_active_k6pqt_125",Xte="_iconImg_k6pqt_135",Yte="_placeholderIcon_k6pqt_139",Jte="_placeholderText_k6pqt_157",Zte="_iconLabel_k6pqt_161",Mn={wrap:Bte,centerLogoWrap:$te,centerLogoLink:Ote,centerLogo:Vte,arc:Ute,left:zte,right:Hte,sub:Gte,full:Wte,arcItem:qte,iconBtn:Kte,active:Qte,iconImg:Xte,placeholderIcon:Yte,placeholderText:Jte,iconLabel:Zte},ese=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=Ir();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),h=l.get("sub2"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),v=m.get("sub"),b=m.get("sub2");r==="main"?a=d===g:r==="sub"?a=d===g&&!!v&&u===v:a=d===g&&!!v&&u===v&&!!b&&h===b}catch(l){a=!1}return n.jsxs(hs,{to:t,"aria-label":e,className:[Mn.iconBtn,a?Mn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:Mn.iconImg}):n.jsx("div",{className:Mn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:Mn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:Mn.iconLabel,children:e})]})},sf=({items:t,side:e,anchorSide:s,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440,superOffset:d=660})=>{if((e==="sub"||e==="sub2")&&!s)return null;const u=E.useMemo(()=>{const g=t.length;if(g===0)return[];let v=-90,b=90;e==="left"?(v=90,b=270):e==="sub"||e==="sub2"?s==="left"?(v=90,b=270):(v=-90,b=90):e==="full"&&(v=0,b=360);const _=(b-v)/(g+1),N=r?190:250;return t.map((C,R)=>{const A=(v+_*(R+1))*Math.PI/180;return{it:C,x:Math.cos(A)*N,y:Math.sin(A)*N}})},[t,e,s,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`:e==="sub2"&&(g.left=s==="left"?`calc(50% - ${d}px)`:`calc(50% + ${d}px)`),g})(),m=e==="sub"?"sub":e==="sub2"?"sub2":"main";return n.jsx("div",{className:[Mn.arc,e==="left"?Mn.left:"",e==="right"?Mn.right:"",e==="sub"?Mn.sub:"",e==="sub2"?Mn.sub2:"",e==="full"?Mn.full:""].join(" "),style:h,children:u.map(({it:g,x:v,y:b})=>n.jsx("div",{className:Mn.arcItem,style:{transform:`translate(${v}px, ${b}px)`},children:n.jsx(ese,{to:g.to,label:g.label,icon:g.icon,variant:m})},g.key))})},tse=({logoSrc:t,categories:e})=>{const[s]=al(),r=s.get("tab")||null,i=s.get("sub")||null;s.get("sub2");const a=E.useMemo(()=>e.find(A=>A.key===r)||null,[e,r]),l=(a==null?void 0:a.sub)||[],d=E.useMemo(()=>l.find(A=>A.key===i)||null,[l,i]),u=(d==null?void 0:d.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",m=E.useRef(null),[g,v]=E.useState(!1),[b,_]=E.useState(220),[N,C]=E.useState(440),[R,D]=E.useState(660);return E.useLayoutEffect(()=>{(()=>{var F,I;const w=((I=(F=m.current)==null?void 0:F.getBoundingClientRect().width)!=null?I:380)/2,k=Math.round(w+60),S=Math.round(k+220),T=Math.round(S+220);_(k),C(S),D(T),v(!0)})()},[]),E.useEffect(()=>{let A=0,y=null,w={main:b,out:N,sup:R};const M=()=>{y!=null&&window.clearTimeout(y),y=window.setTimeout(()=>{A=requestAnimationFrame(()=>{var W,K;const S=((K=(W=m.current)==null?void 0:W.getBoundingClientRect().width)!=null?K:380)/2,F=Math.round(S+60),I=Math.round(F+220),B=Math.round(I+220),$=Math.abs(F-w.main),H=Math.abs(I-w.out),z=Math.abs(B-w.sup);$>1&&_(F),H>1&&C(I),z>1&&D(B),w={main:F,out:I,sup:B}})},120)};return window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M),y!=null&&window.clearTimeout(y),A&&cancelAnimationFrame(A)}},[b,N,R]),n.jsxs("div",{className:Mn.wrap,children:[n.jsx("div",{className:Mn.centerLogoWrap,children:n.jsx(hs,{to:"/guidehub",className:Mn.centerLogoLink,"aria-label":"Guide Hub Home",children:n.jsx("img",{ref:m,src:t,alt:"Guide Hub",className:Mn.centerLogo})})}),g&&n.jsxs(n.Fragment,{children:[n.jsx(sf,{items:e.filter(A=>A.side==="left").map(A=>({key:A.key,to:A.to,label:A.label,icon:A.icon})),side:"left",variant:"main",arcOffset:b}),n.jsx(sf,{items:e.filter(A=>A.side==="right").map(A=>({key:A.key,to:A.to,label:A.label,icon:A.icon})),side:"right",variant:"main",arcOffset:b}),h&&l.length>0&&n.jsx(sf,{items:l.map(A=>({key:A.key,to:A.to,label:A.label,icon:A.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:N,compact:!0}),h&&u.length>0&&n.jsx(sf,{items:u.map(A=>({key:A.key,to:A.to,label:A.label,icon:A.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:R,compact:!0})]})]})},yk=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"event-list",label:"Event List",to:"/guidehub?tab=events&sub=event-list"},{key:"event-cycle",label:"Event Cycle",to:"/guidehub?tab=events&sub=event-cycle"},{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=progression&sub=early&sub2=max-item-stats-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=fortress-package-skip-order"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=underworld-pro-package-skip-order"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=early&sub2=gem-calculator"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=progression&sub=early&sub2=fortress-attack-duplication"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"dungeons",label:"Dungeons",to:"/guidehub?tab=dungeons",sub2:[]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]},{key:"class-book",label:"Class book",to:"/guidehub?tab=class-book",side:"right",sub:[]}],sse="_topWrap_1vr4p_1",nse="_divider_1vr4p_19",rse="_contentArea_1vr4p_53",ise="_placeholder_1vr4p_65",ase="_placeholderTitle_1vr4p_79",ose="_placeholderText_1vr4p_93",td={topWrap:sse,divider:nse,contentArea:rse,placeholder:ise,placeholderTitle:ase,placeholderText:ose},lse="/assets/logo_guidehub-c4zKGdF-.png";function xc({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const cse=()=>n.jsx(xc,{title:"Game Features"});function Ps({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const dse=()=>n.jsx(Ps,{title:"Progression"}),use=()=>n.jsx(Ps,{title:"Hellevator"}),hse=()=>n.jsx(Ps,{title:"Legendary Dungeon"}),mse=()=>n.jsx(Ps,{title:"Events"}),pse="_card_1rxdx_21",fse="_hoverLift_1rxdx_51",gse="_title_1rxdx_63",xse="_body_1rxdx_89",yse="_iconStack_1rxdx_99",Vu={card:pse,hoverLift:fse,title:gse,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:xse,iconStack:yse};function vse({title:t,padding:e="md",hover:s=!0,className:r="",children:i}){return n.jsxs("div",{className:[Vu.card,Vu[`pad-${e}`],s?Vu.hoverLift:"",r].join(" "),children:[t?n.jsx("div",{className:Vu.title,children:t}):null,n.jsx("div",{className:Vu.body,children:i})]})}const bse=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],_se="_grid_1amcc_3",wse="_tileBtn_1amcc_45",jse="_wrap_1amcc_87",Sse="_headerBar_1amcc_99",Nse="_title_1amcc_117",Uu={grid:_se,tileBtn:wse,wrap:jse,headerBar:Sse,title:Nse};function kse(){const[t,e]=al(),s=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return n.jsxs("div",{className:Uu.wrap,children:[n.jsx("div",{className:Uu.headerBar,children:n.jsx("h2",{className:Uu.title,children:"Calculators"})}),n.jsx("div",{className:Uu.grid,children:bse.map(r=>n.jsx("button",{className:Uu.tileBtn,onClick:()=>s(r.slug),"aria-label":r.title,children:n.jsx(vse,{title:r.title,padding:"md",hover:!0,children:n.jsx(n.Fragment,{children:" "})})},r.slug))})]})}const Cse=()=>n.jsx(Ps,{title:"Infographics (Dropdown inside page)"}),Tse=()=>n.jsx(Ps,{title:"Class book"}),Ese=()=>n.jsx(Ps,{title:"Dungeons"}),Ase=()=>n.jsx(xc,{title:"Fortress"}),Ise=()=>n.jsx(xc,{title:"Fortress Calculator"}),Rse="_wrap_1skhh_7",Pse="_headerBar_1skhh_21",Lse="_title_1skhh_39",Dse="_meta_1skhh_55",Mse="_description_1skhh_67",Fse="_contentWrapper_1skhh_83",Bse="_tableSection_1skhh_97",$se="_table_1skhh_97",Ose="_infoBox_1skhh_151",Vse="_sectionTitle_1skhh_165",Use="_divider_1skhh_181",Cr={wrap:Rse,headerBar:Pse,title:Lse,meta:Dse,description:Mse,contentWrapper:Fse,tableSection:Bse,table:$se,infoBox:Ose,sectionTitle:Vse,divider:Use};function zse(){return n.jsxs("div",{className:Cr.wrap,children:[n.jsxs("div",{className:Cr.headerBar,children:[n.jsx("h2",{className:Cr.title,children:"Fortress Package skip order"}),n.jsx("span",{className:Cr.meta,children:"Last updated: 21.02.2025"})]}),n.jsx("p",{className:Cr.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),n.jsxs("div",{className:Cr.contentWrapper,children:[n.jsxs("section",{className:Cr.tableSection,children:[n.jsx("h3",{className:Cr.sectionTitle,children:"Fortress Build Order"}),n.jsxs("table",{className:Cr.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Building"}),n.jsx("th",{children:"Level"}),n.jsx("th",{children:"Gold Cost"}),n.jsx("th",{children:"Shroom Cost"}),n.jsx("th",{children:"Wood Cost"}),n.jsx("th",{children:"Stone Cost"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"35"}),n.jsx("td",{children:"12"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"150"}),n.jsx("td",{children:"50"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"138"}),n.jsx("td",{children:"46"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"440"}),n.jsx("td",{children:"140"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"406"}),n.jsx("td",{children:"129"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,100"}),n.jsx("td",{children:"333"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,015"}),n.jsx("td",{children:"308"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,500"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,308"}),n.jsx("td",{children:"738"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"60"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"6,000"}),n.jsx("td",{children:"2,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"5,538"}),n.jsx("td",{children:"1,849"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"7"}),n.jsx("td",{children:"70"}),n.jsx("td",{children:"48"}),n.jsx("td",{children:"13,417"}),n.jsx("td",{children:"4,433"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"80"}),n.jsx("td",{children:"78"}),n.jsx("td",{children:"27,200"}),n.jsx("td",{children:"9,280"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"720"}),n.jsx("td",{children:"240"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"1,408"}),n.jsx("td",{children:"448"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"2,640"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Gem Mine"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"17"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Treasury"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"13"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"92"}),n.jsx("td",{children:"74"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"248"}),n.jsx("td",{children:"200"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"21"}),n.jsx("td",{children:"500"}),n.jsx("td",{children:"320"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"22"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"90"}),n.jsx("td",{children:"16"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"9"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"264"}),n.jsx("td",{children:"45"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"660"}),n.jsx("td",{children:"107"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"14"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"82"}),n.jsx("td",{children:"55"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Total cost"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"577"}),n.jsx("td",{children:"363"}),n.jsx("td",{children:"99,881"}),n.jsx("td",{children:"33,218"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress Pack ressources"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"300"}),n.jsx("td",{children:"100,000"}),n.jsx("td",{children:"50,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Left over"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-577"}),n.jsx("td",{children:"-63"}),n.jsx("td",{children:"119"}),n.jsx("td",{children:"16,782"})]})]})]})]}),n.jsxs("section",{className:Cr.infoBox,children:[n.jsx("h3",{className:Cr.sectionTitle,children:"Important"}),n.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Archery Guild"}),n.jsx("li",{children:"Mage's Tower"}),n.jsx("li",{children:"Fortifications"})]}),n.jsx("div",{className:Cr.divider}),n.jsx("h3",{className:Cr.sectionTitle,children:"Total Costs"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Gold:"})," 577 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Shrooms:"})," 363 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Wood:"})," 99,881 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Stone:"})," 33,218 ",n.jsx("br",{})]}),n.jsx("h3",{className:Cr.sectionTitle,children:"Remaining Resources"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Remaining Gold:"})," -577 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Wood:"})," 119 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const Hse=()=>n.jsx(xc,{title:"Fortress attack duplication guide"}),Gse=()=>n.jsx(xc,{title:"Underworld"}),Wse=()=>n.jsx(xc,{title:"Underworld Calculator"}),qse=()=>n.jsx(xc,{title:"Underworld Pro Package skip order"}),Kse=()=>n.jsx(Ps,{title:"Arena / AM"}),Qse="_wrap_mm7x0_5",Xse="_headerBar_mm7x0_19",Yse="_title_mm7x0_37",Jse="_meta_mm7x0_51",Zse="_description_mm7x0_63",ene="_controls_mm7x0_79",tne="_search_mm7x0_83",sne="_tableWrap_mm7x0_119",nne="_table_mm7x0_119",rne="_thead_mm7x0_143",ine="_th_mm7x0_143",ane="_td_mm7x0_167",one="_tierCell_mm7x0_179",lne="_amountCell_mm7x0_181",cne="_bonusCell_mm7x0_183",dne="_tags_mm7x0_185",une="_tierBox_mm7x0_191",hne="_tierIcon_mm7x0_193",mne="_tierTexts_mm7x0_203",pne="_tierName_mm7x0_205",fne="_badge_mm7x0_211",gne="_badgeMax_mm7x0_231",xne="_badgeAchiev_mm7x0_233",yne="_badgeX2_mm7x0_235",vne="_badgeX12_mm7x0_237",bne="_badgeX60_mm7x0_239",_ne="_iconHead_mm7x0_245",wne="_achiev_mm7x0_261",jne="_achievImg_mm7x0_263",Sne="_dataRow_mm7x0_291",Nne="_tierCellHover_mm7x0_311",Ye={wrap:Qse,headerBar:Xse,title:Yse,meta:Jse,description:Zse,controls:ene,search:tne,tableWrap:sne,table:nne,thead:rne,th:ine,td:ane,tierCell:one,amountCell:lne,bonusCell:cne,tags:dne,tierBox:une,tierIcon:hne,tierTexts:mne,tierName:pne,badge:fne,badgeMax:gne,badgeAchiev:xne,badgeX2:yne,badgeX12:vne,badgeX60:bne,iconHead:_ne,achiev:wne,achievImg:jne,dataRow:Sne,tierCellHover:Nne};function zA(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function kne(t){const e=t.filter(Boolean).join(" ");return zA(e)}const Cne={fortressbanner:"DRIVE_FILE_ID_HIER",woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",fortressgemcalculatoricon:"DRIVE_FILE_ID_HIER",fortressdiagram1:"DRIVE_FILE_ID_HIER",fortressdiagram2:"DRIVE_FILE_ID_HIER",underworldbanner:"DRIVE_FILE_ID_HIER",underworldcalculatoricon:"DRIVE_FILE_ID_HIER",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",infographicsbanner:"DRIVE_FILE_ID_HIER",classbookcover:"DRIVE_FILE_ID_HIER",classbookback:"DRIVE_FILE_ID_HIER",dungeonsbanner:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450"};function Tne(t){var s;const e=Array.isArray(t)?kne(t):zA(t!=null?t:"");return(s=Cne[e])!=null?s:null}function ox(t,e=512){var a,l;const s=Tne(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=lc(s))!=null?a:null,i=r&&(l=Rr(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function tc(t,e=512){return ox(t,e).thumb}const Do={gold:"rune_gold",xp:"rune_xp",hp:"rune_hp",totalRes:"rune_totalres",singleRes:"rune_singleres",elem:"rune_elemental",item:"rune_itemquality",epics:"rune_epics"},vk={Capitalist:"achiev_capitalist","Stinking rich":"achiev_stinkingrich","Rune Master":"achiev_runemaster"};function Mo({keyName:t,label:e}){const s=ox(t,36);return n.jsxs("div",{className:Ye.iconHead,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:e,width:36,height:36,style:{borderRadius:6,border:"1px solid #2B4C73"}}):n.jsx("div",{style:{width:36,height:36,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(s.fallback||e).slice(0,1).toUpperCase()}),n.jsx("span",{children:e})]})}function Ene({name:t}){const e=Object.keys(vk).find(r=>t.toLowerCase().includes(r.toLowerCase())),s=ox(e?vk[e]:"achiev_generic",16);return n.jsxs("div",{className:Ye.achiev,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:t,width:16,height:16,style:{borderRadius:3,border:"1px solid #2C4A73"}}):n.jsx("div",{className:Ye.achievImg}),n.jsx("span",{children:t})]})}const lg=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",singleRes:"14%",elemDmg:"11%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",totalRes:"5%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%",elemDmg:"12%"},{tier:"Sextillion",amount:"1 E21",gold:"11%",epics:"11%"},{tier:"Sextillion",amount:"10 E22",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"100 E23",gold:"12%",totalRes:"6%",epics:"12%"},{tier:"Septillion",amount:"1 E24",singleRes:"17%",elemDmg:"14%"},{tier:"Septillion",amount:"10 E25",gold:"13%",epics:"13%"},{tier:"Septillion",amount:"100 E26",totalRes:"7%",singleRes:"18%",elemDmg:"15%"},{tier:"Octillion",amount:"1 E27",gold:"14%",epics:"14%"},{tier:"Octillion",amount:"10 E28",singleRes:"19%",elemDmg:"16%"},{tier:"Octillion",amount:"100 E29",gold:"15%",totalRes:"8%",epics:"15%"},{tier:"Nonillion",amount:"1 E30",singleRes:"20%",elemDmg:"17%"},{tier:"Nonillion",amount:"10 E31",gold:"16%",epics:"16%"},{tier:"Nonillion",amount:"100 E32",totalRes:"9%",singleRes:"21%",elemDmg:"18%"},{tier:"Decillion",amount:"1 E33",gold:"17%",epics:"17%"},{tier:"Decillion",amount:"10 E34",singleRes:"22%",elemDmg:"19%",note:"x2 Boost"},{tier:"Decillion",amount:"100 E35",gold:"18%",totalRes:"10%",epics:"18%"},{tier:"Undecillion",amount:"1 E36",singleRes:"23%",elemDmg:"20%"},{tier:"Undecillion",amount:"10 E37",gold:"19%",epics:"19%"},{tier:"Undecillion",amount:"100 E38",totalRes:"11%",singleRes:"24%",elemDmg:"21%"},{tier:"Duodecillion",amount:"1 E39",gold:"20%",epics:"20%"},{tier:"Duodecillion",amount:"10 E40",singleRes:"25%",elemDmg:"22%"},{tier:"Duodecillion",amount:"100 E41",gold:"21%",totalRes:"12%",epics:"21%"},{tier:"Tredecillion",amount:"1 E42",singleRes:"26%",elemDmg:"23%"},{tier:"Tredecillion",amount:"10 E43",gold:"22%",epics:"22%"},{tier:"Tredecillion",amount:"100 E44",totalRes:"13%",singleRes:"27%",elemDmg:"24%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"23%",epics:"23%"},{tier:"Quattuordecillion",amount:"10 E46",singleRes:"28%",elemDmg:"25%"},{tier:"Quattuordecillion",amount:"100 E47",gold:"24%",totalRes:"14%",epics:"24%"},{tier:"Quindecillion",amount:"1 E48",singleRes:"29%",elemDmg:"26%"},{tier:"Quindecillion",amount:"10 E49",gold:"25%",epics:"25%"},{tier:"Quindecillion",amount:"100 E50",totalRes:"15%",singleRes:"30%",elemDmg:"27%"},{tier:"Sexdecillion",amount:"1 E51",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"10 E52",singleRes:"31%",elemDmg:"28%"},{tier:"Sexdecillion",amount:"100 E53",gold:"27%",totalRes:"16%",epics:"27%"},{tier:"Septendecillion",amount:"1 E54",singleRes:"32%",elemDmg:"29%"},{tier:"Septendecillion",amount:"10 E55",gold:"28%",epics:"28%"},{tier:"Septendecillion",amount:"100 E56",totalRes:"17%",singleRes:"33%",elemDmg:"30%"},{tier:"Octodecillion",amount:"1 E57",gold:"29%",epics:"29%"},{tier:"Octodecillion",amount:"10 E58",singleRes:"34%",elemDmg:"31%"},{tier:"Octodecillion",amount:"100 E59",gold:"30%",totalRes:"18%",epics:"30%"},{tier:"Novemdecillion",amount:"1 E60",singleRes:"35%",elemDmg:"32%"},{tier:"Novemdecillion",amount:"10 E61",gold:"31%",epics:"31%"},{tier:"Novemdecillion",amount:"100 E62",totalRes:"19%",singleRes:"36%",elemDmg:"33%"},{tier:"Vigintillion",amount:"1 E63",gold:"32%",epics:"32%"},{tier:"Vigintillion",amount:"10 E64",singleRes:"37%",elemDmg:"34%"},{tier:"Vigintillion",amount:"100 E65",gold:"33%",totalRes:"20%",epics:"33%"},{tier:"Unvigintillion",amount:"1 E66",singleRes:"38%",elemDmg:"35%"},{tier:"Unvigintillion",amount:"10 E67",gold:"34%",epics:"34%"},{tier:"Unvigintillion",amount:"100 E68",totalRes:"21%",singleRes:"39%",elemDmg:"36%"},{tier:"Duovigintillion",amount:"1 E69",gold:"35%",epics:"35%"},{tier:"Duovigintillion",amount:"10 E70",note:"x12 Boost"},{tier:"Duovigintillion",amount:"100 E71",totalRes:"22%",singleRes:"40%",elemDmg:"37%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"41%",elemDmg:"38%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"23%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",singleRes:"42%",elemDmg:"39%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",totalRes:"24%",singleRes:"43%",elemDmg:"40%"},{tier:"Quinvigintillion",amount:"1 E78",gold:"39%",epics:"39%"},{tier:"Quinvigintillion",amount:"10 E79",singleRes:"44%",elemDmg:"41%"},{tier:"Quinvigintillion",amount:"100 E80",gold:"40%",totalRes:"25%",epics:"40%"},{tier:"Sexvigintillion",amount:"1 E81",singleRes:"45%",elemDmg:"42%"},{tier:"Sexvigintillion",amount:"10 E82",gold:"41%",epics:"41%"},{tier:"Sexvigintillion",amount:"100 E83",totalRes:"26%",singleRes:"46%",elemDmg:"43%"},{tier:"Septenvigintillion",amount:"1 E84",gold:"42%",epics:"42%"},{tier:"Septenvigintillion",amount:"10 E85",singleRes:"47%",elemDmg:"44%"},{tier:"Septenvigintillion",amount:"100 E86",gold:"43%",totalRes:"27%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"48%",elemDmg:"45%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",totalRes:"28%",singleRes:"49%",elemDmg:"46%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",singleRes:"50%",elemDmg:"47%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",totalRes:"29%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"51%",elemDmg:"48%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",totalRes:"30%",singleRes:"52%",elemDmg:"49%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"53%",elemDmg:"50%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",totalRes:"31%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"54%",elemDmg:"51%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",epics:"50%"},{tier:"Duotrigintillion",amount:"100 E101",totalRes:"32%",singleRes:"55%",elemDmg:"52%"},{tier:"Trestrigintillion",amount:"1 E102",gold:"51%",epics:"51%"},{tier:"Trestrigintillion",amount:"10 E103",singleRes:"56%",elemDmg:"53%"},{tier:"Trestrigintillion",amount:"100 E104",gold:"52%",totalRes:"33%",epics:"52%"},{tier:"Quattuortrigintillion",amount:"1 E105",singleRes:"57%",elemDmg:"54%"},{tier:"Quattuortrigintillion",amount:"10 E106",gold:"53%",epics:"53%"},{tier:"Quattuortrigintillion",amount:"100 E107",totalRes:"34%",singleRes:"58%",elemDmg:"55%"},{tier:"Quintrigintillion",amount:"1 E108",gold:"54%",epics:"54%"},{tier:"Quintrigintillion",amount:"10 E109",singleRes:"59%",elemDmg:"56%"},{tier:"Quintrigintillion",amount:"100 E110",gold:"55%",totalRes:"35%",epics:"55%"},{tier:"Sextrigintillion",amount:"1 E111",singleRes:"60%",elemDmg:"57%",note:"x60 Boost"},{tier:"Sextrigintillion",amount:"10 E112",gold:"56%",epics:"56%"},{tier:"Sextrigintillion",amount:"100 E113",totalRes:"36%",singleRes:"61%",elemDmg:"58%"},{tier:"Septentrigintillion",amount:"1 E114",gold:"57%",epics:"57%"},{tier:"Septentrigintillion",amount:"10 E115",singleRes:"62%",elemDmg:"59%"},{tier:"Septentrigintillion",amount:"100 E116",gold:"58%",totalRes:"37%",epics:"58%"},{tier:"Octotrigintillion",amount:"1 E117",singleRes:"63%",elemDmg:"60%"},{tier:"Octotrigintillion",amount:"10 E118",gold:"59%",epics:"59%"},{tier:"Octotrigintillion",amount:"100 E119",gold:"60%",totalRes:"38%",epics:"60%"},{tier:"Noventrigintillion",amount:"1 E120",singleRes:"64%",elemDmg:"61%"},{tier:"Noventrigintillion",amount:"10 E121",gold:"61%",epics:"61%"},{tier:"Noventrigintillion",amount:"100 E122",gold:"62%",totalRes:"39%",epics:"62%"},{tier:"Quadragintillion",amount:"1 E123",singleRes:"65%",elemDmg:"62%"},{tier:"Quadragintillion",amount:"10 E124",gold:"63%",epics:"63%"},{tier:"Quadragintillion",amount:"100 E125",gold:"64%",totalRes:"40%",epics:"64%"},{tier:"Unquadragintillion",amount:"1 E126",singleRes:"66%",elemDmg:"63%"},{tier:"Unquadragintillion",amount:"10 E127",gold:"65%",epics:"65%"},{tier:"Unquadragintillion",amount:"100 E128",gold:"66%",totalRes:"41%",epics:"66%"},{tier:"Duoquadragintillion",amount:"1 E129",singleRes:"67%",elemDmg:"64%"},{tier:"Duoquadragintillion",amount:"10 E130",gold:"67%",epics:"67%"},{tier:"Duoquadragintillion",amount:"100 E131",gold:"68%",totalRes:"42%",epics:"68%"},{tier:"Trequadragintillion",amount:"1 E132",singleRes:"68%",elemDmg:"65%"},{tier:"Trequadragintillion",amount:"10 E133",gold:"69%",epics:"69%"},{tier:"Trequadragintillion",amount:"100 E134",gold:"70%",totalRes:"43%",epics:"70%"},{tier:"Quattuorquadragintillion",amount:"1 E135",singleRes:"69%",elemDmg:"66%"},{tier:"Quattuorquadragintillion",amount:"10 E136",gold:"71%",epics:"71%"},{tier:"Quattuorquadragintillion",amount:"100 E137",gold:"72%",totalRes:"44%",epics:"72%"},{tier:"Quinquadragintillion",amount:"1 E138",singleRes:"70%",elemDmg:"67%"},{tier:"Quinquadragintillion",amount:"10 E139",gold:"73%",epics:"73%"},{tier:"Quinquadragintillion",amount:"100 E140",gold:"74%",totalRes:"45%",epics:"74%"},{tier:"Sexquadragintillion",amount:"1 E141",singleRes:"71%",elemDmg:"68%"},{tier:"Sexquadragintillion",amount:"10 E142",gold:"75%",epics:"75%"},{tier:"Sexquadragintillion",amount:"100 E143",gold:"76%",totalRes:"46%",epics:"76%"},{tier:"Septenquadragintillion",amount:"1 E144",singleRes:"72%",elemDmg:"69%"},{tier:"Septenquadragintillion",amount:"10 E145",gold:"77%",epics:"77%"},{tier:"Septenquadragintillion",amount:"100 E146",gold:"78%",totalRes:"47%",epics:"78%"},{tier:"Octoquadragintillion",amount:"1 E147",singleRes:"73%",elemDmg:"70%"},{tier:"Octoquadragintillion",amount:"10 E148",gold:"79%",epics:"79%"},{tier:"Octoquadragintillion",amount:"100 E149",gold:"80%",totalRes:"48%",epics:"80%"},{tier:"Novenquadragintillion",amount:"1 E150",singleRes:"74%",elemDmg:"71%"},{tier:"Novenquadragintillion",amount:"10 E151",gold:"81%",epics:"81%"},{tier:"Novenquadragintillion",amount:"100 E152",gold:"82%",totalRes:"49%",epics:"82%"},{tier:"Quinquagintillion",amount:"1 E153",singleRes:"75%",elemDmg:"72%"},{tier:"Quinquagintillion",amount:"10 E154",gold:"83%",epics:"83%"},{tier:"Quinquagintillion",amount:"100 E155",gold:"84%",totalRes:"50%",epics:"84%"}];function Mv(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function Ane(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function Ine(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}const bk={Quintillion:"Capitalist Achievement",Septillion:"Stinking rich Achievement",Decillion:"Rune Master"},Rne="Komplette bersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Achievements und Breakpoints sind markiert.";function Pne(t){const e=t.trim().toLowerCase();return e?lg.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):lg}function Lne(){const[t,e]=E.useState(""),[s,r]=E.useState(null),i=Pne(t),a=E.useMemo(()=>Math.max(...lg.map(d=>Mv(d.amount))),[]),l=E.useMemo(()=>{const d=new Map;for(const h of i)d.has(h.tier)||d.set(h.tier,[]),d.get(h.tier).push(h);const u=Array.from(new Set(lg.map(h=>h.tier)));return Array.from(d.entries()).sort((h,m)=>u.indexOf(h[0])-u.indexOf(m[0]))},[i]);return n.jsxs("div",{className:Ye.wrap,children:[n.jsxs("div",{className:Ye.headerBar,children:[n.jsx("h2",{className:Ye.title,children:"Arena Manager  Rune bonuses"}),n.jsx("span",{className:Ye.meta,children:"last updated: 15.01.2025"})]}),n.jsx("p",{className:Ye.description,children:Rne}),n.jsx("div",{className:Ye.controls,children:n.jsx("input",{className:Ye.search,placeholder:"Suche (z. B. thousand, E34, x60)",value:t,onChange:d=>e(d.target.value)})}),n.jsx("div",{className:Ye.tableWrap,children:n.jsxs("table",{className:Ye.table,children:[n.jsx("thead",{className:Ye.thead,children:n.jsxs("tr",{className:Ye.headRow,children:[n.jsx("th",{className:`${Ye.th} ${Ye.tierCell}`,children:"Tier"}),n.jsx("th",{className:`${Ye.th} ${Ye.amountCell}`,children:"Amount"}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.gold,label:"Gold Bonus"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.xp,label:"XP Bonus"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.hp,label:"HP Bonus"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.totalRes,label:"Total Resistance"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.singleRes,label:"Single Resistance"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.elem,label:"Elemental Damage"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.item,label:"Improved Item Quality"})}),n.jsx("th",{className:Ye.th,children:n.jsx(Mo,{keyName:Do.epics,label:"Chances of Epics"})}),n.jsx("th",{className:Ye.th,children:"Tags"})]})}),n.jsx("tbody",{children:l.map(([d,u])=>{const h=Math.max(...u.map(m=>Mv(m.amount)));return u.map((m,g)=>{var _,N,C,R,D,A,y,w;const v=Math.abs(Mv(m.amount)-a)<1e-6,b=Ine(m.note);return n.jsxs("tr",{className:Ye.dataRow,onMouseEnter:()=>r(d),onMouseLeave:()=>r(null),children:[g===0&&n.jsx("td",{className:`${Ye.td} ${Ye.tierCell} ${Math.abs(h-a)<1e-6?Ye.tierMax:""} ${s===d?Ye.tierCellHover:""}`,rowSpan:u.length,children:n.jsxs("div",{className:Ye.tierBox,children:[n.jsx("div",{className:Ye.tierIcon,children:d.slice(0,1).toUpperCase()}),n.jsxs("div",{className:Ye.tierTexts,children:[n.jsx("div",{className:Ye.tierName,children:d}),bk[d]&&n.jsx(Ene,{name:bk[d]})]})]})}),n.jsx("td",{className:`${Ye.td} ${Ye.amountCell}`,children:m.amount}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(_=m.gold)!=null?_:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(N=m.xp)!=null?N:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(C=m.hp)!=null?C:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(R=m.totalRes)!=null?R:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(D=m.singleRes)!=null?D:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(A=m.elemDmg)!=null?A:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(y=m.itemQuality)!=null?y:""}),n.jsx("td",{className:`${Ye.td} ${Ye.bonusCell}`,children:(w=m.epics)!=null?w:""}),n.jsxs("td",{className:`${Ye.td} ${Ye.tags}`,children:[v&&n.jsx("span",{className:`${Ye.badge} ${Ye.badgeMax}`,children:"MAX"}),Ane(m.note)&&n.jsx("span",{className:`${Ye.badge} ${Ye.badgeAchiev}`,children:"Achievement"}),b==="x2"&&n.jsx("span",{className:`${Ye.badge} ${Ye.badgeX2}`,children:"x2"}),b==="x12"&&n.jsx("span",{className:`${Ye.badge} ${Ye.badgeX12}`,children:"x12"}),b==="x60"&&n.jsx("span",{className:`${Ye.badge} ${Ye.badgeX60}`,children:"x60"}),b==="x8"&&n.jsx("span",{className:Ye.badge,children:"x8"})]})]},`${d}-${g}`)})})})]})})]})}const Dne="_wrap_zrza7_11",Mne="_headerBar_zrza7_15",Fne="_title_zrza7_31",Bne="_meta_zrza7_33",$ne="_centerCol_zrza7_37",One="_text_zrza7_53",Vne="_imageBox_zrza7_55",Une="_imageFallback_zrza7_57",zne="_credit_zrza7_59",Aa={wrap:Dne,headerBar:Mne,title:Fne,meta:Bne,centerCol:$ne,text:One,imageBox:Vne,imageFallback:Une,credit:zne};function Hne(){const t=ox("ambuildorder"),e=E.useMemo(()=>t.id?`https://drive.google.com/thumbnail?id=${t.id}&sz=w1024`:null,[t.id]),s=E.useMemo(()=>t.id?`https://drive.google.com/uc?export=view&id=${t.id}`:null,[t.id]),r=t.thumb||null,i=e||s||r;return n.jsxs("div",{className:Aa.wrap,children:[n.jsxs("div",{className:Aa.headerBar,children:[n.jsx("h2",{className:Aa.title,children:"Arena Manager  Build Order"}),n.jsx("span",{className:Aa.meta,children:"Last updated: 30.11.2024"})]}),n.jsxs("div",{className:Aa.centerCol,children:[n.jsxs("div",{className:Aa.text,children:[n.jsx("p",{children:"Build your Attractions according to the picture below for maximum efficiency."}),n.jsxs("p",{children:["Upgrading to full Platinum on all Attractions will cost you ",n.jsx("strong",{children:"4300 Mushrooms"}),"."]})]}),i?n.jsx("div",{className:Aa.imageBox,children:n.jsx("img",{src:i,alt:"Arena Manager build order",loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):n.jsx("div",{className:Aa.imageFallback,children:""}),n.jsxs("p",{className:Aa.credit,children:["Credit to ",n.jsx("em",{children:"SF Tavern Discord"}),"."]})]})]})}const Gne=()=>n.jsx(Ps,{title:"Hellevator Guide"}),Wne=()=>n.jsx(Ps,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),qne=()=>n.jsx(Ps,{title:"Event List"}),Kne=()=>n.jsx(Ps,{title:"Event Cycle"}),Qne="_foCalc_18a5w_3",Xne="_panel_18a5w_211",Yne="_panelHead_18a5w_227",Jne="_panelTitle_18a5w_241",Zne="_controls_18a5w_243",ere="_ctrlLabel_18a5w_245",tre="_ctrlSelect_18a5w_249",sre="_tableWrap_18a5w_291",nre="_table_18a5w_291",rre="_th_18a5w_305",ire="_td_18a5w_321",are="_row_18a5w_333",ore="_note_18a5w_335",Ms={foCalc:Qne,panel:Xne,panelHead:Yne,panelTitle:Jne,controls:Zne,ctrlLabel:ere,ctrlSelect:tre,tableWrap:sre,table:nre,th:rre,td:ire,row:are,note:ore},HA={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},Qs=(t,e=0)=>t*3600+e*60,ie=[Qs(0,15),Qs(0,31),Qs(1,6),Qs(2,20),Qs(5,0),Qs(8,0),Qs(11,25),Qs(18,27),Qs(40,0),Qs(87,16),Qs(190,46),Qs(320,0),Qs(480,0),Qs(615,33),Qs(800,0)],Jt=[Qs(1054,17),Qs(1122,51),Qs(1245,42),Qs(1343,20),Qs(1440,0)],lre={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:ie[0]},{level:2,wood:150,stone:50,gold:20,timeSec:ie[1]},{level:3,wood:440,stone:140,gold:30,timeSec:ie[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:ie[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:ie[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:ie[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:ie[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:ie[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:ie[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:ie[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:ie[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:ie[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:ie[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:ie[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:ie[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:Jt[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:Jt[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:Jt[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:Jt[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:Jt[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:ie[0]},{level:2,wood:138,stone:46,gold:10,timeSec:ie[1]},{level:3,wood:406,stone:129,gold:15,timeSec:ie[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:ie[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:ie[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:ie[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:ie[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:ie[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:ie[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:ie[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:ie[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:ie[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:ie[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:ie[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:ie[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:ie[0]},{level:2,wood:28,stone:37,gold:14,timeSec:ie[1]},{level:3,wood:81,stone:103,gold:21,timeSec:ie[2]},{level:4,wood:203,stone:246,gold:28,timeSec:ie[3]},{level:5,wood:462,stone:591,gold:35,timeSec:ie[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:ie[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:ie[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:ie[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:ie[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:ie[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:ie[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:ie[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:ie[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:ie[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:ie[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:Jt[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:Jt[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:Jt[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:Jt[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:Jt[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:ie[0]},{level:2,wood:160,stone:53,gold:50,timeSec:ie[1]},{level:3,wood:469,stone:149,gold:75,timeSec:ie[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:ie[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:ie[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:ie[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:ie[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:ie[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:ie[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:ie[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:ie[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:ie[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:ie[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:ie[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:ie[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:ie[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:ie[0]},{level:2,wood:200,stone:67,gold:30,timeSec:ie[1]},{level:3,wood:587,stone:187,gold:45,timeSec:ie[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:ie[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:ie[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:ie[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:ie[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:ie[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:ie[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:ie[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:ie[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:ie[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:ie[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:ie[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:ie[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:Jt[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:Jt[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:Jt[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:Jt[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:Jt[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:Qs(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:ie[0]},{level:2,wood:30,stone:20,gold:4,timeSec:ie[1]},{level:3,wood:88,stone:56,gold:6,timeSec:ie[2]},{level:4,wood:220,stone:133,gold:8,timeSec:ie[3]},{level:5,wood:500,stone:320,gold:10,timeSec:ie[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:ie[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:ie[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:ie[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:ie[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:ie[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:ie[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:ie[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:ie[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:ie[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:ie[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:Jt[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:Jt[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:Jt[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:Jt[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:Jt[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:ie[0]},{level:2,wood:90,stone:16,gold:6,timeSec:ie[1]},{level:3,wood:264,stone:45,gold:9,timeSec:ie[2]},{level:4,wood:660,stone:107,gold:12,timeSec:ie[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:ie[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:ie[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:ie[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:ie[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:ie[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:ie[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:ie[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:ie[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:ie[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:ie[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:ie[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:Jt[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:Jt[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:Jt[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:Jt[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:Jt[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:ie[0]},{level:2,wood:82,stone:55,gold:8,timeSec:ie[1]},{level:3,wood:240,stone:153,gold:12,timeSec:ie[2]},{level:4,wood:600,stone:364,gold:16,timeSec:ie[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:ie[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:ie[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:ie[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:ie[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:ie[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:ie[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:ie[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:ie[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:ie[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:ie[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:ie[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:ie[0]},{level:2,wood:100,stone:33,gold:8,timeSec:ie[1]},{level:3,wood:293,stone:93,gold:12,timeSec:ie[2]},{level:4,wood:733,stone:222,gold:16,timeSec:ie[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:ie[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:ie[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:ie[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:ie[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:ie[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:ie[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:ie[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:ie[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:ie[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:ie[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:ie[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:Jt[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:Jt[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:Jt[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:Jt[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:Jt[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:ie[0]},{level:2,wood:240,stone:61,gold:12,timeSec:ie[1]},{level:3,wood:675,stone:205,gold:18,timeSec:ie[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:ie[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:ie[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:ie[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:ie[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:ie[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:ie[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:ie[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:ie[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:ie[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:ie[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:ie[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:ie[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:ie[0]},{level:2,wood:164,stone:27,gold:10,timeSec:ie[1]},{level:3,wood:480,stone:76,gold:15,timeSec:ie[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:ie[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:ie[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:ie[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:ie[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:ie[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:ie[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:ie[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:ie[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:ie[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:ie[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:ie[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:ie[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:ie[0]},{level:2,wood:120,stone:53,gold:30,timeSec:ie[1]},{level:3,wood:352,stone:149,gold:45,timeSec:ie[2]},{level:4,wood:880,stone:356,gold:60,timeSec:ie[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:ie[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:ie[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:ie[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:ie[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:ie[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:ie[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:ie[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:ie[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:ie[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:ie[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:ie[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:Jt[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:Jt[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:Jt[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:Jt[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:Jt[4]}]}},cre=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],dre="fortress",ure={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function hre(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function _k(t){const e=Math.max(0,Math.round(t)),s=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=l=>l.toString().padStart(2,"0");return`${a(s)}:${a(r)}:${a(i)}`}const mre=()=>{const[t,e]=E.useState(dre),[s,r]=E.useState(1),i=E.useMemo(()=>{var m;const d=ure[t],u=HA[d],h=(m=u==null?void 0:u.id)!=null?m:u;return lc.gifProxy(h)||lc.gif(h)||""},[t]),a=E.useMemo(()=>{var d,u;return(u=(d=lre[t])==null?void 0:d.costs)!=null?u:[]},[t]),l=E.useMemo(()=>hre(s),[s]);return n.jsxs("div",{className:`${Ms.foCalc}`,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:cre.map(d=>n.jsx("option",{value:d.key,children:d.label},d.key))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:Ms.panel,children:[n.jsxs("div",{className:Ms.panelHead,children:[n.jsxs("div",{className:Ms.panelTitle,children:["Fortress  ",t]}),n.jsxs("div",{className:Ms.controls,children:[n.jsx("span",{className:Ms.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{className:Ms.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:16},(d,u)=>u).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:Ms.tableWrap,children:n.jsxs("table",{className:Ms.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:Ms.th,children:"Level"}),n.jsx("th",{className:Ms.th,children:"Wood"}),n.jsx("th",{className:Ms.th,children:"Stone"}),n.jsx("th",{className:Ms.th,children:"Build Time"}),n.jsx("th",{className:Ms.th,children:"Build Time (L2)"}),n.jsx("th",{className:Ms.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:a.map(d=>{var g,v,b,_,N,C,R;const u=(g=d.timeSec)!=null?g:0,h=Math.round(u*(1-l)),m=Math.ceil(Math.ceil(h/60)/10);return n.jsxs("tr",{className:Ms.row,children:[n.jsx("td",{className:Ms.td,children:d.level}),n.jsx("td",{className:Ms.td,children:(_=(b=(v=d.wood)==null?void 0:v.toLocaleString)==null?void 0:b.call(v))!=null?_:d.wood}),n.jsx("td",{className:Ms.td,children:(R=(C=(N=d.stone)==null?void 0:N.toLocaleString)==null?void 0:C.call(N))!=null?R:d.stone}),n.jsx("td",{className:Ms.td,children:_k(u)}),n.jsx("td",{className:Ms.td,children:_k(h)}),n.jsx("td",{className:Ms.td,children:m.toLocaleString()})]},d.level)})})]})}),n.jsx("div",{className:Ms.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},pre="_uwCalc_64lws_3",fre="_panel_64lws_211",gre="_panelHead_64lws_227",xre="_panelTitle_64lws_241",yre="_controls_64lws_243",vre="_ctrlLabel_64lws_245",bre="_ctrlSelect_64lws_251",_re="_tableWrap_64lws_295",wre="_table_64lws_295",jre="_th_64lws_309",Sre="_td_64lws_325",Nre="_row_64lws_337",kre="_note_64lws_339",ks={uwCalc:pre,panel:fre,panelHead:gre,panelTitle:xre,controls:yre,ctrlLabel:vre,ctrlSelect:bre,tableWrap:_re,table:wre,th:jre,td:Sre,row:Nre,note:kre},Cre={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},Tre={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function Ere(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function Are(t){const e=Math.max(0,t),s=Math.round(e),r=Math.floor(s/3600),i=Math.floor(s%3600/60),a=s%60;return{h:r,m:i,s:a}}function wk(t){const{h:e,m:s,s:r}=Are(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(s)}:${i(r)}`}function Ire(t,e){var i,a;const s=Ere(e);return((a=(i=Tre[t])==null?void 0:i.costs)!=null?a:[]).map(l=>{const d=l.timeSec*(1-s),u=Math.ceil(Math.ceil(d/60)/10);return{...l,timeAdjSec:d,skipMushroomsAdj:u}})}const Rre=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],Pre=()=>{const[t,e]=E.useState("hearthofdarkngif"),[s,r]=E.useState(1),i=E.useMemo(()=>{var h;const d=HA[t],u=(h=d==null?void 0:d.id)!=null?h:d;return lc.gifProxy(u)||lc.gif(u)||""},[t]),a=E.useMemo(()=>{var d;return(d=Cre[t])!=null?d:"hearthofdarkn"},[t]),l=E.useMemo(()=>Ire(a,s),[a,s]);return n.jsxs("div",{className:ks.uwCalc,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:Rre.map(d=>n.jsx("option",{value:d,children:d.replace(/gif$/i,"")},d))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:ks.panel,children:[n.jsxs("div",{className:ks.panelHead,children:[n.jsxs("div",{className:ks.panelTitle,children:["Underworld  ",a]}),n.jsxs("div",{className:ks.controls,children:[n.jsx("label",{htmlFor:"uw-l2",className:ks.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{id:"uw-l2",className:ks.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:15},(d,u)=>u+1).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:ks.tableWrap,children:n.jsxs("table",{className:ks.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:ks.th,children:"Level"}),n.jsx("th",{className:ks.th,children:"Soul"}),n.jsx("th",{className:ks.th,children:"Gold"}),n.jsx("th",{className:ks.th,children:"Build Time"}),n.jsx("th",{className:ks.th,children:"Build Time (L2)"}),n.jsx("th",{className:ks.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:l.length===0?n.jsx("tr",{className:ks.row,children:n.jsx("td",{className:ks.td,colSpan:6,children:"No data for this building yet."})}):l.map(d=>n.jsxs("tr",{className:ks.row,children:[n.jsx("td",{className:ks.td,children:d.level}),n.jsx("td",{className:ks.td,children:d.soul}),n.jsx("td",{className:ks.td,children:d.gold}),n.jsx("td",{className:ks.td,children:wk(d.timeSec)}),n.jsx("td",{className:ks.td,children:wk(d.timeAdjSec)}),n.jsx("td",{className:ks.td,children:d.skipMushroomsAdj})]},d.level))})]})}),n.jsx("p",{className:ks.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},Lre=()=>n.jsx(Ps,{title:"Max Item Stats Calculator"}),Dre="_wrap_mnr0g_1",Mre="_card_mnr0g_13",Fre="_title_mnr0g_33",Bre="_form_mnr0g_45",$re="_field_mnr0g_57",Ore="_input_mnr0g_71",Vre="_gemsRow_mnr0g_87",Ure="_gemBox_mnr0g_101",zre="_disabled_mnr0g_127",Hre="_gemImg_mnr0g_135",Gre="_gemFallback_mnr0g_149",Wre="_normalGem_mnr0g_165",qre="_blackGem_mnr0g_173",Kre="_legendaryGem_mnr0g_181",Qre="_gemLabel_mnr0g_189",Xre="_gemValue_mnr0g_199",Yre="_hint_mnr0g_211",as={wrap:Dre,card:Mre,title:Fre,form:Bre,field:$re,input:Ore,gemsRow:Vre,gemBox:Ure,disabled:zre,gemImg:Hre,gemFallback:Gre,normalGem:Wre,blackGem:qre,legendaryGem:Kre,gemLabel:Qre,gemValue:Xre,hint:Yre},Jre={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},Zre=.25,cg=t=>Math.round(Number.isFinite(t)?t:0);function eie(t){const e=Number(t.charLevel),s=Number(t.mineLevel),r=Number(t.guildHoK);if(s<25){const C=e*Zre*(1+(s-1)*.25)+r/3;return cg(C)}const{A:i,B:a,C:l,D:d,E:u,F:h,G:m,H:g,I:v,J:b}=Jre,N=i+a*e+l/s+d*e**2+u/s**2+h*e/s+m*e**3+g/s**3+v*e/s**2+b*e**2/s+r/3;return cg(N)}function tie(t){return cg(t*(2/3))}function sie(t){return cg(t)}const Fv={char:1e3,mine:100,hok:1e3},GA=({initialState:t,onStateChange:e})=>{var N,C,R;const[s,r]=E.useState((N=t==null?void 0:t.charLevel)!=null?N:""),[i,a]=E.useState((C=t==null?void 0:t.mineLevel)!=null?C:""),[l,d]=E.useState((R=t==null?void 0:t.guildHoKLevel)!=null?R:""),u=(D,A,y)=>{e&&(typeof D!="number"||typeof A!="number"||typeof y!="number"||e({charLevel:D,mineLevel:A,guildHoKLevel:y}))},h=E.useMemo(()=>s===""||i===""||l===""?null:eie({charLevel:Number(s),mineLevel:Number(i),guildHoK:Number(l)}),[s,i,l]),m=E.useMemo(()=>h==null?null:tie(h),[h]),g=E.useMemo(()=>h==null?null:sie(h),[h]),v=tc("luckbig"),b=tc("blackbig"),_=tc("legendarybig");return n.jsx("div",{className:as.wrap,children:n.jsxs("div",{className:as.card,children:[n.jsx("h2",{className:as.title,children:"Gem Calculator"}),n.jsxs("div",{className:as.form,children:[n.jsxs("label",{className:as.field,children:[n.jsx("span",{children:"Char Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:as.input,placeholder:"e.g., 360",value:s,onChange:D=>{const A=D.currentTarget.value;if(A===""){r("");return}const y=Number(A),w=Number.isFinite(y)?y:"";r(w),u(w,i,l)},max:Fv.char})]}),n.jsxs("label",{className:as.field,children:[n.jsx("span",{children:"Mine Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:as.input,placeholder:"e.g., 10",value:i,onChange:D=>{const A=D.currentTarget.value;if(A===""){a("");return}const y=Number(A),w=Number.isFinite(y)?y:"";a(w),u(s,w,l)},max:Fv.mine})]}),n.jsxs("label",{className:as.field,children:[n.jsx("span",{children:"Guild HoK"}),n.jsx("input",{type:"number",inputMode:"numeric",className:as.input,placeholder:"e.g., 840",value:l,onChange:D=>{const A=D.currentTarget.value;if(A===""){d("");return}const y=Number(A),w=Number.isFinite(y)?y:"";d(w),u(s,i,w)},max:Fv.hok})]})]}),n.jsxs("div",{className:as.gemsRow,children:[n.jsxs("div",{className:`${as.gemBox} ${h==null?as.disabled:""}`,children:[v?n.jsx("img",{className:as.gemImg,src:v,alt:"Normal Gem"}):n.jsx("div",{className:`${as.gemFallback} ${as.normalGem}`}),n.jsx("div",{className:as.gemLabel,children:"Normal"}),n.jsx("div",{className:as.gemValue,children:h!=null?h:"-"})]}),n.jsxs("div",{className:`${as.gemBox} ${m==null?as.disabled:""}`,children:[b?n.jsx("img",{className:as.gemImg,src:b,alt:"Black Gem"}):n.jsx("div",{className:`${as.gemFallback} ${as.blackGem}`}),n.jsx("div",{className:as.gemLabel,children:"Black"}),n.jsx("div",{className:as.gemValue,children:m!=null?m:"-"})]}),n.jsxs("div",{className:`${as.gemBox} ${g==null?as.disabled:""}`,children:[_?n.jsx("img",{className:as.gemImg,src:_,alt:"Legendary Gem"}):n.jsx("div",{className:`${as.gemFallback} ${as.legendaryGem}`}),n.jsx("div",{className:as.gemLabel,children:"Legendary"}),n.jsx("div",{className:as.gemValue,children:g!=null?g:"-"})]})]}),n.jsxs("p",{className:as.hint,children:["The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find. Actual results may vary slightly."]})]})})},nie="_container_19zdf_1",rie="_headerBar_19zdf_13",iie="_title_19zdf_31",aie="_meta_19zdf_47",oie="_description_19zdf_59",zu={container:nie,headerBar:rie,title:iie,meta:aie,description:oie},WA=({title:t,meta:e,description:s})=>n.jsxs("header",{className:zu.container,children:[n.jsxs("div",{className:zu.headerBar,children:[n.jsx("h2",{className:zu.title,children:t}),e&&n.jsx("span",{className:zu.meta,children:e})]}),s&&n.jsx("p",{className:zu.description,children:s})]}),lie=()=>n.jsxs(n.Fragment,{children:[n.jsx(WA,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:n.jsxs(n.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find."]})}),n.jsx(GA,{})]}),cie="_wrapper_67xyv_1",die="_panel_67xyv_11",uie="_header_67xyv_27",hie="_title_67xyv_41",mie="_resetBtn_67xyv_53",pie="_table_67xyv_73",fie="_row_67xyv_99",gie="_name_67xyv_115",xie="_selectCell_67xyv_125",yie="_sumCell_67xyv_143",vie="_footer_67xyv_155",bie="_footerLine_67xyv_175",_ie="_note_67xyv_187",Xs={wrapper:cie,panel:die,header:uie,title:hie,resetBtn:mie,table:pie,row:fie,name:gie,selectCell:xie,sumCell:yie,footer:vie,footerLine:bie,note:_ie};function yh(t,e,s){var l;if(!Array.isArray(t)||e<=0||s<=0)return 0;const r=Math.min(e,s),i=Math.max(e,s);let a=0;for(let d=r;d<=i;d++)a+=(l=t[d])!=null?l:0;return a}function wie(t){const e=[0];for(let s=1;s<=t;s++)e.push(s);return e}function Mt(t,e){const s=[0,...t.map(r=>Number(r)||0)];if(e&&s.length<e+1)for(;s.length<e+1;)s.push(0);return s}const jie=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:Mt([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:Mt([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:Mt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:Mt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:Mt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"light_19_easteros",name:"19 Easteros",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:Mt([0,0,0,9e8,0,0,0,0,0,0],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:Mt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:Mt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:Mt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)}],Sie=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:Mt([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:Mt([165631756,175491135,186285917,197984244,210662291,224327317,239040847,254786681,271632931,301959487],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:Mt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:Mt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:Mt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"shadow_19_easteros",name:"Easteros",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:Mt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:Mt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:Mt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:Mt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:Mt([0,0,0,0,0,0,0,0,0,0],10)}],jk=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],Nie=(()=>{const t=[0,...jk],e=1e3-jk.length;for(let s=0;s<e;s++)t.push(3e7);return t})(),kie=Mt([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),Cie=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),Fa={light:jie.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:Sie.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:Nie,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:kie,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:Cie,specialType:"sandstorm"}]},dg=t=>t.toLocaleString("en-US");function Sk(){const t={},e={},s={};return Fa.light.forEach(r=>t[r.key]={from:0,to:0}),Fa.shadow.forEach(r=>e[r.key]={from:0,to:0}),Fa.special.forEach(r=>{r.specialType==="twister"?s[r.key]={from:486,to:1e3}:r.specialType==="cloi"?s[r.key]={from:2,to:11}:s[r.key]={from:0,to:0}}),{light:t,shadow:e,special:s}}function qA({row:t,range:e,onChange:s}){var d,u;const r=E.useMemo(()=>wie(t.maxLevel),[t.maxLevel]),i=(d=e.from)!=null?d:0,a=(u=e.to)!=null?u:0,l=E.useMemo(()=>i===0||a===0?0:yh(t.levels,i,a),[t.levels,i,a]);return n.jsxs("tr",{className:Xs.row,children:[n.jsx("td",{className:Xs.name,children:t.name}),n.jsx("td",{className:Xs.selectCell,children:n.jsx("select",{value:i,onChange:h=>s({from:Number(h.target.value),to:a}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsx("td",{className:Xs.selectCell,children:n.jsx("select",{value:a,onChange:h=>s({from:i,to:Number(h.target.value)}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsxs("td",{className:Xs.sumCell,children:[dg(l)," XP"]})]})}function Nk({title:t,rows:e,ranges:s,setRanges:r}){const i=E.useMemo(()=>e.reduce((a,l)=>{const d=s[l.key]||{from:0,to:0};return a+yh(l.levels,d.from,d.to)},0),[e,s]);return n.jsxs("div",{className:Xs.panel,children:[n.jsx("div",{className:Xs.header,children:n.jsx("div",{className:Xs.title,children:t})}),n.jsxs("table",{className:Xs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum XP"})]})}),n.jsx("tbody",{children:e.map(a=>{var l;return n.jsx(qA,{row:a,range:(l=s[a.key])!=null?l:{from:0,to:0},onChange:d=>r(a.key,d)},a.key)})})]}),n.jsx("div",{className:Xs.footer,children:n.jsxs("div",{className:Xs.footerLine,children:[n.jsxs("span",{children:["Sum Total ",t]}),n.jsxs("span",{children:[dg(i)," XP"]})]})})]})}function KA({initialState:t,onStateChange:e}){var D,A,y;const s=E.useMemo(()=>Sk(),[]),[r,i]=E.useState((D=t==null?void 0:t.light)!=null?D:s.light),[a,l]=E.useState((A=t==null?void 0:t.shadow)!=null?A:s.shadow),[d,u]=E.useState((y=t==null?void 0:t.special)!=null?y:s.special),h=(w,M,k)=>{e&&e({light:w,shadow:M,special:k})},m=(w,M)=>{i(k=>{const S={...k,[w]:M};return h(S,a,d),S})},g=(w,M)=>{l(k=>{const S={...k,[w]:M};return h(r,S,d),S})},v=(w,M)=>{u(k=>{const S={...k,[w]:M};return h(r,a,S),S})};E.useEffect(()=>{var w,M,k;if(t){i((w=t.light)!=null?w:s.light),l((M=t.shadow)!=null?M:s.shadow),u((k=t.special)!=null?k:s.special);return}i(s.light),l(s.shadow),u(s.special)},[t,s]);const b=E.useMemo(()=>Fa.light.reduce((w,M)=>{const k=r[M.key];return w+(k?yh(M.levels,k.from,k.to):0)},0),[r]),_=E.useMemo(()=>Fa.shadow.reduce((w,M)=>{const k=a[M.key];return w+(k?yh(M.levels,k.from,k.to):0)},0),[a]),N=E.useMemo(()=>Fa.special.reduce((w,M)=>{const k=d[M.key];return w+(k?yh(M.levels,k.from,k.to):0)},0),[d]),C=b+_+N,R=()=>{const w=Sk();i(w.light),l(w.shadow),u(w.special),h(w.light,w.shadow,w.special)};return n.jsxs("div",{className:Xs.wrapper,children:[n.jsx(Nk,{title:"Light World",rows:Fa.light,ranges:r,setRanges:m}),n.jsx(Nk,{title:"Shadow World",rows:Fa.shadow,ranges:a,setRanges:g}),n.jsxs("div",{className:Xs.panel,children:[n.jsxs("div",{className:Xs.header,children:[n.jsx("div",{className:Xs.title,children:"Special Dungeons"}),n.jsx("button",{className:Xs.resetBtn,onClick:R,children:"RESET"})]}),n.jsxs("table",{className:Xs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum"})]})}),n.jsx("tbody",{children:Fa.special.map(w=>{var M;return n.jsx(qA,{row:w,range:(M=d[w.key])!=null?M:{from:0,to:0},onChange:k=>v(w.key,k)},w.key)})})]}),n.jsxs("div",{className:Xs.footer,children:[n.jsxs("div",{className:Xs.footerLine,children:[n.jsx("span",{children:"Sum Total Special"}),n.jsxs("span",{children:[dg(N)," XP"]})]}),n.jsxs("div",{className:Xs.footerLine,children:[n.jsx("span",{children:"Total XP"}),n.jsxs("span",{children:[dg(C)," XP"]})]}),n.jsxs("div",{className:Xs.note,children:["Flle die XP-Arrays in ",n.jsx("code",{children:"src/lib/calculators/dungeonPauseOpenXP/data.ts"}),", dann rechnet es 1:1 wie im Sheet."]})]})]})]})}function Tie(){return n.jsx("div",{style:{padding:12},children:n.jsx(KA,{})})}const Eie=()=>n.jsx(Ps,{title:"Progression  Early Game"}),Aie="_wrap_n2poq_31",Iie="_title_n2poq_33",Rie="_infoBox_n2poq_39",Pie="_infoTitle_n2poq_63",Lie="_infoList_n2poq_73",Die="_section_n2poq_89",Mie="_h2_n2poq_101",Fie="_h3_n2poq_103",Bie="_intro_n2poq_105",$ie="_ul_n2poq_107",Oie="_img_n2poq_113",ys={wrap:Aie,title:Iie,infoBox:Rie,infoTitle:Pie,infoList:Lie,section:Die,h2:Mie,h3:Fie,intro:Bie,ul:$ie,img:Oie},Vie=()=>{al();const t=[tc("first-weekend-guide-day1",900),tc("first-weekend-guide-day2",900),tc("first-weekend-guide-day3",900)];return n.jsxs("div",{className:ys.wrap,children:[n.jsx("h1",{className:ys.title,children:"First Weekend Guide"}),n.jsxs("aside",{className:ys.infoBox,role:"note","aria-label":"Important Level Tips",children:[n.jsx("div",{className:ys.infoTitle,children:"Important Level Tips"}),n.jsxs("ul",{className:ys.infoList,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),n.jsx("p",{className:ys.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),n.jsxs("div",{className:ys.section,children:[n.jsx("h2",{className:ys.h2,children:"Preparation before launch"}),n.jsxs("ul",{className:ys.ul,children:[n.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),n.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),n.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),n.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),n.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),n.jsxs("div",{className:ys.section,children:[n.jsx("h2",{className:ys.h2,children:"Day 1"}),n.jsx("h3",{className:ys.h3,children:"Level 13"}),n.jsxs("ul",{className:ys.ul,children:[n.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),n.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&n.jsx("img",{className:ys.img,src:t[0],alt:"Day 1 overview"})]}),n.jsxs("div",{className:ys.section,children:[n.jsx("h3",{className:ys.h3,children:"Level 410"}),n.jsxs("ul",{className:ys.ul,children:[n.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),n.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),n.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),n.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),n.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),n.jsxs("div",{className:ys.section,children:[n.jsx("h2",{className:ys.h2,children:"Day 2"}),n.jsx("h3",{className:ys.h3,children:"Level 1015"}),n.jsxs("ul",{className:ys.ul,children:[n.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),n.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),n.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),n.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&n.jsx("img",{className:ys.img,src:t[1],alt:"Day 2 overview"})]}),n.jsxs("div",{className:ys.section,children:[n.jsx("h2",{className:ys.h2,children:"Day 3"}),n.jsx("h3",{className:ys.h3,children:"Level 1520"}),n.jsxs("ul",{className:ys.ul,children:[n.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),n.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&n.jsx("img",{className:ys.img,src:t[2],alt:"Day 3 overview"})]})]})},Uie=()=>n.jsx(Ps,{title:"Max Item Stats Calculator"}),zie=()=>n.jsx(Ps,{title:"Fortress Package skip order (Early)"}),Hie=()=>n.jsx(Ps,{title:"Underworld Pro Package skip order (Early)"}),Gie=()=>n.jsx(Ps,{title:"Gem Calculator (Early)"}),Wie=()=>n.jsx(Ps,{title:"Fortress attack duplication guide (Early)"}),qie=()=>n.jsx(Ps,{title:"Progression  Mid Game"}),Kie="_wrap_1x7jo_31",Qie="_header_1x7jo_35",Xie="_titles_1x7jo_55",Yie="_h1_1x7jo_57",Jie="_lead_1x7jo_59",Zie="_ctaRow_1x7jo_63",eae="_cta_1x7jo_63",tae="_section_1x7jo_85",sae="_sectionGrid_1x7jo_87",nae="_card_1x7jo_99",rae="_h2_1x7jo_103",iae="_h3_1x7jo_105",aae="_p_1x7jo_107",oae="_ul_1x7jo_111",lae="_ol_1x7jo_111",cae="_figure_1x7jo_117",dae="_figureNarrow_1x7jo_139",uae="_img_1x7jo_149",hae="_fallbackImg_1x7jo_151",mae="_figCaption_1x7jo_159",pae="_tableWrap_1x7jo_163",fae="_table_1x7jo_163",gae="_footer_1x7jo_217",xae="_tools_1x7jo_219",yae="_toolBtn_1x7jo_221",Kt={wrap:Kie,header:Qie,titles:Xie,h1:Yie,lead:Jie,ctaRow:Zie,cta:eae,section:tae,sectionGrid:sae,card:nae,h2:rae,h3:iae,p:aae,ul:oae,ol:lae,figure:cae,figureNarrow:dae,img:uae,fallbackImg:hae,figCaption:mae,tableWrap:pae,table:fae,footer:gae,tools:xae,toolBtn:yae},vae=1400;function bae(){const t=E.useMemo(()=>tc("goldxpcurve",vae),[]);return n.jsxs("div",{className:Kt.wrap,children:[n.jsxs("header",{className:Kt.header,children:[n.jsxs("div",{className:Kt.titles,children:[n.jsx("h1",{className:Kt.h1,children:"Dungeon Pause"}),n.jsx("p",{className:Kt.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),n.jsxs("div",{className:Kt.ctaRow,children:[n.jsx(hs,{className:Kt.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),n.jsx(hs,{className:Kt.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),n.jsxs("section",{className:Kt.section,children:[n.jsx("h2",{className:Kt.h2,children:"Worum gehts?"}),n.jsxs("p",{className:Kt.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",n.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",n.jsx("strong",{children:"Level 370"})," und endet um ",n.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),n.jsxs("section",{className:Kt.section,children:[n.jsx("h3",{className:Kt.h3,children:"XP & Gold  Verlauf"}),n.jsxs("div",{className:`${Kt.figure} ${Kt.figureNarrow}`,children:[t?n.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:Kt.img}):n.jsx("div",{className:Kt.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),n.jsx("div",{className:Kt.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),n.jsxs("section",{className:Kt.sectionGrid,children:[n.jsxs("div",{className:Kt.card,children:[n.jsx("h3",{className:Kt.h3,children:"Start & Ende"}),n.jsxs("ul",{className:Kt.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",n.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",n.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),n.jsxs("div",{className:Kt.card,children:[n.jsx("h3",{className:Kt.h3,children:"Twister & Light/Shadow"}),n.jsxs("ul",{className:Kt.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Twister:"})," bei ca. ",n.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),n.jsxs("li",{children:["Whrend der Pause weiterhin ",n.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",n.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",n.jsx("em",{children:"Devilsatt"})," &"," ",n.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),n.jsxs("section",{className:Kt.section,children:[n.jsx("h3",{className:Kt.h3,children:"Vorgehen"}),n.jsxs("ol",{className:Kt.ol,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",n.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",n.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",n.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),n.jsxs("section",{className:Kt.section,children:[n.jsx("h3",{className:Kt.h3,children:"Kompaktbersicht"}),n.jsx("div",{className:Kt.tableWrap,children:n.jsxs("table",{className:Kt.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Aspekt"}),n.jsx("th",{children:"Empfehlung"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Start (Faustregel)"}),n.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Ende (Faustregel)"}),n.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Open XP vor Eintritt"}),n.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Twister"}),n.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Light/Shadow"}),n.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Whrend der Pause"}),n.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Pets"}),n.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Optimaler Exit"}),n.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),n.jsx("footer",{className:Kt.footer,children:n.jsxs("div",{className:Kt.tools,children:[n.jsx(hs,{className:Kt.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),n.jsx(hs,{className:Kt.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const _ae=()=>n.jsx(Ps,{title:"Dungeon Pause open XP Calculator"}),wae="_wrap_1uhww_3",jae="_headerBar_1uhww_15",Sae="_title_1uhww_33",Nae="_meta_1uhww_45",kae="_description_1uhww_55",Cae="_section_1uhww_69",Tae="_sectionTitle_1uhww_77",Eae="_steps_1uhww_87",Zi={wrap:wae,headerBar:jae,title:Sae,meta:Nae,description:kae,section:Cae,sectionTitle:Tae,steps:Eae};function Aae(){return n.jsxs("div",{className:Zi.wrap,children:[n.jsxs("div",{className:Zi.headerBar,children:[n.jsx("h2",{className:Zi.title,children:"Dungeon Pause Exit"}),n.jsx("span",{className:Zi.meta,children:"Last updated: 28.03.2025"})]}),n.jsx("p",{className:Zi.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),n.jsxs("section",{className:Zi.section,children:[n.jsx("h3",{className:Zi.sectionTitle,children:"Sequence for the Exit"}),n.jsxs("ol",{className:Zi.steps,children:[n.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),n.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),n.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),n.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),n.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),n.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),n.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),n.jsxs("section",{className:Zi.section,children:[n.jsx("h3",{className:Zi.sectionTitle,children:"Extra Tip"}),n.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const Iae=()=>n.jsx(Ps,{title:"Gem Calculator (Mid)"}),Rae=()=>n.jsx(Ps,{title:"Calendar Skip"}),Pae=()=>n.jsx(Ps,{title:"Progression  Late Game"}),Lae="_layout_13sgm_29",Dae="_side_13sgm_49",Mae="_sideHead_13sgm_61",Fae="_search_13sgm_71",Bae="_spotBtn_13sgm_89",$ae="_sideList_13sgm_109",Oae="_sideItem_13sgm_111",Vae="_active_13sgm_119",Uae="_sideTitle_13sgm_121",zae="_ico_13sgm_123",Hae="_badge_13sgm_125",Gae="_detail_13sgm_139",Wae="_detailInner_13sgm_141",qae="_detailHead_13sgm_143",Kae="_detailTitle_13sgm_145",Qae="_empty_13sgm_147",Xae="_grid_13sgm_151",Yae="_card_13sgm_157",Jae="_cardHead_13sgm_175",Zae="_btnGrid_13sgm_177",eoe="_itemBtn_13sgm_179",toe="_spotWrap_13sgm_203",soe="_spot_13sgm_89",noe="_spotHead_13sgm_227",roe="_spotSearch_13sgm_235",ioe="_spotClose_13sgm_243",aoe="_spotList_13sgm_253",ooe="_spotItem_13sgm_255",loe="_spotItemEmpty_13sgm_259",coe="_spotCat_13sgm_261",doe="_spotLabel_13sgm_263",uoe="_mark_13sgm_267",zt={layout:Lae,side:Dae,sideHead:Mae,search:Fae,spotBtn:Bae,sideList:$ae,sideItem:Oae,active:Vae,sideTitle:Uae,ico:zae,badge:Hae,detail:Gae,detailInner:Wae,detailHead:qae,detailTitle:Kae,empty:Qae,grid:Xae,card:Yae,cardHead:Jae,btnGrid:Zae,itemBtn:eoe,spotWrap:toe,spot:soe,spotHead:noe,spotSearch:roe,spotClose:ioe,spotList:aoe,spotItem:ooe,spotItemEmpty:loe,spotCat:coe,spotLabel:doe,mark:uoe};function hoe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hu(t,e){if(!e)return t;const s=new RegExp(`(${hoe(e)})`,"ig");return t.replace(s,`<mark class="${zt.mark}">$1</mark>`)}function kk(t){if(!t||!t.length)return 0;let e=0;for(const s of t)if(s.sub2&&s.sub2.length)if(s.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of s.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=s.sub2.length;else e+=1;return e}function moe(t){const e=[];for(const s of t){const r=s.label;if(!(!s.sub||!s.sub.length))for(const i of s.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(l=>l.sub2&&l.sub2.length))for(const l of i.sub2)if(l.sub2&&l.sub2.length)for(const d of l.sub2)e.push({full:`${r}  ${i.label}  ${l.label}  ${d.label}`,catKey:s.key,subKey:i.key,sub2Key:d.key});else e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else for(const l of i.sub2)e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else e.push({full:`${r}  ${i.label}`,catKey:s.key,subKey:i.key})}return e}function poe(t,e){var s;return e&&t.some(r=>r.key===e)?e:((s=t==null?void 0:t[0])==null?void 0:s.key)||""}const foe=({categories:t,onNavigate:e,autoFocusSearch:s})=>{const[r,i]=E.useState(()=>{var D;return((D=t==null?void 0:t[0])==null?void 0:D.key)||""}),[a,l]=E.useState(""),[d,u]=E.useState(!1),h=E.useRef(null),m=E.useMemo(()=>{const D=a.trim().toLowerCase();if(!D)return t;const A=y=>y.toLowerCase().includes(D);return t.map(y=>{const w=A(y.label),M=[];for(const k of y.sub||[]){const S=A(k.label);if(k.sub2&&k.sub2.length)if(k.sub2.some(F=>F.sub2&&F.sub2.length)){const F=[];for(const I of k.sub2)if(I.sub2&&I.sub2.length){const B=I.sub2.filter($=>A($.label));B.length&&F.push({...I,sub2:B})}else A(I.label)&&F.push(I);(S||F.length)&&M.push({...k,sub2:F})}else{const F=k.sub2.filter(I=>A(I.label));(S||F.length)&&M.push({...k,sub2:F})}else S&&M.push(k)}return w||M.length?{...y,sub:M.length?M:y.sub}:null}).filter(Boolean)},[t,a]),g=E.useMemo(()=>{const D=m.length?m:t,A=poe(D,r);return D.find(y=>y.key===A)||D[0]||null},[m,t,r]),v=E.useMemo(()=>moe(t),[t]),[b,_]=E.useState(""),N=E.useMemo(()=>{const D=b.trim().toLowerCase();return D?v.filter(A=>A.full.toLowerCase().includes(D)):v},[v,b]);E.useEffect(()=>{const D=A=>{const y=A.key.toLowerCase()==="k";(A.metaKey||A.ctrlKey)&&y&&(A.preventDefault(),u(!0),setTimeout(()=>{var w;return(w=h.current)==null?void 0:w.focus()},0)),A.key==="Escape"&&u(!1)};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[]);const C=E.useRef(null);E.useEffect(()=>{var D;s&&((D=C.current)==null||D.focus())},[s]);const R=()=>{var M;const D=a.trim().toLowerCase(),A=(D?v.find(k=>k.full.toLowerCase().includes(D)):v[0])||null;if(A){e({tab:A.catKey,sub:A.subKey,sub2:A.sub2Key});return}const y=g,w=(M=y==null?void 0:y.sub)==null?void 0:M[0];if(!(!y||!w))if(w.sub2&&w.sub2.length)if(w.sub2.some(S=>S.sub2&&S.sub2.length)){const S=w.sub2[0];S.sub2&&S.sub2.length?e({tab:y.key,sub:w.key,sub2:S.sub2[0].key}):e({tab:y.key,sub:w.key,sub2:S.key})}else e({tab:y.key,sub:w.key,sub2:w.sub2[0].key});else e({tab:y.key,sub:w.key})};return n.jsxs("div",{className:zt.layout,children:[n.jsxs("div",{className:zt.side,children:[n.jsxs("div",{className:zt.sideHead,children:[n.jsx("input",{ref:C,className:zt.search,type:"search",placeholder:"Suche",value:a,onChange:D=>l(D.target.value),onKeyDown:D=>{D.key==="Enter"&&R()}}),n.jsx("button",{className:zt.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var D;return(D=h.current)==null?void 0:D.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),n.jsx("div",{className:zt.sideList,children:(m.length?m:t).map(D=>n.jsxs("div",{className:`${zt.sideItem} ${(g==null?void 0:g.key)===D.key?zt.active:""}`,onClick:()=>i(D.key),children:[n.jsxs("span",{className:zt.sideTitle,children:[D.icon?n.jsx("span",{className:zt.ico,"aria-hidden":!0,children:D.icon}):null,D.label]}),n.jsx("span",{className:zt.badge,children:kk(D.sub)})]},D.key))})]}),n.jsx("div",{className:zt.detail,children:g?n.jsxs("div",{className:zt.detailInner,children:[n.jsxs("div",{className:zt.detailHead,children:[n.jsxs("h3",{className:zt.detailTitle,children:[g.icon?n.jsx("span",{className:zt.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),n.jsxs("div",{className:zt.badge,children:[kk(g.sub)," Eintrge"]})]}),n.jsx("div",{className:zt.grid,children:(g.sub||[]).map(D=>{const A=D.sub2&&D.sub2.length>0,y=A&&D.sub2.some(w=>w.sub2&&w.sub2.length);return n.jsxs("div",{className:zt.card,children:[n.jsx("div",{className:zt.cardHead,dangerouslySetInnerHTML:{__html:Hu(D.label,a)}}),A?n.jsx("div",{className:zt.btnGrid,children:y?D.sub2.flatMap(w=>w.sub2&&w.sub2.length?w.sub2.map(M=>n.jsx("button",{className:zt.itemBtn,onClick:()=>e({tab:g.key,sub:D.key,sub2:M.key}),dangerouslySetInnerHTML:{__html:Hu(`${w.label}  ${M.label}`,a)}},`${w.key}__${M.key}`)):[n.jsx("button",{className:zt.itemBtn,onClick:()=>e({tab:g.key,sub:D.key,sub2:w.key}),dangerouslySetInnerHTML:{__html:Hu(w.label,a)}},w.key)]):D.sub2.map(w=>n.jsx("button",{className:zt.itemBtn,onClick:()=>e({tab:g.key,sub:D.key,sub2:w.key}),dangerouslySetInnerHTML:{__html:Hu(w.label,a)}},w.key))}):n.jsx("div",{className:zt.btnGrid,children:n.jsx("button",{className:zt.itemBtn,onClick:()=>e({tab:g.key,sub:D.key}),dangerouslySetInnerHTML:{__html:Hu(D.label,a)}})})]},D.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(D=>!D.sub2||!D.sub2.length?!D.label.toLowerCase().includes(a.trim().toLowerCase()):D.sub2.some(y=>y.sub2&&y.sub2.length)?D.sub2.every(y=>y.sub2&&y.sub2.length?y.sub2.every(w=>!w.label.toLowerCase().includes(a.trim().toLowerCase())):!y.label.toLowerCase().includes(a.trim().toLowerCase())):D.sub2.every(y=>!y.label.toLowerCase().includes(a.trim().toLowerCase())))?n.jsxs("div",{className:zt.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):n.jsx("div",{className:zt.empty,children:"Keine Kategorie gefunden."})}),d&&n.jsx("div",{className:zt.spotWrap,onClick:()=>u(!1),children:n.jsxs("div",{className:zt.spot,onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:zt.spotHead,children:[n.jsx("input",{ref:h,className:zt.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:b,onChange:D=>_(D.target.value)}),n.jsx("button",{className:zt.spotClose,onClick:()=>u(!1),children:"Esc"})]}),n.jsx("div",{className:zt.spotList,children:N.length===0?n.jsx("div",{className:zt.spotItemEmpty,children:"Keine Treffer"}):N.map((D,A)=>n.jsxs("div",{className:zt.spotItem,onClick:()=>{u(!1),e({tab:D.catKey,sub:D.subKey,sub2:D.sub2Key})},children:[n.jsx("div",{className:zt.spotCat,children:D.catKey}),n.jsx("div",{className:zt.spotLabel,children:D.full})]},A))})]})})]})},goe={gamefeatures:cse,progression:dse,hellevator:use,"legendary-dungeon":hse,events:mse,calculators:kse,infographics:Cse,"class-book":Tse,dungeons:Ese},Ck={gamefeatures:{fortress:Ase,underworld:Gse,arenaam:Kse},hellevator:{"hellevator-guide":Gne},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":Wne},events:{"event-list":qne,"event-cycle":Kne},calculators:{"fortress-calculator":mre,"underworld-calculator":Pre,"max-item-stats-calculator":Lre,"gem-calculator":lie,"dungeon-pause-open-xp-calculator":Tie},progression:{early:Eie,mid:qie,late:Pae}},Bv={gamefeatures:{arenaam:{"am-rune-bonuses":Lne,"am-build-order":Hne},underworld:{"underworld-calculator":Wse,"underworld-pro-package-skip-order":qse},fortress:{"fortress-calculator":Ise,"fortress-package-skip-order":zse,"fortress-attack-duplication":Hse}},progression:{early:{"first-weekend-guide":Vie,"max-item-stats-calculator":Uie,"fortress-package-skip-order":zie,"underworld-pro-package-skip-order":Hie,"gem-calculator":Gie,"fortress-attack-duplication":Wie},mid:{"dungeon-pause":bae,"dungeon-pause-open-xp-calculator":_ae,"dungeon-pause-exit":Aae,"gem-calculator":Iae,"calendar-skip":Rae}}};function xoe(){const[t,e]=al(),s=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;s?s&&!r?a=goe[s]||null:s&&r&&!i?a=Ck[s]&&Ck[s][r]||null:s&&r&&i&&(a=Bv[s]&&Bv[s][r]&&Bv[s][r][i]||null):a=null;const l=d=>{const u=new URLSearchParams(t);u.set("tab",d.tab),d.sub?u.set("sub",d.sub):u.delete("sub"),d.sub2?u.set("sub2",d.sub2):u.delete("sub2"),e(u,{replace:!1})};return n.jsxs(Bt,{children:[n.jsx("div",{className:td.topWrap,children:n.jsx(tse,{logoSrc:lse,categories:yk,titleI18nKey:"guides.index.title"})}),n.jsx("div",{className:td.divider}),n.jsx("div",{className:td.contentArea,children:a?n.jsx(a,{}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:td.placeholder,children:[n.jsx("h2",{className:td.placeholderTitle,children:"Guides"}),n.jsx("p",{className:td.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),n.jsx(foe,{categories:yk,onNavigate:l,autoFocusSearch:!1})]})})]})}const yoe="_wrap_1353r_1",voe="_centerLogoWrap_1353r_21",boe="_centerLogoLink_1353r_37",_oe="_centerLogo_1353r_21",woe="_arc_1353r_71",joe="_left_1353r_73",Soe="_right_1353r_75",Noe="_sub_1353r_77",koe="_full_1353r_79",Coe="_arcItem_1353r_81",Toe="_iconBtn_1353r_87",Eoe="_active_1353r_141",Aoe="_iconImg_1353r_151",Ioe="_placeholderIcon_1353r_155",Roe="_placeholderText_1353r_173",Poe="_iconLabel_1353r_177",Fn={wrap:yoe,centerLogoWrap:voe,centerLogoLink:boe,centerLogo:_oe,arc:woe,left:joe,right:Soe,sub:Noe,full:koe,arcItem:Coe,iconBtn:Toe,active:Eoe,iconImg:Aoe,placeholderIcon:Ioe,placeholderText:Roe,iconLabel:Poe},Loe=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=Ir();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),v=m.get("sub");a=r==="sub"?d===g&&!!v&&u===v:d===g}catch(l){a=!1}return n.jsxs(hs,{to:t,"aria-label":e,className:[Fn.iconBtn,r==="sub"?Fn.muted:"",a?Fn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:Fn.iconImg}):n.jsx("div",{className:Fn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:Fn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:Fn.iconLabel,children:e})]})},$v=({items:t,side:e,anchorSide:s="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440})=>{const d=E.useMemo(()=>{const h=t.length;if(h===0)return[];let m=-90,g=90;e==="left"?(m=90,g=270):e==="sub"?s==="left"?(m=90,g=270):(m=-90,g=90):e==="full"&&(m=0,g=360);const v=(g-m)/(h+1),b=r?190:250;return t.map((_,N)=>{const R=(m+v*(N+1))*Math.PI/180;return{it:_,x:Math.cos(R)*b,y:Math.sin(R)*b}})},[t,e,s,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`),h})();return n.jsx("div",{className:[Fn.arc,e==="left"?Fn.left:"",e==="right"?Fn.right:"",e==="sub"?Fn.sub:"",e==="full"?Fn.full:""].join(" "),style:u,children:d.map(({it:h,x:m,y:g})=>n.jsx("div",{className:Fn.arcItem,style:{transform:`translate(${m}px, ${g}px)`},children:n.jsx(Loe,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},Doe=["creators","scans","predictions","news","records","feedback"],e1=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],Moe={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},Foe=new Set(Doe),Boe=e1.reduce((t,e)=>(t[e.key]=e,t),{}),$oe=t=>typeof t=="string"&&Foe.has(t),Ooe=({logoSrc:t})=>{const[e]=al(),s=e.get("tab")||null,r=E.useMemo(()=>e1.filter(b=>b.side==="left"),[]),i=E.useMemo(()=>e1.filter(b=>b.side==="right"),[]),a=$oe(s)?s:null,l=a?Moe[a]:[],d=a?Boe[a].side:"right",u=E.useRef(null),[h,m]=E.useState(220),[g,v]=E.useState(440);return E.useEffect(()=>{const b=()=>{var A,y;const N=((y=(A=u.current)==null?void 0:A.offsetWidth)!=null?y:380)/2,R=Math.round(N+60),D=Math.round(R+220);m(R),v(D)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),n.jsxs("div",{className:Fn.wrap,children:[n.jsx("div",{className:Fn.centerLogoWrap,children:n.jsx(hs,{to:"/community",className:Fn.centerLogoLink,"aria-label":"Community Hub Home",children:n.jsx("img",{ref:u,src:t,alt:"Community Hub",className:Fn.centerLogo})})}),n.jsx($v,{items:r.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"left",variant:"main",arcOffset:h}),n.jsx($v,{items:i.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"right",variant:"main",arcOffset:h}),l.length>0&&n.jsx($v,{items:l.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"sub",anchorSide:d,compact:!0,variant:"sub",outerOffset:g})]})},Voe="_topWrap_1rivx_1",Uoe="_divider_1rivx_19",zoe="_contentArea_1rivx_53",Hoe="_placeholder_1rivx_63",Goe="_placeholderTitle_1rivx_77",Woe="_placeholderText_1rivx_91",sd={topWrap:Voe,divider:Uoe,contentArea:zoe,placeholder:Hoe,placeholderTitle:Goe,placeholderText:Woe},qoe="/assets/logo_communityhub-LVMLHRD6.png",Koe=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function QA(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function Qoe(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(l=>parseInt(l,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const s=new Date(t);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function Ov(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function Xoe(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function Yoe(t){return t.avatar?t.avatar:`/avatars/${QA(t.code||t.name||"creator")}.png`}function Joe(t){const e=QA(t.code||t.name||"creator"),s=[],r=Ov(t.youtube);r&&s.push({type:"YouTube",url:r});const i=Ov(t.twitch);i&&s.push({type:"Twitch",url:i});const a=Ov(t.discord);return a&&s.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:Yoe(t),description:Xoe(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:Qoe(t.latestActivity),platforms:s}}function Zoe(t){var s,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(s=t==null?void 0:t.generatedAt)!=null?s:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function XA(t="/data/creators-live.json"){const[e,s]=E.useState(null),[r,i]=E.useState(""),[a,l]=E.useState(!1),[d,u]=E.useState(0);return E.useEffect(()=>{let h=!1;async function m(){l(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const v=await g.json();h||s(Zoe(v))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),s(null))}finally{h||l(!1)}}return m(),()=>{h=!0}},[t,d]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const ele=Koe,tle=ele.map(Joe),sle=[...tle];function YA(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function Wo(t,e,s=YA){if(t<=0)return"";const r=s(t);return e?`${r} ${e}`:r}function Hh(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function nle(t,e){const s=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*s;case"views":return(r.totalViews-i.totalViews)*s;case"activity":return(Hh(r.lastActive)-Hh(i.lastActive))*s*-1;case"language":return r.language.localeCompare(i.language)*s;default:return 0}}}function rle(t){const e={width:16,height:16};switch(t){case"YouTube":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[n.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),n.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[n.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),n.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),n.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[n.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),n.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),n.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[n.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),n.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),n.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function Tk({c:t}){return n.jsxs("article",{className:"cc-card",children:[n.jsxs("header",{className:"cc-card-head",children:[n.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const s=e.currentTarget;s.onerror=null,s.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),n.jsxs("div",{className:"cc-card-title",children:[n.jsx("h3",{className:"cc-name",children:t.name}),n.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[rle(e.type),n.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),n.jsx("p",{className:"cc-desc",children:t.description}),n.jsxs("div",{className:"cc-stats",children:[n.jsx("span",{title:"Subscribers",children:Wo(t.subscribers,"subs")}),n.jsx("span",{title:"Total views",children:Wo(t.totalViews,"views")}),n.jsx("span",{title:"Weekly views",children:Wo(t.weeklyViews,"/wk")}),n.jsx("span",{title:"Weekly posts",children:Wo(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),n.jsxs("footer",{className:"cc-meta",children:[n.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),n.jsxs("span",{className:"cc-meta-right",children:["active ",Hh(t.lastActive),"d ago"]})]})]},t.id)}function ile({data:t}){return n.jsx("div",{className:"cc-table-wrap",children:n.jsxs("table",{className:"cc-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Lang"}),n.jsx("th",{children:"Subs"}),n.jsx("th",{children:"Total Views"}),n.jsx("th",{children:"Weekly Views"}),n.jsx("th",{children:"Weekly Posts"}),n.jsx("th",{children:"Active"})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"cc-table-name",children:[n.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),n.jsx("span",{children:e.name})]})}),n.jsx("td",{children:e.language.toUpperCase()}),n.jsx("td",{children:Wo(e.subscribers)}),n.jsx("td",{children:Wo(e.totalViews)}),n.jsx("td",{children:Wo(e.weeklyViews)}),n.jsx("td",{children:Wo(e.weeklyPosts,void 0,s=>`${s}`)}),n.jsxs("td",{children:[Hh(e.lastActive),"d"]})]},e.id))})]})})}function JA(){var Y,ce;const[t,e]=E.useState("static"),[s,r]=E.useState("cards"),[i,a]=E.useState("subs"),[l,d]=E.useState("desc"),[u,h]=E.useState("all"),[m,g]=E.useState("all"),[v,b]=E.useState(0),[_,N]=E.useState(365),[C,R]=E.useState(null),[D,A]=E.useState(""),[y,w]=E.useState(!1),[M,k]=E.useState(""),[S,T]=E.useState(null),{snapshot:F,error:I}=XA(),B=(Y=F==null?void 0:F.data)!=null&&Y.length?F.data:null,$=B!=null?B:sle,H=t==="static"?$:(ce=S!=null?S:B)!=null?ce:[],z=E.useMemo(()=>{const oe=new Set(H.map(me=>me.language));return Array.from(oe).sort()},[H]),W=E.useMemo(()=>H.filter(oe=>u==="all"?!0:oe.language===u).filter(oe=>m==="all"?!0:oe.platforms.some(me=>me.type===m)).filter(oe=>oe.subscribers>=v).filter(oe=>Hh(oe.lastActive)<=_).slice().sort(nle(i,l)),[H,u,m,v,_,i,l]);E.useEffect(()=>{if(!C&&W.length){const oe=W[Math.floor(Math.random()*W.length)];R(oe.id)}},[W,C]);const K=E.useMemo(()=>W.find(oe=>oe.id===C)||null,[W,C]),q=E.useMemo(()=>W.slice().sort((oe,me)=>me.weeklyViews-oe.weeklyViews).slice(0,5),[W]),se=E.useMemo(()=>W.slice().sort((oe,me)=>me.weeklyPosts-oe.weeklyPosts).slice(0,5),[W]);async function re(){k(""),w(!0);try{const oe=await fetch(D,{headers:{Accept:"application/json"}});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const me=await oe.json(),_e=Array.isArray(me)?me:Array.isArray(me==null?void 0:me.data)?me.data:[];T(_e)}catch(oe){k((oe==null?void 0:oe.message)||"Fetch failed")}finally{w(!1)}}const U=W.length===0;return n.jsxs("section",{className:"cc-wrap",children:[n.jsxs("div",{className:"cc-heading",children:[n.jsx("h1",{children:"Content Creator Hub"}),n.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),F&&n.jsxs("p",{className:"cc-sync",children:[n.jsxs("span",{children:["Live stats synced ",new Date(F.generatedAt).toLocaleString()]}),n.jsxs("span",{children:[F.data.length," profiles"]})]}),I&&n.jsx("p",{className:"cc-sync-error",children:I})]}),n.jsxs("div",{className:"cc-toolbar",children:[n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Data"}),n.jsxs("select",{value:t,onChange:oe=>e(oe.target.value),children:[n.jsx("option",{value:"static",children:"Static"}),n.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"View"}),n.jsxs("select",{value:s,onChange:oe=>r(oe.target.value),children:[n.jsx("option",{value:"cards",children:"Cards"}),n.jsx("option",{value:"table",children:"Table"}),n.jsx("option",{value:"json",children:"JSON"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Sort by"}),n.jsxs("select",{value:i,onChange:oe=>a(oe.target.value),children:[n.jsx("option",{value:"subs",children:"Subs"}),n.jsx("option",{value:"views",children:"Views"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"language",children:"Language"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Dir"}),n.jsxs("select",{value:l,onChange:oe=>d(oe.target.value),children:[n.jsx("option",{value:"desc",children:"Desc"}),n.jsx("option",{value:"asc",children:"Asc"})]})]})]}),n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Language"}),n.jsxs("select",{value:u,onChange:oe=>h(oe.target.value),children:[n.jsx("option",{value:"all",children:"All"}),z.map(oe=>n.jsx("option",{value:oe,children:oe.toUpperCase()},oe))]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Platform"}),n.jsxs("select",{value:m,onChange:oe=>g(oe.target.value),children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"YouTube",children:"YouTube"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"TikTok",children:"TikTok"}),n.jsx("option",{value:"Discord",children:"Discord"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Min subs"}),n.jsx("input",{type:"number",min:0,value:v,onChange:oe=>b(Number(oe.target.value||0)),placeholder:"0"})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Active within"}),n.jsxs("select",{value:_,onChange:oe=>N(Number(oe.target.value)),children:[n.jsx("option",{value:7,children:"7 days"}),n.jsx("option",{value:30,children:"30 days"}),n.jsx("option",{value:90,children:"90 days"}),n.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&n.jsxs("div",{className:"cc-api",children:[n.jsxs("div",{className:"cc-api-ctrls",children:[n.jsxs("label",{className:"cc-field cc-field-grow",children:[n.jsx("span",{children:"API URL"}),n.jsx("input",{type:"url",value:D,onChange:oe=>A(oe.target.value),placeholder:"https://api.example.com/creators"})]}),n.jsx("button",{className:"cc-btn",onClick:re,disabled:!D||y,children:y?"Loading":"Fetch"})]}),M&&n.jsx("div",{className:"cc-api-error",children:M}),n.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),K&&n.jsxs("div",{className:"cc-spotlight",children:[n.jsxs("div",{className:"cc-spot-head",children:[n.jsx("h2",{children:"Random CC Spotlight"}),n.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!W.length)return;const oe=W[Math.floor(Math.random()*W.length)];R(oe.id)},children:"Shuffle"})]}),n.jsx(Tk,{c:K})]}),n.jsxs("div",{className:"cc-main",children:[n.jsxs("div",{className:"cc-main-left",children:[U&&n.jsxs("div",{className:"cc-empty",children:[n.jsx("h3",{children:"No creators match the filters"}),n.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!U&&s==="cards"&&n.jsx("div",{className:"cc-grid",children:W.map(oe=>n.jsx(Tk,{c:oe},oe.id))}),!U&&s==="table"&&n.jsx(ile,{data:W}),s==="json"&&n.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(W,null,2)})]}),n.jsxs("aside",{className:"cc-main-right",children:[n.jsxs("div",{className:"cc-side",children:[n.jsx("h3",{children:"Weekly Toplists"}),n.jsxs("div",{className:"cc-toplist",children:[n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Views"}),n.jsx("ol",{children:q.map(oe=>n.jsxs("li",{children:[n.jsx("span",{children:oe.name}),n.jsx("span",{className:"cc-top-val",children:YA(oe.weeklyViews)})]},oe.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Posts"}),n.jsx("ol",{children:se.map(oe=>n.jsxs("li",{children:[n.jsx("span",{children:oe.name}),n.jsx("span",{className:"cc-top-val",children:oe.weeklyPosts})]},oe.id))})]})]})]}),n.jsxs("div",{className:"cc-side cc-legal",children:[n.jsx("h3",{children:"Legal & Disclaimer"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Only public data; no embedding without permission."}),n.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),n.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function ZA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Scans"}),n.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function eI(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Predictions"}),n.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function tI(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  News"}),n.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function sI(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Feedback"}),n.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const ale=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],Vv=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],ole={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},lle=t=>ole[t],cle=(t,e=64)=>{var i;const s=lle(t),r=lc(s);return r&&(i=Rr(r,e))!=null?i:null},dle="_recordsPage_kdw96_1",ule="_navArea_kdw96_15",hle="_tabList_kdw96_27",mle="_tabButton_kdw96_55",ple="_tabButtonActive_kdw96_101",fle="_sectionContent_kdw96_115",gle="_placeholderPanel_kdw96_127",xle="_placeholderTitle_kdw96_143",yle="_placeholderText_kdw96_157",vle="_milestoneSection_kdw96_171",ble="_sectionHeader_kdw96_183",_le="_filterBar_kdw96_197",wle="_filterButtons_kdw96_231",jle="_filterButton_kdw96_231",Sle="_filterButtonActive_kdw96_295",Nle="_filterSelectWrapper_kdw96_309",kle="_filterLabel_kdw96_321",Cle="_filterSelect_kdw96_309",Tle="_emptyFilterMessage_kdw96_355",Ele="_currentSection_kdw96_369",Ale="_currentGrid_kdw96_381",Ile="_currentCard_kdw96_393",Rle="_categoryLabel_kdw96_419",Ple="_recordTitle_kdw96_433",Lle="_currentDetails_kdw96_445",Dle="_notes_kdw96_457",Mle="_infoPanel_kdw96_469",Fle="_infoCard_kdw96_481",Ble="_disclaimerCard_kdw96_483",$le="_infoHeader_kdw96_525",Ole="_infoAuthor_kdw96_539",Vle="_authorName_kdw96_557",Ule="_authorBadge_kdw96_565",zle="_infoAuthorIcon_kdw96_591",Hle="_infoDate_kdw96_623",Gle="_infoBody_kdw96_633",Wle="_infoTitle_kdw96_645",qle="_infoLink_kdw96_665",Kle="_milestoneGrid_kdw96_719",Qle="_milestoneCard_kdw96_731",Xle="_milestoneCategory_kdw96_757",Yle="_milestoneTitle_kdw96_771",Jle="_milestoneDetails_kdw96_785",Zle="_detailRow_kdw96_797",ece="_detailLabel_kdw96_809",tce="_detailValue_kdw96_823",sce="_sourceLink_kdw96_833",nce="_emptyState_kdw96_855",Qe={recordsPage:dle,navArea:ule,tabList:hle,tabButton:mle,tabButtonActive:ple,sectionContent:fle,placeholderPanel:gle,placeholderTitle:xle,placeholderText:yle,milestoneSection:vle,sectionHeader:ble,filterBar:_le,filterButtons:wle,filterButton:jle,filterButtonActive:Sle,filterSelectWrapper:Nle,filterLabel:kle,filterSelect:Cle,emptyFilterMessage:Tle,currentSection:Ele,currentGrid:Ale,currentCard:Ile,categoryLabel:Rle,recordTitle:Ple,currentDetails:Lle,notes:Dle,infoPanel:Mle,infoCard:Fle,disclaimerCard:Ble,infoHeader:$le,infoAuthor:Ole,authorName:Vle,authorBadge:Ule,infoAuthorIcon:zle,infoDate:Hle,infoBody:Gle,infoTitle:Wle,infoLink:qle,milestoneGrid:Kle,milestoneCard:Qle,milestoneCategory:Xle,milestoneTitle:Yle,milestoneDetails:Jle,detailRow:Zle,detailLabel:ece,detailValue:tce,sourceLink:sce,emptyState:nce},rce=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],ice={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},ace=({title:t,description:e,hint:s})=>n.jsxs("article",{className:Qe.placeholderPanel,children:[n.jsx("h2",{className:Qe.placeholderTitle,children:t}),n.jsx("p",{className:Qe.placeholderText,children:e}),s&&n.jsx("p",{className:Qe.emptyState,children:s})]}),oce=()=>{const[t,e]=E.useState("all"),s=E.useMemo(()=>{const a=new Set,l=[];for(const d of Vv)a.has(d.category)||(a.add(d.category),l.push(d.category));return["all",...l]},[]),r=t==="all"?Vv:Vv.filter(a=>a.category===t),i=a=>{e(a)};return n.jsxs("section",{className:Qe.milestoneSection,"aria-label":"Records milestones",children:[n.jsxs("div",{className:Qe.sectionHeader,children:[n.jsx("p",{children:"Milestones"}),n.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),n.jsxs("div",{className:Qe.filterBar,children:[n.jsx("div",{className:Qe.filterButtons,children:s.map(a=>n.jsx("button",{type:"button",className:[Qe.filterButton,t===a&&Qe.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),n.jsxs("label",{className:Qe.filterSelectWrapper,children:[n.jsx("span",{className:Qe.filterLabel,children:"Category"}),n.jsx("select",{value:t,onChange:a=>i(a.target.value),className:Qe.filterSelect,children:s.map(a=>n.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?n.jsx("p",{className:Qe.emptyFilterMessage,children:"No milestones fall into this category yet."}):n.jsx("div",{className:Qe.milestoneGrid,children:r.map(a=>n.jsxs("article",{className:Qe.milestoneCard,children:[n.jsx("span",{className:Qe.milestoneCategory,children:a.category}),n.jsx("h3",{className:Qe.milestoneTitle,children:a.achievement}),n.jsxs("div",{className:Qe.milestoneDetails,children:[n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Name"}),n.jsx("span",{className:Qe.detailValue,children:a.name})]}),n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Server"}),n.jsx("span",{className:Qe.detailValue,children:a.server})]}),n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Date"}),n.jsx("span",{className:Qe.detailValue,children:a.date})]}),a.notes&&n.jsx("p",{className:Qe.notes,children:a.notes}),a.source&&n.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:Qe.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},lce=()=>n.jsxs("section",{className:Qe.currentSection,"aria-label":"Current community records",children:[n.jsxs("div",{className:Qe.sectionHeader,children:[n.jsx("p",{children:"Current Records"}),n.jsx("h2",{children:"The latest verified achievements"})]}),n.jsx("div",{className:Qe.currentGrid,children:ale.map((t,e)=>n.jsxs("article",{className:Qe.currentCard,children:[n.jsx("span",{className:Qe.categoryLabel,children:t.category}),n.jsx("h3",{className:Qe.recordTitle,children:t.record}),n.jsxs("div",{className:Qe.currentDetails,children:[n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Class"}),n.jsx("span",{className:Qe.detailValue,children:t.classType})]}),n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Player"}),n.jsx("span",{className:Qe.detailValue,children:t.playerName})]}),n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Server"}),n.jsx("span",{className:Qe.detailValue,children:t.server})]}),n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Days"}),n.jsx("span",{className:Qe.detailValue,children:t.days})]}),t.release&&n.jsxs("div",{className:Qe.detailRow,children:[n.jsx("span",{className:Qe.detailLabel,children:"Release"}),n.jsx("span",{className:Qe.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&n.jsxs("p",{className:Qe.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&n.jsx("p",{className:Qe.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),Gu={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function nI(){const[t,e]=E.useState("current"),s=cle("infoCard",32),r=()=>{if(t==="current")return n.jsx(lce,{});if(t==="milestones")return n.jsx(oce,{});const i=ice[t];return n.jsx(ace,{title:i.title,description:i.description,hint:i.hint})};return n.jsxs("section",{className:Qe.recordsPage,children:[n.jsx(WA,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),n.jsxs("div",{className:Qe.infoPanel,children:[n.jsxs("div",{className:Qe.infoCard,children:[n.jsxs("div",{className:Qe.infoHeader,children:[n.jsxs("div",{className:Qe.infoAuthor,children:[s?n.jsx("img",{src:s,alt:"Community Data",className:Qe.infoAuthorIcon}):null,n.jsx("span",{className:Qe.authorName,children:"S&F Tavern Info"}),n.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:Qe.authorBadge,children:"Discord"})]}),n.jsx("span",{className:Qe.infoDate,children:"11.12.2020 14:08"})]}),n.jsxs("div",{className:Qe.infoBody,children:[n.jsx("h3",{className:Qe.infoTitle,children:Gu.title}),Gu.paragraphs.map(i=>n.jsx("p",{children:i},i))]}),n.jsxs("div",{className:Qe.infoLink,children:[n.jsx("span",{children:Gu.linkLabel}),n.jsx("a",{href:Gu.linkUrl,target:"_blank",rel:"noreferrer",children:Gu.linkUrl})]})]}),n.jsxs("div",{className:Qe.disclaimerCard,children:[n.jsx("h3",{className:Qe.infoTitle,children:"Disclaimer"}),n.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),n.jsx("div",{className:Qe.navArea,children:n.jsx("nav",{className:Qe.tabList,"aria-label":"Records navigation",children:rce.map(i=>n.jsx("button",{type:"button",className:`${Qe.tabButton} ${t===i.key?Qe.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),n.jsx("div",{className:Qe.sectionContent,children:r()})]})}const cce={creators:JA,scans:ZA,predictions:eI,news:tI,records:nI,feedback:sI};function dce(){const[t]=al(),e=t.get("tab")||"",s=cce[e];return n.jsxs(Bt,{children:[n.jsx("div",{className:sd.topWrap,children:n.jsx(Ooe,{logoSrc:qoe})}),n.jsx("div",{className:sd.divider}),n.jsx("div",{className:sd.contentArea,children:s?n.jsx(s,{}):n.jsxs("div",{className:sd.placeholder,children:[n.jsx("h2",{className:sd.placeholderTitle,children:"Community"}),n.jsx("p",{className:sd.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function uce(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsxs(hs,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),n.jsxs(hs,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),n.jsxs(hs,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function hce(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Letzter Scan"}),n.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function mce(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Archiv"}),n.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function pce(){return n.jsx(Bt,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:n.jsx(fce,{}),right:n.jsx(gce,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[n.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n.jsx(hs,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),n.jsx(hs,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(nf,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),n.jsx(nf,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),n.jsx(nf,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),n.jsx(nf,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function fce(){return n.jsxs("nav",{className:"space-y-2 text-sm",children:[n.jsx(Wu,{to:"/guild-hub/planner",children:"Planner"}),n.jsx(Wu,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),n.jsx(Wu,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),n.jsx(Wu,{to:"/guild-hub/waitlist",children:"Waitlist"}),n.jsx(Wu,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function gce(){return n.jsxs("aside",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function nf({to:t,title:e,desc:s}){return n.jsxs(hs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function Wu({to:t,children:e}){return n.jsx(As,{to:t,className:({isActive:s})=>`block rounded-lg border px-3 py-2 no-underline ${s?"font-semibold":""}`,style:({isActive:s})=>({borderColor:s?"#2B6DE0":"#2B4C73",background:s?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:s?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const xce="_page_1mlmy_1",yce="_header_1mlmy_13",vce="_headerStack_1mlmy_25",bce="_kicker_1mlmy_37",_ce="_title_1mlmy_53",wce="_headerActions_1mlmy_65",jce="_primaryAction_1mlmy_77",Sce="_secondaryAction_1mlmy_79",Nce="_infoStrip_1mlmy_127",kce="_infoBlock_1mlmy_147",Cce="_infoLabel_1mlmy_161",Tce="_freshnessWrapper_1mlmy_181",Ece="_freshnessBadge_1mlmy_189",Ace="_badge_f0_1mlmy_213",Ice="_badge_f1_1mlmy_215",Rce="_badge_f2_1mlmy_217",Pce="_badge_f3_1mlmy_219",Lce="_badge_f4_1mlmy_221",Dce="_badge_f5_1mlmy_223",Mce="_badge_f6_1mlmy_225",Fce="_badge_f7_1mlmy_227",Bce="_badge_unknown_1mlmy_229",$ce="_popover_1mlmy_233",Oce="_popoverLabel_1mlmy_265",Vce="_filterToolbar_1mlmy_275",Uce="_filterSheetButton_1mlmy_285",zce="_inlineFilters_1mlmy_303",Hce="_searchInput_1mlmy_315",Gce="_select_1mlmy_317",Wce="_ownerGroup_1mlmy_335",qce="_ownerChip_1mlmy_347",Kce="_ownerChipActive_1mlmy_365",Qce="_sortGroup_1mlmy_375",Xce="_sortLabel_1mlmy_387",Yce="_directionButton_1mlmy_397",Jce="_listBody_1mlmy_415",Zce="_tableWrapper_1mlmy_427",ede="_table_1mlmy_427",tde="_stickyColumn_1mlmy_481",sde="_rowTitleButton_1mlmy_495",nde="_tableStatus_1mlmy_513",rde="_cardList_1mlmy_533",ide="_card_1mlmy_533",ade="_cardHeader_1mlmy_565",ode="_cardTitle_1mlmy_577",lde="_cardMeta_1mlmy_595",cde="_cardDescription_1mlmy_611",dde="_cardFooter_1mlmy_623",ude="_cardLabel_1mlmy_639",hde="_scanBadge_1mlmy_649",mde="_emptyState_1mlmy_665",pde="_sheetBackdrop_1mlmy_681",fde="_sheet_1mlmy_681",gde="_sheetHandle_1mlmy_721",xde="_sheetBody_1mlmy_739",yde="_sheetLabel_1mlmy_755",vde="_sheetActions_1mlmy_793",bde="_overlay_1mlmy_807",_de="_panel_1mlmy_825",wde="_modal_1mlmy_851",jde="_drawer_1mlmy_861",Sde="_panelHeader_1mlmy_869",Nde="_panelControls_1mlmy_883",kde="_panelDescription_1mlmy_913",Cde="_detailGrid_1mlmy_925",Tde="_panelFooter_1mlmy_957",Ede="_formOverlay_1mlmy_969",Ade="_formPanel_1mlmy_991",Ide="_formGrid_1mlmy_1017",Rde="_menuWrapper_1mlmy_1029",Pde="_dotsButton_1mlmy_1037",Lde="_menu_1mlmy_1029",Dde="_pagination_1mlmy_1109",Ce={page:xce,header:yce,headerStack:vce,kicker:bce,title:_ce,headerActions:wce,primaryAction:jce,secondaryAction:Sce,infoStrip:Nce,infoBlock:kce,infoLabel:Cce,freshnessWrapper:Tce,freshnessBadge:Ece,badge_f0:Ace,badge_f1:Ice,badge_f2:Rce,badge_f3:Pce,badge_f4:Lce,badge_f5:Dce,badge_f6:Mce,badge_f7:Fce,badge_unknown:Bce,popover:$ce,popoverLabel:Oce,filterToolbar:Vce,filterSheetButton:Uce,inlineFilters:zce,searchInput:Hce,select:Gce,ownerGroup:Wce,ownerChip:qce,ownerChipActive:Kce,sortGroup:Qce,sortLabel:Xce,directionButton:Yce,listBody:Jce,tableWrapper:Zce,table:ede,stickyColumn:tde,rowTitleButton:sde,tableStatus:nde,cardList:rde,card:ide,cardHeader:ade,cardTitle:ode,cardMeta:lde,cardDescription:cde,cardFooter:dde,cardLabel:ude,scanBadge:hde,emptyState:mde,sheetBackdrop:pde,sheet:fde,sheetHandle:gde,sheetBody:xde,sheetLabel:yde,sheetActions:vde,overlay:bde,panel:_de,modal:wde,drawer:jde,panelHeader:Sde,panelControls:Nde,panelDescription:kde,detailGrid:Cde,panelFooter:Tde,formOverlay:Ede,formPanel:Ade,formGrid:Ide,menuWrapper:Rde,dotsButton:Pde,menu:Lde,pagination:Dde};function Mde(){var re;const[t,e]=X.useState(SY),[s,r]=X.useState(Iv),[i,a]=X.useState(Iv),l=$d(s.q,300),d=X.useMemo(()=>{const U=NY(t,s,l);return kY(U,s.sort,s.dir)},[t,s,l]),u=X.useMemo(()=>CY(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),m=X.useMemo(()=>Array.from(new Set(t.map(U=>U.owner))),[t]),g=Od("(min-width: 768px)"),v=Od("(min-width: 1024px)"),[b,_]=X.useState(!1),[N,C]=X.useState(null),R=(re=t.find(U=>U.id===N))!=null?re:null,D=X.useRef(null);Vd(D,!!R&&!v);const[A,y]=X.useState(null),[w,M]=X.useState(!1),k=X.useRef(null);Vd(k,w);const S=X.useMemo(()=>TY(t),[t]),T=X.useMemo(()=>S?Uh(S.nextUpdateAt,Date.now()):"",[S]),F=g,I=v,B=n.jsxs("div",{className:Ce.headerActions,children:[n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:()=>{y(null),M(!0)},children:"Neuer Eintrag"}),!g&&n.jsx("button",{type:"button",className:Ce.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>_(!0),children:"Filter"})]}),$=U=>{const Y=ek(U);r(Y),a(Y)},H=(U,Y)=>{const ce=ek({...s,[U]:Y,page:U==="page"||U==="pageSize"?Y:1});$(ce)},z=()=>{$(i),_(!1)},W=()=>{$(Iv),_(!1)},K=(U,Y=!1)=>{if(Y)a(ce=>{const me=ce.owner.includes(U)?ce.owner.filter(_e=>_e!==U):[...ce.owner,U];return{...ce,owner:me}});else{const oe=s.owner.includes(U)?s.owner.filter(me=>me!==U):[...s.owner,U];H("owner",oe)}},q=(U,Y)=>{e(ce=>ce.map(oe=>oe.id===U?{...oe,status:Y,updatedAt:new Date().toISOString()}:oe))},se=U=>{e(Y=>Y.some(oe=>oe.id===U.id)?Y.map(oe=>oe.id===U.id?U:oe):[U,...Y]),M(!1)};return n.jsxs(Bt,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[n.jsxs("div",{className:Ce.page,children:[n.jsxs("header",{className:Ce.header,children:[n.jsxs("div",{className:Ce.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.kicker,children:"Deployment"}),n.jsx("h1",{className:Ce.title,children:"Planer"})]}),B]}),n.jsxs("div",{className:Ce.infoStrip,children:[n.jsxs("div",{className:Ce.infoBlock,children:[n.jsx("span",{className:Ce.infoLabel,children:"Offen"}),n.jsx("strong",{children:d.filter(U=>U.status==="open").length})]}),n.jsxs("div",{className:Ce.infoBlock,children:[n.jsx("span",{className:Ce.infoLabel,children:"In Arbeit"}),n.jsx("strong",{children:d.filter(U=>U.status==="in_progress").length})]}),S&&n.jsx(Fde,{code:S.freshness,label:u_[S.freshness],updatedAt:S.lastScanAt,nextUpdateAt:S.nextUpdateAt,countdown:T})]})]}),n.jsx("section",{className:Ce.filterToolbar,children:g?n.jsx(Bde,{filters:s,owners:m,onChange:H,onOwnerToggle:U=>K(U,!1)}):n.jsx("button",{type:"button",className:Ce.filterSheetButton,onClick:()=>_(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),n.jsx("section",{className:Ce.listBody,children:F?n.jsx($de,{items:u,sort:s.sort,dir:s.dir,onSortChange:U=>{const Y=s.sort===U&&s.dir==="asc"?"desc":"asc";H("sort",U),H("dir",Y)},onSelect:U=>C(U.id),onStatusChange:q,onEdit:U=>{y(U),M(!0)}}):n.jsx(Ode,{items:u,onSelect:U=>C(U.id),onStatusChange:q,onEdit:U=>{y(U),M(!0)}})}),n.jsx(Ude,{page:s.page,totalPages:h,onChange:U=>H("page",U)})]}),b&&n.jsx(Vde,{filters:i,owners:m,onChange:a,onOwnerToggle:U=>K(U,!0),onClose:()=>_(!1),onApply:z,onReset:W}),R&&n.jsx(iI,{ref:D,item:R,mode:I?"drawer":"modal",onClose:()=>C(null),onEdit:()=>{y(R),M(!0),C(null)},onStatusChange:q}),w&&n.jsx(aI,{ref:k,owners:m.length?m:OA,item:A,onClose:()=>M(!1),onSubmit:se})]})}function Fde({code:t,label:e,updatedAt:s,nextUpdateAt:r,countdown:i}){var d;const[a,l]=X.useState(!1);return n.jsxs("div",{className:Ce.freshnessWrapper,children:[n.jsx("button",{type:"button",className:`${Ce.freshnessBadge} ${(d=Ce[`badge_${t}`])!=null?d:""}`,"aria-label":`Freshness ${e}`,onClick:()=>l(u=>!u),children:e}),a&&n.jsxs("div",{className:Ce.popover,role:"dialog","aria-label":"Freshness Details",children:[n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Zuletzt gescannt"}),n.jsx("strong",{children:ma(s)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Naechster Scan"}),n.jsx("strong",{children:ma(r)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Countdown"}),n.jsx("strong",{children:i})]})]})]})}function Bde({filters:t,owners:e,onChange:s,onOwnerToggle:r}){return n.jsxs("div",{className:Ce.inlineFilters,children:[n.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:Ce.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>s("q",i.target.value)}),n.jsxs("select",{className:Ce.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>s("type",i.target.value),children:[n.jsx("option",{value:"all",children:"Typ (alle)"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]}),n.jsxs("select",{className:Ce.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>s("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("select",{className:Ce.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>s("range",i.target.value),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]}),n.jsx("div",{className:Ce.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return n.jsx("button",{type:"button",className:`${Ce.ownerChip} ${a?Ce.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Ce.sortGroup,children:[n.jsx("label",{htmlFor:"planner-sort",className:Ce.sortLabel,children:"Sortieren"}),n.jsxs("select",{id:"planner-sort",name:"plannerSort",className:Ce.select,value:t.sort,onChange:i=>s("sort",i.target.value),children:[n.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),n.jsx("option",{value:"priority",children:"Prioritaet"}),n.jsx("option",{value:"title",children:"Titel"})]}),n.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:Ce.directionButton,onClick:()=>s("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function $de({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:l}){const d=u=>e===u?s==="asc"?" ":" ":"";return t.length===0?n.jsx(rI,{}):n.jsx("div",{className:Ce.tableWrapper,children:n.jsxs("table",{className:Ce.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Ce.stickyColumn,onClick:()=>r("title"),children:["Titel",d("title")]}),n.jsx("th",{children:"Typ"}),n.jsx("th",{children:"Owner"}),n.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",d("dueAt")]}),n.jsx("th",{children:"Status"}),n.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",d("updatedAt")]}),n.jsx("th",{})]})}),n.jsx("tbody",{children:t.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:Ce.stickyColumn,children:n.jsx("button",{type:"button",className:Ce.rowTitleButton,onClick:()=>i(u),children:u.title})}),n.jsx("td",{children:d_[u.type]}),n.jsx("td",{children:u.owner}),n.jsx("td",{children:ma(u.dueAt)}),n.jsx("td",{children:n.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:Ce.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),n.jsx("td",{children:fm(u.updatedAt)}),n.jsx("td",{children:n.jsx(oI,{onEdit:()=>l(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function Ode({items:t,onSelect:e,onStatusChange:s,onEdit:r}){return t.length===0?n.jsx(rI,{}):n.jsx("div",{className:Ce.cardList,children:t.map(i=>n.jsxs("article",{className:Ce.card,children:[n.jsxs("div",{className:Ce.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Ce.cardTitle,onClick:()=>e(i),children:i.title}),n.jsxs("div",{className:Ce.cardMeta,children:[n.jsx("span",{children:d_[i.type]}),n.jsx("span",{children:wY[i.status]}),n.jsxs("span",{children:["Due ",ma(i.dueAt)]})]})]}),n.jsx(oI,{onEdit:()=>r(i),onComplete:()=>s(i.id,"done")})]}),n.jsx("p",{className:Ce.cardDescription,children:i.description}),n.jsxs("div",{className:Ce.cardFooter,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ce.cardLabel,children:"Owner"}),n.jsx("strong",{children:i.owner})]}),n.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:Ce.tableStatus,value:i.status,onChange:a=>s(i.id,a.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("span",{className:Ce.scanBadge,children:["Letzter Scan ",fm(i.lastScanAt)]})]})]},i.id))})}function rI(){return n.jsx("div",{className:Ce.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function Vde({filters:t,owners:e,onChange:s,onOwnerToggle:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Ce.sheetBackdrop,role:"presentation",onClick:i,children:n.jsxs("div",{className:Ce.sheet,role:"dialog","aria-label":"Filter",onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Ce.sheetHandle}),n.jsxs("div",{className:Ce.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Ce.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:d=>s(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Typ",n.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:d=>s(u=>({...u,type:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Status",n.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:d=>s(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Zeitraum",n.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:d=>s(u=>({...u,range:d.target.value})),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]})]}),n.jsxs("div",{className:Ce.sheetLabel,children:["Owner",n.jsx("div",{className:Ce.ownerGroup,children:e.map(d=>{const u=t.owner.includes(d);return n.jsx("button",{type:"button",className:`${Ce.ownerChip} ${u?Ce.ownerChipActive:""}`,onClick:()=>r(d),children:d},d)})})]})]}),n.jsxs("div",{className:Ce.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const iI=X.forwardRef(({item:t,mode:e,onClose:s,onEdit:r,onStatusChange:i},a)=>n.jsx("div",{className:Ce.overlay,children:n.jsxs("div",{ref:a,className:`${Ce.panel} ${e==="drawer"?Ce.drawer:Ce.modal}`,children:[n.jsxs("header",{className:Ce.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.cardLabel,children:d_[t.type]}),n.jsx("h2",{children:t.title})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("div",{className:Ce.panelControls,children:[n.jsxs("label",{children:["Status",n.jsxs("select",{value:t.status,onChange:l=>i(t.id,l.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{disabled:!0,value:t.priority,children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsx("p",{className:Ce.panelDescription,children:t.description}),n.jsxs("dl",{className:Ce.detailGrid,children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Owner"}),n.jsx("dd",{children:t.owner})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Assignees"}),n.jsx("dd",{children:t.assignees.join(", ")})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Termin"}),n.jsx("dd",{children:ma(t.dueAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt aktualisiert"}),n.jsx("dd",{children:fm(t.updatedAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Erstellt"}),n.jsx("dd",{children:ma(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Tags"}),n.jsx("dd",{children:t.tags.join(", ")})]})]}),n.jsxs("div",{className:Ce.panelFooter,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));iI.displayName="DetailPanel";const aI=X.forwardRef(({owners:t,item:e,onClose:s,onSubmit:r},i)=>{const[a,l]=X.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:OA[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});X.useEffect(()=>{e&&l(e)},[JSON.stringify(e)]);const d=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{l(m=>{const v=m.tags.includes(h)?m.tags.filter(b=>b!==h):[...m.tags,h];return{...m,tags:v}})};return n.jsx("div",{className:Ce.formOverlay,children:n.jsxs("form",{ref:i,className:Ce.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Ce.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),n.jsx("h2",{children:e?e.title:"Planner Task"})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Titel",n.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>l(m=>({...m,title:h.target.value})),required:!0})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Beschreibung",n.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>l(m=>({...m,description:h.target.value})),rows:4})]}),n.jsxs("div",{className:Ce.formGrid,children:[n.jsxs("label",{children:["Typ",n.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>l(m=>({...m,type:h.target.value})),children:[n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>l(m=>({...m,status:h.target.value})),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Owner",n.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>l(m=>({...m,owner:h.target.value})),children:t.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>l(m=>({...m,priority:h.target.value})),children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Termin",n.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>l(m=>({...m,dueAt:new Date(h.target.value).toISOString()}))})]}),n.jsxs("div",{className:Ce.sheetLabel,children:["Tags",n.jsx("div",{className:Ce.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const m=a.tags.includes(h);return n.jsx("button",{type:"button",className:`${Ce.ownerChip} ${m?Ce.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),n.jsxs("footer",{className:Ce.panelFooter,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Ce.primaryAction,children:"Speichern"})]})]})})});aI.displayName="PlannerFormOverlay";function oI({onEdit:t,onComplete:e}){const[s,r]=X.useState(!1),i=X.useRef(null);return X.useEffect(()=>{if(!s)return;const a=l=>{var d;(d=i.current)!=null&&d.contains(l.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[s]),n.jsxs("div",{className:Ce.menuWrapper,ref:i,children:[n.jsx("button",{type:"button",className:Ce.dotsButton,"aria-haspopup":"menu","aria-expanded":s,onClick:()=>r(a=>!a),children:"..."}),s&&n.jsxs("div",{className:Ce.menu,role:"menu",children:[n.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),n.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),n.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function Ude({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Ce.pagination,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const zde="_page_1cvuk_1",Hde="_header_1cvuk_13",Gde="_headerLeading_1cvuk_29",Wde="_backLink_1cvuk_41",qde="_headerStack_1cvuk_77",Kde="_kicker_1cvuk_89",Qde="_title_1cvuk_105",Xde="_subtitle_1cvuk_117",Yde="_headerActions_1cvuk_129",Jde="_plannerNotice_1cvuk_141",Zde="_noticeItem_1cvuk_163",eue="_noticeWarning_1cvuk_185",tue="_noticeDot_1cvuk_197",sue="_tabSection_1cvuk_213",nue="_tabBar_1cvuk_225",rue="_tabItem_1cvuk_239",iue="_tabItemActive_1cvuk_279",aue="_tabLabel_1cvuk_291",oue="_tabHelper_1cvuk_301",lue="_tabPanel_1cvuk_311",cue="_tabBadge_1cvuk_331",due="_primaryAction_1cvuk_1331",uue="_secondaryAction_1cvuk_1333",hue="_infoStrip_1cvuk_1383",mue="_infoBlock_1cvuk_1403",pue="_infoLabel_1cvuk_1415",fue="_infoHint_1cvuk_1441",gue="_stageGrid_1cvuk_1453",xue="_panel_1cvuk_1465",yue="_panelHeader_1cvuk_1487",vue="_panelKicker_1cvuk_1501",bue="_panelTitle_1cvuk_1517",_ue="_panelLead_1cvuk_1529",wue="_badge_1cvuk_1541",jue="_panelBody_1cvuk_1563",Sue="_placeholderGrid_1cvuk_1575",Nue="_placeholderCard_1cvuk_1587",kue="_placeholderTitle_1cvuk_1609",Cue="_placeholderText_1cvuk_1619",Tue="_helperSection_1cvuk_1631",Eue="_helperCard_1cvuk_1639",Aue="_helperKicker_1cvuk_1661",Iue="_helperTitle_1cvuk_1677",Rue="_helperText_1cvuk_1689",Pue="_helperActions_1cvuk_1701",mt={page:zde,header:Hde,headerLeading:Gde,backLink:Wde,headerStack:qde,kicker:Kde,title:Qde,subtitle:Xde,headerActions:Yde,plannerNotice:Jde,noticeItem:Zde,noticeWarning:eue,noticeDot:tue,tabSection:sue,tabBar:nue,tabItem:rue,tabItemActive:iue,tabLabel:aue,tabHelper:oue,tabPanel:lue,tabBadge:cue,primaryAction:due,secondaryAction:uue,infoStrip:hue,infoBlock:mue,infoLabel:pue,infoHint:fue,stageGrid:gue,panel:xue,panelHeader:yue,panelKicker:vue,panelTitle:bue,panelLead:_ue,badge:wue,panelBody:jue,placeholderGrid:Sue,placeholderCard:Nue,placeholderTitle:kue,placeholderText:Cue,helperSection:Tue,helperCard:Eue,helperKicker:Aue,helperTitle:Iue,helperText:Rue,helperActions:Pue},Lue="_setupGrid_rdp6l_1",Due="_setupLeft_rdp6l_13",Mue="_setupRight_rdp6l_15",Fue="_card_rdp6l_27",Bue="_cardHeader_rdp6l_49",$ue="_cardKicker_rdp6l_61",Oue="_cardTitle_rdp6l_77",Vue="_cardText_rdp6l_89",Uue="_toggleGroup_rdp6l_101",zue="_toggleButton_rdp6l_113",Hue="_toggleButtonActive_rdp6l_143",Gue="_modeHint_rdp6l_155",Wue="_formGrid_rdp6l_167",que="_formField_rdp6l_179",Kue="_formLabel_rdp6l_191",Que="_input_rdp6l_201",Xue="_suggestions_rdp6l_231",Yue="_suggestionBtn_rdp6l_257",Jue="_suggestionName_rdp6l_297",Zue="_suggestionMeta_rdp6l_305",ehe="_partnerActions_rdp6l_315",the="_primaryAction_rdp6l_329",she="_secondaryAction_rdp6l_331",nhe="_partnerList_rdp6l_381",rhe="_partnerRow_rdp6l_393",ihe="_partnerName_rdp6l_413",ahe="_partnerMeta_rdp6l_423",ohe="_removeButton_rdp6l_433",lhe="_emptyState_rdp6l_463",che="_previewBlock_rdp6l_473",dhe="_previewLabel_rdp6l_485",uhe="_previewValue_rdp6l_499",hhe="_previewCard_rdp6l_509",mhe="_previewTitle_rdp6l_523",phe="_previewMeta_rdp6l_533",fhe="_previewList_rdp6l_543",ghe="_previewItem_rdp6l_555",xhe="_setupInfo_rdp6l_569",yhe="_setupWarning_rdp6l_593",vhe="_setupInfoIcon_rdp6l_605",bhe="_setupInfoTitle_rdp6l_629",_he="_setupInfoText_rdp6l_639",Ue={setupGrid:Lue,setupLeft:Due,setupRight:Mue,card:Fue,cardHeader:Bue,cardKicker:$ue,cardTitle:Oue,cardText:Vue,toggleGroup:Uue,toggleButton:zue,toggleButtonActive:Hue,modeHint:Gue,formGrid:Wue,formField:que,formLabel:Kue,input:Que,suggestions:Xue,suggestionBtn:Yue,suggestionName:Jue,suggestionMeta:Zue,partnerActions:ehe,primaryAction:the,secondaryAction:she,partnerList:nhe,partnerRow:rhe,partnerName:ihe,partnerMeta:ahe,removeButton:ohe,emptyState:lhe,previewBlock:che,previewLabel:dhe,previewValue:uhe,previewCard:hhe,previewTitle:mhe,previewMeta:phe,previewList:fhe,previewItem:ghe,setupInfo:xhe,setupWarning:yhe,setupInfoIcon:vhe,setupInfoTitle:bhe,setupInfoText:_he};function whe({setupState:t,onChangeMode:e,onChangeBaseGuild:s,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var C,R,D,A,y,w,M,k,S,T;const[a,l]=X.useState(()=>{var F,I,B,$;return{name:(I=(F=t.baseGuild)==null?void 0:F.name)!=null?I:"",server:($=(B=t.baseGuild)==null?void 0:B.server)!=null?$:""}}),[d,u]=X.useState({id:void 0,name:"",server:""}),h=$d(a.name,250),m=$d(d.name,250),g=Ek(h,a.server||"all"),v=Ek(m,d.server||"all"),b=!!((R=(C=t.baseGuild)==null?void 0:C.name)!=null&&R.trim()&&((A=(D=t.baseGuild)==null?void 0:D.server)!=null&&A.trim())),_=t.partnerGuilds.length>0;X.useEffect(()=>{var I,B,$,H;const F={name:(B=(I=t.baseGuild)==null?void 0:I.name)!=null?B:"",server:(H=($=t.baseGuild)==null?void 0:$.server)!=null?H:""};(F.name!==a.name||F.server!==a.server)&&l(F)},[(y=t.baseGuild)==null?void 0:y.name,(w=t.baseGuild)==null?void 0:w.server]);const N=()=>{!d.name.trim()||!d.server.trim()||(r(d),u({id:void 0,name:"",server:""}))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Ue.setupGrid,children:[n.jsxs("div",{className:Ue.setupLeft,children:[n.jsxs("div",{className:Ue.card,children:[n.jsx("div",{className:Ue.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Ue.cardKicker,children:"Modus"}),n.jsx("h3",{className:Ue.cardTitle,children:"Scan-based oder manuell"}),n.jsx("p",{className:Ue.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),n.jsxs("div",{className:Ue.toggleGroup,role:"group","aria-label":"Setup Modus",children:[n.jsx("button",{type:"button",className:`${Ue.toggleButton} ${t.mode==="scan"?Ue.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),n.jsx("button",{type:"button",className:`${Ue.toggleButton} ${t.mode==="manual"?Ue.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),n.jsx("p",{className:Ue.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),n.jsxs("div",{className:Ue.card,children:[n.jsx("div",{className:Ue.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Ue.cardKicker,children:"Base Guild"}),n.jsx("h3",{className:Ue.cardTitle,children:"Stammdaten"}),n.jsx("p",{className:Ue.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),n.jsxs("div",{className:Ue.formGrid,children:[n.jsxs("label",{className:Ue.formField,children:[n.jsx("span",{className:Ue.formLabel,children:"Guild name"}),n.jsx("input",{type:"text",className:Ue.input,value:a.name,onChange:F=>{const I=F.target.value;l(B=>({...B,name:I}))},onBlur:()=>s({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&n.jsx("div",{className:Ue.suggestions,children:g.map(F=>n.jsxs("button",{type:"button",className:Ue.suggestionBtn,onClick:()=>{l({name:F.name,server:F.server}),s({id:F.id,name:F.name,server:F.server})},children:[n.jsx("span",{className:Ue.suggestionName,children:F.name}),n.jsx("span",{className:Ue.suggestionMeta,children:F.server})]},F.id))})]}),n.jsxs("label",{className:Ue.formField,children:[n.jsx("span",{className:Ue.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:Ue.input,value:a.server,onChange:F=>{const I=F.target.value;l(B=>({...B,server:I}))},onBlur:()=>s({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),n.jsxs("div",{className:Ue.card,children:[n.jsx("div",{className:Ue.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Ue.cardKicker,children:"Partner Guilds"}),n.jsx("h3",{className:Ue.cardTitle,children:"Partner hinzufuegen"}),n.jsx("p",{className:Ue.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),n.jsxs("div",{className:Ue.formGrid,children:[n.jsxs("label",{className:Ue.formField,children:[n.jsx("span",{className:Ue.formLabel,children:"Name"}),n.jsx("input",{type:"text",className:Ue.input,value:d.name,onChange:F=>u(I=>({...I,name:F.target.value})),placeholder:"z.B. Nova Alliance"}),v.length>0&&n.jsx("div",{className:Ue.suggestions,children:v.map(F=>n.jsxs("button",{type:"button",className:Ue.suggestionBtn,onClick:()=>u({id:F.id,name:F.name,server:F.server}),children:[n.jsx("span",{className:Ue.suggestionName,children:F.name}),n.jsx("span",{className:Ue.suggestionMeta,children:F.server})]},F.id))})]}),n.jsxs("label",{className:Ue.formField,children:[n.jsx("span",{className:Ue.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:Ue.input,value:d.server,onChange:F=>u(I=>({...I,server:F.target.value})),placeholder:"z.B. EU-02"})]})]}),n.jsxs("div",{className:Ue.partnerActions,children:[n.jsx("button",{type:"button",className:Ue.primaryAction,onClick:N,children:"Add partner guild"}),n.jsx("button",{type:"button",className:Ue.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),n.jsx("div",{className:Ue.partnerList,children:t.partnerGuilds.length===0?n.jsx("div",{className:Ue.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(F=>n.jsxs("div",{className:Ue.partnerRow,children:[n.jsxs("div",{children:[n.jsx("div",{className:Ue.partnerName,children:F.name||"Unbenannt"}),n.jsx("div",{className:Ue.partnerMeta,children:F.server||"Server n/a"})]}),n.jsx("button",{type:"button",className:Ue.removeButton,onClick:()=>i(F.id),children:"Remove"})]},F.id))})]})]}),n.jsx("aside",{className:Ue.setupRight,children:n.jsxs("div",{className:Ue.card,children:[n.jsx("div",{className:Ue.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Ue.cardKicker,children:"Preview"}),n.jsx("h3",{className:Ue.cardTitle,children:"Uebersicht"}),n.jsx("p",{className:Ue.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),n.jsxs("div",{className:Ue.previewBlock,children:[n.jsx("div",{className:Ue.previewLabel,children:"Modus"}),n.jsx("div",{className:Ue.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),n.jsxs("div",{className:Ue.previewBlock,children:[n.jsx("div",{className:Ue.previewLabel,children:"Base Guild"}),n.jsx("div",{className:Ue.previewCard,children:(M=t.baseGuild)!=null&&M.name||(k=t.baseGuild)!=null&&k.server?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Ue.previewTitle,children:((S=t.baseGuild)==null?void 0:S.name)||"Unbenannt"}),n.jsx("div",{className:Ue.previewMeta,children:((T=t.baseGuild)==null?void 0:T.server)||"Server n/a"})]}):n.jsx("div",{className:Ue.emptyState,children:"No base guild selected yet."})})]}),n.jsxs("div",{className:Ue.previewBlock,children:[n.jsx("div",{className:Ue.previewLabel,children:"Partner Guilds"}),n.jsx("div",{className:Ue.previewList,children:t.partnerGuilds.length===0?n.jsx("div",{className:Ue.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(F=>n.jsxs("div",{className:Ue.previewItem,children:[n.jsx("div",{className:Ue.previewTitle,children:F.name||"Unbenannt"}),n.jsx("div",{className:Ue.previewMeta,children:F.server||"Server n/a"})]},F.id))})]})]})})]}),b?_?null:n.jsxs("div",{className:Ue.setupInfo,role:"status","aria-live":"polite",children:[n.jsx("span",{className:Ue.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:Ue.setupInfoTitle,children:"Optional: add partner guilds."}),n.jsx("p",{className:Ue.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):n.jsxs("div",{className:`${Ue.setupInfo} ${Ue.setupWarning}`,role:"status","aria-live":"polite",children:[n.jsx("span",{className:Ue.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:Ue.setupInfoTitle,children:"No base guild selected yet."}),n.jsx("p",{className:Ue.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function Ek(t,e){const[s,r]=X.useState([]);return X.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function l(){try{const d=am(xt,"latest"),u=await mn(an(d,Wr("nameFold"),Ri(i),Pi(i+""),hn(12))),h=await mn(an(d,el("nameNgrams","array-contains",i),hn(12))),m=new Set,g=[],v=b=>{var w,M,k,S,T,F,I,B,$,H;const _=b.data(),C=(w=b.ref.parent)==null?void 0:w.parent;if(((M=C==null?void 0:C.parent)==null?void 0:M.id)!=="guilds")return;const D=(S=(k=C==null?void 0:C.id)!=null?k:_.guildIdentifier)!=null?S:b.id;if(!D||m.has(D))return;const A=(I=(F=_.server)!=null?F:(T=_.values)==null?void 0:T.Server)!=null?I:"Unknown";if(e!=="all"&&A!==e)return;const y=(H=($=_.name)!=null?$:(B=_.values)==null?void 0:B.Name)!=null?H:"Unbekannte Gilde";m.add(D),g.push({id:D,name:y,server:A})};u.forEach(v),h.forEach(v),a||(g.sort((b,_)=>b.name.localeCompare(_.name)),r(g))}catch(d){console.error("[FusionPlanner] guild search failed",d),a||r([])}}return l(),()=>{a=!0}},[t,e]),s}const jhe="_membersContainer_1ctw8_1",She="_scenarioSwitcher_1ctw8_13",Nhe="_scenarioButton_1ctw8_25",khe="_scenarioButtonActive_1ctw8_63",Che="_scenarioButtonName_1ctw8_75",The="_scenarioButtonDesc_1ctw8_83",Ehe="_setupInfo_1ctw8_93",Ahe="_setupInfoHeader_1ctw8_113",Ihe="_setupInfoTitle_1ctw8_127",Rhe="_setupInfoMode_1ctw8_139",Phe="_setupInfoRow_1ctw8_163",Lhe="_setupInfoLabel_1ctw8_175",Dhe="_setupInfoValue_1ctw8_189",Mhe="_setupInfoMeta_1ctw8_199",Fhe="_setupInfoPartners_1ctw8_209",Bhe="_setupInfoBadge_1ctw8_221",$he="_setupInfoEmpty_1ctw8_245",Ohe="_membersSummary_1ctw8_255",Vhe="_membersSummaryItem_1ctw8_275",Uhe="_membersSummaryLabel_1ctw8_287",zhe="_membersSummaryValue_1ctw8_301",Hhe="_maxSlotsInput_1ctw8_313",Ghe="_membersTable_1ctw8_331",Whe="_membersRow_1ctw8_349",qhe="_membersHead_1ctw8_375",Khe="_membersCell_1ctw8_385",Qhe="_memberName_1ctw8_395",Xhe="_memberBadge_1ctw8_403",Yhe="_assignmentCell_1ctw8_427",Jhe="_assignmentBadge_1ctw8_439",Zhe="_assignmentBadgeMain_1ctw8_463",eme="_assignmentBadgePartner_1ctw8_475",tme="_assignmentBadgeWatch_1ctw8_487",sme="_assignmentBadgeIdle_1ctw8_499",nme="_assignmentActions_1ctw8_507",rme="_assignmentButton_1ctw8_519",ime="_assignmentButtonActive_1ctw8_551",ame="_decisionGroup_1ctw8_563",ome="_decisionButton_1ctw8_575",lme="_decisionButtonActive_1ctw8_607",cme="_emptyWrap_1ctw8_619",dme="_emptyTitle_1ctw8_633",ume="_emptyText_1ctw8_641",hme="_contextMenuBackdrop_1ctw8_651",mme="_contextMenu_1ctw8_651",pme="_contextMenuItem_1ctw8_693",fme="_partnerPickerCell_1ctw8_725",gme="_partnerLabel_1ctw8_737",xme="_partnerSelect_1ctw8_751",Le={membersContainer:jhe,scenarioSwitcher:She,scenarioButton:Nhe,scenarioButtonActive:khe,scenarioButtonName:Che,scenarioButtonDesc:The,setupInfo:Ehe,setupInfoHeader:Ahe,setupInfoTitle:Ihe,setupInfoMode:Rhe,setupInfoRow:Phe,setupInfoLabel:Lhe,setupInfoValue:Dhe,setupInfoMeta:Mhe,setupInfoPartners:Fhe,setupInfoBadge:Bhe,setupInfoEmpty:$he,membersSummary:Ohe,membersSummaryItem:Vhe,membersSummaryLabel:Uhe,membersSummaryValue:zhe,maxSlotsInput:Hhe,membersTable:Ghe,membersRow:Whe,membersHead:qhe,membersCell:Khe,memberName:Qhe,memberBadge:Xhe,assignmentCell:Yhe,assignmentBadge:Jhe,assignmentBadgeMain:Zhe,assignmentBadgePartner:eme,assignmentBadgeWatch:tme,assignmentBadgeIdle:sme,assignmentActions:nme,assignmentButton:rme,assignmentButtonActive:ime,decisionGroup:ame,decisionButton:ome,decisionButtonActive:lme,emptyWrap:cme,emptyTitle:dme,emptyText:ume,contextMenuBackdrop:hme,contextMenu:mme,contextMenuItem:pme,partnerPickerCell:fme,partnerLabel:gme,partnerSelect:xme};function yme({members:t,scenario:e,onChangeScenarioDecision:s,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var k,S,T,F,I,B;const[l,d]=X.useState(null),u=X.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map(($,H)=>({id:$.id,label:$.name||`Partner ${H+1}`})):[{id:"partner-default",label:"Partner guild"}],m=X.useCallback(($,H)=>{d({memberId:$,...H})},[]),g=X.useCallback(()=>{d(null)},[]),v=X.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),b=X.useCallback(($,H,z)=>{v(),u.current=window.setTimeout(()=>{m($,{x:H,y:z})},550)},[v,m]);X.useEffect(()=>()=>v(),[v]);const _=X.useCallback(($,H,z)=>{if(H==="main")s($,"take"),r($,"main");else if(H==="partner"){const W=z?`partner:${z}`:"partner";s($,"take"),r($,W)}else s($,"bench"),r($,"none");g()},[g,s,r]),N=X.useCallback(($,H)=>{s($,H),H==="take"?r($,"main"):r($,"none")},[s,r]);if(!!!((S=(k=a.baseGuild)==null?void 0:k.name)!=null&&S.trim()&&((F=(T=a.baseGuild)==null?void 0:T.server)!=null&&F.trim())))return n.jsxs("div",{className:Le.emptyWrap,children:[n.jsx("h3",{className:Le.emptyTitle,children:"No base guild configured"}),n.jsx("p",{className:Le.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return n.jsxs("div",{className:Le.emptyWrap,children:[n.jsx("h3",{className:Le.emptyTitle,children:"Members & Slots"}),n.jsx("p",{className:Le.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return n.jsxs("div",{className:Le.emptyWrap,children:[n.jsx("h3",{className:Le.emptyTitle,children:"No members found"}),n.jsx("p",{className:Le.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const R=(I=e.decisions)!=null?I:{},D=(B=e.targetGuildAssignments)!=null?B:{},A=t.filter($=>R[$.id]==="take").length,y=t.filter($=>R[$.id]==="bench").length,w=t.filter($=>R[$.id]==="drop").length,M=Math.max(0,e.maxSlots-e.reservedSlots-A);return n.jsxs("div",{className:Le.membersContainer,children:[n.jsx("div",{className:Le.scenarioSwitcher,children:n.jsxs("div",{className:`${Le.scenarioButton} ${Le.scenarioButtonActive}`,children:[n.jsx("span",{className:Le.scenarioButtonName,children:e.name}),e.description?n.jsx("span",{className:Le.scenarioButtonDesc,children:e.description}):null]})}),n.jsxs("div",{className:Le.setupInfo,children:[n.jsxs("div",{className:Le.setupInfoHeader,children:[n.jsx("div",{className:Le.setupInfoTitle,children:"Planning for"}),n.jsx("span",{className:Le.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?n.jsxs("div",{className:Le.setupInfoRow,children:[n.jsx("span",{className:Le.setupInfoLabel,children:"Base Guild"}),n.jsxs("span",{className:Le.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:Le.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):n.jsx("div",{className:Le.setupInfoEmpty,children:"No base guild selected in Setup tab."}),n.jsxs("div",{className:Le.setupInfoRow,children:[n.jsx("span",{className:Le.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?n.jsx("div",{className:Le.setupInfoPartners,children:a.partnerGuilds.map($=>n.jsxs("span",{className:Le.setupInfoBadge,children:[$.name||"Unbenannt",n.jsxs("span",{className:Le.setupInfoMeta,children:[" (",$.server||"Server n/a",")"]})]},$.id))}):n.jsx("span",{className:Le.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),n.jsxs("div",{className:Le.membersSummary,children:[n.jsxs("div",{className:Le.membersSummaryItem,children:[n.jsx("div",{className:Le.membersSummaryLabel,children:"Selected"}),n.jsxs("div",{className:Le.membersSummaryValue,children:[A," / ",e.maxSlots]})]}),n.jsxs("div",{className:Le.membersSummaryItem,children:[n.jsx("div",{className:Le.membersSummaryLabel,children:"Free slots"}),n.jsx("div",{className:Le.membersSummaryValue,children:M})]}),n.jsxs("div",{className:Le.membersSummaryItem,children:[n.jsx("div",{className:Le.membersSummaryLabel,children:"Bench"}),n.jsx("div",{className:Le.membersSummaryValue,children:y})]}),n.jsxs("div",{className:Le.membersSummaryItem,children:[n.jsx("div",{className:Le.membersSummaryLabel,children:"Drop"}),n.jsx("div",{className:Le.membersSummaryValue,children:w})]}),n.jsxs("div",{className:Le.membersSummaryItem,children:[n.jsx("div",{className:Le.membersSummaryLabel,children:"Reserved"}),n.jsx("div",{className:Le.membersSummaryValue,children:e.reservedSlots})]}),n.jsxs("div",{className:Le.membersSummaryItem,children:[n.jsx("div",{className:Le.membersSummaryLabel,children:"Max slots"}),n.jsx("input",{type:"number",className:Le.maxSlotsInput,value:e.maxSlots,min:0,onChange:$=>i(Number($.target.value))})]})]}),n.jsxs("div",{className:Le.membersTable,children:[n.jsxs("div",{className:`${Le.membersRow} ${Le.membersHead}`,children:[n.jsx("div",{className:Le.membersCell,children:"Name"}),n.jsx("div",{className:Le.membersCell,children:"Level"}),n.jsx("div",{className:Le.membersCell,children:"Guild"}),n.jsx("div",{className:Le.membersCell,children:"Class"}),n.jsx("div",{className:Le.membersCell,children:"Plan"}),n.jsx("div",{className:Le.membersCell,children:"Decision"}),n.jsx("div",{className:Le.membersCell,children:"Partner"})]}),t.map($=>{var re,U,Y,ce,oe,me,_e,Pe,te;const H=(re=R[$.id])!=null?re:"undecided",z=(U=D[$.id])!=null?U:"none",W=z&&z.toString().startsWith("partner:")?z.split(":")[1]:null,K=(me=(Y=h.find(fe=>fe.id===W))==null?void 0:Y.label)!=null?me:z==="partner"?(oe=(ce=h[0])==null?void 0:ce.label)!=null?oe:"Partner guild":null,q=H==="take"&&z==="main"?"main":H==="take"&&(z==="partner"||W)?"partner":H==="bench"?"watch":"unassigned",se=q==="main"?"Main guild":q==="partner"?K||"Partner guild":q==="watch"?"Watchlist":"Not planned";return n.jsxs("div",{className:Le.membersRow,onContextMenu:fe=>{fe.preventDefault(),m($.id,{x:fe.clientX,y:fe.clientY})},onTouchStart:fe=>{const ae=fe.touches[0];ae&&b($.id,ae.clientX,ae.clientY)},onTouchEnd:v,onTouchCancel:v,children:[n.jsx("div",{className:Le.membersCell,children:n.jsx("div",{className:Le.memberName,children:$.name})}),n.jsx("div",{className:Le.membersCell,children:n.jsxs("span",{className:Le.memberBadge,children:["Lvl ",$.level]})}),n.jsx("div",{className:Le.membersCell,children:$.guildName}),n.jsx("div",{className:Le.membersCell,children:(Pe=(_e=$.className)!=null?_e:$.class)!=null?Pe:"?"}),n.jsxs("div",{className:`${Le.membersCell} ${Le.assignmentCell}`,children:[n.jsx("span",{className:`${Le.assignmentBadge} ${q==="main"?Le.assignmentBadgeMain:q==="partner"?Le.assignmentBadgePartner:q==="watch"?Le.assignmentBadgeWatch:Le.assignmentBadgeIdle}`,children:se}),n.jsxs("div",{className:Le.assignmentActions,role:"group","aria-label":"Target guild selection",children:[n.jsx("button",{type:"button",className:`${Le.assignmentButton} ${q==="main"?Le.assignmentButtonActive:""}`,onClick:()=>_($.id,"main"),children:"Main"}),n.jsx("button",{type:"button",className:`${Le.assignmentButton} ${q==="watch"?Le.assignmentButtonActive:""}`,onClick:()=>_($.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",className:`${Le.assignmentButton} ${q==="partner"?Le.assignmentButtonActive:""}`,onClick:()=>_($.id,"partner"),children:"Partner"})]})]}),n.jsx("div",{className:Le.membersCell,children:n.jsx("div",{className:Le.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(fe=>n.jsx("button",{type:"button",className:`${Le.decisionButton} ${H===fe?Le.decisionButtonActive:""}`,onClick:()=>N($.id,fe),children:fe==="take"?"Take":fe==="bench"?"Bench":fe==="drop"?"Drop":"?"},fe))})}),n.jsxs("div",{className:`${Le.membersCell} ${Le.partnerPickerCell}`,children:[n.jsx("label",{className:Le.partnerLabel,htmlFor:`partner-select-${$.id}`,children:"Partner"}),n.jsx("select",{id:`partner-select-${$.id}`,className:Le.partnerSelect,value:W!=null?W:(te=h[0])==null?void 0:te.id,onChange:fe=>_($.id,"partner",fe.target.value),children:h.map(fe=>n.jsx("option",{value:fe.id,children:fe.label},fe.id))})]})]},$.id)})]}),l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Le.contextMenuBackdrop,onClick:g}),n.jsxs("div",{className:Le.contextMenu,style:{top:l.y,left:l.x},children:[n.jsx("button",{type:"button",className:Le.contextMenuItem,onClick:()=>_(l.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Le.contextMenuItem,onClick:()=>_(l.memberId,"watch"),children:"Move to Watchlist"}),h.map($=>n.jsxs("button",{type:"button",className:Le.contextMenuItem,onClick:()=>_(l.memberId,"partner",$.id),children:["Move to ",$.label]},$.id))]})]}):null]})}const vme="_overview_6ytw3_1",bme="_contextBox_6ytw3_15",_me="_contextKicker_6ytw3_35",wme="_contextTitle_6ytw3_51",jme="_contextText_6ytw3_61",Sme="_contextDetails_6ytw3_71",Nme="_detailItem_6ytw3_85",kme="_detailLabel_6ytw3_99",Cme="_detailValue_6ytw3_113",Tme="_kpiGrid_6ytw3_121",Eme="_kpiCard_6ytw3_133",Ame="_kpiLabel_6ytw3_153",Ime="_kpiValue_6ytw3_167",Rme="_columnsWrapper_6ytw3_177",Pme="_column_6ytw3_177",Lme="_columnDropTarget_6ytw3_213",Dme="_columnHeader_6ytw3_223",Mme="_columnKicker_6ytw3_235",Fme="_columnTitle_6ytw3_251",Bme="_columnCount_6ytw3_259",$me="_columnBody_6ytw3_281",Ome="_memberCard_6ytw3_293",Vme="_memberTop_6ytw3_337",Ume="_memberName_6ytw3_349",zme="_memberMeta_6ytw3_357",Hme="_memberBadge_6ytw3_369",Gme="_memberBottom_6ytw3_395",Wme="_memberGuild_6ytw3_409",qme="_memberServer_6ytw3_419",Kme="_memberActions_6ytw3_427",Qme="_emptyList_6ytw3_469",Xme="_emptyWrap_6ytw3_487",Yme="_emptyTitle_6ytw3_501",Jme="_emptyText_6ytw3_509",Zme="_addPartnerCard_6ytw3_519",epe="_contextMenuBackdrop_6ytw3_559",tpe="_contextMenu_6ytw3_559",spe="_contextMenuItem_6ytw3_601",ot={overview:vme,contextBox:bme,contextKicker:_me,contextTitle:wme,contextText:jme,contextDetails:Sme,detailItem:Nme,detailLabel:kme,detailValue:Cme,kpiGrid:Tme,kpiCard:Eme,kpiLabel:Ame,kpiValue:Ime,columnsWrapper:Rme,column:Pme,columnDropTarget:Lme,columnHeader:Dme,columnKicker:Mme,columnTitle:Fme,columnCount:Bme,columnBody:$me,memberCard:Ome,memberTop:Vme,memberName:Ume,memberMeta:zme,memberBadge:Hme,memberBottom:Gme,memberGuild:Wme,memberServer:qme,memberActions:Kme,emptyList:Qme,emptyWrap:Xme,emptyTitle:Yme,emptyText:Jme,addPartnerCard:Zme,contextMenuBackdrop:epe,contextMenu:tpe,contextMenuItem:spe};function npe({members:t,scenario:e,setupState:s,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var z,W,K;const l=(z=e==null?void 0:e.decisions)!=null?z:{},d=(W=e==null?void 0:e.targetGuildAssignments)!=null?W:{},u=s.partnerGuilds.length>0?s.partnerGuilds.map((q,se)=>({id:q.id,label:q.name||`Partner ${se+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(q=>l[q.id]==="take"&&d[q.id]==="main"),m=t.filter(q=>l[q.id]==="bench"),g=u.reduce((q,se)=>(q[se.id]=t.filter(re=>{const U=d[re.id];return l[re.id]==="take"&&(U===`partner:${se.id}`||U==="partner")}),q),{}),v=t.filter(q=>!h.includes(q)&&!m.includes(q)&&!Object.values(g).some(se=>se.includes(q))),[b,_]=X.useState(null),[N,C]=X.useState(null),R=X.useRef(null),D=t.length,A=h.length,y=m.length,w=Object.values(g).reduce((q,se)=>q+se.length,0),M=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-A-w):0,k=X.useCallback((q,se,re)=>{q&&(se==="main"?(r(q,"take"),i(q,"main")):se==="partner"?(r(q,"take"),i(q,re?`partner:${re}`:"partner")):se==="unassigned"?(r(q,"undecided"),i(q,"none")):(r(q,"bench"),i(q,"none")),C(null))},[r,i]),S=X.useCallback((q,se)=>re=>{re.preventDefault();const U=re.dataTransfer.getData("text/plain");U&&k(U,q,se),_(null)},[k]),T=X.useCallback(q=>se=>{se.preventDefault(),_(q)},[]),F=X.useCallback(()=>_(null),[]),I=X.useCallback((q,se)=>{C({memberId:q,...se})},[]),B=X.useCallback(()=>{R.current!==null&&(window.clearTimeout(R.current),R.current=null)},[]),$=X.useCallback((q,se,re)=>{B(),R.current=window.setTimeout(()=>{I(q,{x:se,y:re})},550)},[B,I]);if(X.useEffect(()=>()=>B(),[B]),!e)return n.jsxs("div",{className:ot.emptyWrap,children:[n.jsx("h3",{className:ot.emptyTitle,children:"Overview"}),n.jsx("p",{className:ot.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return n.jsxs("div",{className:ot.emptyWrap,children:[n.jsx("h3",{className:ot.emptyTitle,children:"No members loaded"}),n.jsx("p",{className:ot.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const H=(q,se,re,U,Y)=>n.jsxs("div",{className:`${ot.column} ${b===q?ot.columnDropTarget:""}`,onDragOver:T(q),onDragEnter:T(q),onDragLeave:F,onDrop:S(q,Y),children:[n.jsxs("div",{className:ot.columnHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ot.columnKicker,children:re}),n.jsx("h4",{className:ot.columnTitle,children:se})]}),n.jsx("span",{className:ot.columnCount,children:U.length})]}),n.jsx("div",{className:ot.columnBody,children:U.length?U.map(ce=>{var oe,me,_e,Pe;return n.jsxs("div",{className:ot.memberCard,draggable:!0,onDragStart:te=>te.dataTransfer.setData("text/plain",ce.id),onContextMenu:te=>{te.preventDefault(),I(ce.id,{x:te.clientX,y:te.clientY})},onTouchStart:te=>{const fe=te.touches[0];fe&&$(ce.id,fe.clientX,fe.clientY)},onTouchEnd:B,onTouchCancel:B,children:[n.jsxs("div",{className:ot.memberTop,children:[n.jsxs("div",{children:[n.jsx("div",{className:ot.memberName,children:ce.name}),n.jsxs("p",{className:ot.memberMeta,children:[(me=(oe=ce.className)!=null?oe:ce.class)!=null?me:"Unknown","  ",(_e=ce.role)!=null?_e:"Unknown"]})]}),n.jsxs("span",{className:ot.memberBadge,children:["Lvl ",(Pe=ce.level)!=null?Pe:"?"]})]}),n.jsxs("div",{className:ot.memberBottom,children:[n.jsxs("span",{className:ot.memberGuild,children:[ce.guildName," ",n.jsxs("span",{className:ot.memberServer,children:["(",ce.server||"Server n/a",")"]})]}),n.jsxs("div",{className:ot.memberActions,children:[n.jsx("button",{type:"button",onClick:()=>k(ce.id,"main"),children:"Main"}),n.jsx("button",{type:"button",onClick:()=>k(ce.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",onClick:()=>k(ce.id,"partner"),children:"Partner"})]})]})]},ce.id)}):n.jsx("div",{className:ot.emptyList,children:"No players in this list yet."})})]});return n.jsxs("div",{className:ot.overview,children:[n.jsxs("div",{className:ot.contextBox,children:[n.jsxs("div",{children:[n.jsx("p",{className:ot.contextKicker,children:"Setup"}),n.jsx("h3",{className:ot.contextTitle,children:"Fusion Overview"}),n.jsx("p",{className:ot.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),n.jsxs("div",{className:ot.contextDetails,children:[n.jsxs("div",{className:ot.detailItem,children:[n.jsx("span",{className:ot.detailLabel,children:"Base Guild"}),n.jsx("strong",{className:ot.detailValue,children:((K=s.baseGuild)==null?void 0:K.name)||"Unbenannt"})]}),n.jsxs("div",{className:ot.detailItem,children:[n.jsx("span",{className:ot.detailLabel,children:"Partner Guilds"}),n.jsx("strong",{className:ot.detailValue,children:s.partnerGuilds.length})]}),n.jsxs("div",{className:ot.detailItem,children:[n.jsx("span",{className:ot.detailLabel,children:"Max Slots"}),n.jsx("strong",{className:ot.detailValue,children:e.maxSlots})]})]})]}),n.jsxs("div",{className:ot.kpiGrid,children:[n.jsxs("div",{className:ot.kpiCard,children:[n.jsx("span",{className:ot.kpiLabel,children:"Total players"}),n.jsx("strong",{className:ot.kpiValue,children:D})]}),n.jsxs("div",{className:ot.kpiCard,children:[n.jsx("span",{className:ot.kpiLabel,children:"Main guild"}),n.jsx("strong",{className:ot.kpiValue,children:A})]}),n.jsxs("div",{className:ot.kpiCard,children:[n.jsx("span",{className:ot.kpiLabel,children:"Watchlist"}),n.jsx("strong",{className:ot.kpiValue,children:y})]}),n.jsxs("div",{className:ot.kpiCard,children:[n.jsx("span",{className:ot.kpiLabel,children:"Partner guild"}),n.jsx("strong",{className:ot.kpiValue,children:w})]}),n.jsxs("div",{className:ot.kpiCard,children:[n.jsx("span",{className:ot.kpiLabel,children:"Free slots"}),n.jsx("strong",{className:ot.kpiValue,children:M})]})]}),n.jsxs("div",{className:ot.columnsWrapper,children:[H("unassigned","Unassigned","Noch ohne Planung",v),H("main","Main guild","Take & Assign main",h),H("watch","Watchlist","Bench for review",m),u.map(q=>{var se;return H("partner",q.label,"Take & Assign partner",(se=g[q.id])!=null?se:[],q.id)}),n.jsx("button",{type:"button",className:ot.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),N?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:ot.contextMenuBackdrop,onClick:()=>C(null)}),n.jsxs("div",{className:ot.contextMenu,style:{top:N.y,left:N.x},children:[n.jsx("button",{type:"button",className:ot.contextMenuItem,onClick:()=>k(N.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:ot.contextMenuItem,onClick:()=>k(N.memberId,"watch"),children:"Move to Watchlist"}),u.map(q=>n.jsxs("button",{type:"button",className:ot.contextMenuItem,onClick:()=>k(N.memberId,"partner",q.id),children:["Move to ",q.label]},q.id))]})]}):null]})}const rpe="_scenariosTab_3v4iw_1",ipe="_scenariosHeader_3v4iw_13",ape="_scenariosTitle_3v4iw_35",ope="_scenariosText_3v4iw_45",lpe="_scenarioInfo_3v4iw_57",cpe="_headerActions_3v4iw_71",dpe="_createButton_3v4iw_81",upe="_scenarioList_3v4iw_115",hpe="_scenarioCard_3v4iw_127",mpe="_scenarioCardActive_3v4iw_147",ppe="_scenarioCardTop_3v4iw_157",fpe="_cardKicker_3v4iw_169",gpe="_cardTitle_3v4iw_185",xpe="_cardText_3v4iw_197",ype="_scenarioActiveBadge_3v4iw_209",vpe="_scenarioMeta_3v4iw_231",bpe="_scenarioMetaLabel_3v4iw_243",_pe="_scenarioMetaValue_3v4iw_259",wpe="_scenarioStats_3v4iw_269",jpe="_scenarioStatItem_3v4iw_281",Spe="_scenarioStatLabel_3v4iw_295",Npe="_scenarioStatValue_3v4iw_311",kpe="_scenarioActions_3v4iw_321",Cpe="_scenarioActionButton_3v4iw_337",Tpe="_scenarioActionActive_3v4iw_367",Epe="_scenarioActionGroup_3v4iw_377",Ape="_secondaryActionButton_3v4iw_389",Ipe="_deleteActionButton_3v4iw_391",Rpe="_deleteActionDisabled_3v4iw_443",Ft={scenariosTab:rpe,scenariosHeader:ipe,scenariosTitle:ape,scenariosText:ope,scenarioInfo:lpe,headerActions:cpe,createButton:dpe,scenarioList:upe,scenarioCard:hpe,scenarioCardActive:mpe,scenarioCardTop:ppe,cardKicker:fpe,cardTitle:gpe,cardText:xpe,scenarioActiveBadge:ype,scenarioMeta:vpe,scenarioMetaLabel:bpe,scenarioMetaValue:_pe,scenarioStats:wpe,scenarioStatItem:jpe,scenarioStatLabel:Spe,scenarioStatValue:Npe,scenarioActions:kpe,scenarioActionButton:Cpe,scenarioActionActive:Tpe,scenarioActionGroup:Epe,secondaryActionButton:Ape,deleteActionButton:Ipe,deleteActionDisabled:Rpe};function Ppe({scenarios:t,activeScenarioId:e,onSetActiveScenario:s,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:l}){const d=X.useCallback(m=>{const g=Object.values(m.decisions),v=g.filter(C=>C==="take").length,b=g.filter(C=>C==="bench").length,_=g.filter(C=>C==="drop").length,N=Math.max(0,m.maxSlots-m.reservedSlots-v);return{selected:v,bench:b,drop:_,free:N}},[]),u=m=>{const g=window.prompt("Neuer Szenario-Name",m.name);g!==null&&a(m.id,g)},h=m=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&l(m.id)};return n.jsxs("div",{className:Ft.scenariosTab,children:[n.jsxs("div",{className:Ft.scenariosHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ft.cardKicker,children:"Scenarios"}),n.jsx("h3",{className:Ft.scenariosTitle,children:"Fusion Plans verwalten"}),n.jsx("p",{className:Ft.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),n.jsx("div",{className:Ft.headerActions,children:n.jsx("button",{type:"button",className:Ft.createButton,onClick:r,children:"Neues Szenario"})})]}),n.jsx("p",{className:Ft.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),n.jsx("div",{className:Ft.scenarioList,children:t.map(m=>{const g=d(m),v=m.id===e,b=t.length<=1;return n.jsxs("article",{className:`${Ft.scenarioCard} ${v?Ft.scenarioCardActive:""}`,children:[n.jsxs("div",{className:Ft.scenarioCardTop,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ft.cardKicker,children:"Scenario"}),n.jsx("h3",{className:Ft.cardTitle,children:m.name}),m.description?n.jsx("p",{className:Ft.cardText,children:m.description}):null]}),v?n.jsx("span",{className:Ft.scenarioActiveBadge,children:"Active"}):null]}),n.jsxs("div",{className:Ft.scenarioMeta,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ft.scenarioMetaLabel,children:"Max slots"}),n.jsx("span",{className:Ft.scenarioMetaValue,children:m.maxSlots})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ft.scenarioMetaLabel,children:"Reserved"}),n.jsx("span",{className:Ft.scenarioMetaValue,children:m.reservedSlots})]})]}),n.jsxs("div",{className:Ft.scenarioStats,children:[n.jsxs("div",{className:Ft.scenarioStatItem,children:[n.jsx("span",{className:Ft.scenarioStatLabel,children:"Selected"}),n.jsx("strong",{className:Ft.scenarioStatValue,children:g.selected})]}),n.jsxs("div",{className:Ft.scenarioStatItem,children:[n.jsx("span",{className:Ft.scenarioStatLabel,children:"Free"}),n.jsx("strong",{className:Ft.scenarioStatValue,children:g.free})]}),n.jsxs("div",{className:Ft.scenarioStatItem,children:[n.jsx("span",{className:Ft.scenarioStatLabel,children:"Bench"}),n.jsx("strong",{className:Ft.scenarioStatValue,children:g.bench})]}),n.jsxs("div",{className:Ft.scenarioStatItem,children:[n.jsx("span",{className:Ft.scenarioStatLabel,children:"Drop"}),n.jsx("strong",{className:Ft.scenarioStatValue,children:g.drop})]})]}),n.jsxs("div",{className:Ft.scenarioActions,children:[n.jsx("button",{type:"button",className:`${Ft.scenarioActionButton} ${v?Ft.scenarioActionActive:""}`,onClick:()=>s(m.id),children:"Set active"}),n.jsxs("div",{className:Ft.scenarioActionGroup,children:[n.jsx("button",{type:"button",className:Ft.secondaryActionButton,onClick:()=>i(m.id),children:"Duplicate"}),n.jsx("button",{type:"button",className:Ft.secondaryActionButton,onClick:()=>u(m),children:"Rename"}),n.jsx("button",{type:"button",className:`${Ft.deleteActionButton} ${b?Ft.deleteActionDisabled:""}`,onClick:()=>h(m),disabled:b,children:"Delete"})]})]})]},m.id)})})]})}const Lpe="_resultWrap_179wi_1",Dpe="_emptyState_179wi_13",Mpe="_emptyTitle_179wi_35",Fpe="_emptyText_179wi_43",Bpe="_resultHeader_179wi_55",$pe="_resultKicker_179wi_79",Ope="_resultTitle_179wi_95",Vpe="_resultText_179wi_107",Upe="_emptyNote_179wi_119",zpe="_setupSummary_179wi_131",Hpe="_setupSummaryTitle_179wi_149",Gpe="_setupSummaryRow_179wi_159",Wpe="_setupSummaryLabel_179wi_171",qpe="_setupSummaryValue_179wi_185",Kpe="_setupSummaryMeta_179wi_195",Qpe="_setupSummaryTags_179wi_205",Xpe="_setupSummaryTag_179wi_205",Ype="_classDistribution_179wi_241",Jpe="_resultStats_179wi_253",Zpe="_resultStatBadge_179wi_267",efe="_resultStatBadgeMuted_179wi_269",tfe="_group_179wi_307",sfe="_groupHeader_179wi_327",nfe="_groupTitle_179wi_341",rfe="_groupHint_179wi_351",ife="_groupBadge_179wi_361",afe="_badgeSuccess_179wi_387",ofe="_badgeMuted_179wi_399",lfe="_badgeDanger_179wi_409",cfe="_groupEmpty_179wi_421",dfe="_groupTable_179wi_437",ufe="_groupRow_179wi_455",hfe="_groupHead_179wi_327",mfe="_groupCell_179wi_491",pfe="_memberName_179wi_501",ffe="_memberBadge_179wi_509",ut={resultWrap:Lpe,emptyState:Dpe,emptyTitle:Mpe,emptyText:Fpe,resultHeader:Bpe,resultKicker:$pe,resultTitle:Ope,resultText:Vpe,emptyNote:Upe,setupSummary:zpe,setupSummaryTitle:Hpe,setupSummaryRow:Gpe,setupSummaryLabel:Wpe,setupSummaryValue:qpe,setupSummaryMeta:Kpe,setupSummaryTags:Qpe,setupSummaryTag:Xpe,classDistribution:Ype,resultStats:Jpe,resultStatBadge:Zpe,resultStatBadgeMuted:efe,group:tfe,groupHeader:sfe,groupTitle:nfe,groupHint:rfe,groupBadge:ife,badgeSuccess:afe,badgeMuted:ofe,badgeDanger:lfe,groupEmpty:cfe,groupTable:dfe,groupRow:ufe,groupHead:hfe,groupCell:mfe,memberName:pfe,memberBadge:ffe};function gfe({members:t,scenario:e,setupState:s}){var _;if(!e)return n.jsxs("div",{className:ut.emptyState,children:[n.jsx("h3",{className:ut.emptyTitle,children:"No scenario selected"}),n.jsx("p",{className:ut.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return n.jsxs("div",{className:ut.emptyState,children:[n.jsx("h3",{className:ut.emptyTitle,children:"No members available"}),n.jsx("p",{className:ut.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:l}=X.useMemo(()=>{const N=[],C=[],R=[],D=[];return t.forEach(A=>{var w;const y=(w=e.decisions[A.id])!=null?w:"undecided";y==="take"?N.push(A):y==="bench"?C.push(A):y==="drop"?R.push(A):D.push(A)}),{takeMembers:N,benchMembers:C,dropMembers:R,undecidedMembers:D}},[t,e.decisions]),d=r.length,u=i.length,h=a.length,m=Math.max(0,e.maxSlots-d),g=e.maxSlots?Math.round(d/e.maxSlots*100):0,v=X.useMemo(()=>{const N=r.reduce((R,D)=>{var y,w;const A=(y=D.className)!=null?y:D.class;return A&&(R[A]=((w=R[A])!=null?w:0)+1),R},{});return Object.entries(N).map(([R,D])=>`${R}: ${D}`).join(" | ")},[r]),b=(N,C,R,D)=>n.jsxs("div",{className:ut.group,children:[n.jsxs("div",{className:ut.groupHeader,children:[n.jsxs("div",{children:[n.jsx("h4",{className:ut.groupTitle,children:N}),n.jsx("span",{className:ut.groupHint,children:C})]}),n.jsx("span",{className:`${ut.groupBadge} ${D}`,children:R.length})]}),R.length===0?n.jsx("div",{className:ut.groupEmpty,children:"No players in this group."}):n.jsxs("div",{className:ut.groupTable,role:"table",children:[n.jsxs("div",{className:`${ut.groupRow} ${ut.groupHead}`,role:"row",children:[n.jsx("div",{className:ut.groupCell,role:"columnheader",children:"Name"}),n.jsx("div",{className:ut.groupCell,role:"columnheader",children:"Level"}),n.jsx("div",{className:ut.groupCell,role:"columnheader",children:"Guild"}),n.jsx("div",{className:ut.groupCell,role:"columnheader",children:"Class"})]}),R.map(A=>{var y,w;return n.jsxs("div",{className:ut.groupRow,role:"row",children:[n.jsx("div",{className:ut.groupCell,role:"cell",children:n.jsx("span",{className:ut.memberName,children:A.name})}),n.jsx("div",{className:ut.groupCell,role:"cell",children:n.jsxs("span",{className:ut.memberBadge,children:["Lvl ",A.level]})}),n.jsx("div",{className:ut.groupCell,role:"cell",children:A.guildName}),n.jsx("div",{className:ut.groupCell,role:"cell",children:(w=(y=A.className)!=null?y:A.class)!=null?w:"-"})]},A.id)})]})]});return n.jsxs("div",{className:ut.resultWrap,children:[n.jsxs("div",{className:ut.resultHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ut.resultKicker,children:"Final Plan"}),n.jsx("h3",{className:ut.resultTitle,children:e.name}),n.jsx("p",{className:ut.resultText,children:(_=e.description)!=null?_:"Zusammenfassung des aktuellen Plans."}),r.length===0?n.jsx("p",{className:ut.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,v?n.jsxs("p",{className:ut.classDistribution,children:["Class distribution: ",v]}):null,n.jsxs("div",{className:ut.setupSummary,children:[n.jsx("div",{className:ut.setupSummaryTitle,children:"Fusion plan between"}),s.baseGuild?n.jsxs("div",{className:ut.setupSummaryRow,children:[n.jsx("span",{className:ut.setupSummaryLabel,children:"Base"}),n.jsxs("span",{className:ut.setupSummaryValue,children:[s.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:ut.setupSummaryMeta,children:["(",s.baseGuild.server||"Server n/a",")"]})]})]}):n.jsxs("div",{className:ut.setupSummaryRow,children:[n.jsx("span",{className:ut.setupSummaryLabel,children:"Base"}),n.jsx("span",{className:ut.setupSummaryMeta,children:"No base guild selected."})]}),n.jsxs("div",{className:ut.setupSummaryRow,children:[n.jsx("span",{className:ut.setupSummaryLabel,children:"Partners"}),s.partnerGuilds.length?n.jsx("div",{className:ut.setupSummaryTags,children:s.partnerGuilds.map(N=>n.jsxs("span",{className:ut.setupSummaryTag,children:[N.name||"Unbenannt"," ",n.jsxs("span",{className:ut.setupSummaryMeta,children:["(",N.server||"Server n/a",")"]})]},N.id))}):n.jsx("span",{className:ut.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),n.jsxs("div",{className:ut.resultStats,children:[n.jsxs("span",{className:ut.resultStatBadge,children:["Members selected: ",d," / ",e.maxSlots]}),n.jsxs("span",{className:ut.resultStatBadge,children:["Bench: ",u]}),n.jsxs("span",{className:ut.resultStatBadge,children:["Drop: ",h]}),n.jsxs("span",{className:ut.resultStatBadge,children:["Free slots: ",m]}),n.jsxs("span",{className:ut.resultStatBadge,children:["Utilization: ",g,"%"]}),l.length>0?n.jsxs("span",{className:ut.resultStatBadgeMuted,children:["Undecided: ",l.length]}):null]})]}),b("Final roster (selected)","Take",r,ut.badgeSuccess),b("Bench (waiting list)","Bench",i,ut.badgeMuted),b("Not included","Drop",a,ut.badgeDanger)]})}const rf=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],Ak=t=>t.reduce((e,s)=>(e[s.id]="undecided",e),{}),Ik=t=>t.reduce((e,s)=>(e[s.id]="none",e),{}),xfe=(t,e,s)=>{var r,i,a,l,d,u,h,m,g,v,b,_,N,C,R,D;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(l=t.role)!=null?l:"Unknown",level:(d=t.level)!=null?d:void 0,guildName:e,server:s,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(m=t.conBase)!=null?m:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(v=t.totalStats)!=null?v:void 0,values:{treasury:(b=t.treasury)!=null?b:void 0,mine:(_=t.mine)!=null?_:void 0,attrTotal:(N=t.attrTotal)!=null?N:void 0,conTotal:(C=t.conTotal)!=null?C:void 0,lastScan:(R=t.lastScan)!=null?R:void 0,lastActivity:(D=t.lastActivity)!=null?D:void 0}}},yfe=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const s=(i=t.name)==null?void 0:i.trim();return s||null},Rk=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,Pk=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],vfe=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function bfe(){var $;const[t,e]=X.useState("setup"),[s,r]=X.useState(rf),[i,a]=X.useState(!1),[l,d]=X.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=X.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:Ak(rf),targetGuildAssignments:Ik(rf),isDefault:!0}]),[m,g]=X.useState("plan-a"),v=X.useMemo(()=>{var H,z;return(z=(H=u.find(W=>W.id===m))!=null?H:u[0])!=null?z:null},[m,u]),b=X.useMemo(()=>{var K,q;const H=l.baseGuild,z=(K=H==null?void 0:H.name)==null?void 0:K.trim(),W=(q=H==null?void 0:H.server)==null?void 0:q.trim();return!!(z&&W)},[l.baseGuild]),_=X.useMemo(()=>s.length>0,[s.length]),N=X.useMemo(()=>u.length>0,[u.length]),C=X.useMemo(()=>{const H=[];return b||H.push("Setup incomplete - no base guild selected."),b&&!_&&H.push("No members loaded yet. Check scans or setup."),N||H.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),H},[b,_,N]),R=(H,z)=>{h(W=>W.map(K=>K.id===m?{...K,decisions:{...K.decisions,[H]:z}}:K))},D=(H,z)=>{h(W=>W.map(K=>{var q;return K.id===m?{...K,targetGuildAssignments:{...(q=K.targetGuildAssignments)!=null?q:{},[H]:z}}:K}))},A=H=>{const z=Number(H)||0;h(W=>W.map(K=>K.id===m?{...K,maxSlots:Math.max(0,z)}:K))},y=()=>{h(H=>{const z={id:Rk(),name:`Plan ${H.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:Ak(s),targetGuildAssignments:Ik(s)};return g(z.id),[...H,z]})},w=H=>{h(z=>{var q;const W=z.find(se=>se.id===H);if(!W)return z;const K={...W,id:Rk(),name:`${W.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...W.decisions},targetGuildAssignments:{...(q=W.targetGuildAssignments)!=null?q:{}}};return g(K.id),[...z,K]})},M=(H,z)=>{const W=z.trim();W&&h(K=>K.map(q=>q.id===H?{...q,name:W}:q))},k=H=>{h(z=>{if(z.length<=1)return z;const W=z.filter(K=>K.id!==H);return W.length?(m===H&&g(W[0].id),W):z})};X.useEffect(()=>{if(l.mode!=="scan"){a(!1),r(rf);return}const H=[l.baseGuild,...l.partnerGuilds].filter(Boolean);if(H.length===0){a(!1),r([]);return}let z=!1;async function W(){var K,q,se,re,U,Y,ce,oe,me,_e;a(!0);try{const Pe=[];for(const te of H){const fe=yfe(te);if(!fe)continue;const ae=qt(xt,`guilds/${fe}/latest/latest`),be=await Js(ae),ye=be.exists()?be.data():null,Ie=(U=(re=(q=(K=te.name)==null?void 0:K.trim())!=null?q:ye==null?void 0:ye.name)!=null?re:(se=ye==null?void 0:ye.values)==null?void 0:se.Name)!=null?U:fe,$e=(_e=(me=(ce=(Y=te.server)==null?void 0:Y.trim())!=null?ce:ye==null?void 0:ye.server)!=null?me:(oe=ye==null?void 0:ye.values)==null?void 0:oe.Server)!=null?_e:null,Ge=qt(xt,`guilds/${fe}/snapshots/members_summary`),nt=await Js(Ge);if(!nt.exists())continue;const at=nt.data();(Array.isArray(at.members)?at.members:[]).forEach($t=>{Pe.push(xfe($t,Ie,$e))})}z||r(Pe)}catch(Pe){console.error("[FusionPlanner] Failed to load members",Pe),z||r([])}finally{z||a(!1)}}return r([]),W(),()=>{z=!0}},[l.baseGuild,l.partnerGuilds,l.mode]),X.useEffect(()=>{i||h(H=>H.map(z=>{var se;const W=new Set(s.map(re=>re.id)),K={...z.decisions},q={...(se=z.targetGuildAssignments)!=null?se:{}};return s.forEach(re=>{K[re.id]||(K[re.id]="undecided"),q[re.id]||(q[re.id]="none")}),Object.keys(K).forEach(re=>{W.has(re)||delete K[re]}),Object.keys(q).forEach(re=>{W.has(re)||delete q[re]}),{...z,decisions:K,targetGuildAssignments:q}}))},[s,i]);const S=H=>{d(z=>({...z,mode:H}))},T=H=>{d(z=>{var K,q,se;const W=(K=z.baseGuild)!=null?K:{id:"base-1",kind:"base",name:"",server:""};return{...z,baseGuild:{...W,...H.id?{id:H.id}:{},name:(q=H.name)!=null?q:W.name,server:(se=H.server)!=null?se:W.server}}})},F=H=>{var q;if(!H.name.trim()||!H.server.trim())return;const z=H.name.trim(),W=H.server.trim(),K=(q=H.id)==null?void 0:q.trim();d(se=>({...se,partnerGuilds:[...se.partnerGuilds,{id:K&&!K.startsWith("partner-")?K:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:z,server:W,kind:"partner"}]}))},I=H=>{d(z=>({...z,partnerGuilds:z.partnerGuilds.filter(W=>W.id!==H)}))},B=()=>{switch(t){case"setup":return n.jsx(whe,{setupState:l,onChangeMode:S,onChangeBaseGuild:T,onAddPartnerGuild:F,onRemovePartnerGuild:I});case"members":return n.jsx(yme,{members:s,scenario:v,onChangeScenarioDecision:R,onChangeScenarioTargetGuild:D,onChangeScenarioMaxSlots:A,setupState:l});case"overview":return n.jsx(npe,{members:s,scenario:v,setupState:l,onChangeScenarioDecision:R,onChangeScenarioTargetGuild:D,onAddPartnerGuild:H=>F({name:H,server:"tbd"})});case"scenarios":return n.jsx(Ppe,{scenarios:u,activeScenarioId:m,onSetActiveScenario:g,onCreateScenario:y,onDuplicateScenario:w,onRenameScenario:M,onDeleteScenario:k});case"result":return n.jsx(gfe,{members:s,scenario:v,setupState:l});default:return null}};return n.jsx(Bt,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:n.jsxs("div",{className:mt.page,children:[n.jsxs("header",{className:mt.header,children:[n.jsxs("div",{className:mt.headerLeading,children:[n.jsx(hs,{to:"/guild-hub",className:mt.backLink,children:"Back to Guild Hub"}),n.jsxs("div",{className:mt.headerStack,children:[n.jsx("p",{className:mt.kicker,children:"Guild Hub"}),n.jsx("h1",{className:mt.title,children:"Fusion Planner"}),n.jsx("p",{className:mt.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),n.jsxs("div",{className:mt.headerActions,children:[n.jsx("button",{type:"button",className:mt.primaryAction,children:"Neues Setup"}),n.jsx("button",{type:"button",className:mt.secondaryAction,children:"Checkliste"})]})]}),C.length?n.jsx("div",{className:mt.plannerNotice,role:"status","aria-live":"polite",children:C.map(H=>n.jsxs("div",{className:`${mt.noticeItem} ${H.toLowerCase().includes("no base guild")?mt.noticeWarning:""}`,children:[n.jsx("span",{className:mt.noticeDot,"aria-hidden":!0}),n.jsx("span",{children:H})]},H))}):null,n.jsxs("section",{className:mt.tabSection,"aria-label":"Fusion Planner Tabs",children:[n.jsx("div",{className:mt.tabBar,children:Pk.map(H=>{const z=H.key===t;return n.jsxs("button",{type:"button",className:`${mt.tabItem} ${z?mt.tabItemActive:""}`,onClick:()=>e(H.key),"aria-pressed":z,children:[n.jsx("span",{className:mt.tabLabel,children:H.label}),n.jsx("span",{className:mt.tabHelper,children:H.helper})]},H.key)})}),n.jsxs("div",{className:mt.tabPanel,children:[n.jsx("span",{className:mt.tabBadge,children:($=Pk.find(H=>H.key===t))==null?void 0:$.label}),B()]})]}),n.jsxs("section",{className:mt.infoStrip,children:[n.jsxs("div",{className:mt.infoBlock,children:[n.jsx("span",{className:mt.infoLabel,children:"Status"}),n.jsx("strong",{children:"Entwurf"}),n.jsx("p",{className:mt.infoHint,children:"Bereit fuer weitere Eingaben."})]}),n.jsxs("div",{className:mt.infoBlock,children:[n.jsx("span",{className:mt.infoLabel,children:"Slots geplant"}),n.jsx("strong",{children:"0 / 40"}),n.jsx("p",{className:mt.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),n.jsxs("div",{className:mt.infoBlock,children:[n.jsx("span",{className:mt.infoLabel,children:"Szenarien"}),n.jsx("strong",{children:"3"}),n.jsx("p",{className:mt.infoHint,children:"Baseline, Optimistic, Risiko."})]}),n.jsxs("div",{className:mt.infoBlock,children:[n.jsx("span",{className:mt.infoLabel,children:"Letztes Update"}),n.jsx("strong",{children:"vor wenigen Minuten"}),n.jsx("p",{className:mt.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),n.jsx("section",{className:mt.stageGrid,children:vfe.map(H=>n.jsxs("article",{className:mt.panel,children:[n.jsxs("div",{className:mt.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:mt.panelKicker,children:H.step}),n.jsx("h2",{className:mt.panelTitle,children:H.title}),n.jsx("p",{className:mt.panelLead,children:H.description})]}),H.badge?n.jsx("span",{className:mt.badge,children:H.badge}):null]}),n.jsx("div",{className:mt.panelBody,children:n.jsx("div",{className:mt.placeholderGrid,children:H.placeholders.map(z=>n.jsxs("div",{className:mt.placeholderCard,children:[n.jsx("div",{className:mt.placeholderTitle,children:z}),n.jsx("p",{className:mt.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},z))})})]},H.key))}),n.jsx("section",{className:mt.helperSection,children:n.jsxs("div",{className:mt.helperCard,children:[n.jsxs("div",{children:[n.jsx("p",{className:mt.helperKicker,children:"Result"}),n.jsx("h3",{className:mt.helperTitle,children:"Finaler Merge-Plan"}),n.jsx("p",{className:mt.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),n.jsxs("div",{className:mt.helperActions,children:[n.jsx("button",{type:"button",className:mt.secondaryAction,children:"Teilen"}),n.jsx("button",{type:"button",className:mt.primaryAction,children:"Review starten"})]})]})})]})})}const t1=["EU-01","EU-02","US-01","US-02","ASIA-01"],vh=new Intl.NumberFormat("de-DE");function _fe(){const t=Od("(min-width: 768px)"),[e,s]=X.useState("all"),[r,i]=X.useState(null),[a,l]=X.useState(null),[d,u]=X.useState(null),[h,m]=X.useState(null),g=[r,a].filter(Boolean).length,v=X.useMemo(()=>{const I=[d,h].filter(Boolean);if(!I.length)return 0;const B=I.reduce(($,H)=>{var z;return $+((z=H.members)!=null?z:0)},0);return Math.round(B/I.length)},[d,h]),[b,_]=X.useState(null),[N,C]=X.useState(!1),R=X.useRef(null);Vd(R,N&&!t),X.useEffect(()=>{t&&C(!1)},[t]),X.useEffect(()=>{if(!b)return;const I=$=>{const H=$.target;H&&(H.closest(`.${le.freshnessBadge}`)||H.closest(`.${le.freshnessPopover}`)||_(null))},B=$=>{$.key==="Escape"&&_(null)};return document.addEventListener("pointerdown",I),document.addEventListener("keydown",B),()=>{document.removeEventListener("pointerdown",I),document.removeEventListener("keydown",B)}},[b]);const D=X.useMemo(()=>d?Uh(d.nextUpdateAt,Date.now()):"",[d]),A=X.useMemo(()=>h?Uh(h.nextUpdateAt,Date.now()):"",[h]),y=()=>C(!0),w=()=>C(!1),M=I=>{s(I)},k=(I,B)=>{I==="guildA"?(i(B.id),u(B)):(l(B.id),m(B))},S=I=>{I==="guildA"?(i(null),u(null)):(l(null),m(null))},T=I=>{_(B=>B===I?null:I)},F=d&&h;return n.jsxs(Bt,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[n.jsxs("div",{className:le.page,children:[n.jsxs("header",{className:le.header,children:[n.jsxs("div",{className:le.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.kicker,children:"Guild Hub"}),n.jsx("h1",{className:le.title,children:"Gilden vergleichen"}),n.jsx("p",{className:le.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),n.jsx("div",{className:le.headerActions,children:!t&&n.jsx("button",{type:"button",className:le.secondaryAction,onClick:y,children:"Filter"})})]}),n.jsxs("div",{className:le.infoStrip,children:[n.jsxs("div",{className:le.infoCard,children:[n.jsx("span",{className:le.infoLabel,children:"Pool"}),n.jsxs("strong",{children:[vh.format(g)," Gilden"]})]}),n.jsxs("div",{className:le.infoCard,children:[n.jsx("span",{className:le.infoLabel,children:"Durchschnitt Mitglieder"}),n.jsx("strong",{children:vh.format(v)})]}),n.jsxs("div",{className:le.infoCard,children:[n.jsx("span",{className:le.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:le.inlineFilters,children:n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:le.select,value:e,onChange:I=>M(I.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),t1.map(I=>n.jsx("option",{value:I,children:I},I))]})]})})]}),n.jsxs("div",{className:le.layout,children:[n.jsxs("section",{className:le.selectionColumn,children:[n.jsx(Lk,{title:"Gilde A",slot:"guildA",selectedGuild:d,excludeId:a,onSelect:k,onClear:S,serverFilter:e,onServerChange:M}),n.jsx(Lk,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:k,onClear:S,serverFilter:e,onServerChange:M})]}),n.jsxs("section",{className:le.comparisonColumn,children:[n.jsxs("div",{className:le.comparisonCard,children:[n.jsxs("div",{className:le.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.kicker,children:"Vergleich"}),n.jsx("h2",{className:le.sectionTitle,children:"Kennzahlen"})]}),F&&n.jsxs("span",{className:le.diffBadge,children:["Delta Mitglieder:"," ",vh.format(d.members-h.members)]})]}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:le.metricGrid,children:[n.jsx(Dk,{label:"Mitglieder",aValue:d.members,bValue:h.members}),n.jsx(Dk,{label:"Durchschnittslevel",aValue:d.avgLevel,bValue:h.avgLevel,isDecimal:!0}),n.jsx(wfe,{guildA:d,guildB:h,countdownA:D,countdownB:A,activePopover:b,onToggle:T})]}),n.jsx(jfe,{guildA:d,guildB:h})]}):n.jsx("div",{className:le.emptyState,children:n.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:le.supportPanels,children:[n.jsx(Sfe,{}),n.jsx(Nfe,{})]})]})]})]}),!t&&n.jsx("div",{className:`${le.sheetOverlay} ${N?le.sheetOpen:""}`,children:n.jsxs("div",{className:le.sheet,role:"dialog","aria-modal":"true",ref:R,children:[n.jsxs("header",{className:le.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:le.clearButton,onClick:w,children:"Schliessen"})]}),n.jsx("div",{className:le.sheetBody,children:n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:le.select,value:e,onChange:I=>M(I.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),t1.map(I=>n.jsx("option",{value:I,children:I},I))]})]})})]})})]})}function Lk({title:t,slot:e,selectedGuild:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=X.useState(""),m=$d(u,300);X.useEffect(()=>{h("")},[s,l]);const{results:g,loading:v}=kfe(m,l,r);return n.jsxs("article",{className:le.selectionCard,children:[n.jsxs("div",{className:le.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.slotLabel,children:t}),n.jsx("p",{className:le.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:le.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:le.slotBody,children:[n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:le.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),t1.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:le.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:le.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:le.resultList,role:"list",children:[v&&n.jsx("div",{className:le.emptyResult,children:"Lade..."}),!v&&g.length===0&&n.jsx("div",{className:le.emptyResult,children:"Keine Gilde gefunden."}),!v&&g.map(b=>n.jsxs("div",{className:le.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:le.resultName,children:b.name}),n.jsxs("p",{className:le.resultMeta,children:[b.server," - ",b.members," Mitglieder"]})]}),n.jsx("button",{type:"button",className:le.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:le.selectedCard,children:[n.jsx("p",{className:le.selectedName,children:s.name}),n.jsxs("p",{className:le.selectedMeta,children:[s.server," - ",s.members," Mitglieder - Durchschnittslevel"," ",s.avgLevel.toFixed(1)]}),n.jsx("p",{className:le.selectedTagline,children:s.tagline})]})]})]})}function Dk({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):vh.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):vh.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:le.metricCard,children:[n.jsx("p",{className:le.metricLabel,children:t}),n.jsxs("div",{className:le.metricValues,children:[n.jsx("span",{"aria-label":"Gilde A",children:i(e)}),n.jsx("span",{className:le.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Gilde B",children:i(s)})]}),n.jsx("p",{className:le.metricDelta,children:l})]})}function wfe({guildA:t,guildB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:le.metricCard,children:[n.jsx("p",{className:le.metricLabel,children:"Freshness"}),n.jsx("div",{className:le.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:le.freshnessItem,children:[n.jsxs("button",{type:"button",className:le.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:fm(l.lastScanAt)})]}),h&&n.jsxs("div",{className:le.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:le.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:u_[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:ma(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[ma(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function jfe({guildA:t,guildB:e}){const s=X.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return n.jsxs("div",{className:le.classCard,children:[n.jsx("p",{className:le.metricLabel,children:"Klassenverteilung"}),n.jsx("div",{className:le.classGrid,children:[t,e].map(r=>n.jsxs("div",{className:le.classColumn,children:[n.jsx("h3",{children:r.name}),n.jsx("div",{className:le.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>n.jsxs("span",{style:{width:`${i.percent}%`},className:le.classSlice,children:[n.jsx("small",{children:i.label}),n.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),n.jsx("ul",{className:le.classLegend,children:s.map(r=>n.jsx("li",{children:r},r))})]})}function Sfe(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return n.jsxs("section",{className:le.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:le.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function Nfe(){return n.jsxs("section",{className:le.infoCardExtended,children:[n.jsx("h3",{children:"Transfers-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:le.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),n.jsx("button",{type:"button",className:le.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function kfe(t,e,s){const[r,i]=X.useState([]),[a,l]=X.useState(!1);return X.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const m=d.toLowerCase(),g=am(xt,"latest"),v=await mn(an(g,Wr("nameFold"),Ri(m),Pi(m+""),hn(15))),b=await mn(an(g,el("nameNgrams","array-contains",m),hn(15))),_=new Set,N=[],C=R=>{var B,$,H,z,W,K,q,se,re,U,Y,ce,oe,me,_e,Pe,te,fe,ae,be,ye;const D=R.data(),y=(B=R.ref.parent)==null?void 0:B.parent,w=y==null?void 0:y.parent;if((w==null?void 0:w.id)!=="guilds")return;const k=(H=($=y==null?void 0:y.id)!=null?$:D.guildIdentifier)!=null?H:R.id;if(!k||_.has(k)||s&&k===s)return;const S=(K=(W=D.name)!=null?W:(z=D.values)==null?void 0:z.Name)!=null?K:"Unbekannte Gilde",T=(re=(se=D.server)!=null?se:(q=D.values)==null?void 0:q.Server)!=null?re:"Unknown";if(e!=="all"&&T!==e)return;const F=(me=(oe=(Y=D.memberCount)!=null?Y:(U=D.values)==null?void 0:U["Guild Member Count"])!=null?oe:(ce=D.values)==null?void 0:ce.GuildMemberCount)!=null?me:0,I=(te=(Pe=D.updatedAt)!=null?Pe:(_e=D.values)==null?void 0:_e.UpdatedAt)!=null?te:D.timestamp?new Date(D.timestamp*1e3).toISOString():new Date().toISOString();_.add(k),N.push({id:k,name:S,tagline:(fe=D.tagline)!=null?fe:"",server:T,members:F,avgLevel:(ye=(be=D.avgLevel)!=null?be:(ae=D.values)==null?void 0:ae.AvgLevel)!=null?ye:0,lastScanAt:I,updatedAt:I,nextUpdateAt:I,freshness:"unknown",classes:[]})};v.forEach(C),b.forEach(C),u||(N.sort((R,D)=>R.name.localeCompare(D.name)),i(N))}catch(m){console.error("[GuildHub CompareGuilds] guild search failed",m),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const Cfe="_page_o27vc_1",Tfe="_header_o27vc_13",Efe="_headerStack_o27vc_25",Afe="_kicker_o27vc_37",Ife="_title_o27vc_53",Rfe="_headerActions_o27vc_65",Pfe="_primaryAction_o27vc_77",Lfe="_secondaryAction_o27vc_79",Dfe="_infoStrip_o27vc_109",Mfe="_infoPill_o27vc_129",Ffe="_freshnessWrapper_o27vc_163",Bfe="_freshnessBadge_o27vc_171",$fe="_popover_o27vc_191",Ofe="_popoverLabel_o27vc_221",Vfe="_filterToolbar_o27vc_231",Ufe="_filterSheetButton_o27vc_241",zfe="_inlineFilters_o27vc_259",Hfe="_searchInput_o27vc_271",Gfe="_select_o27vc_273",Wfe="_chipGroup_o27vc_295",qfe="_chip_o27vc_295",Kfe="_chipActive_o27vc_325",Qfe="_levelRow_o27vc_335",Xfe="_sortControls_o27vc_363",Yfe="_sortLabel_o27vc_375",Jfe="_directionButton_o27vc_385",Zfe="_listBody_o27vc_403",ege="_tableWrapper_o27vc_415",tge="_table_o27vc_415",sge="_cardFooter_o27vc_459",nge="_panel_o27vc_461",rge="_formPanel_o27vc_463",ige="_statusSelect_o27vc_481",age="_stickyColumn_o27vc_515",oge="_rowButton_o27vc_529",lge="_scanBadge_o27vc_545",cge="_cardList_o27vc_561",dge="_card_o27vc_459",uge="_cardHeader_o27vc_593",hge="_cardTitle_o27vc_605",mge="_cardMeta_o27vc_623",pge="_cardNotes_o27vc_635",fge="_emptyState_o27vc_659",gge="_sheetBackdrop_o27vc_675",xge="_sheet_o27vc_675",yge="_sheetHandle_o27vc_717",vge="_sheetBody_o27vc_733",bge="_sheetLabel_o27vc_749",_ge="_sheetActions_o27vc_785",wge="_overlay_o27vc_797",jge="_drawer_o27vc_837",Sge="_modal_o27vc_845",Nge="_panelHeader_o27vc_853",kge="_section_o27vc_867",Cge="_tagRow_o27vc_899",Tge="_historyList_o27vc_913",Ege="_panelFooter_o27vc_943",Age="_formOverlay_o27vc_955",Ige="_formGrid_o27vc_1003",Rge="_warning_o27vc_1015",Pge="_pagination_o27vc_1033",Ee={page:Cfe,header:Tfe,headerStack:Efe,kicker:Afe,title:Ife,headerActions:Rfe,primaryAction:Pfe,secondaryAction:Lfe,infoStrip:Dfe,infoPill:Mfe,freshnessWrapper:Ffe,freshnessBadge:Bfe,popover:$fe,popoverLabel:Ofe,filterToolbar:Vfe,filterSheetButton:Ufe,inlineFilters:zfe,searchInput:Hfe,select:Gfe,chipGroup:Wfe,chip:qfe,chipActive:Kfe,levelRow:Qfe,sortControls:Xfe,sortLabel:Yfe,directionButton:Jfe,listBody:Zfe,tableWrapper:ege,table:tge,cardFooter:sge,panel:nge,formPanel:rge,statusSelect:ige,stickyColumn:age,rowButton:oge,scanBadge:lge,cardList:cge,card:dge,cardHeader:uge,cardTitle:hge,cardMeta:mge,cardNotes:pge,emptyState:fge,sheetBackdrop:gge,sheet:xge,sheetHandle:yge,sheetBody:vge,sheetLabel:bge,sheetActions:_ge,overlay:wge,drawer:jge,modal:Sge,panelHeader:Nge,section:kge,tagRow:Cge,historyList:Tge,panelFooter:Ege,formOverlay:Age,formGrid:Ige,warning:Rge,pagination:Pge},ug=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],hg=["EU-01","EU-02","US-01","US-02","ASIA-01"],h_={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},Mk={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},Uv={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},Lge=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:Fo(2),updatedAt:Fo(3),freshness:"f1",history:[{date:Hr(1),message:"Interview abgeschlossen"},{date:Hr(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:Fo(10),updatedAt:Fo(11),freshness:"f3",history:[{date:Hr(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:Fo(20),updatedAt:Fo(5),freshness:"f4",history:[{date:Hr(4),message:"Probe erfolgreich"},{date:Hr(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:Hr(2),updatedAt:Hr(2),freshness:"f5",history:[{date:Hr(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:Hr(3),updatedAt:Hr(1),freshness:"f6",history:[{date:Hr(1),message:"Bewerbung zurueckgezogen"},{date:Hr(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:Fo(5),updatedAt:Fo(5),freshness:"f2",history:[{date:Hr(1),message:"Profil verifiziert"}]}];function Fk(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function Dge(t,e,s){const r=s.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),l=e.status==="all"||i.status===e.status,d=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&l&&d&&u&&h})}function Mge(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"name":l=i.name.localeCompare(a.name);break;case"level":l=i.level-a.level;break;case"status":l=i.status.localeCompare(a.status);break;case"lastScan":l=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return s==="asc"?l:-l}),r}function Fge(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function Tf(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function Bge(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function $ge(t){return t.length?t.reduce((e,s)=>e?Mk[s.freshness]>Mk[e.freshness]?s:e:s,null):null}function Hr(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function Fo(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function Oge(){var z;const[t,e]=X.useState(Lge),[s,r]=X.useState(Uv),[i,a]=X.useState(Uv),l=$d(s.q,300),d=X.useMemo(()=>{const W=Dge(t,s,l);return Mge(W,s.sort,s.dir)},[t,s,l]),u=X.useMemo(()=>Fge(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),m=Od("(min-width: 768px)"),g=Od("(min-width: 1024px)"),[v,b]=X.useState(!1),[_,N]=X.useState(null),C=(z=t.find(W=>W.id===_))!=null?z:null,R=X.useRef(null);Vd(R,!!C&&!g);const[D,A]=X.useState(null),[y,w]=X.useState(!1),M=X.useRef(null);Vd(M,y);const k=X.useMemo(()=>$ge(t),[t]),S=k&&k.lastScanAt?Bge(k.lastScanAt):"unbekannt",T=W=>{const K=Fk(W);r(K),a(K)},F=(W,K)=>{const q=Fk({...s,[W]:K,page:W==="page"?K:1});T(q)},I=()=>{T(i),b(!1)},B=()=>{T(Uv),b(!1)},$=(W,K)=>{e(q=>q.map(se=>se.id===W?{...se,status:K,updatedAt:new Date().toISOString()}:se))},H=W=>{e(K=>K.some(se=>se.id===W.id)?K.map(se=>se.id===W.id?W:se):[W,...K]),w(!1)};return n.jsxs(Bt,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[n.jsxs("div",{className:Ee.page,children:[n.jsxs("header",{className:Ee.header,children:[n.jsxs("div",{className:Ee.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ee.kicker,children:"Recruiting"}),n.jsx("h1",{className:Ee.title,children:"Waitlist"})]}),n.jsxs("div",{className:Ee.headerActions,children:[n.jsx("button",{type:"button",className:Ee.primaryAction,onClick:()=>{A(null),w(!0)},children:"Neuer Eintrag"}),!m&&n.jsx("button",{type:"button",className:Ee.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>b(!0),children:"Filter"})]})]}),n.jsxs("div",{className:Ee.infoStrip,children:[n.jsx(zv,{label:"Neu",value:d.filter(W=>W.status==="new").length}),n.jsx(zv,{label:"In Review",value:d.filter(W=>W.status==="in_review").length}),n.jsx(zv,{label:"Zugesagt",value:d.filter(W=>W.status==="accepted").length}),k&&n.jsx(Vge,{label:h_[k.freshness],updatedAt:k.lastScanAt,countdown:S})]})]}),n.jsx("section",{className:Ee.filterToolbar,children:m?n.jsx(Uge,{filters:s,onChange:F,onToggleClass:W=>{const K=s.classes.includes(W)?s.classes.filter(q=>q!==W):[...s.classes,W];F("classes",K)},onToggleServer:W=>{const K=s.servers.includes(W)?s.servers.filter(q=>q!==W):[...s.servers,W];F("servers",K)}}):n.jsx("button",{type:"button",className:Ee.filterSheetButton,onClick:()=>b(!0),children:"Filter & Sortierung"})}),n.jsx("section",{className:Ee.listBody,children:m?n.jsx(zge,{items:u,sort:s.sort,dir:s.dir,onSortChange:W=>{const K=s.sort===W&&s.dir==="asc"?"desc":"asc";F("sort",W),F("dir",K)},onSelect:N,onStatusChange:$}):n.jsx(Hge,{items:u,onSelect:N,onStatusChange:$})}),n.jsx(Wge,{page:s.page,totalPages:h,onChange:W=>F("page",W)})]}),v&&n.jsx(Gge,{filters:i,onChange:a,onToggleClass:W=>a(K=>({...K,classes:K.classes.includes(W)?K.classes.filter(q=>q!==W):[...K.classes,W]})),onToggleServer:W=>a(K=>({...K,servers:K.servers.includes(W)?K.servers.filter(q=>q!==W):[...K.servers,W]})),onClose:()=>b(!1),onApply:I,onReset:B}),C&&n.jsx(cI,{ref:R,item:C,mode:g?"drawer":"modal",onClose:()=>N(null),onEdit:()=>{A(C),w(!0),N(null)}}),y&&n.jsx(dI,{ref:M,item:D,entries:t,onClose:()=>w(!1),onSubmit:H})]})}function zv({label:t,value:e}){return n.jsxs("div",{className:Ee.infoPill,children:[n.jsx("span",{children:t}),n.jsx("strong",{children:e})]})}function Vge({label:t,updatedAt:e,countdown:s}){const[r,i]=X.useState(!1);return n.jsxs("div",{className:Ee.freshnessWrapper,children:[n.jsx("button",{type:"button",className:Ee.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&n.jsxs("div",{className:Ee.popover,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ee.popoverLabel,children:"Letzter Scan"}),n.jsx("strong",{children:Tf(e)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ee.popoverLabel,children:"Aktualisiert"}),n.jsx("strong",{children:s})]})]})]})}function Uge({filters:t,onChange:e,onToggleClass:s,onToggleServer:r}){return n.jsxs("div",{className:Ee.inlineFilters,children:[n.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:Ee.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),n.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:Ee.select,value:t.status,onChange:i=>e("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("div",{className:Ee.chipGroup,children:ug.map(i=>{const a=t.classes.includes(i);return n.jsx("button",{type:"button",className:`${Ee.chip} ${a?Ee.chipActive:""}`,onClick:()=>s(i),children:i},i)})}),n.jsx("div",{className:Ee.chipGroup,children:hg.map(i=>{const a=t.servers.includes(i);return n.jsx("button",{type:"button",className:`${Ee.chip} ${a?Ee.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Ee.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),n.jsxs("div",{className:Ee.sortControls,children:[n.jsx("label",{className:Ee.sortLabel,children:"Sortieren"}),n.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[n.jsx("option",{value:"name",children:"Name"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastScan",children:"Letzter Scan"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),n.jsx("button",{type:"button",className:Ee.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function zge({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a}){const l=d=>e===d?s==="asc"?" ":" ":"";return t.length?n.jsx("div",{className:Ee.tableWrapper,children:n.jsxs("table",{className:Ee.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Ee.stickyColumn,onClick:()=>r("name"),children:["Name",l("name")]}),n.jsx("th",{children:"Klasse"}),n.jsxs("th",{onClick:()=>r("level"),children:["Level",l("level")]}),n.jsx("th",{children:"Server"}),n.jsxs("th",{onClick:()=>r("status"),children:["Status",l("status")]}),n.jsx("th",{children:"Notizen"}),n.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",l("lastScan")]})]})}),n.jsx("tbody",{children:t.map(d=>n.jsxs("tr",{children:[n.jsx("td",{className:Ee.stickyColumn,children:n.jsx("button",{type:"button",className:Ee.rowButton,onClick:()=>i(d.id),children:d.name})}),n.jsx("td",{children:d.classRole}),n.jsx("td",{children:d.level}),n.jsx("td",{children:d.server}),n.jsx("td",{children:n.jsxs("select",{className:Ee.statusSelect,name:`waitlistStatus-${d.id}`,"aria-label":`Status fuer ${d.name}`,value:d.status,onChange:u=>a(d.id,u.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),n.jsxs("td",{children:[d.notes.slice(0,64),"..."]}),n.jsx("td",{children:n.jsx("span",{className:Ee.scanBadge,children:h_[d.freshness]})})]},d.id))})]})}):n.jsx(lI,{})}function Hge({items:t,onSelect:e,onStatusChange:s}){return t.length?n.jsx("div",{className:Ee.cardList,children:t.map(r=>n.jsxs("article",{className:Ee.card,children:[n.jsxs("div",{className:Ee.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Ee.cardTitle,onClick:()=>e(r.id),children:r.name}),n.jsxs("p",{className:Ee.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),n.jsx("span",{className:Ee.scanBadge,children:h_[r.freshness]})]}),n.jsxs("p",{className:Ee.cardNotes,children:[r.notes.slice(0,160),"..."]}),n.jsxs("div",{className:Ee.cardFooter,children:[n.jsxs("select",{className:Ee.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>s(r.id,i.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):n.jsx(lI,{})}function lI(){return n.jsx("div",{className:Ee.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function Gge({filters:t,onChange:e,onToggleClass:s,onToggleServer:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Ee.sheetBackdrop,onClick:i,children:n.jsxs("div",{className:Ee.sheet,onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Ee.sheetHandle}),n.jsxs("div",{className:Ee.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Ee.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:d=>e(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Ee.sheetLabel,children:["Status",n.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:d=>e(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),n.jsxs("div",{className:Ee.sheetLabel,children:["Klassen",n.jsx("div",{className:Ee.chipGroup,children:ug.map(d=>{const u=t.classes.includes(d);return n.jsx("button",{type:"button",className:`${Ee.chip} ${u?Ee.chipActive:""}`,"aria-label":`Klasse ${d}`,onClick:()=>s(d),children:d},d)})})]}),n.jsxs("div",{className:Ee.sheetLabel,children:["Server",n.jsx("div",{className:Ee.chipGroup,children:hg.map(d=>{const u=t.servers.includes(d);return n.jsx("button",{type:"button",className:`${Ee.chip} ${u?Ee.chipActive:""}`,"aria-label":`Server ${d}`,onClick:()=>r(d),children:d},d)})})]}),n.jsxs("div",{className:Ee.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:d=>e(u=>({...u,lvMin:Number(d.target.value)}))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:d=>e(u=>({...u,lvMax:Number(d.target.value)}))})]})]})]}),n.jsxs("div",{className:Ee.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Ee.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const cI=X.forwardRef(({item:t,mode:e,onClose:s,onEdit:r},i)=>n.jsx("div",{className:Ee.overlay,children:n.jsxs("div",{ref:i,className:`${Ee.panel} ${e==="drawer"?Ee.drawer:Ee.modal}`,children:[n.jsxs("header",{className:Ee.panelHeader,children:[n.jsxs("div",{children:[n.jsxs("p",{className:Ee.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),n.jsx("h2",{children:t.name})]}),n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("section",{className:Ee.section,children:[n.jsx("h3",{children:"Kontakt"}),n.jsx("p",{children:t.contact}),n.jsxs("p",{children:["Quelle: ",t.source]})]}),n.jsxs("section",{className:Ee.section,children:[n.jsx("h3",{children:"Notizen"}),n.jsx("p",{children:t.notes})]}),n.jsxs("section",{className:Ee.section,children:[n.jsx("h3",{children:"Tags"}),n.jsx("div",{className:Ee.tagRow,children:t.tags.length?t.tags.map(a=>n.jsx("span",{children:a},a)):n.jsx("span",{children:"Keine"})})]}),n.jsxs("section",{className:Ee.section,children:[n.jsx("h3",{children:"Historie"}),n.jsx("ul",{className:Ee.historyList,children:t.history.map(a=>n.jsxs("li",{children:[n.jsx("span",{children:Tf(a.date)}),n.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),n.jsxs("section",{className:Ee.section,children:[n.jsx("h3",{children:"Scan-Infos"}),n.jsxs("p",{children:["Letzter Scan: ",Tf(t.lastScanAt)]}),n.jsxs("p",{children:["Aktualisiert: ",Tf(t.updatedAt)]})]}),n.jsxs("footer",{className:Ee.panelFooter,children:[n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Ee.primaryAction,onClick:s,children:"Schliessen"})]})]})}));cI.displayName="DetailPanel";const dI=X.forwardRef(({item:t,entries:e,onClose:s,onSubmit:r},i)=>{const[a,l]=X.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:ug[0],level:1,server:hg[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});X.useEffect(()=>{t&&l(t)},[JSON.stringify(t)]);const d=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return n.jsx("div",{className:Ee.formOverlay,children:n.jsxs("form",{ref:i,className:Ee.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Ee.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ee.cardMeta,children:t?"Bearbeiten":"Neu"}),n.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:s,children:"Schliessen"})]}),u&&n.jsx("div",{className:Ee.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),n.jsxs("label",{className:Ee.sheetLabel,children:["Name",n.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>l(m=>({...m,name:h.target.value}))})]}),n.jsxs("div",{className:Ee.formGrid,children:[n.jsxs("label",{children:["Klasse",n.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>l(m=>({...m,classRole:h.target.value})),children:ug.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Level",n.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>l(m=>({...m,level:Number(h.target.value)}))})]}),n.jsxs("label",{children:["Server",n.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>l(m=>({...m,server:h.target.value})),children:hg.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>l(m=>({...m,status:h.target.value})),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),n.jsxs("label",{className:Ee.sheetLabel,children:["Kontakt",n.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>l(m=>({...m,contact:h.target.value}))})]}),n.jsxs("label",{className:Ee.sheetLabel,children:["Quelle",n.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>l(m=>({...m,source:h.target.value}))})]}),n.jsxs("label",{className:Ee.sheetLabel,children:["Notizen",n.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>l(m=>({...m,notes:h.target.value})),rows:4})]}),n.jsxs("footer",{className:Ee.panelFooter,children:[n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Ee.primaryAction,children:"Speichern"})]})]})})});dI.displayName="WaitlistForm";function Wge({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Ee.pagination,children:[n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Ee.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const qge=["tab","sub","sub2","q","sort","dir","page","pageSize"];function Jd(t=[]){const[e,s]=al(),r=X.useMemo(()=>[...t].sort().join("|"),[t]),i=X.useMemo(()=>{const m=new Set([...qge]);return t.forEach(g=>m.add(g)),Array.from(m)},[r]),a=X.useMemo(()=>{const m={};return i.forEach(g=>{const v=e.get(g);v!==null&&(m[g]=v)}),m},[e,i]),l=X.useCallback((m,g)=>{var b;const v=new URLSearchParams(e);Object.entries(m).forEach(([_,N])=>{N==null||N===""?v.delete(_):v.set(_,String(N))}),s(v,{replace:(b=g==null?void 0:g.replace)!=null?b:!1})},[e,s]),d=X.useCallback(m=>{const g=new URLSearchParams(e);(m&&m.length>0?m:i).forEach(b=>g.delete(b)),s(g,{replace:!0})},[e,s,i]),u=X.useCallback((m,g="")=>{var v;return(v=a[m])!=null?v:g},[a]),h=X.useCallback((m,g=0)=>{const v=a[m],b=v?Number(v):NaN;return Number.isFinite(b)?b:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:l,resetParams:d}}function Kge(){return Jd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Activity"})})}function Qge(){return Jd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Imports"})})}function Xge(){return Jd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Announcements"})})}function Yge(){return Jd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Events"})})}function Jge(){return Jd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Roles"})})}function Zge(){return Jd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Settings"})})}const exe=[{icon:n.jsx(Ng,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:n.jsx(G6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:n.jsx(D6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],txe=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],sxe=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function nxe(){return n.jsx(Bt,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(hs,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:n.jsx(rxe,{}),right:n.jsx(ixe,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:exe.map(t=>n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),n.jsx(hs,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),n.jsx("ul",{className:"space-y-3",children:txe.map(t=>n.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[n.jsx(j1,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),n.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),n.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function rxe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),n.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[n.jsx(hs,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),n.jsx(hs,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),n.jsx(hs,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),n.jsx(hs,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),n.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[n.jsx("li",{children:" Pager rotation: Ops Team"}),n.jsx("li",{children:" Slack channel: #sf-alerts"}),n.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function ixe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),n.jsx("ul",{className:"mt-3 space-y-2",children:sxe.map(t=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),n.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),n.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const axe=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function oxe(){return n.jsx(Bt,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:n.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Time"}),n.jsx("span",{children:"Service"}),n.jsx("span",{className:"text-right",children:"Severity"})]}),n.jsx("ul",{children:axe.map(t=>n.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),n.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:lxe(t.severity)},children:t.severity})]},t.id))})]})})}function lxe(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const Fi={background:"#152A42",borderColor:"#2B4C73"},fd={background:"#1A2F4A",borderColor:"#2B4C73"},Hv=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function cxe(){const{data:t,loading:e,refreshing:s,error:r,refresh:i}=mxe(),a=X.useMemo(()=>[{label:"Total uploads",value:di(t.metrics.totalUploads),hint:`${di(t.metrics.last24h)} in the last 24h`,icon:n.jsx(s6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:Gh(t.metrics.successRate),hint:`${di(t.metrics.failed)} failed`,icon:n.jsx(HL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?Gv(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${Gv(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:n.jsx(e6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:Bk(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:n.jsx(a6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:di(t.metrics.uniqueUploaders),hint:`${di(t.metrics.uniqueGuilds)} guilds represented`,icon:n.jsx(Ng,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:di(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:n.jsx(ZC,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return n.jsx(Bt,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:n.jsx(dxe,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:s}),right:n.jsx(uxe,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(l=>n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[l.icon,l.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:l.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:l.hint})]},l.label))}),n.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:fd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:gd(l.status)},"aria-hidden":"true"}),m_(l.status)]}),n.jsx("span",{className:"font-semibold",children:di(l.count)})]}),n.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:n.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(l.share*100,100).toFixed(1)}%`,backgroundColor:gd(l.status)}})}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[Gh(l.share)," of window"]})]},l.status))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:fd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-semibold",children:l.hourLabel}),n.jsxs("span",{children:[di(l.total)," uploads"]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:gd("success")},"aria-hidden":"true"}),"Success ",di(l.success)]}),n.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:gd("failed")},"aria-hidden":"true"}),"Failed ",di(l.failed)]})]})]},l.hourLabel))})]})]}),n.jsxs("section",{className:"rounded-2xl border",style:Fi,children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Ko,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?n.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[n.jsx(j1,{className:"h-3.5 w-3.5"}),r]}):n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(ML,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),n.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Status"}),n.jsx("span",{children:"Uploader"}),n.jsx("span",{children:"Guild"}),n.jsx("span",{className:"text-right",children:"Processing"}),n.jsx("span",{className:"text-right",children:"File size"})]}),n.jsx("ul",{children:t.recentUploads.map(l=>{var d,u,h,m;return n.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:l.id}),n.jsx("span",{children:n.jsx(hxe,{status:l.status})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(d=l.uploaderName)!=null?d:l.uploaderId)!=null?u:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.uploadedAt?l.uploadedAt.toLocaleString():"Timestamp missing"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(m=(h=l.guildName)!=null?h:l.guildId)!=null?m:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.errorCode?`Issue: ${l.errorCode}`:"Healthy"})]}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.processingMs?Gv(l.processingMs):"Pending"}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.fileSizeBytes?Bk(l.fileSizeBytes):""})]},l.id)})})]})]})})}function dxe({breakdown:t,onRefresh:e,loading:s,refreshing:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[n.jsx("span",{children:"Controls"}),n.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[n.jsx(Sg,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),n.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>n.jsxs("li",{className:"flex items-center justify-between gap-2",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:gd(i.status)},"aria-hidden":"true"}),m_(i.status)]}),n.jsx("span",{children:Gh(i.share)})]},i.status))}),s&&n.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[n.jsx(Ko,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(hf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(hf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(hf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function uxe({issues:t,failures:e,uploaders:s,guilds:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(ZC,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),n.jsx("span",{children:"Top failure signatures"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:fd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{children:i.code}),n.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(j1,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("span",{children:"Latest failed uploads"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:fd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),n.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(Ng,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Uploader leaderboard"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:s.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:fd,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",Gh(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:di(i.count)})]},i.id))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Fi,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(c6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Guild spotlight"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:fd,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",Gh(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:di(i.count)})]},i.id))})]})]})}function hxe({status:t}){const e=gd(t);return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[n.jsx(hf,{className:"h-3 w-3","aria-hidden":"true"}),m_(t)]})}function mxe(){const[t,e]=X.useState(Hv),[s,r]=X.useState(!0),[i,a]=X.useState(!1),[l,d]=X.useState(null),u=X.useCallback(async(m=!1)=>{m?a(!0):r(!0);try{const g=pc(xt,"scanUploads"),v=an(g,Wr("uploadedAt","desc"),hn(100)),_=(await mn(v)).docs.map(N=>pxe(N.id,N.data()));_.length>0?(e(_),d(null)):(e(Hv),d("No uploads in window  showing fallback snapshot"))}catch(g){console.error("[ScansUploaded] Failed to load Firestore data",g),d("Live data unavailable  fallback snapshot active"),e(Hv)}finally{m?a(!1):r(!1)}},[]);X.useEffect(()=>{u(!1)},[u]);const h=X.useMemo(()=>gxe(t),[t]);return{loading:s,refreshing:i,error:l,data:h,refresh:X.useCallback(()=>u(!0),[u])}}function pxe(t,e){const s=fxe(e.status);return{id:t,status:s,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof Hs?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function fxe(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function gxe(t){var T,F;const e=new Map,s=new Map,r=new Map,i=new Map,a=[];let l=0,d=0;const h=Date.now()-1440*60*1e3,m=new Map;t.forEach(I=>{var z,W,K,q,se,re,U,Y,ce,oe,me,_e,Pe,te,fe,ae,be;const B=(z=e.get(I.status))!=null?z:0;if(e.set(I.status,B+1),I.uploadedAt&&I.uploadedAt.getTime()>=h&&(d+=1),I.processingMs!=null&&a.push(I.processingMs),I.fileSizeBytes!=null&&(l+=I.fileSizeBytes),I.status==="failed"&&I.errorCode){const ye=(W=s.get(I.errorCode))!=null?W:{count:0,lastSeen:null};s.set(I.errorCode,{count:ye.count+1,lastSeen:!ye.lastSeen||I.uploadedAt&&ye.lastSeen<I.uploadedAt?I.uploadedAt:ye.lastSeen})}const $=(q=(K=I.uploaderId)!=null?K:I.uploaderName)!=null?q:`anon-${I.id}`,H=(U=r.get($))!=null?U:{name:(re=(se=I.uploaderName)!=null?se:I.uploaderId)!=null?re:"Unknown",success:0,total:0};if(r.set($,{name:(ce=(Y=I.uploaderName)!=null?Y:I.uploaderId)!=null?ce:"Unknown",success:H.success+(I.status==="success"?1:0),total:H.total+1}),I.guildId||I.guildName){const ye=(me=(oe=I.guildId)!=null?oe:I.guildName)!=null?me:`guild-${I.id}`,Ie=(te=i.get(ye))!=null?te:{name:(Pe=(_e=I.guildName)!=null?_e:I.guildId)!=null?Pe:"Unknown",success:0,total:0};i.set(ye,{name:(ae=(fe=I.guildName)!=null?fe:I.guildId)!=null?ae:"Unknown",success:Ie.success+(I.status==="success"?1:0),total:Ie.total+1})}if(I.uploadedAt){const ye=new Date(I.uploadedAt);ye.setMinutes(0,0,0);const Ie=ye.toISOString(),$e=(be=m.get(Ie))!=null?be:{hourLabel:yxe(ye),timestamp:ye,total:0,success:0,failed:0};m.set(Ie,{hourLabel:$e.hourLabel,timestamp:$e.timestamp,total:$e.total+1,success:$e.success+(I.status==="success"?1:0),failed:$e.failed+(I.status==="failed"?1:0)})}});const g=t.length,v=(T=e.get("success"))!=null?T:0,b=(F=e.get("failed"))!=null?F:0,_=a.length?a.reduce((I,B)=>I+B,0)/a.length:null,N=a.length?xxe(a,95):null,C=r.size,R=i.size,D=Array.from(e.entries()).map(([I,B])=>({status:I,count:B,share:g?B/g:0})).sort((I,B)=>B.count-I.count),A=Array.from(m.values()).sort((I,B)=>B.timestamp.getTime()-I.timestamp.getTime()).slice(0,12),y=Array.from(s.entries()).map(([I,B])=>({code:I,...B})).sort((I,B)=>B.count-I.count).slice(0,6),w=[...t].sort((I,B)=>{var $,H,z,W;return((H=($=B.uploadedAt)==null?void 0:$.getTime())!=null?H:0)-((W=(z=I.uploadedAt)==null?void 0:z.getTime())!=null?W:0)}).slice(0,12),M=t.filter(I=>I.status==="failed").sort((I,B)=>{var $,H,z,W;return((H=($=B.uploadedAt)==null?void 0:$.getTime())!=null?H:0)-((W=(z=I.uploadedAt)==null?void 0:z.getTime())!=null?W:0)}),k=Array.from(r.entries()).map(([I,B])=>({id:I,name:B.name,count:B.total,successRate:B.total?B.success/B.total:0})).sort((I,B)=>B.count-I.count).slice(0,5),S=Array.from(i.entries()).map(([I,B])=>({id:I,name:B.name,count:B.total,successRate:B.total?B.success/B.total:0})).sort((I,B)=>B.count-I.count).slice(0,5);return{metrics:{totalUploads:g,last24h:d,successRate:g?v/g:0,failed:b,avgProcessingMs:_,p95ProcessingMs:N,uniqueUploaders:C,uniqueGuilds:R,totalFileSizeBytes:l},statusBreakdown:D,timeline:A,issues:y,recentFailures:M,recentUploads:w,topUploaders:k,topGuilds:S}}function xxe(t,e){const s=[...t].sort((d,u)=>d-u);if(s.length===0)return 0;const r=e/100*(s.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return s[i];const l=r-i;return s[i]*(1-l)+s[a]*l}function di(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function Gh(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function Gv(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function Bk(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let s=t,r=0;for(;s>=1024&&r<e.length-1;)s/=1024,r+=1;return`${s.toFixed(s>=10?0:1)} ${e[r]}`}function gd(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function m_(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function yxe(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function Wv({label:t,value:e,hint:s}){return n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),n.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),s&&n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:s})]})}function vxe(){var d,u,h,m,g,v;const{snapshot:t,error:e,loading:s,refresh:r}=XA(),i=(d=t==null?void 0:t.warnings)!=null?d:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,l=(m=t==null?void 0:t.stats)!=null?m:{};return n.jsx(Bt,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:s,children:s?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(Wv,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),n.jsx(Wv,{label:"Creators tracked",value:a?a.toString():"0"}),n.jsx(Wv,{label:"API lookups",value:`${(g=l.youtubeLookups)!=null?g:0}  ${(v=l.twitchLookups)!=null?v:0}`,hint:"YouTube  Twitch"})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?n.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):n.jsx("ul",{className:"space-y-2",children:i.map((b,_)=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[b.creator,"  ",b.scope]}),n.jsx("div",{className:"text-xs text-[#B0C4D9]",children:b.message}),b.source&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:b.source})]},`${b.scope}-${_}`))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),n.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{children:["Add the following environment variables (e.g. in ",n.jsx("code",{children:".env.local"}),"):",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),n.jsxs("li",{children:["Execute the sync script:",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),n.jsxs("li",{children:["Commit/deploy the generated ",n.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&n.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const lx=`${pa}/admin/users`,bxe=25,p_=()=>{if(!lx)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},$k=t=>typeof t!="number"?null:Hs.fromMillis(t),f_=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:$k(t.createdAt),lastLoginAt:$k(t.lastLoginAt),status:t.status,notes:t.notes}},_xe=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:bxe)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const s=e.toString();return s?`?${s}`:""},g_=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function Ok(t={}){var r;p_();const e=_xe(t),s=`${lx}${e}`;try{const i=await fetch(s,{credentials:"include"});if(!i.ok)throw await g_(i);const a=await i.json();return{users:a.users.map(f_),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function wxe(t){p_();const e=await fetch(`${lx}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await g_(e);const s=await e.json();return f_(s.user)}async function jxe(t,e){p_();const s=await fetch(`${lx}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw await g_(s);const r=await s.json();return f_(r.user)}const uI=`${pa}/admin/audit-events`,Sxe=50,Nxe=()=>{if(!uI)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},kxe=t=>typeof t!="number"?null:Hs.fromMillis(t),Cxe=t=>{var e,s;return{id:t.id,createdAt:kxe(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(s=t.changes)!=null?s:{},context:t.context}},Txe=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:Sxe)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const s=e.toString();return s?`?${s}`:""},Exe=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function s1(t={}){var i;Nxe();const e=`${uI}${Txe(t)}`,s=await fetch(e,{credentials:"include"});if(!s.ok)throw await Exe(s);const r=await s.json();return{events:r.events.map(Cxe),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function Axe(t,e=10){return s1({targetUserId:t,limit:e})}const Ixe=20,Rxe=50,bh={borderColor:"#2B4C73",background:"#152A42"},hI={background:"#1A2F4A"};function Pxe(){var d;const{status:t,user:e}=ao(),s=(d=e==null?void 0:e.roles)!=null?d:[],r=s.includes("admin"),i=r||s.includes("mod"),[a,l]=E.useState("users");return t==="loading"||t==="idle"?n.jsx(Bt,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[n.jsx(Ko,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?n.jsx(Bt,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:n.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[n.jsx(uc,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:n.jsx(Lxe,{activeTab:a,onChange:l}),children:a==="users"?n.jsx(Dxe,{isAdmin:r}):n.jsx(Mxe,{isAdmin:r,onSelectUser:u=>{l("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):n.jsx(Bt,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[n.jsx(eT,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),n.jsxs("p",{children:["You need at least the ",n.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function Lxe({activeTab:t,onChange:e}){const s=[{key:"users",label:"Users",icon:n.jsx(Ng,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:n.jsx(R6,{className:"h-4 w-4"})}];return n.jsx("div",{className:"flex gap-2",children:s.map(r=>n.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function Dxe({isAdmin:t}){const[e,s]=E.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=E.useState(""),a=r1(r,350);E.useEffect(()=>{s(ae=>ae.search===a?ae:{...ae,search:a})},[a]);const[l,d]=E.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=E.useState(0),m=E.useMemo(()=>({pageSize:Ixe,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);E.useEffect(()=>{let ae=!1;return d(be=>({...be,loading:!0,error:null})),Ok(m).then(be=>{ae||d({items:be.users,cursor:be.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(be=>{ae||d(ye=>({...ye,loading:!1,loadingMore:!1,error:be instanceof Error?be.message:"Failed to load users"}))}),()=>{ae=!0}},[m,u]);const g=()=>h(ae=>ae+1),v=async()=>{if(l.cursor){d(ae=>({...ae,loadingMore:!0,error:null}));try{const ae=await Ok({...m,cursor:l.cursor});d(be=>({items:[...be.items,...ae.users],cursor:ae.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(ae){d(be=>{var ye;return{...be,loadingMore:!1,error:(ye=ae==null?void 0:ae.message)!=null?ye:"Failed to load additional users"}})}}},[b,_]=E.useState(null),[N,C]=E.useState(null),[R,D]=E.useState(!1),[A,y]=E.useState(null),[w,M]=E.useState(""),[k,S]=E.useState(!1),[T,F]=E.useState(null),[I,B]=E.useState(!1),[$,H]=E.useState(!1),[z,W]=E.useState([]),[K,q]=E.useState(!1),[se,re]=E.useState(null),U=E.useRef(null);E.useEffect(()=>{U.current=b},[b]);const Y=E.useRef(!1);E.useEffect(()=>{Y.current=k},[k]);const ce=E.useCallback(async ae=>{var be;q(!0),re(null);try{const ye=await Axe(ae,12);U.current===ae&&W(ye.events)}catch(ye){U.current===ae&&re((be=ye==null?void 0:ye.message)!=null?be:"Failed to load audit history")}finally{U.current===ae&&q(!1)}},[]);E.useEffect(()=>{var Ie;if(!b){C(null),M(""),S(!1),W([]),re(null),H(!1);return}const ae=b,be=l.items.find($e=>$e.id===ae);be?(C(be),M((Ie=be.notes)!=null?Ie:"")):(C(null),M("")),S(!1),D(!0),y(null);let ye=!1;return wxe(ae).then($e=>{var Ge;ye||U.current!==ae||(C($e),M((Ge=$e.notes)!=null?Ge:""),S(!1),D(!1))}).catch($e=>{var Ge;ye||U.current!==ae||(D(!1),y((Ge=$e==null?void 0:$e.message)!=null?Ge:"Failed to load user"))}),ce(ae),()=>{ye=!0}},[b,l.items,ce]),E.useEffect(()=>{var be;if(!b)return;const ae=l.items.find(ye=>ye.id===b);ae&&(C(ye=>ye&&ye.id===ae.id?{...ye,...ae}:ae),Y.current||M((be=ae.notes)!=null?be:""))},[l.items,b]);const oe=E.useCallback(ae=>{d(be=>({...be,items:be.items.map(ye=>ye.id===ae.id?ae:ye)}))},[]),me=E.useCallback(async ae=>{var be,ye;if(N){B(!0),F(null);try{const Ie=await jxe(N.id,ae);C(Ie),oe(Ie),"notes"in ae&&(S(!1),M((be=Ie.notes)!=null?be:"")),await ce(Ie.id)}catch(Ie){F((ye=Ie==null?void 0:Ie.message)!=null?ye:"Failed to update user")}finally{B(!1)}}},[N,ce,oe]),_e=ae=>{if(!N||!t||ae==="user")return;const be=new Set(N.roles);be.has(ae)?be.delete(ae):be.add(ae),be.add("user"),me({roles:Array.from(be)})},Pe=ae=>{!N||!t||n1(N.status)===ae||ae==="banned"&&!window.confirm(`Ban ${_h(N)}? They will lose access to the control panel.`)||me({status:ae})},te=ae=>{M(ae),S(!0)},fe=()=>{!N||!t||!k||me({notes:w.trim().length?w:null})};return E.useEffect(()=>{if(typeof window=="undefined")return;const ae=be=>{const ye=be.detail;ye!=null&&ye.userId&&_(ye.userId)};return window.addEventListener("sf-admin-open-user",ae),()=>{window.removeEventListener("sf-admin-open-user",ae)}},[]),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:bh,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(u0,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:ae=>i(ae.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(Ef,{label:"Role",value:e.role,onChange:ae=>s(be=>({...be,role:ae})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),n.jsx(Ef,{label:"Status",value:e.status,onChange:ae=>s(be=>({...be,status:ae})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),n.jsx(Ef,{label:"Provider",value:e.provider,onChange:ae=>s(be=>({...be,provider:ae})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(Sg,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("div",{className:"rounded-2xl border",style:bh,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#B0C4D9]",children:[l.items.length," users ",e.search?"filtered":""]}),l.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(Ko,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:hI,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"User ID"}),n.jsx("th",{className:"px-4 py-2",children:"Display name"}),n.jsx("th",{className:"px-4 py-2",children:"Role"}),n.jsx("th",{className:"px-4 py-2",children:"Status"}),n.jsx("th",{className:"px-4 py-2",children:"Providers"}),n.jsx("th",{className:"px-4 py-2",children:"Created"}),n.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),n.jsx("tbody",{children:l.items.map(ae=>{var ye,Ie,$e;const be=ae.id===b;return n.jsxs("tr",{onClick:()=>_(ae.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${be?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:ae.userId}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(pI,{url:xI(ae),name:_h(ae)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm",children:_h(ae)}),(ye=ae.profile)!=null&&ye.displayName&&ae.profile.displayName!==ae.displayName?n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:ae.profile.displayName}):null]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(fI,{role:gI(ae.roles)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(Bxe,{status:n1(ae.status)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(mg,{provider:"discord",active:!!((Ie=ae.providers)!=null&&Ie.discord)}),n.jsx(mg,{provider:"google",active:!!(($e=ae.providers)!=null&&$e.google)})]})}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:jd(ae.createdAt)}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:jd(ae.lastLoginAt)})]},ae.id)})})]}),!l.loading&&!l.items.length&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),l.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(ih,{className:"h-3.5 w-3.5"}),l.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:l.cursor?"More users available":"End of list"}),n.jsx("button",{type:"button",onClick:v,disabled:!l.cursor||l.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:l.loadingMore?"Loading...":"Load more"})]})]}),n.jsx("aside",{className:"rounded-2xl border p-3",style:bh,children:N?n.jsx(Fxe,{user:N,isAdmin:t,detailLoading:R,detailError:A,notesValue:w,notesDirty:k,onNotesChange:te,onNotesSave:fe,onRoleToggle:_e,onStatusChange:Pe,actionError:T,actionPending:I,auditEntries:z,auditLoading:K,auditError:se,onRefreshAudit:()=>N&&ce(N.id),showRawJson:$,toggleRawJson:()=>H(ae=>!ae)}):n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[n.jsx(JL,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function Mxe({isAdmin:t,onSelectUser:e}){const[s,r]=E.useState({actor:"",target:"",action:"all"}),[i,a]=E.useState(""),[l,d]=E.useState(""),u=r1(i,350),h=r1(l,350);E.useEffect(()=>{r(R=>R.actor===u&&R.target===h?R:{...R,actor:u,target:h})},[u,h]);const[m,g]=E.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[v,b]=E.useState(0),_=E.useMemo(()=>{const R=s.action==="all"?void 0:s.action,D=s.actor.includes(":")?s.actor:void 0,A=s.target.includes(":")?s.target:void 0;return{limit:Rxe,action:R,actorUserId:D,targetUserId:A}},[s]);E.useEffect(()=>{let R=!1;return g(D=>({...D,loading:!0,error:null})),s1(_).then(D=>{R||g({items:D.events,cursor:D.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(D=>{R||g(A=>{var y;return{...A,loading:!1,loadingMore:!1,error:(y=D==null?void 0:D.message)!=null?y:"Failed to load audit log"}})}),()=>{R=!0}},[_,v]);const N=async()=>{if(m.cursor){g(R=>({...R,loadingMore:!0,error:null}));try{const R=await s1({..._,cursor:m.cursor});g(D=>({items:[...D.items,...R.events],cursor:R.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(R){g(D=>{var A;return{...D,loadingMore:!1,error:(A=R==null?void 0:R.message)!=null?A:"Failed to load more events"}})}}},C=E.useMemo(()=>{const R=s.actor.trim().toLowerCase(),D=s.target.trim().toLowerCase();return m.items.filter(A=>{var M;const y=!R||A.actorUserId.toLowerCase().includes(R)||((M=A.actorDisplayName)!=null?M:"").toLowerCase().includes(R),w=!D||A.targetUserId.toLowerCase().includes(D);return y&&w})},[m.items,s.actor,s.target]);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:bh,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(u0,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:R=>a(R.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(u0,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Target user id",value:l,onChange:R=>d(R.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(Ef,{label:"Action",value:s.action,onChange:R=>r(D=>({...D,action:R})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:()=>b(R=>R+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(Sg,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"rounded-2xl border",style:bh,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#8AA5C4]",children:[C.length," events"]}),m.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(Ko,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:hI,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"Time"}),n.jsx("th",{className:"px-4 py-2",children:"Actor"}),n.jsx("th",{className:"px-4 py-2",children:"Target User"}),n.jsx("th",{className:"px-4 py-2",children:"Action"}),n.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),n.jsx("tbody",{children:C.map(R=>{var D;return n.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:jd(R.createdAt)}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("div",{className:"text-white",children:(D=R.actorDisplayName)!=null?D:"N/A"}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:R.actorUserId})]}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(R.targetUserId),children:R.targetUserId})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(mI,{action:R.action})}),n.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:R.summary})]},R.id)})})]}),!C.length&&!m.loading&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),m.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(ih,{className:"h-3.5 w-3.5"}),m.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:m.cursor?"More events available":"End of audit log"}),n.jsx("button",{type:"button",onClick:N,disabled:!m.cursor||m.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:m.loadingMore?"Loading...":"Load more"})]})]}),!t&&n.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function Fxe({user:t,isAdmin:e,detailLoading:s,detailError:r,notesValue:i,notesDirty:a,onNotesChange:l,onNotesSave:d,onRoleToggle:u,onStatusChange:h,actionError:m,actionPending:g,auditEntries:v,auditLoading:b,auditError:_,onRefreshAudit:N,showRawJson:C,toggleRawJson:R}){var A,y;const D=gI(t.roles);return n.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[s&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[n.jsx(Ko,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[n.jsx(ih,{className:"h-3.5 w-3.5"}),r]}),n.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(pI,{url:xI(t),name:_h(t),size:56}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"truncate text-base text-white",children:_h(t)}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),n.jsxs("div",{className:"mt-1 flex gap-1",children:[n.jsx(fI,{role:D}),n.jsx(mg,{provider:"discord",active:!!((A=t.providers)!=null&&A.discord)}),n.jsx(mg,{provider:"google",active:!!((y=t.providers)!=null&&y.google)})]})]})]})}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(w=>n.jsx("button",{type:"button",onClick:()=>u(w),disabled:!e||w==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(w)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:w},w))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),n.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(w=>n.jsx("button",{type:"button",onClick:()=>h(w),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${n1(t.status)===w?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:w},w))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&n.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),n.jsx("textarea",{value:i,onChange:w=>l(w.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ko,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&n.jsx("button",{type:"button",onClick:d,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),m&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(ih,{className:"h-3 w-3"}),m]})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),n.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsx(Sg,{className:"h-3 w-3"}),"Refresh"]})]}),b&&n.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[n.jsx(Ko,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),_&&n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(ih,{className:"h-3 w-3"}),_]}),!b&&!v.length&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),n.jsx("ul",{className:"space-y-2",children:v.map(w=>{var M;return n.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[n.jsx("span",{children:jd(w.createdAt)}),n.jsx(mI,{action:w.action})]}),n.jsx("div",{className:"mt-1 text-white",children:(M=w.actorDisplayName)!=null?M:w.actorUserId}),n.jsx("div",{className:"text-[#C8D6EC]",children:w.summary})]},w.id)})})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),n.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[n.jsx(Q6,{className:"h-3 w-3"}),C?"Hide raw JSON":"Show raw JSON"]})]}),n.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[n.jsx(af,{label:"Created",value:jd(t.createdAt)}),n.jsx(af,{label:"Last login",value:jd(t.lastLoginAt)}),n.jsx(af,{label:"Primary provider",value:t.primaryProvider}),n.jsx(af,{label:"Roles",value:t.roles.join(", ")})]}),C&&n.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function mI({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return n.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function af({label:t,value:e}){return e?n.jsxs("div",{className:"flex justify-between gap-2",children:[n.jsx("span",{className:"text-[#6E86A6]",children:t}),n.jsx("span",{className:"text-white",children:e})]}):null}function Ef({label:t,value:e,options:s,onChange:r}){return n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[#8AA5C4]",children:t}),n.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:s.map(i=>n.jsx("option",{value:i.value,children:i.label},i.value))})]})}function pI({url:t,name:e,size:s=32}){return t?n.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:s,height:s,borderColor:"#2B4C73"}}):n.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:s,height:s,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function fI({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return n.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function Bxe({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:n.jsx(QL,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:n.jsx(uc,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:n.jsx(BL,{className:"h-3 w-3"})}},{label:s,color:r,icon:i}=e[t];return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,s]})}function mg({provider:t,active:e}){const s=t==="discord"?"D":"G";return n.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:s})}function gI(t){const e=["admin","mod","creator","user"];for(const s of e)if(t.includes(s))return s;return"user"}function _h(t){var e,s,r,i,a,l,d,u,h;return(h=(u=(a=(s=t.displayName)!=null?s:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(d=(l=t.providers)==null?void 0:l.google)==null?void 0:d.displayName)!=null?h:t.userId}function xI(t){var e,s,r,i,a,l,d;return(d=(l=(r=t.avatarUrl)!=null?r:(s=(e=t.providers)==null?void 0:e.discord)==null?void 0:s.avatarUrl)!=null?l:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?d:null}function n1(t){return t!=null?t:"active"}function jd(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function r1(t,e){const[s,r]=E.useState(t);return E.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function $xe(){return n.jsx(Bt,{title:"Einstellungen",subtitle:"Profil, Sicherheit, Anzeige",centerFramed:!0,children:n.jsx("div",{className:"space-y-4",children:n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsx("h3",{className:"mb-2 text-sm",style:{color:"#F5F9FF"},children:"Profil"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["Anzeigename",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]}),n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["E-Mail",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]})]})]})})})}const Oxe="_page_rpt6g_1",Vxe="_tabs_rpt6g_17",Uxe="_tab_rpt6g_17",zxe="_tabActive_rpt6g_71",Hxe="_banner_rpt6g_87",Gxe="_bannerSuccess_rpt6g_101",Wxe="_bannerError_rpt6g_113",qxe="_card_rpt6g_125",Kxe="_cardTitle_rpt6g_145",Qxe="_settingsForm_rpt6g_159",Xxe="_formRow_rpt6g_173",Yxe="_selectInput_rpt6g_185",Jxe="_checkboxRow_rpt6g_203",Zxe="_settingsFooter_rpt6g_227",eye="_inlineStatus_rpt6g_245",tye="_helperText_rpt6g_259",sye="_secondaryButton_rpt6g_271",nye="_cardSubtitle_rpt6g_297",rye="_identityHeader_rpt6g_309",iye="_identityAvatar_rpt6g_323",aye="_identityName_rpt6g_337",oye="_identityProvider_rpt6g_351",lye="_identityForm_rpt6g_363",cye="_nameInputWrap_rpt6g_379",dye="_nameLabel_rpt6g_395",uye="_nameInput_rpt6g_379",hye="_nameSaveButton_rpt6g_427",mye="_feedbackError_rpt6g_471",pye="_feedbackSuccess_rpt6g_483",fye="_metaGrid_rpt6g_495",gye="_metaItem_rpt6g_507",xye="_metaLabel_rpt6g_521",yye="_metaValue_rpt6g_535",vye="_serviceList_rpt6g_549",bye="_serviceRow_rpt6g_559",_ye="_serviceName_rpt6g_587",wye="_serviceStatus_rpt6g_601",jye="_serviceAction_rpt6g_613",Sye="_securityText_rpt6g_645",Nye="_securityNote_rpt6g_657",kye="_logoutButton_rpt6g_669",Cye="_loadingState_rpt6g_701",Tye="_emptyState_rpt6g_703",Eye="_emptyStateTitle_rpt6g_721",Aye="_emptyStateText_rpt6g_733",Iye="_primaryButton_rpt6g_745",Fe={page:Oxe,tabs:Vxe,tab:Uxe,tabActive:zxe,banner:Hxe,bannerSuccess:Gxe,bannerError:Wxe,card:qxe,cardTitle:Kxe,settingsForm:Qxe,formRow:Xxe,selectInput:Yxe,checkboxRow:Jxe,settingsFooter:Zxe,inlineStatus:eye,helperText:tye,secondaryButton:sye,cardSubtitle:nye,identityHeader:rye,identityAvatar:iye,identityName:aye,identityProvider:oye,identityForm:lye,nameInputWrap:cye,nameLabel:dye,nameInput:uye,nameSaveButton:hye,feedbackError:mye,feedbackSuccess:pye,metaGrid:fye,metaItem:gye,metaLabel:xye,metaValue:yye,serviceList:vye,serviceRow:bye,serviceName:_ye,serviceStatus:wye,serviceAction:jye,securityText:Sye,securityNote:Nye,logoutButton:kye,loadingState:Cye,emptyState:Tye,emptyStateTitle:Eye,emptyStateText:Aye,primaryButton:Iye},Rye="_header_t1aqh_1",Pye="_headerTexts_t1aqh_17",Lye="_tableWrap_t1aqh_31",Dye="_table_t1aqh_31",Mye="_tableRow_t1aqh_87",Fye="_dateCell_t1aqh_95",Bye="_actionsHeader_t1aqh_103",$ye="_actionCell_t1aqh_111",Oye="_unlinkButton_t1aqh_119",Vye="_unlinkIcon_t1aqh_175",Uye="_muted_t1aqh_185",zye="_emptyState_t1aqh_193",Hye="_emptyTitle_t1aqh_209",Gye="_emptyDescription_t1aqh_221",Wye="_emptyCta_t1aqh_233",qye="_helpAccordion_t1aqh_277",Kye="_helpToggle_t1aqh_291",Qye="_helpToggleOpen_t1aqh_331",Xye="_helpToggleAction_t1aqh_339",Yye="_helpBody_t1aqh_351",Jye="_helpList_t1aqh_359",Zye="_helpListItem_t1aqh_377",eve="_helpFootnote_t1aqh_385",tve="_confirmBackdrop_t1aqh_397",sve="_confirmDialog_t1aqh_419",nve="_confirmTitle_t1aqh_443",rve="_confirmText_t1aqh_457",ive="_confirmName_t1aqh_473",ave="_confirmMeta_t1aqh_483",ove="_errorText_t1aqh_491",lve="_confirmActions_t1aqh_503",cve="_cancelButton_t1aqh_517",dve="_confirmButton_t1aqh_519",Qt={header:Rye,headerTexts:Pye,tableWrap:Lye,table:Dye,tableRow:Mye,dateCell:Fye,actionsHeader:Bye,actionCell:$ye,unlinkButton:Oye,unlinkIcon:Vye,muted:Uye,emptyState:zye,emptyTitle:Hye,emptyDescription:Gye,emptyCta:Wye,helpAccordion:qye,helpToggle:Kye,helpToggleOpen:Qye,helpToggleAction:Xye,helpBody:Yye,helpList:Jye,helpListItem:Zye,helpFootnote:eve,confirmBackdrop:tve,confirmDialog:sve,confirmTitle:nve,confirmText:rve,confirmName:ive,confirmMeta:ave,errorText:ove,confirmActions:lve,cancelButton:cve,confirmButton:dve},uve=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},qv=t=>{var s;const e=(s=t.name)==null?void 0:s.trim();return e||(t.playerId!==void 0&&t.playerId!==null?`#${t.playerId}`:"-")},hve=({user:t,refreshSession:e,openHelp:s=!1})=>{const{t:r}=no(),i=E.useMemo(()=>{var T;return(T=t.linkedPlayers)!=null?T:[]},[t.linkedPlayers]),[a,l]=E.useState(!1),[d,u]=E.useState(!1),[h,m]=E.useState(null),[g,v]=E.useState(null),[b,_]=E.useState(()=>s||i.length===0),N=E.useMemo(()=>`${pa}/user/unlink-character`,[]);X.useEffect(()=>{s&&_(!0)},[s]),X.useEffect(()=>{i.length===0&&_(!0)},[i.length]);const C=async()=>{l(!0);try{await e({silent:!0})}catch(T){console.error("[Account] Failed to refresh linked players",T)}finally{l(!1)}},R=T=>{m(T),v(null)},D=()=>{d||(m(null),v(null))},A=async()=>{var T;if(h){if(!N){v(r("account.connectedCharacters.errors.serviceUnavailable","Auth service is not configured for unlinking."));return}u(!0),l(!0),v(null);try{const F=await fetch(N,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:h.playerId,server:h.server})});if(!F.ok){const I=await F.json().catch(()=>null),B=(I==null?void 0:I.error)||(I==null?void 0:I.message)||r("account.connectedCharacters.errors.unlink","Could not unlink character.");throw new Error(B)}await e({silent:!0}),m(null)}catch(F){const I=(T=F==null?void 0:F.message)!=null?T:r("account.connectedCharacters.errors.unlink","Could not unlink character.");v(I)}finally{u(!1),l(!1)}}},y=T=>T?T.startsWith("discord_")?r("account.connectedCharacters.method.discord","Discord bot"):T:"-",w=E.useMemo(()=>[r("account.connectedCharacters.help.steps.link",'Link a character via the Discord bot using the "!connect char" command.'),r("account.connectedCharacters.help.steps.verify","We match the character to your latest verified scan; keep your game data up to date."),r("account.connectedCharacters.help.steps.refresh","After linking, click Refresh here to sync the latest characters from the auth service."),r("account.connectedCharacters.help.steps.unlink","You can unlink any character in the Actions column; the source column shows how it was linked.")],[r]),M=()=>{const T="connected-characters-help";return n.jsxs("div",{className:Qt.helpAccordion,children:[n.jsxs("button",{type:"button",className:`${Qt.helpToggle} ${b?Qt.helpToggleOpen:""}`,"aria-expanded":b,"aria-controls":T,onClick:()=>_(F=>!F),children:[n.jsx("span",{children:r("account.connectedCharacters.help.title","How does linking work?")}),n.jsx("span",{className:Qt.helpToggleAction,children:b?r("account.connectedCharacters.help.hide","Hide"):r("account.connectedCharacters.help.show","Show")})]}),b&&n.jsxs("div",{id:T,className:Qt.helpBody,children:[n.jsx("ul",{className:Qt.helpList,children:w.map((F,I)=>n.jsx("li",{className:Qt.helpListItem,children:F},`help-step-${I}`))}),n.jsx("p",{className:Qt.helpFootnote,children:r("account.connectedCharacters.help.footnote","Tip: Click Refresh after linking or unlinking to update this table.")})]})]})},k=()=>n.jsx("div",{className:Qt.tableWrap,children:n.jsxs("table",{className:Qt.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:r("account.connectedCharacters.columns.character","Character")}),n.jsx("th",{children:r("account.connectedCharacters.columns.server","Server")}),n.jsx("th",{children:r("account.connectedCharacters.columns.playerId","Player ID")}),n.jsx("th",{children:r("account.connectedCharacters.columns.class","Class")}),n.jsx("th",{children:r("account.connectedCharacters.columns.level","Level")}),n.jsx("th",{children:r("account.connectedCharacters.columns.guild","Guild")}),n.jsx("th",{children:r("account.connectedCharacters.columns.lastVerified","Last linked")}),n.jsx("th",{children:r("account.connectedCharacters.columns.source","Source")}),n.jsx("th",{className:Qt.actionsHeader,children:r("account.connectedCharacters.columns.actions","Actions")})]})}),n.jsx("tbody",{children:i.map((T,F)=>{var W,K,q,se;const I=`${(W=T.server)!=null?W:"unknown"}-${(K=T.playerId)!=null?K:F}`,B=(q=T.level)!=null?q:"-",$=T.guildName||"-",H=T.class||"-",z=y(T.method);return n.jsxs("tr",{className:Qt.tableRow,children:[n.jsx("td",{children:qv(T)}),n.jsx("td",{children:T.server||"-"}),n.jsx("td",{children:(se=T.playerId)!=null?se:"-"}),n.jsx("td",{className:T.class?void 0:Qt.muted,children:H}),n.jsx("td",{className:typeof T.level!="number"?Qt.muted:void 0,children:B}),n.jsx("td",{className:T.guildName?void 0:Qt.muted,children:$}),n.jsx("td",{className:Qt.dateCell,children:uve(T.verifiedAt)}),n.jsx("td",{className:T.method?void 0:Qt.muted,children:z}),n.jsx("td",{className:Qt.actionCell,children:n.jsx("button",{type:"button",className:Qt.unlinkButton,onClick:()=>R(T),title:r("account.connectedCharacters.actions.unlink","Disconnect character"),"aria-label":`${r("account.connectedCharacters.actions.unlink","Disconnect character")} ${qv(T)}`,disabled:d||a,children:n.jsx("svg",{className:Qt.unlinkIcon,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:n.jsx("path",{fill:"currentColor",d:"M9 4h6a1 1 0 0 1 1 1v2h5v2h-2.1l-1.05 11.2A2 2 0 0 1 15.86 22H8.14a2 2 0 0 1-1.99-1.8L5.1 9H3V7h5V5a1 1 0 0 1 1-1Zm5 2V6H10v2h4Zm-6.93 3 1.02 10.8a1 1 0 0 0 1 .9h7.72a1 1 0 0 0 1-.9L18.83 9ZM10 11v7h2v-7Zm4 0v7h2v-7Z"})})})})]},I)})})]})}),S=()=>{var F;if(!h)return null;const T="unlink-dialog-title";return n.jsx("div",{className:Qt.confirmBackdrop,role:"dialog","aria-modal":"true","aria-labelledby":T,children:n.jsxs("div",{className:Qt.confirmDialog,children:[n.jsx("h3",{id:T,className:Qt.confirmTitle,children:r("account.connectedCharacters.confirmation.title","Are you sure you want to unlink this character?")}),n.jsxs("p",{className:Qt.confirmText,children:[n.jsx("span",{className:Qt.confirmName,children:qv(h)}),n.jsxs("span",{className:Qt.confirmMeta,children:[h.server||"-"," - #",(F=h.playerId)!=null?F:"-"]})]}),g&&n.jsx("p",{className:Qt.errorText,children:g}),n.jsxs("div",{className:Qt.confirmActions,children:[n.jsx("button",{type:"button",className:Qt.cancelButton,onClick:D,disabled:d,children:r("account.connectedCharacters.confirmation.cancel","Cancel")}),n.jsx("button",{type:"button",className:Qt.confirmButton,onClick:A,disabled:d,children:d?r("account.connectedCharacters.confirmation.confirming","Unlinking..."):r("account.connectedCharacters.confirmation.confirm","Yes, unlink")})]})]})})};return t?n.jsxs("section",{className:Fe.card,children:[n.jsxs("div",{className:Qt.header,children:[n.jsxs("div",{className:Qt.headerTexts,children:[n.jsx("h2",{className:Fe.cardTitle,children:r("account.connectedCharacters.title","Connected characters")}),n.jsx("p",{className:Fe.cardSubtitle,children:r("account.connectedCharacters.subtitle","These game characters are linked to your SFDataHub account.")})]}),n.jsx("button",{type:"button",className:Fe.secondaryButton,onClick:C,disabled:a,children:a?r("account.connectedCharacters.actions.refreshing","Refreshing..."):r("account.connectedCharacters.actions.refresh","Refresh")})]}),a&&n.jsx("p",{className:Fe.helperText,children:r("account.connectedCharacters.loading","Refreshing characters...")}),M(),!a&&i.length===0&&n.jsxs("div",{className:Qt.emptyState,children:[n.jsx("p",{className:Qt.emptyTitle,children:r("account.connectedCharacters.empty.title","No characters linked yet")}),n.jsx("p",{className:Qt.emptyDescription,children:r("account.connectedCharacters.empty.description",'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.')}),n.jsx("button",{type:"button",className:Qt.emptyCta,onClick:()=>_(!0),children:r("account.connectedCharacters.empty.cta","Click to learn how linking works")})]}),i.length>0&&k(),S()]}):null},yI="user_settings";async function Vk(t){if(!t)return null;try{const e=qt(xt,yI,t),s=await Js(e);if(!s.exists())return null;const r=s.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function mve(t,e){if(t)try{const s=qt(xt,yI,t);await eo(s,e,{merge:!0})}catch(s){throw console.error("[UserSettings] Failed to update settings",s),s}}const vI="user_tools_state";async function pve(t){var e;if(!t)return null;try{const s=qt(xt,vI,t),r=await Js(s);return r.exists()&&(e=r.data())!=null?e:null}catch(s){return console.warn("[UserToolsSettings] Failed to load tools settings",s),null}}async function fve(t,e){if(t)try{const s=qt(xt,vI,t),r={...e,updatedAt:new Date().toISOString()};await eo(s,r,{merge:!0})}catch(s){throw console.error("[UserToolsSettings] Failed to save tools settings",s),s}}const gve="https://i.pravatar.cc/72",of=`${pa}/auth/account/profile`,Kv=`${pa}/auth/google/link/start`,Uk=3,zk=32,xve=["overview","settings","tools","connected-characters"],Hk=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},yve=()=>{const{status:t,user:e,logout:s,refreshSession:r}=ao(),i=fi(),a=Ir(),{t:l,i18n:d}=no(),[u,h]=E.useState("overview"),[m,g]=E.useState(null),[v,b]=E.useState(null),[_,N]=E.useState(!1),[C,R]=E.useState(null),[D,A]=E.useState(!1),[y,w]=E.useState(!1),[M,k]=E.useState(null),[S,T]=E.useState(null),[F,I]=E.useState(!0),[B,$]=E.useState(!1),[H,z]=E.useState(null),[W,K]=E.useState(!1),q=E.useMemo(()=>{const Oe=new URLSearchParams(a.search);return Oe.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:Oe.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),se=t==="loading"||t==="idle",re=t==="authenticated"&&!!e,U=e==null?void 0:e.id,Y=E.useMemo(()=>new URLSearchParams(a.search),[a.search]),ce=Y.get("tab"),oe=Y.get("openHelp")==="1",me=E.useMemo(()=>({language:d.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[d.language]);E.useEffect(()=>{if(!U){g(null),b(null),R(null),N(!1),k(null),T(null),I(!1),$(!1),z(null),K(!1);return}let Oe=!0;return(async()=>{N(!0),R(null),w(!1);try{const De=await Vk(U),et=De?{...me,...De}:me;if(!Oe)return;g(et),b(et)}catch(De){if(!Oe)return;R(l("account.settings.error","Could not load settings."))}finally{Oe&&N(!1)}})(),()=>{Oe=!1}},[U,me,l]),E.useEffect(()=>{if(!U)return;let Oe=!0;const Te={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{I(!0),z(null),K(!1);try{const et=await pve(U);if(!Oe)return;const ht=et?{...Te,...et}:Te;k(ht),T(ht)}catch(et){if(!Oe)return;z(l("account.tools.loadError","Could not load tools settings."))}finally{Oe&&I(!1)}})(),()=>{Oe=!1}},[U,l]),E.useEffect(()=>{ce&&xve.includes(ce)&&ce!==u&&h(ce)},[ce,u]);const _e=(Oe,Te)=>{const De=new URLSearchParams(a.search);De.set("tab",Oe),Te!=null&&Te.openHelp?De.set("openHelp","1"):De.delete("openHelp");const et=De.toString();i({pathname:a.pathname,search:et?`?${et}`:""},{replace:!0})},Pe=()=>{i("/login")},te=async()=>{await s(),i("/")},fe=()=>{if(!Kv){window.alert("Auth service is not configured for Google linking.");return}window.location.href=Kv},ae=()=>n.jsx("div",{className:Fe.loadingState,children:"Checking session..."}),be=()=>n.jsxs("div",{className:Fe.emptyState,children:[n.jsx("p",{className:Fe.emptyStateTitle,children:"You are not signed in."}),n.jsx("p",{className:Fe.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),n.jsx("button",{type:"button",className:Fe.primaryButton,onClick:Pe,children:"Go to sign-in"})]}),ye=()=>{if(!q)return null;const Oe=q.type==="success"?`${Fe.banner} ${Fe.bannerSuccess}`:`${Fe.banner} ${Fe.bannerError}`;return n.jsx("div",{className:Oe,children:q.message})},Ie=()=>{var Os,Ws,qs;if(!e)return null;const Oe=(Os=e.providers)==null?void 0:Os.discord,Te=(Ws=e.providers)==null?void 0:Ws.google,De=!!Oe,et=!!Te,ht=!!Kv,we=ht?et?Te!=null&&Te.displayName?`Connected as ${Te.displayName}`:"Connected":"Not connected":"Auth service not configured",Gs=[{key:"discord",name:"Discord",status:De?`Connected as ${(qs=Oe==null?void 0:Oe.displayName)!=null?qs:e.displayName}`:"Not connected",actionLabel:De?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:we,actionLabel:et?"Connected":"Connect",disabled:et||!ht,onClick:et||!ht?void 0:fe},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:"Connected services"}),n.jsx("p",{className:Fe.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),n.jsx("div",{className:Fe.serviceList,children:Gs.map(cs=>n.jsxs("div",{className:Fe.serviceRow,children:[n.jsxs("div",{children:[n.jsx("p",{className:Fe.serviceName,children:cs.name}),n.jsx("p",{className:Fe.serviceStatus,children:cs.status})]}),n.jsx("button",{type:"button",className:Fe.serviceAction,disabled:cs.disabled,onClick:cs.onClick,children:cs.actionLabel})]},cs.key))})]})},$e=()=>n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:"Security & session"}),n.jsx("p",{className:Fe.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),n.jsx("p",{className:Fe.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),n.jsx("button",{type:"button",className:Fe.logoutButton,onClick:te,children:"Log out from this device"}),n.jsx("p",{className:Fe.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),Ge=(Oe,Te)=>{m&&(g(De=>({...De!=null?De:me,[Oe]:Te})),w(!1))},nt=!!(m&&v&&JSON.stringify(m)!==JSON.stringify(v)),at=!!(M&&S&&JSON.stringify(M)!==JSON.stringify(S)),ft=async()=>{if(!(!U||!m||D||!nt))try{A(!0),R(null),await mve(U,m),b(m),w(!0)}catch(Oe){R(l("account.settings.saveError","Could not save settings. Please try again."))}finally{A(!1)}},$t=(Oe,Te)=>{M&&(k(De=>({...De!=null?De:{},[Oe]:Te})),K(!1))},je=async()=>{if(!(!U||!M||B||!at))try{$(!0),z(null),await fve(U,M),T(M),K(!0)}catch(Oe){z(l("account.tools.save.error","Could not save settings. Please try again."))}finally{$(!1)}},Je=()=>{var Oe,Te;return n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:l("account.settings.title","Settings")}),n.jsx("p",{className:Fe.cardSubtitle,children:l("account.settings.subtitle","Configure your personal preferences.")}),_&&n.jsx("p",{className:Fe.helperText,children:l("account.settings.loading","Loading settings...")}),C&&n.jsxs("div",{className:Fe.feedbackError,children:[n.jsx("p",{children:C}),n.jsx("button",{type:"button",className:Fe.secondaryButton,onClick:()=>{U&&(R(null),w(!1),N(!0),Vk(U).then(De=>{const et=De?{...me,...De}:me;g(et),b(et)}).catch(()=>{R(l("account.settings.error","Could not load settings."))}).finally(()=>N(!1)))},children:l("account.settings.retry","Retry")})]}),m&&!_&&n.jsxs("div",{className:Fe.settingsForm,children:[n.jsxs("div",{className:Fe.formRow,children:[n.jsx("label",{className:Fe.nameLabel,htmlFor:"settings-language",children:l("account.settings.language.label","Preferred language")}),n.jsxs("select",{id:"settings-language",className:Fe.selectInput,value:(Oe=m.language)!=null?Oe:me.language,onChange:De=>Ge("language",De.target.value),children:[n.jsx("option",{value:"en",children:l("topbar.lang_en","English")}),n.jsx("option",{value:"de",children:l("topbar.lang_de","Deutsch")})]})]}),n.jsxs("div",{className:Fe.formRow,children:[n.jsx("label",{className:Fe.nameLabel,htmlFor:"settings-section",children:l("account.settings.defaultSection.label","Default section")}),n.jsxs("select",{id:"settings-section",className:Fe.selectInput,value:(Te=m.defaultSection)!=null?Te:me.defaultSection,onChange:De=>Ge("defaultSection",De.target.value),children:[n.jsx("option",{value:"home",children:l("nav.home","Home")}),n.jsx("option",{value:"toplists",children:l("nav.toplists","Top Lists")}),n.jsx("option",{value:"guilds",children:l("nav.guilds","Guilds")}),n.jsx("option",{value:"tools",children:l("nav.tools","Tools")}),n.jsx("option",{value:"community",children:l("nav.community","Community")})]})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!m.compactTables,onChange:De=>Ge("compactTables",De.target.checked)}),n.jsx("span",{children:l("account.settings.compactTables.label","Use compact table layout")})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!m.showExperimentalFeatures,onChange:De=>Ge("showExperimentalFeatures",De.target.checked)}),n.jsx("span",{children:l("account.settings.experimental.label","Enable experimental features")})]})]}),n.jsxs("div",{className:Fe.settingsFooter,children:[n.jsxs("div",{className:Fe.inlineStatus,children:[y?n.jsx("span",{className:Fe.feedbackSuccess,children:l("account.settings.saved","Settings saved.")}):nt?null:n.jsx("span",{className:Fe.helperText,children:l("account.settings.noChanges","No changes to save.")}),D&&n.jsx("span",{className:Fe.helperText,children:l("account.settings.saving","Saving...")})]}),n.jsx("button",{type:"button",className:Fe.primaryButton,disabled:!nt||D||!m,onClick:ft,children:l("account.settings.save","Save settings")})]})]})},Ke=()=>{const Oe=[{key:"overview",label:l("account.tabs.overview","Overview")},{key:"settings",label:l("account.tabs.settings","Settings")},{key:"tools",label:l("account.tabs.tools","Tools")},{key:"connected-characters",label:l("account.tabs.connectedCharacters","Connected characters")}];return n.jsx("div",{className:Fe.tabs,role:"tablist","aria-label":"Account sections",children:Oe.map(Te=>{const De=u===Te.key;return n.jsx("button",{type:"button",className:`${Fe.tab} ${De?Fe.tabActive:""}`,onClick:()=>{h(Te.key),_e(Te.key,{openHelp:Te.key==="connected-characters"&&oe})},role:"tab","aria-selected":De,children:Te.label},Te.key)})})},bt=()=>{var Oe;if(!e)return null;switch(u){case"overview":return n.jsxs(n.Fragment,{children:[n.jsx(vve,{user:e,refreshSession:r}),Ie(),$e()]});case"settings":return Je();case"tools":return n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:l("account.tools.title","Tools settings")}),n.jsx("p",{className:Fe.cardSubtitle,children:l("account.tools.subtitle","Configure how tools behave for your account.")}),F&&n.jsx("p",{className:Fe.helperText,children:l("account.tools.loading","Loading tools settings...")}),H&&n.jsx("p",{className:Fe.feedbackError,children:H}),M&&!F&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Fe.settingsForm,children:[n.jsxs("div",{className:Fe.formRow,children:[n.jsx("label",{className:Fe.nameLabel,htmlFor:"tools-default-set",children:l("account.tools.defaultSet.label","Default set ID")}),n.jsx("input",{id:"tools-default-set",type:"text",className:Fe.nameInput,value:(Oe=M.defaultSetId)!=null?Oe:"",onChange:Te=>$t("defaultSetId",Te.target.value),placeholder:l("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!M.showToolsIntro,onChange:Te=>$t("showToolsIntro",Te.target.checked)}),n.jsx("span",{children:l("account.tools.showIntro.label","Show tools intro")})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!M.enableExperimentalTools,onChange:Te=>$t("enableExperimentalTools",Te.target.checked)}),n.jsx("span",{children:l("account.tools.experimental.label","Enable experimental tools")})]})]}),n.jsxs("div",{className:Fe.settingsFooter,children:[n.jsxs("div",{className:Fe.inlineStatus,children:[W?n.jsx("span",{className:Fe.feedbackSuccess,children:l("account.tools.save.success","Settings saved.")}):at?null:n.jsx("span",{className:Fe.helperText,children:l("account.tools.save.noChanges","No changes to save.")}),B&&n.jsx("span",{className:Fe.helperText,children:l("account.tools.save.saving","Saving...")})]}),n.jsx("button",{type:"button",className:Fe.primaryButton,disabled:F||B||!at||!M,onClick:je,children:l("account.tools.save.cta","Save settings")})]})]})]});case"connected-characters":return n.jsx(hve,{user:e,refreshSession:r,openHelp:oe});default:return null}},kt=()=>se?ae():re?n.jsxs(n.Fragment,{children:[Ke(),bt()]}):be();return n.jsx(Bt,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:n.jsxs("div",{className:Fe.page,children:[ye(),kt()]})})};function vve({user:t,refreshSession:e}){var M;const[s,r]=E.useState(()=>{var k;return(k=t==null?void 0:t.displayName)!=null?k:""}),[i,a]=E.useState(!1),[l,d]=E.useState(null),[u,h]=E.useState(!1),m=(t==null?void 0:t.avatarUrl)||gve,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",v=(M=t==null?void 0:t.displayName)!=null?M:"",b=s.trim(),_=b.length===0||b.length>=Uk&&b.length<=zk,N=!!t&&b.length>0&&b!==v,C=!!(of&&_&&N&&!i),R=b.length>0&&!_?`Name must be between ${Uk} and ${zk} characters.`:null;E.useEffect(()=>{var k;r((k=t==null?void 0:t.displayName)!=null?k:""),h(!1),d(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const D=E.useMemo(()=>{var k;return t?[{label:"SFDataHub ID",value:t.id},(k=t.roles)!=null&&k.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:Hk(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:Hk(t.lastLoginAt)}:null].filter(S=>!!(S!=null&&S.value)):[]},[t]),A=async()=>{var k,S;if(!C||!of){of||d("Auth service is not configured.");return}try{a(!0),d(null),h(!1);const T=await fetch(of,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:b})});if(!T.ok){const F=await T.json().catch(()=>null);throw new Error((k=F==null?void 0:F.error)!=null?k:"Failed to update name.")}await e(),h(!0),r(b)}catch(T){const F=(S=T==null?void 0:T.message)!=null?S:"Failed to update name.";d(F)}finally{a(!1)}},y=k=>{k.key==="Enter"&&(k.preventDefault(),C&&A())},w=()=>{C&&A()};return t?n.jsxs("section",{className:Fe.card,children:[n.jsxs("div",{className:Fe.identityHeader,children:[n.jsx("img",{src:m,alt:"",className:Fe.identityAvatar}),n.jsxs("div",{children:[n.jsx("p",{className:Fe.identityName,children:t.displayName||"Unbenannter Nutzer"}),n.jsxs("p",{className:Fe.identityProvider,children:[g," sign-in"]})]}),n.jsx("span",{className:Fe.statusBadge,children:"Verified"})]}),n.jsxs("div",{className:Fe.identityForm,children:[n.jsxs("div",{className:Fe.nameInputWrap,children:[n.jsx("label",{className:Fe.nameLabel,children:"Display name"}),n.jsx("input",{type:"text",className:Fe.nameInput,value:s,onChange:k=>r(k.target.value),onKeyDown:y,onBlur:w,placeholder:"Enter your display name"})]}),n.jsx("button",{type:"button",className:Fe.nameSaveButton,disabled:!C,onClick:A,children:i?"Saving...":"Save"})]}),R&&n.jsx("p",{className:Fe.feedbackError,children:R}),l&&n.jsx("p",{className:Fe.feedbackError,children:l}),u&&n.jsx("p",{className:Fe.feedbackSuccess,children:"Name updated."}),D.length>0&&n.jsx("div",{className:Fe.metaGrid,children:D.map(k=>n.jsxs("div",{className:Fe.metaItem,children:[n.jsx("span",{className:Fe.metaLabel,children:k.label}),n.jsx("span",{className:Fe.metaValue,children:k.value})]},k.label))})]}):null}const Wt={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function bve(){return n.jsx("div",{style:Wt.wrap,children:n.jsxs("div",{style:Wt.grid,children:[n.jsxs("aside",{style:Wt.tile,children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),n.jsx("p",{style:Wt.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),n.jsxs("nav",{children:[n.jsx("div",{style:Wt.groupLabel,children:"Allgemein"}),n.jsx(As,{to:"list-views",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"List-View Switcher"}),n.jsx(As,{to:"rescan-widget",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Rescan Widget (auto)"}),n.jsx(As,{to:"upload-sim",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Upload Simulator"}),n.jsx(As,{to:"hud/game-buttons",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"HUD  Game Buttons"}),n.jsx(As,{to:"theme-maker",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Theme / Template Maker"}),n.jsx(As,{to:"theme-maker-pro",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Theme / Template Maker  Pro"}),n.jsx("div",{style:Wt.groupLabel,children:"Templates"}),n.jsx(As,{to:"templates/content-shell",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"ContentShell Template"}),n.jsx(As,{to:"templates/blank",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Leere Vorlage"}),n.jsx(As,{to:"templates/blank-alt",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Leere Vorlage (Neu)"}),n.jsx(As,{to:"templates/blank-layout-2",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Leere Vorlage  Layout 2"}),n.jsx(As,{to:"templates/blank-layout-3",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Leere Vorlage  Layout 3"}),n.jsx(As,{to:"templates/blank-layout-4",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"Leere Vorlage  Layout 4"}),n.jsx("div",{style:Wt.groupLabel,children:"Guide Hub Demos"}),n.jsx(As,{to:"am-rune-bonuses-demos",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),n.jsx("div",{style:Wt.groupLabel,children:"Graphics / Portraits"}),n.jsx(As,{to:"portrait-maker",style:({isActive:t})=>({...Wt.link,...t?Wt.active:{}}),children:"PortraitMaker Demo"})]})]}),n.jsx("section",{style:Wt.tile,children:n.jsx(zC,{})})]})})}const _ve="_page_1kokx_1",wve="_topBar_1kokx_17",jve="_tabs_1kokx_31",Sve="_tab_1kokx_31",Nve="_tabActive_1kokx_63",kve="_searchWrap_1kokx_73",Cve="_input_1kokx_85",Tve="_stickyIcons_1kokx_105",Eve="_iconBtn_1kokx_129",Ave="_tableWrap_1kokx_161",Ive="_table_1kokx_161",Rve="_th_1kokx_181",Pve="_td_1kokx_181",Lve="_row_1kokx_201",Dve="_chips_1kokx_219",Mve="_chip_1kokx_219",Fve="_badges_1kokx_249",Bve="_badge_1kokx_249",$ve="_badgeMax_1kokx_275",Ove="_badgeAchiev_1kokx_277",Vve="_badgeX2_1kokx_279",Uve="_badgeX12_1kokx_281",zve="_badgeX60_1kokx_283",Hve="_section_1kokx_289",Gve="_sectionHeader_1kokx_297",Wve="_cardList_1kokx_315",qve="_card_1kokx_315",Kve="_cardMax_1kokx_353",Qve="_iconXL_1kokx_355",Xve="_split_1kokx_369",Yve="_left_1kokx_379",Jve="_leftBtn_1kokx_399",Zve="_leftBtnActive_1kokx_411",e0e="_detail_1kokx_413",t0e="_grid_1kokx_433",s0e="_tile_1kokx_443",n0e="_drawer_1kokx_457",r0e="_timeline_1kokx_487",i0e="_node_1kokx_493",a0e="_dot_1kokx_501",jt={page:_ve,topBar:wve,tabs:jve,tab:Sve,tabActive:Nve,searchWrap:kve,input:Cve,stickyIcons:Tve,iconBtn:Eve,tableWrap:Ave,table:Ive,th:Rve,td:Pve,row:Lve,chips:Dve,chip:Mve,badges:Fve,badge:Bve,badgeMax:$ve,badgeAchiev:Ove,badgeX2:Vve,badgeX12:Uve,badgeX60:zve,section:Hve,sectionHeader:Gve,cardList:Wve,card:qve,cardMax:Kve,iconXL:Qve,split:Xve,left:Yve,leftBtn:Jve,leftBtnActive:Zve,detail:e0e,grid:t0e,tile:s0e,drawer:n0e,timeline:r0e,node:i0e,dot:a0e},Gk=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function hi(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function o0e(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function l0e(t){var s,r;const e=(r=(s=t.note)==null?void 0:s.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function pg({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:jt.iconBtn,title:t||"Rune",children:e})}function x_({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:jt.iconXL,title:t||"Rune",children:e})}function c0e(t){const e=new Map;for(const s of t){const r=s.tier&&s.tier.trim()!==""?s.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(s)}return Array.from(e.entries())}function gm({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),n.jsx("div",{className:jt.chips,children:e.map((s,r)=>n.jsx("span",{className:jt.chip,children:s},r))})}function xm({r:t,isMax:e}){const s=[];e&&s.push({label:"MAX",cls:jt.badgeMax}),o0e(t)&&s.push({label:"Achievement",cls:jt.badgeAchiev});const r=l0e(t);return r==="x2"&&s.push({label:"x2",cls:jt.badgeX2}),r==="x12"&&s.push({label:"x12",cls:jt.badgeX12}),r==="x60"&&s.push({label:"x60",cls:jt.badgeX60}),s.length===0?null:n.jsx("div",{className:jt.badges,children:s.map((i,a)=>{var l;return n.jsx("span",{className:`${jt.badge} ${(l=i.cls)!=null?l:""}`,children:i.label},a)})})}function d0e(t){const e=t.trim().toLowerCase();return e?Gk.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):Gk}function u0e({data:t}){const e=Math.max(...t.map(i=>hi(i.amount))),s=E.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:jt.stickyIcons,children:s.map((i,a)=>n.jsx("div",{onClick:()=>r(i),children:n.jsx(pg,{label:i||"(no tier)"})},a))}),n.jsx("div",{className:jt.tableWrap,children:n.jsxs("table",{className:jt.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:jt.th,style:{width:42}}),n.jsx("th",{className:jt.th,style:{width:120},children:"Amount"}),n.jsx("th",{className:jt.th,children:"Bonuses"}),n.jsx("th",{className:jt.th,style:{width:220},children:"Tags"})]})}),n.jsx("tbody",{children:t.map((i,a)=>{const l=Math.abs(hi(i.amount)-e)<1e-6;return n.jsxs("tr",{className:jt.row,"data-tier":i.tier||"(no tier)",children:[n.jsx("td",{className:jt.td,children:n.jsx(pg,{label:i.tier||""})}),n.jsx("td",{className:jt.td,children:i.amount}),n.jsx("td",{className:jt.td,children:n.jsx(gm,{r:i})}),n.jsx("td",{className:jt.td,children:n.jsx(xm,{r:i,isMax:l})})]},a)})})]})})]})}function h0e({data:t}){const e=c0e(t),s=Math.max(...t.map(r=>hi(r.amount)));return n.jsx(n.Fragment,{children:e.map(([r,i])=>n.jsxs("section",{className:jt.section,children:[n.jsx("div",{className:jt.sectionHeader,children:r}),n.jsx("div",{className:jt.cardList,children:i.map((a,l)=>{const d=Math.abs(hi(a.amount)-s)<1e-6;return n.jsxs("div",{className:`${jt.card} ${d?jt.cardMax:""}`,children:[n.jsx(x_,{label:r}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:a.amount}),n.jsx(xm,{r:a,isMax:d})]}),n.jsx(gm,{r:a})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},l)})})]},r))})}function m0e({data:t}){var l;const e=Array.from(new Set(t.map(d=>d.tier||"(no tier)"))),[s,r]=E.useState((l=e[0])!=null?l:""),i=t.filter(d=>(d.tier||"(no tier)")===s),a=Math.max(...t.map(d=>hi(d.amount)));return n.jsxs("div",{className:jt.split,children:[n.jsx("div",{className:jt.left,children:e.map(d=>n.jsxs("button",{className:`${jt.leftBtn} ${d===s?jt.leftBtnActive:""}`,onClick:()=>r(d),children:[n.jsx(pg,{label:d}),n.jsx("span",{children:d})]},d))}),n.jsxs("div",{className:jt.detail,children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx(x_,{label:s}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:s}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((d,u)=>{const h=Math.abs(hi(d.amount)-a)<1e-6;return n.jsxs("div",{className:jt.card,style:{gridTemplateColumns:"1fr auto"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:d.amount}),n.jsx(xm,{r:d,isMax:h})]}),n.jsx(gm,{r:d})]}),n.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function p0e({data:t}){const[e,s]=E.useState(null),r=Math.max(...t.map(i=>hi(i.amount)));return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:jt.grid,children:t.map((i,a)=>n.jsx("div",{className:jt.tile,onClick:()=>s(i),title:i.tier||"",children:n.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[n.jsx(pg,{label:i.tier||""}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&n.jsxs("div",{className:jt.drawer,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx(x_,{label:e.tier||""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:e.amount}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),n.jsx("button",{className:jt.tab,onClick:()=>s(null),children:"Close"})]}),n.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:n.jsx(xm,{r:e,isMax:Math.abs(hi(e.amount)-r)<1e-6})}),n.jsx(gm,{r:e})]})]})}function f0e({data:t}){const e=Math.max(...t.map(r=>hi(r.amount))),s=[...t].sort((r,i)=>hi(r.amount)-hi(i.amount));return n.jsx("div",{className:jt.timeline,children:s.map((r,i)=>{const a=Math.abs(hi(r.amount)-e)<1e-6;return n.jsxs("div",{className:jt.node,children:[n.jsx("div",{className:jt.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx("strong",{children:r.amount}),n.jsx(xm,{r,isMax:a})]}),n.jsx(gm,{r})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const g0e=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function x0e(){const[t,e]=E.useState("A: Compact Table"),[s,r]=E.useState(""),i=d0e(s);return n.jsxs("div",{className:jt.page,children:[n.jsxs("div",{className:jt.topBar,children:[n.jsx("div",{className:jt.tabs,children:g0e.map(a=>n.jsx("button",{onClick:()=>e(a),className:`${jt.tab} ${t===a?jt.tabActive:""}`,children:a},a))}),n.jsx("div",{className:jt.searchWrap,children:n.jsx("input",{className:jt.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:s,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&n.jsx(u0e,{data:i}),t==="B: Card Track"&&n.jsx(h0e,{data:i}),t==="C: Two-Pane"&&n.jsx(m0e,{data:i}),t==="D: Icon Grid + Drawer"&&n.jsx(p0e,{data:i}),t==="E: Timeline"&&n.jsx(f0e,{data:i})]})}function y0e(){return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),n.jsx("div",{className:"mt-4 grid gap-3",children:n.jsx(As,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const Se={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},v0e=()=>n.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),Kl={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function b0e(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function Zd(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",b0e(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function bI(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",s={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},l={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},d={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},m={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},v={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},b={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:s,crystal:r,carbon:i,chrome:a,gold:l,obsidian:d,neon:u,plasma:h,aurora:m,satin:g,matte:v,holo:b}[t.material]}function cl(t){const e={color:Se.title,borderColor:Se.border,...bI(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const ym=({children:t})=>n.jsx("span",{className:"relative z-10",children:t});function eu({fx:t,clip:e}){return n.jsxs(n.Fragment,{children:[t.shine&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:n.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&n.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&n.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&n.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((s,r)=>n.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function _0e({fx:t,children:e}){const s=Zd(t),r=cl(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),n.jsx(eu,{fx:t,clip:i}),t.withIcon&&n.jsx(XC,{size:16,className:"relative z-10"}),n.jsx(ym,{children:e})]})}function w0e({fx:t,children:e}){const s=Zd(t),r=cl(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(eu,{fx:t,clip:i}),t.withIcon&&n.jsx(YC,{size:16,className:"relative z-10"}),n.jsx(ym,{children:e})]})}function j0e({fx:t,children:e}){const s=Zd(t),r=cl(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(eu,{fx:t,clip:i}),t.withIcon&&n.jsx(uc,{size:16,className:"relative z-10"}),n.jsx(ym,{children:e})]})}function S0e({fx:t,children:e}){const s=Zd(t),r=cl(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${Se.tile}, ${Se.active})`}}),n.jsx(eu,{fx:t,clip:i}),t.withIcon&&n.jsx(JC,{size:16,className:"relative z-10"}),n.jsx(ym,{children:e})]})}function N0e({fx:t,children:e}){const s=Zd(t),r=cl(t);return n.jsxs("button",{disabled:t.disabled,className:`${s} rounded-full overflow-hidden`,style:r,children:[n.jsx(eu,{fx:t}),t.withIcon&&n.jsx(jg,{size:16,className:"relative z-10"}),n.jsx(ym,{children:e})]})}function k0e({fx:t,tabs:e}){const[s,r]=E.useState(0);return n.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:Se.tile,border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:e.map((i,a)=>n.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===s?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===s?Se.active:"transparent",border:a===s&&t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:[t.withIcon&&a===s&&n.jsx(jg,{size:14,className:"inline mr-1"}),i]},a))})}function C0e({fx:t}){const e=Zd(t),s=cl(t);return n.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:s,"aria-label":"Icon action",children:n.jsx(tT,{})})}const i1={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function T0e({fx:t,setFx:e}){const s=(d,u)=>e(h=>({...h,[d]:u})),r=d=>e(u=>({...u,[d]:!u[d]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],l=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return n.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:Se.tile,border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:[n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${Se.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:Se.title},children:"Presets"}),Object.keys(i1).map(d=>n.jsx("button",{onClick:()=>e(u=>i1[d](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:Se.btn,borderColor:Se.border,color:Se.title},children:d},d))]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${Se.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:Se.title},children:"Material"}),i.map(d=>n.jsx("button",{onClick:()=>s("material",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===d?"":"opacity-70"}`,style:{backgroundColor:t.material===d?Se.active:Se.btn,borderColor:Se.border,color:Se.title},children:d},d)),n.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:Se.title},children:"Size"}),["sm","md","lg"].map(d=>n.jsx("button",{onClick:()=>s("size",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===d?"":"opacity-70"}`,style:{backgroundColor:t.size===d?Se.active:Se.btn,borderColor:Se.border,color:Se.title},children:d.toUpperCase()},d)),n.jsx("button",{onClick:()=>e(d=>({...d,withIcon:!d.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?Se.active:Se.btn,borderColor:Se.border,color:Se.title},children:"Icon"}),n.jsx("button",{onClick:()=>e(d=>({...d,disabled:!d.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?Se.active:Se.btn,borderColor:Se.border,color:Se.title},children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${Se.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:Se.title},children:"Core FX"}),a.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?Se.active:Se.btn,borderColor:Se.border,color:Se.title},children:u},d))]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:Se.title},children:"Advanced"}),l.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?Se.active:Se.btn,borderColor:Se.border,color:Se.title},children:u},d))]}),n.jsx("button",{onClick:()=>e(Kl),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:Se.btn,borderColor:Se.border,color:Se.title},children:"Reset"})]})}function ws({fx:t,className:e="",style:s={},children:r,clip:i}){const a=cl(t);return n.jsxs("div",{className:`relative ${e}`,style:{...a,...s},children:[n.jsx(eu,{fx:t,clip:i}),n.jsx("div",{className:"relative z-10",children:r})]})}function hr({fx:t,className:e="",children:s}){return n.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:Se.tile,border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:s})}function E0e({fx:t}){const[e,s]=E.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Toggle Chips"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return n.jsx(ws,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:Se.border},children:n.jsx("button",{onClick:()=>s(l=>a?l.filter(d=>d!==i):[...l,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function A0e({fx:t}){return n.jsxs(hr,{fx:t,className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",style:{color:Se.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>n.jsx(ws,{fx:t,className:"rounded-xl border p-2",style:{borderColor:Se.border},children:n.jsxs("button",{className:"relative",children:[n.jsx(tT,{size:16}),e===3&&n.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function I0e({fx:t}){return n.jsxs(ws,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Breadcrumb HUD"}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>n.jsx(ws,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:Se.border},children:e},e))})]})}function R0e({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Stat Tiles"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(s=>n.jsxs(ws,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:Se.border},children:[n.jsx("div",{className:"text-[10px] opacity-80",children:s.k}),n.jsx("div",{className:"text-sm",children:s.v}),n.jsx("div",{className:"text-[11px] opacity-80",children:s.d})]},s.k))})]})}function P0e({fx:t}){const[e,s]=E.useState(.66);return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Meter / Energy Bar"}),n.jsx(ws,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:Se.border},children:n.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),n.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsxs("button",{onClick:()=>s(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function L0e({fx:t}){return n.jsxs(hr,{fx:t,className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-sm",style:{color:Se.title},children:"Badge / Medal"}),n.jsxs(ws,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:Se.border},children:[n.jsx(uc,{size:16}),n.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function D0e({fx:t}){const[e,s]=E.useState(!1);return n.jsxs(hr,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:Se.title},children:"Toast / Notification"}),n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&n.jsxs(ws,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:Se.border},children:[n.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),n.jsx("button",{onClick:()=>s(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function M0e({fx:t}){const[e,s]=E.useState(!0);return n.jsxs(hr,{fx:t,className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:Se.title},children:"Toggle Switch"}),n.jsxs(ws,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:Se.border},children:[n.jsx("button",{onClick:()=>s(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),n.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function F0e({fx:t}){const[e,s]=E.useState(!1),r=["Overview","Stats","Activity","Hydra"];return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Dropdown HUD"}),n.jsx(ws,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:Se.border},children:n.jsx("button",{onClick:()=>s(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&n.jsx(ws,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:Se.border},children:r.map(i=>n.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function B0e({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Radial Menu (Preview)"}),n.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[n.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"}}),e.map((s,r)=>{const i=r/e.length*Math.PI*2,a=56,l=56+Math.cos(i)*a,d=56+Math.sin(i)*a;return n.jsx(ws,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:l,top:d,borderColor:Se.border},children:s},s)}),n.jsx(ws,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:Se.border},children:"Menu"})]})]})}function $0e({fx:t}){const e=[1,2,3,4,5],[s,r]=E.useState(2);return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Pagination HUD"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>n.jsx(ws,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===s?"":"opacity-80"}`,style:{borderColor:Se.border},children:n.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function O0e({fx:t}){const[e,s]=E.useState(!1);return n.jsxs(hr,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:Se.title},children:"Modal HUD"}),n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&n.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:n.jsxs(ws,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:Se.border},children:[n.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),n.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>s(!1),children:"Cancel"})}),n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function V0e({fx:t}){const[e,s]=E.useState("");return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Search HUD"}),n.jsx(ws,{fx:t,className:"rounded-lg border p-2",style:{borderColor:Se.border},children:n.jsx("input",{value:e,onChange:r=>s(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function U0e({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[s,r]=E.useState("Bravo");return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"List Selectable"}),n.jsx("div",{className:"space-y-2",children:e.map(i=>n.jsx(ws,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${s===i?"":"opacity-80"}`,style:{borderColor:Se.border},children:n.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function z0e({fx:t}){const e=["Init","Scan","Verify","Done"],[s,r]=E.useState(1);return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Steps"}),n.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>n.jsxs(X.Fragment,{children:[n.jsx(ws,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=s?"":"opacity-70"}`,style:{borderColor:Se.border},children:a+1}),a<e.length-1&&n.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,s-1)),children:"Back"})}),n.jsx(ws,{fx:t,className:"rounded-md border",style:{borderColor:Se.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,s+1)),children:"Next"})})]})]})}function H0e({fx:t}){const e=["","","","","",""];return n.jsxs(hr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:Se.title},children:"Dock Bar"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map((s,r)=>n.jsx(ws,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:Se.border},children:s},r))})]})}function G0e(){const[t,e]=E.useState(Kl);return n.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:Se.bg,color:Se.txt},children:[n.jsx(v0e,{}),n.jsxs("header",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(y6,{}),n.jsx("h1",{className:"text-xl font-bold",style:{color:Se.title},children:"Game Buttons Playground"}),n.jsx("span",{className:"text-xs",style:{color:Se.txt2},children:"(Materials + FX extended + Presets)"})]})}),n.jsx(T0e,{fx:t,setFx:e})]}),n.jsxs("section",{className:"grid gap-4",children:[n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:Se.tile,border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:Se.title},children:"Shapes"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(_0e,{fx:t,children:[n.jsx(XC,{size:16})," Diamond"]}),n.jsxs(w0e,{fx:t,children:[n.jsx(YC,{size:16})," Hex"]}),n.jsxs(j0e,{fx:t,children:[n.jsx(uc,{size:16})," Octagon/Shield"]}),n.jsxs(S0e,{fx:t,children:[n.jsx(JC,{size:16})," Shard"]}),n.jsxs(N0e,{fx:t,children:[n.jsx(jg,{size:16})," Pill/Chip"]}),n.jsx(C0e,{fx:t})]})]}),n.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:Se.tile,border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold",style:{color:Se.title},children:"Tabs"}),n.jsx(k0e,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),n.jsx("section",{className:"grid gap-4",children:n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:Se.tile,border:t.baseBorder?`1px solid ${Se.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:Se.title},children:"More HUD Patterns"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[n.jsx(E0e,{fx:t}),n.jsx(A0e,{fx:t}),n.jsx(I0e,{fx:t}),n.jsx(R0e,{fx:t}),n.jsx(P0e,{fx:t}),n.jsx(L0e,{fx:t}),n.jsx(D0e,{fx:t}),n.jsx(M0e,{fx:t}),n.jsx(F0e,{fx:t}),n.jsx(B0e,{fx:t}),n.jsx($0e,{fx:t}),n.jsx(O0e,{fx:t}),n.jsx(V0e,{fx:t}),n.jsx(U0e,{fx:t}),n.jsx(z0e,{fx:t}),n.jsx(H0e,{fx:t})]})]})}),n.jsx(W0e,{}),n.jsx("footer",{className:"text-center text-xs",style:{color:Se.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function W0e(){return E.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(Kl.material),"Material type present");const e=cl(Kl);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=bI({...Kl,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof Kl[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries(i1).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...Kl});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const wh={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},Wk={Arcade:{...wh,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...wh,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},nd={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},_I={display:"grid",gap:8,alignItems:"center"};function Ia({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{..._I,gridTemplateColumns:"120px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function Qv({label:t,value:e,min:s,max:r,onChange:i}){return n.jsxs("label",{style:{..._I,gridTemplateColumns:"120px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),n.jsx("input",{type:"number",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function qk(){const[t,e]=X.useState(wh),s=X.useRef(null),r=u=>{const h=s.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};X.useEffect(()=>{r(t)},[t]);const i=u=>e(Wk[u]),a=()=>e(wh),l=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},d=async u=>{const h=await u.text();e({...wh,...JSON.parse(h)})};return n.jsxs("div",{ref:s,style:{color:"var(--text, #FFFFFF)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(Wk).map(u=>n.jsx("button",{style:nd,onClick:()=>i(u),children:u},u)),n.jsx("button",{style:nd,onClick:a,children:"Default"}),n.jsx("button",{style:nd,onClick:l,children:"Export JSON"}),n.jsxs("label",{style:{...nd,display:"inline-block"},children:["Import JSON",n.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&d(u.target.files[0]),style:{display:"none"}})]})]}),n.jsx(Ia,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),n.jsx(Ia,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),n.jsx(Ia,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),n.jsx(Ia,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),n.jsx(Ia,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),n.jsx(Ia,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),n.jsx(Ia,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),n.jsx(Ia,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),n.jsx(Ia,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),n.jsx(Qv,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),n.jsx(Qv,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),n.jsx(Qv,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),n.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[n.jsx("button",{style:{...nd,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),n.jsx("button",{style:nd,children:"Secondary"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const a1={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},Kk={"SFDataHub (Default)":{...a1},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},cx={display:"grid",gap:8,alignItems:"center"},$l={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},Ol={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function li({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...cx,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function Ra({label:t,value:e,min:s,max:r,step:i=1,onChange:a,suffix:l}){return n.jsxs("label",{style:{...cx,gridTemplateColumns:"140px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value))}),n.jsx("input",{type:"number",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value||"0"))})]})}function q0e({label:t,checked:e,onChange:s}){return n.jsxs("label",{style:{...cx,gridTemplateColumns:"1fr 46px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"checkbox",checked:e,onChange:r=>s(r.target.checked)})]})}function Qk(){const[t,e]=X.useState(a1),s=X.useRef(null),r=h=>{const m=s.current;m&&(m.style.setProperty("--page",h.page),m.style.setProperty("--tile",h.tile),m.style.setProperty("--tile-hover",h.tileHover),m.style.setProperty("--nav",h.nav),m.style.setProperty("--active",h.active),m.style.setProperty("--text",h.text),m.style.setProperty("--text-soft",h.textSoft),m.style.setProperty("--title",h.title),m.style.setProperty("--line",h.line),m.style.setProperty("--accent",h.accent),m.style.setProperty("--success",h.success),m.style.setProperty("--warning",h.warning),m.style.setProperty("--danger",h.danger),m.style.setProperty("--radius",`${h.radius}px`),m.style.setProperty("--border",`${h.border}px`),m.style.setProperty("--gap",`${h.gap}px`),m.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),m.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),m.style.setProperty("--noise",`${h.noise}%`),m.style.setProperty("--font",h.fontFamily),m.style.setProperty("--font-size",`${h.fontSize}px`),m.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),m.style.setProperty("--glow",`${h.glow}`),m.style.setProperty("--scanlines",`${h.scanlines}`))};X.useEffect(()=>{r(t)},[t]);const i=(h,m)=>e(g=>({...g,[h]:m})),a=h=>e(m=>({...m,...Kk[h]})),l=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(h),m.download="sfdatahub-theme-pro.json",m.click()},d=async h=>{try{const m=await h.text(),g=JSON.parse(m);e({...t,...g})}catch(m){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return n.jsxs("div",{ref:s,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(Kk).map(h=>n.jsx("button",{style:$l,onClick:()=>a(h),children:h},h)),n.jsx("button",{style:$l,onClick:()=>e(a1),children:"Reset"}),n.jsx("button",{style:$l,onClick:l,children:"Export"}),n.jsxs("label",{style:{...$l,display:"inline-block"},children:["Import",n.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&d(h.target.files[0])})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(li,{label:"Page",value:t.page,onChange:h=>i("page",h)}),n.jsx(li,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),n.jsx(li,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),n.jsx(li,{label:"Active",value:t.active,onChange:h=>i("active",h)}),n.jsx(li,{label:"Text",value:t.text,onChange:h=>i("text",h)}),n.jsx(li,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),n.jsx(li,{label:"Title",value:t.title,onChange:h=>i("title",h)}),n.jsx(li,{label:"Line",value:t.line,onChange:h=>i("line",h)}),n.jsx(li,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[n.jsx(li,{label:"Success",value:t.success,onChange:h=>i("success",h)}),n.jsx(li,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),n.jsx(li,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(Ra,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),n.jsx(Ra,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),n.jsx(Ra,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),n.jsx(Ra,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),n.jsx(Ra,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),n.jsx(Ra,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("label",{style:{...cx,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),n.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),n.jsx(Ra,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),n.jsx(q0e,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(Ra,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),n.jsx(Ra,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[n.jsxs("span",{style:Ol,children:[n.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),n.jsx("span",{style:{...Ol,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),n.jsx("span",{style:{...Ol,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),n.jsx("span",{style:{...Ol,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),n.jsxs("span",{style:Ol,children:["Radius: ",t.radius]}),n.jsxs("span",{style:Ol,children:["Shadow: ",t.shadow]}),n.jsxs("span",{style:Ol,children:["Noise: ",t.noise,"%"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),n.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",n.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),n.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,m)=>n.jsxs("div",{style:{display:"grid",gap:4},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[n.jsx("span",{children:h.label}),n.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),n.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:n.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},m))}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[n.jsx("button",{style:{...$l,background:"var(--tile-hover)"},children:"Open Profile"}),n.jsx("button",{style:{...$l,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,m)=>n.jsx("button",{style:{...$l,background:m===0?"var(--tile-hover)":"transparent",borderColor:m===0?"var(--active)":"var(--line)",boxShadow:m===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,m)=>n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),n.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),n.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},m))}),n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[n.jsx("div",{style:{padding:10},children:"Attribute"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,m)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:m%2?"rgba(255,255,255,.025)":"transparent"},children:[n.jsx("div",{style:{padding:10},children:h[0]}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),n.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},m))]})]})]}),n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const Xk=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function K0e(t=120){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,className:Xk[s%Xk.length],level:200+s%50,guild:s%3===0?`Guild ${s%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const Xv={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function Yk(){const[t,e]=E.useState("rows"),[s,r]=E.useState(0),[i,a]=E.useState(""),[l,d]=E.useState(60),u=E.useMemo(()=>K0e(240),[]),h=E.useMemo(()=>u.filter(m=>m.level>=s).filter(m=>m.name.toLowerCase().includes(i.toLowerCase())).slice(0,l),[u,s,i,l]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("select",{value:t,onChange:m=>e(m.target.value),children:[n.jsx("option",{value:"rows",children:"Compact Rows"}),n.jsx("option",{value:"cards",children:"Card Grid"}),n.jsx("option",{value:"masonry",children:"Masonry"})]}),n.jsx("input",{placeholder:"Search",value:i,onChange:m=>a(m.target.value)}),n.jsxs("label",{children:["Min Level ",n.jsx("input",{type:"number",value:s,onChange:m=>r(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]}),n.jsxs("label",{children:["Limit ",n.jsx("input",{type:"number",value:l,onChange:m=>d(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&n.jsx("div",{style:{...Xv,padding:0,overflow:"hidden"},children:h.map(m=>{var g;return n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:700},children:[m.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:m.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),n.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>{var g;return n.jsxs("div",{style:Xv,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:m.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),n.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[n.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),n.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="masonry"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>n.jsxs("div",{style:{...Xv,height:140+parseInt(m.id)%3*40},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:m.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),n.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},m.id))})]})}function Jk(t=24){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,server:`EU${1+s%3}`,lastScanMinsAgo:60+s*7%240});return e}function Zk(){const[t,e]=E.useState(120),[s,r]=E.useState(()=>Jk(24));E.useEffect(()=>{const a=setInterval(()=>{r(l=>{if(!l.length)return l;const d=Math.floor(Math.random()*l.length),u=[...l];return u[d]={...u[d],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),E.useEffect(()=>{const a=setInterval(()=>{r(l=>l.map(d=>({...d,lastScanMinsAgo:d.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=E.useMemo(()=>s.filter(a=>a.lastScanMinsAgo>t),[s,t]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{children:["Freshness TTL (min) ",n.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),n.jsx("button",{onClick:()=>r(Jk(24)),children:"Reset Demo Data"})]}),n.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),n.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[n.jsx("div",{children:"Player"}),n.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{children:[a.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),n.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&n.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function Q0e(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),s=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:s}}function eC(){const[t,e]=E.useState("idle"),[s,r]=E.useState(null),[i,a]=E.useState(!1),l=E.useCallback(async d=>{var h;d.preventDefault(),a(!1);const u=(h=d.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const m=await u.text(),{isHar:g,isSf:v}=Q0e(m);if(e("parsing"),await new Promise(b=>setTimeout(b,600)),!g&&!v){e("error"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":v?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(m.length/2500)} (rough).`})}catch(m){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(m==null?void 0:m.message)||"Parse failed"})}}},[]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),n.jsx("div",{onDragOver:d=>{d.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:l,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),n.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),n.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Status:"})," ",t]}),s?n.jsxs("ul",{children:[n.jsxs("li",{children:["isHar: ",String(s.isHar)]}),n.jsxs("li",{children:["isSf: ",String(s.isSf)]}),n.jsxs("li",{children:["sizeKB: ",s.sizeKB]}),s.error&&n.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",s.error]}),s.summary&&n.jsxs("li",{children:["summary: ",s.summary]})]}):n.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const X0e="_wrap_hxkkn_3",Y0e="_left_hxkkn_17",J0e="_right_hxkkn_25",Z0e="_canvasCard_hxkkn_33",e1e="_hint_hxkkn_83",t1e="_panel_hxkkn_95",s1e="_panelTitle_hxkkn_109",n1e="_panelBody_hxkkn_121",Pa={wrap:X0e,left:Y0e,right:J0e,canvasCard:Z0e,hint:e1e,panel:t1e,panelTitle:s1e,panelBody:n1e},r1e=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],i1e=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function a1e(){const[t,e]=E.useState("Canvas ist vorbereitet (526526)."),s=E.useRef(null),[r,i]=E.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,l]=E.useState(!0);E.useEffect(()=>{const m=document.getElementById("PortraitCanvas");if(!m){e("Fehler: Canvas nicht gefunden.");return}try{s.current&&typeof s.current.dispose=="function"&&s.current.dispose()}catch(b){}let g=console.error;a&&(console.error=(...b)=>{var N;const _=String((N=b==null?void 0:b[0])!=null?N:"");_.includes("Failed to load URL")&&_.includes("PortraitMaker-res/portraits/")||g(...b)});let v=null;try{v=new kC(m,{...r}),s.current=v,e("Rendering")}catch(b){a&&(console.error=g),g("Error initializing PortraitMaker:",b),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return v&&(v.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{v&&typeof v.dispose=="function"&&v.dispose()}finally{a&&(console.error=g)}}},[r,a]);const d=()=>{const m=document.getElementById("PortraitCanvas");if(!m)return;const g=m.toDataURL("image/png"),v=document.createElement("a");v.href=g,v.download="portrait.png",v.click()},u=m=>{i(g=>({...g,genderName:m,beard:m==="female"?0:g.beard}))},h=r.special!==0;return n.jsxs("div",{className:Pa.wrap,children:[n.jsx("div",{className:Pa.left,children:n.jsxs("div",{className:Pa.canvasCard,children:[n.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),n.jsx("div",{className:Pa.hint,children:t})]})}),n.jsx("div",{className:Pa.right,children:n.jsxs("div",{className:Pa.panel,children:[n.jsx("h2",{className:Pa.panelTitle,children:"Controls"}),n.jsx("div",{className:Pa.panelBody,children:n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",n.jsx("input",{type:"number",value:r.special,onChange:m=>i(g=>({...g,special:Number(m.target.value||0)})),style:{width:100}})]}),n.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[n.jsxs("label",{children:["Gender:",n.jsxs("select",{value:r.genderName,onChange:m=>u(m.target.value),children:[n.jsx("option",{value:"male",children:"male"}),n.jsx("option",{value:"female",children:"female"})]})]}),n.jsxs("label",{children:["Class:",n.jsx("input",{type:"number",min:1,value:r.class,onChange:m=>i(g=>({...g,class:Number(m.target.value||0)})),style:{width:80}})]}),n.jsxs("label",{children:["Race:",n.jsx("input",{type:"number",min:1,value:r.race,onChange:m=>i(g=>({...g,race:Number(m.target.value||0)})),style:{width:80}})]})]}),n.jsxs("label",{children:["Background:",n.jsx("select",{value:r.background,onChange:m=>i(g=>({...g,background:m.target.value})),children:r1e.map(m=>n.jsx("option",{value:m,children:m===""?"transparent":m},m))})]}),n.jsxs("label",{children:["Frame:",n.jsx("select",{value:r.frame,onChange:m=>i(g=>({...g,frame:m.target.value})),children:i1e.map(m=>n.jsx("option",{value:m,children:m===""?"none":m},m))})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:m=>i(g=>({...g,showBorder:m.target.checked}))}),"showBorder"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:a,onChange:m=>l(m.target.checked)}),"Mute 404 logs (Playground)"]}),n.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:n.jsx("button",{onClick:d,children:"Export PNG"})}),h&&n.jsxs("div",{className:Pa.hint,children:["Hinweis: Bei ",n.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const o1e=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],l1e=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],c1e=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function d1e(){return n.jsx(Bt,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),n.jsx("ul",{className:"mt-2 space-y-2",children:o1e.map(t=>n.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[n.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),n.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),n.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[n.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),n.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),n.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),n.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:l1e.map(t=>n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),n.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),n.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),n.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:c1e.map(t=>n.jsx("li",{children:t},t))})]})]}),children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),n.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),n.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),n.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),n.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),n.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),n.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),n.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),n.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),n.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const u1e={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function h1e(){return n.jsx(Bt,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:n.jsx("div",{className:"flex w-full justify-center pt-10",children:n.jsx($A,{config:u1e,label:"Playground Avatar"})})})}const m1e=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function p1e(){return n.jsx(Bt,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:m1e.map(t=>n.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),n.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),n.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const f1e="_avatarFrameMask_1pzs8_5",g1e="_avatarFrameOverlay_1pzs8_7",tC={avatarFrameMask:f1e,avatarFrameOverlay:g1e},x1e=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function y1e(){return n.jsx(Bt,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:n.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[n.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:x1e.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),n.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),n.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),n.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:tC.avatarFrameMask,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:tC.avatarFrameOverlay,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const v1e=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function b1e(){return n.jsx(Bt,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"flex w-full flex-col gap-4",children:v1e.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,n.jsx("span",{children:"Leer"})]}),n.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),n.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function _1e(){return n.jsx(Bt,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),n.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const ee={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},w1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},j1e={maxWidth:1200,margin:"0 auto"},S1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function N1e(){return n.jsx("div",{style:w1e,children:n.jsxs("div",{style:j1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"HAR Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:S1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),n.jsxs("div",{style:{border:`1px dashed ${ee.line}`,borderRadius:12,padding:24,textAlign:"center",background:ee.tileAlt},children:["Drop .har file here or"," ",n.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),n.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const k1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},C1e={maxWidth:1200,margin:"0 auto"},T1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function E1e(){return n.jsx("div",{style:k1e,children:n.jsxs("div",{style:C1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"JSON/CSV Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:T1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{children:["Upload JSON ",n.jsx("input",{type:"file",accept:".json"})]}),n.jsxs("label",{children:["Upload CSV ",n.jsx("input",{type:"file",accept:".csv"})]})]}),n.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const A1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},I1e={maxWidth:1200,margin:"0 auto"},R1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function P1e(){return n.jsx("div",{style:A1e,children:n.jsxs("div",{style:I1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Index Schema Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:R1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const L1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},D1e={maxWidth:1200,margin:"0 auto"},M1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function F1e(){return n.jsx("div",{style:L1e,children:n.jsxs("div",{style:D1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Player Profile (Contained) Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:M1e,children:[n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${ee.line}`}}),n.jsxs("div",{children:[n.jsx("h3",{style:{margin:"4px 0",color:ee.title},children:"NightRaven"}),n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>n.jsx("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const B1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},$1e={maxWidth:1200,margin:"0 auto"},O1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function V1e(){return n.jsx("div",{style:B1e,children:n.jsxs("div",{style:$1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Guild Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:O1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:ee.title},children:"Ravens"}),n.jsx("span",{children:"Avg Lvl 465"}),n.jsx("span",{children:"Fresh scans 82%"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:ee.title},children:"Arcana"}),n.jsx("span",{children:"Avg Lvl 458"}),n.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const U1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},z1e={maxWidth:1200,margin:"0 auto"},H1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function G1e(){return n.jsx("div",{style:U1e,children:n.jsxs("div",{style:z1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Server Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:H1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const W1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},q1e={maxWidth:1200,margin:"0 auto"},K1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function Q1e(){return n.jsx("div",{style:W1e,children:n.jsxs("div",{style:q1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Rankings Views Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:K1e,children:[n.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>n.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${ee.line}`,borderRadius:10},children:t},t))}),n.jsx("div",{style:{border:`1px solid ${ee.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[n.jsx("b",{style:{color:ee.title},children:t.name}),n.jsx("span",{children:t.delta}),n.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const X1e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Y1e={maxWidth:1200,margin:"0 auto"},J1e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function Z1e(){return n.jsx("div",{style:X1e,children:n.jsxs("div",{style:Y1e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"KPI Dashboard Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:J1e,children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>n.jsx("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const ebe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},tbe={maxWidth:1200,margin:"0 auto"},sbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function nbe(){return n.jsx("div",{style:ebe,children:n.jsxs("div",{style:tbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Progression Tracker Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:sbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),n.jsx("div",{style:{height:160,border:`1px dashed ${ee.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const rbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},ibe={maxWidth:1200,margin:"0 auto"},abe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function obe(){return n.jsx("div",{style:rbe,children:n.jsxs("div",{style:ibe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Legendary & Pets Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:abe,children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:"Legendary Tracker"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Shadow Bow "}),n.jsx("li",{children:"Mythic Ring "})]})]}),n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:"Pets"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Firewolf 4/5"}),n.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const lbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},cbe={maxWidth:1200,margin:"0 auto"},dbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function ube(){return n.jsx("div",{style:lbe,children:n.jsxs("div",{style:cbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Community Scans Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:dbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>n.jsx("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const hbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},mbe={maxWidth:1200,margin:"0 auto"},pbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function fbe(){return n.jsx("div",{style:hbe,children:n.jsxs("div",{style:mbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Creator Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:pbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const gbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},xbe={maxWidth:1200,margin:"0 auto"},ybe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function vbe(){return n.jsx("div",{style:gbe,children:n.jsxs("div",{style:xbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Feedback Form Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:ybe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Category"}),n.jsxs("select",{style:{background:"#152A42",color:ee.text,border:`1px solid ${ee.line}`,borderRadius:8,padding:"6px 8px"},children:[n.jsx("option",{children:"UI"}),n.jsx("option",{children:"Data"}),n.jsx("option",{children:"Bug"})]})]}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Message"}),n.jsx("textarea",{rows:4,style:{background:"#152A42",color:ee.text,border:`1px solid ${ee.line}`,borderRadius:8,padding:"6px 8px"}})]}),n.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${ee.line}`,borderRadius:10},children:"Send"})]})})]})})}const bbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},_be={maxWidth:1200,margin:"0 auto"},wbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function jbe(){return n.jsx("div",{style:bbe,children:n.jsxs("div",{style:_be,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Feedback Admin Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:wbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),n.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("span",{children:t}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),n.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const Sbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Nbe={maxWidth:1200,margin:"0 auto"},kbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function Cbe(){return n.jsx("div",{style:Sbe,children:n.jsxs("div",{style:Nbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Tutorials Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:kbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Step highlights"}),n.jsx("li",{children:"Progress bar"}),n.jsx("li",{children:"Badges"})]})]})})]})})}const Tbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Ebe={maxWidth:1200,margin:"0 auto"},Abe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function Ibe(){return n.jsx("div",{style:Tbe,children:n.jsxs("div",{style:Ebe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Wiki & FAQ Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Abe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),n.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${ee.line}`,borderRadius:10}}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"How to import HAR?"}),n.jsx("li",{children:"What data is stored?"})]})]})})]})})}const Rbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Pbe={maxWidth:1200,margin:"0 auto"},Lbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function Dbe(){return n.jsx("div",{style:Rbe,children:n.jsxs("div",{style:Pbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Settings Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Lbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("label",{children:["Language",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"EN"}),n.jsx("option",{children:"DE"})]})]}),n.jsxs("label",{children:["Theme",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"Dark"}),n.jsx("option",{children:"Custom"})]})]}),n.jsxs("label",{children:["Notifications",n.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),n.jsxs("label",{children:["Privacy",n.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const Mbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Fbe={maxWidth:1200,margin:"0 auto"},Bbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function $be(){return n.jsx("div",{style:Mbe,children:n.jsxs("div",{style:Fbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"ToS & Privacy Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Bbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),n.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${ee.line}`,borderRadius:10,padding:10,marginTop:8},children:n.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),n.jsxs("label",{style:{marginTop:8},children:[n.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const Obe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Vbe={maxWidth:1200,margin:"0 auto"},Ube={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function zbe(){return n.jsx("div",{style:Obe,children:n.jsxs("div",{style:Vbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Transparency Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Ube,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),n.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${ee.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const Hbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Gbe={maxWidth:1200,margin:"0 auto"},Wbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function qbe(){return n.jsx("div",{style:Hbe,children:n.jsxs("div",{style:Gbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"PWA Update Flow Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Wbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[n.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const Kbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Qbe={maxWidth:1200,margin:"0 auto"},Xbe={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function Ybe(){return n.jsx("div",{style:Kbe,children:n.jsxs("div",{style:Qbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"PWA Install Prompt Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Xbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[n.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${ee.line}`,borderRadius:20}}),n.jsxs("div",{children:[n.jsx("b",{style:{color:ee.title},children:"Install SFDataHub"}),n.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const Jbe={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},Zbe={maxWidth:1200,margin:"0 auto"},e_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function t_e(){return n.jsx("div",{style:Jbe,children:n.jsxs("div",{style:Zbe,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Connect Manual Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:e_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10,marginTop:8},children:[n.jsx("b",{style:{color:ee.title},children:"View source"}),n.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const s_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},n_e={maxWidth:1200,margin:"0 auto"},r_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function i_e(){return n.jsx("div",{style:s_e,children:n.jsxs("div",{style:n_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Connect Userscript Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:r_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx("div",{children:"Install/Enable check"}),n.jsx("div",{children:"Events preview"})]})]})})]})})}const a_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},o_e={maxWidth:1200,margin:"0 auto"},l_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function c_e(){return n.jsx("div",{style:a_e,children:n.jsxs("div",{style:o_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Exports Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:l_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:"CSV/Excel"}),n.jsx("div",{children:"Tabs, widths, locales"})]}),n.jsxs("div",{style:{background:ee.tileAlt,border:`1px solid ${ee.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:ee.title},children:"JSON API"}),n.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const d_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},u_e={maxWidth:1200,margin:"0 auto"},h_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function m_e(){return n.jsx("div",{style:d_e,children:n.jsxs("div",{style:u_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Deeplinks Demo Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:h_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),n.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${ee.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const p_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},f_e={maxWidth:1200,margin:"0 auto"},g_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function x_e(){return n.jsx("div",{style:p_e,children:n.jsxs("div",{style:f_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Servers Editor Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:g_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[n.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),n.jsxs("select",{children:[n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Disabled"})]}),n.jsx("button",{children:"Add"})]})]})})]})})}const y_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},v_e={maxWidth:1200,margin:"0 auto"},b_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function __e(){return n.jsx("div",{style:y_e,children:n.jsxs("div",{style:v_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Jobs & Queues Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:b_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),n.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const w_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},j_e={maxWidth:1200,margin:"0 auto"},S_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function N_e(){return n.jsx("div",{style:w_e,children:n.jsxs("div",{style:j_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Feature Flags Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:S_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[n.jsx("span",{children:"Beta: New Rankings"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox",defaultChecked:!0})}),n.jsx("span",{children:"Widgets v2"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox"})})]})]})})]})})}const k_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},C_e={maxWidth:1200,margin:"0 auto"},T_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function E_e(){return n.jsx("div",{style:k_e,children:n.jsxs("div",{style:C_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Table Performance Lab Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:T_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),n.jsx("div",{style:{height:160,border:`1px dashed ${ee.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const A_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},I_e={maxWidth:1200,margin:"0 auto"},R_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function P_e(){return n.jsx("div",{style:A_e,children:n.jsxs("div",{style:I_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:R_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),n.jsx("div",{style:{height:180,border:`1px dashed ${ee.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const L_e={minHeight:"100vh",background:ee.page,color:ee.text,padding:"24px 16px"},D_e={maxWidth:1200,margin:"0 auto"},M_e={background:ee.tile,border:`1px solid ${ee.line}`,borderRadius:12,padding:12};function F_e(){return n.jsx("div",{style:L_e,children:n.jsxs("div",{style:D_e,children:[n.jsx("h1",{style:{color:ee.title,marginTop:0},children:"Accessibility Pass Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:M_e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Focus ring visible"}),n.jsx("li",{children:"Skip links"}),n.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const B_e=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function $_e({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:s,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:l}){const{t:d}=no(),[u,h]=E.useState(null);E.useEffect(()=>{const R=B_e(r);if(!R){h(null);return}const D=()=>{const y=Date.now(),w=Math.max(0,Math.floor((R-y)/1e3));h(w)};D();const A=window.setInterval(D,1e3);return()=>window.clearInterval(A)},[r]);const m=u!==null&&u>0,g=!t||a||!e||m,v=E.useMemo(()=>{if(u===null||u<=0)return null;const R=Math.floor(u/60),D=u%60;return`${String(R).padStart(2,"0")}:${String(D).padStart(2,"0")}`},[u]),b=a?d("tools.sync.saving"):v?d("tools.sync.cooldownLabel",{time:v}):d("tools.sync.buttonSave"),_=E.useMemo(()=>d(e?"tools.sync.statusUnsynced":s?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,s,d]),N=E.useMemo(()=>{if(e)return null;if(s){const R=typeof s=="string"?new Date(s):s;return`${d("tools.sync.lastSyncLabel")}: ${R.toLocaleTimeString()}`}return d("tools.sync.noChanges")},[e,s,d]),C=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return n.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[n.jsx("button",{type:"button",disabled:g,onClick:i,className:C,children:b}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:_}),N&&n.jsx("p",{className:"text-sm text-slate-200",children:N}),l&&n.jsx("p",{className:"text-sm text-rose-400",children:l})]})]})})}const lf=3,wI="sfdatahub.tools.sets.v1",sC=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],rd=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],O_e=300*1e3;async function V_e(t,e){const s=qt(pc(xt,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",s.path);const r={version:1,updatedAt:Ai(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await eo(s,r,{merge:!1})}const U_e=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(wI);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function z_e(){var ft,$t;const{t}=no(),{user:e,status:s,loginWithDiscord:r}=ao(),i=s==="authenticated"&&!!e,a=E.useMemo(()=>U_e(),[]),l=E.useMemo(()=>{var je;return(je=a==null?void 0:a.sets)!=null&&je.length?a.sets.slice(0,lf):sC},[a]),d=E.useMemo(()=>{var Je,Ke,bt,kt;const je=a==null?void 0:a.activeSetId;return je&&l.some(Oe=>Oe.id===je)?je:(kt=(bt=(Je=l[0])==null?void 0:Je.id)!=null?bt:(Ke=sC[0])==null?void 0:Ke.id)!=null?kt:"set-main-dh"},[a,l]),u=E.useMemo(()=>{var Je,Ke;const je=a==null?void 0:a.activeToolId;return je&&rd.some(bt=>bt.id===je)?je:(Ke=(Je=rd[0])==null?void 0:Je.id)!=null?Ke:"gemSim"},[a]),[h,m]=E.useState(l),[g,v]=E.useState(d),[b,_]=E.useState(u),[N,C]=E.useState(null),[R,D]=E.useState(""),[A,y]=E.useState(""),[w,M]=E.useState(!1),[k,S]=E.useState(null),[T,F]=E.useState(null),[I,B]=E.useState(!1),[$,H]=E.useState(null),z=E.useRef(null),W=E.useRef(!0);E.useEffect(()=>{if(typeof window!="undefined")try{const je={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:b};window.localStorage.setItem(wI,JSON.stringify(je))}catch(je){console.warn("Failed to persist tools state",je)}},[h,g,b]),E.useEffect(()=>{if(!i){M(!1),W.current=!0;return}if(W.current){W.current=!1;return}M(!0)},[i,h,g,b]);const K=E.useMemo(()=>{var je;return(je=h.find(Je=>Je.id===g))!=null?je:h[0]},[g,h]),q=E.useMemo(()=>{var je;return(je=rd.find(Je=>Je.id===b))!=null?je:rd[0]},[b]),se=(ft=K==null?void 0:K.tools)==null?void 0:ft.gemSim,re=($t=K==null?void 0:K.tools)==null?void 0:$t.dungeonPauseOpenXP,U=h.length,Y=U>=lf,ce=()=>{if(Y)return;const je=U+1,Je=t("tools.sets.defaultName","New Set"),Ke={id:`set-${Date.now()}`,name:`${Je} ${je}`,classLabel:"Class TBD",serverLabel:"Server TBD"};m(bt=>[...bt,Ke]),v(Ke.id)},oe=()=>{r()},me=()=>{if(!K){console.warn("No active set to export.");return}const je={version:1,type:"toolSet",set:K},Je=new Blob([JSON.stringify(je,null,2)],{type:"application/json"}),Ke=URL.createObjectURL(Je),bt=document.createElement("a"),kt=K.name.toLowerCase().replace(/\s+/g,"-");bt.href=Ke,bt.download=`sfdatahub-set-${kt}.json`,bt.click(),URL.revokeObjectURL(Ke)},_e=()=>{var je;(je=z.current)==null||je.click()},Pe=je=>{var Oe,Te;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Je=t("tools.sets.deleteConfirmTitle"),Ke=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Je}

${Ke}`))return;const bt=h.filter(De=>De.id!==je),kt=je===g?(Te=(Oe=bt[0])==null?void 0:Oe.id)!=null?Te:null:g;m(bt),kt&&v(kt)},te=je=>{const Je=h.find(Ke=>Ke.id===je);Je&&(C(je),D(Je.name),y(""))},fe=()=>{C(null),D(""),y("")},ae=()=>{if(!N)return;const je=R.trim();if(!je){y(t("tools.sets.renameErrorEmpty"));return}m(Je=>Je.map(Ke=>Ke.id===N?{...Ke,name:je}:Ke)),C(null),D(""),y("")},be=async je=>{var Ke,bt;const Je=(bt=(Ke=je.target)==null?void 0:Ke.files)==null?void 0:bt[0];if(Je)try{if(h.length>=lf){alert(t("tools.sets.importErrorMaxReached"));return}const kt=await Je.text(),Oe=JSON.parse(kt);if((Oe==null?void 0:Oe.version)!==1||(Oe==null?void 0:Oe.type)!=="toolSet"||typeof(Oe==null?void 0:Oe.set)!="object")throw new Error("invalid payload");const{set:Te}=Oe;if(typeof(Te==null?void 0:Te.name)!="string"||typeof(Te==null?void 0:Te.classLabel)!="string"||typeof(Te==null?void 0:Te.serverLabel)!="string")throw new Error("invalid set");const De={...Te,id:`imported-${Date.now()}`,name:Te.name,classLabel:Te.classLabel,serverLabel:Te.serverLabel};m(et=>[...et,De]),v(De.id)}catch(kt){console.error("Failed to import set",kt),alert(t("tools.sets.importErrorInvalid"))}finally{je.target.value=""}},ye=je=>{g&&(m(Je=>Je.map(Ke=>{var kt;if(Ke.id!==g)return Ke;const bt={...(kt=Ke.tools)!=null?kt:{},gemSim:je};return{...Ke,tools:bt}})),M(!0))},Ie=je=>{g&&(m(Je=>Je.map(Ke=>{var kt;if(Ke.id!==g)return Ke;const bt={...(kt=Ke.tools)!=null?kt:{},dungeonPauseOpenXP:je};return{...Ke,tools:bt}})),M(!0))},$e=`${U}/${lf}`,Ge=t(q.labelKey,q.defaultLabel),nt=t(q.descriptionKey,q.defaultDescription),at=async()=>{if(!i)return;const je=e==null?void 0:e.id;if(!(!je||I||T!==null&&T>Date.now())&&w){B(!0),H(null);try{await V_e(je,{sets:h,activeSetId:g,activeToolId:b});const Ke=Date.now(),bt=Ke+O_e;M(!1),S(new Date(Ke)),F(bt)}catch(Ke){console.error("Failed to sync tools state",Ke),H(t("tools.sync.error"))}finally{B(!1)}}};return n.jsx(Bt,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),n.jsx("span",{className:"text-xs text-slate-400",children:$e})]}),n.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(je=>{const Je=je.id===g;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>v(je.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Je?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-sm font-semibold text-slate-50",children:je.name}),n.jsx("span",{role:"button",tabIndex:0,onClick:Ke=>{Ke.stopPropagation(),te(je.id)},onKeyDown:Ke=>{(Ke.key==="Enter"||Ke.key===" ")&&(Ke.preventDefault(),Ke.stopPropagation(),te(je.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:n.jsx(N6,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-xs text-emerald-200/90",children:je.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:je.serverLabel}),Je&&n.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&n.jsx("button",{type:"button",onClick:Ke=>{Ke.stopPropagation(),Pe(je.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},je.id)}),n.jsxs("button",{type:"button",onClick:ce,disabled:Y,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",Y?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[n.jsx("span",{className:"text-lg",children:"+"}),n.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[n.jsx("button",{type:"button",onClick:me,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),n.jsx("button",{type:"button",onClick:_e,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),n.jsx("input",{ref:z,type:"file",accept:"application/json",className:"hidden",onChange:be})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),n.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:rd.map(je=>{const Je=je.id===b,Ke=t(je.labelKey,je.defaultLabel);return n.jsxs("button",{type:"button",onClick:()=>_(je.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Je?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[n.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),n.jsx("span",{children:Ke})]},je.id)})})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),n.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),n.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(je=>n.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),n.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:je})]},je))})]}),n.jsx($_e,{isLoggedIn:i,hasUnsyncedChanges:w,lastSyncedAt:k,cooldownUntil:T,onSyncClick:at,isSaving:I,syncError:$})]}):n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),n.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),n.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(je=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),n.jsx("span",{children:je})]},je))})]}),n.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:n.jsx("button",{type:"button",onClick:oe,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:Ge}),n.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(K==null?void 0:K.name)||"kein Set"]})]}),n.jsx("div",{className:"flex gap-2",children:rd.map(je=>n.jsx("div",{className:["h-2 w-8 rounded-full transition",b===je.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},je.id))})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsx("div",{className:"text-sm text-slate-300",children:nt}),n.jsx("div",{className:"mt-4",children:b==="gemSim"?n.jsx(GA,{initialState:se,onStateChange:ye}):b==="dungeonPauseOpenXP"?n.jsx(KA,{initialState:re,onStateChange:Ie},g):n.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",n.jsx("br",{}),"(z. B. ",Ge,")"]})})]}),n.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:K==null?void 0:K.name}),n.jsx("div",{className:"text-sm text-emerald-200/90",children:K==null?void 0:K.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:K==null?void 0:K.serverLabel})]}),n.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",n.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),N&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:fe}),n.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),n.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),n.jsx("input",{value:R,onChange:je=>D(je.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),A&&n.jsx("p",{className:"mt-2 text-xs text-rose-400",children:A}),n.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:fe,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),n.jsx("button",{type:"button",onClick:ae,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const Yv=50,H_e=3,G_e=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),Jv=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function W_e(){var w,M;const[t]=al(),e=(M=(w=t.get("q"))==null?void 0:w.trim())!=null?M:"",s=G_e(e),[r,i]=X.useState([]),[a,l]=X.useState([]),[d,u]=X.useState(null),[h,m]=X.useState(null),[g,v]=X.useState(!1),[b,_]=X.useState(!1),[N,C]=X.useState(!1),[R,D]=X.useState(null),A=async k=>{const S=Fh("Search:results");try{const T=an(am(xt,"latest"),Wr("nameFold"),Ri(s),Pi(s+""),...k?[x$(k)]:[],hn(Yv)),F=await Wl(S,{},()=>mn(T)),I=F.docs.length?F.docs[F.docs.length-1]:null,B=[],$=[];F.forEach(H=>{var se,re,U,Y,ce,oe,me,_e,Pe,te,fe,ae,be,ye,Ie,$e,Ge,nt,at,ft,$t,je,Je,Ke,bt,kt,Oe,Te,De,et,ht,we;const z=H.data(),W=(se=H.ref.parent)==null?void 0:se.parent,K=(re=W==null?void 0:W.parent)==null?void 0:re.id,q=(U=W==null?void 0:W.id)!=null?U:H.id;K==="players"?B.push({id:q,name:(oe=(ce=z.name)!=null?ce:(Y=z.values)==null?void 0:Y.Name)!=null?oe:null,server:(Pe=(_e=z.server)!=null?_e:(me=z.values)==null?void 0:me.Server)!=null?Pe:null,className:(ae=(fe=z.className)!=null?fe:(te=z.values)==null?void 0:te.Class)!=null?ae:null,level:Jv((ye=z.level)!=null?ye:(be=z.values)==null?void 0:be.Level)}):K==="guilds"&&$.push({id:q,name:(Ge=($e=z.name)!=null?$e:(Ie=z.values)==null?void 0:Ie.Name)!=null?Ge:null,server:(ft=(at=z.server)!=null?at:(nt=z.values)==null?void 0:nt.Server)!=null?ft:null,memberCount:Jv((Ke=(je=z.memberCount)!=null?je:($t=z.values)==null?void 0:$t["Guild Member Count"])!=null?Ke:(Je=z.values)==null?void 0:Je.GuildMemberCount),hofRank:Jv((we=(et=(Te=(kt=z.hofRank)!=null?kt:(bt=z.values)==null?void 0:bt["Hall of Fame Rank"])!=null?Te:(Oe=z.values)==null?void 0:Oe.HoF)!=null?et:(De=z.values)==null?void 0:De.Rank)!=null?we:(ht=z.values)==null?void 0:ht["Guild Rank"])})}),i(H=>[...H,...B]),l(H=>[...H,...$]),u(I),m(I),v(F.docs.length===Yv),_(F.docs.length===Yv)}finally{Ba(S)}};X.useEffect(()=>{if(s.length<H_e){D("Type at least 3 characters to search.");return}D(null),i([]),l([]),u(null),m(null),v(!1),_(!1),C(!0),A().catch(k=>D((k==null?void 0:k.message)||"Search failed")).finally(()=>C(!1))},[s]);const y=()=>{N||(C(!0),A(d||h).catch(k=>D((k==null?void 0:k.message)||"Search failed")).finally(()=>C(!1)))};return n.jsxs(Bt,{title:"Search",subtitle:e?`Results for ${e}`:"",children:[R&&n.jsx("p",{style:{color:"#ff9c9c",marginBottom:12},children:R}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[n.jsxs("section",{children:[n.jsx("h3",{children:"Players"}),r.map(k=>{var S,T,F;return n.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[n.jsx("div",{style:{fontWeight:700},children:(S=k.name)!=null?S:k.id}),n.jsxs("div",{style:{opacity:.8},children:[(T=k.className)!=null?T:"?","  ",(F=k.server)!=null?F:"?","  ",k.level!=null?`Lvl ${k.level}`:"Lvl ?"]})]},k.id)})]}),n.jsxs("section",{children:[n.jsx("h3",{children:"Guilds"}),a.map(k=>{var S,T;return n.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[n.jsx("div",{style:{fontWeight:700},children:(S=k.name)!=null?S:k.id}),n.jsxs("div",{style:{opacity:.8},children:[(T=k.server)!=null?T:"?"," "," ",k.memberCount!=null?`${k.memberCount} members`:"Members ?"," "," ",k.hofRank!=null?`HoF #${k.hofRank}`:"HoF ?"]})]},k.id)})]})]}),(g||b)&&n.jsx("div",{style:{marginTop:16},children:n.jsx("button",{type:"button",onClick:y,disabled:N,style:{padding:"10px 14px"},children:N?"Loading":"Load more"})})]})}const q_e="_backdrop_19xh2_1",K_e="_panel_19xh2_19",Q_e="_header_19xh2_43",X_e="_tabs_19xh2_63",Y_e="_tabBtn_19xh2_75",J_e="_tabActive_19xh2_97",Z_e="_closeBtn_19xh2_101",ewe="_content_19xh2_123",ea={backdrop:q_e,panel:K_e,header:Q_e,tabs:X_e,tabBtn:Y_e,tabActive:J_e,closeBtn:Z_e,content:ewe},sa=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const s=Number(e);return Number.isFinite(s)?s:0},twe=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let s=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/);return s?{group:"EU",serverKey:`EU${s[1]||s[2]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(s=e.match(/F(\d+)/),s?{group:"FUSION",serverKey:`F${s[1]}`}:{group:"ALL",serverKey:"all"})},swe={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Dexterity",Mage:"Base Intelligence","Battle Mage":"Base Intelligence",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},Ho=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,nwe=t=>{const e={str:sa(Ho(t,"Base Strength")),dex:sa(Ho(t,"Base Dexterity")),intl:sa(Ho(t,"Base Intelligence")),con:sa(Ho(t,"Base Constitution")),luck:sa(Ho(t,"Base Luck"))},s=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:s}},rwe=(t,e)=>{var S,T;const{playerId:s,name:r,className:i,level:a,server:l,guildIdentifier:d,guildName:u,timestamp:h,updatedAt:m,values:g={}}=t||{},v=sa(a),{group:b,serverKey:_}=twe(l),N=nwe(g),C=(S=swe[String(i)])!=null?S:"Base Intelligence",R=sa(Ho(g,C)),D=N.sum,A=N.con,y=v>0?D/v:0,w=sa(Ho(g,"Gem Mine")),M=sa(Ho(g,"Treasury")),k=e?e():null;return{playerId:String(s!=null?s:""),name:String(r!=null?r:""),class:String(i!=null?i:""),level:v,group:b,serverKey:_,guildId:d?String(d):"",guildName:u?String(u):"",sum:D,main:R,con:A,ratio:y,mine:w,treasury:M,timestamp:sa(h),updatedAtFromLatest:(T=m!=null?m:k)!=null?T:null}},ui=t=>String(t!=null?t:"").trim(),jI=t=>ui(t).toUpperCase(),Gt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),nC=t=>t<10?`0${t}`:String(t),iwe=t=>{const e=t?new Date(t*1e3):new Date;return+`${e.getFullYear()}${nC(e.getMonth()+1)}${nC(e.getDate())}`},Af=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),rC=t=>{const e=Af(t);if(!e)return[];const s=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(s))},iC=t=>{const e=new Set;for(const s of t)for(let r=1;r<=s.length;r++)e.add(s.slice(0,r));return Array.from(e)},aC=t=>{var s;const e=String((s=t==null?void 0:t.code)!=null?s:"").toLowerCase();return e.includes("permission")||e.includes("already")||e.includes("failed-precondition")},o1=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},oC=t=>{const e=o1(t);return Number.isFinite(e!=null?e:NaN)?Math.trunc(e):null},awe=t=>{const e=Gt(t);for(const[s,r]of Object.entries(SI))if(Gt(r)===e)return Number(s);return null},lC=t=>{var a;const e=t==null?"":String(t).trim();if(!e)return{classId:null,className:null};const s=Number(e);if(Number.isInteger(s)&&!Number.isNaN(s)){const l=s;return{classId:l,className:(a=SI[l])!=null?a:String(l)}}return{classId:awe(e),className:e}},_s={PLAYERS:{IDENTIFIER:Gt("Identifier"),PID:Gt("ID"),GUILD_IDENTIFIER:Gt("Guild Identifier"),SERVER:Gt("Server"),NAME:Gt("Name"),TIMESTAMP:Gt("Timestamp"),LEVEL:Gt("Level"),CLASS:Gt("Class"),GUILD:Gt("Guild")},GUILDS:{GUILD_IDENTIFIER:Gt("Guild Identifier"),SERVER:Gt("Server"),NAME:Gt("Name"),MEMBER_COUNT:Gt("Guild Member Count"),TIMESTAMP:Gt("Timestamp"),HOF:Gt("Hall of Fame Rank"),HOF_ALT:Gt("HoF"),RANK:Gt("Rank"),GUILD_RANK:Gt("Guild Rank")}},SI={1:"Warrior",2:"Mage",3:"Scout",4:"Assassin",5:"Battle Mage",6:"Berserker",7:"Demon Hunter",8:"Bard"},NI=[_s.PLAYERS.LEVEL,Gt("Level"),Gt("Lvl"),Gt("Stufe")],kI=[_s.PLAYERS.CLASS,Gt("Class"),Gt("ClassID"),Gt("Class ID"),Gt("CharClass"),Gt("Klasse")],CI=t=>{const e=new Map;return t.forEach(s=>{const r=Gt(s);e.has(r)||e.set(r,s)}),e},xd=t=>{const e=new Set;for(const s of t)Object.keys(s).forEach(r=>e.add(r));return Array.from(e)},qr=(t,e,s)=>{const r=e.get(s);return r&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:Ma(t,s)},l1=(t,e,s)=>s.map(r=>qr(t,e,r)).find(r=>r!=null&&String(r)!==""),owe=new Set([Gt("Strength"),Gt("Dexterity"),Gt("Intelligence"),Gt("Constitution"),Gt("Luck"),Gt("Attribute")]),lwe=["equipment"],cwe=t=>owe.has(t)||lwe.some(e=>t.includes(e)),Ma=(t,e)=>{for(const s of Object.keys(t))if(Gt(s)===e)return t[s]};function fg(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,m=new Date(l,a,i,d,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function cC(t){const e=new Date(t*1e3),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-r);const i=new Date(Date.UTC(s.getUTCFullYear(),0,1)),a=Math.ceil(((+s-+i)/864e5+1)/7),l=s.getUTCFullYear(),d=a.toString().padStart(2,"0");return`${l}-W${d}`}function dC(t){const e=new Date(t*1e3),s=new Date(e),r=(s.getDay()+6)%7;s.setHours(0,0,0,0),s.setDate(s.getDate()-r);const i=Math.floor(s.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function uC(t){const e=new Date(t*1e3),s=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${s}-${r}`}function hC(t){const e=new Date(t*1e3),s=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(s.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function dwe(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function gg(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[]};const r=dwe((u=s[0])!=null?u:""),i=h=>{const m=[];let g="",v=!1;for(let b=0;b<h.length;b++){const _=h[b];_==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:_===r&&!v?(m.push(g),g=""):g+=_}return m.push(g),m},l=(s[0]?i(s[0]).map(ui):[]).map((h,m)=>h||`col${m}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const m=i(s[h]);if(m.every(v=>ui(v)===""))continue;const g={};for(let v=0;v<l.length;v++)g[l[v]]=m[v]!=null?ui(m[v]):"";d.push(g)}return{headers:l,rows:d}}function uwe(t){const e={};for(let s=0;s<t.length;s++){const r=Gt(t[s]);NI.includes(r)&&e.levelIndex==null&&(e.levelIndex=s),kI.includes(r)&&e.classIndex==null&&(e.classIndex=s)}if(e.levelIndex==null){const s=t.findIndex(r=>r.trim()==="Level");s>=0&&(e.levelIndex=s)}if(e.classIndex==null){const s=t.findIndex(r=>r.trim()==="Class");s>=0&&(e.classIndex=s)}return e}function TI(t,e){var d;const s=e&&e.length?e:xd(t),r=CI(s),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[],l=uwe(s);for(const u of t){const h=(d=qr(u,r,_s.PLAYERS.PID))!=null?d:qr(u,r,_s.PLAYERS.IDENTIFIER),m=ui(h);if(!m){i.missingIdentifier++;continue}const g=fg(qr(u,r,_s.PLAYERS.TIMESTAMP));if(g==null){i.badTimestamp++;continue}const v=qr(u,r,_s.PLAYERS.SERVER),b=v&&ui(v)!==""?jI(v):void 0;if(!b){i.missingServer++;continue}const _=qr(u,r,_s.PLAYERS.NAME),N=_!=null&&ui(_)!==""?String(_):null,C=qr(u,r,_s.PLAYERS.GUILD_IDENTIFIER),R=C!=null&&ui(C)!==""?String(C):null,D=qr(u,r,_s.PLAYERS.GUILD),A=D!=null&&ui(D)!==""?String(D):null,y=l.levelIndex!=null?oC(u[s[l.levelIndex]]):oC(l1(u,r,NI)),w=l.classIndex!=null?lC(u[s[l.classIndex]]):lC(l1(u,r,kI));a.push({playerId:m,server:b,name:N,timestampSec:g,guildIdentifier:R,guildName:A,level:y,classId:w.classId,className:w.className,raw:u})}return{rows:a,stats:i,headers:s}}function EI(t,e){const s=e&&e.length?e:xd(t),r=CI(s),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[];for(const l of t){const d=qr(l,r,_s.GUILDS.GUILD_IDENTIFIER),u=ui(d);if(!u){i.missingIdentifier++;continue}const h=fg(qr(l,r,_s.GUILDS.TIMESTAMP));if(h==null){i.badTimestamp++;continue}const m=qr(l,r,_s.GUILDS.SERVER),g=m&&ui(m)!==""?jI(m):void 0;if(!g){i.missingServer++;continue}const v=qr(l,r,_s.GUILDS.NAME),b=v!=null&&ui(v)!==""?String(v):null,_=o1(qr(l,r,_s.GUILDS.MEMBER_COUNT)),N=o1(l1(l,r,[_s.GUILDS.HOF,_s.GUILDS.HOF_ALT,_s.GUILDS.RANK,_s.GUILDS.GUILD_RANK]));a.push({guildIdentifier:u,server:g,name:b,timestampSec:h,memberCount:_,hofRank:N,raw:l})}return{rows:a,stats:i,headers:s}}function hwe(t){const e=gg(t);return TI(e.rows,e.headers).rows}function mwe(t){const e=gg(t);return EI(e.rows,e.headers).rows}const mC="stats_cache_player_derived",pwe="stats_index_players_daily_compact",If=40,pC=120;async function Sd(t,e,s,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:s});for(let i=0;i<t.length;i+=e){const a=j$(xt),l=t.slice(i,i+e);for(const d of l)d(a);r==null||r({phase:"write",current:Math.min(i+l.length,t.length),total:t.length,pass:s}),await a.commit(),await new Promise(d=>setTimeout(d,12))}r==null||r({phase:"done",current:1,total:1,pass:s})}async function fC(t,e,s){var m,g,v;const r=[];if(!t.length)return r;let i=0,a=0,l=0,d=0;const u=b=>{e==null||e({phase:b,current:b==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:l,error:d,kind:s})};u("prepare");const h=xt.bulkWriter;if(typeof h=="function"){const b=h.call(xt,{throttling:!0}),_=()=>{i++,u("write")};for(const{ref:N,data:C,key:R}of t)b.create(N,C).then(()=>{a++,r.push({key:R,status:"created"}),_()}).catch(D=>{var y,w;const A=String((y=D==null?void 0:D.code)!=null?y:"").toLowerCase();A.includes("already")&&A.includes("exist")?(l++,r.push({key:R,status:"duplicate"})):(d++,r.push({key:R,status:"error",message:String((w=D==null?void 0:D.message)!=null?w:D)})),_()});try{await b.close()}catch(N){console.warn("[ImportCsv] bulkWriter close with errors",{error:N})}return u("done"),r}for(const{ref:b,data:_,key:N}of t){try{await eo(b,_),a++,r.push({key:N,status:"created"})}catch(C){const R=String((m=C==null?void 0:C.code)!=null?m:"").toLowerCase();R.includes("permission")||R.includes("already")?(l++,r.push({key:N,status:"duplicate",message:String((g=C==null?void 0:C.message)!=null?g:C)})):(d++,r.push({key:N,status:"error",message:String((v=C==null?void 0:C.message)!=null?v:C)}))}i++,u("write")}return u("done"),r}async function fwe(t,e,s,r){if(!t.length&&!e.length&&!s.length)return;const i=t.length+e.length+s.length,a=xt.bulkWriter;if(typeof a=="function"){const h=a.call(xt,{throttling:!0});r==null||r({phase:"prepare",current:0,total:i,pass:"latest"});for(const{ref:m,data:g}of t)h.set(m,g,{merge:!0});for(const{pid:m,data:g}of e)h.set(qt(xt,`${mC}/${m}`),g,{merge:!0});for(const{ref:m,data:g}of s)h.set(m,g,{merge:!0});r==null||r({phase:"write",current:i,total:i,pass:"latest"}),await h.close(),r==null||r({phase:"done",current:1,total:1,pass:"latest"});return}const l=t.map(({ref:h,data:m})=>g=>g.set(h,m,{merge:!0})),d=e.map(({pid:h,data:m})=>g=>g.set(qt(xt,`${mC}/${h}`),m,{merge:!0})),u=s.map(({ref:h,data:m})=>g=>g.set(h,m,{merge:!0}));await Sd(l,If,"latest",r),await Sd(d,If,"latest",r),await Sd(u,If,"latest",r)}function cf(t,e){const s={};for(const r of e){const i=Gt(r);if(cwe(i)){let a=null,l;for(const d of t){const u=d.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,l=u)}s[r]=l!=null?l:""}else{let a="";for(let l=t.length-1;l>=0;l--){const d=t[l].row[r];if(d!=null&&String(d)!==""){a=d;break}}s[r]=a}}return s}async function gC(t){var i;const e=await Js(t);if(!e.exists())return 0;const s=e.data();if(((i=s==null?void 0:s.values)==null?void 0:i.Timestamp)!=null){const a=fg(s.values.Timestamp);if(a!=null)return a}if((s==null?void 0:s.timestampRaw)!=null){const a=fg(s.timestampRaw);if(a!=null)return a}if(typeof(s==null?void 0:s.ts)=="number")return s.ts;const r=s==null?void 0:s.timestamp;if(typeof r=="number")return r>9999999999?Math.floor(r/1e3):r;if(typeof r=="string"){const a=Date.parse(r);return Number.isFinite(a)?Math.floor(a/1e3):0}return 0}async function xC(t,e){var m,g,v,b,_,N,C;const s=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},l=[],d=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');const u=e.onProgress?(R=>{var D;return(D=e.onProgress)==null?void 0:D.call(e,{...R,kind:e.kind})}):void 0;if(e.kind==="players"){const R=[],D=[],A=[],y=new Map,w=[];let M=[],k=[];if(e.rows&&Array.isArray(e.rows))M=e.rows,k=xd(M);else if(e.raw&&typeof e.raw=="string"){const z=gg(e.raw);M=z.rows,k=z.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:S,stats:T,headers:F}=TI(M,k);a.skippedMissingIdentifier+=T.missingIdentifier,a.skippedBadTs+=T.badTimestamp,a.skippedMissingServer+=T.missingServer;const I=F.length?F:xd(M),B=new Map;for(const z of S){const W=`${z.playerId}__${z.server}__${z.timestampSec}`;R.push({key:W,ref:qt(xt,`players/${z.playerId}/scans/${z.timestampSec}`),data:{playerId:z.playerId,server:z.server,timestamp:z.timestampSec,timestampRaw:Ma(z.raw,_s.PLAYERS.TIMESTAMP),name:z.name,values:z.raw,createdAt:Ai()}}),B.has(z.playerId)||B.set(z.playerId,[]),B.get(z.playerId).push({row:z.raw,ts:z.timestampSec,parsed:z})}const $=await fC(R,u,"players");l.push(...$),a.writtenScanPlayers=$.filter(z=>z.status==="created").length;for(const[z,W]of B){W.sort((ye,Ie)=>ye.ts-Ie.ts);const K=W[W.length-1],q=K.parsed,se=q.server,re=q.name,U=(m=q.level)!=null?m:null,Y=(g=q.className)!=null?g:null,ce=(v=q.guildName)!=null?v:null,oe=q.guildIdentifier,me=re!=null?re:"",_e=rC(me),Pe=iC(_e),te=qt(xt,`players/${z}/latest/latest`),fe=await gC(te);if(K.ts>fe){const ye=Ai();D.push({ref:te,data:{playerId:z,server:se,timestamp:K.ts,timestampRaw:Ma(K.row,_s.PLAYERS.TIMESTAMP),name:re,values:K.row,updatedAt:ye,nameFold:Af(me),nameTokens:_e,nameNgrams:Pe,level:U,className:Y,guildName:ce,guildNameFold:ce?Af(ce):null}});const Ie={playerId:z,name:re,className:Y,level:U,server:se,guildIdentifier:oe||void 0,guildName:ce||void 0,values:K.row,timestamp:K.ts,updatedAt:ye},$e=rwe(Ie,Ai);A.push({pid:z,data:$e});const Ge=iwe(K.ts),nt=[{scopeId:"all_all_sum",group:"ALL",serverKey:"all"},{scopeId:`${$e.group||"ALL"}_all_sum`,group:$e.group||"ALL",serverKey:"all"}];$e.serverKey&&$e.serverKey!=="all"&&nt.push({scopeId:`${$e.group||"ALL"}_${$e.serverKey}_sum`,group:$e.group||"ALL",serverKey:$e.serverKey});for(const at of nt){const ft=`${Ge}__${at.scopeId}`;y.has(ft)||y.set(ft,{dateKey:Ge,scopeId:at.scopeId,group:at.group,serverKey:at.serverKey,ids:[],vals:[]});const $t=y.get(ft);$t.ids.push(z),$t.vals.push(Number((b=$e.sum)!=null?b:0))}a.writtenLatestPlayers++}const ae=new Map,be=new Map;for(const ye of W){const Ie=cC(ye.ts),$e=uC(ye.ts);ae.has(Ie)||ae.set(Ie,[]),be.has($e)||be.set($e,[]),ae.get(Ie).push(ye),be.get($e).push(ye)}for(const[ye,Ie]of ae){Ie.sort((at,ft)=>at.ts-ft.ts);const $e=cf(Ie,I),Ge=dC(Ie[Ie.length-1].ts),nt=Ie[Ie.length-1];w.push(at=>{const ft=qt(xt,`players/${z}/history_weekly/${ye}`);at.set(ft,{playerId:z,weekId:ye,periodStartSec:Ge.start,periodEndSec:Ge.end,lastTs:nt.ts,lastTimestampRaw:Ma(nt.row,_s.PLAYERS.TIMESTAMP),server:nt.parsed.server,name:nt.parsed.name,values:$e,updatedAt:Ai()},{merge:!0})}),a.writtenWeeklyPlayers++}for(const[ye,Ie]of be){Ie.sort((at,ft)=>at.ts-ft.ts);const $e=cf(Ie,I),Ge=hC(Ie[Ie.length-1].ts),nt=Ie[Ie.length-1];w.push(at=>{const ft=qt(xt,`players/${z}/history_monthly/${ye}`);at.set(ft,{playerId:z,monthId:ye,periodStartSec:Ge.start,periodEndSec:Ge.end,lastTs:nt.ts,lastTimestampRaw:Ma(nt.row,_s.PLAYERS.TIMESTAMP),server:nt.parsed.server,name:nt.parsed.name,values:$e,updatedAt:Ai()},{merge:!0})}),a.writtenMonthlyPlayers++}}const H=[];for(const{dateKey:z,scopeId:W,group:K,serverKey:q,ids:se,vals:re}of y.values()){const U=se.map((me,_e)=>{var Pe;return{id:me,val:(Pe=re[_e])!=null?Pe:0}});U.sort((me,_e)=>_e.val-me.val);const Y=U.map(me=>me.id),ce=U.map(me=>me.val),oe=U.map((me,_e)=>_e+1);H.push({ref:qt(xt,`${pwe}/${z}__${W}`),data:{n:U.length,ids:Y,vals:ce,ranks:oe,generatedAt:Date.now(),group:K,serverKey:q,metric:"sum",dateKey:z}})}await fwe(D,A,H,u),await Sd(w,pC,"history",u)}if(e.kind==="guilds"){const R=[],D=[],A=[];let y=[],w=[];if(e.rows&&Array.isArray(e.rows))y=e.rows,w=xd(y);else if(e.raw&&typeof e.raw=="string"){const B=gg(e.raw);y=B.rows,w=B.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:M,stats:k,headers:S}=EI(y,w);a.skippedMissingGuildIdentifier+=k.missingIdentifier,a.skippedBadTsGuild+=k.badTimestamp,a.skippedMissingServer+=k.missingServer;const T=S.length?S:xd(y),F=new Map;for(const B of M){const $=`${B.guildIdentifier}__${B.server}__${B.timestampSec}`;R.push({key:$,ref:qt(xt,`guilds/${B.guildIdentifier}/scans/${B.timestampSec}`),data:{guildIdentifier:B.guildIdentifier,server:B.server,timestamp:B.timestampSec,timestampRaw:Ma(B.raw,_s.GUILDS.TIMESTAMP),name:B.name,values:B.raw,createdAt:Ai()}}),F.has(B.guildIdentifier)||F.set(B.guildIdentifier,[]),F.get(B.guildIdentifier).push({row:B.raw,ts:B.timestampSec,parsed:B})}const I=await fC(R,u,"guilds");d.push(...I),a.writtenScanGuilds=I.filter(B=>B.status==="created").length;for(const[B,$]of F){$.sort((me,_e)=>me.ts-_e.ts);const H=$[$.length-1],z=H.parsed,W=(_=z.name)!=null?_:"",K=rC(W),q=iC(K),se=(N=z.memberCount)!=null?N:null,re=(C=z.hofRank)!=null?C:null,U=qt(xt,`guilds/${B}/latest/latest`),Y=await gC(U);H.ts>Y&&(D.push(me=>{me.set(U,{guildIdentifier:B,server:z.server,timestamp:H.ts,timestampRaw:Ma(H.row,_s.GUILDS.TIMESTAMP),name:z.name,values:H.row,updatedAt:Ai(),nameFold:Af(W),nameTokens:K,nameNgrams:q,memberCount:se,hofRank:re},{merge:!0})}),a.writtenLatestGuilds++);const ce=new Map,oe=new Map;for(const me of $){const _e=cC(me.ts),Pe=uC(me.ts);ce.has(_e)||ce.set(_e,[]),oe.has(Pe)||oe.set(Pe,[]),ce.get(_e).push(me),oe.get(Pe).push(me)}for(const[me,_e]of ce){_e.sort((ae,be)=>ae.ts-be.ts);const Pe=cf(_e,T),te=dC(_e[_e.length-1].ts),fe=_e[_e.length-1];A.push(ae=>{const be=qt(xt,`guilds/${B}/history_weekly/${me}`);ae.set(be,{guildIdentifier:B,weekId:me,periodStartSec:te.start,periodEndSec:te.end,lastTs:fe.ts,lastTimestampRaw:Ma(fe.row,_s.GUILDS.TIMESTAMP),server:fe.parsed.server,name:fe.parsed.name,values:Pe,updatedAt:Ai()},{merge:!0})}),a.writtenWeeklyGuilds++}for(const[me,_e]of oe){_e.sort((ae,be)=>ae.ts-be.ts);const Pe=cf(_e,T),te=hC(_e[_e.length-1].ts),fe=_e[_e.length-1];A.push(ae=>{const be=qt(xt,`guilds/${B}/history_monthly/${me}`);ae.set(be,{guildIdentifier:B,monthId:me,periodStartSec:te.start,periodEndSec:te.end,lastTs:fe.ts,lastTimestampRaw:Ma(fe.row,_s.GUILDS.TIMESTAMP),server:fe.parsed.server,name:fe.parsed.name,values:Pe,updatedAt:Ai()},{merge:!0})}),a.writtenMonthlyGuilds++}}try{await Sd(D,If,"latest",u)}catch(B){if(aC(B))console.warn("[ImportCsv] guild latest write skipped (duplicate/permission)",{error:B});else throw B}try{await Sd(A,pC,"history",u)}catch(B){if(aC(B))console.warn("[ImportCsv] guild history write skipped (duplicate/permission)",{error:B});else throw B}}const h=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:h-s,playerResults:l,guildResults:d}}const Pt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),gwe=t=>String(t!=null?t:"").trim(),c1=t=>gwe(t).toUpperCase(),d1=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function Jn(t,e){for(const s of Object.keys(t))if(Pt(s)===e)return t[s]}function La(t,e){for(const s of e){const r=Jn(t,s);if(r!=null&&String(r)!=="")return r}}function Vl(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function Nd(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,m=new Date(l,a,i,d,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const nn={GUILD_IDENTIFIER:Pt("Guild Identifier"),SERVER:Pt("Server"),NAME:Pt("Name"),TIMESTAMP:Pt("Timestamp"),LEVEL:Pt("Level"),CLASS:Pt("Class"),GUILD:Pt("Guild"),GUILD_ROLE:[Pt("Role"),Pt("Guild Role")],TREASURY:[Pt("Treasury"),Pt("Fortress Treasury"),Pt("Treasury Level"),Pt("Festungsschatzkammer")],MINE:[Pt("Mine"),Pt("Gem Mine"),Pt("Mine Level"),Pt("Festungsmine")],BASE_MAIN:[Pt("Base"),Pt("Base Attribute"),Pt("BaseMain"),Pt("Basis Attribut")],CON_BASE:[Pt("Con Base"),Pt("Constitution Base"),Pt("Base Constitution"),Pt("Basis Konstitution"),Pt("conbase")],ATTR_TOT:[Pt("Attribute"),Pt("Attr Total"),Pt("Attribut"),Pt("Attribut Gesamt")],CON_TOT:[Pt("Constitution"),Pt("Constitution Total"),Pt("Konstitution"),Pt("Konstitution Gesamt")],LAST_ACTIVE:[Pt("Last Active"),Pt("LastActivity"),Pt("Letzte Aktivitt")],GUILD_JOINED:[Pt("Guild Joined"),Pt("Joined Guild"),Pt("Gildenbeitritt")]},Rf={GUILD_IDENTIFIER:Pt("Guild Identifier"),SERVER:Pt("Server"),NAME:Pt("Name")};function yC(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function xwe(t){let e=5381;for(let s=0;s<t.length;s++)e=e*33^t.charCodeAt(s);return(e>>>0).toString(36)}function ywe(t){var s;const e=new Map;for(const r of t){const i=String((s=Jn(r,Rf.GUILD_IDENTIFIER))!=null?s:"").trim(),a=Jn(r,Rf.SERVER),l=Jn(r,Rf.NAME);if(!i||!a||!l)continue;const d=`${c1(a)}__${d1(String(l))}`;e.set(d,i)}return e}function vwe(t){var A,y;const e=Jn(t,nn.TIMESTAMP),s=Nd(e),r=La(t,nn.LAST_ACTIVE),i=Nd(r),a=La(t,nn.GUILD_JOINED),l=Nd(a),d=Vl(Jn(t,nn.LEVEL)),u=(()=>{const w=Jn(t,nn.CLASS);return w!=null&&String(w).trim()!==""?String(w):null})(),h=(()=>{const w=La(t,nn.GUILD_ROLE);return w!=null&&String(w).trim()!==""?String(w):null})(),m=Vl(La(t,nn.TREASURY)),g=Vl(La(t,nn.MINE)),v=Vl(La(t,nn.BASE_MAIN)),b=Vl(La(t,nn.CON_BASE)),_=Vl(La(t,nn.ATTR_TOT)),N=Vl(La(t,nn.CON_TOT)),C=v!=null&&b!=null?v+b:null,R=_!=null&&N!=null?_+N:null,D=(()=>{const w=Jn(t,nn.NAME);return w!=null&&String(w).trim()!==""?String(w):null})();return{id:String((y=(A=t==null?void 0:t.ID)!=null?A:t==null?void 0:t.Identifier)!=null?y:""),name:D,class:u,role:h,level:d,treasury:m,mine:g,baseMain:v,conBase:b,sumBaseTotal:C,attrTotal:_,conTotal:N,totalStats:R,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:s!=null?s*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:l!=null?l*1e3:null}}function Da(t,e){const s=t.map(r=>r[e]).filter(r=>typeof r=="number");return s.length?s.reduce((r,i)=>r+i,0)/s.length:null}const bwe=t=>{const e=t==null?void 0:t.code;if(!e)return!1;const s=String(e).toLowerCase();return s==="permission-denied"||s==="already-exists"||s==="failed-precondition"};async function _we(t){var l,d,u;const e=qt(xt,`guilds/${t}/latest/latest`),s=await Js(e);if(!s.exists())return{sec:null,raw:null};const r=s.data()||{},i=(u=(d=r.timestampRaw)!=null?d:(l=r.values)==null?void 0:l.Timestamp)!=null?u:null;let a=null;return typeof r.timestamp=="number"?a=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(a=Nd(i)),{sec:a,raw:i}}async function wwe(t){const e=qt(xt,`guilds/${t}/snapshots/members_summary`),s=await Js(e);if(!s.exists())return 0;const r=s.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=Nd(r.updatedAt);if(i!=null)return i}return 0}async function jwe(t,e){var l,d,u,h,m,g,v;const s=ywe(e||[]),r=new Set;for(const b of e||[]){const _=String((l=Jn(b,Rf.GUILD_IDENTIFIER))!=null?l:"").trim();_&&r.add(_)}for(const b of t||[]){const _=Jn(b,nn.SERVER);let N=String((d=Jn(b,nn.GUILD_IDENTIFIER))!=null?d:"").trim();if(!N){const C=(u=Jn(b,nn.GUILD))!=null?u:b.Guild;if(C&&_){const R=`${c1(_)}__${d1(String(C))}`,D=s.get(R);D&&(N=D)}}N&&r.add(N)}let i=0,a=null;for(const b of r){const{sec:_,raw:N}=await _we(b);if(_==null)continue;const C=await wwe(b);if(_<=C)continue;const R=new Map;for(const W of t||[]){const K=Jn(W,nn.SERVER);let q=String((h=Jn(W,nn.GUILD_IDENTIFIER))!=null?h:"").trim();if(!q){const U=(m=Jn(W,nn.GUILD))!=null?m:W.Guild;if(U&&K){const Y=`${c1(K)}__${d1(String(U))}`,ce=s.get(Y);ce&&(q=ce)}}if(q!==b)continue;const se=Nd(Jn(W,nn.TIMESTAMP));if(se==null||se!==_)continue;const re=String((v=(g=W==null?void 0:W.ID)!=null?g:W==null?void 0:W.Identifier)!=null?v:"").trim();re&&(R.has(re)||R.set(re,W))}const D=Array.from(R.values()),A=[];for(const W of D)A.push(vwe(W));A.sort((W,K)=>{var re,U;const q=yC(W.role),se=yC(K.role);return q!==se?q-se:((re=W.name)!=null?re:"").toLowerCase().localeCompare(((U=K.name)!=null?U:"").toLowerCase())});const y=Da(A,"level"),w=Da(A,"treasury"),M=Da(A,"mine"),k=Da(A,"baseMain"),S=Da(A,"conBase"),T=Da(A,"sumBaseTotal"),F=Da(A,"attrTotal"),I=Da(A,"conTotal"),B=Da(A,"totalStats"),$=JSON.stringify({gid:b,tsSec:_,members:A.map(W=>{var K,q,se,re,U,Y,ce,oe,me,_e,Pe,te,fe;return{id:W.id,name:(K=W.name)!=null?K:"",class:(q=W.class)!=null?q:"",role:(se=W.role)!=null?se:"",level:(re=W.level)!=null?re:null,treasury:(U=W.treasury)!=null?U:null,mine:(Y=W.mine)!=null?Y:null,baseMain:(ce=W.baseMain)!=null?ce:null,conBase:(oe=W.conBase)!=null?oe:null,sumBaseTotal:(me=W.sumBaseTotal)!=null?me:null,attrTotal:(_e=W.attrTotal)!=null?_e:null,conTotal:(Pe=W.conTotal)!=null?Pe:null,totalStats:(te=W.totalStats)!=null?te:null,guildJoinedMs:(fe=W.guildJoinedMs)!=null?fe:null}})}),H=xwe($),z=qt(xt,`guilds/${b}/snapshots/members_summary`);try{await eo(z,{guildId:b,count:A.length,updatedAt:N!=null?N:String(_),updatedAtMs:_*1e3,hash:H,avgLevel:y,avgTreasury:w,avgMine:M,avgBaseMain:k,avgConBase:S,avgSumBaseTotal:T,avgAttrTotal:F,avgConTotal:I,avgTotalStats:B,members:A,updatedAtServer:Ai()},{merge:!0}),i++}catch(W){if(bwe(W)){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows duplicate/permission",{gid:b,error:W});continue}console.error("[ImportSelectionToDb] writeGuildSnapshotsFromRows fatal",{gid:b,error:W}),a=a||W}}if(a)throw a;return{guildsProcessed:r.size,snapshotsWritten:i}}function Swe(t){const e=new Date(t),s=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${s}-${r}`}async function Nwe(t,e,s,r){var u,h,m;const i=qt(xt,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await Js(i);if(!a.exists())return await eo(i,s,{merge:!1}),{first:s,firstTsMs:(u=s.updatedAtMs)!=null?u:s.timestamp?s.timestamp*1e3:r};const l=a.data(),d=(h=l.updatedAtMs)!=null?h:l.timestamp?l.timestamp*1e3:r;return r<d?(await eo(i,s,{merge:!1}),{first:s,firstTsMs:(m=s.updatedAtMs)!=null?m:s.timestamp?s.timestamp*1e3:r}):{first:l,firstTsMs:d}}async function kwe(t,e,s){const r=qt(xt,`guilds/${t}/history_monthly/${e}`);await eo(r,s,{merge:!0})}function Cwe(t){var D,A,y,w,M,k,S,T,F,I,B,$,H;const{guildId:e,monthKey:s,server:r,first:i,firstTsMs:a,latest:l,latestTsMs:d}=t,u=a!=null?Math.floor((d-a)/864e5):null,h=u!=null&&u<=40,m={available:h};h||(m.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:s,label:new Date(`${s}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(d).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(d/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:m};if(!h||!i)return g;const v=new Map;for(const z of i.members||[])z.playerId&&v.set(z.playerId,z);const b=[],_=[],N=[],C=[],R=[];for(const z of l.members||[]){if(!z.playerId)continue;const W=v.get(z.playerId)||null,K=(D=z.sumBaseTotal)!=null?D:null,q=(A=W==null?void 0:W.sumBaseTotal)!=null?A:null,se=K!=null&&q!=null?K-q:0,re=(y=z.totalStats)!=null?y:null,U=(w=W==null?void 0:W.totalStats)!=null?w:null,Y=re!=null&&U!=null?re-U:0;b.push({playerId:z.playerId,name:(M=z.name)!=null?M:null,class:(k=z.class)!=null?k:null,levelLatest:(S=z.level)!=null?S:null,baseLatest:K,baseDelta:se}),_.push({playerId:z.playerId,name:(T=z.name)!=null?T:null,base:K,stamDelta:null,shoDelta:null}),N.push({playerId:z.playerId,name:(F=z.name)!=null?F:null,stats:K,delta:se}),C.push({playerId:z.playerId,name:(I=z.name)!=null?I:null,total:re,delta:Y}),R.push({playerId:z.playerId,name:(B=z.name)!=null?B:null,class:($=z.class)!=null?$:null,stats:(H=z.baseMain)!=null?H:null,delta:(W==null?void 0:W.baseMain)!=null&&z.baseMain!=null?z.baseMain-W.baseMain:0})}return b.sort((z,W)=>{var K,q;return((K=W.baseDelta)!=null?K:-1/0)-((q=z.baseDelta)!=null?q:-1/0)}),N.sort((z,W)=>{var K,q;return((K=W.stats)!=null?K:-1/0)-((q=z.stats)!=null?q:-1/0)}),C.sort((z,W)=>{var K,q;return((K=W.total)!=null?K:-1/0)-((q=z.total)!=null?q:-1/0)}),_.sort((z,W)=>{var K,q;return((K=W.base)!=null?K:-1/0)-((q=z.base)!=null?q:-1/0)}),R.sort((z,W)=>{var K,q;return((K=W.stats)!=null?K:-1/0)-((q=z.stats)!=null?q:-1/0)}),{...g,mostBaseGained:b.slice(0,50),sumBaseStats:_.slice(0,50),highestBaseStats:N.slice(0,50),highestTotalStats:C.slice(0,50),mainAndCon:R.slice(0,50)}}const u1=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),vC=(t,e)=>{for(const s of Object.keys(t))if(u1(s)===e)return t[s]};async function AI(t,e){var m,g;const{playersRows:s,guildsRows:r}=t,i=[];let a=[],l=[],d=!0;const u=e!=null&&e.onProgress?(v,b)=>{var _;return(_=e.onProgress)==null?void 0:_.call(e,{...v,kind:b})}:void 0;try{const v=await xC(null,{kind:"guilds",rows:r,onProgress:u?b=>u(b,"guilds"):void 0});i.push(v),Array.isArray(v.guildResults)&&(l=v.guildResults)}catch(v){console.error("[ImportSelectionToDb] guild import error",v),d=!1}try{const v=await xC(null,{kind:"players",rows:s,onProgress:u?b=>u(b,"players"):void 0});i.push(v),Array.isArray(v.playerResults)&&(a=v.playerResults)}catch(v){console.error("[ImportSelectionToDb] player import error",v),d=!1}try{await jwe(s,r)}catch(v){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",v),d=!1}const h=new Set;for(const v of r){const b=vC(v,u1("Guild Identifier"));b&&h.add(String(b))}for(const v of s){const b=vC(v,u1("Guild Identifier"));b&&h.add(String(b))}for(const v of h){const b=qt(xt,`guilds/${v}/snapshots/members_summary`),_=await Js(b);if(!_.exists())continue;const N=_.data(),C=Number((m=N.updatedAtMs)!=null?m:N.timestamp?N.timestamp*1e3:Date.now()),R=Swe(C);let D=null,A=null;try{const w=await Nwe(v,R,N,C);D=w.first,A=w.firstTsMs}catch(w){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:v,monthKey:R,error:w})}const y=Cwe({guildId:v,monthKey:R,server:(g=N.server)!=null?g:null,first:D,firstTsMs:A,latest:N,latestTsMs:C});try{await kwe(v,R,y)}catch(w){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:v,monthKey:R,error:w})}}return{ok:d,players:a,guilds:l,reports:i}}const Zv=t=>String(t!=null?t:"").trim(),cr=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,"");function Twe(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function h1(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[],delimiter:","};const r=Twe((u=s[0])!=null?u:""),i=h=>{const m=[];let g="",v=!1;for(let b=0;b<h.length;b++){const _=h[b];_==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:_===r&&!v?(m.push(g),g=""):g+=_}return m.push(g),m},l=(s[0]?i(s[0]).map(Zv):[]).map((h,m)=>h||`col${m}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const m=i(s[h]);if(m.every(v=>Zv(v)===""))continue;const g={};for(let v=0;v<l.length;v++)g[l[v]]=m[v]!=null?Zv(m[v]):"";d.push(g)}return{headers:l,rows:d,delimiter:r}}const on={PLAYERS:{IDENTIFIER:cr("Identifier"),PID:cr("ID"),GUILD_IDENTIFIER:cr("Guild Identifier"),TIMESTAMP:cr("Timestamp"),NAME:cr("Name"),SERVER:cr("Server"),OWN:cr("Own")},GUILDS:{GUILD_IDENTIFIER:cr("Guild Identifier"),GUILD_MEMBER_COUNT:cr("Guild Member Count"),NAME:cr("Name"),TIMESTAMP:cr("Timestamp"),SERVER:cr("Server")}},II=(t,e)=>{const s=new Set(t.map(cr));return e.every(r=>s.has(r))},ta=(t,e)=>{for(const s of Object.keys(t))if(cr(s)===e)return t[s]};function Ewe(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function bC(t){const e=t.map(cr),s=a=>e.includes(a);let r=0,i=0;return s(on.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),s(on.PLAYERS.IDENTIFIER)&&(r+=2),s(on.PLAYERS.TIMESTAMP)&&(r+=1),s(on.GUILDS.GUILD_IDENTIFIER)&&(i+=2),s(on.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),s(on.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||s(on.PLAYERS.IDENTIFIER)?"players":"guilds"}function m1(t,e){const s=Ewe(t);if(s!=="unknown"){const i=bC(e);return i!=="unknown"&&i!==s?{kind:s,via:"filename",warn:`Per Dateiname als "${s}" klassifiziert, Header deuten auf "${i}".`}:{kind:s,via:"filename"}}const r=bC(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function RI(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=Date.parse(e);return Number.isFinite(s)?Math.floor(s/1e3):null}function Awe(t,e){var r;const s=[];if(!II(e,[on.PLAYERS.GUILD_IDENTIFIER]))return s;for(const i of t){const a=ta(i,on.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const l=ta(i,on.PLAYERS.SERVER),d=l&&String(l).trim()!==""?String(l).trim().toUpperCase():void 0;s.push({guildIdentifier:String(a),id:ta(i,on.PLAYERS.IDENTIFIER)||void 0,name:ta(i,on.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(ta(i,on.PLAYERS.OWN)).toLowerCase()),server:d,tsSec:(r=RI(ta(i,on.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return s}function Iwe(t,e){const s=[];if(!II(e,[on.GUILDS.GUILD_IDENTIFIER,on.GUILDS.GUILD_MEMBER_COUNT]))return s;for(const r of t){const i=ta(r,on.GUILDS.GUILD_IDENTIFIER),a=Number(ta(r,on.GUILDS.GUILD_MEMBER_COUNT));if(!i||!Number.isFinite(a))continue;const l=RI(ta(r,on.GUILDS.TIMESTAMP));s.push({guildIdentifier:String(i),name:ta(r,on.GUILDS.NAME)||void 0,memberCount:a,tsSec:l!=null?l:void 0})}return s}function PI(t){var d,u,h,m,g,v,b,_;let e=[],s=[];for(const N of t){const C=h1(N.text),{kind:R}=m1(N.name,C.headers);R==="players"?e=e.concat(hwe(N.text)):R==="guilds"&&(s=s.concat(mwe(N.text)))}const r=[],i=new Map,a=new Map;for(const N of e){const C={playerId:N.playerId,name:(d=N.name)!=null?d:"",server:N.server,guildId:(u=N.guildIdentifier)!=null?u:void 0,level:(h=N.level)!=null?h:void 0,className:(m=N.className)!=null?m:void 0,scanTimestampSec:N.timestampSec};r.push(C),N.guildIdentifier&&(i.has(N.guildIdentifier)||i.set(N.guildIdentifier,[]),i.get(N.guildIdentifier).push(C),a.has(N.guildIdentifier)||a.set(N.guildIdentifier,N.server))}const l=[];for(const N of s){const C=(g=i.get(N.guildIdentifier))!=null?g:[];l.push({guildId:N.guildIdentifier,name:(v=N.name)!=null?v:N.guildIdentifier,server:N.server,memberCount:(b=N.memberCount)!=null?b:C.length,scanTimestampSec:N.timestampSec,members:C.map(R=>({playerId:R.playerId,name:R.name,level:R.level,className:R.className}))}),i.delete(N.guildIdentifier)}for(const[N,C]of i.entries()){if(!C.length)continue;const R=a.get(N);if(!R)continue;const D=C.reduce((A,y)=>Math.max(A,y.scanTimestampSec),C[0].scanTimestampSec);l.push({guildId:N,name:N,server:R,memberCount:C.length,scanTimestampSec:D,members:C.map(A=>({playerId:A.playerId,name:A.name,level:A.level,className:A.className}))})}return{filename:(_=t[0])==null?void 0:_.name,players:r,guilds:l}}function Rwe(t,e){var C,R,D,A,y,w;const s=[],r=new Map;for(const M of t){const k=M.id||"",S=(C=M.server)==null?void 0:C.toUpperCase();if(k){const T=`${S!=null?S:"NO"}::${k}`;r.has(T)||r.set(T,{server:S,id:k,name:M.name||"",own:!!M.own})}}const i=r.size,a=t.length,l=Array.from(r.values()).filter(M=>M.own).length,d=new Map;for(const M of r.values())M.server&&d.set(M.server,((R=d.get(M.server))!=null?R:0)+1);const u=Array.from(d.entries()).map(([M,k])=>({server:M,players:k})).sort((M,k)=>k.players-M.players),h=u.length,m=new Map;for(const M of t)m.set(M.guildIdentifier,((D=m.get(M.guildIdentifier))!=null?D:0)+1);const g=new Set,v=new Map;for(const M of e)g.add(M.guildIdentifier),v.set(M.guildIdentifier,{name:M.name||"",declared:M.memberCount});for(const M of m.keys())g.add(M);let b=0;const _=[];for(const M of g){const k=(A=v.get(M))==null?void 0:A.declared,S=(y=m.get(M))!=null?y:0,T=k!=null&&S===k;T&&b++,_.push({id:M,name:((w=v.get(M))==null?void 0:w.name)||"",declaredCount:k!=null?k:0,playersCount:S,full:T})}[...v.values()].some(M=>Number.isFinite(M.declared))||s.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),_.sort((M,k)=>M.name?M.name.localeCompare(k.name):M.id.localeCompare(k.id));const N=Array.from(r.values()).sort((M,k)=>(M.server||"")===(k.server||"")?M.name.localeCompare(k.name):(M.server||"").localeCompare(k.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:l,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:b,notes:s,playersList:N,guildsList:_}}function LI({mode:t="db",onBuildUploadSession:e}){const[s,r]=E.useState([]),[i,a]=E.useState(null),[l,d]=E.useState(!1),[u,h]=E.useState(null),[m,g]=E.useState(!1),[v,b]=E.useState(null),[_,N]=E.useState([]),[C,R]=E.useState(null);E.useEffect(()=>{const I=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=I}},[]);const D=E.useCallback(async I=>{var B;d(!0),h(null),a(null),N([]),b(null);try{const $=Array.from(I).slice(0,2),H=[];let z=[],W=[];for(const K of $){const q=K,se=await q.text(),re=h1(se),{kind:U,warn:Y}=m1(q.name,re.headers);H.push({name:q.name,size:q.size||se.length,rows:re.rows.length,delimiter:re.delimiter,text:se,kind:U,warn:Y}),U==="players"?z=z.concat(Awe(re.rows,re.headers)):U==="guilds"&&(W=W.concat(Iwe(re.rows,re.headers)))}r(H),a(Rwe(z,W))}catch($){h(String((B=$==null?void 0:$.message)!=null?B:$))}finally{d(!1)}},[]),A=E.useCallback(async I=>{!I||I.length===0||await D(I)},[D]),y=E.useCallback(async I=>{I.preventDefault();const B=I.dataTransfer.files;!B||!B.length||await D(B)},[D]),w=E.useCallback(()=>{const I=s.map(B=>({name:B.name,text:B.text}));return PI(I)},[s]);async function M(){var I;if(s.length){g(!0),R({phase:"prepare",current:0,total:0}),b(null),N([]);try{let B=[],$=[];for(const z of s){const W=h1(z.text),{kind:K}=m1(z.name,W.headers);K==="players"&&(B=B.concat(W.rows)),K==="guilds"&&($=$.concat(W.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!B.length,hasGuildsCsv:!!$.length,playersRows:B.length,guildsRows:$.length}),!$.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!B.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const H=await AI({playersRows:B,guildsRows:$},{onProgress:z=>R(z)});R({phase:"done",current:1,total:1}),N(H.reports),b("Import abgeschlossen.")}catch(B){console.error("[UploadCenter] Import error:",B),b(`Fehler beim Import: ${(I=B==null?void 0:B.message)!=null?I:B}`)}finally{g(!1),setTimeout(()=>R(null),1200)}}}const k=E.useCallback(async()=>{var I;if(!(t!=="session"||!e||!s.length)){g(!0),b(null),N([]),h(null),R(null);try{const B=w();e(B),b("Session prepared locally.")}catch(B){console.error("[UploadCenter] Session build error:",B),b(`Fehler beim Import: ${(I=B==null?void 0:B.message)!=null?I:B}`)}finally{g(!1)}}},[t,e,s,w]),S=E.useMemo(()=>s.map(I=>`${I.name} (${I.rows} rows, ${I.delimiter}, ${I.kind}${I.warn?" ":""})`),[s]),T=E.useMemo(()=>s.reduce((I,B)=>I+B.rows,0),[s]),F=C?Math.floor(100*C.current/Math.max(1,C.total||1)):0;return n.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[n.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[n.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),n.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[S.map((I,B)=>n.jsx("span",{className:"uc-chip",title:s[B].warn||"",children:I},B)),s.length>0&&n.jsxs("span",{className:"uc-chip",children:["Total: ",T," rows"]})]}),n.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[C&&t==="db"&&n.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[n.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:n.jsx("div",{style:{width:`${F}%`,height:"100%",background:"#2E75F0"}})}),n.jsxs("span",{style:{color:"#D6E4F7"},children:[F,"%"]})]}),n.jsx("button",{onClick:t==="session"?k:M,disabled:!s.length||!i||m||t==="session"&&!e,className:"uc-btn",children:m?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),v&&n.jsx("span",{style:{color:v.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:v})]})]}),n.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[n.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),n.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:I=>A(I.target.files),disabled:l})]}),n.jsx("div",{onDragOver:I=>I.preventDefault(),onDrop:y,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),l&&n.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&n.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[n.jsx("b",{children:"Fehler:"})," ",u]}),i&&n.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[n.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:n.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),n.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[n.jsx(qu,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),n.jsx(qu,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),n.jsx(qu,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),n.jsx(qu,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),n.jsx(qu,{label:"Verschiedene Server",value:i.servers})]}),n.jsxs("div",{style:{marginTop:12},children:[n.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),n.jsx("tbody",{children:i.perServer.map(I=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:I.server}),n.jsx("td",{style:{textAlign:"right"},children:I.players})]},I.server))})]})]}),n.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[n.jsxs("details",{children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),n.jsx("tbody",{children:i.playersList.map((I,B)=>{var $,H;return n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:($=I.server)!=null?$:""}),n.jsx("td",{children:I.id}),n.jsx("td",{children:I.name||""}),n.jsx("td",{children:I.own?"":""})]},`${(H=I.server)!=null?H:"NO"}-${I.id}-${B}`)})})]})})]}),n.jsxs("details",{open:!0,children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),n.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),n.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),n.jsx("tbody",{children:i.guildsList.map((I,B)=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:I.id}),n.jsx("td",{children:I.name||""}),n.jsx("td",{style:{textAlign:"right"},children:I.declaredCount||0}),n.jsx("td",{style:{textAlign:"right"},children:I.playersCount}),n.jsx("td",{style:{textAlign:"center"},children:I.full?"":""})]},`${I.id}-${B}`))})]})})]})]}),!!i.notes.length&&n.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",n.jsx("ul",{children:i.notes.map((I,B)=>n.jsx("li",{children:I},B))})]})]})]})}function qu({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[n.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),n.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),s&&n.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:s})]})}function Pwe(){return n.jsxs("div",{children:[n.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),n.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",n.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function Lwe(){const{isOpen:t,close:e,activeTab:s,setTab:r,canUse:i}=wb();return!t||!i?null:n.jsx("div",{className:ea.backdrop,onClick:e,children:n.jsxs("div",{className:ea.panel,onClick:a=>a.stopPropagation(),children:[n.jsxs("div",{className:ea.header,children:[n.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),n.jsxs("div",{className:ea.tabs,children:[n.jsx("button",{type:"button",className:`${ea.tabBtn} ${s==="csv"?ea.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),n.jsx("button",{type:"button",className:`${ea.tabBtn} ${s==="json"?ea.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),n.jsx("button",{type:"button",className:ea.closeBtn,onClick:e,children:"Schlieen"})]}),n.jsx("div",{className:ea.content,children:s==="csv"?n.jsx(LI,{mode:"db"}):n.jsx(Pwe,{})})]})})}const DI="sfdatahub_upload_sessions_v1",e0={sessions:[],activeSessionId:null},Dwe=()=>{var t,e,s,r,i,a;if(typeof window=="undefined")return e0;try{const l=window.localStorage.getItem(DI);if(!l)return e0;const d=JSON.parse(l);if(d&&typeof d=="object"){if("version"in d&&(d==null?void 0:d.version)===1&&d.type==="uploadCenter.sessions"&&Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(s=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?s:null}}if(Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(l){console.warn("[UploadCenterSessions] Failed to parse persisted state",l)}return e0},MI=E.createContext(null);function Mwe({children:t}){const e=E.useMemo(()=>Dwe(),[]),[s,r]=E.useState(()=>e.sessions),[i,a]=E.useState(()=>e.activeSessionId),l=E.useCallback(A=>({...A,players:A.players.map(y=>({...y,status:"pending"})),guilds:A.guilds.map(y=>({...y,status:"pending"}))}),[]);E.useEffect(()=>{if(typeof window!="undefined")try{const A={version:1,type:"uploadCenter.sessions",sessions:s,activeSessionId:i};window.localStorage.setItem(DI,JSON.stringify(A))}catch(A){console.warn("[UploadCenterSessions] Failed to persist state",A)}},[s,i]);const d=E.useCallback(A=>{const y=l(A);r(w=>[...w,y]),a(y.id)},[l]),u=E.useCallback(A=>{a(A)},[]),h=E.useCallback(A=>{r(y=>{const w=y.filter(M=>M.id!==A);return a(M=>{var k,S;return M===A?(S=(k=w[0])==null?void 0:k.id)!=null?S:null:M}),w})},[]),m=E.useCallback(()=>{r([]),a(null)},[]),g=E.useCallback((A,y,w,M)=>{r(k=>k.map(S=>{if(S.id!==A)return S;if(y==="player"){const F=S.players.map(I=>I.key===w?{...I,selected:M}:I);return{...S,players:F}}const T=S.guilds.map(F=>F.key===w?{...F,selected:M}:F);return{...S,guilds:T}}))},[]),v=E.useCallback((A,y,w)=>{r(M=>M.map(k=>{if(k.id!==A)return k;if(y==="player"){const T=k.players.map(F=>({...F,selected:w}));return{...k,players:T}}const S=k.guilds.map(T=>({...T,selected:w}));return{...k,guilds:S}}))},[]),b=E.useCallback((A,y,w)=>{r(M=>M.map(k=>{if(k.id!==A)return k;const S=k.guilds.find(B=>B.key===y);if(!S)return k;const T=S.guildId,F=k.players.map(B=>B.guildId===T?{...B,selected:w}:B),I=k.guilds.map(B=>B.key===y?{...B,selected:w}:B);return{...k,players:F,guilds:I}}))},[]),_=E.useCallback((A,y,w)=>{r(M=>M.map(k=>{if(k.id!==A)return k;let S;const T=k.players.map($=>$.key!==y?$:(S=$.guildId,{...$,selected:w}));if(!S)return{...k,players:T};const F=T.filter($=>$.guildId===S),I=F.length>0&&F.every($=>$.selected),B=k.guilds.map($=>$.guildId!==S?$:w===!1?{...$,selected:!1}:I?{...$,selected:!0}:$);return{...k,players:T,guilds:B}}))},[]),N=E.useCallback((A,y)=>{r(w=>w.map(M=>{if(M.id!==A)return M;const k=M.players.map(T=>({...T,selected:y})),S=M.guilds.map(T=>{if(!y)return{...T,selected:!1};const F=k.filter(B=>B.guildId===T.guildId),I=F.length>0&&F.every(B=>B.selected);return{...T,selected:I}});return{...M,players:k,guilds:S}}))},[]),C=E.useCallback((A,y)=>{r(w=>w.map(M=>{if(M.id!==A)return M;const k=M.guilds.map(T=>({...T,selected:y})),S=M.players.map(T=>y&&T.guildId?{...T,selected:!0}:!y&&T.guildId?{...T,selected:!1}:T);return{...M,guilds:k,players:S}}))},[]),R=E.useCallback((A,y,w,M)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:A,kind:y,recordKey:w,status:M}),r(k=>k.map(S=>{if(S.id!==A)return S;if(y==="player"){const F=S.players.map(I=>I.key===w?{...I,status:M}:I);return{...S,players:F}}const T=S.guilds.map(F=>F.key===w?{...F,status:M}:F);return{...S,guilds:T}}))},[]),D=E.useMemo(()=>({sessions:s,activeSessionId:i,addSession:d,setActiveSession:u,removeSession:h,clearAllSessions:m,toggleRecordSelection:g,selectAllInSession:v,selectGuildWithPlayers:b,updateGuildSelectionFromPlayer:_,selectAllPlayersWithGuilds:N,selectAllGuildsWithPlayers:C,setRecordStatus:R}),[s,i,d,u,h,m,g,v,b,_,N,C,R]);return n.jsx(MI.Provider,{value:D,children:t})}function Fwe(){const t=E.useContext(MI);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}function Bwe({route:t,featureId:e,fallback:s=null,children:r}){var v;const{isLoading:i}=ao(),{resolveRule:a,canAccessFeature:l,canAccessRule:d,loading:u}=Xg(),h=(v=e!=null?e:t)!=null?v:"/",m=X.useMemo(()=>a(h),[a,h]);X.useEffect(()=>{m||console.debug(`[FeatureGate] No rule found for target "${h}", allowing by default.`)},[m,h]);const g=X.useMemo(()=>!e&&!t?!0:m?d(m):l(h),[l,d,e,t,m,h]);return i||u?null:g?n.jsx(n.Fragment,{children:r}):n.jsx(n.Fragment,{children:s})}const _C="pending";function wC(t,e,s){const r=t.players.map(a=>{var d;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(d=a.guildId)!=null?d:void 0,level:a.level,className:a.className,selected:!0,status:_C}}),i=t.guilds.map(a=>{var u;const l=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,d=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:l,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:d,selected:!0,status:_C}});return{id:e,createdAt:s,sourceFilename:t.filename,scanUploadId:void 0,players:r,guilds:i}}const Pf=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${r}`};async function $we(t){var s,r,i,a;if(!t)return console.warn("[UploadCenterUsage] Missing userId, returning empty usage."),{date:null,guilds:0,players:0};const e=qt(xt,"users",t);try{const l=await Js(e);if(!l.exists())return console.warn("[UploadCenterUsage] User document does not exist.",{userId:t}),{date:null,guilds:0,players:0};const d=(s=l.data())==null?void 0:s.uploadCenter,u=(r=d==null?void 0:d.usage)!=null?r:{};return{date:typeof(u==null?void 0:u.date)=="string"?u.date:null,guilds:Number((i=u==null?void 0:u.guilds)!=null?i:0)||0,players:Number((a=u==null?void 0:u.players)!=null?a:0)||0}}catch(l){return console.error("[UploadCenterUsage] Failed to fetch usage data.",{userId:t,error:l}),{date:null,guilds:0,players:0}}}async function Owe(t,e,s){var b,_,N;if(!t){console.warn("[UploadCenterUsage] Missing userId, skipping usage update.");return}const r=Pf(),i=qt(xt,"users",t);let a;try{a=await Js(i)}catch(C){console.error("[UploadCenterUsage] Failed to fetch user document.",{userId:t,error:C});return}if(!a.exists()){console.warn("[UploadCenterUsage] User document does not exist.",{userId:t});return}const l=(b=a.data())==null?void 0:b.uploadCenter,d=l==null?void 0:l.usage,u=(d==null?void 0:d.date)===r,h=u?Number((_=d==null?void 0:d.guilds)!=null?_:0):0,m=u?Number((N=d==null?void 0:d.players)!=null?N:0):0,g=h+Number(e!=null?e:0),v=m+Number(s!=null?s:0);try{await eo(i,{uploadCenter:{...l!=null?l:{},usage:{date:r,guilds:g,players:v}}},{merge:!0})}catch(C){console.error("[UploadCenterUsage] Failed to update usage data.",{userId:t,error:C})}}const qo={enabled:!0,dailyGuildLimit:9999,dailyPlayerLimit:999999},xg=t=>{if(t==null||typeof t=="boolean"||typeof t=="string"&&t.trim()==="")return null;const e=Number(t);return Number.isFinite(e)&&e>=0?e:null},Vwe=t=>{if(!t||typeof t!="object")return;const e={};return Object.entries(t).forEach(([s,r])=>{if(!r||typeof r!="object")return;const i=r,a=xg(i.dailyGuildLimit),l=xg(i.dailyPlayerLimit),d=i.enabled,u={};typeof d=="boolean"&&(u.enabled=d),a!==null&&(u.dailyGuildLimit=a),l!==null&&(u.dailyPlayerLimit=l),Object.keys(u).length>0&&(e[s]=u)}),Object.keys(e).length>0?e:void 0};async function Uwe(t){const e=qt(xt,"upload_quota_config","default");try{const s=await Js(e);if(!s.exists())return console.warn("[UploadQuota] Missing config document. Using defaults."),qo;const r=s.data(),i=xg(r==null?void 0:r.dailyGuildLimit),a=xg(r==null?void 0:r.dailyPlayerLimit),l=Vwe(r==null?void 0:r.roles),d={dailyGuildLimit:i!=null?i:qo.dailyGuildLimit,dailyPlayerLimit:a!=null?a:qo.dailyPlayerLimit};typeof(r==null?void 0:r.enabled)=="boolean"&&(d.enabled=r.enabled),l&&(d.roles=l);const u=r&&Object.prototype.hasOwnProperty.call(r,"dailyGuildLimit")&&i===null,h=r&&Object.prototype.hasOwnProperty.call(r,"dailyPlayerLimit")&&a===null;return(u||h)&&console.warn("[UploadQuota] Invalid config payload. Using defaults.",{data:r}),d}catch(s){return console.error("[UploadQuota] Failed to load quota config.",{userId:t==null?void 0:t.id,error:s}),qo}}function zwe(t,e){var a,l,d;const s=Array.isArray(e)?e.filter(u=>typeof u=="string"&&u.length>0):[],r=Number.isFinite(t.dailyGuildLimit)?t.dailyGuildLimit:qo.dailyGuildLimit,i=Number.isFinite(t.dailyPlayerLimit)?t.dailyPlayerLimit:qo.dailyPlayerLimit;for(const u of s){const h=(a=t.roles)==null?void 0:a[u];if(!h||h.enabled===!1)continue;const m=(l=h.dailyGuildLimit)!=null?l:r,g=(d=h.dailyPlayerLimit)!=null?d:i;return console.debug("[UploadQuota] Applying role override for upload limits.",{role:u,guildLimit:m,playerLimit:g}),{dailyGuildLimit:m,dailyPlayerLimit:g}}return{dailyGuildLimit:r,dailyPlayerLimit:i}}async function jC(t){var u,h,m;const e=(u=t==null?void 0:t.id)!=null?u:null,s=(m=(h=t==null?void 0:t.uploadCenter)==null?void 0:h.usage)!=null?m:{date:null,guilds:0,players:0},r=Array.isArray(t==null?void 0:t.roles)?t.roles:[],[i,a]=await Promise.all([Uwe(t),e?$we(e):Promise.resolve(null)]),l=zwe(i,r);return{config:{...i,dailyGuildLimit:l.dailyGuildLimit,dailyPlayerLimit:l.dailyPlayerLimit},usage:a!=null?a:s}}const Hwe=(t,e)=>`${pa}/scan-uploads/${encodeURIComponent(t)}/${e}.csv`,Gwe=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function SC(t,e){const s=Hwe(t,e);console.log(`[scan-uploads] Fetching ${e} CSV for scanId=${t}`);const r=await fetch(s,{method:"GET",credentials:"include",headers:{Accept:"text/csv"}});if(!r.ok)throw console.error(`[scan-uploads] Failed to fetch ${e} CSV for scanId=${t} (status ${r.status})`),await Gwe(r);const i=await r.text();return console.log(`[scan-uploads] Fetched ${e} CSV for scanId=${t} (${i.length} chars)`),i}const Wwe=t=>{const[e,s]=E.useState([]),[r,i]=E.useState(!1),[a,l]=E.useState(null);return E.useEffect(()=>{if(!t){s([]),i(!1),l(null);return}let d=!0;return(async()=>{i(!0),l(null);try{const h=pc(xt,"scan_uploads"),m=an(h,el("discordUserId","==",t),Wr("uploadedAt","desc")),g=await mn(m);if(!d)return;const v=g.docs.map(b=>({id:b.id,...b.data()}));console.log(`[upload-center] Loaded ${v.length} scan_uploads for current user (remote sessions)`),s(v)}catch(h){if(!d)return;console.error("[upload-center] Failed to load scan_uploads for current user",h),l(h instanceof Error?h:new Error("Failed to load scan uploads")),s([])}finally{d&&i(!1)}})(),()=>{d=!1}},[t]),{items:e,loading:r,error:a}},FI="sfdatahub_upload_quota_v1",BI=t=>{var e,s;return{date:typeof(t==null?void 0:t.date)=="string"?t.date:null,guilds:Number((e=t==null?void 0:t.guilds)!=null?e:0)||0,players:Number((s=t==null?void 0:t.players)!=null?s:0)||0}},t0=(t,e)=>{if(typeof window=="undefined")return;const s={version:1,config:t,usage:BI(e),storedAt:new Date().toISOString()};try{window.localStorage.setItem(FI,JSON.stringify(s))}catch(r){console.warn("[UploadQuotaStorage] Failed to persist quota data",r)}},qwe=()=>{var t,e;if(typeof window=="undefined")return null;try{const s=window.localStorage.getItem(FI);if(!s)return null;const r=JSON.parse(s);return!r||typeof r!="object"||r.version!==1||typeof((t=r.config)==null?void 0:t.dailyGuildLimit)!="number"||typeof((e=r.config)==null?void 0:e.dailyPlayerLimit)!="number"?null:{version:1,config:{dailyGuildLimit:Number(r.config.dailyGuildLimit)||0,dailyPlayerLimit:Number(r.config.dailyPlayerLimit)||0},usage:BI(r.usage),storedAt:typeof r.storedAt=="string"?r.storedAt:""}}catch(s){return console.warn("[UploadQuotaStorage] Failed to read quota data",s),null}},yg=(t,e)=>Math.max(t-e,0),NC=(t,e,s)=>{var l,d,u;const r=e.date===s,i=r&&(l=e.guilds)!=null?l:0,a=r&&(d=e.players)!=null?d:0;return{config:t,usageDate:(u=e.date)!=null?u:null,usedGuildsToday:i,usedPlayersToday:a,remainingGuilds:yg(t.dailyGuildLimit,i),remainingPlayers:yg(t.dailyPlayerLimit,a),today:s}},Kwe=({className:t})=>{if(!t)return n.jsx("span",{title:"Unknown class",className:"text-xs text-center text-zinc-400 block",children:"Unknown"});const{url:e,fallback:s}=E5(t),r=e?Rr(e,28):void 0;return r?n.jsx("img",{src:r,alt:t,title:t,className:"mx-auto h-6 w-6 rounded-full object-contain",draggable:!1}):s?n.jsx("span",{title:t,className:"mx-auto text-center text-sm leading-none",style:{display:"block"},children:s}):n.jsx("span",{title:t,className:"text-xs text-center text-zinc-400 block",children:t})};function Qwe(){return n.jsx(Bt,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:n.jsx(Xwe,{})},"upload-center-shell")}function Xwe(){var ht,we,Gs,Os,Ws,qs,cs,es,dt;const{sessions:t,activeSessionId:e,addSession:s,setActiveSession:r,removeSession:i,selectGuildWithPlayers:a,updateGuildSelectionFromPlayer:l,selectAllPlayersWithGuilds:d,selectAllGuildsWithPlayers:u,setRecordStatus:h}=Fwe(),{t:m}=no(),{user:g}=ao(),v=(Gs=(we=(ht=g==null?void 0:g.providers)==null?void 0:ht.discord)==null?void 0:we.id)!=null?Gs:(g==null?void 0:g.provider)==="discord"?g.id:null,{items:b,loading:_,error:N}=Wwe(v),C=!!v,R=t.find(J=>J.id===e)||null,D=E.useMemo(()=>new Set(t.map(J=>J.scanUploadId).filter(J=>!!J)),[t]),[A,y]=X.useState(new Set),[w,M]=E.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),[k,S]=E.useState("all"),[T,F]=E.useState("all"),[I,B]=E.useState(!1),[$,H]=E.useState(!1),[z,W]=E.useState(null),[K,q]=E.useState(null),[se,re]=E.useState(()=>NC(qo,{date:null,guilds:0,players:0},Pf())),[U,Y]=E.useState(null),ce=E.useCallback((J,Ve)=>{const He=Pf();re(NC(J,Ve,He)),Y(null)},[]),oe=E.useCallback(async()=>{try{const J=await jC(g!=null?g:null);ce(J.config,J.usage),t0(J.config,J.usage)}catch(J){console.error("[UploadCenter] Failed to refresh upload quota",J),Y("Could not refresh upload quota. Using last known values.")}},[ce,g]);E.useEffect(()=>{var tt,lt;let J=!0;Pf();const Ve=(lt=(tt=g==null?void 0:g.uploadCenter)==null?void 0:tt.usage)!=null?lt:{date:null,guilds:0,players:0};ce(qo,Ve);const He=qwe();return He&&ce(He.config,He.usage),(async()=>{try{const _t=await jC(g!=null?g:null);if(!J)return;ce(_t.config,_t.usage),t0(_t.config,_t.usage)}catch(_t){console.error("[UploadCenter] Failed to refresh upload quota",_t),J&&Y("Could not refresh upload quota. Using last known values.")}})(),()=>{J=!1}},[g,(Ws=(Os=g==null?void 0:g.uploadCenter)==null?void 0:Os.usage)==null?void 0:Ws.date,(cs=(qs=g==null?void 0:g.uploadCenter)==null?void 0:qs.usage)==null?void 0:cs.guilds,(dt=(es=g==null?void 0:g.uploadCenter)==null?void 0:es.usage)==null?void 0:dt.players,ce]);const me=E.useCallback(J=>{const Ve=`csv_${Date.now()}`,He=new Date().toISOString(),tt=wC(J,Ve,He);s(tt),r(Ve)},[s,r]),_e=J=>{const Ve=new Date(J);return Number.isNaN(Ve.getTime())?"Unknown date":Ve.toLocaleString()},Pe=J=>{y(Ve=>{const He=new Set(Ve);return He.has(J)?He.delete(J):He.add(J),He})},te=J=>{var lt,_t;const Ve="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",He={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},tt={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return n.jsx("span",{className:`${Ve} ${(lt=He[J])!=null?lt:He.pending}`,children:(_t=tt[J])!=null?_t:J})},fe=J=>{if(!J)return"Unknown date";try{if(typeof J.toDate=="function")return J.toDate().toLocaleString()}catch(Ve){}return"Unknown date"},ae=J=>{var _t,ts,Cs;const Ve="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",He={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",stored:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",received:"bg-sky-500/10 text-sky-100 border border-sky-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},tt={pending:"PENDING",stored:"STORED",received:"RECEIVED",error:"ERROR"},lt=(_t=J==null?void 0:J.toLowerCase())!=null?_t:"pending";return n.jsx("span",{className:`${Ve} ${(ts=He[lt])!=null?ts:He.pending}`,children:(Cs=tt[lt])!=null?Cs:J||"PENDING"})},be=E.useCallback((J,Ve,He)=>{const tt=J==="created"||J==="duplicate";return He&&tt?!1:Ve==="all"?!0:Ve==="pending"?J==="pending":Ve==="inDb"?tt:Ve==="error"?J==="error":!0},[]),ye=E.useMemo(()=>R?R.players.filter(J=>be(J.status,k,I)):[],[R,be,k,I]),Ie=E.useMemo(()=>R?R.guilds.filter(J=>be(J.status,T,$)):[],[R,be,T,$]),$e=E.useCallback(async J=>{if(J!=null&&J.id){q(null),W(J.id);try{const Ve=[],He=J.queueId||J.scanId||J.id,tt=J.hasPlayersCsv!==!1,lt=J.hasGuildsCsv!==!1;if(tt){const fn=await SC(J.id,"players");Ve.push({name:`players.scan-${He}.csv`,text:fn})}if(lt){const fn=await SC(J.id,"guilds");Ve.push({name:`guilds.scan-${He}.csv`,text:fn})}if(!Ve.length)throw new Error("No CSV data available for this scan.");const _t=PI(Ve);_t.filename=He||_t.filename;const ts=`scan_${J.id}_${Date.now()}`,Cs=new Date().toISOString(),mr={...wC(_t,ts,Cs),scanUploadId:J.id};s(mr),r(ts),console.log(`[upload-center] Loaded remote scan session for scanId=${J.id} (session ${ts})`)}catch(Ve){console.error(`[upload-center] Failed to load remote scan session for scanId=${J==null?void 0:J.id}`,Ve),q(Ve instanceof Error?Ve.message:"Failed to load remote scan session.")}finally{W(null)}}},[s,r]),Ge=E.useMemo(()=>{if(!R)return!1;const J=R.players.some(He=>He.selected),Ve=R.guilds.some(He=>He.selected);return J||Ve},[R]),nt=w.phase==="uploading"||w.phase==="finalizing",at=()=>{if(!R)return null;const J=R.players.filter(lt=>lt.selected),Ve=R.guilds.filter(lt=>lt.selected);if(!J.length&&!Ve.length)return null;const He=J.map(lt=>{var _t,ts,Cs;return{Identifier:lt.playerId,"Guild Identifier":(_t=lt.guildId)!=null?_t:"",Timestamp:lt.scanTimestampSec,Server:lt.server,Name:lt.name,Class:(ts=lt.className)!=null?ts:"",Level:(Cs=lt.level)!=null?Cs:""}}),tt=Ve.map(lt=>{var _t;return{"Guild Identifier":lt.guildId,"Guild Member Count":(_t=lt.memberCount)!=null?_t:lt.members.length,Timestamp:lt.scanTimestampSec,Name:lt.name,Server:lt.server}});return{playersRows:He,guildsRows:tt}},ft=E.useCallback((J,Ve)=>{re(He=>{const tt=He.usedGuildsToday+J,lt=He.usedPlayersToday+Ve,_t={...He,usedGuildsToday:tt,usedPlayersToday:lt,remainingGuilds:yg(He.config.dailyGuildLimit,tt),remainingPlayers:yg(He.config.dailyPlayerLimit,lt),usageDate:He.today};return t0(He.config,{date:He.today,guilds:tt,players:lt}),_t})},[]),$t=E.useMemo(()=>se.usageDate?se.usageDate===se.today?"Today":se.usageDate:"No uploads yet",[se.today,se.usageDate]),je=se.config.dailyPlayerLimit===0,Je=se.config.dailyGuildLimit===0,Ke=je?m("uploadCenter.quota.unlimited"):se.config.dailyPlayerLimit,bt=Je?m("uploadCenter.quota.unlimited"):se.config.dailyGuildLimit,kt=je?m("uploadCenter.quota.unlimited"):`${Ke} limit today`,Oe=Je?m("uploadCenter.quota.unlimited"):`${bt} limit today`,Te=je?m("uploadCenter.quota.unlimited"):se.remainingPlayers,De=Je?m("uploadCenter.quota.unlimited"):se.remainingGuilds,et=async()=>{var Lr,Jr,kn;if(!R)return;const J=at();if(!J)return;const Ve=R.players.filter(ss=>ss.selected),He=R.guilds.filter(ss=>ss.selected),tt=Ve.length+He.length;if(!tt)return;const lt=(Lr=g==null?void 0:g.id)!=null?Lr:null,{config:_t,usedGuildsToday:ts,usedPlayersToday:Cs}=se,Nn=ts+He.length,mr=Cs+Ve.length,fn=Nn>_t.dailyGuildLimit,Vi=mr>_t.dailyPlayerLimit;if(fn||Vi){Y(`Daily quota exceeded: You can import up to ${_t.dailyGuildLimit} guilds / ${_t.dailyPlayerLimit} players per day. Today you already imported ${ts} guilds / ${Cs} players. This selection would bring you to ${Nn} guilds / ${mr} players.`);return}Y(null),M({phase:"uploading",processed:0,total:tt,created:0,duplicate:0,error:0});const us={processed:0,created:0,duplicate:0,error:0},tr={processed:0,created:0,duplicate:0,error:0},Hn=()=>{const ss=Math.min(us.processed+tr.processed,tt),gs=ss>=tt&&tt>0?"finalizing":"uploading";M({phase:gs,processed:ss,total:tt,created:us.created+tr.created,duplicate:us.duplicate+tr.duplicate,error:us.error+tr.error})},Pr=ss=>gs=>{var Dr;if((gs==null?void 0:gs.pass)!=="scans")return;const Cn=ss==="players"?us:tr;typeof gs.current=="number"&&(Cn.processed=Math.min(gs.current,(Dr=gs.total)!=null?Dr:gs.current)),typeof gs.created=="number"&&(Cn.created=gs.created),typeof gs.duplicate=="number"&&(Cn.duplicate=gs.duplicate),typeof gs.error=="number"&&(Cn.error=gs.error),Hn()};try{console.log("[UploadCenter] starting selection upload",{players:Ve.length,guilds:He.length});const ss=await AI(J,{onProgress:Vt=>{(Vt==null?void 0:Vt.kind)==="players"?Pr("players")(Vt):(Vt==null?void 0:Vt.kind)==="guilds"&&Pr("guilds")(Vt)}}),gs=R.id;let Cn=!1,Dr=!1;if(console.log("[UploadCenter] importSelectionToDb result",{playersSample:(Jr=ss==null?void 0:ss.players)==null?void 0:Jr.slice(0,5),guildsSample:(kn=ss==null?void 0:ss.guilds)==null?void 0:kn.slice(0,5),selectedPlayerKeys:Ve.slice(0,5).map(Vt=>Vt.key),selectedGuildKeys:He.slice(0,5).map(Vt=>Vt.key)}),((ss==null?void 0:ss.players)||[]).forEach(Vt=>{Cn=!0,h(gs,"player",Vt.key,Vt.status)}),((ss==null?void 0:ss.guilds)||[]).forEach(Vt=>{Dr=!0,h(gs,"guild",Vt.key,Vt.status)}),!Cn&&!Dr&&(Ve.forEach(Vt=>h(gs,"player",Vt.key,"created")),He.forEach(Vt=>h(gs,"guild",Vt.key,"created"))),Ve.length||He.length){if(ft(He.length,Ve.length),!lt)console.warn("[UploadCenter] Cannot persist upload usage because the user ID is missing.");else try{await Owe(lt,He.length,Ve.length)}catch(Vt){console.error("[UploadCenter] Failed to record upload usage.",Vt)}await oe()}}catch(ss){console.error("[UploadCenter] Failed to upload selection",ss)}finally{M(ss=>({...ss,phase:"done"}))}};return n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),n.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),n.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 md:p-5",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Upload quota"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Daily limits & usage"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Values are cached locally in your browser so you can resume uploads across page reloads."})]}),n.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-800/80 px-3 py-2 text-xs text-slate-200",children:["Last upload: ",$t]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3",children:[n.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-emerald-200/80",children:"Players"}),n.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-semibold text-emerald-50",children:Te}),n.jsx("span",{className:"text-sm text-emerald-100/80",children:"remaining"})]}),n.jsxs("div",{className:"mt-1 text-xs text-emerald-100/70",children:[se.usedPlayersToday," used / ",kt]})]}),n.jsxs("div",{className:"rounded-xl border border-sky-400/40 bg-sky-500/5 p-3",children:[n.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-sky-200/80",children:"Guilds"}),n.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-semibold text-sky-50",children:De}),n.jsx("span",{className:"text-sm text-sky-100/80",children:"remaining"})]}),n.jsxs("div",{className:"mt-1 text-xs text-sky-100/70",children:[se.usedGuildsToday," used / ",Oe]})]})]}),U&&n.jsx("div",{className:"mt-3 rounded-xl border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-50",children:U})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[n.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),n.jsx(LI,{mode:"session",onBuildUploadSession:me})]}),n.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):n.jsx("div",{className:"flex flex-col gap-3",children:t.map(J=>{const Ve=J.id===e;return n.jsxs("div",{role:"button",tabIndex:0,onClick:()=>r(J.id),onKeyDown:He=>{(He.key==="Enter"||He.key===" ")&&(He.preventDefault(),r(J.id))},className:["w-full rounded-xl border px-4 py-3 text-left transition",Ve?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:J.sourceFilename||"Unnamed session"}),n.jsx("span",{className:"text-xs text-slate-400",children:_e(J.createdAt)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players: ",J.players.length]}),n.jsxs("div",{children:["Guilds: ",J.guilds.length]})]}),n.jsx("button",{type:"button",onClick:He=>{He.stopPropagation(),window.confirm("Remove this session from the list? This will NOT delete any data from the database.")&&i(J.id)},className:"rounded-full p-1 transition text-red-400 hover:text-red-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-300","aria-label":"Remove session",title:"Remove this session from the list",children:n.jsx(Y6,{className:"h-4 w-4"})})]})]}),Ve&&n.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},J.id)})}),n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"Scan uploads from Discord bot"}),K&&n.jsx("div",{className:"rounded-xl border border-amber-400/60 bg-amber-500/10 p-3 text-sm text-amber-100",children:K}),C?_?n.jsx("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Loading scan uploads..."}):N?n.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100",children:"Error loading scan uploads."}):b.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"No scan uploads from Discord bot yet."}):n.jsx("div",{className:"flex flex-col gap-3",children:b.map(J=>{const Ve=z===J.id,He=D.has(J.id),tt=Ve||He;return n.jsxs("button",{type:"button",onClick:()=>{tt||$e(J)},disabled:tt,title:He?"This scan is already loaded above. Remove it there to load it again.":void 0,className:["w-full rounded-xl border px-4 py-3 text-left text-slate-100 transition","border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:text-emerald-50",tt?"cursor-not-allowed opacity-70 bg-slate-700/60 text-slate-400":""].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:J.queueId||J.scanId||J.id}),n.jsx("span",{className:"text-xs text-slate-400",children:fe(J.uploadedAt)}),J.discordUsername&&n.jsx("span",{className:"text-xs text-slate-400",children:J.discordUsername})]}),n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players CSV: ",J.hasPlayersCsv?"yes":"no"]}),n.jsxs("div",{children:["Guilds CSV: ",J.hasGuildsCsv?"yes":"no"]})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[ae(J.status),J.serverCode&&n.jsxs("span",{className:"rounded-full border border-slate-600/70 bg-slate-800/60 px-2 py-0.5",children:["Server: ",J.serverCode]}),J.lastError&&n.jsxs("span",{className:"rounded-full border border-rose-500/60 bg-rose-500/10 px-2 py-0.5 text-rose-100",children:["Error: ",J.lastError]}),n.jsx("span",{className:"rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-emerald-100",children:He?"Loaded":Ve?"Loading...":"Load into preview"})]})]},J.id)})}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Link your Discord account to see bot uploads here."})]})]})}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[n.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:et,disabled:nt||!R||!Ge,children:w.phase==="uploading"?"Uploading...":w.phase==="finalizing"?"Finalizing...":"Upload selected to DB"}),U&&n.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100",children:U}),w.total>0&&n.jsx("div",{className:"text-xs text-slate-300",children:w.phase==="uploading"?n.jsxs(n.Fragment,{children:["Uploading ",w.processed," / ",w.total," records (",Math.round(w.processed/Math.max(w.total,1)*100),"%) - ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):w.phase==="finalizing"?n.jsxs(n.Fragment,{children:["Finalizing import - ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):w.phase==="done"?n.jsxs(n.Fragment,{children:["Upload finished: ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):null}),R?n.jsx("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:`Active session: ${R.sourceFilename||R.id} - ${R.players.length} players, ${R.guilds.length} guilds`}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),R&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",R.players.length," total,"," ",R.players.filter(J=>J.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>d(R.id,!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>d(R.id,!1),children:"Clear selection"})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[n.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(J=>n.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",k===J?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>S(J),children:J==="all"?"All":J==="pending"?"Pending":J==="inDb"?"In DB":"Error"},J))}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:I,onChange:J=>B(J.target.checked)}),n.jsx("span",{children:"Hide uploaded"})]})]}),ye.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:ye.map(J=>{var Ve;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:J.selected,onChange:()=>l(R.id,J.key,!J.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:J.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:J.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:(Ve=J.level)!=null?Ve:""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:n.jsx(Kwe,{className:J.className})}),n.jsx("td",{className:"px-3 py-2",children:te(J.status)})]},J.key)})})]})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",R.guilds.length," total,"," ",R.guilds.filter(J=>J.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>u(R.id,!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>u(R.id,!1),children:"Clear selection"})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[n.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(J=>n.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",T===J?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>F(J),children:J==="all"?"All":J==="pending"?"Pending":J==="inDb"?"In DB":"Error"},J))}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:$,onChange:J=>H(J.target.checked)}),n.jsx("span",{children:"Hide uploaded"})]})]}),Ie.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:Ie.map(J=>{var tt;const Ve=A.has(J.key),He=(tt=J.memberCount)!=null?tt:J.members.length;return n.jsxs(X.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>Pe(J.key),"aria-expanded":Ve,children:Ve?"Collapse":"Expand"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:J.selected,onChange:()=>a(R.id,J.key,!J.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:J.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:J.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:He}),n.jsx("td",{className:"px-3 py-2",children:te(J.status)})]}),Ve&&n.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:n.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[n.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),J.members.length===0?n.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):n.jsxs("table",{className:"w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),n.jsx("tbody",{children:J.members.map(lt=>{var _t,ts;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-2 py-1",children:lt.name||""}),n.jsx("td",{className:"px-2 py-1",children:(_t=lt.level)!=null?_t:""}),n.jsx("td",{className:"px-2 py-1",children:(ts=lt.className)!=null?ts:""})]},lt.key)})})]})]})})]},J.key)})})]})})]})]})]})})]})}function Ywe(){const{canUse:t}=wb();return t?n.jsx(Qwe,{}):n.jsx(Bt,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[n.jsx(eT,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),n.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const Jwe=t=>()=>n.jsx("div",{style:{padding:16},children:n.jsx("h2",{style:{color:"var(--title)"},children:t})}),lr=Jwe("Diese Unterseite existiert in der neuen Struktur nicht mehr."),Ut=(t,e,s,r=n.jsx(Ul,{to:"/",replace:!0}))=>n.jsx(Bwe,{featureId:t,route:e,fallback:r,children:s});X4.createRoot(document.getElementById("root")).render(n.jsx(X.StrictMode,{children:n.jsx(S$,{children:n.jsx(B$,{children:n.jsx(z$,{children:n.jsxs(Mwe,{children:[n.jsx(yL,{children:n.jsx(KP,{children:n.jsxs(xe,{element:n.jsx(rV,{}),children:[n.jsx(xe,{path:"/",element:Ut("main.home","/",n.jsx(ZW,{}),n.jsx(Ul,{to:"/login",replace:!0}))}),n.jsx(xe,{path:"/login",element:n.jsx(gq,{})}),n.jsx(xe,{path:"/dashboard",element:Ut("main.dashboard","/dashboard",n.jsx(xq,{}))}),n.jsx(xe,{path:"/dashboard/kpis",element:Ut("main.dashboard","/dashboard",n.jsx(bq,{}))}),n.jsx(xe,{path:"/dashboard/activity",element:Ut("main.dashboard","/dashboard",n.jsx(_q,{}))}),n.jsx(xe,{path:"/dashboard/progression",element:Ut("main.dashboard","/dashboard",n.jsx(wq,{}))}),n.jsx(xe,{path:"/discover",element:Ut("main.discover","/discover",n.jsx(jq,{}))}),n.jsx(xe,{path:"/toplists",element:Ut("main.toplists","/toplists",n.jsx(NQ,{}))}),n.jsx(xe,{path:"/sfmagazine",element:n.jsx(Tq,{})}),n.jsx(xe,{path:"/sfmagazine/historybook",element:n.jsx(rK,{})}),n.jsx(xe,{path:"/help",element:n.jsx(vK,{})}),n.jsx(xe,{path:"/search",element:n.jsx(W_e,{})}),n.jsx(xe,{path:"/players",element:n.jsx(kQ,{})}),n.jsx(xe,{path:"/players/rankings",element:n.jsx(CQ,{})}),n.jsx(xe,{path:"/players/stats",element:n.jsx(TQ,{})}),n.jsx(xe,{path:"/players/profile",element:n.jsx(Ev,{})}),n.jsx(xe,{path:"/players/profile/:playerId",element:n.jsx(Ev,{})}),n.jsx(xe,{path:"/players/compare",element:n.jsx(EY,{})}),n.jsx(xe,{path:"/player/:playerId",element:n.jsx(Ev,{})}),n.jsx(xe,{path:"/guilds",element:n.jsx(FY,{})}),n.jsx(xe,{path:"/guilds/rankings",element:n.jsx(BY,{})}),n.jsx(xe,{path:"/guilds/stats",element:n.jsx($Y,{})}),n.jsx(xe,{path:"/guilds/profile",element:n.jsx(Lv,{})}),n.jsx(xe,{path:"/guilds/profile/:guildId",element:n.jsx(Lv,{})}),n.jsx(xe,{path:"/guild/:guildId",element:n.jsx(Lv,{})}),n.jsx(xe,{path:"/servers",element:n.jsx(kee,{})}),n.jsx(xe,{path:"/servers/rankings",element:n.jsx(Cee,{})}),n.jsx(xe,{path:"/servers/stats",element:n.jsx(Tee,{})}),n.jsx(xe,{path:"/servers/profile",element:n.jsx(Dv,{})}),n.jsx(xe,{path:"/servers/profile/:serverId",element:n.jsx(Dv,{})}),n.jsx(xe,{path:"/server/:serverId",element:n.jsx(Dv,{})}),n.jsx(xe,{path:"/u/:profileId",element:n.jsx(Fte,{})}),n.jsx(xe,{path:"/guidehub/*",element:Ut("main.guidehub","/guidehub",n.jsx(xoe,{}))}),n.jsx(xe,{path:"/tools",element:Ut("main.tools","/tools",n.jsx(z_e,{}))}),n.jsx(xe,{path:"/upload-center",element:Ut("main.uploadCenter","/upload-center",n.jsx(Ywe,{}),n.jsx(Ul,{to:"/login",replace:!0}))}),n.jsx(xe,{path:"/UploadCenter",element:n.jsx(Ul,{to:"/upload-center",replace:!0})}),n.jsx(xe,{path:"/community",element:Ut("main.community","/community",n.jsx(dce,{}))}),n.jsx(xe,{path:"/community/scans",element:Ut("main.community","/community",n.jsx(ZA,{}))}),n.jsx(xe,{path:"/community/predictions",element:Ut("main.community","/community",n.jsx(eI,{}))}),n.jsx(xe,{path:"/community/creators",element:Ut("main.community","/community",n.jsx(JA,{}))}),n.jsx(xe,{path:"/community/feedback",element:Ut("main.community","/community",n.jsx(sI,{}))}),n.jsx(xe,{path:"/community/news",element:Ut("main.community","/community",n.jsx(tI,{}))}),n.jsx(xe,{path:"/community/records",element:Ut("main.community","/community",n.jsx(nI,{}))}),n.jsx(xe,{path:"/scans",element:Ut("main.scans","/scans",n.jsx(uce,{}))}),n.jsx(xe,{path:"/scans/latest",element:Ut("main.scans","/scans",n.jsx(hce,{}))}),n.jsx(xe,{path:"/scans/archive",element:Ut("main.scans","/scans",n.jsx(mce,{}))}),n.jsx(xe,{path:"/guild-hub",element:Ut("main.guildHub","/guild-hub",n.jsx(pce,{}))}),n.jsx(xe,{path:"/guild-hub/planner",element:Ut("main.guildHub","/guild-hub",n.jsx(Mde,{}))}),n.jsx(xe,{path:"/guild-hub/fusion-planner",element:Ut("main.guildHub","/guild-hub",n.jsx(bfe,{}))}),n.jsx(xe,{path:"/guild-hub/compare-guilds",element:Ut("main.guildHub","/guild-hub",n.jsx(_fe,{}))}),n.jsx(xe,{path:"/guild-hub/waitlist",element:Ut("main.guildHub","/guild-hub",n.jsx(Oge,{}))}),n.jsx(xe,{path:"/guild-hub/activity",element:Ut("main.guildHub","/guild-hub",n.jsx(Kge,{}))}),n.jsx(xe,{path:"/guild-hub/imports",element:Ut("main.guildHub","/guild-hub",n.jsx(Qge,{}))}),n.jsx(xe,{path:"/guild-hub/announcements",element:Ut("main.guildHub","/guild-hub",n.jsx(Xge,{}))}),n.jsx(xe,{path:"/guild-hub/events",element:Ut("main.guildHub","/guild-hub",n.jsx(Yge,{}))}),n.jsx(xe,{path:"/guild-hub/roles",element:Ut("main.guildHub","/guild-hub",n.jsx(Jge,{}))}),n.jsx(xe,{path:"/guild-hub/settings",element:Ut("main.guildHub","/guild-hub",n.jsx(Zge,{}))}),n.jsx(xe,{path:"/admin",element:Ut("main.admin","/admin",n.jsx(nxe,{}))}),n.jsx(xe,{path:"/admin/errors",element:Ut("main.admin","/admin",n.jsx(oxe,{}))}),n.jsx(xe,{path:"/admin/scans-uploaded",element:Ut("main.admin","/admin",n.jsx(cxe,{}))}),n.jsx(xe,{path:"/admin/creators-api",element:Ut("main.admin","/admin",n.jsx(vxe,{}))}),n.jsx(xe,{path:"/admin/users",element:Ut("main.admin","/admin",n.jsx(Pxe,{}))}),n.jsx(xe,{path:"/settings",element:Ut("main.settings","/settings",n.jsx($xe,{}))}),n.jsx(xe,{path:"/settings/account",element:Ut("main.settings","/settings",n.jsx(yve,{}))}),n.jsxs(xe,{path:"/playground",element:Ut("main.playground","/playground",n.jsx(bve,{})),children:[n.jsx(xe,{index:!0,element:n.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),n.jsx(xe,{path:"list-views",element:n.jsx(Yk,{})}),n.jsx(xe,{path:"rescan-widget",element:n.jsx(Zk,{})}),n.jsx(xe,{path:"upload-sim",element:n.jsx(eC,{})}),n.jsx(xe,{path:"theme-maker",element:n.jsx(qk,{})}),n.jsx(xe,{path:"theme-maker-pro",element:n.jsx(Qk,{})}),n.jsx(xe,{path:"am-rune-bonuses-demos",element:n.jsx(x0e,{})}),n.jsx(xe,{path:"templates/content-shell",element:n.jsx(d1e,{})}),n.jsx(xe,{path:"templates/blank",element:n.jsx(h1e,{})}),n.jsx(xe,{path:"templates/blank-alt",element:n.jsx(p1e,{})}),n.jsx(xe,{path:"templates/blank-layout-2",element:n.jsx(y1e,{})}),n.jsx(xe,{path:"templates/blank-layout-3",element:n.jsx(b1e,{})}),n.jsx(xe,{path:"templates/blank-layout-4",element:n.jsx(_1e,{})}),n.jsx(xe,{path:"portrait-maker",element:n.jsx(a1e,{})}),n.jsx(xe,{path:"hud",element:n.jsx(y0e,{})}),n.jsx(xe,{path:"hud/game-buttons",element:n.jsx(G0e,{})}),n.jsx(xe,{path:"core-ui/theme-maker",element:n.jsx(qk,{})}),n.jsx(xe,{path:"core-ui/theme-maker-pro",element:n.jsx(Qk,{})}),n.jsx(xe,{path:"core-ui/list-views",element:n.jsx(Yk,{})}),n.jsx(xe,{path:"sync/rescan",element:n.jsx(Zk,{})}),n.jsx(xe,{path:"upload/sim",element:n.jsx(eC,{})}),n.jsx(xe,{path:"import/har",element:n.jsx(N1e,{})}),n.jsx(xe,{path:"import/json-csv",element:n.jsx(E1e,{})}),n.jsx(xe,{path:"import/schema",element:n.jsx(P1e,{})}),n.jsx(xe,{path:"hubs/player-contained",element:n.jsx(F1e,{})}),n.jsx(xe,{path:"hubs/guilds",element:n.jsx(V1e,{})}),n.jsx(xe,{path:"hubs/servers",element:n.jsx(G1e,{})}),n.jsx(xe,{path:"rankings/views",element:n.jsx(Q1e,{})}),n.jsx(xe,{path:"analytics/kpi",element:n.jsx(Z1e,{})}),n.jsx(xe,{path:"analytics/progression",element:n.jsx(nbe,{})}),n.jsx(xe,{path:"analytics/legendary-pets",element:n.jsx(obe,{})}),n.jsx(xe,{path:"community/scans",element:n.jsx(ube,{})}),n.jsx(xe,{path:"community/creators",element:n.jsx(fbe,{})}),n.jsx(xe,{path:"feedback/form",element:n.jsx(vbe,{})}),n.jsx(xe,{path:"feedback/admin",element:n.jsx(jbe,{})}),n.jsx(xe,{path:"help/tutorials",element:n.jsx(Cbe,{})}),n.jsx(xe,{path:"help/wiki",element:n.jsx(Ibe,{})}),n.jsx(xe,{path:"legal/tos",element:n.jsx($be,{})}),n.jsx(xe,{path:"legal/transparency",element:n.jsx(zbe,{})}),n.jsx(xe,{path:"settings",element:n.jsx(Dbe,{})}),n.jsx(xe,{path:"pwa/update",element:n.jsx(qbe,{})}),n.jsx(xe,{path:"pwa/install",element:n.jsx(Ybe,{})}),n.jsx(xe,{path:"connect/manual",element:n.jsx(t_e,{})}),n.jsx(xe,{path:"connect/userscript",element:n.jsx(i_e,{})}),n.jsx(xe,{path:"interop/exports",element:n.jsx(c_e,{})}),n.jsx(xe,{path:"interop/deeplinks",element:n.jsx(m_e,{})}),n.jsx(xe,{path:"admin/servers",element:n.jsx(x_e,{})}),n.jsx(xe,{path:"admin/jobs",element:n.jsx(__e,{})}),n.jsx(xe,{path:"admin/flags",element:n.jsx(N_e,{})}),n.jsx(xe,{path:"perf/table-lab",element:n.jsx(E_e,{})}),n.jsx(xe,{path:"mobile/filters",element:n.jsx(P_e,{})}),n.jsx(xe,{path:"qa/a11y",element:n.jsx(F_e,{})})]}),n.jsx(xe,{path:"/latest-scan",element:n.jsx(Ul,{to:"/scans/latest",replace:!0})}),n.jsx(xe,{path:"/old-scans",element:n.jsx(Ul,{to:"/scans/archive",replace:!0})}),n.jsx(xe,{path:"/favorites",element:lr()}),n.jsx(xe,{path:"/notifications",element:lr()}),n.jsx(xe,{path:"/guilds/planner",element:lr()}),n.jsx(xe,{path:"/guilds/fusion",element:lr()}),n.jsx(xe,{path:"/guilds/academy",element:lr()}),n.jsx(xe,{path:"/toplists/players",element:lr()}),n.jsx(xe,{path:"/toplists/guilds",element:lr()}),n.jsx(xe,{path:"/toplists/servers",element:lr()}),n.jsx(xe,{path:"/settings/profile",element:lr()}),n.jsx(xe,{path:"/settings/appearance",element:lr()}),n.jsx(xe,{path:"/players/search",element:lr()}),n.jsx(xe,{path:"/servers/list",element:lr()}),n.jsx(xe,{path:"/servers/trend",element:lr()}),n.jsx(xe,{path:"/scans/upload",element:lr()}),n.jsx(xe,{path:"/scans/history",element:lr()}),n.jsx(xe,{path:"*",element:n.jsx(Ul,{to:"/",replace:!0})})]})})}),n.jsx(Lwe,{})]})})})})}));

import P5 from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function W_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O0={exports:{}},rm={},V0={exports:{}},gs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function H8(){if(jN)return gs;jN=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function I(G,X,Y){this.props=G,this.context=X,this.refs=k,this.updater=Y||b}I.prototype.isReactComponent={},I.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},I.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function R(){}R.prototype=I.prototype;function P(G,X,Y){this.props=G,this.context=X,this.refs=k,this.updater=Y||b}var N=P.prototype=new R;N.constructor=P,_(N,I.prototype),N.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,L={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(G,X,Y){var se,ce={},_e=null,Ae=null;if(X!=null)for(se in X.ref!==void 0&&(Ae=X.ref),X.key!==void 0&&(_e=""+X.key),X)w.call(X,se)&&!j.hasOwnProperty(se)&&(ce[se]=X[se]);var ee=arguments.length-2;if(ee===1)ce.children=Y;else if(1<ee){for(var le=Array(ee),te=0;te<ee;te++)le[te]=arguments[te+2];ce.children=le}if(G&&G.defaultProps)for(se in ee=G.defaultProps,ee)ce[se]===void 0&&(ce[se]=ee[se]);return{$$typeof:t,type:G,key:_e,ref:Ae,props:ce,_owner:L.current}}function C(G,X){return{$$typeof:t,type:G.type,key:X,ref:G.ref,props:G.props,_owner:G._owner}}function M(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function T(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Y){return X[Y]})}var F=/\/+/g;function D(G,X){return typeof G=="object"&&G!==null&&G.key!=null?T(""+G.key):X.toString(36)}function V(G,X,Y,se,ce){var _e=typeof G;(_e==="undefined"||_e==="boolean")&&(G=null);var Ae=!1;if(G===null)Ae=!0;else switch(_e){case"string":case"number":Ae=!0;break;case"object":switch(G.$$typeof){case t:case e:Ae=!0}}if(Ae)return Ae=G,ce=ce(Ae),G=se===""?"."+D(Ae,0):se,x(ce)?(Y="",G!=null&&(Y=G.replace(F,"$&/")+"/"),V(ce,X,Y,"",function(te){return te})):ce!=null&&(M(ce)&&(ce=C(ce,Y+(!ce.key||Ae&&Ae.key===ce.key?"":(""+ce.key).replace(F,"$&/")+"/")+G)),X.push(ce)),1;if(Ae=0,se=se===""?".":se+":",x(G))for(var ee=0;ee<G.length;ee++){_e=G[ee];var le=se+D(_e,ee);Ae+=V(_e,X,Y,le,ce)}else if(le=v(G),typeof le=="function")for(G=le.call(G),ee=0;!(_e=G.next()).done;)_e=_e.value,le=se+D(_e,ee++),Ae+=V(_e,X,Y,le,ce);else if(_e==="object")throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ae}function z(G,X,Y){if(G==null)return G;var se=[],ce=0;return V(G,se,"","",function(_e){return X.call(Y,_e,ce++)}),se}function K(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(Y){(G._status===0||G._status===-1)&&(G._status=1,G._result=Y)},function(Y){(G._status===0||G._status===-1)&&(G._status=2,G._result=Y)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var W={current:null},U={transition:null},J={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:U,ReactCurrentOwner:L};function re(){throw Error("act(...) is not supported in production builds of React.")}return gs.Children={map:z,forEach:function(G,X,Y){z(G,function(){X.apply(this,arguments)},Y)},count:function(G){var X=0;return z(G,function(){X++}),X},toArray:function(G){return z(G,function(X){return X})||[]},only:function(G){if(!M(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},gs.Component=I,gs.Fragment=n,gs.Profiler=i,gs.PureComponent=P,gs.StrictMode=r,gs.Suspense=u,gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,gs.act=re,gs.cloneElement=function(G,X,Y){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var se=_({},G.props),ce=G.key,_e=G.ref,Ae=G._owner;if(X!=null){if(X.ref!==void 0&&(_e=X.ref,Ae=L.current),X.key!==void 0&&(ce=""+X.key),G.type&&G.type.defaultProps)var ee=G.type.defaultProps;for(le in X)w.call(X,le)&&!j.hasOwnProperty(le)&&(se[le]=X[le]===void 0&&ee!==void 0?ee[le]:X[le])}var le=arguments.length-2;if(le===1)se.children=Y;else if(1<le){ee=Array(le);for(var te=0;te<le;te++)ee[te]=arguments[te+2];se.children=ee}return{$$typeof:t,type:G.type,key:ce,ref:_e,props:se,_owner:Ae}},gs.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:a,_context:G},G.Consumer=G},gs.createElement=S,gs.createFactory=function(G){var X=S.bind(null,G);return X.type=G,X},gs.createRef=function(){return{current:null}},gs.forwardRef=function(G){return{$$typeof:c,render:G}},gs.isValidElement=M,gs.lazy=function(G){return{$$typeof:m,_payload:{_status:-1,_result:G},_init:K}},gs.memo=function(G,X){return{$$typeof:h,type:G,compare:X===void 0?null:X}},gs.startTransition=function(G){var X=U.transition;U.transition={};try{G()}finally{U.transition=X}},gs.unstable_act=re,gs.useCallback=function(G,X){return W.current.useCallback(G,X)},gs.useContext=function(G){return W.current.useContext(G)},gs.useDebugValue=function(){},gs.useDeferredValue=function(G){return W.current.useDeferredValue(G)},gs.useEffect=function(G,X){return W.current.useEffect(G,X)},gs.useId=function(){return W.current.useId()},gs.useImperativeHandle=function(G,X,Y){return W.current.useImperativeHandle(G,X,Y)},gs.useInsertionEffect=function(G,X){return W.current.useInsertionEffect(G,X)},gs.useLayoutEffect=function(G,X){return W.current.useLayoutEffect(G,X)},gs.useMemo=function(G,X){return W.current.useMemo(G,X)},gs.useReducer=function(G,X,Y){return W.current.useReducer(G,X,Y)},gs.useRef=function(G){return W.current.useRef(G)},gs.useState=function(G){return W.current.useState(G)},gs.useSyncExternalStore=function(G,X,Y){return W.current.useSyncExternalStore(G,X,Y)},gs.useTransition=function(){return W.current.useTransition()},gs.version="18.3.1",gs}var SN;function K_(){return SN||(SN=1,V0.exports=H8()),V0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function W8(){if(NN)return rm;NN=1;var t=K_(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,h){var m,g={},v=null,b=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(b=u.ref);for(m in u)r.call(u,m)&&!a.hasOwnProperty(m)&&(g[m]=u[m]);if(c&&c.defaultProps)for(m in u=c.defaultProps,u)g[m]===void 0&&(g[m]=u[m]);return{$$typeof:e,type:c,key:v,ref:b,props:g,_owner:i.current}}return rm.Fragment=n,rm.jsx=o,rm.jsxs=o,rm}var kN;function K8(){return kN||(kN=1,O0.exports=W8()),O0.exports}var s=K8(),A=K_();const q=W_(A);var df={},U0={exports:{}},ki={},z0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function q8(){return CN||(CN=1,(function(t){function e(U,J){var re=U.length;U.push(J);e:for(;0<re;){var G=re-1>>>1,X=U[G];if(0<i(X,J))U[G]=J,U[re]=X,re=G;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var J=U[0],re=U.pop();if(re!==J){U[0]=re;e:for(var G=0,X=U.length,Y=X>>>1;G<Y;){var se=2*(G+1)-1,ce=U[se],_e=se+1,Ae=U[_e];if(0>i(ce,re))_e<X&&0>i(Ae,ce)?(U[G]=Ae,U[_e]=re,G=_e):(U[G]=ce,U[se]=re,G=se);else if(_e<X&&0>i(Ae,re))U[G]=Ae,U[_e]=re,G=_e;else break e}}return J}function i(U,J){var re=U.sortIndex-J.sortIndex;return re!==0?re:U.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,g=null,v=3,b=!1,_=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=U)r(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(h)}}function x(U){if(k=!1,N(U),!_)if(n(u)!==null)_=!0,K(w);else{var J=n(h);J!==null&&W(x,J.startTime-U)}}function w(U,J){_=!1,k&&(k=!1,R(S),S=-1),b=!0;var re=v;try{for(N(J),g=n(u);g!==null&&(!(g.expirationTime>J)||U&&!T());){var G=g.callback;if(typeof G=="function"){g.callback=null,v=g.priorityLevel;var X=G(g.expirationTime<=J);J=t.unstable_now(),typeof X=="function"?g.callback=X:g===n(u)&&r(u),N(J)}else r(u);g=n(u)}if(g!==null)var Y=!0;else{var se=n(h);se!==null&&W(x,se.startTime-J),Y=!1}return Y}finally{g=null,v=re,b=!1}}var L=!1,j=null,S=-1,C=5,M=-1;function T(){return!(t.unstable_now()-M<C)}function F(){if(j!==null){var U=t.unstable_now();M=U;var J=!0;try{J=j(!0,U)}finally{J?D():(L=!1,j=null)}}else L=!1}var D;if(typeof P=="function")D=function(){P(F)};else if(typeof MessageChannel!="undefined"){var V=new MessageChannel,z=V.port2;V.port1.onmessage=F,D=function(){z.postMessage(null)}}else D=function(){I(F,0)};function K(U){j=U,L||(L=!0,D())}function W(U,J){S=I(function(){U(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){_||b||(_=!0,K(w))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var re=v;v=J;try{return U()}finally{v=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=v;v=U;try{return J()}finally{v=re}},t.unstable_scheduleCallback=function(U,J,re){var G=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?G+re:G):re=G,U){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=re+X,U={id:m++,callback:J,priorityLevel:U,startTime:re,expirationTime:X,sortIndex:-1},re>G?(U.sortIndex=re,e(h,U),n(u)===null&&U===n(h)&&(k?(R(S),S=-1):k=!0,W(x,re-G))):(U.sortIndex=X,e(u,U),_||b||(_=!0,K(w))),U},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(U){var J=v;return function(){var re=v;v=J;try{return U.apply(this,arguments)}finally{v=re}}}})(G0)),G0}var TN;function Q8(){return TN||(TN=1,z0.exports=q8()),z0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function Y8(){if(IN)return ki;IN=1;var t=K_(),e=Q8();function n(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(i[l]=d,l=0;l<d.length;l++)r.add(d[l])}var c=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(l){return u.call(g,l)?!0:u.call(m,l)?!1:h.test(l)?g[l]=!0:(m[l]=!0,!1)}function b(l,d,p,y){if(p!==null&&p.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,d,p,y){if(d===null||typeof d=="undefined"||b(l,d,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function k(l,d,p,y,E,$,H){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=p,this.propertyName=l,this.type=d,this.sanitizeURL=$,this.removeEmptyString=H}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){I[l]=new k(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];I[d]=new k(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){I[l]=new k(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){I[l]=new k(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){I[l]=new k(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){I[l]=new k(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){I[l]=new k(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){I[l]=new k(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){I[l]=new k(l,5,!1,l.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function P(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(R,P);I[d]=new k(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(R,P);I[d]=new k(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(R,P);I[d]=new k(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){I[l]=new k(l,1,!1,l.toLowerCase(),null,!1,!1)}),I.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){I[l]=new k(l,1,!1,l.toLowerCase(),null,!0,!0)});function N(l,d,p,y){var E=I.hasOwnProperty(d)?I[d]:null;(E!==null?E.type!==0:y||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(_(d,p,E,y)&&(p=null),y||E===null?v(d)&&(p===null?l.removeAttribute(d):l.setAttribute(d,""+p)):E.mustUseProperty?l[E.propertyName]=p===null?E.type===3?!1:"":p:(d=E.attributeName,y=E.attributeNamespace,p===null?l.removeAttribute(d):(E=E.type,p=E===3||E===4&&p===!0?"":""+p,y?l.setAttributeNS(y,d,p):l.setAttribute(d,p))))}var x=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),L=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),U=Symbol.iterator;function J(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var re=Object.assign,G;function X(l){if(G===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);G=d&&d[1]||""}return`
`+G+l}var Y=!1;function se(l,d){if(!l||Y)return"";Y=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ne){var y=Ne}Reflect.construct(l,[],d)}else{try{d.call()}catch(Ne){y=Ne}l.call(d.prototype)}else{try{throw Error()}catch(Ne){y=Ne}l()}}catch(Ne){if(Ne&&y&&typeof Ne.stack=="string"){for(var E=Ne.stack.split(`
`),$=y.stack.split(`
`),H=E.length-1,Z=$.length-1;1<=H&&0<=Z&&E[H]!==$[Z];)Z--;for(;1<=H&&0<=Z;H--,Z--)if(E[H]!==$[Z]){if(H!==1||Z!==1)do if(H--,Z--,0>Z||E[H]!==$[Z]){var ae=`
`+E[H].replace(" at new "," at ");return l.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",l.displayName)),ae}while(1<=H&&0<=Z);break}}}finally{Y=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?X(l):""}function ce(l){switch(l.tag){case 5:return X(l.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return l=se(l.type,!1),l;case 11:return l=se(l.type.render,!1),l;case 1:return l=se(l.type,!0),l;default:return""}}function _e(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case L:return"Portal";case C:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case V:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case T:return(l.displayName||"Context")+".Consumer";case M:return(l._context.displayName||"Context")+".Provider";case F:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case z:return d=l.displayName||null,d!==null?d:_e(l.type)||"Memo";case K:d=l._payload,l=l._init;try{return _e(l(d))}catch(p){}}return null}function Ae(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(d);case 8:return d===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function ee(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function le(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function te(l){var d=le(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),y=""+l[d];if(!l.hasOwnProperty(d)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,$=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(H){y=""+H,$.call(this,H)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function ye(l){l._valueTracker||(l._valueTracker=te(l))}function ke(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=le(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function Me(l){if(l=l||(typeof document!="undefined"?document:void 0),typeof l=="undefined")return null;try{return l.activeElement||l.body}catch(d){return l.body}}function Re(l,d){var p=d.checked;return re({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p!=null?p:l._wrapperState.initialChecked})}function Ee(l,d){var p=d.defaultValue==null?"":d.defaultValue,y=d.checked!=null?d.checked:d.defaultChecked;p=ee(d.value!=null?d.value:p),l._wrapperState={initialChecked:y,initialValue:p,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Le(l,d){d=d.checked,d!=null&&N(l,"checked",d,!1)}function Fe(l,d){Le(l,d);var p=ee(d.value),y=d.type;if(p!=null)y==="number"?(p===0&&l.value===""||l.value!=p)&&(l.value=""+p):l.value!==""+p&&(l.value=""+p);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?je(l,d.type,p):d.hasOwnProperty("defaultValue")&&je(l,d.type,ee(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Be(l,d,p){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var y=d.type;if(!(y!=="submit"&&y!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,p||d===l.value||(l.value=d),l.defaultValue=d}p=l.name,p!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,p!==""&&(l.name=p)}function je(l,d,p){(d!=="number"||Me(l.ownerDocument)!==l)&&(p==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+p&&(l.defaultValue=""+p))}var ue=Array.isArray;function Pe(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+ee(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function De(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return re({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function it(l,d){var p=d.value;if(p==null){if(p=d.children,d=d.defaultValue,p!=null){if(d!=null)throw Error(n(92));if(ue(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),p=d}l._wrapperState={initialValue:ee(p)}}function yt(l,d){var p=ee(d.value),y=ee(d.defaultValue);p!=null&&(p=""+p,p!==l.value&&(l.value=p),d.defaultValue==null&&l.defaultValue!==p&&(l.defaultValue=p)),y!=null&&(l.defaultValue=""+y)}function ie(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function he(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ve(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?he(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Te,St=(function(l){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(d,p,y,E){MSApp.execUnsafeLocalFunction(function(){return l(d,p,y,E)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Te.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function at(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(l){ut.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),rt[d]=rt[l]})});function _t(l,d,p){return d==null||typeof d=="boolean"||d===""?"":p||typeof d!="number"||d===0||rt.hasOwnProperty(l)&&rt[l]?(""+d).trim():d+"px"}function ot(l,d){l=l.style;for(var p in d)if(d.hasOwnProperty(p)){var y=p.indexOf("--")===0,E=_t(p,d[p],y);p==="float"&&(p="cssFloat"),y?l.setProperty(p,E):l[p]=E}}var nt=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ts(l,d){if(d){if(nt[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function pt(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ne=null;function Oe(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ve=null,ct=null,qe=null;function ft(l){if(l=zh(l)){if(typeof Ve!="function")throw Error(n(280));var d=l.stateNode;d&&(d=Sg(d),Ve(l.stateNode,l.type,d))}}function Mt(l){ct?qe?qe.push(l):qe=[l]:ct=l}function Lt(){if(ct){var l=ct,d=qe;if(qe=ct=null,ft(l),d)for(l=0;l<d.length;l++)ft(d[l])}}function Ns(l,d){return l(d)}function dt(){}var ss=!1;function cs(l,d,p){if(ss)return l(d,p);ss=!0;try{return Ns(l,d,p)}finally{ss=!1,(ct!==null||qe!==null)&&(dt(),Lt())}}function bs(l,d){var p=l.stateNode;if(p===null)return null;var y=Sg(p);if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,d,typeof p));return p}var On=!1;if(c)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){On=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch(l){On=!1}function ln(l,d,p,y,E,$,H,Z,ae){var Ne=Array.prototype.slice.call(arguments,3);try{d.apply(p,Ne)}catch(ze){this.onError(ze)}}var or=!1,lr=null,gn=!1,ds=null,Es={onError:function(l){or=!0,lr=l}};function fn(l,d,p,y,E,$,H,Z,ae){or=!1,lr=null,ln.apply(Es,arguments)}function ht(l,d,p,y,E,$,H,Z,ae){if(fn.apply(this,arguments),or){if(or){var Ne=lr;or=!1,lr=null}else throw Error(n(198));gn||(gn=!0,ds=Ne)}}function ge(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function Yr(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Xn(l){if(ge(l)!==l)throw Error(n(188))}function Xr(l){var d=l.alternate;if(!d){if(d=ge(l),d===null)throw Error(n(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var $=E.alternate;if($===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===$.child){for($=E.child;$;){if($===p)return Xn(E),l;if($===y)return Xn(E),d;$=$.sibling}throw Error(n(188))}if(p.return!==y.return)p=E,y=$;else{for(var H=!1,Z=E.child;Z;){if(Z===p){H=!0,p=E,y=$;break}if(Z===y){H=!0,y=E,p=$;break}Z=Z.sibling}if(!H){for(Z=$.child;Z;){if(Z===p){H=!0,p=$,y=E;break}if(Z===y){H=!0,y=$,p=E;break}Z=Z.sibling}if(!H)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:d}function Ri(l){return l=Xr(l),l!==null?pi(l):null}function pi(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=pi(l);if(d!==null)return d;l=l.sibling}return null}var gi=e.unstable_scheduleCallback,fi=e.unstable_cancelCallback,ea=e.unstable_shouldYield,ta=e.unstable_requestPaint,ks=e.unstable_now,sa=e.unstable_getCurrentPriorityLevel,cr=e.unstable_ImmediatePriority,wr=e.unstable_UserBlockingPriority,Qs=e.unstable_NormalPriority,Qa=e.unstable_LowPriority,No=e.unstable_IdlePriority,na=null,dr=null;function Ya(l){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(na,l,void 0,(l.current.flags&128)===128)}catch(d){}}var Jn=Math.clz32?Math.clz32:Fd,ko=Math.log,Md=Math.LN2;function Fd(l){return l>>>=0,l===0?32:31-(ko(l)/Md|0)|0}var bl=64,_l=4194304;function ra(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function vi(l,d){var p=l.pendingLanes;if(p===0)return 0;var y=0,E=l.suspendedLanes,$=l.pingedLanes,H=p&268435455;if(H!==0){var Z=H&~E;Z!==0?y=ra(Z):($&=H,$!==0&&(y=ra($)))}else H=p&~E,H!==0?y=ra(H):$!==0&&(y=ra($));if(y===0)return 0;if(d!==0&&d!==y&&(d&E)===0&&(E=y&-y,$=d&-d,E>=$||E===16&&($&4194240)!==0))return d;if((y&4)!==0&&(y|=p&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=y;0<d;)p=31-Jn(d),E=1<<p,y|=l[p],d&=~E;return y}function ja(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xi(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,$=l.pendingLanes;0<$;){var H=31-Jn($),Z=1<<H,ae=E[H];ae===-1?((Z&p)===0||(Z&y)!==0)&&(E[H]=ja(Z,d)):ae<=d&&(l.expiredLanes|=Z),$&=~Z}}function Br(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Cc(){var l=bl;return bl<<=1,(bl&4194240)===0&&(bl=64),l}function wl(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function jl(l,d,p){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-Jn(d),l[d]=p}function Ys(l,d){var p=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<p;){var E=31-Jn(p),$=1<<E;d[E]=0,y[E]=-1,l[E]=-1,p&=~$}}function Sl(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-Jn(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}var _s=0;function Nl(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var ng,Bd,rg,ig,ag,Th=!1,Xa=[],jr=null,Sa=null,Na=null,kl=new Map,ia=new Map,Ja=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function og(l,d){switch(l){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":kl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(d.pointerId)}}function yi(l,d,p,y,E,$){return l===null||l.nativeEvent!==$?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:$,targetContainers:[E]},d!==null&&(d=zh(d),d!==null&&Bd(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function xy(l,d,p,y,E){switch(d){case"focusin":return jr=yi(jr,l,d,p,y,E),!0;case"dragenter":return Sa=yi(Sa,l,d,p,y,E),!0;case"mouseover":return Na=yi(Na,l,d,p,y,E),!0;case"pointerover":var $=E.pointerId;return kl.set($,yi(kl.get($)||null,l,d,p,y,E)),!0;case"gotpointercapture":return $=E.pointerId,ia.set($,yi(ia.get($)||null,l,d,p,y,E)),!0}return!1}function lg(l){var d=Pc(l.target);if(d!==null){var p=ge(d);if(p!==null){if(d=p.tag,d===13){if(d=Yr(p),d!==null){l.blockedOn=d,ag(l.priority,function(){rg(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Co(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=$d(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);ne=y,p.target.dispatchEvent(y),ne=null}else return d=zh(p),d!==null&&Bd(d),l.blockedOn=p,!1;d.shift()}return!0}function Tc(l,d,p){Co(l)&&p.delete(d)}function cg(){Th=!1,jr!==null&&Co(jr)&&(jr=null),Sa!==null&&Co(Sa)&&(Sa=null),Na!==null&&Co(Na)&&(Na=null),kl.forEach(Tc),ia.forEach(Tc)}function ka(l,d){l.blockedOn===d&&(l.blockedOn=null,Th||(Th=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cg)))}function Ca(l){function d(E){return ka(E,l)}if(0<Xa.length){ka(Xa[0],l);for(var p=1;p<Xa.length;p++){var y=Xa[p];y.blockedOn===l&&(y.blockedOn=null)}}for(jr!==null&&ka(jr,l),Sa!==null&&ka(Sa,l),Na!==null&&ka(Na,l),kl.forEach(d),ia.forEach(d),p=0;p<Ja.length;p++)y=Ja[p],y.blockedOn===l&&(y.blockedOn=null);for(;0<Ja.length&&(p=Ja[0],p.blockedOn===null);)lg(p),p.blockedOn===null&&Ja.shift()}var To=x.ReactCurrentBatchConfig,Cl=!0;function cn(l,d,p,y){var E=_s,$=To.transition;To.transition=null;try{_s=1,Ih(l,d,p,y)}finally{_s=E,To.transition=$}}function yy(l,d,p,y){var E=_s,$=To.transition;To.transition=null;try{_s=4,Ih(l,d,p,y)}finally{_s=E,To.transition=$}}function Ih(l,d,p,y){if(Cl){var E=$d(l,d,p,y);if(E===null)Ey(l,d,y,Ic,p),og(l,y);else if(xy(E,l,d,p,y))y.stopPropagation();else if(og(l,y),d&4&&-1<vy.indexOf(l)){for(;E!==null;){var $=zh(E);if($!==null&&ng($),$=$d(l,d,p,y),$===null&&Ey(l,d,y,Ic,p),$===E)break;E=$}E!==null&&y.stopPropagation()}else Ey(l,d,y,null,p)}}var Ic=null;function $d(l,d,p,y){if(Ic=null,l=Oe(y),l=Pc(l),l!==null)if(d=ge(l),d===null)l=null;else if(p=d.tag,p===13){if(l=Yr(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return Ic=l,null}function Eh(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sa()){case cr:return 1;case wr:return 4;case Qs:case Qa:return 16;case No:return 536870912;default:return 16}default:return 16}}var Li=null,Od=null,bi=null;function Ah(){if(bi)return bi;var l,d=Od,p=d.length,y,E="value"in Li?Li.value:Li.textContent,$=E.length;for(l=0;l<p&&d[l]===E[l];l++);var H=p-l;for(y=1;y<=H&&d[p-y]===E[$-y];y++);return bi=E.slice(l,1<y?1-y:void 0)}function Vd(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Za(){return!0}function Ph(){return!1}function Sr(l){function d(p,y,E,$,H){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=$,this.target=H,this.currentTarget=null;for(var Z in l)l.hasOwnProperty(Z)&&(p=l[Z],this[Z]=p?p($):$[Z]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?Za:Ph,this.isPropagationStopped=Ph,this}return re(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),d}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=Sr(Ta),eo=re({},Ta,{view:0,detail:0}),by=Sr(eo),zd,Io,Tl,Ec=re({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:to,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Tl&&(Tl&&l.type==="mousemove"?(zd=l.screenX-Tl.screenX,Io=l.screenY-Tl.screenY):Io=zd=0,Tl=l),zd)},movementY:function(l){return"movementY"in l?l.movementY:Io}}),Gd=Sr(Ec),Rh=re({},Ec,{dataTransfer:0}),dg=Sr(Rh),Hd=re({},eo,{relatedTarget:0}),Wd=Sr(Hd),ug=re({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),Eo=Sr(ug),hg=re({},Ta,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),mg=Sr(hg),pg=re({},Ta,{data:0}),Lh=Sr(pg),Kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fg(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=gg[l])?!!d[l]:!1}function to(){return fg}var f=re({},eo,{key:function(l){if(l.key){var d=Kd[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Vd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Jr[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:to,charCode:function(l){return l.type==="keypress"?Vd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Vd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),B=Sr(f),O=re({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q=Sr(O),fe=re({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:to}),Ce=Sr(fe),tt=re({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ws=Sr(tt),Zn=re({},Ec,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Cs=Sr(Zn),ur=[9,13,27,32],Vn=c&&"CompositionEvent"in window,aa=null;c&&"documentMode"in document&&(aa=document.documentMode);var Di=c&&"TextEvent"in window&&!aa,Ac=c&&(!Vn||aa&&8<aa&&11>=aa),qd=" ",v2=!1;function x2(l,d){switch(l){case"keyup":return ur.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y2(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Qd=!1;function U6(l,d){switch(l){case"compositionend":return y2(d);case"keypress":return d.which!==32?null:(v2=!0,qd);case"textInput":return l=d.data,l===qd&&v2?null:l;default:return null}}function z6(l,d){if(Qd)return l==="compositionend"||!Vn&&x2(l,d)?(l=Ah(),bi=Od=Li=null,Qd=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ac&&d.locale!=="ko"?null:d.data;default:return null}}var G6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b2(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!G6[l.type]:d==="textarea"}function _2(l,d,p,y){Mt(y),d=_g(d,"onChange"),0<d.length&&(p=new Ud("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Dh=null,Mh=null;function H6(l){$2(l,0)}function vg(l){var d=eu(l);if(ke(d))return l}function W6(l,d){if(l==="change")return d}var w2=!1;if(c){var _y;if(c){var wy="oninput"in document;if(!wy){var j2=document.createElement("div");j2.setAttribute("oninput","return;"),wy=typeof j2.oninput=="function"}_y=wy}else _y=!1;w2=_y&&(!document.documentMode||9<document.documentMode)}function S2(){Dh&&(Dh.detachEvent("onpropertychange",N2),Mh=Dh=null)}function N2(l){if(l.propertyName==="value"&&vg(Mh)){var d=[];_2(d,Mh,l,Oe(l)),cs(H6,d)}}function K6(l,d,p){l==="focusin"?(S2(),Dh=d,Mh=p,Dh.attachEvent("onpropertychange",N2)):l==="focusout"&&S2()}function q6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return vg(Mh)}function Q6(l,d){if(l==="click")return vg(d)}function Y6(l,d){if(l==="input"||l==="change")return vg(d)}function X6(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ia=typeof Object.is=="function"?Object.is:X6;function Fh(l,d){if(Ia(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!u.call(d,E)||!Ia(l[E],d[E]))return!1}return!0}function k2(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function C2(l,d){var p=k2(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=k2(p)}}function T2(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?T2(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function I2(){for(var l=window,d=Me();d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch(y){p=!1}if(p)l=d.contentWindow;else break;d=Me(l.document)}return d}function jy(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function J6(l){var d=I2(),p=l.focusedElem,y=l.selectionRange;if(d!==p&&p&&p.ownerDocument&&T2(p.ownerDocument.documentElement,p)){if(y!==null&&jy(p)){if(d=y.start,l=y.end,l===void 0&&(l=d),"selectionStart"in p)p.selectionStart=d,p.selectionEnd=Math.min(l,p.value.length);else if(l=(d=p.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var E=p.textContent.length,$=Math.min(y.start,E);y=y.end===void 0?$:Math.min(y.end,E),!l.extend&&$>y&&(E=y,y=$,$=E),E=C2(p,$);var H=C2(p,y);E&&H&&(l.rangeCount!==1||l.anchorNode!==E.node||l.anchorOffset!==E.offset||l.focusNode!==H.node||l.focusOffset!==H.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),l.removeAllRanges(),$>y?(l.addRange(d),l.extend(H.node,H.offset)):(d.setEnd(H.node,H.offset),l.addRange(d)))}}for(d=[],l=p;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<d.length;p++)l=d[p],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Z6=c&&"documentMode"in document&&11>=document.documentMode,Yd=null,Sy=null,Bh=null,Ny=!1;function E2(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ny||Yd==null||Yd!==Me(y)||(y=Yd,"selectionStart"in y&&jy(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Bh&&Fh(Bh,y)||(Bh=y,y=_g(Sy,"onSelect"),0<y.length&&(d=new Ud("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=Yd)))}function xg(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Xd={animationend:xg("Animation","AnimationEnd"),animationiteration:xg("Animation","AnimationIteration"),animationstart:xg("Animation","AnimationStart"),transitionend:xg("Transition","TransitionEnd")},ky={},A2={};c&&(A2=document.createElement("div").style,"AnimationEvent"in window||(delete Xd.animationend.animation,delete Xd.animationiteration.animation,delete Xd.animationstart.animation),"TransitionEvent"in window||delete Xd.transitionend.transition);function yg(l){if(ky[l])return ky[l];if(!Xd[l])return l;var d=Xd[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in A2)return ky[l]=d[p];return l}var P2=yg("animationend"),R2=yg("animationiteration"),L2=yg("animationstart"),D2=yg("transitionend"),M2=new Map,F2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Il(l,d){M2.set(l,d),a(d,[l])}for(var Cy=0;Cy<F2.length;Cy++){var Ty=F2[Cy],e8=Ty.toLowerCase(),t8=Ty[0].toUpperCase()+Ty.slice(1);Il(e8,"on"+t8)}Il(P2,"onAnimationEnd"),Il(R2,"onAnimationIteration"),Il(L2,"onAnimationStart"),Il("dblclick","onDoubleClick"),Il("focusin","onFocus"),Il("focusout","onBlur"),Il(D2,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s8=new Set("cancel close invalid load scroll toggle".split(" ").concat($h));function B2(l,d,p){var y=l.type||"unknown-event";l.currentTarget=p,ht(y,d,void 0,l),l.currentTarget=null}function $2(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var $=void 0;if(d)for(var H=y.length-1;0<=H;H--){var Z=y[H],ae=Z.instance,Ne=Z.currentTarget;if(Z=Z.listener,ae!==$&&E.isPropagationStopped())break e;B2(E,Z,Ne),$=ae}else for(H=0;H<y.length;H++){if(Z=y[H],ae=Z.instance,Ne=Z.currentTarget,Z=Z.listener,ae!==$&&E.isPropagationStopped())break e;B2(E,Z,Ne),$=ae}}}if(gn)throw l=ds,gn=!1,ds=null,l}function sn(l,d){var p=d[My];p===void 0&&(p=d[My]=new Set);var y=l+"__bubble";p.has(y)||(O2(d,l,2,!1),p.add(y))}function Iy(l,d,p){var y=0;d&&(y|=4),O2(p,l,y,d)}var bg="_reactListening"+Math.random().toString(36).slice(2);function Oh(l){if(!l[bg]){l[bg]=!0,r.forEach(function(p){p!=="selectionchange"&&(s8.has(p)||Iy(p,!1,l),Iy(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[bg]||(d[bg]=!0,Iy("selectionchange",!1,d))}}function O2(l,d,p,y){switch(Eh(d)){case 1:var E=cn;break;case 4:E=yy;break;default:E=Ih}p=E.bind(null,d,p,l),E=void 0,!On||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function Ey(l,d,p,y,E){var $=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var Z=y.stateNode.containerInfo;if(Z===E||Z.nodeType===8&&Z.parentNode===E)break;if(H===4)for(H=y.return;H!==null;){var ae=H.tag;if((ae===3||ae===4)&&(ae=H.stateNode.containerInfo,ae===E||ae.nodeType===8&&ae.parentNode===E))return;H=H.return}for(;Z!==null;){if(H=Pc(Z),H===null)return;if(ae=H.tag,ae===5||ae===6){y=$=H;continue e}Z=Z.parentNode}}y=y.return}cs(function(){var Ne=$,ze=Oe(p),Ke=[];e:{var Ue=M2.get(l);if(Ue!==void 0){var gt=Ud,bt=l;switch(l){case"keypress":if(Vd(p)===0)break e;case"keydown":case"keyup":gt=B;break;case"focusin":bt="focus",gt=Wd;break;case"focusout":bt="blur",gt=Wd;break;case"beforeblur":case"afterblur":gt=Wd;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=Gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=dg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Ce;break;case P2:case R2:case L2:gt=Eo;break;case D2:gt=Ws;break;case"scroll":gt=by;break;case"wheel":gt=Cs;break;case"copy":case"cut":case"paste":gt=mg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Q}var wt=(d&4)!==0,Ln=!wt&&l==="scroll",xe=wt?Ue!==null?Ue+"Capture":null:Ue;wt=[];for(var de=Ne,be;de!==null;){be=de;var Ye=be.stateNode;if(be.tag===5&&Ye!==null&&(be=Ye,xe!==null&&(Ye=bs(de,xe),Ye!=null&&wt.push(Vh(de,Ye,be)))),Ln)break;de=de.return}0<wt.length&&(Ue=new gt(Ue,bt,null,p,ze),Ke.push({event:Ue,listeners:wt}))}}if((d&7)===0){e:{if(Ue=l==="mouseover"||l==="pointerover",gt=l==="mouseout"||l==="pointerout",Ue&&p!==ne&&(bt=p.relatedTarget||p.fromElement)&&(Pc(bt)||bt[Ao]))break e;if((gt||Ue)&&(Ue=ze.window===ze?ze:(Ue=ze.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,gt?(bt=p.relatedTarget||p.toElement,gt=Ne,bt=bt?Pc(bt):null,bt!==null&&(Ln=ge(bt),bt!==Ln||bt.tag!==5&&bt.tag!==6)&&(bt=null)):(gt=null,bt=Ne),gt!==bt)){if(wt=Gd,Ye="onMouseLeave",xe="onMouseEnter",de="mouse",(l==="pointerout"||l==="pointerover")&&(wt=Q,Ye="onPointerLeave",xe="onPointerEnter",de="pointer"),Ln=gt==null?Ue:eu(gt),be=bt==null?Ue:eu(bt),Ue=new wt(Ye,de+"leave",gt,p,ze),Ue.target=Ln,Ue.relatedTarget=be,Ye=null,Pc(ze)===Ne&&(wt=new wt(xe,de+"enter",bt,p,ze),wt.target=be,wt.relatedTarget=Ln,Ye=wt),Ln=Ye,gt&&bt)t:{for(wt=gt,xe=bt,de=0,be=wt;be;be=Jd(be))de++;for(be=0,Ye=xe;Ye;Ye=Jd(Ye))be++;for(;0<de-be;)wt=Jd(wt),de--;for(;0<be-de;)xe=Jd(xe),be--;for(;de--;){if(wt===xe||xe!==null&&wt===xe.alternate)break t;wt=Jd(wt),xe=Jd(xe)}wt=null}else wt=null;gt!==null&&V2(Ke,Ue,gt,wt,!1),bt!==null&&Ln!==null&&V2(Ke,Ln,bt,wt,!0)}}e:{if(Ue=Ne?eu(Ne):window,gt=Ue.nodeName&&Ue.nodeName.toLowerCase(),gt==="select"||gt==="input"&&Ue.type==="file")var Ct=W6;else if(b2(Ue))if(w2)Ct=Y6;else{Ct=q6;var Bt=K6}else(gt=Ue.nodeName)&&gt.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(Ct=Q6);if(Ct&&(Ct=Ct(l,Ne))){_2(Ke,Ct,p,ze);break e}Bt&&Bt(l,Ue,Ne),l==="focusout"&&(Bt=Ue._wrapperState)&&Bt.controlled&&Ue.type==="number"&&je(Ue,"number",Ue.value)}switch(Bt=Ne?eu(Ne):window,l){case"focusin":(b2(Bt)||Bt.contentEditable==="true")&&(Yd=Bt,Sy=Ne,Bh=null);break;case"focusout":Bh=Sy=Yd=null;break;case"mousedown":Ny=!0;break;case"contextmenu":case"mouseup":case"dragend":Ny=!1,E2(Ke,p,ze);break;case"selectionchange":if(Z6)break;case"keydown":case"keyup":E2(Ke,p,ze)}var $t;if(Vn)e:{switch(l){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Qd?x2(l,p)&&(Kt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Kt="onCompositionStart");Kt&&(Ac&&p.locale!=="ko"&&(Qd||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Qd&&($t=Ah()):(Li=ze,Od="value"in Li?Li.value:Li.textContent,Qd=!0)),Bt=_g(Ne,Kt),0<Bt.length&&(Kt=new Lh(Kt,l,null,p,ze),Ke.push({event:Kt,listeners:Bt}),$t?Kt.data=$t:($t=y2(p),$t!==null&&(Kt.data=$t)))),($t=Di?U6(l,p):z6(l,p))&&(Ne=_g(Ne,"onBeforeInput"),0<Ne.length&&(ze=new Lh("onBeforeInput","beforeinput",null,p,ze),Ke.push({event:ze,listeners:Ne}),ze.data=$t))}$2(Ke,d)})}function Vh(l,d,p){return{instance:l,listener:d,currentTarget:p}}function _g(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,$=E.stateNode;E.tag===5&&$!==null&&(E=$,$=bs(l,p),$!=null&&y.unshift(Vh(l,$,E)),$=bs(l,d),$!=null&&y.push(Vh(l,$,E))),l=l.return}return y}function Jd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function V2(l,d,p,y,E){for(var $=d._reactName,H=[];p!==null&&p!==y;){var Z=p,ae=Z.alternate,Ne=Z.stateNode;if(ae!==null&&ae===y)break;Z.tag===5&&Ne!==null&&(Z=Ne,E?(ae=bs(p,$),ae!=null&&H.unshift(Vh(p,ae,Z))):E||(ae=bs(p,$),ae!=null&&H.push(Vh(p,ae,Z)))),p=p.return}H.length!==0&&l.push({event:d,listeners:H})}var n8=/\r\n?/g,r8=/\u0000|\uFFFD/g;function U2(l){return(typeof l=="string"?l:""+l).replace(n8,`
`).replace(r8,"")}function wg(l,d,p){if(d=U2(d),U2(l)!==d&&p)throw Error(n(425))}function jg(){}var Ay=null,Py=null;function Ry(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ly=typeof setTimeout=="function"?setTimeout:void 0,i8=typeof clearTimeout=="function"?clearTimeout:void 0,z2=typeof Promise=="function"?Promise:void 0,a8=typeof queueMicrotask=="function"?queueMicrotask:typeof z2!="undefined"?function(l){return z2.resolve(null).then(l).catch(o8)}:Ly;function o8(l){setTimeout(function(){throw l})}function Dy(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"){if(y===0){l.removeChild(E),Ca(d);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=E}while(p);Ca(d)}function El(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function G2(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}var Zd=Math.random().toString(36).slice(2),so="__reactFiber$"+Zd,Uh="__reactProps$"+Zd,Ao="__reactContainer$"+Zd,My="__reactEvents$"+Zd,l8="__reactListeners$"+Zd,c8="__reactHandles$"+Zd;function Pc(l){var d=l[so];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Ao]||p[so]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=G2(l);l!==null;){if(p=l[so])return p;l=G2(l)}return d}l=p,p=l.parentNode}return null}function zh(l){return l=l[so]||l[Ao],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function eu(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Sg(l){return l[Uh]||null}var Fy=[],tu=-1;function Al(l){return{current:l}}function nn(l){0>tu||(l.current=Fy[tu],Fy[tu]=null,tu--)}function Js(l,d){tu++,Fy[tu]=l.current,l.current=d}var Pl={},$r=Al(Pl),_i=Al(!1),Rc=Pl;function su(l,d){var p=l.type.contextTypes;if(!p)return Pl;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===d)return y.__reactInternalMemoizedMaskedChildContext;var E={},$;for($ in p)E[$]=d[$];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=E),E}function wi(l){return l=l.childContextTypes,l!=null}function Ng(){nn(_i),nn($r)}function H2(l,d,p){if($r.current!==Pl)throw Error(n(168));Js($r,d),Js(_i,p)}function W2(l,d,p){var y=l.stateNode;if(d=d.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var E in y)if(!(E in d))throw Error(n(108,Ae(l)||"Unknown",E));return re({},p,y)}function kg(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Pl,Rc=$r.current,Js($r,l),Js(_i,_i.current),!0}function K2(l,d,p){var y=l.stateNode;if(!y)throw Error(n(169));p?(l=W2(l,d,Rc),y.__reactInternalMemoizedMergedChildContext=l,nn(_i),nn($r),Js($r,l)):nn(_i),Js(_i,p)}var Po=null,Cg=!1,By=!1;function q2(l){Po===null?Po=[l]:Po.push(l)}function d8(l){Cg=!0,q2(l)}function Rl(){if(!By&&Po!==null){By=!0;var l=0,d=_s;try{var p=Po;for(_s=1;l<p.length;l++){var y=p[l];do y=y(!0);while(y!==null)}Po=null,Cg=!1}catch(E){throw Po!==null&&(Po=Po.slice(l+1)),gi(cr,Rl),E}finally{_s=d,By=!1}}return null}var nu=[],ru=0,Tg=null,Ig=0,oa=[],la=0,Lc=null,Ro=1,Lo="";function Dc(l,d){nu[ru++]=Ig,nu[ru++]=Tg,Tg=l,Ig=d}function Q2(l,d,p){oa[la++]=Ro,oa[la++]=Lo,oa[la++]=Lc,Lc=l;var y=Ro;l=Lo;var E=32-Jn(y)-1;y&=~(1<<E),p+=1;var $=32-Jn(d)+E;if(30<$){var H=E-E%5;$=(y&(1<<H)-1).toString(32),y>>=H,E-=H,Ro=1<<32-Jn(d)+E|p<<E|y,Lo=$+l}else Ro=1<<$|p<<E|y,Lo=l}function $y(l){l.return!==null&&(Dc(l,1),Q2(l,1,0))}function Oy(l){for(;l===Tg;)Tg=nu[--ru],nu[ru]=null,Ig=nu[--ru],nu[ru]=null;for(;l===Lc;)Lc=oa[--la],oa[la]=null,Lo=oa[--la],oa[la]=null,Ro=oa[--la],oa[la]=null}var Mi=null,Fi=null,dn=!1,Ea=null;function Y2(l,d){var p=ha(5,null,null,0);p.elementType="DELETED",p.stateNode=d,p.return=l,d=l.deletions,d===null?(l.deletions=[p],l.flags|=16):d.push(p)}function X2(l,d){switch(l.tag){case 5:var p=l.type;return d=d.nodeType!==1||p.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Mi=l,Fi=El(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Mi=l,Fi=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(p=Lc!==null?{id:Ro,overflow:Lo}:null,l.memoizedState={dehydrated:d,treeContext:p,retryLane:1073741824},p=ha(18,null,null,0),p.stateNode=d,p.return=l,l.child=p,Mi=l,Fi=null,!0):!1;default:return!1}}function Vy(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Uy(l){if(dn){var d=Fi;if(d){var p=d;if(!X2(l,d)){if(Vy(l))throw Error(n(418));d=El(p.nextSibling);var y=Mi;d&&X2(l,d)?Y2(y,p):(l.flags=l.flags&-4097|2,dn=!1,Mi=l)}}else{if(Vy(l))throw Error(n(418));l.flags=l.flags&-4097|2,dn=!1,Mi=l}}}function J2(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Mi=l}function Eg(l){if(l!==Mi)return!1;if(!dn)return J2(l),dn=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!Ry(l.type,l.memoizedProps)),d&&(d=Fi)){if(Vy(l))throw Z2(),Error(n(418));for(;d;)Y2(l,d),d=El(d.nextSibling)}if(J2(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"){if(d===0){Fi=El(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++}l=l.nextSibling}Fi=null}}else Fi=Mi?El(l.stateNode.nextSibling):null;return!0}function Z2(){for(var l=Fi;l;)l=El(l.nextSibling)}function iu(){Fi=Mi=null,dn=!1}function zy(l){Ea===null?Ea=[l]:Ea.push(l)}var u8=x.ReactCurrentBatchConfig;function Gh(l,d,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var y=p.stateNode}if(!y)throw Error(n(147,l));var E=y,$=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(H){var Z=E.refs;H===null?delete Z[$]:Z[$]=H},d._stringRef=$,d)}if(typeof l!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,l))}return l}function Ag(l,d){throw l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function eS(l){var d=l._init;return d(l._payload)}function tS(l){function d(xe,de){if(l){var be=xe.deletions;be===null?(xe.deletions=[de],xe.flags|=16):be.push(de)}}function p(xe,de){if(!l)return null;for(;de!==null;)d(xe,de),de=de.sibling;return null}function y(xe,de){for(xe=new Map;de!==null;)de.key!==null?xe.set(de.key,de):xe.set(de.index,de),de=de.sibling;return xe}function E(xe,de){return xe=Vl(xe,de),xe.index=0,xe.sibling=null,xe}function $(xe,de,be){return xe.index=be,l?(be=xe.alternate,be!==null?(be=be.index,be<de?(xe.flags|=2,de):be):(xe.flags|=2,de)):(xe.flags|=1048576,de)}function H(xe){return l&&xe.alternate===null&&(xe.flags|=2),xe}function Z(xe,de,be,Ye){return de===null||de.tag!==6?(de=L0(be,xe.mode,Ye),de.return=xe,de):(de=E(de,be),de.return=xe,de)}function ae(xe,de,be,Ye){var Ct=be.type;return Ct===j?ze(xe,de,be.props.children,Ye,be.key):de!==null&&(de.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===K&&eS(Ct)===de.type)?(Ye=E(de,be.props),Ye.ref=Gh(xe,de,be),Ye.return=xe,Ye):(Ye=tf(be.type,be.key,be.props,null,xe.mode,Ye),Ye.ref=Gh(xe,de,be),Ye.return=xe,Ye)}function Ne(xe,de,be,Ye){return de===null||de.tag!==4||de.stateNode.containerInfo!==be.containerInfo||de.stateNode.implementation!==be.implementation?(de=D0(be,xe.mode,Ye),de.return=xe,de):(de=E(de,be.children||[]),de.return=xe,de)}function ze(xe,de,be,Ye,Ct){return de===null||de.tag!==7?(de=zc(be,xe.mode,Ye,Ct),de.return=xe,de):(de=E(de,be),de.return=xe,de)}function Ke(xe,de,be){if(typeof de=="string"&&de!==""||typeof de=="number")return de=L0(""+de,xe.mode,be),de.return=xe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case w:return be=tf(de.type,de.key,de.props,null,xe.mode,be),be.ref=Gh(xe,null,de),be.return=xe,be;case L:return de=D0(de,xe.mode,be),de.return=xe,de;case K:var Ye=de._init;return Ke(xe,Ye(de._payload),be)}if(ue(de)||J(de))return de=zc(de,xe.mode,be,null),de.return=xe,de;Ag(xe,de)}return null}function Ue(xe,de,be,Ye){var Ct=de!==null?de.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return Ct!==null?null:Z(xe,de,""+be,Ye);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case w:return be.key===Ct?ae(xe,de,be,Ye):null;case L:return be.key===Ct?Ne(xe,de,be,Ye):null;case K:return Ct=be._init,Ue(xe,de,Ct(be._payload),Ye)}if(ue(be)||J(be))return Ct!==null?null:ze(xe,de,be,Ye,null);Ag(xe,be)}return null}function gt(xe,de,be,Ye,Ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return xe=xe.get(be)||null,Z(de,xe,""+Ye,Ct);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case w:return xe=xe.get(Ye.key===null?be:Ye.key)||null,ae(de,xe,Ye,Ct);case L:return xe=xe.get(Ye.key===null?be:Ye.key)||null,Ne(de,xe,Ye,Ct);case K:var Bt=Ye._init;return gt(xe,de,be,Bt(Ye._payload),Ct)}if(ue(Ye)||J(Ye))return xe=xe.get(be)||null,ze(de,xe,Ye,Ct,null);Ag(de,Ye)}return null}function bt(xe,de,be,Ye){for(var Ct=null,Bt=null,$t=de,Kt=de=0,pr=null;$t!==null&&Kt<be.length;Kt++){$t.index>Kt?(pr=$t,$t=null):pr=$t.sibling;var Ms=Ue(xe,$t,be[Kt],Ye);if(Ms===null){$t===null&&($t=pr);break}l&&$t&&Ms.alternate===null&&d(xe,$t),de=$(Ms,de,Kt),Bt===null?Ct=Ms:Bt.sibling=Ms,Bt=Ms,$t=pr}if(Kt===be.length)return p(xe,$t),dn&&Dc(xe,Kt),Ct;if($t===null){for(;Kt<be.length;Kt++)$t=Ke(xe,be[Kt],Ye),$t!==null&&(de=$($t,de,Kt),Bt===null?Ct=$t:Bt.sibling=$t,Bt=$t);return dn&&Dc(xe,Kt),Ct}for($t=y(xe,$t);Kt<be.length;Kt++)pr=gt($t,xe,Kt,be[Kt],Ye),pr!==null&&(l&&pr.alternate!==null&&$t.delete(pr.key===null?Kt:pr.key),de=$(pr,de,Kt),Bt===null?Ct=pr:Bt.sibling=pr,Bt=pr);return l&&$t.forEach(function(Ul){return d(xe,Ul)}),dn&&Dc(xe,Kt),Ct}function wt(xe,de,be,Ye){var Ct=J(be);if(typeof Ct!="function")throw Error(n(150));if(be=Ct.call(be),be==null)throw Error(n(151));for(var Bt=Ct=null,$t=de,Kt=de=0,pr=null,Ms=be.next();$t!==null&&!Ms.done;Kt++,Ms=be.next()){$t.index>Kt?(pr=$t,$t=null):pr=$t.sibling;var Ul=Ue(xe,$t,Ms.value,Ye);if(Ul===null){$t===null&&($t=pr);break}l&&$t&&Ul.alternate===null&&d(xe,$t),de=$(Ul,de,Kt),Bt===null?Ct=Ul:Bt.sibling=Ul,Bt=Ul,$t=pr}if(Ms.done)return p(xe,$t),dn&&Dc(xe,Kt),Ct;if($t===null){for(;!Ms.done;Kt++,Ms=be.next())Ms=Ke(xe,Ms.value,Ye),Ms!==null&&(de=$(Ms,de,Kt),Bt===null?Ct=Ms:Bt.sibling=Ms,Bt=Ms);return dn&&Dc(xe,Kt),Ct}for($t=y(xe,$t);!Ms.done;Kt++,Ms=be.next())Ms=gt($t,xe,Kt,Ms.value,Ye),Ms!==null&&(l&&Ms.alternate!==null&&$t.delete(Ms.key===null?Kt:Ms.key),de=$(Ms,de,Kt),Bt===null?Ct=Ms:Bt.sibling=Ms,Bt=Ms);return l&&$t.forEach(function(G8){return d(xe,G8)}),dn&&Dc(xe,Kt),Ct}function Ln(xe,de,be,Ye){if(typeof be=="object"&&be!==null&&be.type===j&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case w:e:{for(var Ct=be.key,Bt=de;Bt!==null;){if(Bt.key===Ct){if(Ct=be.type,Ct===j){if(Bt.tag===7){p(xe,Bt.sibling),de=E(Bt,be.props.children),de.return=xe,xe=de;break e}}else if(Bt.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===K&&eS(Ct)===Bt.type){p(xe,Bt.sibling),de=E(Bt,be.props),de.ref=Gh(xe,Bt,be),de.return=xe,xe=de;break e}p(xe,Bt);break}else d(xe,Bt);Bt=Bt.sibling}be.type===j?(de=zc(be.props.children,xe.mode,Ye,be.key),de.return=xe,xe=de):(Ye=tf(be.type,be.key,be.props,null,xe.mode,Ye),Ye.ref=Gh(xe,de,be),Ye.return=xe,xe=Ye)}return H(xe);case L:e:{for(Bt=be.key;de!==null;){if(de.key===Bt)if(de.tag===4&&de.stateNode.containerInfo===be.containerInfo&&de.stateNode.implementation===be.implementation){p(xe,de.sibling),de=E(de,be.children||[]),de.return=xe,xe=de;break e}else{p(xe,de);break}else d(xe,de);de=de.sibling}de=D0(be,xe.mode,Ye),de.return=xe,xe=de}return H(xe);case K:return Bt=be._init,Ln(xe,de,Bt(be._payload),Ye)}if(ue(be))return bt(xe,de,be,Ye);if(J(be))return wt(xe,de,be,Ye);Ag(xe,be)}return typeof be=="string"&&be!==""||typeof be=="number"?(be=""+be,de!==null&&de.tag===6?(p(xe,de.sibling),de=E(de,be),de.return=xe,xe=de):(p(xe,de),de=L0(be,xe.mode,Ye),de.return=xe,xe=de),H(xe)):p(xe,de)}return Ln}var au=tS(!0),sS=tS(!1),Pg=Al(null),Rg=null,ou=null,Gy=null;function Hy(){Gy=ou=Rg=null}function Wy(l){var d=Pg.current;nn(Pg),l._currentValue=d}function Ky(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function lu(l,d){Rg=l,Gy=ou=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(ji=!0),l.firstContext=null)}function ca(l){var d=l._currentValue;if(Gy!==l)if(l={context:l,memoizedValue:d,next:null},ou===null){if(Rg===null)throw Error(n(308));ou=l,Rg.dependencies={lanes:0,firstContext:l}}else ou=ou.next=l;return d}var Mc=null;function qy(l){Mc===null?Mc=[l]:Mc.push(l)}function nS(l,d,p,y){var E=d.interleaved;return E===null?(p.next=p,qy(d)):(p.next=E.next,E.next=p),d.interleaved=p,Do(l,y)}function Do(l,d){l.lanes|=d;var p=l.alternate;for(p!==null&&(p.lanes|=d),p=l,l=l.return;l!==null;)l.childLanes|=d,p=l.alternate,p!==null&&(p.childLanes|=d),p=l,l=l.return;return p.tag===3?p.stateNode:null}var Ll=!1;function Qy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rS(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Mo(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function Dl(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(As&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,Do(l,p)}return E=y.interleaved,E===null?(d.next=d,qy(y)):(d.next=E.next,E.next=d),y.interleaved=d,Do(l,p)}function Lg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194240)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,Sl(l,p)}}function iS(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,$=null;if(p=p.firstBaseUpdate,p!==null){do{var H={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};$===null?E=$=H:$=$.next=H,p=p.next}while(p!==null);$===null?E=$=d:$=$.next=d}else E=$=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:$,shared:y.shared,effects:y.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}function Dg(l,d,p,y){var E=l.updateQueue;Ll=!1;var $=E.firstBaseUpdate,H=E.lastBaseUpdate,Z=E.shared.pending;if(Z!==null){E.shared.pending=null;var ae=Z,Ne=ae.next;ae.next=null,H===null?$=Ne:H.next=Ne,H=ae;var ze=l.alternate;ze!==null&&(ze=ze.updateQueue,Z=ze.lastBaseUpdate,Z!==H&&(Z===null?ze.firstBaseUpdate=Ne:Z.next=Ne,ze.lastBaseUpdate=ae))}if($!==null){var Ke=E.baseState;H=0,ze=Ne=ae=null,Z=$;do{var Ue=Z.lane,gt=Z.eventTime;if((y&Ue)===Ue){ze!==null&&(ze=ze.next={eventTime:gt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var bt=l,wt=Z;switch(Ue=d,gt=p,wt.tag){case 1:if(bt=wt.payload,typeof bt=="function"){Ke=bt.call(gt,Ke,Ue);break e}Ke=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=wt.payload,Ue=typeof bt=="function"?bt.call(gt,Ke,Ue):bt,Ue==null)break e;Ke=re({},Ke,Ue);break e;case 2:Ll=!0}}Z.callback!==null&&Z.lane!==0&&(l.flags|=64,Ue=E.effects,Ue===null?E.effects=[Z]:Ue.push(Z))}else gt={eventTime:gt,lane:Ue,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},ze===null?(Ne=ze=gt,ae=Ke):ze=ze.next=gt,H|=Ue;if(Z=Z.next,Z===null){if(Z=E.shared.pending,Z===null)break;Ue=Z,Z=Ue.next,Ue.next=null,E.lastBaseUpdate=Ue,E.shared.pending=null}}while(!0);if(ze===null&&(ae=Ke),E.baseState=ae,E.firstBaseUpdate=Ne,E.lastBaseUpdate=ze,d=E.shared.interleaved,d!==null){E=d;do H|=E.lane,E=E.next;while(E!==d)}else $===null&&(E.shared.lanes=0);$c|=H,l.lanes=H,l.memoizedState=Ke}}function aS(l,d,p){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var y=l[d],E=y.callback;if(E!==null){if(y.callback=null,y=p,typeof E!="function")throw Error(n(191,E));E.call(y)}}}var Hh={},no=Al(Hh),Wh=Al(Hh),Kh=Al(Hh);function Fc(l){if(l===Hh)throw Error(n(174));return l}function Yy(l,d){switch(Js(Kh,d),Js(Wh,l),Js(no,Hh),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ve(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=ve(d,l)}nn(no),Js(no,d)}function cu(){nn(no),nn(Wh),nn(Kh)}function oS(l){Fc(Kh.current);var d=Fc(no.current),p=ve(d,l.type);d!==p&&(Js(Wh,l),Js(no,p))}function Xy(l){Wh.current===l&&(nn(no),nn(Wh))}var vn=Al(0);function Mg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Jy=[];function Zy(){for(var l=0;l<Jy.length;l++)Jy[l]._workInProgressVersionPrimary=null;Jy.length=0}var Fg=x.ReactCurrentDispatcher,e0=x.ReactCurrentBatchConfig,Bc=0,xn=null,er=null,hr=null,Bg=!1,qh=!1,Qh=0,h8=0;function Or(){throw Error(n(321))}function t0(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ia(l[p],d[p]))return!1;return!0}function s0(l,d,p,y,E,$){if(Bc=$,xn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Fg.current=l===null||l.memoizedState===null?f8:v8,l=p(y,E),qh){$=0;do{if(qh=!1,Qh=0,25<=$)throw Error(n(301));$+=1,hr=er=null,d.updateQueue=null,Fg.current=x8,l=p(y,E)}while(qh)}if(Fg.current=Vg,d=er!==null&&er.next!==null,Bc=0,hr=er=xn=null,Bg=!1,d)throw Error(n(300));return l}function n0(){var l=Qh!==0;return Qh=0,l}function ro(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?xn.memoizedState=hr=l:hr=hr.next=l,hr}function da(){if(er===null){var l=xn.alternate;l=l!==null?l.memoizedState:null}else l=er.next;var d=hr===null?xn.memoizedState:hr.next;if(d!==null)hr=d,er=l;else{if(l===null)throw Error(n(310));er=l,l={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},hr===null?xn.memoizedState=hr=l:hr=hr.next=l}return hr}function Yh(l,d){return typeof d=="function"?d(l):d}function r0(l){var d=da(),p=d.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var y=er,E=y.baseQueue,$=p.pending;if($!==null){if(E!==null){var H=E.next;E.next=$.next,$.next=H}y.baseQueue=E=$,p.pending=null}if(E!==null){$=E.next,y=y.baseState;var Z=H=null,ae=null,Ne=$;do{var ze=Ne.lane;if((Bc&ze)===ze)ae!==null&&(ae=ae.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),y=Ne.hasEagerState?Ne.eagerState:l(y,Ne.action);else{var Ke={lane:ze,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};ae===null?(Z=ae=Ke,H=y):ae=ae.next=Ke,xn.lanes|=ze,$c|=ze}Ne=Ne.next}while(Ne!==null&&Ne!==$);ae===null?H=y:ae.next=Z,Ia(y,d.memoizedState)||(ji=!0),d.memoizedState=y,d.baseState=H,d.baseQueue=ae,p.lastRenderedState=y}if(l=p.interleaved,l!==null){E=l;do $=E.lane,xn.lanes|=$,$c|=$,E=E.next;while(E!==l)}else E===null&&(p.lanes=0);return[d.memoizedState,p.dispatch]}function i0(l){var d=da(),p=d.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,$=d.memoizedState;if(E!==null){p.pending=null;var H=E=E.next;do $=l($,H.action),H=H.next;while(H!==E);Ia($,d.memoizedState)||(ji=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),p.lastRenderedState=$}return[$,y]}function lS(){}function cS(l,d){var p=xn,y=da(),E=d(),$=!Ia(y.memoizedState,E);if($&&(y.memoizedState=E,ji=!0),y=y.queue,a0(hS.bind(null,p,y,l),[l]),y.getSnapshot!==d||$||hr!==null&&hr.memoizedState.tag&1){if(p.flags|=2048,Xh(9,uS.bind(null,p,y,E,d),void 0,null),mr===null)throw Error(n(349));(Bc&30)!==0||dS(p,d,E)}return E}function dS(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=xn.updateQueue,d===null?(d={lastEffect:null,stores:null},xn.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function uS(l,d,p,y){d.value=p,d.getSnapshot=y,mS(d)&&pS(l)}function hS(l,d,p){return p(function(){mS(d)&&pS(l)})}function mS(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ia(l,p)}catch(y){return!0}}function pS(l){var d=Do(l,1);d!==null&&La(d,l,1,-1)}function gS(l){var d=ro();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yh,lastRenderedState:l},d.queue=l,l=l.dispatch=g8.bind(null,xn,l),[d.memoizedState,l]}function Xh(l,d,p,y){return l={tag:l,create:d,destroy:p,deps:y,next:null},d=xn.updateQueue,d===null?(d={lastEffect:null,stores:null},xn.updateQueue=d,d.lastEffect=l.next=l):(p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l)),l}function fS(){return da().memoizedState}function $g(l,d,p,y){var E=ro();xn.flags|=l,E.memoizedState=Xh(1|d,p,void 0,y===void 0?null:y)}function Og(l,d,p,y){var E=da();y=y===void 0?null:y;var $=void 0;if(er!==null){var H=er.memoizedState;if($=H.destroy,y!==null&&t0(y,H.deps)){E.memoizedState=Xh(d,p,$,y);return}}xn.flags|=l,E.memoizedState=Xh(1|d,p,$,y)}function vS(l,d){return $g(8390656,8,l,d)}function a0(l,d){return Og(2048,8,l,d)}function xS(l,d){return Og(4,2,l,d)}function yS(l,d){return Og(4,4,l,d)}function bS(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function _S(l,d,p){return p=p!=null?p.concat([l]):null,Og(4,4,bS.bind(null,d,l),p)}function o0(){}function wS(l,d){var p=da();d=d===void 0?null:d;var y=p.memoizedState;return y!==null&&d!==null&&t0(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function jS(l,d){var p=da();d=d===void 0?null:d;var y=p.memoizedState;return y!==null&&d!==null&&t0(d,y[1])?y[0]:(l=l(),p.memoizedState=[l,d],l)}function SS(l,d,p){return(Bc&21)===0?(l.baseState&&(l.baseState=!1,ji=!0),l.memoizedState=p):(Ia(p,d)||(p=Cc(),xn.lanes|=p,$c|=p,l.baseState=!0),d)}function m8(l,d){var p=_s;_s=p!==0&&4>p?p:4,l(!0);var y=e0.transition;e0.transition={};try{l(!1),d()}finally{_s=p,e0.transition=y}}function NS(){return da().memoizedState}function p8(l,d,p){var y=$l(l);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},kS(l))CS(d,p);else if(p=nS(l,d,p,y),p!==null){var E=ei();La(p,l,y,E),TS(p,d,y)}}function g8(l,d,p){var y=$l(l),E={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(kS(l))CS(d,E);else{var $=l.alternate;if(l.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var H=d.lastRenderedState,Z=$(H,p);if(E.hasEagerState=!0,E.eagerState=Z,Ia(Z,H)){var ae=d.interleaved;ae===null?(E.next=E,qy(d)):(E.next=ae.next,ae.next=E),d.interleaved=E;return}}catch(Ne){}finally{}p=nS(l,d,E,y),p!==null&&(E=ei(),La(p,l,y,E),TS(p,d,y))}}function kS(l){var d=l.alternate;return l===xn||d!==null&&d===xn}function CS(l,d){qh=Bg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function TS(l,d,p){if((p&4194240)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,Sl(l,p)}}var Vg={readContext:ca,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},f8={readContext:ca,useCallback:function(l,d){return ro().memoizedState=[l,d===void 0?null:d],l},useContext:ca,useEffect:vS,useImperativeHandle:function(l,d,p){return p=p!=null?p.concat([l]):null,$g(4194308,4,bS.bind(null,d,l),p)},useLayoutEffect:function(l,d){return $g(4194308,4,l,d)},useInsertionEffect:function(l,d){return $g(4,2,l,d)},useMemo:function(l,d){var p=ro();return d=d===void 0?null:d,l=l(),p.memoizedState=[l,d],l},useReducer:function(l,d,p){var y=ro();return d=p!==void 0?p(d):d,y.memoizedState=y.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},y.queue=l,l=l.dispatch=p8.bind(null,xn,l),[y.memoizedState,l]},useRef:function(l){var d=ro();return l={current:l},d.memoizedState=l},useState:gS,useDebugValue:o0,useDeferredValue:function(l){return ro().memoizedState=l},useTransition:function(){var l=gS(!1),d=l[0];return l=m8.bind(null,l[1]),ro().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,p){var y=xn,E=ro();if(dn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=d(),mr===null)throw Error(n(349));(Bc&30)!==0||dS(y,d,p)}E.memoizedState=p;var $={value:p,getSnapshot:d};return E.queue=$,vS(hS.bind(null,y,$,l),[l]),y.flags|=2048,Xh(9,uS.bind(null,y,$,p,d),void 0,null),p},useId:function(){var l=ro(),d=mr.identifierPrefix;if(dn){var p=Lo,y=Ro;p=(y&~(1<<32-Jn(y)-1)).toString(32)+p,d=":"+d+"R"+p,p=Qh++,0<p&&(d+="H"+p.toString(32)),d+=":"}else p=h8++,d=":"+d+"r"+p.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},v8={readContext:ca,useCallback:wS,useContext:ca,useEffect:a0,useImperativeHandle:_S,useInsertionEffect:xS,useLayoutEffect:yS,useMemo:jS,useReducer:r0,useRef:fS,useState:function(){return r0(Yh)},useDebugValue:o0,useDeferredValue:function(l){var d=da();return SS(d,er.memoizedState,l)},useTransition:function(){var l=r0(Yh)[0],d=da().memoizedState;return[l,d]},useMutableSource:lS,useSyncExternalStore:cS,useId:NS,unstable_isNewReconciler:!1},x8={readContext:ca,useCallback:wS,useContext:ca,useEffect:a0,useImperativeHandle:_S,useInsertionEffect:xS,useLayoutEffect:yS,useMemo:jS,useReducer:i0,useRef:fS,useState:function(){return i0(Yh)},useDebugValue:o0,useDeferredValue:function(l){var d=da();return er===null?d.memoizedState=l:SS(d,er.memoizedState,l)},useTransition:function(){var l=i0(Yh)[0],d=da().memoizedState;return[l,d]},useMutableSource:lS,useSyncExternalStore:cS,useId:NS,unstable_isNewReconciler:!1};function Aa(l,d){if(l&&l.defaultProps){d=re({},d),l=l.defaultProps;for(var p in l)d[p]===void 0&&(d[p]=l[p]);return d}return d}function l0(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:re({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var Ug={isMounted:function(l){return(l=l._reactInternals)?ge(l)===l:!1},enqueueSetState:function(l,d,p){l=l._reactInternals;var y=ei(),E=$l(l),$=Mo(y,E);$.payload=d,p!=null&&($.callback=p),d=Dl(l,$,E),d!==null&&(La(d,l,E,y),Lg(d,l,E))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=ei(),E=$l(l),$=Mo(y,E);$.tag=1,$.payload=d,p!=null&&($.callback=p),d=Dl(l,$,E),d!==null&&(La(d,l,E,y),Lg(d,l,E))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=ei(),y=$l(l),E=Mo(p,y);E.tag=2,d!=null&&(E.callback=d),d=Dl(l,E,y),d!==null&&(La(d,l,y,p),Lg(d,l,y))}};function IS(l,d,p,y,E,$,H){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,$,H):d.prototype&&d.prototype.isPureReactComponent?!Fh(p,y)||!Fh(E,$):!0}function ES(l,d,p){var y=!1,E=Pl,$=d.contextType;return typeof $=="object"&&$!==null?$=ca($):(E=wi(d)?Rc:$r.current,y=d.contextTypes,$=(y=y!=null)?su(l,E):Pl),d=new d(p,$),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ug,l.stateNode=d,d._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=$),d}function AS(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&Ug.enqueueReplaceState(d,d.state,null)}function c0(l,d,p,y){var E=l.stateNode;E.props=p,E.state=l.memoizedState,E.refs={},Qy(l);var $=d.contextType;typeof $=="object"&&$!==null?E.context=ca($):($=wi(d)?Rc:$r.current,E.context=su(l,$)),E.state=l.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(l0(l,d,$,p),E.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Ug.enqueueReplaceState(E,E.state,null),Dg(l,p,E,y),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}function du(l,d){try{var p="",y=d;do p+=ce(y),y=y.return;while(y);var E=p}catch($){E=`
Error generating stack: `+$.message+`
`+$.stack}return{value:l,source:d,stack:E,digest:null}}function d0(l,d,p){return{value:l,source:null,stack:p!=null?p:null,digest:d!=null?d:null}}function u0(l,d){try{console.error(d.value)}catch(p){setTimeout(function(){throw p})}}var y8=typeof WeakMap=="function"?WeakMap:Map;function PS(l,d,p){p=Mo(-1,p),p.tag=3,p.payload={element:null};var y=d.value;return p.callback=function(){Qg||(Qg=!0,k0=y),u0(l,d)},p}function RS(l,d,p){p=Mo(-1,p),p.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var E=d.value;p.payload=function(){return y(E)},p.callback=function(){u0(l,d)}}var $=l.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(p.callback=function(){u0(l,d),typeof y!="function"&&(Fl===null?Fl=new Set([this]):Fl.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})}),p}function LS(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new y8;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(E.add(p),l=R8.bind(null,l,d,p),d.then(l,l))}function DS(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function MS(l,d,p,y,E){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(d=Mo(-1,1),d.tag=2,Dl(p,d,1))),p.lanes|=1),l):(l.flags|=65536,l.lanes=E,l)}var b8=x.ReactCurrentOwner,ji=!1;function Zr(l,d,p,y){d.child=l===null?sS(d,null,p,y):au(d,l.child,p,y)}function FS(l,d,p,y,E){p=p.render;var $=d.ref;return lu(d,E),y=s0(l,d,p,y,$,E),p=n0(),l!==null&&!ji?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~E,Fo(l,d,E)):(dn&&p&&$y(d),d.flags|=1,Zr(l,d,y,E),d.child)}function BS(l,d,p,y,E){if(l===null){var $=p.type;return typeof $=="function"&&!R0($)&&$.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(d.tag=15,d.type=$,$S(l,d,$,y,E)):(l=tf(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if($=l.child,(l.lanes&E)===0){var H=$.memoizedProps;if(p=p.compare,p=p!==null?p:Fh,p(H,y)&&l.ref===d.ref)return Fo(l,d,E)}return d.flags|=1,l=Vl($,y),l.ref=d.ref,l.return=d,d.child=l}function $S(l,d,p,y,E){if(l!==null){var $=l.memoizedProps;if(Fh($,y)&&l.ref===d.ref)if(ji=!1,d.pendingProps=y=$,(l.lanes&E)!==0)(l.flags&131072)!==0&&(ji=!0);else return d.lanes=l.lanes,Fo(l,d,E)}return h0(l,d,p,y,E)}function OS(l,d,p){var y=d.pendingProps,E=y.children,$=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Js(hu,Bi),Bi|=p;else{if((p&1073741824)===0)return l=$!==null?$.baseLanes|p:p,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,Js(hu,Bi),Bi|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=$!==null?$.baseLanes:p,Js(hu,Bi),Bi|=y}else $!==null?(y=$.baseLanes|p,d.memoizedState=null):y=p,Js(hu,Bi),Bi|=y;return Zr(l,d,E,p),d.child}function VS(l,d){var p=d.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(d.flags|=512,d.flags|=2097152)}function h0(l,d,p,y,E){var $=wi(p)?Rc:$r.current;return $=su(d,$),lu(d,E),p=s0(l,d,p,y,$,E),y=n0(),l!==null&&!ji?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~E,Fo(l,d,E)):(dn&&y&&$y(d),d.flags|=1,Zr(l,d,p,E),d.child)}function US(l,d,p,y,E){if(wi(p)){var $=!0;kg(d)}else $=!1;if(lu(d,E),d.stateNode===null)Gg(l,d),ES(d,p,y),c0(d,p,y,E),y=!0;else if(l===null){var H=d.stateNode,Z=d.memoizedProps;H.props=Z;var ae=H.context,Ne=p.contextType;typeof Ne=="object"&&Ne!==null?Ne=ca(Ne):(Ne=wi(p)?Rc:$r.current,Ne=su(d,Ne));var ze=p.getDerivedStateFromProps,Ke=typeof ze=="function"||typeof H.getSnapshotBeforeUpdate=="function";Ke||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Z!==y||ae!==Ne)&&AS(d,H,y,Ne),Ll=!1;var Ue=d.memoizedState;H.state=Ue,Dg(d,y,H,E),ae=d.memoizedState,Z!==y||Ue!==ae||_i.current||Ll?(typeof ze=="function"&&(l0(d,p,ze,y),ae=d.memoizedState),(Z=Ll||IS(d,p,Z,y,Ue,ae,Ne))?(Ke||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(d.flags|=4194308)):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ae),H.props=y,H.state=ae,H.context=Ne,y=Z):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{H=d.stateNode,rS(l,d),Z=d.memoizedProps,Ne=d.type===d.elementType?Z:Aa(d.type,Z),H.props=Ne,Ke=d.pendingProps,Ue=H.context,ae=p.contextType,typeof ae=="object"&&ae!==null?ae=ca(ae):(ae=wi(p)?Rc:$r.current,ae=su(d,ae));var gt=p.getDerivedStateFromProps;(ze=typeof gt=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Z!==Ke||Ue!==ae)&&AS(d,H,y,ae),Ll=!1,Ue=d.memoizedState,H.state=Ue,Dg(d,y,H,E);var bt=d.memoizedState;Z!==Ke||Ue!==bt||_i.current||Ll?(typeof gt=="function"&&(l0(d,p,gt,y),bt=d.memoizedState),(Ne=Ll||IS(d,p,Ne,y,Ue,bt,ae)||!1)?(ze||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(y,bt,ae),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(y,bt,ae)),typeof H.componentDidUpdate=="function"&&(d.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof H.componentDidUpdate!="function"||Z===l.memoizedProps&&Ue===l.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&Ue===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=bt),H.props=y,H.state=bt,H.context=ae,y=Ne):(typeof H.componentDidUpdate!="function"||Z===l.memoizedProps&&Ue===l.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&Ue===l.memoizedState||(d.flags|=1024),y=!1)}return m0(l,d,p,y,$,E)}function m0(l,d,p,y,E,$){VS(l,d);var H=(d.flags&128)!==0;if(!y&&!H)return E&&K2(d,p,!1),Fo(l,d,$);y=d.stateNode,b8.current=d;var Z=H&&typeof p.getDerivedStateFromError!="function"?null:y.render();return d.flags|=1,l!==null&&H?(d.child=au(d,l.child,null,$),d.child=au(d,null,Z,$)):Zr(l,d,Z,$),d.memoizedState=y.state,E&&K2(d,p,!0),d.child}function zS(l){var d=l.stateNode;d.pendingContext?H2(l,d.pendingContext,d.pendingContext!==d.context):d.context&&H2(l,d.context,!1),Yy(l,d.containerInfo)}function GS(l,d,p,y,E){return iu(),zy(E),d.flags|=256,Zr(l,d,p,y),d.child}var p0={dehydrated:null,treeContext:null,retryLane:0};function g0(l){return{baseLanes:l,cachePool:null,transitions:null}}function HS(l,d,p){var y=d.pendingProps,E=vn.current,$=!1,H=(d.flags&128)!==0,Z;if((Z=H)||(Z=l!==null&&l.memoizedState===null?!1:(E&2)!==0),Z?($=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),Js(vn,E&1),l===null)return Uy(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(H=y.children,l=y.fallback,$?(y=d.mode,$=d.child,H={mode:"hidden",children:H},(y&1)===0&&$!==null?($.childLanes=0,$.pendingProps=H):$=sf(H,y,0,null),l=zc(l,y,p,null),$.return=d,l.return=d,$.sibling=l,d.child=$,d.child.memoizedState=g0(p),d.memoizedState=p0,l):f0(d,H));if(E=l.memoizedState,E!==null&&(Z=E.dehydrated,Z!==null))return _8(l,d,H,y,Z,E,p);if($){$=y.fallback,H=d.mode,E=l.child,Z=E.sibling;var ae={mode:"hidden",children:y.children};return(H&1)===0&&d.child!==E?(y=d.child,y.childLanes=0,y.pendingProps=ae,d.deletions=null):(y=Vl(E,ae),y.subtreeFlags=E.subtreeFlags&14680064),Z!==null?$=Vl(Z,$):($=zc($,H,p,null),$.flags|=2),$.return=d,y.return=d,y.sibling=$,d.child=y,y=$,$=d.child,H=l.child.memoizedState,H=H===null?g0(p):{baseLanes:H.baseLanes|p,cachePool:null,transitions:H.transitions},$.memoizedState=H,$.childLanes=l.childLanes&~p,d.memoizedState=p0,y}return $=l.child,l=$.sibling,y=Vl($,{mode:"visible",children:y.children}),(d.mode&1)===0&&(y.lanes=p),y.return=d,y.sibling=null,l!==null&&(p=d.deletions,p===null?(d.deletions=[l],d.flags|=16):p.push(l)),d.child=y,d.memoizedState=null,y}function f0(l,d){return d=sf({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function zg(l,d,p,y){return y!==null&&zy(y),au(d,l.child,null,p),l=f0(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function _8(l,d,p,y,E,$,H){if(p)return d.flags&256?(d.flags&=-257,y=d0(Error(n(422))),zg(l,d,H,y)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):($=y.fallback,E=d.mode,y=sf({mode:"visible",children:y.children},E,0,null),$=zc($,E,H,null),$.flags|=2,y.return=d,$.return=d,y.sibling=$,d.child=y,(d.mode&1)!==0&&au(d,l.child,null,H),d.child.memoizedState=g0(H),d.memoizedState=p0,$);if((d.mode&1)===0)return zg(l,d,H,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var Z=y.dgst;return y=Z,$=Error(n(419)),y=d0($,y,void 0),zg(l,d,H,y)}if(Z=(H&l.childLanes)!==0,ji||Z){if(y=mr,y!==null){switch(H&-H){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|H))!==0?0:E,E!==0&&E!==$.retryLane&&($.retryLane=E,Do(l,E),La(y,l,E,-1))}return P0(),y=d0(Error(n(421))),zg(l,d,H,y)}return E.data==="$?"?(d.flags|=128,d.child=l.child,d=L8.bind(null,l),E._reactRetry=d,null):(l=$.treeContext,Fi=El(E.nextSibling),Mi=d,dn=!0,Ea=null,l!==null&&(oa[la++]=Ro,oa[la++]=Lo,oa[la++]=Lc,Ro=l.id,Lo=l.overflow,Lc=d),d=f0(d,y.children),d.flags|=4096,d)}function WS(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),Ky(l.return,d,p)}function v0(l,d,p,y,E){var $=l.memoizedState;$===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=y,$.tail=p,$.tailMode=E)}function KS(l,d,p){var y=d.pendingProps,E=y.revealOrder,$=y.tail;if(Zr(l,d,y.children,p),y=vn.current,(y&2)!==0)y=y&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&WS(l,p,d);else if(l.tag===19)WS(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Js(vn,y),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Mg(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),v0(d,!1,E,p,$);break;case"backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Mg(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}v0(d,!0,p,null,$);break;case"together":v0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Gg(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function Fo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),$c|=d.lanes,(p&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,p=Vl(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Vl(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function w8(l,d,p){switch(d.tag){case 3:zS(d),iu();break;case 5:oS(d);break;case 1:wi(d.type)&&kg(d);break;case 4:Yy(d,d.stateNode.containerInfo);break;case 10:var y=d.type._context,E=d.memoizedProps.value;Js(Pg,y._currentValue),y._currentValue=E;break;case 13:if(y=d.memoizedState,y!==null)return y.dehydrated!==null?(Js(vn,vn.current&1),d.flags|=128,null):(p&d.child.childLanes)!==0?HS(l,d,p):(Js(vn,vn.current&1),l=Fo(l,d,p),l!==null?l.sibling:null);Js(vn,vn.current&1);break;case 19:if(y=(p&d.childLanes)!==0,(l.flags&128)!==0){if(y)return KS(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Js(vn,vn.current),y)break;return null;case 22:case 23:return d.lanes=0,OS(l,d,p)}return Fo(l,d,p)}var qS,x0,QS,YS;qS=function(l,d){for(var p=d.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},x0=function(){},QS=function(l,d,p,y){var E=l.memoizedProps;if(E!==y){l=d.stateNode,Fc(no.current);var $=null;switch(p){case"input":E=Re(l,E),y=Re(l,y),$=[];break;case"select":E=re({},E,{value:void 0}),y=re({},y,{value:void 0}),$=[];break;case"textarea":E=De(l,E),y=De(l,y),$=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=jg)}ts(p,y);var H;p=null;for(Ne in E)if(!y.hasOwnProperty(Ne)&&E.hasOwnProperty(Ne)&&E[Ne]!=null)if(Ne==="style"){var Z=E[Ne];for(H in Z)Z.hasOwnProperty(H)&&(p||(p={}),p[H]="")}else Ne!=="dangerouslySetInnerHTML"&&Ne!=="children"&&Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&Ne!=="autoFocus"&&(i.hasOwnProperty(Ne)?$||($=[]):($=$||[]).push(Ne,null));for(Ne in y){var ae=y[Ne];if(Z=E!=null?E[Ne]:void 0,y.hasOwnProperty(Ne)&&ae!==Z&&(ae!=null||Z!=null))if(Ne==="style")if(Z){for(H in Z)!Z.hasOwnProperty(H)||ae&&ae.hasOwnProperty(H)||(p||(p={}),p[H]="");for(H in ae)ae.hasOwnProperty(H)&&Z[H]!==ae[H]&&(p||(p={}),p[H]=ae[H])}else p||($||($=[]),$.push(Ne,p)),p=ae;else Ne==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,Z=Z?Z.__html:void 0,ae!=null&&Z!==ae&&($=$||[]).push(Ne,ae)):Ne==="children"?typeof ae!="string"&&typeof ae!="number"||($=$||[]).push(Ne,""+ae):Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ne)?(ae!=null&&Ne==="onScroll"&&sn("scroll",l),$||Z===ae||($=[])):($=$||[]).push(Ne,ae))}p&&($=$||[]).push("style",p);var Ne=$;(d.updateQueue=Ne)&&(d.flags|=4)}},YS=function(l,d,p,y){p!==y&&(d.flags|=4)};function Jh(l,d){if(!dn)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Vr(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function j8(l,d,p){var y=d.pendingProps;switch(Oy(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(d),null;case 1:return wi(d.type)&&Ng(),Vr(d),null;case 3:return y=d.stateNode,cu(),nn(_i),nn($r),Zy(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(Eg(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ea!==null&&(I0(Ea),Ea=null))),x0(l,d),Vr(d),null;case 5:Xy(d);var E=Fc(Kh.current);if(p=d.type,l!==null&&d.stateNode!=null)QS(l,d,p,y,E),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!y){if(d.stateNode===null)throw Error(n(166));return Vr(d),null}if(l=Fc(no.current),Eg(d)){y=d.stateNode,p=d.type;var $=d.memoizedProps;switch(y[so]=d,y[Uh]=$,l=(d.mode&1)!==0,p){case"dialog":sn("cancel",y),sn("close",y);break;case"iframe":case"object":case"embed":sn("load",y);break;case"video":case"audio":for(E=0;E<$h.length;E++)sn($h[E],y);break;case"source":sn("error",y);break;case"img":case"image":case"link":sn("error",y),sn("load",y);break;case"details":sn("toggle",y);break;case"input":Ee(y,$),sn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!$.multiple},sn("invalid",y);break;case"textarea":it(y,$),sn("invalid",y)}ts(p,$),E=null;for(var H in $)if($.hasOwnProperty(H)){var Z=$[H];H==="children"?typeof Z=="string"?y.textContent!==Z&&($.suppressHydrationWarning!==!0&&wg(y.textContent,Z,l),E=["children",Z]):typeof Z=="number"&&y.textContent!==""+Z&&($.suppressHydrationWarning!==!0&&wg(y.textContent,Z,l),E=["children",""+Z]):i.hasOwnProperty(H)&&Z!=null&&H==="onScroll"&&sn("scroll",y)}switch(p){case"input":ye(y),Be(y,$,!0);break;case"textarea":ye(y),ie(y);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(y.onclick=jg)}y=E,d.updateQueue=y,y!==null&&(d.flags|=4)}else{H=E.nodeType===9?E:E.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=he(p)),l==="http://www.w3.org/1999/xhtml"?p==="script"?(l=H.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=H.createElement(p,{is:y.is}):(l=H.createElement(p),p==="select"&&(H=l,y.multiple?H.multiple=!0:y.size&&(H.size=y.size))):l=H.createElementNS(l,p),l[so]=d,l[Uh]=y,qS(l,d,!1,!1),d.stateNode=l;e:{switch(H=pt(p,y),p){case"dialog":sn("cancel",l),sn("close",l),E=y;break;case"iframe":case"object":case"embed":sn("load",l),E=y;break;case"video":case"audio":for(E=0;E<$h.length;E++)sn($h[E],l);E=y;break;case"source":sn("error",l),E=y;break;case"img":case"image":case"link":sn("error",l),sn("load",l),E=y;break;case"details":sn("toggle",l),E=y;break;case"input":Ee(l,y),E=Re(l,y),sn("invalid",l);break;case"option":E=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},E=re({},y,{value:void 0}),sn("invalid",l);break;case"textarea":it(l,y),E=De(l,y),sn("invalid",l);break;default:E=y}ts(p,E),Z=E;for($ in Z)if(Z.hasOwnProperty($)){var ae=Z[$];$==="style"?ot(l,ae):$==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&St(l,ae)):$==="children"?typeof ae=="string"?(p!=="textarea"||ae!=="")&&at(l,ae):typeof ae=="number"&&at(l,""+ae):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?ae!=null&&$==="onScroll"&&sn("scroll",l):ae!=null&&N(l,$,ae,H))}switch(p){case"input":ye(l),Be(l,y,!1);break;case"textarea":ye(l),ie(l);break;case"option":y.value!=null&&l.setAttribute("value",""+ee(y.value));break;case"select":l.multiple=!!y.multiple,$=y.value,$!=null?Pe(l,!!y.multiple,$,!1):y.defaultValue!=null&&Pe(l,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(l.onclick=jg)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Vr(d),null;case 6:if(l&&d.stateNode!=null)YS(l,d,l.memoizedProps,y);else{if(typeof y!="string"&&d.stateNode===null)throw Error(n(166));if(p=Fc(Kh.current),Fc(no.current),Eg(d)){if(y=d.stateNode,p=d.memoizedProps,y[so]=d,($=y.nodeValue!==p)&&(l=Mi,l!==null))switch(l.tag){case 3:wg(y.nodeValue,p,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&wg(y.nodeValue,p,(l.mode&1)!==0)}$&&(d.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[so]=d,d.stateNode=y}return Vr(d),null;case 13:if(nn(vn),y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(dn&&Fi!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Z2(),iu(),d.flags|=98560,$=!1;else if($=Eg(d),y!==null&&y.dehydrated!==null){if(l===null){if(!$)throw Error(n(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(n(317));$[so]=d}else iu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Vr(d),$=!1}else Ea!==null&&(I0(Ea),Ea=null),$=!0;if(!$)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=p,d):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(vn.current&1)!==0?tr===0&&(tr=3):P0())),d.updateQueue!==null&&(d.flags|=4),Vr(d),null);case 4:return cu(),x0(l,d),l===null&&Oh(d.stateNode.containerInfo),Vr(d),null;case 10:return Wy(d.type._context),Vr(d),null;case 17:return wi(d.type)&&Ng(),Vr(d),null;case 19:if(nn(vn),$=d.memoizedState,$===null)return Vr(d),null;if(y=(d.flags&128)!==0,H=$.rendering,H===null)if(y)Jh($,!1);else{if(tr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(H=Mg(l),H!==null){for(d.flags|=128,Jh($,!1),y=H.updateQueue,y!==null&&(d.updateQueue=y,d.flags|=4),d.subtreeFlags=0,y=p,p=d.child;p!==null;)$=p,l=y,$.flags&=14680066,H=$.alternate,H===null?($.childLanes=0,$.lanes=l,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=H.childLanes,$.lanes=H.lanes,$.child=H.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=H.memoizedProps,$.memoizedState=H.memoizedState,$.updateQueue=H.updateQueue,$.type=H.type,l=H.dependencies,$.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),p=p.sibling;return Js(vn,vn.current&1|2),d.child}l=l.sibling}$.tail!==null&&ks()>mu&&(d.flags|=128,y=!0,Jh($,!1),d.lanes=4194304)}else{if(!y)if(l=Mg(H),l!==null){if(d.flags|=128,y=!0,p=l.updateQueue,p!==null&&(d.updateQueue=p,d.flags|=4),Jh($,!0),$.tail===null&&$.tailMode==="hidden"&&!H.alternate&&!dn)return Vr(d),null}else 2*ks()-$.renderingStartTime>mu&&p!==1073741824&&(d.flags|=128,y=!0,Jh($,!1),d.lanes=4194304);$.isBackwards?(H.sibling=d.child,d.child=H):(p=$.last,p!==null?p.sibling=H:d.child=H,$.last=H)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=ks(),d.sibling=null,p=vn.current,Js(vn,y?p&1|2:p&1),d):(Vr(d),null);case 22:case 23:return A0(),y=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(d.flags|=8192),y&&(d.mode&1)!==0?(Bi&1073741824)!==0&&(Vr(d),d.subtreeFlags&6&&(d.flags|=8192)):Vr(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function S8(l,d){switch(Oy(d),d.tag){case 1:return wi(d.type)&&Ng(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return cu(),nn(_i),nn($r),Zy(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return Xy(d),null;case 13:if(nn(vn),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));iu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return nn(vn),null;case 4:return cu(),null;case 10:return Wy(d.type._context),null;case 22:case 23:return A0(),null;case 24:return null;default:return null}}var Hg=!1,Ur=!1,N8=typeof WeakSet=="function"?WeakSet:Set,vt=null;function uu(l,d){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Nn(l,d,y)}else p.current=null}function y0(l,d,p){try{p()}catch(y){Nn(l,d,y)}}var XS=!1;function k8(l,d){if(Ay=Cl,l=I2(),jy(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,$=y.focusNode;y=y.focusOffset;try{p.nodeType,$.nodeType}catch(Ye){p=null;break e}var H=0,Z=-1,ae=-1,Ne=0,ze=0,Ke=l,Ue=null;t:for(;;){for(var gt;Ke!==p||E!==0&&Ke.nodeType!==3||(Z=H+E),Ke!==$||y!==0&&Ke.nodeType!==3||(ae=H+y),Ke.nodeType===3&&(H+=Ke.nodeValue.length),(gt=Ke.firstChild)!==null;)Ue=Ke,Ke=gt;for(;;){if(Ke===l)break t;if(Ue===p&&++Ne===E&&(Z=H),Ue===$&&++ze===y&&(ae=H),(gt=Ke.nextSibling)!==null)break;Ke=Ue,Ue=Ke.parentNode}Ke=gt}p=Z===-1||ae===-1?null:{start:Z,end:ae}}else p=null}p=p||{start:0,end:0}}else p=null;for(Py={focusedElem:l,selectionRange:p},Cl=!1,vt=d;vt!==null;)if(d=vt,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,vt=l;else for(;vt!==null;){d=vt;try{var bt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(bt!==null){var wt=bt.memoizedProps,Ln=bt.memoizedState,xe=d.stateNode,de=xe.getSnapshotBeforeUpdate(d.elementType===d.type?wt:Aa(d.type,wt),Ln);xe.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var be=d.stateNode.containerInfo;be.nodeType===1?be.textContent="":be.nodeType===9&&be.documentElement&&be.removeChild(be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ye){Nn(d,d.return,Ye)}if(l=d.sibling,l!==null){l.return=d.return,vt=l;break}vt=d.return}return bt=XS,XS=!1,bt}function Zh(l,d,p){var y=d.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&l)===l){var $=E.destroy;E.destroy=void 0,$!==void 0&&y0(d,p,$)}E=E.next}while(E!==y)}}function Wg(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&l)===l){var y=p.create;p.destroy=y()}p=p.next}while(p!==d)}}function b0(l){var d=l.ref;if(d!==null){var p=l.stateNode;switch(l.tag){case 5:l=p;break;default:l=p}typeof d=="function"?d(l):d.current=l}}function JS(l){var d=l.alternate;d!==null&&(l.alternate=null,JS(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[so],delete d[Uh],delete d[My],delete d[l8],delete d[c8])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function ZS(l){return l.tag===5||l.tag===3||l.tag===4}function eN(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ZS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function _0(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.nodeType===8?p.parentNode.insertBefore(l,d):p.insertBefore(l,d):(p.nodeType===8?(d=p.parentNode,d.insertBefore(l,p)):(d=p,d.appendChild(l)),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=jg));else if(y!==4&&(l=l.child,l!==null))for(_0(l,d,p),l=l.sibling;l!==null;)_0(l,d,p),l=l.sibling}function w0(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(w0(l,d,p),l=l.sibling;l!==null;)w0(l,d,p),l=l.sibling}var Nr=null,Pa=!1;function Ml(l,d,p){for(p=p.child;p!==null;)tN(l,d,p),p=p.sibling}function tN(l,d,p){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(na,p)}catch(Z){}switch(p.tag){case 5:Ur||uu(p,d);case 6:var y=Nr,E=Pa;Nr=null,Ml(l,d,p),Nr=y,Pa=E,Nr!==null&&(Pa?(l=Nr,p=p.stateNode,l.nodeType===8?l.parentNode.removeChild(p):l.removeChild(p)):Nr.removeChild(p.stateNode));break;case 18:Nr!==null&&(Pa?(l=Nr,p=p.stateNode,l.nodeType===8?Dy(l.parentNode,p):l.nodeType===1&&Dy(l,p),Ca(l)):Dy(Nr,p.stateNode));break;case 4:y=Nr,E=Pa,Nr=p.stateNode.containerInfo,Pa=!0,Ml(l,d,p),Nr=y,Pa=E;break;case 0:case 11:case 14:case 15:if(!Ur&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var $=E,H=$.destroy;$=$.tag,H!==void 0&&(($&2)!==0||($&4)!==0)&&y0(p,d,H),E=E.next}while(E!==y)}Ml(l,d,p);break;case 1:if(!Ur&&(uu(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(Z){Nn(p,d,Z)}Ml(l,d,p);break;case 21:Ml(l,d,p);break;case 22:p.mode&1?(Ur=(y=Ur)||p.memoizedState!==null,Ml(l,d,p),Ur=y):Ml(l,d,p);break;default:Ml(l,d,p)}}function sN(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new N8),d.forEach(function(y){var E=D8.bind(null,l,y);p.has(y)||(p.add(y),y.then(E,E))})}}function Ra(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];try{var $=l,H=d,Z=H;e:for(;Z!==null;){switch(Z.tag){case 5:Nr=Z.stateNode,Pa=!1;break e;case 3:Nr=Z.stateNode.containerInfo,Pa=!0;break e;case 4:Nr=Z.stateNode.containerInfo,Pa=!0;break e}Z=Z.return}if(Nr===null)throw Error(n(160));tN($,H,E),Nr=null,Pa=!1;var ae=E.alternate;ae!==null&&(ae.return=null),E.return=null}catch(Ne){Nn(E,d,Ne)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)nN(d,l),d=d.sibling}function nN(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Ra(d,l),io(l),y&4){try{Zh(3,l,l.return),Wg(3,l)}catch(wt){Nn(l,l.return,wt)}try{Zh(5,l,l.return)}catch(wt){Nn(l,l.return,wt)}}break;case 1:Ra(d,l),io(l),y&512&&p!==null&&uu(p,p.return);break;case 5:if(Ra(d,l),io(l),y&512&&p!==null&&uu(p,p.return),l.flags&32){var E=l.stateNode;try{at(E,"")}catch(wt){Nn(l,l.return,wt)}}if(y&4&&(E=l.stateNode,E!=null)){var $=l.memoizedProps,H=p!==null?p.memoizedProps:$,Z=l.type,ae=l.updateQueue;if(l.updateQueue=null,ae!==null)try{Z==="input"&&$.type==="radio"&&$.name!=null&&Le(E,$),pt(Z,H);var Ne=pt(Z,$);for(H=0;H<ae.length;H+=2){var ze=ae[H],Ke=ae[H+1];ze==="style"?ot(E,Ke):ze==="dangerouslySetInnerHTML"?St(E,Ke):ze==="children"?at(E,Ke):N(E,ze,Ke,Ne)}switch(Z){case"input":Fe(E,$);break;case"textarea":yt(E,$);break;case"select":var Ue=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!$.multiple;var gt=$.value;gt!=null?Pe(E,!!$.multiple,gt,!1):Ue!==!!$.multiple&&($.defaultValue!=null?Pe(E,!!$.multiple,$.defaultValue,!0):Pe(E,!!$.multiple,$.multiple?[]:"",!1))}E[Uh]=$}catch(wt){Nn(l,l.return,wt)}}break;case 6:if(Ra(d,l),io(l),y&4){if(l.stateNode===null)throw Error(n(162));E=l.stateNode,$=l.memoizedProps;try{E.nodeValue=$}catch(wt){Nn(l,l.return,wt)}}break;case 3:if(Ra(d,l),io(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Ca(d.containerInfo)}catch(wt){Nn(l,l.return,wt)}break;case 4:Ra(d,l),io(l);break;case 13:Ra(d,l),io(l),E=l.child,E.flags&8192&&($=E.memoizedState!==null,E.stateNode.isHidden=$,!$||E.alternate!==null&&E.alternate.memoizedState!==null||(N0=ks())),y&4&&sN(l);break;case 22:if(ze=p!==null&&p.memoizedState!==null,l.mode&1?(Ur=(Ne=Ur)||ze,Ra(d,l),Ur=Ne):Ra(d,l),io(l),y&8192){if(Ne=l.memoizedState!==null,(l.stateNode.isHidden=Ne)&&!ze&&(l.mode&1)!==0)for(vt=l,ze=l.child;ze!==null;){for(Ke=vt=ze;vt!==null;){switch(Ue=vt,gt=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:Zh(4,Ue,Ue.return);break;case 1:uu(Ue,Ue.return);var bt=Ue.stateNode;if(typeof bt.componentWillUnmount=="function"){y=Ue,p=Ue.return;try{d=y,bt.props=d.memoizedProps,bt.state=d.memoizedState,bt.componentWillUnmount()}catch(wt){Nn(y,p,wt)}}break;case 5:uu(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){aN(Ke);continue}}gt!==null?(gt.return=Ue,vt=gt):aN(Ke)}ze=ze.sibling}e:for(ze=null,Ke=l;;){if(Ke.tag===5){if(ze===null){ze=Ke;try{E=Ke.stateNode,Ne?($=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(Z=Ke.stateNode,ae=Ke.memoizedProps.style,H=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,Z.style.display=_t("display",H))}catch(wt){Nn(l,l.return,wt)}}}else if(Ke.tag===6){if(ze===null)try{Ke.stateNode.nodeValue=Ne?"":Ke.memoizedProps}catch(wt){Nn(l,l.return,wt)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===l)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===l)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===l)break e;ze===Ke&&(ze=null),Ke=Ke.return}ze===Ke&&(ze=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:Ra(d,l),io(l),y&4&&sN(l);break;case 21:break;default:Ra(d,l),io(l)}}function io(l){var d=l.flags;if(d&2){try{e:{for(var p=l.return;p!==null;){if(ZS(p)){var y=p;break e}p=p.return}throw Error(n(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(at(E,""),y.flags&=-33);var $=eN(l);w0(l,$,E);break;case 3:case 4:var H=y.stateNode.containerInfo,Z=eN(l);_0(l,Z,H);break;default:throw Error(n(161))}}catch(ae){Nn(l,l.return,ae)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function C8(l,d,p){vt=l,rN(l)}function rN(l,d,p){for(var y=(l.mode&1)!==0;vt!==null;){var E=vt,$=E.child;if(E.tag===22&&y){var H=E.memoizedState!==null||Hg;if(!H){var Z=E.alternate,ae=Z!==null&&Z.memoizedState!==null||Ur;Z=Hg;var Ne=Ur;if(Hg=H,(Ur=ae)&&!Ne)for(vt=E;vt!==null;)H=vt,ae=H.child,H.tag===22&&H.memoizedState!==null?oN(E):ae!==null?(ae.return=H,vt=ae):oN(E);for(;$!==null;)vt=$,rN($),$=$.sibling;vt=E,Hg=Z,Ur=Ne}iN(l)}else(E.subtreeFlags&8772)!==0&&$!==null?($.return=E,vt=$):iN(l)}}function iN(l){for(;vt!==null;){var d=vt;if((d.flags&8772)!==0){var p=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Ur||Wg(5,d);break;case 1:var y=d.stateNode;if(d.flags&4&&!Ur)if(p===null)y.componentDidMount();else{var E=d.elementType===d.type?p.memoizedProps:Aa(d.type,p.memoizedProps);y.componentDidUpdate(E,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&aS(d,$,y);break;case 3:var H=d.updateQueue;if(H!==null){if(p=null,d.child!==null)switch(d.child.tag){case 5:p=d.child.stateNode;break;case 1:p=d.child.stateNode}aS(d,H,p)}break;case 5:var Z=d.stateNode;if(p===null&&d.flags&4){p=Z;var ae=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&p.focus();break;case"img":ae.src&&(p.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ne=d.alternate;if(Ne!==null){var ze=Ne.memoizedState;if(ze!==null){var Ke=ze.dehydrated;Ke!==null&&Ca(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ur||d.flags&512&&b0(d)}catch(Ue){Nn(d,d.return,Ue)}}if(d===l){vt=null;break}if(p=d.sibling,p!==null){p.return=d.return,vt=p;break}vt=d.return}}function aN(l){for(;vt!==null;){var d=vt;if(d===l){vt=null;break}var p=d.sibling;if(p!==null){p.return=d.return,vt=p;break}vt=d.return}}function oN(l){for(;vt!==null;){var d=vt;try{switch(d.tag){case 0:case 11:case 15:var p=d.return;try{Wg(4,d)}catch(ae){Nn(d,p,ae)}break;case 1:var y=d.stateNode;if(typeof y.componentDidMount=="function"){var E=d.return;try{y.componentDidMount()}catch(ae){Nn(d,E,ae)}}var $=d.return;try{b0(d)}catch(ae){Nn(d,$,ae)}break;case 5:var H=d.return;try{b0(d)}catch(ae){Nn(d,H,ae)}}}catch(ae){Nn(d,d.return,ae)}if(d===l){vt=null;break}var Z=d.sibling;if(Z!==null){Z.return=d.return,vt=Z;break}vt=d.return}}var T8=Math.ceil,Kg=x.ReactCurrentDispatcher,j0=x.ReactCurrentOwner,ua=x.ReactCurrentBatchConfig,As=0,mr=null,Un=null,kr=0,Bi=0,hu=Al(0),tr=0,em=null,$c=0,qg=0,S0=0,tm=null,Si=null,N0=0,mu=1/0,Bo=null,Qg=!1,k0=null,Fl=null,Yg=!1,Bl=null,Xg=0,sm=0,C0=null,Jg=-1,Zg=0;function ei(){return(As&6)!==0?ks():Jg!==-1?Jg:Jg=ks()}function $l(l){return(l.mode&1)===0?1:(As&2)!==0&&kr!==0?kr&-kr:u8.transition!==null?(Zg===0&&(Zg=Cc()),Zg):(l=_s,l!==0||(l=window.event,l=l===void 0?16:Eh(l.type)),l)}function La(l,d,p,y){if(50<sm)throw sm=0,C0=null,Error(n(185));jl(l,p,y),((As&2)===0||l!==mr)&&(l===mr&&((As&2)===0&&(qg|=p),tr===4&&Ol(l,kr)),Ni(l,y),p===1&&As===0&&(d.mode&1)===0&&(mu=ks()+500,Cg&&Rl()))}function Ni(l,d){var p=l.callbackNode;xi(l,d);var y=vi(l,l===mr?kr:0);if(y===0)p!==null&&fi(p),l.callbackNode=null,l.callbackPriority=0;else if(d=y&-y,l.callbackPriority!==d){if(p!=null&&fi(p),d===1)l.tag===0?d8(cN.bind(null,l)):q2(cN.bind(null,l)),a8(function(){(As&6)===0&&Rl()}),p=null;else{switch(Nl(y)){case 1:p=cr;break;case 4:p=wr;break;case 16:p=Qs;break;case 536870912:p=No;break;default:p=Qs}p=vN(p,lN.bind(null,l))}l.callbackPriority=d,l.callbackNode=p}}function lN(l,d){if(Jg=-1,Zg=0,(As&6)!==0)throw Error(n(327));var p=l.callbackNode;if(pu()&&l.callbackNode!==p)return null;var y=vi(l,l===mr?kr:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||d)d=ef(l,y);else{d=y;var E=As;As|=2;var $=uN();(mr!==l||kr!==d)&&(Bo=null,mu=ks()+500,Vc(l,d));do try{A8();break}catch(Z){dN(l,Z)}while(!0);Hy(),Kg.current=$,As=E,Un!==null?d=0:(mr=null,kr=0,d=tr)}if(d!==0){if(d===2&&(E=Br(l),E!==0&&(y=E,d=T0(l,E))),d===1)throw p=em,Vc(l,0),Ol(l,y),Ni(l,ks()),p;if(d===6)Ol(l,y);else{if(E=l.current.alternate,(y&30)===0&&!I8(E)&&(d=ef(l,y),d===2&&($=Br(l),$!==0&&(y=$,d=T0(l,$))),d===1))throw p=em,Vc(l,0),Ol(l,y),Ni(l,ks()),p;switch(l.finishedWork=E,l.finishedLanes=y,d){case 0:case 1:throw Error(n(345));case 2:Uc(l,Si,Bo);break;case 3:if(Ol(l,y),(y&130023424)===y&&(d=N0+500-ks(),10<d)){if(vi(l,0)!==0)break;if(E=l.suspendedLanes,(E&y)!==y){ei(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=Ly(Uc.bind(null,l,Si,Bo),d);break}Uc(l,Si,Bo);break;case 4:if(Ol(l,y),(y&4194240)===y)break;for(d=l.eventTimes,E=-1;0<y;){var H=31-Jn(y);$=1<<H,H=d[H],H>E&&(E=H),y&=~$}if(y=E,y=ks()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*T8(y/1960))-y,10<y){l.timeoutHandle=Ly(Uc.bind(null,l,Si,Bo),y);break}Uc(l,Si,Bo);break;case 5:Uc(l,Si,Bo);break;default:throw Error(n(329))}}}return Ni(l,ks()),l.callbackNode===p?lN.bind(null,l):null}function T0(l,d){var p=tm;return l.current.memoizedState.isDehydrated&&(Vc(l,d).flags|=256),l=ef(l,d),l!==2&&(d=Si,Si=p,d!==null&&I0(d)),l}function I0(l){Si===null?Si=l:Si.push.apply(Si,l)}function I8(l){for(var d=l;;){if(d.flags&16384){var p=d.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var E=p[y],$=E.getSnapshot;E=E.value;try{if(!Ia($(),E))return!1}catch(H){return!1}}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ol(l,d){for(d&=~S0,d&=~qg,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var p=31-Jn(d),y=1<<p;l[p]=-1,d&=~y}}function cN(l){if((As&6)!==0)throw Error(n(327));pu();var d=vi(l,0);if((d&1)===0)return Ni(l,ks()),null;var p=ef(l,d);if(l.tag!==0&&p===2){var y=Br(l);y!==0&&(d=y,p=T0(l,y))}if(p===1)throw p=em,Vc(l,0),Ol(l,d),Ni(l,ks()),p;if(p===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,Uc(l,Si,Bo),Ni(l,ks()),null}function E0(l,d){var p=As;As|=1;try{return l(d)}finally{As=p,As===0&&(mu=ks()+500,Cg&&Rl())}}function Oc(l){Bl!==null&&Bl.tag===0&&(As&6)===0&&pu();var d=As;As|=1;var p=ua.transition,y=_s;try{if(ua.transition=null,_s=1,l)return l()}finally{_s=y,ua.transition=p,As=d,(As&6)===0&&Rl()}}function A0(){Bi=hu.current,nn(hu)}function Vc(l,d){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==-1&&(l.timeoutHandle=-1,i8(p)),Un!==null)for(p=Un.return;p!==null;){var y=p;switch(Oy(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ng();break;case 3:cu(),nn(_i),nn($r),Zy();break;case 5:Xy(y);break;case 4:cu();break;case 13:nn(vn);break;case 19:nn(vn);break;case 10:Wy(y.type._context);break;case 22:case 23:A0()}p=p.return}if(mr=l,Un=l=Vl(l.current,null),kr=Bi=d,tr=0,em=null,S0=qg=$c=0,Si=tm=null,Mc!==null){for(d=0;d<Mc.length;d++)if(p=Mc[d],y=p.interleaved,y!==null){p.interleaved=null;var E=y.next,$=p.pending;if($!==null){var H=$.next;$.next=E,y.next=H}p.pending=y}Mc=null}return l}function dN(l,d){do{var p=Un;try{if(Hy(),Fg.current=Vg,Bg){for(var y=xn.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}Bg=!1}if(Bc=0,hr=er=xn=null,qh=!1,Qh=0,j0.current=null,p===null||p.return===null){tr=1,em=d,Un=null;break}e:{var $=l,H=p.return,Z=p,ae=d;if(d=kr,Z.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Ne=ae,ze=Z,Ke=ze.tag;if((ze.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var Ue=ze.alternate;Ue?(ze.updateQueue=Ue.updateQueue,ze.memoizedState=Ue.memoizedState,ze.lanes=Ue.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var gt=DS(H);if(gt!==null){gt.flags&=-257,MS(gt,H,Z,$,d),gt.mode&1&&LS($,Ne,d),d=gt,ae=Ne;var bt=d.updateQueue;if(bt===null){var wt=new Set;wt.add(ae),d.updateQueue=wt}else bt.add(ae);break e}else{if((d&1)===0){LS($,Ne,d),P0();break e}ae=Error(n(426))}}else if(dn&&Z.mode&1){var Ln=DS(H);if(Ln!==null){(Ln.flags&65536)===0&&(Ln.flags|=256),MS(Ln,H,Z,$,d),zy(du(ae,Z));break e}}$=ae=du(ae,Z),tr!==4&&(tr=2),tm===null?tm=[$]:tm.push($),$=H;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var xe=PS($,ae,d);iS($,xe);break e;case 1:Z=ae;var de=$.type,be=$.stateNode;if(($.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||be!==null&&typeof be.componentDidCatch=="function"&&(Fl===null||!Fl.has(be)))){$.flags|=65536,d&=-d,$.lanes|=d;var Ye=RS($,Z,d);iS($,Ye);break e}}$=$.return}while($!==null)}mN(p)}catch(Ct){d=Ct,Un===p&&p!==null&&(Un=p=p.return);continue}break}while(!0)}function uN(){var l=Kg.current;return Kg.current=Vg,l===null?Vg:l}function P0(){(tr===0||tr===3||tr===2)&&(tr=4),mr===null||($c&268435455)===0&&(qg&268435455)===0||Ol(mr,kr)}function ef(l,d){var p=As;As|=2;var y=uN();(mr!==l||kr!==d)&&(Bo=null,Vc(l,d));do try{E8();break}catch(E){dN(l,E)}while(!0);if(Hy(),As=p,Kg.current=y,Un!==null)throw Error(n(261));return mr=null,kr=0,tr}function E8(){for(;Un!==null;)hN(Un)}function A8(){for(;Un!==null&&!ea();)hN(Un)}function hN(l){var d=fN(l.alternate,l,Bi);l.memoizedProps=l.pendingProps,d===null?mN(l):Un=d,j0.current=null}function mN(l){var d=l;do{var p=d.alternate;if(l=d.return,(d.flags&32768)===0){if(p=j8(p,d,Bi),p!==null){Un=p;return}}else{if(p=S8(p,d),p!==null){p.flags&=32767,Un=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{tr=6,Un=null;return}}if(d=d.sibling,d!==null){Un=d;return}Un=d=l}while(d!==null);tr===0&&(tr=5)}function Uc(l,d,p){var y=_s,E=ua.transition;try{ua.transition=null,_s=1,P8(l,d,p,y)}finally{ua.transition=E,_s=y}return null}function P8(l,d,p,y){do pu();while(Bl!==null);if((As&6)!==0)throw Error(n(327));p=l.finishedWork;var E=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var $=p.lanes|p.childLanes;if(Ys(l,$),l===mr&&(Un=mr=null,kr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Yg||(Yg=!0,vN(Qs,function(){return pu(),null})),$=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||$){$=ua.transition,ua.transition=null;var H=_s;_s=1;var Z=As;As|=4,j0.current=null,k8(l,p),nN(p,l),J6(Py),Cl=!!Ay,Py=Ay=null,l.current=p,C8(p),ta(),As=Z,_s=H,ua.transition=$}else l.current=p;if(Yg&&(Yg=!1,Bl=l,Xg=E),$=l.pendingLanes,$===0&&(Fl=null),Ya(p.stateNode),Ni(l,ks()),d!==null)for(y=l.onRecoverableError,p=0;p<d.length;p++)E=d[p],y(E.value,{componentStack:E.stack,digest:E.digest});if(Qg)throw Qg=!1,l=k0,k0=null,l;return(Xg&1)!==0&&l.tag!==0&&pu(),$=l.pendingLanes,($&1)!==0?l===C0?sm++:(sm=0,C0=l):sm=0,Rl(),null}function pu(){if(Bl!==null){var l=Nl(Xg),d=ua.transition,p=_s;try{if(ua.transition=null,_s=16>l?16:l,Bl===null)var y=!1;else{if(l=Bl,Bl=null,Xg=0,(As&6)!==0)throw Error(n(331));var E=As;for(As|=4,vt=l.current;vt!==null;){var $=vt,H=$.child;if((vt.flags&16)!==0){var Z=$.deletions;if(Z!==null){for(var ae=0;ae<Z.length;ae++){var Ne=Z[ae];for(vt=Ne;vt!==null;){var ze=vt;switch(ze.tag){case 0:case 11:case 15:Zh(8,ze,$)}var Ke=ze.child;if(Ke!==null)Ke.return=ze,vt=Ke;else for(;vt!==null;){ze=vt;var Ue=ze.sibling,gt=ze.return;if(JS(ze),ze===Ne){vt=null;break}if(Ue!==null){Ue.return=gt,vt=Ue;break}vt=gt}}}var bt=$.alternate;if(bt!==null){var wt=bt.child;if(wt!==null){bt.child=null;do{var Ln=wt.sibling;wt.sibling=null,wt=Ln}while(wt!==null)}}vt=$}}if(($.subtreeFlags&2064)!==0&&H!==null)H.return=$,vt=H;else e:for(;vt!==null;){if($=vt,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:Zh(9,$,$.return)}var xe=$.sibling;if(xe!==null){xe.return=$.return,vt=xe;break e}vt=$.return}}var de=l.current;for(vt=de;vt!==null;){H=vt;var be=H.child;if((H.subtreeFlags&2064)!==0&&be!==null)be.return=H,vt=be;else e:for(H=de;vt!==null;){if(Z=vt,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:Wg(9,Z)}}catch(Ct){Nn(Z,Z.return,Ct)}if(Z===H){vt=null;break e}var Ye=Z.sibling;if(Ye!==null){Ye.return=Z.return,vt=Ye;break e}vt=Z.return}}if(As=E,Rl(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(na,l)}catch(Ct){}y=!0}return y}finally{_s=p,ua.transition=d}}return!1}function pN(l,d,p){d=du(p,d),d=PS(l,d,1),l=Dl(l,d,1),d=ei(),l!==null&&(jl(l,1,d),Ni(l,d))}function Nn(l,d,p){if(l.tag===3)pN(l,l,p);else for(;d!==null;){if(d.tag===3){pN(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Fl===null||!Fl.has(y))){l=du(p,l),l=RS(d,l,1),d=Dl(d,l,1),l=ei(),d!==null&&(jl(d,1,l),Ni(d,l));break}}d=d.return}}function R8(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),d=ei(),l.pingedLanes|=l.suspendedLanes&p,mr===l&&(kr&p)===p&&(tr===4||tr===3&&(kr&130023424)===kr&&500>ks()-N0?Vc(l,0):S0|=p),Ni(l,d)}function gN(l,d){d===0&&((l.mode&1)===0?d=1:(d=_l,_l<<=1,(_l&130023424)===0&&(_l=4194304)));var p=ei();l=Do(l,d),l!==null&&(jl(l,d,p),Ni(l,p))}function L8(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),gN(l,p)}function D8(l,d){var p=0;switch(l.tag){case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(d),gN(l,p)}var fN;fN=function(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps||_i.current)ji=!0;else{if((l.lanes&p)===0&&(d.flags&128)===0)return ji=!1,w8(l,d,p);ji=(l.flags&131072)!==0}else ji=!1,dn&&(d.flags&1048576)!==0&&Q2(d,Ig,d.index);switch(d.lanes=0,d.tag){case 2:var y=d.type;Gg(l,d),l=d.pendingProps;var E=su(d,$r.current);lu(d,p),E=s0(null,d,y,l,E,p);var $=n0();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,wi(y)?($=!0,kg(d)):$=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Qy(d),E.updater=Ug,d.stateNode=E,E._reactInternals=d,c0(d,y,l,p),d=m0(null,d,y,!0,$,p)):(d.tag=0,dn&&$&&$y(d),Zr(null,d,E,p),d=d.child),d;case 16:y=d.elementType;e:{switch(Gg(l,d),l=d.pendingProps,E=y._init,y=E(y._payload),d.type=y,E=d.tag=F8(y),l=Aa(y,l),E){case 0:d=h0(null,d,y,l,p);break e;case 1:d=US(null,d,y,l,p);break e;case 11:d=FS(null,d,y,l,p);break e;case 14:d=BS(null,d,y,Aa(y.type,l),p);break e}throw Error(n(306,y,""))}return d;case 0:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Aa(y,E),h0(l,d,y,E,p);case 1:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Aa(y,E),US(l,d,y,E,p);case 3:e:{if(zS(d),l===null)throw Error(n(387));y=d.pendingProps,$=d.memoizedState,E=$.element,rS(l,d),Dg(d,y,null,p);var H=d.memoizedState;if(y=H.element,$.isDehydrated)if($={element:y,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){E=du(Error(n(423)),d),d=GS(l,d,y,p,E);break e}else if(y!==E){E=du(Error(n(424)),d),d=GS(l,d,y,p,E);break e}else for(Fi=El(d.stateNode.containerInfo.firstChild),Mi=d,dn=!0,Ea=null,p=sS(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(iu(),y===E){d=Fo(l,d,p);break e}Zr(l,d,y,p)}d=d.child}return d;case 5:return oS(d),l===null&&Uy(d),y=d.type,E=d.pendingProps,$=l!==null?l.memoizedProps:null,H=E.children,Ry(y,E)?H=null:$!==null&&Ry(y,$)&&(d.flags|=32),VS(l,d),Zr(l,d,H,p),d.child;case 6:return l===null&&Uy(d),null;case 13:return HS(l,d,p);case 4:return Yy(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=au(d,null,y,p):Zr(l,d,y,p),d.child;case 11:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Aa(y,E),FS(l,d,y,E,p);case 7:return Zr(l,d,d.pendingProps,p),d.child;case 8:return Zr(l,d,d.pendingProps.children,p),d.child;case 12:return Zr(l,d,d.pendingProps.children,p),d.child;case 10:e:{if(y=d.type._context,E=d.pendingProps,$=d.memoizedProps,H=E.value,Js(Pg,y._currentValue),y._currentValue=H,$!==null)if(Ia($.value,H)){if($.children===E.children&&!_i.current){d=Fo(l,d,p);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var Z=$.dependencies;if(Z!==null){H=$.child;for(var ae=Z.firstContext;ae!==null;){if(ae.context===y){if($.tag===1){ae=Mo(-1,p&-p),ae.tag=2;var Ne=$.updateQueue;if(Ne!==null){Ne=Ne.shared;var ze=Ne.pending;ze===null?ae.next=ae:(ae.next=ze.next,ze.next=ae),Ne.pending=ae}}$.lanes|=p,ae=$.alternate,ae!==null&&(ae.lanes|=p),Ky($.return,p,d),Z.lanes|=p;break}ae=ae.next}}else if($.tag===10)H=$.type===d.type?null:$.child;else if($.tag===18){if(H=$.return,H===null)throw Error(n(341));H.lanes|=p,Z=H.alternate,Z!==null&&(Z.lanes|=p),Ky(H,p,d),H=$.sibling}else H=$.child;if(H!==null)H.return=$;else for(H=$;H!==null;){if(H===d){H=null;break}if($=H.sibling,$!==null){$.return=H.return,H=$;break}H=H.return}$=H}Zr(l,d,E.children,p),d=d.child}return d;case 9:return E=d.type,y=d.pendingProps.children,lu(d,p),E=ca(E),y=y(E),d.flags|=1,Zr(l,d,y,p),d.child;case 14:return y=d.type,E=Aa(y,d.pendingProps),E=Aa(y.type,E),BS(l,d,y,E,p);case 15:return $S(l,d,d.type,d.pendingProps,p);case 17:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Aa(y,E),Gg(l,d),d.tag=1,wi(y)?(l=!0,kg(d)):l=!1,lu(d,p),ES(d,y,E),c0(d,y,E,p),m0(null,d,y,!0,l,p);case 19:return KS(l,d,p);case 22:return OS(l,d,p)}throw Error(n(156,d.tag))};function vN(l,d){return gi(l,d)}function M8(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(l,d,p,y){return new M8(l,d,p,y)}function R0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function F8(l){if(typeof l=="function")return R0(l)?1:0;if(l!=null){if(l=l.$$typeof,l===F)return 11;if(l===z)return 14}return 2}function Vl(l,d){var p=l.alternate;return p===null?(p=ha(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function tf(l,d,p,y,E,$){var H=2;if(y=l,typeof l=="function")R0(l)&&(H=1);else if(typeof l=="string")H=5;else e:switch(l){case j:return zc(p.children,E,$,d);case S:H=8,E|=8;break;case C:return l=ha(12,p,d,E|2),l.elementType=C,l.lanes=$,l;case D:return l=ha(13,p,d,E),l.elementType=D,l.lanes=$,l;case V:return l=ha(19,p,d,E),l.elementType=V,l.lanes=$,l;case W:return sf(p,E,$,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case M:H=10;break e;case T:H=9;break e;case F:H=11;break e;case z:H=14;break e;case K:H=16,y=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return d=ha(H,p,d,E),d.elementType=l,d.type=y,d.lanes=$,d}function zc(l,d,p,y){return l=ha(7,l,y,d),l.lanes=p,l}function sf(l,d,p,y){return l=ha(22,l,y,d),l.elementType=W,l.lanes=p,l.stateNode={isHidden:!1},l}function L0(l,d,p){return l=ha(6,l,null,d),l.lanes=p,l}function D0(l,d,p){return d=ha(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function B8(l,d,p,y,E){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function M0(l,d,p,y,E,$,H,Z,ae){return l=new B8(l,d,p,Z,ae),d===1?(d=1,$===!0&&(d|=8)):d=0,$=ha(3,null,null,d),l.current=$,$.stateNode=l,$.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qy($),l}function $8(l,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:y==null?null:""+y,children:l,containerInfo:d,implementation:p}}function xN(l){if(!l)return Pl;l=l._reactInternals;e:{if(ge(l)!==l||l.tag!==1)throw Error(n(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(wi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(l.tag===1){var p=l.type;if(wi(p))return W2(l,p,d)}return d}function yN(l,d,p,y,E,$,H,Z,ae){return l=M0(p,y,!0,l,E,$,H,Z,ae),l.context=xN(null),p=l.current,y=ei(),E=$l(p),$=Mo(y,E),$.callback=d!=null?d:null,Dl(p,$,E),l.current.lanes=E,jl(l,E,y),Ni(l,y),l}function nf(l,d,p,y){var E=d.current,$=ei(),H=$l(E);return p=xN(p),d.context===null?d.context=p:d.pendingContext=p,d=Mo($,H),d.payload={element:l},y=y===void 0?null:y,y!==null&&(d.callback=y),l=Dl(E,d,H),l!==null&&(La(l,E,H,$),Lg(l,E,H)),H}function rf(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function bN(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function F0(l,d){bN(l,d),(l=l.alternate)&&bN(l,d)}function O8(){return null}var _N=typeof reportError=="function"?reportError:function(l){console.error(l)};function B0(l){this._internalRoot=l}af.prototype.render=B0.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));nf(l,d,null,null)},af.prototype.unmount=B0.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Oc(function(){nf(null,l,null,null)}),d[Ao]=null}};function af(l){this._internalRoot=l}af.prototype.unstable_scheduleHydration=function(l){if(l){var d=ig();l={blockedOn:null,target:l,priority:d};for(var p=0;p<Ja.length&&d!==0&&d<Ja[p].priority;p++);Ja.splice(p,0,l),p===0&&lg(l)}};function $0(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function of(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function wN(){}function V8(l,d,p,y,E){if(E){if(typeof y=="function"){var $=y;y=function(){var Ne=rf(H);$.call(Ne)}}var H=yN(d,y,l,0,null,!1,!1,"",wN);return l._reactRootContainer=H,l[Ao]=H.current,Oh(l.nodeType===8?l.parentNode:l),Oc(),H}for(;E=l.lastChild;)l.removeChild(E);if(typeof y=="function"){var Z=y;y=function(){var Ne=rf(ae);Z.call(Ne)}}var ae=M0(l,0,!1,null,null,!1,!1,"",wN);return l._reactRootContainer=ae,l[Ao]=ae.current,Oh(l.nodeType===8?l.parentNode:l),Oc(function(){nf(d,ae,p,y)}),ae}function lf(l,d,p,y,E){var $=p._reactRootContainer;if($){var H=$;if(typeof E=="function"){var Z=E;E=function(){var ae=rf(H);Z.call(ae)}}nf(d,H,l,E)}else H=V8(p,d,l,E,y);return rf(H)}ng=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var p=ra(d.pendingLanes);p!==0&&(Sl(d,p|1),Ni(d,ks()),(As&6)===0&&(mu=ks()+500,Rl()))}break;case 13:Oc(function(){var y=Do(l,1);if(y!==null){var E=ei();La(y,l,1,E)}}),F0(l,1)}},Bd=function(l){if(l.tag===13){var d=Do(l,134217728);if(d!==null){var p=ei();La(d,l,134217728,p)}F0(l,134217728)}},rg=function(l){if(l.tag===13){var d=$l(l),p=Do(l,d);if(p!==null){var y=ei();La(p,l,d,y)}F0(l,d)}},ig=function(){return _s},ag=function(l,d){var p=_s;try{return _s=l,d()}finally{_s=p}},Ve=function(l,d,p){switch(d){case"input":if(Fe(l,p),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=Sg(y);if(!E)throw Error(n(90));ke(y),Fe(y,E)}}}break;case"textarea":yt(l,p);break;case"select":d=p.value,d!=null&&Pe(l,!!p.multiple,d,!1)}},Ns=E0,dt=Oc;var U8={usingClientEntryPoint:!1,Events:[zh,eu,Sg,Mt,Lt,E0]},nm={findFiberByHostInstance:Pc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z8={bundleType:nm.bundleType,version:nm.version,rendererPackageName:nm.rendererPackageName,rendererConfig:nm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Ri(l),l===null?null:l.stateNode},findFiberByHostInstance:nm.findFiberByHostInstance||O8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{na=cf.inject(z8),dr=cf}catch(l){}}return ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U8,ki.createPortal=function(l,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$0(d))throw Error(n(200));return $8(l,d,null,p)},ki.createRoot=function(l,d){if(!$0(l))throw Error(n(299));var p=!1,y="",E=_N;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=M0(l,1,!1,null,null,p,!1,y,E),l[Ao]=d.current,Oh(l.nodeType===8?l.parentNode:l),new B0(d)},ki.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Ri(d),l=l===null?null:l.stateNode,l},ki.flushSync=function(l){return Oc(l)},ki.hydrate=function(l,d,p){if(!of(d))throw Error(n(200));return lf(null,l,d,!0,p)},ki.hydrateRoot=function(l,d,p){if(!$0(l))throw Error(n(405));var y=p!=null&&p.hydratedSources||null,E=!1,$="",H=_N;if(p!=null&&(p.unstable_strictMode===!0&&(E=!0),p.identifierPrefix!==void 0&&($=p.identifierPrefix),p.onRecoverableError!==void 0&&(H=p.onRecoverableError)),d=yN(d,null,l,1,p!=null?p:null,E,!1,$,H),l[Ao]=d.current,Oh(l),y)for(l=0;l<y.length;l++)p=y[l],E=p._getVersion,E=E(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,E]:d.mutableSourceEagerHydrationData.push(p,E);return new af(d)},ki.render=function(l,d,p){if(!of(d))throw Error(n(200));return lf(null,l,d,!1,p)},ki.unmountComponentAtNode=function(l){if(!of(l))throw Error(n(40));return l._reactRootContainer?(Oc(function(){lf(null,null,l,!1,function(){l._reactRootContainer=null,l[Ao]=null})}),!0):!1},ki.unstable_batchedUpdates=E0,ki.unstable_renderSubtreeIntoContainer=function(l,d,p,y){if(!of(p))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return lf(l,d,p,!1,y)},ki.version="18.3.1-next-f1338f8080-20240426",ki}var EN;function R5(){if(EN)return U0.exports;EN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),U0.exports=Y8(),U0.exports}var AN;function X8(){if(AN)return df;AN=1;var t=R5();return df.createRoot=t.createRoot,df.hydrateRoot=t.hydrateRoot,df}var J8=X8();const Z8=W_(J8),Xt=t=>typeof t=="string",im=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},PN=t=>t==null?"":""+t,eD=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},tD=/###/g,RN=t=>t&&t.indexOf("###")>-1?t.replace(tD,"."):t,LN=t=>!t||Xt(t),Pm=(t,e,n)=>{const r=Xt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(LN(t))return{};const a=RN(r[i]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return LN(t)?{}:{obj:t,k:RN(r[i])}},DN=(t,e,n)=>{const{obj:r,k:i}=Pm(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let a=e[e.length-1],o=e.slice(0,e.length-1),c=Pm(t,o,Object);for(;c.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),c=Pm(t,o,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${a}`]!="undefined"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=n},sD=(t,e,n,r)=>{const{obj:i,k:a}=Pm(t,e,Object);i[a]=i[a]||[],i[a].push(n)},kv=(t,e)=>{const{obj:n,k:r}=Pm(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},nD=(t,e,n)=>{const r=kv(t,n);return r!==void 0?r:kv(e,n)},L5=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Xt(t[r])||t[r]instanceof String||Xt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):L5(t[r],e[r],n):t[r]=e[r]);return t},gu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var rD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const iD=t=>Xt(t)?t.replace(/[&<>"'\/]/g,e=>rD[e]):t;class aD{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const oD=[" ",",","?","!",";"],lD=new aD(20),cD=(t,e,n)=>{e=e||"",n=n||"";const r=oD.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=lD.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(t);if(!a){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a},M1=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,c="";for(let u=a;u<r.length;++u)if(u!==a&&(c+=n),c+=r[u],o=i[c],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=o}return i},tp=t=>t==null?void 0:t.replace("_","-"),dD={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};let uD=class F1{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||dD,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(Xt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new F1(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new F1(this.logger,e)}};var ho=new uD;class Nx{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...n])})}}class MN extends Nx{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var h,m;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],r&&(Array.isArray(r)?c.push(...r):Xt(r)&&a?c.push(...r.split(a)):c.push(r)));const u=kv(this.data,c);return!u&&!n&&!r&&e.indexOf(".")>-1&&(e=c[0],n=c[1],r=c.slice(2).join(".")),u||!o||!Xt(r)?u:M1((m=(h=this.data)==null?void 0:h[e])==null?void 0:m[n],r,a)}addResource(e,n,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,n];r&&(c=c.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(c=e.split("."),i=n,n=c[1]),this.addNamespaces(n),DN(this.data,c,i),a.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const a in r)(Xt(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,a,o={silent:!1,skipCopy:!1}){let c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),i=r,r=n,n=c[1]),this.addNamespaces(n);let u=kv(this.data,c)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?L5(u,r,a):u={...u,...r},DN(this.data,c,u),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var D5={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(a=>{var o,c;e=(c=(o=this.processors[a])==null?void 0:o.process(e,n,r,i))!=null?c:e}),e}};const M5=Symbol("i18next/PATH_KEY");function hD(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>{var a;return(a=n==null?void 0:n.revoke)==null||a.call(n),i===M5?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function B1(t,e){var r;const{[M5]:n}=t(hD());return n.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const FN={},BN=t=>!Xt(t)&&typeof t!="boolean"&&typeof t!="number";class Cv extends Nx{constructor(e,n={}){super(),eD(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ho.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!cD(e,r,i);if(o&&!c){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:Xt(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:Xt(a)?[a]:a}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=B1(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:c,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const g=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return v?a?{res:`${h}${m}${c}`,usedKey:c,exactUsedKey:c,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${m}${c}`:a?{res:c,usedKey:c,exactUsedKey:c,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:c;const b=this.resolve(e,i);let _=b==null?void 0:b.res;const k=(b==null?void 0:b.usedKey)||c,I=(b==null?void 0:b.exactUsedKey)||c,R=["[object Number]","[object Function]","[object RegExp]"],P=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,x=i.count!==void 0&&!Xt(i.count),w=Cv.hasDefaultValue(i),L=x?this.pluralResolver.getSuffix(g,i.count,i):"",j=i.ordinal&&x?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",S=x&&!i.ordinal&&i.count===0,C=S&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${L}`]||i[`defaultValue${j}`]||i.defaultValue;let M=_;N&&!_&&w&&(M=C);const T=BN(M),F=Object.prototype.toString.apply(M);if(N&&M&&T&&R.indexOf(F)<0&&!(Xt(P)&&Array.isArray(M))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,M,{...i,ns:u}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(b.res=D,b.usedParams=this.getUsedParamsDetails(i),b):D}if(o){const D=Array.isArray(M),V=D?[]:{},z=D?I:k;for(const K in M)if(Object.prototype.hasOwnProperty.call(M,K)){const W=`${z}${o}${K}`;w&&!_?V[K]=this.translate(W,{...i,defaultValue:BN(C)?C[K]:void 0,joinArrays:!1,ns:u}):V[K]=this.translate(W,{...i,joinArrays:!1,ns:u}),V[K]===W&&(V[K]=M[K])}_=V}}else if(N&&Xt(P)&&Array.isArray(_))_=_.join(P),_&&(_=this.extendTranslation(_,e,i,r));else{let D=!1,V=!1;!this.isValidLookup(_)&&w&&(D=!0,_=C),this.isValidLookup(_)||(V=!0,_=c);const K=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:_,W=w&&C!==_&&this.options.updateMissing;if(V||D||W){if(this.logger.log(W?"updateKey":"missingKey",g,h,c,W?C:_),o){const G=this.resolve(c,{...i,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let U=[];const J=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&J&&J[0])for(let G=0;G<J.length;G++)U.push(J[G]);else this.options.saveMissingTo==="all"?U=this.languageUtils.toResolveHierarchy(i.lng||this.language):U.push(i.lng||this.language);const re=(G,X,Y)=>{var ce;const se=w&&Y!==_?Y:K;this.options.missingKeyHandler?this.options.missingKeyHandler(G,h,X,se,W,i):(ce=this.backendConnector)!=null&&ce.saveMissing&&this.backendConnector.saveMissing(G,h,X,se,W,i),this.emit("missingKey",G,h,X,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?U.forEach(G=>{const X=this.pluralResolver.getSuffixes(G,i);S&&i[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(Y=>{re([G],c+Y,i[`defaultValue${Y}`]||C)})}):re(U,c,C))}_=this.extendTranslation(_,e,i,b,r),V&&_===c&&this.options.appendNamespaceToMissingKey&&(_=`${h}${m}${c}`),(V||D)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${c}`:c,D?_:void 0,i))}return a?(b.res=_,b.usedParams=this.getUsedParamsDetails(i),b):_}extendTranslation(e,n,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=Xt(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(m){const b=e.match(this.interpolator.nestingRegexp);g=b&&b.length}let v=r.replace&&!Xt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||i.usedLng,r),m){const b=e.match(this.interpolator.nestingRegexp),_=b&&b.length;g<_&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>(a==null?void 0:a[0])===b[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):this.translate(...b,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,c=Xt(o)?[o]:o;return e!=null&&(c!=null&&c.length)&&r.applyPostProcessor!==!1&&(e=D5.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,a,o,c;return Xt(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,n),m=h.key;i=m;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const v=n.count!==void 0&&!Xt(n.count),b=v&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(Xt(n.context)||typeof n.context=="number")&&n.context!=="",k=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);g.forEach(I=>{var R,P;this.isValidLookup(r)||(c=I,!FN[`${k[0]}-${I}`]&&((R=this.utils)!=null&&R.hasLoadedNamespace)&&!((P=this.utils)!=null&&P.hasLoadedNamespace(c))&&(FN[`${k[0]}-${I}`]=!0,this.logger.warn(`key "${i}" for languages "${k.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(N=>{var L;if(this.isValidLookup(r))return;o=N;const x=[m];if((L=this.i18nFormat)!=null&&L.addLookupKeys)this.i18nFormat.addLookupKeys(x,m,N,I,n);else{let j;v&&(j=this.pluralResolver.getSuffix(N,n.count,n));const S=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(n.ordinal&&j.indexOf(C)===0&&x.push(m+j.replace(C,this.options.pluralSeparator)),x.push(m+j),b&&x.push(m+S)),_){const M=`${m}${this.options.contextSeparator||"_"}${n.context}`;x.push(M),v&&(n.ordinal&&j.indexOf(C)===0&&x.push(M+j.replace(C,this.options.pluralSeparator)),x.push(M+j),b&&x.push(M+S))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(a=w,r=this.getResource(N,I,w,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Xt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class $N{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ho.create("languageUtils")}getScriptPartFromCode(e){if(e=tp(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=tp(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Xt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch(r){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Xt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Xt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Xt(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const ON={zero:0,one:1,two:2,few:3,many:4,other:5},VN={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class mD{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ho.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=tp(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch(c){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),VN;if(!e.match(/-|_/))return VN;const u=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(u,n)}return this.pluralRulesCache[a]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>ON[i]-ON[a]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const UN=(t,e,n,r=".",i=!0)=>{let a=nD(t,e,n);return!a&&i&&Xt(n)&&(a=M1(t,n,r),a===void 0&&(a=M1(e,n,r))),a},H0=t=>t.replace(/\$/g,"$$$$");class pD{constructor(e={}){var n;this.logger=ho.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:c,suffixEscaped:u,formatSeparator:h,unescapeSuffix:m,unescapePrefix:g,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:_,nestingSuffixEscaped:k,nestingOptionsSeparator:I,maxReplaces:R,alwaysFormat:P}=e.interpolation;this.escape=n!==void 0?n:iD,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?gu(a):o||"{{",this.suffix=c?gu(c):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=v?gu(v):b||gu("$t("),this.nestingSuffix=_?gu(_):k||gu(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=R||1e3,this.alwaysFormat=P!==void 0?P:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var b;let a,o,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=_=>{if(_.indexOf(this.formatSeparator)<0){const P=UN(n,u,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(P,void 0,r,{...i,...n,interpolationkey:_}):P}const k=_.split(this.formatSeparator),I=k.shift().trim(),R=k.join(this.formatSeparator).trim();return this.format(UN(n,u,I,this.options.keySeparator,this.options.ignoreJSONStructure),R,r,{...i,...n,interpolationkey:I})};this.resetRegExp();const m=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=i==null?void 0:i.interpolation)==null?void 0:b.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>H0(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?H0(this.escape(_)):H0(_)}].forEach(_=>{for(c=0;a=_.regex.exec(e);){const k=a[1].trim();if(o=h(k),o===void 0)if(typeof m=="function"){const R=m(e,a,i);o=Xt(R)?R:""}else if(i&&Object.prototype.hasOwnProperty.call(i,k))o="";else if(g){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),o="";else!Xt(o)&&!this.useRawValueToEscape&&(o=PN(o));const I=_.safeValue(o);if(e=e.replace(a[0],I),g?(_.regex.lastIndex+=o.length,_.regex.lastIndex-=a[0].length):_.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,a,o;const c=(u,h)=>{var k;const m=this.nestingOptionsSeparator;if(u.indexOf(m)<0)return u;const g=u.split(new RegExp(`${m}[ ]*{`));let v=`{${g[1]}`;u=g[0],v=this.interpolate(v,o);const b=v.match(/'/g),_=v.match(/"/g);(((k=b==null?void 0:b.length)!=null?k:0)%2===0&&!_||_.length%2!==0)&&(v=v.replace(/'/g,'"'));try{o=JSON.parse(v),h&&(o={...h,...o})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,I),`${u}${m}${v}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];o={...r},o=o.replace&&!Xt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=n(c.call(this,i[1].trim(),o),o),a&&i[0]===e&&!Xt(a))return a;Xt(a)||(a=PN(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((m,g)=>this.format(m,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const gD=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[c,...u]=o.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),m=c.trim();n[m]||(n[m]=h),h==="false"&&(n[m]=!1),h==="true"&&(n[m]=!0),isNaN(h)||(n[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},zN=t=>{const e={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let c=e[o];return c||(c=t(tp(r),i),e[o]=c),c(n)}},fD=t=>(e,n,r)=>t(tp(n),r)(e);class vD{constructor(e={}){this.logger=ho.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?zN:fD;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return c=>o.format(c)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return c=>o.format(c)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return c=>o.format(c)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return c=>o.format(c,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return c=>o.format(c)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=zN(n)}format(e,n,r,i={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,u)=>{var g;const{formatName:h,formatOptions:m}=gD(u);if(this.formats[h]){let v=c;try{const b=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},_=b.locale||b.lng||i.locale||i.lng||r;v=this.formats[h](c,_,{...m,...i,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const xD=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class yD extends Nx{constructor(e,n,r,i={}){var a,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ho.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(a=this.backend)==null?void 0:a.init)==null||o.call(a,r,i.backend,i)}queueLoad(e,n,r,i){const a={},o={},c={},u={};return e.forEach(h=>{let m=!0;n.forEach(g=>{const v=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?o[v]===void 0&&(o[v]=!0):(this.state[v]=1,m=!1,o[v]===void 0&&(o[v]=!0),a[v]===void 0&&(a[v]=!0),u[g]===void 0&&(u[g]=!0)))}),m||(c[h]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(e,n,r){const i=e.split("|"),a=i[0],o=i[1];n&&this.emit("failedLoading",a,o,n),!n&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const c={};this.queue.forEach(u=>{sD(u.loaded,[a],o),xD(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{c[h]||(c[h]={});const m=u.loaded[h];m.length&&m.forEach(g=>{c[h][g]===void 0&&(c[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(e,n,r,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const c=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,a*2,o)},a);return}o(h,m)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,n);h&&typeof h.then=="function"?h.then(m=>c(null,m)).catch(c):c(null,h)}catch(h){c(h)}return}return u(e,n,c)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Xt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Xt(n)&&(n=[n]);const a=this.queueLoad(e,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,c)=>{o&&this.logger.warn(`${n}loading namespace ${a} for language ${i} failed`,o),!o&&c&&this.logger.log(`${n}loaded namespace ${a} for language ${i}`,c),this.loaded(e,o,c)})}saveMissing(e,n,r,i,a,o={},c=()=>{}){var u,h,m,g,v;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(m=this.services)==null?void 0:m.utils)!=null&&g.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const b={...o,isUpdate:a},_=this.backend.create.bind(this.backend);if(_.length<6)try{let k;_.length===5?k=_(e,n,r,i,b):k=_(e,n,r,i),k&&typeof k.then=="function"?k.then(I=>c(null,I)).catch(c):c(null,k)}catch(k){c(k)}else _(e,n,r,i,c,b)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const GN=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Xt(t[1])&&(e.defaultValue=t[1]),Xt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),HN=t=>{var e,n;return Xt(t.ns)&&(t.ns=[t.ns]),Xt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Xt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},uf=()=>{},bD=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class sp extends Nx{constructor(e={},n){if(super(),this.options=HN(e),this.services={},this.logger=ho,this.modules={external:[]},bD(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Xt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=GN();this.options={...r,...this.options,...HN(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?ho.init(i(this.modules.logger),this.options):ho.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=vD;const m=new $N(this.options);this.store=new MN(this.options.resources,this.options);const g=this.services;g.logger=ho,g.resourceStore=this.store,g.languageUtils=m,g.pluralResolver=new mD(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new pD(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new yD(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(b,..._)=>{this.emit(b,..._)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Cv(this.services,this.options),this.translator.on("*",(b,..._)=>{this.emit(b,..._)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,n||(n=uf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const c=im(),u=()=>{const h=(m,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(g),n(m,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),c}loadResources(e,n=uf){var a,o;let r=n;const i=Xt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const c=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&c.indexOf(g)<0&&c.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>u(m)),(o=(a=this.options.preload)==null?void 0:a.forEach)==null||o.call(a,h=>u(h)),this.services.backendConnector.load(c,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,n,r){const i=im();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=uf),this.services.backendConnector.reload(e,n,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&D5.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=im();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),n&&n(c,(...h)=>this.t(...h))},o=c=>{var m,g;!e&&!c&&this.services.languageDetector&&(c=[]);const u=Xt(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Xt(c)?[c]:c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(m=this.services.languageDetector)==null?void 0:m.cacheUserLanguage)==null||g.call(m,h)),this.loadResources(h,v=>{a(v,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(a,o,...c)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([a,o].concat(c)):u={...o},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let m;return u.keyPrefix&&Array.isArray(a)?m=a.map(g=>(typeof g=="function"&&(g=B1(g,{...this.options,...o})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=B1(a,{...this.options,...o})),m=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(m,u)};return Xt(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(c,u)=>{const h=this.services.backendConnector.state[`${c}|${u}`];return h===-1||h===0||h===2};if(n.precheck){const c=n.precheck(this,o);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,n){const r=im();return this.options.ns?(Xt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=im();Xt(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const c=o.getTextInfo();if(c&&c.direction)return c.direction}}catch(o){}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new $N(GN());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new sp(e,n)}cloneInstance(e={},n=uf){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new sp(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const c=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((m,g)=>(m[g]={...u[h][g]},m),u[h]),u),{});a.store=new MN(c,i),a.services.resourceStore=a.store}return a.translator=new Cv(a.services,i),a.translator.on("*",(c,...u)=>{a.emit(c,...u)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const $n=sp.createInstance();$n.createInstance=sp.createInstance;$n.createInstance;$n.dir;$n.init;$n.loadResources;$n.reloadResources;$n.use;$n.changeLanguage;$n.getFixedT;$n.t;$n.exists;$n.setDefaultNamespace;$n.hasLoadedNamespace;$n.loadNamespaces;$n.loadLanguages;const _D=(t,e,n,r)=>{var a,o,c,u;const i=[n,{code:e,...r||{}}];if((o=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);ud(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(c=t==null?void 0:t.services)==null?void 0:c.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},WN={},$1=(t,e,n,r)=>{ud(n)&&WN[n]||(ud(n)&&(WN[n]=new Date),_D(t,e,n,r))},F5=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},O1=(t,e,n)=>{t.loadNamespaces(e,F5(t,n))},KN=(t,e,n,r)=>{if(ud(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return O1(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,F5(t,r))},wD=(t,e,n={})=>!e.languages||!e.languages.length?($1(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),ud=t=>typeof t=="string",jD=t=>typeof t=="object"&&t!==null,SD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ND={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},kD=t=>ND[t],CD=t=>t.replace(SD,kD);let V1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:CD};const TD=(t={})=>{V1={...V1,...t}},ID=()=>V1;let B5;const ED=t=>{B5=t},AD=()=>B5,PD={type:"3rdParty",init(t){TD(t.options.react),ED(t)}},RD=A.createContext();class LD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const DD=(t,e)=>{const n=A.useRef();return A.useEffect(()=>{n.current=t},[t,e]),n.current},$5=(t,e,n,r)=>t.getFixedT(e,n,r),MD=(t,e,n,r)=>A.useCallback($5(t,e,n,r),[t,e,n,r]),Vs=(t,e={})=>{var x,w,L,j;const{i18n:n}=e,{i18n:r,defaultNS:i}=A.useContext(RD)||{},a=n||r||AD();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new LD),!a){$1(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(M,T)=>ud(T)?T:jD(T)&&ud(T.defaultValue)?T.defaultValue:Array.isArray(M)?M[M.length-1]:M,C=[S,{},!1];return C.t=S,C.i18n={},C.ready=!1,C}(x=a.options.react)!=null&&x.wait&&$1(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...ID(),...a.options.react,...e},{useSuspense:c,keyPrefix:u}=o;let h=i||((w=a.options)==null?void 0:w.defaultNS);h=ud(h)?[h]:h||["translation"],(j=(L=a.reportNamespaces).addUsedNamespaces)==null||j.call(L,h);const m=(a.isInitialized||a.initializedStoreOnce)&&h.every(S=>wD(S,a,o)),g=MD(a,e.lng||null,o.nsMode==="fallback"?h:h[0],u),v=()=>g,b=()=>$5(a,e.lng||null,o.nsMode==="fallback"?h:h[0],u),[_,k]=A.useState(v);let I=h.join();e.lng&&(I=`${e.lng}${I}`);const R=DD(I),P=A.useRef(!0);A.useEffect(()=>{const{bindI18n:S,bindI18nStore:C}=o;P.current=!0,!m&&!c&&(e.lng?KN(a,e.lng,h,()=>{P.current&&k(b)}):O1(a,h,()=>{P.current&&k(b)})),m&&R&&R!==I&&P.current&&k(b);const M=()=>{P.current&&k(b)};return S&&(a==null||a.on(S,M)),C&&(a==null||a.store.on(C,M)),()=>{P.current=!1,a&&S&&(S==null||S.split(" ").forEach(T=>a.off(T,M))),C&&a&&C.split(" ").forEach(T=>a.store.off(T,M))}},[a,I]),A.useEffect(()=>{P.current&&m&&k(v)},[a,u,m]);const N=[_,a,m];if(N.t=_,N.i18n=a,N.ready=m,m||!m&&!c)return N;throw new Promise(S=>{e.lng?KN(a,e.lng,h,()=>S()):O1(a,h,()=>S())})},FD={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community",creatorHub:"Creator Hub",settings:"Settings",discover:"Discover",guildHub:"Guild Hub",admin:"Admin",playground:"Playground",guideHub:"Guide Hub",scans:"Scans",overview:"Overview",guildPlanner:"Guild Planner",fusionPlanner:"Fusion Planner",guildCompare:"Guild comparison",waitlist:"Waitlist",sfMagazine:"SFMagazine",historyBook:"History Book",errorLog:"Error log",feedback:"Feedback",users:"Users",profile:"Profile",account:"Account",appearance:"Appearance",listViews:"List Views",rescanWidget:"Rescan Widget",uploadSimulator:"Upload Simulator",hudGameButtons:"HUD  Game Buttons"},BD={title:"Home",subtitle:"Welcome back",historybook:{title:"Historybook",credit:"Historybook - created by Resist 2 Exist & DonMuErte",logoAlt:"Historybook logo",coverAlt:"Historybook cover",open:"Open Historybook"},guidehub:{title:"GuideHub",subtitle:"Guides & calculators",logoAlt:"GuideHub logo",previewAlt:"GuideHub preview",open:"Open GuideHub"},sftools:{title:"SFTools",subtitle:"Tools & resources",previewAlt:"SFTools preview"},taverndiscord:{title:"Tavern Discord",subtitle:"Community Discord",previewAlt:"Tavern Discord preview"},discordBanner:{title:"JOIN OUR DISCORD",subtitle:"JOIN HERE",linkLabel:"Invite",linkValue:"discord.gg/2FqSvXC3",aria:"Open the SFDataHub Discord invite",logoAlt:"Discord logo"},news:{title:"Community news",empty:"No news yet.",emptyChannel:"No recent news in this channel.",openOnDiscord:"Open on Discord",prev:"Previous channel",next:"Next channel"},youtube:{title:"YouTube",prev:"Previous video",next:"Next video",empty:"No videos"},live:{title:"Live now",none:"Nobody is live right now.",open_on_twitch:"Open on Twitch",badge:"LIVE",viewers:"{{viewers}} viewers",prev:"Previous stream",next:"Next stream"},schedule:{open:"Show streaming schedule",title:"Streaming schedule",close:"Close",platform:"Platform",platformAll:"All",platformTwitch:"Twitch",platformYouTube:"YouTube",search:"Search",searchPlaceholder:"Streamer / Title",today:"Today only",columns:{weekday:"Weekday",start:"Start (UTC)",end:"End (UTC)",timezone:"Timezone",platform:"Platform",channel:"Channel URL",streamer:"Streamer",title:"Title"},empty:"No schedule yet.",link:"Link"}},$D={arenaManager:{links:{runeBonuses:"Rune Bonuses",buildOrder:"Build Order"},amRuneBonuses:{description:"Complete overview of Arena Manager runes and their bonus values. Grouped by tier; max, achievements, and breakpoints are highlighted.",searchPlaceholder:"Search (e.g., thousand, E34, x60)...",table:{tier:"Tier",amount:"Amount",goldBonus:"Gold Bonus",xpBonus:"XP Bonus",hpBonus:"HP Bonus",totalResistance:"Total Resistance",singleResistance:"Single Resistance",elementalDamage:"Elemental Damage",improvedItemQuality:"Improved Item Quality",chancesOfEpics:"Chances of Epics",tags:"Tags"},badges:{max:"MAX",achievement:"Achievement",x2:"x2",x12:"x12",x60:"x60",x8:"x8"},achievements:{capitalist:"Capitalist Achievement",stinkingrich:"Stinking Rich Achievement",runemaster:"Rune Master"},tiers:{thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion",quintillion:"Quintillion",sextillion:"Sextillion",septillion:"Septillion",octillion:"Octillion",nonillion:"Nonillion",decillion:"Decillion",undecillion:"Undecillion",duodecillion:"Duodecillion",tredecillion:"Tredecillion",quattuordecillion:"Quattuordecillion",quindecillion:"Quindecillion",sexdecillion:"Sexdecillion",septendecillion:"Septendecillion",octodecillion:"Octodecillion",novendecillion:"Novendecillion",vigintillion:"Vigintillion",unvigintillion:"Unvigintillion",duovigintillion:"Duovigintillion",trevigintillion:"Trevigintillion",quattuorvigintillion:"Quattuorvigintillion",quinquavigintillion:"Quinquavigintillion",sesvigintillion:"Sesvigintillion",septemvigintillion:"Septemvigintillion",octovigintillion:"Octovigintillion",novemvigintillion:"Novemvigintillion",trigintillion:"Trigintillion",untrigintillion:"Untrigintillion",duotrigintillion:"Duotrigintillion",trestrigintillion:"Trestrigintillion",quattuortrigintillion:"Quattuortrigintillion",quinquatrigintillion:"Quinquatrigintillion",sextrigintillion:"Sextrigintillion",septentrigintillion:"Septentrigintillion",octotrigintillion:"Octotrigintillion",noventrigintillion:"Noventrigintillion",quadragintillion:"Quadragintillion",unquadragintillion:"Unquadragintillion",duoquadragintillion:"Duoquadragintillion",trequadragintillion:"Trequadragintillion",quattuorquadragintillion:"Quattuorquadragintillion",quinquadragintillion:"Quinquadragintillion",sexquadragintillion:"Sexquadragintillion",septenquadragintillion:"Septenquadragintillion",octoquadragintillion:"Octoquadragintillion",novenquadragintillion:"Novenquadragintillion"}}},calculators:{fortress:{title:"Fortress - {{building}}",inputs:{buildingSelectLabel:"Select building",l2Label:"Laborers Quarter"},table:{level:"Level",wood:"Wood",stone:"Stone",buildTime:"Build Time",buildTimeL2:"Build Time",skip:"Skip (Mushr.)"},hints:{l2Effect:"Note: L2 applies to all buildings (0-15 -> 0-75%). Skip is based on the L2 time (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Woodcutter",treasury:"Treasury",smithy:"Smithy",quarry:"Quarry",magetower:"Mage Tower",laborersquarter:"Laborers Quarters",gemmine:"Gem Mine",fortress:"Fortress",fortifications:"Fortification",barracks:"Barracks",archery:"Archery",academy:"Academy"}},underworld:{title:"Underworld - {{building}}",inputs:{buildingSelectLabel:"Select building",l2Label:"Laborers Quarter"},table:{level:"Level",soul:"Soul",gold:"Gold",buildTime:"Build Time",buildTimeL2:"Build Time",skip:"Skip (Mushr.)"},empty:"No data for this building yet.",hints:{l2Effect:"Note: L2 applies to all buildings (1-15 -> up to 75%). Skip is based on the L2 time (ceil(ceil(sec/60)/10))."},buildings:{uwgate:"Underworld Gate",trollblock:"Troll Block",torturechamber:"Torture Chamber",soulextractor:"Soul Extractor",keeper:"Keeper",hearthofdarkn:"Hearth of Darkness",goldpit:"Gold Pit",goblinpit:"Goblin Pit",gladiator:"Gladiator",adventuromatic:"Adventuromatic"}}}},OD={tiles:{overview:{title:"Server Overview",subtitle:"Fusion tree & active servers"}},overview:{pageTitle:"Server Overview",expandAll:"Expand all",collapseAll:"Collapse all"}},VD={tabs:{gamified:"Gamified",gamified2:"Gamified 2",gamified3:"Gamified 3"}},UD={navigation:"Navigation",categories:"Categories",login:"Login",logout:"Logout",pin:"Pin",unpin:"Unpin",languagePreference:"Sidebar language preference",languageSwitchEn:"Switch language to English",languageSwitchDe:"Switch language to German",connectedCharacters:{title:"Connected characters",empty:"No characters linked yet. Link a character in your account to see it here.",loginPrompt:"Sign in to see your linked characters.",ctaGuest:"Open start guide",ctaAuthed:"Open linked characters guide",chip:{server:"Server",class:"Class"}}},zD={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}},connectedCharacters:{title:"Connected characters",subtitle:"These game characters are linked to your SFDataHub account.",loading:"Refreshing characters...",empty:{title:"No characters linked yet",description:'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.',cta:"Click to learn how linking works"},actions:{refresh:"Refresh",refreshing:"Refreshing...",unlink:"Disconnect character"},confirmation:{title:"Are you sure you want to unlink this character?",cancel:"Cancel",confirm:"Yes, unlink",confirming:"Unlinking..."},errors:{serviceUnavailable:"Auth service is not configured for unlinking.",unlink:"Could not unlink character."},columns:{character:"Character",server:"Server",playerId:"Player ID",class:"Class",level:"Level",guild:"Guild",lastVerified:"Last linked",source:"Source",actions:"Actions"},method:{discord:"Discord bot"},help:{title:"How does linking work?",show:"Show",hide:"Hide",steps:{link:'Link a character via the Discord bot using the "!connect char" command.',verify:"We match the character to your latest verified scan; keep your game data up to date.",refresh:"After linking, click Refresh here to sync the latest characters from the auth service.",unlink:"You can unlink any character in the Actions column; the source column shows how it was linked."},footnote:"Tip: Click Refresh after linking or unlinking to update this table."}}},GD={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},HD={quickAccess:"Quick access",upload:"Upload scan",officialGameSite:"Visit the official game website",search:"Search /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},WD={errors:{noSnapshot:"No snapshot yet for this server."}},KD={compareMonth:"Progress since",compareOff:"Off",compareMissingSnapshot:"No baseline data for {{key}}.",deltaNew:"NEW",filters:{guilds:{label:"Guilds",placeholder:"All guilds",empty:"No guilds in snapshot.",clear:"Clear",selected:"{{count}} selected"}}},qD={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},QD={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},YD={quota:{unlimited:"No limit"}},XD={placeholder:"Search players",inputLabel:"Search players, guilds and servers",loading:"Loading",recents:"Recent searches",minCharsHint:"Type at least 3 characters",noResults:"No results",players:"Players",guilds:"Guilds",servers:"Servers",active:"Active",inactive:"Inactive",guildMembers:"{{count}} members",guildMembersUnknown:"Members ?",moreResults:"More results press Enter",recentLabel:"Recent"},JD={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},ZD={gem:{title:"Gem Calculator",inputs:{charLevel:{label:"Char Level",placeholder:"e.g., 360"},mineLevel:{label:"Mine Level",placeholder:"e.g., 10"},guildHok:{label:"Guild HoK",placeholder:"e.g., 840"}},gems:{normal:{label:"Normal",alt:"Normal Gem"},black:{label:"Black",alt:"Black Gem"},legendary:{label:"Legendary",alt:"Legendary Gem"}},hint:{prefix:"The values are approximations and represent the ",emphasis:"max possible",suffix:" you can find. Actual results may vary slightly."}},calculators:{fortress:{title:"Fortress - {{building}}",inputs:{buildingSelectLabel:"Select building",l2Label:"L2 (Laborers)"},table:{level:"Level",wood:"Wood",stone:"Stone",buildTime:"Build Time",buildTimeL2:"Build Time (L2)",skip:"Skip (Mushr.)"},hints:{l2Effect:"Note: L2 applies to all buildings (0-15 -> 0-75%). Skip is based on the L2 time (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Woodcutter",treasury:"Treasury",smithy:"Smithy",quarry:"Quarry",magetower:"Mage Tower",laborersquarter:"Laborers Quarters",gemmine:"Gem Mine",fortress:"Fortress",fortifications:"Fortification",barracks:"Barracks",archery:"Archery",academy:"Academy"}}}},eM={links:{runeBonuses:"Rune Bonuses",buildOrder:"Build Order"},buildOrder:{title:"Arena Manager  Build Order",updated:"Last updated: {{date}}",body1:"Build your Attractions according to the picture below for maximum efficiency.",body2:"Upgrading to full Platinum on all Attractions will cost you {{mushrooms}}.",imageAlt:"Arena Manager build order",credit:"Credit to {{discord}}."}},tM={status:{label:"Status",up_to_date:"Up to date",work_in_progress:"Work in progress",outdated:"Outdated"}},sM={v2:{searchPlaceholder:"Search guides",searchLabel:"Search guides",navHomeLabel:"Home",emptyStateTitle:"Select a guide",emptyStateBody:"Choose an entry from the guide navigation.",loading:"Loading guide...",missingTitle:"Guide not available yet",missingBody:"This guide does not have markdown content yet.",createdLabel:"Created",updatedLabel:"Last edited",sectionsLabel:"Sections",noSections:"No sections",galleryLabel:"Gallery",closeLabel:"Close"}},nM={nav:FD,home:BD,guidehub:$D,servers:OD,playground:VD,sidebar:UD,account:zD,tools:GD,topbar:HD,toplistsPage:WD,toplists:KD,profile:qD,help:QD,uploadCenter:YD,search:XD,footer:JD,calculators:ZD,arenaManager:eM,guide:tM,guides:sM},rM={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community",creatorHub:"Creator Hub",settings:"Einstellungen",discover:"Discover",guildHub:"Guild Hub",admin:"Admin",playground:"Playground",guideHub:"Guide Hub",scans:"Scans",overview:"Uebersicht",guildPlanner:"Guild Planner",fusionPlanner:"Fusion Planner",guildCompare:"Gildenvergleich",waitlist:"Warteliste",sfMagazine:"SFMagazine",historyBook:"History Book",errorLog:"Fehlerprotokoll",feedback:"Feedback",users:"Nutzer",profile:"Profil",account:"Account",appearance:"Darstellung",listViews:"Listenansichten",rescanWidget:"Rescan-Widget",uploadSimulator:"Upload-Simulator",hudGameButtons:"HUD  Game Buttons"},iM={title:"Start",subtitle:"Willkommen zurueck",historybook:{title:"Historybook",credit:"Historybook - erstellt von Resist 2 Exist & DonMuErte",logoAlt:"Historybook Logo",coverAlt:"Historybook Cover",open:"Historybook oeffnen"},guidehub:{title:"GuideHub",subtitle:"Guides & Rechner",logoAlt:"GuideHub Logo",previewAlt:"GuideHub Vorschau",open:"GuideHub oeffnen"},sftools:{title:"SFTools",subtitle:"Tools & Ressourcen",previewAlt:"SFTools Vorschau"},taverndiscord:{title:"Tavern Discord",subtitle:"Community-Discord",previewAlt:"Tavern Discord Vorschau"},discordBanner:{title:"JOIN OUR DISCORD",subtitle:"HIER BEITRETEN",linkLabel:"Invite",linkValue:"discord.gg/2FqSvXC3",aria:"SFDataHub Discord-Invite oeffnen",logoAlt:"Discord-Logo"},news:{title:"Community-News",empty:"Noch keine Neuigkeiten.",emptyChannel:"Keine aktuellen News in diesem Kanal.",openOnDiscord:"Auf Discord oeffnen",prev:"Vorheriger Kanal",next:"Naechster Kanal"},youtube:{title:"YouTube",prev:"Vorheriges Video",next:"Naechstes Video",empty:"Keine Videos"},live:{title:"Jetzt live",none:"Niemand ist gerade live.",open_on_twitch:"Auf Twitch oeffnen",badge:"LIVE",viewers:"{{viewers}} Zuschauer",prev:"Vorheriger Stream",next:"Naechster Stream"},schedule:{open:"Streaming-Plan anzeigen",title:"Streaming-Plan",close:"Schliessen",platform:"Plattform",platformAll:"Alle",platformTwitch:"Twitch",platformYouTube:"YouTube",search:"Suche",searchPlaceholder:"Streamer / Titel",today:"Nur heute",columns:{weekday:"Wochentag",start:"Start (UTC)",end:"Ende (UTC)",timezone:"Zeitzone",platform:"Plattform",channel:"Kanal-URL",streamer:"Streamer",title:"Titel"},empty:"Noch kein Streaming-Plan.",link:"Link"}},aM={arenaManager:{links:{runeBonuses:"Runen-Boni",buildOrder:"Build Order"},amRuneBonuses:{description:"Komplette Uebersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Errungenschaften und Breakpoints sind markiert.",searchPlaceholder:"Suche (z. B. thousand, E34, x60)...",table:{tier:"Tier",amount:"Menge",goldBonus:"Gold Bonus",xpBonus:"XP Bonus",hpBonus:"HP Bonus",totalResistance:"Gesamtwiderstand",singleResistance:"Einzelwiderstand",elementalDamage:"Elementarschaden",improvedItemQuality:"Verbesserte Item-Qualitaet",chancesOfEpics:"Chance auf Epics",tags:"Tags"},badges:{max:"MAX",achievement:"Errungenschaft",x2:"x2",x12:"x12",x60:"x60",x8:"x8"},achievements:{capitalist:"Kapitalist Errungenschaft",stinkingrich:"Stinkreich Errungenschaft",runemaster:"Runenmeister"},tiers:{thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion",quintillion:"Quintillion",sextillion:"Sextillion",septillion:"Septillion",octillion:"Octillion",nonillion:"Nonillion",decillion:"Decillion",undecillion:"Undecillion",duodecillion:"Duodecillion",tredecillion:"Tredecillion",quattuordecillion:"Quattuordecillion",quindecillion:"Quindecillion",sexdecillion:"Sexdecillion",septendecillion:"Septendecillion",octodecillion:"Octodecillion",novendecillion:"Novendecillion",vigintillion:"Vigintillion",unvigintillion:"Unvigintillion",duovigintillion:"Duovigintillion",trevigintillion:"Trevigintillion",quattuorvigintillion:"Quattuorvigintillion",quinquavigintillion:"Quinquavigintillion",sesvigintillion:"Sesvigintillion",septemvigintillion:"Septemvigintillion",octovigintillion:"Octovigintillion",novemvigintillion:"Novemvigintillion",trigintillion:"Trigintillion",untrigintillion:"Untrigintillion",duotrigintillion:"Duotrigintillion",trestrigintillion:"Trestrigintillion",quattuortrigintillion:"Quattuortrigintillion",quinquatrigintillion:"Quinquatrigintillion",sextrigintillion:"Sextrigintillion",septentrigintillion:"Septentrigintillion",octotrigintillion:"Octotrigintillion",noventrigintillion:"Noventrigintillion",quadragintillion:"Quadragintillion",unquadragintillion:"Unquadragintillion",duoquadragintillion:"Duoquadragintillion",trequadragintillion:"Trequadragintillion",quattuorquadragintillion:"Quattuorquadragintillion",quinquadragintillion:"Quinquadragintillion",sexquadragintillion:"Sexquadragintillion",septenquadragintillion:"Septenquadragintillion",octoquadragintillion:"Octoquadragintillion",novenquadragintillion:"Novenquadragintillion"}}},calculators:{fortress:{title:"Festung - {{building}}",inputs:{buildingSelectLabel:"Gebaeude auswaehlen",l2Label:"Laborers Quarter"},table:{level:"Level",wood:"Holz",stone:"Stein",buildTime:"Bauzeit",buildTimeL2:"Bauzeit",skip:"Skip (Pilze)"},hints:{l2Effect:"Hinweis: L2 gilt fuer alle Gebaeude (0-15 -> 0-75%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Holzfaeller",treasury:"Schatzkammer",smithy:"Schmiede",quarry:"Steinbruch",magetower:"Magierturm",laborersquarter:"Arbeiterquartier",gemmine:"Edelsteinmine",fortress:"Festung",fortifications:"Befestigung",barracks:"Kaserne",archery:"Bogenschuetzen",academy:"Akademie"}},underworld:{title:"Unterwelt - {{building}}",inputs:{buildingSelectLabel:"Gebaeude auswaehlen",l2Label:"Laborers Quarter"},table:{level:"Level",soul:"Seelen",gold:"Gold",buildTime:"Bauzeit",buildTimeL2:"Bauzeit",skip:"Skip (Pilze)"},empty:"Noch keine Daten fuer dieses Gebaeude.",hints:{l2Effect:"Hinweis: L2 gilt fuer alle Gebaeude (1-15 -> bis zu 75%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."},buildings:{uwgate:"Unterwelt-Tor",trollblock:"Trollblock",torturechamber:"Folterkammer",soulextractor:"Seelenextraktor",keeper:"Waechter",hearthofdarkn:"Herd der Finsternis",goldpit:"Goldgrube",goblinpit:"Goblin-Grube",gladiator:"Gladiator",adventuromatic:"Abenteuer-o-mat"}}}},oM={tiles:{overview:{title:"Server-Uebersicht",subtitle:"Fusion-Tree & aktive Server"}},overview:{pageTitle:"Server-Uebersicht",expandAll:"Alle aufklappen",collapseAll:"Alle einklappen"}},lM={tabs:{gamified:"Gamifiziert",gamified2:"Gamified 2",gamified3:"Gamified 3"}},cM={navigation:"Navigation",categories:"Kategorien",login:"Login",logout:"Logout",pin:"Pin",unpin:"Unpin",languagePreference:"Sidebar-Sprache",languageSwitchEn:"Sprache auf Englisch wechseln",languageSwitchDe:"Sprache auf Deutsch wechseln",connectedCharacters:{title:"Verknuepfte Charaktere",empty:"Noch keine Charaktere verknuepft. Verknuepfe einen Charakter in deinem Account, damit er hier erscheint.",loginPrompt:"Bitte einloggen, um verknuepfte Charaktere zu sehen.",ctaGuest:"Start-Guide oeffnen",ctaAuthed:"Zum Account-Tab wechseln",chip:{server:"Server",class:"Klasse"}}},dM={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fuer deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}},connectedCharacters:{title:"Verknuepfte Charaktere",subtitle:"Diese Spielcharaktere sind mit deinem SFDataHub-Account verknuepft.",loading:"Charaktere werden aktualisiert...",empty:{title:"Noch keine Charaktere verknuepft",description:'Nutze den Befehl "!connect char" im Discord-Bot, verknuepfe deinen Account und klicke dann hier auf "Refresh".',cta:"Klicke hier, um zu erfahren, wie das Verknuepfen funktioniert"},actions:{refresh:"Refresh",refreshing:"Aktualisiere...",unlink:"Charakter trennen"},confirmation:{title:"Moechtest du diesen Charakter wirklich trennen?",cancel:"Abbrechen",confirm:"Ja, trennen",confirming:"Trenne..."},errors:{serviceUnavailable:"Auth-Service ist fuer das Trennen nicht konfiguriert.",unlink:"Charakter konnte nicht getrennt werden."},columns:{character:"Charakter",server:"Server",playerId:"Player ID",class:"Klasse",level:"Level",guild:"Gilde",lastVerified:"Zuletzt verknuepft",source:"Quelle",actions:"Aktionen"},method:{discord:"Discord-Bot"},help:{title:"Wie funktioniert das Verknuepfen?",show:"Anzeigen",hide:"Ausblenden",steps:{link:'Verknuepfe einen Charakter ueber den Discord-Bot mit dem Befehl "!connect char".',verify:"Wir gleichen den Charakter mit deinem letzten verifizierten Scan ab; halte deine Daten aktuell.",refresh:"Klicke nach dem Verknuepfen auf Refresh, damit die Liste aktualisiert wird.",unlink:"Du kannst jeden Charakter ueber die Spalte Aktionen trennen; die Quelle zeigt, wie er verknuepft wurde."},footnote:"Tipp: Nach dem Verknuepfen oder Trennen immer kurz auf Refresh klicken."}}},uM={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},hM={quickAccess:"Schnellzugriff",upload:"Scan hochladen",officialGameSite:"Besuche die offizielle Spielseite",search:"Suchen /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},mM={errors:{noSnapshot:"Noch kein Snapshot fuer diesen Server."}},pM={compareMonth:"Fortschritt seit",compareOff:"Aus",compareMissingSnapshot:"Keine Basisdaten fr {{key}}.",deltaNew:"NEU",filters:{guilds:{label:"Gilden",placeholder:"Alle Gilden",empty:"Keine Gilden im Snapshot.",clear:"Leeren",selected:"{{count}} ausgewaehlt"}}},gM={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},fM={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},vM={quota:{unlimited:"Kein Limit"}},xM={placeholder:"Suchen (Spieler)",inputLabel:"Spieler, Gilden und Server suchen",loading:"Ldt?",recents:"Letzte Suchen",minCharsHint:"Mindestens 3 Zeichen eingeben?",noResults:"Keine Treffer",players:"Spieler",guilds:"Gilden",servers:"Server",active:"Aktiv",inactive:"Inaktiv",guildMembers:"{{count}} Mitglieder",guildMembersUnknown:"Mitglieder ?",moreResults:"Mehr Ergebnisse? Enter drcken",recentLabel:"Kuerzlich"},yM={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},bM={gem:{title:"Edelstein-Rechner",inputs:{charLevel:{label:"Charakterlevel",placeholder:"z. B. 360"},mineLevel:{label:"Minenlevel",placeholder:"z. B. 10"},guildHok:{label:"Gilden-HoK",placeholder:"z. B. 840"}},gems:{normal:{label:"Normal",alt:"Normaler Edelstein"},black:{label:"Schwarz",alt:"Schwarzer Edelstein"},legendary:{label:"Legendaer",alt:"Legendaerer Edelstein"}},hint:{prefix:"Die Werte sind Schaetzwerte und geben das ",emphasis:"maximal Moegliche",suffix:" an, das du finden kannst. Tatsaechliche Ergebnisse koennen leicht abweichen."}},calculators:{fortress:{title:"Festung - {{building}}",inputs:{buildingSelectLabel:"Gebaeude auswaehlen",l2Label:"L2 (Arbeiter)"},table:{level:"Level",wood:"Holz",stone:"Stein",buildTime:"Bauzeit",buildTimeL2:"Bauzeit (L2)",skip:"Skip (Pilze)"},hints:{l2Effect:"Hinweis: L2 gilt fuer alle Gebaeude (0-15 -> 0-75%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Holzfaeller",treasury:"Schatzkammer",smithy:"Schmiede",quarry:"Steinbruch",magetower:"Magierturm",laborersquarter:"Arbeiterquartier",gemmine:"Edelsteinmine",fortress:"Festung",fortifications:"Befestigung",barracks:"Kaserne",archery:"Bogenschuetzen",academy:"Akademie"}}}},_M={links:{runeBonuses:"Runen-Boni",buildOrder:"Build Order"},buildOrder:{title:"Arena Manager  Build Order",updated:"Zuletzt aktualisiert: {{date}}",body1:"Baue deine Attraktionen gemaess dem Bild unten fuer maximale Effizienz.",body2:"Das Aufwerten auf vollstaendiges Platin bei allen Attraktionen kostet dich {{mushrooms}}.",imageAlt:"Arena Manager Build Order",credit:"Dank an {{discord}}."}},wM={status:{label:"Status",up_to_date:"Aktuell",work_in_progress:"In Arbeit",outdated:"Veraltet"}},jM={v2:{searchPlaceholder:"Guides suchen",searchLabel:"Guides suchen",navHomeLabel:"Startseite",emptyStateTitle:"Guide auswaehlen",emptyStateBody:"Waehle einen Eintrag in der Guide-Navigation.",loading:"Guide wird geladen...",missingTitle:"Guide noch nicht verfuegbar",missingBody:"Fuer diesen Guide gibt es noch keinen Markdown-Inhalt.",createdLabel:"Erstellt",updatedLabel:"Bearbeitet",sectionsLabel:"Sektionen",noSections:"Keine Sektionen",galleryLabel:"Galerie",closeLabel:"Schliessen"}},SM={nav:rM,home:iM,guidehub:aM,servers:oM,playground:lM,sidebar:cM,account:dM,tools:uM,topbar:hM,toplistsPage:mM,toplists:pM,profile:gM,help:fM,uploadCenter:vM,search:xM,footer:yM,calculators:bM,arenaManager:_M,guide:wM,guides:jM},NM={en:{translation:nM},de:{translation:SM}};$n.use(PD).init({resources:NM,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function Qt(t,e="en"){return $n.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qN="popstate";function kM(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Td(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),U1("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");c=h===-1?u:u.slice(0,h)}return c+"#"+(typeof a=="string"?a:np(a))}function r(i,a){Ji(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return TM(e,n,r,t)}function mn(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Ji(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function CM(){return Math.random().toString(36).substring(2,10)}function QN(t,e){return{usr:t.state,key:t.key,idx:e}}function U1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Td(e):e,state:n,key:e&&e.key||r||CM()}}function np({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Td(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function TM(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function g(){c="POP";let I=m(),R=I==null?null:I-h;h=I,u&&u({action:c,location:k.location,delta:R})}function v(I,R){c="PUSH";let P=U1(k.location,I,R);n&&n(P,I),h=m()+1;let N=QN(P,h),x=k.createHref(P);try{o.pushState(N,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(x)}a&&u&&u({action:c,location:k.location,delta:1})}function b(I,R){c="REPLACE";let P=U1(k.location,I,R);n&&n(P,I),h=m();let N=QN(P,h),x=k.createHref(P);o.replaceState(N,"",x),a&&u&&u({action:c,location:k.location,delta:0})}function _(I){return IM(I)}let k={get action(){return c},get location(){return t(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qN,g),u=I,()=>{i.removeEventListener(qN,g),u=null}},createHref(I){return e(i,I)},createURL:_,encodeLocation(I){let R=_(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:b,go(I){return o.go(I)}};return k}function IM(t,e=!1){let n="http://localhost";typeof window!="undefined"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:np(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function O5(t,e,n="/"){return EM(t,e,n,!1)}function EM(t,e,n,r){let i=typeof e=="string"?Td(e):e,a=cl(i.pathname||"/",n);if(a==null)return null;let o=V5(t);AM(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=UM(a);c=OM(o[u],h,r)}return c}function V5(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;mn(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=al([r,m.relativePath]),v=n.concat(m);o.children&&o.children.length>0&&(mn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),V5(o.children,e,v,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:BM(g,o.index),routesMeta:v})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let h of U5(o.path))a(o,c,!0,h)}),e}function U5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=U5(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function AM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$M(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PM=/^:[\w-]+$/,RM=3,LM=2,DM=1,MM=10,FM=-2,YN=t=>t==="*";function BM(t,e){let n=t.split("/"),r=n.length;return n.some(YN)&&(r+=FM),e&&(r+=LM),n.filter(i=>!YN(i)).reduce((i,a)=>i+(PM.test(a)?RM:a===""?DM:MM),r)}function $M(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function OM(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=Tv({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),v=u.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=Tv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:al([a,g.pathname]),pathnameBase:WM(al([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=al([a,g.pathnameBase]))}return o}function Tv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},v)=>{if(m==="*"){let _=c[v]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=c[v];return g&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function VM(t,e=!1,n=!0){Ji(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function UM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ji(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function cl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function zM(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Td(t):t;return{pathname:n?n.startsWith("/")?n:GM(n,e):e,search:KM(r),hash:qM(i)}}function GM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function W0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function q_(t){let e=HM(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Q_(t,e,n,r=!1){let i;typeof t=="string"?i=Td(t):(i={...t},mn(!i.pathname||!i.pathname.includes("?"),W0("?","pathname","search",i)),mn(!i.pathname||!i.pathname.includes("#"),W0("#","pathname","hash",i)),mn(!i.search||!i.search.includes("#"),W0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}c=g>=0?e[g]:"/"}let u=zM(i,c),h=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var al=t=>t.join("/").replace(/\/\/+/g,"/"),WM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var z5=["POST","PUT","PATCH","DELETE"];new Set(z5);var YM=["GET",...z5];new Set(YM);var uh=A.createContext(null);uh.displayName="DataRouter";var kx=A.createContext(null);kx.displayName="DataRouterState";A.createContext(!1);var G5=A.createContext({isTransitioning:!1});G5.displayName="ViewTransition";var XM=A.createContext(new Map);XM.displayName="Fetchers";var JM=A.createContext(null);JM.displayName="Await";var Wa=A.createContext(null);Wa.displayName="Navigation";var Cp=A.createContext(null);Cp.displayName="Location";var _a=A.createContext({outlet:null,matches:[],isDataRoute:!1});_a.displayName="Route";var Y_=A.createContext(null);Y_.displayName="RouteError";function ZM(t,{relative:e}={}){mn(hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Wa),{hash:i,pathname:a,search:o}=Tp(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:al([n,a])),r.createHref({pathname:c,search:o,hash:i})}function hh(){return A.useContext(Cp)!=null}function ir(){return mn(hh(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Cp).location}var H5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W5(t){A.useContext(Wa).static||A.useLayoutEffect(t)}function hi(){let{isDataRoute:t}=A.useContext(_a);return t?pF():eF()}function eF(){mn(hh(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(uh),{basename:e,navigator:n}=A.useContext(Wa),{matches:r}=A.useContext(_a),{pathname:i}=ir(),a=JSON.stringify(q_(r)),o=A.useRef(!1);return W5(()=>{o.current=!0}),A.useCallback((u,h={})=>{if(Ji(o.current,H5),!o.current)return;if(typeof u=="number"){n.go(u);return}let m=Q_(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:al([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,a,i,t])}var tF=A.createContext(null);function sF(t){let e=A.useContext(_a).outlet;return e&&A.createElement(tF.Provider,{value:t},e)}function Cx(){let{matches:t}=A.useContext(_a),e=t[t.length-1];return e?e.params:{}}function Tp(t,{relative:e}={}){let{matches:n}=A.useContext(_a),{pathname:r}=ir(),i=JSON.stringify(q_(n));return A.useMemo(()=>Q_(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function nF(t,e){return K5(t,e)}function K5(t,e,n,r,i){var P;mn(hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Wa),{matches:o}=A.useContext(_a),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",g=c&&c.route;{let N=g&&g.path||"";q5(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=ir(),b;if(e){let N=typeof e=="string"?Td(e):e;mn(m==="/"||((P=N.pathname)==null?void 0:P.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${N.pathname}" was given in the \`location\` prop.`),b=N}else b=v;let _=b.pathname||"/",k=_;if(m!=="/"){let N=m.replace(/^\//,"").split("/");k="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let I=O5(t,{pathname:k});Ji(g||I!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ji(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=lF(I&&I.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:al([m,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:al([m,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,r,i);return e&&R?A.createElement(Cp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},R):R}function rF(){let t=mF(),e=QM(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,o)}var iF=A.createElement(rF,null),aF=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(_a.Provider,{value:this.props.routeContext},A.createElement(Y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oF({routeContext:t,match:e,children:n}){let r=A.useContext(uh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(_a.Provider,{value:t},n)}function lF(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);mn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:g,errors:v}=n,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,m,g)=>{let v,b=!1,_=null,k=null;n&&(v=o&&m.route.id?o[m.route.id]:void 0,_=m.route.errorElement||iF,c&&(u<0&&g===0?(q5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,k=null):u===g&&(b=!0,k=m.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,g+1)),R=()=>{let P;return v?P=_:b?P=k:m.route.Component?P=A.createElement(m.route.Component,null):m.route.element?P=m.route.element:P=h,A.createElement(oF,{match:m,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:P})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?A.createElement(aF,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:R(),routeContext:{outlet:null,matches:I,isDataRoute:!0},unstable_onError:r}):R()},null)}function X_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cF(t){let e=A.useContext(uh);return mn(e,X_(t)),e}function dF(t){let e=A.useContext(kx);return mn(e,X_(t)),e}function uF(t){let e=A.useContext(_a);return mn(e,X_(t)),e}function J_(t){let e=uF(t),n=e.matches[e.matches.length-1];return mn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function hF(){return J_("useRouteId")}function mF(){var r;let t=A.useContext(Y_),e=dF("useRouteError"),n=J_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function pF(){let{router:t}=cF("useNavigate"),e=J_("useNavigate"),n=A.useRef(!1);return W5(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Ji(n.current,H5),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var XN={};function q5(t,e,n){!e&&!XN[t]&&(XN[t]=!0,Ji(!1,n))}A.memo(gF);function gF({routes:t,future:e,state:n,unstable_onError:r}){return K5(t,void 0,n,r,e)}function uo({to:t,replace:e,state:n,relative:r}){mn(hh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=A.useContext(Wa);Ji(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=A.useContext(_a),{pathname:o}=ir(),c=hi(),u=Q_(t,q_(a),o,r==="path"),h=JSON.stringify(u);return A.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:r})},[c,h,r,e,n]),null}function Q5(t){return sF(t.context)}function Se(t){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fF({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){mn(!hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Td(n));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let _=cl(u,o);return _==null?null:{location:{pathname:_,search:h,hash:m,state:g,key:v},navigationType:r}},[o,u,h,m,g,v,r]);return Ji(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Wa.Provider,{value:c},A.createElement(Cp.Provider,{children:e,value:b}))}function vF({children:t,location:e}){return nF(z1(t),e)}function z1(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,z1(r.props.children,a));return}mn(r.type===Se,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=z1(r.props.children,a)),n.push(o)}),n}var Xf="get",Jf="application/x-www-form-urlencoded";function Tx(t){return t!=null&&typeof t.tagName=="string"}function xF(t){return Tx(t)&&t.tagName.toLowerCase()==="button"}function yF(t){return Tx(t)&&t.tagName.toLowerCase()==="form"}function bF(t){return Tx(t)&&t.tagName.toLowerCase()==="input"}function _F(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wF(t,e){return t.button===0&&(!e||e==="_self")&&!_F(t)}function G1(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function jF(t,e){let n=G1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var hf=null;function SF(){if(hf===null)try{new FormData(document.createElement("form"),0),hf=!1}catch(t){hf=!0}return hf}var NF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function K0(t){return t!=null&&!NF.has(t)?(Ji(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jf}"`),null):t}function kF(t,e){let n,r,i,a,o;if(yF(t)){let c=t.getAttribute("action");r=c?cl(c,e):null,n=t.getAttribute("method")||Xf,i=K0(t.getAttribute("enctype"))||Jf,a=new FormData(t)}else if(xF(t)||bF(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?cl(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Xf,i=K0(t.getAttribute("formenctype"))||K0(c.getAttribute("enctype"))||Jf,a=new FormData(c,t),!SF()){let{name:h,type:m,value:g}=t;if(m==="image"){let v=h?`${h}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else h&&a.append(h,g)}}else{if(Tx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xf,r=null,i=Jf,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Z_(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function CF(t,e,n){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&cl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function TF(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function EF(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await TF(a,n);return o.links?o.links():[]}return[]}));return LF(r.flat(1).filter(IF).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function JN(t,e,n,r,i,a){let o=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var m;return n[h].pathname!==u.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{var g;let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function AF(t,e,{includeHydrateFallback:n}={}){return PF(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function PF(t){return[...new Set(t)]}function RF(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function LF(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(RF(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function Y5(){let t=A.useContext(uh);return Z_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function DF(){let t=A.useContext(kx);return Z_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ew=A.createContext(void 0);ew.displayName="FrameworkContext";function X5(){let t=A.useContext(ew);return Z_(t,"You must render this element inside a <HydratedRouter> element"),t}function MF(t,e){let n=A.useContext(ew),[r,i]=A.useState(!1),[a,o]=A.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,v=A.useRef(null);A.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let k=R=>{R.forEach(P=>{o(P.isIntersecting)})},I=new IntersectionObserver(k,{threshold:.5});return v.current&&I.observe(v.current),()=>{I.disconnect()}}},[t]),A.useEffect(()=>{if(r){let k=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(k)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:am(c,b),onBlur:am(u,_),onMouseEnter:am(h,b),onMouseLeave:am(m,_),onTouchStart:am(g,b)}]:[!1,v,{}]}function am(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function FF({page:t,...e}){let{router:n}=Y5(),r=A.useMemo(()=>O5(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement($F,{page:t,matches:r,...e}):null}function BF(t){let{manifest:e,routeModules:n}=X5(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return EF(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function $F({page:t,matches:e,...n}){let r=ir(),{manifest:i,routeModules:a}=X5(),{basename:o}=Y5(),{loaderData:c,matches:u}=DF(),h=A.useMemo(()=>JN(t,e,u,i,r,"data"),[t,e,u,i,r]),m=A.useMemo(()=>JN(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,k=!1;if(e.forEach(R=>{var N;let P=i.routes[R.route.id];!P||!P.hasLoader||(!h.some(x=>x.route.id===R.route.id)&&R.route.id in c&&((N=a[R.route.id])!=null&&N.shouldRevalidate)||P.hasClientLoader?k=!0:_.add(R.route.id))}),_.size===0)return[];let I=CF(t,o,"data");return k&&_.size>0&&I.searchParams.set("_routes",e.filter(R=>_.has(R.route.id)).map(R=>R.route.id).join(",")),[I.pathname+I.search]},[o,c,r,i,h,e,t,a]),v=A.useMemo(()=>AF(m,i),[m,i]),b=BF(m);return A.createElement(A.Fragment,null,g.map(_=>A.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),v.map(_=>A.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),b.map(({key:_,link:k})=>A.createElement("link",{key:_,nonce:n.nonce,...k})))}function OF(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var J5=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{J5&&(window.__reactRouterVersion="7.9.1")}catch(t){}function VF({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=kM({window:n,v5Compat:!0}));let i=r.current,[a,o]=A.useState({action:i.action,location:i.location}),c=A.useCallback(u=>{A.startTransition(()=>o(u))},[o]);return A.useLayoutEffect(()=>i.listen(c),[i,c]),A.createElement(fF,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var Z5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gs=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:g,...v},b){let{basename:_}=A.useContext(Wa),k=typeof h=="string"&&Z5.test(h),I,R=!1;if(typeof h=="string"&&k&&(I=h,J5))try{let C=new URL(window.location.href),M=h.startsWith("//")?new URL(C.protocol+h):new URL(h),T=cl(M.pathname,_);M.origin===C.origin&&T!=null?h=T+M.search+M.hash:R=!0}catch(C){Ji(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=ZM(h,{relative:i}),[N,x,w]=MF(r,v),L=GF(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:g});function j(C){e&&e(C),C.defaultPrevented||L(C)}let S=A.createElement("a",{...v,...w,href:I||P,onClick:R||a?e:j,ref:OF(b,x),target:u,"data-discover":!k&&n==="render"?"true":void 0});return N&&!k?A.createElement(A.Fragment,null,S,A.createElement(FF,{page:P})):S});Gs.displayName="Link";var $s=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},m){let g=Tp(o,{relative:h.relative}),v=ir(),b=A.useContext(kx),{navigator:_,basename:k}=A.useContext(Wa),I=b!=null&&QF(g)&&c===!0,R=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,P=v.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(P=P.toLowerCase(),N=N?N.toLowerCase():null,R=R.toLowerCase()),N&&k&&(N=cl(N,k)||N);const x=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let w=P===R||!i&&P.startsWith(R)&&P.charAt(x)==="/",L=N!=null&&(N===R||!i&&N.startsWith(R)&&N.charAt(R.length)==="/"),j={isActive:w,isPending:L,isTransitioning:I},S=w?e:void 0,C;typeof r=="function"?C=r(j):C=[r,w?"active":null,L?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(j):a;return A.createElement(Gs,{...h,"aria-current":S,className:C,ref:m,style:M,to:o,viewTransition:c},typeof u=="function"?u(j):u)});$s.displayName="NavLink";var UF=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Xf,action:c,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:g,...v},b)=>{let _=KF(),k=qF(c,{relative:h}),I=o.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&Z5.test(c),P=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let x=N.nativeEvent.submitter,w=(x==null?void 0:x.getAttribute("formmethod"))||o;_(x||N.currentTarget,{fetcherKey:e,method:w,navigate:n,replace:i,state:a,relative:h,preventScrollReset:m,viewTransition:g})};return A.createElement("form",{ref:b,method:I,action:k,onSubmit:r?u:P,...v,"data-discover":!R&&t==="render"?"true":void 0})});UF.displayName="Form";function zF(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eE(t){let e=A.useContext(uh);return mn(e,zF(t)),e}function GF(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=hi(),u=ir(),h=Tp(t,{relative:a});return A.useCallback(m=>{if(wF(m,e)){m.preventDefault();let g=n!==void 0?n:np(u)===np(h);c(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,n,r,e,t,i,a,o])}function ar(t){Ji(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(G1(t)),n=A.useRef(!1),r=ir(),i=A.useMemo(()=>jF(r.search,n.current?null:e.current),[r.search]),a=hi(),o=A.useCallback((c,u)=>{const h=G1(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var HF=0,WF=()=>`__${String(++HF)}__`;function KF(){let{router:t}=eE("useSubmit"),{basename:e}=A.useContext(Wa),n=hF();return A.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=kF(r,e);if(i.navigate===!1){let m=i.fetcherKey||WF();await t.fetch(m,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function qF(t,{relative:e}={}){let{basename:n}=A.useContext(Wa),r=A.useContext(_a);mn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Tp(t||".",{relative:e})},o=ir();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:al([n,a.pathname])),np(a)}function QF(t,{relative:e}={}){let n=A.useContext(G5);mn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=eE("useViewTransitionState"),i=Tp(t,{relative:e});if(!n.isTransitioning)return!1;let a=cl(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=cl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tv(i.pathname,o)!=null||Tv(i.pathname,a)!=null}var tE=R5();const YF=W_(tE);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ZN=t=>{const e=JF(t);return e.charAt(0).toUpperCase()+e.slice(1)},sE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),ZF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>A.createElement("svg",{ref:u,...e7,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:sE("lucide",i),...!a&&!ZF(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>A.createElement(h,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(t7,{ref:a,iconNode:e,className:sE(`lucide-${XF(ZN(t))}`,`lucide-${t}`,r),...i}));return n.displayName=ZN(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],Ix=Gt("aperture",s7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],r7=Gt("arrow-up-right",n7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],a7=Gt("ban",i7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],l7=Gt("bell",o7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],d7=Gt("book-open",c7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],h7=Gt("chart-column",u7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],p7=Gt("chevron-right",m7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rm=Gt("circle-alert",g7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v7=Gt("circle-check",f7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Zf=Gt("circle-dot",x7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b7=Gt("circle-user-round",y7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],w7=Gt("clock-3",_7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],S7=Gt("cloud-upload",j7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k7=Gt("compass",N7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],T7=Gt("database",C7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],nE=Gt("diamond",I7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],A7=Gt("file-text",E7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],R7=Gt("folder-search",P7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],D7=Gt("globe",L7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],rE=Gt("hexagon",M7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],B7=Gt("house",F7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],O7=Gt("layers",$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],U7=Gt("layout-dashboard",V7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hc=Gt("loader-circle",z7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],H7=Gt("menu",G7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],K7=Gt("messages-square",W7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Q7=Gt("pencil",q7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],X7=Gt("pin-off",Y7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Z7=Gt("pin",J7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Ex=Gt("refresh-ccw",e9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],s9=Gt("scroll-text",t9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Iv=Gt("search",n9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],i9=Gt("server-cog",r9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o9=Gt("settings",a9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],iE=Gt("shapes",l9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],aE=Gt("shield-alert",c9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],u9=Gt("shield-check",d9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],oE=Gt("shield-off",h9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Id=Gt("shield",m9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],g9=Gt("square-activity",p9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],v9=Gt("star",f9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],y9=Gt("sticky-note",x9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_9=Gt("trash-2",b9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tw=Gt("triangle-alert",w9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],S9=Gt("trophy",j9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],k9=Gt("upload",N9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ax=Gt("users",C9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],I9=Gt("wrench",T9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lE=Gt("zap",E9),A9="_topbar_y7gox_3",P9="_topbarLeft_y7gox_39",R9="_searchWrap_y7gox_55",L9="_topbarRight_y7gox_109",D9="_mobileSearchBtn_y7gox_123",M9="_ico_y7gox_133",F9="_btnIco_y7gox_147",B9="_pill_y7gox_181",$9="_pillActive_y7gox_203",O9="_onlyExpanded_y7gox_211",V9="_topbarNav_y7gox_213",U9="_topbarLink_y7gox_223",z9="_gameLinkButton_y7gox_231",G9="_upload_y7gox_265",H9="_label_y7gox_295",W9="_avatarBtn_y7gox_301",K9="_avatar_y7gox_301",q9="_avatarSpinnerShell_y7gox_329",Q9="_avatarSpinner_y7gox_329",Y9="_srOnly_y7gox_365",X9="_accountRoot_y7gox_391",J9="_accountDropdown_y7gox_399",Z9="_accountHeader_y7gox_429",eB="_accountName_y7gox_441",tB="_accountSub_y7gox_453",sB="_accountStatusText_y7gox_463",nB="_accountPrimary_y7gox_473",rB="_accountHint_y7gox_495",iB="_accountItem_y7gox_505",aB="_accountDivider_y7gox_535",oB="_accountMiniAvatar_y7gox_547",lB="_accountLogout_y7gox_559",cB="_mobileSearchPanel_y7gox_589",dB="_mobileSearchOverlay_y7gox_617",qt={topbar:A9,topbarLeft:P9,searchWrap:R9,topbarRight:L9,mobileSearchBtn:D9,ico:M9,btnIco:F9,pill:B9,pillActive:$9,onlyExpanded:O9,topbarNav:V9,topbarLink:U9,gameLinkButton:z9,upload:G9,label:H9,avatarBtn:W9,avatar:K9,avatarSpinnerShell:q9,avatarSpinner:Q9,srOnly:Y9,accountRoot:X9,accountDropdown:J9,accountHeader:Z9,accountName:eB,accountSub:tB,accountStatusText:sB,accountPrimary:nB,accountHint:rB,accountItem:iB,accountDivider:aB,accountMiniAvatar:oB,accountLogout:lB,mobileSearchPanel:cB,mobileSearchOverlay:dB},Ka="https://auth.sfdatahub.com",uB=`${Ka}/auth/firebase-token`;async function hB(){var r,i;const t=await fetch(uB,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),n=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!n)throw new Error("Firebase token missing in response");return n}var ek={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=a>>2,g=(a&3)<<4|c>>4;let v=(c&15)<<2|h>>6,b=h&63;u||(b=64,o||(v=64)),r.push(n[m],n[g],n[v],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||g==null)throw new pB;const v=a<<2|c>>4;if(r.push(v),h!==64){const b=c<<4&240|h>>2;if(r.push(b),g!==64){const _=h<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gB=function(t){const e=cE(t);return dE.encodeByteArray(e,!0)},Ev=function(t){return gB(t).replace(/\./g,"")},uE=function(t){try{return dE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=()=>fB().__FIREBASE_DEFAULTS__,xB=()=>{if(typeof process=="undefined"||typeof ek=="undefined")return;const t=ek.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yB=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&uE(t[1]);return e&&JSON.parse(e)},Px=()=>{try{return vB()||xB()||yB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hE=t=>{var e,n;return(n=(e=Px())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bB=t=>{const e=hE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mE=()=>{var t;return(t=Px())===null||t===void 0?void 0:t.config},pE=t=>{var e;return(e=Px())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ev(JSON.stringify(n)),Ev(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jB(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qr())}function SB(){var t;const e=(t=Px())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function NB(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function kB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TB(){const t=Qr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IB(){return!SB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EB(){try{return typeof indexedDB=="object"}catch(t){return!1}}function AB(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB="FirebaseError";class xl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PB,Object.setPrototypeOf(this,xl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ip.prototype.create)}}class Ip{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?RB(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new xl(i,c,r)}}function RB(t,e){return t.replace(LB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const LB=/\{\$([^}]+)}/g;function DB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Av(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(tk(a)&&tk(o)){if(!Av(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function MB(t,e){const n=new FB(t,e);return n.subscribe.bind(n)}class FB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=q0),i.error===void 0&&(i.error=q0),i.complete===void 0&&(i.complete=q0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){return t&&t._delegate?t._delegate:t}class yd{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _B;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VB(e))try{this.getOrInitializeService({instanceIdentifier:td})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=td){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=td){return this.instances.has(e)}getOptions(e=td){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=td){return this.component?this.component.multipleInstances?e:td:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OB(t){return t===td?void 0:t}function VB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $B(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ss;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ss||(Ss={}));const zB={debug:Ss.DEBUG,verbose:Ss.VERBOSE,info:Ss.INFO,warn:Ss.WARN,error:Ss.ERROR,silent:Ss.SILENT},GB=Ss.INFO,HB={[Ss.DEBUG]:"log",[Ss.VERBOSE]:"log",[Ss.INFO]:"info",[Ss.WARN]:"warn",[Ss.ERROR]:"error"},WB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=HB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sw{constructor(e){this.name=e,this._logLevel=GB,this._logHandler=WB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ss))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ss.DEBUG,...e),this._logHandler(this,Ss.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ss.VERBOSE,...e),this._logHandler(this,Ss.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ss.INFO,...e),this._logHandler(this,Ss.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ss.WARN,...e),this._logHandler(this,Ss.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ss.ERROR,...e),this._logHandler(this,Ss.ERROR,...e)}}const KB=(t,e)=>e.some(n=>t instanceof n);let sk,nk;function qB(){return sk||(sk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QB(){return nk||(nk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gE=new WeakMap,H1=new WeakMap,fE=new WeakMap,Q0=new WeakMap,nw=new WeakMap;function YB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(mc(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gE.set(n,t)}).catch(()=>{}),nw.set(e,t),e}function XB(t){if(H1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});H1.set(t,e)}let W1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JB(t){W1=t(W1)}function ZB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Y0(this),e,...n);return fE.set(r,e.sort?e.sort():[e]),mc(r)}:QB().includes(t)?function(...e){return t.apply(Y0(this),e),mc(gE.get(this))}:function(...e){return mc(t.apply(Y0(this),e))}}function e$(t){return typeof t=="function"?ZB(t):(t instanceof IDBTransaction&&XB(t),KB(t,qB())?new Proxy(t,W1):t)}function mc(t){if(t instanceof IDBRequest)return YB(t);if(Q0.has(t))return Q0.get(t);const e=e$(t);return e!==t&&(Q0.set(t,e),nw.set(e,t)),e}const Y0=t=>nw.get(t);function t$(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=mc(o);return r&&o.addEventListener("upgradeneeded",u=>{r(mc(o.result),u.oldVersion,u.newVersion,mc(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const s$=["get","getKey","getAll","getAllKeys","count"],n$=["put","add","delete","clear"],X0=new Map;function rk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(X0.get(e))return X0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=n$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||s$.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return X0.set(e,a),a}JB(t=>({...t,get:(e,n,r)=>rk(e,n)||t.get(e,n,r),has:(e,n)=>!!rk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const K1="@firebase/app",ik="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new sw("@firebase/app"),a$="@firebase/app-compat",o$="@firebase/analytics-compat",l$="@firebase/analytics",c$="@firebase/app-check-compat",d$="@firebase/app-check",u$="@firebase/auth",h$="@firebase/auth-compat",m$="@firebase/database",p$="@firebase/data-connect",g$="@firebase/database-compat",f$="@firebase/functions",v$="@firebase/functions-compat",x$="@firebase/installations",y$="@firebase/installations-compat",b$="@firebase/messaging",_$="@firebase/messaging-compat",w$="@firebase/performance",j$="@firebase/performance-compat",S$="@firebase/remote-config",N$="@firebase/remote-config-compat",k$="@firebase/storage",C$="@firebase/storage-compat",T$="@firebase/firestore",I$="@firebase/vertexai-preview",E$="@firebase/firestore-compat",A$="firebase",P$="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="[DEFAULT]",R$={[K1]:"fire-core",[a$]:"fire-core-compat",[l$]:"fire-analytics",[o$]:"fire-analytics-compat",[d$]:"fire-app-check",[c$]:"fire-app-check-compat",[u$]:"fire-auth",[h$]:"fire-auth-compat",[m$]:"fire-rtdb",[p$]:"fire-data-connect",[g$]:"fire-rtdb-compat",[f$]:"fire-fn",[v$]:"fire-fn-compat",[x$]:"fire-iid",[y$]:"fire-iid-compat",[b$]:"fire-fcm",[_$]:"fire-fcm-compat",[w$]:"fire-perf",[j$]:"fire-perf-compat",[S$]:"fire-rc",[N$]:"fire-rc-compat",[k$]:"fire-gcs",[C$]:"fire-gcs-compat",[T$]:"fire-fst",[E$]:"fire-fst-compat",[I$]:"fire-vertex","fire-js":"fire-js",[A$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new Map,L$=new Map,Q1=new Map;function ak(t,e){try{t.container.addComponent(e)}catch(n){dl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qu(t){const e=t.name;if(Q1.has(e))return dl.debug(`There were multiple attempts to register component ${e}.`),!1;Q1.set(e,t);for(const n of rp.values())ak(n,t);for(const n of L$.values())ak(n,t);return!0}function rw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pc=new Ip("app","Firebase",D$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=P$;function vE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:q1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pc.create("bad-app-name",{appName:String(i)});if(n||(n=mE()),!n)throw pc.create("no-options");const a=rp.get(i);if(a){if(Av(n,a.options)&&Av(r,a.config))return a;throw pc.create("duplicate-app",{appName:i})}const o=new UB(i);for(const u of Q1.values())o.addComponent(u);const c=new M$(n,r,o);return rp.set(i,c),c}function iw(t=q1){const e=rp.get(t);if(!e&&t===q1&&mE())return vE();if(!e)throw pc.create("no-app",{appName:t});return e}function F$(){return Array.from(rp.values())}function gc(t,e,n){var r;let i=(r=R$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dl.warn(c.join(" "));return}Qu(new yd(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$="firebase-heartbeat-database",$$=1,ip="firebase-heartbeat-store";let J0=null;function xE(){return J0||(J0=t$(B$,$$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ip)}catch(n){console.warn(n)}}}}).catch(t=>{throw pc.create("idb-open",{originalErrorMessage:t.message})})),J0}async function O$(t){try{const n=(await xE()).transaction(ip),r=await n.objectStore(ip).get(yE(t));return await n.done,r}catch(e){if(e instanceof xl)dl.warn(e.message);else{const n=pc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dl.warn(n.message)}}}async function ok(t,e){try{const r=(await xE()).transaction(ip,"readwrite");await r.objectStore(ip).put(e,yE(t)),await r.done}catch(n){if(n instanceof xl)dl.warn(n.message);else{const r=pc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dl.warn(r.message)}}}function yE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=1024,U$=720*60*60*1e3;class z${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new H$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=U$}),this._storage.overwrite(this._heartbeatsCache))}catch(r){dl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lk(),{heartbeatsToSend:r,unsentEntries:i}=G$(this._heartbeatsCache.heartbeats),a=Ev(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return dl.warn(n),""}}}function lk(){return new Date().toISOString().substring(0,10)}function G$(t,e=V$){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),ck(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ck(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class H${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EB()?AB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ok(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ok(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ck(t){return Ev(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){Qu(new yd("platform-logger",e=>new r$(e),"PRIVATE")),Qu(new yd("heartbeat",e=>new z$(e),"PRIVATE")),gc(K1,ik,t),gc(K1,ik,"esm2017"),gc("fire-js","")}W$("");var K$="firebase",q$="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gc(K$,q$,"app");function aw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q$=bE,_E=new Ip("auth","Firebase",bE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new sw("@firebase/auth");function Y$(t,...e){Pv.logLevel<=Ss.WARN&&Pv.warn(`Auth (${mh}): ${t}`,...e)}function ev(t,...e){Pv.logLevel<=Ss.ERROR&&Pv.error(`Auth (${mh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,...e){throw lw(t,...e)}function za(t,...e){return lw(t,...e)}function ow(t,e,n){const r=Object.assign(Object.assign({},Q$()),{[e]:n});return new Ip("auth","Firebase",r).create(e,{appName:t.name})}function fc(t){return ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X$(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_o(t,"argument-error"),ow(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _E.create(t,...e)}function Jt(t,e,...n){if(!t)throw lw(e,...n)}function tl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ev(e),new Error(e)}function ul(t,e){t||tl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J$(){return dk()==="http:"||dk()==="https:"}function dk(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J$()||kB()||"connection"in navigator)?navigator.onLine:!0}function eO(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.shortDelay=e,this.longDelay=n,ul(n>e,"Short delay should be less than long delay!"),this.isMobile=jB()||CB()}get(){return Z$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){ul(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;tl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;tl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;tl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Ap(3e4,6e4);function Rx(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ph(t,e,n,r,i={}){return jE(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Ep(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return NB()||(h.referrerPolicy="no-referrer"),wE.fetch()(NE(t,t.config.apiHost,n,c),h)})}async function jE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tO),e);try{const i=new nO(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw mf(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw mf(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw mf(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ow(t,m,h);_o(t,m)}}catch(i){if(i instanceof xl)throw i;_o(t,"network-request-failed",{message:String(i)})}}async function SE(t,e,n,r,i={}){const a=await ph(t,e,n,r,i);return"mfaPendingCredential"in a&&_o(t,"multi-factor-auth-required",{_serverResponse:a}),a}function NE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?cw(t.config,i):`${t.config.apiScheme}://${i}`}class nO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(za(this.auth,"network-request-failed")),sO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=za(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e){return ph(t,"POST","/v1/accounts:delete",e)}async function kE(t,e){return ph(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function iO(t,e=!1){const n=Yn(t),r=await n.getIdToken(e),i=dw(r);Jt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Lm(Z0(i.auth_time)),issuedAtTime:Lm(Z0(i.iat)),expirationTime:Lm(Z0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Z0(t){return Number(t)*1e3}function dw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ev("JWT malformed, contained fewer than 3 sections"),null;try{const i=uE(n);return i?JSON.parse(i):(ev("Failed to decode base64 JWT payload"),null)}catch(i){return ev("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function uk(t){const e=dw(t);return Jt(e,"internal-error"),Jt(typeof e.exp!="undefined","internal-error"),Jt(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xl&&aO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lm(this.lastLoginAt),this.creationTime=Lm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ap(t,kE(n,{idToken:r}));Jt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?CE(a.providerUserInfo):[],c=cO(t.providerData,o),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),m=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new X1(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function lO(t){const e=Yn(t);await Rv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CE(t){return t.map(e=>{var{providerId:n}=e,r=aw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){const n=await jE(t,{},async()=>{const r=Ep({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=NE(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",wE.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uO(t,e){return ph(t,"POST","/v2/accounts:revokeToken",Rx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Jt(e.idToken,"internal-error"),Jt(typeof e.idToken!="undefined","internal-error"),Jt(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):uk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Jt(e.length!==0,"internal-error");const n=uk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Jt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await dO(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Uu;return r&&(Jt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Jt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Jt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uu,this.toJSON())}_performRefresh(){return tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t,e){Jt(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class sl{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=aw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new X1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await ap(this,this.stsTokenManager.getToken(this.auth,e));return Jt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iO(this,e)}reload(){return lO(this)}_assign(e){this!==e&&(Jt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mo(this.auth.app))return Promise.reject(fc(this.auth));const e=await this.getIdToken();return await ap(this,rO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,h,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,b=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,I=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,R=(h=n.createdAt)!==null&&h!==void 0?h:void 0,P=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:N,emailVerified:x,isAnonymous:w,providerData:L,stsTokenManager:j}=n;Jt(N&&j,e,"internal-error");const S=Uu.fromJSON(this.name,j);Jt(typeof N=="string",e,"internal-error"),zl(g,e.name),zl(v,e.name),Jt(typeof x=="boolean",e,"internal-error"),Jt(typeof w=="boolean",e,"internal-error"),zl(b,e.name),zl(_,e.name),zl(k,e.name),zl(I,e.name),zl(R,e.name),zl(P,e.name);const C=new sl({uid:N,auth:e,email:v,emailVerified:x,displayName:g,isAnonymous:w,photoURL:_,phoneNumber:b,tenantId:k,stsTokenManager:S,createdAt:R,lastLoginAt:P});return L&&Array.isArray(L)&&(C.providerData=L.map(M=>Object.assign({},M))),I&&(C._redirectEventId=I),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Uu;i.updateFromServerResponse(n);const a=new sl({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Jt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?CE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Uu;c.updateFromIdToken(r);const u=new sl({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new X1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new Map;function nl(t){ul(t instanceof Function,"Expected a class definition");let e=hk.get(t);return e?(ul(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TE.type="NONE";const mk=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){return`firebase:${t}:${e}:${n}`}class zu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=tv(this.userKey,i.apiKey,a),this.fullPersistenceKey=tv("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zu(nl(mk),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||nl(mk);const o=tv(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(o);if(m){const g=sl._fromJSON(e,m);h!==a&&(c=g),a=h;break}}catch(m){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new zu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch(m){}})),new zu(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LE(e))return"Blackberry";if(DE(e))return"Webos";if(EE(e))return"Safari";if((e.includes("chrome/")||AE(e))&&!e.includes("edge/"))return"Chrome";if(RE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IE(t=Qr()){return/firefox\//i.test(t)}function EE(t=Qr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AE(t=Qr()){return/crios\//i.test(t)}function PE(t=Qr()){return/iemobile/i.test(t)}function RE(t=Qr()){return/android/i.test(t)}function LE(t=Qr()){return/blackberry/i.test(t)}function DE(t=Qr()){return/webos/i.test(t)}function uw(t=Qr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hO(t=Qr()){var e;return uw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mO(){return TB()&&document.documentMode===10}function ME(t=Qr()){return uw(t)||RE(t)||DE(t)||LE(t)||/windows phone/i.test(t)||PE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e=[]){let n;switch(t){case"Browser":n=pk(Qr());break;case"Worker":n=`${pk(Qr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(t,e={}){return ph(t,"GET","/v2/passwordPolicy",Rx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=6;class vO{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gk(this),this.idTokenSubscription=new gk(this),this.beforeStateQueue=new pO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nl(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kE(this,{idToken:e}),r=await sl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mo(this.app))return Promise.reject(fc(this));const n=e?Yn(e):null;return n&&Jt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Jt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mo(this.app)?Promise.reject(fc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mo(this.app)?Promise.reject(fc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gO(this),n=new vO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ip("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nl(e)||this._popupRedirectResolver;Jt(n,this,"argument-error"),this.redirectPersistenceManager=await zu.create(this,[nl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Y$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pp(t){return Yn(t)}class gk{constructor(e){this.auth=e,this.observer=null,this.addObserver=MB(n=>this.observer=n)}get next(){return Jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yO(t){hw=t}function bO(t){return hw.loadJS(t)}function _O(){return hw.gapiScript}function wO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){const n=rw(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Av(a,e!=null?e:{}))return i;_o(i,"already-initialized")}return n.initialize({options:e})}function SO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NO(t,e,n){const r=Pp(t);Jt(r._canInitEmulator,r,"emulator-config-failed"),Jt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=BE(e),{host:o,port:c}=kO(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),CO()}function BE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kO(t){const e=BE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:fk(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:fk(o)}}}function fk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tl("not implemented")}_getIdTokenResponse(e){return tl("not implemented")}_linkToIdToken(e,n){return tl("not implemented")}_getReauthenticationResolver(e){return tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t,e){return SE(t,"POST","/v1/accounts:signInWithIdp",Rx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="http://localhost";class bd extends $E{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_o("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=aw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bd(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gu(e,n)}buildRequest(){const e={requestUri:TO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ep(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp extends mw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Rp{constructor(){super("facebook.com")}static credential(e){return bd._fromParams({providerId:tc.PROVIDER_ID,signInMethod:tc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tc.credentialFromTaggedObject(e)}static credentialFromError(e){return tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tc.credential(e.oauthAccessToken)}catch(n){return null}}}tc.FACEBOOK_SIGN_IN_METHOD="facebook.com";tc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Rp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bd._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return el.credential(n,r)}catch(i){return null}}}el.GOOGLE_SIGN_IN_METHOD="google.com";el.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Rp{constructor(){super("github.com")}static credential(e){return bd._fromParams({providerId:sc.PROVIDER_ID,signInMethod:sc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sc.credentialFromTaggedObject(e)}static credentialFromError(e){return sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sc.credential(e.oauthAccessToken)}catch(n){return null}}}sc.GITHUB_SIGN_IN_METHOD="github.com";sc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Rp{constructor(){super("twitter.com")}static credential(e,n){return bd._fromParams({providerId:nc.PROVIDER_ID,signInMethod:nc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return nc.credentialFromTaggedObject(e)}static credentialFromError(e){return nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return nc.credential(n,r)}catch(i){return null}}}nc.TWITTER_SIGN_IN_METHOD="twitter.com";nc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await sl._fromIdTokenResponse(e,r,i),o=vk(r);return new _d({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=vk(r);return new _d({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function vk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends xl{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Lv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Lv(e,n,r,i)}}function OE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Lv._fromErrorAndOperation(t,a,e,r):a})}async function IO(t,e,n=!1){const r=await ap(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _d._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e,n=!1){const{auth:r}=t;if(mo(r.app))return Promise.reject(fc(r));const i="reauthenticate";try{const a=await ap(t,OE(r,i,e,t),n);Jt(a.idToken,r,"internal-error");const o=dw(a.idToken);Jt(o,r,"internal-error");const{sub:c}=o;return Jt(t.uid===c,r,"user-mismatch"),_d._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&_o(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e,n=!1){if(mo(t.app))return Promise.reject(fc(t));const r="signIn",i=await OE(t,r,e),a=await _d._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t,e){return SE(t,"POST","/v1/accounts:signInWithCustomToken",Rx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e){if(mo(t.app))return Promise.reject(fc(t));const n=Pp(t),r=await PO(n,{token:e,returnSecureToken:!0}),i=await _d._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function RO(t,e,n,r){return Yn(t).onIdTokenChanged(e,n,r)}function LO(t,e,n){return Yn(t).beforeAuthStateChanged(e,n)}function DO(t,e,n,r){return Yn(t).onAuthStateChanged(e,n,r)}function MO(t){return Yn(t).signOut()}const Dv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dv,"1"),this.storage.removeItem(Dv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1e3,BO=10;class UE extends VE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ME(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);mO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const $O=UE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends VE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zE.type="SESSION";const GE=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Lx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await OO(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=pw("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(v.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(){return window}function UO(t){po().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof po().WorkerGlobalScope!="undefined"&&typeof po().importScripts=="function"}async function zO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function GO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HO(){return HE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebaseLocalStorageDb",WO=1,Mv="firebaseLocalStorage",KE="fbase_key";class Lp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dx(t,e){return t.transaction([Mv],e?"readwrite":"readonly").objectStore(Mv)}function KO(){const t=indexedDB.deleteDatabase(WE);return new Lp(t).toPromise()}function J1(){const t=indexedDB.open(WE,WO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mv,{keyPath:KE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mv)?e(r):(r.close(),await KO(),e(await J1()))})})}async function yk(t,e,n){const r=Dx(t,!0).put({[KE]:e,value:n});return new Lp(r).toPromise()}async function qO(t,e){const n=Dx(t,!1).get(e),r=await new Lp(n).toPromise();return r===void 0?null:r.value}function bk(t,e){const n=Dx(t,!0).delete(e);return new Lp(n).toPromise()}const QO=800,YO=3;class qE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lx._getInstance(HO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zO(),!this.activeServiceWorker)return;this.sender=new VO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J1();return await yk(e,Dv,"1"),await bk(e,Dv),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Dx(i,!1).getAll();return new Lp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qE.type="LOCAL";const XO=qE;new Ap(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t,e){return e?nl(e):(Jt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends $E{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JO(t){return AO(t.auth,new gw(t),t.bypassAuthState)}function ZO(t){const{auth:e,user:n}=t;return Jt(n,e,"internal-error"),EO(n,new gw(t),t.bypassAuthState)}async function eV(t){const{auth:e,user:n}=t;return Jt(n,e,"internal-error"),IO(n,new gw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JO;case"linkViaPopup":case"linkViaRedirect":return eV;case"reauthViaPopup":case"reauthViaRedirect":return ZO;default:_o(this.auth,"internal-error")}}resolve(e){ul(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ul(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Ap(2e3,1e4);async function sV(t,e,n){if(mo(t.app))return Promise.reject(za(t,"operation-not-supported-in-this-environment"));const r=Pp(t);X$(t,e,mw);const i=QE(r,n);return new ad(r,"signInViaPopup",e,i).executeNotNull()}class ad extends YE{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ad.currentPopupAction&&ad.currentPopupAction.cancel(),ad.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Jt(e,this.auth,"internal-error"),e}async onExecution(){ul(this.filter.length===1,"Popup operations only handle one event");const e=pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(za(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(za(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ad.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(za(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tV.get())};e()}}ad.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="pendingRedirect",sv=new Map;class rV extends YE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sv.get(this.auth._key());if(!e){try{const r=await iV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sv.set(this.auth._key(),e)}return this.bypassAuthState||sv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iV(t,e){const n=lV(e),r=oV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aV(t,e){sv.set(t._key(),e)}function oV(t){return nl(t._redirectPersistence)}function lV(t){return tv(nV,t.config.apiKey,t.name)}async function cV(t,e,n=!1){if(mo(t.app))return Promise.reject(fc(t));const r=Pp(t),i=QE(r,e),o=await new rV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=600*1e3;class uV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(za(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dV&&this.cachedEventUids.clear(),this.cachedEventUids.has(_k(e))}saveEventToCache(e){this.cachedEventUids.add(_k(e)),this.lastProcessedEventTime=Date.now()}}function _k(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e={}){return ph(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gV=/^https?/;async function fV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mV(t);for(const n of e)try{if(vV(n))return}catch(r){}_o(t,"unauthorized-domain")}function vV(t){const e=Y1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gV.test(n))return!1;if(pV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new Ap(3e4,6e4);function wk(){const t=po().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yV(t){return new Promise((e,n)=>{var r,i,a;function o(){wk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wk(),n(za(t,"network-request-failed"))},timeout:xV.get()})}if(!((i=(r=po().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=po().gapi)===null||a===void 0)&&a.load)o();else{const c=wO("iframefcb");return po()[c]=()=>{gapi.load?o():n(za(t,"network-request-failed"))},bO(`${_O()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw nv=null,e})}let nv=null;function bV(t){return nv=nv||yV(t),nv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new Ap(5e3,15e3),wV="__/auth/iframe",jV="emulator/auth/iframe",SV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kV(t){const e=t.config;Jt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cw(e,jV):`https://${t.config.authDomain}/${wV}`,r={apiKey:e.apiKey,appName:t.name,v:mh},i=NV.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ep(r).slice(1)}`}async function CV(t){const e=await bV(t),n=po().gapi;return Jt(n,t,"internal-error"),e.open({where:document.body,url:kV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SV,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=za(t,"network-request-failed"),c=po().setTimeout(()=>{a(o)},_V.get());function u(){po().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IV=500,EV=600,AV="_blank",PV="http://localhost";class jk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function RV(t,e,n,r=IV,i=EV){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},TV),{width:r.toString(),height:i.toString(),top:a,left:o}),h=Qr().toLowerCase();n&&(c=AE(h)?AV:n),IE(h)&&(e=e||PV,u.scrollbars="yes");const m=Object.entries(u).reduce((v,[b,_])=>`${v}${b}=${_},`,"");if(hO(h)&&c!=="_self")return LV(e||"",c),new jk(null);const g=window.open(e||"",c,m);Jt(g,t,"popup-blocked");try{g.focus()}catch(v){}return new jk(g)}function LV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="__/auth/handler",MV="emulator/auth/handler",FV=encodeURIComponent("fac");async function Sk(t,e,n,r,i,a){Jt(t.config.authDomain,t,"auth-domain-config-required"),Jt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mh,eventId:i};if(e instanceof mw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof Rp){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),h=u?`#${FV}=${encodeURIComponent(u)}`:"";return`${BV(t)}?${Ep(c).slice(1)}${h}`}function BV({config:t}){return t.emulator?cw(t,MV):`https://${t.authDomain}/${DV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="webStorageSupport";class $V{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GE,this._completeRedirectFn=cV,this._overrideRedirectResult=aV}async _openPopup(e,n,r,i){var a;ul((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Sk(e,n,r,Y1(),i);return RV(e,o,pw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await Sk(e,n,r,Y1(),i);return UO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(ul(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CV(e),r=new uV(e);return n.register("authEvent",i=>(Jt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eb,{type:eb},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[eb];o!==void 0&&n(!!o),_o(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ME()||EE()||uw()}}const OV=$V;var Nk="@firebase/auth",kk="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zV(t){Qu(new yd("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Jt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FE(t)},h=new xO(r,i,a,u);return SO(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qu(new yd("auth-internal",e=>{const n=Pp(e.getProvider("auth").getImmediate());return(r=>new VV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gc(Nk,kk,UV(t)),gc(Nk,kk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=300,HV=pE("authIdTokenMaxAge")||GV;let Ck=null;const WV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HV)return;const i=n==null?void 0:n.token;Ck!==i&&(Ck=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KV(t=iw()){const e=rw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jO(t,{popupRedirectResolver:OV,persistence:[XO,$O,GE]}),r=pE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=WV(a.toString());LO(n,o,()=>o(n.currentUser)),RO(n,c=>o(c))}}const i=hE("auth");return i&&NO(n,`http://${i}`),n}function qV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=za("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",qV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zV("Browser");var Tk=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hd,JE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function C(){}C.prototype=S.prototype,j.D=S.prototype,j.prototype=new C,j.prototype.constructor=j,j.C=function(M,T,F){for(var D=Array(arguments.length-2),V=2;V<arguments.length;V++)D[V-2]=arguments[V];return S.prototype[T].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,S,C){C||(C=0);var M=Array(16);if(typeof S=="string")for(var T=0;16>T;++T)M[T]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(T=0;16>T;++T)M[T]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=j.g[0],C=j.g[1],T=j.g[2];var F=j.g[3],D=S+(F^C&(T^F))+M[0]+3614090360&4294967295;S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[1]+3905402710&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[2]+606105819&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[3]+3250441966&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(F^C&(T^F))+M[4]+4118548399&4294967295,S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[5]+1200080426&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[6]+2821735955&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[7]+4249261313&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(F^C&(T^F))+M[8]+1770035416&4294967295,S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[9]+2336552879&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[10]+4294925233&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[11]+2304563134&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(F^C&(T^F))+M[12]+1804603682&4294967295,S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[13]+4254626195&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[14]+2792965006&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[15]+1236535329&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(T^F&(C^T))+M[1]+4129170786&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[6]+3225465664&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[11]+643717713&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[0]+3921069994&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(T^F&(C^T))+M[5]+3593408605&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[10]+38016083&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[15]+3634488961&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[4]+3889429448&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(T^F&(C^T))+M[9]+568446438&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[14]+3275163606&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[3]+4107603335&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[8]+1163531501&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(T^F&(C^T))+M[13]+2850285829&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[2]+4243563512&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[7]+1735328473&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[12]+2368359562&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(C^T^F)+M[5]+4294588738&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[8]+2272392833&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[11]+1839030562&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[14]+4259657740&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(C^T^F)+M[1]+2763975236&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[4]+1272893353&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[7]+4139469664&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[10]+3200236656&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(C^T^F)+M[13]+681279174&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[0]+3936430074&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[3]+3572445317&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[6]+76029189&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(C^T^F)+M[9]+3654602809&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[12]+3873151461&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[15]+530742520&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[2]+3299628645&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(T^(C|~F))+M[0]+4096336452&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[7]+1126891415&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[14]+2878612391&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[5]+4237533241&4294967295,C=T+(D<<21&4294967295|D>>>11),D=S+(T^(C|~F))+M[12]+1700485571&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[3]+2399980690&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[10]+4293915773&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[1]+2240044497&4294967295,C=T+(D<<21&4294967295|D>>>11),D=S+(T^(C|~F))+M[8]+1873313359&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[15]+4264355552&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[6]+2734768916&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[13]+1309151649&4294967295,C=T+(D<<21&4294967295|D>>>11),D=S+(T^(C|~F))+M[4]+4149444226&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[11]+3174756917&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[2]+718787259&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(T+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+T&4294967295,j.g[3]=j.g[3]+F&4294967295}r.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var C=S-this.blockSize,M=this.B,T=this.h,F=0;F<S;){if(T==0)for(;F<=C;)i(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<S;)if(M[T++]=j.charCodeAt(F++),T==this.blockSize){i(this,M),T=0;break}}else for(;F<S;)if(M[T++]=j[F++],T==this.blockSize){i(this,M),T=0;break}}this.h=T,this.o+=S},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var C=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=C&255,C/=256;for(this.u(j),j=Array(16),S=C=0;4>S;++S)for(var M=0;32>M;M+=8)j[C++]=this.g[S]>>>M&255;return j};function a(j,S){var C=c;return Object.prototype.hasOwnProperty.call(C,j)?C[j]:C[j]=S(j)}function o(j,S){this.h=S;for(var C=[],M=!0,T=j.length-1;0<=T;T--){var F=j[T]|0;M&&F==S||(C[T]=F,M=!1)}this.g=C}var c={};function u(j){return-128<=j&&128>j?a(j,function(S){return new o([S|0],0>S?-1:0)}):new o([j|0],0>j?-1:0)}function h(j){if(isNaN(j)||!isFinite(j))return g;if(0>j)return I(h(-j));for(var S=[],C=1,M=0;j>=C;M++)S[M]=j/C|0,C*=4294967296;return new o(S,0)}function m(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return I(m(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(S,8)),M=g,T=0;T<j.length;T+=8){var F=Math.min(8,j.length-T),D=parseInt(j.substring(T,T+F),S);8>F?(F=h(Math.pow(S,F)),M=M.j(F).add(h(D))):(M=M.j(C),M=M.add(h(D)))}return M}var g=u(0),v=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-I(this).m();for(var j=0,S=1,C=0;C<this.g.length;C++){var M=this.i(C);j+=(0<=M?M:4294967296+M)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(_(this))return"0";if(k(this))return"-"+I(this).toString(j);for(var S=h(Math.pow(j,6)),C=this,M="";;){var T=x(C,S).g;C=R(C,T.j(S));var F=((0<C.g.length?C.g[0]:C.h)>>>0).toString(j);if(C=T,_(C))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function _(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function k(j){return j.h==-1}t.l=function(j){return j=R(this,j),k(j)?-1:_(j)?0:1};function I(j){for(var S=j.g.length,C=[],M=0;M<S;M++)C[M]=~j.g[M];return new o(C,~j.h).add(v)}t.abs=function(){return k(this)?I(this):this},t.add=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0,T=0;T<=S;T++){var F=M+(this.i(T)&65535)+(j.i(T)&65535),D=(F>>>16)+(this.i(T)>>>16)+(j.i(T)>>>16);M=D>>>16,F&=65535,D&=65535,C[T]=D<<16|F}return new o(C,C[C.length-1]&-2147483648?-1:0)};function R(j,S){return j.add(I(S))}t.j=function(j){if(_(this)||_(j))return g;if(k(this))return k(j)?I(this).j(I(j)):I(I(this).j(j));if(k(j))return I(this.j(I(j)));if(0>this.l(b)&&0>j.l(b))return h(this.m()*j.m());for(var S=this.g.length+j.g.length,C=[],M=0;M<2*S;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(var T=0;T<j.g.length;T++){var F=this.i(M)>>>16,D=this.i(M)&65535,V=j.i(T)>>>16,z=j.i(T)&65535;C[2*M+2*T]+=D*z,P(C,2*M+2*T),C[2*M+2*T+1]+=F*z,P(C,2*M+2*T+1),C[2*M+2*T+1]+=D*V,P(C,2*M+2*T+1),C[2*M+2*T+2]+=F*V,P(C,2*M+2*T+2)}for(M=0;M<S;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=S;M<2*S;M++)C[M]=0;return new o(C,0)};function P(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function N(j,S){this.g=j,this.h=S}function x(j,S){if(_(S))throw Error("division by zero");if(_(j))return new N(g,g);if(k(j))return S=x(I(j),S),new N(I(S.g),I(S.h));if(k(S))return S=x(j,I(S)),new N(I(S.g),S.h);if(30<j.g.length){if(k(j)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var C=v,M=S;0>=M.l(j);)C=w(C),M=w(M);var T=L(C,1),F=L(M,1);for(M=L(M,2),C=L(C,2);!_(M);){var D=F.add(M);0>=D.l(j)&&(T=T.add(C),F=D),M=L(M,1),C=L(C,1)}return S=R(j,T.j(S)),new N(T,S)}for(T=g;0<=j.l(S);){for(C=Math.max(1,Math.floor(j.m()/S.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=h(C),D=F.j(S);k(D)||0<D.l(j);)C-=M,F=h(C),D=F.j(S);_(F)&&(F=v),T=T.add(F),j=R(j,D)}return new N(T,j)}t.A=function(j){return x(this,j).h},t.and=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)&j.i(M);return new o(C,this.h&j.h)},t.or=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)|j.i(M);return new o(C,this.h|j.h)},t.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)^j.i(M);return new o(C,this.h^j.h)};function w(j){for(var S=j.g.length+1,C=[],M=0;M<S;M++)C[M]=j.i(M)<<1|j.i(M-1)>>>31;return new o(C,j.h)}function L(j,S){var C=S>>5;S%=32;for(var M=j.g.length-C,T=[],F=0;F<M;F++)T[F]=0<S?j.i(F+C)>>>S|j.i(F+C+1)<<32-S:j.i(F+C);return new o(T,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,hd=o}).apply(typeof Tk!="undefined"?Tk:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var pf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,jm,eA,rv,Z1,tA,sA,nA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,B,O){return f==Array.prototype||f==Object.prototype||(f[B]=O.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var B=0;B<f.length;++B){var O=f[B];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(f,B){if(B)e:{var O=r;f=f.split(".");for(var Q=0;Q<f.length-1;Q++){var fe=f[Q];if(!(fe in O))break e;O=O[fe]}f=f[f.length-1],Q=O[f],B=B(Q),B!=Q&&B!=null&&e(O,f,{configurable:!0,writable:!0,value:B})}}function a(f,B){f instanceof String&&(f+="");var O=0,Q=!1,fe={next:function(){if(!Q&&O<f.length){var Ce=O++;return{value:B(Ce,f[Ce]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return fe[Symbol.iterator]=function(){return fe},fe}i("Array.prototype.values",function(f){return f||function(){return a(this,function(B,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(f){var B=typeof f;return B=B!="object"?B:f?Array.isArray(f)?"array":B:"null",B=="array"||B=="object"&&typeof f.length=="number"}function h(f){var B=typeof f;return B=="object"&&f!=null||B=="function"}function m(f,B,O){return f.call.apply(f.bind,arguments)}function g(f,B,O){if(!f)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(fe,Q),f.apply(B,fe)}}return function(){return f.apply(B,arguments)}}function v(f,B,O){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,v.apply(null,arguments)}function b(f,B){var O=Array.prototype.slice.call(arguments,1);return function(){var Q=O.slice();return Q.push.apply(Q,arguments),f.apply(this,Q)}}function _(f,B){function O(){}O.prototype=B.prototype,f.aa=B.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(Q,fe,Ce){for(var tt=Array(arguments.length-2),Ws=2;Ws<arguments.length;Ws++)tt[Ws-2]=arguments[Ws];return B.prototype[fe].apply(Q,tt)}}function k(f){const B=f.length;if(0<B){const O=Array(B);for(let Q=0;Q<B;Q++)O[Q]=f[Q];return O}return[]}function I(f,B){for(let O=1;O<arguments.length;O++){const Q=arguments[O];if(u(Q)){const fe=f.length||0,Ce=Q.length||0;f.length=fe+Ce;for(let tt=0;tt<Ce;tt++)f[fe+tt]=Q[tt]}else f.push(Q)}}class R{constructor(B,O){this.i=B,this.j=O,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function P(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function x(f){return x[" "](f),f}x[" "]=function(){};var w=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function L(f,B,O){for(const Q in f)B.call(O,f[Q],Q,f)}function j(f,B){for(const O in f)B.call(void 0,f[O],O,f)}function S(f){const B={};for(const O in f)B[O]=f[O];return B}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,B){let O,Q;for(let fe=1;fe<arguments.length;fe++){Q=arguments[fe];for(O in Q)f[O]=Q[O];for(let Ce=0;Ce<C.length;Ce++)O=C[Ce],Object.prototype.hasOwnProperty.call(Q,O)&&(f[O]=Q[O])}}function T(f){var B=1;f=f.split(":");const O=[];for(;0<B&&f.length;)O.push(f.shift()),B--;return f.length&&O.push(f.join(":")),O}function F(f){c.setTimeout(()=>{throw f},0)}function D(){var f=J;let B=null;return f.g&&(B=f.g,f.g=f.g.next,f.g||(f.h=null),B.next=null),B}class V{constructor(){this.h=this.g=null}add(B,O){const Q=z.get();Q.set(B,O),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var z=new R(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(B,O){this.h=B,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let W,U=!1,J=new V,re=()=>{const f=c.Promise.resolve(void 0);W=()=>{f.then(G)}};var G=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(O){F(O)}var B=z;B.j(f),100>B.h&&(B.h++,f.next=B.g,B.g=f)}U=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(f,B){this.type=f,this.g=this.target=B,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,B=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};c.addEventListener("test",O,B),c.removeEventListener("test",O,B)}catch(O){}return f})();function ce(f,B){if(Y.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,Q=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=B,B=f.relatedTarget){if(w){e:{try{x(B.nodeName);var fe=!0;break e}catch(Ce){}fe=!1}fe||(B=null)}}else O=="mouseover"?B=f.fromElement:O=="mouseout"&&(B=f.toElement);this.relatedTarget=B,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_e[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ce.aa.h.call(this)}}_(ce,Y);var _e={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),ee=0;function le(f,B,O,Q,fe){this.listener=f,this.proxy=null,this.src=B,this.type=O,this.capture=!!Q,this.ha=fe,this.key=++ee,this.da=this.fa=!1}function te(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ye(f){this.src=f,this.g={},this.h=0}ye.prototype.add=function(f,B,O,Q,fe){var Ce=f.toString();f=this.g[Ce],f||(f=this.g[Ce]=[],this.h++);var tt=Me(f,B,Q,fe);return-1<tt?(B=f[tt],O||(B.fa=!1)):(B=new le(B,this.src,Ce,!!Q,fe),B.fa=O,f.push(B)),B};function ke(f,B){var O=B.type;if(O in f.g){var Q=f.g[O],fe=Array.prototype.indexOf.call(Q,B,void 0),Ce;(Ce=0<=fe)&&Array.prototype.splice.call(Q,fe,1),Ce&&(te(B),f.g[O].length==0&&(delete f.g[O],f.h--))}}function Me(f,B,O,Q){for(var fe=0;fe<f.length;++fe){var Ce=f[fe];if(!Ce.da&&Ce.listener==B&&Ce.capture==!!O&&Ce.ha==Q)return fe}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Ee={};function Le(f,B,O,Q,fe){if(Array.isArray(B)){for(var Ce=0;Ce<B.length;Ce++)Le(f,B[Ce],O,Q,fe);return null}return O=ie(O),f&&f[Ae]?f.K(B,O,h(Q)?!!Q.capture:!1,fe):Fe(f,B,O,!1,Q,fe)}function Fe(f,B,O,Q,fe,Ce){if(!B)throw Error("Invalid event type");var tt=h(fe)?!!fe.capture:!!fe,Ws=it(f);if(Ws||(f[Re]=Ws=new ye(f)),O=Ws.add(B,O,Q,tt,Ce),O.proxy)return O;if(Q=Be(),O.proxy=Q,Q.src=f,Q.listener=O,f.addEventListener)se||(fe=tt),fe===void 0&&(fe=!1),f.addEventListener(B.toString(),Q,fe);else if(f.attachEvent)f.attachEvent(Pe(B.toString()),Q);else if(f.addListener&&f.removeListener)f.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Be(){function f(O){return B.call(f.src,f.listener,O)}const B=De;return f}function je(f,B,O,Q,fe){if(Array.isArray(B))for(var Ce=0;Ce<B.length;Ce++)je(f,B[Ce],O,Q,fe);else Q=h(Q)?!!Q.capture:!!Q,O=ie(O),f&&f[Ae]?(f=f.i,B=String(B).toString(),B in f.g&&(Ce=f.g[B],O=Me(Ce,O,Q,fe),-1<O&&(te(Ce[O]),Array.prototype.splice.call(Ce,O,1),Ce.length==0&&(delete f.g[B],f.h--)))):f&&(f=it(f))&&(B=f.g[B.toString()],f=-1,B&&(f=Me(B,O,Q,fe)),(O=-1<f?B[f]:null)&&ue(O))}function ue(f){if(typeof f!="number"&&f&&!f.da){var B=f.src;if(B&&B[Ae])ke(B.i,f);else{var O=f.type,Q=f.proxy;B.removeEventListener?B.removeEventListener(O,Q,f.capture):B.detachEvent?B.detachEvent(Pe(O),Q):B.addListener&&B.removeListener&&B.removeListener(Q),(O=it(B))?(ke(O,f),O.h==0&&(O.src=null,B[Re]=null)):te(f)}}}function Pe(f){return f in Ee?Ee[f]:Ee[f]="on"+f}function De(f,B){if(f.da)f=!0;else{B=new ce(B,this);var O=f.listener,Q=f.ha||f.src;f.fa&&ue(f),f=O.call(Q,B)}return f}function it(f){return f=f[Re],f instanceof ye?f:null}var yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(f){return typeof f=="function"?f:(f[yt]||(f[yt]=function(B){return f.handleEvent(B)}),f[yt])}function he(){X.call(this),this.i=new ye(this),this.M=this,this.F=null}_(he,X),he.prototype[Ae]=!0,he.prototype.removeEventListener=function(f,B,O,Q){je(this,f,B,O,Q)};function ve(f,B){var O,Q=f.F;if(Q)for(O=[];Q;Q=Q.F)O.push(Q);if(f=f.M,Q=B.type||B,typeof B=="string")B=new Y(B,f);else if(B instanceof Y)B.target=B.target||f;else{var fe=B;B=new Y(Q,f),M(B,fe)}if(fe=!0,O)for(var Ce=O.length-1;0<=Ce;Ce--){var tt=B.g=O[Ce];fe=Te(tt,Q,!0,B)&&fe}if(tt=B.g=f,fe=Te(tt,Q,!0,B)&&fe,fe=Te(tt,Q,!1,B)&&fe,O)for(Ce=0;Ce<O.length;Ce++)tt=B.g=O[Ce],fe=Te(tt,Q,!1,B)&&fe}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var f=this.i,B;for(B in f.g){for(var O=f.g[B],Q=0;Q<O.length;Q++)te(O[Q]);delete f.g[B],f.h--}}this.F=null},he.prototype.K=function(f,B,O,Q){return this.i.add(String(f),B,!1,O,Q)},he.prototype.L=function(f,B,O,Q){return this.i.add(String(f),B,!0,O,Q)};function Te(f,B,O,Q){if(B=f.i.g[String(B)],!B)return!0;B=B.concat();for(var fe=!0,Ce=0;Ce<B.length;++Ce){var tt=B[Ce];if(tt&&!tt.da&&tt.capture==O){var Ws=tt.listener,Zn=tt.ha||tt.src;tt.fa&&ke(f.i,tt),fe=Ws.call(Zn,Q)!==!1&&fe}}return fe&&!Q.defaultPrevented}function St(f,B,O){if(typeof f=="function")O&&(f=v(f,O));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:c.setTimeout(f,B||0)}function at(f){f.g=St(()=>{f.g=null,f.i&&(f.i=!1,at(f))},f.l);const B=f.h;f.h=null,f.m.apply(null,B)}class rt extends X{constructor(B,O){super(),this.m=B,this.l=O,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ut(f){X.call(this),this.h=f,this.g={}}_(ut,X);var _t=[];function ot(f){L(f.g,function(B,O){this.g.hasOwnProperty(O)&&ue(B)},f),f.g={}}ut.prototype.N=function(){ut.aa.N.call(this),ot(this)},ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nt=c.JSON.stringify,ts=c.JSON.parse,pt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ne(){}ne.prototype.h=null;function Oe(f){return f.h||(f.h=f.i())}function Ve(){}var ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qe(){Y.call(this,"d")}_(qe,Y);function ft(){Y.call(this,"c")}_(ft,Y);var Mt={},Lt=null;function Ns(){return Lt=Lt||new he}Mt.La="serverreachability";function dt(f){Y.call(this,Mt.La,f)}_(dt,Y);function ss(f){const B=Ns();ve(B,new dt(B))}Mt.STAT_EVENT="statevent";function cs(f,B){Y.call(this,Mt.STAT_EVENT,f),this.stat=B}_(cs,Y);function bs(f){const B=Ns();ve(B,new cs(B,f))}Mt.Ma="timingevent";function On(f,B){Y.call(this,Mt.Ma,f),this.size=B}_(On,Y);function Rn(f,B){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},B)}function ln(){this.g=!0}ln.prototype.xa=function(){this.g=!1};function or(f,B,O,Q,fe,Ce){f.info(function(){if(f.g)if(Ce)for(var tt="",Ws=Ce.split("&"),Zn=0;Zn<Ws.length;Zn++){var Cs=Ws[Zn].split("=");if(1<Cs.length){var ur=Cs[0];Cs=Cs[1];var Vn=ur.split("_");tt=2<=Vn.length&&Vn[1]=="type"?tt+(ur+"="+Cs+"&"):tt+(ur+"=redacted&")}}else tt=null;else tt=Ce;return"XMLHTTP REQ ("+Q+") [attempt "+fe+"]: "+B+`
`+O+`
`+tt})}function lr(f,B,O,Q,fe,Ce,tt){f.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+fe+"]: "+B+`
`+O+`
`+Ce+" "+tt})}function gn(f,B,O,Q){f.info(function(){return"XMLHTTP TEXT ("+B+"): "+Es(f,O)+(Q?" "+Q:"")})}function ds(f,B){f.info(function(){return"TIMEOUT: "+B})}ln.prototype.info=function(){};function Es(f,B){if(!f.g)return B;if(!B)return null;try{var O=JSON.parse(B);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var Q=O[f];if(!(2>Q.length)){var fe=Q[1];if(Array.isArray(fe)&&!(1>fe.length)){var Ce=fe[0];if(Ce!="noop"&&Ce!="stop"&&Ce!="close")for(var tt=1;tt<fe.length;tt++)fe[tt]=""}}}}return nt(O)}catch(Ws){return B}}var fn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ge;function Yr(){}_(Yr,ne),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},ge=new Yr;function Xn(f,B,O,Q){this.j=f,this.i=B,this.l=O,this.R=Q||1,this.U=new ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xr}function Xr(){this.i=null,this.g="",this.h=!1}var Ri={},pi={};function gi(f,B,O){f.L=1,f.v=Sl(Br(B)),f.m=O,f.P=!0,fi(f,null)}function fi(f,B){f.F=Date.now(),ks(f),f.A=Br(f.v);var O=f.A,Q=f.R;Array.isArray(Q)||(Q=[String(Q)]),kl(O.i,"t",Q),f.C=0,O=f.j.J,f.h=new Xr,f.g=pg(f.j,O?B:null,!f.m),0<f.O&&(f.M=new rt(v(f.Y,f,f.g),f.O)),B=f.U,O=f.g,Q=f.ca;var fe="readystatechange";Array.isArray(fe)||(fe&&(_t[0]=fe.toString()),fe=_t);for(var Ce=0;Ce<fe.length;Ce++){var tt=Le(O,fe[Ce],Q||B.handleEvent,!1,B.h||B);if(!tt)break;B.g[tt.key]=tt}B=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,B)):(f.u="GET",f.g.ea(f.A,f.u,null,B)),ss(),or(f.i,f.u,f.A,f.l,f.R,f.m)}Xn.prototype.ca=function(f){f=f.target;const B=this.M;B&&bi(f)==3?B.j():this.Y(f)},Xn.prototype.Y=function(f){try{if(f==this.g)e:{const Vn=bi(this.g);var B=this.g.Ba();const aa=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||Ah(this.g)))){this.J||Vn!=4||B==7||(B==8||0>=aa?ss(3):ss(2)),cr(this);var O=this.g.Z();this.X=O;t:if(ea(this)){var Q=Ah(this.g);f="";var fe=Q.length,Ce=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Qs(this),wr(this);var tt="";break t}this.h.i=new c.TextDecoder}for(B=0;B<fe;B++)this.h.h=!0,f+=this.h.i.decode(Q[B],{stream:!(Ce&&B==fe-1)});Q.length=0,this.h.g+=f,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=O==200,lr(this.i,this.u,this.A,this.l,this.R,Vn,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Ws,Zn=this.g;if((Ws=Zn.g?Zn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ws)){var Cs=Ws;break t}}Cs=null}if(O=Cs)gn(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qa(this,O);else{this.o=!1,this.s=3,bs(12),Qs(this),wr(this);break e}}if(this.P){O=!0;let Di;for(;!this.J&&this.C<tt.length;)if(Di=ta(this,tt),Di==pi){Vn==4&&(this.s=4,bs(14),O=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Di==Ri){this.s=4,bs(15),gn(this.i,this.l,tt,"[Invalid Chunk]"),O=!1;break}else gn(this.i,this.l,Di,null),Qa(this,Di);if(ea(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||tt.length!=0||this.h.h||(this.s=1,bs(16),O=!1),this.o=this.o&&O,!O)gn(this.i,this.l,tt,"[Invalid Chunked Response]"),Qs(this),wr(this);else if(0<tt.length&&!this.W){this.W=!0;var ur=this.j;ur.g==this&&ur.ba&&!ur.M&&(ur.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),Rh(ur),ur.M=!0,bs(11))}}else gn(this.i,this.l,tt,null),Qa(this,tt);Vn==4&&Qs(this),this.o&&!this.J&&(Vn==4?Wd(this.j,this):(this.o=!1,ks(this)))}else Vd(this.g),O==400&&0<tt.indexOf("Unknown SID")?(this.s=3,bs(12)):(this.s=0,bs(13)),Qs(this),wr(this)}}}catch(Vn){}finally{}};function ea(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ta(f,B){var O=f.C,Q=B.indexOf(`
`,O);return Q==-1?pi:(O=Number(B.substring(O,Q)),isNaN(O)?Ri:(Q+=1,Q+O>B.length?pi:(B=B.slice(Q,Q+O),f.C=Q+O,B)))}Xn.prototype.cancel=function(){this.J=!0,Qs(this)};function ks(f){f.S=Date.now()+f.I,sa(f,f.I)}function sa(f,B){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Rn(v(f.ba,f),B)}function cr(f){f.B&&(c.clearTimeout(f.B),f.B=null)}Xn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ds(this.i,this.A),this.L!=2&&(ss(),bs(17)),Qs(this),this.s=2,wr(this)):sa(this,this.S-f)};function wr(f){f.j.G==0||f.J||Wd(f.j,f)}function Qs(f){cr(f);var B=f.M;B&&typeof B.ma=="function"&&B.ma(),f.M=null,ot(f.U),f.g&&(B=f.g,f.g=null,B.abort(),B.ma())}function Qa(f,B){try{var O=f.j;if(O.G!=0&&(O.g==f||Jn(O.h,f))){if(!f.K&&Jn(O.h,f)&&O.G==3){try{var Q=O.Da.g.parse(B)}catch(Cs){Q=null}if(Array.isArray(Q)&&Q.length==3){var fe=Q;if(fe[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)Hd(O),Ta(O);else break e;Gd(O),bs(18)}}else O.za=fe[1],0<O.za-O.T&&37500>fe[2]&&O.F&&O.v==0&&!O.C&&(O.C=Rn(v(O.Za,O),6e3));if(1>=Ya(O.h)&&O.ca){try{O.ca()}catch(Cs){}O.ca=void 0}}else Eo(O,11)}else if((f.K||O.g==f)&&Hd(O),!P(B))for(fe=O.Da.g.parse(B),B=0;B<fe.length;B++){let Cs=fe[B];if(O.T=Cs[0],Cs=Cs[1],O.G==2)if(Cs[0]=="c"){O.K=Cs[1],O.ia=Cs[2];const ur=Cs[3];ur!=null&&(O.la=ur,O.j.info("VER="+O.la));const Vn=Cs[4];Vn!=null&&(O.Aa=Vn,O.j.info("SVER="+O.Aa));const aa=Cs[5];aa!=null&&typeof aa=="number"&&0<aa&&(Q=1.5*aa,O.L=Q,O.j.info("backChannelRequestTimeoutMs_="+Q)),Q=O;const Di=f.g;if(Di){const Ac=Di.g?Di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ac){var Ce=Q.h;Ce.g||Ac.indexOf("spdy")==-1&&Ac.indexOf("quic")==-1&&Ac.indexOf("h2")==-1||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(ko(Ce,Ce.h),Ce.h=null))}if(Q.D){const qd=Di.g?Di.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(Q.ya=qd,Ys(Q.I,Q.D,qd))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),Q=O;var tt=f;if(Q.qa=mg(Q,Q.J?Q.ia:null,Q.W),tt.K){Md(Q.h,tt);var Ws=tt,Zn=Q.L;Zn&&(Ws.I=Zn),Ws.B&&(cr(Ws),ks(Ws)),Q.g=tt}else Ec(Q);0<O.i.length&&eo(O)}else Cs[0]!="stop"&&Cs[0]!="close"||Eo(O,7);else O.G==3&&(Cs[0]=="stop"||Cs[0]=="close"?Cs[0]=="stop"?Eo(O,7):Sr(O):Cs[0]!="noop"&&O.l&&O.l.ta(Cs),O.v=0)}}ss(4)}catch(Cs){}}var No=class{constructor(f,B){this.g=f,this.map=B}};function na(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ya(f){return f.h?1:f.g?f.g.size:0}function Jn(f,B){return f.h?f.h==B:f.g?f.g.has(B):!1}function ko(f,B){f.g?f.g.add(B):f.h=B}function Md(f,B){f.h&&f.h==B?f.h=null:f.g&&f.g.has(B)&&f.g.delete(B)}na.prototype.cancel=function(){if(this.i=Fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Fd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let B=f.i;for(const O of f.g.values())B=B.concat(O.D);return B}return k(f.i)}function bl(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var B=[],O=f.length,Q=0;Q<O;Q++)B.push(f[Q]);return B}B=[],O=0;for(Q in f)B[O++]=f[Q];return B}function _l(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var B=[];f=f.length;for(var O=0;O<f;O++)B.push(O);return B}B=[],O=0;for(const Q in f)B[O++]=Q;return B}}}function ra(f,B){if(f.forEach&&typeof f.forEach=="function")f.forEach(B,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,B,void 0);else for(var O=_l(f),Q=bl(f),fe=Q.length,Ce=0;Ce<fe;Ce++)B.call(void 0,Q[Ce],O&&O[Ce],f)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(f,B){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var Q=f[O].indexOf("="),fe=null;if(0<=Q){var Ce=f[O].substring(0,Q);fe=f[O].substring(Q+1)}else Ce=f[O];B(Ce,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function xi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof xi){this.h=f.h,Cc(this,f.j),this.o=f.o,this.g=f.g,wl(this,f.s),this.l=f.l;var B=f.i,O=new Xa;O.i=B.i,B.g&&(O.g=new Map(B.g),O.h=B.h),jl(this,O),this.m=f.m}else f&&(B=String(f).match(vi))?(this.h=!1,Cc(this,B[1]||"",!0),this.o=_s(B[2]||""),this.g=_s(B[3]||"",!0),wl(this,B[4]),this.l=_s(B[5]||"",!0),jl(this,B[6]||"",!0),this.m=_s(B[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}xi.prototype.toString=function(){var f=[],B=this.j;B&&f.push(Nl(B,Bd,!0),":");var O=this.g;return(O||B=="file")&&(f.push("//"),(B=this.o)&&f.push(Nl(B,Bd,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(Nl(O,O.charAt(0)=="/"?ig:rg,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",Nl(O,Th)),f.join("")};function Br(f){return new xi(f)}function Cc(f,B,O){f.j=O?_s(B,!0):B,f.j&&(f.j=f.j.replace(/:$/,""))}function wl(f,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);f.s=B}else f.s=null}function jl(f,B,O){B instanceof Xa?(f.i=B,Ja(f.i,f.h)):(O||(B=Nl(B,ag)),f.i=new Xa(B,f.h))}function Ys(f,B,O){f.i.set(B,O)}function Sl(f){return Ys(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function _s(f,B){return f?B?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Nl(f,B,O){return typeof f=="string"?(f=encodeURI(f).replace(B,ng),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ng(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Bd=/[#\/\?@]/g,rg=/[#\?:]/g,ig=/[#\?]/g,ag=/[#\?@]/g,Th=/#/g;function Xa(f,B){this.h=this.g=null,this.i=f||null,this.j=!!B}function jr(f){f.g||(f.g=new Map,f.h=0,f.i&&ja(f.i,function(B,O){f.add(decodeURIComponent(B.replace(/\+/g," ")),O)}))}t=Xa.prototype,t.add=function(f,B){jr(this),this.i=null,f=ia(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(B),this.h+=1,this};function Sa(f,B){jr(f),B=ia(f,B),f.g.has(B)&&(f.i=null,f.h-=f.g.get(B).length,f.g.delete(B))}function Na(f,B){return jr(f),B=ia(f,B),f.g.has(B)}t.forEach=function(f,B){jr(this),this.g.forEach(function(O,Q){O.forEach(function(fe){f.call(B,fe,Q,this)},this)},this)},t.na=function(){jr(this);const f=Array.from(this.g.values()),B=Array.from(this.g.keys()),O=[];for(let Q=0;Q<B.length;Q++){const fe=f[Q];for(let Ce=0;Ce<fe.length;Ce++)O.push(B[Q])}return O},t.V=function(f){jr(this);let B=[];if(typeof f=="string")Na(this,f)&&(B=B.concat(this.g.get(ia(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)B=B.concat(f[O])}return B},t.set=function(f,B){return jr(this),this.i=null,f=ia(this,f),Na(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[B]),this.h+=1,this},t.get=function(f,B){return f?(f=this.V(f),0<f.length?String(f[0]):B):B};function kl(f,B,O){Sa(f,B),0<O.length&&(f.i=null,f.g.set(ia(f,B),k(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],B=Array.from(this.g.keys());for(var O=0;O<B.length;O++){var Q=B[O];const Ce=encodeURIComponent(String(Q)),tt=this.V(Q);for(Q=0;Q<tt.length;Q++){var fe=Ce;tt[Q]!==""&&(fe+="="+encodeURIComponent(String(tt[Q]))),f.push(fe)}}return this.i=f.join("&")};function ia(f,B){return B=String(B),f.j&&(B=B.toLowerCase()),B}function Ja(f,B){B&&!f.j&&(jr(f),f.i=null,f.g.forEach(function(O,Q){var fe=Q.toLowerCase();Q!=fe&&(Sa(this,Q),kl(this,fe,O))},f)),f.j=B}function vy(f,B){const O=new ln;if(c.Image){const Q=new Image;Q.onload=b(yi,O,"TestLoadImage: loaded",!0,B,Q),Q.onerror=b(yi,O,"TestLoadImage: error",!1,B,Q),Q.onabort=b(yi,O,"TestLoadImage: abort",!1,B,Q),Q.ontimeout=b(yi,O,"TestLoadImage: timeout",!1,B,Q),c.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=f}else B(!1)}function og(f,B){const O=new ln,Q=new AbortController,fe=setTimeout(()=>{Q.abort(),yi(O,"TestPingServer: timeout",!1,B)},1e4);fetch(f,{signal:Q.signal}).then(Ce=>{clearTimeout(fe),Ce.ok?yi(O,"TestPingServer: ok",!0,B):yi(O,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(fe),yi(O,"TestPingServer: error",!1,B)})}function yi(f,B,O,Q,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),Q(O)}catch(Ce){}}function xy(){this.g=new pt}function lg(f,B,O){const Q=O||"";try{ra(f,function(fe,Ce){let tt=fe;h(fe)&&(tt=nt(fe)),B.push(Q+Ce+"="+encodeURIComponent(tt))})}catch(fe){throw B.push(Q+"type="+encodeURIComponent("_badmap")),fe}}function Co(f){this.l=f.Ub||null,this.j=f.eb||!1}_(Co,ne),Co.prototype.g=function(){return new Tc(this.l,this.j)},Co.prototype.i=(function(f){return function(){return f}})({});function Tc(f,B){he.call(this),this.D=f,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Tc,he),t=Tc.prototype,t.open=function(f,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=B,this.readyState=1,Ca(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(B.body=f),(this.D||c).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cg(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function cg(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var B=f.value?f.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!f.done}))&&(this.response=this.responseText+=B)}f.done?ka(this):Ca(this),this.readyState==3&&cg(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ka(this))},t.Qa=function(f){this.g&&(this.response=f,ka(this))},t.ga=function(){this.g&&ka(this)};function ka(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ca(f)}t.setRequestHeader=function(f,B){this.u.append(f,B)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],B=this.h.entries();for(var O=B.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=B.next();return f.join(`\r
`)};function Ca(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function To(f){let B="";return L(f,function(O,Q){B+=Q,B+=":",B+=O,B+=`\r
`}),B}function Cl(f,B,O){e:{for(Q in O){var Q=!1;break e}Q=!0}Q||(O=To(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):Ys(f,B,O))}function cn(f){he.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(cn,he);var yy=/^https?$/i,Ih=["POST","PUT"];t=cn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,B,O,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);B=B?B.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ge.g(),this.v=this.o?Oe(this.o):Oe(ge),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(B,String(f),!0),this.B=!1}catch(Ce){Ic(this,Ce);return}if(f=O||"",O=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var fe in Q)O.set(fe,Q[fe]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ce of Q.keys())O.set(Ce,Q.get(Ce));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(O.keys()).find(Ce=>Ce.toLowerCase()=="content-type"),fe=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ih,B,void 0))||Q||fe||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,tt]of O)this.g.setRequestHeader(Ce,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Od(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ce){Ic(this,Ce)}};function Ic(f,B){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=B,f.m=5,$d(f),Li(f)}function $d(f){f.A||(f.A=!0,ve(f,"complete"),ve(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ve(this,"complete"),ve(this,"abort"),Li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),cn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Eh(this):this.bb())},t.bb=function(){Eh(this)};function Eh(f){if(f.h&&typeof o!="undefined"&&(!f.v[1]||bi(f)!=4||f.Z()!=2)){if(f.u&&bi(f)==4)St(f.Ea,0,f);else if(ve(f,"readystatechange"),bi(f)==4){f.h=!1;try{const tt=f.Z();e:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var O;if(!(O=B)){var Q;if(Q=tt===0){var fe=String(f.D).match(vi)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),Q=!yy.test(fe?fe.toLowerCase():"")}O=Q}if(O)ve(f,"complete"),ve(f,"success");else{f.m=6;try{var Ce=2<bi(f)?f.g.statusText:""}catch(Ws){Ce=""}f.l=Ce+" ["+f.Z()+"]",$d(f)}}finally{Li(f)}}}}function Li(f,B){if(f.g){Od(f);const O=f.g,Q=f.v[0]?()=>{}:null;f.g=null,f.v=null,B||ve(f,"ready");try{O.onreadystatechange=Q}catch(fe){}}}function Od(f){f.I&&(c.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function bi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var B=this.g.responseText;return f&&B.indexOf(f)==0&&(B=B.substring(f.length)),ts(B)}};function Ah(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(B){return null}}function Vd(f){const B={};f=(f.g&&2<=bi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<f.length;Q++){if(P(f[Q]))continue;var O=T(f[Q]);const fe=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Ce=B[fe]||[];B[fe]=Ce,Ce.push(O)}j(B,function(Q){return Q.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Za(f,B,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||B}function Ph(f){this.Aa=0,this.i=[],this.j=new ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Za("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Za("baseRetryDelayMs",5e3,f),this.cb=Za("retryDelaySeedMs",1e4,f),this.Wa=Za("forwardChannelMaxRetries",2,f),this.wa=Za("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new na(f&&f.concurrentRequestLimit),this.Da=new xy,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ph.prototype,t.la=8,t.G=1,t.connect=function(f,B,O,Q){bs(0),this.W=f,this.H=B||{},O&&Q!==void 0&&(this.H.OSID=O,this.H.OAID=Q),this.F=this.X,this.I=mg(this,null,this.W),eo(this)};function Sr(f){if(Ud(f),f.G==3){var B=f.U++,O=Br(f.I);if(Ys(O,"SID",f.K),Ys(O,"RID",B),Ys(O,"TYPE","terminate"),Io(f,O),B=new Xn(f,f.j,B),B.L=2,B.v=Sl(Br(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(B.v.toString(),"")}catch(Q){}!O&&c.Image&&(new Image().src=B.v,O=!0),O||(B.g=pg(B.j,null),B.g.ea(B.v)),B.F=Date.now(),ks(B)}hg(f)}function Ta(f){f.g&&(Rh(f),f.g.cancel(),f.g=null)}function Ud(f){Ta(f),f.u&&(c.clearTimeout(f.u),f.u=null),Hd(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function eo(f){if(!dr(f.h)&&!f.s){f.s=!0;var B=f.Ga;W||re(),U||(W(),U=!0),J.add(B,f),f.B=0}}function by(f,B){return Ya(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=B.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Rn(v(f.Ga,f,B),ug(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const fe=new Xn(this,this.j,f);let Ce=this.o;if(this.S&&(Ce?(Ce=S(Ce),M(Ce,this.S)):Ce=this.S),this.m!==null||this.O||(fe.H=Ce,Ce=null),this.P)e:{for(var B=0,O=0;O<this.i.length;O++){t:{var Q=this.i[O];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(B+=Q,4096<B){B=O;break e}if(B===4096||O===this.i.length-1){B=O+1;break e}}B=1e3}else B=1e3;B=Tl(this,fe,B),O=Br(this.I),Ys(O,"RID",f),Ys(O,"CVER",22),this.D&&Ys(O,"X-HTTP-Session-Id",this.D),Io(this,O),Ce&&(this.O?B="headers="+encodeURIComponent(String(To(Ce)))+"&"+B:this.m&&Cl(O,this.m,Ce)),ko(this.h,fe),this.Ua&&Ys(O,"TYPE","init"),this.P?(Ys(O,"$req",B),Ys(O,"SID","null"),fe.T=!0,gi(fe,O,null)):gi(fe,O,B),this.G=2}}else this.G==3&&(f?zd(this,f):this.i.length==0||dr(this.h)||zd(this))};function zd(f,B){var O;B?O=B.l:O=f.U++;const Q=Br(f.I);Ys(Q,"SID",f.K),Ys(Q,"RID",O),Ys(Q,"AID",f.T),Io(f,Q),f.m&&f.o&&Cl(Q,f.m,f.o),O=new Xn(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),B&&(f.i=B.D.concat(f.i)),B=Tl(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ko(f.h,O),gi(O,Q,B)}function Io(f,B){f.H&&L(f.H,function(O,Q){Ys(B,Q,O)}),f.l&&ra({},function(O,Q){Ys(B,Q,O)})}function Tl(f,B,O){O=Math.min(f.i.length,O);var Q=f.l?v(f.l.Na,f.l,f):null;e:{var fe=f.i;let Ce=-1;for(;;){const tt=["count="+O];Ce==-1?0<O?(Ce=fe[0].g,tt.push("ofs="+Ce)):Ce=0:tt.push("ofs="+Ce);let Ws=!0;for(let Zn=0;Zn<O;Zn++){let Cs=fe[Zn].g;const ur=fe[Zn].map;if(Cs-=Ce,0>Cs)Ce=Math.max(0,fe[Zn].g-100),Ws=!1;else try{lg(ur,tt,"req"+Cs+"_")}catch(Vn){Q&&Q(ur)}}if(Ws){Q=tt.join("&");break e}}}return f=f.i.splice(0,O),B.D=f,Q}function Ec(f){if(!f.g&&!f.u){f.Y=1;var B=f.Fa;W||re(),U||(W(),U=!0),J.add(B,f),f.v=0}}function Gd(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Rn(v(f.Fa,f),ug(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Rn(v(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bs(10),Ta(this),dg(this))};function Rh(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function dg(f){f.g=new Xn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var B=Br(f.qa);Ys(B,"RID","rpc"),Ys(B,"SID",f.K),Ys(B,"AID",f.T),Ys(B,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ys(B,"TO",f.ja),Ys(B,"TYPE","xmlhttp"),Io(f,B),f.m&&f.o&&Cl(B,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=Sl(Br(B)),O.m=null,O.P=!0,fi(O,f)}t.Za=function(){this.C!=null&&(this.C=null,Ta(this),Gd(this),bs(19))};function Hd(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Wd(f,B){var O=null;if(f.g==B){Hd(f),Rh(f),f.g=null;var Q=2}else if(Jn(f.h,B))O=B.D,Md(f.h,B),Q=1;else return;if(f.G!=0){if(B.o)if(Q==1){O=B.m?B.m.length:0,B=Date.now()-B.F;var fe=f.B;Q=Ns(),ve(Q,new On(Q,O)),eo(f)}else Ec(f);else if(fe=B.s,fe==3||fe==0&&0<B.X||!(Q==1&&by(f,B)||Q==2&&Gd(f)))switch(O&&0<O.length&&(B=f.h,B.i=B.i.concat(O)),fe){case 1:Eo(f,5);break;case 4:Eo(f,10);break;case 3:Eo(f,6);break;default:Eo(f,2)}}}function ug(f,B){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*B}function Eo(f,B){if(f.j.info("Error code "+B),B==2){var O=v(f.fb,f),Q=f.Xa;const fe=!Q;Q=new xi(Q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Cc(Q,"https"),Sl(Q),fe?vy(Q.toString(),O):og(Q.toString(),O)}else bs(2);f.G=0,f.l&&f.l.sa(B),hg(f),Ud(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),bs(2)):(this.j.info("Failed to ping google.com"),bs(1))};function hg(f){if(f.G=0,f.ka=[],f.l){const B=Fd(f.h);(B.length!=0||f.i.length!=0)&&(I(f.ka,B),I(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function mg(f,B,O){var Q=O instanceof xi?Br(O):new xi(O);if(Q.g!="")B&&(Q.g=B+"."+Q.g),wl(Q,Q.s);else{var fe=c.location;Q=fe.protocol,B=B?B+"."+fe.hostname:fe.hostname,fe=+fe.port;var Ce=new xi(null);Q&&Cc(Ce,Q),B&&(Ce.g=B),fe&&wl(Ce,fe),O&&(Ce.l=O),Q=Ce}return O=f.D,B=f.ya,O&&B&&Ys(Q,O,B),Ys(Q,"VER",f.la),Io(f,Q),Q}function pg(f,B,O){if(B&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=f.Ca&&!f.pa?new cn(new Co({eb:O})):new cn(f.pa),B.Ha(f.J),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lh(){}t=Lh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kd(){}Kd.prototype.g=function(f,B){return new Jr(f,B)};function Jr(f,B){he.call(this),this.g=new Ph(B),this.l=f,this.h=B&&B.messageUrlParams||null,f=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(f?f["X-WebChannel-Content-Type"]=B.messageContentType:f={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(f?f["X-WebChannel-Client-Profile"]=B.va:f={"X-WebChannel-Client-Profile":B.va}),this.g.S=f,(f=B&&B.Sb)&&!P(f)&&(this.g.m=f),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!P(B)&&(this.g.D=B,f=this.h,f!==null&&B in f&&(f=this.h,B in f&&delete f[B])),this.j=new to(this)}_(Jr,he),Jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jr.prototype.close=function(){Sr(this.g)},Jr.prototype.o=function(f){var B=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=nt(f),f=O);B.i.push(new No(B.Ya++,f)),B.G==3&&eo(B)},Jr.prototype.N=function(){this.g.l=null,delete this.j,Sr(this.g),delete this.g,Jr.aa.N.call(this)};function gg(f){qe.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var B=f.__sm__;if(B){e:{for(const O in B){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,B=B!==null&&f in B?B[f]:void 0),this.data=B}else this.data=f}_(gg,qe);function fg(){ft.call(this),this.status=1}_(fg,ft);function to(f){this.g=f}_(to,Lh),to.prototype.ua=function(){ve(this.g,"a")},to.prototype.ta=function(f){ve(this.g,new gg(f))},to.prototype.sa=function(f){ve(this.g,new fg)},to.prototype.ra=function(){ve(this.g,"b")},Kd.prototype.createWebChannel=Kd.prototype.g,Jr.prototype.send=Jr.prototype.o,Jr.prototype.open=Jr.prototype.m,Jr.prototype.close=Jr.prototype.close,nA=function(){return new Kd},sA=function(){return Ns()},tA=Mt,Z1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fn.NO_ERROR=0,fn.TIMEOUT=8,fn.HTTP_ERROR=6,rv=fn,ht.COMPLETE="complete",eA=ht,Ve.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",he.prototype.listen=he.prototype.K,jm=Ve,cn.prototype.listenOnce=cn.prototype.L,cn.prototype.getLastError=cn.prototype.Ka,cn.prototype.getLastErrorCode=cn.prototype.Ba,cn.prototype.getStatus=cn.prototype.Z,cn.prototype.getResponseJson=cn.prototype.Oa,cn.prototype.getResponseText=cn.prototype.oa,cn.prototype.send=cn.prototype.ea,cn.prototype.setWithCredentials=cn.prototype.Ha,ZE=cn}).apply(typeof pf!="undefined"?pf:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const Ik="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new sw("@firebase/firestore");function om(){return wd.logLevel}function jt(t,...e){if(wd.logLevel<=Ss.DEBUG){const n=e.map(fw);wd.debug(`Firestore (${gh}): ${t}`,...n)}}function hl(t,...e){if(wd.logLevel<=Ss.ERROR){const n=e.map(fw);wd.error(`Firestore (${gh}): ${t}`,...n)}}function Yu(t,...e){if(wd.logLevel<=Ss.WARN){const n=e.map(fw);wd.warn(`Firestore (${gh}): ${t}`,...n)}}function fw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t="Unexpected state"){const e=`FIRESTORE (${gh}) INTERNAL ASSERTION FAILED: `+t;throw hl(e),new Error(e)}function Ls(t,e){t||zt()}function Zt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends xl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wr.UNAUTHENTICATED)))}shutdown(){}}class YV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class XV{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ls(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new go;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new go,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new go)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ls(typeof r.accessToken=="string"),new rA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ls(e===null||typeof e=="string"),new Wr(e)}}class JV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Wr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ls(this.o===void 0);const r=a=>{a.error!=null&&jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,jt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ls(typeof n.token=="string"),this.R=n.token,new eU(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sU(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Bs(t,e){return t<e?-1:t>e?1:0}function Xu(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new st(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new st(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new st(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new on(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bs(this.nanoseconds,e.nanoseconds):Bs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new on(0,0))}static max(){return new Wt(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r){n===void 0?n=0:n>e.length&&zt(),r===void 0?r=e.length-n:r>e.length-n&&zt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return op.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof op?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ks extends op{construct(e,n,r){return new Ks(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ks(n)}static emptyPath(){return new Ks([])}}const nU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends op{construct(e,n,r){return new Pr(e,n,r)}static isValidIdentifier(e){return nU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new st(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new st(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new st(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new st(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(n)}static emptyPath(){return new Pr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.path=e}static fromPath(e){return new At(Ks.fromString(e))}static fromName(e){return new At(Ks.fromString(e).popFirst(5))}static empty(){return new At(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ks.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ks.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Ks(e.slice()))}}function rU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(r===1e9?new on(n+1,0):new on(n,r));return new yc(i,At.empty(),e)}function iU(t){return new yc(t.readTime,t.key,-1)}class yc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yc(Wt.min(),At.empty(),-1)}static max(){return new yc(Wt.max(),At.empty(),-1)}}function aU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:Bs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==oU)throw t;jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new We(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof We?n:We.resolve(n)}catch(n){return We.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):We.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):We.reject(n)}static resolve(e){return new We(((n,r)=>{n(e)}))}static reject(e){return new We(((n,r)=>{r(e)}))}static waitFor(e){return new We(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=We.resolve(!1);for(const r of e)n=n.next((i=>i?We.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new We(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next((m=>{o[h]=m,++c,c===a&&r(o)}),(m=>i(m)))}}))}static doWhile(e,n){return new We(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function cU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vw.oe=-1;function Fp(t){return t==null}function Fv(t){return t===0&&1/t==-1/0}function dU(t){return typeof t=="number"&&Number.isInteger(t)&&!Fv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ed(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.comparator=e,this.root=n||Ir.EMPTY}insert(e,n){return new jn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ir{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r!=null?r:Ir.RED,this.left=i!=null?i:Ir.EMPTY,this.right=a!=null?a:Ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Ir(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ir.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1;Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(e,n,r,i,a){return this}insert(e,n,r){return new Ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ak(this.data.getIterator())}getIteratorFrom(e){return new Ak(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dr(this.comparator);return n.data=e,n}}class Ak{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.fields=e,e.sort(Pr.comparator)}static empty(){return new qi([])}unionWith(e){let n=new Dr(Pr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new oA("Invalid base64 string: "+a):a}})(e);return new Fr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const uU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bc(t){if(Ls(!!t),typeof t=="string"){let e=0;const n=uU.exec(t);if(Ls(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fn(t.seconds),nanos:Fn(t.nanos)}}function Fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jd(t){return typeof t=="string"?Fr.fromBase64String(t):Fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xw(t){const e=t.mapValue.fields.__previous_value__;return Mx(e)?xw(e):e}function lp(t){const e=bc(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class cp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff={mapValue:{}};function Sd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mx(t)?4:pU(t)?9007199254740991:mU(t)?10:11:zt()}function wo(t,e){if(t===e)return!0;const n=Sd(t);if(n!==Sd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lp(t).isEqual(lp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=bc(i.timestampValue),c=bc(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return jd(i.bytesValue).isEqual(jd(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Fn(i.geoPointValue.latitude)===Fn(a.geoPointValue.latitude)&&Fn(i.geoPointValue.longitude)===Fn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Fn(i.integerValue)===Fn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Fn(i.doubleValue),c=Fn(a.doubleValue);return o===c?Fv(o)===Fv(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Xu(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Ek(o)!==Ek(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!wo(o[u],c[u])))return!1;return!0})(t,e);default:return zt()}}function dp(t,e){return(t.values||[]).find((n=>wo(n,e)))!==void 0}function Ju(t,e){if(t===e)return 0;const n=Sd(t),r=Sd(e);if(n!==r)return Bs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bs(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=Fn(a.integerValue||a.doubleValue),u=Fn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return Pk(t.timestampValue,e.timestampValue);case 4:return Pk(lp(t),lp(e));case 5:return Bs(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=jd(a),u=jd(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=Bs(c[h],u[h]);if(m!==0)return m}return Bs(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=Bs(Fn(a.latitude),Fn(o.latitude));return c!==0?c:Bs(Fn(a.longitude),Fn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Rk(t.arrayValue,e.arrayValue);case 10:return(function(a,o){var c,u,h,m;const g=a.fields||{},v=o.fields||{},b=(c=g.value)===null||c===void 0?void 0:c.arrayValue,_=(u=v.value)===null||u===void 0?void 0:u.arrayValue,k=Bs(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((m=_==null?void 0:_.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:Rk(b,_)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===ff.mapValue&&o===ff.mapValue)return 0;if(a===ff.mapValue)return 1;if(o===ff.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const v=Bs(u[g],m[g]);if(v!==0)return v;const b=Ju(c[u[g]],h[m[g]]);if(b!==0)return b}return Bs(u.length,m.length)})(t.mapValue,e.mapValue);default:throw zt()}}function Pk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Bs(t,e);const n=bc(t),r=bc(e),i=Bs(n.seconds,r.seconds);return i!==0?i:Bs(n.nanos,r.nanos)}function Rk(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Ju(n[i],r[i]);if(a)return a}return Bs(n.length,r.length)}function Zu(t){return e_(t)}function e_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=bc(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return jd(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=e_(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${e_(n.fields[o])}`;return i+"}"})(t.mapValue):zt()}function Bv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function t_(t){return!!t&&"integerValue"in t}function yw(t){return!!t&&"arrayValue"in t}function Lk(t){return!!t&&"nullValue"in t}function Dk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function iv(t){return!!t&&"mapValue"in t}function mU(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Dm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ed(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Dm(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!iv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dm(n)}setAll(e){let n=Pr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Dm(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());iv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];iv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ed(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new di(Dm(this.value))}}function lA(t){const e=[];return Ed(t.fields,((n,r)=>{const i=new Pr([n]);if(iv(r)){const a=lA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new qi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new yr(e,0,Wt.min(),Wt.min(),Wt.min(),di.empty(),0)}static newFoundDocument(e,n,r,i){return new yr(e,1,n,Wt.min(),r,i,0)}static newNoDocument(e,n){return new yr(e,2,n,Wt.min(),Wt.min(),di.empty(),0)}static newUnknownDocument(e,n){return new yr(e,3,n,Wt.min(),Wt.min(),di.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.position=e,this.inclusive=n}}function Mk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Ju(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n="asc"){this.field=e,this.dir=n}}function gU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class Qn extends cA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vU(e,n,r):n==="array-contains"?new bU(e,r):n==="in"?new _U(e,r):n==="not-in"?new wU(e,r):n==="array-contains-any"?new jU(e,r):new Qn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xU(e,r):new yU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ju(n,this.value)):n!==null&&Sd(this.value)===Sd(n)&&this.matchesComparison(Ju(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ha extends cA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ha(e,n)}matches(e){return dA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dA(t){return t.op==="and"}function uA(t){return fU(t)&&dA(t)}function fU(t){for(const e of t.filters)if(e instanceof Ha)return!1;return!0}function s_(t){if(t instanceof Qn)return t.field.canonicalString()+t.op.toString()+Zu(t.value);if(uA(t))return t.filters.map((e=>s_(e))).join(",");{const e=t.filters.map((n=>s_(n))).join(",");return`${t.op}(${e})`}}function hA(t,e){return t instanceof Qn?(function(r,i){return i instanceof Qn&&r.op===i.op&&r.field.isEqual(i.field)&&wo(r.value,i.value)})(t,e):t instanceof Ha?(function(r,i){return i instanceof Ha&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&hA(o,i.filters[c])),!0):!1})(t,e):void zt()}function mA(t){return t instanceof Qn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zu(n.value)}`})(t):t instanceof Ha?(function(n){return n.op.toString()+" {"+n.getFilters().map(mA).join(" ,")+"}"})(t):"Filter"}class vU extends Qn{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class xU extends Qn{constructor(e,n){super(e,"in",n),this.keys=pA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yU extends Qn{constructor(e,n){super(e,"not-in",n),this.keys=pA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>At.fromName(r.referenceValue)))}class bU extends Qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yw(n)&&dp(n.arrayValue,this.value)}}class _U extends Qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dp(this.value.arrayValue,n)}}class wU extends Qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dp(this.value.arrayValue,n)}}class jU extends Qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>dp(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Bk(t,e=null,n=[],r=[],i=null,a=null,o=null){return new SU(t,e,n,r,i,a,o)}function bw(t){const e=Zt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>s_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Zu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Zu(r))).join(",")),e.ue=n}return e.ue}function _w(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fk(t.startAt,e.startAt)&&Fk(t.endAt,e.endAt)}function n_(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function NU(t,e,n,r,i,a,o,c){return new yl(t,e,n,r,i,a,o,c)}function ww(t){return new yl(t)}function $k(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jw(t){return t.collectionGroup!==null}function Hu(t){const e=Zt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Dr(Pr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new up(a,r))})),n.has(Pr.keyField().canonicalString())||e.ce.push(new up(Pr.keyField(),r))}return e.ce}function fo(t){const e=Zt(t);return e.le||(e.le=kU(e,Hu(t))),e.le}function kU(t,e){if(t.limitType==="F")return Bk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new up(i.field,a)}));const n=t.endAt?new eh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eh(t.startAt.position,t.startAt.inclusive):null;return Bk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r_(t,e){const n=t.filters.concat([e]);return new yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $v(t,e,n){return new yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fx(t,e){return _w(fo(t),fo(e))&&t.limitType===e.limitType}function gA(t){return`${bw(fo(t))}|lt:${t.limitType}`}function Cu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>mA(i))).join(", ")}]`),Fp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Zu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Zu(i))).join(",")),`Target(${r})`})(fo(t))}; limitType=${t.limitType})`}function Bx(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):At.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Hu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const h=Mk(o,c,u);return o.inclusive?h<=0:h<0})(r.startAt,Hu(r),i)||r.endAt&&!(function(o,c,u){const h=Mk(o,c,u);return o.inclusive?h>=0:h>0})(r.endAt,Hu(r),i))})(t,e)}function CU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fA(t){return(e,n)=>{let r=!1;for(const i of Hu(t)){const a=TU(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function TU(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?Ju(u,h):zt()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ed(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return aA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=new jn(At.comparator);function ml(){return IU}const vA=new jn(At.comparator);function Sm(...t){let e=vA;for(const n of t)e=e.insert(n.key,n);return e}function xA(t){let e=vA;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function od(){return Mm()}function yA(){return Mm()}function Mm(){return new fh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const EU=new jn(At.comparator),AU=new Dr(At.comparator);function ys(...t){let e=AU;for(const n of t)e=e.add(n);return e}const PU=new Dr(Bs);function RU(){return PU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fv(e)?"-0":e}}function bA(t){return{integerValue:""+t}}function LU(t,e){return dU(e)?bA(e):Sw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this._=void 0}}function DU(t,e,n){return t instanceof hp?(function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Mx(a)&&(a=xw(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}})(n,e):t instanceof mp?wA(t,e):t instanceof pp?jA(t,e):(function(i,a){const o=_A(i,a),c=Ok(o)+Ok(i.Pe);return t_(o)&&t_(i.Pe)?bA(c):Sw(i.serializer,c)})(t,e)}function MU(t,e,n){return t instanceof mp?wA(t,e):t instanceof pp?jA(t,e):n}function _A(t,e){return t instanceof Ov?(function(r){return t_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class hp extends $x{}class mp extends $x{constructor(e){super(),this.elements=e}}function wA(t,e){const n=SA(e);for(const r of t.elements)n.some((i=>wo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class pp extends $x{constructor(e){super(),this.elements=e}}function jA(t,e){let n=SA(e);for(const r of t.elements)n=n.filter((i=>!wo(i,r)));return{arrayValue:{values:n}}}class Ov extends $x{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ok(t){return Fn(t.integerValue||t.doubleValue)}function SA(t){return yw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.field=e,this.transform=n}}function BU(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof mp&&i instanceof mp||r instanceof pp&&i instanceof pp?Xu(r.elements,i.elements,wo):r instanceof Ov&&i instanceof Ov?wo(r.Pe,i.Pe):r instanceof hp&&i instanceof hp})(t.transform,e.transform)}class $U{constructor(e,n){this.version=e,this.transformResults=n}}class Rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function av(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ox{}function NA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vx(t.key,Rr.none()):new Bp(t.key,t.data,Rr.none());{const n=t.data,r=di.empty();let i=new Dr(Pr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Sc(t.key,r,new qi(i.toArray()),Rr.none())}}function OU(t,e,n){t instanceof Bp?(function(i,a,o){const c=i.value.clone(),u=Uk(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Sc?(function(i,a,o){if(!av(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Uk(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(kA(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Fm(t,e,n,r){return t instanceof Bp?(function(a,o,c,u){if(!av(a.precondition,o))return c;const h=a.value.clone(),m=zk(a.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof Sc?(function(a,o,c,u){if(!av(a.precondition,o))return c;const h=zk(a.fieldTransforms,u,o),m=o.data;return m.setAll(kA(a)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return av(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function VU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=_A(r.transform,i||null);a!=null&&(n===null&&(n=di.empty()),n.set(r.field,a))}return n||null}function Vk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xu(r,i,((a,o)=>BU(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bp extends Ox{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sc extends Ox{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Uk(t,e,n){const r=new Map;Ls(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,MU(o,c,n[i]))}return r}function zk(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,DU(a,o,e))}return r}class Vx extends Ox{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CA extends Ox{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&OU(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yA();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=NA(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Wt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ys())}isEqual(e){return this.batchId===e.batchId&&Xu(this.mutations,e.mutations,((n,r)=>Vk(n,r)))&&Xu(this.baseMutations,e.baseMutations,((n,r)=>Vk(n,r)))}}class Nw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ls(e.mutations.length===r.length);let i=(function(){return EU})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Nw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn,Ts;function TA(t){switch(t){default:return zt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function IA(t){if(t===void 0)return hl("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case Hn.OK:return Ie.OK;case Hn.CANCELLED:return Ie.CANCELLED;case Hn.UNKNOWN:return Ie.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return Ie.INTERNAL;case Hn.UNAVAILABLE:return Ie.UNAVAILABLE;case Hn.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Hn.NOT_FOUND:return Ie.NOT_FOUND;case Hn.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Hn.ABORTED:return Ie.ABORTED;case Hn.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Hn.DATA_LOSS:return Ie.DATA_LOSS;default:return zt()}}(Ts=Hn||(Hn={}))[Ts.OK=0]="OK",Ts[Ts.CANCELLED=1]="CANCELLED",Ts[Ts.UNKNOWN=2]="UNKNOWN",Ts[Ts.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ts[Ts.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ts[Ts.NOT_FOUND=5]="NOT_FOUND",Ts[Ts.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ts[Ts.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ts[Ts.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ts[Ts.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ts[Ts.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ts[Ts.ABORTED=10]="ABORTED",Ts[Ts.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ts[Ts.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ts[Ts.INTERNAL=13]="INTERNAL",Ts[Ts.UNAVAILABLE=14]="UNAVAILABLE",Ts[Ts.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new hd([4294967295,4294967295],0);function Gk(t){const e=HU().encode(t),n=new JE;return n.update(e),new Uint8Array(n.digest())}function Hk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hd([n,r],0),new hd([i,a],0)]}class kw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nm(`Invalid padding: ${n}`);if(r<0)throw new Nm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nm(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hd.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(hd.fromNumber(r)));return i.compare(WU)===1&&(i=new hd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Gk(e),[r,i]=Hk(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new kw(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const n=Gk(e),[r,i]=Hk(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$p.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ux(Wt.min(),i,new jn(Bs),ml(),ys())}}class $p{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $p(r,n,ys(),ys(),ys())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class EA{constructor(e,n){this.targetId=e,this.me=n}}class AA{constructor(e,n,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Wk{constructor(){this.fe=0,this.ge=qk(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ys(),n=ys(),r=ys();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:zt()}})),new $p(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=qk()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ls(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class KU{constructor(e){this.Le=e,this.Be=new Map,this.ke=ml(),this.qe=Kk(),this.Qe=new jn(Bs)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:zt()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(n_(a))if(r===0){const o=new At(a.path);this.Ue(n,o,yr.newNoDocument(o,Wt.min()))}else Ls(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=jd(r).toUint8Array()}catch(u){if(u instanceof oA)return Yu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new kw(o,i,a)}catch(u){return Yu(u instanceof Nm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((a,o)=>{const c=this.Je(o);if(c){if(a.current&&n_(c.target)){const u=new At(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,yr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}}));let r=ys();this.qe.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.ke.forEach(((a,o)=>o.setReadTime(e)));const i=new Ux(e,n,this.Qe,this.ke,r);return this.ke=ml(),this.qe=Kk(),this.Qe=new jn(Bs),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wk,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dr(Bs),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||jt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wk),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Kk(){return new jn(At.comparator)}function qk(){return new jn(At.comparator)}const qU={asc:"ASCENDING",desc:"DESCENDING"},QU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YU={and:"AND",or:"OR"};class XU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i_(t,e){return t.useProto3Json||Fp(e)?e:{value:e}}function Vv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JU(t,e){return Vv(t,e.toTimestamp())}function Yi(t){return Ls(!!t),Wt.fromTimestamp((function(n){const r=bc(n);return new on(r.seconds,r.nanos)})(t))}function Cw(t,e){return a_(t,e).canonicalString()}function a_(t,e){const n=(function(i){return new Ks(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function RA(t){const e=Ks.fromString(t);return Ls($A(e)),e}function Uv(t,e){return Cw(t.databaseId,e.path)}function Bm(t,e){const n=RA(e);if(n.get(1)!==t.databaseId.projectId)throw new st(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new st(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(DA(n))}function LA(t,e){return Cw(t.databaseId,e)}function ZU(t){const e=RA(t);return e.length===4?Ks.emptyPath():DA(e)}function o_(t){return new Ks(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DA(t){return Ls(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Qk(t,e,n){return{name:Uv(t,e),fields:n.value.mapValue.fields}}function ez(t,e){return"found"in e?(function(r,i){Ls(!!i.found),i.found.name,i.found.updateTime;const a=Bm(r,i.found.name),o=Yi(i.found.updateTime),c=i.found.createTime?Yi(i.found.createTime):Wt.min(),u=new di({mapValue:{fields:i.found.fields}});return yr.newFoundDocument(a,o,c,u)})(t,e):"missing"in e?(function(r,i){Ls(!!i.missing),Ls(!!i.readTime);const a=Bm(r,i.missing),o=Yi(i.readTime);return yr.newNoDocument(a,o)})(t,e):zt()}function tz(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:zt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,m){return h.useProto3Json?(Ls(m===void 0||typeof m=="string"),Fr.fromBase64String(m||"")):(Ls(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Fr.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const m=h.code===void 0?Ie.UNKNOWN:IA(h.code);return new st(m,h.message||"")})(o);n=new AA(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bm(t,r.document.name),a=Yi(r.document.updateTime),o=r.document.createTime?Yi(r.document.createTime):Wt.min(),c=new di({mapValue:{fields:r.document.fields}}),u=yr.newFoundDocument(i,a,o,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new ov(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bm(t,r.document),a=r.readTime?Yi(r.readTime):Wt.min(),o=yr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new ov([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bm(t,r.document),a=r.removedTargetIds||[];n=new ov([],a,i,null)}else{if(!("filter"in e))return zt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new GU(i,a),c=r.targetId;n=new EA(c,o)}}return n}function MA(t,e){let n;if(e instanceof Bp)n={update:Qk(t,e.key,e.value)};else if(e instanceof Vx)n={delete:Uv(t,e.key)};else if(e instanceof Sc)n={update:Qk(t,e.key,e.data),updateMask:dz(e.fieldMask)};else{if(!(e instanceof CA))return zt();n={verify:Uv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof hp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof pp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ov)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw zt()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:JU(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:zt()})(t,e.precondition)),n}function sz(t,e){return t&&t.length>0?(Ls(e!==void 0),t.map((n=>(function(i,a){let o=i.updateTime?Yi(i.updateTime):Yi(a);return o.isEqual(Wt.min())&&(o=Yi(a)),new $U(o,i.transformResults||[])})(n,e)))):[]}function nz(t,e){return{documents:[LA(t,e.path)]}}function rz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LA(t,i);const a=(function(h){if(h.length!==0)return BA(Ha.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:Tu(v.field),direction:oz(v.dir)}})(m)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=i_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:i}}function iz(t){let e=ZU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ls(r===1);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=(function(g){const v=FA(g);return v instanceof Ha&&uA(v)?v.getFilters():[v]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((v=>(function(_){return new up(Iu(_.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(v)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let v;return v=typeof g=="object"?g.value:g,Fp(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(g){const v=!!g.before,b=g.values||[];return new eh(b,v)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const v=!g.before,b=g.values||[];return new eh(b,v)})(n.endAt)),NU(e,i,o,a,c,"F",u,h)}function az(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zt()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Iu(n.unaryFilter.field);return Qn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Iu(n.unaryFilter.field);return Qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Iu(n.unaryFilter.field);return Qn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Iu(n.unaryFilter.field);return Qn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return zt()}})(t):t.fieldFilter!==void 0?(function(n){return Qn.create(Iu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ha.create(n.compositeFilter.filters.map((r=>FA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return zt()}})(n.compositeFilter.op))})(t):zt()}function oz(t){return qU[t]}function lz(t){return QU[t]}function cz(t){return YU[t]}function Tu(t){return{fieldPath:t.canonicalString()}}function Iu(t){return Pr.fromServerFormat(t.fieldPath)}function BA(t){return t instanceof Qn?(function(n){if(n.op==="=="){if(Dk(n.value))return{unaryFilter:{field:Tu(n.field),op:"IS_NAN"}};if(Lk(n.value))return{unaryFilter:{field:Tu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dk(n.value))return{unaryFilter:{field:Tu(n.field),op:"IS_NOT_NAN"}};if(Lk(n.value))return{unaryFilter:{field:Tu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tu(n.field),op:lz(n.op),value:n.value}}})(t):t instanceof Ha?(function(n){const r=n.getFilters().map((i=>BA(i)));return r.length===1?r[0]:{compositeFilter:{op:cz(n.op),filters:r}}})(t):zt()}function dz(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $A(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,i,a=Wt.min(),o=Wt.min(),c=Fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ac(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.ct=e}}function hz(t){const e=iz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$v(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(){this.un=new pz}addToCollectionParentIndex(e,n){return this.un.add(n),We.resolve()}getCollectionParents(e,n){return We.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return We.resolve()}deleteFieldIndex(e,n){return We.resolve()}deleteAllFieldIndexes(e){return We.resolve()}createTargetIndexes(e,n){return We.resolve()}getDocumentsMatchingTarget(e,n){return We.resolve(null)}getIndexType(e,n){return We.resolve(0)}getFieldIndexes(e,n){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,n){return We.resolve(yc.min())}getMinOffsetFromCollectionGroup(e,n){return We.resolve(yc.min())}updateCollectionGroup(e,n,r){return We.resolve()}updateIndexEntries(e,n){return We.resolve()}}class pz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dr(Ks.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dr(Ks.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new th(0)}static kn(){return new th(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.changes=new fh((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?We.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Fm(r.mutation,i,qi.empty(),on.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ys()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ys()){const i=od();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=Sm();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=od();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ys())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=ml();const o=Mm(),c=(function(){return Mm()})();return n.forEach(((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Sc)?a=a.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Fm(m.mutation,h,m.mutation.getFieldMask(),on.now())):o.set(h.key,qi.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,m)=>o.set(h,m))),n.forEach(((h,m)=>{var g;return c.set(h,new fz(m,(g=o.get(h))!==null&&g!==void 0?g:null))})),c)))}recalculateAndSaveOverlays(e,n){const r=Mm();let i=new jn(((o,c)=>o-c)),a=ys();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||qi.empty();m=c.applyToLocalView(h,m),r.set(u,m);const g=(i.get(c.batchId)||ys()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,g=yA();m.forEach((v=>{if(!a.has(v)){const b=NA(n.get(v),r.get(v));b!==null&&g.set(v,b),a=a.add(v)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return We.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):We.resolve(od());let c=-1,u=a;return o.next((h=>We.forEach(h,((m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(m)?We.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{u=u.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,ys()))).next((m=>({batchId:c,changes:xA(m)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=Sm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=Sm();return this.indexManager.getCollectionParents(e,a).next((c=>We.forEach(c,(u=>{const h=(function(g,v){return new yl(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{o=o.insert(g,v)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,yr.newInvalidDocument(m)))}));let c=Sm();return o.forEach(((u,h)=>{const m=a.get(u);m!==void 0&&Fm(m.mutation,h,qi.empty(),on.now()),Bx(n,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return We.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Yi(i.createTime)}})(n)),We.resolve()}getNamedQuery(e,n){return We.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:hz(i.bundledQuery),readTime:Yi(i.readTime)}})(n)),We.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.overlays=new jn(At.comparator),this.Ir=new Map}getOverlay(e,n){return We.resolve(this.overlays.get(n))}getOverlays(e,n){const r=od();return We.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.ht(e,n,a)})),We.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),We.resolve()}getOverlaysForCollection(e,n,r){const i=od(),a=n.length+1,o=new At(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return We.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new jn(((h,m)=>h-m));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=a.get(h.largestBatchId);m===null&&(m=od(),a=a.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=od(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,m)=>c.set(h,m))),!(c.size()>=i)););return We.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zU(n,r));let a=this.Ir.get(n);a===void 0&&(a=ys(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return We.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,We.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.Tr=new Dr(xr.Er),this.dr=new Dr(xr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new xr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new xr(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new At(new Ks([])),r=new xr(n,e),i=new xr(n,e+1),a=[];return this.dr.forEachInRange([r,i],(o=>{this.Vr(o),a.push(o.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new At(new Ks([])),r=new xr(n,e),i=new xr(n,e+1);let a=ys();return this.dr.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new xr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return At.comparator(e.key,n.key)||Bs(e.wr,n.wr)}static Ar(e,n){return Bs(e.wr,n.wr)||At.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dr(xr.Er)}checkEmpty(e){return We.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UU(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new xr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return We.resolve(o)}lookupMutationBatch(e,n){return We.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return We.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xr(n,0),i=new xr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(o=>{const c=this.Dr(o.wr);a.push(c)})),We.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dr(Bs);return n.forEach((i=>{const a=new xr(i,0),o=new xr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],(c=>{r=r.add(c.wr)}))})),We.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;At.isDocumentKey(a)||(a=a.child(""));const o=new xr(new At(a),0);let c=new Dr(Bs);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)}),o),We.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ls(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return We.forEach(n.mutations,(i=>{const a=new xr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new xr(n,0),i=this.br.firstAfterOrEqual(r);return We.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,We.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.Mr=e,this.docs=(function(){return new jn(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return We.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(n))}getEntries(e,n){let r=ml();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():yr.newInvalidDocument(i))})),We.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ml();const o=n.path,c=new At(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||aU(iU(m),r)<=0||(i.has(m.key)||Bx(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return We.resolve(a)}getAllFromCollectionGroup(e,n,r,i){zt()}Or(e,n){return We.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jz(this)}getSize(e){return We.resolve(this.size)}}class jz extends gz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),We.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.persistence=e,this.Nr=new fh((n=>bw(n)),_w),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tw,this.targetCount=0,this.kr=th.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),We.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new th(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,We.resolve()}updateTargetData(e,n){return this.Kn(n),We.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),We.waitFor(a).next((()=>i))}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return We.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),We.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),We.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),We.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return We.resolve(r)}containsKey(e,n){return We.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vw(0),this.Kr=!1,this.Kr=!0,this.$r=new bz,this.referenceDelegate=e(this),this.Ur=new Sz(this),this.indexManager=new mz,this.remoteDocumentCache=(function(i){return new wz(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new uz(n),this.Gr=new xz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _z(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){jt("MemoryPersistence","Starting transaction:",e);const i=new kz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,n){return We.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class kz extends lU{constructor(e){super(),this.currentSequenceNumber=e}}class Iw{constructor(e){this.persistence=e,this.Jr=new Tw,this.Yr=null}static Zr(e){return new Iw(e)}get Xr(){if(this.Yr)return this.Yr;throw zt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),We.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),We.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),We.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.Xr,(r=>{const i=At.fromPath(r);return this.ei(e,i).next((a=>{a||n.removeEntry(i,Wt.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return We.or([()=>We.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ys(),i=ys();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ew(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return IB()?8:cU(Qr())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.Zi(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new Cz;return this.Xi(e,n,o).next((c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)}))})).next((()=>a.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(om()<=Ss.DEBUG&&jt("QueryEngine","SDK will not create cache indexes for query:",Cu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),We.resolve()):(om()<=Ss.DEBUG&&jt("QueryEngine","Query:",Cu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(om()<=Ss.DEBUG&&jt("QueryEngine","The SDK decides to create cache indexes for query:",Cu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fo(n))):We.resolve())}Yi(e,n){if($k(n))return We.resolve(null);let r=fo(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=$v(n,null,"F"),r=fo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ys(...a);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,$v(n,null,"F")):this.rs(e,h,n,u)}))))})))))}Zi(e,n,r,i){return $k(n)||i.isEqual(Wt.min())?We.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?We.resolve(null):(om()<=Ss.DEBUG&&jt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cu(n)),this.rs(e,o,n,rU(i,-1)).next((c=>c)))}))}ts(e,n){let r=new Dr(fA(e));return n.forEach(((i,a)=>{Bx(e,a)&&(r=r.add(a))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return om()<=Ss.DEBUG&&jt("QueryEngine","Using full collection scan to execute query:",Cu(n)),this.Ji.getDocumentsMatchingQuery(e,n,yc.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new jn(Bs),this._s=new fh((a=>bw(a)),_w),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function Ez(t,e,n,r){return new Iz(t,e,n,r)}async function OA(t,e){const n=Zt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ys();for(const h of i){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of a){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Az(t,e){const n=Zt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,m){const g=h.batch,v=g.keys();let b=We.resolve();return v.forEach((_=>{b=b.next((()=>m.getEntry(u,_))).next((k=>{const I=h.docVersions.get(_);Ls(I!==null),k.version.compareTo(I)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),m.addEntry(k)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ys();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function VA(t){const e=Zt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function Pz(t,e){const n=Zt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;c.push(n.Ur.removeMatchingKeys(a,m.removedDocuments,g).next((()=>n.Ur.addMatchingKeys(a,m.addedDocuments,g))));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Fr.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(g,b),(function(k,I,R){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(v,b,m)&&c.push(n.Ur.updateTargetData(a,b))}));let u=ml(),h=ys();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(Rz(a,o,e.documentUpdates).next((m=>{u=m.Ps,h=m.Is}))),!r.isEqual(Wt.min())){const m=n.Ur.getLastRemoteSnapshotVersion(a).next((g=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(m)}return We.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(n.os=i,a)))}function Rz(t,e,n){let r=ys(),i=ys();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=ml();return n.forEach(((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Wt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):jt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{Ps:o,Is:i}}))}function Lz(t,e){const n=Zt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Dz(t,e){const n=Zt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((a=>a?(i=a,We.resolve(i)):n.Ur.allocateTargetId(r).next((o=>(i=new ac(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function l_(t,e,n){const r=Zt(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Mp(o))throw o;jt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Yk(t,e,n){const r=Zt(t);let i=Wt.min(),a=ys();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,h,m){const g=Zt(u),v=g._s.get(m);return v!==void 0?We.resolve(g.os.get(v)):g.Ur.getTargetData(h,m)})(r,o,fo(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Wt.min(),n?a:ys()))).next((c=>(Mz(r,CU(e),c),{documents:c,Ts:a})))))}function Mz(t,e,n){let r=t.us.get(e)||Wt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class Xk{constructor(){this.activeTargetIds=RU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fz{constructor(){this.so=new Xk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function tb(){return vf===null?vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="WebChannelConnection";class Vz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=tb(),u=this.xo(n,r.toUriEncodedString());jt("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,o),this.No(n,u,h,i).then((m=>(jt("RestConnection",`Received RPC '${n}' ${c}: `,m),m)),(m=>{throw Yu("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",i),m}))}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gh})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,o)=>n[o]=a)),i&&i.headers.forEach(((a,o)=>n[o]=a))}xo(n,r){const i=$z[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=tb();return new Promise(((o,c)=>{const u=new ZE;u.setWithCredentials(!0),u.listenOnce(eA.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case rv.NO_ERROR:const m=u.getResponseJson();jt(zr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),o(m);break;case rv.TIMEOUT:jt(zr,`RPC '${e}' ${a} timed out`),c(new st(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case rv.HTTP_ERROR:const g=u.getStatus();if(jt(zr,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const _=(function(I){const R=I.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(R)>=0?R:Ie.UNKNOWN})(b.status);c(new st(_,b.message))}else c(new st(Ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new st(Ie.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{jt(zr,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);jt(zr,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",h,r,15)}))}Bo(e,n,r){const i=tb(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nA(),c=sA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=a.join("");jt(zr,`Creating RPC '${e}' stream ${i}: ${m}`,u);const g=o.createWebChannel(m,u);let v=!1,b=!1;const _=new Oz({Io:I=>{b?jt(zr,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(v||(jt(zr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),jt(zr,`RPC '${e}' stream ${i} sending:`,I),g.send(I))},To:()=>g.close()}),k=(I,R,P)=>{I.listen(R,(N=>{try{P(N)}catch(x){setTimeout((()=>{throw x}),0)}}))};return k(g,jm.EventType.OPEN,(()=>{b||(jt(zr,`RPC '${e}' stream ${i} transport opened.`),_.yo())})),k(g,jm.EventType.CLOSE,(()=>{b||(b=!0,jt(zr,`RPC '${e}' stream ${i} transport closed`),_.So())})),k(g,jm.EventType.ERROR,(I=>{b||(b=!0,Yu(zr,`RPC '${e}' stream ${i} transport errored:`,I),_.So(new st(Ie.UNAVAILABLE,"The operation could not be completed")))})),k(g,jm.EventType.MESSAGE,(I=>{var R;if(!b){const P=I.data[0];Ls(!!P);const N=P,x=N.error||((R=N[0])===null||R===void 0?void 0:R.error);if(x){jt(zr,`RPC '${e}' stream ${i} received error:`,x);const w=x.status;let L=(function(C){const M=Hn[C];if(M!==void 0)return IA(M)})(w),j=x.message;L===void 0&&(L=Ie.INTERNAL,j="Unknown error status: "+w+" with message "+x.message),b=!0,_.So(new st(L,j)),g.close()}else jt(zr,`RPC '${e}' stream ${i} received:`,P),_.bo(P)}})),k(c,tA.STAT_EVENT,(I=>{I.stat===Z1.PROXY?jt(zr,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Z1.NOPROXY&&jt(zr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.wo()}),0),_}}function sb(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){return new XU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&jt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Aw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Ie.RESOURCE_EXHAUSTED?(hl(n.toString()),hl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new st(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return jt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Uz extends UA{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=tz(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Wt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Wt.min():o.readTime?Yi(o.readTime):Wt.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=o_(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=n_(u)?{documents:nz(a,u)}:{query:rz(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=PA(a,o.resumeToken);const h=i_(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Wt.min())>0){c.readTime=Vv(a,o.snapshotVersion.toTimestamp());const h=i_(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=az(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=o_(this.serializer),n.removeTarget=e,this.a_(n)}}class zz extends UA{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ls(!!e.streamToken),this.lastStreamToken=e.streamToken,Ls(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ls(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sz(e.writeResults,e.commitTime),r=Yi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=o_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>MA(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new st(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Mo(e,a_(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(Ie.UNKNOWN,a.toString())}))}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,a_(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new st(Ie.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Hz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hl(n),this.D_=!1):jt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((o=>{r.enqueueAndForget((async()=>{Ad(this)&&(jt("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=Zt(u);h.L_.add(4),await Op(h),h.q_.set("Unknown"),h.L_.delete(4),await Gx(h)})(this))}))})),this.q_=new Hz(r,i)}}async function Gx(t){if(Ad(t))for(const e of t.B_)await e(!0)}async function Op(t){for(const e of t.B_)await e(!1)}function zA(t,e){const n=Zt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dw(n)?Lw(n):vh(n).r_()&&Rw(n,e))}function Pw(t,e){const n=Zt(t),r=vh(n);n.N_.delete(e),r.r_()&&GA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ad(n)&&n.q_.set("Unknown"))}function Rw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vh(t).A_(e)}function GA(t,e){t.Q_.xe(e),vh(t).R_(e)}function Lw(t){t.Q_=new KU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vh(t).start(),t.q_.v_()}function Dw(t){return Ad(t)&&!vh(t).n_()&&t.N_.size>0}function Ad(t){return Zt(t).L_.size===0}function HA(t){t.Q_=void 0}async function Kz(t){t.q_.set("Online")}async function qz(t){t.N_.forEach(((e,n)=>{Rw(t,e)}))}async function Qz(t,e){HA(t),Dw(t)?(t.q_.M_(e),Lw(t)):t.q_.set("Unknown")}async function Yz(t,e,n){if(t.q_.set("Online"),e instanceof AA&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(r){jt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zv(t,r)}else if(e instanceof ov?t.Q_.Ke(e):e instanceof EA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Wt.min()))try{const r=await VA(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.N_.get(h);m&&a.N_.set(h,m.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,h)=>{const m=a.N_.get(u);if(!m)return;a.N_.set(u,m.withResumeToken(Fr.EMPTY_BYTE_STRING,m.snapshotVersion)),GA(a,u);const g=new ac(m.target,u,h,m.sequenceNumber);Rw(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){jt("RemoteStore","Failed to raise snapshot:",r),await zv(t,r)}}async function zv(t,e,n){if(!Mp(e))throw e;t.L_.add(1),await Op(t),t.q_.set("Offline"),n||(n=()=>VA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{jt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gx(t)}))}function WA(t,e){return e().catch((n=>zv(t,n,e)))}async function Hx(t){const e=Zt(t),n=_c(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xz(e);)try{const i=await Lz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Jz(e,i)}catch(i){await zv(e,i)}KA(e)&&qA(e)}function Xz(t){return Ad(t)&&t.O_.length<10}function Jz(t,e){t.O_.push(e);const n=_c(t);n.r_()&&n.V_&&n.m_(e.mutations)}function KA(t){return Ad(t)&&!_c(t).n_()&&t.O_.length>0}function qA(t){_c(t).start()}async function Zz(t){_c(t).p_()}async function eG(t){const e=_c(t);for(const n of t.O_)e.m_(n.mutations)}async function tG(t,e,n){const r=t.O_.shift(),i=Nw.from(r,e,n);await WA(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Hx(t)}async function sG(t,e){e&&_c(t).V_&&await(async function(r,i){if((function(o){return TA(o)&&o!==Ie.ABORTED})(i.code)){const a=r.O_.shift();_c(r).s_(),await WA(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Hx(r)}})(t,e),KA(t)&&qA(t)}async function Zk(t,e){const n=Zt(t);n.asyncQueue.verifyOperationInProgress(),jt("RemoteStore","RemoteStore received new credentials");const r=Ad(n);n.L_.add(3),await Op(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gx(n)}async function nG(t,e){const n=Zt(t);e?(n.L_.delete(2),await Gx(n)):e||(n.L_.add(2),await Op(n),n.q_.set("Unknown"))}function vh(t){return t.K_||(t.K_=(function(n,r,i){const a=Zt(n);return a.w_(),new Uz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Kz.bind(null,t),Ro:qz.bind(null,t),mo:Qz.bind(null,t),d_:Yz.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Dw(t)?Lw(t):t.q_.set("Unknown")):(await t.K_.stop(),HA(t))}))),t.K_}function _c(t){return t.U_||(t.U_=(function(n,r,i){const a=Zt(n);return a.w_(),new zz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zz.bind(null,t),mo:sG.bind(null,t),f_:eG.bind(null,t),g_:tG.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Hx(t)):(await t.U_.stop(),t.O_.length>0&&(jt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new Mw(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fw(t,e){if(hl("AsyncQueue",`${e}: ${t}`),Mp(t))return new st(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=Sm(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new Wu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.W_=new jn(At.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):zt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class sh{constructor(e,n,r,i,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new sh(e,n,Wu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class iG{constructor(){this.queries=tC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Zt(n),a=i.queries;i.queries=tC(),a.forEach(((o,c)=>{for(const u of c.j_)u.onError(r)}))})(this,new st(Ie.ABORTED,"Firestore shutting down"))}}function tC(){return new fh((t=>gA(t)),Fx)}async function QA(t,e){const n=Zt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new rG,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Fw(o,`Initialization of query '${Cu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Bw(n)}async function YA(t,e){const n=Zt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aG(t,e){const n=Zt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Bw(n)}function oG(t,e,n){const r=Zt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function Bw(t){t.Y_.forEach((e=>{e.next()}))}var c_,sC;(sC=c_||(c_={})).ea="default",sC.Cache="cache";class XA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=sh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==c_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.key=e}}class ZA{constructor(e){this.key=e}}class lG{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ys(),this.mutatedKeys=ys(),this.Aa=fA(e),this.Ra=new Wu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new eC,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),b=Bx(this.query,g)?g:null,_=!!v&&this.mutatedKeys.has(v.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let I=!1;v&&b?v.data.isEqual(b.data)?_!==k&&(r.track({type:3,doc:b}),I=!0):this.ga(v,b)||(r.track({type:2,doc:b}),I=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(c=!0)):!v&&b?(r.track({type:0,doc:b}),I=!0):v&&!b&&(r.track({type:1,doc:v}),I=!0,(u||h)&&(c=!0)),I&&(b?(o=o.add(b),a=k?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,g)=>(function(b,_){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return k(b)-k(_)})(m.type,g.type)||this.Aa(m.doc,g.doc))),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new sh(this.query,e.Ra,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new eC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ys(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new ZA(r))})),this.da.forEach((r=>{e.has(r)||n.push(new JA(r))})),n}ba(e){this.Ta=e.Ts,this.da=ys();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return sh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class cG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dG{constructor(e){this.key=e,this.va=!1}}class uG{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fh((c=>gA(c)),Fx),this.Ma=new Map,this.xa=new Set,this.Oa=new jn(At.comparator),this.Na=new Map,this.La=new Tw,this.Ba={},this.ka=new Map,this.qa=th.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hG(t,e,n=!0){const r=i4(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await e4(r,e,n,!0),i}async function mG(t,e){const n=i4(t);await e4(n,e,!0,!1)}async function e4(t,e,n,r){const i=await Dz(t.localStore,fo(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await pG(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&zA(t.remoteStore,i),c}async function pG(t,e,n,r,i){t.Ka=(g,v,b)=>(async function(k,I,R,P){let N=I.view.ma(R);N.ns&&(N=await Yk(k.localStore,I.query,!1).then((({documents:j})=>I.view.ma(j,N))));const x=P&&P.targetChanges.get(I.targetId),w=P&&P.targetMismatches.get(I.targetId)!=null,L=I.view.applyChanges(N,k.isPrimaryClient,x,w);return rC(k,I.targetId,L.wa),L.snapshot})(t,g,v,b);const a=await Yk(t.localStore,e,!0),o=new lG(e,a.Ts),c=o.ma(a.documents),u=$p.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);rC(t,n,h.wa);const m=new cG(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function gG(t,e,n){const r=Zt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((o=>!Fx(o,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await l_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pw(r.remoteStore,i.targetId),d_(r,i.targetId)})).catch(Dp)):(d_(r,i.targetId),await l_(r.localStore,i.targetId,!0))}async function fG(t,e){const n=Zt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pw(n.remoteStore,r.targetId))}async function vG(t,e,n){const r=SG(t);try{const i=await(function(o,c){const u=Zt(o),h=on.now(),m=c.reduce(((b,_)=>b.add(_.key)),ys());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=ml(),k=ys();return u.cs.getEntries(b,m).next((I=>{_=I,_.forEach(((R,P)=>{P.isValidDocument()||(k=k.add(R))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((I=>{g=I;const R=[];for(const P of c){const N=VU(P,g.get(P.key).overlayedDocument);N!=null&&R.push(new Sc(P.key,N,lA(N.value.mapValue),Rr.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,R,c)})).next((I=>{v=I;const R=I.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(b,I.batchId,R)}))})).then((()=>({batchId:v.batchId,changes:xA(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new jn(Bs)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h})(r,i.batchId,n),await Vp(r,i.changes),await Hx(r.remoteStore)}catch(i){const a=Fw(i,"Failed to persist write");n.reject(a)}}async function t4(t,e){const n=Zt(t);try{const r=await Pz(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Na.get(a);o&&(Ls(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ls(o.va):i.removedDocuments.size>0&&(Ls(o.va),o.va=!1))})),await Vp(n,r,e)}catch(r){await Dp(r)}}function nC(t,e,n){const r=Zt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Zt(o);u.onlineState=c;let h=!1;u.queries.forEach(((m,g)=>{for(const v of g.j_)v.Z_(c)&&(h=!0)})),h&&Bw(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xG(t,e,n){const r=Zt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new jn(At.comparator);o=o.insert(a,yr.newNoDocument(a,Wt.min()));const c=ys().add(a),u=new Ux(Wt.min(),new Map,new jn(Bs),o,c);await t4(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),$w(r)}else await l_(r.localStore,e,!1).then((()=>d_(r,e,n))).catch(Dp)}async function yG(t,e){const n=Zt(t),r=e.batch.batchId;try{const i=await Az(n.localStore,e);n4(n,r,null),s4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vp(n,i)}catch(i){await Dp(i)}}async function bG(t,e,n){const r=Zt(t);try{const i=await(function(o,c){const u=Zt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(Ls(g!==null),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>u.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);n4(r,e,n),s4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vp(r,i)}catch(i){await Dp(i)}}function s4(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function n4(t,e,n){const r=Zt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function d_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||r4(t,r)}))}function r4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Pw(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$w(t))}function rC(t,e,n){for(const r of n)r instanceof JA?(t.La.addReference(r.key,e),_G(t,r)):r instanceof ZA?(jt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||r4(t,r.key)):zt()}function _G(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(jt("SyncEngine","New document in limbo: "+n),t.xa.add(r),$w(t))}function $w(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new At(Ks.fromString(e)),r=t.qa.next();t.Na.set(r,new dG(n)),t.Oa=t.Oa.insert(n,r),zA(t.remoteStore,new ac(fo(ww(n.path)),r,"TargetPurposeLimboResolution",vw.oe))}}async function Vp(t,e,n){const r=Zt(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((c,u)=>{o.push(r.Ka(u,e,n).then((h=>{var m;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=Ew.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(o),r.Ca.d_(i),await(async function(u,h){const m=Zt(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>We.forEach(h,(v=>We.forEach(v.$i,(b=>m.persistence.referenceDelegate.addReference(g,v.targetId,b))).next((()=>We.forEach(v.Ui,(b=>m.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))))))}catch(g){if(!Mp(g))throw g;jt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=m.os.get(v),_=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(_);m.os=m.os.insert(v,k)}}})(r.localStore,a))}async function wG(t,e){const n=Zt(t);if(!n.currentUser.isEqual(e)){jt("SyncEngine","User change. New user:",e.toKey());const r=await OA(n.localStore,e);n.currentUser=e,(function(a,o){a.ka.forEach((c=>{c.forEach((u=>{u.reject(new st(Ie.CANCELLED,o))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vp(n,r.hs)}}function jG(t,e){const n=Zt(t),r=n.Na.get(e);if(r&&r.va)return ys().add(r.key);{let i=ys();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function i4(t){const e=Zt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xG.bind(null,e),e.Ca.d_=aG.bind(null,e.eventManager),e.Ca.$a=oG.bind(null,e.eventManager),e}function SG(t){const e=Zt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bG.bind(null,e),e}class Gv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Ez(this.persistence,new Tz,e.initialUser,this.serializer)}Ga(e){return new Nz(Iw.Zr,this.serializer)}Wa(e){return new Fz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gv.provider={build:()=>new Gv};class u_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wG.bind(null,this.syncEngine),await nG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iG})()}createDatastore(e){const n=zx(e.databaseInfo.databaseId),r=(function(a){return new Vz(a)})(e.databaseInfo);return(function(a,o,c,u){return new Gz(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new Wz(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>nC(this.syncEngine,n,0)),(function(){return Jk.D()?new Jk:new Bz})())}createSyncEngine(e,n){return(function(i,a,o,c,u,h,m){const g=new uG(i,a,o,c,u,h);return m&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=Zt(i);jt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Op(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}u_.provider={build:()=>new u_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hl("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new st(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const o=Zt(i),c={documents:a.map((g=>Uv(o.serializer,g)))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ks.emptyPath(),c,a.length),h=new Map;u.forEach((g=>{const v=ez(o.serializer,g);h.set(v.key.toString(),v)}));const m=[];return a.forEach((g=>{const v=h.get(g.toString());Ls(!!v),m.push(v)})),m})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=At.fromPath(r);this.mutations.push(new CA(i,this.precondition(i)))})),await(async function(r,i){const a=Zt(r),o={writes:i.map((c=>MA(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,Ks.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw zt();n=Wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new st(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Wt.min())?Rr.exists(!1):Rr.updateTime(n):Rr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Wt.min()))throw new st(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rr.updateTime(n)}return Rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this._u=r.maxAttempts,this.t_=new Aw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new NG(this.datastore),n=this.cu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.lu(i)}))))})).catch((r=>{this.lu(r)}))}))}cu(e){try{const n=this.updateFunction(e);return!Fp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!TA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=iA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{jt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(jt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function nb(t,e){t.asyncQueue.verifyOperationInProgress(),jt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await OA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function iC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TG(t);jt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Zk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Zk(e.remoteStore,i))),t._onlineComponents=e}async function TG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){jt("FirestoreClient","Using user provided OfflineComponentProvider");try{await nb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Yu("Error using user provided cache. Falling back to memory cache: "+n),await nb(t,new Gv)}}else jt("FirestoreClient","Using default OfflineComponentProvider"),await nb(t,new Gv);return t._offlineComponents}async function Ow(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(jt("FirestoreClient","Using user provided OnlineComponentProvider"),await iC(t,t._uninitializedComponentsProvider._online)):(jt("FirestoreClient","Using default OnlineComponentProvider"),await iC(t,new u_))),t._onlineComponents}function IG(t){return Ow(t).then((e=>e.syncEngine))}function EG(t){return Ow(t).then((e=>e.datastore))}async function o4(t){const e=await Ow(t),n=e.eventManager;return n.onListen=hG.bind(null,e.syncEngine),n.onUnlisten=gG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fG.bind(null,e.syncEngine),n}function AG(t,e,n={}){const r=new go;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const m=new a4({next:v=>{m.Za(),o.enqueueAndForget((()=>YA(a,g)));const b=v.docs.has(c);!b&&v.fromCache?h.reject(new st(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&u&&u.source==="server"?h.reject(new st(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new XA(ww(c.path),m,{includeMetadataChanges:!0,_a:!0});return QA(a,g)})(await o4(t),t.asyncQueue,e,n,r))),r.promise}function PG(t,e,n={}){const r=new go;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const m=new a4({next:v=>{m.Za(),o.enqueueAndForget((()=>YA(a,g))),v.fromCache&&u.source==="server"?h.reject(new st(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new XA(c,m,{includeMetadataChanges:!0,_a:!0});return QA(a,g)})(await o4(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){if(!n)throw new st(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RG(t,e,n,r){if(e===!0&&r===!0)throw new st(Ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oC(t){if(!At.isDocumentKey(t))throw new st(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lC(t){if(At.isDocumentKey(t))throw new st(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":zt()}function jo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new st(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wx(t);throw new st(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LG(t,e){if(e<=0)throw new st(Ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new st(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new st(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new st(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new st(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new st(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Up{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cC(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QV;switch(r.type){case"firstParty":return new ZV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=aC.get(n);r&&(jt("ComponentProvider","Removing Datastore"),aC.delete(n),r.terminate())})(this),Promise.resolve()}}function DG(t,e,n,r={}){var i;const a=(t=jo(t,Up))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Yu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Wr.MOCK_USER;else{c=wB(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new st(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Wr(h)}t._authCredentials=new YV(new rA(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qa(this.firestore,e,this._query)}}class ui{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ui(this.firestore,e,this._key)}}class vc extends qa{constructor(e,n,r){super(e,n,ww(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ui(this.firestore,null,new At(e))}withConverter(e){return new vc(this.firestore,e,this._path)}}function pl(t,e,...n){if(t=Yn(t),Vw("collection","path",e),t instanceof Up){const r=Ks.fromString(e,...n);return lC(r),new vc(t,null,r)}{if(!(t instanceof ui||t instanceof vc))throw new st(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ks.fromString(e,...n));return lC(r),new vc(t.firestore,null,r)}}function xh(t,e){if(t=jo(t,Up),Vw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new st(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qa(t,null,(function(r){return new yl(Ks.emptyPath(),r)})(e))}function ps(t,e,...n){if(t=Yn(t),arguments.length===1&&(e=iA.newId()),Vw("doc","path",e),t instanceof Up){const r=Ks.fromString(e,...n);return oC(r),new ui(t,null,new At(r))}{if(!(t instanceof ui||t instanceof vc))throw new st(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ks.fromString(e,...n));return oC(r),new ui(t.firestore,t instanceof vc?t.converter:null,new At(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Aw(this,"async_queue_retry"),this.Vu=()=>{const r=sb();r&&jt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new go;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mp(e))throw e;jt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(r);throw hl("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Mw.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&zt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class yh extends Up{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new dC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dC(e),this._firestoreClient=void 0,await e}}}function MG(t,e){const n=typeof t=="object"?t:iw(),r=typeof t=="string"?t:"(default)",i=rw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=bB("firestore");a&&DG(i,...a)}return i}function zp(t){if(t._terminated)throw new st(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FG(t),t._firestoreClient}function FG(t){var e,n,r;const i=t._freezeSettings(),a=(function(c,u,h,m){return new hU(c,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,l4(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new CG(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nd(Fr.fromBase64String(e))}catch(n){throw new st(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nd(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new st(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function h_(){return new bh("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new st(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new st(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bs(this._lat,e._lat)||Bs(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG=/^__.*__$/;class $G{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bp(e,this.data,n,this.fieldTransforms)}}class c4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function d4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class Gw{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(d4(this.Cu)&&BG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zx(e)}Qu(e,n,r,i=!1){return new Gw({Cu:e,methodName:n,qu:r,path:Pr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gp(t){const e=t._freezeSettings(),n=zx(t._databaseId);return new OG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hw(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Kw("Data must be an object, but it was:",o,r);const c=p4(r,o);let u,h;if(a.merge)u=new qi(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const v=m_(e,g,n);if(!o.contains(v))throw new st(Ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);f4(m,v)||m.push(v)}u=new qi(m),h=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=o.fieldTransforms;return new $G(new di(c),u,h)}class qx extends Kx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qx}}class Ww extends Kx{_toFieldTransform(e){return new FU(e.path,new hp)}isEqual(e){return e instanceof Ww}}function u4(t,e,n,r){const i=t.Qu(1,e,n);Kw("Data must be an object, but it was:",i,r);const a=[],o=di.empty();Ed(r,((u,h)=>{const m=qw(e,u,n);h=Yn(h);const g=i.Nu(m);if(h instanceof qx)a.push(m);else{const v=Hp(h,g);v!=null&&(a.push(m),o.set(m,v))}}));const c=new qi(a);return new c4(o,c,i.fieldTransforms)}function h4(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[m_(e,r,n)],u=[i];if(a.length%2!=0)throw new st(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)c.push(m_(e,a[v])),u.push(a[v+1]);const h=[],m=di.empty();for(let v=c.length-1;v>=0;--v)if(!f4(h,c[v])){const b=c[v];let _=u[v];_=Yn(_);const k=o.Nu(b);if(_ instanceof qx)h.push(b);else{const I=Hp(_,k);I!=null&&(h.push(b),m.set(b,I))}}const g=new qi(h);return new c4(m,g,o.fieldTransforms)}function m4(t,e,n,r=!1){return Hp(n,t.Qu(r?4:3,e))}function Hp(t,e){if(g4(t=Yn(t)))return Kw("Unsupported field value:",e,t),p4(t,e);if(t instanceof Kx)return(function(r,i){if(!d4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Hp(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=on.fromDate(r);return{timestampValue:Vv(i.serializer,a)}}if(r instanceof on){const a=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vv(i.serializer,a)}}if(r instanceof Uw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nd)return{bytesValue:PA(i.serializer,r._byteString)};if(r instanceof ui){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zw)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Sw(c.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Wx(r)}`)})(t,e)}function p4(t,e){const n={};return aA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ed(t,((r,i)=>{const a=Hp(i,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function g4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof on||t instanceof Uw||t instanceof Nd||t instanceof ui||t instanceof Kx||t instanceof zw)}function Kw(t,e,n){if(!g4(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=Wx(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function m_(t,e,n){if((e=Yn(e))instanceof bh)return e._internalPath;if(typeof e=="string")return qw(t,e);throw Hv("Field path arguments must be of type string or ",t,!1,void 0,n)}const VG=new RegExp("[~\\*/\\[\\]]");function qw(t,e,n){if(e.search(VG)>=0)throw Hv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bh(...e.split("."))._internalPath}catch(r){throw Hv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new st(Ie.INVALID_ARGUMENT,c+t+u)}function f4(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UG extends gp{data(){return super.data()}}function Qx(t,e){return typeof e=="string"?qw(t,e):e instanceof bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new st(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qw{}class Wp extends Qw{}function En(t,e,...n){let r=[];e instanceof Qw&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof Yw)).length,c=a.filter((u=>u instanceof Yx)).length;if(o>1||o>0&&c>0)throw new st(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Yx extends Wp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yx(e,n,r)}_apply(e){const n=this._parse(e);return x4(e._query,n),new qa(e.firestore,e.converter,r_(e._query,n))}_parse(e){const n=Gp(e.firestore);return(function(a,o,c,u,h,m,g){let v;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new st(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){hC(g,m);const b=[];for(const _ of g)b.push(uC(u,a,_));v={arrayValue:{values:b}}}else v=uC(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||hC(g,m),v=m4(c,o,g,m==="in"||m==="not-in");return Qn.create(h,m,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kr(t,e,n){const r=e,i=Qx("where",t);return Yx._create(i,r,n)}class Yw extends Qw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yw(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ha.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)x4(o,u),o=r_(o,u)})(e._query,n),new qa(e.firestore,e.converter,r_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xw extends Wp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xw(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new st(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new st(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new up(a,o)})(e._query,this._field,this._direction);return new qa(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new yl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Qi(t,e="asc"){const n=e,r=Qx("orderBy",t);return Xw._create(r,n)}class Jw extends Wp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jw(e,n,r)}_apply(e){return new qa(e.firestore,e.converter,$v(e._query,this._limit,this._limitType))}}function rr(t){return LG("limit",t),Jw._create("limit",t,"F")}class Xx extends Wp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Xx(e,n,r)}_apply(e){const n=v4(e,this.type,this._docOrFields,this._inclusive);return new qa(e.firestore,e.converter,(function(i,a){return new yl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,n))}}function oc(...t){return Xx._create("startAt",t,!0)}function GG(...t){return Xx._create("startAfter",t,!1)}class Zw extends Wp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zw(e,n,r)}_apply(e){const n=v4(e,this.type,this._docOrFields,this._inclusive);return new qa(e.firestore,e.converter,(function(i,a){return new yl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,n))}}function lc(...t){return Zw._create("endAt",t,!0)}function v4(t,e,n,r){if(n[0]=Yn(n[0]),n[0]instanceof gp)return(function(a,o,c,u,h){if(!u)throw new st(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const m=[];for(const g of Hu(a))if(g.field.isKeyField())m.push(Bv(o,u.key));else{const v=u.data.field(g.field);if(Mx(v))throw new st(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const b=g.field.canonicalString();throw new st(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(v)}return new eh(m,h)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Gp(t.firestore);return(function(o,c,u,h,m,g){const v=o.explicitOrderBy;if(m.length>v.length)throw new st(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let _=0;_<m.length;_++){const k=m[_];if(v[_].field.isKeyField()){if(typeof k!="string")throw new st(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof k}`);if(!jw(o)&&k.indexOf("/")!==-1)throw new st(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${k}' contains a slash.`);const I=o.path.child(Ks.fromString(k));if(!At.isDocumentKey(I))throw new st(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const R=new At(I);b.push(Bv(c,R))}else{const I=m4(u,h,k);b.push(I)}}return new eh(b,g)})(t._query,t.firestore._databaseId,i,e,n,r)}}function uC(t,e,n){if(typeof(n=Yn(n))=="string"){if(n==="")throw new st(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&n.indexOf("/")!==-1)throw new st(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ks.fromString(n));if(!At.isDocumentKey(r))throw new st(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bv(t,new At(r))}if(n instanceof ui)return Bv(t,n._key);throw new st(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wx(n)}.`)}function hC(t,e){if(!Array.isArray(t)||t.length===0)throw new st(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x4(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new st(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class y4{convertValue(e,n="none"){switch(Sd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw zt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ed(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((o=>Fn(o.doubleValue)));return new zw(a)}convertGeoPoint(e){return new Uw(Fn(e.latitude),Fn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lp(e));default:return null}}convertTimestamp(e){const n=bc(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ks.fromString(e);Ls($A(r));const i=new cp(r.get(1),r.get(3)),a=new At(r.popFirst(5));return i.isEqual(n)||hl(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class HG extends y4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ui(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tj extends gp{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lv extends tj{data(e={}){return super.data(e)}}class WG{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new lv(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new st(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new lv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Au(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new lv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Au(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:KG(c.type),doc:u,oldIndex:h,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){t=jo(t,ui);const e=jo(t.firestore,yh);return AG(zp(e),t._key).then((n=>qG(e,t,n)))}class sj extends y4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ui(this.firestore,null,n)}}function _n(t){t=jo(t,qa);const e=jo(t.firestore,yh),n=zp(e),r=new sj(e);return zG(t._query),PG(n,t._query).then((i=>new WG(e,r,t,i)))}function gl(t,e,n){t=jo(t,ui);const r=jo(t.firestore,yh),i=ej(t.converter,e,n);return b4(r,[Hw(Gp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rr.none())])}function b4(t,e){return(function(r,i){const a=new go;return r.asyncQueue.enqueueAndForget((async()=>vG(await IG(r),i,a))),a.promise})(zp(t),e)}function qG(t,e,n){const r=n.docs.get(e._key),i=new sj(t);return new tj(t,i,e._key,r,new Au(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gp(e)}set(e,n,r){this._verifyNotCommitted();const i=rc(e,this._firestore),a=ej(i.converter,n,r),o=Hw(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Rr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=rc(e,this._firestore);let o;return o=typeof(n=Yn(n))=="string"||n instanceof bh?h4(this._dataReader,"WriteBatch.update",a._key,n,r,i):u4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rc(e,this._firestore);return this._mutations=this._mutations.concat(new Vx(n._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new st(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rc(t,e){if((t=Yn(t)).firestore!==e)throw new st(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Gp(n)}get(n){const r=rc(n,this._firestore),i=new HG(this._firestore);return this._transaction.lookup([r._key]).then((a=>{if(!a||a.length!==1)return zt();const o=a[0];if(o.isFoundDocument())return new gp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new gp(this._firestore,i,r._key,null,r.converter);throw zt()}))}set(n,r,i){const a=rc(n,this._firestore),o=ej(a.converter,r,i),c=Hw(this._dataReader,"Transaction.set",a._key,o,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(n,r,i,...a){const o=rc(n,this._firestore);let c;return c=typeof(r=Yn(r))=="string"||r instanceof bh?h4(this._dataReader,"Transaction.update",o._key,r,i,a):u4(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,c),this}delete(n){const r=rc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=rc(e,this._firestore),r=new sj(this._firestore);return super.get(e).then((i=>new tj(this._firestore,r,n._key,i._document,new Au(!1,!1),n.converter)))}}function _4(t,e,n){t=jo(t,yh);const r=Object.assign(Object.assign({},QG),n);return(function(a){if(a.maxAttempts<1)throw new st(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new go;return a.asyncQueue.enqueueAndForget((async()=>{const h=await EG(a);new kG(a.asyncQueue,h,c,o,u).au()})),u.promise})(zp(t),(i=>e(new XG(t,i))),r)}function Hi(){return new Ww("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(t){return zp(t=jo(t,yh)),new YG(t,(e=>b4(t,e)))}(function(e,n=!0){(function(i){gh=i})(mh),Qu(new yd("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new yh(new XV(r.getProvider("auth-internal")),new tU(r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new st(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cp(h.options.projectId,m)})(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),gc(Ik,"4.7.3",e),gc(Ik,"4.7.3","esm2017")})();const nj={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};nj.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const ZG=()=>{var i,a;if(typeof window=="undefined")return;const t=(i=window.location.hostname)==null?void 0:i.toLowerCase(),e=String((a=nj.authDomain)!=null?a:"").toLowerCase();if(!t||!e||t===e||t==="localhost"||t==="127.0.0.1"||t.endsWith(".local"))return;const r=e.endsWith(".firebaseapp.com")?e.replace(".firebaseapp.com",".web.app"):e.endsWith(".web.app")?e.replace(".web.app",".firebaseapp.com"):"";if(r&&t===r){const o=window.location.href.replace(t,e);window.location.replace(o)}};ZG();const w4=F$().length?iw():vE(nj),Tt=MG(w4),Fa=KV(w4),j4=A.createContext(void 0),mC=`${Ka}/auth/session`,pC=`${Ka}/auth/logout`,rb="sfh:authPopupNonce",eH=2e3,tH=new Set(["auth/popup-blocked","auth/popup-closed-by-user","auth/cancelled-popup-request","auth/operation-not-supported-in-this-environment"]),sH=()=>{var e;if(typeof window=="undefined")return!1;try{const n=(e=window.localStorage)==null?void 0:e.getItem("sfh:debug:auth");if(n==="1"||n==="true")return!0}catch(n){console.warn("[Auth] Failed to read auth debug flag",n)}return!1},Da=(...t)=>{sH()&&console.info(...t)},nH=()=>{var t;try{const e=new Uint8Array(16);if(typeof window!="undefined"&&((t=window.crypto)!=null&&t.getRandomValues))return window.crypto.getRandomValues(e),Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")}catch(e){}return Math.random().toString(36).slice(2,14)},gC=(t,e)=>{try{const n=new URL(`${Ka}/auth/${t}/login`);return(e==null?void 0:e.mode)==="popup"&&n.searchParams.set("mode","popup"),e!=null&&e.nonce&&n.searchParams.set("nonce",e.nonce),n.toString()}catch(n){return console.warn("[Auth] Failed to construct login URL",n),""}},rH=()=>{var e;const t=new Set;typeof window!="undefined"&&((e=window.location)!=null&&e.origin)&&t.add(window.location.origin);try{t.add(new URL(Ka).origin)}catch(n){console.warn("[Auth] Failed to parse AUTH_BASE_URL for allowed origins",n)}return t},iH=({children:t})=>{const[e,n]=A.useState(null),[r,i]=A.useState("idle"),a=A.useRef({tried:!1}),o=A.useRef(!1),c=A.useRef(!1),u=A.useMemo(()=>{try{return new el}catch(x){return console.warn("[Auth] Failed to initialize Google provider",x),null}},[]),h=A.useCallback(x=>{x!=null&&x.authenticated&&x.user?(n(x.user),i("authenticated")):(n(null),i("unauthenticated"))},[]),m=A.useCallback(async x=>{if(x!=null&&x.silent||i("loading"),!mC)return console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),n(null),i("unauthenticated"),!1;try{const w=await fetch(mC,{credentials:"include"});if(!w.ok)throw new Error(`Failed to fetch session (${w.status})`);const L=await w.json();return h(L),!!(L!=null&&L.authenticated&&L.user)}catch(w){return console.error("[Auth] Failed to refresh session.",w),n(null),i("unauthenticated"),!1}},[h]);A.useEffect(()=>{m()},[m]),A.useEffect(()=>{console.log("[AuthDebug] session user:",e);const x=Fa.currentUser;console.log("[AuthDebug] firebase currentUser uid:",x==null?void 0:x.uid),x==null||x.getIdTokenResult().then(w=>{console.log("[AuthDebug] firebase claims:",w.claims)}).catch(w=>{console.warn("[AuthDebug] failed to fetch token claims",w)})},[e]),A.useEffect(()=>{const x=DO(Fa,w=>{console.log("[AuthDebug] firebase currentUser uid:",w==null?void 0:w.uid)});return()=>x()},[]),A.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const x=await hB();await xk(Fa,x),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(x){console.error("[AuthDebug] failed to sign in to Firebase",x)}})())},[e]);const g=A.useCallback(x=>{window.location.href=gC(x)},[]),v=A.useCallback(async(x,w)=>{const L=rH();return new Promise((j,S)=>{let C=!1;const M=window.setTimeout(()=>{C||(F(),S(new Error("auth_popup_timeout")))},18e4),T=window.setInterval(()=>{if(x.closed){if(C||c.current){F(),j({});return}Da("[Auth] Discord popup closed; starting grace window");const V=2200,z=Date.now(),K=window.setInterval(()=>{if(C||c.current){window.clearInterval(K),F(),j({});return}if(Fa.currentUser||r==="authenticated"&&e){window.clearInterval(K),F(),j({});return}Date.now()-z>=V&&(window.clearInterval(K),F(),S(new Error("auth_popup_closed")))},200)}},500),F=V=>{window.removeEventListener("message",D),window.clearTimeout(M),window.clearInterval(T)},D=V=>{if(!L.has(V.origin))return;const z=V.data;(z==null?void 0:z.type)==="sfh:discordAuth"&&(z!=null&&z.nonce&&z.nonce!==w||(c.current=!0,C=!0,F(),j({customToken:typeof(z==null?void 0:z.customToken)=="string"?z.customToken:void 0})))};window.addEventListener("message",D)})},[]),b=A.useCallback(async()=>{const x=Date.now(),w=2e3,L=200,j=async()=>await m({silent:!0})?!0:Date.now()-x>=w?!1:(await new Promise(C=>setTimeout(C,L)),j());return j()},[m]),_=A.useCallback(async()=>{var C,M,T;if(o.current){Da("[Auth] Discord login already in-flight, ignoring new request");return}o.current=!0,c.current=!1;const x=typeof window!="undefined"?window.location.origin:"N/A",w=typeof window!="undefined"?window.location.host:"N/A";Da("[Auth] Starting Discord auth-api popup login",{origin:x,host:w});const L=nH();try{(C=window.sessionStorage)==null||C.setItem(rb,L)}catch(F){console.warn("[Auth] Failed to persist popup nonce",F)}const j=gC("discord",{mode:"popup",nonce:L});if(!j){console.warn("[Auth] Missing AUTH_BASE_URL for Discord login.");return}const S=window.open(j,"sfh_discord_oauth","width=520,height=720,menubar=no,toolbar=no,resizable=yes,scrollbars=yes");if(!S||S.closed){Da("[Auth] Popup blocked or failed, redirecting to auth-api flow");try{(M=window.sessionStorage)==null||M.removeItem(rb)}catch(F){}g("discord"),o.current=!1;return}try{const F=await v(S,L);F!=null&&F.customToken?(await xk(Fa,F.customToken),Da("[Auth] Discord popup custom token received and signed in"),await m({silent:!0})):await b()||(Da("[Auth] Popup login completed but session missing, redirecting for sync"),g("discord"))}catch(F){Da("[Auth] Popup login did not complete, falling back to redirect",{code:F==null?void 0:F.code,message:F==null?void 0:F.message}),g("discord")}finally{try{(T=window.sessionStorage)==null||T.removeItem(rb)}catch(F){}setTimeout(()=>{o.current=!1},eH)}},[g,v,b]),k=A.useCallback(async()=>{var M,T,F,D,V,z,K;const x=typeof window!="undefined"?window.location.origin:"N/A",w=typeof window!="undefined"?window.location.host:"N/A",L=(F=(T=(M=Fa.app)==null?void 0:M.options)==null?void 0:T.projectId)!=null?F:"unknown",j=(z=(V=(D=Fa.app)==null?void 0:D.options)==null?void 0:V.authDomain)!=null?z:"unknown";Da("[Auth] Starting google login",{origin:x,host:w,projectId:L,authDomain:j});const S=u;if(!S||(()=>{var U;if(typeof window=="undefined")return!1;const W=(((U=window.navigator)==null?void 0:U.userAgent)||"").toLowerCase();return/mobile|android|iphone|ipad|ipod/.test(W)?!0:typeof window.matchMedia=="function"?window.matchMedia("(max-width: 768px)").matches:!1})()){Da("[Auth] Falling back to redirect for google",{reason:S?"mobile":"provider_unavailable"}),g("google");return}try{await sV(Fa,S),await m({silent:!0})||(Da("[Auth] Popup login succeeded but session missing, redirecting for sync"),g("google"))}catch(W){const U=typeof(W==null?void 0:W.code)=="string"?W.code:"",J=typeof(W==null?void 0:W.message)=="string"?W.message:"Auth popup failed",re=tH.has(U);if(Da("[Auth] Popup login failed for google",{code:U,message:J,host:w,origin:x,projectId:L,authDomain:j,email:typeof((K=W==null?void 0:W.customData)==null?void 0:K.email)=="string"?W.customData.email:void 0}),re){g("google");return}console.error("[Auth] Popup login failed for google (no fallback)",{code:U,message:J});const G=new Error(J);throw U&&(G.code=U),G}},[m,u,g]),I=A.useCallback(async()=>{if(await MO(Fa).catch(()=>{}),!pC){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),n(null),i("unauthenticated");return}try{const x=await fetch(pC,{method:"POST",credentials:"include"});if(!x.ok)throw new Error(`Logout failed (${x.status})`)}catch(x){console.error("[Auth] Failed to logout. Clearing local session anyway.",x)}finally{n(null),i("unauthenticated")}},[]),R=A.useCallback(async x=>m(x),[m]),P=r==="idle"||r==="loading",N=A.useMemo(()=>({user:e,status:r,isLoading:P,loginWithDiscord:_,loginWithGoogle:k,logout:I,refreshSession:R}),[e,r,P,_,k,I,R]);return s.jsx(j4.Provider,{value:N,children:t})},wa=()=>{const t=A.useContext(j4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},aH="https://i.pravatar.cc/72",oH=({fallbackName:t})=>{var P,N;const{user:e,status:n,logout:r,isLoading:i}=wa(),a=hi(),[o,c]=A.useState(!1),u=A.useRef(null),h=n==="authenticated",m=h?(N=(P=e==null?void 0:e.displayName)!=null?P:t)!=null?N:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:aH;A.useEffect(()=>{const x=w=>{u.current&&!u.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]),A.useEffect(()=>{i&&c(!1)},[i]);const v=A.useCallback(()=>c(!1),[]),b=()=>{c(x=>!x)},_=()=>{typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):a("/login"),v()},k=()=>{a("/settings/account"),v()},I=A.useCallback(async()=>{try{await r()}finally{v(),a("/")}},[v,r,a]),R=()=>{var x;if(i)return s.jsx("p",{className:qt.accountStatusText,children:"Checking session..."});if(n==="unauthenticated")return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:qt.accountHeader,children:[s.jsx("p",{className:qt.accountName,children:"Not signed in"}),s.jsx("p",{className:qt.accountSub,children:"Your scans stay synced when you log in."})]}),s.jsx("button",{type:"button",className:qt.accountPrimary,onClick:_,children:"Sign in"}),s.jsx("p",{className:qt.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(n==="authenticated"){const w=!!((x=e==null?void 0:e.roles)!=null&&x.includes("admin"));return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:qt.accountHeader,children:[s.jsx("img",{className:qt.accountMiniAvatar,src:g,alt:m}),s.jsxs("div",{children:[s.jsx("p",{className:qt.accountName,children:m}),s.jsxs("p",{className:qt.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),s.jsx("button",{type:"button",className:qt.accountItem,onClick:k,children:"Account & Profile"}),w?s.jsx("a",{className:qt.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,s.jsx("hr",{className:qt.accountDivider}),s.jsx("button",{type:"button",className:`${qt.accountItem} ${qt.accountLogout}`,onClick:I,children:"Logout"})]})}return null};return s.jsxs("div",{className:qt.accountRoot,ref:u,children:[i?s.jsxs("div",{className:qt.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[s.jsx("span",{className:qt.avatarSpinner,"aria-hidden":"true"}),s.jsx("span",{className:qt.srOnly,children:"Checking login status"})]}):s.jsx("button",{type:"button",className:qt.avatarBtn,"aria-haspopup":"menu","aria-expanded":o,"aria-label":m,onClick:b,children:s.jsx("img",{className:qt.avatar,src:g,alt:m})}),!i&&o&&s.jsx("div",{className:qt.accountDropdown,role:"menu",children:R()})]})},lH="sfh:debug:firestoreReadsCallsite",cH="sf_debug_firestore_reads_callsite",dH="sfh:debug:firestoreWritesCallsite",uH="sf_debug_firestore_writes_callsite",Wv=new Map,Kv=new Map,fp=new Map,qv=new Map,Qv=new Map,vp=new Map,Yv=new Map,S4=new Map,N4=new Map;let hH=1,k4=0,C4=0,md=null;const ci=(...t)=>{console.log(...t)},Pd=()=>!1,Kp=()=>!1,T4=()=>!Pd()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(lH)==="1"||window.localStorage.getItem(cH)==="1",I4=()=>!Kp()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(dH)==="1"||window.localStorage.getItem(uH)==="1",rj=(t,e)=>t?t.split("/").filter(Boolean)[0]||e||"unknown":e!=null?e:"unknown",mH=()=>{if(!T4())return;const t=new Error;if(!t.stack)return;const n=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracegetdoc")&&!r.toLowerCase().includes("tracegetdocs")&&!r.toLowerCase().includes("traceonsnapshot"));return n[1]||n[0]},pH=()=>{if(!I4())return;const t=new Error;if(!t.stack)return;const n=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracewrit")&&!r.toLowerCase().includes("tracesetdoc")&&!r.toLowerCase().includes("traceupdatedoc")&&!r.toLowerCase().includes("traceadddoc")&&!r.toLowerCase().includes("tracedeletedoc")&&!r.toLowerCase().includes("recordwrite")&&!r.toLowerCase().includes("tracebatchcommit")&&!r.toLowerCase().includes("traceruntransaction"));return n[1]||n[0]},E4=t=>(t==null?void 0:t.trim())||"unknown",Bn=t=>Pd()?{id:hH++,name:t,startedAt:performance.now(),reads:[]}:null,A4=(t,e)=>{var o,c,u,h,m,g,v;if(!Pd())return;const n=E4(e.path),r=rj(e.collection||n),i=(c=(o=e.callsite)!=null?o:e.label)!=null?c:mH();t&&t.reads.push({collection:r,path:n,op:e.op,docCount:e.docCount,startedAt:performance.now(),callsite:i,label:e.label}),Wv.set(r,((u=Wv.get(r))!=null?u:0)+e.docCount);const a=(h=Kv.get(n))!=null?h:{total:0,ops:{}};a.total+=e.docCount,a.ops[e.op]=((m=a.ops[e.op])!=null?m:0)+e.docCount,Kv.set(n,a),fp.set(e.op,((g=fp.get(e.op))!=null?g:0)+e.docCount),i&&qv.set(i,((v=qv.get(i))!=null?v:0)+e.docCount)},_h=t=>{var a,o,c,u,h,m,g;if(!Kp())return;const e=E4(t.path),n=(a=t.docCount)!=null?a:1,r=(c=(o=t.callsite)!=null?o:t.label)!=null?c:pH();if(t.includeInPaths!==!1){const v=(u=Qv.get(e))!=null?u:{total:0,ops:{}};v.total+=n,v.ops[t.op]=((h=v.ops[t.op])!=null?h:0)+n,Qv.set(e,v)}vp.set(t.op,((m=vp.get(t.op))!=null?m:0)+n),r&&Yv.set(r,((g=Yv.get(r))!=null?g:0)+n)},un=t=>{var o;if(!t)return;t.endedAt=performance.now();const e=Math.round(t.endedAt-t.startedAt),n=t.reads.reduce((c,u)=>{var h;return c[u.collection]=((h=c[u.collection])!=null?h:0)+u.docCount,c},{}),r=t.reads.reduce((c,u)=>c+u.docCount,0),i=t.reads.map(c=>({op:c.op,path:c.path,collection:c.collection,docs:c.docCount,callsite:c.callsite})),a=`[FirestoreTrace] ${t.name} - ${r} reads in ${e}ms`;if(console.groupCollapsed(a),ci("Breakdown by collection",n),ci("Entries",i),T4()){const c=(o=t.reads.find(u=>u.callsite))==null?void 0:o.callsite;c&&ci("Top callsite",c)}ci("Totals (page lifetime)",Object.fromEntries(Wv.entries())),console.groupEnd()},An=async(t,e,n,r)=>{const i=await n(),a=i!=null&&i.exists?i.exists()?1:0:1;return A4(t,{collection:rj(e.path),path:e.path,op:"getDoc",docCount:a,label:r==null?void 0:r.label}),i},wn=async(t,e,n,r)=>{var c,u,h;const i=await n(),a=(c=i==null?void 0:i.size)!=null?c:Array.isArray(i==null?void 0:i.docs)?i.docs.length:0,o=(h=(u=e.path)!=null?u:r==null?void 0:r.collectionHint)!=null?h:"unknown";return A4(t,{collection:rj(o,r==null?void 0:r.collectionHint),path:o,op:"getDocs",docCount:typeof a=="number"?a:0,label:r==null?void 0:r.label}),i},ij=async(t,e,n)=>{const r=await e();return _h({path:t.path,op:"setDoc",docCount:1,label:n==null?void 0:n.label}),r},gH=async(t,e)=>{var r;const n=await t();return _h({path:(r=e==null?void 0:e.path)!=null?r:"batchCommit",op:"batchCommit",docCount:1,label:e==null?void 0:e.label,includeInPaths:!1}),n},P4=async(t,e)=>{var r;const n=await t();return _h({path:(r=e==null?void 0:e.path)!=null?r:"transaction",op:"runTransaction",docCount:1,label:e==null?void 0:e.label}),n},fH=()=>{!Pd()&&!Kp()||(Wv.clear(),Kv.clear(),fp.clear(),qv.clear(),Qv.clear(),vp.clear(),Yv.clear(),S4.clear(),k4=0,C4=0,N4.forEach(t=>{t.callbacks=0,t.docs=0}))},Jx=t=>{!Pd()&&!Kp()||(fH(),md={name:t,startedAt:performance.now()})},Zx=(t,e)=>{var v,b;if(!Pd())return;const n=10,r=t||(md==null?void 0:md.name),i=r?` (${r})`:"",a={getDoc:(v=fp.get("getDoc"))!=null?v:0,getDocs:(b=fp.get("getDocs"))!=null?b:0},o=a.getDoc+a.getDocs,u=Array.from(Kv.entries()).map(([_,k])=>({path:_,total:k.total,ops:k.ops})).sort((_,k)=>k.total-_.total).slice(0,n),h=Array.from(qv.entries()).map(([_,k])=>({callsite:_,count:k})).sort((_,k)=>k.count-_.count).slice(0,n),m=Array.from(N4.values()).map(_=>({path:_.path,callbacks:_.callbacks,docs:_.docs,callsite:_.callsite})).sort((_,k)=>k.callbacks-_.callbacks),g=Array.from(S4.entries()).map(([_,k])=>({path:_,callbacks:k.callbacks,docs:k.docs})).sort((_,k)=>k.callbacks-_.callbacks).slice(0,n);console.groupCollapsed(`[FirestoreTrace] READ SUMMARY${i}`),ci("Totals",{...a,total:o}),ci("Top paths",u),h.length>0&&ci("Top callsites",h),console.groupEnd(),console.groupCollapsed(`[FirestoreTrace] LISTENER SUMMARY${i}`),ci("Listener callbacks",{total:k4,estimatedReads:C4}),ci("Listeners active",m.length?m:"None"),g.length>0&&ci("Top listener paths",g),console.groupEnd()},ey=(t,e)=>{if(!Kp())return;const n=10,r=t||(md==null?void 0:md.name),i=r?` (${r})`:"",a=Object.fromEntries(vp.entries()),o=Array.from(vp.values()).reduce((m,g)=>m+g,0),c=Array.from(Qv.entries()).map(([m,g])=>({path:m,total:g.total,ops:g.ops})).sort((m,g)=>g.total-m.total),u=c.slice(0,n),h=I4()?Array.from(Yv.entries()).map(([m,g])=>({callsite:m,count:g})).sort((m,g)=>g.count-m.count).slice(0,n):[];console.groupCollapsed(`[FirestoreTrace] WRITE SUMMARY${i}`),ci("Totals",{...a,total:o}),ci("Top paths",u),ci("All paths",c),ci("All paths",c),h.length>0&&ci("Top callsites",h),console.groupEnd()},vH=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub-v2",area:"main",titleKey:"nav.guideHub",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],fC=["guest","user","moderator","developer","admin"];function R4(t){const e=t.trim();if(!e)return"/";const n=e.startsWith("/")?e:`/${e}`;return n==="/"?n:n.replace(/\/+$/,"").toLowerCase()}function L4(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function D4(t){if(!Array.isArray(t))return;const e=t.map(n=>L4(n)).filter(Boolean);return e.length?e:void 0}function M4(t){if(!Array.isArray(t))return;const e=t.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0);return e.length?e:void 0}function F4(t){if(!Array.isArray(t))return;const e=t.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0);return e.length?e:void 0}function aj(t){var e,n,r;return{...t,id:t.id.trim(),route:R4(t.route),area:t.area.trim(),allowedRoles:(e=D4(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(n=M4(t.allowedGroups))!=null?n:t.allowedGroups,allowedUserIds:(r=F4(t.allowedUserIds))!=null?r:t.allowedUserIds}}function vC(t,e){if(!e||typeof e!="object")return null;const n=e,r=typeof n.route=="string"?n.route:"",i=typeof n.area=="string"?n.area:"",a=typeof n.id=="string"&&n.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const o={id:a,route:r,area:i,titleKey:typeof n.titleKey=="string"?n.titleKey:void 0,status:typeof n.status=="string"?n.status:void 0,minRole:L4(n.minRole),allowedRoles:D4(n.allowedRoles),allowedGroups:M4(n.allowedGroups),allowedUserIds:F4(n.allowedUserIds),showInTopbar:typeof n.showInTopbar=="boolean"?n.showInTopbar:void 0,showInSidebar:typeof n.showInSidebar=="boolean"?n.showInSidebar:void 0,navOrder:typeof n.navOrder=="number"?n.navOrder:void 0,isExperimental:typeof n.isExperimental=="boolean"?n.isExperimental:void 0,description:typeof n.description=="string"?n.description:void 0};return aj(o)}function xH(t){if(!t||typeof t!="object")return[];const n=t.items;return Array.isArray(n)?n.map(r=>{if(!r||typeof r!="object")return null;const i=r,a=typeof i.id=="string"?i.id:"";return vC(a,i)}).filter(r=>!!r):n&&typeof n=="object"?Object.entries(n).map(([r,i])=>vC(r,i)).filter(r=>!!r):[]}function yH(t){const e={},n={};return t.forEach(r=>{const i=aj(r);e[i.id]=i,n[i.route]=i}),{byId:e,byRoute:n}}const ol=yH(vH),bH={...ol,loading:!1,error:null},_H=300*1e3,xC="sf_feature_access_snapshot",yC="sf_feature_access_date",wH="stats_public",jH="feature_access_main_nav";let Eu=null,Pu=null;const SH=async t=>{const e=Date.now();return Pu&&e-Pu.fetchedAt<_H?Pu:Eu||(Eu=(async()=>{const n=ps(Tt,wH,jH),r=await An(t,n,()=>pn(n),{label:"feature_access_snapshot"}),i=r.exists()?xH(r.data()):[],o={rules:kH(i),fetchedAt:Date.now()};return Pu=o,o})().finally(()=>{Eu=null}),Eu)};function NH(t,e){const n={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const o=i;n[o]=a}}),n}function kH(t){const e={...ol.byId},n={...ol.byRoute};return t.forEach(r=>{const i=aj(r),a=e[i.id],o=NH(a,i);e[o.id]=o,n[o.route]=o}),{byId:e,byRoute:n}}const B4=q.createContext(bH),CH=({children:t})=>{const[e,n]=q.useState({...ol,loading:!0,error:null});q.useEffect(()=>{let i=!0;return(async()=>{const o=new Date().toISOString().split("T")[0];if(typeof window!="undefined")try{const h=window.localStorage.getItem(xC),m=window.localStorage.getItem(yC);if(h&&m===o){const g=JSON.parse(h);if(g&&typeof g=="object"){Pu={rules:g,fetchedAt:Date.now()},i&&n({...g,loading:!1,error:null});return}}}catch(h){console.warn("[FeatureAccess] localStorage cache read failed; falling back to Firestore.",h)}const u=Pd()&&!Pu&&!Eu?Bn("FeatureAccess:load"):null;try{const{rules:h}=await SH(u);if(i&&n({...h,loading:!1,error:null}),typeof window!="undefined")try{window.localStorage.setItem(xC,JSON.stringify(h)),window.localStorage.setItem(yC,o)}catch(m){console.warn("[FeatureAccess] localStorage cache write failed.",m)}}catch(h){const m=h,g=m==null?void 0:m.code,v=g==="permission-denied"||g==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore stats_public feature access snapshot ${v?"not readable":"load failed"}. Falling back to defaults.`,h),i&&n(_=>({..._,loading:!1,error:h instanceof Error?h.message:"Failed to load feature access rules"}))}finally{un(u)}})(),()=>{i=!1}},[]);const r=q.useMemo(()=>e,[e]);return s.jsx(B4.Provider,{value:r,children:t})};function TH(){return q.useContext(B4)}function IH(t,e){var i,a,o;if(!t)return;const n=e!=null?e:ol,r=R4(t);return(o=(a=(i=n.byId[t])!=null?i:n.byRoute[r])!=null?a:ol.byId[t])!=null?o:ol.byRoute[r]}function EH(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function AH(t,e,n,r,i){if(n)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const o=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&o!=="developer"&&o!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!o&&t.allowedRoles.includes(o);if(t.minRole){const c=fC.indexOf(o),u=fC.indexOf(t.minRole);return c>=u&&c!==-1}return!0}function ty(){var k;let t=null;try{t=wa().user}catch(I){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:n,loading:r,error:i}=TH(),a=q.useMemo(()=>({byId:e!=null?e:ol.byId,byRoute:n!=null?n:ol.byRoute}),[e,n]),o=q.useMemo(()=>EH(t==null?void 0:t.roles),[t==null?void 0:t.roles]),c=q.useMemo(()=>{var I;return!!((I=t==null?void 0:t.roles)!=null&&I.includes("admin"))},[t==null?void 0:t.roles]),u=q.useMemo(()=>{var I;return(I=t==null?void 0:t.accessGroups)!=null?I:[]},[t==null?void 0:t.accessGroups]),h=(k=t==null?void 0:t.id)!=null?k:null,m=q.useCallback(I=>IH(I,a),[a]),g=q.useCallback(I=>I?AH(I,o,c,h,u):!0,[c,u,h,o]),v=q.useCallback(I=>{if(!I)return!0;const R=m(I);return g(R)},[g,m]),b=q.useCallback(I=>{if(!I)return!0;const R=m(I);return R?R.status==="hidden"||R.showInSidebar===!1?!1:g(R):!0},[g,m]),_=q.useCallback(I=>{if(!I)return!0;const R=m(I);return R?R.status==="hidden"||R.showInTopbar===!1?!1:g(R):!0},[g,m]);return{loading:r,error:i,rulesById:e,rulesByRoute:n,storeRules:a,resolveRule:m,canAccessRule:g,canAccessFeature:v,isVisibleInSidebar:b,isVisibleInTopbar:_}}const $4=A.createContext(null);function PH({children:t}){const{canAccessFeature:e}=ty(),[n,r]=A.useState(!1),[i,a]=A.useState("csv"),o=e("main.uploadCenter"),c=A.useCallback(m=>{o&&(m!=null&&m.tab?a(m.tab):a("csv"),r(!0))},[o]),u=A.useCallback(()=>r(!1),[]),h=A.useMemo(()=>({isOpen:n,open:c,close:u,activeTab:i,setTab:a,canUse:o}),[n,c,u,i,o]);return s.jsx($4.Provider,{value:h,children:t})}function oj(){const t=A.useContext($4);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const ma={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB","plague-doctor":"1sRziBjLKnZ-iE7OC44c_mJ_0j62ra9fg",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},pa=t=>`https://drive.google.com/uc?export=view&id=${t}`,O4=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),_r=[{key:"warrior",label:"Warrior",iconUrl:pa(ma.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:pa(ma.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:pa(ma.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:pa(ma.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:pa(ma["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:pa(ma.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:pa(ma["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:pa(ma.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:pa(ma.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:pa(ma.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:pa(ma.paladin),fallback:""},{key:"plague-doctor",label:"Plague Doctor",iconUrl:pa(ma["plague-doctor"]),fallback:"?"}],bC=Object.fromEntries(_r.map(t=>[t.key,t])),p_=new Map;function tn(t,e){p_.set(O4(t),e)}for(const t of _r)tn(t.key,t.key),tn(t.label,t.key);tn("war","warrior");tn("krieger","warrior");tn("magier","mage");tn("jaeger","scout");tn("jger","scout");tn("assa","assassin");tn("meuchelmoerder","assassin");tn("meuchelmrder","assassin");tn("demonhunter","demon-hunter");tn("dh","demon-hunter");tn("daemonenjaeger","demon-hunter");tn("dmonenjger","demon-hunter");tn("zerker","berserker");tn("battlemage","battle-mage");tn("kampfmagier","battle-mage");tn("bm","battle-mage");tn("druide","druid");tn("barde","bard");tn("necro","necromancer");tn("nekromant","necromancer");tn("pala","paladin");tn("plaguedoctor","plague-doctor");tn("plague doctor","plague-doctor");tn("plague-doctor","plague-doctor");function V4(t){const e=O4(t);if(!e)return{};const n=p_.get(e);if(n){const r=bC[n];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of p_.entries())if(r.startsWith(e)||e.startsWith(r)){const a=bC[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}function sy(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const n=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(n!=null&&n[1])return n[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function cv(t){if(t==null)return;const e=sy(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function U4(t,e=64){if(t==null)return;const n=sy(t);if(!n)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${n}&sz=w${r}`}function z4(t,e){const n="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${n}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function G4(t,e,n,r){const i=cv(t);return i?z4(i,{w:e,h:n,fit:r}):void 0}function Pi(t,e=64){const n=U4(t,e);return n?z4(n,{w:e,h:e,fit:"contain"}):void 0}function ib(t){if(t==null)return;const e=sy(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function RH(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const kd=Object.assign(t=>cv(t),{id:sy,direct:cv,thumb:U4,proxy:G4,thumbProxy:Pi,raw:ib,gif:ib,gifProxy:t=>{const e=ib(t);return e&&/^https?:\/\//i.test(e)?RH(e):cv(t)}}),ny="sfh:search:cache:v1:universal:",H4=`${ny}lru`,LH=720*60,$m=150,wh=()=>typeof window!="undefined"&&!!window.localStorage,DH=t=>t.trim().replace(/\s+/g," ").toLowerCase(),W4=(...t)=>{try{wh()&&window.localStorage.getItem("sfh:debug:firestoreReads")==="1"&&console.debug(...t)}catch(e){}},K4=()=>{if(!wh())return[];try{const t=window.localStorage.getItem(H4);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}catch(t){return[]}},q4=t=>{if(wh())try{window.localStorage.setItem(H4,JSON.stringify(t.slice(0,$m)))}catch(e){}},Q4=t=>{const e=K4().filter(n=>n!==t);e.unshift(t),q4(e.slice(0,$m))},MH=()=>{const t=K4();if(t.length<=$m)return;const e=t.slice(0,$m);if(q4(e),!!wh())try{t.slice($m).forEach(r=>window.localStorage.removeItem(ny+r))}catch(n){}},FH=t=>{if(!wh())return null;try{const e=window.localStorage.getItem(ny+t);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.ts!="number"||typeof n.ttlSec!="number"||Date.now()-n.ts>n.ttlSec*1e3?null:(W4("[SearchCache] hit",t),Q4(t),n)}catch(e){return null}},BH=(t,e,n=LH)=>{if(!wh())return;const r={...e,ts:Date.now(),ttlSec:n};try{window.localStorage.setItem(ny+t,JSON.stringify(r)),Q4(t),MH(),W4("[SearchCache] store",t,{players:e.players.length,guilds:e.guilds.length})}catch(i){}},$H=/^[a-z]{1,4}\d+$/i,OH=/^([a-z]{1,4}\d+)[_.-]?(net|eu)$/i,VH=/^([a-z]{1,4}\d+)\.sfgame\.(net|eu)$/i,xf=t=>{const e=String(t!=null?t:"").trim().toUpperCase();if(!e)return"";const n=e.match(/^S(\d+)$/);return n?`EU${n[1]}`:e},lj=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase();if($H.test(n))return xf(n);const r=n.match(OH);if(r)return xf(r[1]);const i=n.match(VH);return xf(i?i[1]:e)},cj=t=>{var o;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/i);if(!n)return null;const r=(o=n[1])==null?void 0:o.trim(),i=n[2],a=lj(r);return!a||!i?null:{identifier:e,playerId:i,serverKey:a}},nh=(t,e)=>{const n=String(e!=null?e:"").trim();if(!n)return null;const r=lj(t);return r?`${r.toLowerCase()}_p${n}`:null},yf=3,UH=350,Gl=25,bf=10,dj="sfh:search:recents",Y4=20,ab=t=>Number.isFinite(t),fu=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},Hl=t=>{if(typeof t!="string")return null;const e=t.trim();return e||null},zH=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),Zl=()=>{try{const t=typeof window!="undefined"?window.localStorage.getItem(dj):null;if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.slice(0,Y4).map(n=>{var r,i,a,o,c,u,h,m,g;return(n==null?void 0:n.kind)==="player"||(n==null?void 0:n.kind)==="guild"?{kind:n.kind,id:String((i=(r=n.id)!=null?r:n.value)!=null?i:""),server:(o=(a=n.server)!=null?a:n.serverId)!=null?o:null,name:(u=(c=n.name)!=null?c:n.label)!=null?u:null,className:(h=n.className)!=null?h:null,level:typeof n.level=="number"?n.level:null,guildName:(m=n.guildName)!=null?m:null}:(n==null?void 0:n.kind)==="query"?{kind:"query",value:String((g=n.value)!=null?g:"")}:null}).filter(Boolean):[]}catch(t){return[]}},pd=t=>{var n;if(t.kind==="query")return`query:${t.value}`;const e=(n=t.server)!=null?n:"";return`${t.kind}:${e}:${t.id}`},_C=t=>{var e,n,r,i,a,o,c,u,h;if(t.kind!=="player"||t.name&&t.className&&t.server||typeof window=="undefined")return t;try{const m=window.localStorage.getItem(`player-profile-cache:${t.id}`);if(!m)return t;const g=JSON.parse(m),v=(g==null?void 0:g.data)||{};return{...t,name:(n=(e=t.name)!=null?e:v.name)!=null?n:null,className:(i=(r=t.className)!=null?r:v.className)!=null?i:null,server:(o=(a=t.server)!=null?a:v.server)!=null?o:null,level:(c=t.level)!=null?c:typeof v.level=="number"?v.level:null,guildName:(h=(u=t.guildName)!=null?u:v.guild)!=null?h:null}}catch(m){return t}},ob=t=>{if(typeof window!="undefined")try{const e=Zl().map(_C),n=t.kind==="player"?_C(t):t,r=pd(n),i=[n,...e.filter(a=>pd(a)!==r)];window.localStorage.setItem(dj,JSON.stringify(i.slice(0,Y4)))}catch(e){}},lb=(t,e)=>{try{const n=Zl().filter(r=>pd(r)!==t);window.localStorage.setItem(dj,JSON.stringify(n)),e(n)}catch(n){e(r=>r.filter(i=>pd(i)!==t))}};function GH(t){const e=t.ref.parent,n=e==null?void 0:e.parent,r=n==null?void 0:n.parent;return{root:r==null?void 0:r.id,id:n==null?void 0:n.id}}const HH=(t,e)=>{var o,c,u,h,m,g,v,b;const n=(m=(u=(o=Hl(e==null?void 0:e.identifier))!=null?o:Hl(e==null?void 0:e.playerIdentifier))!=null?u:Hl((c=e==null?void 0:e.values)==null?void 0:c.Identifier))!=null?m:Hl((h=e==null?void 0:e.values)==null?void 0:h.identifier);if(n)return n;const r=Hl(t);if(r&&cj(r))return r;const i=(g=Hl(e==null?void 0:e.playerId))!=null?g:r,a=(b=Hl(e==null?void 0:e.server))!=null?b:Hl((v=e==null?void 0:e.values)==null?void 0:v.Server);return nh(a,i)};function wC({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:n}){const{t:r}=Vs(),i=hi(),[a,o]=q.useState(""),[c,u]=q.useState(""),[h,m]=q.useState(!1),[g,v]=q.useState(null),[b,_]=q.useState([]),[k,I]=q.useState([]),[R,P]=q.useState([]),[N,x]=q.useState(!1),[w,L]=q.useState(!1),[j,S]=q.useState(Zl()),[C,M]=q.useState(-1),[T,F]=q.useState(!1),[D,V]=q.useState(!1),[z,K]=q.useState(null),W=q.useRef(null),U=q.useRef(0);q.useEffect(()=>{const ee=setTimeout(()=>u(a.trim()),UH);return()=>clearTimeout(ee)},[a]),q.useEffect(()=>{let ee=!1;async function le(){const te=c,ye=DH(te);if(te.length<yf){_([]),I([]),P([]),x(!1),L(!1),M(j.length?0:-1),K(null);return}const ke=FH(ye);if(ke){_(ke.players.slice(0,bf).map(Ee=>{var Le,Fe,Be;return{kind:"player",id:String(Ee.playerId),name:Ee.name,server:(Le=Ee.server)!=null?Le:null,className:(Fe=Ee.className)!=null?Fe:null,guildName:(Be=Ee.guildName)!=null?Be:null,nameFold:null,level:null}})),I(ke.guilds.slice(0,bf).map(Ee=>{var Le;return{kind:"guild",id:Ee.guildId,name:Ee.name,nameFold:null,server:(Le=Ee.server)!=null?Le:null,memberCount:null,hofRank:null}})),x(ke.playersHasMore),L(ke.guildsHasMore),P([]),M(ke.players.length+ke.guilds.length?0:-1),K("cache");return}F(!0);const Me=Bn("Search:universal");v(null),m(!0);const Re=++U.current;try{let Ee=function(pt){var ct,qe,ft,Mt,Lt,Ns,dt,ss,cs,bs,On,Rn,ln,or,lr,gn,ds,Es,fn,ht,ge,Yr,Xn,Xr,Ri,pi,gi,fi,ea,ta,ks,sa,cr,wr;const ne=pt.data(),{root:Oe,id:Ve}=GH(pt);if(Oe==="players"||ne.playerId&&!ne.guildIdentifier){const Qs=HH(Ve,ne);if(!Qs||De.has(Qs))return;De.add(Qs),yt.push({kind:"player",id:Qs,name:(ft=(qe=ne.name)!=null?qe:(ct=ne.values)==null?void 0:ct.Name)!=null?ft:null,nameFold:(Mt=ne.nameFold)!=null?Mt:null,server:(dt=(Ns=ne.server)!=null?Ns:(Lt=ne.values)==null?void 0:Lt.Server)!=null?dt:null,guildName:(bs=(cs=ne.guildName)!=null?cs:(ss=ne.values)==null?void 0:ss.Guild)!=null?bs:null,className:(ln=(Rn=ne.className)!=null?Rn:(On=ne.values)==null?void 0:On.Class)!=null?ln:null,level:fu((lr=ne.level)!=null?lr:(or=ne.values)==null?void 0:or.Level),ts:fu(ne.timestamp)});return}if(Oe==="guilds"||ne.guildIdentifier&&!ne.playerId){const Qs=Ve||ne.guildIdentifier||"";if(!Qs||it.has(Qs))return;it.add(Qs),ie.push({kind:"guild",id:Qs,name:(Es=(ds=ne.name)!=null?ds:(gn=ne.values)==null?void 0:gn.Name)!=null?Es:null,nameFold:(fn=ne.nameFold)!=null?fn:null,server:(Yr=(ge=ne.server)!=null?ge:(ht=ne.values)==null?void 0:ht.Server)!=null?Yr:null,memberCount:fu((pi=(Xr=ne.memberCount)!=null?Xr:(Xn=ne.values)==null?void 0:Xn["Guild Member Count"])!=null?pi:(Ri=ne.values)==null?void 0:Ri.GuildMemberCount),hofRank:fu((wr=(sa=(ta=(fi=ne.hofRank)!=null?fi:(gi=ne.values)==null?void 0:gi["Hall of Fame Rank"])!=null?ta:(ea=ne.values)==null?void 0:ea.HoF)!=null?sa:(ks=ne.values)==null?void 0:ks.Rank)!=null?wr:(cr=ne.values)==null?void 0:cr["Guild Rank"]),ts:fu(ne.timestamp)});return}};const Le=zH(te),Fe=xh(Tt,"latest"),Be=En(Fe,Qi("nameFold"),oc(Le),lc(Le+""),rr(Gl)),je=await wn(Me,{path:"latest"},()=>_n(Be),{collectionHint:"latest"}),ue=En(Fe,Kr("nameNgrams","array-contains",Le),rr(Gl)),Pe=await wn(Me,{path:"latest"},()=>_n(ue),{collectionHint:"latest"}),De=new Set,it=new Set,yt=[],ie=[];je.forEach(Ee),Pe.forEach(Ee);const he=yt.slice(0,Gl),ve=ie.slice(0,Gl);if(Re!==U.current||ee){un(Me);return}const Te=pl(Tt,"servers"),St=te.toLowerCase(),at=te.toUpperCase(),rt=[wn(Me,{path:"servers"},()=>_n(En(Te,Qi("displayName"),oc(te),lc(te+""),rr(e))),{collectionHint:"servers"}),wn(Me,{path:"servers"},()=>_n(En(Te,Qi("code"),oc(at),lc(at+""),rr(e))),{collectionHint:"servers"}),wn(Me,{path:"servers"},()=>_n(En(Te,Qi("host"),oc(St),lc(St+""),rr(e))),{collectionHint:"servers"})],ut=await Promise.allSettled(rt),_t=new Set,ot=[];for(const pt of ut)pt.status==="fulfilled"&&pt.value.forEach(ne=>{var ct,qe,ft,Mt,Lt;const Oe=ne.data(),Ve=ne.id;!Ve||_t.has(Ve)||(_t.add(Ve),ot.push({kind:"server",id:Ve,displayName:(ct=Oe.displayName)!=null?ct:null,code:(qe=Oe.code)!=null?qe:null,host:(ft=Oe.host)!=null?ft:null,region:(Mt=Oe.region)!=null?Mt:null,type:(Lt=Oe.type)!=null?Lt:null,numericId:fu(Oe.numericId),active:typeof Oe.active=="boolean"?Oe.active:null}))});const nt=[],ts=pt=>{for(const ne of pt){if(nt.length>=bf)break;nt.push(ne)}};ts(he),ts(ve),nt.length<bf&&(ts(he.slice(nt.length)),ts(ve.slice(nt.length))),_(nt.filter(pt=>pt.kind==="player")),I(nt.filter(pt=>pt.kind==="guild")),P(ot.slice(0,e)),x(he.length===Gl),L(ve.length===Gl),M(nt.length+ot.length?0:-1),K("live"),BH(ye,{players:he.map(pt=>({playerId:pt.id,name:pt.name,server:pt.server,className:pt.className,guildName:pt.guildName})),guilds:ve.map(pt=>{var ne;return{guildId:pt.id,name:pt.name,server:(ne=pt.server)!=null?ne:void 0}}),playersHasMore:he.length===Gl,guildsHasMore:ve.length===Gl})}catch(Ee){v((Ee==null?void 0:Ee.message)||"Unbekannter Fehler bei der Suche."),_([]),I([]),P([]),M(-1)}finally{un(Me),m(!1)}}return le(),()=>{ee=!0}},[c,e,j.length]),q.useEffect(()=>{const ee=le=>{W.current&&(W.current.contains(le.target)||(_([]),I([]),P([]),M(-1),F(!1),V(!1)))};return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[]);const J=T&&a.trim().length<yf&&j.length>0,re=T&&(h||g||J||[...b,...k,...R].length>0||D&&a.trim().length<yf),G=j.filter(ee=>ee.kind==="player"||ee.kind==="guild").map(ee=>{var le,te,ye,ke,Me,Re,Ee;return ee.kind==="player"?{kind:"player",id:ee.id,name:(le=ee.name)!=null?le:null,nameFold:null,server:(te=ee.server)!=null?te:null,guildName:(ye=ee.guildName)!=null?ye:null,className:(ke=ee.className)!=null?ke:null,level:(Me=ee.level)!=null?Me:null,ts:null}:{kind:"guild",id:ee.id,name:(Re=ee.name)!=null?Re:null,nameFold:null,server:(Ee=ee.server)!=null?Ee:null,memberCount:null,hofRank:null,ts:null}}),X=J?G:[...b,...k,...R],Y=ee=>{var le;if(ee.kind==="player"){const te=cj(ee.id)?ee.id:nh((le=ee.server)!=null?le:null,ee.id);if(!te)return;ob({kind:"player",id:te,name:ee.name,className:ee.className,level:ee.level,guildName:ee.guildName,server:ee.server}),S(Zl()),i(`/player/${encodeURIComponent(te)}`)}else ee.kind==="guild"?(ob({kind:"guild",id:ee.id,name:ee.name,server:ee.server}),S(Zl()),i(`/guild/${encodeURIComponent(ee.id)}`)):i(`/server/${encodeURIComponent(ee.id)}`);_([]),I([]),P([]),M(-1),o(""),F(!1),K(null)},se=()=>{a.trim().length<yf||(ob({kind:"query",value:a.trim()}),S(Zl()),i(`/search?q=${encodeURIComponent(a.trim())}`),F(!1))},ce=ee=>{if(ee.key==="Enter"){ee.preventDefault(),C>=0&&X[C]?Y(X[C]):se();return}if(ee.key==="Escape"){_([]),I([]),P([]),M(-1),F(!1);return}X.length&&(ee.key==="ArrowDown"?(ee.preventDefault(),M(le=>(le+1)%X.length)):ee.key==="ArrowUp"&&(ee.preventDefault(),M(le=>(le-1+X.length)%X.length)))},_e=(ee,le,te=!1,ye)=>{var Ee,Le,Fe,Be,je,ue;const ke=le===C,Me=te?"div":"button",Re=te?{role:"button",tabIndex:0,onKeyDown:Pe=>{(Pe.key==="Enter"||Pe.key===" ")&&(Pe.preventDefault(),Y(ee))}}:{type:"button"};return s.jsxs(Me,{onClick:()=>Y(ee),style:ke?Dt.itemActive:Dt.item,title:ee.name||"",onMouseEnter:()=>M(le),...Re,children:[s.jsx("div",{style:Dt.iconBox,children:n?s.jsx("img",{src:n((Ee=ee.className)!=null?Ee:void 0,64),alt:(Le=ee.className)!=null?Le:"class icon",style:Dt.iconImgShadow,loading:"lazy"}):s.jsx("span",{style:Dt.iconFallback,children:(Fe=ee.className)!=null?Fe:"?"})}),s.jsxs("div",{style:Dt.meta,children:[s.jsxs("div",{style:Dt.line1,children:[s.jsx("span",{style:Dt.name,children:(Be=ee.name)!=null?Be:ee.id}),ab(ee.level)&&s.jsxs("span",{style:Dt.badge,children:["Lvl ",ee.level]}),te&&s.jsx("span",{style:Dt.recentsBadge,children:r("search.recentLabel","Recent")}),te&&ye&&s.jsx("button",{type:"button",style:Dt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),lb(ye,S)},children:""})]}),s.jsxs("div",{style:Dt.line2,children:[s.jsx("span",{children:(je=ee.className)!=null?je:"Klasse ?"}),s.jsx("span",{style:Dt.sep,children:""}),s.jsx("span",{children:(ue=ee.server)!=null?ue:"Server ?"})]})]})]},`p-${ee.id}-${le}-${te?"r":"s"}`)},Ae=(ee,le,te=!1,ye)=>{var Ee,Le;const ke=le===C,Me=te?"div":"button",Re=te?{role:"button",tabIndex:0,onKeyDown:Fe=>{(Fe.key==="Enter"||Fe.key===" ")&&(Fe.preventDefault(),Y(ee))}}:{type:"button"};return s.jsxs(Me,{onClick:()=>Y(ee),style:ke?Dt.itemActive:Dt.item,title:ee.name||"",onMouseEnter:()=>M(le),...Re,children:[s.jsx("div",{style:Dt.iconBox,children:""}),s.jsxs("div",{style:Dt.meta,children:[s.jsxs("div",{style:Dt.line1,children:[s.jsx("span",{style:Dt.name,children:(Ee=ee.name)!=null?Ee:ee.id}),ab(ee.hofRank)&&s.jsxs("span",{style:Dt.badge,children:["HoF #",ee.hofRank]}),te&&s.jsx("span",{style:Dt.recentsBadge,children:r("search.recentLabel","Recent")}),te&&ye&&s.jsx("button",{type:"button",style:Dt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Fe=>{Fe.preventDefault(),Fe.stopPropagation(),lb(ye,S)},children:""})]}),s.jsxs("div",{style:Dt.line2,children:[s.jsx("span",{children:(Le=ee.server)!=null?Le:"Server ?"}),s.jsx("span",{style:Dt.sep,children:""}),s.jsx("span",{children:ab(ee.memberCount)?r("search.guildMembers","{{count}} members",{count:ee.memberCount}):r("search.guildMembersUnknown","Members ?")})]})]})]},`g-${ee.id}-${le}-${te?"r":"s"}`)};return s.jsxs("div",{ref:W,style:Dt.wrap,children:[s.jsx("input",{style:Dt.input,placeholder:t,value:a,onChange:ee=>o(ee.target.value),onKeyDown:ce,onFocus:()=>{V(!0),F(!0)},onBlur:()=>{V(!1)},"aria-label":r("search.inputLabel","Spieler, Gilden und Server suchen")}),re&&s.jsxs("div",{style:Dt.dropdown,children:[h&&s.jsx("div",{style:Dt.hint,children:r("search.loading","Laden ")}),g&&s.jsx("div",{style:Dt.err,children:g}),!h&&!g&&J&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Dt.sectionHdr,children:r("search.recents","Recent searches")}),j.length===0&&s.jsx("div",{style:Dt.hint,children:r("search.minCharsHint","Type at least 3 characters")}),j.map((ee,le)=>{var te,ye,ke,Me,Re,Ee,Le;if(ee.kind==="query"){const Fe=pd(ee);return s.jsx("div",{style:Dt.item,role:"button",tabIndex:0,onClick:()=>{o(ee.value),u(ee.value),F(!1),S(Zl())},onKeyDown:Be=>{(Be.key==="Enter"||Be.key===" ")&&(Be.preventDefault(),o(ee.value),u(ee.value),F(!1),S(Zl()))},children:s.jsx("div",{style:Dt.meta,children:s.jsxs("div",{style:Dt.line1,children:[s.jsx("span",{style:Dt.name,children:ee.value}),s.jsx("span",{style:Dt.recentsBadge,children:r("search.recentLabel","Recent")}),s.jsx("button",{type:"button",style:Dt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Be=>{Be.preventDefault(),Be.stopPropagation(),lb(Fe,S)},children:""})]})})},`rq-${le}`)}if(ee.kind==="player"){const Fe={kind:"player",id:ee.id,name:(te=ee.name)!=null?te:null,server:(ye=ee.server)!=null?ye:null,guildName:(ke=ee.guildName)!=null?ke:null,className:(Me=ee.className)!=null?Me:null,level:(Re=ee.level)!=null?Re:null},Be=pd(ee);return s.jsx(q.Fragment,{children:_e(Fe,le,!0,Be)},`rp-${ee.id}-${le}`)}if(ee.kind==="guild"){const Fe={kind:"guild",id:ee.id,name:(Ee=ee.name)!=null?Ee:null,server:(Le=ee.server)!=null?Le:null,memberCount:null,hofRank:null},Be=pd(ee);return s.jsx(q.Fragment,{children:Ae(Fe,le+b.length,!0,Be)},`rg-${ee.id}-${le}`)}return null})]}),!h&&!g&&!J&&X.length===0&&s.jsx("div",{style:Dt.hint,children:r("search.noResults","No results")}),!h&&!g&&b.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Dt.sectionHdr,children:r("search.players","Players")}),b.map((ee,le)=>_e(ee,le))]}),!h&&!g&&k.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Dt.sectionHdr,children:r("search.guilds","Guilds")}),k.map((ee,le)=>{const te=b.length+le;return Ae(ee,te)})]}),!h&&!g&&R.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Dt.sectionHdr,children:r("search.servers","Servers")}),R.map((ee,le)=>{var ke,Me,Re,Ee,Le,Fe;const te=b.length+k.length+le,ye=te===C;return s.jsxs("button",{onClick:()=>Y(ee),style:ye?Dt.itemActive:Dt.item,title:ee.displayName||ee.code||ee.host||"",onMouseEnter:()=>M(te),children:[s.jsx("div",{style:Dt.iconBoxPlain,children:s.jsx("div",{style:Dt.serverGlyph,children:""})}),s.jsxs("div",{style:Dt.meta,children:[s.jsxs("div",{style:Dt.line1,children:[s.jsx("span",{style:Dt.name,children:(Re=(Me=(ke=ee.displayName)!=null?ke:ee.code)!=null?Me:ee.host)!=null?Re:ee.id}),ee.active!=null&&s.jsx("span",{style:Dt.badge,children:ee.active?r("search.active","Active"):r("search.inactive","Inactive")})]}),s.jsxs("div",{style:Dt.line2,children:[s.jsx("span",{children:(Ee=ee.code)!=null?Ee:"?"}),s.jsx("span",{style:Dt.sep,children:""}),s.jsx("span",{children:(Le=ee.host)!=null?Le:"?"}),s.jsx("span",{style:Dt.sep,children:""}),s.jsx("span",{children:(Fe=ee.region)!=null?Fe:"?"}),ee.type?s.jsxs(s.Fragment,{children:[s.jsx("span",{style:Dt.sep,children:""}),s.jsx("span",{children:ee.type.toUpperCase()})]}):null]})]})]},`s-${ee.id}-${le}`)})]}),(N||w)&&s.jsx("button",{style:Dt.moreCta,onClick:se,children:r("search.moreResults","More results press Enter")})]})]})}const Dt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},moreCta:{width:"100%",border:"1px dashed rgba(255,255,255,0.3)",background:"transparent",color:"#d6e4f7",padding:"10px 12px",borderRadius:10,cursor:"pointer",marginTop:8},recentsBadge:{marginLeft:8,fontSize:11,color:"#8aa5c4",border:"1px solid rgba(255,255,255,0.2)",padding:"0 6px",borderRadius:12},clearBtn:{marginLeft:8,background:"transparent",border:"none",color:"rgba(214,228,247,0.85)",cursor:"pointer",fontSize:12,padding:"0 4px"}},_f=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function ry(t,e=64){if(!t)return;const n=_f(t);let r=_r.find(i=>_f(i.label)===n);return r||(r=_r.find(i=>_f(i.label).startsWith(n)||n.startsWith(_f(i.label)))),r?Pi(r.iconUrl,e):void 0}const WH=[{to:"/",labelKey:"home",defaultLabel:"Home",featureId:"main.home"},{to:"/dashboard",labelKey:"dashboard",defaultLabel:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",labelKey:"guildHub",defaultLabel:"Guild Hub",featureId:"main.guildHub"},{to:"/community",labelKey:"community",defaultLabel:"Community",featureId:"main.community"},{to:"/tools",labelKey:"tools",defaultLabel:"Tools",featureId:"main.tools"}];function jC(t,e){return ry(t,e)}function KH({user:t}){const{open:e,canUse:n}=oj(),{isVisibleInTopbar:r}=ty(),{t:i}=Vs(),[a,o]=q.useState(()=>typeof window=="undefined"?!1:window.matchMedia("(max-width: 767px)").matches),[c,u]=q.useState(!1),h=q.useRef(null),m=q.useMemo(()=>WH.filter(b=>!b.featureId||r(b.featureId)),[r]),g=()=>{e({tab:"json"})};q.useEffect(()=>{if(typeof window=="undefined")return;const b=window.matchMedia("(max-width: 767px)"),_=()=>o(b.matches);return _(),b.addEventListener("change",_),()=>b.removeEventListener("change",_)},[]),q.useEffect(()=>{a||u(!1)},[a]),q.useEffect(()=>{if(!c||typeof window=="undefined")return;const b=_=>{_.key==="Escape"&&u(!1)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[c]),q.useEffect(()=>{if(!c||typeof document=="undefined")return;const b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=b}},[c]),q.useEffect(()=>{if(!c)return;const b=()=>{var I;const k=(I=h.current)==null?void 0:I.querySelector("input");k==null||k.focus()},_=window.requestAnimationFrame(b);return()=>window.cancelAnimationFrame(_)},[c]);const v=i("search.open",{defaultValue:"Open search"});return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:qt.topbar,children:[s.jsxs("div",{className:qt.topbarLeft,children:[s.jsx("button",{className:qt.btnIco,"aria-label":i("nav.notifications",{defaultValue:"Notifications"}),children:s.jsx(l7,{className:qt.ico})}),s.jsx("button",{className:qt.btnIco,"aria-label":i("nav.favorites",{defaultValue:"Favorites"}),children:s.jsx(v9,{className:qt.ico})}),s.jsx("button",{className:`${qt.btnIco} ${qt.mobileSearchBtn}`,"aria-label":v,onClick:()=>u(!0),type:"button",children:s.jsx(Iv,{className:qt.ico})}),m.length>0?s.jsx("nav",{className:qt.topbarNav,"aria-label":i("topbar.quickAccess",{defaultValue:"Quick access"}),children:m.map(b=>s.jsx($s,{to:b.to,className:({isActive:_})=>`${qt.pill} ${qt.topbarLink} ${_?qt.pillActive:""}`,children:i(`nav.${b.labelKey}`,{defaultValue:b.defaultLabel})},b.to))}):null]}),s.jsx("div",{className:qt.searchWrap,children:s.jsx(wC,{placeholder:i("search.placeholder",{defaultValue:"Search players"}),getClassIcon:jC,maxPerSection:10})}),s.jsxs("div",{className:qt.topbarRight,children:[s.jsxs("a",{className:`${qt.pill} ${qt.gameLinkButton} ${qt.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer","aria-label":i("topbar.officialGameSite",{defaultValue:"Visit the official game website"}),children:[s.jsx(D7,{className:qt.ico}),i("topbar.officialGameSite",{defaultValue:"Visit the official game website"})]}),n?s.jsxs("button",{className:qt.upload,"aria-label":i("topbar.upload",{defaultValue:"Upload scan"}),onClick:g,title:i("topbar.upload",{defaultValue:"Upload scan"}),children:[s.jsx(k9,{className:qt.ico}),s.jsx("span",{className:qt.label,children:i("topbar.upload",{defaultValue:"Upload scan"})})]}):null,s.jsx(oH,{fallbackName:t==null?void 0:t.name})]})]}),a&&c?s.jsx("div",{className:qt.mobileSearchOverlay,role:"presentation",onClick:()=>u(!1),children:s.jsx("div",{className:qt.mobileSearchPanel,onClick:b=>b.stopPropagation(),ref:h,children:s.jsx("div",{className:qt.searchWrap,children:s.jsx(wC,{placeholder:i("search.placeholder",{defaultValue:"Search players"}),getClassIcon:jC,maxPerSection:10})})})}):null]})}const qH="_root_1uloe_3",QH="_expanded_1uloe_45",YH="_drawer_1uloe_49",XH="_headRow_1uloe_75",JH="_headTitle_1uloe_83",ZH="_headDot_1uloe_85",eW="_headLabel_1uloe_87",tW="_pinBtn_1uloe_89",sW="_navScroll_1uloe_103",nW="_pad_1uloe_105",rW="_segCard_1uloe_111",iW="_segTitle_1uloe_143",aW="_connectedCharactersCard_1uloe_161",oW="_connectedCharactersTitle_1uloe_167",lW="_connectedCharactersList_1uloe_181",cW="_characterChip_1uloe_197",dW="_characterChipId_1uloe_237",uW="_characterChipMeta_1uloe_245",hW="_connectedCharactersEmpty_1uloe_253",mW="_connectedCharactersEmptyText_1uloe_307",pW="_connectedCharactersEmptyCta_1uloe_313",gW="_navCol_1uloe_363",fW="_navItemWrap_1uloe_365",vW="_navBtn_1uloe_371",xW="_navBtnActive_1uloe_395",yW="_label_1uloe_399",bW="_trailing_1uloe_429",_W="_isOpen_1uloe_477",wW="_footer_1uloe_503",jW="_login_1uloe_505",SW="_userMeta_1uloe_527",NW="_footerLink_1uloe_541",kW="_footerRow_1uloe_569",CW="_footerRowCell_1uloe_579",TW="_footerRowLink_1uloe_593",IW="_languageSwitch_1uloe_599",EW="_languageSegment_1uloe_625",AW="_languageSegmentEn_1uloe_715",PW="_languageSegmentDe_1uloe_725",RW="_languageSegmentActive_1uloe_737",LW="_languageSegmentInactive_1uloe_755",DW="_legal_1uloe_781",MW="_labelText_1uloe_805",FW="_char_1uloe_197",BW="_mainNavCard_1uloe_883",$W="_mobileTrigger_1uloe_893",OW="_mobileOverlay_1uloe_907",VW="_mobileDrawer_1uloe_929",kt={root:qH,expanded:QH,drawer:YH,headRow:XH,headTitle:JH,headDot:ZH,headLabel:eW,pinBtn:tW,navScroll:sW,pad:nW,segCard:rW,segTitle:iW,connectedCharactersCard:aW,connectedCharactersTitle:oW,connectedCharactersList:lW,characterChip:cW,characterChipId:dW,characterChipMeta:uW,connectedCharactersEmpty:hW,connectedCharactersEmptyText:mW,connectedCharactersEmptyCta:pW,navCol:gW,navItemWrap:fW,navBtn:vW,navBtnActive:xW,label:yW,trailing:bW,isOpen:_W,footer:wW,login:jW,userMeta:SW,footerLink:NW,footerRow:kW,footerRowCell:CW,footerRowLink:TW,languageSwitch:IW,languageSegment:EW,languageSegmentEn:AW,languageSegmentDe:PW,languageSegmentActive:RW,languageSegmentInactive:LW,legal:DW,labelText:MW,char:FW,mainNavCard:BW,mobileTrigger:$W,mobileOverlay:OW,mobileDrawer:VW},UW="_panel_90cjk_1",zW="_open_90cjk_31",GW="_col_90cjk_43",HW="_link_90cjk_55",WW="_linkActive_90cjk_73",Om={panel:UW,open:zW,col:GW,link:HW,linkActive:WW};function KW(t,e=8){const n=t.getBoundingClientRect();return{left:Math.round(n.right+e),top:Math.round(n.top)}}function qW({anchorEl:t,open:e,items:n,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[o,c]=q.useState({left:0,top:0});return q.useEffect(()=>{if(!e||!t)return;const u=()=>c(KW(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(n!=null&&n.length)&&console.log("submenu items:",n.map(u=>u.label)),YF.createPortal(s.jsx("div",{className:`${Om.panel} ${e?Om.open:""}`,style:{left:o.left,top:o.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:s.jsx("div",{className:Om.col,children:n.map(u=>r(u))})}),document.body))}const QW=[{code:"en",ariaLabelKey:"sidebar.languageSwitchEn"},{code:"de",ariaLabelKey:"sidebar.languageSwitchDe"}],YW=[{to:"/",labelKey:"nav.home",icon:s.jsx(B7,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",labelKey:"nav.discover",icon:s.jsx(k7,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",labelKey:"nav.dashboard",icon:s.jsx(U7,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",labelKey:"nav.settings",icon:s.jsx(o9,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",labelKey:"nav.guildHub",icon:s.jsx(Id,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",labelKey:"nav.admin",icon:s.jsx(u9,{className:"ico"}),featureId:"main.admin"},{to:"/playground",labelKey:"nav.playground",icon:s.jsx(Ix,{className:"ico"}),featureId:"main.playground"}],XW=[{to:"/toplists",labelKey:"nav.toplists",icon:s.jsx(S9,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub-v2",labelKey:"nav.guideHub",icon:s.jsx(d7,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",labelKey:"nav.tools",icon:s.jsx(I9,{className:"ico"}),featureId:"main.tools"},{to:"/community",labelKey:"nav.community",icon:s.jsx(K7,{className:"ico"}),featureId:"main.community"},{to:"/scans",labelKey:"nav.scans",icon:s.jsx(R7,{className:"ico"}),featureId:"main.scans"}],JW={"/guild-hub":[{to:"/guild-hub",labelKey:"nav.overview"},{to:"/guild-hub/planner",labelKey:"nav.guildPlanner"},{to:"/guild-hub/fusion-planner",labelKey:"nav.fusionPlanner"},{to:"/guild-hub/compare-guilds",labelKey:"nav.guildCompare"},{to:"/guild-hub/waitlist",labelKey:"nav.waitlist"},{to:"/guild-hub/settings",labelKey:"nav.settings"}],"/discover":[{to:"/players",labelKey:"nav.players"},{to:"/sfmagazine",labelKey:"nav.sfMagazine"},{to:"/sfmagazine/historybook",labelKey:"nav.historyBook"},{to:"/guilds",labelKey:"nav.guilds"},{to:"/servers",labelKey:"nav.servers"},{to:"/scans",labelKey:"nav.scans"},{to:"/discover/favorites",labelKey:"nav.favorites"}],"/admin":[{to:"/admin",labelKey:"nav.overview"},{to:"/admin/errors",labelKey:"nav.errorLog"},{to:"/admin/feedback",labelKey:"nav.feedback"},{to:"/admin/users",labelKey:"nav.users",minRole:"mod"}],"/settings":[{to:"/settings/account",labelKey:"nav.account"}],"/playground":[{to:"/playground/list-views",labelKey:"nav.listViews"},{to:"/playground/rescan-widget",labelKey:"nav.rescanWidget"},{to:"/playground/upload-sim",labelKey:"nav.uploadSimulator"},{to:"/playground/hud/game-buttons",labelKey:"nav.hudGameButtons"}]};function ZW(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function eK(t,e){return t?t.filter(n=>ZW(e,n.minRole)):[]}const tK=220;function sK(t=tK){const[e,n]=q.useState(!1),r=q.useRef(null),i=q.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=q.useCallback(()=>{i(),n(!0)},[i]),o=q.useCallback(()=>{i(),r.current=window.setTimeout(()=>n(!1),t)},[i,t]);return q.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:o,setOpen:n}}function uj({text:t,isOpen:e,duration:n=1,step:r=45}){const i=q.useMemo(()=>Array.from(t),[t]);return s.jsx("span",{className:kt.label,children:s.jsx("span",{className:kt.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${n}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,o)=>s.jsx("span",{className:kt.char,style:{"--i":o},"aria-hidden":"true",children:a===" "?"":a},`${t}-${o}`))})})}function nK({it:t,label:e,collapsed:n,allowSubmenus:r,subItems:i,onNavigate:a}){const o=i.length>0,{open:c,onEnter:u,onLeave:h,setOpen:m}=sK(),g=q.useRef(null),v=q.useCallback(()=>{if(!r||!o){m(!1);return}u()},[r,o,u,m]);return s.jsxs("div",{ref:g,className:`${kt.navItemWrap} ${c?kt.isOpen:""}`,onMouseEnter:v,onMouseLeave:h,children:[s.jsxs($s,{to:t.to,end:!!t.end,className:({isActive:b})=>`${kt.navBtn} ${b?kt.navBtnActive:""}`,onClick:a,children:[t.icon,s.jsx(uj,{text:e,isOpen:!n}),o&&!n&&s.jsx("span",{className:kt.trailing,"aria-hidden":"true",children:s.jsx(p7,{className:"ico"})})]}),o&&s.jsx(qW,{anchorEl:g.current,open:c,items:i.map(({to:b,label:_})=>({to:b,label:_})),renderLink:b=>s.jsx($s,{to:b.to,end:!0,className:({isActive:_})=>`${Om.link} ${_?Om.linkActive:""}`,onClick:a,children:b.label},b.to),onMouseEnter:u,onMouseLeave:h})]})}function SC({title:t,items:e,collapsed:n,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:o,onNavigate:c}){return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:`${kt.navTitle} ${kt.segTitle}`,children:t}),s.jsx("div",{className:kt.navCol,children:e.map(u=>{if(!o(u))return null;const m=eK(JW[u.to],i).map(v=>({to:v.to,label:a(v.labelKey)})),g=a(u.labelKey);return m.length?s.jsx(nK,{it:u,label:g,collapsed:n,allowSubmenus:r,subItems:m,onNavigate:c},u.to):s.jsxs($s,{to:u.to,end:!!u.end,className:({isActive:v})=>`${kt.navBtn} ${v?kt.navBtnActive:""}`,onClick:c,children:[u.icon,s.jsx(uj,{text:g,isOpen:!n})]},u.to)})})]})}const rK=90,iK=180;function NC({expanded:t,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:i=!0,variant:a="default",onNavigate:o}){var re;const c=q.useRef(null),u=q.useRef(null),[h,m]=q.useState(!1),g=q.useCallback(()=>{c.current&&(window.clearTimeout(c.current),c.current=null),u.current&&(window.clearTimeout(u.current),u.current=null)},[]),v=q.useCallback(()=>{!i||n||(g(),m(!1),c.current=window.setTimeout(()=>e(!0),rK))},[i,n,g,e]),b=q.useCallback(()=>{!i||n||(g(),u.current=window.setTimeout(()=>{e(!1),m(!1)},iK))},[i,n,g,e]);q.useEffect(()=>()=>g(),[g]),q.useEffect(()=>{n&&m(!0)},[n]);const _=G=>{G.propertyName==="width"&&t&&!n&&m(!0)};q.useEffect(()=>{if(t&&!n){const G=window.setTimeout(()=>m(!0),250);return()=>window.clearTimeout(G)}},[t,n]);const k=!t,I=n||t&&h,R=hi(),{t:P,i18n:N}=Vs(),{status:x,user:w,logout:L}=wa(),j=x==="authenticated",S=(re=w==null?void 0:w.roles)!=null?re:[],C=q.useMemo(()=>{var G;return(G=w==null?void 0:w.linkedPlayers)!=null?G:[]},[w==null?void 0:w.linkedPlayers]),{isVisibleInSidebar:M}=ty(),T=q.useMemo(()=>{if(!S.length)return!1;const G=S.filter(X=>typeof X=="string").map(X=>X.toLowerCase());return G.includes("admin")||G.includes("developer")||G.includes("dev")||G.includes("moderator")||G.includes("mod")},[S]),[F,D]=q.useState("en");q.useEffect(()=>{var Y;if(typeof window=="undefined")return;const G=window.localStorage.getItem("sf_lang"),X=G==="en"||G==="de"?G:(Y=N.language)!=null&&Y.startsWith("de")?"de":"en";D(X),N.language!==X&&N.changeLanguage(X)},[N]);const V=q.useCallback(G=>{D(G),typeof window!="undefined"&&window.localStorage.setItem("sf_lang",G),N.language!==G&&N.changeLanguage(G)},[N]),z=()=>{j?L():typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):R("/login")},K=(G,X)=>{const Y=String(G!=null?G:"").trim();if(!Y||Y==="-")return;const se=nh(X!=null?X:null,Y);se&&(R(`/player/${encodeURIComponent(se)}`),o==null||o())},W=()=>{C.length>0||(R(j?"/settings/account?tab=connected-characters&openHelp=1":"/help#linking"),o==null||o())},U=j?P("sidebar.connectedCharacters.empty",{defaultValue:"No characters linked yet. Link a character in your account to see it here."}):P("sidebar.connectedCharacters.loginPrompt",{defaultValue:"Sign in to see your linked characters."}),J=j?P("sidebar.connectedCharacters.ctaAuthed",{defaultValue:"Open linked characters guide"}):P("sidebar.connectedCharacters.ctaGuest",{defaultValue:"Open start guide"});return s.jsxs("aside",{id:"sidebar-root",className:`${kt.root} ${t?kt.expanded:""} ${a==="drawer"?kt.drawer:""}`,"data-collapsed":k?"true":"false",onMouseEnter:v,onMouseLeave:b,onTransitionEnd:_,"aria-label":P("sidebar.navigation",{defaultValue:"Navigation"}),children:[s.jsxs("div",{className:kt.headRow,children:[s.jsxs("div",{className:kt.headTitle,children:[s.jsx("span",{className:kt.headDot})," ",s.jsx("span",{className:kt.headLabel,children:P("sidebar.navigation",{defaultValue:"Navigation"})})]}),s.jsx("button",{className:kt.pinBtn,"aria-pressed":n,title:n?P("sidebar.unpin",{defaultValue:"Unpin"}):P("sidebar.pin",{defaultValue:"Pin"}),onClick:()=>r(!n),type:"button",children:n?s.jsx(Z7,{className:"ico"}):s.jsx(X7,{className:"ico"})})]}),s.jsx("div",{className:kt.navScroll,children:s.jsxs("div",{className:kt.pad,children:[s.jsx("div",{className:`${kt.segCard} ${kt.mainNavCard}`,children:s.jsx(SC,{items:YW,collapsed:k,allowSubmenus:I,userRoles:S,translate:P,isItemVisible:G=>{var X;return M((X=G.featureId)!=null?X:G.to)},onNavigate:o})}),s.jsx("div",{className:kt.segTitle,children:P("sidebar.categories",{defaultValue:"Categories"})}),s.jsx("div",{className:`${kt.segCard} ${kt.mainNavCard}`,children:s.jsx(SC,{items:XW,collapsed:k,allowSubmenus:I,userRoles:S,translate:P,isItemVisible:G=>{var X;return M((X=G.featureId)!=null?X:G.to)},onNavigate:o})}),T?s.jsxs("div",{className:`${kt.segCard} ${kt.mainNavCard} ${kt.connectedCharactersCard}`,children:[s.jsx("div",{className:kt.connectedCharactersTitle,children:P("sidebar.connectedCharacters.title",{defaultValue:"Connected characters"})}),C.length===0?s.jsxs("button",{type:"button",className:kt.connectedCharactersEmpty,onClick:W,children:[s.jsx("span",{className:kt.connectedCharactersEmptyText,children:U}),s.jsx("span",{className:kt.connectedCharactersEmptyCta,children:J})]}):s.jsx("div",{className:kt.connectedCharactersList,"data-collapsed":k?"true":"false",children:C.map(G=>{var ce,_e;const X=[G.server,G.class].filter(Boolean).join(" | "),Y=(ce=G.playerId)!=null?ce:"-",se=`${(_e=G.server)!=null?_e:"server"}-${Y}`;return s.jsxs("button",{type:"button",className:kt.characterChip,onClick:()=>{var Ae;return K(Y,(Ae=G.server)!=null?Ae:null)},children:[s.jsx("span",{className:kt.characterChipId,children:Y}),X&&s.jsx("span",{className:kt.characterChipMeta,children:X})]},se)})})]}):null]})}),s.jsxs("div",{className:`${kt.footer} ${kt.segCard} ${kt.mainNavCard}`,children:[s.jsxs("button",{className:kt.login,type:"button",onClick:z,children:[s.jsx(Id,{className:"ico"}),s.jsx(uj,{text:j?P("sidebar.logout",{defaultValue:"Logout"}):P("sidebar.login",{defaultValue:"Login"}),isOpen:!k})]}),j&&(w!=null&&w.displayName)?s.jsx("div",{className:kt.userMeta,title:w.displayName,children:w.displayName}):null,s.jsxs("div",{className:kt.footerRow,children:[s.jsx("div",{className:kt.footerRowCell,children:s.jsx($s,{to:"/help",className:`${kt.footerLink} ${kt.footerRowLink}`,onClick:o,children:P("nav.help",{defaultValue:"Help"})})}),s.jsx("div",{className:kt.footerRowCell,children:s.jsx("div",{className:kt.languageSwitch,role:"group","aria-label":P("sidebar.languagePreference",{defaultValue:"Sidebar language preference"}),children:QW.map(G=>{const X=F===G.code,Y=`${kt.languageSegment} ${G.code==="de"?kt.languageSegmentDe:kt.languageSegmentEn} ${X?kt.languageSegmentActive:kt.languageSegmentInactive}`;return s.jsx("button",{type:"button",className:Y,onClick:()=>V(G.code),"aria-pressed":X,"aria-label":P(G.ariaLabelKey,{defaultValue:G.code==="de"?"Switch language to German":"Switch language to English"})},G.code)})})})]}),s.jsxs("div",{className:kt.legal,children:["(c) 2025 ",P("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const dv="/assets/logo-sfdatahub-CUdhlsEb.png";function aK({src:t,alt:e="",children:n,to:r="/",loading:i="eager",decoding:a="async"}){const o=t!=null?t:dv;return s.jsxs("div",{className:"logo-dock",children:[s.jsx($s,{to:r,"aria-label":"Go to home",children:s.jsx("img",{className:"logo-img",src:o,alt:e,loading:i,decoding:a,onError:c=>{const u=c.currentTarget;u.src!==dv&&(u.src=dv)}})}),n]})}const oK="_wrapper_su530_1",lK="_card_su530_19",cK="_logo_su530_45",dK="_heading_su530_61",uK="_subcopy_su530_73",hK="_buttonStack_su530_83",mK="_providerButton_su530_97",pK="_discord_su530_145",gK="_google_su530_153",fK="_errorMessage_su530_161",vK="_diagnostics_su530_183",xK="_diagnosticsBody_su530_195",yK="_disclaimer_su530_215",bK="_status_su530_227",_K="_sessionBlock_su530_237",wK="_logoutButton_su530_251",jK="_linkButton_su530_281",SK="_loading_su530_299",NK="_spinner_su530_315",zn={wrapper:oK,card:lK,logo:cK,heading:dK,subcopy:uK,buttonStack:hK,providerButton:mK,discord:pK,google:gK,errorMessage:fK,diagnostics:vK,diagnosticsBody:xK,disclaimer:yK,status:bK,sessionBlock:_K,logoutButton:wK,linkButton:jK,loading:SK,spinner:NK},X4=()=>{var R,P,N,x,w,L;const t=hi(),{status:e,user:n,loginWithDiscord:r,loginWithGoogle:i,logout:a}=wa(),[o,c]=q.useState(null),u=e==="loading"||e==="idle",h=e==="authenticated"&&!!n,m=q.useCallback(()=>{var S;if(typeof window=="undefined")return!1;try{const C=(S=window.localStorage)==null?void 0:S.getItem("sfh:debug:auth");if(C==="1"||C==="true")return!0}catch(C){console.warn("[Login] Failed to read auth debug flag",C)}return!1},[]),g=q.useCallback((j,S)=>{const C=typeof window!="undefined"?window.location.host:"unknown host";switch(j){case"auth/unauthorized-domain":return`This domain is not authorized for login. Please add "${C}" to your Firebase Auth authorized domains or use the correct environment.`;case"auth/popup-blocked":return"The login popup was blocked. Please allow popups for this site or continue with the redirect flow.";case"auth/popup-closed-by-user":return"The login popup was closed before completing sign-in. Please try again.";default:{const M=j?` (code: ${j})`:"";return`${S||"Login failed. Please try again."}${M}`}}},[]),v=async()=>{if(!u){c(null);try{await r()}catch(j){const S=typeof(j==null?void 0:j.code)=="string"?j.code:void 0,C=typeof(j==null?void 0:j.message)=="string"?j.message:void 0;c({code:S,message:g(S,C)})}}},b=async()=>{if(!u){c(null);try{await i()}catch(j){const S=typeof(j==null?void 0:j.code)=="string"?j.code:void 0,C=typeof(j==null?void 0:j.message)=="string"?j.message:void 0;c({code:S,message:g(S,C)})}}},_=async()=>{await a()},k=()=>{t("/")};let I;return u?I=s.jsxs("div",{className:zn.loading,children:[s.jsx("div",{className:zn.spinner}),s.jsx("div",{children:"Checking session?"})]}):h&&n?I=s.jsxs("div",{className:zn.sessionBlock,children:[s.jsxs("div",{className:zn.status,children:["You are logged in as ",n.displayName,"."]}),s.jsx("button",{className:zn.logoutButton,type:"button",onClick:_,children:"Logout"}),s.jsx("button",{className:zn.linkButton,type:"button",onClick:k,children:"Back to dashboard"})]}):I=s.jsxs("div",{className:zn.buttonStack,children:[s.jsx("button",{className:`${zn.providerButton} ${zn.discord}`,type:"button",onClick:v,children:"Login with Discord"}),s.jsx("button",{className:`${zn.providerButton} ${zn.google}`,type:"button",onClick:b,children:"Login with Google"}),o&&s.jsx("div",{className:zn.errorMessage,children:o.message}),m()&&s.jsxs("details",{className:zn.diagnostics,children:[s.jsx("summary",{children:"Auth diagnostics"}),s.jsxs("div",{className:zn.diagnosticsBody,children:[s.jsxs("div",{children:["Host: ",typeof window!="undefined"?window.location.host:"N/A"]}),s.jsxs("div",{children:["Origin: ",typeof window!="undefined"?window.location.origin:"N/A"]}),s.jsxs("div",{children:["Firebase projectId: ",(N=(P=(R=Fa.app)==null?void 0:R.options)==null?void 0:P.projectId)!=null?N:"unknown"]}),s.jsxs("div",{children:["Firebase authDomain: ",(L=(w=(x=Fa.app)==null?void 0:x.options)==null?void 0:w.authDomain)!=null?L:"unknown"]})]})]})]}),s.jsx("div",{className:zn.wrapper,children:s.jsxs("div",{className:zn.card,children:[s.jsx("img",{className:zn.logo,src:dv,alt:"SFDataHub logo"}),s.jsx("h1",{className:zn.heading,children:"Sign in"}),s.jsx("p",{className:zn.subcopy,children:"Choose a method to access SFDataHub."}),I,s.jsx("p",{className:zn.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})},kK="_backdrop_bbe4l_1",CK="_inner_bbe4l_23",kC={backdrop:kK,inner:CK},TK=({isOpen:t,onClose:e})=>(q.useEffect(()=>{if(!t)return;const n=r=>{r.key==="Escape"&&e()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[t,e]),q.useEffect(()=>{if(!t)return;const n=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=n}},[t]),t?s.jsx("div",{className:kC.backdrop,role:"dialog","aria-modal":"true","aria-label":"Sign in",onMouseDown:n=>{n.target===n.currentTarget&&e()},children:s.jsx("div",{className:kC.inner,children:s.jsx(X4,{})})}):null),CC="sfh:openLoginModal",IK=()=>{const{status:t,user:e}=wa(),n=ir(),[r,i]=q.useState(!1);return q.useEffect(()=>{const a=()=>i(!0);return window.addEventListener(CC,a),()=>window.removeEventListener(CC,a)},[]),q.useEffect(()=>{r&&n.pathname==="/login"&&i(!1)},[r,n.pathname]),q.useEffect(()=>{if(!r)return;t==="authenticated"&&!!e&&i(!1)},[r,t,e]),s.jsx(TK,{isOpen:r,onClose:()=>i(!1)})},EK={borderColor:"#2B4C73",background:"#1A2F4A"},TC="sfh:authNext",AK=t=>{if(!t)return null;const e=t.trim();return!e.startsWith("/")||e.startsWith("//")||/^[a-z][a-z0-9+.-]*:/i.test(e)||e.toLowerCase().startsWith("/login")?null:e};function PK(){const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[i,a]=A.useState(()=>typeof window=="undefined"?!1:window.matchMedia("(max-width: 1023px)").matches),[o,c]=A.useState(!1),u=n||t,{t:h}=Vs(),{status:m,user:g}=wa(),v=hi(),b=ir();A.useEffect(()=>{if(m!=="authenticated"||!g)return;const N=()=>{if(typeof window=="undefined"||!window.sessionStorage)return null;try{return window.sessionStorage.getItem(TC)}catch(j){return console.warn("[AuthNext] Failed to read auth next from sessionStorage",j),null}},x=()=>{if(!(typeof window=="undefined"||!window.sessionStorage))try{window.sessionStorage.removeItem(TC)}catch(j){console.warn("[AuthNext] Failed to clear auth next from sessionStorage",j)}},w=AK(N());if(!w){x();return}x(),`${b.pathname}${b.search||""}`!==w&&v(w,{replace:!0})},[m,g,b.pathname,b.search,v]),A.useEffect(()=>{if(typeof window=="undefined")return;const N=window.matchMedia("(max-width: 1023px)"),x=()=>a(N.matches);return x(),N.addEventListener("change",x),()=>N.removeEventListener("change",x)},[]),A.useEffect(()=>{i||c(!1)},[i]),A.useEffect(()=>{if(!o||typeof window=="undefined")return;const N=x=>{x.key==="Escape"&&c(!1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[o]),A.useEffect(()=>{if(!o||typeof document=="undefined")return;const N=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=N}},[o]);const _=A.useMemo(()=>i?"0px":u?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i,u]),k=h("footer.about.body").split(`

`),I=[],R=h("nav.open",{defaultValue:"Open navigation"}),P=i?"collapsed":u?"expanded":"collapsed";return s.jsxs("div",{id:"app-shell","data-sidebar":P,style:{"--left":_},children:[s.jsx(aK,{src:"/logo.png"}),s.jsx(KH,{}),s.jsx("div",{className:"logo-fill"}),i?!o&&s.jsx("div",{className:`${kt.headRow} ${kt.mobileTrigger}`,children:s.jsx("button",{className:kt.pinBtn,type:"button","aria-label":R,"aria-expanded":o,onClick:()=>c(!0),children:s.jsx(H7,{className:"ico"})})}):s.jsx(NC,{expanded:u,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:!n}),i&&o?s.jsx("div",{className:kt.mobileOverlay,role:"presentation",onClick:()=>c(!1),children:s.jsx("div",{className:kt.mobileDrawer,onClick:N=>N.stopPropagation(),children:s.jsx(NC,{expanded:!0,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:!1,variant:"drawer",onNavigate:()=>c(!1)})})}):null,s.jsx("div",{className:"content",children:s.jsx("div",{className:"content-inner",children:s.jsxs("div",{className:"content-body",children:[s.jsx(Q5,{}),s.jsx(IK,{}),s.jsx("div",{className:"mt-4 px-4 md:px-6",children:s.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:EK,children:[s.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:h("footer.about.title")}),s.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:k.map((N,x)=>s.jsx("p",{className:"whitespace-pre-line",children:N},`footer-about-${x}`))}),s.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[s.jsx("div",{children:h("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),s.jsx("div",{children:h("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:I.map(N=>s.jsx(Gs,{to:N.to,className:"underline hover:no-underline",children:N.label},N.key))})]})})]})})})]})}const J4=A.createContext({});function hj(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const mj=A.createContext(null),pj=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function RK(t=!0){const e=A.useContext(mj);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{t&&i(a)},[t]);const o=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const gj=typeof window!="undefined",Z4=gj?A.useLayoutEffect:A.useEffect,Xi=t=>t;let eP=Xi;function fj(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},vo=t=>t*1e3,xo=t=>t/1e3,LK={useManualTiming:!1};function DK(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(u.schedule(h),t()),h(o)}const u={schedule:(h,m=!1,g=!1)=>{const b=g&&r?e:n;return m&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{n.delete(h),a.delete(h)},process:h=>{if(o=h,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(c),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const wf=["read","resolveKeyframes","update","preRender","render","postRender"],MK=40;function tP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=wf.reduce((R,P)=>(R[P]=DK(a),R),{}),{read:c,resolveKeyframes:u,update:h,preRender:m,render:g,postRender:v}=o,b=()=>{const R=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,MK),1),i.timestamp=R,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},_=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:wf.reduce((R,P)=>{const N=o[P];return R[P]=(x,w=!1,L=!1)=>(n||_(),N.schedule(x,w,L)),R},{}),cancel:R=>{for(let P=0;P<wf.length;P++)o[wf[P]].cancel(R)},state:i,steps:o}}const{schedule:en,cancel:fl,state:Tr,steps:cb}=tP(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Xi,!0),sP=A.createContext({strict:!1}),IC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rh={};for(const t in IC)rh[t]={isEnabled:e=>IC[t].some(n=>!!e[n])};function FK(t){for(const e in t)rh[e]={...rh[e],...t[e]}}const BK=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BK.has(t)}let nP=t=>!Xv(t);function $K(t){t&&(nP=e=>e.startsWith("on")?!Xv(e):t(e))}try{$K(require("@emotion/is-prop-valid").default)}catch(t){}function OK(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(nP(i)||n===!0&&Xv(i)||!e&&!Xv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function VK(t){if(typeof Proxy=="undefined")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const iy=A.createContext({});function xp(t){return typeof t=="string"||Array.isArray(t)}function ay(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const vj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xj=["initial",...vj];function oy(t){return ay(t.animate)||xj.some(e=>xp(t[e]))}function rP(t){return!!(oy(t)||t.variants)}function UK(t,e){if(oy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||xp(n)?n:void 0,animate:xp(r)?r:void 0}}return t.inherit!==!1?e:{}}function zK(t){const{initial:e,animate:n}=UK(t,A.useContext(iy));return A.useMemo(()=>({initial:e,animate:n}),[EC(e),EC(n)])}function EC(t){return Array.isArray(t)?t.join(" "):t}const GK=Symbol.for("motionComponentSymbol");function Ru(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HK(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ru(n)&&(n.current=r))},[e])}const yj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WK="framerAppearId",iP="data-"+yj(WK),{schedule:bj}=tP(queueMicrotask,!1),aP=A.createContext({});function KK(t,e,n,r,i){var a,o;const{visualElement:c}=A.useContext(iy),u=A.useContext(sP),h=A.useContext(mj),m=A.useContext(pj).reducedMotion,g=A.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const v=g.current,b=A.useContext(aP);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&qK(g.current,n,i,b);const _=A.useRef(!1);A.useInsertionEffect(()=>{v&&_.current&&v.update(n,h)});const k=n[iP],I=A.useRef(!!k&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,k))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,k)));return Z4(()=>{v&&(_.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),bj.render(v.render),I.current&&v.animationState&&v.animationState.animateChanges())}),A.useEffect(()=>{v&&(!I.current&&v.animationState&&v.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,k)}),I.current=!1))}),v}function qK(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oP(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Ru(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function oP(t){if(t)return t.options.allowProjection!==!1?t.projection:oP(t.parent)}function QK({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,o;t&&FK(t);function c(h,m){let g;const v={...A.useContext(pj),...h,layoutId:YK(h)},{isStatic:b}=v,_=zK(h),k=r(h,b);if(!b&&gj){XK();const I=JK(v);g=I.MeasureLayout,_.visualElement=KK(i,k,v,e,I.ProjectionNode)}return s.jsxs(iy.Provider,{value:_,children:[g&&_.visualElement?s.jsx(g,{visualElement:_.visualElement,...v}):null,n(i,h,HK(k,_.visualElement,m),k,b,_.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${(o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:""})`}`;const u=A.forwardRef(c);return u[GK]=i,u}function YK({layoutId:t}){const e=A.useContext(J4).id;return e&&t!==void 0?e+"-"+t:t}function XK(t,e){A.useContext(sP).strict}function JK(t){const{drag:e,layout:n}=rh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ZK=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _j(t){return typeof t!="string"||t.includes("-")?!1:!!(ZK.indexOf(t)>-1||/[A-Z]/u.test(t))}function AC(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function wj(t,e,n,r){if(typeof e=="function"){const[i,a]=AC(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=AC(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const g_=t=>Array.isArray(t),eq=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),tq=t=>g_(t)?t[t.length-1]||0:t,br=t=>!!(t&&t.getVelocity);function uv(t){const e=br(t)?t.get():t;return eq(e)?e.toValue():e}function sq({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const o={latestValues:nq(r,i,a,t),renderState:e()};return n&&(o.onMount=c=>n({props:r,current:c,...o}),o.onUpdate=c=>n(c)),o}const lP=t=>(e,n)=>{const r=A.useContext(iy),i=A.useContext(mj),a=()=>sq(t,e,r,i);return n?a():hj(a)};function nq(t,e,n,r){const i={},a=r(t,{});for(const v in a)i[v]=uv(a[v]);let{initial:o,animate:c}=t;const u=oy(t),h=rP(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||o===!1;const g=m?c:o;if(g&&typeof g!="boolean"&&!ay(g)){const v=Array.isArray(g)?g:[g];for(let b=0;b<v.length;b++){const _=wj(t,v[b]);if(_){const{transitionEnd:k,transition:I,...R}=_;for(const P in R){let N=R[P];if(Array.isArray(N)){const x=m?N.length-1:0;N=N[x]}N!==null&&(i[P]=N)}for(const P in k)i[P]=k[P]}}}return i}const jh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rd=new Set(jh),cP=t=>e=>typeof e=="string"&&e.startsWith(t),dP=cP("--"),rq=cP("var(--"),jj=t=>rq(t)?iq.test(t.split("/*")[0].trim()):!1,iq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vl=(t,e,n)=>n>e?e:n<t?t:n,Sh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yp={...Sh,transform:t=>vl(0,1,t)},jf={...Sh,default:1},qp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Xl=qp("deg"),yo=qp("%"),Ut=qp("px"),aq=qp("vh"),oq=qp("vw"),PC={...yo,parse:t=>yo.parse(t)/100,transform:t=>yo.transform(t*100)},lq={borderWidth:Ut,borderTopWidth:Ut,borderRightWidth:Ut,borderBottomWidth:Ut,borderLeftWidth:Ut,borderRadius:Ut,radius:Ut,borderTopLeftRadius:Ut,borderTopRightRadius:Ut,borderBottomRightRadius:Ut,borderBottomLeftRadius:Ut,width:Ut,maxWidth:Ut,height:Ut,maxHeight:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,backgroundPositionX:Ut,backgroundPositionY:Ut},cq={rotate:Xl,rotateX:Xl,rotateY:Xl,rotateZ:Xl,scale:jf,scaleX:jf,scaleY:jf,scaleZ:jf,skew:Xl,skewX:Xl,skewY:Xl,distance:Ut,translateX:Ut,translateY:Ut,translateZ:Ut,x:Ut,y:Ut,z:Ut,perspective:Ut,transformPerspective:Ut,opacity:yp,originX:PC,originY:PC,originZ:Ut},RC={...Sh,transform:Math.round},Sj={...lq,...cq,zIndex:RC,size:Ut,fillOpacity:yp,strokeOpacity:yp,numOctaves:RC},dq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uq=jh.length;function hq(t,e,n){let r="",i=!0;for(let a=0;a<uq;a++){const o=jh[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=uP(c,Sj[o]);if(!u){i=!1;const m=dq[o]||o;r+=`${m}(${h}) `}n&&(e[o]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Nj(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const h=e[u];if(Rd.has(u)){o=!0;continue}else if(dP(u)){i[u]=h;continue}else{const m=uP(h,Sj[u]);u.startsWith("origin")?(c=!0,a[u]=m):r[u]=m}}if(e.transform||(o||n?r.transform=hq(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:m=0}=a;r.transformOrigin=`${u} ${h} ${m}`}}const mq={offset:"stroke-dashoffset",array:"stroke-dasharray"},pq={offset:"strokeDashoffset",array:"strokeDasharray"};function gq(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?mq:pq;t[a.offset]=Ut.transform(-r);const o=Ut.transform(e),c=Ut.transform(n);t[a.array]=`${o} ${c}`}function LC(t,e,n){return typeof t=="string"?t:Ut.transform(e+n*t)}function fq(t,e,n){const r=LC(e,t.x,t.width),i=LC(n,t.y,t.height);return`${r} ${i}`}function kj(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:c=1,pathOffset:u=0,...h},m,g){if(Nj(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:b,dimensions:_}=t;v.transform&&(_&&(b.transform=v.transform),delete v.transform),_&&(i!==void 0||a!==void 0||b.transform)&&(b.transformOrigin=fq(_,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),o!==void 0&&gq(v,o,c,u,!1)}const Cj=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hP=()=>({...Cj(),attrs:{}}),Tj=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mP(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const pP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gP(t,e,n,r){mP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(pP.has(i)?i:yj(i),e.attrs[i])}const Jv={};function vq(t){Object.assign(Jv,t)}function fP(t,{layout:e,layoutId:n}){return Rd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Jv[t]||t==="opacity")}function Ij(t,e,n){var r;const{style:i}=t,a={};for(const o in i)(br(i[o])||e.style&&br(e.style[o])||fP(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function vP(t,e,n){const r=Ij(t,e,n);for(const i in t)if(br(t[i])||br(e[i])){const a=jh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function xq(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(n){e.dimensions={x:0,y:0,width:0,height:0}}}const DC=["x","y","width","height","cx","cy","r"],yq={useVisualState:lP({scrapeMotionValuesFromProps:vP,createRenderState:hP,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const c in i)if(Rd.has(c)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let c=0;c<DC.length;c++){const u=DC[c];t[u]!==e[u]&&(o=!0)}o&&en.read(()=>{xq(n,r),en.render(()=>{kj(r,i,Tj(n.tagName),t.transformTemplate),gP(n,r)})})}})},bq={useVisualState:lP({scrapeMotionValuesFromProps:Ij,createRenderState:Cj})};function xP(t,e,n){for(const r in e)!br(e[r])&&!fP(r,n)&&(t[r]=e[r])}function _q({transformTemplate:t},e){return A.useMemo(()=>{const n=Cj();return Nj(n,e,t),Object.assign({},n.vars,n.style)},[e])}function wq(t,e){const n=t.style||{},r={};return xP(r,n,t),Object.assign(r,_q(t,e)),r}function jq(t,e){const n={},r=wq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Sq(t,e,n,r){const i=A.useMemo(()=>{const a=hP();return kj(a,e,Tj(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};xP(a,t.style,t),i.style={...a,...i.style}}return i}function Nq(t=!1){return(n,r,i,{latestValues:a},o)=>{const u=(_j(n)?Sq:jq)(r,a,o,n),h=OK(r,typeof n=="string",t),m=n!==A.Fragment?{...h,...u,ref:i}:{},{children:g}=r,v=A.useMemo(()=>br(g)?g.get():g,[g]);return A.createElement(n,{...m,children:v})}}function kq(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={..._j(r)?yq:bq,preloadedFeatures:t,useRender:Nq(i),createVisualElement:e,Component:r};return QK(o)}}function yP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ly(t,e,n){const r=t.getProps();return wj(r,e,n!==void 0?n:r.custom,t)}const Cq=fj(()=>window.ScrollTimeline!==void 0);class Tq{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Cq()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class bP extends Tq{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Ej(t,e){return t?t[e]||t.default||t:void 0}const Zv=2e4;function Aj(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zv;)e+=n,r=t.next(e);return e>=Zv?1/0:e}function Iq(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Aj(r),Zv);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:xo(i)}}function cy(t){return typeof t=="function"}function MC(t,e){t.timeline=e,t.onfinish=null}const Pj=t=>Array.isArray(t)&&typeof t[0]=="number",Eq={linearEasing:void 0};function Aq(t,e){const n=fj(t);return()=>{var r;return(r=Eq[e])!==null&&r!==void 0?r:n()}}const ex=Aq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),_P=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(Cd(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function wP(t){return!!(typeof t=="function"&&ex()||!t||typeof t=="string"&&(t in f_||ex())||Pj(t)||Array.isArray(t)&&t.every(wP))}const km=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,f_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:km([0,.65,.55,1]),circOut:km([.55,0,1,.45]),backIn:km([.31,.01,.66,-.59]),backOut:km([.33,1.53,.69,.99])};function jP(t,e){if(t)return typeof t=="function"&&ex()?_P(t,e):Pj(t)?km(t):Array.isArray(t)?t.map(n=>jP(n,e)||f_.easeOut):f_[t]}const Ba={x:!1,y:!1};function SP(){return Ba.x||Ba.y}function NP(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=n==null?void 0:n[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function kP(t,e){const n=NP(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function FC(t){return e=>{e.pointerType==="touch"||SP()||t(e)}}function Pq(t,e,n={}){const[r,i,a]=kP(t,n),o=FC(c=>{const{target:u}=c,h=e(c);if(typeof h!="function"||!u)return;const m=FC(g=>{h(g),u.removeEventListener("pointerleave",m)});u.addEventListener("pointerleave",m,i)});return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const CP=(t,e)=>e?t===e?!0:CP(t,e.parentElement):!1,Rj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Rq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Lq(t){return Rq.has(t.tagName)||t.tabIndex!==-1}const Cm=new WeakSet;function BC(t){return e=>{e.key==="Enter"&&t(e)}}function db(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Dq=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=BC(()=>{if(Cm.has(n))return;db(n,"down");const i=BC(()=>{db(n,"up")}),a=()=>db(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function $C(t){return Rj(t)&&!SP()}function Mq(t,e,n={}){const[r,i,a]=kP(t,n),o=c=>{const u=c.currentTarget;if(!$C(c)||Cm.has(u))return;Cm.add(u);const h=e(c),m=(b,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),!(!$C(b)||!Cm.has(u))&&(Cm.delete(u),typeof h=="function"&&h(b,{success:_}))},g=b=>{m(b,n.useGlobalTarget||CP(u,b.target))},v=b=>{m(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return r.forEach(c=>{!Lq(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),c.addEventListener("focus",h=>Dq(h,i),i)}),a}function Fq(t){return t==="x"||t==="y"?Ba[t]?null:(Ba[t]=!0,()=>{Ba[t]=!1}):Ba.x||Ba.y?null:(Ba.x=Ba.y=!0,()=>{Ba.x=Ba.y=!1})}const TP=new Set(["width","height","top","left","right","bottom",...jh]);let hv;function Bq(){hv=void 0}const bo={now:()=>(hv===void 0&&bo.set(Tr.isProcessing||LK.useManualTiming?Tr.timestamp:performance.now()),hv),set:t=>{hv=t,queueMicrotask(Bq)}};function Lj(t,e){t.indexOf(e)===-1&&t.push(e)}function dy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Dj{constructor(){this.subscriptions=[]}add(e){return Lj(this.subscriptions,e),()=>dy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function IP(t,e){return e?t*(1e3/e):0}const OC=30,$q=t=>!isNaN(parseFloat(t)),Vm={current:void 0};class Oq{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=bo.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$q(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Dj);const r=this.events[e].add(n);return e==="change"?()=>{r(),en.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Vm.current&&Vm.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>OC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,OC);return IP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ih(t,e){return new Oq(t,e)}function Vq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ih(n))}function Uq(t,e){const n=ly(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=tq(a[o]);Vq(t,o,c)}}function zq(t){return!!(br(t)&&t.add)}function v_(t,e){const n=t.getValue("willChange");if(zq(n))return n.add(e)}function EP(t){return t.props[iP]}const AP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Gq=1e-7,Hq=12;function Wq(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=AP(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>Gq&&++c<Hq);return o}function Qp(t,e,n,r){if(t===e&&n===r)return Xi;const i=a=>Wq(a,0,1,t,n);return a=>a===0||a===1?a:AP(i(a),e,r)}const PP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,RP=t=>e=>1-t(1-e),LP=Qp(.33,1.53,.69,.99),Mj=RP(LP),DP=PP(Mj),MP=t=>(t*=2)<1?.5*Mj(t):.5*(2-Math.pow(2,-10*(t-1))),Fj=t=>1-Math.sin(Math.acos(t)),FP=RP(Fj),BP=PP(Fj),$P=t=>/^0[^.\s]+$/u.test(t);function Kq(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$P(t):!0}const Um=t=>Math.round(t*1e5)/1e5,Bj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qq(t){return t==null}const Qq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$j=(t,e)=>n=>!!(typeof n=="string"&&Qq.test(n)&&n.startsWith(t)||e&&!qq(n)&&Object.prototype.hasOwnProperty.call(n,e)),OP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Bj);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},Yq=t=>vl(0,255,t),ub={...Sh,transform:t=>Math.round(Yq(t))},ld={test:$j("rgb","red"),parse:OP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ub.transform(t)+", "+ub.transform(e)+", "+ub.transform(n)+", "+Um(yp.transform(r))+")"};function Xq(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const x_={test:$j("#"),parse:Xq,transform:ld.transform},Lu={test:$j("hsl","hue"),parse:OP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yo.transform(Um(e))+", "+yo.transform(Um(n))+", "+Um(yp.transform(r))+")"},Hr={test:t=>ld.test(t)||x_.test(t)||Lu.test(t),parse:t=>ld.test(t)?ld.parse(t):Lu.test(t)?Lu.parse(t):x_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ld.transform(t):Lu.transform(t)},Jq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Zq(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Bj))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Jq))===null||n===void 0?void 0:n.length)||0)>0}const VP="number",UP="color",eQ="var",tQ="var(",VC="${}",sQ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(sQ,u=>(Hr.test(u)?(r.color.push(a),i.push(UP),n.push(Hr.parse(u))):u.startsWith(tQ)?(r.var.push(a),i.push(eQ),n.push(u)):(r.number.push(a),i.push(VP),n.push(parseFloat(u))),++a,VC)).split(VC);return{values:n,split:c,indexes:r,types:i}}function zP(t){return bp(t).values}function GP(t){const{split:e,types:n}=bp(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===VP?a+=Um(i[o]):c===UP?a+=Hr.transform(i[o]):a+=i[o]}return a}}const nQ=t=>typeof t=="number"?0:t;function rQ(t){const e=zP(t);return GP(t)(e.map(nQ))}const wc={test:Zq,parse:zP,createTransformer:GP,getAnimatableNone:rQ},iQ=new Set(["brightness","contrast","saturate","opacity"]);function aQ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Bj)||[];if(!r)return t;const i=n.replace(r,"");let a=iQ.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const oQ=/\b([a-z-]*)\(.*?\)/gu,y_={...wc,getAnimatableNone:t=>{const e=t.match(oQ);return e?e.map(aQ).join(" "):t}},lQ={...Sj,color:Hr,backgroundColor:Hr,outlineColor:Hr,fill:Hr,stroke:Hr,borderColor:Hr,borderTopColor:Hr,borderRightColor:Hr,borderBottomColor:Hr,borderLeftColor:Hr,filter:y_,WebkitFilter:y_},Oj=t=>lQ[t];function HP(t,e){let n=Oj(t);return n!==y_&&(n=wc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cQ=new Set(["auto","none","0"]);function dQ(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!cQ.has(a)&&bp(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=HP(n,i)}const UC=t=>t===Sh||t===Ut,zC=(t,e)=>parseFloat(t.split(", ")[e]),GC=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return zC(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?zC(a[1],t):0}},uQ=new Set(["x","y","z"]),hQ=jh.filter(t=>!uQ.has(t));function mQ(t){const e=[];return hQ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ah={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:GC(4,13),y:GC(5,14)};ah.translateX=ah.x;ah.translateY=ah.y;const gd=new Set;let b_=!1,__=!1;function WP(){if(__){const t=Array.from(gd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=mQ(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}__=!1,b_=!1,gd.forEach(t=>t.complete()),gd.clear()}function KP(){gd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(__=!0)})}function pQ(){KP(),WP()}class Vj{constructor(e,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(gd.add(this),b_||(b_=!0,en.read(KP),en.resolveKeyframes(WP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),gd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,gd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const qP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),gQ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fQ(t){const e=gQ.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n!=null?n:r}`,i]}function QP(t,e,n=1){const[r,i]=fQ(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return qP(o)?parseFloat(o):o}return jj(i)?QP(i,e,n+1):i}const YP=t=>e=>e.test(t),vQ={test:t=>t==="auto",parse:t=>t},XP=[Sh,Ut,yo,Xl,oq,aq,vQ],HC=t=>XP.find(YP(t));class JP extends Vj{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),jj(h))){const m=QP(h,n.current);m!==void 0&&(e[u]=m),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!TP.has(r)||e.length!==2)return;const[i,a]=e,o=HC(i),c=HC(a);if(o!==c)if(UC(o)&&UC(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Kq(e[i])&&r.push(i);r.length&&dQ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ah[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=ah[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{n.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const WC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wc.test(t)||t==="0")&&!t.startsWith("url("));function xQ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yQ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=WC(i,e),c=WC(a,e);return!o||!c?!1:xQ(t)||(n==="spring"||cy(n))&&r}const bQ=t=>t!==null;function uy(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(bQ),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const _Q=40;class ZP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>_Q?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&pQ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=bo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:c,onUpdate:u,isGenerator:h}=this.options;if(!h&&!yQ(e,r,i,a))if(o)this.options.duration=0;else{u&&u(uy(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const hn=(t,e,n)=>t+(e-t)*n;function hb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wQ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=hb(u,c,t+1/3),a=hb(u,c,t),o=hb(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function tx(t,e){return n=>n>0?e:t}const mb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},jQ=[x_,ld,Lu],SQ=t=>jQ.find(e=>e.test(t));function KC(t){const e=SQ(t);if(!e)return!1;let n=e.parse(t);return e===Lu&&(n=wQ(n)),n}const qC=(t,e)=>{const n=KC(t),r=KC(e);if(!n||!r)return tx(t,e);const i={...n};return a=>(i.red=mb(n.red,r.red,a),i.green=mb(n.green,r.green,a),i.blue=mb(n.blue,r.blue,a),i.alpha=hn(n.alpha,r.alpha,a),ld.transform(i))},NQ=(t,e)=>n=>e(t(n)),Yp=(...t)=>t.reduce(NQ),w_=new Set(["none","hidden"]);function kQ(t,e){return w_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function CQ(t,e){return n=>hn(t,e,n)}function Uj(t){return typeof t=="number"?CQ:typeof t=="string"?jj(t)?tx:Hr.test(t)?qC:EQ:Array.isArray(t)?eR:typeof t=="object"?Hr.test(t)?qC:TQ:tx}function eR(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>Uj(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function TQ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Uj(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function IQ(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][i[o]],u=(n=t.values[c])!==null&&n!==void 0?n:0;r[a]=u,i[o]++}return r}const EQ=(t,e)=>{const n=wc.createTransformer(e),r=bp(t),i=bp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?w_.has(t)&&!i.values.length||w_.has(e)&&!r.values.length?kQ(t,e):Yp(eR(IQ(r,i),i.values),n):tx(t,e)};function tR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?hn(t,e,n):Uj(t)(t,e)}const AQ=5;function sR(t,e,n){const r=Math.max(e-AQ,0);return IP(n-t(r),e-r)}const In={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pb=.001;function PQ({duration:t=In.duration,bounce:e=In.bounce,velocity:n=In.velocity,mass:r=In.mass}){let i,a,o=1-e;o=vl(In.minDamping,In.maxDamping,o),t=vl(In.minDuration,In.maxDuration,xo(t)),o<1?(i=h=>{const m=h*o,g=m*t,v=m-n,b=j_(h,o),_=Math.exp(-g);return pb-v/b*_},a=h=>{const g=h*o*t,v=g*n+n,b=Math.pow(o,2)*Math.pow(h,2)*t,_=Math.exp(-g),k=j_(Math.pow(h,2),o);return(-i(h)+pb>0?-1:1)*((v-b)*_)/k}):(i=h=>{const m=Math.exp(-h*t),g=(h-n)*t+1;return-pb+m*g},a=h=>{const m=Math.exp(-h*t),g=(n-h)*(t*t);return m*g});const c=5/t,u=LQ(i,a,c);if(t=vo(t),isNaN(u))return{stiffness:In.stiffness,damping:In.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const RQ=12;function LQ(t,e,n){let r=n;for(let i=1;i<RQ;i++)r=r-t(r)/e(r);return r}function j_(t,e){return t*Math.sqrt(1-e*e)}const DQ=["duration","bounce"],MQ=["stiffness","damping","mass"];function QC(t,e){return e.some(n=>t[n]!==void 0)}function FQ(t){let e={velocity:In.velocity,stiffness:In.stiffness,damping:In.damping,mass:In.mass,isResolvedFromDuration:!1,...t};if(!QC(t,MQ)&&QC(t,DQ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*vl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:In.mass,stiffness:i,damping:a}}else{const n=PQ(t);e={...e,...n,mass:In.mass},e.isResolvedFromDuration=!0}return e}function zj(t=In.visualDuration,e=In.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:h,mass:m,duration:g,velocity:v,isResolvedFromDuration:b}=FQ({...n,velocity:-xo(n.velocity||0)}),_=v||0,k=h/(2*Math.sqrt(u*m)),I=o-a,R=xo(Math.sqrt(u/m)),P=Math.abs(I)<5;r||(r=P?In.restSpeed.granular:In.restSpeed.default),i||(i=P?In.restDelta.granular:In.restDelta.default);let N;if(k<1){const w=j_(R,k);N=L=>{const j=Math.exp(-k*R*L);return o-j*((_+k*R*I)/w*Math.sin(w*L)+I*Math.cos(w*L))}}else if(k===1)N=w=>o-Math.exp(-R*w)*(I+(_+R*I)*w);else{const w=R*Math.sqrt(k*k-1);N=L=>{const j=Math.exp(-k*R*L),S=Math.min(w*L,300);return o-j*((_+k*R*I)*Math.sinh(S)+w*I*Math.cosh(S))/w}}const x={calculatedDuration:b&&g||null,next:w=>{const L=N(w);if(b)c.done=w>=g;else{let j=0;k<1&&(j=w===0?vo(_):sR(N,w,L));const S=Math.abs(j)<=r,C=Math.abs(o-L)<=i;c.done=S&&C}return c.value=c.done?o:L,c},toString:()=>{const w=Math.min(Aj(x),Zv),L=_P(j=>x.next(w*j).value,w,30);return w+"ms "+L}};return x}function YC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},b=S=>c!==void 0&&S<c||u!==void 0&&S>u,_=S=>c===void 0?u:u===void 0||Math.abs(c-S)<Math.abs(u-S)?c:u;let k=n*e;const I=g+k,R=o===void 0?I:o(I);R!==I&&(k=R-g);const P=S=>-k*Math.exp(-S/r),N=S=>R+P(S),x=S=>{const C=P(S),M=N(S);v.done=Math.abs(C)<=h,v.value=v.done?R:M};let w,L;const j=S=>{b(v.value)&&(w=S,L=zj({keyframes:[v.value,_(v.value)],velocity:sR(N,S,v.value),damping:i,stiffness:a,restDelta:h,restSpeed:m}))};return j(0),{calculatedDuration:null,next:S=>{let C=!1;return!L&&w===void 0&&(C=!0,x(S),j(S)),w!==void 0&&S>=w?L.next(S-w):(!C&&x(S),v)}}}const BQ=Qp(.42,0,1,1),$Q=Qp(0,0,.58,1),nR=Qp(.42,0,.58,1),rR=t=>Array.isArray(t)&&typeof t[0]!="number",OQ={linear:Xi,easeIn:BQ,easeInOut:nR,easeOut:$Q,circIn:Fj,circInOut:BP,circOut:FP,backIn:Mj,backInOut:DP,backOut:LP,anticipate:MP},XC=t=>{if(Pj(t)){eP(t.length===4);const[e,n,r,i]=t;return Qp(e,n,r,i)}else if(typeof t=="string")return OQ[t];return t};function VQ(t,e,n){const r=[],i=n||tR,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Xi:e;c=Yp(u,c)}r.push(c)}return r}function iR(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(eP(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=VQ(e,r,i),u=c.length,h=m=>{if(o&&m<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const v=Cd(t[g],t[g+1],m);return c[g](v)};return n?m=>h(vl(t[0],t[a-1],m)):h}function aR(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Cd(0,e,r);t.push(hn(n,1,i))}}function oR(t){const e=[0];return aR(e,t.length-1),e}function UQ(t,e){return t.map(n=>n*e)}function zQ(t,e){return t.map(()=>e||nR).splice(0,t.length-1)}function sx({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=rR(r)?r.map(XC):XC(r),a={done:!1,value:e[0]},o=UQ(n&&n.length===e.length?n:oR(e),t),c=iR(o,e,{ease:Array.isArray(i)?i:zQ(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const GQ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>en.update(e,!0),stop:()=>fl(e),now:()=>Tr.isProcessing?Tr.timestamp:bo.now()}},HQ={decay:YC,inertia:YC,tween:sx,keyframes:sx,spring:zj},WQ=t=>t/100;class Gj extends ZP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Vj,c=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new o(a,c,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,c=cy(n)?n:HQ[n]||sx;let u,h;c!==sx&&typeof e[0]!="number"&&(u=Yp(WQ,tR(e[0],e[1])),e=[0,100]);const m=c({...this.options,keyframes:e});a==="mirror"&&(h=c({...this.options,keyframes:[...e].reverse(),velocity:-o})),m.calculatedDuration===null&&(m.calculatedDuration=Aj(m));const{calculatedDuration:g}=m,v=g+i,b=v*(r+1)-i;return{generator:m,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:v,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:h,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:v,repeat:b,repeatType:_,repeatDelay:k,onUpdate:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-v*(this.speed>=0?1:-1),P=this.speed>=0?R<0:R>m;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let N=this.currentTime,x=a;if(b){const S=Math.min(this.currentTime,m)/g;let C=Math.floor(S),M=S%1;!M&&S>=1&&(M=1),M===1&&C--,C=Math.min(C,b+1),!!(C%2)&&(_==="reverse"?(M=1-M,k&&(M-=k/g)):_==="mirror"&&(x=o)),N=vl(0,1,M)*g}const w=P?{done:!1,value:u[0]}:x.next(N);c&&(w.value=c(w.value));let{done:L}=w;!P&&h!==null&&(L=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return j&&i!==void 0&&(w.value=uy(u,this.options,i)),I&&I(w.value),j&&this.finish(),w}get duration(){const{resolved:e}=this;return e?xo(e.calculatedDuration):0}get time(){return xo(this.currentTime)}set time(e){e=vo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=GQ,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const KQ=new Set(["opacity","clipPath","filter","transform"]);function qQ(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeInOut",times:u}={}){const h={[e]:n};u&&(h.offset=u);const m=jP(c,i);return Array.isArray(m)&&(h.easing=m),t.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const QQ=fj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nx=10,YQ=2e4;function XQ(t){return cy(t.type)||t.type==="spring"||!wP(t.ease)}function JQ(t,e){const n=new Gj({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<YQ;)r=n.sample(a),i.push(r.value),a+=nx;return{times:void 0,keyframes:i,duration:a-nx,ease:"linear"}}const lR={anticipate:MP,backInOut:DP,circInOut:BP};function ZQ(t){return t in lR}class JC extends ZP{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new JP(a,(o,c)=>this.onKeyframesResolved(o,c),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:o,motionValue:c,name:u,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&ex()&&ZQ(a)&&(a=lR[a]),XQ(this.options)){const{onComplete:g,onUpdate:v,motionValue:b,element:_,...k}=this.options,I=JQ(e,k);e=I.keyframes,e.length===1&&(e[1]=e[0]),r=I.duration,i=I.times,a=I.ease,o="keyframes"}const m=qQ(c.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return m.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?(MC(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;c.set(uy(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return xo(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return xo(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=vo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Xi;const{animation:r}=n;MC(r,e)}return Xi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:o,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:m,onComplete:g,element:v,...b}=this.options,_=new Gj({...b,keyframes:r,duration:i,type:a,ease:o,times:c,isGenerator:!0}),k=vo(this.time);h.setWithVelocity(_.sample(k-nx).value,_.sample(k).value,nx)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:o,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=n.owner.getProps();return QQ()&&r&&KQ.has(r)&&!u&&!h&&!i&&a!=="mirror"&&o!==0&&c!=="inertia"}}const eY={type:"spring",stiffness:500,damping:25,restSpeed:10},tY=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sY={type:"keyframes",duration:.8},nY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rY=(t,{keyframes:e})=>e.length>2?sY:Rd.has(t)?t.startsWith("scale")?tY(e[1]):eY:nY;function iY({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const Hj=(t,e,n,r={},i,a)=>o=>{const c=Ej(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-vo(u);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};iY(c)||(m={...m,...rY(t,m)}),m.duration&&(m.duration=vo(m.duration)),m.repeatDelay&&(m.repeatDelay=vo(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const v=uy(m.keyframes,c);if(v!==void 0)return en.update(()=>{m.onUpdate(v),m.onComplete()}),new bP([])}return!a&&JC.supports(m)?new JC(m):new Gj(m)};function aY({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Wj(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(o=r);const h=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const v=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),b=u[g];if(b===void 0||m&&aY(m,g))continue;const _={delay:n,...Ej(o||{},g)};let k=!1;if(window.MotionHandoffAnimation){const R=EP(t);if(R){const P=window.MotionHandoffAnimation(R,g,en);P!==null&&(_.startTime=P,k=!0)}}v_(t,g),v.start(Hj(g,v,b,t.shouldReduceMotion&&TP.has(g)?{type:!1}:_,t,k));const I=v.animation;I&&h.push(I)}return c&&Promise.all(h).then(()=>{en.update(()=>{c&&Uq(t,c)})}),h}function S_(t,e,n={}){var r;const i=ly(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(Wj(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:v}=a;return oY(t,e,m+h,g,v,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,m]=u==="beforeChildren"?[o,c]:[c,o];return h().then(()=>m())}else return Promise.all([o(),c(n.delay)])}function oY(t,e,n=0,r=0,i=1,a){const o=[],c=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(t.variantChildren).sort(lY).forEach((h,m)=>{h.notify("AnimationStart",e),o.push(S_(h,e,{...a,delay:n+u(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function lY(t,e){return t.sortNodePosition(e)}function cY(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>S_(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=S_(t,e,n);else{const i=typeof e=="function"?ly(t,e,n.custom):e;r=Promise.all(Wj(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const dY=xj.length;function cR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?cR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<dY;n++){const r=xj[n],i=t.props[r];(xp(i)||i===!1)&&(e[r]=i)}return e}const uY=[...vj].reverse(),hY=vj.length;function mY(t){return e=>Promise.all(e.map(({animation:n,options:r})=>cY(t,n,r)))}function pY(t){let e=mY(t),n=ZC(),r=!0;const i=u=>(h,m)=>{var g;const v=ly(t,m,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(v){const{transition:b,transitionEnd:_,...k}=v;h={...h,...k,..._}}return h};function a(u){e=u(t)}function o(u){const{props:h}=t,m=cR(t.parent)||{},g=[],v=new Set;let b={},_=1/0;for(let I=0;I<hY;I++){const R=uY[I],P=n[R],N=h[R]!==void 0?h[R]:m[R],x=xp(N),w=R===u?P.isActive:null;w===!1&&(_=I);let L=N===m[R]&&N!==h[R]&&x;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),P.protectedKeys={...b},!P.isActive&&w===null||!N&&!P.prevProp||ay(N)||typeof N=="boolean")continue;const j=gY(P.prevProp,N);let S=j||R===u&&P.isActive&&!L&&x||I>_&&x,C=!1;const M=Array.isArray(N)?N:[N];let T=M.reduce(i(R),{});w===!1&&(T={});const{prevResolvedValues:F={}}=P,D={...F,...T},V=W=>{S=!0,v.has(W)&&(C=!0,v.delete(W)),P.needsAnimating[W]=!0;const U=t.getValue(W);U&&(U.liveStyle=!1)};for(const W in D){const U=T[W],J=F[W];if(b.hasOwnProperty(W))continue;let re=!1;g_(U)&&g_(J)?re=!yP(U,J):re=U!==J,re?U!=null?V(W):v.add(W):U!==void 0&&v.has(W)?V(W):P.protectedKeys[W]=!0}P.prevProp=N,P.prevResolvedValues=T,P.isActive&&(b={...b,...T}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(L&&j)||C)&&g.push(...M.map(W=>({animation:W,options:{type:R}})))}if(v.size){const I={};v.forEach(R=>{const P=t.getBaseTarget(R),N=t.getValue(R);N&&(N.liveStyle=!0),I[R]=P!=null?P:null}),g.push({animation:I})}let k=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(g):Promise.resolve()}function c(u,h){var m;if(n[u].isActive===h)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(v=>{var b;return(b=v.animationState)===null||b===void 0?void 0:b.setActive(u,h)}),n[u].isActive=h;const g=o(u);for(const v in n)n[v].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=ZC(),r=!0}}}function gY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yP(e,t):!1}function Gc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZC(){return{animate:Gc(!0),whileInView:Gc(),whileHover:Gc(),whileTap:Gc(),whileDrag:Gc(),whileFocus:Gc(),exit:Gc()}}class Nc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fY extends Nc{constructor(e){super(e),e.animationState||(e.animationState=pY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ay(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let vY=0;class xY extends Nc{constructor(){super(...arguments),this.id=vY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yY={animation:{Feature:fY},exit:{Feature:xY}};function _p(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Xp(t){return{point:{x:t.pageX,y:t.pageY}}}const bY=t=>e=>Rj(e)&&t(e,Xp(e));function zm(t,e,n,r){return _p(t,e,bY(n),r)}const eT=(t,e)=>Math.abs(t-e);function _Y(t,e){const n=eT(t.x,e.x),r=eT(t.y,e.y);return Math.sqrt(n**2+r**2)}class dR{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=fb(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=_Y(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:_}=g,{timestamp:k}=Tr;this.history.push({..._,timestamp:k});const{onStart:I,onMove:R}=this.handlers;v||(I&&I(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=gb(v,this.transformPagePoint),en.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:_,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=fb(g.type==="pointercancel"?this.lastMoveEventInfo:gb(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,I),_&&_(g,I)},!Rj(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Xp(e),c=gb(o,this.transformPagePoint),{point:u}=c,{timestamp:h}=Tr;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,fb(c,this.history)),this.removeListeners=Yp(zm(this.contextWindow,"pointermove",this.handlePointerMove),zm(this.contextWindow,"pointerup",this.handlePointerUp),zm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fl(this.updatePoint)}}function gb(t,e){return e?{point:e(t.point)}:t}function tT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fb({point:t},e){return{point:t,delta:tT(t,uR(e)),offset:tT(t,wY(e)),velocity:jY(e,.1)}}function wY(t){return t[0]}function uR(t){return t[t.length-1]}function jY(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=uR(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>vo(e)));)n--;if(!r)return{x:0,y:0};const a=xo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const hR=1e-4,SY=1-hR,NY=1+hR,mR=.01,kY=0-mR,CY=0+mR;function Zi(t){return t.max-t.min}function TY(t,e,n){return Math.abs(t-e)<=n}function sT(t,e,n,r=.5){t.origin=r,t.originPoint=hn(e.min,e.max,t.origin),t.scale=Zi(n)/Zi(e),t.translate=hn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SY&&t.scale<=NY||isNaN(t.scale))&&(t.scale=1),(t.translate>=kY&&t.translate<=CY||isNaN(t.translate))&&(t.translate=0)}function Gm(t,e,n,r){sT(t.x,e.x,n.x,r?r.originX:void 0),sT(t.y,e.y,n.y,r?r.originY:void 0)}function nT(t,e,n){t.min=n.min+e.min,t.max=t.min+Zi(e)}function IY(t,e,n){nT(t.x,e.x,n.x),nT(t.y,e.y,n.y)}function rT(t,e,n){t.min=e.min-n.min,t.max=t.min+Zi(e)}function Hm(t,e,n){rT(t.x,e.x,n.x),rT(t.y,e.y,n.y)}function EY(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?hn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?hn(n,t,r.max):Math.min(t,n)),t}function iT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function AY(t,{top:e,left:n,bottom:r,right:i}){return{x:iT(t.x,n,i),y:iT(t.y,e,r)}}function aT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function PY(t,e){return{x:aT(t.x,e.x),y:aT(t.y,e.y)}}function RY(t,e){let n=.5;const r=Zi(t),i=Zi(e);return i>r?n=Cd(e.min,e.max-r,t.min):r>i&&(n=Cd(t.min,t.max-i,e.min)),vl(0,1,n)}function LY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const N_=.35;function DY(t=N_){return t===!1?t=0:t===!0&&(t=N_),{x:oT(t,"left","right"),y:oT(t,"top","bottom")}}function oT(t,e,n){return{min:lT(t,e),max:lT(t,n)}}function lT(t,e){return typeof t=="number"?t:t[e]||0}const cT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Du=()=>({x:cT(),y:cT()}),dT=()=>({min:0,max:0}),Cn=()=>({x:dT(),y:dT()});function va(t){return[t("x"),t("y")]}function pR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function MY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function FY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vb(t){return t===void 0||t===1}function k_({scale:t,scaleX:e,scaleY:n}){return!vb(t)||!vb(e)||!vb(n)}function sd(t){return k_(t)||gR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gR(t){return uT(t.x)||uT(t.y)}function uT(t){return t&&t!=="0%"}function rx(t,e,n){const r=t-n,i=e*r;return n+i}function hT(t,e,n,r,i){return i!==void 0&&(t=rx(t,i,r)),rx(t,n,r)+e}function C_(t,e=0,n=1,r,i){t.min=hT(t.min,e,n,r,i),t.max=hT(t.max,e,n,r,i)}function fR(t,{x:e,y:n}){C_(t.x,e.translate,e.scale,e.originPoint),C_(t.y,n.translate,n.scale,n.originPoint)}const mT=.999999999999,pT=1.0000000000001;function BY(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,fR(t,o)),r&&sd(a.latestValues)&&Fu(t,a.latestValues))}e.x<pT&&e.x>mT&&(e.x=1),e.y<pT&&e.y>mT&&(e.y=1)}function Mu(t,e){t.min=t.min+e,t.max=t.max+e}function gT(t,e,n,r,i=.5){const a=hn(t.min,t.max,i);C_(t,e,n,a,r)}function Fu(t,e){gT(t.x,e.x,e.scaleX,e.scale,e.originX),gT(t.y,e.y,e.scaleY,e.scale,e.originY)}function vR(t,e){return pR(FY(t.getBoundingClientRect(),e))}function $Y(t,e,n){const r=vR(t,n),{scroll:i}=e;return i&&(Mu(r.x,i.offset.x),Mu(r.y,i.offset.y)),r}const xR=({current:t})=>t?t.ownerDocument.defaultView:null,OY=new WeakMap;class VY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xp(m).point)},a=(m,g)=>{const{drag:v,dragPropagation:b,onDragStart:_}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fq(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),va(I=>{let R=this.getAxisMotionValue(I).get()||0;if(yo.test(R)){const{projection:P}=this.visualElement;if(P&&P.layout){const N=P.layout.layoutBox[I];N&&(R=Zi(N)*(parseFloat(R)/100))}}this.originPoint[I]=R}),_&&en.postRender(()=>_(m,g)),v_(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},o=(m,g)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:_,onDrag:k}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:I}=g;if(b&&this.currentDirection===null){this.currentDirection=UY(I),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,I),this.updateAxis("y",g.point,I),this.visualElement.render(),k&&k(m,g)},c=(m,g)=>this.stop(m,g),u=()=>va(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new dR(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:xR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&en.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Sf(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=EY(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Ru(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=AY(i.layoutBox,n):this.constraints=!1,this.elastic=DY(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&va(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=LY(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ru(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=$Y(r,i.root,this.visualElement.getTransformPagePoint());let o=PY(i.layout.layoutBox,a);if(n){const c=n(MY(o));this.hasMutatedConstraints=!!c,c&&(o=pR(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=va(m=>{if(!Sf(m,n,this.currentDirection))return;let g=u&&u[m]||{};o&&(g={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,_)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return v_(this.visualElement,e),r.start(Hj(e,r,0,n,this.visualElement,!1))}stopAnimation(){va(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){va(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){va(n=>{const{drag:r}=this.getProps();if(!Sf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-hn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ru(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};va(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=RY({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),va(o=>{if(!Sf(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(hn(u,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;OY.set(this.visualElement,this);const e=this.visualElement.current,n=zm(e,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ru(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),en.read(r);const o=_p(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(va(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=N_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Sf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function UY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class zY extends Nc{constructor(e){super(e),this.removeGroupControls=Xi,this.removeListeners=Xi,this.controls=new VY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xi}unmount(){this.removeGroupControls(),this.removeListeners()}}const fT=t=>(e,n)=>{t&&en.postRender(()=>t(e,n))};class GY extends Nc{constructor(){super(...arguments),this.removePointerDownListener=Xi}onPointerDown(e){this.session=new dR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:fT(e),onStart:fT(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&en.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=zm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const lm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ut.test(t))t=parseFloat(t);else return t;const n=vT(t,e.target.x),r=vT(t,e.target.y);return`${n}% ${r}%`}},HY={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wc.parse(t);if(i.length>5)return r;const a=wc.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const h=hn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}};class WY extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;vq(KY),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),mv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||en.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yR(t){const[e,n]=RK(),r=A.useContext(J4);return s.jsx(WY,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(aP),isPresent:e,safeToRemove:n})}const KY={borderRadius:{...lm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lm,borderTopRightRadius:lm,borderBottomLeftRadius:lm,borderBottomRightRadius:lm,boxShadow:HY};function bR(t,e,n){const r=br(t)?t:ih(t);return r.start(Hj("",r,e,n)),r.animation}function _R(t){return t instanceof SVGElement&&t.tagName!=="svg"}const qY=(t,e)=>t.depth-e.depth;class QY{constructor(){this.children=[],this.isDirty=!1}add(e){Lj(this.children,e),this.isDirty=!0}remove(e){dy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(qY),this.isDirty=!1,this.children.forEach(e)}}function YY(t,e){const n=bo.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(fl(r),t(a-e))};return en.read(r,!0),()=>fl(r)}const wR=["TopLeft","TopRight","BottomLeft","BottomRight"],XY=wR.length,xT=t=>typeof t=="string"?parseFloat(t):t,yT=t=>typeof t=="number"||Ut.test(t);function JY(t,e,n,r,i,a){i?(t.opacity=hn(0,n.opacity!==void 0?n.opacity:1,ZY(r)),t.opacityExit=hn(e.opacity!==void 0?e.opacity:1,0,eX(r))):a&&(t.opacity=hn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<XY;o++){const c=`border${wR[o]}Radius`;let u=bT(e,c),h=bT(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||yT(u)===yT(h)?(t[c]=Math.max(hn(xT(u),xT(h),r),0),(yo.test(h)||yo.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=hn(e.rotate||0,n.rotate||0,r))}function bT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZY=jR(0,.5,FP),eX=jR(.5,.95,Xi);function jR(t,e,n){return r=>r<t?0:r>e?1:n(Cd(t,e,r))}function _T(t,e){t.min=e.min,t.max=e.max}function ga(t,e){_T(t.x,e.x),_T(t.y,e.y)}function wT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jT(t,e,n,r,i){return t-=e,t=rx(t,1/n,r),i!==void 0&&(t=rx(t,1/i,r)),t}function tX(t,e=0,n=1,r=.5,i,a=t,o=t){if(yo.test(e)&&(e=parseFloat(e),e=hn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=hn(a.min,a.max,r);t===a&&(c-=e),t.min=jT(t.min,e,n,c,i),t.max=jT(t.max,e,n,c,i)}function ST(t,e,[n,r,i],a,o){tX(t,e[n],e[r],e[i],e.scale,a,o)}const sX=["x","scaleX","originX"],nX=["y","scaleY","originY"];function NT(t,e,n,r){ST(t.x,e,sX,n?n.x:void 0,r?r.x:void 0),ST(t.y,e,nX,n?n.y:void 0,r?r.y:void 0)}function kT(t){return t.translate===0&&t.scale===1}function SR(t){return kT(t.x)&&kT(t.y)}function CT(t,e){return t.min===e.min&&t.max===e.max}function rX(t,e){return CT(t.x,e.x)&&CT(t.y,e.y)}function TT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function NR(t,e){return TT(t.x,e.x)&&TT(t.y,e.y)}function IT(t){return Zi(t.x)/Zi(t.y)}function ET(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class iX{constructor(){this.members=[]}add(e){Lj(this.members,e),e.scheduleRender()}remove(e){if(dy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aX(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:v,skewX:b,skewY:_}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const nd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Tm=typeof window!="undefined"&&window.MotionDebug!==void 0,xb=["","X","Y","Z"],oX={visibility:"hidden"},AT=1e3;let lX=0;function yb(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function kR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=EP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",en,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&kR(r)}function CR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e==null?void 0:e()){this.id=lX++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Tm&&(nd.totalNodes=nd.resolvedTargetDeltas=nd.recalculatedProjection=0),this.nodes.forEach(uX),this.nodes.forEach(fX),this.nodes.forEach(vX),this.nodes.forEach(hX),Tm&&window.MotionDebug.record(nd)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new QY)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Dj),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_R(o),this.instance=o;const{layoutId:u,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=YY(v,250),mv.hasAnimatedSinceResize&&(mv.hasAnimatedSinceResize=!1,this.nodes.forEach(RT))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||wX,{onLayoutAnimationStart:I,onLayoutAnimationComplete:R}=m.getProps(),P=!this.targetLayout||!NR(this.targetLayout,_)||b,N=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,N);const x={...Ej(k,"layout"),onPlay:I,onComplete:R};(m.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else v||RT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xX),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(PT);return}this.isUpdating||this.nodes.forEach(pX),this.isUpdating=!1,this.nodes.forEach(gX),this.nodes.forEach(cX),this.nodes.forEach(dX),this.clearAllSnapshots();const c=bo.now();Tr.delta=vl(0,1e3/60,c-Tr.timestamp),Tr.timestamp=c,Tr.isProcessing=!0,cb.update.process(Tr),cb.preRender.process(Tr),cb.render.process(Tr),Tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mX),this.sharedNodes.forEach(yX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,en.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){en.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!SR(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&(c||sd(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),jX(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return Cn();const u=c.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(SX))){const{scroll:m}=this.root;m&&(Mu(u.x,m.offset.x),Mu(u.y,m.offset.y))}return u}removeElementScroll(o){var c;const u=Cn();if(ga(u,o),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&ga(u,o),Mu(u.x,g.offset.x),Mu(u.y,g.offset.y))}return u}applyTransform(o,c=!1){const u=Cn();ga(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Fu(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),sd(m.latestValues)&&Fu(u,m.latestValues)}return sd(this.latestValues)&&Fu(u,this.latestValues),u}removeTransform(o){const c=Cn();ga(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!sd(h.latestValues))continue;k_(h.latestValues)&&h.updateSnapshot();const m=Cn(),g=h.measurePageBox();ga(m,g),NT(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return sd(this.latestValues)&&NT(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Tr.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Hm(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ga(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ga(this.target,this.layout.layoutBox),fR(this.target,this.targetDelta)):ga(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Hm(this.relativeTargetOrigin,this.target,b.target),ga(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Tm&&nd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||k_(this.parent.latestValues)||gR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Tr.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;ga(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;BY(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Cn());const{target:_}=c;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wT(this.prevProjectionDelta.x,this.projectionDelta.x),wT(this.prevProjectionDelta.y,this.projectionDelta.y)),Gm(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!ET(this.projectionDelta.x,this.prevProjectionDelta.x)||!ET(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Tm&&nd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Du(),this.projectionDelta=Du(),this.projectionDeltaWithTransform=Du()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=Du();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Cn(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,k=b!==_,I=this.getStack(),R=!I||I.members.length<=1,P=!!(k&&!R&&this.options.crossfade===!0&&!this.path.some(_X));this.animationProgress=0;let N;this.mixTargetDelta=x=>{const w=x/1e3;LT(g.x,o.x,w),LT(g.y,o.y,w),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hm(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bX(this.relativeTarget,this.relativeTargetOrigin,v,w),N&&rX(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Cn()),ga(N,this.relativeTarget)),k&&(this.animationValues=m,JY(m,h,this.latestValues,w,P,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=en.update(()=>{mv.hasAnimatedSinceResize=!0,this.currentAnimation=bR(0,AT,{...o,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:m}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&TR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Cn();const g=Zi(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const v=Zi(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+v}ga(c,u),Fu(c,m),Gm(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iX),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:c}=this.options;return c?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:c}=this.options;return c?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&yb("z",o,h,this.animationValues);for(let m=0;m<xb.length;m++)yb(`rotate${xb[m]}`,o,h,this.animationValues),yb(`skew${xb[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}getProjectionStyles(o){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oX;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=uv(o==null?void 0:o.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=uv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!sd(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=aX(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:b,y:_}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${_.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(c=v.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const k in Jv){if(v[k]===void 0)continue;const{correct:I,applyTo:R}=Jv[k],P=h.transform==="none"?v[k]:I(v[k],g);if(R){const N=R.length;for(let x=0;x<N;x++)h[R[x]]=P}else h[k]=P}return this.options.layoutId&&(h.pointerEvents=g===this?uv(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(PT),this.root.sharedNodes.clear()}}}function cX(t){t.updateLayout()}function dX(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=n.source!==t.layout.source;a==="size"?va(g=>{const v=o?n.measuredBox[g]:n.layoutBox[g],b=Zi(v);v.min=r[g].min,v.max=v.min+b}):TR(a,n.layoutBox,r)&&va(g=>{const v=o?n.measuredBox[g]:n.layoutBox[g],b=Zi(r[g]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const c=Du();Gm(c,r,n.layoutBox);const u=Du();o?Gm(u,t.applyTransform(i,!0),n.measuredBox):Gm(u,r,n.layoutBox);const h=!SR(c);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:b}=g;if(v&&b){const _=Cn();Hm(_,n.layoutBox,v.layoutBox);const k=Cn();Hm(k,r,b.layoutBox),NR(_,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function uX(t){Tm&&nd.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hX(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mX(t){t.clearSnapshot()}function PT(t){t.clearMeasurements()}function pX(t){t.isLayoutDirty=!1}function gX(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function RT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fX(t){t.resolveTargetDelta()}function vX(t){t.calcProjection()}function xX(t){t.resetSkewAndRotation()}function yX(t){t.removeLeadSnapshot()}function LT(t,e,n){t.translate=hn(e.translate,0,n),t.scale=hn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function DT(t,e,n,r){t.min=hn(e.min,n.min,r),t.max=hn(e.max,n.max,r)}function bX(t,e,n,r){DT(t.x,e.x,n.x,r),DT(t.y,e.y,n.y,r)}function _X(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const wX={duration:.45,ease:[.4,0,.1,1]},MT=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FT=MT("applewebkit/")&&!MT("chrome/")?Math.round:Xi;function BT(t){t.min=FT(t.min),t.max=FT(t.max)}function jX(t){BT(t.x),BT(t.y)}function TR(t,e,n){return t==="position"||t==="preserve-aspect"&&!TY(IT(e),IT(n),.2)}function SX(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const NX=CR({attachResizeListener:(t,e)=>_p(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bb={current:void 0},IR=CR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bb.current){const t=new NX({});t.mount(window),t.setOptions({layoutScroll:!0}),bb.current=t}return bb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kX={pan:{Feature:GY},drag:{Feature:zY,ProjectionNode:IR,MeasureLayout:yR}};function $T(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&en.postRender(()=>a(e,Xp(e)))}class CX extends Nc{mount(){const{current:e}=this.node;e&&(this.unmount=Pq(e,n=>($T(this.node,n,"Start"),r=>$T(this.node,r,"End"))))}unmount(){}}class TX extends Nc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yp(_p(this.node.current,"focus",()=>this.onFocus()),_p(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OT(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&en.postRender(()=>a(e,Xp(e)))}class IX extends Nc{mount(){const{current:e}=this.node;e&&(this.unmount=Mq(e,n=>(OT(this.node,n,"Start"),(r,{success:i})=>OT(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const T_=new WeakMap,_b=new WeakMap,EX=t=>{const e=T_.get(t.target);e&&e(t)},AX=t=>{t.forEach(EX)};function PX({root:t,...e}){const n=t||document;_b.has(n)||_b.set(n,{});const r=_b.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(AX,{root:t,...e})),r[i]}function RX(t,e,n){const r=PX(e);return T_.set(t,n),r.observe(t),()=>{T_.delete(t),r.unobserve(t)}}const LX={some:0,all:1};class DX extends Nc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:LX[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(u)};return RX(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MX(e,n))&&this.startObserver()}unmount(){}}function MX({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const FX={inView:{Feature:DX},tap:{Feature:IX},focus:{Feature:TX},hover:{Feature:CX}},BX={layout:{ProjectionNode:IR,MeasureLayout:yR}},ix={current:null},Kj={current:!1};function ER(){if(Kj.current=!0,!!gj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ix.current=t.matches;t.addListener(e),e()}else ix.current=!1}const $X=[...XP,Hr,wc],OX=t=>$X.find(YP(t)),oh=new WeakMap;function VX(t,e,n){for(const r in e){const i=e[r],a=n[r];if(br(i))t.addValue(r,i);else if(br(a))t.addValue(r,ih(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ih(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const VT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AR{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=bo.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,en.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:m}=o;this.onUpdate=m,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=oy(n),this.isVariantNode=rP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in v){const _=v[b];u[b]!==void 0&&br(_)&&_.set(u[b],!1)}}mount(e){this.current=e,oh.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Kj.current||ER(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ix.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oh.delete(this.current),this.projection&&this.projection.unmount(),fl(this.notifyUpdate),fl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Rd.has(e),i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&en.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in rh){const n=rh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<VT.length;r++){const i=VT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=VX(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ih(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(qP(i)||$P(i))?i=parseFloat(i):!OX(i)&&wc.test(n)&&(i=HP(e,n)),this.setBaseTarget(e,br(i)?i.get():i)),br(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=wj(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!br(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Dj),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class PR extends AR{constructor(){super(...arguments),this.KeyframeResolver=JP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;br(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function UX(t){return window.getComputedStyle(t)}class RR extends PR{constructor(){super(...arguments),this.type="html",this.renderInstance=mP}readValueFromInstance(e,n){if(Rd.has(n)){const r=Oj(n);return r&&r.default||0}else{const r=UX(e),i=(dP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vR(e,n)}build(e,n,r){Nj(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ij(e,n,r)}}class LR extends PR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rd.has(n)){const r=Oj(n);return r&&r.default||0}return n=pP.has(n)?n:yj(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return vP(e,n,r)}build(e,n,r){kj(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){gP(e,n,r,i)}mount(e){this.isSVGTag=Tj(e.tagName),super.mount(e)}}const zX=(t,e)=>_j(t)?new LR(e):new RR(e,{allowProjection:t!==A.Fragment}),GX=kq({...yY,...FX,...kX,...BX},zX),DR=VK(GX);function Im(t){const e=hj(()=>ih(t)),{isStatic:n}=A.useContext(pj);if(n){const[,r]=A.useState(t);A.useEffect(()=>e.on("change",r),[])}return e}function MR(t,e){const n=Im(e()),r=()=>n.set(e());return r(),Z4(()=>{const i=()=>en.preRender(r,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),fl(r)}}),n}const HX=t=>t&&typeof t=="object"&&t.mix,WX=t=>HX(t)?t.mix:void 0;function KX(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],o=t[3+n],c=iR(i,a,{mixer:WX(a[0]),...o});return e?c(r):c}function qX(t){Vm.current=[],t();const e=MR(Vm.current,t);return Vm.current=void 0,e}function Nf(t,e,n,r){if(typeof t=="function")return qX(t);const i=typeof e=="function"?e:KX(e,n,r);return Array.isArray(t)?UT(t,i):UT([t],([a])=>i(a))}function UT(t,e){const n=hj(()=>[]);return MR(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function FR(){!Kj.current&&ER();const[t]=A.useState(ix.current);return t}const QX=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function BR(t,e){return rR(t)?t[QX(0,t.length,e)]:t}function qj(t){return typeof t=="object"&&!Array.isArray(t)}function $R(t,e,n,r){return typeof t=="string"&&qj(e)?NP(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function YX(t,e,n){return t*(e+1)}function zT(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}function XX(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(dy(t,i),r--)}}function JX(t,e,n,r,i,a){XX(t,i,a);for(let o=0;o<e.length;o++)t.push({value:e[o],at:hn(i,a,r[o]),easing:BR(n,o)})}function ZX(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function eJ(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const tJ="easeInOut";function sJ(t,{defaultTransition:e={},...n}={},r,i){const a=e.duration||.3,o=new Map,c=new Map,u={},h=new Map;let m=0,g=0,v=0;for(let b=0;b<t.length;b++){const _=t[b];if(typeof _=="string"){h.set(_,g);continue}else if(!Array.isArray(_)){h.set(_.name,zT(g,_.at,m,h));continue}let[k,I,R={}]=_;R.at!==void 0&&(g=zT(g,R.at,m,h));let P=0;const N=(x,w,L,j=0,S=0)=>{const C=nJ(x),{delay:M=0,times:T=oR(C),type:F="keyframes",repeat:D,repeatType:V,repeatDelay:z=0,...K}=w;let{ease:W=e.ease||"easeOut",duration:U}=w;const J=typeof M=="function"?M(j,S):M,re=C.length,G=cy(F)?F:i==null?void 0:i[F];if(re<=2&&G){let ce=100;if(re===2&&aJ(C)){const ee=C[1]-C[0];ce=Math.abs(ee)}const _e={...K};U!==void 0&&(_e.duration=vo(U));const Ae=Iq(_e,ce,G);W=Ae.ease,U=Ae.duration}U!=null||(U=a);const X=g+J;T.length===1&&T[0]===0&&(T[1]=1);const Y=T.length-C.length;if(Y>0&&aR(T,Y),C.length===1&&C.unshift(null),D){U=YX(U,D);const ce=[...C],_e=[...T];W=Array.isArray(W)?[...W]:[W];const Ae=[...W];for(let ee=0;ee<D;ee++){C.push(...ce);for(let le=0;le<ce.length;le++)T.push(_e[le]+(ee+1)),W.push(le===0?"linear":BR(Ae,le-1))}ZX(T,D)}const se=X+U;JX(L,C,W,T,X,se),P=Math.max(J+U,P),v=Math.max(se,v)};if(br(k)){const x=GT(k,c);N(I,R,HT("default",x))}else{const x=$R(k,I,r,u),w=x.length;for(let L=0;L<w;L++){I=I,R=R;const j=x[L],S=GT(j,c);for(const C in I)N(I[C],rJ(R,C),HT(C,S),L,w)}}m=g,g+=P}return c.forEach((b,_)=>{for(const k in b){const I=b[k];I.sort(eJ);const R=[],P=[],N=[];for(let w=0;w<I.length;w++){const{at:L,value:j,easing:S}=I[w];R.push(j),P.push(Cd(0,v,L)),N.push(S||"easeOut")}P[0]!==0&&(P.unshift(0),R.unshift(R[0]),N.unshift(tJ)),P[P.length-1]!==1&&(P.push(1),R.push(null)),o.has(_)||o.set(_,{keyframes:{},transition:{}});const x=o.get(_);x.keyframes[k]=R,x.transition[k]={...e,duration:v,ease:N,times:P,...n}}}),o}function GT(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function HT(t,e){return e[t]||(e[t]=[]),e[t]}function nJ(t){return Array.isArray(t)?t:[t]}function rJ(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const iJ=t=>typeof t=="number",aJ=t=>t.every(iJ);function oJ(t,e){return t in e}class lJ extends AR{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(oJ(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return Cn()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function cJ(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=_R(t)?new LR(e):new RR(e);n.mount(t),oh.set(t,n)}function dJ(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new lJ(e);n.mount(t),oh.set(t,n)}function uJ(t,e){return br(t)||typeof t=="number"||typeof t=="string"&&!qj(e)}function OR(t,e,n,r){const i=[];if(uJ(t,e))i.push(bR(t,qj(e)&&e.default||e,n&&(n.default||n)));else{const a=$R(t,e,r),o=a.length;for(let c=0;c<o;c++){const u=a[c],h=u instanceof Element?cJ:dJ;oh.has(u)||h(u);const m=oh.get(u),g={...n};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(c,o)),i.push(...Wj(m,{...e,transition:g},{}))}}return i}function hJ(t,e,n){const r=[];return sJ(t,e,n,{spring:zj}).forEach(({keyframes:a,transition:o},c)=>{r.push(...OR(c,a,o))}),r}function mJ(t){return Array.isArray(t)&&t.some(Array.isArray)}function pJ(t){function e(n,r,i){let a=[];return mJ(n)?a=hJ(n,r,t):a=OR(n,r,i,t),new bP(a)}return e}const kf=pJ(),rl={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function gJ(){return s.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+rl.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function fJ(){return s.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[s.jsx("stop",{offset:"0%",stopColor:rl.icon,stopOpacity:"0.42"}),s.jsx("stop",{offset:"70%",stopColor:rl.icon,stopOpacity:"0"})]}),s.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[s.jsx("stop",{offset:"0%",stopColor:rl.icon,stopOpacity:"0.20"}),s.jsx("stop",{offset:"70%",stopColor:rl.icon,stopOpacity:"0"})]})]}),s.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),s.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function WT({rounded:t="rounded-3xl",padded:e=!0,children:n}){const r=FR();return s.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:rl.border,background:"var(--nav, "+rl.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[s.jsx(gJ,{}),s.jsx(DR.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),s.jsx(fJ,{}),s.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:n})]})}const wb={borderColor:"#2B4C73",background:"#1A2F4A"},Cf={borderColor:"#2B4C73",background:"#152A42"};function os({hex:t,title:e,subtitle:n,actions:r,subheader:i,left:a,right:o,children:c,rounded:u="rounded-3xl",padded:h=!0,centerFramed:m=!1,leftWidth:g=0,rightWidth:v=0,stickyRails:b=!0,leftFullHeight:_=!1,mode:k="card",outerPadding:I="px-4 py-3",leftPlacement:R="inside",stickyTopbar:P=!0,stickySubheader:N=!0,shellViewportOffset:x="var(--app-topbar-h,72px)",topbarHeight:w=56}){const L={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof v=="number"?`${v}px`:v},j=s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:wb,children:t}),(e||n||r)&&s.jsxs("div",{className:[P?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:wb,children:[s.jsxs("div",{className:"min-w-0",children:[e&&s.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),n&&s.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:n})]}),r?s.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&s.jsx("div",{className:[N?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...N?{top:P?`${w}px`:0}:{},...wb},children:i})]}),S=k==="card"?({children:M})=>s.jsx(WT,{rounded:u,padded:h,children:M}):({children:M})=>s.jsx("div",{className:`w-full ${I}`,children:M}),C=s.jsx("div",{className:"relative min-h-0 h-full",style:L,children:s.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Cf,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:_?"stretch":"start",height:_?"100%":"fit-content",minHeight:_?0:void 0},children:a}):g?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"}),m?s.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:Cf,children:c}):s.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:c}),o?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Cf,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:o}):v?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"})]})});return R==="bleed"&&k==="card"?s.jsx("div",{className:`w-full ${I}`,children:s.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[j,s.jsx("div",{className:"flex-1 min-h-0",style:L,children:s.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Cf,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:_?"stretch":"start",height:_?"100%":"fit-content",minHeight:_?0:void 0},children:a}):g?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"}),s.jsx(WT,{rounded:u,padded:h,children:s.jsx("div",{className:"flex-1 min-h-0 h-full",children:C})})]})})]})}):s.jsx(S,{children:s.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${x})`},children:[j,s.jsx("div",{className:"flex-1 min-h-0",children:C})]})})}const vJ="_card_z6isy_1",xJ="_header_z6isy_19",yJ="_headerGroup_z6isy_33",bJ="_headerText_z6isy_47",_J="_headerIcon_z6isy_61",wJ="_title_z6isy_81",jJ="_subtitle_z6isy_93",SJ="_previewWrap_z6isy_103",NJ="_previewSurface_z6isy_115",kJ="_previewLink_z6isy_134",CJ="_previewStatic_z6isy_142",TJ="_previewImage_z6isy_168",IJ="_previewImageIcon_z6isy_188",EJ="_previewImageCover_z6isy_196",AJ="_guidehubScale_z6isy_206",si={card:vJ,header:xJ,headerGroup:yJ,headerText:bJ,headerIcon:_J,title:wJ,subtitle:jJ,previewWrap:SJ,previewSurface:NJ,previewLink:kJ,previewStatic:CJ,previewImage:TJ,previewImageIcon:IJ,previewImageCover:EJ,guidehubScale:AJ},jb=({href:t,title:e,subtitle:n,headerIconSrc:r,headerIconAlt:i="",previewImageSrc:a,previewAlt:o,variant:c="icon",previewHeightOverride:u,className:h,i18nScope:m,titleI18nKey:g,subtitleI18nKey:v,previewAltI18nKey:b,linkAriaLabel:_,linkAriaI18nKey:k})=>{const I=[si.card,h].filter(Boolean).join(" "),R=typeof t=="string"&&t.trim()?t:null,P=R?/^https?:\/\//i.test(R):!1,N=_||e,x=!i,w=u?{"--featured-preview-height-override":u}:void 0,L=[si.previewImage,c==="cover"?si.previewImageCover:si.previewImageIcon].filter(Boolean).join(" "),j=[si.previewSurface,R?si.previewLink:si.previewStatic].filter(Boolean).join(" "),S=R?"true":"false";return s.jsxs("section",{className:I,"data-i18n-scope":m,style:w,children:[s.jsx("div",{className:si.previewWrap,children:R?P?s.jsx("a",{href:R,className:j,"aria-label":N,"data-i18n-aria-label":k,"data-clickable":S,target:"_blank",rel:"noopener noreferrer",children:s.jsx("img",{src:a,alt:o,"data-i18n":b,className:L,loading:"eager",decoding:"async"})}):s.jsx(Gs,{to:R,className:j,"aria-label":N,"data-i18n-aria-label":k,"data-clickable":S,children:s.jsx("img",{src:a,alt:o,"data-i18n":b,className:L,loading:"eager",decoding:"async"})}):s.jsx("div",{className:j,"data-clickable":S,children:s.jsx("img",{src:a,alt:o,"data-i18n":b,className:L,loading:"eager",decoding:"async"})})}),s.jsx("header",{className:si.header,children:s.jsxs("div",{className:si.headerGroup,children:[r&&s.jsx("img",{src:r,alt:i,className:si.headerIcon,"aria-hidden":x}),s.jsxs("div",{className:si.headerText,children:[s.jsx("span",{className:si.title,"data-i18n":g,children:e}),n&&s.jsx("span",{className:si.subtitle,"data-i18n":v,children:n})]})]})})]})},PJ="_row_anakb_1",RJ="_viewport_anakb_13",LJ="_track_anakb_21",DJ="_navBtn_anakb_37",Hc={row:PJ,viewport:RJ,track:LJ,navBtn:DJ},MJ=({children:t,className:e})=>{const n=A.useRef(null),r=A.useRef(null),[i,a]=A.useState(0),[o,c]=A.useState(0),[u,h]=A.useState(0),m=q.Children.count(t);A.useEffect(()=>{const _=()=>{const I=n.current,R=r.current;if(!I||!R)return;const P=R.children;if(!P.length){c(0),h(0),a(0);return}const x=P[0].getBoundingClientRect().width,w=window.getComputedStyle(R),L=parseFloat(w.columnGap||w.gap||"0"),j=Number.isNaN(L)?0:L,S=x+j,C=I.getBoundingClientRect().width,M=S>0?Math.max(1,Math.floor((C+j)/S)):1,T=Math.max(0,P.length-M);h(S),c(T),a(F=>Math.min(F,T))};_();let k=null;return typeof ResizeObserver!="undefined"&&(k=new ResizeObserver(()=>_()),n.current&&k.observe(n.current),r.current&&k.observe(r.current)),window.addEventListener("resize",_),()=>{k==null||k.disconnect(),window.removeEventListener("resize",_)}},[m]);const g=i>0,v=i<o,b=u*i*-1;return s.jsxs("div",{className:[Hc.row,e].filter(Boolean).join(" "),children:[s.jsx("button",{className:`${Hc.navBtn} ${Hc.navPrev}`,onClick:()=>a(_=>Math.max(0,_-1)),disabled:!g,"aria-label":"Previous",children:"<"}),s.jsx("div",{className:Hc.viewport,ref:n,children:s.jsx("div",{className:Hc.track,ref:r,style:{transform:`translateX(${b}px)`},children:t})}),s.jsx("button",{className:`${Hc.navBtn} ${Hc.navNext}`,onClick:()=>a(_=>Math.min(o,_+1)),disabled:!v,"aria-label":"Next",children:">"})]})},FJ="_row_18xz2_3",BJ="_rowSplit_18xz2_17",$J="_rowFeatured_18xz2_19",OJ="_discordBannerWrap_18xz2_31",VJ="_splitMain_18xz2_67",UJ="_splitSide_18xz2_69",zJ="_card_18xz2_193",GJ="_discordBanner_18xz2_31",HJ="_discordBannerText_18xz2_271",WJ="_discordBannerLogo_18xz2_283",KJ="_discordBannerTitle_18xz2_293",qJ="_discordBannerSubtitle_18xz2_307",QJ="_header_18xz2_373",YJ="_headerGroup_18xz2_385",XJ="_title_18xz2_397",JJ="_subtitle_18xz2_399",ZJ="_empty_18xz2_401",eZ="_errorNote_18xz2_403",tZ="_linkBtn_18xz2_405",sZ="_primaryBtn_18xz2_405",nZ="_navBtn_18xz2_405",rZ="_closeBtn_18xz2_405",iZ="_actionsRight_18xz2_421",aZ="_newsList_18xz2_467",oZ="_newsCard_18xz2_471",lZ="_newsCardWithImage_18xz2_487",cZ="_newsBody_18xz2_495",dZ="_newsActions_18xz2_497",uZ="_newsMeta_18xz2_499",hZ="_newsAuthor_18xz2_501",mZ="_newsTime_18xz2_503",pZ="_newsText_18xz2_505",gZ="_newsImage_18xz2_523",fZ="_newsSkeleton_18xz2_527",vZ="_carouselCtrls_18xz2_565",xZ="_carousel_18xz2_565",yZ="_slide_18xz2_573",bZ="_slideActive_18xz2_575",_Z="_slideInactive_18xz2_577",wZ="_slideThumb_18xz2_579",jZ="_slideFallback_18xz2_581",SZ="_slideCaption_18xz2_583",NZ="_liveCard_18xz2_589",kZ="_liveAvatar_18xz2_591",CZ="_liveAvatarFallback_18xz2_593",TZ="_liveName_18xz2_595",IZ="_liveMeta_18xz2_597",EZ="_liveBadge_18xz2_599",AZ="_liveViewers_18xz2_601",PZ="_modalOverlay_18xz2_607",RZ="_modal_18xz2_607",LZ="_modalHeader_18xz2_611",DZ="_modalTitle_18xz2_613",MZ="_modalFilters_18xz2_617",FZ="_formRow_18xz2_619",BZ="_formRowCheckbox_18xz2_621",$Z="_select_18xz2_623",OZ="_input_18xz2_623",VZ="_tableWrap_18xz2_625",UZ="_table_18xz2_625",Xe={row:FJ,rowSplit:BJ,rowFeatured:$J,discordBannerWrap:OJ,splitMain:VJ,splitSide:UJ,card:zJ,discordBanner:GJ,discordBannerText:HJ,discordBannerLogo:WJ,discordBannerTitle:KJ,discordBannerSubtitle:qJ,header:QJ,headerGroup:YJ,title:XJ,subtitle:JJ,empty:ZJ,errorNote:eZ,linkBtn:tZ,primaryBtn:sZ,navBtn:nZ,closeBtn:rZ,actionsRight:iZ,newsList:aZ,newsCard:oZ,newsCardWithImage:lZ,newsBody:cZ,newsActions:dZ,newsMeta:uZ,newsAuthor:hZ,newsTime:mZ,newsText:pZ,newsImage:gZ,newsSkeleton:fZ,carouselCtrls:vZ,carousel:xZ,slide:yZ,slideActive:bZ,slideInactive:_Z,slideThumb:wZ,slideFallback:jZ,slideCaption:SZ,liveCard:NZ,liveAvatar:kZ,liveAvatarFallback:CZ,liveName:TZ,liveMeta:IZ,liveBadge:EZ,liveViewers:AZ,modalOverlay:PZ,modal:RZ,modalHeader:LZ,modalTitle:DZ,modalFilters:MZ,formRow:FZ,formRowCheckbox:BZ,select:$Z,input:OZ,tableWrap:VZ,table:UZ},zZ="https://firestore.googleapis.com/v1/projects",GZ="stats_public/news_latestByChannel",HZ=()=>`${zZ}/sfdatahub-staging/databases/(default)/documents/${GZ}?key=AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA`,Jo=t=>t&&typeof t.stringValue=="string"?t.stringValue:null,WZ=t=>!t||t.nullValue!==void 0?null:typeof t.stringValue=="string"?t.stringValue:null,KT=t=>{if(!t)return null;if(typeof t.integerValue=="string"){const e=Number(t.integerValue);return Number.isFinite(e)?e:null}if(typeof t.doubleValue=="number")return Number.isFinite(t.doubleValue)?t.doubleValue:null;if(typeof t.timestampValue=="string"){const e=Date.parse(t.timestampValue);return Number.isFinite(e)?e:null}if(typeof t.stringValue=="string"){const e=Number(t.stringValue);return Number.isFinite(e)?e:null}return null},qT=t=>!t||!t.mapValue||!t.mapValue.fields?null:t.mapValue.fields,KZ=t=>{var n;const e=(n=t==null?void 0:t.arrayValue)==null?void 0:n.values;return Array.isArray(e)?e:[]},qZ=t=>{if(!t)return null;const e=Jo(t.id),n=Jo(t.channelId),r=Jo(t.author),i=Jo(t.timestamp),a=Jo(t.contentText),o=WZ(t.imageUrl),c=Jo(t.jumpUrl);return!e||!n||!r||!i||!a||!c?null:{id:e,channelId:n,author:r,timestamp:i,contentText:a,imageUrl:o,jumpUrl:c}},QZ=t=>{const e=qT(t);if(!e)return null;const n=Jo(e.channelId),r=Jo(e.label);if(!n||!r)return null;const i=qT(e.item);return{channelId:n,label:r,item:i?qZ(i):null}},YZ=t=>t.map(e=>{var n,r,i,a;return`${e.channelId}|${(r=(n=e.item)==null?void 0:n.id)!=null?r:"-"}|${(a=(i=e.item)==null?void 0:i.timestamp)!=null?a:"-"}`}).join(`
`),XZ=t=>{var c;const e=t==null?void 0:t.fields;if(!e||typeof e!="object")return null;const n=KZ(e.items),r=[];for(const u of n){const h=QZ(u);h&&r.push(h)}const i=KT(e.updatedAt),a=KT(e.nextUpdateAt),o=(c=Jo(e.hash))!=null?c:YZ(r);return o?{updatedAt:i,nextUpdateAt:a,hash:o,items:r}:null};async function JZ(t){const e=HZ();if(!e)return null;const n=await fetch(e,{cache:"no-store",signal:t});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json();return XZ(r)}const Qj="/assets/logo_guidehub-c4zKGdF-.png",ZZ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20199'%20role='img'%20aria-label='Discord%20Logo'%3e%3cpath%20fill='%23EAF7FF'%20d='M216.8%2016.6C200.7%209.1%20183.4%203.7%20165.3%200c-2.3%204.2-4.9%209.9-6.7%2014.4-19.7-3-39.3-3-58.6%200-1.8-4.5-4.5-10.2-6.8-14.4-18.8%203.2-36.7%208.8-53.4%2016.6C6.1%2067-.6%20116.2%204%20164.8c22.3%2016.3%2043.9%2026.2%2065.1%2032.7%205.2-7.1%209.8-14.7%2013.5-22.7-7.4-2.8-14.5-6.2-21.3-10.2%201.8-1.3%203.5-2.7%205.2-4.1%2041%2019.2%2085.3%2019.2%20125.8%200%201.7%201.4%203.4%202.8%205.2%204.1-6.8%204-13.9%207.4-21.4%2010.2%203.7%208%208.3%2015.6%2013.5%2022.7%2021.2-6.5%2042.8-16.4%2065.1-32.7%205.5-56.4-9.4-105.1-38.1-148.2zM85.2%20127.3c-12.3%200-22.3-11.3-22.3-25.1%200-13.8%209.8-25.1%2022.3-25.1%2012.5%200%2022.5%2011.3%2022.3%2025.1%200%2013.8-9.8%2025.1-22.3%2025.1zm85.6%200c-12.3%200-22.3-11.3-22.3-25.1%200-13.8%209.8-25.1%2022.3-25.1%2012.5%200%2022.5%2011.3%2022.3%2025.1%200%2013.8-9.8%2025.1-22.3%2025.1z'/%3e%3c/svg%3e";function VR(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function eee(t){const e=t.filter(Boolean).join(" ");return VR(e)}const tee={woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",amruneoverview:"1YlAG-4hNVBfXHTBvcMIWXs-h-_8Yz7MS",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",stinkingrich:"1wtKrBGPIhb-c381aRwdFdItZ4bjcQuFs",runemaster:"13jn9YGSj6jwAHAyFgZci7xItANOMLEvb",runeemporer:"1NoV1yiiq3aa-jtUL0F8j0MUG--5sVkDW",capitalist:"1i7276mR37xH9ywdGAf5QqAZmy9ecbeom",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",calendarrewards:"1K9bm0OUtW0_QUg5i9q40N0slV6kg_iTd",calendarskip:"1jOgaf09diVUyCdXWdFoc-kXj4mUHejo7",elementaladvantages:"1wuV_5LJCMKVWA9FkCVILcQ_xF6GS9NM3",petsp2w:"1Smy-lLOCHFd_n4qqhy_mQh1cQEfIfYfW",petsf2p:"1_LfcLaZ9Yte_55iO0jl40KO8ZIvOyzjd",normalpack:"",leveluppack:"1U5IfT1x471-eiA20GIkeVddLRp5z1-C3",birthdaysale:"1tnGr2TqWZ8-mbfB_FLA81cmawN6MHM2U",blackfridaysale:"151Vt48Snv14yaemu2br4a0p5ZJOwoBAJ",christmassale:"1YtjNmFDSdoZOMP7pr4u8Hpq-ngUoZSnL",communitysale:"1IcqlVQSmUmTjK5d-3uDSgWzfMdSoYXOz",eastersale:"1VjRJ5FYsPMH8shHO3ygFy8o7OW7Ok2s9",fallsale:"1WEBrcC16kKEuDqVrNN1_30YE-mvbLKRL",luckysale:"1ghdb7rzBd9IwfIThrZkWoBu_cJUu52Y8",newyearsale:"1oqiVjh189TymQOJ6rFgplKX5d19F8dRQ",oktoberfestsale:"15_EJDighENIzrGyWc_G-zoS90hf21I2O",prechristmassale:"1oF2EBqkCQoIpbea4DbWtBwVjiU0CQ3qH",soulfulsale:"1QXKH1xPEzpA1vPBL4KVYXs3Wz61Xwaoh",summersale:"1QXKH1xPEzpA1vPBL4KVYXs3Wz61Xwaoh",wintersale:"1dQgJjNPUwhYXFXe_D3ECSCZVxQ-tI4Wi",worldbosssale:"1PAtXeA1xucL-NQdEpl4c7koesaN6o4n9",hydrastages:"1NosDzLmsNFLkTOuzpEKV0wjPo9TbMpMG",guildskillcost:"18Bx5BeItjYGP3cyNhvJ-Rwr3mfqNQkpc",levelzweibiszweihundert:"1xisisp1_yooyzPpjAdUEEi_0p284CtCz",levelzweihunzehnbissiebenhun:"1xisisp1_yooyzPpjAdUEEi_0p284CtCz",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450",sftaverndiscord:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY",sfmagazine:"1DkwbJdIRSI0DxVJCo9aCDD9FyjZGf-TQ",sftools:"1fcnNhvUliXJU6Fuw95mLrcNowjzZlYSh",step1adg:"1s18qj9thQdvKQySqdgv3jhAZ6WXu4Z_T",step2adg:"1XD6h0xe56G4nfatc4Cs9wFnPveWwyxr8",step3adg:"1FBYaP5H-UhlrMiAhlfxcEyP8PGBWbPO5"};function see(t){var n;const e=Array.isArray(t)?eee(t):VR(t!=null?t:"");return(n=tee[e])!=null?n:null}function Ga(t,e=512){var a,o;const n=see(t);if(!n)return{id:null,url:null,thumb:null,fallback:""};const r=(a=kd(n))!=null?a:null,i=r&&(o=Pi(r,e))!=null?o:null;return{id:n,url:r,thumb:i,fallback:""}}function fd(t,e=512){return Ga(t,e).thumb}const nee="/guidehub-v2",QT=Ga("sftools",512),YT=Ga("sftaverndiscord",512);var T5,I5;const ree=(I5=(T5=QT.thumb)!=null?T5:QT.url)!=null?I5:"";var E5,A5;const iee=(A5=(E5=YT.thumb)!=null?E5:YT.url)!=null?A5:"",XT="clamp(96px, 22vw, 192px)",JT="https://discord.gg/5hXBuyRssK",aee=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"],UR="sfh_news_latestByChannel_v1",oee=600*1e3;async function zR(){const t=[];for(const n of aee)try{const i=await(await fetch(n,{cache:"no-store"})).text(),a=lee(i);t.push(...a)}catch(r){}const e=new Map;for(const n of t){const r=String(n["Creator Name"]||n.creator_name||n.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,n)}return Array.from(e.values())}function ZT(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(n+='"',i++):r=!r:a===","&&!r?(e.push(n),n=""):n+=a}return e.push(n),e}function lee(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const n=ZT(e[0]);return e.slice(1).map(r=>{const i=ZT(r),a={};return n.forEach((o,c)=>{var u;return a[o.trim()]=((u=i[c])!=null?u:"").trim()}),a})}function cee(t){try{const e=Date.now(),n=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-n),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const o=Math.floor(a/60);return o<24?`${o}h`:`${Math.floor(o/24)}d`}catch(e){return""}}function dee(t,e){const n=t.trim();return n.length<=e?n:`${n.slice(0,Math.max(0,e-3)).trimEnd()}...`}function uee(){try{if(typeof sessionStorage=="undefined")return null;const t=sessionStorage.getItem(UR);if(!t)return null;const e=JSON.parse(t);return!e||typeof e!="object"?null:e}catch(t){return null}}function e3(t){try{if(typeof sessionStorage=="undefined")return;sessionStorage.setItem(UR,JSON.stringify(t))}catch(e){}}function hee(t){if(!t)return null;const e=Date.now(),n=typeof t.nextUpdateAt=="number"?t.nextUpdateAt:null;return n&&n>e?n:e+oee}function mee(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const n=e.pathname.toLowerCase();if(n.startsWith("/shorts/"))return n.split("/")[2]||null}}catch(e){}return null}const pee=()=>{var D,V;const{t}=Vs(),[e,n]=A.useState(0),[r,i]=A.useState(null),[a,o]=A.useState(!0),[c,u]=A.useState(null),h=A.useRef(!1),m=A.useRef(!1),g=A.useRef(null),v=A.useRef(null),b=A.useRef(null),_=A.useRef(null),k=A.useRef(null),I=z=>{var U,J;let K=-1,W=Number.NEGATIVE_INFINITY;for(let re=0;re<z.length;re++){const G=(J=(U=z[re])==null?void 0:U.item)==null?void 0:J.timestamp;if(!G)continue;const X=Date.parse(G);Number.isNaN(X)||X>W&&(W=X,K=re)}return K===-1?0:K};A.useEffect(()=>{let z=!0;const K=()=>{g.current&&(window.clearTimeout(g.current),g.current=null)},W=se=>{K();const ce=hee(se);if(!ce)return;k.current=ce;const _e=Math.max(0,ce-Date.now());g.current=window.setTimeout(()=>{J()},_e)},U=(se,ce)=>{var ee;const _e=se.hash||String((ee=se.updatedAt)!=null?ee:""),Ae=_.current;if(Ae&&Ae===_e){b.current=se,ce&&e3(se);return}_.current=_e,b.current=se,i(se),ce&&e3(se)},J=async()=>{var ce;if(!z)return;(ce=v.current)==null||ce.abort();const se=new AbortController;v.current=se,b.current||o(!0);try{const _e=await JZ(se.signal);if(!z||se.signal.aborted)return;_e&&(U(_e,!0),u(null),W(_e))}catch(_e){if(!z||se.signal.aborted)return;u(String((_e==null?void 0:_e.message)||_e||"error"))}finally{z&&!se.signal.aborted&&(o(!1),W(b.current))}},re=uee();re&&(U(re,!1),o(!1));const G=Date.now();re&&typeof re.nextUpdateAt=="number"&&re.nextUpdateAt>G?W(re):J();const Y=()=>{if(!z||document.visibilityState!=="visible")return;const se=k.current;typeof se=="number"&&Date.now()>se&&J()};return document.addEventListener("visibilitychange",Y),()=>{var se;z=!1,K(),(se=v.current)==null||se.abort(),document.removeEventListener("visibilitychange",Y)}},[]),A.useEffect(()=>{var K;const z=(K=r==null?void 0:r.items)!=null?K:[];if(z.length===0){n(0);return}if(!h.current&&!m.current){n(I(z)),m.current=!0;return}n(W=>Math.min(W,z.length-1))},[r]);const R=(D=r==null?void 0:r.items.length)!=null?D:0,P=R>0?r.items[e]:null,N=(P==null?void 0:P.label)||(P==null?void 0:P.channelId)||"",x=!a&&P&&!P.item,w=(V=P==null?void 0:P.item)!=null?V:null,L=w?cee(w.timestamp):"",j=(w==null?void 0:w.author)||"Discord",S=w!=null&&w.contentText?dee(w.contentText,240):"",C=w?`${j} ${L}`.trim():void 0,M=!a&&R===0,T=()=>{R<=1||(h.current=!0,n(z=>(z-1+R)%R))},F=()=>{R<=1||(h.current=!0,n(z=>(z+1)%R))};return s.jsxs("section",{className:Xe.card,"data-i18n-scope":"home.news","aria-busy":a,children:[s.jsxs("header",{className:Xe.header,children:[s.jsxs("div",{className:Xe.headerGroup,children:[s.jsx("span",{className:Xe.title,"data-i18n":"home.news.title",children:t("home.news.title")}),N&&s.jsx("span",{className:Xe.subtitle,title:N,children:N})]}),s.jsxs("div",{className:Xe.carouselCtrls,children:[s.jsx("button",{className:Xe.navBtn,onClick:T,disabled:R<=1,"aria-label":t("home.news.prev"),"data-i18n-aria-label":"home.news.prev",children:""}),s.jsx("button",{className:Xe.navBtn,onClick:F,disabled:R<=1,"aria-label":t("home.news.next"),"data-i18n-aria-label":"home.news.next",children:""})]})]}),s.jsxs("div",{className:Xe.newsList,children:[a&&s.jsx("div",{className:Xe.newsSkeleton,"aria-hidden":!0}),w&&s.jsxs("article",{className:[Xe.newsCard,w.imageUrl?Xe.newsCardWithImage:""].join(" "),tabIndex:0,children:[s.jsxs("div",{className:Xe.newsBody,children:[s.jsxs("div",{className:Xe.newsMeta,children:[s.jsx("span",{className:Xe.newsAuthor,children:j}),s.jsx("span",{className:Xe.newsTime,children:L})]}),S&&s.jsx("p",{className:Xe.newsText,children:S}),s.jsx("div",{className:Xe.newsActions,children:s.jsx("a",{href:w.jumpUrl,target:"_blank",rel:"noreferrer",className:Xe.linkBtn,"aria-label":C,"data-i18n":"home.news.openOnDiscord",children:t("home.news.openOnDiscord")})})]}),w.imageUrl&&s.jsx("img",{src:w.imageUrl,alt:"",className:Xe.newsImage,loading:"lazy",decoding:"async"})]}),x&&s.jsx("div",{className:Xe.empty,"data-i18n":"home.news.emptyChannel",children:t("home.news.emptyChannel")}),M&&s.jsx("div",{className:Xe.empty,"data-i18n":"home.news.empty",children:t("home.news.empty")})]}),c&&s.jsx("div",{className:Xe.errorNote,"aria-live":"polite",children:c})]})},gee=()=>{const{t}=Vs(),[e,n]=A.useState([]),[r,i]=A.useState(0),a=A.useRef(null);A.useEffect(()=>{let h=!0;async function m(){try{const v=(await zR()).map(b=>{const _=String(b["Creator Name"]||b.creator_name||b.name||"").trim(),k=String(b["YouTube Link"]||b.youtube||b.YouTube||"").trim();if(!k)return null;const I=mee(k),R=I?`https://i.ytimg.com/vi/${I}/hqdefault.jpg`:void 0;return{title:_,url:k,thumb:R}}).filter(Boolean).slice(0,12);h&&n(v)}catch(g){h&&n([])}}return m(),()=>{h=!1}},[]),A.useEffect(()=>{if(!(e.length<=1))return a.current=window.setInterval(()=>i(h=>(h+1)%e.length),6e3),()=>{a.current&&window.clearInterval(a.current)}},[e]);const o=()=>i(h=>(h-1+e.length)%Math.max(e.length,1)),c=()=>i(h=>(h+1)%Math.max(e.length,1)),u=h=>{h.key==="ArrowLeft"&&(h.preventDefault(),o()),h.key==="ArrowRight"&&(h.preventDefault(),c())};return s.jsxs("section",{className:Xe.card,"data-i18n-scope":"home.youtube",children:[s.jsxs("header",{className:Xe.header,children:[s.jsx("span",{className:Xe.title,"data-i18n":"home.youtube.title",children:t("home.youtube.title")}),s.jsxs("div",{className:Xe.carouselCtrls,children:[s.jsx("button",{className:Xe.navBtn,onClick:o,"aria-label":t("home.youtube.prev"),children:""}),s.jsx("button",{className:Xe.navBtn,onClick:c,"aria-label":t("home.youtube.next"),children:""})]})]}),s.jsx("div",{className:Xe.carousel,tabIndex:0,onKeyDown:u,"aria-roledescription":"carousel",children:e.length===0?s.jsx("div",{className:Xe.empty,"data-i18n":"home.youtube.empty",children:t("home.youtube.empty")}):e.map((h,m)=>s.jsxs("a",{href:h.url,target:"_blank",rel:"noreferrer",className:[Xe.slide,m===r?Xe.slideActive:Xe.slideInactive].join(" "),children:[h.thumb?s.jsx("img",{src:h.thumb,alt:"",className:Xe.slideThumb}):s.jsx("div",{className:Xe.slideFallback,children:h.title.slice(0,2).toUpperCase()}),s.jsx("div",{className:Xe.slideCaption,children:h.title})]},h.url))})]})},fee=({onOpenSchedule:t})=>{var g;const{t:e}=Vs(),[n,r]=A.useState(null),[i,a]=A.useState(new Map),[o,c]=A.useState(0),u=A.useRef(null);if(A.useEffect(()=>{async function v(){{r([]);return}}return v(),()=>{}},[]),A.useEffect(()=>{let v=!0;async function b(){try{const _=await zR(),k=new Map;for(const I of _){const R=String(I["Creator Name"]||I.creator_name||I.name||"").trim(),P=String(I["Twitch Link"]||I.twitch||I.Twitch||"").trim();if(!R||!P)continue;const N=(()=>{try{return new URL(P).pathname.replace(/^\//,"").toLowerCase()}catch(x){return P.toLowerCase()}})();N&&k.set(N,P),k.set(R.toLowerCase(),P)}v&&a(k)}catch(_){v&&a(new Map)}}return b(),()=>{v=!1}},[]),A.useEffect(()=>{if(!(!n||n.length<=1))return u.current=window.setInterval(()=>c(v=>(v+1)%n.length),8e3),()=>{u.current&&window.clearInterval(u.current)}},[n]),!n||n.length===0)return s.jsxs("section",{className:Xe.card,"data-i18n-scope":"home.live",children:[s.jsx("header",{className:Xe.header,children:s.jsx("span",{className:Xe.title,"data-i18n":"home.live.title",children:e("home.live.title")})}),s.jsx("div",{className:Xe.empty,"data-i18n":"home.live.none",children:e("home.live.none")}),s.jsx("div",{className:Xe.actionsRight,children:s.jsx("button",{className:Xe.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:e("home.schedule.open")})})]});const h=n[o],m=(()=>{const v=((h==null?void 0:h.name)||"").toLowerCase();if(h!=null&&h.url)return h.url;if(v)return i.has(v)?i.get(v):i.has(v.replace(/^@/,""))?i.get(v.replace(/^@/,"")):`https://www.twitch.tv/${v}`})();return s.jsxs("section",{className:Xe.card,"data-i18n-scope":"home.live",children:[s.jsx("header",{className:Xe.header,children:s.jsx("span",{className:Xe.title,"data-i18n":"home.live.title",children:e("home.live.title")})}),s.jsxs("div",{className:Xe.liveCard,children:[h!=null&&h.avatar?s.jsx("img",{src:h.avatar,alt:"",className:Xe.liveAvatar}):s.jsx("div",{className:Xe.liveAvatarFallback,"aria-hidden":!0,children:(g=h==null?void 0:h.name)==null?void 0:g.slice(0,2).toUpperCase()}),s.jsxs("div",{className:Xe.liveInfo,children:[s.jsx("div",{className:Xe.liveName,children:h==null?void 0:h.name}),s.jsxs("div",{className:Xe.liveMeta,children:[s.jsx("span",{className:Xe.liveBadge,"data-i18n":"home.live.badge",children:e("home.live.badge")}),typeof(h==null?void 0:h.viewers)=="number"&&s.jsx("span",{className:Xe.liveViewers,children:e("home.live.viewers",{viewers:h.viewers.toLocaleString()})})]})]}),m&&s.jsx("a",{href:m,target:"_blank",rel:"noreferrer",className:Xe.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:e("home.live.open_on_twitch")})]}),s.jsxs("div",{className:Xe.carouselCtrls,children:[s.jsx("button",{className:Xe.navBtn,onClick:()=>c(v=>(v-1+n.length)%n.length),"aria-label":e("home.live.prev"),children:""}),s.jsx("button",{className:Xe.navBtn,onClick:()=>c(v=>(v+1)%n.length),"aria-label":e("home.live.next"),children:""})]})]})},vee=({open:t,onClose:e})=>{var _;const{t:n}=Vs(),[r,i]=A.useState(null),[a,o]=A.useState("All"),[c,u]=A.useState(""),[h,m]=A.useState(!1);if(A.useEffect(()=>{if(!t)return;async function k(){{i([]);return}}return k(),()=>{}},[t]),A.useEffect(()=>{const k=I=>{I.key==="Escape"&&e()};return t&&window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[t,e]),!t)return null;const g=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),v=(r||[]).filter(k=>{if(a!=="All"&&k.platform.toLowerCase()!==a.toLowerCase()||h&&k.weekday&&k.weekday.toLowerCase()!==g.toLowerCase())return!1;if(c){const I=c.toLowerCase();if(!`${k.streamer} ${k.title}`.toLowerCase().includes(I))return!1}return!0}),b=((_=r==null?void 0:r.length)!=null?_:0)===0;return s.jsx("div",{className:Xe.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:s.jsxs("div",{className:Xe.modal,children:[s.jsxs("header",{className:Xe.modalHeader,children:[s.jsx("h2",{id:"schedule-title",className:Xe.modalTitle,"data-i18n":"home.schedule.title",children:n("home.schedule.title")}),s.jsx("button",{className:Xe.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:n("home.schedule.close")})]}),s.jsxs("div",{className:Xe.modalFilters,children:[s.jsxs("label",{className:Xe.formRow,children:[s.jsx("span",{"data-i18n":"home.schedule.platform",children:n("home.schedule.platform")}),s.jsxs("select",{value:a,onChange:k=>o(k.target.value),className:Xe.select,children:[s.jsx("option",{value:"All",children:n("home.schedule.platformAll")}),s.jsx("option",{value:"Twitch",children:n("home.schedule.platformTwitch")}),s.jsx("option",{value:"YouTube",children:n("home.schedule.platformYouTube")})]})]}),s.jsxs("label",{className:Xe.formRow,children:[s.jsx("span",{"data-i18n":"home.schedule.search",children:n("home.schedule.search")}),s.jsx("input",{value:c,onChange:k=>u(k.target.value),className:Xe.input,placeholder:n("home.schedule.searchPlaceholder")})]}),s.jsxs("label",{className:Xe.formRowCheckbox,children:[s.jsx("input",{type:"checkbox",checked:h,onChange:k=>m(k.target.checked)}),s.jsx("span",{"data-i18n":"home.schedule.today",children:n("home.schedule.today")})]})]}),s.jsx("div",{className:Xe.tableWrap,children:s.jsxs("table",{className:Xe.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:n("home.schedule.columns.weekday")}),s.jsx("th",{children:n("home.schedule.columns.start")}),s.jsx("th",{children:n("home.schedule.columns.end")}),s.jsx("th",{children:n("home.schedule.columns.timezone")}),s.jsx("th",{children:n("home.schedule.columns.platform")}),s.jsx("th",{children:n("home.schedule.columns.channel")}),s.jsx("th",{children:n("home.schedule.columns.streamer")}),s.jsx("th",{children:n("home.schedule.columns.title")})]})}),s.jsx("tbody",{children:b?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:Xe.empty,children:n("home.schedule.empty")})}):v.map((k,I)=>s.jsxs("tr",{children:[s.jsx("td",{children:k.weekday}),s.jsx("td",{children:k.start_utc}),s.jsx("td",{children:k.end_utc}),s.jsx("td",{children:k.timezone}),s.jsx("td",{children:k.platform}),s.jsx("td",{children:k.channel_url?s.jsx("a",{href:k.channel_url,target:"_blank",rel:"noreferrer",children:n("home.schedule.link")}):""}),s.jsx("td",{children:k.streamer}),s.jsx("td",{children:k.title})]},I))})]})})]})})},xee=()=>{const{t}=Vs(),[e,n]=A.useState(!1);return s.jsxs(os,{title:t("home.title"),subtitle:t("home.subtitle"),children:[s.jsxs("div",{className:`${Xe.row} ${Xe.rowSplit}`,children:[s.jsx("div",{className:Xe.splitMain,children:s.jsx(pee,{})}),s.jsx("div",{className:Xe.splitSide,children:s.jsx(fee,{onOpenSchedule:()=>n(!0)})})]}),s.jsxs("div",{className:`${Xe.row} ${Xe.rowSplit} ${Xe.rowFeatured}`,children:[s.jsx("div",{className:Xe.splitMain,children:s.jsxs(MJ,{children:[s.jsx(jb,{href:nee,title:t("home.guidehub.title"),subtitle:t("home.guidehub.subtitle"),previewImageSrc:Qj,previewAlt:t("home.guidehub.previewAlt"),className:si.guidehubScale,i18nScope:"home.guidehub",titleI18nKey:"home.guidehub.title",subtitleI18nKey:"home.guidehub.subtitle",previewAltI18nKey:"home.guidehub.previewAlt",linkAriaLabel:t("home.guidehub.open"),linkAriaI18nKey:"home.guidehub.open"}),s.jsx(jb,{href:"https://sftools.mar21.eu/",title:t("home.sftools.title"),subtitle:t("home.sftools.subtitle"),previewImageSrc:ree,previewAlt:t("home.sftools.previewAlt"),previewHeightOverride:XT,i18nScope:"home.sftools",titleI18nKey:"home.sftools.title",subtitleI18nKey:"home.sftools.subtitle",previewAltI18nKey:"home.sftools.previewAlt"}),s.jsx(jb,{href:JT,title:t("home.taverndiscord.title"),subtitle:t("home.taverndiscord.subtitle"),previewImageSrc:iee,previewAlt:t("home.taverndiscord.previewAlt"),previewHeightOverride:XT,i18nScope:"home.taverndiscord",titleI18nKey:"home.taverndiscord.title",subtitleI18nKey:"home.taverndiscord.subtitle",previewAltI18nKey:"home.taverndiscord.previewAlt"})]})}),s.jsx("div",{className:Xe.splitSide,children:s.jsx(gee,{})})]}),s.jsx("div",{className:Xe.row,children:s.jsx("div",{className:Xe.discordBannerWrap,children:s.jsx("a",{href:JT,className:`${Xe.card} ${Xe.discordBanner}`,target:"_blank",rel:"noreferrer noopener","aria-label":t("home.discordBanner.aria"),"data-i18n-scope":"home.discordBanner",children:s.jsxs("div",{className:Xe.discordBannerText,children:[s.jsx("img",{src:ZZ,alt:"Discord Logo",className:Xe.discordBannerLogo}),s.jsx("h2",{className:Xe.discordBannerTitle,"data-i18n":"home.discordBanner.title",children:t("home.discordBanner.title")}),s.jsx("p",{className:Xe.discordBannerSubtitle,"data-i18n":"home.discordBanner.subtitle",children:t("home.discordBanner.subtitle")})]})})})}),s.jsx(vee,{open:e,onClose:()=>n(!1)})]})},t3="sfh:authNext",s3=t=>{if(!t)return null;const e=t.trim();return!e.startsWith("/")||e.startsWith("//")||/^[a-z][a-z0-9+.-]*:/i.test(e)||e.toLowerCase().startsWith("/login")?null:e},yee=()=>{const t=hi(),e=ir(),{status:n,user:r}=wa(),i=n==="authenticated"&&!!r,a=q.useMemo(()=>new URLSearchParams(e.search).get("next"),[e.search]),o=q.useMemo(()=>{if(typeof window=="undefined")return null;try{return window.sessionStorage.getItem(t3)}catch(u){return console.warn("[Login] Failed to read auth next from sessionStorage",u),null}},[]),c=q.useMemo(()=>{var u;return(u=s3(a))!=null?u:s3(o)},[a,o]);return q.useEffect(()=>{if(!i)return;const u=c;typeof window!="undefined"&&window.sessionStorage&&window.sessionStorage.removeItem(t3),u&&t(u,{replace:!0})},[i,t,c]),s.jsx(os,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:s.jsx(X4,{})})};function bee(){return s.jsx(os,{hex:s.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:s.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:s.jsx(_ee,{}),right:s.jsx(wee,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(Sb,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),s.jsx(Sb,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),s.jsx(Sb,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function _ee(){return s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Nb,{to:"/dashboard/kpis",children:"KPIs"}),s.jsx(Nb,{to:"/dashboard/activity",children:"Activity"}),s.jsx(Nb,{to:"/dashboard/progression",children:"Progression"})]})]})}function wee(){return s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),s.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function Sb({to:t,title:e,desc:n}){return s.jsxs(Gs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),n?s.jsx("div",{className:"mt-1 text-sm opacity-75",children:n}):null]})}function Nb({to:t,children:e}){return s.jsx(Gs,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function jee(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  KPIs"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(kb,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),s.jsx(kb,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),s.jsx(kb,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function kb({label:t,value:e,hint:n}){return s.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),s.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function See(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  Activity"}),s.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),s.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[s.jsx("li",{children:" Neues Scan-File hochgeladen"}),s.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),s.jsx("li",{children:" Gilden-Event geplant"})]})]})}function Nee(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  Progression"}),s.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[s.jsx(Cb,{title:"Scrapbook 100%",progress:72}),s.jsx(Cb,{title:"Fortress Ausbaustufe",progress:48}),s.jsx(Cb,{title:"Underworld Boss",progress:35})]})]})}function Cb({title:t,progress:e}){return s.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),s.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:s.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),s.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function kee(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Discover"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(Wc,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),s.jsx(Wc,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),s.jsx(Wc,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),s.jsx(Wc,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),s.jsx(Wc,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),s.jsx(Wc,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),s.jsx(Wc,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function Wc({to:t,title:e,desc:n}){return s.jsxs(Gs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Cee({children:t,framed:e=!0}){return e?s.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:rl.border,backgroundColor:rl.tile},children:t}):s.jsx("main",{className:"min-w-0",children:t})}function Tee(t,e){if(!t)return"";const n=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return n;const r=n.includes("?")?"&":"?";return`${n}${r}bg=transparent&background=transparent`}const Iee=({srcOrId:t,aspectRatio:e="16/10",height:n,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:o=!1,infoText:c="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[m,g]=A.useState(!1),v=A.useMemo(()=>Tee(t,h),[t,h]),b=i?"lazy":"eager",_={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},k={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},I=n?{position:"relative",width:"100%",height:n,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},R={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return s.jsx("div",{className:a,style:_,children:s.jsx("div",{style:k,children:s.jsxs("div",{style:I,children:[s.jsx("iframe",{src:v,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:b,scrolling:"no",title:"Heyzine Flipbook"}),o&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(P=>!P),style:R,title:"Info",children:"i"}),m&&s.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[c," ",s.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},Eee="#0C1C2E",Aee=()=>s.jsx(os,{children:s.jsx(Cee,{children:s.jsxs("div",{style:{position:"relative",width:"100%"},children:[s.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:Eee,borderRadius:16,pointerEvents:"none",zIndex:0}}),s.jsx("div",{style:{position:"relative",zIndex:1},children:s.jsx(Iee,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),Pee="_pageWrap_72re9_7",Ree="_infoLine_72re9_17",Lee="_viewerHost_72re9_43",Dee="_overlay_72re9_99",Mee="_dragZoneLeft_72re9_101",Fee="_dragZoneRight_72re9_103",Bee="_inbookLink_72re9_105",Wl={pageWrap:Pee,infoLine:Ree,viewerHost:Lee,overlay:Dee,dragZoneLeft:Mee,dragZoneRight:Fee,inbookLink:Bee};var Em={exports:{}},$ee=Em.exports,n3;function Oee(){return n3||(n3=1,(function(t,e){(function(n,r){r(e)})($ee,(function(n){class r{constructor(x,w){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=w,this.nowDrawingDensity=this.createdDensity,this.render=x}setDensity(x){this.createdDensity=x,this.nowDrawingDensity=x}setDrawingDensity(x){this.nowDrawingDensity=x}setPosition(x){this.state.position=x}setAngle(x){this.state.angle=x}setArea(x){this.state.area=x}setHardDrawingAngle(x){this.state.hardDrawingAngle=x}setHardAngle(x){this.state.hardAngle=x,this.state.hardDrawingAngle=x}setOrientation(x){this.orientation=x}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(x,w,L){super(x,L),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=w}draw(x){const w=this.render.getContext(),L=this.render.convertToGlobal(this.state.position),j=this.render.getRect().pageWidth,S=this.render.getRect().height;w.save(),w.translate(L.x,L.y),w.beginPath();for(let C of this.state.area)C!==null&&(C=this.render.convertToGlobal(C),w.lineTo(C.x-L.x,C.y-L.y));w.rotate(this.state.angle),w.clip(),this.isLoad?w.drawImage(this.image,0,0,j,S):this.drawLoader(w,{x:0,y:0},j,S),w.restore()}simpleDraw(x){const w=this.render.getRect(),L=this.render.getContext(),j=w.pageWidth,S=w.height,C=x===1?w.left+w.pageWidth:w.left,M=w.top;this.isLoad?L.drawImage(this.image,C,M,j,S):this.drawLoader(L,{x:C,y:M},j,S)}drawLoader(x,w,L,j){x.beginPath(),x.strokeStyle="rgb(200, 200, 200)",x.fillStyle="rgb(255, 255, 255)",x.lineWidth=1,x.rect(w.x+1,w.y+1,L-1,j-1),x.stroke(),x.fill();const S={x:w.x+L/2,y:w.y+j/2};x.beginPath(),x.lineWidth=10,x.arc(S.x,S.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),x.stroke(),x.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(x,w){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=w,this.app=x,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let w=0;w<this.pages.length;w++)this.portraitSpread.push([w]);let x=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([x]),x++);for(let w=x;w<this.pages.length;w+=2)w<this.pages.length-1?this.landscapeSpread.push([w,w+1]):(this.landscapeSpread.push([w]),this.pages[w].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(x){const w=this.getSpread();for(let L=0;L<w.length;L++)if(x===w[L][0]||x===w[L][1])return L;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(x){if(x>=0&&x<this.pages.length)return this.pages[x];throw new Error("Invalid page number")}nextBy(x){const w=this.pages.indexOf(x);return w<this.pages.length-1?this.pages[w+1]:null}prevBy(x){const w=this.pages.indexOf(x);return w>0?this.pages[w-1]:null}getFlippingPage(x){const w=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return x===0?this.pages[w].newTemporaryCopy():this.pages[w-1];{const L=x===0?this.getSpread()[w+1]:this.getSpread()[w-1];return L.length===1||x===0?this.pages[L[0]]:this.pages[L[1]]}}getBottomPage(x){const w=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return x===0?this.pages[w+1]:this.pages[w-1];{const L=x===0?this.getSpread()[w+1]:this.getSpread()[w-1];return L.length===1?this.pages[L[0]]:x===0?this.pages[L[1]]:this.pages[L[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(x=null){if(x===null&&(x=this.currentPageIndex),x<0||x>=this.pages.length)return;const w=this.getSpreadIndexByPage(x);w!==null&&(this.currentSpreadIndex=w,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(x){if(!(x>=0&&x<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=x}showSpread(){const x=this.getSpread()[this.currentSpreadIndex];x.length===2?(this.render.setLeftPage(this.pages[x[0]]),this.render.setRightPage(this.pages[x[1]])):this.render.getOrientation()==="landscape"&&x[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[x[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[x[0]])),this.currentPageIndex=x[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends a{constructor(x,w,L){super(x,w),this.imagesHref=L}load(){for(const x of this.imagesHref){const w=new i(this.render,x,"soft");w.load(),this.pages.push(w)}this.createSpread()}}class c{static GetDistanceBetweenTwoPoint(x,w){return x===null||w===null?1/0:Math.sqrt(Math.pow(w.x-x.x,2)+Math.pow(w.y-x.y,2))}static GetSegmentLength(x){return c.GetDistanceBetweenTwoPoint(x[0],x[1])}static GetAngleBetweenTwoLine(x,w){const L=x[0].y-x[1].y,j=w[0].y-w[1].y,S=x[1].x-x[0].x,C=w[1].x-w[0].x;return Math.acos((L*j+S*C)/(Math.sqrt(L*L+S*S)*Math.sqrt(j*j+C*C)))}static PointInRect(x,w){return w===null?null:w.x>=x.left&&w.x<=x.width+x.left&&w.y>=x.top&&w.y<=x.top+x.height?w:null}static GetRotatedPoint(x,w,L){return{x:x.x*Math.cos(L)+x.y*Math.sin(L)+w.x,y:x.y*Math.cos(L)-x.x*Math.sin(L)+w.y}}static LimitPointToCircle(x,w,L){if(c.GetDistanceBetweenTwoPoint(x,L)<=w)return L;const j=x.x,S=x.y,C=L.x,M=L.y;let T=Math.sqrt(Math.pow(w,2)*Math.pow(j-C,2)/(Math.pow(j-C,2)+Math.pow(S-M,2)))+j;L.x<0&&(T*=-1);let F=(T-j)*(S-M)/(j-C)+S;return j-C+S===0&&(F=w),{x:T,y:F}}static GetIntersectBetweenTwoSegment(x,w,L){return c.PointInRect(x,c.GetIntersectBeetwenTwoLine(w,L))}static GetIntersectBeetwenTwoLine(x,w){const L=x[0].y-x[1].y,j=w[0].y-w[1].y,S=x[1].x-x[0].x,C=w[1].x-w[0].x,M=x[0].x*x[1].y-x[1].x*x[0].y,T=w[0].x*w[1].y-w[1].x*w[0].y,F=L*T-j*M,D=S*T-C*M,V=-(M*C-T*S)/(L*C-j*S),z=-(L*T-j*M)/(L*C-j*S);if(isFinite(V)&&isFinite(z))return{x:V,y:z};if(Math.abs(F-D)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(x,w){const L=Math.abs(x.x-w.x),j=Math.abs(x.y-w.y),S=Math.max(L,j),C=[x];function M(T,F,D,V,z){return F>T?T+z*(D/V):F<T?T-z*(D/V):T}for(let T=1;T<=S;T+=1)C.push({x:M(x.x,w.x,L,S,T),y:M(x.y,w.y,j,S,T)});return C}}class u extends r{constructor(x,w,L){super(x,L),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=w,this.element.classList.add("stf__item"),this.element.classList.add("--"+L)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(x){const w=x||this.nowDrawingDensity,L=this.render.convertToGlobal(this.state.position),j=this.render.getRect().pageWidth,S=this.render.getRect().height;this.element.classList.remove("--simple");const C=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${j}px;
            height: ${S}px;
        `;w==="hard"?this.drawHard(C):this.drawSoft(L,C)}drawHard(x=""){const w=this.render.getRect().left+this.render.getRect().width/2,L=this.state.hardDrawingAngle,j=x+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${L}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${w}px, 0, 0) rotateY(${L}deg);`);this.element.style.cssText=j}drawSoft(x,w=""){let L="polygon( ";for(const S of this.state.area)if(S!==null){let C=this.render.getDirection()===1?{x:-S.x+this.state.position.x,y:S.y-this.state.position.y}:{x:S.x-this.state.position.x,y:S.y-this.state.position.y};C=c.GetRotatedPoint(C,{x:0,y:0},this.state.angle),L+=C.x+"px "+C.y+"px, "}L=L.slice(0,-2),L+=")";const j=w+`transform-origin: 0 0; clip-path: ${L}; -webkit-clip-path: ${L};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${x.x}px, ${x.y}px);`:`transform: translate3d(${x.x}px, ${x.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=j}simpleDraw(x){const w=this.render.getRect(),L=w.pageWidth,j=w.height,S=x===1?w.left+w.pageWidth:w.left,C=w.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${j}px; 
            left: ${S}px; 
            top: ${C}px; 
            width: ${L}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(x){super.setOrientation(x),this.element.classList.remove("--left","--right"),this.element.classList.add(x===1?"--right":"--left")}setDrawingDensity(x){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+x),super.setDrawingDensity(x)}}class h extends a{constructor(x,w,L,j){super(x,w),this.element=L,this.pagesElement=j}load(){for(const x of this.pagesElement){const w=new u(this.render,x,x.dataset.density==="hard"?"hard":"soft");w.load(),this.pages.push(w)}this.createSpread()}}class m{constructor(x,w,L,j){this.direction=x,this.corner=w,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(L,10),this.pageHeight=parseInt(j,10)}calc(x){try{return this.position=this.calcAngleAndPosition(x),this.calculateIntersectPoint(this.position),!0}catch(w){return!1}}getFlippingClipArea(){const x=[];let w=!1;return x.push(this.rect.topLeft),x.push(this.topIntersectPoint),this.sideIntersectPoint===null?w=!0:(x.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(w=!1)),x.push(this.bottomIntersectPoint),(w||this.corner==="bottom")&&x.push(this.rect.bottomLeft),x}getBottomClipArea(){const x=[];return x.push(this.topIntersectPoint),this.corner==="top"?x.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&x.push({x:this.pageWidth,y:0}),x.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?c.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&x.push(this.sideIntersectPoint):this.corner==="top"&&x.push({x:this.pageWidth,y:this.pageHeight}),x.push(this.bottomIntersectPoint),x.push(this.topIntersectPoint),x}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const x=c.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?x:Math.PI-x}calcAngleAndPosition(x){let w=x;if(this.updateAngleAndGeometry(w),w=this.corner==="top"?this.checkPositionAtCenterLine(w,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(w,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(w.x-this.pageWidth)<1&&Math.abs(w.y)<1)throw new Error("Point is too small");return w}updateAngleAndGeometry(x){this.angle=this.calculateAngle(x),this.rect=this.getPageRect(x)}calculateAngle(x){const w=this.pageWidth-x.x+1,L=this.corner==="bottom"?this.pageHeight-x.y:x.y;let j=2*Math.acos(w/Math.sqrt(L*L+w*w));L<0&&(j=-j);const S=Math.PI-j;if(!isFinite(j)||S>=0&&S<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(j=-j),j}getPageRect(x){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],x):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],x)}getRectFromBasePoint(x,w){return{topLeft:this.getRotatedPoint(x[0],w),topRight:this.getRotatedPoint(x[1],w),bottomLeft:this.getRotatedPoint(x[2],w),bottomRight:this.getRotatedPoint(x[3],w)}}getRotatedPoint(x,w){return{x:x.x*Math.cos(this.angle)+x.y*Math.sin(this.angle)+w.x,y:x.y*Math.cos(this.angle)-x.x*Math.sin(this.angle)+w.y}}calculateIntersectPoint(x){const w={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(w,[x,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(w,[x,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(w,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(w,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(w,[x,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(w,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(x,w,L){let j=x;const S=c.LimitPointToCircle(w,this.pageWidth,j);j!==S&&(j=S,this.updateAngleAndGeometry(j));const C=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let M=this.rect.bottomRight,T=this.rect.topLeft;if(this.corner==="bottom"&&(M=this.rect.topRight,T=this.rect.bottomLeft),M.x<=0){const F=c.LimitPointToCircle(L,C,T);F!==j&&(j=F,this.updateAngleAndGeometry(j))}return j}getSegmentToShadowLine(){const x=this.getShadowStartPoint();return[x,x!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(x,w){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=x,this.app=w}fold(x){this.setState("user_fold"),this.calc===null&&this.start(x),this.do(this.render.convertToPage(x))}flip(x){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(x)||(this.calc!==null&&this.render.finishAnimation(),!this.start(x)))return;const w=this.getBoundsRect();this.setState("flipping");const L=w.height/10,j=this.calc.getCorner()==="bottom"?w.height-L:L,S=this.calc.getCorner()==="bottom"?w.height:0;this.calc.calc({x:w.pageWidth-L,y:j}),this.animateFlippingTo({x:w.pageWidth-L,y:j},{x:-w.pageWidth,y:S},!0)}start(x){this.reset();const w=this.render.convertToBook(x),L=this.getBoundsRect(),j=this.getDirectionByPoint(w),S=w.y>=L.height/2?"bottom":"top";if(!this.checkDirection(j))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(j),this.bottomPage=this.app.getPageCollection().getBottomPage(j),this.render.getOrientation()==="landscape")if(j===1){const C=this.app.getPageCollection().nextBy(this.flippingPage);C!==null&&this.flippingPage.getDensity()!==C.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),C.setDrawingDensity("hard"))}else{const C=this.app.getPageCollection().prevBy(this.flippingPage);C!==null&&this.flippingPage.getDensity()!==C.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),C.setDrawingDensity("hard"))}return this.render.setDirection(j),this.calc=new m(j,S,L.pageWidth.toString(10),L.height.toString(10)),!0}catch(C){return!1}}do(x){if(this.calc!==null&&this.calc.calc(x)){const w=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*w)/100):this.flippingPage.setHardAngle(-90*(200-2*w)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),w,this.calc.getDirection())}}flipToPage(x,w){const L=this.app.getPageCollection().getCurrentSpreadIndex(),j=this.app.getPageCollection().getSpreadIndexByPage(x);try{j>L&&(this.app.getPageCollection().setCurrentSpreadIndex(j-1),this.flipNext(w)),j<L&&(this.app.getPageCollection().setCurrentSpreadIndex(j+1),this.flipPrev(w))}catch(S){}}flipNext(x){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:x==="top"?1:this.render.getRect().height-2})}flipPrev(x){this.flip({x:10,y:x==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const x=this.calc.getPosition(),w=this.getBoundsRect(),L=this.calc.getCorner()==="bottom"?w.height:0;x.x<=0?this.animateFlippingTo(x,{x:-w.pageWidth,y:L},!0):this.animateFlippingTo(x,{x:w.pageWidth,y:L},!1)}showCorner(x){if(!this.checkState("read","fold_corner"))return;const w=this.getBoundsRect(),L=w.pageWidth;if(this.isPointOnCorners(x))if(this.calc===null){if(!this.start(x))return;this.setState("fold_corner"),this.calc.calc({x:L-1,y:1});const j=50,S=this.calc.getCorner()==="bottom"?w.height-1:1,C=this.calc.getCorner()==="bottom"?w.height-j:j;this.animateFlippingTo({x:L-1,y:S},{x:L-j,y:C},!1,!1)}else this.do(this.render.convertToPage(x));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(x,w,L,j=!0){const S=c.GetCordsFromTwoPoint(x,w),C=[];for(const T of S)C.push(()=>this.do(T));const M=this.getAnimationDuration(S.length);this.render.startAnimation(C,M,()=>{this.calc&&(L&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),j&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(x){this.state!==x&&(this.app.updateState(x),this.state=x)}getDirectionByPoint(x){const w=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(x.x-w.pageWidth<=w.width/5)return 1}else if(x.x<w.width/2)return 1;return 0}getAnimationDuration(x){const w=this.app.getSettings().flippingTime;return x>=1e3?w:x/1e3*w}checkDirection(x){return x===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...x){for(const w of x)if(this.state===w)return!0;return!1}isPointOnCorners(x){const w=this.getBoundsRect(),L=w.pageWidth,j=Math.sqrt(Math.pow(L,2)+Math.pow(w.height,2))/5,S=this.render.convertToBook(x);return S.x>0&&S.y>0&&S.x<w.width&&S.y<w.height&&(S.x<j||S.x>w.width-j)&&(S.y<j||S.y>w.height-j)}}class v{constructor(x,w){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=w,this.app=x;const L=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=L.exec(window.navigator.userAgent)!==null}render(x){if(this.animation!==null){const w=Math.round((x-this.animation.startedAt)/this.animation.durationFrame);w<this.animation.frames.length?this.animation.frames[w]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=x,this.drawFrame()}start(){this.update();const x=w=>{this.render(w),requestAnimationFrame(x)};requestAnimationFrame(x)}startAnimation(x,w,L){this.finishAnimation(),this.animation={frames:x,duration:w,durationFrame:w/x.length,onAnimateEnd:L,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const x=this.calculateBoundsRect();this.orientation!==x&&(this.orientation=x,this.app.updateOrientation(x))}calculateBoundsRect(){let x="landscape";const w=this.getBlockWidth(),L=w/2,j=this.getBlockHeight()/2,S=this.setting.width/this.setting.height;let C=this.setting.width,M=this.setting.height,T=L-C;return this.setting.size==="stretch"?(w<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(x="portrait"),C=x==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,C>this.setting.maxWidth&&(C=this.setting.maxWidth),M=C/S,M>this.getBlockHeight()&&(M=this.getBlockHeight(),C=M*S),T=x==="portrait"?L-C/2-C:L-C):w<2*C&&this.app.getSettings().usePortrait&&(x="portrait",T=L-C/2-C),this.boundsRect={left:T,top:j-M/2,width:2*C,height:M,pageWidth:C},x}setShadowData(x,w,L,j){if(!this.app.getSettings().drawShadow)return;const S=100*this.getSettings().maxShadowOpacity;this.shadow={pos:x,angle:w,width:3*this.getRect().pageWidth/4*L/100,opacity:(100-L)*S/100/100,direction:j,progress:2*L}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(x){this.pageRect=x}setDirection(x){this.direction=x}setRightPage(x){x!==null&&x.setOrientation(1),this.rightPage=x}setLeftPage(x){x!==null&&x.setOrientation(0),this.leftPage=x}setBottomPage(x){x!==null&&x.setOrientation(this.direction===1?0:1),this.bottomPage=x}setFlippingPage(x){x!==null&&x.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=x}convertToBook(x){const w=this.getRect();return{x:x.x-w.left,y:x.y-w.top}}isSafari(){return this.safari}convertToPage(x,w){w||(w=this.direction);const L=this.getRect();return{x:w===0?x.x-L.left-L.width/2:L.width/2-x.x+L.left,y:x.y-L.top}}convertToGlobal(x,w){if(w||(w=this.direction),x==null)return null;const L=this.getRect();return{x:w===0?x.x+L.left+L.width/2:L.width/2-x.x+L.left,y:x.y+L.top}}convertRectToGlobal(x,w){return w||(w=this.direction),{topLeft:this.convertToGlobal(x.topLeft,w),topRight:this.convertToGlobal(x.topRight,w),bottomLeft:this.convertToGlobal(x.bottomLeft,w),bottomRight:this.convertToGlobal(x.bottomRight,w)}}}class b extends v{constructor(x,w,L){super(x,w),this.canvas=L,this.ctx=L.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const x=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(x.left+x.pageWidth,x.top,x.width,x.height),this.ctx.clip())}drawBookShadow(){const x=this.getRect();this.ctx.save(),this.ctx.beginPath();const w=x.width/20;this.ctx.rect(x.left,x.top,x.width,x.height);const L={x:x.left+x.width/2-w/2,y:0};this.ctx.translate(L.x,L.y);const j=this.ctx.createLinearGradient(0,0,w,0);j.addColorStop(0,"rgba(0, 0, 0, 0)"),j.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),j.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),j.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),j.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),j.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=j,this.ctx.fillRect(0,0,w,2*x.height),this.ctx.restore()}drawOuterShadow(){const x=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(x.left,x.top,x.width,x.height);const w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(w.x,w.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const L=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),L.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),L.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),L.addColorStop(0,"rgba(0, 0, 0, 0)"),L.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=L,this.ctx.fillRect(0,0,this.shadow.width,2*x.height),this.ctx.restore()}drawInnerShadow(){const x=this.getRect();this.ctx.save(),this.ctx.beginPath();const w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),L=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(L.topLeft.x,L.topLeft.y),this.ctx.lineTo(L.topRight.x,L.topRight.y),this.ctx.lineTo(L.bottomRight.x,L.bottomRight.y),this.ctx.lineTo(L.bottomLeft.x,L.bottomLeft.y),this.ctx.translate(w.x,w.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const j=3*this.shadow.width/4,S=this.ctx.createLinearGradient(0,0,j,0);this.shadow.direction===0?(this.ctx.translate(-j,-100),S.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),S.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=S,this.ctx.fillRect(0,0,j,2*x.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class _{constructor(x,w,L){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=S=>{if(this.checkTarget(S.target)){const C=this.getMousePos(S.clientX,S.clientY);this.app.startUserTouch(C),S.preventDefault()}},this.onTouchStart=S=>{if(this.checkTarget(S.target)&&S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);this.touchPoint={point:M,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(M)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||S.preventDefault()}},this.onMouseUp=S=>{const C=this.getMousePos(S.clientX,S.clientY);this.app.userStop(C)},this.onMouseMove=S=>{const C=this.getMousePos(S.clientX,S.clientY);this.app.userMove(C,!1)},this.onTouchMove=S=>{if(S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-M.x)>10||this.app.getState()!=="read")&&S.cancelable&&this.app.userMove(M,!0),this.app.getState()!=="read"&&S.preventDefault()):this.app.userMove(M,!0)}},this.onTouchEnd=S=>{if(S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);let T=!1;if(this.touchPoint!==null){const F=M.x-this.touchPoint.point.x,D=Math.abs(M.y-this.touchPoint.point.y);Math.abs(F)>this.swipeDistance&&D<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(F>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),T=!0),this.touchPoint=null}this.app.userStop(M,T)}},this.parentElement=x,x.classList.add("stf__parent"),x.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=x.querySelector(".stf__wrapper"),this.app=w;const j=this.app.getSettings().usePortrait?1:2;x.style.minWidth=L.minWidth*j+"px",x.style.minHeight=L.minHeight+"px",L.size==="fixed"&&(x.style.minWidth=L.width*j+"px",x.style.minHeight=L.height+"px"),L.autoSize&&(x.style.width="100%",x.style.maxWidth=2*L.maxWidth+"px"),x.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=L.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(x){this.wrapper.classList.remove("--portrait","--landscape"),x==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(x,w){const L=this.distElement.getBoundingClientRect();return{x:x-L.left,y:w-L.top}}checkTarget(x){return!this.app.getSettings().clickEventForward||!["a","button"].includes(x.tagName.toLowerCase())}}class k extends _{constructor(x,w,L,j){super(x,w,L),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=x.querySelector(".stf__block"),this.items=j;for(const S of j)this.distElement.appendChild(S);this.setHandlers()}clear(){for(const x of this.items)this.parentElement.appendChild(x)}updateItems(x){this.removeHandlers(),this.distElement.innerHTML="";for(const w of x)this.distElement.appendChild(w);this.items=x,this.setHandlers()}update(){this.app.getRender().update()}}class I extends _{constructor(x,w,L){super(x,w,L),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=x.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const x=getComputedStyle(this.canvas),w=parseInt(x.getPropertyValue("width"),10),L=parseInt(x.getPropertyValue("height"),10);this.canvas.width=w,this.canvas.height=L}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class R extends v{constructor(x,w,L){super(x,w),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=L,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const x=this.getRect(),w=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let L=(100-w)*(2.5*x.pageWidth)/100+20;L>x.pageWidth&&(L=x.pageWidth);let j=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${L}px;
            height: ${x.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*w/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${x.left+x.width/2}px;
            transform-origin: 0 0;
        `;j+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=j}drawHardOuterShadow(){const x=this.getRect();let w=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*x.pageWidth)/100+20;w>x.pageWidth&&(w=x.pageWidth);let L=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${w}px;
            height: ${x.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${x.left+x.width/2}px;
            transform-origin: 0 0;
        `;L+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=L}drawInnerShadow(){const x=this.getRect(),w=3*this.shadow.width/4,L=this.getDirection()===0?w:0,j=this.getDirection()===0?"to left":"to right",S=this.convertToGlobal(this.shadow.pos),C=this.shadow.angle+3*Math.PI/2,M=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let T="polygon( ";for(const D of M){let V=this.getDirection()===1?{x:-D.x+this.shadow.pos.x,y:D.y-this.shadow.pos.y}:{x:D.x-this.shadow.pos.x,y:D.y-this.shadow.pos.y};V=c.GetRotatedPoint(V,{x:L,y:100},C),T+=V.x+"px "+V.y+"px, "}T=T.slice(0,-2),T+=")";const F=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${w}px;
            height: ${2*x.height}px;
            background: linear-gradient(${j},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${L}px 100px;
            transform: translate3d(${S.x-L}px, ${S.y-100}px, 0) rotate(${C}rad);
            clip-path: ${T};
            -webkit-clip-path: ${T};
        `;this.innerShadow.style.cssText=F}drawOuterShadow(){const x=this.getRect(),w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),L=this.shadow.angle+3*Math.PI/2,j=this.getDirection()===1?this.shadow.width:0,S=this.getDirection()===0?"to right":"to left",C=[{x:0,y:0},{x:x.pageWidth,y:0},{x:x.pageWidth,y:x.height},{x:0,y:x.height}];let M="polygon( ";for(const F of C)if(F!==null){let D=this.getDirection()===1?{x:-F.x+this.shadow.pos.x,y:F.y-this.shadow.pos.y}:{x:F.x-this.shadow.pos.x,y:F.y-this.shadow.pos.y};D=c.GetRotatedPoint(D,{x:j,y:100},L),M+=D.x+"px "+D.y+"px, "}M=M.slice(0,-2),M+=")";const T=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*x.height}px;
            background: linear-gradient(${S}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${j}px 100px;
            transform: translate3d(${w.x-j}px, ${w.y-100}px, 0) rotate(${L}rad);
            clip-path: ${M};
            -webkit-clip-path: ${M};
        `;this.outerShadow.style.cssText=T}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const x=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(x))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const x of this.app.getPageCollection().getPages())x!==this.leftPage&&x!==this.rightPage&&x!==this.flippingPage&&x!==this.bottomPage&&(x.getElement().style.cssText="display: none"),x.getTemporaryCopy()!==this.flippingPage&&x.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class P{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(x){const w=this._default;if(Object.assign(w,x),w.size!=="stretch"&&w.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(w.width<=0||w.height<=0)throw new Error("Invalid width or height");if(w.flippingTime<=0)throw new Error("Invalid flipping time");return w.size==="stretch"?(w.minWidth<=0&&(w.minWidth=100),w.maxWidth<w.minWidth&&(w.maxWidth=2e3),w.minHeight<=0&&(w.minHeight=100),w.maxHeight<w.minHeight&&(w.maxHeight=2e3)):(w.minWidth=w.width,w.maxWidth=w.width,w.minHeight=w.height,w.maxHeight=w.height),w}}(function(N,x){x===void 0&&(x={});var w=x.insertAt;if(typeof document!="undefined"){var L=document.head||document.getElementsByTagName("head")[0],j=document.createElement("style");j.type="text/css",w==="top"&&L.firstChild?L.insertBefore(j,L.firstChild):L.appendChild(j),j.styleSheet?j.styleSheet.cssText=N:j.appendChild(document.createTextNode(N))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(N,x){return this.events.has(N)?this.events.get(N).push(x):this.events.set(N,[x]),this}off(N){this.events.delete(N)}trigger(N,x,w=null){if(this.events.has(N))for(const L of this.events.get(N))L({data:w,object:x})}}{constructor(N,x){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new P().getSettings(x),this.block=N}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(N){this.ui=new I(this.block,this,this.setting);const x=this.ui.getCanvas();this.render=new b(this,this.setting,x),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(N){this.ui=new k(this.block,this,this.setting,N),this.render=new R(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(N){const x=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,N),this.pages.load(),this.pages.show(x),this.trigger("update",this,{page:x,mode:this.render.getOrientation()})}updateFromHtml(N){const x=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.ui.updateItems(N),this.render.reload(),this.pages.show(x),this.trigger("update",this,{page:x,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(N){this.pages.show(N)}flipNext(N="top"){this.flipController.flipNext(N)}flipPrev(N="top"){this.flipController.flipPrev(N)}flip(N,x="top"){this.flipController.flipToPage(N,x)}updateState(N){this.trigger("changeState",this,N)}updatePageIndex(N){this.trigger("flip",this,N)}updateOrientation(N){this.ui.setOrientationStyle(N),this.update(),this.trigger("changeOrientation",this,N)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(N){return this.pages.getPage(N)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(N){this.mousePosition=N,this.isUserTouch=!0,this.isUserMove=!1}userMove(N,x){this.isUserTouch||x||!this.setting.showPageCorners?this.isUserTouch&&c.GetDistanceBetweenTwoPoint(this.mousePosition,N)>5&&(this.isUserMove=!0,this.flipController.fold(N)):this.flipController.showCorner(N)}userStop(N,x=!1){this.isUserTouch&&(this.isUserTouch=!1,x||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(N)))}},Object.defineProperty(n,"__esModule",{value:!0})}))})(Em,Em.exports)),Em.exports}var Vee=Oee();const Uee="_viewerRoot_hj39c_5",zee="_stage_hj39c_17",Gee="_host_hj39c_43",Hee="_hud_hj39c_91",Wee="_hBtn_hj39c_125",Kee="_hText_hj39c_153",qee="_title_hj39c_167",Qee="_sep_hj39c_169",Yee="_spacer_hj39c_171",Xee="_errorBox_hj39c_175",$i={viewerRoot:Uee,stage:zee,host:Gee,hud:Hee,hBtn:Wee,hText:Kee,title:qee,sep:Qee,spacer:Yee,errorBox:Xee},Jee="/".endsWith("/")?"/":"//",GR=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${Jee}${e}`.replace(/\/{2,}/g,"/")},Zee=async t=>{const e=GR(`flipbooks/${t}/manifest.json`),n=await fetch(e,{cache:"no-cache"});if(!n.ok)throw new Error(`Manifest not found for slug "${t}"`);return n.json()},ete=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},tte=(t,e,n)=>Math.max(e,Math.min(n,t)),Gn={hostEl:null,pf:null,slug:null},Oa={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},ste=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function nte(t){for(const e of t)e&&(Oa.cache.has(e)||Oa.inFlight.has(e)||Oa.queue.includes(e)||Oa.queue.push(e));HR()}function HR(){ste(()=>{for(;Oa.inFlight.size<Oa.maxParallel&&Oa.queue.length>0;){const t=Oa.queue.shift();Oa.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{Oa.inFlight.delete(t),Oa.cache.add(t),HR()},e.src=t}})}const rte=({slug:t,initialPage:e=1,onReady:n,onPageChange:r,noSound:i=!0})=>{const a=A.useRef(null),o=A.useRef(null),[c,u]=A.useState(null),[h,m]=A.useState(null),g=A.useRef(),v=A.useRef(),b=A.useRef(e);A.useEffect(()=>{g.current=n},[n]),A.useEffect(()=>{v.current=r},[r]),A.useEffect(()=>{b.current=e},[e]);const _=A.useMemo(()=>GR(`flipbooks/${t}`),[t]),k=A.useCallback(N=>{var x,w;if((x=N.srcset)!=null&&x.length){const L=[...N.srcset].sort((S,C)=>S.width-C.width),j=(w=L.find(S=>S.width>=1600))!=null?w:L[L.length-1];return/^https?:\/\//i.test(j.src)||j.src.startsWith("/")?j.src:`${_}/${j.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(N.src)||N.src.startsWith("/")?N.src:`${_}/${N.src}`.replace(/\/{2,}/g,"/")},[_]);A.useEffect(()=>{let N=!0;return m(null),Zee(t).then(x=>{N&&u(x)}).catch(x=>{N&&m(x.message||"Failed to load flipbook manifest.")}),()=>{N=!1}},[t]),A.useEffect(()=>{const N=o.current,x=a.current;if(!N||!x||!c||(Gn.hostEl||(Gn.hostEl=document.createElement("div"),Gn.hostEl.className=$i.host),Gn.hostEl.parentElement!==N&&N.appendChild(Gn.hostEl),!Gn.hostEl.isConnected))return;if(!(!Gn.pf||Gn.slug!==t)){try{Gn.pf.update()}catch(D){}return}if(Gn.pf){try{Gn.pf.destroy()}catch(D){}Gn.pf=null}const L={width:c.pageWidth,height:c.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},j=new Vee.PageFlip(Gn.hostEl,L);Gn.pf=j,Gn.slug=t;const S=c.pages.map(k);j.loadFromImages(S);const C=D=>{const V=[],z=D+1,K=D+2;c.pages[z]&&V.push(k(c.pages[z])),c.pages[K]&&V.push(k(c.pages[K])),nte(V)},M=()=>{var V;const D=tte(b.current,1,c.pageCount)-1;j.turnToPage(D,"hard"),setTimeout(()=>C(D),220),(V=g.current)==null||V.call(g,j)};j.on("init",M),j.on("flip",D=>{var z;const V=D.data;(z=v.current)==null||z.call(v,V),setTimeout(()=>C(V),220)});const T=new ResizeObserver(()=>{var D;try{(D=Gn.pf)==null||D.update()}catch(V){}});T.observe(x);const F=D=>{var V,z;D.key==="ArrowLeft"&&(D.preventDefault(),(V=Gn.pf)==null||V.flipPrev()),D.key==="ArrowRight"&&(D.preventDefault(),(z=Gn.pf)==null||z.flipNext())};return window.addEventListener("keydown",F,{passive:!1}),()=>{window.removeEventListener("keydown",F),T.disconnect()}},[c,k,t]);const I=()=>{var N;return(N=Gn.pf)==null?void 0:N.flipPrev()},R=()=>{var N;return(N=Gn.pf)==null?void 0:N.flipNext()},P=()=>{var w;const N=a.current;if(!N)return;const x=N;(w=x.requestFullscreen||x.webkitRequestFullscreen||x.msRequestFullscreen)==null||w.call(x)};return h?s.jsxs("div",{className:$i.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):c?s.jsxs("div",{className:$i.viewerRoot,ref:a,"aria-label":c.title,children:[s.jsx("div",{className:$i.stage,ref:o}),s.jsxs("div",{className:$i.hud,children:[s.jsx("button",{className:$i.hBtn,onClick:I,"aria-label":"Zurck",children:""}),s.jsxs("div",{className:$i.hText,children:[s.jsx("span",{className:$i.title,children:c.title}),s.jsx("span",{className:$i.sep,children:""}),s.jsxs("span",{children:[c.pageCount," Seiten"]})]}),s.jsx("div",{className:$i.spacer}),ete()&&s.jsx("button",{className:$i.hBtn,onClick:P,"aria-label":"Fullscreen",children:""}),s.jsx("button",{className:$i.hBtn,onClick:R,"aria-label":"Weiter",children:""})]})]}):s.jsx("div",{className:$i.errorBox,children:"Lade Flipbook"})},ite=q.memo(rte),ate={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},ote=()=>{const t="sf-history-book",[e,n]=A.useState(1),r=A.useRef(null),i=A.useMemo(()=>{var m;return(m=ate[e])!=null?m:[]},[e]),a=A.useCallback(m=>{r.current=m},[]),o=A.useCallback(m=>{n(m+1)},[]),c=A.useCallback(m=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,m-1))}catch(v){}},[]),u=A.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipPrev()},[]),h=A.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipNext()},[]);return s.jsx(os,{title:"SF History Book",children:s.jsxs("div",{className:Wl.pageWrap,children:[s.jsx("div",{className:Wl.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),s.jsxs("div",{className:Wl.viewerHost,children:[s.jsx(ite,{slug:t,initialPage:1,onReady:a,onPageChange:o,noSound:!0}),s.jsxs("div",{className:Wl.overlay,"aria-hidden":!0,children:[s.jsx("div",{className:Wl.dragZoneLeft,onClick:u}),s.jsx("div",{className:Wl.dragZoneRight,onClick:h}),i.map((m,g)=>{const v={"--t":`${m.t}%`,"--l":`${m.l}%`,"--w":`${m.w}%`,"--h":`${m.h}%`};return m.kind==="goto"?s.jsx("button",{className:Wl.inbookLink,style:v,"aria-label":m.label,onClick:()=>c(m.toPage)},g):s.jsx("a",{className:Wl.inbookLink,style:v,"aria-label":m.label,href:m.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},lte="_root_zvspc_1",cte="_hero_zvspc_15",dte="_eyebrow_zvspc_47",ute="_heading_zvspc_63",hte="_lead_zvspc_77",mte="_freshnessHint_zvspc_91",pte="_hintLabel_zvspc_105",gte="_hintText_zvspc_121",fte="_grid_zvspc_135",vte="_card_zvspc_147",xte="_cardTitle_zvspc_163",yte="_paragraph_zvspc_177",bte="_list_zvspc_191",_te="_listItem_zvspc_207",Ci={root:lte,hero:cte,eyebrow:dte,heading:ute,lead:hte,freshnessHint:mte,hintLabel:pte,hintText:gte,grid:fte,card:vte,cardTitle:xte,paragraph:yte,list:bte,listItem:_te},wte=()=>{const{t}=Vs(),e=t("help.dataFreshness.body").split(`

`),r=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}].filter(i=>i.key!=="legal");return s.jsx(os,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:s.jsxs("div",{className:Ci.root,children:[s.jsxs("section",{className:Ci.hero,children:[s.jsxs("div",{children:[s.jsx("p",{className:Ci.eyebrow,children:t("help.hero.eyebrow")}),s.jsx("h1",{className:Ci.heading,children:t("help.hero.heading")}),s.jsx("p",{className:Ci.lead,children:t("help.hero.lead")})]}),s.jsxs("div",{className:Ci.freshnessHint,children:[s.jsx("div",{className:Ci.hintLabel,children:t("help.hero.freshnessLabel")}),s.jsx("p",{className:Ci.hintText,children:t("help.hero.freshnessBody")})]})]}),s.jsx("div",{className:Ci.grid,children:r.map(i=>{var o;const a=i.key==="login"?"linking":void 0;return s.jsxs("section",{id:a,className:Ci.card,children:[s.jsx("h2",{className:Ci.cardTitle,children:i.title}),(o=i.paragraphs)==null?void 0:o.map((c,u)=>s.jsx("p",{className:Ci.paragraph,children:c},`${i.key}-p-${u}`)),i.bullets&&s.jsx("ul",{className:Ci.list,children:i.bullets.map(c=>s.jsx("li",{className:Ci.listItem,children:c},`${i.key}-${c}`))})]},i.key)})})]})})};function jte(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const Ste=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function xc(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let vu=null;function WR(t={}){return vu||(t.includeStyleProperties?(vu=t.includeStyleProperties,vu):(vu=xc(window.getComputedStyle(document.documentElement)),vu))}function ax(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function Nte(t){const e=ax(t,"border-left-width"),n=ax(t,"border-right-width");return t.clientWidth+e+n}function kte(t){const e=ax(t,"border-top-width"),n=ax(t,"border-bottom-width");return t.clientHeight+e+n}function KR(t,e={}){const n=e.width||Nte(t),r=e.height||kte(t);return{width:n,height:r}}function Cte(){let t,e;try{e=process}catch(r){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Oi=16384;function Tte(t){(t.width>Oi||t.height>Oi)&&(t.width>Oi&&t.height>Oi?t.width>t.height?(t.height*=Oi/t.width,t.width=Oi):(t.width*=Oi/t.height,t.height=Oi):t.width>Oi?(t.height*=Oi/t.width,t.width=Oi):(t.width*=Oi/t.height,t.height=Oi))}function ox(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Ite(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Ete(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(t),Ite(i)}const Ai=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Ai(n,e)};function Ate(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Pte(t,e){return WR(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Rte(t,e,n,r){const i=`.${t}:${e}`,a=n.cssText?Ate(n):Pte(n,r);return document.createTextNode(`${i}{${a}}`)}function r3(t,e,n,r){const i=window.getComputedStyle(t,n),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=Ste();try{e.className=`${e.className} ${o}`}catch(u){return}const c=document.createElement("style");c.appendChild(Rte(o,n,i,r)),e.appendChild(c)}function Lte(t,e,n){r3(t,e,":before",n),r3(t,e,":after",n)}const i3="application/font-woff",a3="image/jpeg",Dte={woff:i3,woff2:i3,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:a3,jpeg:a3,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Mte(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Yj(t){const e=Mte(t).toLowerCase();return Dte[e]||""}function Fte(t){return t.split(/,/)[1]}function I_(t){return t.search(/^(data:)/)!==-1}function Bte(t,e){return`data:${e};base64,${t}`}async function qR(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(n({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const Tb={};function $te(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Xj(t,e,n){const r=$te(t,e,n.includeQueryParams);if(Tb[r]!=null)return Tb[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const a=await qR(t,n.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),Fte(c)));i=Bte(a,e)}catch(a){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return Tb[r]=i,i}async function Ote(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ox(e)}async function Vte(t,e){if(t.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,o==null||o.drawImage(t,0,0,a.width,a.height);const c=a.toDataURL();return ox(c)}const n=t.poster,r=Yj(n),i=await Xj(n,r,e);return ox(i)}async function Ute(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await hy(t.contentDocument.body,e,!0)}catch(r){}return t.cloneNode(!1)}async function zte(t,e){return Ai(t,HTMLCanvasElement)?Ote(t):Ai(t,HTMLVideoElement)?Vte(t,e):Ai(t,HTMLIFrameElement)?Ute(t,e):t.cloneNode(QR(t))}const Gte=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",QR=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function Hte(t,e,n){var r,i;if(QR(e))return e;let a=[];return Gte(t)&&t.assignedNodes?a=xc(t.assignedNodes()):Ai(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=xc(t.contentDocument.body.childNodes):a=xc(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),a.length===0||Ai(t,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>hy(c,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function Wte(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):WR(n).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Ai(t,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function Kte(t,e){Ai(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Ai(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function qte(t,e){if(Ai(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Qte(t,e,n){return Ai(e,Element)&&(Wte(t,e,n),Lte(t,e,n),Kte(t,e),qte(t,e)),e}async function Yte(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const c=n[a].getAttribute("xlink:href");if(c){const u=t.querySelector(c),h=document.querySelector(c);!u&&h&&!r[c]&&(r[c]=await hy(h,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);t.appendChild(o)}return t}async function hy(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>zte(r,e)).then(r=>Hte(t,r,e)).then(r=>Qte(t,r,e)).then(r=>Yte(r,e))}const YR=/url\((['"]?)([^'"]+?)\1\)/g,Xte=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Jte=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Zte(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function ese(t){const e=[];return t.replace(YR,(n,r,i)=>(e.push(i),n)),e.filter(n=>!I_(n))}async function tse(t,e,n,r,i){try{const a=n?jte(e,n):e,o=Yj(e);let c;return i||(c=await Xj(a,o,r)),t.replace(Zte(e),`$1${c}$3`)}catch(a){}return t}function sse(t,{preferredFontFormat:e}){return e?t.replace(Jte,n=>{for(;;){const[r,,i]=Xte.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function XR(t){return t.search(YR)!==-1}async function JR(t,e,n){if(!XR(t))return t;const r=sse(t,n);return ese(r).reduce((a,o)=>a.then(c=>tse(c,o,e,n)),Promise.resolve(r))}async function xu(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const a=await JR(i,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function nse(t,e){await xu("background",t,e)||await xu("background-image",t,e),await xu("mask",t,e)||await xu("-webkit-mask",t,e)||await xu("mask-image",t,e)||await xu("-webkit-mask-image",t,e)}async function rse(t,e){const n=Ai(t,HTMLImageElement);if(!(n&&!I_(t.src))&&!(Ai(t,SVGImageElement)&&!I_(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Xj(r,Yj(r),e);await new Promise((a,o)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(h){o(h)}}:o;const c=t;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function ise(t,e){const r=xc(t.childNodes).map(i=>ZR(i,e));await Promise.all(r).then(()=>t)}async function ZR(t,e){Ai(t,Element)&&(await nse(t,e),await rse(t,e),await ise(t,e))}function ase(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const o3={};async function l3(t){let e=o3[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},o3[t]=e,e}async function c3(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,t.url).href),qR(c,e.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>n)}function d3(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function ose(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{xc(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,h=l3(u).then(m=>c3(m,e)).then(m=>d3(m).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(v){console.error("Error inserting rule from remote css",{rule:g,error:v})}})).catch(m=>{console.error("Error loading remote css",m.toString())});r.push(h)}})}catch(a){const o=t.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(l3(i.href).then(c=>c3(c,e)).then(c=>d3(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{xc(i.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),n))}function lse(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>XR(e.style.getPropertyValue("src")))}async function cse(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=xc(t.ownerDocument.styleSheets),r=await ose(n,e);return lse(r)}function eL(t){return t.trim().replace(/["']/g,"")}function dse(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(eL(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function use(t,e){const n=await cse(t,e),r=dse(t);return(await Promise.all(n.filter(a=>r.has(eL(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return JR(a.cssText,o,e)}))).join(`
`)}async function hse(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await use(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function mse(t,e={}){const{width:n,height:r}=KR(t,e),i=await hy(t,e,!0);return await hse(i,e),await ZR(i,e),ase(i,e),await Ete(i,n,r)}async function pse(t,e={}){const{width:n,height:r}=KR(t,e),i=await mse(t,e),a=await ox(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||Cte(),h=e.canvasWidth||n,m=e.canvasHeight||r;return o.width=h*u,o.height=m*u,e.skipAutoScale||Tte(o),o.style.width=`${h}`,o.style.height=`${m}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function gse(t,e={}){return(await pse(t,e)).toDataURL()}const Jj=[{id:"am1",label:"AM 1",region:"NA",active:!0},{id:"eu5",label:"EU 5",region:"EU",active:!0},{id:"eu6",label:"EU 6",region:"EU",active:!0},{id:"eu7",label:"EU 7",region:"EU",active:!0},{id:"eu8",label:"EU 8",region:"EU",active:!0},{id:"eu9",label:"EU 9",region:"EU",active:!0},{id:"eu10",label:"EU 10",region:"EU",active:!0},{id:"eu11",label:"EU 11",region:"EU",active:!0},{id:"eu12",label:"EU 12",region:"EU",active:!0},{id:"eu13",label:"EU 13",region:"EU",active:!0},{id:"eu14",label:"EU 14",region:"EU",active:!0},{id:"eu15",label:"EU 15",region:"EU",active:!0},{id:"eu16",label:"EU 16",region:"EU",active:!0},{id:"eu17",label:"EU 17",region:"EU",active:!0},{id:"eu18",label:"EU 18",region:"EU",active:!0},{id:"eu19",label:"EU 19",region:"EU",active:!0},{id:"eu20",label:"EU 20",region:"EU",active:!0},{id:"eu21",label:"EU 21",region:"EU",active:!0},{id:"eu22",label:"EU 22",region:"EU",active:!0},{id:"eu23",label:"EU 23",region:"EU",active:!0},{id:"eu24",label:"EU 24",region:"EU",active:!0},{id:"eu25",label:"EU 25",region:"EU",active:!0},{id:"f6",label:"F 6",region:"Fusion",active:!0},{id:"f7",label:"F 7",region:"Fusion",active:!0},{id:"f8",label:"F 8",region:"Fusion",active:!0},{id:"f9",label:"F 9",region:"Fusion",active:!0},{id:"f10",label:"F 10",region:"Fusion",active:!0},{id:"f11",label:"F 11",region:"Fusion",active:!0},{id:"f12",label:"F 12",region:"Fusion",active:!0},{id:"f13",label:"F 13",region:"Fusion",active:!0},{id:"f14",label:"F 14",region:"Fusion",active:!0},{id:"f15",label:"F 15",region:"Fusion",active:!0},{id:"f16",label:"F 16",region:"Fusion",active:!0},{id:"f17",label:"F 17",region:"Fusion",active:!0},{id:"f18",label:"F 18",region:"Fusion",active:!0},{id:"f19",label:"F 19",region:"Fusion",active:!0},{id:"f20",label:"F 20",region:"Fusion",active:!0},{id:"f21",label:"F 21",region:"Fusion",active:!0},{id:"f22",label:"F 22",region:"Fusion",active:!0},{id:"f23",label:"F 23",region:"Fusion",active:!0},{id:"f24",label:"F 24",region:"Fusion",active:!0},{id:"f25",label:"F 25",region:"Fusion",active:!0},{id:"f26",label:"F 26",region:"Fusion",active:!0},{id:"f27",label:"F 27",region:"Fusion",active:!0},{id:"f28",label:"F 28",region:"Fusion",active:!0},{id:"mearwynn",label:"MEARWYNN",region:"Fusion",active:!0},{id:"blackforest",label:"BLACKFOREST",region:"Fusion",active:!0},{id:"gnarogrim",label:"GNAROGRIM",region:"Fusion",active:!0}],fse=Object.fromEntries(Jj.map(t=>[t.id,t])),tL="TL_FILTERS_V2",oi={servers:[],classes:[],guilds:[],days:"all",sortBy:"sum",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function vse(){var t;try{const e=localStorage.getItem(tL);if(!e)return oi;const n=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(n.days)?n.days:oi.days,i=["cards","buttons","table"].includes(n.listView)?n.listView:oi.listView,a=["hud","sheet"].includes(n.filterMode)?n.filterMode:oi.filterMode,o=typeof n.quickFav=="boolean"?n.quickFav:!!n.favoritesOnly,c=typeof n.quickActive=="boolean"?n.quickActive:!!n.activeOnly;return{...oi,...n,servers:Array.isArray(n.servers)?n.servers:[],classes:Array.isArray(n.classes)?n.classes:[],guilds:Array.isArray(n.guilds)?n.guilds:[],favoritesOnly:typeof n.favoritesOnly=="boolean"?n.favoritesOnly:o,activeOnly:typeof n.activeOnly=="boolean"?n.activeOnly:c,quickFav:o,quickActive:c,days:r,listView:i,filterMode:a,bottomFilterOpen:!!n.bottomFilterOpen,serverSheetOpen:!!n.serverSheetOpen,sortBy:typeof n.sortBy=="string"?n.sortBy:oi.sortBy,searchText:typeof n.searchText=="string"?n.searchText:oi.searchText}}catch(e){return oi}}function xse(t){try{localStorage.setItem(tL,JSON.stringify(t))}catch(e){}}const sL=A.createContext(null),Ib=t=>Array.from(new Set(t));function cm(t,e){return typeof t=="function"?t(e):t}function yse({children:t}){const[e,n]=A.useState(()=>vse());A.useEffect(()=>{xse(e)},[e]);const r=T=>n(F=>({...F,servers:Ib(cm(T,F.servers))})),i=T=>n(F=>{const D=new Set(F.servers);return D.has(T)?D.delete(T):D.add(T),{...F,servers:Array.from(D)}}),a=()=>n(T=>({...T,servers:[]})),o=T=>n(F=>({...F,classes:Ib(cm(T,F.classes))})),c=T=>n(F=>{const D=new Set(F.classes);return D.has(T)?D.delete(T):D.add(T),{...F,classes:Array.from(D)}}),u=()=>n(T=>({...T,classes:[]})),h=T=>n(F=>({...F,guilds:Ib(cm(T,F.guilds))})),m=T=>n(F=>{const D=new Set(F.guilds);return D.has(T)?D.delete(T):D.add(T),{...F,guilds:Array.from(D)}}),g=()=>n(T=>({...T,guilds:[]})),v=T=>n(F=>({...F,days:T})),b=T=>v(T),_=T=>n(F=>({...F,sortBy:T||"level"})),k=T=>n(F=>({...F,favoritesOnly:!!T,quickFav:!!T})),I=T=>n(F=>({...F,activeOnly:!!T,quickActive:!!T})),R=T=>n(F=>({...F,searchText:T})),P=T=>n(F=>{const D=cm(T,F.quickFav);return{...F,quickFav:D,favoritesOnly:D}}),N=T=>n(F=>{const D=cm(T,F.quickActive);return{...F,quickActive:D,activeOnly:D}}),x=T=>n(F=>({...F,filterMode:T})),w=T=>n(F=>({...F,listView:T})),L=T=>n(F=>({...F,bottomFilterOpen:!!T})),j=T=>n(F=>({...F,serverSheetOpen:!!T})),S=()=>n(oi),C=()=>S(),M=A.useMemo(()=>({servers:e.servers,classes:e.classes,guilds:e.guilds,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:o,toggleClass:c,clearClasses:u,setGuilds:h,toggleGuild:m,clearGuilds:g,setDays:v,setRange:b,setSortBy:_,setFavoritesOnly:k,setActiveOnly:I,setSearchText:R,setQuickFav:P,setQuickActive:N,setFilterMode:x,setListView:w,setBottomFilterOpen:L,setServerSheetOpen:j,resetFilters:S,resetAll:C}),[e]);return s.jsx(sL.Provider,{value:M,children:t})}function Jp(){const t=A.useContext(sL);return t||{...oi,guilds:oi.guilds,range:oi.days,searchText:oi.searchText,quickFav:oi.quickFav,quickActive:oi.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setGuilds:()=>{},toggleGuild:()=>{},clearGuilds:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const bse="_hudWrap_pyu4f_9",_se="_hudBtn_pyu4f_11",wse="_hudSubBtn_pyu4f_15",jse="_iconRow_pyu4f_19",Sse="_sortLabel_pyu4f_27",Nse="_sortSelect_pyu4f_29",kse="_guildField_pyu4f_43",Cse="_guildLabel_pyu4f_45",Tse="_guildSelect_pyu4f_47",Ise="_guildSummary_pyu4f_49",Ese="_guildSummaryText_pyu4f_53",Ase="_guildCaret_pyu4f_55",Pse="_guildDropdown_pyu4f_57",Rse="_guildOption_pyu4f_59",Lse="_guildEmptyText_pyu4f_63",Dse="_guildClear_pyu4f_65",kn={hudWrap:bse,hudBtn:_se,hudSubBtn:wse,iconRow:jse,sortLabel:Sse,sortSelect:Nse,guildField:kse,guildLabel:Cse,guildSelect:Tse,guildSummary:Ise,guildSummaryText:Ese,guildCaret:Ase,guildDropdown:Pse,guildOption:Rse,guildEmptyText:Lse,guildClear:Dse};function Mse({active:t=!1,title:e,iconUrl:n,fallback:r="",size:i=40,onClick:a}){const o=Math.round(i*.7),c=q.useMemo(()=>{const R=[],P=G4(n,o*2,o*2,"contain");P&&R.push(P);const N=Pi(n,o*2);return N&&N!==P&&R.push(N),!R.length&&n&&R.push(n),R},[n,o]),[u,h]=q.useState(0),[m,g]=q.useState(!1),[v,b]=q.useState(!1);q.useEffect(()=>h(0),[c]);const _=c[u]||"",k={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:v||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};m&&(k.background="rgba(255,255,255,.04)"),t&&(k.outline="2px solid #5C8BC6");const I={display:"block",width:o,height:o,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return s.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),style:k,children:_?s.jsx("img",{src:_,alt:e||"class",width:o,height:o,loading:"lazy",style:I,onError:()=>{h(R=>R+1<c.length?R+1:R)}}):s.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}function Fse({compareMonth:t,setCompareMonth:e,monthOptions:n,guildOptions:r,onExportPng:i,exportDisabled:a}){const{t:o}=Vs(),{servers:c,classes:u,setClasses:h,guilds:m,toggleGuild:g,clearGuilds:v,sortBy:b,setSortBy:_,filterMode:k,setBottomFilterOpen:I,serverSheetOpen:R,setServerSheetOpen:P,resetAll:N}=Jp(),x=o("toplists.filters.guilds.label","Guilds"),w=o("toplists.filters.guilds.placeholder","All guilds"),L=o("toplists.filters.guilds.empty","No guilds in snapshot"),j=o("toplists.filters.guilds.clear","Clear"),S=m.length?o("toplists.filters.guilds.selected","{{count}} selected",{count:m.length}):w;return s.jsxs("div",{className:kn.hudWrap,children:[s.jsxs("button",{type:"button",className:kn.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),P(!0)},"aria-haspopup":"dialog","aria-expanded":R||!1,"aria-label":`Select servers${c.length?` (${c.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",c.length?`(${c.length})`:""]}),s.jsxs("div",{className:kn.iconRow,children:[_r.map(C=>s.jsx(Mse,{active:u.includes(C.key),title:C.label,iconUrl:C.iconUrl,fallback:C.fallback,size:40,onClick:()=>h(M=>M.includes(C.key)?M.filter(T=>T!==C.key):[...M,C.key])},C.key)),s.jsx("button",{type:"button",className:kn.hudSubBtn,onClick:()=>h(_r.map(C=>C.key)),children:"All"}),s.jsx("button",{type:"button",className:kn.hudSubBtn,onClick:()=>h([]),children:"None"})]}),s.jsxs("div",{className:kn.guildField,children:[s.jsx("span",{className:kn.guildLabel,children:x}),r.length?s.jsxs("details",{className:kn.guildSelect,children:[s.jsxs("summary",{className:kn.guildSummary,"aria-label":x,children:[s.jsx("span",{className:kn.guildSummaryText,children:S}),s.jsx("span",{className:kn.guildCaret,"aria-hidden":"true",children:"v"})]}),s.jsxs("div",{className:kn.guildDropdown,children:[r.map(C=>{const M=m.includes(C.value);return s.jsxs("label",{className:kn.guildOption,children:[s.jsx("input",{type:"checkbox",checked:M,onChange:()=>g(C.value)}),s.jsx("span",{children:C.label})]},C.value)}),m.length>0&&s.jsx("button",{type:"button",className:kn.guildClear,onClick:v,children:j})]})]}):s.jsx("span",{className:kn.guildEmptyText,children:L})]}),s.jsx("label",{className:kn.sortLabel,htmlFor:"toplists-sort",children:"Sort."}),s.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:b,onChange:C=>_(C.target.value),className:kn.sortSelect,"aria-label":"Sort",children:[s.jsx("option",{value:"main",children:"Main"}),s.jsx("option",{value:"constitution",children:"Constitution"}),s.jsx("option",{value:"sum",children:"Base Stats"}),s.jsx("option",{value:"statsDay",children:"Stats/Day"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"mine",children:"Mine"})]}),s.jsx("label",{className:kn.sortLabel,htmlFor:"toplists-compare",children:o("toplists.compareMonth","Compare month")}),s.jsxs("select",{id:"toplists-compare",name:"toplists-compare",value:t,onChange:C=>e(C.target.value),className:kn.sortSelect,"aria-label":o("toplists.compareMonth","Compare month"),children:[s.jsx("option",{value:"",children:o("toplists.compareOff","Off")}),n.map(C=>s.jsx("option",{value:C,children:C},C))]}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsx("button",{type:"button",className:kn.hudSubBtn,onClick:i,disabled:a||!i,style:a||!i?{opacity:.55,cursor:"not-allowed"}:void 0,children:"Export PNG"}),s.jsx("button",{type:"button",className:kn.hudSubBtn,onClick:N,children:"Reset"}),k==="sheet"&&s.jsx("button",{type:"button",className:kn.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),I(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const Bse=["EU","US","INT","Fusion"],Mr={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"},$se=t=>t.trim().toLowerCase(),u3=t=>{var i;const e=$se(t),n=(i=fse[e])==null?void 0:i.label;if(n)return n;const r=t.trim().toUpperCase();return r?r.replace(/^([A-Z]+)(\d+)$/,"$1 $2"):t};function Ose({open:t,onClose:e,mode:n="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:o,onClearAll:c}){const[u,h]=A.useState(""),m=A.useRef(null);A.useEffect(()=>{if(!t)return;const b=_=>{_.key==="Escape"&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e]),A.useEffect(()=>{if(t&&m.current){const b=m.current.querySelector("#sheet-serversearch");b==null||b.focus()}},[t]);const g=Bse,v=b=>{const _=u.trim().toLowerCase();if(!_)return!0;const k=u3(b).toLowerCase();return b.toLowerCase().includes(_)||k.includes(_)};return t?s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:Vse,onClick:b=>{b.target===b.currentTarget&&e()},children:s.jsxs("div",{ref:m,style:n==="modal"?nL:Use,className:"sf-server-sheet",children:[s.jsxs("div",{style:zse,children:[s.jsx("h2",{id:"server-dialog-title",style:Gse,children:"Select servers"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{type:"button",onClick:c,style:h3,children:"Clear"}),s.jsx("button",{type:"button",onClick:e,style:Xse,children:"Done"})]})]}),s.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[s.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),s.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:b=>h(b.target.value),"aria-label":"Search servers",autoComplete:"off",style:Wse})]}),s.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(b=>{const _=(r[b]||[]).filter(v);return s.jsxs("section",{"aria-labelledby":`region-${b}`,children:[s.jsxs("div",{style:Kse,children:[s.jsx("h3",{id:`region-${b}`,style:Hse,children:b}),s.jsx("div",{style:{display:"flex",gap:8},children:s.jsx("button",{type:"button",style:h3,onClick:()=>{o?o(b):_.filter(I=>!i.includes(I)).forEach(a)},children:"Select all"})})]}),s.jsxs("div",{style:qse,children:[_.map(k=>{const I=i.includes(k),R=u3(k);return s.jsx("button",{type:"button",onClick:()=>a(k),"aria-pressed":I,title:R,style:{...Qse,...I?Yse:null},children:R},k)}),_.length===0&&s.jsx("div",{style:{color:Mr.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},b)})})]})}):null}const Vse={position:"fixed",inset:0,background:Mr.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},nL={width:"min(900px, 100%)",background:Mr.tile,border:`1px solid ${Mr.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:Mr.text},Use={...nL,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},zse={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},Gse={fontSize:18,margin:0},Hse={fontSize:14,margin:0,color:Mr.text2},Wse={width:"100%",background:Mr.input,color:Mr.text,border:`1px solid ${Mr.line}`,borderRadius:12,padding:"10px 12px"},Kse={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},qse={display:"flex",flexWrap:"wrap",gap:8},Qse={background:Mr.chip,border:`1px solid ${Mr.line}`,padding:"6px 10px",borderRadius:999,color:Mr.text},Yse={outline:`2px solid ${Mr.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},Xse={background:"#25456B",color:Mr.text,border:`1px solid ${Mr.accent}`,borderRadius:10,padding:"8px 12px"},h3={background:"transparent",color:Mr.text,border:`1px solid ${Mr.line}`,borderRadius:10,padding:"8px 12px"},Jse=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=Jse,document.head.appendChild(e)}}const Lr={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function Zse({open:t,onClose:e}){const{searchText:n,setSearchText:r,range:i,setRange:a,sortBy:o,setSortBy:c,quickFav:u,setQuickFav:h,quickActive:m,setQuickActive:g}=Jp(),v=A.useRef(null);if(A.useEffect(()=>{if(!t)return;const _=k=>{k.key==="Escape"&&e()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[t,e]),A.useEffect(()=>{if(t&&v.current){const _=v.current.querySelector("#sheet-search");_==null||_.focus()}},[t]),!t)return null;const b=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:ene,onClick:_=>{_.target===_.currentTarget&&e()},children:s.jsxs("div",{ref:v,style:tne,children:[s.jsxs("div",{style:sne,children:[s.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:Lr.text},children:"Filters"}),s.jsx("button",{type:"button",onClick:e,style:rne,children:"Done"})]}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),s.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:n,onChange:_=>r(_.target.value),"aria-label":"Search",autoComplete:"off",style:rL})]}),s.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[s.jsx("span",{style:{color:Lr.text2,fontSize:12},children:"Range"}),s.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:b.map(_=>s.jsx("button",{type:"button","aria-pressed":i===_.value,onClick:()=>a(_.value),style:{...Eb,...i===_.value?Ab:null},children:_.label},_.label))})]}),s.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[s.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:Lr.text2,fontSize:12},children:"Sort."}),s.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:o,onChange:_=>c(_.target.value),"aria-label":"Sort",autoComplete:"off",style:nne,children:[s.jsx("option",{value:"main",children:"Main"}),s.jsx("option",{value:"constitution",children:"Constitution"}),s.jsx("option",{value:"sum",children:"Base Stats"}),s.jsx("option",{value:"statsDay",children:"Stats/Day"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"mine",children:"Mine"})]})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[s.jsx("button",{type:"button",onClick:()=>h(_=>!_),"aria-pressed":u,style:{...Eb,...u?Ab:null},children:" Favorites"}),s.jsx("button",{type:"button",onClick:()=>g(_=>!_),"aria-pressed":m,style:{...Eb,...m?Ab:null},children:" Active"})]})]})})}const ene={position:"fixed",inset:0,background:Lr.backdrop,zIndex:60,display:"grid",alignItems:"end"},tne={background:Lr.tile,borderTop:`1px solid ${Lr.line}`,borderLeft:`1px solid ${Lr.line}`,borderRight:`1px solid ${Lr.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:Lr.text,maxHeight:"80vh",overflow:"auto"},sne={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},rL={width:"100%",background:Lr.input,color:Lr.text,border:`1px solid ${Lr.line}`,borderRadius:12,padding:"10px 12px"},nne={...rL,appearance:"none"},Eb={background:"#14273E",border:`1px solid ${Lr.line}`,padding:"6px 10px",borderRadius:999,color:Lr.text},Ab={outline:`2px solid ${Lr.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},rne={background:"#25456B",color:Lr.text,border:`1px solid ${Lr.accent}`,borderRadius:10,padding:"8px 12px"},ine=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=ine,document.head.appendChild(e)}}function ane(){var i;const t=Jp(),e=(i=t==null?void 0:t.listView)!=null?i:"table",n=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:n;return e==="table"?null:s.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:s.jsxs("div",{children:["Showing ",r.length," / ",n.length]})}),e==="cards"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var o,c,u,h,m,g,v;return s.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(o=a.name)!=null?o:""}),s.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(c=a.server)!=null?c:""})]}),s.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",s.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(m=a.scrapbook)!=null?m:""]}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[s.jsx(Pb,{children:a.active?"Active":"Idle"}),a.favorite&&s.jsx(Pb,{children:" Fav"}),s.jsx(Pb,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(v=a.id)!=null?v:`${a.name}-${a.server}`)})}),e==="buttons"&&s.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var o,c,u,h;return s.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(o=a.name)!=null?o:"",s.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(c=a.server)!=null?c:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function Pb({children:t}){return s.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const my="stats_public",iL="toplists_players_v1",one="v1",lne=`snapshot:${one}`,lx=new Set,cne=(t,e,n)=>{lx.has(t)||(lx.add(t),n?console.warn(e,n):console.warn(e))},dne=(t,e,n)=>{lx.has(t)||(lx.add(t),n?console.error(e,n):console.error(e))};async function une(){try{const t=await pn(ps(Tt,my,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const n=(t.data()||{}).servers,r=u=>u.split(/[\n,;]+/g).map(h=>h.replace(/^[\s\["']+|[\s\]"']+$/g,"").trim()).filter(h=>!!h);let i=null,a=null,o;if(Array.isArray(n))i=n;else if(typeof n=="string"){const u=n.trim();if(!u)a="servers string empty";else if(u.startsWith("["))try{const h=JSON.parse(u);Array.isArray(h)?i=h:a="servers JSON parsed but not an array"}catch(h){const m=r(u);m.length?i=m:(a="servers JSON parse failed",o={message:h==null?void 0:h.message})}else{const h=r(u);h.length?i=h:(a="servers string is not a JSON array",o={preview:u.slice(0,120)})}}else n==null?a="servers field missing":a=`servers has unexpected type: ${typeof n}`;if(!Array.isArray(i))return cne("bundle_invalid","[toplistsFirestore] Server bundle missing/invalid, falling back to static config",o?{reason:a!=null?a:"unknown",...o}:{reason:a!=null?a:"unknown"}),{ok:!1,error:"decode_failed",detail:a!=null?a:"servers missing or invalid"};const c=[];for(const u of i){if(typeof u!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:u});continue}const h=u.trim();h&&c.push(h)}return{ok:!0,servers:c}}catch(t){return dne("bundle_firestore_error","[toplistsFirestore] Firestore error while loading toplist servers",{code:t==null?void 0:t.code,message:t==null?void 0:t.message}),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}const qs=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},li=t=>typeof t=="string"?t:null,hne=t=>typeof t=="string"?t:typeof t=="number"&&Number.isFinite(t)?String(t):null,aL=t=>{var i,a;if(!t||typeof t!="object")return null;const e=li(t.server),n=li(t.name),r=li(t.class);return!e||!n||!r?null:{playerId:hne((a=(i=t.playerId)!=null?i:t.id)!=null?a:t.player_id),flag:li(t.flag),deltaRank:qs(t.deltaRank),server:e,name:n,class:r,level:qs(t.level),guild:li(t.guild),main:qs(t.main),con:qs(t.con),sum:qs(t.sum),ratio:li(t.ratio),mainTotal:qs(t.mainTotal),conTotal:qs(t.conTotal),sumTotal:qs(t.sumTotal),xpProgress:qs(t.xpProgress),xpTotal:qs(t.xpTotal),mine:qs(t.mine),treasury:qs(t.treasury),lastScan:li(t.lastScan),deltaSum:qs(t.deltaSum)}},mne=t=>{var a,o,c,u;if(!t||typeof t!="object")return null;const e=li(t.server),n=(a=li(t.name))!=null?a:li(t.guildId),r=(o=li(t.guildId))!=null?o:n;if(!e||!n||!r)return null;const i=qs((u=(c=t.sumAvg)!=null?c:t.avgSumBaseTotal)!=null?u:t.sum);return{guildId:r,server:e,name:n,memberCount:qs(t.memberCount),hofRank:qs(t.hofRank),lastScan:li(t.lastScan),sumAvg:i,avgLevel:qs(t.avgLevel),avgTreasury:qs(t.avgTreasury),avgMine:qs(t.avgMine),avgBaseMain:qs(t.avgBaseMain),avgConBase:qs(t.avgConBase),avgSumBaseTotal:qs(t.avgSumBaseTotal),avgAttrTotal:qs(t.avgAttrTotal),avgConTotal:qs(t.avgConTotal),avgTotalStats:qs(t.avgTotalStats)}};async function pne(t){var i;const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=`ToplistsPlayers:${e}`;Jx(n);const r=Bn(n);try{const a=ps(Tt,my,iL,"lists","latest_toplists","servers",e),o=await An(r,a,()=>pn(a),{label:"ToplistsPlayers"});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.players)?c.players:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing players array"};const h=[];for(const m of u){const g=aL(m);if(!g)return console.error("[toplistsFirestore] Latest snapshot row decode failed",m),{ok:!1,error:"decode_error",detail:"invalid player row"};h.push(g)}return{ok:!0,snapshot:{server:(i=li(c.server))!=null?i:e,updatedAt:qs(c.updatedAt),players:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{un(r),Zx(n),ey(n)}}async function gne(t){var i;const e=(t||"").trim();if(!e)return{ok:!1,error:"decode_error",detail:"missing doc id"};const n=`ToplistsPlayersCompare:${e}`;Jx(n);const r=Bn(n);try{const a=ps(Tt,my,iL,"lists","latest_toplists","servers",e),o=await An(r,a,()=>pn(a),{label:`ToplistsPlayersCompare:${e}`});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.players)?c.players:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing players array"};const h=[];for(const m of u){const g=aL(m);if(!g)return console.error("[toplistsFirestore] Snapshot row decode failed",m),{ok:!1,error:"decode_error",detail:"invalid player row"};h.push(g)}return{ok:!0,snapshot:{server:(i=li(c.server))!=null?i:e,updatedAt:qs(c.updatedAt),players:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{un(r),Zx(n),ey(n)}}const oL=(t,e)=>`${lne}:${t}:${e}`,fne=t=>`toplists:compare:${t}`,Rb=new Map,Zj=t=>{const e=new Date(t);return e.setMinutes(0,0,0),e.getTime()<=t&&e.setHours(e.getHours()+1),e.getTime()},e2=t=>{try{if(typeof localStorage=="undefined")return null;const e=localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return!n||typeof n!="object"||typeof n.expiresAt!="number"||!("snapshot"in n)?null:n}catch(e){return null}},vne=t=>t==null||typeof t=="string"&&t.includes("/"),lL=t=>{const e=t==null?void 0:t.players;return Array.isArray(e)?e.some(n=>n&&!vne(n.ratio)):!1},t2=(t,e)=>{try{if(typeof localStorage=="undefined")return;localStorage.setItem(t,JSON.stringify(e))}catch(n){}},s2=t=>{try{if(typeof localStorage=="undefined")return;localStorage.removeItem(t)}catch(e){}};async function xne(t){const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=oL("players",e),r=Date.now(),i=e2(n);if(i){if(r<i.expiresAt&&!lL(i.snapshot))return{ok:!0,snapshot:i.snapshot};s2(n)}const a=await pne(e);return a.ok&&t2(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:Zj(r)}),a}async function yne(t,e){const n=(t||"").trim();if(!n)return{ok:!1,error:"decode_error",detail:"missing doc id"};const r=fne(n),i=Date.now(),a=e2(r);if(a){if(i<a.expiresAt&&!lL(a.snapshot))return{ok:!0,snapshot:a.snapshot};s2(r)}const o=Rb.get(n);if(o)return o;const c=(async()=>{const u=await gne(n);if(u.ok){const h=Zj(i);t2(r,{snapshot:u.snapshot,fetchedAt:i,expiresAt:h})}return u})();Rb.set(n,c);try{return await c}finally{Rb.delete(n)}}async function bne(t){var i;const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=`ToplistsGuilds:${e}`;Jx(n);const r=Bn(n);try{const a=ps(Tt,my,"toplists_guilds_v1","lists","latest_toplists","servers",e),o=await An(r,a,()=>pn(a),{label:"ToplistsGuilds"});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.guilds)?c.guilds:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing guilds array"};const h=[];for(const m of u){const g=mne(m);if(!g)return console.error("[toplistsFirestore] Latest guild snapshot row decode failed",m),{ok:!1,error:"decode_error",detail:"invalid guild row"};h.push(g)}return{ok:!0,snapshot:{server:(i=li(c.server))!=null?i:e,updatedAt:qs(c.updatedAt),guilds:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{un(r),Zx(n),ey(n)}}async function _ne(t){const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=oL("guilds",e),r=Date.now(),i=e2(n);if(i){if(r<i.expiresAt)return{ok:!0,snapshot:i.snapshot};s2(n)}const a=await bne(e);return a.ok&&t2(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:Zj(r)}),a}const wne={EU:[],US:[],INT:[],Fusion:[]},jne=["EU","US","INT","Fusion"],Sne=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function cL(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=Sne(r);e[i].add(r)});const n={...wne};return jne.forEach(r=>{n[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),n}const Nne="EU",Lb=cL(Jj.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),dL=A.createContext(null),m3=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]);function kne(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&m3(t.servers,e.servers)&&m3(t.classes,e.classes)}function Cne(t,e){return t.key===e.key&&t.dir===e.dir}const pv=t=>t.trim().toUpperCase(),uL=t=>t!=null?t.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/-+/g,"-"):"",Tne=t=>{if(!Array.isArray(t))return[];const e=new Set;for(const n of t){const r=pv(String(n||""));r&&e.add(r)}return Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},Ine=t=>{if(!Array.isArray(t))return[];const e=new Set;for(const n of t){const r=uL(n);r&&e.add(r)}return Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{sensitivity:"base"}))},Db=t=>{var v,b;if(t==null)return null;if(typeof t=="number")return t<1e12?t*1e3:t;const e=String(t).trim();if(!e)return null;if(/^\d{10,13}$/.test(e)){const _=Number(e);return Number.isFinite(_)?_<1e12?_*1e3:_:null}const n=e.split(/\s+/),r=(v=n[0])!=null?v:"",i=(b=n[1])!=null?b:"",a=r.split(".");if(a.length!==3)return null;const o=Number(a[0]),c=Number(a[1]),u=Number(a[2]);if(!Number.isFinite(o)||!Number.isFinite(c)||!Number.isFinite(u))return null;let h=0,m=0;if(i){const _=i.split(":");if(_.length<2||(h=Number(_[0]),m=Number(_[1]),!Number.isFinite(h)||!Number.isFinite(m)))return null}const g=new Date(u,c-1,o,h,m,0,0);return g.getFullYear()!==u||g.getMonth()!==c-1||g.getDate()!==o?null:g.getTime()};function Ene({children:t}){const[e,n]=A.useState({group:Nne,servers:[],classes:[],timeRange:"all"}),[r,i]=A.useState({key:"sum",dir:"desc"}),[a,o]=A.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null,rowLimit:null}),c=A.useRef(new Map),u=null,[h,m]=A.useState(Lb),g=A.useMemo(()=>Tne(e.servers),[e.servers]),v=A.useMemo(()=>Ine(e.classes),[e.classes]),b=A.useMemo(()=>g,[g]),_=A.useMemo(()=>b.join(","),[b]),k=A.useCallback(N=>{n(x=>{const w=typeof N=="function"?N(x):{...x,...N};return kne(x,w)?x:w})},[]),I=A.useCallback(N=>{i(x=>{const w=typeof N=="function"?N(x):N;return Cne(x,w)?x:w})},[]);A.useEffect(()=>{let N=!1;return(async()=>{const x=await une();if(!N){if(x.ok){const w=cL(x.servers);if(Object.values(w).some(j=>j.length>0)){m(w);return}}m(Lb)}})().catch(x=>{N||(console.error("[ToplistsProvider] unexpected error while loading server list",x),m(Lb))}),()=>{N=!0}},[]),A.useEffect(()=>{let N=!1;if(!b.length)return o({rows:[],loading:!1,error:$n.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."),lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null,rowLimit:null}),()=>{N=!0};const x=S=>{const C=[];let M=null,T=0;for(const F of S){F.updatedAt!=null&&(M=M==null?F.updatedAt:Math.max(M,F.updatedAt));const D=Array.isArray(F.players)?F.players:[];T=Math.max(T,D.length);for(const V of D)C.push(V.server?V:{...V,server:F.server})}return{rows:C,updatedAt:M,rowLimit:T||null}},w=[],L=[];for(const S of b){const C=c.current.get(S);C?w.push(C.snapshot):L.push(S)}const j=x(w);return L.length===0?(o({rows:j.rows,loading:!1,error:null,lastUpdatedAt:j.updatedAt,nextUpdateAt:null,ttlSec:null,listId:_||null,rowLimit:j.rowLimit}),()=>{N=!0}):(o(S=>({...S,rows:j.rows,lastUpdatedAt:j.updatedAt,rowLimit:j.rowLimit,listId:_||null,loading:!0,error:null})),(async()=>{const S=await Promise.all(L.map(D=>xne(D)));if(N)return;const C=[...w];let M=null,T=null;if(S.forEach((D,V)=>{var K;const z=L[V]||"";D.ok?(c.current.set(z,{snapshot:D.snapshot,cachedAt:Date.now()}),C.push(D.snapshot)):M||(M=D.error,T=(K=D.detail)!=null?K:null)}),!C.length){const D=T?` (${T})`:"";let V="Firestore Fehler";M==="not_found"?V=$n.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."):M==="decode_error"&&(V="Fehler beim Lesen der Daten"),o({rows:[],loading:!1,error:`${V}${D}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:_||null,rowLimit:null});return}const F=x(C);o({rows:F.rows,loading:!1,error:null,lastUpdatedAt:F.updatedAt,nextUpdateAt:null,ttlSec:null,listId:_||null,rowLimit:F.rowLimit})})().catch(S=>{N||(console.error("[ToplistsProvider] unexpected error",S),o({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:_||null,rowLimit:null}))}),()=>{N=!0})},[_]);const R=A.useMemo(()=>{let N=Array.isArray(a.rows)?[...a.rows]:[];if(!N.length)return N;const x=(D,V)=>{const z=typeof D=="number"&&Number.isFinite(D)?D:0,K=typeof V=="number"&&Number.isFinite(V)?V:0,W=z+K;if(!(W>0))return{label:"",mainRatio:null};const U=Math.round(z/W*100),J=100-U;return{label:`${U}/${J}`,mainRatio:U}};N=N.map(D=>{var W,U;const{label:V,mainRatio:z}=x(D.main,D.con),K=((W=D.main)!=null?W:0)+((U=D.con)!=null?U:0);return{...D,ratio:V,_ratioLabel:V,_ratioMain:z,_calculatedSum:K}});const w=g,L=w.length?new Set(w):null,j=v,S=j.length?new Set(j):null,C=e.timeRange==="all"?null:Number(String(e.timeRange).replace("d","")),M=C&&Number.isFinite(C)?Date.now()-C*864e5:null;N=N.filter(D=>{if(L&&!L.has(pv(D.server))||S&&!S.has(uL(D.class)))return!1;if(M!=null){const V=Db(D.lastScan);if(V!=null&&V<M)return!1}return!0}),r.dir;const T=(D,V)=>{if(D==null&&V==null)return 0;if(D==null)return 1;if(V==null)return-1;const z=D-V;return r.dir==="asc"?z:-z},F=(D,V)=>{var X,Y,se,ce,_e,Ae,ee,le,te,ye;const z=pv(String((X=D.server)!=null?X:"")),K=pv(String((Y=V.server)!=null?Y:"")),W=(_e=(ce=(se=D.playerId)!=null?se:D.id)!=null?ce:D.name)!=null?_e:"",U=(le=(ee=(Ae=V.playerId)!=null?Ae:V.id)!=null?ee:V.name)!=null?le:"",J=`${z}__${String(W).trim()}__${String((te=D.class)!=null?te:"").trim()}`,re=`${K}__${String(U).trim()}__${String((ye=V.class)!=null?ye:"").trim()}`,G=J.localeCompare(re,void 0,{numeric:!0,sensitivity:"base"});return r.dir==="asc"?G:-G};return N.sort((D,V)=>{var K,W;let z=0;switch(r.key){case"name":{const U=String((K=D.name)!=null?K:""),J=String((W=V.name)!=null?W:""),re=U.localeCompare(J,void 0,{sensitivity:"base"});z=r.dir==="asc"?re:-re;break}case"lastScan":{const U=Db(D.lastScan),J=Db(V.lastScan);z=T(U==null?null:U,J==null?null:J);break}case"main":z=T(D.main,V.main);break;case"con":z=T(D.con,V.con);break;case"sum":z=T(D._calculatedSum,V._calculatedSum);break;case"ratio":z=T(D._ratioMain,V._ratioMain);break;case"mine":z=T(D.mine,V.mine);break;case"treasury":z=T(D.treasury,V.treasury);break;case"mainTotal":z=T(D.mainTotal,V.mainTotal);break;case"conTotal":z=T(D.conTotal,V.conTotal);break;case"sumTotal":z=T(D.sumTotal,V.sumTotal);break;case"xpProgress":z=T(D.xpProgress,V.xpProgress);break;case"xpTotal":z=T(D.xpTotal,V.xpTotal);break;case"level":default:z=T(D.level,V.level);break}return z!==0?z:F(D,V)}),a.rowLimit!=null&&a.rowLimit>0&&N.length>a.rowLimit&&(N=N.slice(0,a.rowLimit)),N},[a.rows,a.rowLimit,e.timeRange,g,v,r]),P=A.useMemo(()=>({player:a,playerRows:R,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:u,serverGroups:h,filters:e,sort:r,setFilters:k,setSort:I}),[a,R,e,r,h,k,I,u]);return s.jsx(dL.Provider,{value:P,children:t})}function hL(){const t=A.useContext(dL);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}const Ane=t=>{const e=new Set;return t.forEach(n=>{const r=String(n||"").trim().toUpperCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))};function Pne({serverCodes:t}){const[e,n]=A.useState([]),[r,i]=A.useState(!1),[a,o]=A.useState(null),[c,u]=A.useState(null),[h,m]=A.useState(null),g=A.useMemo(()=>{var N;const I=Ane(t!=null?t:[]);if(I.length)return I;const R=((N=Jj.find(x=>x.id))==null?void 0:N.id)||"EU1",P=String(R).toUpperCase();return P?[P]:[]},[t]),v=A.useMemo(()=>g.join(","),[g]);A.useEffect(()=>{let I=!0;return i(!0),o(null),g.length?(Promise.all(g.map(R=>_ne(R))).then(R=>{if(!I)return;const P=[];let N=null,x=null;if(R.forEach(S=>{var C,M;if(S.ok)P.push(S.snapshot);else if(!N){const T=S;N=(C=T.error)!=null?C:null,x=(M=T.detail)!=null?M:null}}),!P.length){const S=x?` (${x})`:"";let C="Firestore Fehler";N==="not_found"?C=$n.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."):N==="decode_error"&&(C="Fehler beim Lesen der Daten"),n([]),u(null),m(null),o(`${C}${S}`);return}let w=null,L=0;const j=[];P.forEach(S=>{S.updatedAt!=null&&(w=w==null?S.updatedAt:Math.max(w,S.updatedAt));const C=Array.isArray(S.guilds)?S.guilds:[];L=Math.max(L,C.length),C.forEach(M=>{j.push((M.server,M))})}),n(j),u(w),m(L||null),o(null)}).catch(R=>{I&&(console.error("[GuildToplists] unexpected error",R),n([]),u(null),m(null),o("Unerwarteter Fehler beim Laden"))}).finally(()=>{I&&i(!1)}),()=>{I=!1}):(n([]),u(null),m(null),o($n.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server.")),i(!1),()=>{I=!1})},[v]);const b=I=>I==null?"":new Intl.NumberFormat("en").format(I),_=I=>{if(I==null)return null;const R=I<1e12?I*1e3:I;return new Date(R).toLocaleString()},k=A.useMemo(()=>{let I=Array.isArray(e)?[...e]:[];if(!I.length)return I;const R=(P,N)=>P==null&&N==null?0:P==null?1:N==null?-1:N-P;return I.sort((P,N)=>R(P.sumAvg,N.sumAvg)),h!=null&&h>0&&I.length>h&&(I=I.slice(0,h)),I},[e,h]);return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{opacity:.8,fontSize:12},children:["Guilds - snapshots (latest)",g.length?` - ${g.join(", ")}`:""]}),s.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[s.jsxs("div",{children:[r?"Loading...":a?"Error":"Ready"," - ",k.length," rows"]}),s.jsx("div",{children:c?`Updated: ${_(c)}`:null})]}),a&&s.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),s.jsx("div",{style:{wordBreak:"break-all"},children:a}),s.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{padding:"8px 6px"},children:"#"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Members"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Avg Lv"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Avg Sum"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"})]})}),s.jsxs("tbody",{children:[k.map((I,R)=>{var P;return s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("td",{style:{padding:"8px 6px"},children:R+1}),s.jsx("td",{style:{padding:"8px 6px"},children:I.server}),s.jsx("td",{style:{padding:"8px 6px"},children:I.name}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:b(I.memberCount)}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:b(I.avgLevel)}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:b(I.sumAvg)}),s.jsx("td",{style:{padding:"8px 6px"},children:(P=I.lastScan)!=null?P:""})]},`${I.guildId}-${I.server}`)}),r&&k.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:12},children:"Loading..."})}),!r&&!a&&k.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:12},children:"No results"})})]})]})})]})}const p3=t=>(t!=null?t:"").split(",").map(e=>e.trim()).filter(Boolean),cx=t=>{const e=new Set;return t.forEach(n=>{const r=n.trim().toUpperCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},mL=t=>{const e=String(t!=null?t:"").trim().toUpperCase();if(!e)return"";const n=e.match(/^S(\d+)(?:\.EU)?$/);if(n)return`EU${n[1]}`;const r=e.match(/^EU(\d+)$/);return r?`EU${r[1]}`:e},Rne=(t,e)=>`${mL(t)}__${e}`,Lne="sf_compare_snapshot",Dne=t=>{const e=new Set;return t.forEach(n=>{const r=mL(n).trim().toLowerCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},Mne=({scope:t,servers:e,month:n,mode:r})=>{const i=String(n!=null?n:"").trim(),a=Dne(e).join("+"),o=String(r!=null?r:"").trim(),c=o?`__${o.toLowerCase()}`:"";return`${Lne}__${t}__${a}__${i}${c}`},Fne=t=>{var e;try{if(typeof localStorage=="undefined")return null;const n=localStorage.getItem(t);if(!n)return null;const r=JSON.parse(n);if(!r||typeof r!="object")return null;const i=r;return!Array.isArray(i.rows)||!Array.isArray(i.baselineServers)||!Array.isArray(i.missingServers)||i.error!=null&&typeof i.error!="string"?null:{rows:i.rows,baselineServers:i.baselineServers.map(a=>String(a||"").trim()).filter(Boolean),missingServers:i.missingServers.map(a=>String(a||"").trim()).filter(Boolean),error:(e=i.error)!=null?e:null}}catch(n){return null}},Bne=(t,e)=>{try{if(typeof localStorage=="undefined")return;localStorage.setItem(t,JSON.stringify(e))}catch(n){}},E_=t=>{const e=new Set;return t.forEach(n=>{const r=n.trim().toLowerCase().replace(/[\s_]+/g,"-").replace(/-+/g,"-");r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{sensitivity:"base"}))},Am=t=>(t!=null?t:"").toString().trim().toLowerCase(),g3=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]),$ne=t=>t<10?`0${t}`:String(t),One=t=>`${t.getUTCFullYear()}-${$ne(t.getUTCMonth()+1)}`,Vne=t=>{const e=[],n=new Date;n.setUTCDate(1),n.setUTCMonth(n.getUTCMonth()-1);for(let r=0;r<t;r++)e.push(One(n)),n.setUTCMonth(n.getUTCMonth()-1);return e},Une="2026-01",pL=1440*60*1e3,zne=(t,e)=>{if(!t)return null;let n=null;if(typeof t=="number")n=t<1e12?t*1e3:t;else{const i=String(t).trim();if(!i)return null;if(/^\d{10,13}$/.test(i)){const a=Number(i);if(!Number.isFinite(a))return null;n=a<1e12?a*1e3:a}else n=gL(i)}if(n==null||!Number.isFinite(n))return null;const r=Math.max(0,Math.floor((e-n)/pL));return r<=0?"#34d399":r===1?"#4ade80":r<=3?"#a3e635":r<=7?"#facc15":r<=14?"#f97316":r<=30?"#ef4444":"#b91c1c"},ec=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},Ku=t=>t.trim().toUpperCase(),f3=t=>t!=null?t.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/-+/g,"-"):"";function gL(t){var v,b;const e=t.trim();if(!e)return null;const n=e.split(/\s+/),r=(v=n[0])!=null?v:"",i=(b=n[1])!=null?b:"",a=r.split(".");if(a.length!==3)return null;const o=Number(a[0]),c=Number(a[1]),u=Number(a[2]);if(!Number.isFinite(o)||!Number.isFinite(c)||!Number.isFinite(u))return null;let h=0,m=0;if(i){const _=i.split(":");if(_.length<2||(h=Number(_[0]),m=Number(_[1]),!Number.isFinite(h)||!Number.isFinite(m)))return null}const g=new Date(u,c-1,o,h,m,0,0);return g.getFullYear()!==u||g.getMonth()!==c-1||g.getDate()!==o?null:g.getTime()}const wp=t=>{if(t==null)return null;if(typeof t=="number")return t<1e12?t*1e3:t;const e=String(t).trim();if(!e)return null;if(/^\d{10,13}$/.test(e)){const n=Number(e);return Number.isFinite(n)?n<1e12?n*1e3:n:null}return gL(e)},Gne=(t,e)=>{const n=typeof t=="number"&&Number.isFinite(t)?t:0,r=typeof e=="number"&&Number.isFinite(e)?e:0,i=n+r;return i>0?Math.round(n/i*100):null},v3=(t,e,n)=>{if(!t||!e)return{days:null,perDay:null};const r=wp(t.lastScan),i=wp(e.lastScan);if(r==null||i==null)return{days:null,perDay:null};const a=Math.abs(r-i)/pL,o=Math.max(1,Math.round(a));let c=n;if(c==null){const h=ec(t.sum),m=ec(e.sum);m!=null&&(c=(h!=null?h:0)-m)}const u=c!=null?Math.round(c/o):null;return{days:o,perDay:u}},x3=t=>{var a,o,c,u,h;const e=Ku(String((a=t.server)!=null?a:"")),n=(c=(o=t.playerId)!=null?o:t.id)!=null?c:null,r=String((u=n!=null?n:t.name)!=null?u:"").trim(),i=String((h=t.class)!=null?h:"").trim();return`${e}__${r}__${i}`},Hne=(t,e)=>{const n=Array.isArray(e.servers)?e.servers:[],r=n.length?new Set(n.map(Ku)):null,i=Array.isArray(e.classes)?e.classes:[],a=i.length?new Set(i.map(f3)):null,o=e.timeRange==="all"?null:Number(String(e.timeRange).replace("d","")),c=o&&Number.isFinite(o)?Date.now()-o*864e5:null;return t.filter(u=>{var h;if(r&&!r.has(Ku(String((h=u.server)!=null?h:"")))||a&&!a.has(f3(u.class)))return!1;if(c!=null){const m=wp(u.lastScan);if(m!=null&&m<c)return!1}return!0})},y3=(t,e)=>{const n=(i,a)=>{if(i==null&&a==null)return 0;if(i==null)return 1;if(a==null)return-1;const o=i-a;return e.dir==="asc"?o:-o},r=(i,a)=>{const o=x3(i).localeCompare(x3(a),void 0,{numeric:!0,sensitivity:"base"});return e.dir==="asc"?o:-o};return t.sort((i,a)=>{var c,u;let o=0;switch(e.key){case"name":{const h=String((c=i.name)!=null?c:""),m=String((u=a.name)!=null?u:""),g=h.localeCompare(m,void 0,{sensitivity:"base"});o=e.dir==="asc"?g:-g;break}case"lastScan":{const h=wp(i.lastScan),m=wp(a.lastScan);o=n(h==null?null:h,m==null?null:m);break}case"main":o=n(i.main,a.main);break;case"con":o=n(i.con,a.con);break;case"sum":o=n(i._calculatedSum,a._calculatedSum);break;case"statsDay":o=n(i._statsPerDay,a._statsPerDay);break;case"ratio":o=n(i._ratioMain,a._ratioMain);break;case"mine":o=n(i.mine,a.mine);break;case"treasury":o=n(i.treasury,a.treasury);break;case"mainTotal":o=n(i.mainTotal,a.mainTotal);break;case"conTotal":o=n(i.conTotal,a.conTotal);break;case"sumTotal":o=n(i.sumTotal,a.sumTotal);break;case"xpProgress":o=n(i.xpProgress,a.xpProgress);break;case"xpTotal":o=n(i.xpTotal,a.xpTotal);break;case"level":default:o=n(i.level,a.level);break}return o!==0?o:r(i,a)}),t},Wne=["#f6e7a6","#f4de89","#f2d56d","#f0cc51","#edc236"],Kne=["#ffe4b3","#ffdda0","#ffd68d","#ffcf7a","#ffc867"],qne=["#9ec5ff","#8ab7ff","#76a9ff","#629bff","#4e8dff"],Qne={1:"#d8b4fe",2:"#c084fc",3:"#a855f7",4:"#f472b6"},Mb=(t,e)=>t&&t>0&&t<=e.length?e[t-1]:null,Yne=t=>{var e;return t&&(e=Qne[t])!=null?e:null},Tf=t=>t?{boxShadow:`inset 0 0 0 1px ${t}`,borderRadius:6,padding:"0 4px",display:"inline-flex",alignItems:"center"}:void 0;function Xne(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"statsDay":return{key:"statsDay",dir:"desc"};case"mine":return{key:"mine",dir:"desc"};case"mainTotal":return{key:"mainTotal",dir:"desc"};case"conTotal":return{key:"conTotal",dir:"desc"};case"sumTotal":return{key:"sumTotal",dir:"desc"};case"xpProgress":return{key:"xpProgress",dir:"desc"};case"xpTotal":return{key:"xpTotal",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function Jne(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function Zne(){return s.jsx(Ene,{children:s.jsx(ere,{})})}function ere(){var Re,Ee;const t=Jp(),{filterMode:e,setFilterMode:n,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:o,serverSheetOpen:c,setServerSheetOpen:u,servers:h,setServers:m,classes:g,setClasses:v,setGuilds:b,range:_,sortBy:k}=t,{serverGroups:I,player:R}=hL();hi();const[P,N]=ar(),x=P.get("server"),w=P.get("servers"),L=P.get("class"),j=P.get("classes"),C=P.get("tab")==="guilds"?"guilds":"players",[M,T]=q.useState((Re=P.get("compare"))!=null?Re:""),F=q.useMemo(()=>Vne(17).filter(Le=>Le>=Une),[]),D=((Ee=h==null?void 0:h.length)!=null?Ee:0)>0,V=q.useMemo(()=>cx(h!=null?h:[]),[h]),z=q.useMemo(()=>E_(g!=null?g:[]),[g]),K=q.useMemo(()=>{const Le=x!=null?x:w;return cx(p3(Le))},[x,w]),W=q.useMemo(()=>{const Le=L!=null?L:j;return E_(p3(Le))},[L,j]),U=x!=null||w!=null,J=L!=null||j!=null,re=q.useMemo(()=>P.toString(),[P]),G=V.join(","),X=z.join(","),Y=K.join(","),se=W.join(","),ce=q.useRef(null),_e=q.useRef(V),Ae=q.useRef(z),ee=q.useRef(m),le=q.useRef(v),te=q.useRef(null),ye=q.useRef(null),ke=async()=>{const Le=document.getElementById("toplist-export-content");if(!Le||!ye.current)return;const Fe=ye.current.offsetWidth,Be=Le.style.width;Le.style.width=`${Fe}px`;try{await new Promise(De=>requestAnimationFrame(()=>De())),await new Promise(De=>requestAnimationFrame(()=>De()));const je=Math.min(3,window.devicePixelRatio||2),ue=await gse(Le,{pixelRatio:je,cacheBust:!0,backgroundColor:"#0C1C2E"}),Pe=document.createElement("a");Pe.download="sfdatahub_toplist.png",Pe.href=ue,Pe.click()}finally{Le.style.width=Be}};q.useEffect(()=>{_e.current=V},[V]),q.useEffect(()=>{Ae.current=z},[z]),q.useEffect(()=>{ee.current=m},[m]),q.useEffect(()=>{le.current=v},[v]),q.useEffect(()=>{const Le=ce.current;ce.current=G,Le!=null&&Le!==G&&b([])},[G,b]),A.useEffect(()=>{if(te.current===re){te.current=null;return}if(U){const Le=K;g3(_e.current,Le)||ee.current(Le)}J&&!g3(Ae.current,W)&&le.current(W)},[re,U,J,Y,se]),A.useEffect(()=>{const Le=new URLSearchParams(P),Fe=G,Be=X;Fe?Le.set("server",Fe):Le.delete("server"),Le.delete("servers"),Be?Le.set("class",Be):Le.delete("class"),Le.delete("classes");const je=Le.toString();je!==re&&(te.current=je,N(Le,{replace:!0}))},[G,X,re,P,N]);const Me=q.useMemo(()=>{const Le=Array.isArray(R==null?void 0:R.rows)?R.rows:[];if(!Le.length)return[];const Fe=new Map;return Le.forEach(Be=>{var it;const je=String((it=Be.guild)!=null?it:"").trim();if(!je)return;const ue=Am(je);if(!ue)return;const Pe=Be.server&&String(Be.server).trim().toUpperCase()||(V.length===1?V[0]:""),De=Pe?`${je} (${Pe})`:je;Fe.has(ue)||Fe.set(ue,{value:je,label:De})}),Array.from(Fe.values()).sort((Be,je)=>Be.label.localeCompare(je.label,void 0,{sensitivity:"base"}))},[R==null?void 0:R.rows,V]);return s.jsxs(s.Fragment,{children:[s.jsxs(os,{mode:"card",title:"Top Lists",actions:s.jsx(sre,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?s.jsx(Fse,{compareMonth:M,setCompareMonth:T,monthOptions:F,guildOptions:Me,onExportPng:ke,exportDisabled:!D||C!=="players"||r!=="table"}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[s.jsx(ane,{}),C==="players"&&r==="table"&&s.jsx(tre,{servers:h!=null?h:[],classes:g!=null?g:[],range:_!=null?_:"all",sortKey:k!=null?k:"level",compareMonth:M,tableRef:ye}),C==="guilds"&&s.jsx(Pne,{serverCodes:h!=null?h:[]})]}),s.jsx(Ose,{mode:"modal",open:c,onClose:()=>u(!1),serversByRegion:I,selected:h,onToggle:Le=>m(Fe=>Fe.includes(Le)?Fe.filter(Be=>Be!==Le):[...Fe,Le]),onSelectAllInRegion:Le=>{var Fe;return m((Fe=I[Le])!=null?Fe:[])},onClearAll:()=>m([])}),s.jsx(Zse,{open:e==="sheet"&&a,onClose:()=>o(!1)})]})}function tre({servers:t,classes:e,range:n,sortKey:r,compareMonth:i,tableRef:a}){var Pe,De,it,yt;const{t:o}=Vs(),{guilds:c}=Jp(),{player:u,playerRows:h,playerLoading:m,playerError:g,playerLastUpdatedAt:v,playerScopeStatus:b,filters:_,sort:k,setFilters:I,setSort:R}=hL(),P=hi(),N=((Pe=t==null?void 0:t.length)!=null?Pe:0)>0;A.useEffect(()=>{const ie=n==="all"?"all":n===60?"30d":`${n}d`,he=cx(t),ve=E_(e),Te=Jne(he);I({servers:he,classes:ve,timeRange:ie,group:Te})},[t,e,n,I]),A.useEffect(()=>{const ie=Xne(r);R(ie)},[r,R]);const x=ie=>ie==null?"":new Intl.NumberFormat("en").format(ie),w=ie=>{if(ie==null)return"";const he=x(Math.abs(ie));return he?ie>0?`+${he}`:`-${he}`:String(ie)},L=(ie,he)=>{if(he)return{text:"n/a",variant:"na"};if(ie==null||ie==="")return{text:"n/a",variant:"na"};let ve=null;if(typeof ie=="number")ve=ie;else if(typeof ie=="string"){const at=ie.trim();if(!at||/^n\/a$/i.test(at))return{text:"n/a",variant:"na"};const rt=Number(at);ve=Number.isFinite(rt)?rt:null}if(ve==null||!Number.isFinite(ve))return{text:"n/a",variant:"na"};if(ve===0||Object.is(ve,-0))return{text:"-",variant:"zero"};const Te=x(Math.abs(ve));return{text:ve>0?`+${Te}`:`-${Te}`,variant:ve>0?"pos":"neg"}},j=(ie,he)=>{if(ie==null||he==null||!Number.isFinite(ie)||!Number.isFinite(he)||he===0)return"";const ve=ie/he;return ve>=1.25?"pos2":ve>=1.1?"pos1":ve>=.95?"mid0":ve>=.8?"mid1":ve>=.6?"neg1":ve>0?"neg2":"neg3"},S=ie=>{if(ie==null)return null;const he=ie<1e12?ie*1e3:ie;return new Date(he).toLocaleString()},C=ie=>ie?ie.toLocaleString():"",M=h||[],T=q.useMemo(()=>{const ie=(c||[]).map(Am).filter(Boolean);return ie.length?new Set(ie):null},[c]),F=q.useMemo(()=>(Array.isArray(u==null?void 0:u.rows)?u.rows:[]).some(he=>!!Am(he.guild)),[u==null?void 0:u.rows]),D=q.useMemo(()=>!T||!F?M:M.filter(ie=>{const he=Am(ie.guild);return he?T.has(he):!1}),[M,T,F]),[V,z]=ar(),[K,W]=q.useState({rows:[],loading:!1,baselineServers:[],missingServers:[],error:null}),U=!!i&&!K.loading,J=q.useMemo(()=>cx(t).join(","),[t]),re=q.useMemo(()=>J?J.split(",").filter(Boolean):[],[J]),G=q.useMemo(()=>{const ie=(K.baselineServers||[]).map(he=>String(he).trim().toUpperCase()).filter(Boolean);return new Set(ie)},[K.baselineServers]);A.useEffect(()=>{var ve;const ie=new URLSearchParams(V);i?ie.set("compare",i):ie.delete("compare"),((ve=V.get("compare"))!=null?ve:"")!==i&&z(ie,{replace:!0})},[i,V,z]),A.useEffect(()=>{let ie=!1;const he=String(i!=null?i:"").trim();if(!he||he.toLowerCase()==="off")return W({rows:[],loading:!1,baselineServers:[],missingServers:[],error:null}),()=>{ie=!0};if(!re.length)return W({rows:[],loading:!1,baselineServers:[],missingServers:[],error:null}),()=>{ie=!0};const Te=re.map(ut=>Rne(ut,he)),St=Mne({scope:"players",servers:re,month:he}),at=Fne(St);if(at)return W({...at,loading:!1}),()=>{ie=!0};const rt=ut=>{const _t=[];for(const ot of ut){const nt=Array.isArray(ot.players)?ot.players:[];for(const ts of nt)_t.push({...ts,server:ot.server||ts.server})}return _t};return W(ut=>({...ut,loading:!0,baselineServers:[],missingServers:[],error:null})),(async()=>{var qe;const ut=await Promise.all(Te.map(ft=>yne(ft)));if(ie)return;const _t=[],ot=[],nt=[];let ts=null,pt=null;ut.forEach((ft,Mt)=>{var Ns,dt;const Lt=Te[Mt];if(ft.ok){const ss=(Lt.split("__")[0]||"").trim();ot.push(ss),_t.push({...ft.snapshot,server:ss||ft.snapshot.server})}else{const ss=ft;nt.push(Lt),ts||(ts=(Ns=ss.error)!=null?Ns:null,pt=(dt=ss.detail)!=null?dt:null)}});const ne=_t.length?rt(_t):[],Oe=nt.length?nt.join(", "):null,Ve=nt.length?o("toplists.compareMissingSnapshot","Baseline missing for {{key}}.",{key:Oe!=null?Oe:""}):(qe=pt!=null?pt:ts)!=null?qe:null,ct={rows:ne,loading:!1,baselineServers:ot,missingServers:nt,error:Ve};W(ct),nt.length||Bne(St,{rows:ct.rows,baselineServers:ct.baselineServers,missingServers:[],error:null})})().catch(ut=>{if(ie)return;const _t=Te.join(", "),ot=o("toplists.compareMissingSnapshot","Baseline missing for {{key}}.",{key:_t});W({rows:[],loading:!1,baselineServers:[],missingServers:Te,error:ot}),console.warn("[ToplistsPlayersCompare] snapshot fetch failed",ut)}),()=>{ie=!0}},[i,J,o]);const X=q.useCallback(ie=>{var ve;const he=(ve=ie.playerId)!=null?ve:ie.id;return he?`id:${he}`:`${ie.server||"ALL"}:${ie.name}:${ie.class||""}`},[]),Y=q.useCallback(ie=>{var rt,ut,_t,ot;const he=Ku(String((rt=ie.server)!=null?rt:"")),ve=(ut=ie.playerId)!=null?ut:ie.id,Te=ve!=null?String(ve).trim():"";if(he&&Te)return`${he}__${Te}`;const St=String((_t=ie.name)!=null?_t:"").trim(),at=String((ot=ie.class)!=null?ot:"").trim();return he||St||at?`${he}__${St}__${at}`:X(ie)},[X]),se=q.useMemo(()=>{const ie=new Map;return U&&K.rows.forEach(he=>{const ve=Y(he);ie.has(ve)||ie.set(ve,he)}),ie},[U,K.rows,Y]),ce=q.useMemo(()=>U?D.map(ie=>{var Ns;const he=Y(ie),ve=se.get(he),Te=Ku(String((Ns=ie.server)!=null?Ns:"")),at=!G.has(Te)||!ve,rt=dt=>{if(at||!ve||dt==="ratio")return null;const ss=ec(ie[dt]),cs=ec(ve[dt]);return cs==null?null:(ss!=null?ss:0)-cs},ut=rt("level"),_t=rt("main"),ot=rt("con"),nt=rt("sum"),ts=rt("mainTotal"),pt=rt("conTotal"),ne=rt("sumTotal"),Oe=rt("xpProgress"),Ve=rt("xpTotal"),ct=rt("ratio"),qe=rt("mine"),ft=rt("treasury");let Mt=null,Lt=null;if(!at&&ve){const dt=v3(ie,ve,nt);Mt=dt.days,Lt=dt.perDay}return{...ie,_compareMissing:at,_statsPerDay:Lt,_statsDays:Mt,_delta:{level:ut,main:_t,con:ot,sum:nt,mainTotal:ts,conTotal:pt,sumTotal:ne,xpProgress:Oe,xpTotal:Ve,ratio:ct,mine:qe,treasury:ft}}}):D,[U,D,Y,se,G]),_e=q.useMemo(()=>{const ie=new Map;return ce.forEach(he=>{const ve=Y(he);ie.has(ve)||ie.set(ve,he)}),ie},[ce,Y]),Ae=q.useMemo(()=>{if(!U)return null;const ie=new Map;K.rows.forEach(ve=>{var at;const Te=Ku(String((at=ve.server)!=null?at:"")),St=(ie.get(Te)||0)+1;ie.set(Te,St)});let he=0;return ie.forEach(ve=>{ve>he&&(he=ve)}),he||null},[U,K.rows]),ee=q.useMemo(()=>{if(!U)return[];let ie=Array.isArray(K.rows)?[...K.rows]:[];return ie.length&&(ie=ie.map(he=>{var rt,ut;const ve=Gne(he.main,he.con),Te=_e.get(Y(he)),St=Te?v3(Te,he):{days:null,perDay:null},at=((rt=he.main)!=null?rt:0)+((ut=he.con)!=null?ut:0);return{...he,_ratioMain:ve,_statsPerDay:St.perDay,_statsDays:St.days,_calculatedSum:at}}),ie=Hne(ie,_),ie=y3(ie,k),Ae!=null&&Ae>0&&ie.length>Ae&&(ie=ie.slice(0,Ae)),T&&F&&(ie=ie.filter(he=>{const ve=Am(he.guild);return ve?T.has(ve):!1}))),ie},[U,K.rows,_,k,T,F,Ae,_e,Y]),le=q.useMemo(()=>{const ie=new Map;return U&&ee.forEach((he,ve)=>{const Te=Y(he);ie.has(Te)||ie.set(Te,ve+1)}),ie},[U,ee,Y]),te=q.useMemo(()=>{if(!U||k.key!=="statsDay")return ce;const ie=[...ce];return y3(ie,k),ie},[U,ce,k]),ye=q.useMemo(()=>{const ie=new Map;return te.forEach((he,ve)=>{const Te=Y(he);ie.has(Te)||ie.set(Te,ve+1)}),ie},[te,Y]),ke=q.useMemo(()=>te.map((ie,he)=>{var rt;if(!U)return{...ie,_rank:he+1};const ve=Y(ie),Te=(rt=ye.get(ve))!=null?rt:he+1,St=le.get(ve),at=St!=null&&Te!=null?St-Te:null;return{...ie,_rank:he+1,_rankDelta:at}}),[U,te,Y,le,ye]),Me=(()=>{if(!U)return null;const ie=ke.slice(0,100);let he=0,ve=0;return ie.forEach(Te=>{const St=Te._statsPerDay;typeof St=="number"&&Number.isFinite(St)&&(he+=St,ve+=1)}),ve?he/ve:null})(),Re=(()=>{if(!U)return null;let ie=null;return ke.forEach(he=>{const ve=he._statsPerDay;typeof ve=="number"&&Number.isFinite(ve)&&(ie==null||ve>ie)&&(ie=ve)}),ie})(),Ee=q.useMemo(()=>{const ie=new Map,he=ke,ve=at=>{var rt,ut;return(ut=(rt=at.playerId)!=null?rt:at.id)!=null?ut:X(at)},Te=at=>{const rt=ve(at);let ut=ie.get(rt);return ut||(ut={},ie.set(rt,ut)),ut},St=(at,rt)=>{const ut=he.map((_t,ot)=>{const nt=at(_t);return nt==null?null:{row:_t,value:nt,idx:ot}}).filter(Boolean);ut.sort((_t,ot)=>ot.value-_t.value||_t.idx-ot.idx),ut.slice(0,5).forEach((_t,ot)=>{Te(_t.row)[rt]=ot+1})};return St(at=>ec(at.main),"mainRank"),St(at=>ec(at.con),"conRank"),St(at=>ec(at.level),"levelRank"),he.forEach(at=>{const rt=ec(at.mine);if(rt==null)return;const ut=rt>=100?4:rt>=80?3:rt>=65?2:rt>=50?1:null;ut&&(Te(at).mineTier=ut)}),ie},[ke,X]),Le=Date.now(),Fe=N?m?"Loading...":g?"Error":"Ready":"No server selected",Be=ke.slice(0,50),je=ie=>{var ve;const he=(ve=ie.rows)!=null?ve:ke;return s.jsxs("table",{className:"toplists-table",style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{padding:"8px 6px"},children:"#"}),s.jsx("th",{style:{padding:"8px 6px"},children:" Rank"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"center",width:60},children:"Class"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Stats/Day"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"})]})}),s.jsxs("tbody",{children:[he.map((Te,St)=>{var lr,gn,ds,Es,fn,ht,ge,Yr,Xn,Xr,Ri,pi,gi,fi,ea,ta,ks,sa,cr,wr,Qs,Qa,No,na,dr;const at=U?Te._rankDelta:null,rt=Te._delta||{},ut=U?!!Te._compareMissing:!1,_t=U?L(at,ut):null,ot=U?Te._statsPerDay:null,nt=U?Te._statsDays:null,ts=ot==null?"-":x(ot),pt=nt==null?"-":`${nt}d`,ne=j(ot,Me),Ve=ot!=null&&Re!=null&&ot===Re?"stats-day-chip stats-day-chip--best":ne?`stats-day-chip stats-day-chip--${ne}`:"stats-day-chip",ct=zne(Te.lastScan,Le),qe=ry(Te.class,48),ft=(gn=(lr=Te.playerId)!=null?lr:Te.id)!=null?gn:null,Mt=(Yr=(ge=(fn=(ds=Te.identifier)!=null?ds:Te.playerIdentifier)!=null?fn:(Es=Te.values)==null?void 0:Es.Identifier)!=null?ge:(ht=Te.values)==null?void 0:ht.identifier)!=null?Yr:null,Lt=(Xr=typeof Mt=="string"&&Mt.trim()?Mt.trim():null)!=null?Xr:nh((Xn=Te.server)!=null?Xn:null,ft),Ns=ft!=null?ft:X(Te),dt=Ee.get(Ns),ss=Mb(dt==null?void 0:dt.mainRank,Wne),cs=Mb(dt==null?void 0:dt.conRank,Kne),bs=Mb(dt==null?void 0:dt.levelRank,qne),On=Yne(dt==null?void 0:dt.mineTier),Rn=(Ri=Te._calculatedSum)!=null?Ri:0,ln=(Ya,Jn,ko=!1)=>U?Jn?s.jsx("div",{style:{fontSize:11,opacity:.8},children:"-"}):Ya==null&&ko?null:s.jsx("div",{style:{fontSize:11,opacity:.8},children:Ya==null?o("toplists.deltaNew","NEW"):w(Ya)}):null,or=ie.interactive&&Lt?()=>{Lt&&P(`/player/${encodeURIComponent(Lt)}`)}:void 0;return s.jsxs("tr",{className:"toplists-row",style:{borderBottom:"1px solid #2C4A73",cursor:ie.interactive&&Lt?"pointer":void 0},onClick:or,children:[s.jsx("td",{style:{padding:"8px 6px"},children:St+1}),s.jsx("td",{style:{padding:"8px 6px"},children:_t?s.jsx("span",{className:`rank-delta-chip rank-delta-chip--${_t.variant}`,children:_t.text}):""}),s.jsx("td",{style:{padding:"8px 6px"},children:Te.server}),s.jsx("td",{style:{padding:"8px 6px"},children:Te.name}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"center"},children:s.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:qe?s.jsx("img",{src:qe,alt:(pi=Te.class)!=null?pi:"class",loading:ie.imgLoading,className:"class-icon-toplist",style:{display:"block",objectFit:"contain"}}):s.jsx("span",{children:(gi=Te.class)!=null?gi:""})})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Tf(bs),children:x(Te.level)}),ln((fi=rt.level)!=null?fi:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:(ea=Te.guild)!=null?ea:""}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Tf(ss),children:x(Te.main)}),ln((ta=rt.main)!=null?ta:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Tf(cs),children:x(Te.con)}),ln((ks=rt.con)!=null?ks:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{children:x(Rn)}),ln((sa=rt.sum)!=null?sa:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{className:Ve,children:ts}),s.jsx("div",{style:{fontSize:11,opacity:.8},children:pt})]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[s.jsx("span",{children:(wr=(cr=Te._ratioLabel)!=null?cr:Te.ratio)!=null?wr:""}),ln((Qs=rt.ratio)!=null?Qs:null,ut,!0)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Tf(On),children:x(Te.mine)}),ln((Qa=rt.mine)!=null?Qa:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{children:x(Te.treasury)}),ln((No=rt.treasury)!=null?No:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[s.jsx("span",{children:(na=Te.lastScan)!=null?na:""}),ct&&s.jsx("span",{"aria-hidden":!0,style:{width:8,height:8,borderRadius:"50%",background:ct,boxShadow:"0 0 6px rgba(0, 0, 0, 0.35)"}})]})})]},`${Te.name}__${Te.server}__${(dr=Te.class)!=null?dr:""}`)}),m&&ke.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:15,style:{padding:12},children:"Loading..."})}),!m&&!g&&he.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:15,style:{padding:12},children:"No results"})})]})]})},ue=typeof document!="undefined"?tE.createPortal(s.jsx("div",{id:"toplist-export-node","aria-hidden":"true",style:{position:"fixed",top:0,left:0,opacity:0,pointerEvents:"none",transform:"translate3d(-10000px, 0, 0)",contain:"layout paint style",zIndex:-1},children:s.jsx("div",{id:"toplist-export-content",style:{transform:"translateZ(0)",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},children:je({interactive:!1,imgLoading:"eager",rows:Be})})}),document.body):null;return s.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[s.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[s.jsxs("div",{children:[Fe," - ",ke.length," rows"]}),s.jsx("div",{children:v?`Updated: ${S(v)}`:null})]}),i&&K.error&&s.jsx("div",{style:{fontSize:12,color:"#ffb347"},children:K.error}),b&&s.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[s.jsxs("span",{children:["Scope ",b.scopeId,"  ",b.changesSinceLastRebuild,"/",(De=b.minChanges)!=null?De:"?"," changes since last rebuild"]}),s.jsxs("span",{children:["Auto rebuild at ",(it=b.minChanges)!=null?it:"?"," changes or after ",(yt=b.maxAgeDays)!=null?yt:"?"," days"]}),s.jsxs("span",{children:["Last rebuild: ",C(b.lastRebuildAt)]})]}),N&&g&&s.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),s.jsx("div",{style:{wordBreak:"break-all"},children:g}),s.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),N?s.jsx(s.Fragment,{children:s.jsx("div",{ref:a,style:{overflowX:"auto"},children:je({interactive:!0,imgLoading:"lazy"})})}):s.jsx("div",{style:{padding:12,color:"#B0C4D9"},children:"Please select at least one server."}),ue]})}function sre(){const[t,e]=ar(),r=t.get("tab")==="guilds"?"guilds":"players",i=a=>{const o=new URLSearchParams(t);o.set("tab",a),e(o)};return s.jsx("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:s.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[s.jsx(b3,{active:r==="players",onClick:()=>i("players"),label:"Players"}),s.jsx(b3,{active:r==="guilds",onClick:()=>i("guilds"),label:"Guilds"})]})})}function b3({active:t,onClick:e,label:n}){return s.jsx("button",{type:"button",onClick:e,className:["rounded-lg px-3 py-1.5 text-sm text-white border",t?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:n})}function nre(){return s.jsx(yse,{children:s.jsx(Zne,{})})}function rre(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Browse"})})}function ire(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Rankings"})})}function are(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Stats"})})}const ore="/assets/demo-avatar-special.png",_3={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!1,background:"gradient",frame:"",mirrorHorizontal:!0},lre={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},Ti=(t,e)=>Math.min(Math.max(Math.round(t),0),e),cre=t=>{var n;const e={..._3,...t||{}};return{...e,class:Ti(e.class,15),race:Ti(e.race,8),mouth:Ti(e.mouth,30),hair:Ti(e.hair,40),hairColor:Ti(e.hairColor,12),horn:Ti(e.horn,10),hornColor:Ti(e.hornColor,10),brows:Ti(e.brows,10),eyes:Ti(e.eyes,20),beard:Ti(e.beard,15),nose:Ti(e.nose,10),ears:Ti(e.ears,10),extra:Ti(e.extra,20),special:Ti(e.special,200),showBorder:!1,background:"",frame:"",mirrorHorizontal:(n=e.mirrorHorizontal)!=null?n:_3.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function fL({config:t,label:e,fallbackImage:n,fallbackLabel:r}){const i=A.useRef(null),a=A.useRef(null),[o,c]=A.useState("idle"),u=A.useMemo(()=>!t||Object.keys(t||{}).length===0?null:cre(t),[JSON.stringify(t||{})]);A.useEffect(()=>{let b=!1;if(!u){c("idle");return}c("loading");try{const _=i.current;if(!_){c("error");return}const k=new P5(_,u);a.current=k,c("ready")}catch(_){console.error("[PortraitMaker] failed to initialize",_),b||c("error")}return()=>{var _,k;b=!0;try{(k=(_=a.current)==null?void 0:_.dispose)==null||k.call(_)}catch(I){}a.current=null}},[u]);const h=u&&o!=="ready"?lre[o]:null,m=n||ore,g=r||e,v=!u||o==="error";return s.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[s.jsxs("div",{className:"avatar-portrait__canvas-shell",children:[!v&&s.jsx("canvas",{ref:i,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`}),v&&s.jsx("img",{src:m,alt:g,className:"avatar-portrait__fallback",draggable:!1,width:240,height:240})]}),h&&s.jsx("span",{className:"avatar-portrait__status",children:h})]})}const Fb=[{key:"str",label:"STR",name:"Strength"},{key:"dex",label:"DEX",name:"Dexterity"},{key:"int",label:"INT",name:"Intelligence"},{key:"con",label:"CON",name:"Constitution"},{key:"lck",label:"LCK",name:"Luck"}],dre=8,Bb=t=>typeof t=="number"&&Number.isFinite(t)?t.toLocaleString("de-DE"):"-",$b=(t,e)=>e<=0?0:Math.min(100,Math.max(0,t/e*100)),w3=t=>typeof t=="number"&&Number.isFinite(t);function ure({baseStats:t,totalStats:e,benchmarks:n,mode:r,onModeChange:i}){const[a,o]=A.useState("base"),[c,u]=A.useState(!1),[h,m]=A.useState(!1);A.useEffect(()=>{let x=null,w=null;return x=requestAnimationFrame(()=>{w=requestAnimationFrame(()=>u(!0))}),()=>{x!=null&&cancelAnimationFrame(x),w!=null&&cancelAnimationFrame(w)}},[]),A.useEffect(()=>{c&&!h&&m(!0)},[c,h]);const g=Fb.some(x=>w3(e==null?void 0:e[x.key])),b=(r!=null?r:a)==="total"&&g?"total":"base",_=x=>{x==="total"&&!g||(i?i(x):o(x))},k=Fb.map(x=>{const w=b==="total"?e:t,L=w==null?void 0:w[x.key];return w3(L)?L:0}),I=Math.max(...k,0),R=I>0?I*1.05:1,P=b==="base",N=b==="base"?"Base Stats":"Total Stats";return s.jsxs("div",{className:"player-profile__attribute-bars",children:[s.jsxs("div",{className:"player-profile__attribute-bars-head",children:[s.jsx("div",{className:"player-profile__card-label",children:N}),s.jsxs("div",{className:"player-profile__attribute-toggle",role:"group","aria-label":"Attribute Ansicht",children:[s.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${b==="base"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":b==="base",onClick:()=>_("base"),children:"Base"}),s.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${b==="total"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":b==="total",onClick:()=>_("total"),disabled:!g,children:"Total"})]})]}),s.jsx("div",{className:"player-profile__attribute-bars-list",children:Fb.map(x=>{var re,G,X;const w=b==="total"?e:t,L=Number(w==null?void 0:w[x.key])||0,j=P?(re=n==null?void 0:n.serverAvg)==null?void 0:re[x.key]:void 0,S=P?(G=n==null?void 0:n.guildAvg)==null?void 0:G[x.key]:void 0,C=P?(X=n==null?void 0:n.scaleMax)==null?void 0:X[x.key]:void 0,M=Number(j)||0,T=Number(S)||0,F=typeof C=="number"&&Number.isFinite(C),D=Math.max(F?Number(C):R,L,M,T,1),V=$b(L,D),z=$b(M,D),K=$b(T,D),W=Math.min(1,Math.max(0,V/100)),U=c?W:0,J=h?void 0:"500ms";return s.jsxs("div",{className:"player-profile__attribute-bar-row",children:[s.jsxs("div",{className:"player-profile__attribute-bar-label","aria-hidden":!0,children:[s.jsx("span",{className:"player-profile__attribute-bar-icon",children:x.label}),s.jsx("span",{className:"player-profile__attribute-bar-name",children:x.name})]}),s.jsxs("div",{className:"player-profile__attribute-bar-track",role:"presentation",children:[s.jsx("div",{className:"player-profile__attribute-bar-fill",style:{transform:`scaleX(${U})`,minWidth:L>0&&V<100?dre:void 0,transitionDuration:J},"aria-hidden":!0}),Number.isFinite(j)&&s.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--server",style:{left:`${z}%`},"aria-hidden":!0}),Number.isFinite(S)&&s.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--guild",style:{left:`${K}%`},"aria-hidden":!0})]}),s.jsxs("div",{className:"player-profile__attribute-bar-values",children:[s.jsx("div",{className:"player-profile__attribute-bar-value",children:Bb(L)}),Number.isFinite(j)&&s.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Server ",Bb(j)]}),Number.isFinite(S)&&s.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Gilde ",Bb(S)]})]})]},x.key)})})]})}const hre="_tooltipWrapper_cc7ym_1",mre="_bottom_cc7ym_13",pre="_bubble_cc7ym_13",gre="_tail_cc7ym_25",fre="_trigger_cc7ym_39",vre="_card_cc7ym_89",yu={tooltipWrapper:hre,bottom:mre,bubble:pre,tail:gre,trigger:fre,card:vre},n2=({content:t,children:e,className:n,placement:r="top"})=>{if(!t)return s.jsx(s.Fragment,{children:e});const i=r==="bottom"?` ${yu.bottom}`:"";return s.jsxs("div",{className:`${yu.tooltipWrapper}${i}${n?` ${n}`:""}`,children:[s.jsx("div",{className:yu.trigger,children:e}),s.jsxs("div",{className:yu.bubble,role:"tooltip",children:[s.jsx("div",{className:yu.card,children:t}),s.jsx("div",{className:yu.tail})]})]})},xre=t=>{if(t==null||!Number.isFinite(t))return{level:"unknown",label:"Unknown",hint:"Scan history unavailable"};const e=Math.max(0,Math.floor(t));return e===0?{level:0,label:"Scanned today",hint:"No rescan needed"}:e===1?{level:1,label:"Very fresh",hint:"No rescan needed"}:e<=3?{level:2,label:"Fresh",hint:"No rescan needed"}:e<=7?{level:3,label:"Recent",hint:"Rescan recommended"}:e<=14?{level:4,label:"Aging",hint:"Rescan recommended"}:e<=30?{level:5,label:"Outdated",hint:"Rescan strongly recommended"}:{level:6,label:"Stale",hint:"Rescan strongly recommended"}},yre=t=>{if(t==null||!Number.isFinite(t))return null;const e=Math.max(0,Math.floor(t));return e===0?"today":e===1?"1 day ago":`${e} days ago`};function bre({label:t,size:e=40}){const n=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return s.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:n||"?"})}function _re({className:t,label:e,size:n=40}){const r=c=>c.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=_r.find(c=>r(c.label)===i)||_r.find(c=>r(c.label).startsWith(i)||i.startsWith(r(c.label))),o=a?Pi(a.iconUrl,n*2):null;return o?s.jsx("div",{className:"player-profile__class-avatar",style:{width:n,height:n},children:s.jsx("img",{src:o,alt:"",draggable:!1})}):s.jsx(bre,{label:e,size:n})}function wre({data:t,loading:e,onAction:n}){const[r,i]=A.useState("base"),a=_=>_.toLowerCase().replace(/[^a-z0-9]+/g,""),o=A.useMemo(()=>xre(t.lastScanDays),[t.lastScanDays]),c=A.useMemo(()=>{const _=[];t.lastScanAtLabel&&_.push(`Last scan: ${t.lastScanAtLabel}`);const k=yre(t.lastScanDays);return k&&_.push(`Age: ${k}`),o.hint&&_.push(o.hint),_.join(" | ")},[t.lastScanAtLabel,t.lastScanDays,o.hint]),u=_r.find(_=>a(_.label)===a(t.className||""))||_r.find(_=>a(_.label).startsWith(a(t.className||""))||a(t.className||"").startsWith(a(_.label))),h=t.portraitFallbackUrl||(u?Pi(u.iconUrl,420):void 0)||"/assets/demo-avatar-special.png",m=t.portraitFallbackLabel||t.className||t.playerName,g=t.hasPortrait===!1?void 0:t.portrait,v=_=>typeof _=="number"&&Number.isFinite(_)?_.toLocaleString("de-DE"):"-",b=A.useMemo(()=>t.metrics.map(_=>{var k;return _.label==="Total Base Stats"&&r==="total"?{..._,label:"Total Stats",value:v((k=t.totalStatsValue)!=null?k:0)}:_}),[t.metrics,t.totalStatsValue,r]);return s.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[s.jsxs("div",{className:"player-profile__hero-portrait",children:[s.jsxs("div",{className:"player-profile__identity player-profile__identity--overlay",children:[s.jsx(_re,{className:t.className,label:t.playerName,size:48}),s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__player-name",children:t.playerName}),s.jsxs("div",{className:"player-profile__player-meta",children:[s.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&s.jsxs("span",{children:[" ",t.guild]}),t.server&&s.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&s.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),s.jsx(n2,{content:c,children:s.jsxs("div",{className:"player-profile__freshness",children:[s.jsx("span",{"aria-hidden":!0,className:`player-profile__freshness-dot player-profile__freshness-dot--${o.level}`}),s.jsx("span",{className:"player-profile__freshness-label",children:o.label}),s.jsx("span",{"aria-hidden":!0,className:"player-profile__freshness-info",children:""})]})})]})]}),s.jsx(fL,{config:g,label:t.playerName,fallbackImage:h,fallbackLabel:m})]}),s.jsxs("div",{className:"player-profile__hero-body",children:[s.jsx("div",{className:"player-profile__hero-metrics",children:b.map(_=>s.jsxs("div",{className:"player-profile__hero-metric",children:[s.jsx("div",{className:"player-profile__hero-metric-label",children:_.label}),s.jsx("div",{className:"player-profile__hero-metric-value",children:_.value}),_.hint&&s.jsx("div",{className:"player-profile__hero-metric-hint",children:_.hint})]},_.label))}),t.baseStats&&s.jsx(ure,{baseStats:t.baseStats,totalStats:t.totalStats,benchmarks:t.baseStatBenchmarks,mode:r,onModeChange:i}),t.badges.length>0&&s.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(_=>s.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${_.tone||"neutral"}`,title:_.hint,children:[_.icon&&s.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:_.icon}),s.jsx("span",{children:_.label}),s.jsx("strong",{children:_.value})]},_.label))}),t.actions.length>0&&s.jsx("div",{className:"player-profile__hero-actions",children:t.actions.map(_=>s.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||_.disabled,title:_.title,onClick:()=>n==null?void 0:n(_.key),children:_.label},_.key))})]})]})}const jre=q.memo(wre),Ob=600,gv=240,Sre=[80,160,240,320,400,480,560],Nre=[40,80,120,160,200],bu=40,kre=560,Vb=40,j3=200,If=gv,Cre=(t,e,n)=>Math.max(e,Math.min(n,t));function Tre({points:t,avgValue:e=null,showAvg:n=!0,showFill:r=!0,showDots:i=!0,showXLabels:a=!0,className:o}){const c=A.useId(),u=kre-bu,h=j3-Vb,{linePath:m,areaPath:g,dots:v,avgY:b,labels:_}=A.useMemo(()=>{if(!t.length)return{linePath:"",areaPath:"",dots:[],avgY:null,labels:[]};let k=Math.min(...t),I=Math.max(...t);const P=Math.max(1,I-k)*.1;k-=P,I+=P;const N=Math.max(1,I-k),x=F=>t.length>1?bu+F/(t.length-1)*u:bu,w=F=>Cre(Vb+(1-(F-k)/N)*h,Vb,j3);if(t.length===1){const F=bu,D=bu+u*.1,V=w(t[0]),z=`${[`M${F},${V}`,`L${D},${V}`,`L${D},${If}`,`L${F},${If}`,"Z"].join(" ")}`;return{linePath:`M${F},${V} L${D},${V}`,areaPath:z,dots:i?[{x:(F+D)/2,y:V}]:[],avgY:n&&e!=null?w(e):null,labels:[{x:bu,text:"t0"}]}}const L=t.map((F,D)=>({x:x(D),y:w(F)})),j=L.map((F,D)=>`${D===0?"M":"L"}${F.x},${F.y}`).join(" "),S=`${j} L${L[L.length-1].x},${If} L${L[0].x},${If} Z`,C=i?L:[],M=n&&e!=null?w(e):null,T=t.map((F,D)=>({x:x(D),text:`t${D}`}));return{linePath:j,areaPath:S,dots:C,avgY:M,labels:T}},[t,e,n,i,u,h]);return s.jsxs("svg",{viewBox:`0 0 ${Ob} ${gv}`,preserveAspectRatio:"none",className:`player-profile__trend-chart ${o!=null?o:""}`.trim(),role:"img","aria-label":"Anchored trend",children:[s.jsxs("g",{className:"player-profile__trend-grid",opacity:"0.55",stroke:"rgba(43,76,115,0.55)",strokeWidth:1,children:[Sre.map((k,I)=>s.jsx("line",{x1:k,x2:k,y1:0,y2:gv},`gv-${I}`)),Nre.map((k,I)=>s.jsx("line",{x1:0,x2:Ob,y1:k,y2:k},`gh-${I}`))]}),n&&b!=null&&s.jsxs("g",{className:"player-profile__trend-avg",children:[s.jsx("text",{x:12,y:20,className:"player-profile__trend-avg-label",children:"Avg"}),s.jsx("line",{x1:0,x2:Ob,y1:b,y2:b})]}),r&&g&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:c,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"rgba(92, 139, 198, 0.28)"}),s.jsx("stop",{offset:"100%",stopColor:"rgba(92, 139, 198, 0)"})]})}),r&&g&&s.jsx("path",{d:g,className:"player-profile__trend-area",fill:`url(#${c})`}),m&&s.jsx("path",{d:m,className:"player-profile__trend-line",fill:"none"}),v.map((k,I)=>s.jsx("circle",{cx:k.x,cy:k.y,r:4,className:"player-profile__trend-dot"},`dot-${I}`)),a&&s.jsx("g",{className:"player-profile__trend-xlabels",children:_.map((k,I)=>s.jsx("text",{x:k.x,y:gv-8,textAnchor:"middle",children:k.text},`lbl-${I}`))})]})}const Ub=t=>t==null?"-":t.toLocaleString("de-DE");function Ire({title:t,subtitle:e,badgeLabel:n="Line + Avg marker",series:r,className:i}){const{latest:a,start:o,delta:c,deltaPct:u,avg:h,xLabels:m}=A.useMemo(()=>{const v=Array.isArray(r.points)?r.points:[],b=v.length?v[v.length-1]:null,_=v.length?v[0]:null,k=b!=null&&_!=null?b-_:null,I=k!=null&&_&&Math.abs(_)>0?k/_*100:null,R=v.length?v.reduce((N,x)=>N+x,0)/v.length:null,P=v.map((N,x)=>`t${x}`);return{latest:b,start:_,delta:k,deltaPct:I,avg:R,xLabels:P}},[r.points]),g=u!=null?`${u>=0?"+":""}${u.toFixed(1)}%`:c!=null?`${c>=0?"+":""}${c.toLocaleString("de-DE")}`:"+0";return s.jsxs("article",{className:`anchored-card ${i!=null?i:""}`.trim(),children:[s.jsxs("header",{className:"anchored-card__header",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"anchored-card__title",children:[t,n&&s.jsx("span",{className:"anchored-card__badge",children:n})]}),e&&s.jsx("div",{className:"anchored-card__subtitle",children:e})]}),s.jsxs("div",{className:"anchored-card__delta anchored-card__delta--up","aria-label":"Delta",children:[" ",g]})]}),s.jsx("div",{className:"anchored-card__chart",children:s.jsx(Tre,{points:r.points,avgValue:h,showAvg:!0,showDots:!0,showFill:!0,showXLabels:!0})}),s.jsxs("footer",{className:"anchored-card__footer",children:[s.jsxs("div",{className:"anchored-card__kpis",children:[s.jsxs("div",{className:"anchored-card__kpi",children:[s.jsx("strong",{children:Ub(a)}),s.jsx("span",{children:"Base Stats (latest)"})]}),s.jsxs("div",{className:"anchored-card__kpi",children:[s.jsx("strong",{children:Ub(o)}),s.jsx("span",{children:"Server  marker"})]}),s.jsxs("div",{className:"anchored-card__pill anchored-card__pill--up",children:[" ",Ub(c)]})]}),s.jsxs("div",{className:"anchored-card__legend",children:[s.jsxs("span",{children:[s.jsx("span",{className:"anchored-card__dot"})," Player"]}),s.jsxs("span",{children:[s.jsx("span",{className:"anchored-card__dot anchored-card__dot--muted"})," Average marker"]})]})]})]})}function Ere({data:t}){return s.jsxs("div",{className:"player-profile__tab-panel",children:[s.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>s.jsxs("article",{className:"player-profile__card",children:[s.jsx("div",{className:"player-profile__card-label",children:e.label}),s.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&s.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),s.jsxs("div",{className:"player-profile__section",children:[s.jsxs("header",{className:"player-profile__section-head",children:[s.jsx("h3",{children:"Attribute"}),s.jsx("span",{children:"Basis vs. Gesamt"})]}),s.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>s.jsxs("div",{className:"player-profile__attr-card",children:[s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__attr-label",children:e.label}),s.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&s.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),s.jsxs("div",{className:"player-profile__split",children:[s.jsxs("div",{className:"player-profile__section",children:[s.jsx("header",{className:"player-profile__section-head",children:s.jsx("h3",{children:"Resistenzen"})}),s.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>s.jsxs("li",{children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]}),s.jsxs("div",{className:"player-profile__section",children:[s.jsx("header",{className:"player-profile__section-head",children:s.jsx("h3",{children:"konomie"})}),s.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>s.jsxs("li",{children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function Are({items:t}){return s.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>s.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[s.jsxs("div",{className:"player-profile__progress-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__card-label",children:e.label}),s.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),s.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),s.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:s.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&s.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function Pre({series:t}){return s.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var n;return s.jsx(Ire,{title:e.label,subtitle:(n=e.subLabel)!=null?n:"Looks natural even when the values are high (no 0-baseline).",series:e},e.label)})})}function Rre({rows:t}){return s.jsxs("div",{className:"player-profile__tab-panel",children:[s.jsx("div",{className:"player-profile__section-head",children:s.jsx("h3",{children:"Serververgleich"})}),s.jsx("div",{className:"player-profile__comparison-wrapper",children:s.jsxs("table",{className:"player-profile__comparison",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Kategorie"}),s.jsx("th",{children:"Spieler"}),s.jsx("th",{children:"Cluster"}),s.jsx("th",{children:""})]})}),s.jsx("tbody",{children:t.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.label}),s.jsx("td",{children:e.playerValue}),s.jsx("td",{children:e.benchmark}),s.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function Lre({entries:t}){return s.jsx("div",{className:"player-profile__tab-panel",children:s.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>s.jsxs("li",{children:[s.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),s.jsxs("div",{className:"player-profile__timeline-card",children:[s.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),s.jsx("div",{className:"player-profile__timeline-title",children:e.title}),s.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}const Dre={genderName:"male",class:1,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:1,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},Ii=(t,e,n=0)=>{if(!Array.isArray(t)||e<0)return n;const r=t[e],i=typeof r=="number"?r:Number(r);return Number.isFinite(i)?i:n},Mre=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}};function S3(t){const e=Ii(t,18),n=Ii(t,21),r=Ii(t,25),i=Ii(t,705),a=Ii(t,28)&255,o=Math.floor(e/100),c=Math.max(o,1),u=Math.floor(e/100);return{...Dre,genderName:a===1?"female":"male",class:Ii(t,29)&65535,race:Ii(t,27)&65535,mouth:Ii(t,17),hair:Math.max(e%100,0),brows:Math.max(Ii(t,19)%100,0),eyes:Ii(t,20),beard:Math.max(n%100,0),nose:Ii(t,22),ears:Ii(t,23),extra:Ii(t,24),horn:Math.max(r%100,0),special:Math.min(Ii(t,26),0),hairColor:c,hornColor:a===1?1:u===0?c:u,frame:Mre(i)}}function Fre(t){return typeof t!="string"||!t.trim()?[]:t.split("/").map(e=>{const n=Number(e.trim());return Number.isFinite(n)?n:0})}const Bre={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},Os=(t,e=0)=>{const n=typeof t=="number"?t:Number(t);return Number.isFinite(n)?n:e},$re=t=>t&&typeof t=="object"&&Object.values(t).some(e=>e!=null),N3=t=>{if(typeof t!="string")return[];const e=t.trim();if(!e)return[];const n=e.toLowerCase().replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"");return n?[n]:[]},dm=new Map,k3="avatar-cache:",Ore=1440*60*1e3,Vre=async(t,e,n,r)=>{var P,N;const i=Number(t),a=String(t!=null?t:"").trim(),o=(P=N3(e)[0])!=null?P:"",c=typeof n=="string"&&n.trim()?n.trim():"",h=(x=>{if(!x)return"";const w=x.trim().toLowerCase();if(!w)return"";const L=w.split("/").filter(Boolean).pop()||w,[j,...S]=L.split("__"),C=S.join("__");if(j&&C){const M=N3(C)[0];if(M)return`${j}__${M}`}return a&&o?`${a}__${o}`:L.replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"")})(c)||(a&&o?`${a}__${o}`:"");if(!h)return null;const g=(()=>{var x;if(dm.has(h))return(x=dm.get(h))!=null?x:null;try{const w=typeof window!="undefined"?window.localStorage.getItem(`${k3}${h}`):null;if(!w)return null;const L=JSON.parse(w);return!(L!=null&&L.data)||typeof L.savedAt!="number"||!(Date.now()-L.savedAt<Ore)?null:L.data}catch(w){return null}})();if(g)return dm.set(h,g),g;const v=await An(r!=null?r:null,ps(Tt,"linked_players","avatars","avatars",h),()=>pn(ps(Tt,"linked_players","avatars","avatars",h)));if(!v.exists())return dm.set(h,null),null;const b=v.data(),_=(b==null?void 0:b.portrait)||{},k=$re(_),I={genderName:(_==null?void 0:_.genderName)==="female"?"female":"male",classId:Os(_==null?void 0:_.classId),raceId:Os(_==null?void 0:_.raceId),mouth:Os(_==null?void 0:_.mouth),hair:Os(_==null?void 0:_.hair),hairColor:Os(_==null?void 0:_.hairColor),horn:Os(_==null?void 0:_.horn),hornColor:Os(_==null?void 0:_.hornColor),brows:Os(_==null?void 0:_.brows),eyes:Os(_==null?void 0:_.eyes),beard:Os(_==null?void 0:_.beard),nose:Os(_==null?void 0:_.nose),ears:Os(_==null?void 0:_.ears),extra:Os(_==null?void 0:_.extra),special:Os(_==null?void 0:_.special),frameId:Os(_==null?void 0:_.frameId),frame:typeof(_==null?void 0:_.frame)=="string"?_.frame:void 0,background:typeof(_==null?void 0:_.background)=="string"?_.background:void 0,showBorder:typeof(_==null?void 0:_.showBorder)=="boolean"?_.showBorder:void 0,mirrorHorizontal:typeof(_==null?void 0:_.mirrorHorizontal)=="boolean"?_.mirrorHorizontal:void 0},R={playerId:Os(b==null?void 0:b.playerId,i),server:typeof(b==null?void 0:b.server)=="string"?b.server:e,portrait:I,updatedAt:(N=b==null?void 0:b.updatedAt)!=null?N:null,hasPortraitData:k};if(dm.set(h,R),typeof window!="undefined")try{window.localStorage.setItem(`${k3}${h}`,JSON.stringify({data:R,savedAt:Date.now()}))}catch(x){}return R},Ure=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}},zre=["","goldenFrame","twitchFrame","zenFrame","silverFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"],Gre=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],Hre=(t,e)=>{const n=(t==null?void 0:t.portrait)||{},r={...Bre,...e||{}},i=Ure(Os(n.frameId,0)),a=typeof n.frame=="string"&&zre.includes(n.frame)?n.frame:"",o=typeof n.background=="string"&&Gre.includes(n.background)?n.background:r.background;return{...r,genderName:n.genderName==="female"?"female":r.genderName,class:Os(n.classId,r.class),race:Os(n.raceId,r.race),mouth:Os(n.mouth,r.mouth),hair:Os(n.hair,r.hair),hairColor:Os(n.hairColor,r.hairColor),horn:Os(n.horn,r.horn),hornColor:Os(n.hornColor,r.hornColor),brows:Os(n.brows,r.brows),eyes:Os(n.eyes,r.eyes),beard:Os(n.beard,r.beard),nose:Os(n.nose,r.nose),ears:Os(n.ears,r.ears),extra:Os(n.extra,r.extra),special:Os(n.special,r.special),frame:i||a||r.frame||"",background:o,showBorder:typeof n.showBorder=="boolean"?n.showBorder:r.showBorder,mirrorHorizontal:typeof n.mirrorHorizontal=="boolean"?n.mirrorHorizontal:r.mirrorHorizontal}};function vL(t,e){var n;if(typeof window=="undefined")return null;try{const r=window.localStorage.getItem(t);if(!r)return null;const i=JSON.parse(r);return!i||typeof i.cachedAt!="number"||Date.now()-i.cachedAt>=e?null:(n=i.data)!=null?n:null}catch(r){return null}}function xL(t,e){if(typeof window!="undefined")try{const n={cachedAt:Date.now(),data:e};window.localStorage.setItem(t,JSON.stringify(n))}catch(n){}}const Wre=["Statistiken","Charts","Fortschritt","Vergleich","Historie"],C3="sf_profile_player__",T3="sf_profile_player_server_index",Kre=3600*1e3,qre="playerProfile:charts:monthly3:",Qre=720*60*1e3,yL=3,zb="Last 3 months",A_="history_monthly",bL=["honor","ehre","honour","honorpoints","ehrepunkte"],_L=[{key:"str",label:"Strke",base:["Base Strength","Strke","basestrength"],total:["Strength"]},{key:"dex",label:"Geschick",base:["Base Dexterity","Geschick","basedexterity"],total:["Dexterity"]},{key:"int",label:"Intelligenz",base:["Base Intelligence","Intelligenz","baseintelligence"],total:["Intelligence"]},{key:"con",label:"Konstitution",base:["Base Constitution","Konstitution","baseconstitution"],total:["Constitution"]},{key:"lck",label:"Glck",base:["Base Luck","Glck","baseluck"],total:["Luck"]}];function Yre(){var J,re,G,X;const t=Cx(),e=ir(),n=t.identifier||t.id||t.pid||t.playerId||t.player||"",r=cj(n),i=lj((J=new URLSearchParams(e.search).get("server"))!=null?J:""),a=((re=r==null?void 0:r.playerId)!=null?re:n).trim(),o=(X=(G=r==null?void 0:r.serverKey)!=null?G:i)!=null?X:null,c=hi(),[u,h]=A.useState(!0),[m,g]=A.useState(null),[v,b]=A.useState(null),[_,k]=A.useState("Statistiken"),[I,R]=A.useState(null),[P,N]=A.useState(null),[,x]=A.useState(!1),[,w]=A.useState(null),[L,j]=A.useState(null),S=A.useRef(!1),C=A.useRef(null),M=A.useRef(null),T=A.useRef(null),F=A.useRef(null);A.useEffect(()=>{let Y=!1;async function se(){var ye,ke,Me,Re,Ee,Le,Fe,Be,je,ue,Pe,De,it,yt,ie,he,ve,Te,St,at,rt,ut,_t,ot,nt,ts,pt,ne,Oe,Ve,ct,qe,ft,Mt,Lt,Ns,dt,ss,cs,bs,On,Rn,ln,or,lr,gn,ds,Es,fn;h(!0),g(null);const ce=(a||"").trim();if(!ce){b(null),g("Kein Spieler ausgewhlt."),h(!1);return}const _e=()=>{if(typeof window=="undefined")return{};try{const ht=window.localStorage.getItem(T3);if(!ht)return{};const ge=JSON.parse(ht);return ge&&typeof ge=="object"?ge:{}}catch(ht){return{}}},ee=(o?String(o).trim().toLowerCase().replace(/[^a-z0-9]/g,""):"")||_e()[ce],le=ee?`${C3}${ee}__${ce}`:null;if(le){const ht=vL(le,Kre);if(ht&&typeof ht=="object"){b(ht),h(!1);return}}let te=null;try{te=Bn("PlayerProfile:load");let ht=null;if(r!=null&&r.identifier){const vi=ps(Tt,`players/${r.identifier}/latest/latest`),ja=await An(te,vi,()=>pn(vi));ja.exists()&&(ht=ja.data())}if(!ht&&o){const vi=xh(Tt,"latest"),ja=En(vi,Kr("playerId","==",ce),Kr("server","==",o),rr(1)),xi=await wn(te,{path:"players/latest (collectionGroup)"},()=>_n(ja));xi.empty||(ht=(ke=(ye=xi.docs[0])==null?void 0:ye.data())!=null?ke:null)}if(!ht)throw new Error("Spieler nicht gefunden.");if(!ht||typeof ht!="object")throw new Error("Spieler nicht gefunden.");const ge=typeof ht.values=="object"&&ht.values?ht.values:{};ht.timestampRaw!=null&&ge.timestampRaw==null&&(ge.timestampRaw=ht.timestampRaw);const Yr=Array.isArray(ht.save)&&ht.save||Array.isArray(ge==null?void 0:ge.save)&&ge.save||Array.isArray(ht.saveArray)&&ht.saveArray||Array.isArray(ge==null?void 0:ge.saveArray)&&ge.saveArray||void 0,Xn=typeof ht.save=="string"&&ht.save||typeof(ge==null?void 0:ge.save)=="string"&&ge.save||typeof ht.saveString=="string"&&ht.saveString||typeof(ge==null?void 0:ge.saveString)=="string"&&ge.saveString||void 0,Xr=String((Me=ht==null?void 0:ht.playerId)!=null?Me:ce).trim()||ce,Ri=(Ee=nr((Re=ht.level)!=null?Re:ge==null?void 0:ge.Level))!=null?Ee:null,pi=((Fe=(Le=ht.className)!=null?Le:ge==null?void 0:ge.Class)!=null?Fe:null)||null,gi=((je=(Be=ht.guildName)!=null?Be:ge==null?void 0:ge.Guild)!=null?je:null)||null,fi=ge["Guild Identifier"],ea=typeof fi=="string"&&fi.trim()||null,ta=ge["Guild Joined"],ks=typeof ta=="string"&&ta.trim()||null,sa=(Pe=(ue=ht.name)!=null?ue:ge==null?void 0:ge.Name)!=null?Pe:Xr,cr=(it=(De=ht.server)!=null?De:ge==null?void 0:ge.Server)!=null?it:null,wr=typeof cr=="string"?cr.trim().toLowerCase().replace(/\./g,"_"):"",Qs=(he=(ie=(yt=typeof ht.identifier=="string"&&ht.identifier.trim()?ht.identifier.trim():null)!=null?yt:typeof(ge==null?void 0:ge.Identifier)=="string"&&ge.Identifier.trim()?ge.Identifier.trim():null)!=null?ie:typeof(ge==null?void 0:ge.identifier)=="string"&&ge.identifier.trim()?ge.identifier.trim():null)!=null?he:nh(cr,Xr),Qa=(at=(St=(Te=(ve=ht.avatarIdentifier)!=null?ve:ht.identifier)!=null?Te:ge==null?void 0:ge.avatarIdentifier)!=null?St:ge==null?void 0:ge.identifier)!=null?at:wr?`${Xr}__${wr}`:null,No=(ut=nr((rt=ht.totalStats)!=null?rt:ge==null?void 0:ge["Total Stats"]))!=null?ut:null,na=(nt=nr((ot=(_t=ht.base)!=null?_t:ge==null?void 0:ge.Base)!=null?ot:ge==null?void 0:ge.base))!=null?nt:null,dr=(ne=nr((pt=(ts=ht.con)!=null?ts:ge==null?void 0:ge.Con)!=null?pt:ge==null?void 0:ge.con))!=null?ne:null,Ya=(ct=nr((Ve=(Oe=ht.attributeTotal)!=null?Oe:ge==null?void 0:ge["Attribute Total"])!=null?Ve:ge==null?void 0:ge.AttributeTotal))!=null?ct:null,Jn=(Mt=nr((ft=(qe=ht.conTotal)!=null?qe:ge==null?void 0:ge["Con Total"])!=null?ft:ge==null?void 0:ge.ConTotal))!=null?Mt:null,ko=(gn=(lr=(or=(ln=(Rn=(On=(bs=(cs=(ss=(dt=(Ns=(Lt=ht.scrapbookPct)!=null?Lt:ht.scrapbook)!=null?Ns:ge==null?void 0:ge.scrapbookPct)!=null?dt:ge==null?void 0:ge.scrapbook)!=null?ss:ge==null?void 0:ge["Scrapbook %"])!=null?cs:ge==null?void 0:ge.Scrapbook)!=null?bs:ge==null?void 0:ge.Album)!=null?On:ge==null?void 0:ge["Album %"])!=null?Rn:ge==null?void 0:ge.AlbumPct)!=null?ln:ge==null?void 0:ge.AlbumPercent)!=null?or:ge==null?void 0:ge.AlbumPercentage)!=null?lr:ge==null?void 0:ge.AlbumCompletion)!=null?gn:ge==null?void 0:ge.AlbumProgress,Md=(ds=nr(ko))!=null?ds:null,Fd=(Es=nr(ht.timestamp))!=null?Es:nr(ge==null?void 0:ge.timestamp),bl=wL(Fd),_l=typeof ht.portrait=="object"?ht.portrait:typeof ht.portraitOptions=="object"?ht.portraitOptions:typeof(ge==null?void 0:ge.portraitOptions)=="object"?ge.portraitOptions:void 0,ra={id:Xr,name:sa,className:pi,level:Ri,guild:gi,guildIdentifier:ea,guildJoined:ks,server:cr,identifier:Qs,avatarIdentifier:Qa,scrapbookPct:Md,totalStats:No,base:na,con:dr,conTotal:Jn,attributeTotal:Ya,lastScanDays:bl,values:ge,portraitConfig:_l,saveArray:Yr,saveString:Xn};if(typeof window!="undefined")try{const ja=String((fn=ra.server)!=null?fn:"").trim().toLowerCase().replace(/[^a-z0-9]/g,"")||"unknown",xi=`${C3}${ja}__${ce}`,Br=_e();Br[ce]=ja,xL(xi,ra),window.localStorage.setItem(T3,JSON.stringify(Br))}catch(vi){}Y||b(ra)}catch(ht){Y||(b(null),g((ht==null?void 0:ht.message)||"Unbekannter Fehler beim Laden."))}finally{un(te),Y||h(!1)}}return se(),()=>{Y=!0}},[a,o,r==null?void 0:r.identifier]),A.useEffect(()=>{j(null),S.current=!1,C.current=null,M.current=null},[a,v==null?void 0:v.server]),A.useEffect(()=>{T.current=L},[L]);const D=Y=>{k(Y)};A.useEffect(()=>()=>{F.current&&clearTimeout(F.current)},[]),A.useEffect(()=>{let Y=!1;return(async()=>{var Ae,ee;const ce=Bn("PlayerProfile:avatar");if(!(v!=null&&v.id)){N(null),x(!1),w(null),un(ce);return}const _e=nr(v.id);if(_e==null){N(null),x(!1),w(null),un(ce);return}x(!0),w(null);try{const le=await Vre(_e,(Ae=v.server)!=null?Ae:"",(ee=v.avatarIdentifier)!=null?ee:void 0,ce);Y||N(le)}catch(le){Y||(N(null),w(le instanceof Error?le:new Error("AvatarSnapshot failed")))}finally{un(ce),Y||x(!1)}})(),()=>{Y=!0}},[v==null?void 0:v.id,v==null?void 0:v.server]),A.useEffect(()=>{if(_!=="Charts"||!(v!=null&&v.id))return;const Y=`${SL(v.server)}:${v.id}`;if(S.current||M.current===Y&&C.current&&T.current)return;const se=Jre(v.id,v.server),ce=eie(se);if(ce){const le=Wb(ce.months);j(te=>{const ye=um(te,le);return ye||console.log(`[charts] load set from cache key=${Y} months=${ce.months.length}`),ye?te:le}),T.current=Wb(ce.months),C.current="cache",M.current=Y;return}let _e=!1;S.current=!0,console.log(`[charts] load start key=${Y} source=firestore`);const Ae=Bn("PlayerProfile:charts");return(async()=>{try{const le=v.identifier;if(!le){if(Wm(se),!_e){const Ee=Kb(v);T.current=Ee,C.current="fallback",M.current=Y,j(Le=>um(Le,Ee)?Le:Ee),console.log(`[charts] load done key=${Y} months=0 (missing identifier)`)}return}const te=pl(Tt,`players/${le}/history_monthly`),ye=En(te,Qi(h_(),"desc"),rr(3)),Me=(await wn(Ae,{path:te.path},()=>_n(ye))).docs.map(Ee=>Zre(Ee)).filter(Ee=>!!Ee);if(!Me.length){if(Wm(se),!_e){const Ee=Kb(v);T.current=Ee,C.current="fallback",M.current=Y,j(Le=>um(Le,Ee)?Le:Ee),console.log(`[charts] load done key=${Y} months=0 (fallback)`)}return}const Re=Wb(Me);_e||(T.current=Re,C.current="monthly",M.current=Y,j(Ee=>um(Ee,Re)?Ee:Re),tie(se,Me),console.log(`[charts] load done key=${Y} months=${Me.length}`))}catch(le){if(!_e){const te=Kb(v);T.current=te,C.current="fallback",M.current=Y,j(ye=>um(ye,te)?ye:te),console.log(`[charts] load error key=${Y}`,le)}}finally{S.current=!1,un(Ae)}})(),()=>{_e=!0}},[_,v==null?void 0:v.id,v==null?void 0:v.identifier,v==null?void 0:v.server]);const V=A.useMemo(()=>v?rie(v,P,L):null,[v,P,L]),z=A.useCallback(Y=>{R(Y),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>R(null),3500)},[]),K=A.useCallback(async Y=>{var se,ce,_e;if(v){if(Y==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const Ae=(_e=(ce=v.identifier)!=null?ce:nh((se=v.server)!=null?se:null,v.id))!=null?_e:v.id,ee=`${window.location.origin}/players/profile/${encodeURIComponent(Ae)}`;try{await navigator.clipboard.writeText(ee),z("Profil-Link wurde kopiert.")}catch(le){z("Konnte Link nicht kopieren.")}}return}if(Y==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:v.name,text:`Shakes & Fidget Charakter ${v.name}`,url:window.location.href}),z("Profil geteilt.")}catch(Ae){z("Teilen abgebrochen.")}return}if(Y==="guild"){v.guildIdentifier&&c(`/guild/${v.guildIdentifier}`);return}if(Y==="rescan"){z("Rescan-Queue folgt aktuell noch Platzhalter.");return}}},[c,z,v]),W=()=>{if(!V)return null;switch(_){case"Statistiken":return s.jsx(Ere,{data:V.stats});case"Charts":return s.jsx(Pre,{series:V.charts});case"Fortschritt":return s.jsx(Are,{items:V.progress});case"Vergleich":return s.jsx(Rre,{rows:V.comparison});case"Historie":return s.jsx(Lre,{entries:V.history});default:return null}},U=()=>s.jsxs("div",{className:"player-profile__loading",children:[s.jsx("p",{children:m!=null?m:"Spieler nicht gefunden."}),s.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>c("/"),style:{marginTop:12},children:"Zur Startseite"})]});return s.jsxs("div",{className:"player-profile",children:[u&&!v&&s.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!u&&(!v||!V)&&U(),V&&s.jsxs(s.Fragment,{children:[s.jsx(jre,{data:V.hero,loading:u,onAction:K}),s.jsx(Xre,{message:I}),s.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:Wre.map(Y=>{const se=_===Y;return s.jsx("button",{type:"button",role:"tab","aria-selected":se,className:`player-profile__tab-button ${se?"player-profile__tab-button--active":""}`,onClick:()=>D(Y),children:Y},Y)})}),W()]})]})}const Xre=q.memo(({message:t})=>t?s.jsx("p",{className:"player-profile__hero-feedback",role:"status","aria-live":"polite",children:t}):null),nr=t=>{if(t==null||t==="")return null;if(typeof t=="number")return Number.isFinite(t)?t:null;const e=String(t).trim(),n=e.startsWith("-")?-1:1,r=e.replace(/^[+-]/,"").replace(/[\s%]/g,""),i=r.lastIndexOf(","),a=r.lastIndexOf("."),o=Math.max(i,a);let c="";if(o>-1){const h=r.slice(o+1).replace(/[^0-9]/g,""),m=r.slice(0,o).replace(/[^0-9]/g,"");h.length>0&&h.length<=2?c=`${m}.${h}`:c=(m+h).replace(/[^0-9]/g,"")}else c=r.replace(/[^0-9]/g,"");if(!c)return null;const u=Number(c)*n;return Number.isFinite(u)?u:null},wL=t=>{if(!t)return null;const e=Date.now()/1e3,n=Math.max(0,e-t);return Math.floor(n/86400)},Gb=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),jL=t=>{const e=new Map;return Object.entries(t||{}).forEach(([n,r])=>e.set(Gb(n),r)),{number(n,r=null){for(const i of n){const a=nr(e.get(Gb(i)));if(a!=null)return a}return r},text(n,r=null){for(const i of n){const a=e.get(Gb(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},SL=t=>typeof t!="string"?"unknown":t.trim().toLowerCase().replace(/\./g,"_")||"unknown",Jre=(t,e)=>`${qre}${SL(e)}:${t}`,ll=t=>typeof t=="number"&&Number.isFinite(t)?t:0,Hb=(t,e=3)=>{var r;const n=t.map(i=>Number.isFinite(i)?i:0);for(n.length||n.push(0);n.length<e;)n.unshift((r=n[0])!=null?r:0);return n.slice(-e)},dx=(t,e,n)=>[{label:"Level Verlauf",points:Hb(t),unit:"",subLabel:zb},{label:"Total Stats",points:Hb(e),unit:"",subLabel:zb},{label:"Honor",points:Hb(n),unit:"",subLabel:zb}],NL=t=>{const e=jL(t||{}),n=e.number(["level"]),r=e.number(bL);let a=e.number(["totalstats","stats"]);if(a==null){let o=0,c=0;_L.forEach(u=>{var m;const h=(m=e.number(u.total))!=null?m:e.number(u.base);h!=null&&(o+=h,c++)}),a=c?o:null}return{level:n,totalStats:a,honor:r}},Wb=t=>{if(!t.length)return dx([],[],[]);const e=[...t].sort((a,o)=>a.monthId.localeCompare(o.monthId)),n=e.map(a=>ll(a.values.level)),r=e.map(a=>ll(a.values.totalStats)),i=e.map(a=>ll(a.values.honor));return dx(n,r,i)},um=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++){if(t[n].label!==e[n].label||t[n].unit!==e[n].unit||t[n].subLabel!==e[n].subLabel||t[n].points.length!==e[n].points.length)return!1;for(let r=0;r<t[n].points.length;r++)if(t[n].points[r]!==e[n].points[r])return!1}return!0},Zre=t=>{var i,a,o;const e=typeof t.data=="function"?t.data():{},n=e!=null&&e.values&&typeof e.values=="object"?e.values:{},r=typeof(e==null?void 0:e.monthId)=="string"&&e.monthId?e.monthId:t.id;return r?{monthId:r,lastTs:(o=nr((a=(i=e==null?void 0:e.lastTs)!=null?i:e==null?void 0:e.lastTimestamp)!=null?a:e==null?void 0:e.lastTimestampRaw))!=null?o:null,values:NL(n)}:null},Wm=t=>{if(typeof window!="undefined")try{window.localStorage.removeItem(t)}catch(e){}},eie=t=>{if(typeof window=="undefined")return null;try{const e=window.localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e),r=(n==null?void 0:n.source)===A_,i=typeof n.fetchedAt=="number"&&n.version===yL,a=i&&Date.now()-n.fetchedAt<=Qre,o=Array.isArray(n.months)?n.months:null;if(!r||!i||!a||!o)return Wm(t),null;const c=o.map(u=>{var h,m,g,v,b,_;return!u||typeof u.monthId!="string"?null:{monthId:u.monthId,lastTs:typeof u.lastTs=="number"?u.lastTs:null,values:{level:(m=nr((h=u.values)==null?void 0:h.level))!=null?m:null,totalStats:(v=nr((g=u.values)==null?void 0:g.totalStats))!=null?v:null,honor:(_=nr((b=u.values)==null?void 0:b.honor))!=null?_:null}}}).filter(u=>!!u);return c.length<1?(Wm(t),null):{fetchedAt:n.fetchedAt,version:n.version,source:A_,months:c}}catch(e){return Wm(t),null}},tie=(t,e)=>{if(typeof window=="undefined"||e.length<1)return;const n={fetchedAt:Date.now(),version:yL,source:A_,months:e.map(r=>{var i,a,o;return{monthId:r.monthId,lastTs:r.lastTs,values:{level:(i=r.values.level)!=null?i:null,totalStats:(a=r.values.totalStats)!=null?a:null,honor:(o=r.values.honor)!=null?o:null}}})};try{window.localStorage.setItem(t,JSON.stringify(n))}catch(r){}},Kb=t=>{var r,i,a,o,c;const e=NL(t.values||{}),n={level:(i=(r=e.level)!=null?r:t.level)!=null?i:null,totalStats:(o=(a=e.totalStats)!=null?a:t.totalStats)!=null?o:null,honor:(c=e.honor)!=null?c:null};return dx([ll(n.level)],[ll(n.totalStats)],[ll(n.honor)])},sie=t=>{let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return()=>{e+=1831565813;let n=Math.imul(e^e>>>15,1|e);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}},gr=(t,e="-")=>t==null?e:t.toLocaleString("de-DE"),fv=t=>{if(t==null)return"-";const e=Math.floor(t*100)/100,n=e%1!==0;return`${e.toLocaleString("de-DE",{minimumFractionDigits:n?2:0,maximumFractionDigits:2})}%`},I3=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,E3=t=>{if(t==null)return null;const e=new Date(t*1e3);if(Number.isNaN(e.getTime()))return null;const n=r=>String(r).padStart(2,"0");return`${n(e.getDate())}.${n(e.getMonth()+1)}.${e.getFullYear()} ${n(e.getHours())}:${n(e.getMinutes())}`},nie=(t,e)=>{let n;const r=t.portraitConfig&&Object.keys(t.portraitConfig).length>0;if(Array.isArray(t.saveArray)&&t.saveArray.length>0)n=S3(t.saveArray);else if(t.saveString){const i=Fre(t.saveString);n=i.length>0?S3(i):void 0}else r&&(n={...t.portraitConfig});return e!=null&&e.hasPortraitData?{config:Hre(e,n),hasData:!0}:n?{config:n,hasData:!0}:{config:void 0,hasData:!1}},rie=(t,e,n)=>{var Te,St,at,rt,ut,_t,ot,nt,ts,pt,ne,Oe,Ve,ct,qe,ft,Mt,Lt,Ns;const r=t.values||{},i=jL(r),a=sie(t.id),o=nie(t,e),c=V4((Te=t.className)!=null?Te:void 0),u=Pi(c.url,420)||"/assets/demo-avatar-special.png",h=t.className?`Klassenbild ${t.className}`:"Portrait-Platzhalter",m=["album","album%","albumpct","albumpercent","albumpercentage","albumcompletion","albumprogress","scrapbook","scrapbook%","scrapbookpct","scrapbookpercent"],g=bL,v=["hofrank","halloffamerank","hofposition","halloffameposition","hofplatz","halloffame","hof"],b=["mount","reittier","mountname"],_=["mountpct","mountpercent","mountpercentage","mountspeed","mountbonus","mountvalue"],k=["guildrole","role","guildrank","gildenrolle"],I=(St=t.level)!=null?St:i.number(["level"]),R=(at=t.scrapbookPct)!=null?at:i.number(m),P=i.number(g),N=(rt=t.totalStats)!=null?rt:i.number(["totalstats","stats"]),x=_L,w={str:0,dex:0,int:0,con:0,lck:0},L={str:0,dex:0,int:0,con:0,lck:0};let j=!1,S=!1;x.forEach(dt=>{const ss=i.number(dt.base);ss!=null&&(w[dt.key]=ss,j=!0);const cs=i.number(dt.total);cs!=null&&(L[dt.key]=cs,S=!0)});const C=t.values||{},M=C&&typeof C=="object"&&typeof C.values=="object"?C.values:C,T=dt=>{const ss=String(dt!=null?dt:"0").replace(/[^\d-]/g,"");if(!ss)return 0;const cs=parseInt(ss,10);return Number.isFinite(cs)?cs:0},F=T(M.base),D=T(M.baseConstitution),V=T(M.attribute),z=T(M.constitution),K=j?Object.values(w).reduce((dt,ss)=>dt+ss,0):null,W=F+D,U=V+z,J=R!=null?R:null,re=(ut=i.number(["fortresslevel","fortress"]))!=null?ut:Math.round(a()*20)+30,G=(_t=i.number(["underworld","underworldlevel"]))!=null?_t:Math.round(a()*10)+20,X=(ot=i.number(["tower","towerfloor"]))!=null?ot:Math.round(a()*90)+10,Y=(nt=i.number(["pets","petprogress"]))!=null?nt:Math.round(a()*50)+25,se=(I!=null?I:0)*1200+(K!=null?K:0)+Math.round((R!=null?R:0)*3200),ce=i.text(b),_e=ce&&/[a-zA-Z]/.test(ce)||ce&&/%/.test(ce)?ce:null,Ae=(Ve=(Oe=(ne=(pt=(ts=r==null?void 0:r["Mount %"])!=null?ts:r==null?void 0:r["mount %"])!=null?pt:r==null?void 0:r.MountPct)!=null?ne:r==null?void 0:r.mountPct)!=null?Oe:r==null?void 0:r.MountBonus)!=null?Ve:r==null?void 0:r.mountBonus,ee=(ct=nr(Ae))!=null?ct:i.number(_),le=_e?nr((_e.match(/(\d+)\s*%/)||[])[1]):null,te=ee!=null?ee:le;let ye="-";_e?ye=te!=null&&!/%/.test(_e)?`${_e} (${Math.round(te)}%)`:_e:te!=null&&(ye=`${Math.round(te)}%`);const ke=i.text(k),Me=nr(r==null?void 0:r.Rank),Re=Me!=null?Me:i.number(v),Ee=i.text(["timestampraw"]),Le=i.number(["timestamp"]),Fe=Ee&&/^\s*\d+\s*$/.test(Ee)?(qe=E3(nr(Ee)))!=null?qe:Ee:(ft=Ee!=null?Ee:E3(Le))!=null?ft:"-",Be=(Mt=t.lastScanDays)!=null?Mt:Le!=null?wL(Le):null,je=[{label:"Last Scan",value:Fe},{label:"Level",value:I!=null?`Lvl ${gr(I)}`:"-"},{label:"Scrapbook",value:fv(J)},{label:"Total Base Stats",value:W!=null?gr(W):"-"}],ue=[{label:"Mount",value:ye!=null?ye:"-",tone:"neutral"},{label:"Honor",value:gr(P),tone:"success"},{label:"Gildenrolle",value:ke!=null?ke:"-",tone:"warning"},{label:"HoF",value:Re!=null?`#${gr(Re)}`:"-",tone:"neutral"}],Pe=j?w:void 0,De={playerName:t.name,className:t.className,guild:t.guild,server:t.server,guildIdentifier:t.guildIdentifier,guildJoined:t.guildJoined,levelLabel:I?`Level ${gr(I)}`:void 0,lastScanLabel:(Lt=I3(Be))!=null?Lt:void 0,lastScanAtLabel:Fe!=="-"?Fe:void 0,lastScanDays:Be,status:Be!=null&&Be<=2?"online":"offline",metrics:je,badges:ue,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guildIdentifier,title:t.guildIdentifier?void 0:"No guild linked in latest scan."},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:o.hasData?o.config:void 0,hasPortrait:o.hasData,portraitFallbackUrl:u,portraitFallbackLabel:h,baseStats:Pe,totalStats:S?L:void 0,totalStatsValue:U},it={summary:[{label:"Power Score",value:gr(se),hint:"Level * SumBase"},{label:"Honor",value:gr(P)},{label:"HoF Platz",value:Re?`#${gr(Re)}`:"-"},{label:"Letzter Scan",value:(Ns=I3(Be))!=null?Ns:"-"}],attributes:x.map(dt=>({label:dt.label,baseLabel:gr(i.number(dt.base)),totalLabel:i.number(dt.total)!=null?`Gesamt ${gr(i.number(dt.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(a()*40+40)}%`},{label:"Schatten",value:`${Math.round(a()*40+35)}%`},{label:"Frost",value:`${Math.round(a()*30+30)}%`},{label:"Licht",value:`${Math.round(a()*20+30)}%`}],resources:[{label:"Gold/h",value:`${gr(Math.round((I!=null?I:1)*(a()*8+3)))}k`},{label:"XP/h",value:`${gr(Math.round((I!=null?I:1)*(a()*5+2)))}k`},{label:"Mount Bonus",value:ye},{label:"Quest Slots",value:`${Math.round(a()*2)+3}`}]},yt=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(J!=null?J:0)/100),targetLabel:`${fv(J)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:J!=null&&J>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,X/100),targetLabel:`Ebene ${Math.round(X)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudebau",progress:Math.min(1,re/25),targetLabel:`Lvl ${Math.round(re)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,G/30),targetLabel:`Lvl ${Math.round(G)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,Y/100),targetLabel:`${Math.round(Y)} / 100`,meta:"Habitate offen"}],ie=n!=null?n:dx([ll(I)],[ll(N)],[ll(P)]),he=[{label:"Level",playerValue:I?`Lvl ${gr(I)}`:"-",benchmark:I?`Lvl ${gr(Math.round(I*.92))}`:"-",diffLabel:I?`+${Math.round(I*.08)}`:"-",trend:"up"},{label:"Power Score",playerValue:gr(se),benchmark:gr(Math.round(se*.9)),diffLabel:`+${gr(Math.round(se*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:fv(J),benchmark:`${Math.min(100,Math.round((J!=null?J:60)-8))}%`,diffLabel:J!=null?`+${Math.round(J-60)}%`:"-",trend:J!=null&&J>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(re)}`,benchmark:`Lvl ${Math.round(re-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(G)}`,benchmark:`Lvl ${Math.round(G-2)}`,diffLabel:"+2",trend:"neutral"}],ve=iie(t,i,a);return{hero:De,stats:it,progress:yt,charts:ie,comparison:he,history:ve}},iie=(t,e,n)=>{var o,c;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:Ef(Math.round(n()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:Ef(2),title:"Level-Up",description:`Erreichte Level ${gr(t.level)}`,tag:"Level"}),r.push({dateLabel:Ef(10),title:"Scrapbook Meilenstein",description:`${fv((o=t.scrapbookPct)!=null?o:Math.round(n()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:Ef(18),title:"Festung",description:`Fortress Level ${Math.round((c=e.number(["fortress"],Math.round(n()*20+15)))!=null?c:0)}`,tag:"Festung"}),r},Ef=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function qb(){return s.jsx(os,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:s.jsx(Yre,{})})}function lh(t,e=300){const[n,r]=q.useState(t);return q.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),n}function ch(t){const e=q.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[n,r]=q.useState(()=>e());return q.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=o=>r(o.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),n}const aie='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function dh(t,e){q.useEffect(()=>{var o;if(!e)return;const n=t.current;if(!n)return;const r=()=>n.querySelectorAll(aie);(o=r()[0])==null||o.focus();const a=c=>{if(c.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],m=u[u.length-1];c.shiftKey?document.activeElement===h&&(c.preventDefault(),m.focus()):document.activeElement===m&&(c.preventDefault(),h.focus())};return n.addEventListener("keydown",a),()=>n.removeEventListener("keydown",a)},[t,e])}const oie="_page_1jzf5_1",lie="_header_1jzf5_13",cie="_headerStack_1jzf5_25",die="_kicker_1jzf5_37",uie="_title_1jzf5_53",hie="_subtitle_1jzf5_65",mie="_headerActions_1jzf5_79",pie="_secondaryAction_1jzf5_89",gie="_infoStrip_1jzf5_131",fie="_infoCard_1jzf5_143",vie="_infoLabel_1jzf5_163",xie="_inlineFilters_1jzf5_177",yie="_filterField_1jzf5_197",bie="_select_1jzf5_227",_ie="_searchInput_1jzf5_229",wie="_layout_1jzf5_249",jie="_selectionColumn_1jzf5_261",Sie="_selectionCard_1jzf5_273",Nie="_slotHeader_1jzf5_293",kie="_slotLabel_1jzf5_307",Cie="_slotStatus_1jzf5_323",Tie="_clearButton_1jzf5_335",Iie="_slotBody_1jzf5_355",Eie="_resultList_1jzf5_367",Aie="_emptyResult_1jzf5_385",Pie="_resultItem_1jzf5_397",Rie="_resultName_1jzf5_421",Lie="_resultMeta_1jzf5_433",Die="_selectButton_1jzf5_445",Mie="_selectedCard_1jzf5_465",Fie="_selectedName_1jzf5_479",Bie="_selectedMeta_1jzf5_489",$ie="_selectedTagline_1jzf5_491",Oie="_comparisonColumn_1jzf5_503",Vie="_comparisonCard_1jzf5_515",Uie="_comparisonHeader_1jzf5_535",zie="_sectionTitle_1jzf5_551",Gie="_diffBadge_1jzf5_561",Hie="_metricGrid_1jzf5_579",Wie="_metricCard_1jzf5_591",Kie="_metricLabel_1jzf5_611",qie="_metricValues_1jzf5_627",Qie="_metricDivider_1jzf5_643",Yie="_metricDelta_1jzf5_653",Xie="_freshnessRow_1jzf5_665",Jie="_freshnessItem_1jzf5_677",Zie="_freshnessBadge_1jzf5_685",eae="_freshnessPopover_1jzf5_733",tae="_popoverTitle_1jzf5_757",sae="_classCard_1jzf5_807",nae="_classGrid_1jzf5_827",rae="_classColumn_1jzf5_837",iae="_classBar_1jzf5_857",aae="_classSlice_1jzf5_873",oae="_classLegend_1jzf5_907",lae="_emptyState_1jzf5_931",cae="_supportPanels_1jzf5_947",dae="_checklistCard_1jzf5_959",uae="_infoCardExtended_1jzf5_961",hae="_checklist_1jzf5_959",mae="_infoNote_1jzf5_1033",pae="_sheetOverlay_1jzf5_1045",gae="_sheetOpen_1jzf5_1073",fae="_sheet_1jzf5_1045",vae="_sheetHeader_1jzf5_1105",xae="_sheetBody_1jzf5_1119",pe={page:oie,header:lie,headerStack:cie,kicker:die,title:uie,subtitle:hie,headerActions:mie,secondaryAction:pie,infoStrip:gie,infoCard:fie,infoLabel:vie,inlineFilters:xie,filterField:yie,select:bie,searchInput:_ie,layout:wie,selectionColumn:jie,selectionCard:Sie,slotHeader:Nie,slotLabel:kie,slotStatus:Cie,clearButton:Tie,slotBody:Iie,resultList:Eie,emptyResult:Aie,resultItem:Pie,resultName:Rie,resultMeta:Lie,selectButton:Die,selectedCard:Mie,selectedName:Fie,selectedMeta:Bie,selectedTagline:$ie,comparisonColumn:Oie,comparisonCard:Vie,comparisonHeader:Uie,sectionTitle:zie,diffBadge:Gie,metricGrid:Hie,metricCard:Wie,metricLabel:Kie,metricValues:qie,metricDivider:Qie,metricDelta:Yie,freshnessRow:Xie,freshnessItem:Jie,freshnessBadge:Zie,freshnessPopover:eae,popoverTitle:tae,classCard:sae,classGrid:nae,classColumn:rae,classBar:iae,classSlice:aae,classLegend:oae,emptyState:lae,supportPanels:cae,checklistCard:dae,infoCardExtended:uae,checklist:hae,infoNote:mae,sheetOverlay:pae,sheetOpen:gae,sheet:fae,sheetHeader:vae,sheetBody:xae},kL=["Ari","Borin","Celeste","Doran","Lena","Nix"],yae={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},r2={raid:"Raid",event:"Event",task:"Task"},i2={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},A3={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},P3={urgent:4,high:3,medium:2,low:1},bae={"7d":7,"30d":30,"90d":90,all:null},Qb={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},_ae=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:Kc(5,20),createdAt:ti(2,14),updatedAt:ti(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:Pf(3),nextUpdateAt:Af(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:Kc(2,12),createdAt:ti(4,9),updatedAt:ti(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:Pf(8),nextUpdateAt:Af(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:Kc(7,17),createdAt:ti(1,10),updatedAt:ti(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:Pf(22),nextUpdateAt:Af(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:ti(1,19),createdAt:ti(9,10),updatedAt:ti(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:ti(1,19),nextUpdateAt:Kc(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:Kc(12,18),createdAt:ti(6,15),updatedAt:ti(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:Pf(1),nextUpdateAt:Af(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:Kc(18,13),createdAt:ti(12,18),updatedAt:ti(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:ti(2,16),nextUpdateAt:Kc(4,9)}];function Kc(t,e=12){const n=new Date;return n.setDate(n.getDate()+t),n.setHours(e,0,0,0),n.toISOString()}function Af(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function ti(t,e=12){const n=new Date;return n.setDate(n.getDate()-t),n.setHours(e,0,0,0),n.toISOString()}function Pf(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function R3(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function wae(t,e,n){const r=Date.now(),i=bae[e.range];return t.filter(a=>{const o=n===""||a.title.toLowerCase().includes(n.toLowerCase())||a.description.toLowerCase().includes(n.toLowerCase()),c=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let m=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),v=r+i*24*60*60*1e3;m=g<=v}return o&&c&&u&&h&&m})}function jae(t,e,n){const r=[...t];return r.sort((i,a)=>{let o=0;switch(e){case"dueAt":o=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":o=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":o=P3[i.priority]-P3[a.priority];break;case"title":o=i.title.localeCompare(a.title);break;default:o=0}return n==="asc"?o:-o}),r}function Sae(t,e,n){const r=(e-1)*n;return t.slice(r,r+n)}function So(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function Zp(t){const e=Date.now()-new Date(t).getTime(),n=Math.round(e/6e4);if(n<60)return`${n} min`;const r=Math.round(n/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function jp(t,e){const n=new Date(t).getTime()-e;if(n<=0)return"faellig";const r=Math.floor(n/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function Nae(t){return t.length===0?null:t.reduce((e,n)=>e?A3[n.freshness]>A3[e.freshness]?n:e:n,null)}const P_=["EU-01","EU-02","US-01","US-02","ASIA-01"],Km=new Intl.NumberFormat("de-DE");function kae(){const t=ch("(min-width: 768px)"),[e,n]=q.useState("all"),[r,i]=q.useState(null),[a,o]=q.useState(null),[c,u]=q.useState(null),[h,m]=q.useState(null),g=[r,a].filter(Boolean).length,v=q.useMemo(()=>{const T=[c,h].filter(Boolean);if(!T.length)return 0;const F=T.reduce((D,V)=>{var z;return D+((z=V.level)!=null?z:0)},0);return Math.round(F/T.length)},[c,h]),[b,_]=q.useState(null),[k,I]=q.useState(!1),R=q.useRef(null);dh(R,k&&!t),q.useEffect(()=>{t&&I(!1)},[t]),q.useEffect(()=>{if(!b)return;const T=D=>{const V=D.target;V&&(V.closest(`.${pe.freshnessBadge}`)||V.closest(`.${pe.freshnessPopover}`)||_(null))},F=D=>{D.key==="Escape"&&_(null)};return document.addEventListener("pointerdown",T),document.addEventListener("keydown",F),()=>{document.removeEventListener("pointerdown",T),document.removeEventListener("keydown",F)}},[b]);const P=q.useMemo(()=>c?jp(c.nextUpdateAt,Date.now()):"",[c]),N=q.useMemo(()=>h?jp(h.nextUpdateAt,Date.now()):"",[h]),x=()=>I(!0),w=()=>I(!1),L=T=>{n(T)},j=(T,F)=>{T==="playerA"?(i(F.id),u(F)):(o(F.id),m(F))},S=T=>{T==="playerA"?(i(null),u(null)):(o(null),m(null))},C=T=>{_(F=>F===T?null:T)},M=c&&h;return s.jsxs(os,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[s.jsxs("div",{className:pe.page,children:[s.jsxs("header",{className:pe.header,children:[s.jsxs("div",{className:pe.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Players"}),s.jsx("h1",{className:pe.title,children:"Spieler vergleichen"}),s.jsx("p",{className:pe.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),s.jsx("div",{className:pe.headerActions,children:!t&&s.jsx("button",{type:"button",className:pe.secondaryAction,onClick:x,children:"Filter"})})]}),s.jsxs("div",{className:pe.infoStrip,children:[s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Slots gefuellt"}),s.jsxs("strong",{children:[Km.format(g)," Spieler"]})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Durchschnittslevel"}),s.jsx("strong",{children:Km.format(v)})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Serverfilter"}),s.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&s.jsx("div",{className:pe.inlineFilters,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>L(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),P_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]}),s.jsxs("div",{className:pe.layout,children:[s.jsxs("section",{className:pe.selectionColumn,children:[s.jsx(L3,{title:"Spieler A",slot:"playerA",selectedPlayer:c,excludeId:a,onSelect:j,onClear:S,serverFilter:e,onServerChange:L}),s.jsx(L3,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:j,onClear:S,serverFilter:e,onServerChange:L})]}),s.jsxs("section",{className:pe.comparisonColumn,children:[s.jsxs("div",{className:pe.comparisonCard,children:[s.jsxs("div",{className:pe.comparisonHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Vergleich"}),s.jsx("h2",{className:pe.sectionTitle,children:"Kennzahlen"})]}),M&&s.jsxs("span",{className:pe.diffBadge,children:["Delta Level: ",Km.format(c.level-h.level)]})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pe.metricGrid,children:[s.jsx(D3,{label:"Level",aValue:c.level,bValue:h.level}),s.jsx(D3,{label:"Scrapbook (%)",aValue:c.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),s.jsx(Cae,{playerA:c,playerB:h,countdownA:P,countdownB:N,activePopover:b,onToggle:C})]}),s.jsx(Tae,{playerA:c,playerB:h})]}):s.jsx("div",{className:pe.emptyState,children:s.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),s.jsxs("div",{className:pe.supportPanels,children:[s.jsx(Iae,{}),s.jsx(Eae,{})]})]})]})]}),!t&&s.jsx("div",{className:`${pe.sheetOverlay} ${k?pe.sheetOpen:""}`,children:s.jsxs("div",{className:pe.sheet,role:"dialog","aria-modal":"true",ref:R,children:[s.jsxs("header",{className:pe.sheetHeader,children:[s.jsx("h3",{children:"Filter"}),s.jsx("button",{type:"button",className:pe.clearButton,onClick:w,children:"Schliessen"})]}),s.jsx("div",{className:pe.sheetBody,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>L(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),P_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]})})]})}function L3({title:t,slot:e,selectedPlayer:n,excludeId:r,onSelect:i,onClear:a,serverFilter:o,onServerChange:c}){const[u,h]=q.useState(""),m=lh(u,300);q.useEffect(()=>{h("")},[n,o]);const{results:g,loading:v}=Aae(m,o,r);return s.jsxs("article",{className:pe.selectionCard,children:[s.jsxs("div",{className:pe.slotHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.slotLabel,children:t}),s.jsx("p",{className:pe.slotStatus,children:n?"Ausgewaehlt":"Noch keine Auswahl"})]}),n&&s.jsx("button",{type:"button",className:pe.clearButton,onClick:()=>a(e),children:"Reset"})]}),s.jsxs("div",{className:pe.slotBody,children:[s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:o,onChange:b=>c(b.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),P_.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Suchen"}),s.jsx("input",{className:pe.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),s.jsxs("div",{className:pe.resultList,role:"list",children:[v&&s.jsx("div",{className:pe.emptyResult,children:"Lade..."}),!v&&g.length===0&&s.jsx("div",{className:pe.emptyResult,children:"Kein Spieler gefunden."}),!v&&g.map(b=>s.jsxs("div",{className:pe.resultItem,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.resultName,children:b.name}),s.jsxs("p",{className:pe.resultMeta,children:[b.server," - Level ",b.level," - ",b.className]})]}),s.jsx("button",{type:"button",className:pe.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),n&&s.jsxs("div",{className:pe.selectedCard,children:[s.jsx("p",{className:pe.selectedName,children:n.name}),s.jsxs("p",{className:pe.selectedMeta,children:[n.server," - Level ",n.level," - ",n.className," -"," ",n.guildName||"ohne Gilde"]}),s.jsx("p",{className:pe.selectedTagline,children:n.tagline})]})]})]})}function D3({label:t,aValue:e,bValue:n,isDecimal:r=!1}){const i=c=>r?c.toFixed(1).replace(".",","):Km.format(c),a=e-n;let o="gleich";if(a!==0){const c=r?Math.abs(a).toFixed(1).replace(".",","):Km.format(Math.abs(a));o=a>0?`+${c}`:`-${c}`}return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:t}),s.jsxs("div",{className:pe.metricValues,children:[s.jsx("span",{"aria-label":"Spieler A",children:i(e)}),s.jsx("span",{className:pe.metricDivider,children:"vs"}),s.jsx("span",{"aria-label":"Spieler B",children:i(n)})]}),s.jsx("p",{className:pe.metricDelta,children:o})]})}function Cae({playerA:t,playerB:e,countdownA:n,countdownB:r,activePopover:i,onToggle:a}){return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Freshness"}),s.jsx("div",{className:pe.freshnessRow,children:[t,e].map(o=>{const c=o.id===t.id?n:r,u=`fresh-${o.id}`,h=i===u;return s.jsxs("div",{className:pe.freshnessItem,children:[s.jsxs("button",{type:"button",className:pe.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[s.jsx("span",{children:o.freshness.toUpperCase()}),s.jsx("small",{children:Zp(o.lastScanAt)})]}),h&&s.jsxs("div",{className:pe.freshnessPopover,role:"dialog",children:[s.jsx("p",{className:pe.popoverTitle,children:o.name}),s.jsxs("dl",{children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{children:i2[o.freshness]})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt gescannt"}),s.jsx("dd",{children:So(o.lastScanAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Naechstes Update"}),s.jsxs("dd",{children:[So(o.nextUpdateAt)," (",c,")"]})]})]})]})]},o.id)})})]})}function Tae({playerA:t,playerB:e}){const n=q.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return s.jsxs("div",{className:pe.classColumn,children:[s.jsx("h3",{children:i.name}),s.jsx("div",{className:pe.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(o=>s.jsxs("span",{style:{width:`${o.percent}%`},className:pe.classSlice,children:[s.jsx("small",{children:o.label}),s.jsxs("strong",{children:[o.percent,"%"]})]},`${i.id}-${o.label}`))})]})};return s.jsxs("div",{className:pe.classCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Stat-Verteilung"}),s.jsx("div",{className:pe.classGrid,children:[t,e].map(r)}),n.length>0&&s.jsx("ul",{className:pe.classLegend,children:n.map(i=>s.jsx("li",{children:i},i))})]})}function Iae(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return s.jsxs("section",{className:pe.checklistCard,children:[s.jsx("h3",{children:"Vor dem Vergleich pruefen"}),s.jsx("ul",{className:pe.checklist,children:t.map(e=>s.jsx("li",{children:e},e))})]})}function Eae(){return s.jsxs("section",{className:pe.infoCardExtended,children:[s.jsx("h3",{children:"Matchup-Diff"}),s.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",s.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),s.jsx("p",{className:pe.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),s.jsx("button",{type:"button",className:pe.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function Aae(t,e,n){const[r,i]=q.useState([]),[a,o]=q.useState(!1);return q.useEffect(()=>{const c=t.trim();if(c.length===0){i([]),o(!1);return}let u=!1;async function h(){const m=Bn("PlayersCompare:search");o(!0);try{const g=c.toLowerCase(),v=xh(Tt,"latest"),b=await wn(m,{path:"players/latest (collectionGroup)"},()=>_n(En(v,Qi("nameFold"),oc(g),lc(g+""),rr(15)))),_=await wn(m,{path:"players/latest (collectionGroup)"},()=>_n(En(v,Kr("nameNgrams","array-contains",g),rr(15)))),k=new Set,I=[],R=P=>{var U,J,re,G,X,Y,se,ce,_e,Ae,ee,le,te,ye,ke,Me,Re,Ee,Le,Fe,Be,je,ue,Pe,De,it,yt,ie,he;const N=P.data(),w=(U=P.ref.parent)==null?void 0:U.parent,L=w==null?void 0:w.parent;if((L==null?void 0:L.id)!=="players")return;const S=(re=(J=w==null?void 0:w.id)!=null?J:N.playerIdentifier)!=null?re:P.id;if(!S||k.has(S)||n&&S===n)return;const C=(Y=(X=N.name)!=null?X:(G=N.values)==null?void 0:G.Name)!=null?Y:"Unbekannter Spieler",M=(_e=(ce=N.server)!=null?ce:(se=N.values)==null?void 0:se.Server)!=null?_e:"Unknown";if(e!=="all"&&M!==e)return;const T=(ye=(te=(ee=N.className)!=null?ee:(Ae=N.values)==null?void 0:Ae.Class)!=null?te:(le=N.values)==null?void 0:le.Class)!=null?ye:"Unbekannte Klasse",F=(Re=(Me=N.guildName)!=null?Me:(ke=N.values)==null?void 0:ke.Guild)!=null?Re:"",D=Jl(N.level)||Jl((Ee=N.values)==null?void 0:Ee.Level)||Jl((Le=N.values)==null?void 0:Le.Level),V=Jl(N.scrapbookPct)||Jl((Fe=N.values)==null?void 0:Fe["Album %"])||Jl((Be=N.values)==null?void 0:Be.AlbumPct)||Jl((je=N.values)==null?void 0:je["Scrapbook %"]),z=(De=(Pe=N.updatedAt)!=null?Pe:(ue=N.values)==null?void 0:ue.UpdatedAt)!=null?De:N.timestamp?new Date(N.timestamp*1e3).toISOString():new Date().toISOString(),K=(it=N.nextUpdateAt)!=null?it:Rae(12),W=Pae((yt=N.values)!=null?yt:N.stats);k.add(S),I.push({id:S,name:C,tagline:(ie=N.tagline)!=null?ie:F?`Mitglied in ${F}`:T,server:M,className:T,guildName:F,level:D||0,scrapbookPct:V,lastScanAt:z,updatedAt:z,nextUpdateAt:K,freshness:(he=N.freshness)!=null?he:"unknown",stats:W})};b.forEach(R),_.forEach(R),u||(I.sort((P,N)=>P.name.localeCompare(N.name)),i(I))}catch(g){console.error("[Players Compare] player search failed",g),u||i([])}finally{un(m),u||o(!1)}}return h(),()=>{u=!0}},[t,e,n]),{results:r,loading:a}}const M3={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function Pae(t={}){const e=Object.keys(M3).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:M3[r],value:Jl(i)}}).filter(r=>r.value>0),n=e.reduce((r,i)=>r+i.value,0);return n?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/n*100))})):[]}function Jl(t){const e=Number(t);return Number.isFinite(e)?e:0}function Rae(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function Lae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(F3,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),s.jsx(F3,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function F3({to:t,title:e,desc:n}){return s.jsxs(Gs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Dae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds  Rankings"}),s.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function Mae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds  Stats"}),s.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}const Fae={freedom:{fileId:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59",name:"Freedom"},weltenimwandel:{fileId:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",name:"Welten im Wandel"},poenacapitis:{fileId:"1L9RiqzxQumXOZ3e-GlG6RCGVAN1kFFBG",name:"Poena Capitis"},thevoid:{fileId:"13Ud0Wap5YiSAe4tHALOS7JvpLl1g471t",name:"The Void"},legionz:{fileId:"",name:"LegionZ"},dielegion:{fileId:"1NiEnFnOglOvvhV1c-kRwIs083zETmDWIp",name:"Die Legion"},asylum:{fileId:"1YWhfhmS6U4IPc0ydJ3ctSsXJrpKD7fg",name:"Asylum"},imperium:{fileId:"1Ma_Pm-ed6qgRf-4prgzC71DWn5u2nJ79",name:"Imperium"},sladkydomov:{fileId:"1kQkgEgpzSzi4QPwD1atWs8DNS3mcHRbE",name:"Sladky domov"},exils1eu:{fileId:"16UdoSWWP3s9xrB8qFTKDEabDsOrCHFL7",name:"Exil"}};function Bae(t){if(!t)return null;const e=Fae[t];return e!=null&&e.fileId?e.fileId:null}function $ae(t,e=128){var a,o;const n=Bae(t);if(!n)return{id:null,url:null,thumb:null,fallback:""};const r=(a=kd(n))!=null?a:null,i=r&&(o=Pi(r,e))!=null?o:null;return{id:n,url:r,thumb:i,fallback:""}}function Sp(t,e=128){return $ae(t,e).thumb}const Ld={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},py=(t,e)=>({...t||{},...e||{}}),B3=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),n=Math.floor((Date.now()-e.getTime())/864e5);return n<=0?"today":n===1?"yesterday":`${n}d ago`},Oae=t=>Object.values(t||{}).reduce((e,n)=>e+(n||0),0),Cr=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function Vae(t){var v,b,_,k,I,R,P,N;const e=Cr(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const n=Cr(t==null?void 0:t.baseMain),r=Cr(t==null?void 0:t.conBase);if(n!=null&&r!=null)return n+r;const i=(t==null?void 0:t.baseStats)||{},a=Cr(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const o=Cr(i==null?void 0:i.main),c=Cr(i==null?void 0:i.con);if(o!=null&&c!=null)return o+c;const u=(t==null?void 0:t.values)||{},h=(b=(v=Cr(u==null?void 0:u.SumBaseTotal))!=null?v:Cr(u==null?void 0:u.sumBaseTotal))!=null?b:Cr(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const m=(I=(k=(_=Cr(u==null?void 0:u.Main))!=null?_:Cr(u==null?void 0:u.main))!=null?k:Cr(u==null?void 0:u.BaseMain))!=null?I:Cr(u==null?void 0:u.baseMain),g=(N=(P=(R=Cr(u==null?void 0:u.Con))!=null?R:Cr(u==null?void 0:u.con))!=null?P:Cr(u==null?void 0:u.ConBase))!=null?N:Cr(u==null?void 0:u.conBase);return m!=null&&g!=null?m+g:null}function qc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function Uae(t,e=56){if(!t)return;const n=qc(t),r=_r.find(i=>qc(i.label)===n||qc(i.key)===n)||_r.find(i=>qc(i.label).startsWith(n)||n.startsWith(qc(i.label))||qc(i.key).startsWith(n)||n.startsWith(qc(i.key)));return r?Pi(r.iconUrl,e):void 0}function zae({name:t,memberClass:e,online:n,theme:r=Ld}){const i=t.split("_").map(o=>o[0]).join("").slice(0,2).toUpperCase(),a=Uae(e,56);return s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:o=>{const c=o.currentTarget.parentElement;c&&(c.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),n&&s.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const Gae={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},Hae=({role:t})=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(Gae[t]||""),children:t});function $3(t,e){const n=(t!=null?t:"").trim();if(n)return n;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function Wae(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,n=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:n!=null&&r!=null?n+r:null;return i!=null?i.toLocaleString("de-DE"):""}function Rf({label:t,value:e,theme:n=Ld}){return s.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:n.border,background:n.tile},children:[s.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),s.jsx("div",{className:"text-lg font-semibold",style:{color:n.title},children:e})]})}function Kae({member:t,theme:e,actions:n,extraKPIs:r}){var m,g,v,b,_,k,I,R,P;if(!t)return null;const i=py(Ld,e),a=t,o=$3((g=(m=a.guildJoined)!=null?m:a.joinedAt)!=null?g:null,(v=a.guildJoinedMs)!=null?v:null),c=$3((b=a.lastActivity)!=null?b:null,(_=a.lastActivityMs)!=null?_:typeof a.lastOnline=="number"?a.lastOnline:null),u=Wae(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return s.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),s.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[s.jsx("div",{className:"shrink-0",children:s.jsx(zae,{name:t.name,memberClass:(R=(I=a.class)!=null?I:(k=a.values)==null?void 0:k.Class)!=null?R:null,online:a.online,theme:i})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[s.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&s.jsx(Hae,{role:a.role})]}),s.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",o,"  Last ",c]})]}),s.jsx("div",{className:"ml-auto",children:n})]}),s.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(Rf,{label:"Level",value:(P=a.level)!=null?P:"",theme:i}),typeof a.scrapbook=="number"&&s.jsx(Rf,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),s.jsx(Rf,{label:"Sum Base",value:u,theme:i}),s.jsx(Rf,{label:"Total Stats",value:h,theme:i}),r]})]})}function Qc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function qae(t,e=40){if(!t)return;const n=Qc(t);let r=_r.find(i=>Qc(i.label)===n||Qc(i.key)===n)||_r.find(i=>Qc(i.label).startsWith(n)||n.startsWith(Qc(i.label))||Qc(i.key).startsWith(n)||n.startsWith(Qc(i.key)));return r?Pi(r.iconUrl,e):void 0}function Qae({name:t,memberClass:e,online:n,theme:r=Ld}){const i=t.split("_").map(o=>o[0]).join("").slice(0,2).toUpperCase(),a=qae(e,40);return s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:o=>{const c=o.currentTarget.parentElement;c&&(c.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),n&&s.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const Yae=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function Xae({rows:t,selId:e,onSelect:n,rightCols:r,theme:i}){const a=py(Ld,i);return s.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[s.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),s.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[s.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((o,c)=>{var u,h,m;return s.jsxs("button",{onClick:()=>n(o.id),"aria-pressed":o.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(c%2?"bg-slate-800/10":"")+(o.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[s.jsx(Qae,{name:o.name,memberClass:(m=(h=o.class)!=null?h:(u=o.values)==null?void 0:u.Class)!=null?m:null,online:o.online,theme:a}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:o.name}),s.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[o.class,o.server?`  ${o.server}`:""]})]}),s.jsx("div",{className:"justify-self-end",children:s.jsx(Yae,{role:o.role})}),r(o)]},o.id)})]})]})}function Yc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function Jae(t,e=40){if(!t)return;const n=Yc(t);let r=_r.find(i=>Yc(i.label)===n||Yc(i.key)===n)||_r.find(i=>Yc(i.label).startsWith(n)||n.startsWith(Yc(i.label))||Yc(i.key).startsWith(n)||n.startsWith(Yc(i.key)));return r?Pi(r.iconUrl,e):void 0}function Zae({rows:t,selId:e,onSelect:n,footer:r,theme:i}){const a=py(Ld,i);return s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(o=>{var v,b,_,k,I,R,P,N,x;const c=o,u=o.name.slice(0,2).toUpperCase(),h=Jae((_=(b=c.class)!=null?b:(v=c.values)==null?void 0:v.Class)!=null?_:null,40),m=typeof c.level=="number"?c.level:typeof((k=c.values)==null?void 0:k.Level)=="number"?c.values.Level:"",g=typeof c.scrapbook=="number"?`${c.scrapbook}%`:typeof((I=c.values)==null?void 0:I.Scrapbook)=="number"?`${c.values.Scrapbook}%`:null;return s.jsxs("button",{onClick:()=>n(o.id),"aria-pressed":o.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(o.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:o.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h?s.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:w=>{const L=w.currentTarget.parentElement;L&&(L.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:o.name}),s.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(N=(P=c.class)!=null?P:(R=c.values)==null?void 0:R.Class)!=null?N:"",c.server?`  ${c.server}`:""]})]}),s.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(x=c.role)!=null?x:""})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),s.jsx("div",{className:"font-semibold",style:{color:a.title},children:m})]}),g&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),s.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),s.jsx("div",{className:"mt-3",children:r(o)})]},o.id)})})}const eoe=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(n=>{const r=t[n];typeof r=="number"&&(e[n]=r)}),Object.keys(e).length?e:void 0};function toe({members:t,defaultView:e="list",defaultQuery:n="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:o,renderActions:c,renderKPIs:u,theme:h}){var M;const m=A.useMemo(()=>py(Ld,h),[h]),[g,v]=A.useState(e),[b,_]=A.useState(n),[k,I]=A.useState(r.key),[R,P]=A.useState(r.dir),[N,x]=A.useState((M=t[0])==null?void 0:M.id),w=a!=null?a:N,L=T=>{a||x(T);const F=t.find(D=>D.id===T);F&&o&&o(F)},j=A.useMemo(()=>{const T=b.trim().toLowerCase();return T?t.filter(F=>F.name.toLowerCase().includes(T)||F.class.toLowerCase().includes(T)||String(F.role).toLowerCase().includes(T)):t},[t,b]),S=A.useMemo(()=>{const T=R==="asc"?1:-1,F=D=>{var V,z;switch(k){case"sumBaseStats":{const K=Vae(D);return K==null?-1/0:K}case"totalStats":return(z=(V=D.totalStats)!=null?V:Oae(eoe(D.baseStats)))!=null?z:-1/0;default:return D[k]}};return[...j].sort((D,V)=>{const z=F(D),K=F(V);return z===K?0:z>K?T:-T})},[j,k,R]),C=A.useMemo(()=>S.find(T=>T.id===w)||S[0],[S,w]);return s.jsxs("div",{children:[i&&s.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:m.tile,borderColor:m.border},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"View"}),s.jsxs("select",{value:g,onChange:T=>v(T.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[s.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),s.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Search"}),s.jsx("input",{value:b,onChange:T=>_(T.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:m.border}})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Sort by"}),s.jsxs("select",{value:String(k),onChange:T=>I(T.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[s.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),s.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),s.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),s.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),s.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),s.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),s.jsx("button",{onClick:()=>P(T=>T==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:m.border},children:R==="asc"?"":""})]})]}),s.jsx(Kae,{member:C,actions:C&&(c?c(C):s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Profile"}),s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Compare"}),s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Message"})]})),extraKPIs:C&&u?u(C):null,theme:m}),g==="list"?s.jsx(Xae,{rows:S,selId:w,onSelect:L,theme:m,rightCols:T=>{var F;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-right text-sm",children:(F=T.level)!=null?F:""}),s.jsx("div",{className:"text-right text-xs",style:{color:m.sub},children:B3(T.lastOnline)})]})}}):s.jsx(Zae,{rows:S,selId:w,onSelect:L,theme:m,footer:T=>s.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:m.sub},children:s.jsxs("span",{children:["Last ",B3(T.lastOnline)]})})})]})}function soe({guildName:t,server:e,emblemUrl:n,lastScanISO:r,members:i,avgLevel:a,totalPower:o,activity7d:c,topClasses:u,tickerItems:h,href:m,onClick:g,className:v}){const b=!!FR(),_=A.useMemo(()=>{if(!r)return null;const F=Date.now()-new Date(r).getTime(),D=Math.max(0,Math.floor(F/6e4));if(D<60)return`${D}m`;const V=Math.floor(D/60);return V<24?`${V}h`:`${Math.floor(V/24)}d`},[r]),k=Im(0),I=Im(0),R=Im(0),P=Im(0),N=Nf(k,F=>Math.round(F).toString()),x=Nf(I,F=>Math.round(F).toString()),w=Nf(R,F=>Math.round(F).toLocaleString()),L=Nf(P,F=>`${Math.round(F)}%`);A.useEffect(()=>{const F=b?0:.6;if(F===0){k.set(i),I.set(a),R.set(o!=null?o:0),P.set(c!=null?c:0);return}const D=[kf(k,i,{duration:F}),kf(I,a,{duration:F}),kf(R,o!=null?o:0,{duration:F}),kf(P,c!=null?c:0,{duration:F})];return()=>D.forEach(V=>V.stop())},[i,a,o,c,b]);const j=A.useRef(null);A.useEffect(()=>{if(b||!j.current)return;const F=j.current;let D=0,V=0;const z=()=>{V+=.016;const K=V*14%140-20;F.style.setProperty("--s-x",`${K}%`),D=requestAnimationFrame(z)};return D=requestAnimationFrame(z),()=>cancelAnimationFrame(D)},[b]);const S={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},C=100,M=m?"a":"div",T=m?{href:m}:{onClick:g};return s.jsxs(M,{...T,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",v!=null?v:""].join(" "),style:{background:`linear-gradient(135deg, ${S.bgFrom}, ${S.bgTo})`},children:[s.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),s.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[s.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[n?s.jsx("img",{src:n,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:s.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),s.jsx("div",{ref:j,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),_&&s.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:S.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${S.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",_]}),s.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${C}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),s.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${C}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${C}deg, transparent 0 46px, ${S.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),s.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[s.jsx("h3",{className:"truncate font-extrabold",style:{color:S.title,fontSize:22},children:t}),s.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:S.soft,border:`1px solid ${S.border}`},children:e})]}),s.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[s.jsx(Lf,{label:"Members",value:N}),s.jsx(Lf,{label:" Level",value:x}),s.jsx(Lf,{label:"Total Power",value:w}),typeof c=="number"&&s.jsx(Lf,{label:"Activity (7d)",value:L})]}),u!=null&&u.length?s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:S.soft},children:"Top Classes"}),u.slice(0,3).map(F=>s.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${S.border}`,color:S.text},children:[F.iconUrl?s.jsx("img",{src:F.iconUrl,alt:F.key,className:"h-4 w-4 object-contain"}):s.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:S.accent,opacity:.85}}),s.jsxs("span",{className:"text-xs",children:[F.key," ",s.jsxs("span",{className:"opacity-70",children:["(",Math.round(F.percent),"%)"]})]})]},F.key))]}):null]})]})]}),h!=null&&h.length?s.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${S.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:s.jsx(noe,{items:h,muted:b,color:S.soft})}):null]})}function Lf({label:t,value:e}){return s.jsxs("div",{className:"relative z-10 min-w-0",children:[s.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),s.jsx(DR.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function noe({items:t,muted:e,color:n}){const r=A.useRef(null);return A.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,o=0;const c=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,o=requestAnimationFrame(c)};return o=requestAnimationFrame(c),()=>cancelAnimationFrame(o)},[e]),s.jsx("div",{className:"overflow-hidden",children:s.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:n},children:t.concat(t).map((i,a)=>s.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const roe="_wrap_q5gkc_53",ioe="_banner_q5gkc_59",aoe="_bannerRowTop_q5gkc_61",ooe="_bannerStripe_q5gkc_71",loe="_bannerTitle_q5gkc_79",coe="_bannerRowBottom_q5gkc_93",doe="_bannerSub_q5gkc_95",uoe="_monthPickerWrap_q5gkc_101",hoe="_monthPickerLabel_q5gkc_113",moe="_monthPicker_q5gkc_101",poe="_monthButton_q5gkc_131",goe="_monthButtonText_q5gkc_159",foe="_chev_q5gkc_161",voe="_monthList_q5gkc_165",xoe="_monthOption_q5gkc_195",yoe="_monthBadge_q5gkc_221",boe="_gridRow_q5gkc_237",_oe="_gridRowBottom_q5gkc_239",woe="_sideImage_q5gkc_253",joe="_sideImagePh_q5gkc_271",Soe="_emblemPanel_q5gkc_275",Noe="_emblemFrame_q5gkc_295",koe="_emblemImg_q5gkc_297",Coe="_emblemPlaceholder_q5gkc_299",Toe="_emblemShimmer_q5gkc_307",Ioe="_emblemCaption_q5gkc_315",Eoe="_card_q5gkc_319",Aoe="_cardHeader_q5gkc_331",Poe="_cardTitle_q5gkc_339",Roe="_cardSubtitle_q5gkc_341",Loe="_headerRight_q5gkc_343",Doe="_cardBody_q5gkc_345",Moe="_tableWrap_q5gkc_349",Foe="_tableTitle_q5gkc_351",Boe="_table_q5gkc_349",$oe="_th_q5gkc_355",Ooe="_td_q5gkc_355",Voe="_tdEmpty_q5gkc_365",Uoe="_sectionDivider_q5gkc_375",zoe="_sectionStripe_q5gkc_389",Goe="_sectionTitle_q5gkc_397",es={wrap:roe,banner:ioe,bannerRowTop:aoe,bannerStripe:ooe,bannerTitle:loe,bannerRowBottom:coe,bannerSub:doe,monthPickerWrap:uoe,monthPickerLabel:hoe,monthPicker:moe,monthButton:poe,monthButtonText:goe,chev:foe,monthList:voe,monthOption:xoe,monthBadge:yoe,gridRow:boe,gridRowBottom:_oe,sideImage:woe,sideImagePh:joe,emblemPanel:Soe,emblemFrame:Noe,emblemImg:koe,emblemPlaceholder:Coe,emblemShimmer:Toe,emblemCaption:Ioe,card:Eoe,cardHeader:Aoe,cardTitle:Poe,cardSubtitle:Roe,headerRight:Loe,cardBody:Doe,tableWrap:Moe,tableTitle:Foe,table:Boe,th:$oe,td:Ooe,tdEmpty:Voe,sectionDivider:Uoe,sectionStripe:zoe,sectionTitle:Goe};function Hoe(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function O3(t,e="de-DE"){const n=new Date(t);return Number.isNaN(n.getTime())?"":n.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const V3=({title:t,subtitle:e,children:n,rightBadge:r})=>s.jsxs("section",{className:es.card,children:[(t||e||r)&&s.jsxs("header",{className:es.cardHeader,children:[s.jsxs("div",{className:es.headerTitles,children:[t&&s.jsx("h3",{className:es.cardTitle,children:t}),e&&s.jsx("div",{className:es.cardSubtitle,children:e})]}),r&&s.jsx("div",{className:es.headerRight,children:r})]}),s.jsx("div",{className:es.cardBody,children:n})]}),U3=({block:t})=>{var r,i;const e=t.columns,n=(r=t.rows)!=null?r:[];return s.jsxs("div",{className:es.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&s.jsx("div",{className:es.tableTitle,children:t.title}),s.jsxs("table",{className:es.table,children:[s.jsx("thead",{children:s.jsx("tr",{children:e.map(a=>s.jsx("th",{className:es.th,style:{width:a.width},children:a.label},a.key))})}),s.jsx("tbody",{children:n.length===0?s.jsx("tr",{children:s.jsx("td",{className:es.tdEmpty,colSpan:e.length,children:"No data"})}):n.map((a,o)=>{var c;return s.jsx("tr",{children:e.map(u=>{var v;const h=a[u.key],m=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?Hoe(m):m;return s.jsx("td",{className:es.td,"data-align":(v=u.align)!=null?v:"left",children:u.render?u.render(a):g},u.key)})},(c=a.id)!=null?c:o)})})]}),t.footer&&s.jsx("div",{className:es.tableFooter,children:t.footer})]})},Woe=(t,e)=>{A.useEffect(()=>{function n(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[t,e])},Koe=({months:t,currentKey:e,onChange:n,fallbackDate:r})=>{var m;if(!(Array.isArray(t)&&t.length>0&&e))return s.jsx("div",{className:es.bannerSub,children:r!=null?r:""});const a=A.useRef(null),[o,c]=A.useState(!1);Woe(a,()=>c(!1));const u=t.find(g=>g.key===e),h=u?`${O3(u.fromISO)}${O3(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return s.jsxs("div",{className:es.monthPickerWrap,children:[s.jsx("div",{className:es.monthPickerLabel,children:"Monat"}),s.jsxs("div",{className:es.monthPicker,ref:a,children:[s.jsxs("button",{type:"button",className:es.monthButton,onClick:()=>c(g=>!g),"aria-haspopup":"listbox","aria-expanded":o,children:[s.jsx("span",{className:es.monthButtonText,children:(m=u==null?void 0:u.label)!=null?m:""}),s.jsx("svg",{className:es.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),o&&s.jsx("ul",{className:es.monthList,role:"listbox",children:t.map(g=>s.jsx("li",{children:s.jsx("button",{type:"button",className:es.monthOption,onClick:()=>{c(!1),n==null||n(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&s.jsx("span",{className:es.monthBadge,children:h})]})},qoe=({title:t,monthRange:e,months:n,currentMonthKey:r,onMonthChange:i})=>s.jsxs("div",{className:es.banner,children:[s.jsxs("div",{className:es.bannerRowTop,children:[s.jsx("div",{className:es.bannerStripe}),s.jsx("div",{className:es.bannerTitle,children:t}),s.jsx("div",{className:es.bannerStripe})]}),s.jsx("div",{className:es.bannerRowBottom,children:s.jsx(Koe,{months:n,currentKey:r,onChange:i,fallbackDate:e})})]}),Qoe=({emblemUrl:t,caption:e})=>s.jsxs("div",{className:es.emblemPanel,children:[s.jsxs("div",{className:es.emblemFrame,children:[t?s.jsx("img",{src:t,alt:"Guild Emblem",className:es.emblemImg}):s.jsx("div",{className:es.emblemPlaceholder,children:"Emblem"}),s.jsx("div",{className:es.emblemShimmer})]}),e&&s.jsx("div",{className:es.emblemCaption,children:e})]}),z3=({imgUrl:t,alt:e})=>s.jsx("div",{className:es.sideImage,children:t?s.jsx("img",{src:t,alt:e!=null?e:"side"}):s.jsx("div",{className:es.sideImagePh,children:"Image"})}),Yb=({children:t,className:e})=>s.jsx("div",{className:`${es.gridRow} ${e!=null?e:""}`,children:t}),Yoe=({children:t})=>s.jsxs("div",{className:es.sectionDivider,children:[s.jsx("div",{className:es.sectionStripe}),s.jsx("div",{className:es.sectionTitle,children:t}),s.jsx("div",{className:es.sectionStripe})]}),Xoe=({data:t,onMonthChange:e})=>{const{header:n,panels:r,tablesTop:i,tablesBottom:a}=t;return s.jsxs("div",{className:es.wrap,children:[s.jsx(qoe,{title:n.title,monthRange:n.monthRange,months:n.months,currentMonthKey:n.currentMonthKey,onMonthChange:e}),s.jsxs(Yb,{children:[s.jsx(z3,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),s.jsx(Qoe,{emblemUrl:n.emblemUrl,caption:n.centerCaption}),s.jsx(z3,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),s.jsx(Yb,{children:i.map((o,c)=>s.jsx(V3,{title:o.title,subtitle:o.subtitle,children:s.jsx(U3,{block:o})},c))}),s.jsx(Yoe,{children:"Guild Overview"}),s.jsx(Yb,{className:es.gridRowBottom,children:a.map((o,c)=>s.jsx(V3,{title:o.title,subtitle:o.subtitle,children:s.jsx(U3,{block:o})},c))})]})},Xb=new Map,G3=new Map,Joe=({guildId:t,guildName:e,guildServer:n})=>{const[r,i]=A.useState(!0),[a,o]=A.useState(null),[c,u]=A.useState(void 0),h=A.useRef({}),[m,g]=A.useState(()=>hm(t,e,n));A.useEffect(()=>{let b=!1;const _=t.trim().toLowerCase(),k=P=>{h.current={...P.progressByMonth};const N=P.opts;if(!N.length){o(null),u(void 0),g(hm(t,e,n));return}o(N);const x=N[0].key;u(x);const w=h.current[x];g(H3(w,{guildId:t,guildName:e,guildServer:n,currentMonthKey:x,months:N}))},I=async()=>{var N,x,w,L,j;const P=Bn("GuildMonthly:months");i(!0);try{const S=pl(Tt,`guilds/${t}/history_monthly`),C=await wn(P,{path:S.path},()=>_n(S)),M=[],T={};for(const F of C.docs){const D=F.id,V=F.data();if(!V)continue;T[D]=V;const z=(N=V==null?void 0:V.meta)!=null?N:{},K=z.fromISO||z.baselineISO||z.firstISO||"",W=z.toISO||z.latestISO||z.nowISO||"",U=Number((x=z.daysSpan)!=null?x:Math.floor((+new Date(W)-+new Date(K))/864e5))||0,J=!!((L=(w=V==null?void 0:V.status)==null?void 0:w.available)!=null?L:K&&W&&U<=40),re=z.label||new Date(D+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});M.push({key:D,label:re,fromISO:K||new Date(D+"-01").toISOString(),toISO:W||new Date(D+"-28").toISOString(),daysSpan:U,available:J,reason:J||(j=V==null?void 0:V.status)==null?void 0:j.reason})}return M.sort((F,D)=>F.key<D.key?1:-1),{opts:M,progressByMonth:T}}finally{un(P)}};async function R(){try{if(!_){o(null),u(void 0),g(hm(t,e,n)),i(!1);return}const P=G3.get(_);if(P){b||k(P),i(!1);return}const N=Xb.get(_),x=N!=null?N:I();N||Xb.set(_,x);const w=await x;G3.set(_,w),b||k(w)}catch(P){console.error(P),b||(o(null),u(void 0),g(hm(t,e,n)))}finally{existing||Xb.delete(_),b||i(!1)}}return R(),()=>{b=!0}},[t,e,n]);async function v(b){u(b);let _=h.current[b];if(!_){const k=Bn("GuildMonthly:monthDoc");try{const I=ps(Tt,`guilds/${t}/history_monthly/${b}`),R=await An(k,I,()=>pn(I));R.exists()?(_=R.data(),h.current[b]=_):_=null}catch(I){console.error(I),_=null}finally{un(k)}}if(!_){g(hm(t,e,n,{currentMonthKey:b,months:a!=null?a:void 0}));return}g(H3(_,{guildId:t,guildName:e,guildServer:n,currentMonthKey:b,months:a!=null?a:void 0}))}return s.jsx(Xoe,{data:m,onMonthChange:v})};function hm(t,e,n,r){return{header:{title:`${e} - Monthly Progress`,monthRange:"-",emblemUrl:Sp(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:r==null?void 0:r.currentMonthKey,months:r==null?void 0:r.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[Xc("Most Base Stats gained",n?`Server ${n}`:void 0),Xc("Sum Base Stats"),Xc("Highest Base Stats")],tablesBottom:[Xc("Main & Con"),Xc("Sum Base Stats"),Xc("Highest Base Stats"),Xc("Highest Total Stats")]}}function Xc(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function H3(t,e){var o,c,u,h,m,g,v,b;(o=t==null?void 0:t.meta)!=null;const n={title:`${e.guildName} - Monthly Progress`,monthRange:void 0,emblemUrl:Sp(e.guildId,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"Delta",width:70,align:"right",format:"num"}],rows:((c=t==null?void 0:t.mostBaseGained)!=null?c:[]).map((_,k)=>{var I,R,P,N,x,w,L,j;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",level:(N=(P=_.levelLatest)!=null?P:_.level)!=null?N:null,base:(w=(x=_.baseLatest)!=null?x:_.base)!=null?w:null,delta:(j=(L=_.baseDelta)!=null?L:_.delta)!=null?j:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam Delta",width:90,align:"right",format:"num"},{key:"sho",label:"Sho Delta",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((_,k)=>{var I,R,P,N,x,w,L;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",base:(P=_.base)!=null?P:null,stam:(x=(N=_.stamDelta)!=null?N:_.staminaDelta)!=null?x:null,sho:(L=(w=_.shoDelta)!=null?w:_.shootingDelta)!=null?L:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((_,k)=>{var I,R,P,N,x;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",stats:(N=(P=_.stats)!=null?P:_.base)!=null?N:null,delta:(x=_.delta)!=null?x:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((m=t==null?void 0:t.mainAndCon)!=null?m:[]).map((_,k)=>{var I,R,P,N,x,w;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",class:(N=(P=_.class)!=null?P:_.className)!=null?N:"",stats:(x=_.stats)!=null?x:null,delta:(w=_.delta)!=null?w:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam Delta",width:90,align:"right",format:"num"},{key:"sho",label:"Sho Delta",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((_,k)=>{var I,R,P,N,x;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",base:(P=_.base)!=null?P:null,stam:(N=_.stamDelta)!=null?N:null,sho:(x=_.shoDelta)!=null?x:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((v=t==null?void 0:t.highestBaseStats)!=null?v:[]).map((_,k)=>{var I,R,P,N;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",stats:(P=_.stats)!=null?P:null,delta:(N=_.delta)!=null?N:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((b=t==null?void 0:t.highestTotalStats)!=null?b:[]).map((_,k)=>{var I,R,P,N;return{id:(I=_.playerId)!=null?I:k,rank:k+1,name:(R=_.name)!=null?R:"-",total:(P=_.total)!=null?P:null,delta:(N=_.delta)!=null?N:null}})}];return{header:n,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const Zoe="_root_r1uj3_5",ele="_sectionDivider_r1uj3_17",tle="_sectionStripe_r1uj3_31",sle="_sectionTitle_r1uj3_33",mm={root:Zoe,sectionDivider:ele,sectionStripe:tle,sectionTitle:sle},nle="_root_4jywc_1",rle="_accent_4jywc_31",W3={root:nle,default:"_default_4jywc_29",accent:rle};function jc({text:t,tone:e="default",className:n}){return s.jsx("div",{className:`${W3.root} ${W3[e]} ${n!=null?n:""}`.trim(),children:t})}const ile="_card_vvv3s_3",ale="_wrap_vvv3s_31",ole="_divider_vvv3s_45",lle="_rows_vvv3s_77",cle="_row_vvv3s_77",dle="_left_vvv3s_109",ule="_label_vvv3s_111",hle="_avgHead_vvv3s_113",mle="_avgNum_vvv3s_115",ple="_top3_vvv3s_121",gle="_chip_vvv3s_123",fle="_badge_vvv3s_151",vle="_name_vvv3s_159",xle="_score_vvv3s_161",yle="_headerSpacer_vvv3s_167",ii={card:ile,wrap:ale,divider:ole,rows:lle,row:cle,left:dle,label:ule,avgHead:hle,avgNum:mle,top3:ple,chip:gle,badge:fle,name:vle,score:xle,headerSpacer:yle};function ble({name:t,value:e,classLabel:n,colors:r}){const i=ry(n,64);return s.jsxs("div",{className:ii.chip,children:[s.jsx("span",{className:ii.badge,children:i?s.jsx("img",{src:i,alt:""}):null}),s.jsx("span",{className:ii.name,children:t!=null?t:""}),s.jsx("span",{className:ii.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function _le({snapshot:t,colors:e,title:n="Base Stats"}){var o;const r=(o=t==null?void 0:t.members)!=null?o:[],i=c=>[...r].filter(u=>typeof u[c]=="number").sort((u,h)=>{var m,g;return((m=h[c])!=null?m:0)-((g=u[c])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return s.jsxs("div",{className:ii.card,children:[s.jsx(jc,{text:n}),s.jsx("div",{className:ii.headerSpacer}),s.jsxs("div",{className:ii.wrap,children:[s.jsx("div",{className:ii.divider}),s.jsx("div",{className:ii.rows,children:a.map((c,u)=>s.jsxs("div",{className:ii.row,children:[s.jsxs("div",{className:ii.left,children:[s.jsx("div",{className:ii.label,children:c.label}),s.jsx("div",{className:ii.avgHead,children:""}),s.jsx("div",{className:ii.avgNum,style:{color:e.title},children:typeof c.avg=="number"?c.avg.toLocaleString("de-DE"):""})]}),s.jsx("div",{className:ii.top3,children:c.list.map((h,m)=>s.jsx(ble,{name:h.name,value:h[c.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}const wle="_card_1enwc_1",jle="_wrap_1enwc_1",Sle="_divider_1enwc_1",Nle="_rows_1enwc_1",kle="_row_1enwc_1",Cle="_left_1enwc_1",Tle="_label_1enwc_1",Ile="_avgHead_1enwc_1",Ele="_avgNum_1enwc_1",Ale="_top3_1enwc_1",Ple="_chip_1enwc_1",Rle="_badge_1enwc_1",Lle="_name_1enwc_1",Dle="_score_1enwc_1",Mle="_headerSpacer_1enwc_1",ai={card:wle,wrap:jle,divider:Sle,rows:Nle,row:kle,left:Cle,label:Tle,avgHead:Ile,avgNum:Ele,top3:Ale,chip:Ple,badge:Rle,name:Lle,score:Dle,headerSpacer:Mle};function Fle({name:t,value:e,classLabel:n,colors:r}){const i=ry(n,64);return s.jsxs("div",{className:ai.chip,children:[s.jsx("span",{className:ai.badge,children:i?s.jsx("img",{src:i,alt:""}):null}),s.jsx("span",{className:ai.name,children:t!=null?t:""}),s.jsx("span",{className:ai.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function Ble({snapshot:t,colors:e,title:n="Total Stats"}){var o;const r=(o=t==null?void 0:t.members)!=null?o:[],i=c=>[...r].filter(u=>typeof u[c]=="number").sort((u,h)=>{var m,g;return((m=h[c])!=null?m:0)-((g=u[c])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return s.jsxs("div",{className:ai.card,children:[s.jsx(jc,{text:n}),s.jsx("div",{className:ai.headerSpacer}),s.jsxs("div",{className:ai.wrap,children:[s.jsx("div",{className:ai.divider}),s.jsx("div",{className:ai.rows,children:a.map((c,u)=>s.jsxs("div",{className:ai.row,children:[s.jsxs("div",{className:ai.left,children:[s.jsx("div",{className:ai.label,children:c.label}),s.jsx("div",{className:ai.avgHead,children:""}),s.jsx("div",{className:ai.avgNum,style:{color:e.title},children:typeof c.avg=="number"?c.avg.toLocaleString("de-DE"):""})]}),s.jsx("div",{className:ai.top3,children:c.list.map((h,m)=>s.jsx(Fle,{name:h.name,value:h[c.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}function $le({guild:t,snapshot:e,colors:n}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(jc,{text:"General Info"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function Ole({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(jc,{text:"Fortress"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function Vle({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(jc,{text:"Rankings"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function Ule({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(jc,{text:"Serververgleich"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const zle=A.memo(function({guild:e,snapshot:n,emblemUrl:r,colors:i}){const a=i.icon,o=({text:c})=>s.jsxs("div",{className:mm.sectionDivider,children:[s.jsx("div",{className:mm.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),s.jsx("div",{className:mm.sectionTitle,style:{color:i.soft},children:c}),s.jsx("div",{className:mm.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return s.jsxs("div",{className:mm.root+" space-y-4",children:[s.jsx(o,{text:"GUILD OVERVIEW"}),s.jsx("div",{style:{marginTop:6,marginBottom:10},children:s.jsx(o,{text:"AVERAGE PLAYER STATS"})}),s.jsx($le,{guild:e,snapshot:n,colors:i}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[s.jsx(_le,{snapshot:n,colors:i}),s.jsx(Ble,{snapshot:n,colors:i})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[s.jsx(Ole,{colors:i}),s.jsx(Vle,{colors:i})]}),s.jsx("div",{className:"mt-4",children:s.jsx(Ule,{colors:i})})]})}),Gle="_wrapper_zqchq_3",Hle="_grid_zqchq_9",Wle="_tile_zqchq_13",Kle="_disabled_zqchq_37",qle="_crestWrap_zqchq_41",Qle="_crest_zqchq_41",Yle="_ring_zqchq_53",Xle="_badge_zqchq_55",Jle="_meta_zqchq_67",Zle="_nameRow_zqchq_69",ece="_name_zqchq_69",tce="_share_zqchq_73",sce="_sub_zqchq_75",nce="_tileButton_zqchq_79",rce="_donutCard_zqchq_85",ice="_donutHeader_zqchq_87",ace="_legend_zqchq_91",oce="_legendItem_zqchq_93",lce="_legendSwatch_zqchq_95",cce="_legendRight_zqchq_97",dce="_centerLabel_zqchq_101",bn={wrapper:Gle,grid:Hle,tile:Wle,disabled:Kle,crestWrap:qle,crest:Qle,ring:Yle,badge:Xle,meta:Jle,nameRow:Zle,name:ece,share:tce,sub:sce,tileButton:nce,donutCard:rce,donutHeader:ice,legend:ace,legendItem:oce,legendSwatch:lce,legendRight:cce,centerLabel:dce},R_=56;function ux(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function K3(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const uce=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function hce(t){return t?/drive\.google\.com/.test(t):!1}function q3(t,e=R_){if(t)return hce(t)?Pi(t,e):t}function mce(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const n={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return n[e]?n[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function pce(t){var m,g,v,b,_,k;if(!t)return null;const e=t,n=t,r=(m=e.key)!=null?m:n.id,i=(g=e.label)!=null?g:n.name,a=(b=(v=n.crestUrl)!=null?v:e.iconUrl)!=null?b:n.iconUrl,o=(_=e.iconUrl)!=null?_:n.iconUrl,c=(k=e.fallback)!=null?k:n.fallback;if(!r||!i)return null;const u=q3(a,R_),h=q3(o,R_);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:c?String(c):void 0}}function CL(t,e){var m,g,v,b,_,k,I,R,P,N,x,w,L,j,S,C,M,T,F,D,V;const n={},r={},i={},a={},o=e.map(z=>z.id);for(const z of o)n[z]=0,r[z]=0,i[z]=0,a[z]=null;for(const z of Array.isArray(t)?t:[]){const K=(w=(N=(R=(k=(b=(v=(g=(m=z.classId)!=null?m:z.class)!=null?g:z.klass)!=null?v:z.playerClass)!=null?b:z.cls)!=null?k:(_=z.values)==null?void 0:_.Class)!=null?R:(I=z.values)==null?void 0:I.class)!=null?N:(P=z.values)==null?void 0:P.Klasse)!=null?w:(x=z.values)==null?void 0:x.klasse,W=mce(K);if(!W||!o.includes(W))continue;n[W]+=1;const U=uce((C=(j=z.level)!=null?j:(L=z.values)==null?void 0:L.Level)!=null?C:(S=z.values)==null?void 0:S.level);U!=null&&(r[W]+=U,i[W]+=1,(!a[W]||((T=(M=a[W])==null?void 0:M.level)!=null?T:-1/0)<U)&&(a[W]={id:z.id,name:(V=(D=z.name)!=null?D:(F=z.values)==null?void 0:F.Name)!=null?V:null,level:U}))}const c=Object.values(n).reduce((z,K)=>z+K,0),u={},h={};return o.forEach(z=>{u[z]=c>0?n[z]/c*100:0,h[z]=i[z]>0?r[z]/i[z]:null}),{counts:n,shares:u,avg:h,top:a}}const gce=({valuePct:t})=>{const n=2*Math.PI*28,r=n*(1-Math.max(0,Math.min(100,t))/100);return s.jsxs("svg",{className:bn.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[s.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),s.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:n,strokeDashoffset:r,strokeLinecap:"round"})]})},fce=({data:t,classMeta:e,onPickClass:n})=>{const[r,i]=A.useState({}),a=Array.isArray(t)?t:[],o=Array.isArray(e)?e:[],{counts:c,shares:u,avg:h,top:m}=A.useMemo(()=>CL(a,o),[a,o]);return s.jsx("section",{className:bn.wrapper,children:s.jsx("div",{className:bn.grid,style:{gridTemplateColumns:"1fr"},children:o.map(g=>{var P,N,x;const v=(P=c[g.id])!=null?P:0,b=(N=u[g.id])!=null?N:0,_=h[g.id],k=m[g.id],I=v<=0,R=r[g.id]?void 0:g.crestUrl||g.iconUrl;return s.jsxs("div",{className:`${bn.tile} ${I?bn.disabled:""}`,title:I?`${g.name}: kein Mitglied`:`${g.name}  ${K3(v)}  ${ux(b)}${_?`   ${_.toFixed(1)}`:""}`,children:[s.jsxs("div",{className:bn.crestWrap,children:[R?s.jsx("img",{className:bn.crest,src:R,alt:g.name,onError:()=>i(w=>({...w,[g.id]:!0}))}):s.jsx("div",{className:bn.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(x=g.fallback)!=null?x:""}),s.jsx(gce,{valuePct:b}),s.jsx("div",{className:bn.badge,children:K3(v)})]}),s.jsxs("div",{className:bn.meta,children:[s.jsxs("div",{className:bn.nameRow,children:[s.jsx("div",{className:bn.name,children:g.name}),s.jsx("div",{className:bn.share,children:ux(b)})]}),s.jsxs("div",{className:bn.sub,children:[_?` Lvl ${_.toFixed(1)}`:"",k?`  Top: ${k.name}${k.level?` (Lv ${k.level})`:""}`:""]})]}),!I&&n&&s.jsx("button",{className:bn.tileButton,onClick:()=>n(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},vce=({data:t,classMeta:e})=>{const n=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=A.useMemo(()=>CL(n,r),[n,r]),o=A.useMemo(()=>Object.values(a).reduce((c,u)=>c+u,0),[a]);return s.jsxs("div",{className:bn.donutCard,children:[s.jsxs("div",{className:bn.donutHeader,children:[s.jsx("div",{children:"Klassen-Verteilung"}),s.jsxs("div",{className:bn.legendRight,children:["Gesamt: ",o]})]}),s.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[s.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[s.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,v=r.map((_,k)=>{var I;return{id:_.id,pct:(I=i[_.id])!=null?I:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*k)} 60% 55%)`}});let b=0;return v.map(_=>{const k=(_.pct||0)/100;if(k<=0)return null;const I=b,R=b+g*k;b=R;const P=R-I>Math.PI?1:0,N=130+100*Math.cos(I),x=130+100*Math.sin(I),w=130+100*Math.cos(R),L=130+100*Math.sin(R),j=130+64*Math.cos(R),S=130+64*Math.sin(R),C=130+64*Math.cos(I),M=130+64*Math.sin(I),T=`M ${N} ${x} A 100 100 0 ${P} 1 ${w} ${L} L ${j} ${S} A 64 64 0 ${P} 0 ${C} ${M} Z`;return s.jsx("path",{d:T,fill:_.color,opacity:.95},_.id)})})()]}),s.jsx("div",{className:bn.legend,children:r.map((c,u)=>{var g,v;const h=(g=i[c.id])!=null?g:0,m=(v=a[c.id])!=null?v:0;return s.jsxs("div",{className:bn.legendItem,title:`${c.name}: ${m}  ${ux(h)}`,children:[s.jsx("span",{className:bn.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),s.jsx("span",{children:c.name}),s.jsxs("span",{className:bn.legendRight,children:[m,"  ",ux(h)]})]},c.id)})})]}),s.jsx("div",{className:bn.centerLabel,children:"Anteile je Klasse"})]})},Kn={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},Jb=new Map,Df=new Map,Q3="sf_profile_guild__",Y3="sf_profile_guild_server_index",X3=3600*1e3,xce=t=>{var e,n,r,i,a,o,c,u,h,m,g,v,b,_,k;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(n=t.class)!=null?n:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(o=t.baseMain)!=null?o:void 0,con:(c=t.conBase)!=null?c:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(m=t.treasury)!=null?m:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(v=t.attrTotal)!=null?v:void 0,conTotal:(b=t.conTotal)!=null?b:void 0,lastScan:(_=t.lastScan)!=null?_:void 0,lastActivity:(k=t.lastActivity)!=null?k:void 0}}},Zb=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},yce=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function TL({title:t,right:e,children:n}){return s.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:Kn.tile,border:`1px solid ${Kn.line}`},children:[(t||e)&&s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:Kn.line},children:[s.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:Kn.soft},children:t}),e]}),s.jsx("div",{className:"p-4",children:n})]})}function pm({k:t,v:e}){return s.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[s.jsx("span",{className:"opacity-80",children:t}),s.jsx("span",{className:"font-semibold",style:{color:Kn.title},children:e})]})}function bce({guild:t}){var n,r;const e=Sp(t.id,800);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:s.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?s.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):s.jsx("div",{className:"text-6xl",children:""})})}),s.jsx(TL,{title:"GILDEN INFO",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsx(pm,{k:"Mitglieder",v:(n=t.memberCount)!=null?n:"-"}),s.jsx(pm,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:"-"}),s.jsx(pm,{k:"Server",v:(r=t.server)!=null?r:"-"}),s.jsx(pm,{k:"Inaktiv",v:"0"}),s.jsx(pm,{k:"Aktivitaet",v:"100%"})]})})]})}function e1(){var I,R,P,N,x,w;const t=Cx(),e=t.id||t.gid||t.guildId||t.guild||"",n=hi(),[r,i]=A.useState(!0),[a,o]=A.useState(null),[c,u]=A.useState(null),[h,m]=A.useState(null),[g,v]=A.useState("grid"),b=A.useMemo(()=>(Array.isArray(_r)?_r:[]).map(pce).filter(Boolean),[]);A.useEffect(()=>{let L=!1;async function j(){var K;i(!0),o(null);const S=e.trim();if(!S){o("Keine Gilde gewaehlt."),i(!1);return}const C=()=>{if(typeof window=="undefined")return{};try{const W=window.localStorage.getItem(Y3);if(!W)return{};const U=JSON.parse(W);return U&&typeof U=="object"?U:{}}catch(W){return{}}},M=C()[S],T=M?`${Q3}${M}__${S}`:null;if(T){const W=Df.get(T);if(W)if(Date.now()-W.cachedAt<X3){L||(u(W.data.guild),m(W.data.snapshot),i(!1));return}else Df.delete(T)}if(T){const W=vL(T,X3);if(W&&typeof W=="object"){const U=W;Df.set(T,{cachedAt:Date.now(),data:U}),L||(u(U.guild),m(U.snapshot),i(!1));return}}const F=async()=>{var U,J,re,G,X,Y,se,ce,_e,Ae,ee,le,te,ye,ke,Me,Re,Ee,Le,Fe,Be,je,ue,Pe,De,it,yt,ie,he,ve,Te,St,at,rt,ut,_t,ot;let W=null;try{W=Bn("GuildProfile:load");const nt=ps(Tt,`guilds/${S}/latest/latest`),ts=await An(W,nt,()=>pn(nt));if(!ts.exists())throw new Error("Gilde nicht gefunden.");const pt=ts.data(),ne=(re=(J=pt.name)!=null?J:(U=pt.values)==null?void 0:U.Name)!=null?re:S,Oe=(Y=(X=pt.server)!=null?X:(G=pt.values)==null?void 0:G.Server)!=null?Y:null,Ve=(ee=Zb((Ae=(ce=pt.memberCount)!=null?ce:(se=pt.values)==null?void 0:se["Guild Member Count"])!=null?Ae:(_e=pt.values)==null?void 0:_e.GuildMemberCount))!=null?ee:null,ct=(Fe=Zb((Le=(Re=(ke=(te=pt.hofRank)!=null?te:(le=pt.values)==null?void 0:le["Hall of Fame Rank"])!=null?ke:(ye=pt.values)==null?void 0:ye.HoF)!=null?Re:(Me=pt.values)==null?void 0:Me.Rank)!=null?Le:(Ee=pt.values)==null?void 0:Ee["Guild Rank"]))!=null?Fe:null,qe=yce(Zb(pt.timestamp)),ft={id:S,name:ne,server:Oe,memberCount:Ve,hofRank:ct,lastScanDays:qe};let Mt=null;const Lt=ps(Tt,`guilds/${S}/snapshots/members_summary`),Ns=await An(W,Lt,()=>pn(Lt));if(Ns.exists()){const dt=Ns.data();Mt={guildId:String((Be=dt.guildId)!=null?Be:S),updatedAt:String((Pe=(ue=dt.updatedAt)!=null?ue:(je=pt.values)==null?void 0:je.Timestamp)!=null?Pe:""),updatedAtMs:Number((it=(De=dt.updatedAtMs)!=null?De:pt.timestamp*1e3)!=null?it:0),count:Number((yt=dt.count)!=null?yt:0),hash:String((ie=dt.hash)!=null?ie:""),avgLevel:(he=dt.avgLevel)!=null?he:null,avgTreasury:(ve=dt.avgTreasury)!=null?ve:null,avgMine:(Te=dt.avgMine)!=null?Te:null,avgBaseMain:(St=dt.avgBaseMain)!=null?St:null,avgConBase:(at=dt.avgConBase)!=null?at:null,avgSumBaseTotal:(rt=dt.avgSumBaseTotal)!=null?rt:null,avgAttrTotal:(ut=dt.avgAttrTotal)!=null?ut:null,avgConTotal:(_t=dt.avgConTotal)!=null?_t:null,avgTotalStats:(ot=dt.avgTotalStats)!=null?ot:null,members:Array.isArray(dt.members)?dt.members:[]}}return{guild:ft,snapshot:Mt}}finally{un(W)}},D=T!=null?T:S.toLowerCase(),V=Jb.get(D),z=V!=null?V:F();V||Jb.set(D,z);try{const W=await z,J=String((K=W.guild.server)!=null?K:"").trim().toLowerCase().replace(/[^a-z0-9]/g,"")||"unknown",re=`${Q3}${J}__${S}`;if(typeof window!="undefined")try{const G=C();G[S]=J,window.localStorage.setItem(Y3,JSON.stringify(G)),xL(re,W)}catch(G){}Df.set(re,{cachedAt:Date.now(),data:W}),L||(u(W.guild),m(W.snapshot))}catch(W){L||o((W==null?void 0:W.message)||"Fehler beim Laden.")}finally{V||Jb.delete(D),L||i(!1)}}return j(),()=>{L=!0}},[e]);const _=A.useMemo(()=>{var L;return((L=h==null?void 0:h.members)!=null?L:[]).map(j=>xce(j))},[h]);if(r)return s.jsx(os,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:s.jsx("div",{className:"text-sm",style:{color:Kn.soft},children:"Lade Gildenprofil..."})});if(!c)return s.jsx(os,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:s.jsxs("div",{className:"text-sm",style:{color:Kn.soft},children:[a!=null?a:"Unbekannter Fehler.",s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:()=>n("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const k=s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"px-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${Kn.line}`,position:"relative",zIndex:2},children:[s.jsx("div",{className:"min-w-[120px]",children:s.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:Kn.tile,border:`1px solid ${Kn.line}`,color:Kn.title},children:(I=c.server)!=null?I:"S?.EU"})}),s.jsx("div",{className:"flex-1 text-center",children:s.jsx("div",{className:"font-extrabold",style:{color:Kn.title,fontSize:26,lineHeight:1.15},children:c.name})}),s.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:Kn.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:"-"," ",s.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),s.jsx("div",{style:{height:1,background:Kn.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return s.jsxs(os,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[k,s.jsx("div",{className:"px-6 pb-8",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[s.jsx("div",{className:"col-span-12 md:col-span-3",children:s.jsx(bce,{guild:c})}),s.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[s.jsx(zle,{guild:c,snapshot:h,emblemUrl:Sp(c.id,512)||void 0,colors:Kn}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-full max-w-[980px]",children:s.jsx(soe,{guildName:c.name,server:(R=c.server)!=null?R:"-",emblemUrl:Sp(c.id,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(P=c.memberCount)!=null?P:0,avgLevel:(N=h==null?void 0:h.avgLevel)!=null?N:0,totalPower:(x=h==null?void 0:h.avgTotalStats)!=null?x:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(w=c.memberCount)!=null?w:0}`]:void 0})})}),s.jsx(_ce,{members:_,guildId:c.id,guildName:c.name,guildServer:c.server})]}),s.jsxs("div",{className:"col-span-12 md:col-span-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("button",{onClick:()=>v("grid"),"aria-label":"Klassenuebersicht",children:s.jsx(jc,{text:"Klassenuebersicht",tone:g==="grid"?"accent":"default"})}),s.jsx("button",{onClick:()=>v("donut"),"aria-label":"Klassenverteilung",children:s.jsx(jc,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?s.jsx(fce,{data:_,classMeta:b,onPickClass:L=>{const j=new URL(window.location.href);j.searchParams.set("tab","Uebersicht"),j.searchParams.set("class",L),window.location.href=j.toString()}}):s.jsx(vce,{data:_,classMeta:b})]})]})})]})}function _ce({members:t,guildId:e,guildName:n,guildServer:r}){const[i,a]=A.useState("Uebersicht");return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:Kn.line},role:"tablist",children:["Uebersicht","Rankings","Monthly Progress","Historie"].map(o=>{const c=o===i;return s.jsx("button",{role:"tab","aria-selected":c,onClick:()=>a(o),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${c?Kn.header:"transparent"}`,background:c?"rgba(45,78,120,0.35)":"transparent",color:Kn.title},children:o},o)})}),s.jsxs(TL,{children:[i==="Uebersicht"&&s.jsx(toe,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&s.jsxs("div",{className:"text-sm",style:{color:Kn.soft},children:["Platzhalter ",s.jsx("b",{children:"Rankings"})," - Inhalt folgt."]}),i==="Monthly Progress"&&s.jsx(Joe,{guildId:e,guildName:n,guildServer:r}),i==="Historie"&&s.jsxs("div",{className:"text-sm",style:{color:Kn.soft},children:["Platzhalter ",s.jsx("b",{children:"Historie"})," - Inhalt folgt."]})]})]})}function wce(){const{t}=Vs();return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(t1,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),s.jsx(t1,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"}),s.jsx(t1,{to:"/servers/overview",title:t("servers.tiles.overview.title"),desc:t("servers.tiles.overview.subtitle")})]})]})}function t1({to:t,title:e,desc:n}){return s.jsxs(Gs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function jce(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers  Rankings"}),s.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function Sce(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers  Stats"}),s.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const Nce="_card_1rxdx_21",kce="_hoverLift_1rxdx_51",Cce="_title_1rxdx_63",Tce="_body_1rxdx_89",Ice="_iconStack_1rxdx_99",gm={card:Nce,hoverLift:kce,title:Cce,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:Tce,iconStack:Ice};function qr({title:t,padding:e="md",hover:n=!0,className:r="",children:i}){return s.jsxs("div",{className:[gm.card,gm[`pad-${e}`],n?gm.hoverLift:"",r].join(" "),children:[t?s.jsx("div",{className:gm.title,children:t}):null,s.jsx("div",{className:gm.body,children:i})]})}const Ece="_page_frkd2_1",Ace="_controlsRow_frkd2_13",Pce="_controls_frkd2_13",Rce="_controlButton_frkd2_33",Lce="_entryGrid_frkd2_63",Dce="_entryItem_frkd2_75",Mce="_nodeList_frkd2_89",Fce="_nodeChildren_frkd2_91",Bce="_nodeItem_frkd2_121",$ce="_nodeButton_frkd2_129",Oce="_nodeCard_frkd2_149",Vce="_nodeTitleRow_frkd2_157",Uce="_nodeTitle_frkd2_157",zce="_nodeToggle_frkd2_181",Gce="_nodeMeta_frkd2_207",Hce="_nodeCode_frkd2_225",Wce="_placeholder_frkd2_233",Kce="_desktopOnly_frkd2_245",sr={page:Ece,controlsRow:Ace,controls:Pce,controlButton:Rce,entryGrid:Lce,entryItem:Dce,nodeList:Mce,nodeChildren:Fce,nodeItem:Bce,nodeButton:$ce,nodeCard:Oce,nodeTitleRow:Vce,nodeTitle:Uce,nodeToggle:zce,nodeMeta:Gce,nodeCode:Hce,placeholder:Wce,desktopOnly:Kce};function Et(t,e,n){const r=[];for(let i=e;i<=n;i+=1)r.push(`${t}${i}`);return r}function qce(t){const e=/^([A-Z]+)(\d+)$/.exec(t);return e?`${e[1]} ${e[2]}`:t}function Qce(t){return{code:t,displayName:qce(t),type:"origin",tier:0,mergedFrom:[]}}function Yce(t,e){return{code:t,displayName:e!=null?e:t,type:"other",tier:0,mergedFrom:[]}}function Hs(t,e,n,r){return{code:t,displayName:r!=null?r:t,type:"fusion",tier:n,mergedFrom:e}}const Ds={};function Sn(t){for(const e of t)Ds[e]=Qce(e)}function Xce(t){for(const e of t)Ds[e]=Yce(e)}Sn(Et("EU",1,23));Sn(Et("US",1,10));Sn(Et("BR",1,2));Sn(Et("CL",1,2));Sn(["CA1","MX1"]);Sn(Et("AE",1,2));Sn(Et("DK",1,2));Sn(Et("NL",1,3));Sn(Et("SE",1,2));Sn(Et("UK",1,2));Sn(["IN1","JP1","RO1","RU1"]);Sn(Et("IT",1,8));Sn(Et("GR",1,6));Sn(Et("PT",1,8));Sn(Et("TR",1,6));Sn(Et("ES",1,12));Sn(Et("FR",1,15));Sn(Et("PL",1,40));Sn(Et("DE",1,43));Sn(Et("INT",1,60));Sn(Et("CZ",1,35));Sn(Et("SK",1,3));Sn(Et("HU",1,20));Xce(["tv2","123playgames","minijuegos","rtl","rtl2","sevengames","wp","buffed","gamona","xchar","ingame"]);Ds.F1=Hs("F1",[...Et("BR",1,2),"CA1",...Et("CL",1,2),"MX1",...Et("US",1,10)],1);Ds.F2=Hs("F2",[...Et("AE",1,2),...Et("DK",1,2),"tv2","IN1","JP1",...Et("NL",1,3),"RO1","RU1",...Et("SE",1,2),...Et("UK",1,2)],1);Ds.F3=Hs("F3",[...Et("IT",1,8)],1);Ds.F4=Hs("F4",[...Et("GR",1,6),"123playgames",...Et("PT",1,8),...Et("TR",1,6)],1);Ds.F5=Hs("F5",[...Et("ES",1,12),"minijuegos"],1);Ds.F6=Hs("F6",[...Et("FR",1,13)],1);Ds.F7=Hs("F7",[...Et("PL",7,17)],1);Ds.F8=Hs("F8",[...Et("DE",5,12)],1);Ds.F9=Hs("F9",[...Et("DE",25,37)],1);Ds.F10=Hs("F10",[...Et("PL",18,33)],1);Ds.F11=Hs("F11",[...Et("DE",13,24),"rtl","sevengames"],1);Ds.F12=Hs("F12",[...Et("INT",1,5)],1);Ds.F13=Hs("F13",[...Et("PL",1,6),"wp"],1);Ds.F14=Hs("F14",[...Et("INT",15,21)],1);Ds.F15=Hs("F15",[...Et("CZ",17,28),"SK2","SK3"],1);Ds.F16=Hs("F16",[...Et("CZ",6,16),"SK1"],1);Ds.F17=Hs("F17",[...Et("DE",1,4),"buffed","rtl2","gamona","xchar","ingame"],1);Ds.F18=Hs("F18",[...Et("CZ",1,5)],1);Ds.F19=Hs("F19",[...Et("HU",1,15)],1);Ds.F20=Hs("F20",[...Et("INT",6,14),"CZ29","HU16","PL34"],1);Ds.F21=Hs("F21",[...Et("INT",22,30),"CZ30","DE38","PL35"],1);Ds.F22=Hs("F22",[...Et("INT",31,37),"CZ31","CZ32","DE39","DE40","HU17","PL36","PL37"],1);Ds.F23=Hs("F23",[...Et("INT",38,45),"FR14","FR15","CZ33","CZ34","DE41","DE42","HU18","HU19","PL38","PL39"],1);Ds.F24=Hs("F24",[...Et("INT",46,50)],1);Ds.F25=Hs("F25",[...Et("INT",51,52),"CZ35","DE43","HU20","PL40"],1);Ds.F26=Hs("F26",[...Et("INT",53,56)],1);Ds.F27=Hs("F27",[...Et("INT",57,60)],1);Ds.MAERWYNN=Hs("MAERWYNN",["F1","F2","F3","F4","F5"],2,"Maerwynn");Ds.BLACK_FOREST=Hs("BLACK_FOREST",["F7","F10","F13"],2,"Black Forest");Ds.GRANOGRIM=Hs("GRANOGRIM",["F15","F16","F18"],2,"Granogrim");const Jce=["MAERWYNN","BLACK_FOREST","GRANOGRIM",...Et("F",1,27),...Et("EU",1,23)],Zce={entrypoints:Jce,nodes:Ds},J3=(t,e)=>{const n=e[t];return n?{node:n,isPlaceholder:!1,key:n.code}:{node:{code:t,displayName:t,type:"other",tier:0,mergedFrom:[]},isPlaceholder:!0,key:`placeholder:${t}`}},ede=(t,e)=>{var i,a;const n=new Set,r=[...t];for(;r.length;){const o=r.pop();if(!o||n.has(o))continue;n.add(o),((a=(i=e[o])==null?void 0:i.mergedFrom)!=null?a:[]).forEach(u=>{n.has(u)||r.push(u)})}return n};function Z3({node:t,hasChildren:e,isExpanded:n,isPlaceholder:r,onToggle:i}){return s.jsx("button",{type:"button",onClick:i,className:sr.nodeButton,"aria-expanded":e?n:void 0,children:s.jsxs(qr,{hover:!0,className:[sr.nodeCard,r?sr.placeholder:""].join(" "),children:[s.jsxs("div",{className:sr.nodeTitleRow,children:[s.jsx("div",{className:sr.nodeTitle,children:t.displayName||t.code}),e?s.jsx("span",{className:sr.nodeToggle,"aria-hidden":!0,children:n?"-":"+"}):null]}),s.jsx("div",{className:sr.nodeMeta,children:s.jsx("span",{className:sr.nodeCode,children:t.code})})]})})}function tde(){const{t}=Vs(),{entrypoints:e,nodes:n}=Zce,[r,i]=q.useState(()=>new Set),a=h=>{i(m=>{const g=new Set(m);return g.has(h)?g.delete(h):g.add(h),g})},o=()=>{i(ede(e,n))},c=()=>{i(new Set)},u=(h,m)=>{var I;if(m.has(h))return null;const g=J3(h,n),v=(I=g.node.mergedFrom)!=null?I:[],b=v.length>0,_=r.has(h),k=new Set(m);return k.add(h),s.jsxs("li",{className:sr.nodeItem,children:[s.jsx(Z3,{node:g.node,hasChildren:b,isExpanded:_,isPlaceholder:g.isPlaceholder,onToggle:()=>a(h)}),b&&_?s.jsx("ul",{className:sr.nodeChildren,children:v.map(R=>u(R,k))}):null]},g.key)};return s.jsxs("div",{className:sr.page,children:[s.jsx("div",{className:sr.controlsRow,children:s.jsxs("div",{className:`${sr.controls} ${sr.desktopOnly}`,children:[s.jsx("button",{type:"button",onClick:o,className:sr.controlButton,children:t("servers.overview.expandAll")}),s.jsx("button",{type:"button",onClick:c,className:sr.controlButton,children:t("servers.overview.collapseAll")})]})}),s.jsx("div",{className:sr.entryGrid,children:e.map(h=>{var _;const m=J3(h,n),g=(_=m.node.mergedFrom)!=null?_:[],v=g.length>0,b=r.has(h);return s.jsxs("div",{className:sr.entryItem,children:[s.jsx(Z3,{node:m.node,hasChildren:v,isExpanded:b,isPlaceholder:m.isPlaceholder,onToggle:()=>a(h)}),v&&b?s.jsx("ul",{className:sr.nodeList,children:g.map(k=>u(k,new Set([h])))}):null]},m.key)})})]})}function sde(){const{t}=Vs();return s.jsx(os,{title:t("servers.overview.pageTitle"),centerFramed:!1,padded:!0,children:s.jsx(tde,{})})}const fr={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function eI({children:t,style:e}){return s.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function nde({size:t=36}){return s.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:s.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function _u({label:t,value:e}){return s.jsxs("div",{style:{background:fr.tileAlt,border:`1px solid ${fr.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[s.jsx("div",{style:{fontSize:12,color:fr.textSoft,marginBottom:4},children:t}),s.jsx("div",{style:{fontSize:22,color:fr.title,fontWeight:700},children:e})]})}function rde(t){const e=t.trim(),n=e.toUpperCase(),r=e.toLowerCase(),i=n.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let o="";const c=n.match(/^([A-Z]{2})(\d{1,3})$/);if(c){const u=c[1],h=String(parseInt(c[2],10)),m=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();o=`s${h}.sfgame.${m}`}return Array.from(new Set([e,n,r,i,a,o].filter(Boolean)))}function s1(){var k,I,R,P;const t=Cx(),e=hi(),n=ir(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=A.useState(!0),[o,c]=A.useState(null),[u,h]=A.useState(null),[m,g]=A.useState(null);A.useEffect(()=>{let N=!1;async function x(){const w=Bn("ServerProfile:load");a(!0),c(null),h(null),g(null);try{const L=r.trim();if(!L)throw new Error("Kein Server gewhlt.");const j=ps(Tt,`servers/${L}`),S=await An(w,j,()=>pn(j));if(S.exists()){N||(h(S.id),g(S.data()));return}const C=pl(Tt,"servers"),M=rde(L),T=[];for(const z of M)T.push(wn(w,C,()=>_n(En(C,Kr("code","==",z),rr(1))))),T.push(wn(w,C,()=>_n(En(C,Kr("displayName","==",z),rr(1))))),T.push(wn(w,C,()=>_n(En(C,Kr("host","==",z),rr(1)))));const F=await Promise.allSettled(T);let D=null,V=null;for(const z of F){if(z.status!=="fulfilled")continue;const K=z.value;if(!K.empty){const W=K.docs[0];D=W.id,V=W.data();break}}if(!D||!V)throw new Error("Server nicht gefunden.");N||(h(D),g(V),D!==L&&e(`/server/${encodeURIComponent(D)}`,{replace:!0,state:{from:n.pathname}}))}catch(L){N||c((L==null?void 0:L.message)||"Fehler beim Laden.")}finally{un(w),N||a(!1)}}return x(),()=>{N=!0}},[r,e,n.pathname]);const v=A.useMemo(()=>s.jsxs("div",{style:{padding:24,color:fr.textSoft},children:[o!=null?o:"Unbekannter Fehler.",s.jsx("div",{style:{marginTop:12},children:s.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:fr.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[o,e]);if(i)return s.jsx(os,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:s.jsx("div",{style:{padding:16,color:fr.textSoft},children:"Lade Serverprofil"})});if(!m)return s.jsx(os,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:v});const b=m.displayName||m.code||u||r,_=m.active===!0?"Aktiv":m.active===!1?"Inaktiv":"";return s.jsxs(os,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[s.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${fr.line}`},children:s.jsxs(eI,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[s.jsx(nde,{size:36}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:18,color:fr.title,fontWeight:700},children:b}),s.jsxs("div",{style:{fontSize:12,color:fr.textSoft},children:[m.host||"","  ",m.region||"","  ",((k=m.type)==null?void 0:k.toUpperCase())||""]})]})]})}),s.jsxs(eI,{style:{paddingTop:12,paddingBottom:24},children:[s.jsxs("div",{style:{background:fr.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${fr.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:fr.title,fontSize:24,fontWeight:800},children:b}),s.jsxs("div",{style:{marginTop:6,color:fr.textSoft,fontSize:13},children:[m.host||"","  ",m.region||"","  ",((I=m.type)==null?void 0:I.toUpperCase())||""]})]}),s.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[s.jsxs("span",{style:{color:fr.textSoft},children:["Status: ",_]}),s.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:m.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[s.jsx(_u,{label:"Code",value:m.code||""}),s.jsx(_u,{label:"Host",value:m.host||""}),s.jsx(_u,{label:"Region",value:m.region||""}),s.jsx(_u,{label:"Typ",value:((R=m.type)==null?void 0:R.toUpperCase())||""}),s.jsx(_u,{label:"Numeric ID",value:(P=m.numericId)!=null?P:""}),s.jsx(_u,{label:"Status",value:_})]}),s.jsxs("div",{style:{marginTop:16,background:fr.tileAlt,padding:15,borderRadius:12,border:`1px solid ${fr.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:fr.textSoft},children:["Platzhalter ",s.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const ide="_page_177kv_1",ade="_sectionCard_177kv_15",ode="_identityCard_177kv_29",lde="_identityGrid_177kv_39",cde="_profileName_177kv_63",dde="_identityMeta_177kv_77",ude="_mainCharacter_177kv_95",hde="_characterHeader_177kv_117",mde="_characterTitle_177kv_131",pde="_characterSubtitle_177kv_143",gde="_classIcon_177kv_153",fde="_metaGrid_177kv_181",vde="_metaLabel_177kv_193",xde="_metaValue_177kv_207",yde="_portrait_177kv_217",bde="_sectionHeader_177kv_245",_de="_sectionHint_177kv_265",wde="_bioText_177kv_275",jde="_tagGroups_177kv_295",Sde="_tagGroupLabel_177kv_309",Nde="_tagList_177kv_323",kde="_tag_177kv_295",Cde="_showcaseGrid_177kv_353",Tde="_characterCard_177kv_365",Ide="_characterCardHeader_177kv_385",Ede="_characterName_177kv_399",Ade="_badge_177kv_411",Pde="_characterMeta_177kv_433",Rde="_characterStats_177kv_449",Lde="_statGrid_177kv_465",Dde="_statTile_177kv_477",Mde="_statLabel_177kv_491",Fde="_statValue_177kv_505",Bde="_statSubtext_177kv_519",$de="_emptyState_177kv_531",Ode="_recordsHighlights_177kv_551",Vde="_highlightCard_177kv_565",Ude="_recordType_177kv_579",zde="_recordTitle_177kv_593",Gde="_timeline_177kv_607",Hde="_timelineItem_177kv_625",Wde="_timelineBullet_177kv_635",Kde="_timelineContent_177kv_653",qde="_timelineTitle_177kv_661",Qde="_timelineMeta_177kv_673",Yde="_achievementsHighlights_177kv_685",Xde="_achievementCard_177kv_699",Jde="_achievementIcon_177kv_723",Zde="_achievementName_177kv_747",eue="_achievementDesc_177kv_759",tue="_achievementTier_177kv_771",sue="_achievementDate_177kv_785",nue="_achievementsGrid_177kv_795",rue="_achievementBadge_177kv_807",iue="_tierGold_177kv_831",aue="_tierSilver_177kv_839",oue="_tierBronze_177kv_847",Ze={page:ide,sectionCard:ade,identityCard:ode,identityGrid:lde,profileName:cde,identityMeta:dde,mainCharacter:ude,characterHeader:hde,characterTitle:mde,characterSubtitle:pde,classIcon:gde,metaGrid:fde,metaLabel:vde,metaValue:xde,portrait:yde,sectionHeader:bde,sectionHint:_de,bioText:wde,tagGroups:jde,tagGroupLabel:Sde,tagList:Nde,tag:kde,showcaseGrid:Cde,characterCard:Tde,characterCardHeader:Ide,characterName:Ede,badge:Ade,characterMeta:Pde,characterStats:Rde,statGrid:Lde,statTile:Dde,statLabel:Mde,statValue:Fde,statSubtext:Bde,emptyState:$de,recordsHighlights:Ode,highlightCard:Vde,recordType:Ude,recordTitle:zde,timeline:Gde,timelineItem:Hde,timelineBullet:Wde,timelineContent:Kde,timelineTitle:qde,timelineMeta:Qde,achievementsHighlights:Yde,achievementCard:Xde,achievementIcon:Jde,achievementName:Zde,achievementDesc:eue,achievementTier:tue,achievementDate:sue,achievementsGrid:nue,achievementBadge:rue,tierGold:iue,tierSilver:aue,tierBronze:oue},lue={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},cue=1e3*60*60*24,tI={gold:3,silver:2,bronze:1};function due(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const n=Date.now()-e;return n<0?0:Math.floor(n/cue)}function Mf(t){const e=new Date(t);return Number.isNaN(e.getTime())?Qt("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function uue(){const{profileId:t}=Cx(),e=lue,n=due(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(m=>m.type==="record").slice(0,3),a=[...e.achievements].sort((m,g)=>tI[g.tier]-tI[m.tier]).slice(0,3),o=[{label:Qt("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:Qt("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:Qt("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:Qt("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],c=n==null?Qt("profile.public.identity.dateUnknown"):n===0?Qt("profile.public.identity.lastScanToday"):`${n} ${Qt("profile.public.identity.daysAgoSuffix")}`,u=Qt("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):Qt("profile.public.identity.unknownValue");return s.jsx(os,{title:Qt("profile.public.title"),subtitle:Qt("profile.public.subtitle"),centerFramed:!1,padded:!0,children:s.jsxs("div",{className:Ze.page,children:[s.jsx("section",{className:`${Ze.sectionCard} ${Ze.identityCard}`,children:s.jsxs("div",{className:Ze.identityGrid,children:[s.jsxs("div",{children:[s.jsx("h1",{className:Ze.profileName,children:e.profileUser.displayName}),s.jsxs("div",{className:Ze.identityMeta,children:[s.jsxs("span",{children:[Qt("profile.public.identity.profileIdLabel"),": ",t!=null?t:Qt("profile.public.identity.unknownValue")]}),s.jsxs("span",{children:[Qt("profile.public.identity.lastScanLabel"),": ",c]})]}),s.jsxs("article",{className:Ze.mainCharacter,children:[s.jsxs("div",{className:Ze.characterHeader,children:[s.jsxs("div",{children:[s.jsx("div",{className:Ze.metaLabel,children:Qt("profile.public.identity.mainCharacterLabel")}),s.jsx("div",{className:Ze.characterTitle,children:e.mainCharacter.name}),s.jsxs("div",{className:Ze.characterSubtitle,children:[e.mainCharacter.class,"  ",Qt("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),s.jsx("div",{className:Ze.classIcon,children:e.mainCharacter.class.charAt(0)})]}),s.jsxs("div",{className:Ze.metaGrid,children:[s.jsxs("div",{children:[s.jsx("div",{className:Ze.metaLabel,children:Qt("profile.public.identity.serverLabel")}),s.jsx("div",{className:Ze.metaValue,children:e.mainCharacter.server})]}),s.jsxs("div",{children:[s.jsx("div",{className:Ze.metaLabel,children:Qt("profile.public.identity.guildLabel")}),s.jsx("div",{className:Ze.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),s.jsx("div",{className:Ze.portrait,children:u})]})}),s.jsxs("section",{className:Ze.sectionCard,children:[s.jsx("div",{className:Ze.sectionHeader,children:s.jsx("span",{children:Qt("profile.public.bio.title")})}),s.jsx("p",{className:Ze.bioText,children:e.bio}),s.jsxs("div",{className:Ze.tagGroups,children:[s.jsxs("div",{children:[s.jsx("div",{className:Ze.tagGroupLabel,children:Qt("profile.public.bio.languagesLabel")}),s.jsx("div",{className:Ze.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(m=>s.jsx("span",{className:Ze.tag,children:m.toUpperCase()},m)):s.jsx("span",{className:Ze.tag,children:Qt("profile.public.identity.unknownValue")})})]}),s.jsxs("div",{children:[s.jsx("div",{className:Ze.tagGroupLabel,children:Qt("profile.public.bio.rolesLabel")}),s.jsx("div",{className:Ze.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(m=>s.jsx("span",{className:Ze.tag,children:Qt(`profile.public.roles.${m}`)},m)):s.jsx("span",{className:Ze.tag,children:Qt("profile.public.identity.unknownValue")})})]})]})]}),s.jsxs("section",{className:Ze.sectionCard,children:[s.jsxs("div",{className:Ze.sectionHeader,children:[s.jsx("span",{children:Qt("profile.public.showcase.title")}),s.jsx("span",{className:Ze.sectionHint,children:Qt("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?s.jsx("div",{className:Ze.emptyState,children:Qt("profile.public.showcase.empty")}):s.jsx("div",{className:Ze.showcaseGrid,children:e.showcaseCharacters.map(m=>s.jsxs("article",{className:Ze.characterCard,children:[s.jsxs("div",{className:Ze.characterCardHeader,children:[s.jsxs("div",{children:[s.jsx("div",{className:Ze.characterName,children:m.name}),s.jsxs("div",{className:Ze.characterMeta,children:[s.jsx("span",{children:m.class}),s.jsxs("span",{children:[Qt("profile.public.identity.levelShort")," ",m.level]})]})]}),s.jsx("span",{className:Ze.badge,children:Qt(`profile.public.showcase.tags.${m.tag}`)})]}),s.jsxs("div",{className:Ze.characterMeta,children:[s.jsx("span",{children:m.server}),s.jsx("span",{children:m.guildName})]}),s.jsxs("div",{className:Ze.characterStats,children:[s.jsxs("span",{children:[Qt("profile.public.showcase.scrapbookLabel")," ",m.scrapbookPercent,"%"]}),s.jsxs("span",{children:[Qt("profile.public.showcase.highlightLabel"),": ",m.highlightProgress]})]})]},m.id))})]}),s.jsxs("section",{className:Ze.sectionCard,children:[s.jsx("div",{className:Ze.sectionHeader,children:s.jsx("span",{children:Qt("profile.public.stats.title")})}),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ze.statGrid,children:o.map(m=>s.jsxs("article",{className:Ze.statTile,children:[s.jsx("div",{className:Ze.statLabel,children:m.label}),s.jsx("div",{className:Ze.statValue,children:m.value})]},m.label))}),s.jsxs("div",{className:Ze.statSubtext,children:[Qt("profile.public.stats.topServersLabel"),": ",h]}),s.jsxs("div",{className:Ze.statSubtext,children:[Qt("profile.public.stats.firstScanLabel"),": ",Mf(e.scanStats.firstScanAt)]})]})]}),s.jsxs("section",{className:Ze.sectionCard,children:[s.jsx("div",{className:Ze.sectionHeader,children:s.jsx("span",{children:Qt("profile.public.records.title")})}),e.recordsAndMilestones.length===0?s.jsx("div",{className:Ze.emptyState,children:Qt("profile.public.records.empty")}):s.jsxs(s.Fragment,{children:[i.length>0&&s.jsx("div",{className:Ze.recordsHighlights,children:i.map(m=>s.jsxs("article",{className:Ze.highlightCard,children:[s.jsx("div",{className:Ze.recordType,children:Qt(`profile.public.records.type.${m.type}`)}),s.jsx("div",{className:Ze.recordTitle,children:m.title}),s.jsxs("div",{className:Ze.timelineMeta,children:[Mf(m.when),"  ",m.context]})]},m.id))}),s.jsx("ul",{className:Ze.timeline,children:e.recordsAndMilestones.map(m=>s.jsxs("li",{className:Ze.timelineItem,children:[s.jsx("div",{className:Ze.timelineBullet}),s.jsxs("div",{className:Ze.timelineContent,children:[s.jsx("div",{className:Ze.timelineTitle,children:m.title}),s.jsxs("div",{className:Ze.timelineMeta,children:[Mf(m.when),"  ",m.context]})]})]},m.id))})]})]}),s.jsxs("section",{className:Ze.sectionCard,children:[s.jsxs("div",{className:Ze.sectionHeader,children:[s.jsx("span",{children:Qt("profile.public.achievements.title")}),e.achievements.length>0&&s.jsx("span",{className:Ze.sectionHint,children:Qt("profile.public.achievements.highlights")})]}),e.achievements.length===0?s.jsx("div",{className:Ze.emptyState,children:Qt("profile.public.achievements.empty")}):s.jsxs(s.Fragment,{children:[a.length>0&&s.jsx("div",{className:Ze.achievementsHighlights,children:a.map(m=>s.jsxs("article",{className:Ze.achievementCard,children:[s.jsx("div",{className:[Ze.achievementIcon,m.tier==="gold"?Ze.tierGold:m.tier==="silver"?Ze.tierSilver:Ze.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),s.jsx("div",{className:Ze.achievementTier,children:Qt(`profile.public.achievements.tiers.${m.tier}`)}),s.jsx("div",{className:Ze.achievementName,children:Qt(m.nameKey)}),s.jsx("div",{className:Ze.achievementDesc,children:Qt(m.descriptionKey)}),m.unlockedAt&&s.jsx("div",{className:Ze.achievementDate,children:Mf(m.unlockedAt)})]},m.id))}),s.jsx("div",{className:Ze.achievementsGrid,children:e.achievements.map(m=>s.jsxs("article",{className:Ze.achievementBadge,children:[s.jsx("div",{className:[Ze.achievementIcon,m.tier==="gold"?Ze.tierGold:m.tier==="silver"?Ze.tierSilver:Ze.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),s.jsx("div",{className:Ze.achievementName,children:Qt(m.nameKey)}),s.jsx("div",{className:Ze.achievementDesc,children:Qt(m.descriptionKey)})]},m.id))})]})]})]})})}const hue="_wrap_k6pqt_1",mue="_centerLogoWrap_k6pqt_21",pue="_centerLogoLink_k6pqt_37",gue="_centerLogo_k6pqt_21",fue="_arc_k6pqt_55",vue="_left_k6pqt_57",xue="_right_k6pqt_59",yue="_sub_k6pqt_61",bue="_full_k6pqt_63",_ue="_arcItem_k6pqt_65",wue="_iconBtn_k6pqt_71",jue="_active_k6pqt_125",Sue="_iconImg_k6pqt_135",Nue="_placeholderIcon_k6pqt_139",kue="_placeholderText_k6pqt_157",Cue="_iconLabel_k6pqt_161",Er={wrap:hue,centerLogoWrap:mue,centerLogoLink:pue,centerLogo:gue,arc:fue,left:vue,right:xue,sub:yue,full:bue,arcItem:_ue,iconBtn:wue,active:jue,iconImg:Sue,placeholderIcon:Nue,placeholderText:kue,iconLabel:Cue},Tue=({to:t,label:e,icon:n,variant:r="main"})=>{const{search:i}=ir();let a=!1;try{const o=new URLSearchParams(i),c=o.get("tab"),u=o.get("sub"),h=o.get("sub2"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),v=m.get("sub"),b=m.get("sub2");r==="main"?a=c===g:r==="sub"?a=c===g&&!!v&&u===v:a=c===g&&!!v&&u===v&&!!b&&h===b}catch(o){a=!1}return s.jsxs(Gs,{to:t,"aria-label":e,className:[Er.iconBtn,a?Er.active:""].join(" "),title:e,replace:!1,children:[n?s.jsx("img",{src:n,alt:"",className:Er.iconImg}):s.jsx("div",{className:Er.placeholderIcon,"aria-hidden":"true",children:s.jsx("span",{className:Er.placeholderText,children:e.slice(0,2).toUpperCase()})}),s.jsx("div",{className:Er.iconLabel,children:e})]})},Ff=({items:t,side:e,anchorSide:n,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:o=440,superOffset:c=660})=>{if((e==="sub"||e==="sub2")&&!n)return null;const u=A.useMemo(()=>{const g=t.length;if(g===0)return[];let v=-90,b=90;e==="left"?(v=90,b=270):e==="sub"||e==="sub2"?n==="left"?(v=90,b=270):(v=-90,b=90):e==="full"&&(v=0,b=360);const _=(b-v)/(g+1),k=r?190:250;return t.map((I,R)=>{const N=(v+_*(R+1))*Math.PI/180;return{it:I,x:Math.cos(N)*k,y:Math.sin(N)*k}})},[t,e,n,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=n==="left"?`calc(50% - ${o}px)`:`calc(50% + ${o}px)`:e==="sub2"&&(g.left=n==="left"?`calc(50% - ${c}px)`:`calc(50% + ${c}px)`),g})(),m=e==="sub"?"sub":e==="sub2"?"sub2":"main";return s.jsx("div",{className:[Er.arc,e==="left"?Er.left:"",e==="right"?Er.right:"",e==="sub"?Er.sub:"",e==="sub2"?Er.sub2:"",e==="full"?Er.full:""].join(" "),style:h,children:u.map(({it:g,x:v,y:b})=>s.jsx("div",{className:Er.arcItem,style:{transform:`translate(${v}px, ${b}px)`},children:s.jsx(Tue,{to:g.to,label:g.label,icon:g.icon,variant:m})},g.key))})},Iue=({logoSrc:t,categories:e})=>{const[n]=ar(),r=n.get("tab")||null,i=n.get("sub")||null;n.get("sub2");const a=A.useMemo(()=>e.find(N=>N.key===r)||null,[e,r]),o=(a==null?void 0:a.sub)||[],c=A.useMemo(()=>o.find(N=>N.key===i)||null,[o,i]),u=(c==null?void 0:c.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",m=A.useRef(null),[g,v]=A.useState(!1),[b,_]=A.useState(220),[k,I]=A.useState(440),[R,P]=A.useState(660);return A.useLayoutEffect(()=>{(()=>{var M,T;const w=((T=(M=m.current)==null?void 0:M.getBoundingClientRect().width)!=null?T:380)/2,j=Math.round(w+60),S=Math.round(j+220),C=Math.round(S+220);_(j),I(S),P(C),v(!0)})()},[]),A.useEffect(()=>{let N=0,x=null,w={main:b,out:k,sup:R};const L=()=>{x!=null&&window.clearTimeout(x),x=window.setTimeout(()=>{N=requestAnimationFrame(()=>{var K,W;const S=((W=(K=m.current)==null?void 0:K.getBoundingClientRect().width)!=null?W:380)/2,M=Math.round(S+60),T=Math.round(M+220),F=Math.round(T+220),D=Math.abs(M-w.main),V=Math.abs(T-w.out),z=Math.abs(F-w.sup);D>1&&_(M),V>1&&I(T),z>1&&P(F),w={main:M,out:T,sup:F}})},120)};return window.addEventListener("resize",L),()=>{window.removeEventListener("resize",L),x!=null&&window.clearTimeout(x),N&&cancelAnimationFrame(N)}},[b,k,R]),s.jsxs("div",{className:Er.wrap,children:[s.jsx("div",{className:Er.centerLogoWrap,children:s.jsx(Gs,{to:"/guidehub",className:Er.centerLogoLink,"aria-label":"Guide Hub Home",children:s.jsx("img",{ref:m,src:t,alt:"Guide Hub",className:Er.centerLogo})})}),g&&s.jsxs(s.Fragment,{children:[s.jsx(Ff,{items:e.filter(N=>N.side==="left").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"left",variant:"main",arcOffset:b}),s.jsx(Ff,{items:e.filter(N=>N.side==="right").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"right",variant:"main",arcOffset:b}),h&&o.length>0&&s.jsx(Ff,{items:o.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:k,compact:!0}),h&&u.length>0&&s.jsx(Ff,{items:u.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:R,compact:!0})]})]})},vd=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]}],Eue="_topWrap_1vr4p_1",Aue="_divider_1vr4p_19",Pue="_contentArea_1vr4p_53",Rue="_placeholder_1vr4p_65",Lue="_placeholderTitle_1vr4p_79",Due="_placeholderText_1vr4p_93",wu={topWrap:Eue,divider:Aue,contentArea:Pue,placeholder:Rue,placeholderTitle:Lue,placeholderText:Due};function Dd({title:t}){return s.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[s.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),s.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const Mue=()=>s.jsx(Dd,{title:"Game Features"});function Pn({title:t}){return s.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[s.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),s.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const Fue=()=>s.jsx(Pn,{title:"Progression"}),Bue=()=>s.jsx(Pn,{title:"Hellevator"}),$ue=()=>s.jsx(Pn,{title:"Legendary Dungeon"}),Oue=()=>s.jsx(Pn,{title:"Events"}),Vue=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],Uue="_grid_1amcc_3",zue="_tileBtn_1amcc_45",Gue="_wrap_1amcc_87",Hue="_headerBar_1amcc_99",Wue="_title_1amcc_117",fm={grid:Uue,tileBtn:zue,wrap:Gue,headerBar:Hue,title:Wue};function Kue(){const[t,e]=ar(),n=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return s.jsxs("div",{className:fm.wrap,children:[s.jsx("div",{className:fm.headerBar,children:s.jsx("h2",{className:fm.title,children:"Calculators"})}),s.jsx("div",{className:fm.grid,children:Vue.map(r=>s.jsx("button",{className:fm.tileBtn,onClick:()=>n(r.slug),"aria-label":r.title,children:s.jsx(qr,{title:r.title,padding:"md",hover:!0,children:s.jsx(s.Fragment,{children:" "})})},r.slug))})]})}const que=()=>s.jsx(Pn,{title:"Infographics (Dropdown inside page)"}),Que=()=>s.jsx(Pn,{title:"Class book"}),Yue=()=>s.jsx(Pn,{title:"Dungeons"}),Xue=()=>s.jsx(Dd,{title:"Fortress"}),Jue=()=>s.jsx(Dd,{title:"Fortress Calculator"}),Zue="_wrap_188zo_7",ehe="_headerBar_188zo_21",the="_title_188zo_39",she="_meta_188zo_55",nhe="_description_188zo_67",rhe="_contentWrapper_188zo_83",ihe="_tableSection_188zo_97",ahe="_table_188zo_97",ohe="_infoBox_188zo_151",lhe="_sectionTitle_188zo_165",che="_divider_188zo_181",dhe="_uwWrap_188zo_239",uhe="_uwCard_188zo_251",hhe="_uwTitle_188zo_271",mhe="_uwTableWrap_188zo_283",phe="_uwTable_188zo_283",ghe="_uwTh_188zo_303",fhe="_uwTd_188zo_305",vhe="_uwTdNumber_188zo_333",an={wrap:Zue,headerBar:ehe,title:the,meta:she,description:nhe,contentWrapper:rhe,tableSection:ihe,table:ahe,infoBox:ohe,sectionTitle:lhe,divider:che,uwWrap:dhe,uwCard:uhe,uwTitle:hhe,uwTableWrap:mhe,uwTable:phe,uwTh:ghe,uwTd:fhe,uwTdNumber:vhe};function IL({variant:t="guidehub"}){const e=t==="underworld",n=e?an.uwTh:void 0,r=e?`${an.uwTh} ${an.uwTdNumber}`:void 0,i=e?an.uwTd:void 0,a=e?`${an.uwTd} ${an.uwTdNumber}`:void 0,o=s.jsx("div",{className:e?an.uwTableWrap:void 0,children:s.jsxs("table",{className:e?an.uwTable:an.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:n,children:"Building"}),s.jsx("th",{className:r,children:"Level"}),s.jsx("th",{className:r,children:"Gold Cost"}),s.jsx("th",{className:r,children:"Shroom Cost"}),s.jsx("th",{className:r,children:"Wood Cost"}),s.jsx("th",{className:r,children:"Stone Cost"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"35"}),s.jsx("td",{className:a,children:"12"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"20"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"150"}),s.jsx("td",{className:a,children:"50"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"138"}),s.jsx("td",{className:a,children:"46"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"30"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"440"}),s.jsx("td",{className:a,children:"140"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"15"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"406"}),s.jsx("td",{className:a,children:"129"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"40"}),s.jsx("td",{className:a,children:"12"}),s.jsx("td",{className:a,children:"1,100"}),s.jsx("td",{className:a,children:"333"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"20"}),s.jsx("td",{className:a,children:"12"}),s.jsx("td",{className:a,children:"1,015"}),s.jsx("td",{className:a,children:"308"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"50"}),s.jsx("td",{className:a,children:"24"}),s.jsx("td",{className:a,children:"2,500"}),s.jsx("td",{className:a,children:"800"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"25"}),s.jsx("td",{className:a,children:"24"}),s.jsx("td",{className:a,children:"2,308"}),s.jsx("td",{className:a,children:"738"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"60"}),s.jsx("td",{className:a,children:"36"}),s.jsx("td",{className:a,children:"6,000"}),s.jsx("td",{className:a,children:"2,000"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"30"}),s.jsx("td",{className:a,children:"36"}),s.jsx("td",{className:a,children:"5,538"}),s.jsx("td",{className:a,children:"1,849"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"7"}),s.jsx("td",{className:a,children:"70"}),s.jsx("td",{className:a,children:"48"}),s.jsx("td",{className:a,children:"13,417"}),s.jsx("td",{className:a,children:"4,433"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"8"}),s.jsx("td",{className:a,children:"80"}),s.jsx("td",{className:a,children:"78"}),s.jsx("td",{className:a,children:"27,200"}),s.jsx("td",{className:a,children:"9,280"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"720"}),s.jsx("td",{className:a,children:"240"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"1,408"}),s.jsx("td",{className:a,children:"448"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"2,640"}),s.jsx("td",{className:a,children:"800"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"4,800"}),s.jsx("td",{className:a,children:"1,536"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"9,600"}),s.jsx("td",{className:a,children:"3,200"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"18,400"}),s.jsx("td",{className:a,children:"6,080"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Gem Mine"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"15"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"50"}),s.jsx("td",{className:a,children:"17"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Treasury"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"25"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"40"}),s.jsx("td",{className:a,children:"13"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"20"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"30"}),s.jsx("td",{className:a,children:"20"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"88"}),s.jsx("td",{className:a,children:"56"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"8"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"220"}),s.jsx("td",{className:a,children:"133"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"21"}),s.jsx("td",{className:a,children:"500"}),s.jsx("td",{className:a,children:"320"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"22"}),s.jsx("td",{className:a,children:"0"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"90"}),s.jsx("td",{className:a,children:"16"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"9"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"264"}),s.jsx("td",{className:a,children:"45"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"12"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"660"}),s.jsx("td",{className:a,children:"107"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Barracks"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"20"}),s.jsx("td",{className:a,children:"14"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Barracks"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"8"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"82"}),s.jsx("td",{className:a,children:"55"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Total cost"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"577"}),s.jsx("td",{className:a,children:"363"}),s.jsx("td",{className:a,children:"99,881"}),s.jsx("td",{className:a,children:"33,218"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress Pack ressources"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"300"}),s.jsx("td",{className:a,children:"100,000"}),s.jsx("td",{className:a,children:"50,000"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Left over"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"-577"}),s.jsx("td",{className:a,children:"-63"}),s.jsx("td",{className:a,children:"119"}),s.jsx("td",{className:a,children:"16,782"})]})]})]})});return e?s.jsx("div",{className:an.uwWrap,children:s.jsxs("div",{className:an.uwCard,children:[s.jsx("h2",{className:an.uwTitle,children:"Fortress Build Order"}),o]})}):s.jsxs("section",{className:an.tableSection,children:[s.jsx("h3",{className:an.sectionTitle,children:"Fortress Build Order"}),o]})}function xhe(){return s.jsxs("div",{className:an.wrap,children:[s.jsxs("div",{className:an.headerBar,children:[s.jsx("h2",{className:an.title,children:"Fortress Package skip order"}),s.jsx("span",{className:an.meta,children:"Last updated: 21.02.2025"})]}),s.jsx("p",{className:an.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),s.jsxs("div",{className:an.contentWrapper,children:[s.jsx(IL,{}),s.jsxs("section",{className:an.infoBox,children:[s.jsx("h3",{className:an.sectionTitle,children:"Important"}),s.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Archery Guild"}),s.jsx("li",{children:"Mage's Tower"}),s.jsx("li",{children:"Fortifications"})]}),s.jsx("div",{className:an.divider}),s.jsx("h3",{className:an.sectionTitle,children:"Total Costs"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Gold:"})," 577 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Shrooms:"})," 363 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Wood:"})," 99,881 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Stone:"})," 33,218 ",s.jsx("br",{})]}),s.jsx("h3",{className:an.sectionTitle,children:"Remaining Resources"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Remaining Gold:"})," -577 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Wood:"})," 119 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const yhe=()=>s.jsx(Dd,{title:"Fortress attack duplication guide"}),bhe=()=>s.jsx(Dd,{title:"Underworld"}),_he=()=>s.jsx(Dd,{title:"Underworld Calculator"}),whe=()=>s.jsx(Dd,{title:"Underworld Pro Package skip order"}),jhe=()=>s.jsx(Pn,{title:"Arena / AM"}),She="_wrap_13u9w_5",Nhe="_description_13u9w_63",khe="_controls_13u9w_79",Che="_search_13u9w_83",The="_tableWrap_13u9w_119",Ihe="_table_13u9w_119",Ehe="_thead_13u9w_143",Ahe="_th_13u9w_143",Phe="_td_13u9w_167",Rhe="_tierCell_13u9w_179",Lhe="_amountCell_13u9w_181",Dhe="_bonusCell_13u9w_183",Mhe="_tags_13u9w_185",Fhe="_tierBox_13u9w_191",Bhe="_tierIcon_13u9w_193",$he="_tierTexts_13u9w_203",Ohe="_tierName_13u9w_215",Vhe="_badge_13u9w_221",Uhe="_badgeMax_13u9w_241",zhe="_badgeAchiev_13u9w_243",Ghe="_badgeX2_13u9w_245",Hhe="_badgeX12_13u9w_247",Whe="_badgeX60_13u9w_249",Khe="_iconHead_13u9w_255",qhe="_achievTooltip_13u9w_271",Qhe="_achiev_13u9w_271",Yhe="_achievImg_13u9w_275",Xhe="_dataRow_13u9w_303",Jhe="_tierCellHover_13u9w_323",xt={wrap:She,description:Nhe,controls:khe,search:Che,tableWrap:The,table:Ihe,thead:Ehe,th:Ahe,td:Phe,tierCell:Rhe,amountCell:Lhe,bonusCell:Dhe,tags:Mhe,tierBox:Fhe,tierIcon:Bhe,tierTexts:$he,tierName:Ohe,badge:Vhe,badgeMax:Uhe,badgeAchiev:zhe,badgeX2:Ghe,badgeX12:Hhe,badgeX60:Whe,iconHead:Khe,achievTooltip:qhe,achiev:Qhe,achievImg:Yhe,dataRow:Xhe,tierCellHover:Jhe},Kl={gold:"goldrune",xp:"xprune",hp:"healthrune",totalRes:"totalresrune",singleRes:"lightresrune",elem:"lightdmgrune",item:"itemqualrune",epics:"epicrune"},vm=44,n1=72,Zhe={Quintillion:"capitalist",Septillion:"stinkingrich",Decillion:"runemaster"};function ql({keyName:t,label:e}){const n=Ga(t,vm);return s.jsx(n2,{content:e,placement:"bottom",children:s.jsx("div",{className:xt.iconHead,children:n.thumb?s.jsx("img",{src:n.thumb,alt:e,width:vm,height:vm,style:{borderRadius:6,border:"1px solid #2B4C73"}}):s.jsx("div",{style:{width:vm,height:vm,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(n.fallback||e).slice(0,1).toUpperCase()})})})}function eme(){return s.jsx(EL,{})}function tme({id:t,label:e}){const n=Ga(t,n1);return s.jsx(n2,{content:e,placement:"bottom",className:xt.achievTooltip,children:s.jsx("div",{className:xt.achiev,children:n.thumb?s.jsx("img",{src:n.thumb,alt:e,width:n1,height:n1,style:{borderRadius:3,border:"1px solid #2C4A73"}}):s.jsx("div",{className:xt.achievImg})})})}const hx=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1%",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",elemDmg:"11%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",totalRes:"5%",singleRes:"14%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",elemDmg:"12%",itemQuality:"+2%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%"},{tier:"Sextillion",amount:"1 E21",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"10 E22",gold:"11%",singleRes:"17%",elemDmg:"14%",epics:"11%"},{tier:"Sextillion",amount:"100 E23",hp:"4%",totalRes:"6%",singleRes:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",elemDmg:"15%",epics:"12%"},{tier:"Septillion",amount:"10 E25",gold:"13%",xp:"3%",singleRes:"19%",elemDmg:"16%"},{tier:"Septillion",amount:"100 E26",singleRes:"20%",epics:"13%"},{tier:"Octillion",amount:"1 E27",totalRes:"7%",singleRes:"21%",elemDmg:"17%"},{tier:"Octillion",amount:"10 E28",gold:"14%",singleRes:"22%",epics:"14%"},{tier:"Octillion",amount:"100 E29",gold:"15%",elemDmg:"18%"},{tier:"Nonillion",amount:"1 E30",hp:"5%",singleRes:"23%",epics:"15%"},{tier:"Nonillion",amount:"10 E31",totalRes:"8%",singleRes:"24%",elemDmg:"19%"},{tier:"Nonillion",amount:"100 E32",gold:"16%",singleRes:"25%",elemDmg:"20%",epics:"16%"},{tier:"Decillion",amount:"1 E33",xp:"4%",singleRes:"26%"},{tier:"Decillion",amount:"10 E34",gold:"17%",totalRes:"9%",elemDmg:"21%",epics:"17%"},{tier:"Decillion",amount:"100 E35",singleRes:"27%",elemDmg:"22%"},{tier:"Undecillion",amount:"1 E36",gold:"18%",hp:"6%",singleRes:"28%",epics:"18%"},{tier:"Undecillion",amount:"10 E37",elemDmg:"23%"},{tier:"Undecillion",amount:"100 E38",gold:"19%",totalRes:"10%",singleRes:"29%",epics:"19%"},{tier:"Duodecillion",amount:"1 E39",elemDmg:"24%",note:"x2 Boost"},{tier:"Duodecillion",amount:"10 E40",gold:"20%",singleRes:"30%",elemDmg:"25%",epics:"20%"},{tier:"Duodecillion",amount:"100 E41",singleRes:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",totalRes:"11%",singleRes:"32%",elemDmg:"26%",epics:"21%"},{tier:"Tredecillion",amount:"10 E43",hp:"7%",singleRes:"33%"},{tier:"Tredecillion",amount:"100 E44",gold:"22%",singleRes:"34%",elemDmg:"27%",epics:"22%"},{tier:"Quattuordecillion",amount:"1 E45",xp:"5%",elemDmg:"28%"},{tier:"Quattuordecillion",amount:"10 E46",gold:"23%",totalRes:"12%",singleRes:"35%",epics:"23%"},{tier:"Quattuordecillion",amount:"100 E47",singleRes:"36%",elemDmg:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",epics:"24%",note:"x12 Boost"},{tier:"Quindecillion",amount:"10 E49",singleRes:"37%",elemDmg:"30%"},{tier:"Quindecillion",amount:"100 E50",gold:"25%",hp:"8%",totalRes:"13%",singleRes:"38%",itemQuality:"+3%",epics:"25%"},{tier:"Sexdecillion",amount:"1 E51",singleRes:"39%",elemDmg:"31%"},{tier:"Sexdecillion",amount:"10 E52",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"100 E53",singleRes:"40%",elemDmg:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",totalRes:"14%",singleRes:"41%",elemDmg:"33%",epics:"27%"},{tier:"Septendecillion",amount:"10 E55",xp:"6%"},{tier:"Septendecillion",amount:"100 E56",gold:"28%",hp:"9%",singleRes:"42%",elemDmg:"34%",epics:"28%"},{tier:"Octodecillion",amount:"1 E57",singleRes:"43%",elemDmg:"35%",note:"x8 Boost"},{tier:"Octodecillion",amount:"10 E58",gold:"29%",totalRes:"15%",singleRes:"44%",epics:"29%"},{tier:"Octodecillion",amount:"100 E59",singleRes:"45%",elemDmg:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",epics:"30%"},{tier:"Novendecillion",amount:"10 E61",singleRes:"46%",elemDmg:"37%"},{tier:"Novendecillion",amount:"100 E62",gold:"31%",totalRes:"19%",singleRes:"47%",epics:"31%"},{tier:"Vigintillion",amount:"1 E63",hp:"10%",singleRes:"48%",elemDmg:"38%"},{tier:"Vigintillion",amount:"10 E64",gold:"32%",singleRes:"49%",epics:"32%"},{tier:"Vigintillion",amount:"100 E65",xp:"7%",elemDmg:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",totalRes:"17%",elemDmg:"40%",epics:"33%"},{tier:"Unvigintillion",amount:"10 E67",singleRes:"50%"},{tier:"Unvigintillion",amount:"100 E68",gold:"34%",singleRes:"51%",epics:"34%"},{tier:"Duovigintillion",amount:"1 E69",singleRes:"52%",elemDmg:"41%"},{tier:"Duovigintillion",amount:"10 E70",gold:"35%",hp:"11%",totalRes:"18%",singleRes:"53%",elemDmg:"42%",itemQuality:"+4%",epics:"35%",note:"x60 Boost"},{tier:"Duovigintillion",amount:"100 E71",singleRes:"54%",elemDmg:"43%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"55%",elemDmg:"44%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"19%",elemDmg:"45%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",xp:"8%",singleRes:"56%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",singleRes:"57%",elemDmg:"46%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",hp:"12%",singleRes:"58%",elemDmg:"47%"},{tier:"Quinquavigintillion",amount:"1 E78",gold:"39%",totalRes:"20%",elemDmg:"48%",epics:"39%"},{tier:"Quinquavigintillion",amount:"10 E79",singleRes:"59%",elemDmg:"49%"},{tier:"Quinquavigintillion",amount:"100 E80",gold:"40%",singleRes:"60%",elemDmg:"50%",epics:"40%"},{tier:"Sesvigintillion",amount:"1 E81",singleRes:"61%"},{tier:"Sesvigintillion",amount:"10 E82",gold:"41%",totalRes:"21%",singleRes:"62%",elemDmg:"51%",epics:"41%"},{tier:"Sesvigintillion",amount:"100 E83"},{tier:"Septemvigintillion",amount:"1 E84",gold:"42%",hp:"13%",singleRes:"63%",elemDmg:"52%",epics:"42%"},{tier:"Septemvigintillion",amount:"10 E85",xp:"9%",singleRes:"64%"},{tier:"Septemvigintillion",amount:"100 E86",gold:"43%",totalRes:"22%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"65%",elemDmg:"53%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",singleRes:"66%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",totalRes:"23%",singleRes:"67%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",hp:"14%",singleRes:"68%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",itemQuality:"+5%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"69%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",totalRes:"24%",singleRes:"70%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",xp:"10%",singleRes:"71%",elemDmg:"56%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"72%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",hp:"15%",totalRes:"25%",singleRes:"73%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"74%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",singleRes:"75%",elemDmg:"60%",epics:"50%",note:"MAX"},{tier:"Duotrigintillion",amount:"100 E101"},{tier:"Trestrigintillion",amount:"1 E102"},{tier:"Trestrigintillion",amount:"10 E103"},{tier:"Trestrigintillion",amount:"100 E104"},{tier:"Quattuortrigintillion",amount:"1 E105"},{tier:"Quattuortrigintillion",amount:"10 E106"},{tier:"Quattuortrigintillion",amount:"100 E107"},{tier:"Quinquatrigintillion",amount:"1 E108"},{tier:"Quinquatrigintillion",amount:"10 E109"},{tier:"Quinquatrigintillion",amount:"100 E110"},{tier:"Sextrigintillion",amount:"1 E111"},{tier:"Sextrigintillion",amount:"10 E112"},{tier:"Sextrigintillion",amount:"100 E113"},{tier:"Septentrigintillion",amount:"1 E114"},{tier:"Septentrigintillion",amount:"10 E115"},{tier:"Septentrigintillion",amount:"100 E116"},{tier:"Octotrigintillion",amount:"1 E117"},{tier:"Octotrigintillion",amount:"10 E118"},{tier:"Octotrigintillion",amount:"100 E119"},{tier:"Noventrigintillion",amount:"1 E120"},{tier:"Noventrigintillion",amount:"10 E121"},{tier:"Noventrigintillion",amount:"100 E122"},{tier:"Quadragintillion",amount:"1 E123"},{tier:"Quadragintillion",amount:"10 E124"},{tier:"Quadragintillion",amount:"100 E125"},{tier:"Unquadragintillion",amount:"1 E126"},{tier:"Unquadragintillion",amount:"10 E127"},{tier:"Unquadragintillion",amount:"100 E128"},{tier:"Duoquadragintillion",amount:"1 E129"},{tier:"Duoquadragintillion",amount:"10 E130"},{tier:"Duoquadragintillion",amount:"100 E131"},{tier:"Trequadragintillion",amount:"1 E132"},{tier:"Trequadragintillion",amount:"10 E133"},{tier:"Trequadragintillion",amount:"100 E134"},{tier:"Quattuorquadragintillion",amount:"1 E135"},{tier:"Quattuorquadragintillion",amount:"10 E136"},{tier:"Quattuorquadragintillion",amount:"100 E137"},{tier:"Quinquadragintillion",amount:"1 E138"},{tier:"Quinquadragintillion",amount:"10 E139"},{tier:"Quinquadragintillion",amount:"100 E140"},{tier:"Sexquadragintillion",amount:"1 E141"},{tier:"Sexquadragintillion",amount:"10 E142"},{tier:"Sexquadragintillion",amount:"100 E143"},{tier:"Septenquadragintillion",amount:"1 E144"},{tier:"Septenquadragintillion",amount:"10 E145"},{tier:"Septenquadragintillion",amount:"100 E146"},{tier:"Octoquadragintillion",amount:"1 E147"},{tier:"Octoquadragintillion",amount:"10 E148"},{tier:"Octoquadragintillion",amount:"100 E149"},{tier:"Novenquadragintillion",amount:"1 E150"},{tier:"Novenquadragintillion",amount:"10 E151"},{tier:"Novenquadragintillion",amount:"100 E152"}];function r1(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const n=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(n)+r}function sme(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function nme(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}function rme(t){const e=t.trim().toLowerCase();return e?hx.filter(n=>{var r;return`${n.tier} ${n.amount} ${(r=n.note)!=null?r:""}`.toLowerCase().includes(e)}):hx}function EL(){const{t}=Vs(),[e,n]=A.useState(""),[r,i]=A.useState(null),a=rme(e),o=A.useMemo(()=>Math.max(...hx.map(u=>r1(u.amount))),[]),c=A.useMemo(()=>{const u=new Map;for(const m of a)u.has(m.tier)||u.set(m.tier,[]),u.get(m.tier).push(m);const h=Array.from(new Set(hx.map(m=>m.tier)));return Array.from(u.entries()).sort((m,g)=>h.indexOf(m[0])-h.indexOf(g[0]))},[a]);return s.jsxs("div",{className:xt.wrap,children:[s.jsx("p",{className:xt.description,children:t("guidehub.arenaManager.amRuneBonuses.description")}),s.jsx("div",{className:xt.controls,children:s.jsx("input",{className:xt.search,placeholder:t("guidehub.arenaManager.amRuneBonuses.searchPlaceholder"),value:e,onChange:u=>n(u.target.value)})}),s.jsx("div",{className:xt.tableWrap,children:s.jsxs("table",{className:xt.table,children:[s.jsx("thead",{className:xt.thead,children:s.jsxs("tr",{className:xt.headRow,children:[s.jsx("th",{className:`${xt.th} ${xt.tierCell}`,children:t("guidehub.arenaManager.amRuneBonuses.table.tier")}),s.jsx("th",{className:`${xt.th} ${xt.amountCell}`,children:t("guidehub.arenaManager.amRuneBonuses.table.amount")}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.gold,label:t("guidehub.arenaManager.amRuneBonuses.table.goldBonus")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.xp,label:t("guidehub.arenaManager.amRuneBonuses.table.xpBonus")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.hp,label:t("guidehub.arenaManager.amRuneBonuses.table.hpBonus")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.totalRes,label:t("guidehub.arenaManager.amRuneBonuses.table.totalResistance")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.singleRes,label:t("guidehub.arenaManager.amRuneBonuses.table.singleResistance")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.elem,label:t("guidehub.arenaManager.amRuneBonuses.table.elementalDamage")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.item,label:t("guidehub.arenaManager.amRuneBonuses.table.improvedItemQuality")})}),s.jsx("th",{className:xt.th,children:s.jsx(ql,{keyName:Kl.epics,label:t("guidehub.arenaManager.amRuneBonuses.table.chancesOfEpics")})}),s.jsx("th",{className:xt.th,children:t("guidehub.arenaManager.amRuneBonuses.table.tags")})]})}),s.jsx("tbody",{children:c.map(([u,h])=>{const m=Math.max(...h.map(_=>r1(_.amount))),g=t(`guidehub.arenaManager.amRuneBonuses.tiers.${u.toLowerCase()}`),v=Zhe[u],b=v?t(`guidehub.arenaManager.amRuneBonuses.achievements.${v}`):null;return h.map((_,k)=>{var P,N,x,w,L,j,S,C;const I=Math.abs(r1(_.amount)-o)<1e-6,R=nme(_.note);return s.jsxs("tr",{className:xt.dataRow,onMouseEnter:()=>i(u),onMouseLeave:()=>i(null),children:[k===0&&s.jsx("td",{className:`${xt.td} ${xt.tierCell} ${Math.abs(m-o)<1e-6?xt.tierMax:""} ${r===u?xt.tierCellHover:""}`,rowSpan:h.length,children:s.jsxs("div",{className:xt.tierBox,children:[s.jsx("div",{className:xt.tierIcon,children:g.slice(0,1).toUpperCase()}),s.jsxs("div",{className:xt.tierTexts,children:[s.jsx("div",{className:xt.tierName,children:g}),v&&b&&s.jsx(tme,{id:v,label:b})]})]})}),s.jsx("td",{className:`${xt.td} ${xt.amountCell}`,children:_.amount}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(P=_.gold)!=null?P:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(N=_.xp)!=null?N:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(x=_.hp)!=null?x:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(w=_.totalRes)!=null?w:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(L=_.singleRes)!=null?L:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(j=_.elemDmg)!=null?j:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(S=_.itemQuality)!=null?S:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(C=_.epics)!=null?C:""}),s.jsxs("td",{className:`${xt.td} ${xt.tags}`,children:[I&&s.jsx("span",{className:`${xt.badge} ${xt.badgeMax}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.max")}),sme(_.note)&&s.jsx("span",{className:`${xt.badge} ${xt.badgeAchiev}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.achievement")}),R==="x2"&&s.jsx("span",{className:`${xt.badge} ${xt.badgeX2}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x2")}),R==="x12"&&s.jsx("span",{className:`${xt.badge} ${xt.badgeX12}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x12")}),R==="x60"&&s.jsx("span",{className:`${xt.badge} ${xt.badgeX60}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x60")}),R==="x8"&&s.jsx("span",{className:xt.badge,children:t("guidehub.arenaManager.amRuneBonuses.badges.x8")})]})]},`${u}-${k}`)})})})]})})]})}const ime="_wrap_zrza7_11",ame="_headerBar_zrza7_15",ome="_title_zrza7_31",lme="_meta_zrza7_33",cme="_centerCol_zrza7_37",dme="_text_zrza7_53",ume="_imageBox_zrza7_55",hme="_imageFallback_zrza7_57",mme="_credit_zrza7_59",$o={wrap:ime,headerBar:ame,title:ome,meta:lme,centerCol:cme,text:dme,imageBox:ume,imageFallback:hme,credit:mme};function pme(){const{t}=Vs(),e=Ga("ambuildorder"),n=A.useMemo(()=>e.id?`https://drive.google.com/thumbnail?id=${e.id}&sz=w1024`:null,[e.id]),r=A.useMemo(()=>e.id?`https://drive.google.com/uc?export=view&id=${e.id}`:null,[e.id]),i=e.thumb||null,a=n||r||i;return s.jsxs("div",{className:$o.wrap,children:[s.jsxs("div",{className:$o.headerBar,children:[s.jsx("h2",{className:$o.title,children:t("guidehub.arenaManager.buildOrder.title")}),s.jsx("span",{className:$o.meta,children:t("guidehub.arenaManager.buildOrder.updated",{date:"30.11.2024"})})]}),s.jsxs("div",{className:$o.centerCol,children:[s.jsxs("div",{className:$o.text,children:[s.jsx("p",{children:t("guidehub.arenaManager.buildOrder.body1")}),s.jsx("p",{dangerouslySetInnerHTML:{__html:t("guidehub.arenaManager.buildOrder.body2",{mushrooms:"<strong>4300 Mushrooms</strong>"})}})]}),a?s.jsx("div",{className:$o.imageBox,children:s.jsx("img",{src:a,alt:t("guidehub.arenaManager.buildOrder.imageAlt"),loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):s.jsx("div",{className:$o.imageFallback,children:"??"}),s.jsx("p",{className:$o.credit,children:t("guidehub.arenaManager.buildOrder.credit",{discord:"SF Tavern Discord"})})]})]})}const gme=()=>s.jsx(Pn,{title:"Hellevator Guide"}),fme=()=>s.jsx(Pn,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),vme="_foCalc_18a5w_3",xme="_panel_18a5w_211",yme="_panelHead_18a5w_227",bme="_panelTitle_18a5w_241",_me="_controls_18a5w_243",wme="_ctrlLabel_18a5w_245",jme="_ctrlSelect_18a5w_249",Sme="_tableWrap_18a5w_291",Nme="_table_18a5w_291",kme="_th_18a5w_305",Cme="_td_18a5w_321",Tme="_row_18a5w_333",Ime="_note_18a5w_335",Dn={foCalc:vme,panel:xme,panelHead:yme,panelTitle:bme,controls:_me,ctrlLabel:wme,ctrlSelect:jme,tableWrap:Sme,table:Nme,th:kme,td:Cme,row:Tme,note:Ime},AL={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},Mn=(t,e=0)=>t*3600+e*60,me=[Mn(0,15),Mn(0,31),Mn(1,6),Mn(2,20),Mn(5,0),Mn(8,0),Mn(11,25),Mn(18,27),Mn(40,0),Mn(87,16),Mn(190,46),Mn(320,0),Mn(480,0),Mn(615,33),Mn(800,0)],ws=[Mn(1054,17),Mn(1122,51),Mn(1245,42),Mn(1343,20),Mn(1440,0)],Eme={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:me[0]},{level:2,wood:150,stone:50,gold:20,timeSec:me[1]},{level:3,wood:440,stone:140,gold:30,timeSec:me[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:me[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:me[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:me[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:me[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:me[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:me[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:me[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:me[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:me[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:me[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:me[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:me[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:ws[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:ws[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:ws[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:ws[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:ws[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:me[0]},{level:2,wood:138,stone:46,gold:10,timeSec:me[1]},{level:3,wood:406,stone:129,gold:15,timeSec:me[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:me[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:me[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:me[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:me[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:me[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:me[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:me[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:me[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:me[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:me[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:me[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:me[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:me[0]},{level:2,wood:28,stone:37,gold:14,timeSec:me[1]},{level:3,wood:81,stone:103,gold:21,timeSec:me[2]},{level:4,wood:203,stone:246,gold:28,timeSec:me[3]},{level:5,wood:462,stone:591,gold:35,timeSec:me[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:me[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:me[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:me[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:me[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:me[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:me[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:me[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:me[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:me[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:me[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:ws[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:ws[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:ws[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:ws[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:ws[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:me[0]},{level:2,wood:160,stone:53,gold:50,timeSec:me[1]},{level:3,wood:469,stone:149,gold:75,timeSec:me[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:me[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:me[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:me[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:me[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:me[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:me[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:me[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:me[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:me[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:me[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:me[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:me[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:me[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:me[0]},{level:2,wood:200,stone:67,gold:30,timeSec:me[1]},{level:3,wood:587,stone:187,gold:45,timeSec:me[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:me[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:me[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:me[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:me[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:me[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:me[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:me[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:me[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:me[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:me[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:me[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:me[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:ws[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:ws[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:ws[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:ws[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:ws[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:Mn(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:me[0]},{level:2,wood:30,stone:20,gold:4,timeSec:me[1]},{level:3,wood:88,stone:56,gold:6,timeSec:me[2]},{level:4,wood:220,stone:133,gold:8,timeSec:me[3]},{level:5,wood:500,stone:320,gold:10,timeSec:me[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:me[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:me[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:me[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:me[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:me[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:me[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:me[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:me[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:me[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:me[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:ws[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:ws[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:ws[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:ws[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:ws[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:me[0]},{level:2,wood:90,stone:16,gold:6,timeSec:me[1]},{level:3,wood:264,stone:45,gold:9,timeSec:me[2]},{level:4,wood:660,stone:107,gold:12,timeSec:me[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:me[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:me[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:me[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:me[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:me[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:me[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:me[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:me[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:me[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:me[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:me[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:ws[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:ws[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:ws[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:ws[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:ws[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:me[0]},{level:2,wood:82,stone:55,gold:8,timeSec:me[1]},{level:3,wood:240,stone:153,gold:12,timeSec:me[2]},{level:4,wood:600,stone:364,gold:16,timeSec:me[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:me[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:me[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:me[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:me[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:me[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:me[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:me[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:me[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:me[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:me[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:me[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:me[0]},{level:2,wood:100,stone:33,gold:8,timeSec:me[1]},{level:3,wood:293,stone:93,gold:12,timeSec:me[2]},{level:4,wood:733,stone:222,gold:16,timeSec:me[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:me[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:me[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:me[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:me[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:me[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:me[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:me[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:me[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:me[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:me[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:me[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:ws[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:ws[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:ws[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:ws[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:ws[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:me[0]},{level:2,wood:240,stone:61,gold:12,timeSec:me[1]},{level:3,wood:675,stone:205,gold:18,timeSec:me[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:me[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:me[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:me[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:me[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:me[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:me[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:me[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:me[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:me[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:me[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:me[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:me[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:me[0]},{level:2,wood:164,stone:27,gold:10,timeSec:me[1]},{level:3,wood:480,stone:76,gold:15,timeSec:me[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:me[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:me[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:me[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:me[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:me[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:me[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:me[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:me[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:me[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:me[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:me[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:me[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:me[0]},{level:2,wood:120,stone:53,gold:30,timeSec:me[1]},{level:3,wood:352,stone:149,gold:45,timeSec:me[2]},{level:4,wood:880,stone:356,gold:60,timeSec:me[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:me[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:me[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:me[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:me[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:me[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:me[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:me[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:me[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:me[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:me[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:me[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:ws[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:ws[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:ws[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:ws[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:ws[4]}]}},Ame=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],Pme="fortress",Rme={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function Lme(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function Dme(t){const e=Math.max(0,Math.round(t)),n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=o=>o.toString().padStart(2,"0");return`${a(n)}:${a(r)}:${a(i)}`}const PL=()=>{const{t}=Vs(),[e,n]=A.useState(Pme),[r,i]=A.useState(1),a=A.useMemo(()=>{var v;const h=Rme[e],m=AL[h],g=(v=m==null?void 0:m.id)!=null?v:m;return kd.gifProxy(g)||kd.gif(g)||""},[e]),o=A.useMemo(()=>{var h,m;return(m=(h=Eme[e])==null?void 0:h.costs)!=null?m:[]},[e]),c=A.useMemo(()=>Lme(r),[r]),u=t(`guidehub.calculators.fortress.buildings.${e}`);return s.jsxs("div",{className:`${Dn.foCalc}`,children:[s.jsxs("div",{className:"tabs",children:[s.jsx("span",{className:"tabSelectLabel",children:t("guidehub.calculators.fortress.inputs.buildingSelectLabel")}),s.jsx("select",{className:"tabSelect",value:e,onChange:h=>n(h.target.value),children:Ame.map(h=>s.jsx("option",{value:h.key,children:t(`guidehub.calculators.fortress.buildings.${h.key}`)},h.key))})]}),s.jsxs("div",{className:"mediaRow",children:[s.jsx("div",{className:"media",children:a?s.jsx("img",{src:a,alt:u}):null}),s.jsxs("div",{className:Dn.panel,children:[s.jsxs("div",{className:Dn.panelHead,children:[s.jsx("div",{className:Dn.panelTitle,children:t("guidehub.calculators.fortress.title",{building:u})}),s.jsxs("div",{className:Dn.controls,children:[s.jsx("span",{className:Dn.ctrlLabel,children:t("guidehub.calculators.fortress.inputs.l2Label")}),s.jsx("select",{className:Dn.ctrlSelect,value:r,onChange:h=>i(parseInt(h.target.value,10)),children:Array.from({length:16},(h,m)=>m).map(h=>s.jsx("option",{value:h,children:h},h))})]})]}),s.jsx("div",{className:Dn.tableWrap,children:s.jsxs("table",{className:Dn.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:Dn.th,children:t("guidehub.calculators.fortress.table.level")}),s.jsx("th",{className:Dn.th,children:t("guidehub.calculators.fortress.table.wood")}),s.jsx("th",{className:Dn.th,children:t("guidehub.calculators.fortress.table.stone")}),s.jsx("th",{className:Dn.th,children:t("guidehub.calculators.fortress.table.buildTimeL2")}),s.jsx("th",{className:Dn.th,children:t("guidehub.calculators.fortress.table.skip")})]})}),s.jsx("tbody",{children:o.map(h=>{var b,_,k,I,R,P,N;const m=(b=h.timeSec)!=null?b:0,g=Math.round(m*(1-c)),v=Math.ceil(Math.ceil(g/60)/10);return s.jsxs("tr",{className:Dn.row,children:[s.jsx("td",{className:Dn.td,children:h.level}),s.jsx("td",{className:Dn.td,children:(I=(k=(_=h.wood)==null?void 0:_.toLocaleString)==null?void 0:k.call(_))!=null?I:h.wood}),s.jsx("td",{className:Dn.td,children:(N=(P=(R=h.stone)==null?void 0:R.toLocaleString)==null?void 0:P.call(R))!=null?N:h.stone}),s.jsx("td",{className:Dn.td,children:Dme(g)}),s.jsx("td",{className:Dn.td,children:v.toLocaleString()})]},h.level)})})]})}),s.jsx("div",{className:Dn.note,children:t("guidehub.calculators.fortress.hints.l2Effect")})]})]})]})},Mme="_uwCalc_64lws_3",Fme="_panel_64lws_211",Bme="_panelHead_64lws_227",$me="_panelTitle_64lws_241",Ome="_controls_64lws_243",Vme="_ctrlLabel_64lws_245",Ume="_ctrlSelect_64lws_251",zme="_tableWrap_64lws_295",Gme="_table_64lws_295",Hme="_th_64lws_309",Wme="_td_64lws_325",Kme="_row_64lws_337",qme="_note_64lws_339",yn={uwCalc:Mme,panel:Fme,panelHead:Bme,panelTitle:$me,controls:Ome,ctrlLabel:Vme,ctrlSelect:Ume,tableWrap:zme,table:Gme,th:Hme,td:Wme,row:Kme,note:qme},sI={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},Qme={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function Yme(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function Xme(t){const e=Math.max(0,t),n=Math.round(e),r=Math.floor(n/3600),i=Math.floor(n%3600/60),a=n%60;return{h:r,m:i,s:a}}function Jme(t){const{h:e,m:n,s:r}=Xme(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(n)}:${i(r)}`}function Zme(t,e){var i,a;const n=Yme(e);return((a=(i=Qme[t])==null?void 0:i.costs)!=null?a:[]).map(o=>{const c=o.timeSec*(1-n),u=Math.ceil(Math.ceil(c/60)/10);return{...o,timeAdjSec:c,skipMushroomsAdj:u}})}const epe=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],RL=()=>{const{t}=Vs(),[e,n]=A.useState("hearthofdarkngif"),[r,i]=A.useState(1),a=A.useMemo(()=>{var g;const h=AL[e],m=(g=h==null?void 0:h.id)!=null?g:h;return kd.gifProxy(m)||kd.gif(m)||""},[e]),o=A.useMemo(()=>{var h;return(h=sI[e])!=null?h:"hearthofdarkn"},[e]),c=t(`guidehub.calculators.underworld.buildings.${o}`),u=A.useMemo(()=>Zme(o,r),[o,r]);return s.jsxs("div",{className:yn.uwCalc,children:[s.jsxs("div",{className:"tabs",children:[s.jsx("span",{className:"tabSelectLabel",children:t("guidehub.calculators.underworld.inputs.buildingSelectLabel")}),s.jsx("select",{className:"tabSelect",value:e,onChange:h=>n(h.target.value),children:epe.map(h=>{var m;return s.jsx("option",{value:h,children:t(`guidehub.calculators.underworld.buildings.${(m=sI[h])!=null?m:"hearthofdarkn"}`)},h)})})]}),s.jsxs("div",{className:"mediaRow",children:[s.jsx("div",{className:"media",children:a?s.jsx("img",{src:a,alt:c}):null}),s.jsxs("div",{className:yn.panel,children:[s.jsxs("div",{className:yn.panelHead,children:[s.jsx("div",{className:yn.panelTitle,children:t("guidehub.calculators.underworld.title",{building:c})}),s.jsxs("div",{className:yn.controls,children:[s.jsx("label",{htmlFor:"uw-l2",className:yn.ctrlLabel,children:t("guidehub.calculators.underworld.inputs.l2Label")}),s.jsx("select",{id:"uw-l2",className:yn.ctrlSelect,value:r,onChange:h=>i(parseInt(h.target.value,10)),children:Array.from({length:15},(h,m)=>m+1).map(h=>s.jsx("option",{value:h,children:h},h))})]})]}),s.jsx("div",{className:yn.tableWrap,children:s.jsxs("table",{className:yn.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:yn.th,children:t("guidehub.calculators.underworld.table.level")}),s.jsx("th",{className:yn.th,children:t("guidehub.calculators.underworld.table.soul")}),s.jsx("th",{className:yn.th,children:t("guidehub.calculators.underworld.table.gold")}),s.jsx("th",{className:yn.th,children:t("guidehub.calculators.underworld.table.buildTimeL2")}),s.jsx("th",{className:yn.th,children:t("guidehub.calculators.underworld.table.skip")})]})}),s.jsx("tbody",{children:u.length===0?s.jsx("tr",{className:yn.row,children:s.jsx("td",{className:yn.td,colSpan:5,children:t("guidehub.calculators.underworld.empty")})}):u.map(h=>s.jsxs("tr",{className:yn.row,children:[s.jsx("td",{className:yn.td,children:h.level}),s.jsx("td",{className:yn.td,children:h.soul}),s.jsx("td",{className:yn.td,children:h.gold}),s.jsx("td",{className:yn.td,children:Jme(h.timeAdjSec)}),s.jsx("td",{className:yn.td,children:h.skipMushroomsAdj})]},h.level))})]})}),s.jsx("p",{className:yn.note,children:t("guidehub.calculators.underworld.hints.l2Effect")})]})]})]})},tpe=()=>s.jsx(Pn,{title:"Max Item Stats Calculator"}),spe="_wrap_mnr0g_1",npe="_card_mnr0g_13",rpe="_title_mnr0g_33",ipe="_form_mnr0g_45",ape="_field_mnr0g_57",ope="_input_mnr0g_71",lpe="_gemsRow_mnr0g_87",cpe="_gemBox_mnr0g_101",dpe="_disabled_mnr0g_127",upe="_gemImg_mnr0g_135",hpe="_gemFallback_mnr0g_149",mpe="_normalGem_mnr0g_165",ppe="_blackGem_mnr0g_173",gpe="_legendaryGem_mnr0g_181",fpe="_gemLabel_mnr0g_189",vpe="_gemValue_mnr0g_199",xpe="_hint_mnr0g_211",Ps={wrap:spe,card:npe,title:rpe,form:ipe,field:ape,input:ope,gemsRow:lpe,gemBox:cpe,disabled:dpe,gemImg:upe,gemFallback:hpe,normalGem:mpe,blackGem:ppe,legendaryGem:gpe,gemLabel:fpe,gemValue:vpe,hint:xpe},ype={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},bpe=.25,mx=t=>Math.round(Number.isFinite(t)?t:0);function _pe(t){const e=Number(t.charLevel),n=Number(t.mineLevel),r=Number(t.guildHoK);if(n<25){const I=e*bpe*(1+(n-1)*.25)+r/3;return mx(I)}const{A:i,B:a,C:o,D:c,E:u,F:h,G:m,H:g,I:v,J:b}=ype,k=i+a*e+o/n+c*e**2+u/n**2+h*e/n+m*e**3+g/n**3+v*e/n**2+b*e**2/n+r/3;return mx(k)}function wpe(t){return mx(t*(2/3))}function jpe(t){return mx(t)}const i1={char:1e3,mine:100,hok:1e3},a2=({initialState:t,onStateChange:e})=>{var I,R,P;const{t:n}=Vs(),[r,i]=A.useState((I=t==null?void 0:t.charLevel)!=null?I:""),[a,o]=A.useState((R=t==null?void 0:t.mineLevel)!=null?R:""),[c,u]=A.useState((P=t==null?void 0:t.guildHoKLevel)!=null?P:""),h=(N,x,w)=>{e&&(typeof N!="number"||typeof x!="number"||typeof w!="number"||e({charLevel:N,mineLevel:x,guildHoKLevel:w}))},m=A.useMemo(()=>r===""||a===""||c===""?null:_pe({charLevel:Number(r),mineLevel:Number(a),guildHoK:Number(c)}),[r,a,c]),g=A.useMemo(()=>m==null?null:wpe(m),[m]),v=A.useMemo(()=>m==null?null:jpe(m),[m]),b=fd("luckbig"),_=fd("blackbig"),k=fd("legendarybig");return s.jsx("div",{className:Ps.wrap,children:s.jsxs("div",{className:Ps.card,children:[s.jsx("h2",{className:Ps.title,children:n("calculators.gem.title",{defaultValue:"Gem Calculator"})}),s.jsxs("div",{className:Ps.form,children:[s.jsxs("label",{className:Ps.field,children:[s.jsx("span",{children:n("calculators.gem.inputs.charLevel.label",{defaultValue:"Char Level"})}),s.jsx("input",{type:"number",inputMode:"numeric",className:Ps.input,placeholder:n("calculators.gem.inputs.charLevel.placeholder",{defaultValue:"e.g., 360"}),value:r,onChange:N=>{const x=N.currentTarget.value;if(x===""){i("");return}const w=Number(x),L=Number.isFinite(w)?w:"";i(L),h(L,a,c)},max:i1.char})]}),s.jsxs("label",{className:Ps.field,children:[s.jsx("span",{children:n("calculators.gem.inputs.mineLevel.label",{defaultValue:"Mine Level"})}),s.jsx("input",{type:"number",inputMode:"numeric",className:Ps.input,placeholder:n("calculators.gem.inputs.mineLevel.placeholder",{defaultValue:"e.g., 10"}),value:a,onChange:N=>{const x=N.currentTarget.value;if(x===""){o("");return}const w=Number(x),L=Number.isFinite(w)?w:"";o(L),h(r,L,c)},max:i1.mine})]}),s.jsxs("label",{className:Ps.field,children:[s.jsx("span",{children:n("calculators.gem.inputs.guildHok.label",{defaultValue:"Guild HoK"})}),s.jsx("input",{type:"number",inputMode:"numeric",className:Ps.input,placeholder:n("calculators.gem.inputs.guildHok.placeholder",{defaultValue:"e.g., 840"}),value:c,onChange:N=>{const x=N.currentTarget.value;if(x===""){u("");return}const w=Number(x),L=Number.isFinite(w)?w:"";u(L),h(r,a,L)},max:i1.hok})]})]}),s.jsxs("div",{className:Ps.gemsRow,children:[s.jsxs("div",{className:`${Ps.gemBox} ${m==null?Ps.disabled:""}`,children:[b?s.jsx("img",{className:Ps.gemImg,src:b,alt:n("calculators.gem.gems.normal.alt",{defaultValue:"Normal Gem"})}):s.jsx("div",{className:`${Ps.gemFallback} ${Ps.normalGem}`}),s.jsx("div",{className:Ps.gemLabel,children:n("calculators.gem.gems.normal.label",{defaultValue:"Normal"})}),s.jsx("div",{className:Ps.gemValue,children:m!=null?m:"-"})]}),s.jsxs("div",{className:`${Ps.gemBox} ${g==null?Ps.disabled:""}`,children:[_?s.jsx("img",{className:Ps.gemImg,src:_,alt:n("calculators.gem.gems.black.alt",{defaultValue:"Black Gem"})}):s.jsx("div",{className:`${Ps.gemFallback} ${Ps.blackGem}`}),s.jsx("div",{className:Ps.gemLabel,children:n("calculators.gem.gems.black.label",{defaultValue:"Black"})}),s.jsx("div",{className:Ps.gemValue,children:g!=null?g:"-"})]}),s.jsxs("div",{className:`${Ps.gemBox} ${v==null?Ps.disabled:""}`,children:[k?s.jsx("img",{className:Ps.gemImg,src:k,alt:n("calculators.gem.gems.legendary.alt",{defaultValue:"Legendary Gem"})}):s.jsx("div",{className:`${Ps.gemFallback} ${Ps.legendaryGem}`}),s.jsx("div",{className:Ps.gemLabel,children:n("calculators.gem.gems.legendary.label",{defaultValue:"Legendary"})}),s.jsx("div",{className:Ps.gemValue,children:v!=null?v:"-"})]})]}),s.jsxs("p",{className:Ps.hint,children:[n("calculators.gem.hint.prefix",{defaultValue:"The values are approximations and represent the "}),s.jsx("em",{children:n("calculators.gem.hint.emphasis",{defaultValue:"max possible"})}),n("calculators.gem.hint.suffix",{defaultValue:" you can find. Actual results may vary slightly."})]})]})})},Spe="_container_19zdf_1",Npe="_headerBar_19zdf_13",kpe="_title_19zdf_31",Cpe="_meta_19zdf_47",Tpe="_description_19zdf_59",xm={container:Spe,headerBar:Npe,title:kpe,meta:Cpe,description:Tpe},LL=({title:t,meta:e,description:n})=>s.jsxs("header",{className:xm.container,children:[s.jsxs("div",{className:xm.headerBar,children:[s.jsx("h2",{className:xm.title,children:t}),e&&s.jsx("span",{className:xm.meta,children:e})]}),n&&s.jsx("p",{className:xm.description,children:n})]}),Ipe=()=>s.jsxs(s.Fragment,{children:[s.jsx(LL,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:s.jsxs(s.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",s.jsx("em",{children:"max possible"})," you can find."]})}),s.jsx(a2,{})]}),Epe="_wrapper_1mksb_1",Ape="_gridContainer_1mksb_11",Ppe="_rowOne_1mksb_23",Rpe="_rowTwo_1mksb_35",Lpe="_cardWrapper_1mksb_43",Dpe="_controls_1mksb_51",Mpe="_resetNote_1mksb_65",Fpe="_panel_1mksb_75",Bpe="_header_1mksb_91",$pe="_title_1mksb_105",Ope="_resetBtn_1mksb_117",Vpe="_table_1mksb_137",Upe="_row_1mksb_23",zpe="_name_1mksb_179",Gpe="_selectCell_1mksb_189",Hpe="_sumCell_1mksb_207",Wpe="_footer_1mksb_219",Kpe="_footerLine_1mksb_239",qpe="_resultStack_1mksb_265",Qpe="_resultLevel_1mksb_279",Ype="_resultLevelLabel_1mksb_295",Xpe="_resultLevelSecondary_1mksb_309",Jpe="_resultXP_1mksb_323",Zpe="_note_1mksb_333",js={wrapper:Epe,gridContainer:Ape,rowOne:Ppe,rowTwo:Rpe,cardWrapper:Lpe,controls:Dpe,resetNote:Mpe,panel:Fpe,header:Bpe,title:$pe,resetBtn:Ope,table:Vpe,row:Upe,name:zpe,selectCell:Gpe,sumCell:Hpe,footer:Wpe,footerLine:Kpe,resultStack:qpe,resultLevel:Qpe,resultLevelLabel:Ype,resultLevelSecondary:Xpe,resultXP:Jpe,note:Zpe};function ege(t,e,n){var o;if(!Array.isArray(t)||e<=0||n<=0)return 0;const r=Math.min(e,n),i=Math.max(e,n);let a=0;for(let c=r;c<=i;c++)a+=(o=t[c])!=null?o:0;return a}function tge(t){const e=[0];for(let n=1;n<=t;n++)e.push(n);return e}function as(t,e){const n=[0,...t.map(r=>Number(r)||0)];if(e&&n.length<e+1)for(;n.length<e+1;)n.push(0);return n}const sge=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:as([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:as([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:as([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:as([54764113,57660160,60696773,63853128,67159972,70595045,74191870,77926126,81832831,90125436],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:as([31862139,36305620,42016588,47615630,54764113,61727510,70595045,79213665,90125436,100672054],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:as([11412835,15166093,20723258,27343418,36987473,48459828,63853128,83158305,103875282,128778486],10)},{key:"light_19_easteros",name:"19 Easteros",levels:as([90125436,105514978,123067419,143018630,165631756,191202824,220033230,252458197,288853442,3e8],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:as([94521325,99114456,103875282,108847145,113997992,119373368,124939452,130745487,136754704,143018630],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:as([113997992,126854805,143018630,158537364,178017293,196694080,220033230,242313317,270120546,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:as([14222021,26302843,45958126,83158305,123067419,191202824,288853442,3e8,3e8,3e8],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:as([160885033,196694080,242313317,296636662,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:as([14222021,26302843,45958126,83158305,123067419,191202824,288853442,3e8,3e8,3e8],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)}],nge=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:as([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:as([165631756,175491135,185838637,196694080,208088681,220033230,232549429,245671462,259411408,288853422],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:as([220033230,239036142,259411408,281239819,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:as([119373368,163232702,220033230,296636662,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_19_easteros",name:"Easteros",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:as([153964246,288853442,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:as([153964246,288853442,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:as([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)}],nI=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],rge=(()=>{const t=[0,...nI],e=1e3-nI.length;for(let n=0;n<e;n++)t.push(3e7);return t})(),ige=as([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),age=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),Zo={light:sge.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:nge.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:rge,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:ige,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:age,specialType:"sandstorm"}]},px=t=>t.toLocaleString("en-US"),oge=t=>Math.round(t/15e8*100)/100,DL=t=>oge(t).toFixed(2),qm=(t,e,n)=>e>n?0:ege(t,e,n);function rI(){const t={},e={},n={};return Zo.light.forEach(r=>t[r.key]={from:0,to:0}),Zo.shadow.forEach(r=>e[r.key]={from:0,to:0}),t.light_23_school_of_magic_express={from:1,to:10},t.light_24_nordic_gods={from:9,to:10},t.light_25_ash_mountain={from:9,to:10},t.light_26_playa_hq={from:7,to:10},t.light_27_mount_olympus={from:7,to:10},t.light_28_monster_grotto={from:1,to:10},t.light_29_arcade_of_the_old_pixel_icons={from:1,to:10},e.shadow_16_the_3rd_league_of_superheroes={from:1,to:10},e.shadow_17_time_honored_school_of_magic={from:1,to:10},e.shadow_18_hemorridor={from:3,to:10},e.shadow_19_easteros={from:6,to:10},e.shadow_20_dojo_of_childhood_heroes={from:1,to:10},e.shadow_21_tavern_of_the_dark_doppelgangers={from:1,to:3},e.shadow_22_city_of_intrigues={from:1,to:10},e.shadow_23_school_of_magic_express={from:1,to:5},e.shadow_24_nordic_gods={from:1,to:5},e.shadow_25_ash_mountain={from:1,to:5},e.shadow_26_playa_hq={from:1,to:10},e.shadow_27_mount_olympus={from:1,to:2},Zo.special.forEach(r=>{r.specialType==="twister"?n[r.key]={from:486,to:1e3}:r.specialType==="cloi"?n[r.key]={from:6,to:15}:n[r.key]={from:0,to:0}}),{light:t,shadow:e,special:n}}function ML({row:t,range:e,onChange:n}){var u,h;const r=A.useMemo(()=>tge(t.maxLevel),[t.maxLevel]),i=(u=e.from)!=null?u:0,a=(h=e.to)!=null?h:0,o=A.useMemo(()=>i===0?r:r.filter(m=>m>=i),[i,r]),c=A.useMemo(()=>i===0||a===0?0:qm(t.levels,i,a),[t.levels,i,a]);return s.jsxs("tr",{className:js.row,children:[s.jsx("td",{className:js.name,children:t.name}),s.jsx("td",{className:js.selectCell,children:s.jsx("select",{value:i,onChange:m=>{const g=Number(m.target.value),v=g>a?g:a;n({from:g,to:v})},children:r.map(m=>s.jsx("option",{value:m,children:m===0?"":m},m))})}),s.jsx("td",{className:js.selectCell,children:s.jsx("select",{value:a,onChange:m=>n({from:i,to:Number(m.target.value)}),children:o.map(m=>s.jsx("option",{value:m,children:m===0?"":m},m))})}),s.jsxs("td",{className:js.sumCell,children:[px(c)," XP"]})]})}function iI({title:t,rows:e,ranges:n,setRanges:r}){const i=A.useMemo(()=>e.reduce((a,o)=>{const c=n[o.key]||{from:0,to:0};return a+qm(o.levels,c.from,c.to)},0),[e,n]);return s.jsxs("div",{className:js.panel,children:[s.jsx("div",{className:js.header,children:s.jsx("div",{className:js.title,children:t})}),s.jsxs("table",{className:js.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Dungeon"}),s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum XP"})]})}),s.jsx("tbody",{children:e.map(a=>{var o;return s.jsx(ML,{row:a,range:(o=n[a.key])!=null?o:{from:0,to:0},onChange:c=>r(a.key,c)},a.key)})})]}),s.jsx("div",{className:js.footer,children:s.jsxs("div",{className:js.footerLine,children:[s.jsxs("span",{children:["Sum Total ",t]}),s.jsxs("span",{className:js.resultStack,children:[s.jsxs("span",{className:js.resultXP,children:[px(i)," XP"]}),s.jsxs("span",{className:js.resultLevelSecondary,children:["Level ",DL(i)]})]})]})})]})}function o2({initialState:t,onStateChange:e}){var P,N,x;const n=A.useMemo(()=>rI(),[]),[r,i]=A.useState((P=t==null?void 0:t.light)!=null?P:n.light),[a,o]=A.useState((N=t==null?void 0:t.shadow)!=null?N:n.shadow),[c,u]=A.useState((x=t==null?void 0:t.special)!=null?x:n.special),h=(w,L,j)=>{e&&e({light:w,shadow:L,special:j})},m=(w,L)=>{i(j=>{const S={...j,[w]:L};return h(S,a,c),S})},g=(w,L)=>{o(j=>{const S={...j,[w]:L};return h(r,S,c),S})},v=(w,L)=>{u(j=>{const S={...j,[w]:L};return h(r,a,S),S})};A.useEffect(()=>{var w,L,j;if(t){i((w=t.light)!=null?w:n.light),o((L=t.shadow)!=null?L:n.shadow),u((j=t.special)!=null?j:n.special);return}i(n.light),o(n.shadow),u(n.special)},[t,n]);const b=A.useMemo(()=>Zo.light.reduce((w,L)=>{const j=r[L.key];return w+(j?qm(L.levels,j.from,j.to):0)},0),[r]),_=A.useMemo(()=>Zo.shadow.reduce((w,L)=>{const j=a[L.key];return w+(j?qm(L.levels,j.from,j.to):0)},0),[a]),k=A.useMemo(()=>Zo.special.reduce((w,L)=>{const j=c[L.key];return w+(j?qm(L.levels,j.from,j.to):0)},0),[c]),I=b+_+k,R=()=>{const w=rI();i(w.light),o(w.shadow),u(w.special),h(w.light,w.shadow,w.special)};return s.jsxs("div",{className:js.wrapper,children:[s.jsxs("div",{className:js.controls,children:[s.jsx("button",{className:js.resetBtn,onClick:R,children:"Reset"}),s.jsx("span",{className:js.resetNote,children:"Resets all selections to defaults."})]}),s.jsxs("div",{className:js.gridContainer,children:[s.jsxs("div",{className:js.rowOne,children:[s.jsx("div",{className:js.cardWrapper,children:s.jsx(iI,{title:"Light World",rows:Zo.light,ranges:r,setRanges:m})}),s.jsx("div",{className:js.cardWrapper,children:s.jsx(iI,{title:"Shadow World",rows:Zo.shadow,ranges:a,setRanges:g})})]}),s.jsx("div",{className:js.rowTwo,children:s.jsxs("div",{className:js.panel,children:[s.jsx("div",{className:js.header,children:s.jsx("div",{className:js.title,children:"Special Dungeons"})}),s.jsxs("table",{className:js.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Dungeon"}),s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum"})]})}),s.jsx("tbody",{children:Zo.special.map(w=>{var L;return s.jsx(ML,{row:w,range:(L=c[w.key])!=null?L:{from:0,to:0},onChange:j=>v(w.key,j)},w.key)})})]}),s.jsxs("div",{className:js.footer,children:[s.jsxs("div",{className:js.footerLine,children:[s.jsx("span",{children:"Sum Total Special"}),s.jsxs("span",{children:[px(k)," XP"]})]}),s.jsxs("div",{className:js.footerLine,children:[s.jsx("span",{children:"Total XP"}),s.jsxs("span",{className:js.resultStack,children:[s.jsxs("span",{className:js.resultXP,children:[px(I)," XP"]}),s.jsxs("span",{className:js.resultLevel,children:[s.jsx("span",{className:js.resultLevelLabel,children:"Level"})," ",DL(I)]})]})]}),s.jsx("div",{className:js.note,children:"XP values are summed per selection and converted to level using the project formula."})]})]})})]})]})}function lge(){return s.jsx("div",{style:{padding:12},children:s.jsx(o2,{})})}const cge=()=>s.jsx(Pn,{title:"Progression  Early Game"}),dge="_wrap_n2poq_31",uge="_title_n2poq_33",hge="_infoBox_n2poq_39",mge="_infoTitle_n2poq_63",pge="_infoList_n2poq_73",gge="_section_n2poq_89",fge="_h2_n2poq_101",vge="_h3_n2poq_103",xge="_intro_n2poq_105",yge="_ul_n2poq_107",bge="_img_n2poq_113",Xs={wrap:dge,title:uge,infoBox:hge,infoTitle:mge,infoList:pge,section:gge,h2:fge,h3:vge,intro:xge,ul:yge,img:bge},_ge=()=>{ar();const t=[fd("first-weekend-guide-day1",900),fd("first-weekend-guide-day2",900),fd("first-weekend-guide-day3",900)];return s.jsxs("div",{className:Xs.wrap,children:[s.jsx("h1",{className:Xs.title,children:"First Weekend Guide"}),s.jsxs("aside",{className:Xs.infoBox,role:"note","aria-label":"Important Level Tips",children:[s.jsx("div",{className:Xs.infoTitle,children:"Important Level Tips"}),s.jsxs("ul",{className:Xs.infoList,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),s.jsx("p",{className:Xs.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),s.jsxs("div",{className:Xs.section,children:[s.jsx("h2",{className:Xs.h2,children:"Preparation before launch"}),s.jsxs("ul",{className:Xs.ul,children:[s.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),s.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),s.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),s.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),s.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),s.jsxs("div",{className:Xs.section,children:[s.jsx("h2",{className:Xs.h2,children:"Day 1"}),s.jsx("h3",{className:Xs.h3,children:"Level 13"}),s.jsxs("ul",{className:Xs.ul,children:[s.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),s.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&s.jsx("img",{className:Xs.img,src:t[0],alt:"Day 1 overview"})]}),s.jsxs("div",{className:Xs.section,children:[s.jsx("h3",{className:Xs.h3,children:"Level 410"}),s.jsxs("ul",{className:Xs.ul,children:[s.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),s.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),s.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),s.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),s.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),s.jsxs("div",{className:Xs.section,children:[s.jsx("h2",{className:Xs.h2,children:"Day 2"}),s.jsx("h3",{className:Xs.h3,children:"Level 1015"}),s.jsxs("ul",{className:Xs.ul,children:[s.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),s.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),s.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),s.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&s.jsx("img",{className:Xs.img,src:t[1],alt:"Day 2 overview"})]}),s.jsxs("div",{className:Xs.section,children:[s.jsx("h2",{className:Xs.h2,children:"Day 3"}),s.jsx("h3",{className:Xs.h3,children:"Level 1520"}),s.jsxs("ul",{className:Xs.ul,children:[s.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),s.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&s.jsx("img",{className:Xs.img,src:t[2],alt:"Day 3 overview"})]})]})},wge=()=>s.jsx(Pn,{title:"Max Item Stats Calculator"}),jge=()=>s.jsx(Pn,{title:"Fortress Package skip order (Early)"}),Sge=()=>s.jsx(Pn,{title:"Underworld Pro Package skip order (Early)"}),Nge=()=>s.jsx(Pn,{title:"Gem Calculator (Early)"}),kge=()=>s.jsx(Pn,{title:"Fortress attack duplication guide (Early)"}),Cge=()=>s.jsx(Pn,{title:"Progression  Mid Game"}),Tge="_wrap_1x7jo_31",Ige="_header_1x7jo_35",Ege="_titles_1x7jo_55",Age="_h1_1x7jo_57",Pge="_lead_1x7jo_59",Rge="_ctaRow_1x7jo_63",Lge="_cta_1x7jo_63",Dge="_section_1x7jo_85",Mge="_sectionGrid_1x7jo_87",Fge="_card_1x7jo_99",Bge="_h2_1x7jo_103",$ge="_h3_1x7jo_105",Oge="_p_1x7jo_107",Vge="_ul_1x7jo_111",Uge="_ol_1x7jo_111",zge="_figure_1x7jo_117",Gge="_figureNarrow_1x7jo_139",Hge="_img_1x7jo_149",Wge="_fallbackImg_1x7jo_151",Kge="_figCaption_1x7jo_159",qge="_tableWrap_1x7jo_163",Qge="_table_1x7jo_163",Yge="_footer_1x7jo_217",Xge="_tools_1x7jo_219",Jge="_toolBtn_1x7jo_221",vs={wrap:Tge,header:Ige,titles:Ege,h1:Age,lead:Pge,ctaRow:Rge,cta:Lge,section:Dge,sectionGrid:Mge,card:Fge,h2:Bge,h3:$ge,p:Oge,ul:Vge,ol:Uge,figure:zge,figureNarrow:Gge,img:Hge,fallbackImg:Wge,figCaption:Kge,tableWrap:qge,table:Qge,footer:Yge,tools:Xge,toolBtn:Jge},Zge=1400;function efe(){const t=A.useMemo(()=>fd("goldxpcurve",Zge),[]);return s.jsxs("div",{className:vs.wrap,children:[s.jsxs("header",{className:vs.header,children:[s.jsxs("div",{className:vs.titles,children:[s.jsx("h1",{className:vs.h1,children:"Dungeon Pause"}),s.jsx("p",{className:vs.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),s.jsxs("div",{className:vs.ctaRow,children:[s.jsx(Gs,{className:vs.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),s.jsx(Gs,{className:vs.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),s.jsxs("section",{className:vs.section,children:[s.jsx("h2",{className:vs.h2,children:"Worum gehts?"}),s.jsxs("p",{className:vs.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",s.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",s.jsx("strong",{children:"Level 370"})," und endet um ",s.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),s.jsxs("section",{className:vs.section,children:[s.jsx("h3",{className:vs.h3,children:"XP & Gold  Verlauf"}),s.jsxs("div",{className:`${vs.figure} ${vs.figureNarrow}`,children:[t?s.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:vs.img}):s.jsx("div",{className:vs.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),s.jsx("div",{className:vs.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),s.jsxs("section",{className:vs.sectionGrid,children:[s.jsxs("div",{className:vs.card,children:[s.jsx("h3",{className:vs.h3,children:"Start & Ende"}),s.jsxs("ul",{className:vs.ul,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",s.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",s.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),s.jsxs("div",{className:vs.card,children:[s.jsx("h3",{className:vs.h3,children:"Twister & Light/Shadow"}),s.jsxs("ul",{className:vs.ul,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Twister:"})," bei ca. ",s.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),s.jsxs("li",{children:["Whrend der Pause weiterhin ",s.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",s.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",s.jsx("em",{children:"Devilsatt"})," &"," ",s.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),s.jsxs("section",{className:vs.section,children:[s.jsx("h3",{className:vs.h3,children:"Vorgehen"}),s.jsxs("ol",{className:vs.ol,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",s.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",s.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",s.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),s.jsxs("section",{className:vs.section,children:[s.jsx("h3",{className:vs.h3,children:"Kompaktbersicht"}),s.jsx("div",{className:vs.tableWrap,children:s.jsxs("table",{className:vs.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Aspekt"}),s.jsx("th",{children:"Empfehlung"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:"Start (Faustregel)"}),s.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Ende (Faustregel)"}),s.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Open XP vor Eintritt"}),s.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Twister"}),s.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Light/Shadow"}),s.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Whrend der Pause"}),s.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Pets"}),s.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Optimaler Exit"}),s.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),s.jsx("footer",{className:vs.footer,children:s.jsxs("div",{className:vs.tools,children:[s.jsx(Gs,{className:vs.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),s.jsx(Gs,{className:vs.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const tfe=()=>s.jsx(Pn,{title:"Dungeon Pause open XP Calculator"}),sfe="_wrap_1uhww_3",nfe="_headerBar_1uhww_15",rfe="_title_1uhww_33",ife="_meta_1uhww_45",afe="_description_1uhww_55",ofe="_section_1uhww_69",lfe="_sectionTitle_1uhww_77",cfe="_steps_1uhww_87",ao={wrap:sfe,headerBar:nfe,title:rfe,meta:ife,description:afe,section:ofe,sectionTitle:lfe,steps:cfe};function dfe(){return s.jsxs("div",{className:ao.wrap,children:[s.jsxs("div",{className:ao.headerBar,children:[s.jsx("h2",{className:ao.title,children:"Dungeon Pause Exit"}),s.jsx("span",{className:ao.meta,children:"Last updated: 28.03.2025"})]}),s.jsx("p",{className:ao.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),s.jsxs("section",{className:ao.section,children:[s.jsx("h3",{className:ao.sectionTitle,children:"Sequence for the Exit"}),s.jsxs("ol",{className:ao.steps,children:[s.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),s.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),s.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),s.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),s.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),s.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),s.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),s.jsxs("section",{className:ao.section,children:[s.jsx("h3",{className:ao.sectionTitle,children:"Extra Tip"}),s.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const ufe=()=>s.jsx(Pn,{title:"Gem Calculator (Mid)"}),hfe=()=>s.jsx(Pn,{title:"Calendar Skip"}),mfe=()=>s.jsx(Pn,{title:"Progression  Late Game"}),pfe="_layout_13sgm_29",gfe="_side_13sgm_49",ffe="_sideHead_13sgm_61",vfe="_search_13sgm_71",xfe="_spotBtn_13sgm_89",yfe="_sideList_13sgm_109",bfe="_sideItem_13sgm_111",_fe="_active_13sgm_119",wfe="_sideTitle_13sgm_121",jfe="_ico_13sgm_123",Sfe="_badge_13sgm_125",Nfe="_detail_13sgm_139",kfe="_detailInner_13sgm_141",Cfe="_detailHead_13sgm_143",Tfe="_detailTitle_13sgm_145",Ife="_empty_13sgm_147",Efe="_grid_13sgm_151",Afe="_card_13sgm_157",Pfe="_cardHead_13sgm_175",Rfe="_btnGrid_13sgm_177",Lfe="_itemBtn_13sgm_179",Dfe="_spotWrap_13sgm_203",Mfe="_spot_13sgm_89",Ffe="_spotHead_13sgm_227",Bfe="_spotSearch_13sgm_235",$fe="_spotClose_13sgm_243",Ofe="_spotList_13sgm_253",Vfe="_spotItem_13sgm_255",Ufe="_spotItemEmpty_13sgm_259",zfe="_spotCat_13sgm_261",Gfe="_spotLabel_13sgm_263",Hfe="_mark_13sgm_267",ms={layout:pfe,side:gfe,sideHead:ffe,search:vfe,spotBtn:xfe,sideList:yfe,sideItem:bfe,active:_fe,sideTitle:wfe,ico:jfe,badge:Sfe,detail:Nfe,detailInner:kfe,detailHead:Cfe,detailTitle:Tfe,empty:Ife,grid:Efe,card:Afe,cardHead:Pfe,btnGrid:Rfe,itemBtn:Lfe,spotWrap:Dfe,spot:Mfe,spotHead:Ffe,spotSearch:Bfe,spotClose:$fe,spotList:Ofe,spotItem:Vfe,spotItemEmpty:Ufe,spotCat:zfe,spotLabel:Gfe,mark:Hfe};function Wfe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ym(t,e){if(!e)return t;const n=new RegExp(`(${Wfe(e)})`,"ig");return t.replace(n,`<mark class="${ms.mark}">$1</mark>`)}function aI(t){if(!t||!t.length)return 0;let e=0;for(const n of t)if(n.sub2&&n.sub2.length)if(n.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of n.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=n.sub2.length;else e+=1;return e}function Kfe(t){const e=[];for(const n of t){const r=n.label;if(!(!n.sub||!n.sub.length))for(const i of n.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(o=>o.sub2&&o.sub2.length))for(const o of i.sub2)if(o.sub2&&o.sub2.length)for(const c of o.sub2)e.push({full:`${r}  ${i.label}  ${o.label}  ${c.label}`,catKey:n.key,subKey:i.key,sub2Key:c.key});else e.push({full:`${r}  ${i.label}  ${o.label}`,catKey:n.key,subKey:i.key,sub2Key:o.key});else for(const o of i.sub2)e.push({full:`${r}  ${i.label}  ${o.label}`,catKey:n.key,subKey:i.key,sub2Key:o.key});else e.push({full:`${r}  ${i.label}`,catKey:n.key,subKey:i.key})}return e}function qfe(t,e){var n;return e&&t.some(r=>r.key===e)?e:((n=t==null?void 0:t[0])==null?void 0:n.key)||""}const Qfe=({categories:t,onNavigate:e,autoFocusSearch:n})=>{const[r,i]=A.useState(()=>{var P;return((P=t==null?void 0:t[0])==null?void 0:P.key)||""}),[a,o]=A.useState(""),[c,u]=A.useState(!1),h=A.useRef(null),m=A.useMemo(()=>{const P=a.trim().toLowerCase();if(!P)return t;const N=x=>x.toLowerCase().includes(P);return t.map(x=>{const w=N(x.label),L=[];for(const j of x.sub||[]){const S=N(j.label);if(j.sub2&&j.sub2.length)if(j.sub2.some(M=>M.sub2&&M.sub2.length)){const M=[];for(const T of j.sub2)if(T.sub2&&T.sub2.length){const F=T.sub2.filter(D=>N(D.label));F.length&&M.push({...T,sub2:F})}else N(T.label)&&M.push(T);(S||M.length)&&L.push({...j,sub2:M})}else{const M=j.sub2.filter(T=>N(T.label));(S||M.length)&&L.push({...j,sub2:M})}else S&&L.push(j)}return w||L.length?{...x,sub:L.length?L:x.sub}:null}).filter(Boolean)},[t,a]),g=A.useMemo(()=>{const P=m.length?m:t,N=qfe(P,r);return P.find(x=>x.key===N)||P[0]||null},[m,t,r]),v=A.useMemo(()=>Kfe(t),[t]),[b,_]=A.useState(""),k=A.useMemo(()=>{const P=b.trim().toLowerCase();return P?v.filter(N=>N.full.toLowerCase().includes(P)):v},[v,b]);A.useEffect(()=>{const P=N=>{const x=N.key.toLowerCase()==="k";(N.metaKey||N.ctrlKey)&&x&&(N.preventDefault(),u(!0),setTimeout(()=>{var w;return(w=h.current)==null?void 0:w.focus()},0)),N.key==="Escape"&&u(!1)};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[]);const I=A.useRef(null);A.useEffect(()=>{var P;n&&((P=I.current)==null||P.focus())},[n]);const R=()=>{var L;const P=a.trim().toLowerCase(),N=(P?v.find(j=>j.full.toLowerCase().includes(P)):v[0])||null;if(N){e({tab:N.catKey,sub:N.subKey,sub2:N.sub2Key});return}const x=g,w=(L=x==null?void 0:x.sub)==null?void 0:L[0];if(!(!x||!w))if(w.sub2&&w.sub2.length)if(w.sub2.some(S=>S.sub2&&S.sub2.length)){const S=w.sub2[0];S.sub2&&S.sub2.length?e({tab:x.key,sub:w.key,sub2:S.sub2[0].key}):e({tab:x.key,sub:w.key,sub2:S.key})}else e({tab:x.key,sub:w.key,sub2:w.sub2[0].key});else e({tab:x.key,sub:w.key})};return s.jsxs("div",{className:ms.layout,children:[s.jsxs("div",{className:ms.side,children:[s.jsxs("div",{className:ms.sideHead,children:[s.jsx("input",{ref:I,className:ms.search,type:"search",placeholder:"Suche",value:a,onChange:P=>o(P.target.value),onKeyDown:P=>{P.key==="Enter"&&R()}}),s.jsx("button",{className:ms.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var P;return(P=h.current)==null?void 0:P.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),s.jsx("div",{className:ms.sideList,children:(m.length?m:t).map(P=>s.jsxs("div",{className:`${ms.sideItem} ${(g==null?void 0:g.key)===P.key?ms.active:""}`,onClick:()=>i(P.key),children:[s.jsxs("span",{className:ms.sideTitle,children:[P.icon?s.jsx("span",{className:ms.ico,"aria-hidden":!0,children:P.icon}):null,P.label]}),s.jsx("span",{className:ms.badge,children:aI(P.sub)})]},P.key))})]}),s.jsx("div",{className:ms.detail,children:g?s.jsxs("div",{className:ms.detailInner,children:[s.jsxs("div",{className:ms.detailHead,children:[s.jsxs("h3",{className:ms.detailTitle,children:[g.icon?s.jsx("span",{className:ms.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),s.jsxs("div",{className:ms.badge,children:[aI(g.sub)," Eintrge"]})]}),s.jsx("div",{className:ms.grid,children:(g.sub||[]).map(P=>{const N=P.sub2&&P.sub2.length>0,x=N&&P.sub2.some(w=>w.sub2&&w.sub2.length);return s.jsxs("div",{className:ms.card,children:[s.jsx("div",{className:ms.cardHead,dangerouslySetInnerHTML:{__html:ym(P.label,a)}}),N?s.jsx("div",{className:ms.btnGrid,children:x?P.sub2.flatMap(w=>w.sub2&&w.sub2.length?w.sub2.map(L=>s.jsx("button",{className:ms.itemBtn,onClick:()=>e({tab:g.key,sub:P.key,sub2:L.key}),dangerouslySetInnerHTML:{__html:ym(`${w.label}  ${L.label}`,a)}},`${w.key}__${L.key}`)):[s.jsx("button",{className:ms.itemBtn,onClick:()=>e({tab:g.key,sub:P.key,sub2:w.key}),dangerouslySetInnerHTML:{__html:ym(w.label,a)}},w.key)]):P.sub2.map(w=>s.jsx("button",{className:ms.itemBtn,onClick:()=>e({tab:g.key,sub:P.key,sub2:w.key}),dangerouslySetInnerHTML:{__html:ym(w.label,a)}},w.key))}):s.jsx("div",{className:ms.btnGrid,children:s.jsx("button",{className:ms.itemBtn,onClick:()=>e({tab:g.key,sub:P.key}),dangerouslySetInnerHTML:{__html:ym(P.label,a)}})})]},P.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(P=>!P.sub2||!P.sub2.length?!P.label.toLowerCase().includes(a.trim().toLowerCase()):P.sub2.some(x=>x.sub2&&x.sub2.length)?P.sub2.every(x=>x.sub2&&x.sub2.length?x.sub2.every(w=>!w.label.toLowerCase().includes(a.trim().toLowerCase())):!x.label.toLowerCase().includes(a.trim().toLowerCase())):P.sub2.every(x=>!x.label.toLowerCase().includes(a.trim().toLowerCase())))?s.jsxs("div",{className:ms.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):s.jsx("div",{className:ms.empty,children:"Keine Kategorie gefunden."})}),c&&s.jsx("div",{className:ms.spotWrap,onClick:()=>u(!1),children:s.jsxs("div",{className:ms.spot,onClick:P=>P.stopPropagation(),children:[s.jsxs("div",{className:ms.spotHead,children:[s.jsx("input",{ref:h,className:ms.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:b,onChange:P=>_(P.target.value)}),s.jsx("button",{className:ms.spotClose,onClick:()=>u(!1),children:"Esc"})]}),s.jsx("div",{className:ms.spotList,children:k.length===0?s.jsx("div",{className:ms.spotItemEmpty,children:"Keine Treffer"}):k.map((P,N)=>s.jsxs("div",{className:ms.spotItem,onClick:()=>{u(!1),e({tab:P.catKey,sub:P.subKey,sub2:P.sub2Key})},children:[s.jsx("div",{className:ms.spotCat,children:P.catKey}),s.jsx("div",{className:ms.spotLabel,children:P.full})]},N))})]})})]})},Yfe={gamefeatures:Mue,progression:Fue,hellevator:Bue,"legendary-dungeon":$ue,events:Oue,calculators:Kue,infographics:que,"class-book":Que,dungeons:Yue},oI={gamefeatures:{fortress:Xue,underworld:bhe,arenaam:jhe},hellevator:{"hellevator-guide":gme},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":fme},calculators:{"fortress-calculator":PL,"underworld-calculator":RL,"max-item-stats-calculator":tpe,"gem-calculator":Ipe,"dungeon-pause-open-xp-calculator":lge},progression:{early:cge,mid:Cge,late:mfe}},a1={gamefeatures:{arenaam:{"am-rune-bonuses":eme,"am-build-order":pme},underworld:{"underworld-calculator":_he,"underworld-pro-package-skip-order":whe},fortress:{"fortress-calculator":Jue,"fortress-package-skip-order":xhe,"fortress-attack-duplication":yhe}},progression:{early:{"first-weekend-guide":_ge,"max-item-stats-calculator":wge,"fortress-package-skip-order":jge,"underworld-pro-package-skip-order":Sge,"gem-calculator":Nge,"fortress-attack-duplication":kge},mid:{"dungeon-pause":efe,"dungeon-pause-open-xp-calculator":tfe,"dungeon-pause-exit":dfe,"gem-calculator":ufe,"calendar-skip":hfe}}};function Xfe(){const[t,e]=ar(),n=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;n?n&&!r?a=Yfe[n]||null:n&&r&&!i?a=oI[n]&&oI[n][r]||null:n&&r&&i&&(a=a1[n]&&a1[n][r]&&a1[n][r][i]||null):a=null;const o=c=>{const u=new URLSearchParams(t);u.set("tab",c.tab),c.sub?u.set("sub",c.sub):u.delete("sub"),c.sub2?u.set("sub2",c.sub2):u.delete("sub2"),e(u,{replace:!1})};return s.jsxs(os,{children:[s.jsx("div",{className:wu.topWrap,children:s.jsx(Iue,{logoSrc:Qj,categories:vd,titleI18nKey:"guides.index.title"})}),s.jsx("div",{className:wu.divider}),s.jsx("div",{className:wu.contentArea,children:a?s.jsx(a,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:wu.placeholder,children:[s.jsx("h2",{className:wu.placeholderTitle,children:"Guides"}),s.jsx("p",{className:wu.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),s.jsx(Qfe,{categories:vd,onNavigate:o,autoFocusSearch:!1})]})})]})}const Jfe="modulepreload",Zfe=function(t){return"/"+t},lI={},lt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=u(n.map(h=>{if(h=Zfe(h),h in lI)return;lI[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":Jfe,m||(v.as="script"),v.crossOrigin="",v.href=h,c&&v.setAttribute("nonce",c),document.head.appendChild(v),m)return new Promise((b,_)=>{v.addEventListener("load",b),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},o1=Object.assign({"../../content/guidehub-v2/de/calculators/dungeon-pause-open-xp-calculator/index.md":()=>lt(()=>import("./index-BccBAByF.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/fortress-calculator/index.md":()=>lt(()=>import("./index-Cyz1Q9ly.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/gem-calculator/index.md":()=>lt(()=>import("./index-Bzwi2WKw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/index.md":()=>lt(()=>import("./index-Bj-2sk9C.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/max-item-stats-calculator/index.md":()=>lt(()=>import("./index-VIKJeLo2.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/underworld-calculator/index.md":()=>lt(()=>import("./index-B1ZmDA31.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/class-book/index.md":()=>lt(()=>import("./index-CM6ckwNB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/hellevator/hellevator-guide.md":()=>lt(()=>import("./hellevator-guide-CSuvFlly.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/hellevator/index.md":()=>lt(()=>import("./index-C8RGTfnk.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/index.md":()=>lt(()=>import("./index-B8qQ1zkH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/legendary-dungeon/index.md":()=>lt(()=>import("./index-BSyGjv3f.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/legendary-dungeon/legendary-dungeon-guide-epics-legendaries.md":()=>lt(()=>import("./legendary-dungeon-guide-epics-legendaries-Bush_y1j.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/am-build-order.md":()=>lt(()=>import("./am-build-order-CbkuUWAg.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/am-rune-bonuses.md":()=>lt(()=>import("./am-rune-bonuses-DthFi9NV.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/index.md":()=>lt(()=>import("./index-swq29ovJ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-attack-duplication.md":()=>lt(()=>import("./fortress-attack-duplication-dO_fjrWc.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-calculator.md":()=>lt(()=>import("./fortress-calculator-oChNdHV0.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-package-skip-order.md":()=>lt(()=>import("./fortress-package-skip-order-dIpYHLyt.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/index.md":()=>lt(()=>import("./index-CxcVn1-f.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/index.md":()=>lt(()=>import("./index-D1Z6jRml.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/index.md":()=>lt(()=>import("./index-C7gSE_OQ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/underworld-calculator.md":()=>lt(()=>import("./underworld-calculator-B-QJcbJo.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/underworld-pro-package-skip-order.md":()=>lt(()=>import("./underworld-pro-package-skip-order-BPBlsGqH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/home.md":()=>lt(()=>import("./home-CpWCkAMy.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/infographics/index.md":()=>lt(()=>import("./index-Bq-ZhXgC.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/first-weekend-guide.md":()=>lt(()=>import("./first-weekend-guide-ByGMUoW8.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/fortress-attack-duplication.md":()=>lt(()=>import("./fortress-attack-duplication-DO2y3c6F.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/fortress-package-skip-order.md":()=>lt(()=>import("./fortress-package-skip-order-yRqDN5dU.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/gem-calculator.md":()=>lt(()=>import("./gem-calculator-O_9f14l2.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/index.md":()=>lt(()=>import("./index-SSi3aA8C.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/max-item-stats-calculator.md":()=>lt(()=>import("./max-item-stats-calculator-C0xzNTgN.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/underworld-pro-package-skip-order.md":()=>lt(()=>import("./underworld-pro-package-skip-order-v6hmJBRZ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/index.md":()=>lt(()=>import("./index-BbODEWMa.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/late/index.md":()=>lt(()=>import("./index-DNzHOCOW.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/calendar-skip.md":()=>lt(()=>import("./calendar-skip-BUyRUAXw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/dungeon-pause-exit.md":()=>lt(()=>import("./dungeon-pause-exit-B5IFUcUm.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/dungeon-pause-open-xp-calculator.md":()=>lt(()=>import("./dungeon-pause-open-xp-calculator-D8V5pOUU.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/gem-calculator.md":()=>lt(()=>import("./gem-calculator-BSbXOrQl.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/index.md":()=>lt(()=>import("./index-C7G1cFaF.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/dungeon-pause-open-xp-calculator/index.md":()=>lt(()=>import("./index-Dh8XH0bw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/fortress-calculator/index.md":()=>lt(()=>import("./index-Q6Nc81Sw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/gem-calculator/index.md":()=>lt(()=>import("./index-DMwsmNS8.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/index.md":()=>lt(()=>import("./index-CVPSESMR.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/max-item-stats-calculator/index.md":()=>lt(()=>import("./index-BrqJGpac.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/underworld-calculator/index.md":()=>lt(()=>import("./index-C4KmCqeJ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/class-book/index.md":()=>lt(()=>import("./index-D-MLvn0d.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/hellevator/hellevator-guide.md":()=>lt(()=>import("./hellevator-guide-BiVEfiVG.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/hellevator/index.md":()=>lt(()=>import("./index-C5svQqJ3.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/index.md":()=>lt(()=>import("./index-Bk41PZMs.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/legendary-dungeon/index.md":()=>lt(()=>import("./index-C-0okAmy.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/legendary-dungeon/legendary-dungeon-guide-epics-legendaries.md":()=>lt(()=>import("./legendary-dungeon-guide-epics-legendaries-6x37v76n.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/am-build-order.md":()=>lt(()=>import("./am-build-order-DrZTZN4Y.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/am-rune-bonuses.md":()=>lt(()=>import("./am-rune-bonuses-CHSsVUFd.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/index.md":()=>lt(()=>import("./index-DSdlq0WB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-attack-duplication.md":()=>lt(()=>import("./fortress-attack-duplication-COz0aNOt.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-calculator.md":()=>lt(()=>import("./fortress-calculator-B8Y-Jqe7.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-package-skip-order.md":()=>lt(()=>import("./fortress-package-skip-order-DD-OFNyA.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/index.md":()=>lt(()=>import("./index-pW6nTut-.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/index.md":()=>lt(()=>import("./index-Buci9R0c.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/index.md":()=>lt(()=>import("./index-BBKqkJkB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/underworld-calculator.md":()=>lt(()=>import("./underworld-calculator-DlMcBkpX.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/underworld-pro-package-skip-order.md":()=>lt(()=>import("./underworld-pro-package-skip-order-mti9NSZl.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/home.md":()=>lt(()=>import("./home-BDNnNlKn.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/infographics/index.md":()=>lt(()=>import("./index-Hr_u-pc5.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/first-weekend-guide.md":()=>lt(()=>import("./first-weekend-guide-B-dpwGXG.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/fortress-attack-duplication.md":()=>lt(()=>import("./fortress-attack-duplication-CIDaqJ_q.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/fortress-package-skip-order.md":()=>lt(()=>import("./fortress-package-skip-order-wmG25680.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/gem-calculator.md":()=>lt(()=>import("./gem-calculator-CC2DMWQa.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/index.md":()=>lt(()=>import("./index-CwLKLdCz.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/max-item-stats-calculator.md":()=>lt(()=>import("./max-item-stats-calculator-DLnYXe6u.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/underworld-pro-package-skip-order.md":()=>lt(()=>import("./underworld-pro-package-skip-order-DJsAcroK.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/index.md":()=>lt(()=>import("./index-UGKl7Bwz.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/late/index.md":()=>lt(()=>import("./index-MqIV6usH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/calendar-skip.md":()=>lt(()=>import("./calendar-skip-BpANE0x7.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/dungeon-pause-exit.md":()=>lt(()=>import("./dungeon-pause-exit-bXq3IZPW.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/dungeon-pause-open-xp-calculator.md":()=>lt(()=>import("./dungeon-pause-open-xp-calculator-AMOhwByC.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/gem-calculator.md":()=>lt(()=>import("./gem-calculator-DXl-gr4a.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/index.md":()=>lt(()=>import("./index-LZ44SvgE.js"),[]).then(t=>t.default)}),l1=new Map,cI={title:"",category:"",status:"work_in_progress",gallery:[]};function eve(t){return t==="up_to_date"||t==="work_in_progress"||t==="outdated"}function Qm(t){const e=t.trim();return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e}function tve(t){const e=t.trim();return e?e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1).split(",").map(r=>Qm(r).trim()).filter(Boolean):[Qm(e)].filter(Boolean):[]}function sve(t){var c;const e=t.replace(/^\uFEFF/,""),n=e.match(/^---\r?\n([\s\S]*?)\r?\n---\r?\n?/);if(!n)return{frontmatter:{...cI},body:e};const r={...cI},i=n[1].split(/\r?\n/);let a=null;for(const u of i){const h=u.trim();if(!h)continue;const m=h.match(/^-+\s+(.*)$/);if(a==="gallery"&&m){r.gallery.push(Qm(m[1]));continue}const g=h.match(/^([a-zA-Z0-9_]+)\s*:\s*(.*)$/);if(!g)continue;const v=g[1],b=(c=g[2])!=null?c:"";if(a=v,v==="gallery"){r.gallery=tve(b);continue}if(v==="status"){const _=Qm(b);eve(_)&&(r.status=_);continue}(v==="title"||v==="category")&&(r[v]=Qm(b))}const o=e.slice(n[0].length);return{frontmatter:r,body:o}}function dI(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c1(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d1(t){let e=dI(t);return e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,i)=>{const a=c1(String(r!=null?r:""));return`<img src="${c1(String(i!=null?i:""))}" alt="${a}" />`}),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(n,r,i)=>{const a=dI(String(r!=null?r:"")),o=c1(String(i!=null?i:"")),u=/^https?:\/\//i.test(i)?' target="_blank" rel="noopener noreferrer"':"";return`<a href="${o}"${u}>${a}</a>`}),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e}function nve(t){return t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function rve(t){const e=t.split(/\r?\n/),n=[],r=[],i=new Set;let a=!1;const o=()=>{a&&(n.push("</ul>"),a=!1)},c=h=>{let m=h,g=1;for(;i.has(m);)m=`${h}-${g}`,g+=1;return i.add(m),m},u=h=>{const m=h.match(/\s*\{#([a-zA-Z0-9\-_]+)\}\s*$/);return m?{text:h.replace(m[0],"").trimEnd(),anchor:m[1]}:{text:h,anchor:null}};for(const h of e){const m=h.trim();if(!m){o();continue}const g=m.match(/^\[\[embed:([a-z0-9-_]+)\]\]$/i);if(g){o();const k=g[1].toLowerCase();n.push(`<div data-embed="${k}"></div>`);continue}const v=m.match(/^\[\[asset:([a-z0-9-_]+)\]\]$/i);if(v){o();const k=v[1].toLowerCase();n.push(`<div data-asset="${k}"></div>`);continue}if(m==="---"||m==="***"){o(),n.push("<hr />");continue}const b=m.match(/^(#{1,3})\s+(.*)$/);if(b){o();const k=b[1].length,I=b[2].trim(),{text:R,anchor:P}=u(I),N=d1(R),x=P||nve(R)||"section";if(k===2){const w=c(x);r.push({id:w,text:R}),n.push(`<h2 id="${w}">${N}</h2>`)}else if(k===1)if(P){const w=c(x);n.push(`<h1 id="${w}">${N}</h1>`)}else n.push(`<h1>${N}</h1>`);else if(P){const w=c(x);n.push(`<h3 id="${w}">${N}</h3>`)}else n.push(`<h3>${N}</h3>`);continue}const _=m.match(/^-+\s+(.*)$/);if(_){a||(n.push("<ul>"),a=!0),n.push(`<li>${d1(_[1])}</li>`);continue}o(),n.push(`<p>${d1(m)}</p>`)}return o(),{html:n.join(`
`),toc:r}}function uI(t,e){const{tab:n,sub:r,sub2:i}=e;return!n&&!r&&!i?`../../content/guidehub-v2/${t}/home.md`:n&&!r&&!i?`../../content/guidehub-v2/${t}/${n}/index.md`:n&&r&&!i?`../../content/guidehub-v2/${t}/${n}/${r}/index.md`:n&&r&&i?`../../content/guidehub-v2/${t}/${n}/${r}/${i}.md`:`../../content/guidehub-v2/${t}/home.md`}async function ive(t,e){var i,a,o;const n=`${e}:${(i=t.tab)!=null?i:""}:${(a=t.sub)!=null?a:""}:${(o=t.sub2)!=null?o:""}`;if(l1.has(n))return l1.get(n);const r=(async()=>{const c=uI(e,t),u=uI("en",t),h=o1[c]||o1[u];if(!h)return null;const m=await h(),{frontmatter:g,body:v}=sve(m),{html:b,toc:_}=rve(v),k=o1[c]?e:"en";return{id:t.sub2||t.sub||t.tab||"home",lang:k,frontmatter:g,body:v,html:b,toc:_}})();return l1.set(n,r),r}const ave="_wrap_1ck4m_1",ove="_card_1ck4m_13",lve="_title_1ck4m_33",cve="_section_1ck4m_45",dve="_sectionHeader_1ck4m_59",uve="_grid_1ck4m_75",hve="_field_1ck4m_87",mve="_input_1ck4m_101",pve="_select_1ck4m_103",gve="_readonly_1ck4m_119",fve="_controlsRow_1ck4m_135",vve="_checkbox_1ck4m_149",xve="_resultsGrid_1ck4m_165",yve="_resultCard_1ck4m_177",bve="_resultLabel_1ck4m_199",_ve="_resultValue_1ck4m_209",wve="_note_1ck4m_221",Rt={wrap:ave,card:ove,title:lve,section:cve,sectionHeader:dve,grid:uve,field:hve,input:mve,select:pve,readonly:gve,controlsRow:fve,checkbox:vve,resultsGrid:xve,resultCard:yve,resultLabel:bve,resultValue:_ve,note:wve},FL=350,hI={a:.001756211,b:1.04214299},u1={a:.00182949,b:1.11599,c:18.08035},Bf={normal1:{below:2,above:1.25},normal2:{below:2,above:5/3},epic3:{below:1.2,above:1},epic5:{below:1,above:5/6}},mI={offset:20,multiplier:1.2},pI=10,jve=3,gI=[{key:"light",label:"Light",multiplier:3},{key:"medium",label:"Medium",multiplier:7.5},{key:"heavy",label:"Heavy",multiplier:15}],fI=[{key:"melee",label:"Melee",multiplier:1},{key:"ranged",label:"Ranged",multiplier:1.25},{key:"magic",label:"Magic",multiplier:2.25}],$f={cap:1e3,baseOffset:1,baseMultiplier:2},Jc=(t,e=0)=>t==null||Number.isNaN(t)?"-":new Intl.NumberFormat("en-US",{minimumFractionDigits:e,maximumFractionDigits:e}).format(t),h1=t=>{if(t.trim()==="")return"";const e=Number(t);return Number.isFinite(e)?e:""},Sve=t=>hI.a*t*t+hI.b*t,Of=(t,e)=>t<FL?t*e.below:Sve(t)*e.above,Nve=t=>t<FL?(t+mI.offset)*mI.multiplier:u1.a*t*t+u1.b*t+u1.c,kve=t=>{const e=Math.min(t,$f.cap),n=Math.max(t-$f.cap,0);return($f.baseOffset+e)*$f.baseMultiplier+n},Cve=()=>{var V,z,K,W;const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[o,c]=A.useState(0),[u,h]=A.useState("light"),[m,g]=A.useState("melee"),[v,b]=A.useState(!1),[_,k]=A.useState(!1),I=typeof t=="number"?t:null,R=A.useMemo(()=>{if(typeof n!="number"||typeof i!="number")return null;const U=1+o/100;return(n+i+jve)*U},[n,i,o]),P=A.useMemo(()=>I==null?null:Of(I,Bf.normal1),[I]),N=A.useMemo(()=>I==null?null:Of(I,Bf.normal2),[I]),x=A.useMemo(()=>I==null?null:Of(I,Bf.epic3),[I]),w=A.useMemo(()=>I==null?null:Of(I,Bf.epic5),[I]),L=A.useMemo(()=>I==null?null:Nve(I),[I]),j=(z=(V=gI.find(U=>U.key===u))==null?void 0:V.multiplier)!=null?z:0,S=I==null?null:I+(v?pI:0),C=S==null?null:S*j,M=(W=(K=fI.find(U=>U.key===m))==null?void 0:K.multiplier)!=null?W:0,T=I==null?null:I+(_?pI:0),F=T==null?null:kve(T),D=F==null?null:F*M;return s.jsx("div",{className:Rt.wrap,children:s.jsxs("div",{className:Rt.card,children:[s.jsx("h2",{className:Rt.title,children:"Max Item Stats Calculator"}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Inputs"}),s.jsxs("div",{className:Rt.grid,children:[s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Item Quality"}),s.jsx("input",{type:"number",inputMode:"numeric",className:Rt.input,placeholder:"e.g., 266",value:t,onChange:U=>e(h1(U.currentTarget.value))})]}),s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Level"}),s.jsx("input",{type:"number",inputMode:"numeric",className:Rt.input,placeholder:"e.g., 460",value:n,onChange:U=>r(h1(U.currentTarget.value))})]}),s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Aura"}),s.jsx("input",{type:"number",inputMode:"numeric",className:Rt.input,placeholder:"e.g., 181",value:i,onChange:U=>a(h1(U.currentTarget.value))})]}),s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Item Quality Rune %"}),s.jsx("select",{className:Rt.select,value:o,onChange:U=>c(Number(U.currentTarget.value)),children:Array.from({length:6},(U,J)=>J).map(U=>s.jsxs("option",{value:U,children:[U,"%"]},U))})]}),s.jsxs("div",{className:Rt.field,children:[s.jsx("span",{children:"Theoretical Item Quality"}),s.jsx("div",{className:Rt.readonly,children:R==null?"-":Math.floor(R).toLocaleString("en-US")})]})]})]}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Item Quality Stats"}),s.jsxs("div",{className:Rt.resultsGrid,children:[s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Normal Item 1 stat"}),s.jsx("div",{className:Rt.resultValue,children:Jc(P)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Normal Item 2 stat"}),s.jsx("div",{className:Rt.resultValue,children:Jc(N)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"3 Stat Epic"}),s.jsx("div",{className:Rt.resultValue,children:Jc(x)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"5 Stat Epic"}),s.jsx("div",{className:Rt.resultValue,children:Jc(w)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Legendary"}),s.jsx("div",{className:Rt.resultValue,children:Jc(L)})]})]})]}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Armor"}),s.jsxs("div",{className:Rt.controlsRow,children:[s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Armor Type"}),s.jsx("select",{className:Rt.select,value:u,onChange:U=>h(U.currentTarget.value),children:gI.map(U=>s.jsx("option",{value:U.key,children:U.label},U.key))})]}),s.jsxs("label",{className:Rt.checkbox,children:[s.jsx("input",{type:"checkbox",checked:v,onChange:U=>b(U.currentTarget.checked)}),"Legendary"]})]}),s.jsx("div",{className:Rt.resultsGrid,children:s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Max Armor"}),s.jsx("div",{className:Rt.resultValue,children:Jc(C)})]})})]}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Average Weapon Damage"}),s.jsxs("div",{className:Rt.controlsRow,children:[s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Weapon Type"}),s.jsx("select",{className:Rt.select,value:m,onChange:U=>g(U.currentTarget.value),children:fI.map(U=>s.jsx("option",{value:U.key,children:U.label},U.key))})]}),s.jsxs("label",{className:Rt.checkbox,children:[s.jsx("input",{type:"checkbox",checked:_,onChange:U=>k(U.currentTarget.checked)}),"Legendary"]})]}),s.jsx("div",{className:Rt.resultsGrid,children:s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Average Weapon DMG"}),s.jsx("div",{className:Rt.resultValue,children:Jc(D)})]})})]}),s.jsx("div",{className:Rt.note,children:"All values represent the maximum possible results based on the selected inputs."})]})})},Tve="_wrap_16vzl_1",Ive="_card_16vzl_13",Eve="_title_16vzl_33",Ave="_subtle_16vzl_45",Pve="_controls_16vzl_57",Rve="_field_16vzl_73",Lve="_select_16vzl_87",Dve="_tableWrap_16vzl_103",Mve="_table_16vzl_103",Fve="_th_16vzl_123",Bve="_td_16vzl_125",$ve="_tdNumber_16vzl_153",Ove="_rowMuted_16vzl_163",Vve="_summaryGrid_16vzl_171",Uve="_summaryCard_16vzl_185",zve="_summaryLabel_16vzl_199",Gve="_summaryValue_16vzl_213",Hve="_note_16vzl_227",Ot={wrap:Tve,card:Ive,title:Eve,subtle:Ave,controls:Pve,field:Rve,select:Lve,tableWrap:Dve,table:Mve,th:Fve,td:Bve,tdNumber:$ve,rowMuted:Ove,summaryGrid:Vve,summaryCard:Uve,summaryLabel:zve,summaryValue:Gve,note:Hve},Vf=[{id:"heart-of-darkness-1",building:"Heart of Darkness",level:1,gold:null,shrooms:2,souls:null,baseTimeMinutes:31},{id:"soul-extractor-1",building:"Soul Extractor",level:1,gold:250,shrooms:2,souls:null,baseTimeMinutes:66},{id:"gladiator-trainer-1",building:"Gladiator Trainer",level:1,gold:700,shrooms:2,souls:148,baseTimeMinutes:140},{id:"heart-of-darkness-2",building:"Heart of Darkness",level:2,gold:2e3,shrooms:4,souls:616,baseTimeMinutes:300},{id:"soul-extractor-2",building:"Soul Extractor",level:2,gold:500,shrooms:4,souls:462,baseTimeMinutes:480},{id:"gladiator-trainer-2",building:"Gladiator Trainer",level:2,gold:1400,shrooms:4,souls:554,baseTimeMinutes:685},{id:"heart-of-darkness-3",building:"Heart of Darkness",level:3,gold:3e3,shrooms:7,souls:1650,baseTimeMinutes:1107},{id:"soul-extractor-3",building:"Soul Extractor",level:3,gold:750,shrooms:7,souls:1235,baseTimeMinutes:2400},{id:"gladiator-trainer-3",building:"Gladiator Trainer",level:3,gold:2100,shrooms:7,souls:1485,baseTimeMinutes:5236},{id:"heart-of-darkness-4",building:"Heart of Darkness",level:4,gold:4e3,shrooms:14,souls:4220,baseTimeMinutes:11446},{id:"soul-extractor-4",building:"Soul Extractor",level:4,gold:1e3,shrooms:14,souls:3165,baseTimeMinutes:19200},{id:"gladiator-trainer-4",building:"Gladiator Trainer",level:4,gold:2800,shrooms:14,souls:3800,baseTimeMinutes:28800},{id:"heart-of-darkness-5",building:"Heart of Darkness",level:5,gold:5e3,shrooms:30,souls:11e3,baseTimeMinutes:36933},{id:"soul-extractor-5",building:"Soul Extractor",level:5,gold:1250,shrooms:30,souls:8250,baseTimeMinutes:48e3},{id:"gladiator-trainer-5",building:"Gladiator Trainer",level:5,gold:3500,shrooms:30,souls:9900,baseTimeMinutes:null},{id:"heart-of-darkness-6",building:"Heart of Darkness",level:6,gold:6e3,shrooms:48,souls:25080,baseTimeMinutes:null},{id:"soul-extractor-6",building:"Soul Extractor",level:6,gold:1500,shrooms:48,souls:18810,baseTimeMinutes:null},{id:"underworld-gate-1",building:"Underworld Gate",level:1,gold:500,shrooms:2,souls:null,baseTimeMinutes:null},{id:"underworld-gate-2",building:"Underworld Gate",level:2,gold:1e3,shrooms:4,souls:55,baseTimeMinutes:null},{id:"underworld-gate-3",building:"Underworld Gate",level:3,gold:1500,shrooms:7,souls:149,baseTimeMinutes:null},{id:"underworld-gate-4",building:"Underworld Gate",level:4,gold:2e3,shrooms:14,souls:380,baseTimeMinutes:null},{id:"underworld-gate-5",building:"Underworld Gate",level:5,gold:2500,shrooms:30,souls:990,baseTimeMinutes:null},{id:"adventuromatic-1",building:"Adventuromatic",level:1,gold:1e4,shrooms:2,souls:297,baseTimeMinutes:null},{id:"keeper-1",building:"Keeper",level:1,gold:1500,shrooms:2,souls:198,baseTimeMinutes:null},{id:"keeper-2",building:"Keeper",level:2,gold:3e3,shrooms:4,souls:739,baseTimeMinutes:null},{id:"keeper-3",building:"Keeper",level:3,gold:4500,shrooms:7,souls:1980,baseTimeMinutes:null}],Uf={shrooms:750,souls:1e5},Ma=t=>t==null?"-":t.toLocaleString("en-US"),vI=t=>{if(t==null)return"-";const e=Math.max(0,Math.ceil(t)),n=Math.floor(e/60),r=e%60;return`${n}h ${r}m`},Wve=t=>t<=0?0:t>=15?.75:+(t*.05).toFixed(2),Kve=(t,e)=>t.baseTimeMinutes==null?null:t.baseTimeMinutes*(1-e),qve=t=>{if(t==null)return null;const e=Math.ceil(t);return Math.ceil(e/10)},m1=(t,e)=>t.reduce((n,r)=>{var i;return n+((i=r[e])!=null?i:0)},0),Qve=()=>{const[t,e]=q.useState(0),n=q.useMemo(()=>Wve(t),[t]),r=q.useMemo(()=>({gold:m1(Vf,"gold"),shrooms:m1(Vf,"shrooms"),souls:m1(Vf,"souls")}),[]),i=q.useMemo(()=>({shrooms:Uf.shrooms-r.shrooms,souls:Uf.souls-r.souls}),[r]);return s.jsx("div",{className:Ot.wrap,children:s.jsxs("div",{className:Ot.card,children:[s.jsx("h2",{className:Ot.title,children:"Underworld Pro Pack skip order"}),s.jsx("div",{className:Ot.subtle,children:"Build order and costs based on the provided Pro Pack sheet."}),s.jsxs("div",{className:Ot.controls,children:[s.jsxs("label",{className:Ot.field,children:[s.jsx("span",{children:"Laborers Quarter"}),s.jsx("select",{className:Ot.select,value:t,onChange:a=>e(Number(a.currentTarget.value)),children:Array.from({length:16},(a,o)=>o).map(a=>s.jsx("option",{value:a,children:a},a))})]}),s.jsxs("div",{className:Ot.field,children:[s.jsx("span",{children:"Build time reduction"}),s.jsxs("div",{className:Ot.select,children:[(n*100).toFixed(0),"%"]})]})]}),s.jsx("div",{className:Ot.tableWrap,children:s.jsxs("table",{className:Ot.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:Ot.th,children:"Build order"}),s.jsx("th",{className:Ot.th,children:"Level"}),s.jsx("th",{className:`${Ot.th} ${Ot.tdNumber}`,children:"Gold"}),s.jsx("th",{className:`${Ot.th} ${Ot.tdNumber}`,children:"Shrooms"}),s.jsx("th",{className:`${Ot.th} ${Ot.tdNumber}`,children:"Souls"}),s.jsx("th",{className:`${Ot.th} ${Ot.tdNumber}`,children:"Build time"}),s.jsx("th",{className:`${Ot.th} ${Ot.tdNumber}`,children:"Time (LQ)"}),s.jsx("th",{className:`${Ot.th} ${Ot.tdNumber}`,children:"Skip"})]})}),s.jsx("tbody",{children:Vf.map(a=>{const o=Kve(a,n),c=qve(o);return s.jsxs("tr",{children:[s.jsx("td",{className:Ot.td,children:a.building}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber}`,children:a.level}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber}`,children:Ma(a.gold)}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber}`,children:Ma(a.shrooms)}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber}`,children:Ma(a.souls)}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber} ${Ot.rowMuted}`,children:vI(a.baseTimeMinutes)}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber}`,children:vI(o)}),s.jsx("td",{className:`${Ot.td} ${Ot.tdNumber}`,children:Ma(c)})]},a.id)})})]})}),s.jsxs("div",{className:Ot.summaryGrid,children:[s.jsxs("div",{className:Ot.summaryCard,children:[s.jsx("div",{className:Ot.summaryLabel,children:"Total cost"}),s.jsxs("div",{className:Ot.summaryValue,children:[Ma(r.gold)," Gold  ",Ma(r.shrooms)," Shrooms  ",Ma(r.souls)," Souls"]})]}),s.jsxs("div",{className:Ot.summaryCard,children:[s.jsx("div",{className:Ot.summaryLabel,children:"Pro Pack resources"}),s.jsxs("div",{className:Ot.summaryValue,children:[Ma(Uf.shrooms)," Shrooms  ",Ma(Uf.souls)," Souls"]})]}),s.jsxs("div",{className:Ot.summaryCard,children:[s.jsx("div",{className:Ot.summaryLabel,children:"Leftover"}),s.jsxs("div",{className:Ot.summaryValue,children:[Ma(i.shrooms)," Shrooms  ",Ma(i.souls)," Souls"]})]})]}),s.jsx("div",{className:Ot.note,children:"Skip cost is computed as roundup(roundup(time in minutes)/10)."})]})})},zf=[{key:"gold-xp-curve",title:"Gold & XP Curve",assetKey:"goldxpcurve",filterA:"Economy",filterB:"Curve"},{key:"calendar-rewards",title:"Calendar Rewards",assetKey:"calendarrewards",filterA:"Calendar",filterB:"Rewards"},{key:"calendar-skip",title:"Calendar Skip",assetKey:"calendarskip",filterA:"Calendar",filterB:"Skip"},{key:"pet-elemental-advantages",title:"Elemental Advantages",assetKey:"elementaladvantages",filterA:"Pets",filterB:"Advantages"},{key:"pets-p2w",title:"Pets P2W",assetKey:"petsp2w",filterA:"Pets",filterB:"Pet Paths"},{key:"pets-f2p",title:"Pets F2P",assetKey:"petsf2p",filterA:"Pets",filterB:"Pet Paths"},{key:"level-up-pack",title:"Level Up Packages",assetKey:"leveluppack",filterA:"Mushroom Packages",filterB:"Level Up"},{key:"birthday-sale",title:"Birthday Sale",assetKey:"birthdaysale",filterA:"Mushroom Packages",filterB:"S&F Birthday"},{key:"black-friday-sale",title:"Black Friday Sale",assetKey:"blackfridaysale",filterA:"Mushroom Packages",filterB:"Black Friday"},{key:"christmas-sale",title:"Christmas Sale",assetKey:"christmassale",filterA:"Mushroom Packages",filterB:"Christmas"},{key:"community-sale",title:"Community Sale",assetKey:"communitysale",filterA:"Mushroom Packages",filterB:"Community"},{key:"easter-sale",title:"Easter Sale",assetKey:"eastersale",filterA:"Mushroom Packages",filterB:"Easter"},{key:"fall-sale",title:"Fall Sale",assetKey:"fallsale",filterA:"Mushroom Packages",filterB:"Fall"},{key:"lucky-sale",title:"Lucky Sale",assetKey:"luckysale",filterA:"Mushroom Packages",filterB:"Lucky"},{key:"new-year-sale",title:"New Year Sale",assetKey:"newyearsale",filterA:"Mushroom Packages",filterB:"New Year"},{key:"oktoberfest-sale",title:"Oktoberfest Sale",assetKey:"oktoberfestsale",filterA:"Mushroom Packages",filterB:"Oktoberfest"},{key:"pre-christmas-sale",title:"Pre-Christmas Sale",assetKey:"prechristmassale",filterA:"Mushroom Packages",filterB:"Christmas"},{key:"soulful-sale",title:"Soulful Sale",assetKey:"soulfulsale",filterA:"Mushroom Packages",filterB:"Soulful"},{key:"summer-sale",title:"Summer Sale",assetKey:"summersale",filterA:"Mushroom Packages",filterB:"Summer"},{key:"winter-sale",title:"Winter Sale",assetKey:"wintersale",filterA:"Mushroom Packages",filterB:"Winter"},{key:"world-boss-sale",title:"World Boss Sale",assetKey:"worldbosssale",filterA:"Mushroom Packages",filterB:"World Boss"},{key:"hydra-stages",title:"Hydra Stages",assetKey:"hydrastages",filterA:"Hydra",filterB:"Stages"},{key:"guild-skill-cost",title:"Guild Skill Cost",assetKey:"guildskillcost",filterA:"Guild",filterB:"Skill Cost"},{key:"level-2-200",title:"Progress Level 2-200",assetKey:"levelzweibiszweihundert",filterA:"Progress",filterB:"2-200"},{key:"level-210-700",title:"Progress Level 210-700",assetKey:"levelzweihunzehnbissiebenhun",filterA:"Progress",filterB:"210-700"},{key:"attack-duplication-step-3",title:"Attack Duplication Step 3",assetKey:"step3adg",filterA:"Guides",filterB:"Steps"}],Yve="_viewerWrap_jg1o6_1",Xve="_nav_jg1o6_21",Jve="_navCard_jg1o6_37",Zve="_navHeader_jg1o6_59",exe="_logoWrap_jg1o6_73",txe="_logoImg_jg1o6_85",sxe="_divider_jg1o6_99",nxe="_navHomeWrap_jg1o6_133",rxe="_navScroller_jg1o6_141",ixe="_searchInput_jg1o6_195",axe="_navSection_jg1o6_221",oxe="_navSubTitle_jg1o6_251",lxe="_navRow_jg1o6_265",cxe="_navRowLabel_jg1o6_281",dxe="_navRowChevron_jg1o6_291",uxe="_navRowChevronOpen_jg1o6_319",hxe="_categoryRow_jg1o6_327",mxe="_entryList_jg1o6_355",pxe="_entryListClosed_jg1o6_369",gxe="_entryListOpen_jg1o6_377",fxe="_subSection_jg1o6_385",vxe="_subRow_jg1o6_397",xxe="_subEntryList_jg1o6_423",yxe="_subGroup_jg1o6_437",bxe="_navItem_jg1o6_449",_xe="_navItemIndented_jg1o6_475",wxe="_navItemActive_jg1o6_505",jxe="_viewer_jg1o6_1",Sxe="_viewerCard_jg1o6_525",Nxe="_viewerHeader_jg1o6_543",kxe="_viewerTitle_jg1o6_561",Cxe="_metaRow_jg1o6_575",Txe="_metaLabel_jg1o6_591",Ixe="_statusChip_jg1o6_601",Exe="_statusChipUpToDate_jg1o6_625",Axe="_statusChipWorkInProgress_jg1o6_637",Pxe="_statusChipOutdated_jg1o6_649",Rxe="_categoryPill_jg1o6_661",Lxe="_tocRow_jg1o6_683",Dxe="_tocLabel_jg1o6_697",Mxe="_tocPills_jg1o6_711",Fxe="_tocPill_jg1o6_711",Bxe="_contentGrid_jg1o6_755",$xe="_contentGridHasGallery_jg1o6_767",Oxe="_markdown_jg1o6_775",Vxe="_hudButtonGrid_jg1o6_869",Uxe="_hudButton_jg1o6_869",zxe="_hudButtonLink_jg1o6_909",Gxe="_hudButtonBox_jg1o6_931",Hxe="_hudButtonText_jg1o6_939",Wxe="_infoBlock_jg1o6_1005",Kxe="_infoFilters_jg1o6_1013",qxe="_infoSelect_jg1o6_1029",Qxe="_infoLabel_jg1o6_1041",Yxe="_infoSelectField_jg1o6_1055",Xxe="_infoGalleryGrid_jg1o6_1083",Jxe="_infoCard_jg1o6_1095",Zxe="_infoThumb_jg1o6_1141",eye="_infoThumbFallback_jg1o6_1159",tye="_infoTitle_jg1o6_1183",sye="_infoEmpty_jg1o6_1197",nye="_markdownHome_jg1o6_1213",rye="_galleryCard_jg1o6_1283",iye="_galleryTitle_jg1o6_1297",aye="_galleryGrid_jg1o6_1313",oye="_galleryThumb_jg1o6_1325",lye="_galleryEmpty_jg1o6_1339",cye="_loadingState_jg1o6_1351",dye="_missingState_jg1o6_1353",uye="_emptyTitle_jg1o6_1371",hye="_viewerLoadingOverlay_jg1o6_1385",mye="_viewerLoadingOverlayVisible_jg1o6_1413",pye="_loadingOverlayContent_jg1o6_1421",gye="_loadingSpinner_jg1o6_1433",fye="_overlay_jg1o6_1463",vye="_overlayPanel_jg1o6_1481",xye="_overlayImage_jg1o6_1507",yye="_overlayClose_jg1o6_1537",bye="_overlayNav_jg1o6_1559",_ye="_overlayNavLeft_jg1o6_1617",wye="_overlayNavRight_jg1o6_1625",we={viewerWrap:Yve,nav:Xve,navCard:Jve,navHeader:Zve,logoWrap:exe,logoImg:txe,divider:sxe,navHomeWrap:nxe,navScroller:rxe,searchInput:ixe,navSection:axe,navSubTitle:oxe,navRow:lxe,navRowLabel:cxe,navRowChevron:dxe,navRowChevronOpen:uxe,categoryRow:hxe,entryList:mxe,entryListClosed:pxe,entryListOpen:gxe,subSection:fxe,subRow:vxe,subEntryList:xxe,subGroup:yxe,navItem:bxe,navItemIndented:_xe,navItemActive:wxe,viewer:jxe,viewerCard:Sxe,viewerHeader:Nxe,viewerTitle:kxe,metaRow:Cxe,metaLabel:Txe,statusChip:Ixe,statusChipUpToDate:Exe,statusChipWorkInProgress:Axe,statusChipOutdated:Pxe,categoryPill:Rxe,tocRow:Lxe,tocLabel:Dxe,tocPills:Mxe,tocPill:Fxe,contentGrid:Bxe,contentGridHasGallery:$xe,markdown:Oxe,hudButtonGrid:Vxe,hudButton:Uxe,hudButtonLink:zxe,hudButtonBox:Gxe,hudButtonText:Hxe,infoBlock:Wxe,infoFilters:Kxe,infoSelect:qxe,infoLabel:Qxe,infoSelectField:Yxe,infoGalleryGrid:Xxe,infoCard:Jxe,infoThumb:Zxe,infoThumbFallback:eye,infoTitle:tye,infoEmpty:sye,markdownHome:nye,galleryCard:rye,galleryTitle:iye,galleryGrid:aye,galleryThumb:oye,galleryEmpty:lye,loadingState:cye,missingState:dye,emptyTitle:uye,viewerLoadingOverlay:hye,viewerLoadingOverlayVisible:mye,loadingOverlayContent:pye,loadingSpinner:gye,overlay:fye,overlayPanel:vye,overlayImage:xye,overlayClose:yye,overlayNav:bye,overlayNavLeft:_ye,overlayNavRight:wye},Oo="__all__";function jye(){var L;const{t}=Vs(),e=q.useMemo(()=>Array.from(new Set(zf.map(j=>j.filterA))).sort((j,S)=>j.localeCompare(S)),[]),n=q.useMemo(()=>{const j=new Map;return zf.forEach(S=>{var M;const C=(M=j.get(S.filterA))!=null?M:[];C.includes(S.filterB)||C.push(S.filterB),j.set(S.filterA,C)}),j.forEach((S,C)=>{j.set(C,S.sort((M,T)=>M.localeCompare(T)))}),j},[]),r=q.useMemo(()=>Array.from(new Set(zf.map(j=>j.filterB))).sort((j,S)=>j.localeCompare(S)),[]),[i,a]=q.useState(Oo),[o,c]=q.useState(Oo),[u,h]=q.useState(null),m=i===Oo?r:(L=n.get(i))!=null?L:[];q.useEffect(()=>{o!==Oo&&(m.includes(o)||c(Oo))},[m,o]);const g=q.useMemo(()=>zf.filter(j=>!(i!==Oo&&j.filterA!==i||o!==Oo&&j.filterB!==o)),[i,o]),v=t("guides.v2.infographics.allLabel",{defaultValue:"All"}),b=t("guides.v2.infographics.filterA.label",{defaultValue:"Category"}),_=t("guides.v2.infographics.filterB.label",{defaultValue:"Type"}),k=t("guides.v2.infographics.empty",{defaultValue:"No images found."}),I=t("guides.v2.closeLabel",{defaultValue:"Close"}),R=q.useCallback(j=>{var V,z,K,W;const S=Ga(j.assetKey,1200),C=Ga(j.assetKey,640),M=(z=(V=S.thumb)!=null?V:S.url)!=null?z:null,T=(W=(K=C.thumb)!=null?K:C.url)!=null?W:null,F=M!=null?M:T;if(!F)return null;const D=t(`guides.v2.infographics.item.${j.key}`,{defaultValue:j.title});return{key:j.key,src:F,fallback:F&&T&&F!==T?T:void 0,label:D}},[t]),P=q.useMemo(()=>u?g.findIndex(j=>j.key===u.key):-1,[u,g]),N=g.length>1&&P>=0,x=q.useCallback(()=>{if(!N)return;const j=(P-1+g.length)%g.length,S=g[j],C=R(S);C&&h(C)},[P,R,N,g]),w=q.useCallback(()=>{if(!N)return;const j=(P+1)%g.length,S=g[j],C=R(S);C&&h(C)},[P,R,N,g]);return q.useEffect(()=>{if(!u)return;g.some(S=>S.key===u.key)||h(null)},[u,g]),q.useEffect(()=>{if(!u)return;const j=S=>{S.key==="Escape"&&h(null)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[u]),s.jsxs("div",{className:we.infoBlock,children:[s.jsxs("div",{className:we.infoFilters,children:[s.jsxs("label",{className:we.infoSelect,children:[s.jsx("span",{className:we.infoLabel,children:b}),s.jsxs("select",{className:we.infoSelectField,value:i,onChange:j=>a(j.target.value),children:[s.jsx("option",{value:Oo,children:v}),e.map(j=>s.jsx("option",{value:j,children:t(`guides.v2.infographics.filterA.${j}`,{defaultValue:j})},j))]})]}),s.jsxs("label",{className:we.infoSelect,children:[s.jsx("span",{className:we.infoLabel,children:_}),s.jsxs("select",{className:we.infoSelectField,value:o,onChange:j=>c(j.target.value),children:[s.jsx("option",{value:Oo,children:v}),m.map(j=>s.jsx("option",{value:j,children:t(`guides.v2.infographics.filterB.${j}`,{defaultValue:j})},j))]})]})]}),g.length===0?s.jsx("div",{className:we.infoEmpty,children:k}):s.jsx("div",{className:we.infoGalleryGrid,children:g.map(j=>{var T;const S=Ga(j.assetKey,640),C=(T=S.thumb)!=null?T:S.url,M=t(`guides.v2.infographics.item.${j.key}`,{defaultValue:j.title});return s.jsxs("button",{className:we.infoCard,type:"button",onClick:()=>{const F=R(j);F&&h(F)},children:[C?s.jsx("img",{className:we.infoThumb,src:C,alt:M}):s.jsx("div",{className:we.infoThumbFallback,children:(M||"I").slice(0,1).toUpperCase()}),s.jsx("div",{className:we.infoTitle,children:M})]},j.key)})}),u&&s.jsx("div",{className:we.overlay,onClick:()=>h(null),children:s.jsxs("div",{className:we.overlayPanel,onClick:j=>j.stopPropagation(),children:[N&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:`${we.overlayNav} ${we.overlayNavLeft}`,type:"button",onClick:x,"aria-label":t("guides.v2.galleryPrev",{defaultValue:"Previous image"}),children:"<"}),s.jsx("button",{className:`${we.overlayNav} ${we.overlayNavRight}`,type:"button",onClick:w,"aria-label":t("guides.v2.galleryNext",{defaultValue:"Next image"}),children:">"})]}),s.jsx("button",{className:we.overlayClose,onClick:()=>h(null),type:"button",children:I}),s.jsx("img",{className:we.overlayImage,src:u.src,alt:u.label,onError:()=>{!u.fallback||u.fallback===u.src||h({key:u.key,src:u.fallback,label:u.label})}})]})})]})}const Sye=()=>{var u;const{i18n:t}=Vs(),[e,n]=ar(),i=((u=t.language)==null?void 0:u.startsWith("de"))?[{key:"first-weekend-guide",label:"First-Weekend-Guide",selection:{tab:"progression",sub:"early",sub2:"first-weekend-guide"}},{key:"hellevator-guide",label:"Hellevator-Guide",selection:{tab:"hellevator",sub:"hellevator-guide"}},{key:"legendary-dungeon-guide",label:"Legendrer Dungeon-Guide",selection:{tab:"legendary-dungeon",sub:"legendary-dungeon-guide-epics-legendaries"}},{key:"rune-bonuses",label:"Runen-Boni",selection:{tab:"gamefeatures",sub:"arenaam",sub2:"am-rune-bonuses"}},{key:"calculators",label:"Rechner",selection:{tab:"calculators"}}]:[{key:"first-weekend-guide",label:"First Weekend Guide",selection:{tab:"progression",sub:"early",sub2:"first-weekend-guide"}},{key:"hellevator-guide",label:"Hellevator Guide",selection:{tab:"hellevator",sub:"hellevator-guide"}},{key:"legendary-dungeon-guide",label:"Legendary Dungeon Guide",selection:{tab:"legendary-dungeon",sub:"legendary-dungeon-guide-epics-legendaries"}},{key:"rune-bonuses",label:"Rune Bonuses",selection:{tab:"gamefeatures",sub:"arenaam",sub2:"am-rune-bonuses"}},{key:"calculators",label:"Calculators",selection:{tab:"calculators"}}],a=h=>{const m=new URLSearchParams;return m.set("tab",h.tab),h.sub&&m.set("sub",h.sub),h.sub2&&m.set("sub2",h.sub2),`/guidehub?${m.toString()}`},o=h=>{const m=new URLSearchParams(e);m.set("tab",h.tab),h.sub?m.set("sub",h.sub):m.delete("sub"),h.sub2?m.set("sub2",h.sub2):m.delete("sub2"),n(m,{replace:!1,preventScrollReset:!0})},c=(h,m)=>{h.defaultPrevented||h.button===0&&(h.metaKey||h.ctrlKey||h.shiftKey||h.altKey||(h.preventDefault(),o(m)))};return s.jsx("ul",{children:i.map(h=>s.jsx("li",{children:s.jsx("a",{href:a(h.selection),onClick:m=>c(m,h.selection),children:h.label})},h.key))})},Nye=()=>{const[t,e]=ar(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","fortress"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:we.hudButtonGrid,children:[s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("fortress-calculator"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Fortress Calculator"})})}),s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("fortress-package-skip-order"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Fortress Package skip order"})})}),s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("fortress-attack-duplication"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Fortress attack duplication guide"})})})]})},kye=()=>{const[t,e]=ar(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:we.hudButtonGrid,children:[s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("fortress"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Fortress"})})}),s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("underworld"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Underworld"})})}),s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("arenaam"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Arena Manager"})})})]})},Cye=()=>{const[t,e]=ar(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","fortress"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsx("div",{className:we.hudButtonGrid,children:s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("fortress-package-skip-order"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Fortress Package skip order"})})})})},Tye=()=>s.jsx(IL,{variant:"underworld"}),Iye=()=>{const[t,e]=ar(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","underworld"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:we.hudButtonGrid,children:[s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("underworld-calculator"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Underworld Calculator"})})}),s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("underworld-pro-package-skip-order"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Underworld Pro Package skip order"})})})]})},Eye=()=>{const[t,e]=ar(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","underworld"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsx("div",{className:we.hudButtonGrid,children:s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>n("underworld-pro-package-skip-order"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:"Underworld Pro Package skip order"})})})})},Aye=()=>{const{t}=Vs(),[e,n]=ar(),r=i=>{const a=new URLSearchParams(e);a.set("tab","gamefeatures"),a.set("sub","arenaam"),a.set("sub2",i),n(a,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:we.hudButtonGrid,children:[s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>r("am-rune-bonuses"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:t("guidehub.arenaManager.links.runeBonuses")})})}),s.jsx("button",{type:"button",className:we.hudButton,onClick:()=>r("am-build-order"),children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:t("guidehub.arenaManager.links.buildOrder")})})})]})},Pye=()=>{var r;const{i18n:t}=Vs(),e=(r=t.language)==null?void 0:r.startsWith("de"),n=[{label:"SF Tavernen Discord FAQ",href:"https://discord.com/channels/551152314329858048/1415410382981562542"},{label:"SF Tools",href:"https://sftools.mar21.eu/idle.html"},{label:"SF Coaching",href:e?"https://discord.com/channels/1381647290606817452/1420471280284733491":"https://discord.com/channels/1381647290606817452/1420473511364923432"}];return s.jsx("div",{className:we.hudButtonGrid,children:n.map(i=>s.jsx("a",{className:`${we.hudButton} ${we.hudButtonLink}`,href:i.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:i.label})})},i.href))})},Rye=()=>{const t=[{label:"SF Coaching",href:"https://discord.com/channels/1381647290606817452/1420473231256850584"},{label:"SF Tavernen Discord FAQ",href:"https://discord.com/channels/551152314329858048/1415410624606896279"},{label:"SF Tools",href:"https://sftools.mar21.eu/fortress.html"}];return s.jsx("div",{className:we.hudButtonGrid,children:t.map(e=>s.jsx("a",{className:`${we.hudButton} ${we.hudButtonLink}`,href:e.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(qr,{padding:"md",hover:!0,className:we.hudButtonBox,children:s.jsx("span",{className:we.hudButtonText,children:e.label})})},e.href))})},BL="guidehub-v2:gem-calculator",Lye=()=>{if(typeof window!="undefined")try{const t=window.localStorage.getItem(BL);if(!t)return;const e=JSON.parse(t);if(!e||typeof e!="object")return;const{charLevel:n,mineLevel:r,guildHoKLevel:i}=e;return typeof n!="number"||typeof r!="number"||typeof i!="number"?void 0:{charLevel:n,mineLevel:r,guildHoKLevel:i}}catch(t){return}},Dye=t=>{if(typeof window!="undefined")try{window.localStorage.setItem(BL,JSON.stringify(t))}catch(e){}},Mye=()=>{const t=q.useMemo(()=>Lye(),[]),e=q.useCallback(n=>{Dye(n)},[]);return s.jsx(a2,{initialState:t,onStateChange:e})};function Fye(){const t=[];return vd.forEach(e=>{(e.sub||[]).forEach(n=>{n.sub2&&n.sub2.length?n.sub2.some(i=>i.sub2&&i.sub2.length)?n.sub2.forEach(i=>{i.sub2&&i.sub2.length&&i.sub2.forEach(a=>{t.push({id:a.key,label:a.label,tab:e.key,sub:n.key,sub2:a.key,categoryLabel:e.label})})}):n.sub2.forEach(i=>{t.push({id:i.key,label:i.label,tab:e.key,sub:n.key,sub2:i.key,categoryLabel:e.label})}):t.push({id:n.key,label:n.label,tab:e.key,sub:n.key,categoryLabel:e.label})})}),t}function Bye(t){return t!=null&&t.startsWith("de")?"de":"en"}const $ye=330;function Oye(t){return t==="up_to_date"||t==="outdated"||t==="work_in_progress"?t:"work_in_progress"}const Vye=({tab:t,sub:e,sub2:n,isHome:r,openTabs:i,openSubs:a,onToggleTab:o,onToggleSub:c,onNavigate:u,onNavigateHome:h,onNavigateCategory:m,onNavigateSub:g,t:v})=>{const[b,_]=q.useState(""),k=b.trim().toLowerCase(),I=q.useMemo(()=>{const N=vd.find(x=>x.key==="gamefeatures");return N?[N,...vd.filter(x=>x.key!=="gamefeatures")]:vd},[]),R=q.useCallback(N=>!k||N.toLowerCase().includes(k),[k]),P=()=>I.map(N=>{const x=R(N.label),L=(N.sub||[]).map(C=>{var V;const M=x||R(C.label);let T=[];if(!C.sub2||C.sub2.length===0)return!M&&k?null:s.jsx("button",{className:`${we.navItem} ${t===N.key&&e===C.key&&!n?we.navItemActive:""}`,onClick:()=>g(N.key,C.key),type:"button",children:C.label},`${N.key}-${C.key}`);C.sub2&&C.sub2.length&&(C.sub2.some(K=>K.sub2&&K.sub2.length)?T=C.sub2.map(K=>{if(!K.sub2||!K.sub2.length)return null;const W=M||R(K.label),U=K.sub2.filter(J=>W||R(J.label));return U.length?s.jsxs("div",{className:we.subGroup,children:[s.jsx("div",{className:we.navSubTitle,children:K.label}),U.map(J=>s.jsx("button",{className:`${we.navItem} ${we.navItemIndented} ${t===N.key&&e===C.key&&n===J.key?we.navItemActive:""}`,onClick:()=>u({tab:N.key,sub:C.key,sub2:J.key}),type:"button",children:J.label},`${N.key}-${C.key}-${J.key}`))]},`${N.key}-${C.key}-${K.key}`):null}).filter(Boolean):T=C.sub2.filter(W=>M||R(W.label)).map(W=>s.jsx("button",{className:`${we.navItem} ${we.navItemIndented} ${t===N.key&&e===C.key&&n===W.key?we.navItemActive:""}`,onClick:()=>u({tab:N.key,sub:C.key,sub2:W.key}),type:"button",children:W.label},`${N.key}-${C.key}-${W.key}`)));const F=T.length>0;if(!M&&!F)return null;const D=!!((V=a[N.key])!=null&&V[C.key])||!!k&&F;return s.jsxs("div",{className:we.subSection,children:[s.jsxs("button",{className:`${we.navRow} ${we.subRow} ${t===N.key&&e===C.key&&!n?we.navItemActive:""}`,onClick:()=>{c(N.key,C.key),g(N.key,C.key)},"aria-expanded":D,type:"button",children:[s.jsx("span",{className:we.navRowLabel,children:C.label}),s.jsx("span",{className:`${we.navRowChevron} ${D?we.navRowChevronOpen:""}`})]}),s.jsx("div",{className:`${we.subEntryList} ${D?we.entryListOpen:we.entryListClosed}`,children:D?T:null})]},`${N.key}-${C.key}`)}).filter(Boolean),j=L.length>0;if(!x&&!j&&k)return null;const S=!!i[N.key]||!!k&&(x||j);return s.jsxs("div",{className:we.navSection,children:[s.jsxs("button",{className:`${we.navRow} ${we.categoryRow} ${t===N.key&&!e&&!n?we.navItemActive:""}`,onClick:()=>{o(N.key),m(N.key)},"aria-expanded":S,type:"button",children:[s.jsx("span",{className:we.navRowLabel,children:N.label}),s.jsx("span",{className:`${we.navRowChevron} ${S?we.navRowChevronOpen:""}`})]}),s.jsx("div",{className:`${we.entryList} ${S?we.entryListOpen:we.entryListClosed}`,children:S?L:null})]},N.key)});return s.jsx("div",{className:we.nav,children:s.jsxs("div",{className:we.navCard,children:[s.jsxs("div",{className:we.navHeader,children:[s.jsx("div",{className:we.logoWrap,children:s.jsx("img",{src:Qj,alt:"Guide Hub",className:we.logoImg})}),s.jsx("div",{className:we.divider}),s.jsx("input",{className:we.searchInput,type:"search",value:b,onChange:N=>_(N.target.value),placeholder:v("guides.v2.searchPlaceholder",{defaultValue:"Search guides"}),"aria-label":v("guides.v2.searchLabel",{defaultValue:"Search guides"})})]}),s.jsxs("div",{className:we.navScroller,children:[s.jsx("div",{className:we.navHomeWrap,children:s.jsx("button",{className:`${we.navItem} ${r?we.navItemActive:""}`,onClick:h,type:"button",children:v("guides.v2.navHomeLabel",{defaultValue:"Home"})})}),P()]})]})})},Uye=()=>{const[t,e]=ar(),{t:n,i18n:r}=Vs(),i=Bye(r.language),a=t.get("tab")||"",o=t.get("sub")||"",c=t.get("sub2")||"",u=q.useMemo(()=>({tab:a||void 0,sub:o||void 0,sub2:c||void 0}),[a,o,c]),[h,m]=q.useState(()=>({tab:a||void 0,sub:o||void 0,sub2:c||void 0})),g=h.tab||"",v=h.sub||"",b=h.sub2||"",_=!g&&!v&&!b,k=g==="infographics"&&!v&&!b,I=q.useMemo(()=>Fye(),[]),R=q.useMemo(()=>I.find(je=>{var ue;return je.tab===g&&je.sub===v&&((ue=je.sub2)!=null?ue:"")===b})||null,[I,g,v,b]),P=q.useMemo(()=>vd.find(je=>je.key===g)||null,[g]),N=q.useMemo(()=>{var je;return((je=P==null?void 0:P.sub)==null?void 0:je.find(ue=>ue.key===v))||null},[P,v]),[x,w]=q.useState({}),[L,j]=q.useState({}),[S,C]=q.useState(null),[M,T]=q.useState("idle"),[F,D]=q.useState(!1),V=q.useRef(0),z=q.useRef(0),K=q.useRef(null),W=q.useCallback(()=>{K.current&&(window.clearTimeout(K.current),K.current=null)},[]);q.useEffect(()=>{let je=!1;const ue=V.current+1;return V.current=ue,W(),z.current=Date.now(),D(!0),ive(u,i).then(Pe=>{if(je||V.current!==ue)return;const De=Pe?"ready":"missing",it=()=>{je||V.current!==ue||(C(Pe),T(De),m(u),D(!1))},yt=Date.now()-z.current,ie=$ye-yt;ie<=0?it():K.current=window.setTimeout(it,ie)}),()=>{je=!0,W()}},[u,i,W]),q.useEffect(()=>{a&&w(je=>je[a]?je:{...je,[a]:!0})},[a]),q.useEffect(()=>{!a||!o||j(je=>{const ue=je[a]||{};return ue[o]?je:{...je,[a]:{...ue,[o]:!0}}})},[a,o]);const U=q.useCallback(je=>{const ue=new URLSearchParams(t);ue.set("tab",je.tab),je.sub?ue.set("sub",je.sub):ue.delete("sub"),je.sub2?ue.set("sub2",je.sub2):ue.delete("sub2"),e(ue,{replace:!1,preventScrollReset:!0})},[t,e]),J=q.useCallback(()=>{const je=new URLSearchParams(t);je.delete("tab"),je.delete("sub"),je.delete("sub2"),e(je,{replace:!1,preventScrollReset:!0})},[t,e]),re=q.useCallback(je=>{w(ue=>({...ue,[je]:!ue[je]}))},[]),G=q.useCallback(je=>{const ue=new URLSearchParams(t);ue.set("tab",je),ue.delete("sub"),ue.delete("sub2"),e(ue,{replace:!1,preventScrollReset:!0})},[t,e]),X=q.useCallback((je,ue)=>{j(Pe=>{const De=Pe[je]||{};return{...Pe,[je]:{...De,[ue]:!De[ue]}}})},[]),Y=q.useCallback((je,ue)=>{const Pe=new URLSearchParams(t);Pe.set("tab",je),Pe.set("sub",ue),Pe.delete("sub2"),e(Pe,{replace:!1,preventScrollReset:!0})},[t,e]),se=q.useCallback(je=>{const ue=document.getElementById(je);if(!ue)return;const Pe=ue.closest("main");if(Pe){const De=Pe.getBoundingClientRect(),yt=ue.getBoundingClientRect().top-De.top+Pe.scrollTop-12;Pe.scrollTo({top:yt,behavior:"smooth"});return}ue.scrollIntoView({behavior:"smooth",block:"start"})},[]),ce=(S==null?void 0:S.frontmatter.title)||(R==null?void 0:R.label)||(N==null?void 0:N.label)||(P==null?void 0:P.label)||"",_e=(S==null?void 0:S.frontmatter.category)||(P==null?void 0:P.label)||(R==null?void 0:R.categoryLabel)||"",Ae=q.useMemo(()=>((S==null?void 0:S.toc)||[]).filter(je=>je.id!=="overview"),[S]),ee=q.useMemo(()=>!(S!=null&&S.frontmatter.gallery)||S.frontmatter.gallery.length===0?[]:S.frontmatter.gallery.map(je=>{if(!je)return null;if(/^https?:\/\//i.test(je))return{key:je,thumb:je,full:je};const Pe=Ga(je,640),De=Pe.thumb||Pe.url,it=Pe.url||Pe.thumb;return!De||!it?null:{key:je,thumb:De,full:it}}).filter(Boolean),[S]),[le,te]=q.useState(null);q.useEffect(()=>{if(!le)return;const je=ue=>{ue.key==="Escape"&&te(null)};return window.addEventListener("keydown",je),()=>window.removeEventListener("keydown",je)},[le]);const ye=ee.length?`${we.contentGrid} ${we.contentGridHasGallery}`:we.contentGrid,ke=_?`${we.markdown} ${we.markdownHome}`:we.markdown,Me=Oye(S==null?void 0:S.frontmatter.status),Re=Me==="up_to_date"?n("guide.status.up_to_date",{defaultValue:"Up to date"}):Me==="outdated"?n("guide.status.outdated",{defaultValue:"Outdated"}):n("guide.status.work_in_progress",{defaultValue:"Work in progress"}),Ee=Me==="up_to_date"?we.statusChipUpToDate:Me==="outdated"?we.statusChipOutdated:we.statusChipWorkInProgress,Le=()=>s.jsxs("div",{className:we.tocRow,children:[s.jsx("div",{className:we.tocLabel,children:n("guides.v2.sectionsLabel",{defaultValue:"Sections"})}),s.jsx("div",{className:we.tocPills,children:Ae.length===0?s.jsx("span",{className:we.galleryEmpty,children:n("guides.v2.noSections",{defaultValue:"No sections"})}):Ae.map(je=>s.jsx("button",{className:we.tocPill,onClick:()=>se(je.id),type:"button",children:je.text},je.id))})]}),Fe=()=>{if(!S)return null;const je=k?s.jsx(jye,{}):null,ue={"am-rune-bonuses-table":EL,"arenaam-link-buttons":Aye,"arenaam-related-buttons":Pye,"gamefeatures-link-buttons":kye,"home-quick-links":Sye,"fortress-link-buttons":Nye,"fortress-package-skip-order-button":Cye,"underworld-link-buttons":Iye,"fortress-related-buttons":Rye,"fortress-package-skip-order-table":Tye,"fortress-calculator":PL,"underworld-calculator":RL,"gem-calculator":Mye,"max-item-stats-calculator":Cve,"underworld-pro-pack-link-button":Eye,"underworld-pro-package-skip-order":Qve,"dungeon-pause-open-xp-calculator":o2},Pe=Object.keys(ue).some(at=>S.html.includes(`data-embed="${at}"`)),De=S.html.includes('data-asset="'),it=Pe||De,yt=at=>{if(!it)return s.jsx("div",{dangerouslySetInnerHTML:{__html:at}});const rt=/<div data-(embed|asset)="([a-z0-9-_]+)"><\/div>/g;let ut=0,_t,ot=0;const nt=[];for(;_t=rt.exec(at);){const pt=at.slice(ut,_t.index);pt&&(nt.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:pt}},`html-${ot}`)),ot+=1);const ne=_t[1],Oe=_t[2];if(ne==="embed"){const Ve=ue[Oe];Ve?(nt.push(s.jsx(Ve,{},`embed-${Oe}-${ot}`)),ot+=1):(nt.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:_t[0]}},`html-${ot}`)),ot+=1)}else{const Ve=Ga(Oe,960),ct=Ve.thumb||Ve.url;ct?(nt.push(s.jsx("img",{src:ct,alt:Oe},`asset-${Oe}-${ot}`)),ot+=1):(nt.push(s.jsx("div",{},`asset-${Oe}-${ot}`)),ot+=1)}ut=_t.index+_t[0].length}const ts=at.slice(ut);return ts&&nt.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:ts}},`html-${ot}`)),nt.length===0?s.jsx("div",{dangerouslySetInnerHTML:{__html:at}}):s.jsx(s.Fragment,{children:nt})},he=S.html.indexOf('<h2 id="overview">');if(he===-1)return it?s.jsxs("div",{className:ke,children:[yt(S.html),je]}):s.jsxs("div",{className:ke,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:S.html}}),je]});const ve=S.html.indexOf("</h2>",he);if(ve===-1)return it?s.jsxs("div",{className:ke,children:[yt(S.html),je]}):s.jsxs("div",{className:ke,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:S.html}}),je]});const Te=S.html.slice(0,ve+5),St=S.html.slice(ve+5);return it?s.jsxs("div",{className:ke,children:[yt(Te),Le(),je,yt(St)]}):s.jsxs("div",{className:ke,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:Te}}),Le(),je,s.jsx("div",{dangerouslySetInnerHTML:{__html:St}})]})},Be=s.jsx(Vye,{tab:a,sub:o,sub2:c,isHome:_,openTabs:x,openSubs:L,onToggleTab:re,onToggleSub:X,onNavigate:U,onNavigateHome:J,onNavigateCategory:G,onNavigateSub:Y,t:n});return s.jsxs(os,{left:Be,leftWidth:280,leftFullHeight:!0,children:[s.jsx("div",{className:we.viewerWrap,children:s.jsx("section",{className:we.viewer,children:s.jsxs("div",{className:we.viewerCard,children:[M==="missing"&&s.jsxs("div",{className:we.missingState,children:[s.jsx("div",{className:we.emptyTitle,children:n("guides.v2.missingTitle",{defaultValue:"Guide not available yet"})}),s.jsx("div",{children:n("guides.v2.missingBody",{defaultValue:"This guide does not have markdown content yet."})})]}),S&&M!=="missing"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:we.viewerHeader,children:[s.jsxs("div",{children:[s.jsx("h1",{className:we.viewerTitle,children:ce}),s.jsx("div",{className:we.metaRow,children:s.jsxs("span",{children:[s.jsxs("span",{className:we.metaLabel,children:[n("guide.status.label",{defaultValue:"Status"}),":"]}),s.jsx("span",{className:`${we.statusChip} ${Ee}`,children:Re})]})})]}),_e&&s.jsx("div",{className:we.categoryPill,children:_e})]}),s.jsxs("div",{className:ye,children:[Fe(),ee.length>0&&s.jsxs("aside",{className:we.galleryCard,children:[s.jsx("div",{className:we.galleryTitle,children:n("guides.v2.galleryLabel",{defaultValue:"Gallery"})}),s.jsx("div",{className:we.galleryGrid,children:ee.map(je=>s.jsx("img",{src:je.thumb,alt:je.key,className:we.galleryThumb,onClick:()=>te(je.full)},je.key))})]})]})]}),s.jsx("div",{className:`${we.viewerLoadingOverlay} ${F?we.viewerLoadingOverlayVisible:""}`,children:s.jsx("div",{className:we.loadingState,children:s.jsxs("div",{className:we.loadingOverlayContent,children:[s.jsx("span",{className:we.loadingSpinner,"aria-hidden":!0}),s.jsx("span",{children:n("guides.v2.loading",{defaultValue:"Loading guide..."})})]})})})]})})}),le&&s.jsx("div",{className:we.overlay,onClick:()=>te(null),children:s.jsxs("div",{className:we.overlayPanel,onClick:je=>je.stopPropagation(),children:[s.jsx("button",{className:we.overlayClose,onClick:()=>te(null),type:"button",children:n("guides.v2.closeLabel",{defaultValue:"Close"})}),s.jsx("img",{className:we.overlayImage,src:le,alt:"Guide preview"})]})})]})},zye="_wrap_1353r_1",Gye="_centerLogoWrap_1353r_21",Hye="_centerLogoLink_1353r_37",Wye="_centerLogo_1353r_21",Kye="_arc_1353r_71",qye="_left_1353r_73",Qye="_right_1353r_75",Yye="_sub_1353r_77",Xye="_full_1353r_79",Jye="_arcItem_1353r_81",Zye="_iconBtn_1353r_87",e0e="_active_1353r_141",t0e="_iconImg_1353r_151",s0e="_placeholderIcon_1353r_155",n0e="_placeholderText_1353r_173",r0e="_iconLabel_1353r_177",Ar={wrap:zye,centerLogoWrap:Gye,centerLogoLink:Hye,centerLogo:Wye,arc:Kye,left:qye,right:Qye,sub:Yye,full:Xye,arcItem:Jye,iconBtn:Zye,active:e0e,iconImg:t0e,placeholderIcon:s0e,placeholderText:n0e,iconLabel:r0e},i0e=({to:t,label:e,icon:n,variant:r="main"})=>{const{search:i}=ir();let a=!1;try{const o=new URLSearchParams(i),c=o.get("tab"),u=o.get("sub"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),v=m.get("sub");a=r==="sub"?c===g&&!!v&&u===v:c===g}catch(o){a=!1}return s.jsxs(Gs,{to:t,"aria-label":e,className:[Ar.iconBtn,r==="sub"?Ar.muted:"",a?Ar.active:""].join(" "),title:e,replace:!1,children:[n?s.jsx("img",{src:n,alt:"",className:Ar.iconImg}):s.jsx("div",{className:Ar.placeholderIcon,"aria-hidden":"true",children:s.jsx("span",{className:Ar.placeholderText,children:e.slice(0,2).toUpperCase()})}),s.jsx("div",{className:Ar.iconLabel,children:e})]})},p1=({items:t,side:e,anchorSide:n="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:o=440})=>{const c=A.useMemo(()=>{const h=t.length;if(h===0)return[];let m=-90,g=90;e==="left"?(m=90,g=270):e==="sub"?n==="left"?(m=90,g=270):(m=-90,g=90):e==="full"&&(m=0,g=360);const v=(g-m)/(h+1),b=r?190:250;return t.map((_,k)=>{const R=(m+v*(k+1))*Math.PI/180;return{it:_,x:Math.cos(R)*b,y:Math.sin(R)*b}})},[t,e,n,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=n==="left"?`calc(50% - ${o}px)`:`calc(50% + ${o}px)`),h})();return s.jsx("div",{className:[Ar.arc,e==="left"?Ar.left:"",e==="right"?Ar.right:"",e==="sub"?Ar.sub:"",e==="full"?Ar.full:""].join(" "),style:u,children:c.map(({it:h,x:m,y:g})=>s.jsx("div",{className:Ar.arcItem,style:{transform:`translate(${m}px, ${g}px)`},children:s.jsx(i0e,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},a0e=["creators","scans","predictions","news","records","feedback"],L_=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],o0e={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},l0e=new Set(a0e),c0e=L_.reduce((t,e)=>(t[e.key]=e,t),{}),d0e=t=>typeof t=="string"&&l0e.has(t),u0e=({logoSrc:t})=>{const[e]=ar(),n=e.get("tab")||null,r=A.useMemo(()=>L_.filter(b=>b.side==="left"),[]),i=A.useMemo(()=>L_.filter(b=>b.side==="right"),[]),a=d0e(n)?n:null,o=a?o0e[a]:[],c=a?c0e[a].side:"right",u=A.useRef(null),[h,m]=A.useState(220),[g,v]=A.useState(440);return A.useEffect(()=>{const b=()=>{var N,x;const k=((x=(N=u.current)==null?void 0:N.offsetWidth)!=null?x:380)/2,R=Math.round(k+60),P=Math.round(R+220);m(R),v(P)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),s.jsxs("div",{className:Ar.wrap,children:[s.jsx("div",{className:Ar.centerLogoWrap,children:s.jsx(Gs,{to:"/community",className:Ar.centerLogoLink,"aria-label":"Community Hub Home",children:s.jsx("img",{ref:u,src:t,alt:"Community Hub",className:Ar.centerLogo})})}),s.jsx(p1,{items:r.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"left",variant:"main",arcOffset:h}),s.jsx(p1,{items:i.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"right",variant:"main",arcOffset:h}),o.length>0&&s.jsx(p1,{items:o.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"sub",anchorSide:c,compact:!0,variant:"sub",outerOffset:g})]})},h0e="_topWrap_1rivx_1",m0e="_divider_1rivx_19",p0e="_contentArea_1rivx_53",g0e="_placeholder_1rivx_63",f0e="_placeholderTitle_1rivx_77",v0e="_placeholderText_1rivx_91",ju={topWrap:h0e,divider:m0e,contentArea:p0e,placeholder:g0e,placeholderTitle:f0e,placeholderText:v0e},x0e="/assets/logo_communityhub-LVMLHRD6.png",y0e=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function $L(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function b0e(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(o=>parseInt(o,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const n=new Date(t);return Number.isNaN(n.getTime())?new Date().toISOString():n.toISOString()}function g1(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function _0e(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function w0e(t){return t.avatar?t.avatar:`/avatars/${$L(t.code||t.name||"creator")}.png`}function j0e(t){const e=$L(t.code||t.name||"creator"),n=[],r=g1(t.youtube);r&&n.push({type:"YouTube",url:r});const i=g1(t.twitch);i&&n.push({type:"Twitch",url:i});const a=g1(t.discord);return a&&n.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:w0e(t),description:_0e(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:b0e(t.latestActivity),platforms:n}}function S0e(t){var n,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(n=t==null?void 0:t.generatedAt)!=null?n:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function OL(t="/data/creators-live.json"){const[e,n]=A.useState(null),[r,i]=A.useState(""),[a,o]=A.useState(!1),[c,u]=A.useState(0);return A.useEffect(()=>{let h=!1;async function m(){o(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const v=await g.json();h||n(S0e(v))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),n(null))}finally{h||o(!1)}}return m(),()=>{h=!0}},[t,c]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const N0e=y0e,k0e=N0e.map(j0e),C0e=[...k0e];function VL(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function cc(t,e,n=VL){if(t<=0)return"";const r=n(t);return e?`${r} ${e}`:r}function Np(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function T0e(t,e){const n=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*n;case"views":return(r.totalViews-i.totalViews)*n;case"activity":return(Np(r.lastActive)-Np(i.lastActive))*n*-1;case"language":return r.language.localeCompare(i.language)*n;default:return 0}}}function I0e(t){const e={width:16,height:16};switch(t){case"YouTube":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),s.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[s.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),s.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),s.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[s.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),s.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),s.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[s.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),s.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),s.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function xI({c:t}){return s.jsxs("article",{className:"cc-card",children:[s.jsxs("header",{className:"cc-card-head",children:[s.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const n=e.currentTarget;n.onerror=null,n.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),s.jsxs("div",{className:"cc-card-title",children:[s.jsx("h3",{className:"cc-name",children:t.name}),s.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[I0e(e.type),s.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),s.jsx("p",{className:"cc-desc",children:t.description}),s.jsxs("div",{className:"cc-stats",children:[s.jsx("span",{title:"Subscribers",children:cc(t.subscribers,"subs")}),s.jsx("span",{title:"Total views",children:cc(t.totalViews,"views")}),s.jsx("span",{title:"Weekly views",children:cc(t.weeklyViews,"/wk")}),s.jsx("span",{title:"Weekly posts",children:cc(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),s.jsxs("footer",{className:"cc-meta",children:[s.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),s.jsxs("span",{className:"cc-meta-right",children:["active ",Np(t.lastActive),"d ago"]})]})]},t.id)}function E0e({data:t}){return s.jsx("div",{className:"cc-table-wrap",children:s.jsxs("table",{className:"cc-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Lang"}),s.jsx("th",{children:"Subs"}),s.jsx("th",{children:"Total Views"}),s.jsx("th",{children:"Weekly Views"}),s.jsx("th",{children:"Weekly Posts"}),s.jsx("th",{children:"Active"})]})}),s.jsx("tbody",{children:t.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"cc-table-name",children:[s.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),s.jsx("span",{children:e.name})]})}),s.jsx("td",{children:e.language.toUpperCase()}),s.jsx("td",{children:cc(e.subscribers)}),s.jsx("td",{children:cc(e.totalViews)}),s.jsx("td",{children:cc(e.weeklyViews)}),s.jsx("td",{children:cc(e.weeklyPosts,void 0,n=>`${n}`)}),s.jsxs("td",{children:[Np(e.lastActive),"d"]})]},e.id))})]})})}function UL(){var X,Y;const[t,e]=A.useState("static"),[n,r]=A.useState("cards"),[i,a]=A.useState("subs"),[o,c]=A.useState("desc"),[u,h]=A.useState("all"),[m,g]=A.useState("all"),[v,b]=A.useState(0),[_,k]=A.useState(365),[I,R]=A.useState(null),[P,N]=A.useState(""),[x,w]=A.useState(!1),[L,j]=A.useState(""),[S,C]=A.useState(null),{snapshot:M,error:T}=OL(),F=(X=M==null?void 0:M.data)!=null&&X.length?M.data:null,D=F!=null?F:C0e,V=t==="static"?D:(Y=S!=null?S:F)!=null?Y:[],z=A.useMemo(()=>{const se=new Set(V.map(ce=>ce.language));return Array.from(se).sort()},[V]),K=A.useMemo(()=>V.filter(se=>u==="all"?!0:se.language===u).filter(se=>m==="all"?!0:se.platforms.some(ce=>ce.type===m)).filter(se=>se.subscribers>=v).filter(se=>Np(se.lastActive)<=_).slice().sort(T0e(i,o)),[V,u,m,v,_,i,o]);A.useEffect(()=>{if(!I&&K.length){const se=K[Math.floor(Math.random()*K.length)];R(se.id)}},[K,I]);const W=A.useMemo(()=>K.find(se=>se.id===I)||null,[K,I]),U=A.useMemo(()=>K.slice().sort((se,ce)=>ce.weeklyViews-se.weeklyViews).slice(0,5),[K]),J=A.useMemo(()=>K.slice().sort((se,ce)=>ce.weeklyPosts-se.weeklyPosts).slice(0,5),[K]);async function re(){j(""),w(!0);try{const se=await fetch(P,{headers:{Accept:"application/json"}});if(!se.ok)throw new Error(`HTTP ${se.status}`);const ce=await se.json(),_e=Array.isArray(ce)?ce:Array.isArray(ce==null?void 0:ce.data)?ce.data:[];C(_e)}catch(se){j((se==null?void 0:se.message)||"Fetch failed")}finally{w(!1)}}const G=K.length===0;return s.jsxs("section",{className:"cc-wrap",children:[s.jsxs("div",{className:"cc-heading",children:[s.jsx("h1",{children:"Content Creator Hub"}),s.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),M&&s.jsxs("p",{className:"cc-sync",children:[s.jsxs("span",{children:["Live stats synced ",new Date(M.generatedAt).toLocaleString()]}),s.jsxs("span",{children:[M.data.length," profiles"]})]}),T&&s.jsx("p",{className:"cc-sync-error",children:T})]}),s.jsxs("div",{className:"cc-toolbar",children:[s.jsxs("div",{className:"cc-toolbar-row",children:[s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Data"}),s.jsxs("select",{value:t,onChange:se=>e(se.target.value),children:[s.jsx("option",{value:"static",children:"Static"}),s.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"View"}),s.jsxs("select",{value:n,onChange:se=>r(se.target.value),children:[s.jsx("option",{value:"cards",children:"Cards"}),s.jsx("option",{value:"table",children:"Table"}),s.jsx("option",{value:"json",children:"JSON"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Sort by"}),s.jsxs("select",{value:i,onChange:se=>a(se.target.value),children:[s.jsx("option",{value:"subs",children:"Subs"}),s.jsx("option",{value:"views",children:"Views"}),s.jsx("option",{value:"activity",children:"Activity"}),s.jsx("option",{value:"language",children:"Language"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Dir"}),s.jsxs("select",{value:o,onChange:se=>c(se.target.value),children:[s.jsx("option",{value:"desc",children:"Desc"}),s.jsx("option",{value:"asc",children:"Asc"})]})]})]}),s.jsxs("div",{className:"cc-toolbar-row",children:[s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Language"}),s.jsxs("select",{value:u,onChange:se=>h(se.target.value),children:[s.jsx("option",{value:"all",children:"All"}),z.map(se=>s.jsx("option",{value:se,children:se.toUpperCase()},se))]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Platform"}),s.jsxs("select",{value:m,onChange:se=>g(se.target.value),children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"YouTube",children:"YouTube"}),s.jsx("option",{value:"Twitch",children:"Twitch"}),s.jsx("option",{value:"TikTok",children:"TikTok"}),s.jsx("option",{value:"Discord",children:"Discord"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Min subs"}),s.jsx("input",{type:"number",min:0,value:v,onChange:se=>b(Number(se.target.value||0)),placeholder:"0"})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Active within"}),s.jsxs("select",{value:_,onChange:se=>k(Number(se.target.value)),children:[s.jsx("option",{value:7,children:"7 days"}),s.jsx("option",{value:30,children:"30 days"}),s.jsx("option",{value:90,children:"90 days"}),s.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&s.jsxs("div",{className:"cc-api",children:[s.jsxs("div",{className:"cc-api-ctrls",children:[s.jsxs("label",{className:"cc-field cc-field-grow",children:[s.jsx("span",{children:"API URL"}),s.jsx("input",{type:"url",value:P,onChange:se=>N(se.target.value),placeholder:"https://api.example.com/creators"})]}),s.jsx("button",{className:"cc-btn",onClick:re,disabled:!P||x,children:x?"Loading":"Fetch"})]}),L&&s.jsx("div",{className:"cc-api-error",children:L}),s.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),W&&s.jsxs("div",{className:"cc-spotlight",children:[s.jsxs("div",{className:"cc-spot-head",children:[s.jsx("h2",{children:"Random CC Spotlight"}),s.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!K.length)return;const se=K[Math.floor(Math.random()*K.length)];R(se.id)},children:"Shuffle"})]}),s.jsx(xI,{c:W})]}),s.jsxs("div",{className:"cc-main",children:[s.jsxs("div",{className:"cc-main-left",children:[G&&s.jsxs("div",{className:"cc-empty",children:[s.jsx("h3",{children:"No creators match the filters"}),s.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!G&&n==="cards"&&s.jsx("div",{className:"cc-grid",children:K.map(se=>s.jsx(xI,{c:se},se.id))}),!G&&n==="table"&&s.jsx(E0e,{data:K}),n==="json"&&s.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(K,null,2)})]}),s.jsxs("aside",{className:"cc-main-right",children:[s.jsxs("div",{className:"cc-side",children:[s.jsx("h3",{children:"Weekly Toplists"}),s.jsxs("div",{className:"cc-toplist",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"By Weekly Views"}),s.jsx("ol",{children:U.map(se=>s.jsxs("li",{children:[s.jsx("span",{children:se.name}),s.jsx("span",{className:"cc-top-val",children:VL(se.weeklyViews)})]},se.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"By Weekly Posts"}),s.jsx("ol",{children:J.map(se=>s.jsxs("li",{children:[s.jsx("span",{children:se.name}),s.jsx("span",{className:"cc-top-val",children:se.weeklyPosts})]},se.id))})]})]})]}),s.jsxs("div",{className:"cc-side cc-legal",children:[s.jsx("h3",{children:"Legal & Disclaimer"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Only public data; no embedding without permission."}),s.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),s.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function zL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Scans"}),s.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function GL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Predictions"}),s.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function HL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  News"}),s.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function WL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Feedback"}),s.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const A0e=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],f1=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],P0e={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},R0e=t=>P0e[t],L0e=(t,e=64)=>{var i;const n=R0e(t),r=kd(n);return r&&(i=Pi(r,e))!=null?i:null},D0e="_recordsPage_kdw96_1",M0e="_navArea_kdw96_15",F0e="_tabList_kdw96_27",B0e="_tabButton_kdw96_55",$0e="_tabButtonActive_kdw96_101",O0e="_sectionContent_kdw96_115",V0e="_placeholderPanel_kdw96_127",U0e="_placeholderTitle_kdw96_143",z0e="_placeholderText_kdw96_157",G0e="_milestoneSection_kdw96_171",H0e="_sectionHeader_kdw96_183",W0e="_filterBar_kdw96_197",K0e="_filterButtons_kdw96_231",q0e="_filterButton_kdw96_231",Q0e="_filterButtonActive_kdw96_295",Y0e="_filterSelectWrapper_kdw96_309",X0e="_filterLabel_kdw96_321",J0e="_filterSelect_kdw96_309",Z0e="_emptyFilterMessage_kdw96_355",ebe="_currentSection_kdw96_369",tbe="_currentGrid_kdw96_381",sbe="_currentCard_kdw96_393",nbe="_categoryLabel_kdw96_419",rbe="_recordTitle_kdw96_433",ibe="_currentDetails_kdw96_445",abe="_notes_kdw96_457",obe="_infoPanel_kdw96_469",lbe="_infoCard_kdw96_481",cbe="_disclaimerCard_kdw96_483",dbe="_infoHeader_kdw96_525",ube="_infoAuthor_kdw96_539",hbe="_authorName_kdw96_557",mbe="_authorBadge_kdw96_565",pbe="_infoAuthorIcon_kdw96_591",gbe="_infoDate_kdw96_623",fbe="_infoBody_kdw96_633",vbe="_infoTitle_kdw96_645",xbe="_infoLink_kdw96_665",ybe="_milestoneGrid_kdw96_719",bbe="_milestoneCard_kdw96_731",_be="_milestoneCategory_kdw96_757",wbe="_milestoneTitle_kdw96_771",jbe="_milestoneDetails_kdw96_785",Sbe="_detailRow_kdw96_797",Nbe="_detailLabel_kdw96_809",kbe="_detailValue_kdw96_823",Cbe="_sourceLink_kdw96_833",Tbe="_emptyState_kdw96_855",mt={recordsPage:D0e,navArea:M0e,tabList:F0e,tabButton:B0e,tabButtonActive:$0e,sectionContent:O0e,placeholderPanel:V0e,placeholderTitle:U0e,placeholderText:z0e,milestoneSection:G0e,sectionHeader:H0e,filterBar:W0e,filterButtons:K0e,filterButton:q0e,filterButtonActive:Q0e,filterSelectWrapper:Y0e,filterLabel:X0e,filterSelect:J0e,emptyFilterMessage:Z0e,currentSection:ebe,currentGrid:tbe,currentCard:sbe,categoryLabel:nbe,recordTitle:rbe,currentDetails:ibe,notes:abe,infoPanel:obe,infoCard:lbe,disclaimerCard:cbe,infoHeader:dbe,infoAuthor:ube,authorName:hbe,authorBadge:mbe,infoAuthorIcon:pbe,infoDate:gbe,infoBody:fbe,infoTitle:vbe,infoLink:xbe,milestoneGrid:ybe,milestoneCard:bbe,milestoneCategory:_be,milestoneTitle:wbe,milestoneDetails:jbe,detailRow:Sbe,detailLabel:Nbe,detailValue:kbe,sourceLink:Cbe,emptyState:Tbe},Ibe=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],Ebe={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},Abe=({title:t,description:e,hint:n})=>s.jsxs("article",{className:mt.placeholderPanel,children:[s.jsx("h2",{className:mt.placeholderTitle,children:t}),s.jsx("p",{className:mt.placeholderText,children:e}),n&&s.jsx("p",{className:mt.emptyState,children:n})]}),Pbe=()=>{const[t,e]=A.useState("all"),n=A.useMemo(()=>{const a=new Set,o=[];for(const c of f1)a.has(c.category)||(a.add(c.category),o.push(c.category));return["all",...o]},[]),r=t==="all"?f1:f1.filter(a=>a.category===t),i=a=>{e(a)};return s.jsxs("section",{className:mt.milestoneSection,"aria-label":"Records milestones",children:[s.jsxs("div",{className:mt.sectionHeader,children:[s.jsx("p",{children:"Milestones"}),s.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),s.jsxs("div",{className:mt.filterBar,children:[s.jsx("div",{className:mt.filterButtons,children:n.map(a=>s.jsx("button",{type:"button",className:[mt.filterButton,t===a&&mt.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),s.jsxs("label",{className:mt.filterSelectWrapper,children:[s.jsx("span",{className:mt.filterLabel,children:"Category"}),s.jsx("select",{value:t,onChange:a=>i(a.target.value),className:mt.filterSelect,children:n.map(a=>s.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?s.jsx("p",{className:mt.emptyFilterMessage,children:"No milestones fall into this category yet."}):s.jsx("div",{className:mt.milestoneGrid,children:r.map(a=>s.jsxs("article",{className:mt.milestoneCard,children:[s.jsx("span",{className:mt.milestoneCategory,children:a.category}),s.jsx("h3",{className:mt.milestoneTitle,children:a.achievement}),s.jsxs("div",{className:mt.milestoneDetails,children:[s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Name"}),s.jsx("span",{className:mt.detailValue,children:a.name})]}),s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Server"}),s.jsx("span",{className:mt.detailValue,children:a.server})]}),s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Date"}),s.jsx("span",{className:mt.detailValue,children:a.date})]}),a.notes&&s.jsx("p",{className:mt.notes,children:a.notes}),a.source&&s.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:mt.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},Rbe=()=>s.jsxs("section",{className:mt.currentSection,"aria-label":"Current community records",children:[s.jsxs("div",{className:mt.sectionHeader,children:[s.jsx("p",{children:"Current Records"}),s.jsx("h2",{children:"The latest verified achievements"})]}),s.jsx("div",{className:mt.currentGrid,children:A0e.map((t,e)=>s.jsxs("article",{className:mt.currentCard,children:[s.jsx("span",{className:mt.categoryLabel,children:t.category}),s.jsx("h3",{className:mt.recordTitle,children:t.record}),s.jsxs("div",{className:mt.currentDetails,children:[s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Class"}),s.jsx("span",{className:mt.detailValue,children:t.classType})]}),s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Player"}),s.jsx("span",{className:mt.detailValue,children:t.playerName})]}),s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Server"}),s.jsx("span",{className:mt.detailValue,children:t.server})]}),s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Days"}),s.jsx("span",{className:mt.detailValue,children:t.days})]}),t.release&&s.jsxs("div",{className:mt.detailRow,children:[s.jsx("span",{className:mt.detailLabel,children:"Release"}),s.jsx("span",{className:mt.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&s.jsxs("p",{className:mt.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&s.jsx("p",{className:mt.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),bm={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function KL(){const[t,e]=A.useState("current"),n=L0e("infoCard",32),r=()=>{if(t==="current")return s.jsx(Rbe,{});if(t==="milestones")return s.jsx(Pbe,{});const i=Ebe[t];return s.jsx(Abe,{title:i.title,description:i.description,hint:i.hint})};return s.jsxs("section",{className:mt.recordsPage,children:[s.jsx(LL,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),s.jsxs("div",{className:mt.infoPanel,children:[s.jsxs("div",{className:mt.infoCard,children:[s.jsxs("div",{className:mt.infoHeader,children:[s.jsxs("div",{className:mt.infoAuthor,children:[n?s.jsx("img",{src:n,alt:"Community Data",className:mt.infoAuthorIcon}):null,s.jsx("span",{className:mt.authorName,children:"S&F Tavern Info"}),s.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:mt.authorBadge,children:"Discord"})]}),s.jsx("span",{className:mt.infoDate,children:"11.12.2020 14:08"})]}),s.jsxs("div",{className:mt.infoBody,children:[s.jsx("h3",{className:mt.infoTitle,children:bm.title}),bm.paragraphs.map(i=>s.jsx("p",{children:i},i))]}),s.jsxs("div",{className:mt.infoLink,children:[s.jsx("span",{children:bm.linkLabel}),s.jsx("a",{href:bm.linkUrl,target:"_blank",rel:"noreferrer",children:bm.linkUrl})]})]}),s.jsxs("div",{className:mt.disclaimerCard,children:[s.jsx("h3",{className:mt.infoTitle,children:"Disclaimer"}),s.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),s.jsx("div",{className:mt.navArea,children:s.jsx("nav",{className:mt.tabList,"aria-label":"Records navigation",children:Ibe.map(i=>s.jsx("button",{type:"button",className:`${mt.tabButton} ${t===i.key?mt.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),s.jsx("div",{className:mt.sectionContent,children:r()})]})}const Lbe={creators:UL,scans:zL,predictions:GL,news:HL,records:KL,feedback:WL};function Dbe(){const[t]=ar(),e=t.get("tab")||"",n=Lbe[e];return s.jsxs(os,{children:[s.jsx("div",{className:ju.topWrap,children:s.jsx(u0e,{logoSrc:x0e})}),s.jsx("div",{className:ju.divider}),s.jsx("div",{className:ju.contentArea,children:n?s.jsx(n,{}):s.jsxs("div",{className:ju.placeholder,children:[s.jsx("h2",{className:ju.placeholderTitle,children:"Community"}),s.jsx("p",{className:ju.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function Mbe(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsxs(Gs,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),s.jsxs(Gs,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),s.jsxs(Gs,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function Fbe(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans  Letzter Scan"}),s.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function Bbe(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans  Archiv"}),s.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function $be(){return s.jsx(os,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:s.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:s.jsx(Obe,{}),right:s.jsx(Vbe,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[s.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),s.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.jsx(Gs,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),s.jsx(Gs,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(Gf,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),s.jsx(Gf,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),s.jsx(Gf,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),s.jsx(Gf,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function Obe(){return s.jsxs("nav",{className:"space-y-2 text-sm",children:[s.jsx(_m,{to:"/guild-hub/planner",children:"Planner"}),s.jsx(_m,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),s.jsx(_m,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),s.jsx(_m,{to:"/guild-hub/waitlist",children:"Waitlist"}),s.jsx(_m,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function Vbe(){return s.jsxs("aside",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),s.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function Gf({to:t,title:e,desc:n}){return s.jsxs(Gs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),n?s.jsx("div",{className:"mt-1 text-sm opacity-75",children:n}):null]})}function _m({to:t,children:e}){return s.jsx($s,{to:t,className:({isActive:n})=>`block rounded-lg border px-3 py-2 no-underline ${n?"font-semibold":""}`,style:({isActive:n})=>({borderColor:n?"#2B6DE0":"#2B4C73",background:n?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:n?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const Ube="_page_1mlmy_1",zbe="_header_1mlmy_13",Gbe="_headerStack_1mlmy_25",Hbe="_kicker_1mlmy_37",Wbe="_title_1mlmy_53",Kbe="_headerActions_1mlmy_65",qbe="_primaryAction_1mlmy_77",Qbe="_secondaryAction_1mlmy_79",Ybe="_infoStrip_1mlmy_127",Xbe="_infoBlock_1mlmy_147",Jbe="_infoLabel_1mlmy_161",Zbe="_freshnessWrapper_1mlmy_181",e1e="_freshnessBadge_1mlmy_189",t1e="_badge_f0_1mlmy_213",s1e="_badge_f1_1mlmy_215",n1e="_badge_f2_1mlmy_217",r1e="_badge_f3_1mlmy_219",i1e="_badge_f4_1mlmy_221",a1e="_badge_f5_1mlmy_223",o1e="_badge_f6_1mlmy_225",l1e="_badge_f7_1mlmy_227",c1e="_badge_unknown_1mlmy_229",d1e="_popover_1mlmy_233",u1e="_popoverLabel_1mlmy_265",h1e="_filterToolbar_1mlmy_275",m1e="_filterSheetButton_1mlmy_285",p1e="_inlineFilters_1mlmy_303",g1e="_searchInput_1mlmy_315",f1e="_select_1mlmy_317",v1e="_ownerGroup_1mlmy_335",x1e="_ownerChip_1mlmy_347",y1e="_ownerChipActive_1mlmy_365",b1e="_sortGroup_1mlmy_375",_1e="_sortLabel_1mlmy_387",w1e="_directionButton_1mlmy_397",j1e="_listBody_1mlmy_415",S1e="_tableWrapper_1mlmy_427",N1e="_table_1mlmy_427",k1e="_stickyColumn_1mlmy_481",C1e="_rowTitleButton_1mlmy_495",T1e="_tableStatus_1mlmy_513",I1e="_cardList_1mlmy_533",E1e="_card_1mlmy_533",A1e="_cardHeader_1mlmy_565",P1e="_cardTitle_1mlmy_577",R1e="_cardMeta_1mlmy_595",L1e="_cardDescription_1mlmy_611",D1e="_cardFooter_1mlmy_623",M1e="_cardLabel_1mlmy_639",F1e="_scanBadge_1mlmy_649",B1e="_emptyState_1mlmy_665",$1e="_sheetBackdrop_1mlmy_681",O1e="_sheet_1mlmy_681",V1e="_sheetHandle_1mlmy_721",U1e="_sheetBody_1mlmy_739",z1e="_sheetLabel_1mlmy_755",G1e="_sheetActions_1mlmy_793",H1e="_overlay_1mlmy_807",W1e="_panel_1mlmy_825",K1e="_modal_1mlmy_851",q1e="_drawer_1mlmy_861",Q1e="_panelHeader_1mlmy_869",Y1e="_panelControls_1mlmy_883",X1e="_panelDescription_1mlmy_913",J1e="_detailGrid_1mlmy_925",Z1e="_panelFooter_1mlmy_957",e_e="_formOverlay_1mlmy_969",t_e="_formPanel_1mlmy_991",s_e="_formGrid_1mlmy_1017",n_e="_menuWrapper_1mlmy_1029",r_e="_dotsButton_1mlmy_1037",i_e="_menu_1mlmy_1029",a_e="_pagination_1mlmy_1109",Ge={page:Ube,header:zbe,headerStack:Gbe,kicker:Hbe,title:Wbe,headerActions:Kbe,primaryAction:qbe,secondaryAction:Qbe,infoStrip:Ybe,infoBlock:Xbe,infoLabel:Jbe,freshnessWrapper:Zbe,freshnessBadge:e1e,badge_f0:t1e,badge_f1:s1e,badge_f2:n1e,badge_f3:r1e,badge_f4:i1e,badge_f5:a1e,badge_f6:o1e,badge_f7:l1e,badge_unknown:c1e,popover:d1e,popoverLabel:u1e,filterToolbar:h1e,filterSheetButton:m1e,inlineFilters:p1e,searchInput:g1e,select:f1e,ownerGroup:v1e,ownerChip:x1e,ownerChipActive:y1e,sortGroup:b1e,sortLabel:_1e,directionButton:w1e,listBody:j1e,tableWrapper:S1e,table:N1e,stickyColumn:k1e,rowTitleButton:C1e,tableStatus:T1e,cardList:I1e,card:E1e,cardHeader:A1e,cardTitle:P1e,cardMeta:R1e,cardDescription:L1e,cardFooter:D1e,cardLabel:M1e,scanBadge:F1e,emptyState:B1e,sheetBackdrop:$1e,sheet:O1e,sheetHandle:V1e,sheetBody:U1e,sheetLabel:z1e,sheetActions:G1e,overlay:H1e,panel:W1e,modal:K1e,drawer:q1e,panelHeader:Q1e,panelControls:Y1e,panelDescription:X1e,detailGrid:J1e,panelFooter:Z1e,formOverlay:e_e,formPanel:t_e,formGrid:s_e,menuWrapper:n_e,dotsButton:r_e,menu:i_e,pagination:a_e};function o_e(){var re;const[t,e]=q.useState(_ae),[n,r]=q.useState(Qb),[i,a]=q.useState(Qb),o=lh(n.q,300),c=q.useMemo(()=>{const G=wae(t,n,o);return jae(G,n.sort,n.dir)},[t,n,o]),u=q.useMemo(()=>Sae(c,n.page,n.pageSize),[c,n.page,n.pageSize]),h=Math.max(1,Math.ceil(c.length/n.pageSize)),m=q.useMemo(()=>Array.from(new Set(t.map(G=>G.owner))),[t]),g=ch("(min-width: 768px)"),v=ch("(min-width: 1024px)"),[b,_]=q.useState(!1),[k,I]=q.useState(null),R=(re=t.find(G=>G.id===k))!=null?re:null,P=q.useRef(null);dh(P,!!R&&!v);const[N,x]=q.useState(null),[w,L]=q.useState(!1),j=q.useRef(null);dh(j,w);const S=q.useMemo(()=>Nae(t),[t]),C=q.useMemo(()=>S?jp(S.nextUpdateAt,Date.now()):"",[S]),M=g,T=v,F=s.jsxs("div",{className:Ge.headerActions,children:[s.jsx("button",{type:"button",className:Ge.primaryAction,onClick:()=>{x(null),L(!0)},children:"Neuer Eintrag"}),!g&&s.jsx("button",{type:"button",className:Ge.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>_(!0),children:"Filter"})]}),D=G=>{const X=R3(G);r(X),a(X)},V=(G,X)=>{const Y=R3({...n,[G]:X,page:G==="page"||G==="pageSize"?X:1});D(Y)},z=()=>{D(i),_(!1)},K=()=>{D(Qb),_(!1)},W=(G,X=!1)=>{if(X)a(Y=>{const ce=Y.owner.includes(G)?Y.owner.filter(_e=>_e!==G):[...Y.owner,G];return{...Y,owner:ce}});else{const se=n.owner.includes(G)?n.owner.filter(ce=>ce!==G):[...n.owner,G];V("owner",se)}},U=(G,X)=>{e(Y=>Y.map(se=>se.id===G?{...se,status:X,updatedAt:new Date().toISOString()}:se))},J=G=>{e(X=>X.some(se=>se.id===G.id)?X.map(se=>se.id===G.id?G:se):[G,...X]),L(!1)};return s.jsxs(os,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[s.jsxs("div",{className:Ge.page,children:[s.jsxs("header",{className:Ge.header,children:[s.jsxs("div",{className:Ge.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:Ge.kicker,children:"Deployment"}),s.jsx("h1",{className:Ge.title,children:"Planer"})]}),F]}),s.jsxs("div",{className:Ge.infoStrip,children:[s.jsxs("div",{className:Ge.infoBlock,children:[s.jsx("span",{className:Ge.infoLabel,children:"Offen"}),s.jsx("strong",{children:c.filter(G=>G.status==="open").length})]}),s.jsxs("div",{className:Ge.infoBlock,children:[s.jsx("span",{className:Ge.infoLabel,children:"In Arbeit"}),s.jsx("strong",{children:c.filter(G=>G.status==="in_progress").length})]}),S&&s.jsx(l_e,{code:S.freshness,label:i2[S.freshness],updatedAt:S.lastScanAt,nextUpdateAt:S.nextUpdateAt,countdown:C})]})]}),s.jsx("section",{className:Ge.filterToolbar,children:g?s.jsx(c_e,{filters:n,owners:m,onChange:V,onOwnerToggle:G=>W(G,!1)}):s.jsx("button",{type:"button",className:Ge.filterSheetButton,onClick:()=>_(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),s.jsx("section",{className:Ge.listBody,children:M?s.jsx(d_e,{items:u,sort:n.sort,dir:n.dir,onSortChange:G=>{const X=n.sort===G&&n.dir==="asc"?"desc":"asc";V("sort",G),V("dir",X)},onSelect:G=>I(G.id),onStatusChange:U,onEdit:G=>{x(G),L(!0)}}):s.jsx(u_e,{items:u,onSelect:G=>I(G.id),onStatusChange:U,onEdit:G=>{x(G),L(!0)}})}),s.jsx(m_e,{page:n.page,totalPages:h,onChange:G=>V("page",G)})]}),b&&s.jsx(h_e,{filters:i,owners:m,onChange:a,onOwnerToggle:G=>W(G,!0),onClose:()=>_(!1),onApply:z,onReset:K}),R&&s.jsx(QL,{ref:P,item:R,mode:T?"drawer":"modal",onClose:()=>I(null),onEdit:()=>{x(R),L(!0),I(null)},onStatusChange:U}),w&&s.jsx(YL,{ref:j,owners:m.length?m:kL,item:N,onClose:()=>L(!1),onSubmit:J})]})}function l_e({code:t,label:e,updatedAt:n,nextUpdateAt:r,countdown:i}){var c;const[a,o]=q.useState(!1);return s.jsxs("div",{className:Ge.freshnessWrapper,children:[s.jsx("button",{type:"button",className:`${Ge.freshnessBadge} ${(c=Ge[`badge_${t}`])!=null?c:""}`,"aria-label":`Freshness ${e}`,onClick:()=>o(u=>!u),children:e}),a&&s.jsxs("div",{className:Ge.popover,role:"dialog","aria-label":"Freshness Details",children:[s.jsxs("div",{children:[s.jsx("span",{className:Ge.popoverLabel,children:"Zuletzt gescannt"}),s.jsx("strong",{children:So(n)})]}),s.jsxs("div",{children:[s.jsx("span",{className:Ge.popoverLabel,children:"Naechster Scan"}),s.jsx("strong",{children:So(r)})]}),s.jsxs("div",{children:[s.jsx("span",{className:Ge.popoverLabel,children:"Countdown"}),s.jsx("strong",{children:i})]})]})]})}function c_e({filters:t,owners:e,onChange:n,onOwnerToggle:r}){return s.jsxs("div",{className:Ge.inlineFilters,children:[s.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:Ge.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>n("q",i.target.value)}),s.jsxs("select",{className:Ge.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>n("type",i.target.value),children:[s.jsx("option",{value:"all",children:"Typ (alle)"}),s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]}),s.jsxs("select",{className:Ge.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>n("status",i.target.value),children:[s.jsx("option",{value:"all",children:"Status (alle)"}),s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),s.jsxs("select",{className:Ge.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>n("range",i.target.value),children:[s.jsx("option",{value:"7d",children:"7 Tage"}),s.jsx("option",{value:"30d",children:"30 Tage"}),s.jsx("option",{value:"90d",children:"90 Tage"}),s.jsx("option",{value:"all",children:"Alle"})]}),s.jsx("div",{className:Ge.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return s.jsx("button",{type:"button",className:`${Ge.ownerChip} ${a?Ge.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),s.jsxs("div",{className:Ge.sortGroup,children:[s.jsx("label",{htmlFor:"planner-sort",className:Ge.sortLabel,children:"Sortieren"}),s.jsxs("select",{id:"planner-sort",name:"plannerSort",className:Ge.select,value:t.sort,onChange:i=>n("sort",i.target.value),children:[s.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),s.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),s.jsx("option",{value:"priority",children:"Prioritaet"}),s.jsx("option",{value:"title",children:"Titel"})]}),s.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:Ge.directionButton,onClick:()=>n("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function d_e({items:t,sort:e,dir:n,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:o}){const c=u=>e===u?n==="asc"?" ":" ":"";return t.length===0?s.jsx(qL,{}):s.jsx("div",{className:Ge.tableWrapper,children:s.jsxs("table",{className:Ge.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:Ge.stickyColumn,onClick:()=>r("title"),children:["Titel",c("title")]}),s.jsx("th",{children:"Typ"}),s.jsx("th",{children:"Owner"}),s.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",c("dueAt")]}),s.jsx("th",{children:"Status"}),s.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",c("updatedAt")]}),s.jsx("th",{})]})}),s.jsx("tbody",{children:t.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:Ge.stickyColumn,children:s.jsx("button",{type:"button",className:Ge.rowTitleButton,onClick:()=>i(u),children:u.title})}),s.jsx("td",{children:r2[u.type]}),s.jsx("td",{children:u.owner}),s.jsx("td",{children:So(u.dueAt)}),s.jsx("td",{children:s.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:Ge.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),s.jsx("td",{children:Zp(u.updatedAt)}),s.jsx("td",{children:s.jsx(XL,{onEdit:()=>o(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function u_e({items:t,onSelect:e,onStatusChange:n,onEdit:r}){return t.length===0?s.jsx(qL,{}):s.jsx("div",{className:Ge.cardList,children:t.map(i=>s.jsxs("article",{className:Ge.card,children:[s.jsxs("div",{className:Ge.cardHeader,children:[s.jsxs("div",{children:[s.jsx("button",{type:"button",className:Ge.cardTitle,onClick:()=>e(i),children:i.title}),s.jsxs("div",{className:Ge.cardMeta,children:[s.jsx("span",{children:r2[i.type]}),s.jsx("span",{children:yae[i.status]}),s.jsxs("span",{children:["Due ",So(i.dueAt)]})]})]}),s.jsx(XL,{onEdit:()=>r(i),onComplete:()=>n(i.id,"done")})]}),s.jsx("p",{className:Ge.cardDescription,children:i.description}),s.jsxs("div",{className:Ge.cardFooter,children:[s.jsxs("div",{children:[s.jsx("span",{className:Ge.cardLabel,children:"Owner"}),s.jsx("strong",{children:i.owner})]}),s.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:Ge.tableStatus,value:i.status,onChange:a=>n(i.id,a.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),s.jsxs("span",{className:Ge.scanBadge,children:["Letzter Scan ",Zp(i.lastScanAt)]})]})]},i.id))})}function qL(){return s.jsx("div",{className:Ge.emptyState,children:s.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function h_e({filters:t,owners:e,onChange:n,onOwnerToggle:r,onClose:i,onApply:a,onReset:o}){return s.jsx("div",{className:Ge.sheetBackdrop,role:"presentation",onClick:i,children:s.jsxs("div",{className:Ge.sheet,role:"dialog","aria-label":"Filter",onClick:c=>c.stopPropagation(),children:[s.jsx("div",{className:Ge.sheetHandle}),s.jsxs("div",{className:Ge.sheetBody,children:[s.jsx("h2",{children:"Filter"}),s.jsxs("label",{className:Ge.sheetLabel,children:["Suche",s.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:c=>n(u=>({...u,q:c.target.value}))})]}),s.jsxs("label",{className:Ge.sheetLabel,children:["Typ",s.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:c=>n(u=>({...u,type:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]})]}),s.jsxs("label",{className:Ge.sheetLabel,children:["Status",s.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:c=>n(u=>({...u,status:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{className:Ge.sheetLabel,children:["Zeitraum",s.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:c=>n(u=>({...u,range:c.target.value})),children:[s.jsx("option",{value:"7d",children:"7 Tage"}),s.jsx("option",{value:"30d",children:"30 Tage"}),s.jsx("option",{value:"90d",children:"90 Tage"}),s.jsx("option",{value:"all",children:"Alle"})]})]}),s.jsxs("div",{className:Ge.sheetLabel,children:["Owner",s.jsx("div",{className:Ge.ownerGroup,children:e.map(c=>{const u=t.owner.includes(c);return s.jsx("button",{type:"button",className:`${Ge.ownerChip} ${u?Ge.ownerChipActive:""}`,onClick:()=>r(c),children:c},c)})})]})]}),s.jsxs("div",{className:Ge.sheetActions,children:[s.jsx("button",{type:"button",onClick:o,children:"Zuruecksetzen"}),s.jsx("button",{type:"button",className:Ge.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const QL=q.forwardRef(({item:t,mode:e,onClose:n,onEdit:r,onStatusChange:i},a)=>s.jsx("div",{className:Ge.overlay,children:s.jsxs("div",{ref:a,className:`${Ge.panel} ${e==="drawer"?Ge.drawer:Ge.modal}`,children:[s.jsxs("header",{className:Ge.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Ge.cardLabel,children:r2[t.type]}),s.jsx("h2",{children:t.title})]}),s.jsx("button",{type:"button",className:Ge.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("div",{className:Ge.panelControls,children:[s.jsxs("label",{children:["Status",s.jsxs("select",{value:t.status,onChange:o=>i(t.id,o.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{children:["Prioritaet",s.jsxs("select",{disabled:!0,value:t.priority,children:[s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"Hoch"}),s.jsx("option",{value:"medium",children:"Mittel"}),s.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),s.jsx("p",{className:Ge.panelDescription,children:t.description}),s.jsxs("dl",{className:Ge.detailGrid,children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Owner"}),s.jsx("dd",{children:t.owner})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Assignees"}),s.jsx("dd",{children:t.assignees.join(", ")})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Termin"}),s.jsx("dd",{children:So(t.dueAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt aktualisiert"}),s.jsx("dd",{children:Zp(t.updatedAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Erstellt"}),s.jsx("dd",{children:So(t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Tags"}),s.jsx("dd",{children:t.tags.join(", ")})]})]}),s.jsxs("div",{className:Ge.panelFooter,children:[s.jsx("button",{type:"button",className:Ge.secondaryAction,onClick:r,children:"Bearbeiten"}),s.jsx("button",{type:"button",className:Ge.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));QL.displayName="DetailPanel";const YL=q.forwardRef(({owners:t,item:e,onClose:n,onSubmit:r},i)=>{const[a,o]=q.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:kL[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});q.useEffect(()=>{e&&o(e)},[JSON.stringify(e)]);const c=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{o(m=>{const v=m.tags.includes(h)?m.tags.filter(b=>b!==h):[...m.tags,h];return{...m,tags:v}})};return s.jsx("div",{className:Ge.formOverlay,children:s.jsxs("form",{ref:i,className:Ge.formPanel,onSubmit:c,children:[s.jsxs("header",{className:Ge.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Ge.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),s.jsx("h2",{children:e?e.title:"Planner Task"})]}),s.jsx("button",{type:"button",className:Ge.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("label",{className:Ge.sheetLabel,children:["Titel",s.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>o(m=>({...m,title:h.target.value})),required:!0})]}),s.jsxs("label",{className:Ge.sheetLabel,children:["Beschreibung",s.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>o(m=>({...m,description:h.target.value})),rows:4})]}),s.jsxs("div",{className:Ge.formGrid,children:[s.jsxs("label",{children:["Typ",s.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>o(m=>({...m,type:h.target.value})),children:[s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>o(m=>({...m,status:h.target.value})),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{children:["Owner",s.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>o(m=>({...m,owner:h.target.value})),children:t.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Prioritaet",s.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>o(m=>({...m,priority:h.target.value})),children:[s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"Hoch"}),s.jsx("option",{value:"medium",children:"Mittel"}),s.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),s.jsxs("label",{className:Ge.sheetLabel,children:["Termin",s.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>o(m=>({...m,dueAt:new Date(h.target.value).toISOString()}))})]}),s.jsxs("div",{className:Ge.sheetLabel,children:["Tags",s.jsx("div",{className:Ge.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const m=a.tags.includes(h);return s.jsx("button",{type:"button",className:`${Ge.ownerChip} ${m?Ge.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),s.jsxs("footer",{className:Ge.panelFooter,children:[s.jsx("button",{type:"button",className:Ge.secondaryAction,onClick:n,children:"Abbrechen"}),s.jsx("button",{type:"submit",className:Ge.primaryAction,children:"Speichern"})]})]})})});YL.displayName="PlannerFormOverlay";function XL({onEdit:t,onComplete:e}){const[n,r]=q.useState(!1),i=q.useRef(null);return q.useEffect(()=>{if(!n)return;const a=o=>{var c;(c=i.current)!=null&&c.contains(o.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n]),s.jsxs("div",{className:Ge.menuWrapper,ref:i,children:[s.jsx("button",{type:"button",className:Ge.dotsButton,"aria-haspopup":"menu","aria-expanded":n,onClick:()=>r(a=>!a),children:"..."}),n&&s.jsxs("div",{className:Ge.menu,role:"menu",children:[s.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),s.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),s.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function m_e({page:t,totalPages:e,onChange:n}){return s.jsxs("div",{className:Ge.pagination,children:[s.jsx("button",{type:"button",className:Ge.secondaryAction,onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),s.jsxs("span",{children:["Seite ",t," / ",e]}),s.jsx("button",{type:"button",className:Ge.secondaryAction,onClick:()=>n(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const p_e="_page_1cvuk_1",g_e="_header_1cvuk_13",f_e="_headerLeading_1cvuk_29",v_e="_backLink_1cvuk_41",x_e="_headerStack_1cvuk_77",y_e="_kicker_1cvuk_89",b_e="_title_1cvuk_105",__e="_subtitle_1cvuk_117",w_e="_headerActions_1cvuk_129",j_e="_plannerNotice_1cvuk_141",S_e="_noticeItem_1cvuk_163",N_e="_noticeWarning_1cvuk_185",k_e="_noticeDot_1cvuk_197",C_e="_tabSection_1cvuk_213",T_e="_tabBar_1cvuk_225",I_e="_tabItem_1cvuk_239",E_e="_tabItemActive_1cvuk_279",A_e="_tabLabel_1cvuk_291",P_e="_tabHelper_1cvuk_301",R_e="_tabPanel_1cvuk_311",L_e="_tabBadge_1cvuk_331",D_e="_primaryAction_1cvuk_1331",M_e="_secondaryAction_1cvuk_1333",F_e="_infoStrip_1cvuk_1383",B_e="_infoBlock_1cvuk_1403",$_e="_infoLabel_1cvuk_1415",O_e="_infoHint_1cvuk_1441",V_e="_stageGrid_1cvuk_1453",U_e="_panel_1cvuk_1465",z_e="_panelHeader_1cvuk_1487",G_e="_panelKicker_1cvuk_1501",H_e="_panelTitle_1cvuk_1517",W_e="_panelLead_1cvuk_1529",K_e="_badge_1cvuk_1541",q_e="_panelBody_1cvuk_1563",Q_e="_placeholderGrid_1cvuk_1575",Y_e="_placeholderCard_1cvuk_1587",X_e="_placeholderTitle_1cvuk_1609",J_e="_placeholderText_1cvuk_1619",Z_e="_helperSection_1cvuk_1631",ewe="_helperCard_1cvuk_1639",twe="_helperKicker_1cvuk_1661",swe="_helperTitle_1cvuk_1677",nwe="_helperText_1cvuk_1689",rwe="_helperActions_1cvuk_1701",Pt={page:p_e,header:g_e,headerLeading:f_e,backLink:v_e,headerStack:x_e,kicker:y_e,title:b_e,subtitle:__e,headerActions:w_e,plannerNotice:j_e,noticeItem:S_e,noticeWarning:N_e,noticeDot:k_e,tabSection:C_e,tabBar:T_e,tabItem:I_e,tabItemActive:E_e,tabLabel:A_e,tabHelper:P_e,tabPanel:R_e,tabBadge:L_e,primaryAction:D_e,secondaryAction:M_e,infoStrip:F_e,infoBlock:B_e,infoLabel:$_e,infoHint:O_e,stageGrid:V_e,panel:U_e,panelHeader:z_e,panelKicker:G_e,panelTitle:H_e,panelLead:W_e,badge:K_e,panelBody:q_e,placeholderGrid:Q_e,placeholderCard:Y_e,placeholderTitle:X_e,placeholderText:J_e,helperSection:Z_e,helperCard:ewe,helperKicker:twe,helperTitle:swe,helperText:nwe,helperActions:rwe},iwe="_setupGrid_rdp6l_1",awe="_setupLeft_rdp6l_13",owe="_setupRight_rdp6l_15",lwe="_card_rdp6l_27",cwe="_cardHeader_rdp6l_49",dwe="_cardKicker_rdp6l_61",uwe="_cardTitle_rdp6l_77",hwe="_cardText_rdp6l_89",mwe="_toggleGroup_rdp6l_101",pwe="_toggleButton_rdp6l_113",gwe="_toggleButtonActive_rdp6l_143",fwe="_modeHint_rdp6l_155",vwe="_formGrid_rdp6l_167",xwe="_formField_rdp6l_179",ywe="_formLabel_rdp6l_191",bwe="_input_rdp6l_201",_we="_suggestions_rdp6l_231",wwe="_suggestionBtn_rdp6l_257",jwe="_suggestionName_rdp6l_297",Swe="_suggestionMeta_rdp6l_305",Nwe="_partnerActions_rdp6l_315",kwe="_primaryAction_rdp6l_329",Cwe="_secondaryAction_rdp6l_331",Twe="_partnerList_rdp6l_381",Iwe="_partnerRow_rdp6l_393",Ewe="_partnerName_rdp6l_413",Awe="_partnerMeta_rdp6l_423",Pwe="_removeButton_rdp6l_433",Rwe="_emptyState_rdp6l_463",Lwe="_previewBlock_rdp6l_473",Dwe="_previewLabel_rdp6l_485",Mwe="_previewValue_rdp6l_499",Fwe="_previewCard_rdp6l_509",Bwe="_previewTitle_rdp6l_523",$we="_previewMeta_rdp6l_533",Owe="_previewList_rdp6l_543",Vwe="_previewItem_rdp6l_555",Uwe="_setupInfo_rdp6l_569",zwe="_setupWarning_rdp6l_593",Gwe="_setupInfoIcon_rdp6l_605",Hwe="_setupInfoTitle_rdp6l_629",Wwe="_setupInfoText_rdp6l_639",et={setupGrid:iwe,setupLeft:awe,setupRight:owe,card:lwe,cardHeader:cwe,cardKicker:dwe,cardTitle:uwe,cardText:hwe,toggleGroup:mwe,toggleButton:pwe,toggleButtonActive:gwe,modeHint:fwe,formGrid:vwe,formField:xwe,formLabel:ywe,input:bwe,suggestions:_we,suggestionBtn:wwe,suggestionName:jwe,suggestionMeta:Swe,partnerActions:Nwe,primaryAction:kwe,secondaryAction:Cwe,partnerList:Twe,partnerRow:Iwe,partnerName:Ewe,partnerMeta:Awe,removeButton:Pwe,emptyState:Rwe,previewBlock:Lwe,previewLabel:Dwe,previewValue:Mwe,previewCard:Fwe,previewTitle:Bwe,previewMeta:$we,previewList:Owe,previewItem:Vwe,setupInfo:Uwe,setupWarning:zwe,setupInfoIcon:Gwe,setupInfoTitle:Hwe,setupInfoText:Wwe};function Kwe({setupState:t,onChangeMode:e,onChangeBaseGuild:n,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var I,R,P,N,x,w,L,j,S,C;const[a,o]=q.useState(()=>{var M,T,F,D;return{name:(T=(M=t.baseGuild)==null?void 0:M.name)!=null?T:"",server:(D=(F=t.baseGuild)==null?void 0:F.server)!=null?D:""}}),[c,u]=q.useState({id:void 0,name:"",server:""}),h=lh(a.name,250),m=lh(c.name,250),g=yI(h,a.server||"all"),v=yI(m,c.server||"all"),b=!!((R=(I=t.baseGuild)==null?void 0:I.name)!=null&&R.trim()&&((N=(P=t.baseGuild)==null?void 0:P.server)!=null&&N.trim())),_=t.partnerGuilds.length>0;q.useEffect(()=>{var T,F,D,V;const M={name:(F=(T=t.baseGuild)==null?void 0:T.name)!=null?F:"",server:(V=(D=t.baseGuild)==null?void 0:D.server)!=null?V:""};(M.name!==a.name||M.server!==a.server)&&o(M)},[(x=t.baseGuild)==null?void 0:x.name,(w=t.baseGuild)==null?void 0:w.server]);const k=()=>{!c.name.trim()||!c.server.trim()||(r(c),u({id:void 0,name:"",server:""}))};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:et.setupGrid,children:[s.jsxs("div",{className:et.setupLeft,children:[s.jsxs("div",{className:et.card,children:[s.jsx("div",{className:et.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:et.cardKicker,children:"Modus"}),s.jsx("h3",{className:et.cardTitle,children:"Scan-based oder manuell"}),s.jsx("p",{className:et.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),s.jsxs("div",{className:et.toggleGroup,role:"group","aria-label":"Setup Modus",children:[s.jsx("button",{type:"button",className:`${et.toggleButton} ${t.mode==="scan"?et.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),s.jsx("button",{type:"button",className:`${et.toggleButton} ${t.mode==="manual"?et.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),s.jsx("p",{className:et.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),s.jsxs("div",{className:et.card,children:[s.jsx("div",{className:et.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:et.cardKicker,children:"Base Guild"}),s.jsx("h3",{className:et.cardTitle,children:"Stammdaten"}),s.jsx("p",{className:et.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),s.jsxs("div",{className:et.formGrid,children:[s.jsxs("label",{className:et.formField,children:[s.jsx("span",{className:et.formLabel,children:"Guild name"}),s.jsx("input",{type:"text",className:et.input,value:a.name,onChange:M=>{const T=M.target.value;o(F=>({...F,name:T}))},onBlur:()=>n({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&s.jsx("div",{className:et.suggestions,children:g.map(M=>s.jsxs("button",{type:"button",className:et.suggestionBtn,onClick:()=>{o({name:M.name,server:M.server}),n({id:M.id,name:M.name,server:M.server})},children:[s.jsx("span",{className:et.suggestionName,children:M.name}),s.jsx("span",{className:et.suggestionMeta,children:M.server})]},M.id))})]}),s.jsxs("label",{className:et.formField,children:[s.jsx("span",{className:et.formLabel,children:"Server"}),s.jsx("input",{type:"text",className:et.input,value:a.server,onChange:M=>{const T=M.target.value;o(F=>({...F,server:T}))},onBlur:()=>n({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),s.jsxs("div",{className:et.card,children:[s.jsx("div",{className:et.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:et.cardKicker,children:"Partner Guilds"}),s.jsx("h3",{className:et.cardTitle,children:"Partner hinzufuegen"}),s.jsx("p",{className:et.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),s.jsxs("div",{className:et.formGrid,children:[s.jsxs("label",{className:et.formField,children:[s.jsx("span",{className:et.formLabel,children:"Name"}),s.jsx("input",{type:"text",className:et.input,value:c.name,onChange:M=>u(T=>({...T,name:M.target.value})),placeholder:"z.B. Nova Alliance"}),v.length>0&&s.jsx("div",{className:et.suggestions,children:v.map(M=>s.jsxs("button",{type:"button",className:et.suggestionBtn,onClick:()=>u({id:M.id,name:M.name,server:M.server}),children:[s.jsx("span",{className:et.suggestionName,children:M.name}),s.jsx("span",{className:et.suggestionMeta,children:M.server})]},M.id))})]}),s.jsxs("label",{className:et.formField,children:[s.jsx("span",{className:et.formLabel,children:"Server"}),s.jsx("input",{type:"text",className:et.input,value:c.server,onChange:M=>u(T=>({...T,server:M.target.value})),placeholder:"z.B. EU-02"})]})]}),s.jsxs("div",{className:et.partnerActions,children:[s.jsx("button",{type:"button",className:et.primaryAction,onClick:k,children:"Add partner guild"}),s.jsx("button",{type:"button",className:et.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),s.jsx("div",{className:et.partnerList,children:t.partnerGuilds.length===0?s.jsx("div",{className:et.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(M=>s.jsxs("div",{className:et.partnerRow,children:[s.jsxs("div",{children:[s.jsx("div",{className:et.partnerName,children:M.name||"Unbenannt"}),s.jsx("div",{className:et.partnerMeta,children:M.server||"Server n/a"})]}),s.jsx("button",{type:"button",className:et.removeButton,onClick:()=>i(M.id),children:"Remove"})]},M.id))})]})]}),s.jsx("aside",{className:et.setupRight,children:s.jsxs("div",{className:et.card,children:[s.jsx("div",{className:et.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:et.cardKicker,children:"Preview"}),s.jsx("h3",{className:et.cardTitle,children:"Uebersicht"}),s.jsx("p",{className:et.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),s.jsxs("div",{className:et.previewBlock,children:[s.jsx("div",{className:et.previewLabel,children:"Modus"}),s.jsx("div",{className:et.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),s.jsxs("div",{className:et.previewBlock,children:[s.jsx("div",{className:et.previewLabel,children:"Base Guild"}),s.jsx("div",{className:et.previewCard,children:(L=t.baseGuild)!=null&&L.name||(j=t.baseGuild)!=null&&j.server?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:et.previewTitle,children:((S=t.baseGuild)==null?void 0:S.name)||"Unbenannt"}),s.jsx("div",{className:et.previewMeta,children:((C=t.baseGuild)==null?void 0:C.server)||"Server n/a"})]}):s.jsx("div",{className:et.emptyState,children:"No base guild selected yet."})})]}),s.jsxs("div",{className:et.previewBlock,children:[s.jsx("div",{className:et.previewLabel,children:"Partner Guilds"}),s.jsx("div",{className:et.previewList,children:t.partnerGuilds.length===0?s.jsx("div",{className:et.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(M=>s.jsxs("div",{className:et.previewItem,children:[s.jsx("div",{className:et.previewTitle,children:M.name||"Unbenannt"}),s.jsx("div",{className:et.previewMeta,children:M.server||"Server n/a"})]},M.id))})]})]})})]}),b?_?null:s.jsxs("div",{className:et.setupInfo,role:"status","aria-live":"polite",children:[s.jsx("span",{className:et.setupInfoIcon,"aria-hidden":!0,children:"i"}),s.jsxs("div",{children:[s.jsx("div",{className:et.setupInfoTitle,children:"Optional: add partner guilds."}),s.jsx("p",{className:et.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):s.jsxs("div",{className:`${et.setupInfo} ${et.setupWarning}`,role:"status","aria-live":"polite",children:[s.jsx("span",{className:et.setupInfoIcon,"aria-hidden":!0,children:"i"}),s.jsxs("div",{children:[s.jsx("div",{className:et.setupInfoTitle,children:"No base guild selected yet."}),s.jsx("p",{className:et.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function yI(t,e){const[n,r]=q.useState([]);return q.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function o(){const c=Bn("FusionSetup:guildSearch");try{const u=xh(Tt,"latest"),h=await wn(c,{path:"guilds/latest (collectionGroup)"},()=>_n(En(u,Qi("nameFold"),oc(i),lc(i+""),rr(12)))),m=await wn(c,{path:"guilds/latest (collectionGroup)"},()=>_n(En(u,Kr("nameNgrams","array-contains",i),rr(12)))),g=new Set,v=[],b=_=>{var L,j,S,C,M,T,F,D,V,z;const k=_.data(),R=(L=_.ref.parent)==null?void 0:L.parent;if(((j=R==null?void 0:R.parent)==null?void 0:j.id)!=="guilds")return;const N=(C=(S=R==null?void 0:R.id)!=null?S:k.guildIdentifier)!=null?C:_.id;if(!N||g.has(N))return;const x=(F=(T=k.server)!=null?T:(M=k.values)==null?void 0:M.Server)!=null?F:"Unknown";if(e!=="all"&&x!==e)return;const w=(z=(V=k.name)!=null?V:(D=k.values)==null?void 0:D.Name)!=null?z:"Unbekannte Gilde";g.add(N),v.push({id:N,name:w,server:x})};h.forEach(b),m.forEach(b),a||(v.sort((_,k)=>_.name.localeCompare(k.name)),r(v))}catch(u){console.error("[FusionPlanner] guild search failed",u),a||r([])}finally{un(c)}}return o(),()=>{a=!0}},[t,e]),n}const qwe="_membersContainer_1ctw8_1",Qwe="_scenarioSwitcher_1ctw8_13",Ywe="_scenarioButton_1ctw8_25",Xwe="_scenarioButtonActive_1ctw8_63",Jwe="_scenarioButtonName_1ctw8_75",Zwe="_scenarioButtonDesc_1ctw8_83",eje="_setupInfo_1ctw8_93",tje="_setupInfoHeader_1ctw8_113",sje="_setupInfoTitle_1ctw8_127",nje="_setupInfoMode_1ctw8_139",rje="_setupInfoRow_1ctw8_163",ije="_setupInfoLabel_1ctw8_175",aje="_setupInfoValue_1ctw8_189",oje="_setupInfoMeta_1ctw8_199",lje="_setupInfoPartners_1ctw8_209",cje="_setupInfoBadge_1ctw8_221",dje="_setupInfoEmpty_1ctw8_245",uje="_membersSummary_1ctw8_255",hje="_membersSummaryItem_1ctw8_275",mje="_membersSummaryLabel_1ctw8_287",pje="_membersSummaryValue_1ctw8_301",gje="_maxSlotsInput_1ctw8_313",fje="_membersTable_1ctw8_331",vje="_membersRow_1ctw8_349",xje="_membersHead_1ctw8_375",yje="_membersCell_1ctw8_385",bje="_memberName_1ctw8_395",_je="_memberBadge_1ctw8_403",wje="_assignmentCell_1ctw8_427",jje="_assignmentBadge_1ctw8_439",Sje="_assignmentBadgeMain_1ctw8_463",Nje="_assignmentBadgePartner_1ctw8_475",kje="_assignmentBadgeWatch_1ctw8_487",Cje="_assignmentBadgeIdle_1ctw8_499",Tje="_assignmentActions_1ctw8_507",Ije="_assignmentButton_1ctw8_519",Eje="_assignmentButtonActive_1ctw8_551",Aje="_decisionGroup_1ctw8_563",Pje="_decisionButton_1ctw8_575",Rje="_decisionButtonActive_1ctw8_607",Lje="_emptyWrap_1ctw8_619",Dje="_emptyTitle_1ctw8_633",Mje="_emptyText_1ctw8_641",Fje="_contextMenuBackdrop_1ctw8_651",Bje="_contextMenu_1ctw8_651",$je="_contextMenuItem_1ctw8_693",Oje="_partnerPickerCell_1ctw8_725",Vje="_partnerLabel_1ctw8_737",Uje="_partnerSelect_1ctw8_751",Qe={membersContainer:qwe,scenarioSwitcher:Qwe,scenarioButton:Ywe,scenarioButtonActive:Xwe,scenarioButtonName:Jwe,scenarioButtonDesc:Zwe,setupInfo:eje,setupInfoHeader:tje,setupInfoTitle:sje,setupInfoMode:nje,setupInfoRow:rje,setupInfoLabel:ije,setupInfoValue:aje,setupInfoMeta:oje,setupInfoPartners:lje,setupInfoBadge:cje,setupInfoEmpty:dje,membersSummary:uje,membersSummaryItem:hje,membersSummaryLabel:mje,membersSummaryValue:pje,maxSlotsInput:gje,membersTable:fje,membersRow:vje,membersHead:xje,membersCell:yje,memberName:bje,memberBadge:_je,assignmentCell:wje,assignmentBadge:jje,assignmentBadgeMain:Sje,assignmentBadgePartner:Nje,assignmentBadgeWatch:kje,assignmentBadgeIdle:Cje,assignmentActions:Tje,assignmentButton:Ije,assignmentButtonActive:Eje,decisionGroup:Aje,decisionButton:Pje,decisionButtonActive:Rje,emptyWrap:Lje,emptyTitle:Dje,emptyText:Mje,contextMenuBackdrop:Fje,contextMenu:Bje,contextMenuItem:$je,partnerPickerCell:Oje,partnerLabel:Vje,partnerSelect:Uje};function zje({members:t,scenario:e,onChangeScenarioDecision:n,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var j,S,C,M,T,F;const[o,c]=q.useState(null),u=q.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map((D,V)=>({id:D.id,label:D.name||`Partner ${V+1}`})):[{id:"partner-default",label:"Partner guild"}],m=q.useCallback((D,V)=>{c({memberId:D,...V})},[]),g=q.useCallback(()=>{c(null)},[]),v=q.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),b=q.useCallback((D,V,z)=>{v(),u.current=window.setTimeout(()=>{m(D,{x:V,y:z})},550)},[v,m]);q.useEffect(()=>()=>v(),[v]);const _=q.useCallback((D,V,z)=>{if(V==="main")n(D,"take"),r(D,"main");else if(V==="partner"){const K=z?`partner:${z}`:"partner";n(D,"take"),r(D,K)}else n(D,"bench"),r(D,"none");g()},[g,n,r]),k=q.useCallback((D,V)=>{n(D,V),V==="take"?r(D,"main"):r(D,"none")},[n,r]);if(!!!((S=(j=a.baseGuild)==null?void 0:j.name)!=null&&S.trim()&&((M=(C=a.baseGuild)==null?void 0:C.server)!=null&&M.trim())))return s.jsxs("div",{className:Qe.emptyWrap,children:[s.jsx("h3",{className:Qe.emptyTitle,children:"No base guild configured"}),s.jsx("p",{className:Qe.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return s.jsxs("div",{className:Qe.emptyWrap,children:[s.jsx("h3",{className:Qe.emptyTitle,children:"Members & Slots"}),s.jsx("p",{className:Qe.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return s.jsxs("div",{className:Qe.emptyWrap,children:[s.jsx("h3",{className:Qe.emptyTitle,children:"No members found"}),s.jsx("p",{className:Qe.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const R=(T=e.decisions)!=null?T:{},P=(F=e.targetGuildAssignments)!=null?F:{},N=t.filter(D=>R[D.id]==="take").length,x=t.filter(D=>R[D.id]==="bench").length,w=t.filter(D=>R[D.id]==="drop").length,L=Math.max(0,e.maxSlots-e.reservedSlots-N);return s.jsxs("div",{className:Qe.membersContainer,children:[s.jsx("div",{className:Qe.scenarioSwitcher,children:s.jsxs("div",{className:`${Qe.scenarioButton} ${Qe.scenarioButtonActive}`,children:[s.jsx("span",{className:Qe.scenarioButtonName,children:e.name}),e.description?s.jsx("span",{className:Qe.scenarioButtonDesc,children:e.description}):null]})}),s.jsxs("div",{className:Qe.setupInfo,children:[s.jsxs("div",{className:Qe.setupInfoHeader,children:[s.jsx("div",{className:Qe.setupInfoTitle,children:"Planning for"}),s.jsx("span",{className:Qe.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?s.jsxs("div",{className:Qe.setupInfoRow,children:[s.jsx("span",{className:Qe.setupInfoLabel,children:"Base Guild"}),s.jsxs("span",{className:Qe.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",s.jsxs("span",{className:Qe.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):s.jsx("div",{className:Qe.setupInfoEmpty,children:"No base guild selected in Setup tab."}),s.jsxs("div",{className:Qe.setupInfoRow,children:[s.jsx("span",{className:Qe.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?s.jsx("div",{className:Qe.setupInfoPartners,children:a.partnerGuilds.map(D=>s.jsxs("span",{className:Qe.setupInfoBadge,children:[D.name||"Unbenannt",s.jsxs("span",{className:Qe.setupInfoMeta,children:[" (",D.server||"Server n/a",")"]})]},D.id))}):s.jsx("span",{className:Qe.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),s.jsxs("div",{className:Qe.membersSummary,children:[s.jsxs("div",{className:Qe.membersSummaryItem,children:[s.jsx("div",{className:Qe.membersSummaryLabel,children:"Selected"}),s.jsxs("div",{className:Qe.membersSummaryValue,children:[N," / ",e.maxSlots]})]}),s.jsxs("div",{className:Qe.membersSummaryItem,children:[s.jsx("div",{className:Qe.membersSummaryLabel,children:"Free slots"}),s.jsx("div",{className:Qe.membersSummaryValue,children:L})]}),s.jsxs("div",{className:Qe.membersSummaryItem,children:[s.jsx("div",{className:Qe.membersSummaryLabel,children:"Bench"}),s.jsx("div",{className:Qe.membersSummaryValue,children:x})]}),s.jsxs("div",{className:Qe.membersSummaryItem,children:[s.jsx("div",{className:Qe.membersSummaryLabel,children:"Drop"}),s.jsx("div",{className:Qe.membersSummaryValue,children:w})]}),s.jsxs("div",{className:Qe.membersSummaryItem,children:[s.jsx("div",{className:Qe.membersSummaryLabel,children:"Reserved"}),s.jsx("div",{className:Qe.membersSummaryValue,children:e.reservedSlots})]}),s.jsxs("div",{className:Qe.membersSummaryItem,children:[s.jsx("div",{className:Qe.membersSummaryLabel,children:"Max slots"}),s.jsx("input",{type:"number",className:Qe.maxSlotsInput,value:e.maxSlots,min:0,onChange:D=>i(Number(D.target.value))})]})]}),s.jsxs("div",{className:Qe.membersTable,children:[s.jsxs("div",{className:`${Qe.membersRow} ${Qe.membersHead}`,children:[s.jsx("div",{className:Qe.membersCell,children:"Name"}),s.jsx("div",{className:Qe.membersCell,children:"Level"}),s.jsx("div",{className:Qe.membersCell,children:"Guild"}),s.jsx("div",{className:Qe.membersCell,children:"Class"}),s.jsx("div",{className:Qe.membersCell,children:"Plan"}),s.jsx("div",{className:Qe.membersCell,children:"Decision"}),s.jsx("div",{className:Qe.membersCell,children:"Partner"})]}),t.map(D=>{var re,G,X,Y,se,ce,_e,Ae,ee;const V=(re=R[D.id])!=null?re:"undecided",z=(G=P[D.id])!=null?G:"none",K=z&&z.toString().startsWith("partner:")?z.split(":")[1]:null,W=(ce=(X=h.find(le=>le.id===K))==null?void 0:X.label)!=null?ce:z==="partner"?(se=(Y=h[0])==null?void 0:Y.label)!=null?se:"Partner guild":null,U=V==="take"&&z==="main"?"main":V==="take"&&(z==="partner"||K)?"partner":V==="bench"?"watch":"unassigned",J=U==="main"?"Main guild":U==="partner"?W||"Partner guild":U==="watch"?"Watchlist":"Not planned";return s.jsxs("div",{className:Qe.membersRow,onContextMenu:le=>{le.preventDefault(),m(D.id,{x:le.clientX,y:le.clientY})},onTouchStart:le=>{const te=le.touches[0];te&&b(D.id,te.clientX,te.clientY)},onTouchEnd:v,onTouchCancel:v,children:[s.jsx("div",{className:Qe.membersCell,children:s.jsx("div",{className:Qe.memberName,children:D.name})}),s.jsx("div",{className:Qe.membersCell,children:s.jsxs("span",{className:Qe.memberBadge,children:["Lvl ",D.level]})}),s.jsx("div",{className:Qe.membersCell,children:D.guildName}),s.jsx("div",{className:Qe.membersCell,children:(Ae=(_e=D.className)!=null?_e:D.class)!=null?Ae:"?"}),s.jsxs("div",{className:`${Qe.membersCell} ${Qe.assignmentCell}`,children:[s.jsx("span",{className:`${Qe.assignmentBadge} ${U==="main"?Qe.assignmentBadgeMain:U==="partner"?Qe.assignmentBadgePartner:U==="watch"?Qe.assignmentBadgeWatch:Qe.assignmentBadgeIdle}`,children:J}),s.jsxs("div",{className:Qe.assignmentActions,role:"group","aria-label":"Target guild selection",children:[s.jsx("button",{type:"button",className:`${Qe.assignmentButton} ${U==="main"?Qe.assignmentButtonActive:""}`,onClick:()=>_(D.id,"main"),children:"Main"}),s.jsx("button",{type:"button",className:`${Qe.assignmentButton} ${U==="watch"?Qe.assignmentButtonActive:""}`,onClick:()=>_(D.id,"watch"),children:"Watch"}),s.jsx("button",{type:"button",className:`${Qe.assignmentButton} ${U==="partner"?Qe.assignmentButtonActive:""}`,onClick:()=>_(D.id,"partner"),children:"Partner"})]})]}),s.jsx("div",{className:Qe.membersCell,children:s.jsx("div",{className:Qe.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(le=>s.jsx("button",{type:"button",className:`${Qe.decisionButton} ${V===le?Qe.decisionButtonActive:""}`,onClick:()=>k(D.id,le),children:le==="take"?"Take":le==="bench"?"Bench":le==="drop"?"Drop":"?"},le))})}),s.jsxs("div",{className:`${Qe.membersCell} ${Qe.partnerPickerCell}`,children:[s.jsx("label",{className:Qe.partnerLabel,htmlFor:`partner-select-${D.id}`,children:"Partner"}),s.jsx("select",{id:`partner-select-${D.id}`,className:Qe.partnerSelect,value:K!=null?K:(ee=h[0])==null?void 0:ee.id,onChange:le=>_(D.id,"partner",le.target.value),children:h.map(le=>s.jsx("option",{value:le.id,children:le.label},le.id))})]})]},D.id)})]}),o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Qe.contextMenuBackdrop,onClick:g}),s.jsxs("div",{className:Qe.contextMenu,style:{top:o.y,left:o.x},children:[s.jsx("button",{type:"button",className:Qe.contextMenuItem,onClick:()=>_(o.memberId,"main"),children:"Move to Main guild"}),s.jsx("button",{type:"button",className:Qe.contextMenuItem,onClick:()=>_(o.memberId,"watch"),children:"Move to Watchlist"}),h.map(D=>s.jsxs("button",{type:"button",className:Qe.contextMenuItem,onClick:()=>_(o.memberId,"partner",D.id),children:["Move to ",D.label]},D.id))]})]}):null]})}const Gje="_overview_6ytw3_1",Hje="_contextBox_6ytw3_15",Wje="_contextKicker_6ytw3_35",Kje="_contextTitle_6ytw3_51",qje="_contextText_6ytw3_61",Qje="_contextDetails_6ytw3_71",Yje="_detailItem_6ytw3_85",Xje="_detailLabel_6ytw3_99",Jje="_detailValue_6ytw3_113",Zje="_kpiGrid_6ytw3_121",e2e="_kpiCard_6ytw3_133",t2e="_kpiLabel_6ytw3_153",s2e="_kpiValue_6ytw3_167",n2e="_columnsWrapper_6ytw3_177",r2e="_column_6ytw3_177",i2e="_columnDropTarget_6ytw3_213",a2e="_columnHeader_6ytw3_223",o2e="_columnKicker_6ytw3_235",l2e="_columnTitle_6ytw3_251",c2e="_columnCount_6ytw3_259",d2e="_columnBody_6ytw3_281",u2e="_memberCard_6ytw3_293",h2e="_memberTop_6ytw3_337",m2e="_memberName_6ytw3_349",p2e="_memberMeta_6ytw3_357",g2e="_memberBadge_6ytw3_369",f2e="_memberBottom_6ytw3_395",v2e="_memberGuild_6ytw3_409",x2e="_memberServer_6ytw3_419",y2e="_memberActions_6ytw3_427",b2e="_emptyList_6ytw3_469",_2e="_emptyWrap_6ytw3_487",w2e="_emptyTitle_6ytw3_501",j2e="_emptyText_6ytw3_509",S2e="_addPartnerCard_6ytw3_519",N2e="_contextMenuBackdrop_6ytw3_559",k2e="_contextMenu_6ytw3_559",C2e="_contextMenuItem_6ytw3_601",Nt={overview:Gje,contextBox:Hje,contextKicker:Wje,contextTitle:Kje,contextText:qje,contextDetails:Qje,detailItem:Yje,detailLabel:Xje,detailValue:Jje,kpiGrid:Zje,kpiCard:e2e,kpiLabel:t2e,kpiValue:s2e,columnsWrapper:n2e,column:r2e,columnDropTarget:i2e,columnHeader:a2e,columnKicker:o2e,columnTitle:l2e,columnCount:c2e,columnBody:d2e,memberCard:u2e,memberTop:h2e,memberName:m2e,memberMeta:p2e,memberBadge:g2e,memberBottom:f2e,memberGuild:v2e,memberServer:x2e,memberActions:y2e,emptyList:b2e,emptyWrap:_2e,emptyTitle:w2e,emptyText:j2e,addPartnerCard:S2e,contextMenuBackdrop:N2e,contextMenu:k2e,contextMenuItem:C2e};function T2e({members:t,scenario:e,setupState:n,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var z,K,W;const o=(z=e==null?void 0:e.decisions)!=null?z:{},c=(K=e==null?void 0:e.targetGuildAssignments)!=null?K:{},u=n.partnerGuilds.length>0?n.partnerGuilds.map((U,J)=>({id:U.id,label:U.name||`Partner ${J+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(U=>o[U.id]==="take"&&c[U.id]==="main"),m=t.filter(U=>o[U.id]==="bench"),g=u.reduce((U,J)=>(U[J.id]=t.filter(re=>{const G=c[re.id];return o[re.id]==="take"&&(G===`partner:${J.id}`||G==="partner")}),U),{}),v=t.filter(U=>!h.includes(U)&&!m.includes(U)&&!Object.values(g).some(J=>J.includes(U))),[b,_]=q.useState(null),[k,I]=q.useState(null),R=q.useRef(null),P=t.length,N=h.length,x=m.length,w=Object.values(g).reduce((U,J)=>U+J.length,0),L=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-N-w):0,j=q.useCallback((U,J,re)=>{U&&(J==="main"?(r(U,"take"),i(U,"main")):J==="partner"?(r(U,"take"),i(U,re?`partner:${re}`:"partner")):J==="unassigned"?(r(U,"undecided"),i(U,"none")):(r(U,"bench"),i(U,"none")),I(null))},[r,i]),S=q.useCallback((U,J)=>re=>{re.preventDefault();const G=re.dataTransfer.getData("text/plain");G&&j(G,U,J),_(null)},[j]),C=q.useCallback(U=>J=>{J.preventDefault(),_(U)},[]),M=q.useCallback(()=>_(null),[]),T=q.useCallback((U,J)=>{I({memberId:U,...J})},[]),F=q.useCallback(()=>{R.current!==null&&(window.clearTimeout(R.current),R.current=null)},[]),D=q.useCallback((U,J,re)=>{F(),R.current=window.setTimeout(()=>{T(U,{x:J,y:re})},550)},[F,T]);if(q.useEffect(()=>()=>F(),[F]),!e)return s.jsxs("div",{className:Nt.emptyWrap,children:[s.jsx("h3",{className:Nt.emptyTitle,children:"Overview"}),s.jsx("p",{className:Nt.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return s.jsxs("div",{className:Nt.emptyWrap,children:[s.jsx("h3",{className:Nt.emptyTitle,children:"No members loaded"}),s.jsx("p",{className:Nt.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const V=(U,J,re,G,X)=>s.jsxs("div",{className:`${Nt.column} ${b===U?Nt.columnDropTarget:""}`,onDragOver:C(U),onDragEnter:C(U),onDragLeave:M,onDrop:S(U,X),children:[s.jsxs("div",{className:Nt.columnHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Nt.columnKicker,children:re}),s.jsx("h4",{className:Nt.columnTitle,children:J})]}),s.jsx("span",{className:Nt.columnCount,children:G.length})]}),s.jsx("div",{className:Nt.columnBody,children:G.length?G.map(Y=>{var se,ce,_e,Ae;return s.jsxs("div",{className:Nt.memberCard,draggable:!0,onDragStart:ee=>ee.dataTransfer.setData("text/plain",Y.id),onContextMenu:ee=>{ee.preventDefault(),T(Y.id,{x:ee.clientX,y:ee.clientY})},onTouchStart:ee=>{const le=ee.touches[0];le&&D(Y.id,le.clientX,le.clientY)},onTouchEnd:F,onTouchCancel:F,children:[s.jsxs("div",{className:Nt.memberTop,children:[s.jsxs("div",{children:[s.jsx("div",{className:Nt.memberName,children:Y.name}),s.jsxs("p",{className:Nt.memberMeta,children:[(ce=(se=Y.className)!=null?se:Y.class)!=null?ce:"Unknown","  ",(_e=Y.role)!=null?_e:"Unknown"]})]}),s.jsxs("span",{className:Nt.memberBadge,children:["Lvl ",(Ae=Y.level)!=null?Ae:"?"]})]}),s.jsxs("div",{className:Nt.memberBottom,children:[s.jsxs("span",{className:Nt.memberGuild,children:[Y.guildName," ",s.jsxs("span",{className:Nt.memberServer,children:["(",Y.server||"Server n/a",")"]})]}),s.jsxs("div",{className:Nt.memberActions,children:[s.jsx("button",{type:"button",onClick:()=>j(Y.id,"main"),children:"Main"}),s.jsx("button",{type:"button",onClick:()=>j(Y.id,"watch"),children:"Watch"}),s.jsx("button",{type:"button",onClick:()=>j(Y.id,"partner"),children:"Partner"})]})]})]},Y.id)}):s.jsx("div",{className:Nt.emptyList,children:"No players in this list yet."})})]});return s.jsxs("div",{className:Nt.overview,children:[s.jsxs("div",{className:Nt.contextBox,children:[s.jsxs("div",{children:[s.jsx("p",{className:Nt.contextKicker,children:"Setup"}),s.jsx("h3",{className:Nt.contextTitle,children:"Fusion Overview"}),s.jsx("p",{className:Nt.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),s.jsxs("div",{className:Nt.contextDetails,children:[s.jsxs("div",{className:Nt.detailItem,children:[s.jsx("span",{className:Nt.detailLabel,children:"Base Guild"}),s.jsx("strong",{className:Nt.detailValue,children:((W=n.baseGuild)==null?void 0:W.name)||"Unbenannt"})]}),s.jsxs("div",{className:Nt.detailItem,children:[s.jsx("span",{className:Nt.detailLabel,children:"Partner Guilds"}),s.jsx("strong",{className:Nt.detailValue,children:n.partnerGuilds.length})]}),s.jsxs("div",{className:Nt.detailItem,children:[s.jsx("span",{className:Nt.detailLabel,children:"Max Slots"}),s.jsx("strong",{className:Nt.detailValue,children:e.maxSlots})]})]})]}),s.jsxs("div",{className:Nt.kpiGrid,children:[s.jsxs("div",{className:Nt.kpiCard,children:[s.jsx("span",{className:Nt.kpiLabel,children:"Total players"}),s.jsx("strong",{className:Nt.kpiValue,children:P})]}),s.jsxs("div",{className:Nt.kpiCard,children:[s.jsx("span",{className:Nt.kpiLabel,children:"Main guild"}),s.jsx("strong",{className:Nt.kpiValue,children:N})]}),s.jsxs("div",{className:Nt.kpiCard,children:[s.jsx("span",{className:Nt.kpiLabel,children:"Watchlist"}),s.jsx("strong",{className:Nt.kpiValue,children:x})]}),s.jsxs("div",{className:Nt.kpiCard,children:[s.jsx("span",{className:Nt.kpiLabel,children:"Partner guild"}),s.jsx("strong",{className:Nt.kpiValue,children:w})]}),s.jsxs("div",{className:Nt.kpiCard,children:[s.jsx("span",{className:Nt.kpiLabel,children:"Free slots"}),s.jsx("strong",{className:Nt.kpiValue,children:L})]})]}),s.jsxs("div",{className:Nt.columnsWrapper,children:[V("unassigned","Unassigned","Noch ohne Planung",v),V("main","Main guild","Take & Assign main",h),V("watch","Watchlist","Bench for review",m),u.map(U=>{var J;return V("partner",U.label,"Take & Assign partner",(J=g[U.id])!=null?J:[],U.id)}),s.jsx("button",{type:"button",className:Nt.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Nt.contextMenuBackdrop,onClick:()=>I(null)}),s.jsxs("div",{className:Nt.contextMenu,style:{top:k.y,left:k.x},children:[s.jsx("button",{type:"button",className:Nt.contextMenuItem,onClick:()=>j(k.memberId,"main"),children:"Move to Main guild"}),s.jsx("button",{type:"button",className:Nt.contextMenuItem,onClick:()=>j(k.memberId,"watch"),children:"Move to Watchlist"}),u.map(U=>s.jsxs("button",{type:"button",className:Nt.contextMenuItem,onClick:()=>j(k.memberId,"partner",U.id),children:["Move to ",U.label]},U.id))]})]}):null]})}const I2e="_scenariosTab_3v4iw_1",E2e="_scenariosHeader_3v4iw_13",A2e="_scenariosTitle_3v4iw_35",P2e="_scenariosText_3v4iw_45",R2e="_scenarioInfo_3v4iw_57",L2e="_headerActions_3v4iw_71",D2e="_createButton_3v4iw_81",M2e="_scenarioList_3v4iw_115",F2e="_scenarioCard_3v4iw_127",B2e="_scenarioCardActive_3v4iw_147",$2e="_scenarioCardTop_3v4iw_157",O2e="_cardKicker_3v4iw_169",V2e="_cardTitle_3v4iw_185",U2e="_cardText_3v4iw_197",z2e="_scenarioActiveBadge_3v4iw_209",G2e="_scenarioMeta_3v4iw_231",H2e="_scenarioMetaLabel_3v4iw_243",W2e="_scenarioMetaValue_3v4iw_259",K2e="_scenarioStats_3v4iw_269",q2e="_scenarioStatItem_3v4iw_281",Q2e="_scenarioStatLabel_3v4iw_295",Y2e="_scenarioStatValue_3v4iw_311",X2e="_scenarioActions_3v4iw_321",J2e="_scenarioActionButton_3v4iw_337",Z2e="_scenarioActionActive_3v4iw_367",eSe="_scenarioActionGroup_3v4iw_377",tSe="_secondaryActionButton_3v4iw_389",sSe="_deleteActionButton_3v4iw_391",nSe="_deleteActionDisabled_3v4iw_443",ls={scenariosTab:I2e,scenariosHeader:E2e,scenariosTitle:A2e,scenariosText:P2e,scenarioInfo:R2e,headerActions:L2e,createButton:D2e,scenarioList:M2e,scenarioCard:F2e,scenarioCardActive:B2e,scenarioCardTop:$2e,cardKicker:O2e,cardTitle:V2e,cardText:U2e,scenarioActiveBadge:z2e,scenarioMeta:G2e,scenarioMetaLabel:H2e,scenarioMetaValue:W2e,scenarioStats:K2e,scenarioStatItem:q2e,scenarioStatLabel:Q2e,scenarioStatValue:Y2e,scenarioActions:X2e,scenarioActionButton:J2e,scenarioActionActive:Z2e,scenarioActionGroup:eSe,secondaryActionButton:tSe,deleteActionButton:sSe,deleteActionDisabled:nSe};function rSe({scenarios:t,activeScenarioId:e,onSetActiveScenario:n,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:o}){const c=q.useCallback(m=>{const g=Object.values(m.decisions),v=g.filter(I=>I==="take").length,b=g.filter(I=>I==="bench").length,_=g.filter(I=>I==="drop").length,k=Math.max(0,m.maxSlots-m.reservedSlots-v);return{selected:v,bench:b,drop:_,free:k}},[]),u=m=>{const g=window.prompt("Neuer Szenario-Name",m.name);g!==null&&a(m.id,g)},h=m=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&o(m.id)};return s.jsxs("div",{className:ls.scenariosTab,children:[s.jsxs("div",{className:ls.scenariosHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:ls.cardKicker,children:"Scenarios"}),s.jsx("h3",{className:ls.scenariosTitle,children:"Fusion Plans verwalten"}),s.jsx("p",{className:ls.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),s.jsx("div",{className:ls.headerActions,children:s.jsx("button",{type:"button",className:ls.createButton,onClick:r,children:"Neues Szenario"})})]}),s.jsx("p",{className:ls.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),s.jsx("div",{className:ls.scenarioList,children:t.map(m=>{const g=c(m),v=m.id===e,b=t.length<=1;return s.jsxs("article",{className:`${ls.scenarioCard} ${v?ls.scenarioCardActive:""}`,children:[s.jsxs("div",{className:ls.scenarioCardTop,children:[s.jsxs("div",{children:[s.jsx("p",{className:ls.cardKicker,children:"Scenario"}),s.jsx("h3",{className:ls.cardTitle,children:m.name}),m.description?s.jsx("p",{className:ls.cardText,children:m.description}):null]}),v?s.jsx("span",{className:ls.scenarioActiveBadge,children:"Active"}):null]}),s.jsxs("div",{className:ls.scenarioMeta,children:[s.jsxs("div",{children:[s.jsx("span",{className:ls.scenarioMetaLabel,children:"Max slots"}),s.jsx("span",{className:ls.scenarioMetaValue,children:m.maxSlots})]}),s.jsxs("div",{children:[s.jsx("span",{className:ls.scenarioMetaLabel,children:"Reserved"}),s.jsx("span",{className:ls.scenarioMetaValue,children:m.reservedSlots})]})]}),s.jsxs("div",{className:ls.scenarioStats,children:[s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Selected"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.selected})]}),s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Free"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.free})]}),s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Bench"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.bench})]}),s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Drop"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.drop})]})]}),s.jsxs("div",{className:ls.scenarioActions,children:[s.jsx("button",{type:"button",className:`${ls.scenarioActionButton} ${v?ls.scenarioActionActive:""}`,onClick:()=>n(m.id),children:"Set active"}),s.jsxs("div",{className:ls.scenarioActionGroup,children:[s.jsx("button",{type:"button",className:ls.secondaryActionButton,onClick:()=>i(m.id),children:"Duplicate"}),s.jsx("button",{type:"button",className:ls.secondaryActionButton,onClick:()=>u(m),children:"Rename"}),s.jsx("button",{type:"button",className:`${ls.deleteActionButton} ${b?ls.deleteActionDisabled:""}`,onClick:()=>h(m),disabled:b,children:"Delete"})]})]})]},m.id)})})]})}const iSe="_resultWrap_179wi_1",aSe="_emptyState_179wi_13",oSe="_emptyTitle_179wi_35",lSe="_emptyText_179wi_43",cSe="_resultHeader_179wi_55",dSe="_resultKicker_179wi_79",uSe="_resultTitle_179wi_95",hSe="_resultText_179wi_107",mSe="_emptyNote_179wi_119",pSe="_setupSummary_179wi_131",gSe="_setupSummaryTitle_179wi_149",fSe="_setupSummaryRow_179wi_159",vSe="_setupSummaryLabel_179wi_171",xSe="_setupSummaryValue_179wi_185",ySe="_setupSummaryMeta_179wi_195",bSe="_setupSummaryTags_179wi_205",_Se="_setupSummaryTag_179wi_205",wSe="_classDistribution_179wi_241",jSe="_resultStats_179wi_253",SSe="_resultStatBadge_179wi_267",NSe="_resultStatBadgeMuted_179wi_269",kSe="_group_179wi_307",CSe="_groupHeader_179wi_327",TSe="_groupTitle_179wi_341",ISe="_groupHint_179wi_351",ESe="_groupBadge_179wi_361",ASe="_badgeSuccess_179wi_387",PSe="_badgeMuted_179wi_399",RSe="_badgeDanger_179wi_409",LSe="_groupEmpty_179wi_421",DSe="_groupTable_179wi_437",MSe="_groupRow_179wi_455",FSe="_groupHead_179wi_327",BSe="_groupCell_179wi_491",$Se="_memberName_179wi_501",OSe="_memberBadge_179wi_509",It={resultWrap:iSe,emptyState:aSe,emptyTitle:oSe,emptyText:lSe,resultHeader:cSe,resultKicker:dSe,resultTitle:uSe,resultText:hSe,emptyNote:mSe,setupSummary:pSe,setupSummaryTitle:gSe,setupSummaryRow:fSe,setupSummaryLabel:vSe,setupSummaryValue:xSe,setupSummaryMeta:ySe,setupSummaryTags:bSe,setupSummaryTag:_Se,classDistribution:wSe,resultStats:jSe,resultStatBadge:SSe,resultStatBadgeMuted:NSe,group:kSe,groupHeader:CSe,groupTitle:TSe,groupHint:ISe,groupBadge:ESe,badgeSuccess:ASe,badgeMuted:PSe,badgeDanger:RSe,groupEmpty:LSe,groupTable:DSe,groupRow:MSe,groupHead:FSe,groupCell:BSe,memberName:$Se,memberBadge:OSe};function VSe({members:t,scenario:e,setupState:n}){var _;if(!e)return s.jsxs("div",{className:It.emptyState,children:[s.jsx("h3",{className:It.emptyTitle,children:"No scenario selected"}),s.jsx("p",{className:It.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return s.jsxs("div",{className:It.emptyState,children:[s.jsx("h3",{className:It.emptyTitle,children:"No members available"}),s.jsx("p",{className:It.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:o}=q.useMemo(()=>{const k=[],I=[],R=[],P=[];return t.forEach(N=>{var w;const x=(w=e.decisions[N.id])!=null?w:"undecided";x==="take"?k.push(N):x==="bench"?I.push(N):x==="drop"?R.push(N):P.push(N)}),{takeMembers:k,benchMembers:I,dropMembers:R,undecidedMembers:P}},[t,e.decisions]),c=r.length,u=i.length,h=a.length,m=Math.max(0,e.maxSlots-c),g=e.maxSlots?Math.round(c/e.maxSlots*100):0,v=q.useMemo(()=>{const k=r.reduce((R,P)=>{var x,w;const N=(x=P.className)!=null?x:P.class;return N&&(R[N]=((w=R[N])!=null?w:0)+1),R},{});return Object.entries(k).map(([R,P])=>`${R}: ${P}`).join(" | ")},[r]),b=(k,I,R,P)=>s.jsxs("div",{className:It.group,children:[s.jsxs("div",{className:It.groupHeader,children:[s.jsxs("div",{children:[s.jsx("h4",{className:It.groupTitle,children:k}),s.jsx("span",{className:It.groupHint,children:I})]}),s.jsx("span",{className:`${It.groupBadge} ${P}`,children:R.length})]}),R.length===0?s.jsx("div",{className:It.groupEmpty,children:"No players in this group."}):s.jsxs("div",{className:It.groupTable,role:"table",children:[s.jsxs("div",{className:`${It.groupRow} ${It.groupHead}`,role:"row",children:[s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Name"}),s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Level"}),s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Guild"}),s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Class"})]}),R.map(N=>{var x,w;return s.jsxs("div",{className:It.groupRow,role:"row",children:[s.jsx("div",{className:It.groupCell,role:"cell",children:s.jsx("span",{className:It.memberName,children:N.name})}),s.jsx("div",{className:It.groupCell,role:"cell",children:s.jsxs("span",{className:It.memberBadge,children:["Lvl ",N.level]})}),s.jsx("div",{className:It.groupCell,role:"cell",children:N.guildName}),s.jsx("div",{className:It.groupCell,role:"cell",children:(w=(x=N.className)!=null?x:N.class)!=null?w:"-"})]},N.id)})]})]});return s.jsxs("div",{className:It.resultWrap,children:[s.jsxs("div",{className:It.resultHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:It.resultKicker,children:"Final Plan"}),s.jsx("h3",{className:It.resultTitle,children:e.name}),s.jsx("p",{className:It.resultText,children:(_=e.description)!=null?_:"Zusammenfassung des aktuellen Plans."}),r.length===0?s.jsx("p",{className:It.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,v?s.jsxs("p",{className:It.classDistribution,children:["Class distribution: ",v]}):null,s.jsxs("div",{className:It.setupSummary,children:[s.jsx("div",{className:It.setupSummaryTitle,children:"Fusion plan between"}),n.baseGuild?s.jsxs("div",{className:It.setupSummaryRow,children:[s.jsx("span",{className:It.setupSummaryLabel,children:"Base"}),s.jsxs("span",{className:It.setupSummaryValue,children:[n.baseGuild.name||"Unbenannt"," ",s.jsxs("span",{className:It.setupSummaryMeta,children:["(",n.baseGuild.server||"Server n/a",")"]})]})]}):s.jsxs("div",{className:It.setupSummaryRow,children:[s.jsx("span",{className:It.setupSummaryLabel,children:"Base"}),s.jsx("span",{className:It.setupSummaryMeta,children:"No base guild selected."})]}),s.jsxs("div",{className:It.setupSummaryRow,children:[s.jsx("span",{className:It.setupSummaryLabel,children:"Partners"}),n.partnerGuilds.length?s.jsx("div",{className:It.setupSummaryTags,children:n.partnerGuilds.map(k=>s.jsxs("span",{className:It.setupSummaryTag,children:[k.name||"Unbenannt"," ",s.jsxs("span",{className:It.setupSummaryMeta,children:["(",k.server||"Server n/a",")"]})]},k.id))}):s.jsx("span",{className:It.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),s.jsxs("div",{className:It.resultStats,children:[s.jsxs("span",{className:It.resultStatBadge,children:["Members selected: ",c," / ",e.maxSlots]}),s.jsxs("span",{className:It.resultStatBadge,children:["Bench: ",u]}),s.jsxs("span",{className:It.resultStatBadge,children:["Drop: ",h]}),s.jsxs("span",{className:It.resultStatBadge,children:["Free slots: ",m]}),s.jsxs("span",{className:It.resultStatBadge,children:["Utilization: ",g,"%"]}),o.length>0?s.jsxs("span",{className:It.resultStatBadgeMuted,children:["Undecided: ",o.length]}):null]})]}),b("Final roster (selected)","Take",r,It.badgeSuccess),b("Bench (waiting list)","Bench",i,It.badgeMuted),b("Not included","Drop",a,It.badgeDanger)]})}const Hf=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],bI=t=>t.reduce((e,n)=>(e[n.id]="undecided",e),{}),_I=t=>t.reduce((e,n)=>(e[n.id]="none",e),{}),USe=(t,e,n)=>{var r,i,a,o,c,u,h,m,g,v,b,_,k,I,R,P;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(o=t.role)!=null?o:"Unknown",level:(c=t.level)!=null?c:void 0,guildName:e,server:n,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(m=t.conBase)!=null?m:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(v=t.totalStats)!=null?v:void 0,values:{treasury:(b=t.treasury)!=null?b:void 0,mine:(_=t.mine)!=null?_:void 0,attrTotal:(k=t.attrTotal)!=null?k:void 0,conTotal:(I=t.conTotal)!=null?I:void 0,lastScan:(R=t.lastScan)!=null?R:void 0,lastActivity:(P=t.lastActivity)!=null?P:void 0}}},zSe=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const n=(i=t.name)==null?void 0:i.trim();return n||null},wI=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,jI=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],GSe=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function HSe(){var D;const[t,e]=q.useState("setup"),[n,r]=q.useState(Hf),[i,a]=q.useState(!1),[o,c]=q.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=q.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:bI(Hf),targetGuildAssignments:_I(Hf),isDefault:!0}]),[m,g]=q.useState("plan-a"),v=q.useMemo(()=>{var V,z;return(z=(V=u.find(K=>K.id===m))!=null?V:u[0])!=null?z:null},[m,u]),b=q.useMemo(()=>{var W,U;const V=o.baseGuild,z=(W=V==null?void 0:V.name)==null?void 0:W.trim(),K=(U=V==null?void 0:V.server)==null?void 0:U.trim();return!!(z&&K)},[o.baseGuild]),_=q.useMemo(()=>n.length>0,[n.length]),k=q.useMemo(()=>u.length>0,[u.length]),I=q.useMemo(()=>{const V=[];return b||V.push("Setup incomplete - no base guild selected."),b&&!_&&V.push("No members loaded yet. Check scans or setup."),k||V.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),V},[b,_,k]),R=(V,z)=>{h(K=>K.map(W=>W.id===m?{...W,decisions:{...W.decisions,[V]:z}}:W))},P=(V,z)=>{h(K=>K.map(W=>{var U;return W.id===m?{...W,targetGuildAssignments:{...(U=W.targetGuildAssignments)!=null?U:{},[V]:z}}:W}))},N=V=>{const z=Number(V)||0;h(K=>K.map(W=>W.id===m?{...W,maxSlots:Math.max(0,z)}:W))},x=()=>{h(V=>{const z={id:wI(),name:`Plan ${V.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:bI(n),targetGuildAssignments:_I(n)};return g(z.id),[...V,z]})},w=V=>{h(z=>{var U;const K=z.find(J=>J.id===V);if(!K)return z;const W={...K,id:wI(),name:`${K.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...K.decisions},targetGuildAssignments:{...(U=K.targetGuildAssignments)!=null?U:{}}};return g(W.id),[...z,W]})},L=(V,z)=>{const K=z.trim();K&&h(W=>W.map(U=>U.id===V?{...U,name:K}:U))},j=V=>{h(z=>{if(z.length<=1)return z;const K=z.filter(W=>W.id!==V);return K.length?(m===V&&g(K[0].id),K):z})};q.useEffect(()=>{if(o.mode!=="scan"){a(!1),r(Hf);return}const V=[o.baseGuild,...o.partnerGuilds].filter(Boolean);if(V.length===0){a(!1),r([]);return}let z=!1;async function K(){var U,J,re,G,X,Y,se,ce,_e,Ae;const W=Bn("FusionPlanner:loadMembers");a(!0);try{const ee=[];for(const le of V){const te=zSe(le);if(!te)continue;const ye=ps(Tt,`guilds/${te}/latest/latest`),ke=await An(W,ye,()=>pn(ye)),Me=ke.exists()?ke.data():null,Re=(X=(G=(J=(U=le.name)==null?void 0:U.trim())!=null?J:Me==null?void 0:Me.name)!=null?G:(re=Me==null?void 0:Me.values)==null?void 0:re.Name)!=null?X:te,Ee=(Ae=(_e=(se=(Y=le.server)==null?void 0:Y.trim())!=null?se:Me==null?void 0:Me.server)!=null?_e:(ce=Me==null?void 0:Me.values)==null?void 0:ce.Server)!=null?Ae:null,Le=ps(Tt,`guilds/${te}/snapshots/members_summary`),Fe=await An(W,Le,()=>pn(Le));if(!Fe.exists())continue;const Be=Fe.data();(Array.isArray(Be.members)?Be.members:[]).forEach(ue=>{ee.push(USe(ue,Re,Ee))})}z||r(ee)}catch(ee){console.error("[FusionPlanner] Failed to load members",ee),z||r([])}finally{z||a(!1),un(W)}}return r([]),K(),()=>{z=!0}},[o.baseGuild,o.partnerGuilds,o.mode]),q.useEffect(()=>{i||h(V=>V.map(z=>{var J;const K=new Set(n.map(re=>re.id)),W={...z.decisions},U={...(J=z.targetGuildAssignments)!=null?J:{}};return n.forEach(re=>{W[re.id]||(W[re.id]="undecided"),U[re.id]||(U[re.id]="none")}),Object.keys(W).forEach(re=>{K.has(re)||delete W[re]}),Object.keys(U).forEach(re=>{K.has(re)||delete U[re]}),{...z,decisions:W,targetGuildAssignments:U}}))},[n,i]);const S=V=>{c(z=>({...z,mode:V}))},C=V=>{c(z=>{var W,U,J;const K=(W=z.baseGuild)!=null?W:{id:"base-1",kind:"base",name:"",server:""};return{...z,baseGuild:{...K,...V.id?{id:V.id}:{},name:(U=V.name)!=null?U:K.name,server:(J=V.server)!=null?J:K.server}}})},M=V=>{var U;if(!V.name.trim()||!V.server.trim())return;const z=V.name.trim(),K=V.server.trim(),W=(U=V.id)==null?void 0:U.trim();c(J=>({...J,partnerGuilds:[...J.partnerGuilds,{id:W&&!W.startsWith("partner-")?W:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:z,server:K,kind:"partner"}]}))},T=V=>{c(z=>({...z,partnerGuilds:z.partnerGuilds.filter(K=>K.id!==V)}))},F=()=>{switch(t){case"setup":return s.jsx(Kwe,{setupState:o,onChangeMode:S,onChangeBaseGuild:C,onAddPartnerGuild:M,onRemovePartnerGuild:T});case"members":return s.jsx(zje,{members:n,scenario:v,onChangeScenarioDecision:R,onChangeScenarioTargetGuild:P,onChangeScenarioMaxSlots:N,setupState:o});case"overview":return s.jsx(T2e,{members:n,scenario:v,setupState:o,onChangeScenarioDecision:R,onChangeScenarioTargetGuild:P,onAddPartnerGuild:V=>M({name:V,server:"tbd"})});case"scenarios":return s.jsx(rSe,{scenarios:u,activeScenarioId:m,onSetActiveScenario:g,onCreateScenario:x,onDuplicateScenario:w,onRenameScenario:L,onDeleteScenario:j});case"result":return s.jsx(VSe,{members:n,scenario:v,setupState:o});default:return null}};return s.jsx(os,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:s.jsxs("div",{className:Pt.page,children:[s.jsxs("header",{className:Pt.header,children:[s.jsxs("div",{className:Pt.headerLeading,children:[s.jsx(Gs,{to:"/guild-hub",className:Pt.backLink,children:"Back to Guild Hub"}),s.jsxs("div",{className:Pt.headerStack,children:[s.jsx("p",{className:Pt.kicker,children:"Guild Hub"}),s.jsx("h1",{className:Pt.title,children:"Fusion Planner"}),s.jsx("p",{className:Pt.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),s.jsxs("div",{className:Pt.headerActions,children:[s.jsx("button",{type:"button",className:Pt.primaryAction,children:"Neues Setup"}),s.jsx("button",{type:"button",className:Pt.secondaryAction,children:"Checkliste"})]})]}),I.length?s.jsx("div",{className:Pt.plannerNotice,role:"status","aria-live":"polite",children:I.map(V=>s.jsxs("div",{className:`${Pt.noticeItem} ${V.toLowerCase().includes("no base guild")?Pt.noticeWarning:""}`,children:[s.jsx("span",{className:Pt.noticeDot,"aria-hidden":!0}),s.jsx("span",{children:V})]},V))}):null,s.jsxs("section",{className:Pt.tabSection,"aria-label":"Fusion Planner Tabs",children:[s.jsx("div",{className:Pt.tabBar,children:jI.map(V=>{const z=V.key===t;return s.jsxs("button",{type:"button",className:`${Pt.tabItem} ${z?Pt.tabItemActive:""}`,onClick:()=>e(V.key),"aria-pressed":z,children:[s.jsx("span",{className:Pt.tabLabel,children:V.label}),s.jsx("span",{className:Pt.tabHelper,children:V.helper})]},V.key)})}),s.jsxs("div",{className:Pt.tabPanel,children:[s.jsx("span",{className:Pt.tabBadge,children:(D=jI.find(V=>V.key===t))==null?void 0:D.label}),F()]})]}),s.jsxs("section",{className:Pt.infoStrip,children:[s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Status"}),s.jsx("strong",{children:"Entwurf"}),s.jsx("p",{className:Pt.infoHint,children:"Bereit fuer weitere Eingaben."})]}),s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Slots geplant"}),s.jsx("strong",{children:"0 / 40"}),s.jsx("p",{className:Pt.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Szenarien"}),s.jsx("strong",{children:"3"}),s.jsx("p",{className:Pt.infoHint,children:"Baseline, Optimistic, Risiko."})]}),s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Letztes Update"}),s.jsx("strong",{children:"vor wenigen Minuten"}),s.jsx("p",{className:Pt.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),s.jsx("section",{className:Pt.stageGrid,children:GSe.map(V=>s.jsxs("article",{className:Pt.panel,children:[s.jsxs("div",{className:Pt.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Pt.panelKicker,children:V.step}),s.jsx("h2",{className:Pt.panelTitle,children:V.title}),s.jsx("p",{className:Pt.panelLead,children:V.description})]}),V.badge?s.jsx("span",{className:Pt.badge,children:V.badge}):null]}),s.jsx("div",{className:Pt.panelBody,children:s.jsx("div",{className:Pt.placeholderGrid,children:V.placeholders.map(z=>s.jsxs("div",{className:Pt.placeholderCard,children:[s.jsx("div",{className:Pt.placeholderTitle,children:z}),s.jsx("p",{className:Pt.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},z))})})]},V.key))}),s.jsx("section",{className:Pt.helperSection,children:s.jsxs("div",{className:Pt.helperCard,children:[s.jsxs("div",{children:[s.jsx("p",{className:Pt.helperKicker,children:"Result"}),s.jsx("h3",{className:Pt.helperTitle,children:"Finaler Merge-Plan"}),s.jsx("p",{className:Pt.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),s.jsxs("div",{className:Pt.helperActions,children:[s.jsx("button",{type:"button",className:Pt.secondaryAction,children:"Teilen"}),s.jsx("button",{type:"button",className:Pt.primaryAction,children:"Review starten"})]})]})})]})})}const D_=["EU-01","EU-02","US-01","US-02","ASIA-01"],Ym=new Intl.NumberFormat("de-DE");function WSe(){const t=ch("(min-width: 768px)"),[e,n]=q.useState("all"),[r,i]=q.useState(null),[a,o]=q.useState(null),[c,u]=q.useState(null),[h,m]=q.useState(null),g=[r,a].filter(Boolean).length,v=q.useMemo(()=>{const T=[c,h].filter(Boolean);if(!T.length)return 0;const F=T.reduce((D,V)=>{var z;return D+((z=V.members)!=null?z:0)},0);return Math.round(F/T.length)},[c,h]),[b,_]=q.useState(null),[k,I]=q.useState(!1),R=q.useRef(null);dh(R,k&&!t),q.useEffect(()=>{t&&I(!1)},[t]),q.useEffect(()=>{if(!b)return;const T=D=>{const V=D.target;V&&(V.closest(`.${pe.freshnessBadge}`)||V.closest(`.${pe.freshnessPopover}`)||_(null))},F=D=>{D.key==="Escape"&&_(null)};return document.addEventListener("pointerdown",T),document.addEventListener("keydown",F),()=>{document.removeEventListener("pointerdown",T),document.removeEventListener("keydown",F)}},[b]);const P=q.useMemo(()=>c?jp(c.nextUpdateAt,Date.now()):"",[c]),N=q.useMemo(()=>h?jp(h.nextUpdateAt,Date.now()):"",[h]),x=()=>I(!0),w=()=>I(!1),L=T=>{n(T)},j=(T,F)=>{T==="guildA"?(i(F.id),u(F)):(o(F.id),m(F))},S=T=>{T==="guildA"?(i(null),u(null)):(o(null),m(null))},C=T=>{_(F=>F===T?null:T)},M=c&&h;return s.jsxs(os,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[s.jsxs("div",{className:pe.page,children:[s.jsxs("header",{className:pe.header,children:[s.jsxs("div",{className:pe.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Guild Hub"}),s.jsx("h1",{className:pe.title,children:"Gilden vergleichen"}),s.jsx("p",{className:pe.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),s.jsx("div",{className:pe.headerActions,children:!t&&s.jsx("button",{type:"button",className:pe.secondaryAction,onClick:x,children:"Filter"})})]}),s.jsxs("div",{className:pe.infoStrip,children:[s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Pool"}),s.jsxs("strong",{children:[Ym.format(g)," Gilden"]})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Durchschnitt Mitglieder"}),s.jsx("strong",{children:Ym.format(v)})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Serverfilter"}),s.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&s.jsx("div",{className:pe.inlineFilters,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>L(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),D_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]}),s.jsxs("div",{className:pe.layout,children:[s.jsxs("section",{className:pe.selectionColumn,children:[s.jsx(SI,{title:"Gilde A",slot:"guildA",selectedGuild:c,excludeId:a,onSelect:j,onClear:S,serverFilter:e,onServerChange:L}),s.jsx(SI,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:j,onClear:S,serverFilter:e,onServerChange:L})]}),s.jsxs("section",{className:pe.comparisonColumn,children:[s.jsxs("div",{className:pe.comparisonCard,children:[s.jsxs("div",{className:pe.comparisonHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Vergleich"}),s.jsx("h2",{className:pe.sectionTitle,children:"Kennzahlen"})]}),M&&s.jsxs("span",{className:pe.diffBadge,children:["Delta Mitglieder:"," ",Ym.format(c.members-h.members)]})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pe.metricGrid,children:[s.jsx(NI,{label:"Mitglieder",aValue:c.members,bValue:h.members}),s.jsx(NI,{label:"Durchschnittslevel",aValue:c.avgLevel,bValue:h.avgLevel,isDecimal:!0}),s.jsx(KSe,{guildA:c,guildB:h,countdownA:P,countdownB:N,activePopover:b,onToggle:C})]}),s.jsx(qSe,{guildA:c,guildB:h})]}):s.jsx("div",{className:pe.emptyState,children:s.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),s.jsxs("div",{className:pe.supportPanels,children:[s.jsx(QSe,{}),s.jsx(YSe,{})]})]})]})]}),!t&&s.jsx("div",{className:`${pe.sheetOverlay} ${k?pe.sheetOpen:""}`,children:s.jsxs("div",{className:pe.sheet,role:"dialog","aria-modal":"true",ref:R,children:[s.jsxs("header",{className:pe.sheetHeader,children:[s.jsx("h3",{children:"Filter"}),s.jsx("button",{type:"button",className:pe.clearButton,onClick:w,children:"Schliessen"})]}),s.jsx("div",{className:pe.sheetBody,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>L(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),D_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]})})]})}function SI({title:t,slot:e,selectedGuild:n,excludeId:r,onSelect:i,onClear:a,serverFilter:o,onServerChange:c}){const[u,h]=q.useState(""),m=lh(u,300);q.useEffect(()=>{h("")},[n,o]);const{results:g,loading:v}=XSe(m,o,r);return s.jsxs("article",{className:pe.selectionCard,children:[s.jsxs("div",{className:pe.slotHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.slotLabel,children:t}),s.jsx("p",{className:pe.slotStatus,children:n?"Ausgewaehlt":"Noch keine Auswahl"})]}),n&&s.jsx("button",{type:"button",className:pe.clearButton,onClick:()=>a(e),children:"Reset"})]}),s.jsxs("div",{className:pe.slotBody,children:[s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:o,onChange:b=>c(b.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),D_.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Suchen"}),s.jsx("input",{className:pe.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),s.jsxs("div",{className:pe.resultList,role:"list",children:[v&&s.jsx("div",{className:pe.emptyResult,children:"Lade..."}),!v&&g.length===0&&s.jsx("div",{className:pe.emptyResult,children:"Keine Gilde gefunden."}),!v&&g.map(b=>s.jsxs("div",{className:pe.resultItem,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.resultName,children:b.name}),s.jsxs("p",{className:pe.resultMeta,children:[b.server," - ",b.members," Mitglieder"]})]}),s.jsx("button",{type:"button",className:pe.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),n&&s.jsxs("div",{className:pe.selectedCard,children:[s.jsx("p",{className:pe.selectedName,children:n.name}),s.jsxs("p",{className:pe.selectedMeta,children:[n.server," - ",n.members," Mitglieder - Durchschnittslevel"," ",n.avgLevel.toFixed(1)]}),s.jsx("p",{className:pe.selectedTagline,children:n.tagline})]})]})]})}function NI({label:t,aValue:e,bValue:n,isDecimal:r=!1}){const i=c=>r?c.toFixed(1).replace(".",","):Ym.format(c),a=e-n;let o="gleich";if(a!==0){const c=r?Math.abs(a).toFixed(1).replace(".",","):Ym.format(Math.abs(a));o=a>0?`+${c}`:`-${c}`}return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:t}),s.jsxs("div",{className:pe.metricValues,children:[s.jsx("span",{"aria-label":"Gilde A",children:i(e)}),s.jsx("span",{className:pe.metricDivider,children:"vs"}),s.jsx("span",{"aria-label":"Gilde B",children:i(n)})]}),s.jsx("p",{className:pe.metricDelta,children:o})]})}function KSe({guildA:t,guildB:e,countdownA:n,countdownB:r,activePopover:i,onToggle:a}){return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Freshness"}),s.jsx("div",{className:pe.freshnessRow,children:[t,e].map(o=>{const c=o.id===t.id?n:r,u=`fresh-${o.id}`,h=i===u;return s.jsxs("div",{className:pe.freshnessItem,children:[s.jsxs("button",{type:"button",className:pe.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[s.jsx("span",{children:o.freshness.toUpperCase()}),s.jsx("small",{children:Zp(o.lastScanAt)})]}),h&&s.jsxs("div",{className:pe.freshnessPopover,role:"dialog",children:[s.jsx("p",{className:pe.popoverTitle,children:o.name}),s.jsxs("dl",{children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{children:i2[o.freshness]})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt gescannt"}),s.jsx("dd",{children:So(o.lastScanAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Naechstes Update"}),s.jsxs("dd",{children:[So(o.nextUpdateAt)," (",c,")"]})]})]})]})]},o.id)})})]})}function qSe({guildA:t,guildB:e}){const n=q.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return s.jsxs("div",{className:pe.classCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Klassenverteilung"}),s.jsx("div",{className:pe.classGrid,children:[t,e].map(r=>s.jsxs("div",{className:pe.classColumn,children:[s.jsx("h3",{children:r.name}),s.jsx("div",{className:pe.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>s.jsxs("span",{style:{width:`${i.percent}%`},className:pe.classSlice,children:[s.jsx("small",{children:i.label}),s.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),s.jsx("ul",{className:pe.classLegend,children:n.map(r=>s.jsx("li",{children:r},r))})]})}function QSe(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return s.jsxs("section",{className:pe.checklistCard,children:[s.jsx("h3",{children:"Vor dem Vergleich pruefen"}),s.jsx("ul",{className:pe.checklist,children:t.map(e=>s.jsx("li",{children:e},e))})]})}function YSe(){return s.jsxs("section",{className:pe.infoCardExtended,children:[s.jsx("h3",{children:"Transfers-Diff"}),s.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",s.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),s.jsx("p",{className:pe.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),s.jsx("button",{type:"button",className:pe.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function XSe(t,e,n){const[r,i]=q.useState([]),[a,o]=q.useState(!1);return q.useEffect(()=>{const c=t.trim();if(c.length===0){i([]),o(!1);return}let u=!1;async function h(){const m=Bn("CompareGuilds:search");o(!0);try{const g=c.toLowerCase(),v=xh(Tt,"latest"),b=await wn(m,{path:"guilds/latest (collectionGroup)"},()=>_n(En(v,Qi("nameFold"),oc(g),lc(g+""),rr(15)))),_=await wn(m,{path:"guilds/latest (collectionGroup)"},()=>_n(En(v,Kr("nameNgrams","array-contains",g),rr(15)))),k=new Set,I=[],R=P=>{var D,V,z,K,W,U,J,re,G,X,Y,se,ce,_e,Ae,ee,le,te,ye,ke,Me;const N=P.data(),w=(D=P.ref.parent)==null?void 0:D.parent,L=w==null?void 0:w.parent;if((L==null?void 0:L.id)!=="guilds")return;const S=(z=(V=w==null?void 0:w.id)!=null?V:N.guildIdentifier)!=null?z:P.id;if(!S||k.has(S)||n&&S===n)return;const C=(U=(W=N.name)!=null?W:(K=N.values)==null?void 0:K.Name)!=null?U:"Unbekannte Gilde",M=(G=(re=N.server)!=null?re:(J=N.values)==null?void 0:J.Server)!=null?G:"Unknown";if(e!=="all"&&M!==e)return;const T=(_e=(ce=(Y=N.memberCount)!=null?Y:(X=N.values)==null?void 0:X["Guild Member Count"])!=null?ce:(se=N.values)==null?void 0:se.GuildMemberCount)!=null?_e:0,F=(le=(ee=N.updatedAt)!=null?ee:(Ae=N.values)==null?void 0:Ae.UpdatedAt)!=null?le:N.timestamp?new Date(N.timestamp*1e3).toISOString():new Date().toISOString();k.add(S),I.push({id:S,name:C,tagline:(te=N.tagline)!=null?te:"",server:M,members:T,avgLevel:(Me=(ke=N.avgLevel)!=null?ke:(ye=N.values)==null?void 0:ye.AvgLevel)!=null?Me:0,lastScanAt:F,updatedAt:F,nextUpdateAt:F,freshness:"unknown",classes:[]})};b.forEach(R),_.forEach(R),u||(I.sort((P,N)=>P.name.localeCompare(N.name)),i(I))}catch(g){console.error("[GuildHub CompareGuilds] guild search failed",g),u||i([])}finally{un(m),u||o(!1)}}return h(),()=>{u=!0}},[t,e,n]),{results:r,loading:a}}const JSe="_page_o27vc_1",ZSe="_header_o27vc_13",eNe="_headerStack_o27vc_25",tNe="_kicker_o27vc_37",sNe="_title_o27vc_53",nNe="_headerActions_o27vc_65",rNe="_primaryAction_o27vc_77",iNe="_secondaryAction_o27vc_79",aNe="_infoStrip_o27vc_109",oNe="_infoPill_o27vc_129",lNe="_freshnessWrapper_o27vc_163",cNe="_freshnessBadge_o27vc_171",dNe="_popover_o27vc_191",uNe="_popoverLabel_o27vc_221",hNe="_filterToolbar_o27vc_231",mNe="_filterSheetButton_o27vc_241",pNe="_inlineFilters_o27vc_259",gNe="_searchInput_o27vc_271",fNe="_select_o27vc_273",vNe="_chipGroup_o27vc_295",xNe="_chip_o27vc_295",yNe="_chipActive_o27vc_325",bNe="_levelRow_o27vc_335",_Ne="_sortControls_o27vc_363",wNe="_sortLabel_o27vc_375",jNe="_directionButton_o27vc_385",SNe="_listBody_o27vc_403",NNe="_tableWrapper_o27vc_415",kNe="_table_o27vc_415",CNe="_cardFooter_o27vc_459",TNe="_panel_o27vc_461",INe="_formPanel_o27vc_463",ENe="_statusSelect_o27vc_481",ANe="_stickyColumn_o27vc_515",PNe="_rowButton_o27vc_529",RNe="_scanBadge_o27vc_545",LNe="_cardList_o27vc_561",DNe="_card_o27vc_459",MNe="_cardHeader_o27vc_593",FNe="_cardTitle_o27vc_605",BNe="_cardMeta_o27vc_623",$Ne="_cardNotes_o27vc_635",ONe="_emptyState_o27vc_659",VNe="_sheetBackdrop_o27vc_675",UNe="_sheet_o27vc_675",zNe="_sheetHandle_o27vc_717",GNe="_sheetBody_o27vc_733",HNe="_sheetLabel_o27vc_749",WNe="_sheetActions_o27vc_785",KNe="_overlay_o27vc_797",qNe="_drawer_o27vc_837",QNe="_modal_o27vc_845",YNe="_panelHeader_o27vc_853",XNe="_section_o27vc_867",JNe="_tagRow_o27vc_899",ZNe="_historyList_o27vc_913",eke="_panelFooter_o27vc_943",tke="_formOverlay_o27vc_955",ske="_formGrid_o27vc_1003",nke="_warning_o27vc_1015",rke="_pagination_o27vc_1033",He={page:JSe,header:ZSe,headerStack:eNe,kicker:tNe,title:sNe,headerActions:nNe,primaryAction:rNe,secondaryAction:iNe,infoStrip:aNe,infoPill:oNe,freshnessWrapper:lNe,freshnessBadge:cNe,popover:dNe,popoverLabel:uNe,filterToolbar:hNe,filterSheetButton:mNe,inlineFilters:pNe,searchInput:gNe,select:fNe,chipGroup:vNe,chip:xNe,chipActive:yNe,levelRow:bNe,sortControls:_Ne,sortLabel:wNe,directionButton:jNe,listBody:SNe,tableWrapper:NNe,table:kNe,cardFooter:CNe,panel:TNe,formPanel:INe,statusSelect:ENe,stickyColumn:ANe,rowButton:PNe,scanBadge:RNe,cardList:LNe,card:DNe,cardHeader:MNe,cardTitle:FNe,cardMeta:BNe,cardNotes:$Ne,emptyState:ONe,sheetBackdrop:VNe,sheet:UNe,sheetHandle:zNe,sheetBody:GNe,sheetLabel:HNe,sheetActions:WNe,overlay:KNe,drawer:qNe,modal:QNe,panelHeader:YNe,section:XNe,tagRow:JNe,historyList:ZNe,panelFooter:eke,formOverlay:tke,formGrid:ske,warning:nke,pagination:rke},gx=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],fx=["EU-01","EU-02","US-01","US-02","ASIA-01"],l2={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},kI={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},v1={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},ike=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:Ql(2),updatedAt:Ql(3),freshness:"f1",history:[{date:Vi(1),message:"Interview abgeschlossen"},{date:Vi(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:Ql(10),updatedAt:Ql(11),freshness:"f3",history:[{date:Vi(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:Ql(20),updatedAt:Ql(5),freshness:"f4",history:[{date:Vi(4),message:"Probe erfolgreich"},{date:Vi(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:Vi(2),updatedAt:Vi(2),freshness:"f5",history:[{date:Vi(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:Vi(3),updatedAt:Vi(1),freshness:"f6",history:[{date:Vi(1),message:"Bewerbung zurueckgezogen"},{date:Vi(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:Ql(5),updatedAt:Ql(5),freshness:"f2",history:[{date:Vi(1),message:"Profil verifiziert"}]}];function CI(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function ake(t,e,n){const r=n.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),o=e.status==="all"||i.status===e.status,c=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&o&&c&&u&&h})}function oke(t,e,n){const r=[...t];return r.sort((i,a)=>{let o=0;switch(e){case"name":o=i.name.localeCompare(a.name);break;case"level":o=i.level-a.level;break;case"status":o=i.status.localeCompare(a.status);break;case"lastScan":o=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:o=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return n==="asc"?o:-o}),r}function lke(t,e,n){const r=(e-1)*n;return t.slice(r,r+n)}function vv(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function cke(t){const e=Date.now()-new Date(t).getTime(),n=Math.round(e/6e4);if(n<60)return`${n} min`;const r=Math.round(n/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function dke(t){return t.length?t.reduce((e,n)=>e?kI[n.freshness]>kI[e.freshness]?n:e:n,null):null}function Vi(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function Ql(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function uke(){var z;const[t,e]=q.useState(ike),[n,r]=q.useState(v1),[i,a]=q.useState(v1),o=lh(n.q,300),c=q.useMemo(()=>{const K=ake(t,n,o);return oke(K,n.sort,n.dir)},[t,n,o]),u=q.useMemo(()=>lke(c,n.page,n.pageSize),[c,n.page,n.pageSize]),h=Math.max(1,Math.ceil(c.length/n.pageSize)),m=ch("(min-width: 768px)"),g=ch("(min-width: 1024px)"),[v,b]=q.useState(!1),[_,k]=q.useState(null),I=(z=t.find(K=>K.id===_))!=null?z:null,R=q.useRef(null);dh(R,!!I&&!g);const[P,N]=q.useState(null),[x,w]=q.useState(!1),L=q.useRef(null);dh(L,x);const j=q.useMemo(()=>dke(t),[t]),S=j&&j.lastScanAt?cke(j.lastScanAt):"unbekannt",C=K=>{const W=CI(K);r(W),a(W)},M=(K,W)=>{const U=CI({...n,[K]:W,page:K==="page"?W:1});C(U)},T=()=>{C(i),b(!1)},F=()=>{C(v1),b(!1)},D=(K,W)=>{e(U=>U.map(J=>J.id===K?{...J,status:W,updatedAt:new Date().toISOString()}:J))},V=K=>{e(W=>W.some(J=>J.id===K.id)?W.map(J=>J.id===K.id?K:J):[K,...W]),w(!1)};return s.jsxs(os,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[s.jsxs("div",{className:He.page,children:[s.jsxs("header",{className:He.header,children:[s.jsxs("div",{className:He.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:He.kicker,children:"Recruiting"}),s.jsx("h1",{className:He.title,children:"Waitlist"})]}),s.jsxs("div",{className:He.headerActions,children:[s.jsx("button",{type:"button",className:He.primaryAction,onClick:()=>{N(null),w(!0)},children:"Neuer Eintrag"}),!m&&s.jsx("button",{type:"button",className:He.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>b(!0),children:"Filter"})]})]}),s.jsxs("div",{className:He.infoStrip,children:[s.jsx(x1,{label:"Neu",value:c.filter(K=>K.status==="new").length}),s.jsx(x1,{label:"In Review",value:c.filter(K=>K.status==="in_review").length}),s.jsx(x1,{label:"Zugesagt",value:c.filter(K=>K.status==="accepted").length}),j&&s.jsx(hke,{label:l2[j.freshness],updatedAt:j.lastScanAt,countdown:S})]})]}),s.jsx("section",{className:He.filterToolbar,children:m?s.jsx(mke,{filters:n,onChange:M,onToggleClass:K=>{const W=n.classes.includes(K)?n.classes.filter(U=>U!==K):[...n.classes,K];M("classes",W)},onToggleServer:K=>{const W=n.servers.includes(K)?n.servers.filter(U=>U!==K):[...n.servers,K];M("servers",W)}}):s.jsx("button",{type:"button",className:He.filterSheetButton,onClick:()=>b(!0),children:"Filter & Sortierung"})}),s.jsx("section",{className:He.listBody,children:m?s.jsx(pke,{items:u,sort:n.sort,dir:n.dir,onSortChange:K=>{const W=n.sort===K&&n.dir==="asc"?"desc":"asc";M("sort",K),M("dir",W)},onSelect:k,onStatusChange:D}):s.jsx(gke,{items:u,onSelect:k,onStatusChange:D})}),s.jsx(vke,{page:n.page,totalPages:h,onChange:K=>M("page",K)})]}),v&&s.jsx(fke,{filters:i,onChange:a,onToggleClass:K=>a(W=>({...W,classes:W.classes.includes(K)?W.classes.filter(U=>U!==K):[...W.classes,K]})),onToggleServer:K=>a(W=>({...W,servers:W.servers.includes(K)?W.servers.filter(U=>U!==K):[...W.servers,K]})),onClose:()=>b(!1),onApply:T,onReset:F}),I&&s.jsx(ZL,{ref:R,item:I,mode:g?"drawer":"modal",onClose:()=>k(null),onEdit:()=>{N(I),w(!0),k(null)}}),x&&s.jsx(e6,{ref:L,item:P,entries:t,onClose:()=>w(!1),onSubmit:V})]})}function x1({label:t,value:e}){return s.jsxs("div",{className:He.infoPill,children:[s.jsx("span",{children:t}),s.jsx("strong",{children:e})]})}function hke({label:t,updatedAt:e,countdown:n}){const[r,i]=q.useState(!1);return s.jsxs("div",{className:He.freshnessWrapper,children:[s.jsx("button",{type:"button",className:He.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&s.jsxs("div",{className:He.popover,children:[s.jsxs("div",{children:[s.jsx("span",{className:He.popoverLabel,children:"Letzter Scan"}),s.jsx("strong",{children:vv(e)})]}),s.jsxs("div",{children:[s.jsx("span",{className:He.popoverLabel,children:"Aktualisiert"}),s.jsx("strong",{children:n})]})]})]})}function mke({filters:t,onChange:e,onToggleClass:n,onToggleServer:r}){return s.jsxs("div",{className:He.inlineFilters,children:[s.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:He.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),s.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:He.select,value:t.status,onChange:i=>e("status",i.target.value),children:[s.jsx("option",{value:"all",children:"Status (alle)"}),s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),s.jsx("div",{className:He.chipGroup,children:gx.map(i=>{const a=t.classes.includes(i);return s.jsx("button",{type:"button",className:`${He.chip} ${a?He.chipActive:""}`,onClick:()=>n(i),children:i},i)})}),s.jsx("div",{className:He.chipGroup,children:fx.map(i=>{const a=t.servers.includes(i);return s.jsx("button",{type:"button",className:`${He.chip} ${a?He.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),s.jsxs("div",{className:He.levelRow,children:[s.jsxs("label",{children:["Lv min",s.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),s.jsxs("label",{children:["Lv max",s.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),s.jsxs("div",{className:He.sortControls,children:[s.jsx("label",{className:He.sortLabel,children:"Sortieren"}),s.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"status",children:"Status"}),s.jsx("option",{value:"lastScan",children:"Letzter Scan"}),s.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),s.jsx("button",{type:"button",className:He.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function pke({items:t,sort:e,dir:n,onSortChange:r,onSelect:i,onStatusChange:a}){const o=c=>e===c?n==="asc"?" ":" ":"";return t.length?s.jsx("div",{className:He.tableWrapper,children:s.jsxs("table",{className:He.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:He.stickyColumn,onClick:()=>r("name"),children:["Name",o("name")]}),s.jsx("th",{children:"Klasse"}),s.jsxs("th",{onClick:()=>r("level"),children:["Level",o("level")]}),s.jsx("th",{children:"Server"}),s.jsxs("th",{onClick:()=>r("status"),children:["Status",o("status")]}),s.jsx("th",{children:"Notizen"}),s.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",o("lastScan")]})]})}),s.jsx("tbody",{children:t.map(c=>s.jsxs("tr",{children:[s.jsx("td",{className:He.stickyColumn,children:s.jsx("button",{type:"button",className:He.rowButton,onClick:()=>i(c.id),children:c.name})}),s.jsx("td",{children:c.classRole}),s.jsx("td",{children:c.level}),s.jsx("td",{children:c.server}),s.jsx("td",{children:s.jsxs("select",{className:He.statusSelect,name:`waitlistStatus-${c.id}`,"aria-label":`Status fuer ${c.name}`,value:c.status,onChange:u=>a(c.id,u.target.value),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),s.jsxs("td",{children:[c.notes.slice(0,64),"..."]}),s.jsx("td",{children:s.jsx("span",{className:He.scanBadge,children:l2[c.freshness]})})]},c.id))})]})}):s.jsx(JL,{})}function gke({items:t,onSelect:e,onStatusChange:n}){return t.length?s.jsx("div",{className:He.cardList,children:t.map(r=>s.jsxs("article",{className:He.card,children:[s.jsxs("div",{className:He.cardHeader,children:[s.jsxs("div",{children:[s.jsx("button",{type:"button",className:He.cardTitle,onClick:()=>e(r.id),children:r.name}),s.jsxs("p",{className:He.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),s.jsx("span",{className:He.scanBadge,children:l2[r.freshness]})]}),s.jsxs("p",{className:He.cardNotes,children:[r.notes.slice(0,160),"..."]}),s.jsxs("div",{className:He.cardFooter,children:[s.jsxs("select",{className:He.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>n(r.id,i.target.value),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):s.jsx(JL,{})}function JL(){return s.jsx("div",{className:He.emptyState,children:s.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function fke({filters:t,onChange:e,onToggleClass:n,onToggleServer:r,onClose:i,onApply:a,onReset:o}){return s.jsx("div",{className:He.sheetBackdrop,onClick:i,children:s.jsxs("div",{className:He.sheet,onClick:c=>c.stopPropagation(),children:[s.jsx("div",{className:He.sheetHandle}),s.jsxs("div",{className:He.sheetBody,children:[s.jsx("h2",{children:"Filter"}),s.jsxs("label",{className:He.sheetLabel,children:["Suche",s.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:c=>e(u=>({...u,q:c.target.value}))})]}),s.jsxs("label",{className:He.sheetLabel,children:["Status",s.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:c=>e(u=>({...u,status:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),s.jsxs("div",{className:He.sheetLabel,children:["Klassen",s.jsx("div",{className:He.chipGroup,children:gx.map(c=>{const u=t.classes.includes(c);return s.jsx("button",{type:"button",className:`${He.chip} ${u?He.chipActive:""}`,"aria-label":`Klasse ${c}`,onClick:()=>n(c),children:c},c)})})]}),s.jsxs("div",{className:He.sheetLabel,children:["Server",s.jsx("div",{className:He.chipGroup,children:fx.map(c=>{const u=t.servers.includes(c);return s.jsx("button",{type:"button",className:`${He.chip} ${u?He.chipActive:""}`,"aria-label":`Server ${c}`,onClick:()=>r(c),children:c},c)})})]}),s.jsxs("div",{className:He.levelRow,children:[s.jsxs("label",{children:["Lv min",s.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:c=>e(u=>({...u,lvMin:Number(c.target.value)}))})]}),s.jsxs("label",{children:["Lv max",s.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:c=>e(u=>({...u,lvMax:Number(c.target.value)}))})]})]})]}),s.jsxs("div",{className:He.sheetActions,children:[s.jsx("button",{type:"button",onClick:o,children:"Zuruecksetzen"}),s.jsx("button",{type:"button",className:He.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const ZL=q.forwardRef(({item:t,mode:e,onClose:n,onEdit:r},i)=>s.jsx("div",{className:He.overlay,children:s.jsxs("div",{ref:i,className:`${He.panel} ${e==="drawer"?He.drawer:He.modal}`,children:[s.jsxs("header",{className:He.panelHeader,children:[s.jsxs("div",{children:[s.jsxs("p",{className:He.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),s.jsx("h2",{children:t.name})]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("section",{className:He.section,children:[s.jsx("h3",{children:"Kontakt"}),s.jsx("p",{children:t.contact}),s.jsxs("p",{children:["Quelle: ",t.source]})]}),s.jsxs("section",{className:He.section,children:[s.jsx("h3",{children:"Notizen"}),s.jsx("p",{children:t.notes})]}),s.jsxs("section",{className:He.section,children:[s.jsx("h3",{children:"Tags"}),s.jsx("div",{className:He.tagRow,children:t.tags.length?t.tags.map(a=>s.jsx("span",{children:a},a)):s.jsx("span",{children:"Keine"})})]}),s.jsxs("section",{className:He.section,children:[s.jsx("h3",{children:"Historie"}),s.jsx("ul",{className:He.historyList,children:t.history.map(a=>s.jsxs("li",{children:[s.jsx("span",{children:vv(a.date)}),s.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),s.jsxs("section",{className:He.section,children:[s.jsx("h3",{children:"Scan-Infos"}),s.jsxs("p",{children:["Letzter Scan: ",vv(t.lastScanAt)]}),s.jsxs("p",{children:["Aktualisiert: ",vv(t.updatedAt)]})]}),s.jsxs("footer",{className:He.panelFooter,children:[s.jsx("button",{type:"button",className:He.secondaryAction,onClick:r,children:"Bearbeiten"}),s.jsx("button",{type:"button",className:He.primaryAction,onClick:n,children:"Schliessen"})]})]})}));ZL.displayName="DetailPanel";const e6=q.forwardRef(({item:t,entries:e,onClose:n,onSubmit:r},i)=>{const[a,o]=q.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:gx[0],level:1,server:fx[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});q.useEffect(()=>{t&&o(t)},[JSON.stringify(t)]);const c=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return s.jsx("div",{className:He.formOverlay,children:s.jsxs("form",{ref:i,className:He.formPanel,onSubmit:c,children:[s.jsxs("header",{className:He.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:He.cardMeta,children:t?"Bearbeiten":"Neu"}),s.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:n,children:"Schliessen"})]}),u&&s.jsx("div",{className:He.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),s.jsxs("label",{className:He.sheetLabel,children:["Name",s.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>o(m=>({...m,name:h.target.value}))})]}),s.jsxs("div",{className:He.formGrid,children:[s.jsxs("label",{children:["Klasse",s.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>o(m=>({...m,classRole:h.target.value})),children:gx.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Level",s.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>o(m=>({...m,level:Number(h.target.value)}))})]}),s.jsxs("label",{children:["Server",s.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>o(m=>({...m,server:h.target.value})),children:fx.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>o(m=>({...m,status:h.target.value})),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),s.jsxs("label",{className:He.sheetLabel,children:["Kontakt",s.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>o(m=>({...m,contact:h.target.value}))})]}),s.jsxs("label",{className:He.sheetLabel,children:["Quelle",s.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>o(m=>({...m,source:h.target.value}))})]}),s.jsxs("label",{className:He.sheetLabel,children:["Notizen",s.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>o(m=>({...m,notes:h.target.value})),rows:4})]}),s.jsxs("footer",{className:He.panelFooter,children:[s.jsx("button",{type:"button",className:He.secondaryAction,onClick:n,children:"Abbrechen"}),s.jsx("button",{type:"submit",className:He.primaryAction,children:"Speichern"})]})]})})});e6.displayName="WaitlistForm";function vke({page:t,totalPages:e,onChange:n}){return s.jsxs("div",{className:He.pagination,children:[s.jsx("button",{type:"button",className:He.secondaryAction,onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),s.jsxs("span",{children:["Seite ",t," / ",e]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:()=>n(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const xke=["tab","sub","sub2","q","sort","dir","page","pageSize"];function Nh(t=[]){const[e,n]=ar(),r=q.useMemo(()=>[...t].sort().join("|"),[t]),i=q.useMemo(()=>{const m=new Set([...xke]);return t.forEach(g=>m.add(g)),Array.from(m)},[r]),a=q.useMemo(()=>{const m={};return i.forEach(g=>{const v=e.get(g);v!==null&&(m[g]=v)}),m},[e,i]),o=q.useCallback((m,g)=>{var b;const v=new URLSearchParams(e);Object.entries(m).forEach(([_,k])=>{k==null||k===""?v.delete(_):v.set(_,String(k))}),n(v,{replace:(b=g==null?void 0:g.replace)!=null?b:!1})},[e,n]),c=q.useCallback(m=>{const g=new URLSearchParams(e);(m&&m.length>0?m:i).forEach(b=>g.delete(b)),n(g,{replace:!0})},[e,n,i]),u=q.useCallback((m,g="")=>{var v;return(v=a[m])!=null?v:g},[a]),h=q.useCallback((m,g=0)=>{const v=a[m],b=v?Number(v):NaN;return Number.isFinite(b)?b:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:o,resetParams:c}}function yke(){return Nh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Activity"})})}function bke(){return Nh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Imports"})})}function _ke(){return Nh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Announcements"})})}function wke(){return Nh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Events"})})}function jke(){return Nh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Roles"})})}function Ske(){return Nh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Settings"})})}const Nke=[{icon:s.jsx(Ax,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:s.jsx(g9,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:s.jsx(i9,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],kke=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],Cke=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function Tke(){return s.jsx(os,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Gs,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),s.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:s.jsx(Ike,{}),right:s.jsx(Eke,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:Nke.map(t=>s.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),s.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),s.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),s.jsx(Gs,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),s.jsx("ul",{className:"space-y-3",children:kke.map(t=>s.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[s.jsx(tw,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),s.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),s.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function Ike(){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsx(Gs,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),s.jsx(Gs,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),s.jsx(Gs,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),s.jsx(Gs,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),s.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[s.jsx("li",{children:" Pager rotation: Ops Team"}),s.jsx("li",{children:" Slack channel: #sf-alerts"}),s.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function Eke(){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),s.jsx("ul",{className:"mt-3 space-y-2",children:Cke.map(t=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),s.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),s.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),s.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const Ake=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function Pke(){return s.jsx(os,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:s.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[s.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[s.jsx("span",{children:"ID"}),s.jsx("span",{children:"Time"}),s.jsx("span",{children:"Service"}),s.jsx("span",{className:"text-right",children:"Severity"})]}),s.jsx("ul",{children:Ake.map(t=>s.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),s.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:Rke(t.severity)},children:t.severity})]},t.id))})]})})}function Rke(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const Ua={background:"#152A42",borderColor:"#2B4C73"},Bu={background:"#1A2F4A",borderColor:"#2B4C73"},y1=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function Lke(){const{data:t,loading:e,refreshing:n,error:r,refresh:i}=Bke(),a=q.useMemo(()=>[{label:"Total uploads",value:xa(t.metrics.totalUploads),hint:`${xa(t.metrics.last24h)} in the last 24h`,icon:s.jsx(S7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:kp(t.metrics.successRate),hint:`${xa(t.metrics.failed)} failed`,icon:s.jsx(h7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?b1(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${b1(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:s.jsx(w7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:TI(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:s.jsx(T7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:xa(t.metrics.uniqueUploaders),hint:`${xa(t.metrics.uniqueGuilds)} guilds represented`,icon:s.jsx(Ax,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:xa(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:s.jsx(aE,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return s.jsx(os,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:s.jsx(Dke,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:n}),right:s.jsx(Mke,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(o=>s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[o.icon,o.label]}),s.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:o.value})]})}),s.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:o.hint})]},o.label))}),s.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),s.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(o=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:Bu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:$u(o.status)},"aria-hidden":"true"}),c2(o.status)]}),s.jsx("span",{className:"font-semibold",children:xa(o.count)})]}),s.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:s.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(o.share*100,100).toFixed(1)}%`,backgroundColor:$u(o.status)}})}),s.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[kp(o.share)," of window"]})]},o.status))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),s.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(o=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:Bu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{className:"font-semibold",children:o.hourLabel}),s.jsxs("span",{children:[xa(o.total)," uploads"]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:$u("success")},"aria-hidden":"true"}),"Success ",xa(o.success)]}),s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:$u("failed")},"aria-hidden":"true"}),"Failed ",xa(o.failed)]})]})]},o.hourLabel))})]})]}),s.jsxs("section",{className:"rounded-2xl border",style:Ua,children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(hc,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?s.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[s.jsx(tw,{className:"h-3.5 w-3.5"}),r]}):s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(r7,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),s.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[s.jsx("span",{children:"ID"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Uploader"}),s.jsx("span",{children:"Guild"}),s.jsx("span",{className:"text-right",children:"Processing"}),s.jsx("span",{className:"text-right",children:"File size"})]}),s.jsx("ul",{children:t.recentUploads.map(o=>{var c,u,h,m;return s.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:o.id}),s.jsx("span",{children:s.jsx(Fke,{status:o.status})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(c=o.uploaderName)!=null?c:o.uploaderId)!=null?u:""}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:o.uploadedAt?o.uploadedAt.toLocaleString():"Timestamp missing"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(m=(h=o.guildName)!=null?h:o.guildId)!=null?m:""}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:o.errorCode?`Issue: ${o.errorCode}`:"Healthy"})]}),s.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:o.processingMs?b1(o.processingMs):"Pending"}),s.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:o.fileSizeBytes?TI(o.fileSizeBytes):""})]},o.id)})})]})]})})}function Dke({breakdown:t,onRefresh:e,loading:n,refreshing:r}){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[s.jsx("span",{children:"Controls"}),s.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[s.jsx(Ex,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),s.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),s.jsxs("div",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>s.jsxs("li",{className:"flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:$u(i.status)},"aria-hidden":"true"}),c2(i.status)]}),s.jsx("span",{children:kp(i.share)})]},i.status))}),n&&s.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[s.jsx(hc,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),s.jsxs("div",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),s.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Zf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Zf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Zf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function Mke({issues:t,failures:e,uploaders:n,guilds:r}){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(aE,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),s.jsx("span",{children:"Top failure signatures"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?s.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>s.jsxs("li",{className:"rounded-xl border px-3 py-2",style:Bu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{children:i.code}),s.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),s.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(tw,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("span",{children:"Latest failed uploads"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?s.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return s.jsxs("li",{className:"rounded-xl border px-3 py-2",style:Bu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),s.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(Ax,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Uploader leaderboard"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:n.map(i=>s.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:Bu,children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),s.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",kp(i.successRate)]})]}),s.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:xa(i.count)})]},i.id))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ua,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(A7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Guild spotlight"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>s.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:Bu,children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),s.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",kp(i.successRate)]})]}),s.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:xa(i.count)})]},i.id))})]})]})}function Fke({status:t}){const e=$u(t);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[s.jsx(Zf,{className:"h-3 w-3","aria-hidden":"true"}),c2(t)]})}function Bke(){const[t,e]=q.useState(y1),[n,r]=q.useState(!0),[i,a]=q.useState(!1),[o,c]=q.useState(null),u=q.useCallback(async(m=!1)=>{const g=Bn("AdminScansUploaded:overview");m?a(!0):r(!0);try{const v=pl(Tt,"scanUploads"),b=En(v,Qi("uploadedAt","desc"),rr(100)),k=(await wn(g,v,()=>_n(b))).docs.map(I=>$ke(I.id,I.data()));k.length>0?(e(k),c(null)):(e(y1),c("No uploads in window - showing fallback snapshot"))}catch(v){console.error("[ScansUploaded] Failed to load Firestore data",v),c("Live data unavailable - fallback snapshot active"),e(y1)}finally{un(g),m?a(!1):r(!1)}},[]);q.useEffect(()=>{u(!1)},[u]);const h=q.useMemo(()=>Vke(t),[t]);return{loading:n,refreshing:i,error:o,data:h,refresh:q.useCallback(()=>u(!0),[u])}}function $ke(t,e){const n=Oke(e.status);return{id:t,status:n,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof on?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function Oke(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function Vke(t){var C,M;const e=new Map,n=new Map,r=new Map,i=new Map,a=[];let o=0,c=0;const h=Date.now()-1440*60*1e3,m=new Map;t.forEach(T=>{var z,K,W,U,J,re,G,X,Y,se,ce,_e,Ae,ee,le,te,ye;const F=(z=e.get(T.status))!=null?z:0;if(e.set(T.status,F+1),T.uploadedAt&&T.uploadedAt.getTime()>=h&&(c+=1),T.processingMs!=null&&a.push(T.processingMs),T.fileSizeBytes!=null&&(o+=T.fileSizeBytes),T.status==="failed"&&T.errorCode){const ke=(K=n.get(T.errorCode))!=null?K:{count:0,lastSeen:null};n.set(T.errorCode,{count:ke.count+1,lastSeen:!ke.lastSeen||T.uploadedAt&&ke.lastSeen<T.uploadedAt?T.uploadedAt:ke.lastSeen})}const D=(U=(W=T.uploaderId)!=null?W:T.uploaderName)!=null?U:`anon-${T.id}`,V=(G=r.get(D))!=null?G:{name:(re=(J=T.uploaderName)!=null?J:T.uploaderId)!=null?re:"Unknown",success:0,total:0};if(r.set(D,{name:(Y=(X=T.uploaderName)!=null?X:T.uploaderId)!=null?Y:"Unknown",success:V.success+(T.status==="success"?1:0),total:V.total+1}),T.guildId||T.guildName){const ke=(ce=(se=T.guildId)!=null?se:T.guildName)!=null?ce:`guild-${T.id}`,Me=(ee=i.get(ke))!=null?ee:{name:(Ae=(_e=T.guildName)!=null?_e:T.guildId)!=null?Ae:"Unknown",success:0,total:0};i.set(ke,{name:(te=(le=T.guildName)!=null?le:T.guildId)!=null?te:"Unknown",success:Me.success+(T.status==="success"?1:0),total:Me.total+1})}if(T.uploadedAt){const ke=new Date(T.uploadedAt);ke.setMinutes(0,0,0);const Me=ke.toISOString(),Re=(ye=m.get(Me))!=null?ye:{hourLabel:zke(ke),timestamp:ke,total:0,success:0,failed:0};m.set(Me,{hourLabel:Re.hourLabel,timestamp:Re.timestamp,total:Re.total+1,success:Re.success+(T.status==="success"?1:0),failed:Re.failed+(T.status==="failed"?1:0)})}});const g=t.length,v=(C=e.get("success"))!=null?C:0,b=(M=e.get("failed"))!=null?M:0,_=a.length?a.reduce((T,F)=>T+F,0)/a.length:null,k=a.length?Uke(a,95):null,I=r.size,R=i.size,P=Array.from(e.entries()).map(([T,F])=>({status:T,count:F,share:g?F/g:0})).sort((T,F)=>F.count-T.count),N=Array.from(m.values()).sort((T,F)=>F.timestamp.getTime()-T.timestamp.getTime()).slice(0,12),x=Array.from(n.entries()).map(([T,F])=>({code:T,...F})).sort((T,F)=>F.count-T.count).slice(0,6),w=[...t].sort((T,F)=>{var D,V,z,K;return((V=(D=F.uploadedAt)==null?void 0:D.getTime())!=null?V:0)-((K=(z=T.uploadedAt)==null?void 0:z.getTime())!=null?K:0)}).slice(0,12),L=t.filter(T=>T.status==="failed").sort((T,F)=>{var D,V,z,K;return((V=(D=F.uploadedAt)==null?void 0:D.getTime())!=null?V:0)-((K=(z=T.uploadedAt)==null?void 0:z.getTime())!=null?K:0)}),j=Array.from(r.entries()).map(([T,F])=>({id:T,name:F.name,count:F.total,successRate:F.total?F.success/F.total:0})).sort((T,F)=>F.count-T.count).slice(0,5),S=Array.from(i.entries()).map(([T,F])=>({id:T,name:F.name,count:F.total,successRate:F.total?F.success/F.total:0})).sort((T,F)=>F.count-T.count).slice(0,5);return{metrics:{totalUploads:g,last24h:c,successRate:g?v/g:0,failed:b,avgProcessingMs:_,p95ProcessingMs:k,uniqueUploaders:I,uniqueGuilds:R,totalFileSizeBytes:o},statusBreakdown:P,timeline:N,issues:x,recentFailures:L,recentUploads:w,topUploaders:j,topGuilds:S}}function Uke(t,e){const n=[...t].sort((c,u)=>c-u);if(n.length===0)return 0;const r=e/100*(n.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return n[i];const o=r-i;return n[i]*(1-o)+n[a]*o}function xa(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function kp(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function b1(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function TI(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r+=1;return`${n.toFixed(n>=10?0:1)} ${e[r]}`}function $u(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function c2(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function zke(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function _1({label:t,value:e,hint:n}){return s.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),s.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),n&&s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:n})]})}function Gke(){var c,u,h,m,g,v;const{snapshot:t,error:e,loading:n,refresh:r}=OL(),i=(c=t==null?void 0:t.warnings)!=null?c:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,o=(m=t==null?void 0:t.stats)!=null?m:{};return s.jsx(os,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:n,children:n?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(_1,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),s.jsx(_1,{label:"Creators tracked",value:a?a.toString():"0"}),s.jsx(_1,{label:"API lookups",value:`${(g=o.youtubeLookups)!=null?g:0}  ${(v=o.twitchLookups)!=null?v:0}`,hint:"YouTube  Twitch"})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3",children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?s.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):s.jsx("ul",{className:"space-y-2",children:i.map((b,_)=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[s.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[b.creator,"  ",b.scope]}),s.jsx("div",{className:"text-xs text-[#B0C4D9]",children:b.message}),b.source&&s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:b.source})]},`${b.scope}-${_}`))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3",children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),s.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[s.jsxs("li",{children:["Add the following environment variables (e.g. in ",s.jsx("code",{children:".env.local"}),"):",s.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),s.jsxs("li",{children:["Execute the sync script:",s.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),s.jsxs("li",{children:["Commit/deploy the generated ",s.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&s.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const gy=`${Ka}/admin/users`,Hke=25,d2=()=>{if(!gy)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},II=t=>typeof t!="number"?null:on.fromMillis(t),u2=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:II(t.createdAt),lastLoginAt:II(t.lastLoginAt),status:t.status,notes:t.notes}},Wke=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:Hke)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const n=e.toString();return n?`?${n}`:""},h2=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function EI(t={}){var r;d2();const e=Wke(t),n=`${gy}${e}`;try{const i=await fetch(n,{credentials:"include"});if(!i.ok)throw await h2(i);const a=await i.json();return{users:a.users.map(u2),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function Kke(t){d2();const e=await fetch(`${gy}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await h2(e);const n=await e.json();return u2(n.user)}async function qke(t,e){d2();const n=await fetch(`${gy}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw await h2(n);const r=await n.json();return u2(r.user)}const t6=`${Ka}/admin/audit-events`,Qke=50,Yke=()=>{if(!t6)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},Xke=t=>typeof t!="number"?null:on.fromMillis(t),Jke=t=>{var e,n;return{id:t.id,createdAt:Xke(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(n=t.changes)!=null?n:{},context:t.context}},Zke=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:Qke)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const n=e.toString();return n?`?${n}`:""},eCe=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function M_(t={}){var i;Yke();const e=`${t6}${Zke(t)}`,n=await fetch(e,{credentials:"include"});if(!n.ok)throw await eCe(n);const r=await n.json();return{events:r.events.map(Jke),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function tCe(t,e=10){return M_({targetUserId:t,limit:e})}const sCe=20,nCe=50,Xm={borderColor:"#2B4C73",background:"#152A42"},s6={background:"#1A2F4A"};function rCe(){var c;const{status:t,user:e}=wa(),n=(c=e==null?void 0:e.roles)!=null?c:[],r=n.includes("admin"),i=r||n.includes("mod"),[a,o]=A.useState("users");return t==="loading"||t==="idle"?s.jsx(os,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[s.jsx(hc,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?s.jsx(os,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:s.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[s.jsx(Id,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:s.jsx(iCe,{activeTab:a,onChange:o}),children:a==="users"?s.jsx(aCe,{isAdmin:r}):s.jsx(oCe,{isAdmin:r,onSelectUser:u=>{o("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):s.jsx(os,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[s.jsx(oE,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),s.jsxs("p",{children:["You need at least the ",s.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function iCe({activeTab:t,onChange:e}){const n=[{key:"users",label:"Users",icon:s.jsx(Ax,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:s.jsx(s9,{className:"h-4 w-4"})}];return s.jsx("div",{className:"flex gap-2",children:n.map(r=>s.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function aCe({isAdmin:t}){const[e,n]=A.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=A.useState(""),a=B_(r,350);A.useEffect(()=>{n(te=>te.search===a?te:{...te,search:a})},[a]);const[o,c]=A.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=A.useState(0),m=A.useMemo(()=>({pageSize:sCe,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);A.useEffect(()=>{let te=!1;return c(ye=>({...ye,loading:!0,error:null})),EI(m).then(ye=>{te||c({items:ye.users,cursor:ye.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(ye=>{te||c(ke=>({...ke,loading:!1,loadingMore:!1,error:ye instanceof Error?ye.message:"Failed to load users"}))}),()=>{te=!0}},[m,u]);const g=()=>h(te=>te+1),v=async()=>{if(o.cursor){c(te=>({...te,loadingMore:!0,error:null}));try{const te=await EI({...m,cursor:o.cursor});c(ye=>({items:[...ye.items,...te.users],cursor:te.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(te){c(ye=>{var ke;return{...ye,loadingMore:!1,error:(ke=te==null?void 0:te.message)!=null?ke:"Failed to load additional users"}})}}},[b,_]=A.useState(null),[k,I]=A.useState(null),[R,P]=A.useState(!1),[N,x]=A.useState(null),[w,L]=A.useState(""),[j,S]=A.useState(!1),[C,M]=A.useState(null),[T,F]=A.useState(!1),[D,V]=A.useState(!1),[z,K]=A.useState([]),[W,U]=A.useState(!1),[J,re]=A.useState(null),G=A.useRef(null);A.useEffect(()=>{G.current=b},[b]);const X=A.useRef(!1);A.useEffect(()=>{X.current=j},[j]);const Y=A.useCallback(async te=>{var ye;U(!0),re(null);try{const ke=await tCe(te,12);G.current===te&&K(ke.events)}catch(ke){G.current===te&&re((ye=ke==null?void 0:ke.message)!=null?ye:"Failed to load audit history")}finally{G.current===te&&U(!1)}},[]);A.useEffect(()=>{var Me;if(!b){I(null),L(""),S(!1),K([]),re(null),V(!1);return}const te=b,ye=o.items.find(Re=>Re.id===te);ye?(I(ye),L((Me=ye.notes)!=null?Me:"")):(I(null),L("")),S(!1),P(!0),x(null);let ke=!1;return Kke(te).then(Re=>{var Ee;ke||G.current!==te||(I(Re),L((Ee=Re.notes)!=null?Ee:""),S(!1),P(!1))}).catch(Re=>{var Ee;ke||G.current!==te||(P(!1),x((Ee=Re==null?void 0:Re.message)!=null?Ee:"Failed to load user"))}),Y(te),()=>{ke=!0}},[b,o.items,Y]),A.useEffect(()=>{var ye;if(!b)return;const te=o.items.find(ke=>ke.id===b);te&&(I(ke=>ke&&ke.id===te.id?{...ke,...te}:te),X.current||L((ye=te.notes)!=null?ye:""))},[o.items,b]);const se=A.useCallback(te=>{c(ye=>({...ye,items:ye.items.map(ke=>ke.id===te.id?te:ke)}))},[]),ce=A.useCallback(async te=>{var ye,ke;if(k){F(!0),M(null);try{const Me=await qke(k.id,te);I(Me),se(Me),"notes"in te&&(S(!1),L((ye=Me.notes)!=null?ye:"")),await Y(Me.id)}catch(Me){M((ke=Me==null?void 0:Me.message)!=null?ke:"Failed to update user")}finally{F(!1)}}},[k,Y,se]),_e=te=>{if(!k||!t||te==="user")return;const ye=new Set(k.roles);ye.has(te)?ye.delete(te):ye.add(te),ye.add("user"),ce({roles:Array.from(ye)})},Ae=te=>{!k||!t||F_(k.status)===te||te==="banned"&&!window.confirm(`Ban ${Jm(k)}? They will lose access to the control panel.`)||ce({status:te})},ee=te=>{L(te),S(!0)},le=()=>{!k||!t||!j||ce({notes:w.trim().length?w:null})};return A.useEffect(()=>{if(typeof window=="undefined")return;const te=ye=>{const ke=ye.detail;ke!=null&&ke.userId&&_(ke.userId)};return window.addEventListener("sf-admin-open-user",te),()=>{window.removeEventListener("sf-admin-open-user",te)}},[]),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:Xm,children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Iv,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:te=>i(te.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsx(xv,{label:"Role",value:e.role,onChange:te=>n(ye=>({...ye,role:te})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),s.jsx(xv,{label:"Status",value:e.status,onChange:te=>n(ye=>({...ye,status:te})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),s.jsx(xv,{label:"Provider",value:e.provider,onChange:te=>n(ye=>({...ye,provider:te})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[s.jsx(Ex,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[s.jsxs("div",{className:"rounded-2xl border",style:Xm,children:[s.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsxs("span",{className:"text-[#B0C4D9]",children:[o.items.length," users ",e.search?"filtered":""]}),o.loading&&s.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[s.jsx(hc,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[s.jsx("thead",{style:s6,children:s.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[s.jsx("th",{className:"px-4 py-2",children:"User ID"}),s.jsx("th",{className:"px-4 py-2",children:"Display name"}),s.jsx("th",{className:"px-4 py-2",children:"Role"}),s.jsx("th",{className:"px-4 py-2",children:"Status"}),s.jsx("th",{className:"px-4 py-2",children:"Providers"}),s.jsx("th",{className:"px-4 py-2",children:"Created"}),s.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),s.jsx("tbody",{children:o.items.map(te=>{var ke,Me,Re;const ye=te.id===b;return s.jsxs("tr",{onClick:()=>_(te.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${ye?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[s.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:te.userId}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r6,{url:o6(te),name:Jm(te)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:Jm(te)}),(ke=te.profile)!=null&&ke.displayName&&te.profile.displayName!==te.displayName?s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:te.profile.displayName}):null]})]})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(i6,{role:a6(te.roles)})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(cCe,{status:F_(te.status)})}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(vx,{provider:"discord",active:!!((Me=te.providers)!=null&&Me.discord)}),s.jsx(vx,{provider:"google",active:!!((Re=te.providers)!=null&&Re.google)})]})}),s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:qu(te.createdAt)}),s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:qu(te.lastLoginAt)})]},te.id)})})]}),!o.loading&&!o.items.length&&s.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),o.error&&s.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[s.jsx(Rm,{className:"h-3.5 w-3.5"}),o.error]}),s.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsx("span",{className:"text-[#8AA5C4]",children:o.cursor?"More users available":"End of list"}),s.jsx("button",{type:"button",onClick:v,disabled:!o.cursor||o.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:o.loadingMore?"Loading...":"Load more"})]})]}),s.jsx("aside",{className:"rounded-2xl border p-3",style:Xm,children:k?s.jsx(lCe,{user:k,isAdmin:t,detailLoading:R,detailError:N,notesValue:w,notesDirty:j,onNotesChange:ee,onNotesSave:le,onRoleToggle:_e,onStatusChange:Ae,actionError:C,actionPending:T,auditEntries:z,auditLoading:W,auditError:J,onRefreshAudit:()=>k&&Y(k.id),showRawJson:D,toggleRawJson:()=>V(te=>!te)}):s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[s.jsx(b7,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function oCe({isAdmin:t,onSelectUser:e}){const[n,r]=A.useState({actor:"",target:"",action:"all"}),[i,a]=A.useState(""),[o,c]=A.useState(""),u=B_(i,350),h=B_(o,350);A.useEffect(()=>{r(R=>R.actor===u&&R.target===h?R:{...R,actor:u,target:h})},[u,h]);const[m,g]=A.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[v,b]=A.useState(0),_=A.useMemo(()=>{const R=n.action==="all"?void 0:n.action,P=n.actor.includes(":")?n.actor:void 0,N=n.target.includes(":")?n.target:void 0;return{limit:nCe,action:R,actorUserId:P,targetUserId:N}},[n]);A.useEffect(()=>{let R=!1;return g(P=>({...P,loading:!0,error:null})),M_(_).then(P=>{R||g({items:P.events,cursor:P.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(P=>{R||g(N=>{var x;return{...N,loading:!1,loadingMore:!1,error:(x=P==null?void 0:P.message)!=null?x:"Failed to load audit log"}})}),()=>{R=!0}},[_,v]);const k=async()=>{if(m.cursor){g(R=>({...R,loadingMore:!0,error:null}));try{const R=await M_({..._,cursor:m.cursor});g(P=>({items:[...P.items,...R.events],cursor:R.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(R){g(P=>{var N;return{...P,loadingMore:!1,error:(N=R==null?void 0:R.message)!=null?N:"Failed to load more events"}})}}},I=A.useMemo(()=>{const R=n.actor.trim().toLowerCase(),P=n.target.trim().toLowerCase();return m.items.filter(N=>{var L;const x=!R||N.actorUserId.toLowerCase().includes(R)||((L=N.actorDisplayName)!=null?L:"").toLowerCase().includes(R),w=!P||N.targetUserId.toLowerCase().includes(P);return x&&w})},[m.items,n.actor,n.target]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:Xm,children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Iv,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:R=>a(R.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Iv,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Target user id",value:o,onChange:R=>c(R.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsx(xv,{label:"Action",value:n.action,onChange:R=>r(P=>({...P,action:R})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("button",{type:"button",onClick:()=>b(R=>R+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[s.jsx(Ex,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),s.jsxs("div",{className:"rounded-2xl border",style:Xm,children:[s.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsxs("span",{className:"text-[#8AA5C4]",children:[I.length," events"]}),m.loading&&s.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[s.jsx(hc,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[s.jsx("thead",{style:s6,children:s.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[s.jsx("th",{className:"px-4 py-2",children:"Time"}),s.jsx("th",{className:"px-4 py-2",children:"Actor"}),s.jsx("th",{className:"px-4 py-2",children:"Target User"}),s.jsx("th",{className:"px-4 py-2",children:"Action"}),s.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),s.jsx("tbody",{children:I.map(R=>{var P;return s.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:qu(R.createdAt)}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("div",{className:"text-white",children:(P=R.actorDisplayName)!=null?P:"N/A"}),s.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:R.actorUserId})]}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(R.targetUserId),children:R.targetUserId})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(n6,{action:R.action})}),s.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:R.summary})]},R.id)})})]}),!I.length&&!m.loading&&s.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),m.error&&s.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[s.jsx(Rm,{className:"h-3.5 w-3.5"}),m.error]}),s.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsx("span",{className:"text-[#8AA5C4]",children:m.cursor?"More events available":"End of audit log"}),s.jsx("button",{type:"button",onClick:k,disabled:!m.cursor||m.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:m.loadingMore?"Loading...":"Load more"})]})]}),!t&&s.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function lCe({user:t,isAdmin:e,detailLoading:n,detailError:r,notesValue:i,notesDirty:a,onNotesChange:o,onNotesSave:c,onRoleToggle:u,onStatusChange:h,actionError:m,actionPending:g,auditEntries:v,auditLoading:b,auditError:_,onRefreshAudit:k,showRawJson:I,toggleRawJson:R}){var N,x;const P=a6(t.roles);return s.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[n&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[s.jsx(hc,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[s.jsx(Rm,{className:"h-3.5 w-3.5"}),r]}),s.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(r6,{url:o6(t),name:Jm(t),size:56}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"truncate text-base text-white",children:Jm(t)}),s.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),s.jsxs("div",{className:"mt-1 flex gap-1",children:[s.jsx(i6,{role:P}),s.jsx(vx,{provider:"discord",active:!!((N=t.providers)!=null&&N.discord)}),s.jsx(vx,{provider:"google",active:!!((x=t.providers)!=null&&x.google)})]})]})]})}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(w=>s.jsx("button",{type:"button",onClick:()=>u(w),disabled:!e||w==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(w)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:w},w))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),s.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(w=>s.jsx("button",{type:"button",onClick:()=>h(w),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${F_(t.status)===w?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:w},w))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&s.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),s.jsx("textarea",{value:i,onChange:w=>o(w.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),s.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hc,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&s.jsx("button",{type:"button",onClick:c,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),m&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[s.jsx(Rm,{className:"h-3 w-3"}),m]})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),s.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[s.jsx(Ex,{className:"h-3 w-3"}),"Refresh"]})]}),b&&s.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[s.jsx(hc,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),_&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[s.jsx(Rm,{className:"h-3 w-3"}),_]}),!b&&!v.length&&s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),s.jsx("ul",{className:"space-y-2",children:v.map(w=>{var L;return s.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[s.jsx("span",{children:qu(w.createdAt)}),s.jsx(n6,{action:w.action})]}),s.jsx("div",{className:"mt-1 text-white",children:(L=w.actorDisplayName)!=null?L:w.actorUserId}),s.jsx("div",{className:"text-[#C8D6EC]",children:w.summary})]},w.id)})})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),s.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[s.jsx(y9,{className:"h-3 w-3"}),I?"Hide raw JSON":"Show raw JSON"]})]}),s.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[s.jsx(Wf,{label:"Created",value:qu(t.createdAt)}),s.jsx(Wf,{label:"Last login",value:qu(t.lastLoginAt)}),s.jsx(Wf,{label:"Primary provider",value:t.primaryProvider}),s.jsx(Wf,{label:"Roles",value:t.roles.join(", ")})]}),I&&s.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function n6({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return s.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function Wf({label:t,value:e}){return e?s.jsxs("div",{className:"flex justify-between gap-2",children:[s.jsx("span",{className:"text-[#6E86A6]",children:t}),s.jsx("span",{className:"text-white",children:e})]}):null}function xv({label:t,value:e,options:n,onChange:r}){return s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[#8AA5C4]",children:t}),s.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:n.map(i=>s.jsx("option",{value:i.value,children:i.label},i.value))})]})}function r6({url:t,name:e,size:n=32}){return t?s.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:n,height:n,borderColor:"#2B4C73"}}):s.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:n,height:n,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function i6({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return s.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function cCe({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:s.jsx(v7,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:s.jsx(Id,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:s.jsx(a7,{className:"h-3 w-3"})}},{label:n,color:r,icon:i}=e[t];return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,n]})}function vx({provider:t,active:e}){const n=t==="discord"?"D":"G";return s.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:n})}function a6(t){const e=["admin","mod","creator","user"];for(const n of e)if(t.includes(n))return n;return"user"}function Jm(t){var e,n,r,i,a,o,c,u,h;return(h=(u=(a=(n=t.displayName)!=null?n:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(c=(o=t.providers)==null?void 0:o.google)==null?void 0:c.displayName)!=null?h:t.userId}function o6(t){var e,n,r,i,a,o,c;return(c=(o=(r=t.avatarUrl)!=null?r:(n=(e=t.providers)==null?void 0:e.discord)==null?void 0:n.avatarUrl)!=null?o:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?c:null}function F_(t){return t!=null?t:"active"}function qu(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function B_(t,e){const[n,r]=A.useState(t);return A.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),n}const dCe="_page_rpt6g_1",uCe="_tabs_rpt6g_17",hCe="_tab_rpt6g_17",mCe="_tabActive_rpt6g_71",pCe="_banner_rpt6g_87",gCe="_bannerSuccess_rpt6g_101",fCe="_bannerError_rpt6g_113",vCe="_card_rpt6g_125",xCe="_cardTitle_rpt6g_145",yCe="_settingsForm_rpt6g_159",bCe="_formRow_rpt6g_173",_Ce="_selectInput_rpt6g_185",wCe="_checkboxRow_rpt6g_203",jCe="_settingsFooter_rpt6g_227",SCe="_inlineStatus_rpt6g_245",NCe="_helperText_rpt6g_259",kCe="_secondaryButton_rpt6g_271",CCe="_cardSubtitle_rpt6g_297",TCe="_identityHeader_rpt6g_309",ICe="_identityAvatar_rpt6g_323",ECe="_identityName_rpt6g_337",ACe="_identityProvider_rpt6g_351",PCe="_identityForm_rpt6g_363",RCe="_nameInputWrap_rpt6g_379",LCe="_nameLabel_rpt6g_395",DCe="_nameInput_rpt6g_379",MCe="_nameSaveButton_rpt6g_427",FCe="_feedbackError_rpt6g_471",BCe="_feedbackSuccess_rpt6g_483",$Ce="_metaGrid_rpt6g_495",OCe="_metaItem_rpt6g_507",VCe="_metaLabel_rpt6g_521",UCe="_metaValue_rpt6g_535",zCe="_serviceList_rpt6g_549",GCe="_serviceRow_rpt6g_559",HCe="_serviceName_rpt6g_587",WCe="_serviceStatus_rpt6g_601",KCe="_serviceAction_rpt6g_613",qCe="_securityText_rpt6g_645",QCe="_securityNote_rpt6g_657",YCe="_logoutButton_rpt6g_669",XCe="_loadingState_rpt6g_701",JCe="_emptyState_rpt6g_703",ZCe="_emptyStateTitle_rpt6g_721",eTe="_emptyStateText_rpt6g_733",tTe="_primaryButton_rpt6g_745",Je={page:dCe,tabs:uCe,tab:hCe,tabActive:mCe,banner:pCe,bannerSuccess:gCe,bannerError:fCe,card:vCe,cardTitle:xCe,settingsForm:yCe,formRow:bCe,selectInput:_Ce,checkboxRow:wCe,settingsFooter:jCe,inlineStatus:SCe,helperText:NCe,secondaryButton:kCe,cardSubtitle:CCe,identityHeader:TCe,identityAvatar:ICe,identityName:ECe,identityProvider:ACe,identityForm:PCe,nameInputWrap:RCe,nameLabel:LCe,nameInput:DCe,nameSaveButton:MCe,feedbackError:FCe,feedbackSuccess:BCe,metaGrid:$Ce,metaItem:OCe,metaLabel:VCe,metaValue:UCe,serviceList:zCe,serviceRow:GCe,serviceName:HCe,serviceStatus:WCe,serviceAction:KCe,securityText:qCe,securityNote:QCe,logoutButton:YCe,loadingState:XCe,emptyState:JCe,emptyStateTitle:ZCe,emptyStateText:eTe,primaryButton:tTe},sTe="_header_t1aqh_1",nTe="_headerTexts_t1aqh_17",rTe="_tableWrap_t1aqh_31",iTe="_table_t1aqh_31",aTe="_tableRow_t1aqh_87",oTe="_dateCell_t1aqh_95",lTe="_actionsHeader_t1aqh_103",cTe="_actionCell_t1aqh_111",dTe="_unlinkButton_t1aqh_119",uTe="_unlinkIcon_t1aqh_175",hTe="_muted_t1aqh_185",mTe="_emptyState_t1aqh_193",pTe="_emptyTitle_t1aqh_209",gTe="_emptyDescription_t1aqh_221",fTe="_emptyCta_t1aqh_233",vTe="_helpAccordion_t1aqh_277",xTe="_helpToggle_t1aqh_291",yTe="_helpToggleOpen_t1aqh_331",bTe="_helpToggleAction_t1aqh_339",_Te="_helpBody_t1aqh_351",wTe="_helpList_t1aqh_359",jTe="_helpListItem_t1aqh_377",STe="_helpFootnote_t1aqh_385",NTe="_confirmBackdrop_t1aqh_397",kTe="_confirmDialog_t1aqh_419",CTe="_confirmTitle_t1aqh_443",TTe="_confirmText_t1aqh_457",ITe="_confirmName_t1aqh_473",ETe="_confirmMeta_t1aqh_483",ATe="_errorText_t1aqh_491",PTe="_confirmActions_t1aqh_503",RTe="_cancelButton_t1aqh_517",LTe="_confirmButton_t1aqh_519",xs={header:sTe,headerTexts:nTe,tableWrap:rTe,table:iTe,tableRow:aTe,dateCell:oTe,actionsHeader:lTe,actionCell:cTe,unlinkButton:dTe,unlinkIcon:uTe,muted:hTe,emptyState:mTe,emptyTitle:pTe,emptyDescription:gTe,emptyCta:fTe,helpAccordion:vTe,helpToggle:xTe,helpToggleOpen:yTe,helpToggleAction:bTe,helpBody:_Te,helpList:wTe,helpListItem:jTe,helpFootnote:STe,confirmBackdrop:NTe,confirmDialog:kTe,confirmTitle:CTe,confirmText:TTe,confirmName:ITe,confirmMeta:ETe,errorText:ATe,confirmActions:PTe,cancelButton:RTe,confirmButton:LTe},DTe=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},w1=t=>{var n;const e=(n=t.name)==null?void 0:n.trim();return e||(t.playerId!==void 0&&t.playerId!==null?`#${t.playerId}`:"-")},MTe=({user:t,refreshSession:e,openHelp:n=!1})=>{const{t:r}=Vs(),i=A.useMemo(()=>{var C;return(C=t.linkedPlayers)!=null?C:[]},[t.linkedPlayers]),[a,o]=A.useState(!1),[c,u]=A.useState(!1),[h,m]=A.useState(null),[g,v]=A.useState(null),[b,_]=A.useState(()=>n||i.length===0),k=A.useMemo(()=>`${Ka}/user/unlink-character`,[]);q.useEffect(()=>{n&&_(!0)},[n]),q.useEffect(()=>{i.length===0&&_(!0)},[i.length]);const I=async()=>{o(!0);try{await e({silent:!0})}catch(C){console.error("[Account] Failed to refresh linked players",C)}finally{o(!1)}},R=C=>{m(C),v(null)},P=()=>{c||(m(null),v(null))},N=async()=>{var C;if(h){if(!k){v(r("account.connectedCharacters.errors.serviceUnavailable","Auth service is not configured for unlinking."));return}u(!0),o(!0),v(null);try{const M=await fetch(k,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:h.playerId,server:h.server})});if(!M.ok){const T=await M.json().catch(()=>null),F=(T==null?void 0:T.error)||(T==null?void 0:T.message)||r("account.connectedCharacters.errors.unlink","Could not unlink character.");throw new Error(F)}await e({silent:!0}),m(null)}catch(M){const T=(C=M==null?void 0:M.message)!=null?C:r("account.connectedCharacters.errors.unlink","Could not unlink character.");v(T)}finally{u(!1),o(!1)}}},x=C=>C?C.startsWith("discord_")?r("account.connectedCharacters.method.discord","Discord bot"):C:"-",w=A.useMemo(()=>[r("account.connectedCharacters.help.steps.link",'Link a character via the Discord bot using the "!connect char" command.'),r("account.connectedCharacters.help.steps.verify","We match the character to your latest verified scan; keep your game data up to date."),r("account.connectedCharacters.help.steps.refresh","After linking, click Refresh here to sync the latest characters from the auth service."),r("account.connectedCharacters.help.steps.unlink","You can unlink any character in the Actions column; the source column shows how it was linked.")],[r]),L=()=>{const C="connected-characters-help";return s.jsxs("div",{className:xs.helpAccordion,children:[s.jsxs("button",{type:"button",className:`${xs.helpToggle} ${b?xs.helpToggleOpen:""}`,"aria-expanded":b,"aria-controls":C,onClick:()=>_(M=>!M),children:[s.jsx("span",{children:r("account.connectedCharacters.help.title","How does linking work?")}),s.jsx("span",{className:xs.helpToggleAction,children:b?r("account.connectedCharacters.help.hide","Hide"):r("account.connectedCharacters.help.show","Show")})]}),b&&s.jsxs("div",{id:C,className:xs.helpBody,children:[s.jsx("ul",{className:xs.helpList,children:w.map((M,T)=>s.jsx("li",{className:xs.helpListItem,children:M},`help-step-${T}`))}),s.jsx("p",{className:xs.helpFootnote,children:r("account.connectedCharacters.help.footnote","Tip: Click Refresh after linking or unlinking to update this table.")})]})]})},j=()=>s.jsx("div",{className:xs.tableWrap,children:s.jsxs("table",{className:xs.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:r("account.connectedCharacters.columns.character","Character")}),s.jsx("th",{children:r("account.connectedCharacters.columns.server","Server")}),s.jsx("th",{children:r("account.connectedCharacters.columns.playerId","Player ID")}),s.jsx("th",{children:r("account.connectedCharacters.columns.class","Class")}),s.jsx("th",{children:r("account.connectedCharacters.columns.level","Level")}),s.jsx("th",{children:r("account.connectedCharacters.columns.guild","Guild")}),s.jsx("th",{children:r("account.connectedCharacters.columns.lastVerified","Last linked")}),s.jsx("th",{children:r("account.connectedCharacters.columns.source","Source")}),s.jsx("th",{className:xs.actionsHeader,children:r("account.connectedCharacters.columns.actions","Actions")})]})}),s.jsx("tbody",{children:i.map((C,M)=>{var K,W,U,J;const T=`${(K=C.server)!=null?K:"unknown"}-${(W=C.playerId)!=null?W:M}`,F=(U=C.level)!=null?U:"-",D=C.guildName||"-",V=C.class||"-",z=x(C.method);return s.jsxs("tr",{className:xs.tableRow,children:[s.jsx("td",{children:w1(C)}),s.jsx("td",{children:C.server||"-"}),s.jsx("td",{children:(J=C.playerId)!=null?J:"-"}),s.jsx("td",{className:C.class?void 0:xs.muted,children:V}),s.jsx("td",{className:typeof C.level!="number"?xs.muted:void 0,children:F}),s.jsx("td",{className:C.guildName?void 0:xs.muted,children:D}),s.jsx("td",{className:xs.dateCell,children:DTe(C.verifiedAt)}),s.jsx("td",{className:C.method?void 0:xs.muted,children:z}),s.jsx("td",{className:xs.actionCell,children:s.jsx("button",{type:"button",className:xs.unlinkButton,onClick:()=>R(C),title:r("account.connectedCharacters.actions.unlink","Disconnect character"),"aria-label":`${r("account.connectedCharacters.actions.unlink","Disconnect character")} ${w1(C)}`,disabled:c||a,children:s.jsx("svg",{className:xs.unlinkIcon,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M9 4h6a1 1 0 0 1 1 1v2h5v2h-2.1l-1.05 11.2A2 2 0 0 1 15.86 22H8.14a2 2 0 0 1-1.99-1.8L5.1 9H3V7h5V5a1 1 0 0 1 1-1Zm5 2V6H10v2h4Zm-6.93 3 1.02 10.8a1 1 0 0 0 1 .9h7.72a1 1 0 0 0 1-.9L18.83 9ZM10 11v7h2v-7Zm4 0v7h2v-7Z"})})})})]},T)})})]})}),S=()=>{var M;if(!h)return null;const C="unlink-dialog-title";return s.jsx("div",{className:xs.confirmBackdrop,role:"dialog","aria-modal":"true","aria-labelledby":C,children:s.jsxs("div",{className:xs.confirmDialog,children:[s.jsx("h3",{id:C,className:xs.confirmTitle,children:r("account.connectedCharacters.confirmation.title","Are you sure you want to unlink this character?")}),s.jsxs("p",{className:xs.confirmText,children:[s.jsx("span",{className:xs.confirmName,children:w1(h)}),s.jsxs("span",{className:xs.confirmMeta,children:[h.server||"-"," - #",(M=h.playerId)!=null?M:"-"]})]}),g&&s.jsx("p",{className:xs.errorText,children:g}),s.jsxs("div",{className:xs.confirmActions,children:[s.jsx("button",{type:"button",className:xs.cancelButton,onClick:P,disabled:c,children:r("account.connectedCharacters.confirmation.cancel","Cancel")}),s.jsx("button",{type:"button",className:xs.confirmButton,onClick:N,disabled:c,children:c?r("account.connectedCharacters.confirmation.confirming","Unlinking..."):r("account.connectedCharacters.confirmation.confirm","Yes, unlink")})]})]})})};return t?s.jsxs("section",{className:Je.card,children:[s.jsxs("div",{className:xs.header,children:[s.jsxs("div",{className:xs.headerTexts,children:[s.jsx("h2",{className:Je.cardTitle,children:r("account.connectedCharacters.title","Connected characters")}),s.jsx("p",{className:Je.cardSubtitle,children:r("account.connectedCharacters.subtitle","These game characters are linked to your SFDataHub account.")})]}),s.jsx("button",{type:"button",className:Je.secondaryButton,onClick:I,disabled:a,children:a?r("account.connectedCharacters.actions.refreshing","Refreshing..."):r("account.connectedCharacters.actions.refresh","Refresh")})]}),a&&s.jsx("p",{className:Je.helperText,children:r("account.connectedCharacters.loading","Refreshing characters...")}),L(),!a&&i.length===0&&s.jsxs("div",{className:xs.emptyState,children:[s.jsx("p",{className:xs.emptyTitle,children:r("account.connectedCharacters.empty.title","No characters linked yet")}),s.jsx("p",{className:xs.emptyDescription,children:r("account.connectedCharacters.empty.description",'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.')}),s.jsx("button",{type:"button",className:xs.emptyCta,onClick:()=>_(!0),children:r("account.connectedCharacters.empty.cta","Click to learn how linking works")})]}),i.length>0&&j(),S()]}):null},l6="user_settings";async function AI(t){if(!t)return null;try{const e=ps(Tt,l6,t),n=await pn(e);if(!n.exists())return null;const r=n.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function FTe(t,e){if(t)try{const n=ps(Tt,l6,t);await gl(n,e,{merge:!0})}catch(n){throw console.error("[UserSettings] Failed to update settings",n),n}}const c6="user_tools_state";async function BTe(t){var e;if(!t)return null;try{const n=ps(Tt,c6,t),r=await pn(n);return r.exists()&&(e=r.data())!=null?e:null}catch(n){return console.warn("[UserToolsSettings] Failed to load tools settings",n),null}}async function $Te(t,e){if(t)try{const n=ps(Tt,c6,t),r={...e,updatedAt:new Date().toISOString()};await gl(n,r,{merge:!0})}catch(n){throw console.error("[UserToolsSettings] Failed to save tools settings",n),n}}const OTe="https://i.pravatar.cc/72",Kf=`${Ka}/auth/account/profile`,j1=`${Ka}/auth/google/link/start`,PI=3,RI=32,VTe=["overview","settings","tools","connected-characters"],LI=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},UTe=()=>{const{status:t,user:e,logout:n,refreshSession:r}=wa(),i=hi(),a=ir(),{t:o,i18n:c}=Vs(),[u,h]=A.useState("overview"),[m,g]=A.useState(null),[v,b]=A.useState(null),[_,k]=A.useState(!1),[I,R]=A.useState(null),[P,N]=A.useState(!1),[x,w]=A.useState(!1),[L,j]=A.useState(null),[S,C]=A.useState(null),[M,T]=A.useState(!0),[F,D]=A.useState(!1),[V,z]=A.useState(null),[K,W]=A.useState(!1),U=A.useMemo(()=>{const ie=new URLSearchParams(a.search);return ie.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:ie.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),J=t==="loading"||t==="idle",re=t==="authenticated"&&!!e,G=e==null?void 0:e.id,X=A.useMemo(()=>new URLSearchParams(a.search),[a.search]),Y=X.get("tab"),se=X.get("openHelp")==="1",ce=A.useMemo(()=>({language:c.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[c.language]);A.useEffect(()=>{if(!G){g(null),b(null),R(null),k(!1),j(null),C(null),T(!1),D(!1),z(null),W(!1);return}let ie=!0;return(async()=>{k(!0),R(null),w(!1);try{const ve=await AI(G),Te=ve?{...ce,...ve}:ce;if(!ie)return;g(Te),b(Te)}catch(ve){if(!ie)return;R(o("account.settings.error","Could not load settings."))}finally{ie&&k(!1)}})(),()=>{ie=!1}},[G,ce,o]),A.useEffect(()=>{if(!G)return;let ie=!0;const he={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{T(!0),z(null),W(!1);try{const Te=await BTe(G);if(!ie)return;const St=Te?{...he,...Te}:he;j(St),C(St)}catch(Te){if(!ie)return;z(o("account.tools.loadError","Could not load tools settings."))}finally{ie&&T(!1)}})(),()=>{ie=!1}},[G,o]),A.useEffect(()=>{Y&&VTe.includes(Y)&&Y!==u&&h(Y)},[Y,u]);const _e=(ie,he)=>{const ve=new URLSearchParams(a.search);ve.set("tab",ie),he!=null&&he.openHelp?ve.set("openHelp","1"):ve.delete("openHelp");const Te=ve.toString();i({pathname:a.pathname,search:Te?`?${Te}`:""},{replace:!0})},Ae=()=>{typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):i("/login")},ee=async()=>{await n(),i("/")},le=()=>{if(!j1){window.alert("Auth service is not configured for Google linking.");return}window.location.href=j1},te=()=>s.jsx("div",{className:Je.loadingState,children:"Checking session..."}),ye=()=>s.jsxs("div",{className:Je.emptyState,children:[s.jsx("p",{className:Je.emptyStateTitle,children:"You are not signed in."}),s.jsx("p",{className:Je.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),s.jsx("button",{type:"button",className:Je.primaryButton,onClick:Ae,children:"Go to sign-in"})]}),ke=()=>{if(!U)return null;const ie=U.type==="success"?`${Je.banner} ${Je.bannerSuccess}`:`${Je.banner} ${Je.bannerError}`;return s.jsx("div",{className:ie,children:U.message})},Me=()=>{var ut,_t,ot;if(!e)return null;const ie=(ut=e.providers)==null?void 0:ut.discord,he=(_t=e.providers)==null?void 0:_t.google,ve=!!ie,Te=!!he,St=!!j1,at=St?Te?he!=null&&he.displayName?`Connected as ${he.displayName}`:"Connected":"Not connected":"Auth service not configured",rt=[{key:"discord",name:"Discord",status:ve?`Connected as ${(ot=ie==null?void 0:ie.displayName)!=null?ot:e.displayName}`:"Not connected",actionLabel:ve?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:at,actionLabel:Te?"Connected":"Connect",disabled:Te||!St,onClick:Te||!St?void 0:le},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return s.jsxs("section",{className:Je.card,children:[s.jsx("h2",{className:Je.cardTitle,children:"Connected services"}),s.jsx("p",{className:Je.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),s.jsx("div",{className:Je.serviceList,children:rt.map(nt=>s.jsxs("div",{className:Je.serviceRow,children:[s.jsxs("div",{children:[s.jsx("p",{className:Je.serviceName,children:nt.name}),s.jsx("p",{className:Je.serviceStatus,children:nt.status})]}),s.jsx("button",{type:"button",className:Je.serviceAction,disabled:nt.disabled,onClick:nt.onClick,children:nt.actionLabel})]},nt.key))})]})},Re=()=>s.jsxs("section",{className:Je.card,children:[s.jsx("h2",{className:Je.cardTitle,children:"Security & session"}),s.jsx("p",{className:Je.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),s.jsx("p",{className:Je.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),s.jsx("button",{type:"button",className:Je.logoutButton,onClick:ee,children:"Log out from this device"}),s.jsx("p",{className:Je.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),Ee=(ie,he)=>{m&&(g(ve=>({...ve!=null?ve:ce,[ie]:he})),w(!1))},Le=!!(m&&v&&JSON.stringify(m)!==JSON.stringify(v)),Fe=!!(L&&S&&JSON.stringify(L)!==JSON.stringify(S)),Be=async()=>{if(!(!G||!m||P||!Le))try{N(!0),R(null),await FTe(G,m),b(m),w(!0)}catch(ie){R(o("account.settings.saveError","Could not save settings. Please try again."))}finally{N(!1)}},je=(ie,he)=>{L&&(j(ve=>({...ve!=null?ve:{},[ie]:he})),W(!1))},ue=async()=>{if(!(!G||!L||F||!Fe))try{D(!0),z(null),await $Te(G,L),C(L),W(!0)}catch(ie){z(o("account.tools.save.error","Could not save settings. Please try again."))}finally{D(!1)}},Pe=()=>{var ie,he;return s.jsxs("section",{className:Je.card,children:[s.jsx("h2",{className:Je.cardTitle,children:o("account.settings.title","Settings")}),s.jsx("p",{className:Je.cardSubtitle,children:o("account.settings.subtitle","Configure your personal preferences.")}),_&&s.jsx("p",{className:Je.helperText,children:o("account.settings.loading","Loading settings...")}),I&&s.jsxs("div",{className:Je.feedbackError,children:[s.jsx("p",{children:I}),s.jsx("button",{type:"button",className:Je.secondaryButton,onClick:()=>{G&&(R(null),w(!1),k(!0),AI(G).then(ve=>{const Te=ve?{...ce,...ve}:ce;g(Te),b(Te)}).catch(()=>{R(o("account.settings.error","Could not load settings."))}).finally(()=>k(!1)))},children:o("account.settings.retry","Retry")})]}),m&&!_&&s.jsxs("div",{className:Je.settingsForm,children:[s.jsxs("div",{className:Je.formRow,children:[s.jsx("label",{className:Je.nameLabel,htmlFor:"settings-language",children:o("account.settings.language.label","Preferred language")}),s.jsxs("select",{id:"settings-language",className:Je.selectInput,value:(ie=m.language)!=null?ie:ce.language,onChange:ve=>Ee("language",ve.target.value),children:[s.jsx("option",{value:"en",children:o("topbar.lang_en","English")}),s.jsx("option",{value:"de",children:o("topbar.lang_de","Deutsch")})]})]}),s.jsxs("div",{className:Je.formRow,children:[s.jsx("label",{className:Je.nameLabel,htmlFor:"settings-section",children:o("account.settings.defaultSection.label","Default section")}),s.jsxs("select",{id:"settings-section",className:Je.selectInput,value:(he=m.defaultSection)!=null?he:ce.defaultSection,onChange:ve=>Ee("defaultSection",ve.target.value),children:[s.jsx("option",{value:"home",children:o("nav.home","Home")}),s.jsx("option",{value:"toplists",children:o("nav.toplists","Top Lists")}),s.jsx("option",{value:"guilds",children:o("nav.guilds","Guilds")}),s.jsx("option",{value:"tools",children:o("nav.tools","Tools")}),s.jsx("option",{value:"community",children:o("nav.community","Community")})]})]}),s.jsxs("label",{className:Je.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!m.compactTables,onChange:ve=>Ee("compactTables",ve.target.checked)}),s.jsx("span",{children:o("account.settings.compactTables.label","Use compact table layout")})]}),s.jsxs("label",{className:Je.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!m.showExperimentalFeatures,onChange:ve=>Ee("showExperimentalFeatures",ve.target.checked)}),s.jsx("span",{children:o("account.settings.experimental.label","Enable experimental features")})]})]}),s.jsxs("div",{className:Je.settingsFooter,children:[s.jsxs("div",{className:Je.inlineStatus,children:[x?s.jsx("span",{className:Je.feedbackSuccess,children:o("account.settings.saved","Settings saved.")}):Le?null:s.jsx("span",{className:Je.helperText,children:o("account.settings.noChanges","No changes to save.")}),P&&s.jsx("span",{className:Je.helperText,children:o("account.settings.saving","Saving...")})]}),s.jsx("button",{type:"button",className:Je.primaryButton,disabled:!Le||P||!m,onClick:Be,children:o("account.settings.save","Save settings")})]})]})},De=()=>{const ie=[{key:"overview",label:o("account.tabs.overview","Overview")},{key:"settings",label:o("account.tabs.settings","Settings")},{key:"tools",label:o("account.tabs.tools","Tools")},{key:"connected-characters",label:o("account.tabs.connectedCharacters","Connected characters")}];return s.jsx("div",{className:Je.tabs,role:"tablist","aria-label":"Account sections",children:ie.map(he=>{const ve=u===he.key;return s.jsx("button",{type:"button",className:`${Je.tab} ${ve?Je.tabActive:""}`,onClick:()=>{h(he.key),_e(he.key,{openHelp:he.key==="connected-characters"&&se})},role:"tab","aria-selected":ve,children:he.label},he.key)})})},it=()=>{var ie;if(!e)return null;switch(u){case"overview":return s.jsxs(s.Fragment,{children:[s.jsx(zTe,{user:e,refreshSession:r}),Me(),Re()]});case"settings":return Pe();case"tools":return s.jsxs("section",{className:Je.card,children:[s.jsx("h2",{className:Je.cardTitle,children:o("account.tools.title","Tools settings")}),s.jsx("p",{className:Je.cardSubtitle,children:o("account.tools.subtitle","Configure how tools behave for your account.")}),M&&s.jsx("p",{className:Je.helperText,children:o("account.tools.loading","Loading tools settings...")}),V&&s.jsx("p",{className:Je.feedbackError,children:V}),L&&!M&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:Je.settingsForm,children:[s.jsxs("div",{className:Je.formRow,children:[s.jsx("label",{className:Je.nameLabel,htmlFor:"tools-default-set",children:o("account.tools.defaultSet.label","Default set ID")}),s.jsx("input",{id:"tools-default-set",type:"text",className:Je.nameInput,value:(ie=L.defaultSetId)!=null?ie:"",onChange:he=>je("defaultSetId",he.target.value),placeholder:o("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),s.jsxs("label",{className:Je.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!L.showToolsIntro,onChange:he=>je("showToolsIntro",he.target.checked)}),s.jsx("span",{children:o("account.tools.showIntro.label","Show tools intro")})]}),s.jsxs("label",{className:Je.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!L.enableExperimentalTools,onChange:he=>je("enableExperimentalTools",he.target.checked)}),s.jsx("span",{children:o("account.tools.experimental.label","Enable experimental tools")})]})]}),s.jsxs("div",{className:Je.settingsFooter,children:[s.jsxs("div",{className:Je.inlineStatus,children:[K?s.jsx("span",{className:Je.feedbackSuccess,children:o("account.tools.save.success","Settings saved.")}):Fe?null:s.jsx("span",{className:Je.helperText,children:o("account.tools.save.noChanges","No changes to save.")}),F&&s.jsx("span",{className:Je.helperText,children:o("account.tools.save.saving","Saving...")})]}),s.jsx("button",{type:"button",className:Je.primaryButton,disabled:M||F||!Fe||!L,onClick:ue,children:o("account.tools.save.cta","Save settings")})]})]})]});case"connected-characters":return s.jsx(MTe,{user:e,refreshSession:r,openHelp:se});default:return null}},yt=()=>J?te():re?s.jsxs(s.Fragment,{children:[De(),it()]}):ye();return s.jsx(os,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:s.jsxs("div",{className:Je.page,children:[ke(),yt()]})})};function zTe({user:t,refreshSession:e}){var L;const[n,r]=A.useState(()=>{var j;return(j=t==null?void 0:t.displayName)!=null?j:""}),[i,a]=A.useState(!1),[o,c]=A.useState(null),[u,h]=A.useState(!1),m=(t==null?void 0:t.avatarUrl)||OTe,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",v=(L=t==null?void 0:t.displayName)!=null?L:"",b=n.trim(),_=b.length===0||b.length>=PI&&b.length<=RI,k=!!t&&b.length>0&&b!==v,I=!!(Kf&&_&&k&&!i),R=b.length>0&&!_?`Name must be between ${PI} and ${RI} characters.`:null;A.useEffect(()=>{var j;r((j=t==null?void 0:t.displayName)!=null?j:""),h(!1),c(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const P=A.useMemo(()=>{var j;return t?[{label:"SFDataHub ID",value:t.id},(j=t.roles)!=null&&j.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:LI(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:LI(t.lastLoginAt)}:null].filter(S=>!!(S!=null&&S.value)):[]},[t]),N=async()=>{var j,S;if(!I||!Kf){Kf||c("Auth service is not configured.");return}try{a(!0),c(null),h(!1);const C=await fetch(Kf,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:b})});if(!C.ok){const M=await C.json().catch(()=>null);throw new Error((j=M==null?void 0:M.error)!=null?j:"Failed to update name.")}await e(),h(!0),r(b)}catch(C){const M=(S=C==null?void 0:C.message)!=null?S:"Failed to update name.";c(M)}finally{a(!1)}},x=j=>{j.key==="Enter"&&(j.preventDefault(),I&&N())},w=()=>{I&&N()};return t?s.jsxs("section",{className:Je.card,children:[s.jsxs("div",{className:Je.identityHeader,children:[s.jsx("img",{src:m,alt:"",className:Je.identityAvatar}),s.jsxs("div",{children:[s.jsx("p",{className:Je.identityName,children:t.displayName||"Unbenannter Nutzer"}),s.jsxs("p",{className:Je.identityProvider,children:[g," sign-in"]})]}),s.jsx("span",{className:Je.statusBadge,children:"Verified"})]}),s.jsxs("div",{className:Je.identityForm,children:[s.jsxs("div",{className:Je.nameInputWrap,children:[s.jsx("label",{className:Je.nameLabel,children:"Display name"}),s.jsx("input",{type:"text",className:Je.nameInput,value:n,onChange:j=>r(j.target.value),onKeyDown:x,onBlur:w,placeholder:"Enter your display name"})]}),s.jsx("button",{type:"button",className:Je.nameSaveButton,disabled:!I,onClick:N,children:i?"Saving...":"Save"})]}),R&&s.jsx("p",{className:Je.feedbackError,children:R}),o&&s.jsx("p",{className:Je.feedbackError,children:o}),u&&s.jsx("p",{className:Je.feedbackSuccess,children:"Name updated."}),P.length>0&&s.jsx("div",{className:Je.metaGrid,children:P.map(j=>s.jsxs("div",{className:Je.metaItem,children:[s.jsx("span",{className:Je.metaLabel,children:j.label}),s.jsx("span",{className:Je.metaValue,children:j.value})]},j.label))})]}):null}const Ft={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function GTe(){const{t}=Vs();return s.jsx("div",{style:Ft.wrap,children:s.jsxs("div",{style:Ft.grid,children:[s.jsxs("aside",{style:Ft.tile,children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),s.jsx("p",{style:Ft.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),s.jsxs("nav",{children:[s.jsx("div",{style:Ft.groupLabel,children:"Allgemein"}),s.jsx($s,{to:"list-views",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"List-View Switcher"}),s.jsx($s,{to:"rescan-widget",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Rescan Widget (auto)"}),s.jsx($s,{to:"upload-sim",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Upload Simulator"}),s.jsx($s,{to:"hud/game-buttons",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"HUD  Game Buttons"}),s.jsx($s,{to:"theme-maker",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Theme / Template Maker"}),s.jsx($s,{to:"theme-maker-pro",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Theme / Template Maker  Pro"}),s.jsx($s,{to:"gamified",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified",{defaultValue:"Gamified"})}),s.jsx($s,{to:"gamified-2",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified2",{defaultValue:"Gamified 2"})}),s.jsx($s,{to:"gamified-3",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified3",{defaultValue:"Gamified 3"})}),s.jsx($s,{to:"gamified-4",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified4",{defaultValue:"Gamified 4"})}),s.jsx($s,{to:"gamified-5",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified5",{defaultValue:"Gamified 5"})}),s.jsx($s,{to:"gamified-6",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified6",{defaultValue:"Gamified 6"})}),s.jsx($s,{to:"gamified-7",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified7",{defaultValue:"Gamified 7"})}),s.jsx($s,{to:"gamified-8",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:t("playground.tabs.gamified8",{defaultValue:"Gamified 8"})}),s.jsx("div",{style:Ft.groupLabel,children:"Templates"}),s.jsx($s,{to:"templates/content-shell",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"ContentShell Template"}),s.jsx($s,{to:"templates/blank",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Leere Vorlage"}),s.jsx($s,{to:"templates/blank-alt",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Leere Vorlage (Neu)"}),s.jsx($s,{to:"templates/blank-layout-2",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Leere Vorlage  Layout 2"}),s.jsx($s,{to:"templates/blank-layout-3",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Leere Vorlage  Layout 3"}),s.jsx($s,{to:"templates/blank-layout-4",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"Leere Vorlage  Layout 4"}),s.jsx("div",{style:Ft.groupLabel,children:"Guide Hub Demos"}),s.jsx($s,{to:"am-rune-bonuses-demos",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),s.jsx("div",{style:Ft.groupLabel,children:"Graphics / Portraits"}),s.jsx($s,{to:"portrait-maker",style:({isActive:e})=>({...Ft.link,...e?Ft.active:{}}),children:"PortraitMaker Demo"})]})]}),s.jsx("section",{style:Ft.tile,children:s.jsx(Q5,{})})]})})}const HTe="_page_1kokx_1",WTe="_topBar_1kokx_17",KTe="_tabs_1kokx_31",qTe="_tab_1kokx_31",QTe="_tabActive_1kokx_63",YTe="_searchWrap_1kokx_73",XTe="_input_1kokx_85",JTe="_stickyIcons_1kokx_105",ZTe="_iconBtn_1kokx_129",e3e="_tableWrap_1kokx_161",t3e="_table_1kokx_161",s3e="_th_1kokx_181",n3e="_td_1kokx_181",r3e="_row_1kokx_201",i3e="_chips_1kokx_219",a3e="_chip_1kokx_219",o3e="_badges_1kokx_249",l3e="_badge_1kokx_249",c3e="_badgeMax_1kokx_275",d3e="_badgeAchiev_1kokx_277",u3e="_badgeX2_1kokx_279",h3e="_badgeX12_1kokx_281",m3e="_badgeX60_1kokx_283",p3e="_section_1kokx_289",g3e="_sectionHeader_1kokx_297",f3e="_cardList_1kokx_315",v3e="_card_1kokx_315",x3e="_cardMax_1kokx_353",y3e="_iconXL_1kokx_355",b3e="_split_1kokx_369",_3e="_left_1kokx_379",w3e="_leftBtn_1kokx_399",j3e="_leftBtnActive_1kokx_411",S3e="_detail_1kokx_413",N3e="_grid_1kokx_433",k3e="_tile_1kokx_443",C3e="_drawer_1kokx_457",T3e="_timeline_1kokx_487",I3e="_node_1kokx_493",E3e="_dot_1kokx_501",Ht={page:HTe,topBar:WTe,tabs:KTe,tab:qTe,tabActive:QTe,searchWrap:YTe,input:XTe,stickyIcons:JTe,iconBtn:ZTe,tableWrap:e3e,table:t3e,th:s3e,td:n3e,row:r3e,chips:i3e,chip:a3e,badges:o3e,badge:l3e,badgeMax:c3e,badgeAchiev:d3e,badgeX2:u3e,badgeX12:h3e,badgeX60:m3e,section:p3e,sectionHeader:g3e,cardList:f3e,card:v3e,cardMax:x3e,iconXL:y3e,split:b3e,left:_3e,leftBtn:w3e,leftBtnActive:j3e,detail:S3e,grid:N3e,tile:k3e,drawer:C3e,timeline:T3e,node:I3e,dot:E3e},DI=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function ba(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const n=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(n)+r}function A3e(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function P3e(t){var n,r;const e=(r=(n=t.note)==null?void 0:n.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function xx({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return s.jsx("div",{className:Ht.iconBtn,title:t||"Rune",children:e})}function m2({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return s.jsx("div",{className:Ht.iconXL,title:t||"Rune",children:e})}function R3e(t){const e=new Map;for(const n of t){const r=n.tier&&n.tier.trim()!==""?n.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(n)}return Array.from(e.entries())}function eg({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),s.jsx("div",{className:Ht.chips,children:e.map((n,r)=>s.jsx("span",{className:Ht.chip,children:n},r))})}function tg({r:t,isMax:e}){const n=[];e&&n.push({label:"MAX",cls:Ht.badgeMax}),A3e(t)&&n.push({label:"Achievement",cls:Ht.badgeAchiev});const r=P3e(t);return r==="x2"&&n.push({label:"x2",cls:Ht.badgeX2}),r==="x12"&&n.push({label:"x12",cls:Ht.badgeX12}),r==="x60"&&n.push({label:"x60",cls:Ht.badgeX60}),n.length===0?null:s.jsx("div",{className:Ht.badges,children:n.map((i,a)=>{var o;return s.jsx("span",{className:`${Ht.badge} ${(o=i.cls)!=null?o:""}`,children:i.label},a)})})}function L3e(t){const e=t.trim().toLowerCase();return e?DI.filter(n=>{var r;return`${n.tier} ${n.amount} ${(r=n.note)!=null?r:""}`.toLowerCase().includes(e)}):DI}function D3e({data:t}){const e=Math.max(...t.map(i=>ba(i.amount))),n=A.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ht.stickyIcons,children:n.map((i,a)=>s.jsx("div",{onClick:()=>r(i),children:s.jsx(xx,{label:i||"(no tier)"})},a))}),s.jsx("div",{className:Ht.tableWrap,children:s.jsxs("table",{className:Ht.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:Ht.th,style:{width:42}}),s.jsx("th",{className:Ht.th,style:{width:120},children:"Amount"}),s.jsx("th",{className:Ht.th,children:"Bonuses"}),s.jsx("th",{className:Ht.th,style:{width:220},children:"Tags"})]})}),s.jsx("tbody",{children:t.map((i,a)=>{const o=Math.abs(ba(i.amount)-e)<1e-6;return s.jsxs("tr",{className:Ht.row,"data-tier":i.tier||"(no tier)",children:[s.jsx("td",{className:Ht.td,children:s.jsx(xx,{label:i.tier||""})}),s.jsx("td",{className:Ht.td,children:i.amount}),s.jsx("td",{className:Ht.td,children:s.jsx(eg,{r:i})}),s.jsx("td",{className:Ht.td,children:s.jsx(tg,{r:i,isMax:o})})]},a)})})]})})]})}function M3e({data:t}){const e=R3e(t),n=Math.max(...t.map(r=>ba(r.amount)));return s.jsx(s.Fragment,{children:e.map(([r,i])=>s.jsxs("section",{className:Ht.section,children:[s.jsx("div",{className:Ht.sectionHeader,children:r}),s.jsx("div",{className:Ht.cardList,children:i.map((a,o)=>{const c=Math.abs(ba(a.amount)-n)<1e-6;return s.jsxs("div",{className:`${Ht.card} ${c?Ht.cardMax:""}`,children:[s.jsx(m2,{label:r}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("strong",{children:a.amount}),s.jsx(tg,{r:a,isMax:c})]}),s.jsx(eg,{r:a})]}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},o)})})]},r))})}function F3e({data:t}){var o;const e=Array.from(new Set(t.map(c=>c.tier||"(no tier)"))),[n,r]=A.useState((o=e[0])!=null?o:""),i=t.filter(c=>(c.tier||"(no tier)")===n),a=Math.max(...t.map(c=>ba(c.amount)));return s.jsxs("div",{className:Ht.split,children:[s.jsx("div",{className:Ht.left,children:e.map(c=>s.jsxs("button",{className:`${Ht.leftBtn} ${c===n?Ht.leftBtnActive:""}`,onClick:()=>r(c),children:[s.jsx(xx,{label:c}),s.jsx("span",{children:c})]},c))}),s.jsxs("div",{className:Ht.detail,children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(m2,{label:n}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:n}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((c,u)=>{const h=Math.abs(ba(c.amount)-a)<1e-6;return s.jsxs("div",{className:Ht.card,style:{gridTemplateColumns:"1fr auto"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("strong",{children:c.amount}),s.jsx(tg,{r:c,isMax:h})]}),s.jsx(eg,{r:c})]}),s.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function B3e({data:t}){const[e,n]=A.useState(null),r=Math.max(...t.map(i=>ba(i.amount)));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ht.grid,children:t.map((i,a)=>s.jsx("div",{className:Ht.tile,onClick:()=>n(i),title:i.tier||"",children:s.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[s.jsx(xx,{label:i.tier||""}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&s.jsxs("div",{className:Ht.drawer,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx(m2,{label:e.tier||""}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:e.amount}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),s.jsx("button",{className:Ht.tab,onClick:()=>n(null),children:"Close"})]}),s.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:s.jsx(tg,{r:e,isMax:Math.abs(ba(e.amount)-r)<1e-6})}),s.jsx(eg,{r:e})]})]})}function $3e({data:t}){const e=Math.max(...t.map(r=>ba(r.amount))),n=[...t].sort((r,i)=>ba(r.amount)-ba(i.amount));return s.jsx("div",{className:Ht.timeline,children:n.map((r,i)=>{const a=Math.abs(ba(r.amount)-e)<1e-6;return s.jsxs("div",{className:Ht.node,children:[s.jsx("div",{className:Ht.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("strong",{children:r.amount}),s.jsx(tg,{r,isMax:a})]}),s.jsx(eg,{r})]}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const O3e=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function V3e(){const[t,e]=A.useState("A: Compact Table"),[n,r]=A.useState(""),i=L3e(n);return s.jsxs("div",{className:Ht.page,children:[s.jsxs("div",{className:Ht.topBar,children:[s.jsx("div",{className:Ht.tabs,children:O3e.map(a=>s.jsx("button",{onClick:()=>e(a),className:`${Ht.tab} ${t===a?Ht.tabActive:""}`,children:a},a))}),s.jsx("div",{className:Ht.searchWrap,children:s.jsx("input",{className:Ht.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:n,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&s.jsx(D3e,{data:i}),t==="B: Card Track"&&s.jsx(M3e,{data:i}),t==="C: Two-Pane"&&s.jsx(F3e,{data:i}),t==="D: Icon Grid + Drawer"&&s.jsx(B3e,{data:i}),t==="E: Timeline"&&s.jsx($3e,{data:i})]})}function U3e(){return s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),s.jsx("div",{className:"mt-4 grid gap-3",children:s.jsx($s,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const $e={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},z3e=()=>s.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),rd={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function G3e(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function kh(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",G3e(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function d6(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",n={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},o={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},c={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},m={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},v={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},b={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:n,crystal:r,carbon:i,chrome:a,gold:o,obsidian:c,neon:u,plasma:h,aurora:m,satin:g,matte:v,holo:b}[t.material]}function kc(t){const e={color:$e.title,borderColor:$e.border,...d6(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const sg=({children:t})=>s.jsx("span",{className:"relative z-10",children:t});function Ch({fx:t,clip:e}){return s.jsxs(s.Fragment,{children:[t.shine&&s.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:s.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&s.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&s.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&s.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&s.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((n,r)=>s.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function H3e({fx:t,children:e}){const n=kh(t),r=kc(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),s.jsx(Ch,{fx:t,clip:i}),t.withIcon&&s.jsx(nE,{size:16,className:"relative z-10"}),s.jsx(sg,{children:e})]})}function W3e({fx:t,children:e}){const n=kh(t),r=kc(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),s.jsx(Ch,{fx:t,clip:i}),t.withIcon&&s.jsx(rE,{size:16,className:"relative z-10"}),s.jsx(sg,{children:e})]})}function K3e({fx:t,children:e}){const n=kh(t),r=kc(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),s.jsx(Ch,{fx:t,clip:i}),t.withIcon&&s.jsx(Id,{size:16,className:"relative z-10"}),s.jsx(sg,{children:e})]})}function q3e({fx:t,children:e}){const n=kh(t),r=kc(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${$e.tile}, ${$e.active})`}}),s.jsx(Ch,{fx:t,clip:i}),t.withIcon&&s.jsx(iE,{size:16,className:"relative z-10"}),s.jsx(sg,{children:e})]})}function Q3e({fx:t,children:e}){const n=kh(t),r=kc(t);return s.jsxs("button",{disabled:t.disabled,className:`${n} rounded-full overflow-hidden`,style:r,children:[s.jsx(Ch,{fx:t}),t.withIcon&&s.jsx(Ix,{size:16,className:"relative z-10"}),s.jsx(sg,{children:e})]})}function Y3e({fx:t,tabs:e}){const[n,r]=A.useState(0);return s.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:e.map((i,a)=>s.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===n?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===n?$e.active:"transparent",border:a===n&&t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[t.withIcon&&a===n&&s.jsx(Ix,{size:14,className:"inline mr-1"}),i]},a))})}function X3e({fx:t}){const e=kh(t),n=kc(t);return s.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:n,"aria-label":"Icon action",children:s.jsx(lE,{})})}const $_={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function J3e({fx:t,setFx:e}){const n=(c,u)=>e(h=>({...h,[c]:u})),r=c=>e(u=>({...u,[c]:!u[c]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],o=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return s.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${$e.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Presets"}),Object.keys($_).map(c=>s.jsx("button",{onClick:()=>e(u=>$_[c](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:$e.btn,borderColor:$e.border,color:$e.title},children:c},c))]}),s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${$e.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Material"}),i.map(c=>s.jsx("button",{onClick:()=>n("material",c),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===c?"":"opacity-70"}`,style:{backgroundColor:t.material===c?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:c},c)),s.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:$e.title},children:"Size"}),["sm","md","lg"].map(c=>s.jsx("button",{onClick:()=>n("size",c),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===c?"":"opacity-70"}`,style:{backgroundColor:t.size===c?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:c.toUpperCase()},c)),s.jsx("button",{onClick:()=>e(c=>({...c,withIcon:!c.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:"Icon"}),s.jsx("button",{onClick:()=>e(c=>({...c,disabled:!c.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:"Disabled"})]}),s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${$e.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Core FX"}),a.map(([c,u])=>s.jsx("button",{onClick:()=>r(c),className:`px-2.5 py-1 rounded-md border text-xs ${t[c]?"":"opacity-70"}`,style:{backgroundColor:t[c]?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:u},c))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Advanced"}),o.map(([c,u])=>s.jsx("button",{onClick:()=>r(c),className:`px-2.5 py-1 rounded-md border text-xs ${t[c]?"":"opacity-70"}`,style:{backgroundColor:t[c]?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:u},c))]}),s.jsx("button",{onClick:()=>e(rd),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:$e.btn,borderColor:$e.border,color:$e.title},children:"Reset"})]})}function Zs({fx:t,className:e="",style:n={},children:r,clip:i}){const a=kc(t);return s.jsxs("div",{className:`relative ${e}`,style:{...a,...n},children:[s.jsx(Ch,{fx:t,clip:i}),s.jsx("div",{className:"relative z-10",children:r})]})}function mi({fx:t,className:e="",children:n}){return s.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:n})}function Z3e({fx:t}){const[e,n]=A.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Toggle Chips"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return s.jsx(Zs,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(o=>a?o.filter(c=>c!==i):[...o,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function eIe({fx:t}){return s.jsxs(mi,{fx:t,className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",style:{color:$e.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>s.jsx(Zs,{fx:t,className:"rounded-xl border p-2",style:{borderColor:$e.border},children:s.jsxs("button",{className:"relative",children:[s.jsx(lE,{size:16}),e===3&&s.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function tIe({fx:t}){return s.jsxs(Zs,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Breadcrumb HUD"}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>s.jsx(Zs,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:$e.border},children:e},e))})]})}function sIe({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Stat Tiles"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(n=>s.jsxs(Zs,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:$e.border},children:[s.jsx("div",{className:"text-[10px] opacity-80",children:n.k}),s.jsx("div",{className:"text-sm",children:n.v}),s.jsx("div",{className:"text-[11px] opacity-80",children:n.d})]},n.k))})]})}function nIe({fx:t}){const[e,n]=A.useState(.66);return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Meter / Energy Bar"}),s.jsx(Zs,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:$e.border},children:s.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),s.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsxs("button",{onClick:()=>n(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function rIe({fx:t}){return s.jsxs(mi,{fx:t,className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Badge / Medal"}),s.jsxs(Zs,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:$e.border},children:[s.jsx(Id,{size:16}),s.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function iIe({fx:t}){const[e,n]=A.useState(!1);return s.jsxs(mi,{fx:t,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Toast / Notification"}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&s.jsxs(Zs,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:$e.border},children:[s.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),s.jsx("button",{onClick:()=>n(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function aIe({fx:t}){const[e,n]=A.useState(!0);return s.jsxs(mi,{fx:t,className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Toggle Switch"}),s.jsxs(Zs,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:$e.border},children:[s.jsx("button",{onClick:()=>n(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),s.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function oIe({fx:t}){const[e,n]=A.useState(!1),r=["Overview","Stats","Activity","Hydra"];return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Dropdown HUD"}),s.jsx(Zs,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&s.jsx(Zs,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:$e.border},children:r.map(i=>s.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function lIe({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Radial Menu (Preview)"}),s.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[s.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"}}),e.map((n,r)=>{const i=r/e.length*Math.PI*2,a=56,o=56+Math.cos(i)*a,c=56+Math.sin(i)*a;return s.jsx(Zs,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:o,top:c,borderColor:$e.border},children:n},n)}),s.jsx(Zs,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:$e.border},children:"Menu"})]})]})}function cIe({fx:t}){const e=[1,2,3,4,5],[n,r]=A.useState(2);return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Pagination HUD"}),s.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>s.jsx(Zs,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===n?"":"opacity-80"}`,style:{borderColor:$e.border},children:s.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function dIe({fx:t}){const[e,n]=A.useState(!1);return s.jsxs(mi,{fx:t,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Modal HUD"}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&s.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:s.jsxs(Zs,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:$e.border},children:[s.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),s.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>n(!1),children:"Cancel"})}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function uIe({fx:t}){const[e,n]=A.useState("");return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Search HUD"}),s.jsx(Zs,{fx:t,className:"rounded-lg border p-2",style:{borderColor:$e.border},children:s.jsx("input",{value:e,onChange:r=>n(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function hIe({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[n,r]=A.useState("Bravo");return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"List Selectable"}),s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(Zs,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${n===i?"":"opacity-80"}`,style:{borderColor:$e.border},children:s.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function mIe({fx:t}){const e=["Init","Scan","Verify","Done"],[n,r]=A.useState(1);return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Steps"}),s.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>s.jsxs(q.Fragment,{children:[s.jsx(Zs,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=n?"":"opacity-70"}`,style:{borderColor:$e.border},children:a+1}),a<e.length-1&&s.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,n-1)),children:"Back"})}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,n+1)),children:"Next"})})]})]})}function pIe({fx:t}){const e=["","","","","",""];return s.jsxs(mi,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Dock Bar"}),s.jsx("div",{className:"flex items-center gap-2",children:e.map((n,r)=>s.jsx(Zs,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:$e.border},children:n},r))})]})}function gIe(){const[t,e]=A.useState(rd);return s.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:$e.bg,color:$e.txt},children:[s.jsx(z3e,{}),s.jsxs("header",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(O7,{}),s.jsx("h1",{className:"text-xl font-bold",style:{color:$e.title},children:"Game Buttons Playground"}),s.jsx("span",{className:"text-xs",style:{color:$e.txt2},children:"(Materials + FX extended + Presets)"})]})}),s.jsx(J3e,{fx:t,setFx:e})]}),s.jsxs("section",{className:"grid gap-4",children:[s.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold mb-3",style:{color:$e.title},children:"Shapes"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(H3e,{fx:t,children:[s.jsx(nE,{size:16})," Diamond"]}),s.jsxs(W3e,{fx:t,children:[s.jsx(rE,{size:16})," Hex"]}),s.jsxs(K3e,{fx:t,children:[s.jsx(Id,{size:16})," Octagon/Shield"]}),s.jsxs(q3e,{fx:t,children:[s.jsx(iE,{size:16})," Shard"]}),s.jsxs(Q3e,{fx:t,children:[s.jsx(Ix,{size:16})," Pill/Chip"]}),s.jsx(X3e,{fx:t})]})]}),s.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold",style:{color:$e.title},children:"Tabs"}),s.jsx(Y3e,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),s.jsx("section",{className:"grid gap-4",children:s.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold mb-3",style:{color:$e.title},children:"More HUD Patterns"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[s.jsx(Z3e,{fx:t}),s.jsx(eIe,{fx:t}),s.jsx(tIe,{fx:t}),s.jsx(sIe,{fx:t}),s.jsx(nIe,{fx:t}),s.jsx(rIe,{fx:t}),s.jsx(iIe,{fx:t}),s.jsx(aIe,{fx:t}),s.jsx(oIe,{fx:t}),s.jsx(lIe,{fx:t}),s.jsx(cIe,{fx:t}),s.jsx(dIe,{fx:t}),s.jsx(uIe,{fx:t}),s.jsx(hIe,{fx:t}),s.jsx(mIe,{fx:t}),s.jsx(pIe,{fx:t})]})]})}),s.jsx(fIe,{}),s.jsx("footer",{className:"text-center text-xs",style:{color:$e.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function fIe(){return A.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(rd.material),"Material type present");const e=kc(rd);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=d6({...rd,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof rd[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries($_).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...rd});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const Zm={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},MI={Arcade:{...Zm,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...Zm,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},Su={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},u6={display:"grid",gap:8,alignItems:"center"};function Vo({label:t,value:e,onChange:n}){return s.jsxs("label",{style:{...u6,gridTemplateColumns:"120px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value)})]})}function S1({label:t,value:e,min:n,max:r,onChange:i}){return s.jsxs("label",{style:{...u6,gridTemplateColumns:"120px 1fr 70px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"range",min:n,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),s.jsx("input",{type:"number",min:n,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function FI(){const[t,e]=q.useState(Zm),n=q.useRef(null),r=u=>{const h=n.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};q.useEffect(()=>{r(t)},[t]);const i=u=>e(MI[u]),a=()=>e(Zm),o=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},c=async u=>{const h=await u.text();e({...Zm,...JSON.parse(h)})};return s.jsxs("div",{ref:n,style:{color:"var(--text, #FFFFFF)"},children:[s.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(MI).map(u=>s.jsx("button",{style:Su,onClick:()=>i(u),children:u},u)),s.jsx("button",{style:Su,onClick:a,children:"Default"}),s.jsx("button",{style:Su,onClick:o,children:"Export JSON"}),s.jsxs("label",{style:{...Su,display:"inline-block"},children:["Import JSON",s.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&c(u.target.files[0]),style:{display:"none"}})]})]}),s.jsx(Vo,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),s.jsx(Vo,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),s.jsx(Vo,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),s.jsx(Vo,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),s.jsx(Vo,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),s.jsx(Vo,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),s.jsx(Vo,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),s.jsx(Vo,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),s.jsx(Vo,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),s.jsx(S1,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),s.jsx(S1,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),s.jsx(S1,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),s.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),s.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),s.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[s.jsx("button",{style:{...Su,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),s.jsx("button",{style:Su,children:"Secondary"})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[s.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),s.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const O_={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},BI={"SFDataHub (Default)":{...O_},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},fy={display:"grid",gap:8,alignItems:"center"},Zc={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},ed={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function fa({label:t,value:e,onChange:n}){return s.jsxs("label",{style:{...fy,gridTemplateColumns:"140px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value)})]})}function Uo({label:t,value:e,min:n,max:r,step:i=1,onChange:a,suffix:o}){return s.jsxs("label",{style:{...fy,gridTemplateColumns:"140px 1fr 70px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"range",min:n,max:r,step:i,value:e,onChange:c=>a(parseFloat(c.target.value))}),s.jsx("input",{type:"number",min:n,max:r,step:i,value:e,onChange:c=>a(parseFloat(c.target.value||"0"))})]})}function vIe({label:t,checked:e,onChange:n}){return s.jsxs("label",{style:{...fy,gridTemplateColumns:"1fr 46px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"checkbox",checked:e,onChange:r=>n(r.target.checked)})]})}function $I(){const[t,e]=q.useState(O_),n=q.useRef(null),r=h=>{const m=n.current;m&&(m.style.setProperty("--page",h.page),m.style.setProperty("--tile",h.tile),m.style.setProperty("--tile-hover",h.tileHover),m.style.setProperty("--nav",h.nav),m.style.setProperty("--active",h.active),m.style.setProperty("--text",h.text),m.style.setProperty("--text-soft",h.textSoft),m.style.setProperty("--title",h.title),m.style.setProperty("--line",h.line),m.style.setProperty("--accent",h.accent),m.style.setProperty("--success",h.success),m.style.setProperty("--warning",h.warning),m.style.setProperty("--danger",h.danger),m.style.setProperty("--radius",`${h.radius}px`),m.style.setProperty("--border",`${h.border}px`),m.style.setProperty("--gap",`${h.gap}px`),m.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),m.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),m.style.setProperty("--noise",`${h.noise}%`),m.style.setProperty("--font",h.fontFamily),m.style.setProperty("--font-size",`${h.fontSize}px`),m.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),m.style.setProperty("--glow",`${h.glow}`),m.style.setProperty("--scanlines",`${h.scanlines}`))};q.useEffect(()=>{r(t)},[t]);const i=(h,m)=>e(g=>({...g,[h]:m})),a=h=>e(m=>({...m,...BI[h]})),o=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(h),m.download="sfdatahub-theme-pro.json",m.click()},c=async h=>{try{const m=await h.text(),g=JSON.parse(m);e({...t,...g})}catch(m){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return s.jsxs("div",{ref:n,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[s.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(BI).map(h=>s.jsx("button",{style:Zc,onClick:()=>a(h),children:h},h)),s.jsx("button",{style:Zc,onClick:()=>e(O_),children:"Reset"}),s.jsx("button",{style:Zc,onClick:o,children:"Export"}),s.jsxs("label",{style:{...Zc,display:"inline-block"},children:["Import",s.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&c(h.target.files[0])})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(fa,{label:"Page",value:t.page,onChange:h=>i("page",h)}),s.jsx(fa,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),s.jsx(fa,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),s.jsx(fa,{label:"Active",value:t.active,onChange:h=>i("active",h)}),s.jsx(fa,{label:"Text",value:t.text,onChange:h=>i("text",h)}),s.jsx(fa,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),s.jsx(fa,{label:"Title",value:t.title,onChange:h=>i("title",h)}),s.jsx(fa,{label:"Line",value:t.line,onChange:h=>i("line",h)}),s.jsx(fa,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[s.jsx(fa,{label:"Success",value:t.success,onChange:h=>i("success",h)}),s.jsx(fa,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),s.jsx(fa,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(Uo,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),s.jsx(Uo,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),s.jsx(Uo,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),s.jsx(Uo,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),s.jsx(Uo,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),s.jsx(Uo,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsxs("label",{style:{...fy,gridTemplateColumns:"140px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),s.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),s.jsx(Uo,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),s.jsx(vIe,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(Uo,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),s.jsx(Uo,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),s.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[s.jsxs("span",{style:ed,children:[s.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),s.jsx("span",{style:{...ed,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),s.jsx("span",{style:{...ed,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),s.jsx("span",{style:{...ed,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),s.jsxs("span",{style:ed,children:["Radius: ",t.radius]}),s.jsxs("span",{style:ed,children:["Shadow: ",t.shadow]}),s.jsxs("span",{style:ed,children:["Noise: ",t.noise,"%"]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),s.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",s.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),s.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,m)=>s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[s.jsx("span",{children:h.label}),s.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),s.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:s.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},m))}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[s.jsx("button",{style:{...Zc,background:"var(--tile-hover)"},children:"Open Profile"}),s.jsx("button",{style:{...Zc,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,m)=>s.jsx("button",{style:{...Zc,background:m===0?"var(--tile-hover)":"transparent",borderColor:m===0?"var(--active)":"var(--line)",boxShadow:m===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,m)=>s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),s.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),s.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},m))}),s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[s.jsx("div",{style:{padding:10},children:"Attribute"}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,m)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:m%2?"rgba(255,255,255,.025)":"transparent"},children:[s.jsx("div",{style:{padding:10},children:h[0]}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),s.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},m))]})]})]}),s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const ns={wrap:{color:"#F5F9FF"},intro:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:14},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:14},card:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)",minHeight:160,display:"flex",flexDirection:"column",gap:10},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},sub:{color:"#B0C4D9",fontSize:13,lineHeight:1.4},badgeRow:{display:"flex",gap:6,flexWrap:"wrap"}},$a=(t,e="#1E3A5C")=>s.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",fontSize:11,borderRadius:999,background:e,border:"1px solid rgba(255,255,255,.12)",color:"#D9E7FF",textTransform:"uppercase",letterSpacing:.4},children:t}),Ui=()=>s.jsxs("div",{style:ns.badgeRow,children:[$a("mock"),$a("concept","#234569"),$a("ui","#1F4D67")]}),OI={common:"#1f3b5d",rare:"#234f7a",epic:"#3c2f6d",legendary:"#6b3b0f"};function xIe(){const t=[{title:"Data Whisperer",rarity:"epic",status:"Unlocked"},{title:"Perfect Sync",rarity:"rare",status:"Unlocked"},{title:"Zero Downtime",rarity:"legendary",status:"Locked"},{title:"Scout Elite",rarity:"common",status:"Unlocked"},{title:"API Ranger",rarity:"rare",status:"Locked"},{title:"Schema Sleuth",rarity:"epic",status:"Unlocked"}],e=[{title:"Scan 10 servers",status:"Done",reward:"+250 XP"},{title:"Fix 3 warnings",status:"In progress",reward:"+1 reroll"},{title:"Share a dashboard",status:"Ready",reward:"Title shard"},{title:"Hit uptime streak",status:"Locked",reward:"Glow badge"}],n=[{tier:"Mythic",delta:"+2",trend:"up"},{tier:"Diamond",delta:"-1",trend:"down"},{tier:"Platinum",delta:"+4",trend:"up"},{tier:"Gold",delta:"0",trend:"flat"}],r=[{label:"Level 12",done:!0},{label:"Sync Master",done:!0},{label:"API Adept",done:!1},{label:"Data Virtuoso",done:!1}],i=[{level:1,reward:"Theme Skin",unlocked:!0},{level:4,reward:"Badge Token",unlocked:!0},{level:7,reward:"Loot Cache",unlocked:!1},{level:10,reward:"Mythic Frame",unlocked:!1}],a=[{label:"Common",value:32,color:"#1e3b5d"},{label:"Rare",value:28,color:"#1f5d77"},{label:"Epic",value:22,color:"#3c2f6d"},{label:"Legendary",value:18,color:"#6b3b0f"}],o=[{name:"Link Speed",state:"active"},{name:"Alert Vision",state:"active"},{name:"Schema Insight",state:"locked"},{name:"API Armor",state:"active"},{name:"Sync Surge",state:"active"},{name:"Data Forge",state:"locked"},{name:"Audit Ghost",state:"locked"},{name:"Chronicle",state:"locked"}];return s.jsxs("div",{style:ns.wrap,children:[s.jsxs("div",{style:ns.intro,children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:"#F5F9FF"},children:"Gamified Visuals"}),s.jsx("p",{style:ns.sub,children:"Static showcase of badges, streaks, ladders, and tracks in SFDataHub styling."})]}),Ui()]}),s.jsxs("div",{style:ns.grid,children:[s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Achievement Badges"}),s.jsx("div",{style:ns.sub,children:"Unlocked vs. locked set with rarity color tags."})]}),Ui()]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:10},children:t.map(c=>s.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,.15)",borderRadius:12,padding:10,background:"rgba(255,255,255,.02)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:6},children:c.title}),s.jsxs("div",{style:ns.badgeRow,children:[$a(c.status,c.status==="Unlocked"?"#1f4f62":"#422b2b"),$a(c.rarity,OI[c.rarity])]})]},c.title))})]}),s.jsxs("div",{style:{...ns.card,background:"linear-gradient(145deg, #143257, #0f243d)"},children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Scan Streak"}),s.jsx("div",{style:ns.sub,children:"Keep the flame alive with consistent daily scans."})]}),Ui()]}),s.jsxs("div",{style:{background:"rgba(0,0,0,.25)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Current streak"}),s.jsx("div",{style:{fontSize:32,fontWeight:800},children:"12 days "})]}),s.jsxs("div",{style:{textAlign:"right"},children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Best streak"}),s.jsx("div",{style:{fontWeight:700},children:"21 days"}),s.jsx("div",{style:{marginTop:6,background:"#0e1e33",borderRadius:999,padding:"4px 10px"},children:"+3d buffer"})]})]}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Next reward: Ember Frame at 14 days."})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Quest Log"}),s.jsx("div",{style:ns.sub,children:"Short mission stack with rewards."})]}),Ui()]}),s.jsx("div",{style:{display:"grid",gap:8},children:e.map(c=>s.jsxs("div",{style:{borderRadius:10,padding:10,background:"rgba(255,255,255,.03)",border:"1px solid rgba(255,255,255,.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:c.title}),s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:c.reward})]}),$a(c.status,c.status==="Done"?"#1f4f62":c.status==="In progress"?"#4f3b1f":"#3a2f4f")]},c.title))})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Trophy Podium"}),s.jsx("div",{style:ns.sub,children:"Top 3 snapshot with podium heights."})]}),Ui()]}),s.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:10,justifyContent:"space-around",paddingTop:8},children:[{rank:2,height:60},{rank:1,height:90},{rank:3,height:45}].map(c=>s.jsxs("div",{style:{textAlign:"center"},children:[s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["#",c.rank]}),s.jsxs("div",{style:{width:70,height:c.height,background:c.rank===1?"linear-gradient(180deg,#f5d26b,#b87b1a)":"linear-gradient(180deg,#345a8a,#203752)",borderRadius:10,border:"1px solid rgba(255,255,255,.2)",display:"grid",placeItems:"center",fontWeight:800,color:c.rank===1?"#1a1a1a":"#F5F9FF"},children:["S",c.rank]}),s.jsxs("div",{style:{marginTop:4,fontSize:12},children:["Squad ",c.rank]})]},c.rank))})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Rank Ladder"}),s.jsx("div",{style:ns.sub,children:"League rungs with movement delta."})]}),Ui()]}),s.jsx("div",{style:{display:"grid",gap:8},children:n.map(c=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,.08)",background:"rgba(255,255,255,.02)"},children:[s.jsx("div",{style:{fontWeight:700},children:c.tier}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:c.delta}),s.jsx("span",{style:{color:c.trend==="up"?"#5AD8A6":c.trend==="down"?"#E06C75":"#B0C4D9"},children:c.trend==="up"?"":c.trend==="down"?"":""})]})]},c.tier))})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Milestone Timeline"}),s.jsx("div",{style:ns.sub,children:"Linear track with unlocked markers."})]}),Ui()]}),s.jsxs("div",{style:{position:"relative",padding:"10px 4px 0"},children:[s.jsx("div",{style:{position:"absolute",top:22,left:0,right:0,height:2,background:"rgba(255,255,255,.12)"}}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r.length}, 1fr)`,gap:6,position:"relative"},children:r.map(c=>s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{width:22,height:22,margin:"0 auto",borderRadius:"50%",background:c.done?"#2d7f5f":"#2f415e",border:"2px solid rgba(255,255,255,.1)",display:"grid",placeItems:"center",fontSize:11,fontWeight:700},children:c.done?"":""}),s.jsx("div",{style:{marginTop:6,fontSize:12},children:c.label})]},c.label))})]})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Collection Ring"}),s.jsx("div",{style:ns.sub,children:"Donut visualization for scrapbook completion."})]}),Ui()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[s.jsx("div",{style:{width:120,height:120,borderRadius:"50%",background:"conic-gradient(#3c7bd9 0% 68%, #1d3051 68% 100%)",display:"grid",placeItems:"center",border:"1px solid rgba(255,255,255,.08)"},children:s.jsx("div",{style:{width:78,height:78,borderRadius:"50%",background:"#0f1e33",display:"grid",placeItems:"center",color:"#F5F9FF",fontWeight:800},children:"68%"})}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:ns.badgeRow,children:[$a("Unlocked 45/66","#1f4f62"),$a("Sets: 6","#2a3f68")]}),s.jsx("div",{style:{marginTop:10,fontSize:12,color:"#B0C4D9"},children:"Next reward at 75%: Chronicle stencil frame."})]})]})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Boss HP  Goal Bar"}),s.jsx("div",{style:ns.sub,children:"Progress toward the next major unlock."})]}),Ui()]}),s.jsxs("div",{style:{background:"#0f1f33",borderRadius:12,padding:10,border:"1px solid rgba(255,255,255,.08)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#B0C4D9"},children:[s.jsx("span",{children:"Phase 2/3"}),s.jsx("span",{children:"82% to go"})]}),s.jsx("div",{style:{height:22,borderRadius:10,overflow:"hidden",marginTop:6,border:"1px solid rgba(255,255,255,.1)"},children:s.jsx("div",{style:{width:"18%",height:"100%",background:"linear-gradient(90deg, #d95f5f, #f2a45d)",boxShadow:"0 0 12px rgba(242,164,93,.4)"}})}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Next shield break at 25% HP."})]})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Skill Tree Mini"}),s.jsx("div",{style:ns.sub,children:"Node states with locked paths."})]}),Ui()]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:8},children:o.map(c=>s.jsxs("div",{style:{background:"rgba(255,255,255,.03)",borderRadius:10,border:`1px solid ${c.state==="active"?"rgba(90,216,166,.4)":"rgba(255,255,255,.08)"}`,padding:10,boxShadow:c.state==="active"?"0 0 12px rgba(90,216,166,.25)":"none"},children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:c.state==="active"?"Unlocked":"Locked"}),s.jsx("div",{style:{fontWeight:700,marginTop:4},children:c.name})]},c.name))}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Path glow = active; darker cells stay locked."})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Season Pass Track"}),s.jsx("div",{style:ns.sub,children:"Horizontal progression with staged rewards."})]}),Ui()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginTop:4},children:[s.jsx("div",{style:{flex:1,height:10,borderRadius:999,background:"#0f1f33",position:"relative",overflow:"hidden"},children:s.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"45%",background:"linear-gradient(90deg,#2a7bbd,#54c9e7)"}})}),$a("45%","#1f4f62")]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:10,overflowX:"auto"},children:i.map(c=>s.jsxs("div",{style:{minWidth:120,background:"rgba(255,255,255,.03)",borderRadius:12,padding:10,border:`1px solid ${c.unlocked?"rgba(84,201,231,.4)":"rgba(255,255,255,.08)"}`},children:[s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Level ",c.level]}),s.jsx("div",{style:{fontWeight:700},children:c.reward}),s.jsx("div",{style:{marginTop:6},children:$a(c.unlocked?"Claimed":"Locked",c.unlocked?"#1f4f62":"#2f2f4f")})]},c.level))})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Title Plates"}),s.jsx("div",{style:ns.sub,children:"Unlockable nameplates with rarity glow."})]}),Ui()]}),s.jsx("div",{style:{display:"grid",gap:10},children:[{name:"Data Pioneer",tone:"linear-gradient(90deg,#2f5b90,#1f3d68)",rarity:"rare"},{name:"Mythic Cartographer",tone:"linear-gradient(90deg,#6b3b0f,#b87b1a)",rarity:"legendary"},{name:"Night Runner",tone:"linear-gradient(90deg,#28354f,#1a2335)",rarity:"common"}].map(c=>s.jsxs("div",{style:{borderRadius:12,padding:12,background:c.tone,border:"1px solid rgba(255,255,255,.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:800},children:c.name}),$a(c.rarity,OI[c.rarity]||"#234569")]},c.name))})]}),s.jsxs("div",{style:ns.card,children:[s.jsxs("div",{style:ns.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Loot / Rarity Mix"}),s.jsx("div",{style:ns.sub,children:"Stacked distribution snapshot."})]}),Ui()]}),s.jsx("div",{style:{height:24,borderRadius:12,overflow:"hidden",display:"flex",border:"1px solid rgba(255,255,255,.08)"},children:a.map(c=>s.jsxs("div",{style:{width:`${c.value}%`,background:c.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:11,color:"#DAE8FF",borderRight:"1px solid rgba(255,255,255,.05)"},children:[c.value,"%"]},c.label))}),s.jsx("div",{style:ns.badgeRow,children:a.map(c=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"2px 8px",borderRadius:999,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",fontSize:12},children:[s.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:c.color,display:"inline-block"}}),c.label]},c.label))})]})]})]})}const VI=[{id:"quests",title:"Quests & Objectives",description:"Logs, chains, rewards, and difficulty chips.",items:[{id:"11",categoryId:"quests",title:"Quest Log (3 steps)",subtitle:"Ordered checklist",tags:["mock"],previewId:"pv_quest_steps"},{id:"12",categoryId:"quests",title:"Daily Objectives Board",subtitle:"Checkbox grid",tags:["ui"],previewId:"pv_daily_checklist"},{id:"13",categoryId:"quests",title:"Weekly Contract Card",subtitle:"Timer + tear edge",tags:["concept"],previewId:"pv_contract_timer"},{id:"14",categoryId:"quests",title:"Bounty Card",subtitle:"Target + reward tag",tags:["mock"],previewId:"pv_bounty_target"},{id:"15",categoryId:"quests",title:"Multi-Objective Chips",subtitle:"3 tagged goals",tags:["ui"],previewId:"pv_objective_chips"},{id:"16",categoryId:"quests",title:"Quest Chain Path",subtitle:"Linked nodes",tags:["mock"],previewId:"pv_quest_chain_nodes"},{id:"17",categoryId:"quests",title:"Reward Preview Panel",subtitle:"XP + coins bundle",tags:["ui"],previewId:"pv_reward_bundle"},{id:"18",categoryId:"quests",title:"Side Quest Mini",subtitle:"Compact lane",tags:["mock"],previewId:"pv_sidequest_compact"},{id:"19",categoryId:"quests",title:"Claim Reward States",subtitle:"Enabled vs locked",tags:["ui"],previewId:"pv_claim_states"},{id:"20",categoryId:"quests",title:"Difficulty Tags",subtitle:"Easy / Hard / Insane",tags:["mock"],previewId:"pv_difficulty_tags"}]},{id:"progress",title:"Progress Bars & Gauges",description:"Boss phases, dual progress, rings, and risk arcs.",items:[{id:"21",categoryId:"progress",title:"Boss HP Goal Bar",subtitle:"Segmented phases",tags:["mock"],previewId:"pv_boss_hp_segmented"},{id:"22",categoryId:"progress",title:"Dual Progress vs Avg",subtitle:"Overlay marker",tags:["ui"],previewId:"pv_dual_progress_marker"},{id:"23",categoryId:"progress",title:"Segmented Track (10)",subtitle:"10 stops rail",tags:["concept"],previewId:"pv_segment_track_10"},{id:"24",categoryId:"progress",title:"Donut Completion",subtitle:"Ring percent",tags:["mock"],previewId:"pv_donut_completion"},{id:"25",categoryId:"progress",title:"Battery Gauge",subtitle:"Energy level",tags:["ui"],previewId:"pv_battery_gauge"},{id:"26",categoryId:"progress",title:"Thermometer Vertical",subtitle:"Heat column",tags:["mock"],previewId:"pv_thermo_vertical"},{id:"27",categoryId:"progress",title:"Level XP Bar + ticks",subtitle:"Micro ticks",tags:["ui"],previewId:"pv_xp_ticks"},{id:"28",categoryId:"progress",title:"Multi-Stat Mini Bars",subtitle:"STR/DEX/INT/CON/LCK",tags:["mock"],previewId:"pv_multibar_stats5"},{id:"29",categoryId:"progress",title:"Risk Meter",subtitle:"Arc pointer",tags:["concept"],previewId:"pv_risk_meter"},{id:"30",categoryId:"progress",title:"Perfect Run Bar",subtitle:"Checklist + bar",tags:["ui"],previewId:"pv_perfect_run"}]},{id:"rankings",title:"Rankings & Leagues",description:"Podiums, ladders, deltas, and history.",items:[{id:"31",categoryId:"rankings",title:"Trophy Podium Top 3",subtitle:"Height podium",tags:["mock"],previewId:"pv_podium_top3"},{id:"32",categoryId:"rankings",title:"Rank Ladder Rungs",subtitle:"Rung climb",tags:["ui"],previewId:"pv_ladder_rungs"},{id:"33",categoryId:"rankings",title:"League Tier Card",subtitle:"Bronze -> Diamond",tags:["concept"],previewId:"pv_league_tiers"},{id:"34",categoryId:"rankings",title:"Rank Delta Chip",subtitle:"Up/down pill",tags:["ui"],previewId:"pv_delta_chip"},{id:"35",categoryId:"rankings",title:"Percentile Gauge",subtitle:"Needle gauge",tags:["mock"],previewId:"pv_percentile_gauge"},{id:"36",categoryId:"rankings",title:"Rival Slot (nearest)",subtitle:"You vs nearest",tags:["concept"],previewId:"pv_rival_slot"},{id:"37",categoryId:"rankings",title:"Promotion Zone Highlight",subtitle:"Green band",tags:["ui"],previewId:"pv_promo_zone"},{id:"38",categoryId:"rankings",title:"Relegation Warning",subtitle:"Red band",tags:["mock"],previewId:"pv_relegation_zone"},{id:"39",categoryId:"rankings",title:"Top 5 Mini List",subtitle:"Ranked list",tags:["ui"],previewId:"pv_top5_list"},{id:"40",categoryId:"rankings",title:"Rank History Step",subtitle:"Step chart",tags:["mock"],previewId:"pv_rank_step_history"}]},{id:"duels",title:"Comparisons & Duels",description:"Splits, overlays, and matchup meters.",items:[{id:"41",categoryId:"duels",title:"Stat Split Compare",subtitle:"Two columns",tags:["mock"],previewId:"pv_split_compare"},{id:"42",categoryId:"duels",title:"You vs Avg Bars",subtitle:"Overlay bars",tags:["ui"],previewId:"pv_you_vs_avg_bars"},{id:"43",categoryId:"duels",title:"Best of 3 Dots",subtitle:"Round tracker",tags:["mock"],previewId:"pv_bestof3_dots"},{id:"44",categoryId:"duels",title:"Duel Outcome Card",subtitle:"Win/Loss plate",tags:["ui"],previewId:"pv_duel_outcome"},{id:"45",categoryId:"duels",title:"Advantage Meter",subtitle:"Arrow to winner",tags:["concept"],previewId:"pv_advantage_meter"},{id:"46",categoryId:"duels",title:"KPI Side-by-side",subtitle:"Four KPI tiles",tags:["mock"],previewId:"pv_kpi_tiles_4"},{id:"47",categoryId:"duels",title:"Delta Breakdown Chips",subtitle:"Pos/neg split",tags:["ui"],previewId:"pv_delta_chips_breakdown"},{id:"48",categoryId:"duels",title:"Mirror Match",subtitle:"Symmetric view",tags:["mock"],previewId:"pv_mirror_neutral"},{id:"49",categoryId:"duels",title:"Radar Mock",subtitle:"Polygon radar",tags:["concept"],previewId:"pv_radar_polygon"},{id:"50",categoryId:"duels",title:"Gap to Next",subtitle:"Distance marker",tags:["ui"],previewId:"pv_gap_to_next"}]},{id:"guild",title:"Guild & Social",description:"Roles, readiness, and alliance visuals.",items:[{id:"61",categoryId:"guild",title:"Guild Role Badges",subtitle:"Role chips",tags:["mock"],previewId:"pv_guild_roles"},{id:"62",categoryId:"guild",title:"Contribution Per Member",subtitle:"Member bars",tags:["ui"],previewId:"pv_contrib_bars"},{id:"63",categoryId:"guild",title:"Member Spotlight",subtitle:"Highlight lane",tags:["concept"],previewId:"pv_spotlight_card"},{id:"64",categoryId:"guild",title:"Guild Power Composite",subtitle:"Gauge blend",tags:["mock"],previewId:"pv_guild_power_meter"},{id:"65",categoryId:"guild",title:"Recruitment Slots",subtitle:"Open vs filled",tags:["ui"],previewId:"pv_slots_open_filled"},{id:"66",categoryId:"guild",title:"War Readiness Panel",subtitle:"Status chips",tags:["mock"],previewId:"pv_war_readiness"},{id:"67",categoryId:"guild",title:"Activity Pulse Spark",subtitle:"Pulse waveform",tags:["concept"],previewId:"pv_activity_pulse"},{id:"68",categoryId:"guild",title:"Alliance Link Card",subtitle:"Linked hubs",tags:["mock"],previewId:"pv_alliance_link"},{id:"69",categoryId:"guild",title:"Pinned Announcement",subtitle:"Pinned note",tags:["ui"],previewId:"pv_pinned_announcement"},{id:"70",categoryId:"guild",title:"Trophy Shelf",subtitle:"Shelf icons",tags:["mock"],previewId:"pv_trophy_shelf"}]}],hs=({label:t})=>s.jsx("span",{className:"g2-pill",children:t}),Yt=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g2-bar tone-${e}`,style:{width:t,height:n}}),UI={pv_quest_steps:()=>s.jsx("div",{className:"g2-preview g2-steps",children:[1,2,3].map(t=>s.jsxs("div",{className:"g2-step-row",children:[s.jsx("span",{className:"g2-step-dot"}),s.jsx(Yt,{width:`${70-t*10}%`,tone:t===3?"muted":"accent"})]},t))}),pv_daily_checklist:()=>s.jsx("div",{className:"g2-preview g2-checklist",children:["Login","Scan","Share","Claim"].map((t,e)=>s.jsxs("div",{className:"g2-check-row",children:[s.jsx("span",{className:`g2-checkbox ${e<2?"checked":""}`}),s.jsx("span",{className:"g2-check-label",children:t}),s.jsx(Yt,{width:`${40+e*10}%`,tone:"accent",height:5})]},t))}),pv_contract_timer:()=>s.jsxs("div",{className:"g2-preview g2-contract",children:[s.jsxs("div",{className:"g2-contract-top",children:[s.jsx(Yt,{width:"80%",tone:"accent"}),s.jsx(hs,{label:"7d"})]}),s.jsxs("div",{className:"g2-contract-body",children:[s.jsx(Yt,{width:"100%",tone:"muted",height:6}),s.jsx(Yt,{width:"65%",tone:"warning",height:6})]}),s.jsx("div",{className:"g2-contract-tear"})]}),pv_bounty_target:()=>s.jsxs("div",{className:"g2-preview g2-row",children:[s.jsxs("div",{className:"g2-target",children:[s.jsx("div",{className:"g2-target-ring"}),s.jsx("div",{className:"g2-target-dot"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"60%",tone:"accent"}),s.jsx(Yt,{width:"45%",tone:"success"}),s.jsx(hs,{label:"Reward"})]})]}),pv_objective_chips:()=>s.jsxs("div",{className:"g2-preview g2-chip-stack",children:[s.jsx(hs,{label:"Win 2 matches"}),s.jsx(hs,{label:"Scan 3"}),s.jsx(hs,{label:"Share once"})]}),pv_quest_chain_nodes:()=>s.jsx("div",{className:"g2-preview g2-node-chain",children:[0,1,2,3,4].map(t=>s.jsxs(q.Fragment,{children:[s.jsx("div",{className:`g2-node ${t<3?"active":""}`}),t<4?s.jsx("div",{className:"g2-node-connector"}):null]},t))}),pv_reward_bundle:()=>s.jsxs("div",{className:"g2-preview g2-row g2-space-between",children:[s.jsx("div",{className:"g2-loot g2-loot-gem"}),s.jsx("div",{className:"g2-loot g2-loot-coin"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"70%",tone:"accent"}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(hs,{label:"+250 XP"}),s.jsx(hs,{label:"+2 keys"})]})]})]}),pv_sidequest_compact:()=>s.jsxs("div",{className:"g2-preview g2-row g2-sidequest",children:[s.jsx("div",{className:"g2-sidequest-tag",children:"Side"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"60%",tone:"accent"}),s.jsx(Yt,{width:"35%",tone:"muted"})]}),s.jsx("div",{className:"g2-arrow-right"})]}),pv_claim_states:()=>s.jsxs("div",{className:"g2-preview g2-claims",children:[s.jsx("div",{className:"g2-claim-btn enabled",children:"Claim"}),s.jsx("div",{className:"g2-claim-btn disabled",children:"Locked"})]}),pv_difficulty_tags:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(hs,{label:"Easy"}),s.jsx(hs,{label:"Hard"}),s.jsx(hs,{label:"Insane"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"40%",tone:"success"}),s.jsx(Yt,{width:"60%",tone:"warning"}),s.jsx(Yt,{width:"80%",tone:"danger"})]})]}),pv_boss_hp_segmented:()=>s.jsxs("div",{className:"g2-preview g2-bossbar",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g2-boss-segment ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g2-marker",style:{left:"72%"}})]}),pv_dual_progress_marker:()=>s.jsxs("div",{className:"g2-preview g2-col g2-gap-xs",children:[s.jsx(Yt,{width:"85%",tone:"accent",height:10}),s.jsxs("div",{className:"g2-dual-overlay",children:[s.jsx(Yt,{width:"60%",tone:"success",height:8}),s.jsx("div",{className:"g2-marker",style:{left:"60%"}}),s.jsx("div",{className:"g2-marker muted",style:{left:"85%"}})]})]}),pv_segment_track_10:()=>s.jsx("div",{className:"g2-preview g2-segment-track",children:Array.from({length:10}).map((t,e)=>s.jsx("div",{className:`g2-segment ${e<6?"active":""}`},e))}),pv_donut_completion:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsxs("div",{className:"g2-donut",children:[s.jsx("div",{className:"g2-donut-fill"}),s.jsx("div",{className:"g2-donut-hole",children:"72%"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"50%",tone:"accent"}),s.jsx(Yt,{width:"40%",tone:"muted"})]})]}),pv_battery_gauge:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsxs("div",{className:"g2-battery",children:[s.jsx("div",{className:"g2-battery-cap"}),s.jsx("div",{className:"g2-battery-fill"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(hs,{label:"82%"}),s.jsx(Yt,{width:"70%",tone:"accent"})]})]}),pv_thermo_vertical:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-thermo",children:s.jsx("div",{className:"g2-thermo-fill"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"40%",tone:"warning"}),s.jsx(Yt,{width:"30%",tone:"muted"})]})]}),pv_xp_ticks:()=>s.jsxs("div",{className:"g2-preview g2-col",children:[s.jsxs("div",{className:"g2-xpbar",children:[s.jsx("div",{className:"g2-xp-fill"}),Array.from({length:8}).map((t,e)=>s.jsx("span",{className:"g2-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsx(hs,{label:"Level 42"})]}),pv_multibar_stats5:()=>s.jsx("div",{className:"g2-preview g2-stats5",children:["STR","DEX","INT","CON","LCK"].map((t,e)=>s.jsxs("div",{className:"g2-stat-row",children:[s.jsx("span",{className:"g2-stat-label",children:t}),s.jsx(Yt,{width:`${40+e*10}%`,tone:e%2===0?"accent":"success",height:6})]},t))}),pv_risk_meter:()=>s.jsxs("div",{className:"g2-preview g2-risk",children:[s.jsx("div",{className:"g2-risk-arc",children:s.jsx("div",{className:"g2-risk-pointer"})}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(hs,{label:"Risk"}),s.jsx(hs,{label:"68%"})]})]}),pv_perfect_run:()=>s.jsxs("div",{className:"g2-preview g2-perfect",children:[s.jsx(Yt,{width:"100%",tone:"success",height:12}),s.jsx("div",{className:"g2-checklist tiny",children:["No deaths","No errors","All chests"].map(t=>s.jsxs("div",{className:"g2-check-row",children:[s.jsx("span",{className:"g2-checkbox checked"}),s.jsx("span",{className:"g2-check-label",children:t})]},t))})]}),pv_podium_top3:()=>s.jsx("div",{className:"g2-preview g2-podium",children:[{h:50,tone:"silver"},{h:70,tone:"gold"},{h:40,tone:"bronze"}].map((t,e)=>s.jsxs("div",{className:`g2-podium-col ${t.tone}`,style:{height:t.h},children:["#",e+1]},e))}),pv_ladder_rungs:()=>s.jsx("div",{className:"g2-preview g2-ladder",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g2-rung ${e===2?"active":""}`},e))}),pv_league_tiers:()=>s.jsxs("div",{className:"g2-preview g2-row g2-league",children:[s.jsx("div",{className:"g2-league-shield"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"70%",tone:"accent"}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(hs,{label:"Bronze"}),s.jsx(hs,{label:"Diamond"})]})]})]}),pv_delta_chip:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(hs,{label:"^ +12"}),s.jsx(hs,{label:"v -3"}),s.jsx(Yt,{width:"50%",tone:"accent"})]}),pv_percentile_gauge:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-percent-gauge",children:s.jsx("div",{className:"g2-percent-needle"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(hs,{label:"Top 5%"}),s.jsx(Yt,{width:"40%",tone:"accent"})]})]}),pv_rival_slot:()=>s.jsxs("div",{className:"g2-preview g2-rival",children:[s.jsxs("div",{className:"g2-vs-block",children:[s.jsx(Yt,{width:"60%",tone:"accent"}),s.jsx(hs,{label:"You"})]}),s.jsx("div",{className:"g2-vs-mid",children:"VS"}),s.jsxs("div",{className:"g2-vs-block rival",children:[s.jsx(Yt,{width:"55%",tone:"warning"}),s.jsx(hs,{label:"Rival"})]})]}),pv_promo_zone:()=>s.jsxs("div",{className:"g2-preview g2-zone promo",children:[s.jsx("div",{className:"g2-zone-band"}),s.jsx("div",{className:"g2-zone-label",children:"Promotion Zone"})]}),pv_relegation_zone:()=>s.jsxs("div",{className:"g2-preview g2-zone danger",children:[s.jsx("div",{className:"g2-zone-band"}),s.jsx("div",{className:"g2-zone-label",children:"Relegation"})]}),pv_top5_list:()=>s.jsx("div",{className:"g2-preview g2-list",children:["Alpha","Bravo","Charlie","Delta","Echo"].map((t,e)=>s.jsxs("div",{className:"g2-list-row",children:[s.jsx("span",{className:"g2-list-num",children:e+1}),s.jsx(Yt,{width:`${70-e*8}%`,tone:e<2?"accent":"muted",height:6})]},t))}),pv_rank_step_history:()=>s.jsxs("div",{className:"g2-preview g2-rank-history",children:[Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g2-rank-node",style:{bottom:`${e*8}%`,left:`${e*16}%`}},e)),s.jsx("div",{className:"g2-rank-line"})]}),pv_split_compare:()=>s.jsxs("div",{className:"g2-preview g2-split",children:[s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"70%",tone:"accent"}),s.jsx(Yt,{width:"40%",tone:"accent"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"60%",tone:"warning"}),s.jsx(Yt,{width:"50%",tone:"warning"})]})]}),pv_you_vs_avg_bars:()=>s.jsxs("div",{className:"g2-preview g2-col",children:[s.jsxs("div",{className:"g2-overlay-bars",children:[s.jsx(Yt,{width:"80%",tone:"accent",height:10}),s.jsx(Yt,{width:"55%",tone:"muted",height:10})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(hs,{label:"You"}),s.jsx(hs,{label:"Server Avg"})]})]}),pv_bestof3_dots:()=>s.jsx("div",{className:"g2-preview g2-row g2-gap-sm",children:[0,1,2].map(t=>s.jsx("div",{className:`g2-round-dot ${t<2?"won":""}`},t))}),pv_duel_outcome:()=>s.jsxs("div",{className:"g2-preview g2-duel",children:[s.jsx("div",{className:"g2-shield win",children:"Win"}),s.jsx("div",{className:"g2-shield loss",children:"Loss"})]}),pv_advantage_meter:()=>s.jsxs("div",{className:"g2-preview g2-meter",children:[s.jsxs("div",{className:"g2-meter-track",children:[s.jsx("div",{className:"g2-meter-fill"}),s.jsx("div",{className:"g2-meter-pointer",style:{left:"62%"}})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(hs,{label:"Advantage"}),s.jsx(hs,{label:"+12%"})]})]}),pv_kpi_tiles_4:()=>s.jsx("div",{className:"g2-preview g2-kpi-grid",children:["KPI","CTR","UPT","LTV"].map((t,e)=>s.jsxs("div",{className:"g2-kpi-tile",children:[s.jsx("div",{className:"g2-kpi-label",children:t}),s.jsx(Yt,{width:`${40+e*10}%`,tone:"accent"})]},t))}),pv_delta_chips_breakdown:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(hs,{label:"+18"}),s.jsx(hs,{label:"-5"}),s.jsx(hs,{label:"+2"}),s.jsx(hs,{label:"-1"})]}),pv_mirror_neutral:()=>s.jsxs("div",{className:"g2-preview g2-mirror",children:[s.jsx("div",{className:"g2-mirror-half",children:s.jsx(Yt,{width:"60%",tone:"accent"})}),s.jsx("div",{className:"g2-divider"}),s.jsx("div",{className:"g2-mirror-half",children:s.jsx(Yt,{width:"60%",tone:"warning"})})]}),pv_radar_polygon:()=>s.jsx("div",{className:"g2-preview g2-radar",children:s.jsxs("svg",{viewBox:"0 0 120 120",children:[s.jsx("polygon",{points:"60,15 100,50 90,105 30,105 20,50",className:"g2-radar-bg"}),s.jsx("polygon",{points:"60,30 90,55 80,90 40,90 30,55",className:"g2-radar-fill"})]})}),pv_gap_to_next:()=>s.jsxs("div",{className:"g2-preview g2-gap-bar",children:[s.jsx(Yt,{width:"80%",tone:"accent",height:8}),s.jsx("div",{className:"g2-marker",style:{left:"65%"}}),s.jsx("div",{className:"g2-gap-label",children:"Gap: 12 pts"})]}),pv_guild_roles:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(hs,{label:"Leader"}),s.jsx(hs,{label:"Officer"}),s.jsx(hs,{label:"Member"})]}),pv_contrib_bars:()=>s.jsx("div",{className:"g2-preview g2-col g2-gap-xs",children:["Ava","Ben","Caro"].map((t,e)=>s.jsxs("div",{className:"g2-contrib-row",children:[s.jsx("span",{className:"g2-contrib-name",children:t}),s.jsx(Yt,{width:`${50+e*15}%`,tone:"accent",height:6})]},t))}),pv_spotlight_card:()=>s.jsxs("div",{className:"g2-preview g2-spotlight",children:[s.jsx("div",{className:"g2-spotlight-glow"}),s.jsx(Yt,{width:"70%",tone:"accent"}),s.jsx(hs,{label:"Spotlight"})]}),pv_guild_power_meter:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-power-donut",children:s.jsx("div",{className:"g2-power-fill"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Yt,{width:"60%",tone:"success"}),s.jsx(Yt,{width:"40%",tone:"warning"})]})]}),pv_slots_open_filled:()=>s.jsx("div",{className:"g2-preview g2-slots",children:[0,1,2,3].map(t=>s.jsx("div",{className:`g2-slot-card ${t<2?"open":"filled"}`},t))}),pv_war_readiness:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(hs,{label:"Ready"}),s.jsx(hs,{label:"Armor"}),s.jsx(hs,{label:"Supplies"}),s.jsx(Yt,{width:"50%",tone:"accent"})]}),pv_activity_pulse:()=>s.jsx("div",{className:"g2-preview g2-pulse",children:Array.from({length:14}).map((t,e)=>s.jsx("div",{className:"g2-pulse-bar",style:{height:`${10+e%5*8}px`}},e))}),pv_alliance_link:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-link-node"}),s.jsx("div",{className:"g2-link-chain"}),s.jsx("div",{className:"g2-link-node"})]}),pv_pinned_announcement:()=>s.jsxs("div",{className:"g2-preview g2-pinned",children:[s.jsx("div",{className:"g2-pin"}),s.jsx(Yt,{width:"70%",tone:"accent"}),s.jsx(Yt,{width:"40%",tone:"muted"})]}),pv_trophy_shelf:()=>s.jsxs("div",{className:"g2-preview g2-shelf",children:[s.jsx("div",{className:"g2-trophies",children:[0,1,2].map(t=>s.jsx("div",{className:"g2-trophy"},t))}),s.jsx("div",{className:"g2-shelf-wood"})]})},yIe=t=>UI[t]?UI[t]():s.jsx("div",{className:"g2-preview",children:s.jsx(Yt,{width:"60%",tone:"accent"})});function bIe(){return s.jsxs("div",{className:"g2-root",children:[s.jsxs("header",{className:"g2-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 2"}),s.jsx("p",{className:"g2-sub",children:"50 unique mock widgets mapped to the original playground list. All static and scoped."})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(hs,{label:"mock"}),s.jsx(hs,{label:"concept"}),s.jsx(hs,{label:"ui"})]})]}),s.jsx("nav",{className:"g2-toc",children:VI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g2-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g2-sections",children:VI.map(t=>s.jsxs("details",{className:"g2-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g2-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g2-section-title",children:t.title}),s.jsx("div",{className:"g2-section-sub",children:t.description})]}),s.jsxs("span",{className:"g2-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g2-grid",children:t.items.map(e=>s.jsxs("div",{className:"g2-card",children:[s.jsxs("div",{className:"g2-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g2-card-title",children:e.title}),s.jsx("div",{className:"g2-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g2-pill-row",children:(e.tags||["mock"]).map(n=>s.jsx(hs,{label:n},n))})]}),yIe(e.previewId)]},e.id))})]},t.id))})]})}const zI=[{id:"badges",title:"Badges & Titles",description:"Unlocks, nameplates, and medal visuals.",items:[{id:"1",categoryId:"badges",title:"Achievement Unlocked",subtitle:"Shimmer check",tags:["mock","ui"],previewId:"g3_badge_unlock_ring"},{id:"2",categoryId:"badges",title:"Locked Badge Mask",subtitle:"Silhouette lock",tags:["mock"],previewId:"g3_badge_lock_mask"},{id:"3",categoryId:"badges",title:"Rarity Fan",subtitle:"Common to mythic fan",tags:["concept"],previewId:"g3_rarity_fan"},{id:"4",categoryId:"badges",title:"Mastery Tiers",subtitle:"I-V concentric",tags:["ui"],previewId:"g3_mastery_tiers"},{id:"5",categoryId:"badges",title:"Title Plate Frame",subtitle:"Nameplate glow",tags:["mock"],previewId:"g3_title_plate"},{id:"6",categoryId:"badges",title:"Medal Banner",subtitle:"Bronze/Silver/Gold bar",tags:["ui"],previewId:"g3_medal_banner"},{id:"7",categoryId:"badges",title:"Badge Glow Card",subtitle:"Starburst pop",tags:["concept"],previewId:"g3_badge_glow"},{id:"8",categoryId:"badges",title:"Approved Stamp",subtitle:"Circular stamp",tags:["mock"],previewId:"g3_stamp_card"},{id:"9",categoryId:"badges",title:"Showcase Strip",subtitle:"Static carousel",tags:["ui"],previewId:"g3_showcase_strip"},{id:"10",categoryId:"badges",title:"First Scan Popover",subtitle:"Speech bubble",tags:["mock"],previewId:"g3_first_popover"}]},{id:"progress",title:"Progress & Gauges",description:"Bars, gauges, and segmented tracks.",items:[{id:"11",categoryId:"progress",title:"Boss Segments",subtitle:"Phase chunks",tags:["mock"],previewId:"g3_boss_segments"},{id:"12",categoryId:"progress",title:"Dual Progress",subtitle:"You vs avg marker",tags:["ui"],previewId:"g3_dual_progress"},{id:"13",categoryId:"progress",title:"Segment Rail",subtitle:"10-block rail",tags:["concept"],previewId:"g3_segment_rail"},{id:"14",categoryId:"progress",title:"Donut Completion",subtitle:"Ring percent",tags:["mock"],previewId:"g3_donut_completion"},{id:"15",categoryId:"progress",title:"Battery Meter",subtitle:"Energy cell",tags:["ui"],previewId:"g3_battery_meter"},{id:"16",categoryId:"progress",title:"Thermo Column",subtitle:"Vertical fill",tags:["mock"],previewId:"g3_thermo_column"},{id:"17",categoryId:"progress",title:"XP With Ticks",subtitle:"Micro ticks",tags:["ui"],previewId:"g3_xp_ticks"},{id:"18",categoryId:"progress",title:"Stat Stack",subtitle:"Five attributes",tags:["mock"],previewId:"g3_stat_stack"},{id:"19",categoryId:"progress",title:"Risk Arc",subtitle:"Arc meter",tags:["concept"],previewId:"g3_risk_arc"},{id:"20",categoryId:"progress",title:"Perfect Run",subtitle:"Checklist + bar",tags:["ui"],previewId:"g3_perfect_run"}]},{id:"rankings",title:"Rankings & Competitive",description:"Podiums, ladders, deltas, and rivals.",items:[{id:"21",categoryId:"rankings",title:"Podium Trio",subtitle:"Top 3 heights",tags:["mock"],previewId:"g3_podium_trio"},{id:"22",categoryId:"rankings",title:"Ladder Rungs",subtitle:"Rung climb",tags:["ui"],previewId:"g3_ladder_rungs"},{id:"23",categoryId:"rankings",title:"League Shield",subtitle:"Tier shield",tags:["concept"],previewId:"g3_league_shield"},{id:"24",categoryId:"rankings",title:"Delta Chips",subtitle:"Up/Down pills",tags:["ui"],previewId:"g3_delta_chips"},{id:"25",categoryId:"rankings",title:"Percent Gauge",subtitle:"Needle gauge",tags:["mock"],previewId:"g3_percent_gauge"},{id:"26",categoryId:"rankings",title:"Rival Split",subtitle:"You vs rival",tags:["concept"],previewId:"g3_rival_split"},{id:"27",categoryId:"rankings",title:"Promotion Band",subtitle:"Green band",tags:["ui"],previewId:"g3_promo_band"},{id:"28",categoryId:"rankings",title:"Relegation Band",subtitle:"Red band",tags:["mock"],previewId:"g3_relegation_band"},{id:"29",categoryId:"rankings",title:"Top Five Rows",subtitle:"Ranked rows",tags:["ui"],previewId:"g3_top_five"},{id:"30",categoryId:"rankings",title:"Rank Steps",subtitle:"Step chart",tags:["mock"],previewId:"g3_rank_steps"}]},{id:"collections",title:"Collections & Inventory",description:"Binders, stickers, and milestones.",items:[{id:"31",categoryId:"collections",title:"Binder Slots",subtitle:"Grid slots",tags:["mock"],previewId:"g3_binder_slots"},{id:"32",categoryId:"collections",title:"Set Progress",subtitle:"3 of 5 lit",tags:["ui"],previewId:"g3_set_progress"},{id:"33",categoryId:"collections",title:"Missing Checklist",subtitle:"Remaining shards",tags:["mock"],previewId:"g3_missing_list"},{id:"34",categoryId:"collections",title:"Rarity Rows",subtitle:"Tier lines",tags:["concept"],previewId:"g3_rarity_rows"},{id:"35",categoryId:"collections",title:"Legendary Spread",subtitle:"Book spread",tags:["ui"],previewId:"g3_legendary_spread"},{id:"36",categoryId:"collections",title:"Pet Album",subtitle:"Avatar minis",tags:["mock"],previewId:"g3_pet_album"},{id:"37",categoryId:"collections",title:"Sticker Sheet",subtitle:"Sticker grid",tags:["concept"],previewId:"g3_sticker_sheet"},{id:"38",categoryId:"collections",title:"Duplicate Dial",subtitle:"Count dial",tags:["ui"],previewId:"g3_duplicate_dial"},{id:"39",categoryId:"collections",title:"Trade/Lock Tags",subtitle:"State chips",tags:["mock"],previewId:"g3_trade_lock"},{id:"40",categoryId:"collections",title:"Collection Timeline",subtitle:"Milestone nodes",tags:["ui"],previewId:"g3_collection_timeline"}]},{id:"micro",title:"Micro Interactions",description:"Toasts, tabs, ribbons, and overlays.",items:[{id:"41",categoryId:"micro",title:"Unlock Glow",subtitle:"Glowing card",tags:["mock"],previewId:"g3_unlock_glow"},{id:"42",categoryId:"micro",title:"Inspect Tooltip",subtitle:"Hover tip",tags:["ui"],previewId:"g3_inspect_tooltip"},{id:"43",categoryId:"micro",title:"Confetti Burst",subtitle:"Sprinkled dots",tags:["concept"],previewId:"g3_confetti_burst"},{id:"44",categoryId:"micro",title:"Corner Ribbon",subtitle:"New ribbon",tags:["mock"],previewId:"g3_corner_ribbon"},{id:"45",categoryId:"micro",title:"Locked Blur",subtitle:"Frosted overlay",tags:["ui"],previewId:"g3_locked_blur"},{id:"46",categoryId:"micro",title:"Pulse Progress",subtitle:"Animated pulse",tags:["concept"],previewId:"g3_pulse_progress"},{id:"47",categoryId:"micro",title:"Mini Tabs",subtitle:"Inline tab pills",tags:["ui"],previewId:"g3_mini_tabs"},{id:"48",categoryId:"micro",title:"Expandable Block",subtitle:"Details reveal",tags:["mock"],previewId:"g3_expand_block"},{id:"49",categoryId:"micro",title:"Toast Message",subtitle:"Inline toast",tags:["ui"],previewId:"g3_toast_message"},{id:"50",categoryId:"micro",title:"Quest Failed",subtitle:"Warning slab",tags:["mock"],previewId:"g3_quest_failed"}]}],vr=({label:t})=>s.jsx("span",{className:"g3-pill",children:t}),Rs=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g3-bar tone-${e}`,style:{width:t,height:n}}),qf=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g3-dot tone-${t}`,style:{width:e,height:e}}),_Ie=t=>{const e=wIe[t];return e?e():s.jsx("div",{className:"g3-preview g3-fallback"})},wIe={g3_badge_unlock_ring:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-icon ring success",children:s.jsx("span",{className:"g3-checkmark"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Rs,{width:"80%",tone:"success"}),s.jsxs("div",{className:"g3-pill-row",children:[s.jsx(vr,{label:"Unlocked"}),s.jsx(vr,{label:"+150 XP"})]})]})]}),g3_badge_lock_mask:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-icon ring muted",children:s.jsx("div",{className:"g3-lock-hole"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx("div",{className:"g3-mask-figure"}),s.jsx(Rs,{width:"60%",tone:"muted"})]})]}),g3_rarity_fan:()=>s.jsx("div",{className:"g3-preview g3-row g3-gap-sm",children:["muted","accent","success","warning","danger"].map(t=>s.jsx("div",{className:`g3-diamond tone-${t}`},t))}),g3_mastery_tiers:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-ring-stack",children:[1,2,3].map(t=>s.jsx("div",{className:`g3-ring-${t}`},t))}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Rs,{width:"65%"}),s.jsxs("div",{className:"g3-dot-row",children:[s.jsx(qf,{}),s.jsx(qf,{tone:"success"}),s.jsx(qf,{tone:"warning"})]})]})]}),g3_title_plate:()=>s.jsxs("div",{className:"g3-preview g3-plate",children:[s.jsx("div",{className:"g3-plate-left"}),s.jsx("div",{className:"g3-plate-text",children:"Title"}),s.jsx("div",{className:"g3-plate-right"})]}),g3_medal_banner:()=>s.jsxs("div",{className:"g3-preview g3-row g3-space-between",children:[s.jsx("div",{className:"g3-medal bronze"}),s.jsx("div",{className:"g3-medal silver"}),s.jsx("div",{className:"g3-medal gold"})]}),g3_badge_glow:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-starburst"}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Rs,{width:"70%"}),s.jsx(Rs,{width:"45%",tone:"success"})]})]}),g3_stamp_card:()=>s.jsxs("div",{className:"g3-preview g3-stamp-card",children:[s.jsx("div",{className:"g3-stamp-ring",children:"APPROVED"}),s.jsx(Rs,{width:"60%"})]}),g3_showcase_strip:()=>s.jsxs("div",{className:"g3-preview g3-carousel",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g3-slide ${t===1?"active":""}`},t)),s.jsx("div",{className:"g3-dot-row",children:[0,1,2,3].map(t=>s.jsx(qf,{tone:t===1?"accent":"muted"},t))})]}),g3_first_popover:()=>s.jsxs("div",{className:"g3-preview g3-pop",children:[s.jsxs("div",{className:"g3-pop-bubble",children:[s.jsx("div",{className:"g3-pop-title",children:"First scan"}),s.jsx(Rs,{width:"70%"})]}),s.jsx("div",{className:"g3-pop-arrow"})]}),g3_boss_segments:()=>s.jsxs("div",{className:"g3-preview g3-bossbar",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g3-boss-segment ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g3-marker",style:{left:"72%"}})]}),g3_dual_progress:()=>s.jsxs("div",{className:"g3-preview g3-col",children:[s.jsx(Rs,{width:"85%"}),s.jsxs("div",{className:"g3-dual",children:[s.jsx(Rs,{width:"60%",tone:"success",height:8}),s.jsx("div",{className:"g3-marker",style:{left:"60%"}}),s.jsx("div",{className:"g3-marker muted",style:{left:"85%"}})]})]}),g3_segment_rail:()=>s.jsx("div",{className:"g3-preview g3-rail",children:Array.from({length:10}).map((t,e)=>s.jsx("div",{className:`g3-rail-segment ${e<6?"active":""}`},e))}),g3_donut_completion:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsxs("div",{className:"g3-donut",children:[s.jsx("div",{className:"g3-donut-fill"}),s.jsx("div",{className:"g3-donut-hole",children:"72%"})]}),s.jsx(Rs,{width:"50%"})]}),g3_battery_meter:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsxs("div",{className:"g3-battery",children:[s.jsx("div",{className:"g3-battery-cap"}),s.jsx("div",{className:"g3-battery-fill"})]}),s.jsx(vr,{label:"82%"})]}),g3_thermo_column:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-thermo",children:s.jsx("div",{className:"g3-thermo-fill"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Rs,{width:"40%",tone:"warning"}),s.jsx(Rs,{width:"30%",tone:"muted"})]})]}),g3_xp_ticks:()=>s.jsxs("div",{className:"g3-preview g3-col",children:[s.jsxs("div",{className:"g3-xpbar",children:[s.jsx("div",{className:"g3-xp-fill"}),Array.from({length:8}).map((t,e)=>s.jsx("span",{className:"g3-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsx(vr,{label:"Lvl 42"})]}),g3_stat_stack:()=>s.jsx("div",{className:"g3-preview g3-stats",children:["STR","DEX","INT","CON","LCK"].map((t,e)=>s.jsxs("div",{className:"g3-stat-row",children:[s.jsx("span",{className:"g3-stat-label",children:t}),s.jsx(Rs,{width:`${40+e*10}%`,tone:e%2===0?"accent":"success"})]},t))}),g3_risk_arc:()=>s.jsxs("div",{className:"g3-preview g3-risk",children:[s.jsx("div",{className:"g3-risk-arc",children:s.jsx("div",{className:"g3-risk-pointer"})}),s.jsx(vr,{label:"68%"})]}),g3_perfect_run:()=>s.jsxs("div",{className:"g3-preview g3-perfect",children:[s.jsx(Rs,{width:"100%",tone:"success"}),s.jsx("div",{className:"g3-checklist tiny",children:["No deaths","No errors","All chests"].map(t=>s.jsxs("div",{className:"g3-check-row",children:[s.jsx("span",{className:"g3-checkbox checked"}),s.jsx("span",{className:"g3-check-label",children:t})]},t))})]}),g3_podium_trio:()=>s.jsx("div",{className:"g3-preview g3-podium",children:[{h:50,tone:"silver"},{h:70,tone:"gold"},{h:40,tone:"bronze"}].map((t,e)=>s.jsxs("div",{className:`g3-podium-col ${t.tone}`,style:{height:t.h},children:["#",e+1]},e))}),g3_ladder_rungs:()=>s.jsx("div",{className:"g3-preview g3-ladder",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g3-rung ${e===2?"active":""}`},e))}),g3_league_shield:()=>s.jsxs("div",{className:"g3-preview g3-row g3-league",children:[s.jsx("div",{className:"g3-league-shield"}),s.jsx(Rs,{width:"70%"})]}),g3_delta_chips:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[s.jsx(vr,{label:"^ +12"}),s.jsx(vr,{label:"v -3"}),s.jsx(Rs,{width:"50%"})]}),g3_percent_gauge:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-percent",children:s.jsx("div",{className:"g3-percent-needle"})}),s.jsx(vr,{label:"Top 5%"})]}),g3_rival_split:()=>s.jsxs("div",{className:"g3-preview g3-rival",children:[s.jsxs("div",{className:"g3-vs",children:[s.jsx(Rs,{width:"60%"}),s.jsx(vr,{label:"You"})]}),s.jsx("div",{className:"g3-vs-mid",children:"VS"}),s.jsxs("div",{className:"g3-vs rival",children:[s.jsx(Rs,{width:"55%",tone:"warning"}),s.jsx(vr,{label:"Rival"})]})]}),g3_promo_band:()=>s.jsxs("div",{className:"g3-preview g3-zone promo",children:[s.jsx("div",{className:"g3-zone-band"}),s.jsx("div",{className:"g3-zone-label",children:"Promotion"})]}),g3_relegation_band:()=>s.jsxs("div",{className:"g3-preview g3-zone danger",children:[s.jsx("div",{className:"g3-zone-band"}),s.jsx("div",{className:"g3-zone-label",children:"Relegation"})]}),g3_top_five:()=>s.jsx("div",{className:"g3-preview g3-list",children:["Alpha","Bravo","Charlie","Delta","Echo"].map((t,e)=>s.jsxs("div",{className:"g3-list-row",children:[s.jsx("span",{className:"g3-list-num",children:e+1}),s.jsx(Rs,{width:`${70-e*8}%`,tone:e<2?"accent":"muted"})]},t))}),g3_rank_steps:()=>s.jsxs("div",{className:"g3-preview g3-rank-steps",children:[Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g3-step-dot",style:{bottom:`${e*8}%`,left:`${e*16}%`}},e)),s.jsx("div",{className:"g3-step-line"})]}),g3_binder_slots:()=>s.jsx("div",{className:"g3-preview g3-grid-cards",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g3-slot ${e<3?"filled":""}`},e))}),g3_set_progress:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g3-piece ${e<3?"active":""}`},e)),s.jsx(vr,{label:"3 / 5"})]}),g3_missing_list:()=>s.jsx("div",{className:"g3-preview g3-checklist",children:["Shard A","Shard B","Shard C"].map((t,e)=>s.jsxs("div",{className:"g3-check-row",children:[s.jsx("span",{className:`g3-checkbox ${e===2?"":"checked"}`}),s.jsx("span",{className:"g3-check-label",children:t})]},t))}),g3_rarity_rows:()=>s.jsxs("div",{className:"g3-preview g3-col g3-gap-xs",children:[s.jsx(Rs,{width:"90%",tone:"muted"}),s.jsx(Rs,{width:"70%",tone:"accent"}),s.jsx(Rs,{width:"50%",tone:"success"}),s.jsx(Rs,{width:"40%",tone:"warning"}),s.jsx(Rs,{width:"30%",tone:"danger"})]}),g3_legendary_spread:()=>s.jsxs("div",{className:"g3-preview g3-book",children:[s.jsx("div",{className:"g3-book-page left"}),s.jsx("div",{className:"g3-book-page right"})]}),g3_pet_album:()=>s.jsx("div",{className:"g3-preview g3-pet-grid",children:Array.from({length:6}).map((t,e)=>s.jsxs("div",{className:"g3-pet-avatar",children:[s.jsx("span",{className:"g3-pet-ear"}),s.jsx("span",{className:"g3-pet-ear"})]},e))}),g3_sticker_sheet:()=>s.jsx("div",{className:"g3-preview g3-sticker-sheet",children:Array.from({length:4}).map((t,e)=>s.jsx("div",{className:"g3-sticker"},e))}),g3_duplicate_dial:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-counter",children:s.jsx("div",{className:"g3-counter-needle"})}),s.jsx(vr,{label:"x4"})]}),g3_trade_lock:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[s.jsx(vr,{label:"Tradeable"}),s.jsx(vr,{label:"Locked"}),s.jsx(Rs,{width:"40%"})]}),g3_collection_timeline:()=>s.jsxs("div",{className:"g3-preview g3-timeline",children:[[10,25,50,100].map((t,e)=>s.jsx("div",{className:"g3-timeline-node",style:{left:`${e*25}%`},children:s.jsx("span",{className:"g3-timeline-label",children:t})},t)),s.jsx("div",{className:"g3-timeline-line"})]}),g3_unlock_glow:()=>s.jsx("div",{className:"g3-preview g3-glow-card",children:s.jsx(Rs,{width:"60%",tone:"success"})}),g3_inspect_tooltip:()=>s.jsxs("div",{className:"g3-preview g3-tooltip-card",children:[s.jsx("div",{className:"g3-tooltip-box",children:"Inspect"}),s.jsx("div",{className:"g3-tooltip-tail"})]}),g3_confetti_burst:()=>s.jsx("div",{className:"g3-preview g3-confetti",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:"g3-confetti-dot"},e))}),g3_corner_ribbon:()=>s.jsxs("div",{className:"g3-preview g3-corner",children:[s.jsx("div",{className:"g3-corner-ribbon",children:"New"}),s.jsx(Rs,{width:"60%"})]}),g3_locked_blur:()=>s.jsxs("div",{className:"g3-preview g3-locked",children:[s.jsx("div",{className:"g3-locked-mask"}),s.jsx("div",{className:"g3-lock-hole"})]}),g3_pulse_progress:()=>s.jsx("div",{className:"g3-preview g3-pulse-bar",children:s.jsx("div",{className:"g3-pulse-fill"})}),g3_mini_tabs:()=>s.jsxs("div",{className:"g3-preview g3-col g3-gap-xs",children:[s.jsxs("div",{className:"g3-tabs",children:[s.jsx("div",{className:"g3-tab active",children:"One"}),s.jsx("div",{className:"g3-tab",children:"Two"}),s.jsx("div",{className:"g3-tab",children:"Three"})]}),s.jsx(Rs,{width:"70%"})]}),g3_expand_block:()=>s.jsxs("div",{className:"g3-preview g3-details",children:[s.jsx("div",{className:"g3-details-summary",children:"Details"}),s.jsxs("div",{className:"g3-details-body",children:[s.jsx(Rs,{width:"60%",tone:"muted"}),s.jsx(Rs,{width:"40%",tone:"muted"})]})]}),g3_toast_message:()=>s.jsxs("div",{className:"g3-preview g3-toast",children:[s.jsx("div",{className:"g3-toast-dot"}),s.jsx(Rs,{width:"70%"})]}),g3_quest_failed:()=>s.jsxs("div",{className:"g3-preview g3-failed",children:[s.jsx("div",{className:"g3-warning-icon"}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Rs,{width:"60%",tone:"danger"}),s.jsx(Rs,{width:"40%",tone:"muted"})]})]})};function jIe(){return s.jsxs("div",{className:"g3-root",children:[s.jsxs("header",{className:"g3-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 3"}),s.jsx("p",{className:"g3-sub",children:"50 unique mock previews across 5 categories. All static and scoped to this page."})]}),s.jsxs("div",{className:"g3-pill-row",children:[s.jsx(vr,{label:"mock"}),s.jsx(vr,{label:"concept"}),s.jsx(vr,{label:"ui"})]})]}),s.jsx("nav",{className:"g3-toc",children:zI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g3-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g3-sections",children:zI.map(t=>s.jsxs("details",{className:"g3-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g3-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g3-section-title",children:t.title}),s.jsx("div",{className:"g3-section-sub",children:t.description})]}),s.jsxs("span",{className:"g3-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g3-grid",children:t.items.map(e=>s.jsxs("div",{className:"g3-card",children:[s.jsxs("div",{className:"g3-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g3-card-title",children:e.title}),s.jsx("div",{className:"g3-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g3-pill-row",children:(e.tags||["mock"]).map(n=>s.jsx(vr,{label:n},n))})]}),_Ie(e.previewId)]},e.id))})]},t.id))})]})}const GI=[{id:"controls",title:"Controls & Navigation",description:"Chips, toggles, sliders, and small navigation rails.",items:[{id:"1",categoryId:"controls",title:"Segmented Toggle Bar",subtitle:"3 states, active glow",tags:["UI"],previewId:"pv_ui_seg_toggle_3"},{id:"2",categoryId:"controls",title:"Icon Tab Rail",subtitle:"mini tabs with badges",tags:["UI"],previewId:"pv_ui_icon_tabs_badges"},{id:"3",categoryId:"controls",title:"Filter Chips Row",subtitle:"wrap + selected state",tags:["UI"],previewId:"pv_ui_filter_chips_wrap"},{id:"4",categoryId:"controls",title:"Sort Pill Switch",subtitle:"ASC/DESC pill",tags:["UI"],previewId:"pv_ui_sort_pill"},{id:"5",categoryId:"controls",title:"Search Field + Hint",subtitle:"inline hint + icon",tags:["UI"],previewId:"pv_ui_search_hint"},{id:"6",categoryId:"controls",title:"Dropdown Menu Stack",subtitle:"3 options + separators",tags:["UI"],previewId:"pv_ui_dropdown_stack"},{id:"7",categoryId:"controls",title:"Range Slider Track",subtitle:"ticks + thumb",tags:["UI"],previewId:"pv_ui_slider_ticks"},{id:"8",categoryId:"controls",title:"Stepper Control",subtitle:"prev/next + step dots",tags:["UI"],previewId:"pv_ui_stepper_dots"},{id:"9",categoryId:"controls",title:"Compact Pagination",subtitle:"1..5 + next",tags:["UI"],previewId:"pv_ui_pagination_compact"},{id:"10",categoryId:"controls",title:"Sticky Subnav",subtitle:"active underline",tags:["UI"],previewId:"pv_ui_sticky_subnav"}]},{id:"cards",title:"Cards, Frames, Overlays",description:"Mini cards, ribbons, overlays, and tooltip shells.",items:[{id:"11",categoryId:"cards",title:"Card Header Ribbon",subtitle:"angled label",tags:["UI"],previewId:"pv_ui_ribbon_header"},{id:"12",categoryId:"cards",title:"Corner Tag Overlay",subtitle:"top-right chip",tags:["UI"],previewId:"pv_ui_corner_tag"},{id:"13",categoryId:"cards",title:"Locked Overlay Blur",subtitle:"frosted lock",tags:["UI"],previewId:"pv_ui_locked_blur2"},{id:"14",categoryId:"cards",title:"Tooltip Bubble",subtitle:"arrow + shadow",tags:["UI"],previewId:"pv_ui_tooltip_bubble"},{id:"15",categoryId:"cards",title:"Popover Panel",subtitle:"title + actions",tags:["UI"],previewId:"pv_ui_popover_panel"},{id:"16",categoryId:"cards",title:"Modal Mini Mock",subtitle:"header/body/footer",tags:["UI"],previewId:"pv_ui_modal_mini"},{id:"17",categoryId:"cards",title:"Drawer Slide Mock",subtitle:"right drawer",tags:["UI"],previewId:"pv_ui_drawer_right"},{id:"18",categoryId:"cards",title:"Toast Stack",subtitle:"3 toasts",tags:["UI"],previewId:"pv_ui_toast_stack3"},{id:"19",categoryId:"cards",title:"Inline Callout",subtitle:"info box",tags:["UI"],previewId:"pv_ui_callout_inline"},{id:"20",categoryId:"cards",title:"Badge Cluster",subtitle:"3 badge styles",tags:["UI"],previewId:"pv_ui_badge_cluster"}]},{id:"progress",title:"Progress & Meters",description:"Bars, dials, ladders, and dual markers.",items:[{id:"21",categoryId:"progress",title:"XP Bar with Ticks",subtitle:"level ticks",tags:["UI"],previewId:"pv_ui_xp_ticks2"},{id:"22",categoryId:"progress",title:"Dual Marker Bar",subtitle:"avg marker line",tags:["UI"],previewId:"pv_ui_dual_marker_bar"},{id:"23",categoryId:"progress",title:"Donut + Label",subtitle:"% inside ring",tags:["UI"],previewId:"pv_ui_donut_label"},{id:"24",categoryId:"progress",title:"Segmented Track 12",subtitle:"filled segments",tags:["UI"],previewId:"pv_ui_segment_track_12"},{id:"25",categoryId:"progress",title:"Vertical Thermometer",subtitle:"fill + cap",tags:["UI"],previewId:"pv_ui_thermo_cap"},{id:"26",categoryId:"progress",title:"Battery Gauge",subtitle:"4 cells",tags:["UI"],previewId:"pv_ui_battery_cells"},{id:"27",categoryId:"progress",title:"Multi Stat Microbars",subtitle:"5 bars",tags:["UI"],previewId:"pv_ui_microbars_5"},{id:"28",categoryId:"progress",title:"Streak Chain Meter",subtitle:"linked dots",tags:["UI"],previewId:"pv_ui_streak_chain"},{id:"29",categoryId:"progress",title:"Risk Dial",subtitle:"semi arc gauge",tags:["UI"],previewId:"pv_ui_risk_semi_dial"},{id:"30",categoryId:"progress",title:"Goal Ladder",subtitle:"milestones steps",tags:["UI"],previewId:"pv_ui_goal_ladder"}]},{id:"lists",title:"Lists & Tables",description:"Leaderboard rows, KPIs, timelines, and accordions.",items:[{id:"31",categoryId:"lists",title:"Mini Leaderboard",subtitle:"top 5 rows",tags:["UI"],previewId:"pv_ui_leaderboard_5"},{id:"32",categoryId:"lists",title:"Two-Column KPI List",subtitle:"label/value",tags:["UI"],previewId:"pv_ui_kpi_list_2col"},{id:"33",categoryId:"lists",title:"Table Row Hover",subtitle:"highlight row mock",tags:["UI"],previewId:"pv_ui_table_hover"},{id:"34",categoryId:"lists",title:"Rank Delta Row",subtitle:" chips in row",tags:["UI"],previewId:"pv_ui_rank_delta_row"},{id:"35",categoryId:"lists",title:"Avatar List Compact",subtitle:"3 entries",tags:["UI"],previewId:"pv_ui_avatar_list3"},{id:"36",categoryId:"lists",title:"Timeline Row",subtitle:"dots + text",tags:["UI"],previewId:"pv_ui_timeline_row"},{id:"37",categoryId:"lists",title:"Split Panel List",subtitle:"left labels, right values",tags:["UI"],previewId:"pv_ui_split_panel_list"},{id:"38",categoryId:"lists",title:"Chip List with Counts",subtitle:"chips + numbers",tags:["UI"],previewId:"pv_ui_chip_counts"},{id:"39",categoryId:"lists",title:"Accordion List",subtitle:"3 items expanded",tags:["UI"],previewId:"pv_ui_accordion3"},{id:"40",categoryId:"lists",title:"Activity Spark Row",subtitle:"sparkline + value",tags:["UI"],previewId:"pv_ui_spark_row"}]},{id:"animated",title:"Animated/Interactive UI",description:"Pulses, flips, shimmer, and motion stripes.",items:[{id:"41",categoryId:"animated",title:"Pulse Progress",subtitle:"subtle animated fill",tags:["UI"],previewId:"pv_ui_pulse_progress2"},{id:"42",categoryId:"animated",title:"Unlock Glow",subtitle:"animated border glow",tags:["UI"],previewId:"pv_ui_unlock_glow2"},{id:"43",categoryId:"animated",title:"Shimmer Skeleton",subtitle:"loading skeleton",tags:["UI"],previewId:"pv_ui_skeleton_shimmer"},{id:"44",categoryId:"animated",title:"Confetti Dots",subtitle:"sprinkle burst",tags:["UI"],previewId:"pv_ui_confetti_dots2"},{id:"45",categoryId:"animated",title:"Hover Lift Card",subtitle:"lift + shadow",tags:["UI"],previewId:"pv_ui_hover_lift"},{id:"46",categoryId:"animated",title:"Scan Ping Indicator",subtitle:"radial ping",tags:["UI"],previewId:"pv_ui_ping_indicator"},{id:"47",categoryId:"animated",title:"Badge Pop Animation",subtitle:"scale pop",tags:["UI"],previewId:"pv_ui_badge_pop"},{id:"48",categoryId:"animated",title:"Toggle Flip",subtitle:"switch animation",tags:["UI"],previewId:"pv_ui_toggle_flip"},{id:"49",categoryId:"animated",title:"Progress Stripe Motion",subtitle:"moving stripes",tags:["UI"],previewId:"pv_ui_stripe_motion"},{id:"50",categoryId:"animated",title:"Notification Bell Pulse",subtitle:"tiny pulse ring",tags:["UI"],previewId:"pv_ui_bell_pulse"}]}],ni=({label:t})=>s.jsx("span",{className:"g4-pill",children:t}),rs=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g4-bar tone-${e}`,style:{width:t,height:n}}),SIe={pv_ui_seg_toggle_3:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm",children:["Stats","Roster","Logs"].map((t,e)=>s.jsx("div",{className:`g4-seg ${e===1?"active":""}`,children:t},t))}),pv_ui_icon_tabs_badges:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm",children:[{icon:"",badge:2},{icon:"",badge:4,active:!0},{icon:"",badge:1}].map(t=>s.jsxs("div",{className:`g4-icon-tab ${t.active?"active":""}`,children:[s.jsx("span",{className:"g4-icon",children:t.icon}),s.jsx("span",{className:"g4-badge",children:t.badge})]},t.icon))}),pv_ui_filter_chips_wrap:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xs g4-wrap",children:["All","PVE","PVP","Guild","Trades","Events"].map((t,e)=>s.jsx("span",{className:`g4-chip ${e===2?"active":""}`,children:t},t))}),pv_ui_sort_pill:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-space-between",children:[s.jsxs("div",{className:"g4-pill-toggle",children:[s.jsx("span",{className:"on",children:"ASC"}),s.jsx("span",{className:"off",children:"DESC"})]}),s.jsxs("div",{className:"g4-sort-arrows",children:[s.jsx("div",{className:"g4-arrow up"}),s.jsx("div",{className:"g4-arrow down"})]})]}),pv_ui_search_hint:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsxs("div",{className:"g4-search",children:[s.jsx("span",{className:"g4-search-icon",children:""}),s.jsx("input",{className:"g4-search-input",value:"search players",readOnly:!0})]}),s.jsx("span",{className:"g4-hint",children:"Press / to focus"})]}),pv_ui_dropdown_stack:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Newest","Top Rated","Favorites"].map((t,e)=>s.jsxs("div",{className:"g4-menu-row",children:[s.jsx("span",{children:t}),e===0&&s.jsx("span",{className:"g4-check",children:""})]},t))}),pv_ui_slider_ticks:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xs",children:[s.jsxs("div",{className:"g4-slider",children:[s.jsxs("div",{className:"g4-slider-track",children:[s.jsx("div",{className:"g4-slider-fill",style:{width:"64%"}}),s.jsx("div",{className:"g4-slider-thumb",style:{left:"64%"}})]}),s.jsx("div",{className:"g4-slider-ticks",children:Array.from({length:7}).map((t,e)=>s.jsx("span",{},e))})]}),s.jsxs("div",{className:"g4-slider-labels",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"64"}),s.jsx("span",{children:"100"})]})]}),pv_ui_stepper_dots:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsx("button",{className:"g4-btn ghost",children:"Prev"}),s.jsx("div",{className:"g4-row g4-gap-xs g4-center",children:Array.from({length:5}).map((t,e)=>s.jsx("span",{className:`g4-step-dot ${e<2?"done":e===2?"active":""}`},e))}),s.jsx("button",{className:"g4-btn solid",children:"Next"})]}),pv_ui_pagination_compact:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-xs g4-center",children:[[1,2,3,4,5].map(t=>s.jsx("span",{className:`g4-page ${t===3?"active":""}`,children:t},t)),s.jsx("span",{className:"g4-page ghost",children:"Next"})]}),pv_ui_sticky_subnav:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm g4-sticky",children:["Overview","Teams","History","Files"].map((t,e)=>s.jsxs("div",{className:`g4-subtab ${e===1?"active":""}`,children:[t,e===1&&s.jsx("div",{className:"g4-underline"})]},t))}),pv_ui_ribbon_header:()=>s.jsxs("div",{className:"g4-preview g4-card-slab",children:[s.jsx("div",{className:"g4-ribbon",children:"NEW"}),s.jsxs("div",{className:"g4-col g4-gap-xs",children:[s.jsx(rs,{width:"70%"}),s.jsx(rs,{width:"50%",tone:"muted"})]})]}),pv_ui_corner_tag:()=>s.jsxs("div",{className:"g4-preview g4-card-slab",children:[s.jsx("div",{className:"g4-corner-tag",children:"UI"}),s.jsx(rs,{width:"60%"}),s.jsx(rs,{width:"40%",tone:"muted"})]}),pv_ui_locked_blur2:()=>s.jsxs("div",{className:"g4-preview g4-locked",children:[s.jsx("div",{className:"g4-locked-blur"}),s.jsx("div",{className:"g4-lock-icon",children:""}),s.jsx(rs,{width:"50%",tone:"muted"})]}),pv_ui_tooltip_bubble:()=>s.jsxs("div",{className:"g4-preview g4-tooltip",children:[s.jsxs("div",{className:"g4-tooltip-body",children:[s.jsx(rs,{width:"70%"}),s.jsx(rs,{width:"40%",tone:"muted"})]}),s.jsx("div",{className:"g4-tooltip-arrow"})]}),pv_ui_popover_panel:()=>s.jsxs("div",{className:"g4-preview g4-popover",children:[s.jsxs("div",{className:"g4-popover-head",children:[s.jsx(rs,{width:"50%"}),s.jsxs("div",{className:"g4-row g4-gap-xs",children:[s.jsx("span",{className:"g4-dot tone-muted"}),s.jsx("span",{className:"g4-dot tone-muted"})]})]}),s.jsx(rs,{width:"80%",tone:"muted"}),s.jsx(rs,{width:"60%",tone:"muted"})]}),pv_ui_modal_mini:()=>s.jsxs("div",{className:"g4-preview g4-modal",children:[s.jsxs("div",{className:"g4-modal-head",children:[s.jsx(rs,{width:"50%"}),s.jsx("span",{className:"g4-close",children:""})]}),s.jsxs("div",{className:"g4-modal-body",children:[s.jsx(rs,{width:"90%",tone:"muted"}),s.jsx(rs,{width:"70%",tone:"muted"})]}),s.jsxs("div",{className:"g4-modal-foot",children:[s.jsx("button",{className:"g4-btn ghost",children:"Cancel"}),s.jsx("button",{className:"g4-btn solid",children:"Save"})]})]}),pv_ui_drawer_right:()=>s.jsxs("div",{className:"g4-preview g4-drawer",children:[s.jsxs("div",{className:"g4-drawer-body",children:[s.jsx(rs,{width:"65%"}),s.jsx(rs,{width:"40%",tone:"muted"})]}),s.jsxs("div",{className:"g4-drawer-panel",children:[s.jsx("div",{className:"g4-panel-handle"}),s.jsx(rs,{width:"70%"}),s.jsx(rs,{width:"50%",tone:"muted"})]})]}),pv_ui_toast_stack3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Synced","New invite","Warning"].map((t,e)=>s.jsxs("div",{className:`g4-toast ${e===2?"warn":""}`,children:[s.jsx("span",{className:"g4-dot tone-success"}),s.jsx("span",{children:t})]},t))}),pv_ui_callout_inline:()=>s.jsxs("div",{className:"g4-preview g4-callout",children:[s.jsx("div",{className:"g4-callout-icon",children:"i"}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsx(rs,{width:"40%",tone:"muted"})]})]}),pv_ui_badge_cluster:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-xs",children:[s.jsx(ni,{label:"Beta"}),s.jsx(ni,{label:"Live"}),s.jsx(ni,{label:"Pro"})]}),pv_ui_xp_ticks2:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xs",children:[s.jsxs("div",{className:"g4-xpbar",children:[s.jsx("div",{className:"g4-xp-fill",style:{width:"78%"}}),Array.from({length:9}).map((t,e)=>s.jsx("span",{className:"g4-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsxs("div",{className:"g4-row g4-gap-xs",children:[s.jsx(ni,{label:"Lvl 56"}),s.jsx(ni,{label:"78%"})]})]}),pv_ui_dual_marker_bar:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsxs("div",{className:"g4-bar-line",children:[s.jsx(rs,{width:"92%"}),s.jsx("div",{className:"g4-marker",style:{left:"64%"}}),s.jsx("div",{className:"g4-marker muted",style:{left:"82%"}})]}),s.jsxs("div",{className:"g4-row g4-gap-sm g4-center",children:[s.jsx(ni,{label:"You"}),s.jsx(ni,{label:"Avg"})]})]}),pv_ui_donut_label:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-donut",children:[s.jsx("div",{className:"g4-donut-fill"}),s.jsx("div",{className:"g4-donut-hole",children:"64%"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsx(rs,{width:"40%",tone:"muted"})]})]}),pv_ui_segment_track_12:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xxs g4-seg-track",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:`g4-track-seg ${e<8?"active":""}`},e))}),pv_ui_thermo_cap:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-thermo",children:[s.jsx("div",{className:"g4-thermo-fill",style:{height:"70%"}}),s.jsx("div",{className:"g4-thermo-cap"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(rs,{width:"50%",tone:"warning"}),s.jsx(rs,{width:"30%",tone:"muted"})]})]}),pv_ui_battery_cells:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-battery",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g4-battery-cell ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g4-battery-cap"})]}),s.jsx(ni,{label:"75%"})]}),pv_ui_microbars_5:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["ATK","SPD","HP","DEF","LCK"].map((t,e)=>s.jsxs("div",{className:"g4-row g4-gap-xs g4-center",children:[s.jsx("span",{className:"g4-stat-label",children:t}),s.jsx(rs,{width:`${40+e*12}%`,tone:e%2===0?"accent":"success",height:6})]},t))}),pv_ui_streak_chain:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xxs g4-center",children:Array.from({length:8}).map((t,e)=>s.jsxs(q.Fragment,{children:[s.jsx("span",{className:`g4-chain-dot ${e<5?"active":""}`}),e<7&&s.jsx("div",{className:"g4-chain-link"})]},e))}),pv_ui_risk_semi_dial:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsx("div",{className:"g4-semi-dial",children:s.jsx("div",{className:"g4-dial-needle",style:{transform:"rotate(30deg)"}})}),s.jsx(ni,{label:"Risk 34%"})]}),pv_ui_goal_ladder:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs g4-ladder",children:[1,2,3,4].map((t,e)=>s.jsxs("div",{className:`g4-ladder-step ${e<2?"done":""}`,children:[s.jsx("span",{className:"g4-ladder-rung"}),s.jsx(rs,{width:`${40+e*10}%`,tone:"accent",height:6})]},t))}),pv_ui_leaderboard_5:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Aster","Bloom","Cinder","Dawn","Echo"].map((t,e)=>s.jsxs("div",{className:`g4-row g4-gap-sm g4-leader-row ${e===0?"active":""}`,children:[s.jsx("span",{className:"g4-rank-num",children:e+1}),s.jsx(rs,{width:`${70-e*8}%`,tone:e<2?"accent":"muted",height:6}),s.jsx(ni,{label:"+12"})]},t))}),pv_ui_kpi_list_2col:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:[["Win rate","62%"],["Uptime","99.1%"],["Scan time","4.3s"]].map(([t,e])=>s.jsxs("div",{className:"g4-row g4-space-between g4-center",children:[s.jsx("span",{className:"g4-label",children:t}),s.jsx("span",{className:"g4-value",children:e})]},t))}),pv_ui_table_hover:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Row A","Row B","Row C"].map((t,e)=>s.jsx("div",{className:`g4-table-row ${e===1?"hover":""}`,children:s.jsx(rs,{width:"60%",tone:"muted",height:6})},t))}),pv_ui_rank_delta_row:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx(ni,{label:" +6"}),s.jsx(ni,{label:" -2"}),s.jsx(rs,{width:"50%",tone:"accent"})]}),pv_ui_avatar_list3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Aria","Bex","Cole"].map((t,e)=>s.jsxs("div",{className:"g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-avatar",children:t[0]}),s.jsx(rs,{width:`${50+e*10}%`,tone:"accent",height:6})]},t))}),pv_ui_timeline_row:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:["Step 1","Step 2","Step 3"].map((t,e)=>s.jsxs("div",{className:"g4-col g4-center g4-gap-xxs",children:[s.jsx("span",{className:`g4-timeline-dot ${e<=1?"active":""}`}),s.jsx("span",{className:"g4-mini-label",children:t})]},t))}),pv_ui_split_panel_list:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx("span",{className:"g4-label",children:"Power"}),s.jsx("span",{className:"g4-label",children:"Speed"}),s.jsx("span",{className:"g4-label",children:"Luck"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsx(rs,{width:"40%",tone:"warning"}),s.jsx(rs,{width:"30%",tone:"success"})]})]}),pv_ui_chip_counts:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xs g4-wrap",children:[["Tanks","12"],["Healers","5"],["DPS","18"],["Support","7"]].map(([t,e],n)=>s.jsxs("span",{className:`g4-chip ${n===2?"active":""}`,children:[t," ",s.jsx("span",{className:"g4-count",children:e})]},t))}),pv_ui_accordion3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Summary","Details","Meta"].map((t,e)=>s.jsxs("div",{className:`g4-accordion ${e===0?"open":""}`,children:[s.jsxs("div",{className:"g4-accordion-head",children:[s.jsx("span",{children:t}),s.jsx("span",{className:"g4-chevron"})]}),e===0&&s.jsxs("div",{className:"g4-accordion-body",children:[s.jsx(rs,{width:"70%",tone:"muted"}),s.jsx(rs,{width:"40%",tone:"muted"})]})]},t))}),pv_ui_spark_row:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsx("div",{className:"g4-sparkline",children:Array.from({length:12}).map((t,e)=>s.jsx("span",{style:{height:`${8+e%5*6}px`}},e))}),s.jsx(ni,{label:"72%"})]}),pv_ui_pulse_progress2:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsx("div",{className:"g4-pulse-bar",children:s.jsx("div",{className:"g4-pulse-fill",style:{width:"68%"}})}),s.jsx("span",{className:"g4-mini-label",children:"Syncing"})]}),pv_ui_unlock_glow2:()=>s.jsxs("div",{className:"g4-preview g4-glow-card",children:[s.jsx("div",{className:"g4-lock-icon",children:""}),s.jsx(rs,{width:"60%"})]}),pv_ui_skeleton_shimmer:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsx("div",{className:"g4-skeleton shimmer"}),s.jsx("div",{className:"g4-skeleton shimmer short"})]}),pv_ui_confetti_dots2:()=>s.jsx("div",{className:"g4-preview g4-confetti",children:Array.from({length:14}).map((t,e)=>s.jsx("span",{className:"g4-confetti-dot"},e))}),pv_ui_hover_lift:()=>s.jsxs("div",{className:"g4-preview g4-hover-card",children:[s.jsx(rs,{width:"70%"}),s.jsx(rs,{width:"50%",tone:"muted"})]}),pv_ui_ping_indicator:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsx("div",{className:"g4-ping",children:s.jsx("span",{className:"g4-ping-dot"})}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(rs,{width:"50%"}),s.jsx(rs,{width:"30%",tone:"muted"})]})]}),pv_ui_badge_pop:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-pop-badge",children:"UI"}),s.jsx(rs,{width:"60%"})]}),pv_ui_toggle_flip:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-toggle",children:s.jsx("div",{className:"g4-toggle-thumb"})}),s.jsx("span",{className:"g4-mini-label",children:"Flip"})]}),pv_ui_stripe_motion:()=>s.jsx("div",{className:"g4-preview g4-stripes",children:s.jsx("div",{className:"g4-stripe-fill",style:{width:"72%"}})}),pv_ui_bell_pulse:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-bell",children:s.jsx("span",{className:"g4-bell-ping"})}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(rs,{width:"55%"}),s.jsx(rs,{width:"35%",tone:"muted"})]})]})},NIe=t=>{const e=SIe[t];return e?e():s.jsx("div",{className:"g4-preview g4-fallback"})};function kIe(){return s.jsxs("div",{className:"g4-root",children:[s.jsxs("header",{className:"g4-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 4"}),s.jsx("p",{className:"g4-sub",children:"50 UI mini-previews focused on controls, overlays, meters, tables, and animated bits."})]}),s.jsx("div",{className:"g4-pill-row",children:s.jsx(ni,{label:"UI"})})]}),s.jsx("nav",{className:"g4-toc",children:GI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g4-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g4-sections",children:GI.map(t=>s.jsxs("details",{className:"g4-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g4-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g4-section-title",children:t.title}),s.jsx("div",{className:"g4-section-sub",children:t.description})]}),s.jsxs("span",{className:"g4-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g4-grid",children:t.items.map(e=>s.jsxs("div",{className:"g4-card",children:[s.jsxs("div",{className:"g4-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g4-card-title",children:e.title}),s.jsx("div",{className:"g4-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g4-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(ni,{label:n},n))})]}),NIe(e.previewId)]},e.id))})]},t.id))})]})}const HI=[{id:"meta",title:"Meta Systems",description:"Loops, ladders, and macro-structure sketches.",items:[{id:"1",categoryId:"meta",title:"Prestige Loop Diagram",subtitle:"reset + boost",tags:["CONCEPT"],previewId:"pv_cpt_prestige_loop"},{id:"2",categoryId:"meta",title:"Seasonal Arc Map",subtitle:"startend path",tags:["CONCEPT"],previewId:"pv_cpt_season_arc"},{id:"3",categoryId:"meta",title:"Progress Economy Flow",subtitle:"earnspendupgrade",tags:["CONCEPT"],previewId:"pv_cpt_economy_flow"},{id:"4",categoryId:"meta",title:"Skill Synergy Web",subtitle:"nodes + links",tags:["CONCEPT"],previewId:"pv_cpt_synergy_web"},{id:"5",categoryId:"meta",title:"Difficulty Curve",subtitle:"soft curve concept",tags:["CONCEPT"],previewId:"pv_cpt_difficulty_curve"},{id:"6",categoryId:"meta",title:"Reward Probability Bands",subtitle:"bands/tiers",tags:["CONCEPT"],previewId:"pv_cpt_prob_bands"},{id:"7",categoryId:"meta",title:"Milestone Radar",subtitle:"milestones ring",tags:["CONCEPT"],previewId:"pv_cpt_milestone_radar"},{id:"8",categoryId:"meta",title:"Collection Completion Map",subtitle:"zones filled",tags:["CONCEPT"],previewId:"pv_cpt_collection_map"},{id:"9",categoryId:"meta",title:"Engagement Flywheel",subtitle:"cycle arrows",tags:["CONCEPT"],previewId:"pv_cpt_flywheel"},{id:"10",categoryId:"meta",title:"Reputation Ladder",subtitle:"tiers + gates",tags:["CONCEPT"],previewId:"pv_cpt_reputation_ladder"}]},{id:"planning",title:"Planning & Strategy",description:"Allocation, risks, paths, and scenarios.",items:[{id:"11",categoryId:"planning",title:"Optimization Triangle",subtitle:"choose 2 of 3",tags:["CONCEPT"],previewId:"pv_cpt_opt_triangle"},{id:"12",categoryId:"planning",title:"Resource Allocation Bars",subtitle:"split budget",tags:["CONCEPT"],previewId:"pv_cpt_allocation_bars"},{id:"13",categoryId:"planning",title:"Upgrade Path Tree",subtitle:"branch choices",tags:["CONCEPT"],previewId:"pv_cpt_upgrade_tree"},{id:"14",categoryId:"planning",title:"Risk/Reward Matrix",subtitle:"4 quadrants",tags:["CONCEPT"],previewId:"pv_cpt_risk_reward_matrix"},{id:"15",categoryId:"planning",title:"Time-to-Goal Estimator",subtitle:"ETA blocks",tags:["CONCEPT"],previewId:"pv_cpt_eta_blocks"},{id:"16",categoryId:"planning",title:"Rival Distance Map",subtitle:"gaps + targets",tags:["CONCEPT"],previewId:"pv_cpt_rival_distance_map"},{id:"17",categoryId:"planning",title:"Power Spike Timeline",subtitle:"spike markers",tags:["CONCEPT"],previewId:"pv_cpt_power_spike_timeline"},{id:"18",categoryId:"planning",title:"Weekly Strategy Board",subtitle:"3 focus cards",tags:["CONCEPT"],previewId:"pv_cpt_weekly_board"},{id:"19",categoryId:"planning",title:"Breakpoint Indicators",subtitle:"threshold lines",tags:["CONCEPT"],previewId:"pv_cpt_breakpoints"},{id:"20",categoryId:"planning",title:"Scenario Switcher",subtitle:"A/B/C outcomes",tags:["CONCEPT"],previewId:"pv_cpt_scenarios_abc"}]},{id:"social",title:"Social Concepts",description:"Guild health, equity, coverage, and momentum ideas.",items:[{id:"21",categoryId:"social",title:"Guild Health Dashboard",subtitle:"pillars concept",tags:["CONCEPT"],previewId:"pv_cpt_guild_health"},{id:"22",categoryId:"social",title:"Contribution Equity Meter",subtitle:"fairness bar",tags:["CONCEPT"],previewId:"pv_cpt_equity_meter"},{id:"23",categoryId:"social",title:"Role Coverage Grid",subtitle:"roles coverage",tags:["CONCEPT"],previewId:"pv_cpt_role_coverage"},{id:"24",categoryId:"social",title:"Alliance Network Graph",subtitle:"nodes network",tags:["CONCEPT"],previewId:"pv_cpt_alliance_graph"},{id:"25",categoryId:"social",title:"Recruitment Funnel",subtitle:"stages funnel",tags:["CONCEPT"],previewId:"pv_cpt_recruit_funnel"},{id:"26",categoryId:"social",title:"Activity Rhythm Wheel",subtitle:"cycle wheel",tags:["CONCEPT"],previewId:"pv_cpt_rhythm_wheel"},{id:"27",categoryId:"social",title:"Leadership Heat Zones",subtitle:"zones concept",tags:["CONCEPT"],previewId:"pv_cpt_leadership_zones"},{id:"28",categoryId:"social",title:"Social Momentum Score",subtitle:"momentum line",tags:["CONCEPT"],previewId:"pv_cpt_social_momentum"},{id:"29",categoryId:"social",title:"Collaboration Contract",subtitle:"agreement card",tags:["CONCEPT"],previewId:"pv_cpt_collab_contract"},{id:"30",categoryId:"social",title:"Community Challenge Pool",subtitle:"pool + goals",tags:["CONCEPT"],previewId:"pv_cpt_challenge_pool"}]},{id:"insights",title:"Insights Concepts",description:"Signals, outliers, archetypes, and opportunity maps.",items:[{id:"31",categoryId:"insights",title:"Trend vs Noise Lens",subtitle:"signal filter",tags:["CONCEPT"],previewId:"pv_cpt_signal_noise"},{id:"32",categoryId:"insights",title:"Outlier Detector Panel",subtitle:"flagged dots",tags:["CONCEPT"],previewId:"pv_cpt_outlier_panel"},{id:"33",categoryId:"insights",title:"Consistency Index",subtitle:"stability meter",tags:["CONCEPT"],previewId:"pv_cpt_consistency_index"},{id:"34",categoryId:"insights",title:"Growth Regimes",subtitle:"phases blocks",tags:["CONCEPT"],previewId:"pv_cpt_growth_regimes"},{id:"35",categoryId:"insights",title:"Player Archetypes",subtitle:"3 archetype cards",tags:["CONCEPT"],previewId:"pv_cpt_archetypes"},{id:"36",categoryId:"insights",title:"Benchmark Stack",subtitle:"compare layers",tags:["CONCEPT"],previewId:"pv_cpt_benchmark_stack"},{id:"37",categoryId:"insights",title:"KPI Storyboard",subtitle:"3-step insight",tags:["CONCEPT"],previewId:"pv_cpt_kpi_storyboard"},{id:"38",categoryId:"insights",title:"Efficiency Frontier",subtitle:"frontier curve",tags:["CONCEPT"],previewId:"pv_cpt_efficiency_frontier"},{id:"39",categoryId:"insights",title:"Progress Forecast Bands",subtitle:"band forecast",tags:["CONCEPT"],previewId:"pv_cpt_forecast_bands"},{id:"40",categoryId:"insights",title:"Opportunity Radar",subtitle:"radar points",tags:["CONCEPT"],previewId:"pv_cpt_opportunity_radar"}]},{id:"loops",title:"Gamification Loops",description:"Cadence, multipliers, chains, caps, and rewards.",items:[{id:"41",categoryId:"loops",title:"Daily/Weekly Loop",subtitle:"cadence map",tags:["CONCEPT"],previewId:"pv_cpt_cadence_loop"},{id:"42",categoryId:"loops",title:"Reward Multipliers",subtitle:"stacked multipliers",tags:["CONCEPT"],previewId:"pv_cpt_multiplier_stack"},{id:"43",categoryId:"loops",title:"Quest Chain System",subtitle:"chain gates",tags:["CONCEPT"],previewId:"pv_cpt_chain_gates"},{id:"44",categoryId:"loops",title:"Badge Progression",subtitle:"ranked badges",tags:["CONCEPT"],previewId:"pv_cpt_badge_progression"},{id:"45",categoryId:"loops",title:"Streak Protection",subtitle:"shield mechanic",tags:["CONCEPT"],previewId:"pv_cpt_streak_shield"},{id:"46",categoryId:"loops",title:"Catch-up Mechanic",subtitle:"boost for low",tags:["CONCEPT"],previewId:"pv_cpt_catchup"},{id:"47",categoryId:"loops",title:"Event Spike Model",subtitle:"event peaks",tags:["CONCEPT"],previewId:"pv_cpt_event_spikes"},{id:"48",categoryId:"loops",title:"Soft Cap Concept",subtitle:"diminishing returns",tags:["CONCEPT"],previewId:"pv_cpt_soft_cap"},{id:"49",categoryId:"loops",title:"Reward Choice Wheel",subtitle:"choose 1 of 3",tags:["CONCEPT"],previewId:"pv_cpt_choice_wheel"},{id:"50",categoryId:"loops",title:"Meta Progress Passport",subtitle:"stamps journey",tags:["CONCEPT"],previewId:"pv_cpt_passport"}]}],id=({label:t})=>s.jsx("span",{className:"g5-pill",children:t}),Yl=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g5-bar tone-${e}`,style:{width:t,height:n}}),N1=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g5-dot tone-${t}`,style:{width:e,height:e}}),CIe={pv_cpt_prestige_loop:()=>s.jsx("div",{className:"g5-preview g5-loop",children:["Earn","Reset","Boost"].map((t,e)=>s.jsxs("div",{className:"g5-loop-node",children:[s.jsx("span",{className:"g5-loop-label",children:t}),s.jsx("div",{className:`g5-loop-arrow ${e===2?"end":""}`})]},t))}),pv_cpt_season_arc:()=>s.jsxs("div",{className:"g5-preview g5-arc",children:[s.jsx("div",{className:"g5-arc-track",children:s.jsx("div",{className:"g5-arc-progress",style:{width:"70%"}})}),s.jsxs("div",{className:"g5-row g5-space-between g5-mini",children:[s.jsx("span",{children:"Start"}),s.jsx("span",{children:"Season"}),s.jsx("span",{children:"Final"})]})]}),pv_cpt_economy_flow:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-flow-card",children:"Earn"}),s.jsx("div",{className:"g5-flow-arrow"}),s.jsx("div",{className:"g5-flow-card alt",children:"Spend"}),s.jsx("div",{className:"g5-flow-arrow"}),s.jsx("div",{className:"g5-flow-card",children:"Upgrade"})]}),pv_cpt_synergy_web:()=>s.jsxs("div",{className:"g5-preview g5-web",children:[s.jsx("div",{className:"g5-web-node center"}),Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g5-web-node arm-${e}`},e))]}),pv_cpt_difficulty_curve:()=>s.jsxs("div",{className:"g5-preview g5-curve",children:[s.jsx("div",{className:"g5-curve-line"}),s.jsx("div",{className:"g5-dot tone-accent",style:{left:"25%"}}),s.jsx("div",{className:"g5-dot tone-warning",style:{left:"70%"}})]}),pv_cpt_prob_bands:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Common","Rare","Epic"].map((t,e)=>s.jsxs("div",{className:"g5-band",children:[s.jsx("span",{className:"g5-band-label",children:t}),s.jsx("div",{className:`g5-band-fill tone-${e===2?"warning":"accent"}`,style:{width:`${40+e*20}%`}})]},t))}),pv_cpt_milestone_radar:()=>s.jsxs("div",{className:"g5-preview g5-radar",children:[s.jsx("div",{className:"g5-radar-ring outer"}),s.jsx("div",{className:"g5-radar-ring inner"}),s.jsx(N1,{tone:"warning",size:10}),s.jsx(N1,{tone:"accent",size:8}),s.jsx(N1,{tone:"success",size:8})]}),pv_cpt_collection_map:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g5-zone ${e<3?"filled":""}`},e))}),pv_cpt_flywheel:()=>s.jsxs("div",{className:"g5-preview g5-flywheel",children:[s.jsx("div",{className:"g5-flywheel-ring"}),s.jsx("div",{className:"g5-flywheel-arrow a1"}),s.jsx("div",{className:"g5-flywheel-arrow a2"}),s.jsx("div",{className:"g5-flywheel-arrow a3"})]}),pv_cpt_reputation_ladder:()=>s.jsx("div",{className:"g5-preview g5-ladder",children:[0,1,2,3].map(t=>s.jsxs("div",{className:`g5-tier ${t<2?"active":""}`,children:["Tier ",t+1]},t))}),pv_cpt_opt_triangle:()=>s.jsxs("div",{className:"g5-preview g5-triangle",children:[s.jsx("div",{className:"g5-tri-corner top",children:"Speed"}),s.jsx("div",{className:"g5-tri-corner left",children:"Quality"}),s.jsx("div",{className:"g5-tri-corner right",children:"Cost"}),s.jsx("div",{className:"g5-tri-fill"})]}),pv_cpt_allocation_bars:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Gold","Gems","Energy"].map((t,e)=>s.jsxs("div",{className:"g5-row g5-gap-sm g5-center",children:[s.jsx("span",{className:"g5-label",children:t}),s.jsx(Yl,{width:`${30+e*15}%`,tone:e===1?"warning":"accent",height:6})]},t))}),pv_cpt_upgrade_tree:()=>s.jsxs("div",{className:"g5-preview g5-tree",children:[s.jsx("div",{className:"g5-tree-node root"}),s.jsxs("div",{className:"g5-tree-branch left",children:[s.jsx("div",{className:"g5-tree-node"}),s.jsx("div",{className:"g5-tree-node"})]}),s.jsxs("div",{className:"g5-tree-branch right",children:[s.jsx("div",{className:"g5-tree-node"}),s.jsx("div",{className:"g5-tree-node"})]})]}),pv_cpt_risk_reward_matrix:()=>s.jsxs("div",{className:"g5-preview g5-matrix",children:[s.jsx("div",{className:"g5-matrix-quad high",children:"High Reward"}),s.jsx("div",{className:"g5-matrix-quad",children:"Low Reward"}),s.jsx("div",{className:"g5-matrix-quad",children:"Low Risk"}),s.jsx("div",{className:"g5-matrix-quad warn",children:"High Risk"})]}),pv_cpt_eta_blocks:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-xs",children:["10d","20d","30d"].map((t,e)=>s.jsx("div",{className:`g5-eta-block ${e===2?"active":""}`,children:t},t))}),pv_cpt_rival_distance_map:()=>s.jsxs("div",{className:"g5-preview g5-row g5-center g5-gap-sm",children:[s.jsx("div",{className:"g5-distance",children:s.jsxs("div",{className:"g5-distance-line",children:[s.jsx("div",{className:"g5-distance-marker you",style:{left:"22%"}}),s.jsx("div",{className:"g5-distance-marker rival",style:{left:"62%"}})]})}),s.jsx(id,{label:"Gap 40%"})]}),pv_cpt_power_spike_timeline:()=>s.jsxs("div",{className:"g5-preview g5-col g5-gap-xxs",children:[s.jsx("div",{className:"g5-spike-line",children:[20,60,80].map((t,e)=>s.jsx("div",{className:"g5-spike",style:{left:`${t}%`},children:s.jsx("div",{className:`g5-spike-pin ${e===2?"strong":""}`})},t))}),s.jsx("div",{className:"g5-mini",children:"Power spikes"})]}),pv_cpt_weekly_board:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:["Focus","Risks","Wins"].map(t=>s.jsxs("div",{className:"g5-cardlet",children:[s.jsx(Yl,{width:"60%"}),s.jsx(Yl,{width:"40%",tone:"muted"})]},t))}),pv_cpt_breakpoints:()=>s.jsx("div",{className:"g5-preview g5-breakpoints",children:[25,50,75].map(t=>s.jsx("div",{className:"g5-breakpoint",style:{left:`${t}%`},children:s.jsx("span",{children:t})},t))}),pv_cpt_scenarios_abc:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:["A","B","C"].map((t,e)=>s.jsxs("div",{className:`g5-scenario ${e===1?"active":""}`,children:[s.jsx("div",{className:"g5-scenario-title",children:t}),s.jsx(Yl,{width:`${40+e*10}%`,tone:"accent"})]},t))}),pv_cpt_guild_health:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[[50,70,40].map((t,e)=>s.jsx("div",{className:"g5-pillar",children:s.jsx("div",{className:"g5-pillar-fill",style:{height:`${t}%`}})},e)),s.jsx(id,{label:"Guild Health"})]}),pv_cpt_equity_meter:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-meter",children:s.jsx("div",{className:"g5-meter-fill",style:{width:"56%"}})}),s.jsx("span",{className:"g5-mini",children:"Fair"})]}),pv_cpt_role_coverage:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:["Tank","Heal","DPS"].map((t,e)=>s.jsxs("div",{className:"g5-role",children:[s.jsx("div",{className:"g5-role-bar",style:{width:`${40+e*15}%`}}),s.jsx("span",{className:"g5-mini",children:t})]},t))}),pv_cpt_alliance_graph:()=>s.jsxs("div",{className:"g5-preview g5-network",children:[[0,1,2,3,4].map(t=>s.jsx("div",{className:`g5-node n${t}`},t)),s.jsx("div",{className:"g5-link l1"}),s.jsx("div",{className:"g5-link l2"}),s.jsx("div",{className:"g5-link l3"})]}),pv_cpt_recruit_funnel:()=>s.jsxs("div",{className:"g5-preview g5-funnel",children:[s.jsx("div",{className:"g5-funnel-layer big"}),s.jsx("div",{className:"g5-funnel-layer mid"}),s.jsx("div",{className:"g5-funnel-layer small"})]}),pv_cpt_rhythm_wheel:()=>s.jsx("div",{className:"g5-preview g5-wheel",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:`g5-wheel-dot ${e%2===0?"active":""}`},e))}),pv_cpt_leadership_zones:()=>s.jsxs("div",{className:"g5-preview g5-zones",children:[s.jsx("div",{className:"g5-zone-block warm"}),s.jsx("div",{className:"g5-zone-block cool"}),s.jsx("div",{className:"g5-zone-block neutral"})]}),pv_cpt_social_momentum:()=>s.jsxs("div",{className:"g5-preview g5-linechart",children:[s.jsx("div",{className:"g5-line-path"}),s.jsx("div",{className:"g5-line-marker",style:{left:"70%"}})]}),pv_cpt_collab_contract:()=>s.jsxs("div",{className:"g5-preview g5-contract",children:[s.jsx(Yl,{width:"70%"}),s.jsx(Yl,{width:"40%",tone:"muted"}),s.jsx("div",{className:"g5-signature"})]}),pv_cpt_challenge_pool:()=>s.jsxs("div",{className:"g5-preview g5-pool",children:[s.jsx("div",{className:"g5-pool-water"}),s.jsx("div",{className:"g5-goal-chip",children:"Goal A"}),s.jsx("div",{className:"g5-goal-chip",children:"Goal B"})]}),pv_cpt_signal_noise:()=>s.jsxs("div",{className:"g5-preview g5-signal",children:[s.jsx("div",{className:"g5-signal-band strong"}),s.jsx("div",{className:"g5-signal-band weak"}),s.jsx("div",{className:"g5-filter"})]}),pv_cpt_outlier_panel:()=>s.jsx("div",{className:"g5-preview g5-scatter",children:Array.from({length:8}).map((t,e)=>s.jsx("span",{className:`g5-scatter-dot ${e===7?"alert":""}`},e))}),pv_cpt_consistency_index:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-gauge",children:s.jsx("div",{className:"g5-gauge-fill",style:{width:"72%"}})}),s.jsx(id,{label:"Stable"})]}),pv_cpt_growth_regimes:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Launch","Scale","Mature"].map((t,e)=>s.jsxs("div",{className:"g5-phase",children:[s.jsx("div",{className:`g5-phase-box ${e===1?"active":""}`}),s.jsx("span",{className:"g5-mini",children:t})]},t))}),pv_cpt_archetypes:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:["Explorer","Achiever","Social"].map(t=>s.jsxs("div",{className:"g5-arch-card",children:[s.jsx(Yl,{width:"60%"}),s.jsx("div",{className:"g5-arch-badge",children:t[0]})]},t))}),pv_cpt_benchmark_stack:()=>s.jsxs("div",{className:"g5-preview g5-stack",children:[s.jsx("div",{className:"g5-stack-layer"}),s.jsx("div",{className:"g5-stack-layer mid"}),s.jsx("div",{className:"g5-stack-layer top"})]}),pv_cpt_kpi_storyboard:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:[1,2,3].map(t=>s.jsxs("div",{className:"g5-story-card",children:[s.jsxs("span",{className:"g5-story-step",children:["Step ",t]}),s.jsx(Yl,{width:"50%"})]},t))}),pv_cpt_efficiency_frontier:()=>s.jsxs("div",{className:"g5-preview g5-frontier",children:[s.jsx("div",{className:"g5-frontier-curve"}),s.jsx("div",{className:"g5-frontier-dot"})]}),pv_cpt_forecast_bands:()=>s.jsxs("div",{className:"g5-preview g5-bands",children:[s.jsx("div",{className:"g5-band-line upper"}),s.jsx("div",{className:"g5-band-line lower"}),s.jsx("div",{className:"g5-band-fill"})]}),pv_cpt_opportunity_radar:()=>s.jsx("div",{className:"g5-preview g5-radar-grid",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:"g5-radar-dot"},e))}),pv_cpt_cadence_loop:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-loop-mini daily",children:"Daily"}),s.jsx("div",{className:"g5-loop-mini weekly active",children:"Weekly"}),s.jsx("div",{className:"g5-loop-mini monthly",children:"Monthly"})]}),pv_cpt_multiplier_stack:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:[1,2,3].map(t=>s.jsxs("div",{className:"g5-multiplier",children:[s.jsxs("span",{children:["x",t]}),s.jsx("div",{className:"g5-multi-bar",style:{width:`${t*20+30}%`}})]},t))}),pv_cpt_chain_gates:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-xs g5-center",children:["Q1","Q2","Q3","Boss"].map((t,e)=>s.jsxs(q.Fragment,{children:[s.jsx("div",{className:`g5-gate ${e===3?"final":""}`,children:t}),e<3&&s.jsx("div",{className:"g5-gate-line"})]},t))}),pv_cpt_badge_progression:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:["Bronze","Silver","Gold"].map((t,e)=>s.jsx("div",{className:`g5-badge ${e===2?"shine":""}`,children:t[0]},t))}),pv_cpt_streak_shield:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-shield",children:"Streak"}),s.jsx(id,{label:"Protected"})]}),pv_cpt_catchup:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-boost-bar",children:s.jsx("div",{className:"g5-boost-fill",style:{width:"45%"}})}),s.jsx(id,{label:"+Catch Up"})]}),pv_cpt_event_spikes:()=>s.jsxs("div",{className:"g5-preview g5-col g5-gap-xxs",children:[s.jsx("div",{className:"g5-spike-line",children:Array.from({length:5}).map((t,e)=>s.jsx("div",{className:"g5-spike event",style:{left:`${e*20}%`,height:`${10+e*8}px`}},e))}),s.jsx("span",{className:"g5-mini",children:"Events"})]}),pv_cpt_soft_cap:()=>s.jsxs("div",{className:"g5-preview g5-softcap",children:[s.jsx("div",{className:"g5-softcap-line"}),s.jsx("div",{className:"g5-softcap-cap",style:{left:"65%"}})]}),pv_cpt_choice_wheel:()=>s.jsx("div",{className:"g5-preview g5-wheel-choice",children:["A","B","C"].map((t,e)=>s.jsx("div",{className:`g5-choice ${e===0?"active":""}`,children:t},t))}),pv_cpt_passport:()=>s.jsx("div",{className:"g5-preview g5-passport",children:["Zone 1","Zone 2","Zone 3"].map((t,e)=>s.jsx("div",{className:`g5-stamp ${e<2?"filled":""}`,children:t},t))})},TIe=t=>{const e=CIe[t];return e?e():s.jsx("div",{className:"g5-preview g5-fallback"})};function IIe(){return s.jsxs("div",{className:"g5-root",children:[s.jsxs("header",{className:"g5-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 5"}),s.jsx("p",{className:"g5-sub",children:"50 concept sketches across macro systems, planning, social, insights, and loops."})]}),s.jsx("div",{className:"g5-pill-row",children:s.jsx(id,{label:"CONCEPT"})})]}),s.jsx("nav",{className:"g5-toc",children:HI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g5-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g5-sections",children:HI.map(t=>s.jsxs("details",{className:"g5-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g5-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g5-section-title",children:t.title}),s.jsx("div",{className:"g5-section-sub",children:t.description})]}),s.jsxs("span",{className:"g5-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g5-grid",children:t.items.map(e=>s.jsxs("div",{className:"g5-card",children:[s.jsxs("div",{className:"g5-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g5-card-title",children:e.title}),s.jsx("div",{className:"g5-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g5-pill-row",children:(e.tags||["CONCEPT"]).map(n=>s.jsx(id,{label:n},n))})]}),TIe(e.previewId)]},e.id))})]},t.id))})]})}const WI=[{id:"profile",title:"Profile Widgets",description:"Compact profile cards, KPIs, and progression snippets.",items:[{id:"1",categoryId:"profile",title:"Hero Panel Mini",subtitle:"avatar + 3 KPIs",tags:["MOCK"],previewId:"pv_mock_hero_panel_mini"},{id:"2",categoryId:"profile",title:"Attribute Bars Card",subtitle:"5 bars + markers",tags:["MOCK"],previewId:"pv_mock_attr_bars"},{id:"3",categoryId:"profile",title:"Scan Freshness Badge",subtitle:"age + color",tags:["MOCK"],previewId:"pv_mock_scan_freshness"},{id:"4",categoryId:"profile",title:"Profile Tabs Strip",subtitle:"overview/scans/etc",tags:["MOCK"],previewId:"pv_mock_profile_tabs"},{id:"5",categoryId:"profile",title:"Linked Characters Row",subtitle:"tabs switch",tags:["MOCK"],previewId:"pv_mock_linked_chars"},{id:"6",categoryId:"profile",title:"Snapshot Compare Card",subtitle:"then vs now",tags:["MOCK"],previewId:"pv_mock_snapshot_compare"},{id:"7",categoryId:"profile",title:"Rank Delta Inline",subtitle:"rank + arrows",tags:["MOCK"],previewId:"pv_mock_rank_inline"},{id:"8",categoryId:"profile",title:"Scrapbook Completion Tile",subtitle:"% + ring",tags:["MOCK"],previewId:"pv_mock_scrapbook_tile"},{id:"9",categoryId:"profile",title:"Legendary Counter Card",subtitle:"count + rarity",tags:["MOCK"],previewId:"pv_mock_legendary_counter"},{id:"10",categoryId:"profile",title:"Progress History Mini",subtitle:"tiny history list",tags:["MOCK"],previewId:"pv_mock_history_mini"}]},{id:"guild",title:"Guild Widgets",description:"Guild header, queues, planner tiles, and readiness snapshots.",items:[{id:"11",categoryId:"guild",title:"Guild Header Mock",subtitle:"emblem + KPIs",tags:["MOCK"],previewId:"pv_mock_guild_header"},{id:"12",categoryId:"guild",title:"Member List Row",subtitle:"role + last scan",tags:["MOCK"],previewId:"pv_mock_member_row"},{id:"13",categoryId:"guild",title:"Recruitment Card",subtitle:"open slots",tags:["MOCK"],previewId:"pv_mock_recruitment"},{id:"14",categoryId:"guild",title:"Fusion Planner Tile",subtitle:"two guild compare",tags:["MOCK"],previewId:"pv_mock_fusion_tile"},{id:"15",categoryId:"guild",title:"Waitlist Panel",subtitle:"queue preview",tags:["MOCK"],previewId:"pv_mock_waitlist_panel"},{id:"16",categoryId:"guild",title:"Guild Activity Panel",subtitle:"last 7d",tags:["MOCK"],previewId:"pv_mock_guild_activity"},{id:"17",categoryId:"guild",title:"Guild Benchmarks",subtitle:"avg markers",tags:["MOCK"],previewId:"pv_mock_guild_benchmarks"},{id:"18",categoryId:"guild",title:"War Readiness Mock",subtitle:"ready/not",tags:["MOCK"],previewId:"pv_mock_war_readiness2"},{id:"19",categoryId:"guild",title:"Treasury Summary",subtitle:"treasury KPIs",tags:["MOCK"],previewId:"pv_mock_treasury_summary"},{id:"20",categoryId:"guild",title:"Guild Notes Card",subtitle:"pinned notes",tags:["MOCK"],previewId:"pv_mock_guild_notes"}]},{id:"tables",title:"Top Lists / Tables",description:"Tables, filters, timers, pagination, and compare bars.",items:[{id:"21",categoryId:"tables",title:"Toplist Table Card",subtitle:"header + rows",tags:["MOCK"],previewId:"pv_mock_toplist_table"},{id:"22",categoryId:"tables",title:"Rank Change Column",subtitle:" deltas",tags:["MOCK"],previewId:"pv_mock_rank_change_col"},{id:"23",categoryId:"tables",title:"Server Filter Sidebar",subtitle:"filters stack",tags:["MOCK"],previewId:"pv_mock_server_filters"},{id:"24",categoryId:"tables",title:"Class Filter Chips",subtitle:"class chips",tags:["MOCK"],previewId:"pv_mock_class_chips"},{id:"25",categoryId:"tables",title:"Snapshot Timer Pill",subtitle:"next refresh",tags:["MOCK"],previewId:"pv_mock_snapshot_timer"},{id:"26",categoryId:"tables",title:"Pagination Footer Mock",subtitle:"page controls",tags:["MOCK"],previewId:"pv_mock_pagination_footer"},{id:"27",categoryId:"tables",title:"Sticky Header Mock",subtitle:"sticky header row",tags:["MOCK"],previewId:"pv_mock_sticky_header"},{id:"28",categoryId:"tables",title:"Row Expand Detail",subtitle:"expand drawer",tags:["MOCK"],previewId:"pv_mock_row_expand"},{id:"29",categoryId:"tables",title:"Export Button Strip",subtitle:"CSV/Excel",tags:["MOCK"],previewId:"pv_mock_export_strip"},{id:"30",categoryId:"tables",title:"Compare Selected Rows",subtitle:"compare bar",tags:["MOCK"],previewId:"pv_mock_compare_bar"}]},{id:"upload",title:"Upload / Import UX",description:"Queues, validation, progress, notices, and summaries.",items:[{id:"31",categoryId:"upload",title:"Upload Queue Card",subtitle:"pending items",tags:["MOCK"],previewId:"pv_mock_upload_queue"},{id:"32",categoryId:"upload",title:"Dedup Result Toast",subtitle:"created/duplicate",tags:["MOCK"],previewId:"pv_mock_dedup_toast"},{id:"33",categoryId:"upload",title:"Dry-Run Validation Panel",subtitle:"errors list",tags:["MOCK"],previewId:"pv_mock_validation_panel"},{id:"34",categoryId:"upload",title:"Progress Upload Meter",subtitle:"step progress",tags:["MOCK"],previewId:"pv_mock_upload_progress"},{id:"35",categoryId:"upload",title:"Selected Entities Counter",subtitle:"players/guilds",tags:["MOCK"],previewId:"pv_mock_selected_counter"},{id:"36",categoryId:"upload",title:"Token TTL Notice",subtitle:"1015min",tags:["MOCK"],previewId:"pv_mock_ttl_notice"},{id:"37",categoryId:"upload",title:"Privacy Preview Box",subtitle:"what gets sent",tags:["MOCK"],previewId:"pv_mock_privacy_preview"},{id:"38",categoryId:"upload",title:"Error Log Card",subtitle:"recent errors",tags:["MOCK"],previewId:"pv_mock_error_log"},{id:"39",categoryId:"upload",title:"Retry/Backoff Banner",subtitle:"rate limit",tags:["MOCK"],previewId:"pv_mock_retry_banner"},{id:"40",categoryId:"upload",title:"Success Summary Panel",subtitle:"import summary",tags:["MOCK"],previewId:"pv_mock_success_summary"}]},{id:"admin",title:"Admin/Control Panel Mocks",description:"Roles, feature toggles, access groups, and moderation queues.",items:[{id:"41",categoryId:"admin",title:"Roles Context Menu",subtitle:"role switch UI",tags:["MOCK"],previewId:"pv_mock_roles_menu"},{id:"42",categoryId:"admin",title:"Feature Gate Table",subtitle:"toggles rows",tags:["MOCK"],previewId:"pv_mock_feature_table"},{id:"43",categoryId:"admin",title:"Access Group Card",subtitle:"group members",tags:["MOCK"],previewId:"pv_mock_access_group"},{id:"44",categoryId:"admin",title:"Audit Log Row",subtitle:"who changed what",tags:["MOCK"],previewId:"pv_mock_audit_row"},{id:"45",categoryId:"admin",title:"Error Monitor Tile",subtitle:"status lights",tags:["MOCK"],previewId:"pv_mock_error_monitor"},{id:"46",categoryId:"admin",title:"API Status Card",subtitle:"endpoint health",tags:["MOCK"],previewId:"pv_mock_api_status"},{id:"47",categoryId:"admin",title:"Seed Token Warning",subtitle:"internal endpoint",tags:["MOCK"],previewId:"pv_mock_seed_warning"},{id:"48",categoryId:"admin",title:"Moderation Queue",subtitle:"approve/deny",tags:["MOCK"],previewId:"pv_mock_mod_queue"},{id:"49",categoryId:"admin",title:"Feedback Inbox Card",subtitle:"decision buttons",tags:["MOCK"],previewId:"pv_mock_feedback_inbox"},{id:"50",categoryId:"admin",title:"Release Toggle Panel",subtitle:"staging/prod",tags:["MOCK"],previewId:"pv_mock_release_toggle"}]}],Is=({label:t})=>s.jsx("span",{className:"g6-pill",children:t}),is=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g6-bar tone-${e}`,style:{width:t,height:n}}),KI=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g6-dot tone-${t}`,style:{width:e,height:e}}),EIe={pv_mock_hero_panel_mini:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-avatar big",children:"A"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(is,{width:"70%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Is,{label:"XP 42k"}),s.jsx(Is,{label:"Lvl 58"}),s.jsx(Is,{label:"WR 62%"})]})]})]}),pv_mock_attr_bars:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["STR","DEX","INT","VIT","LCK"].map((t,e)=>s.jsxs("div",{className:"g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-label",children:t}),s.jsx(is,{width:`${35+e*12}%`,tone:e%2===0?"accent":"warning",height:6}),s.jsx(KI,{tone:"muted"})]},t))}),pv_mock_scan_freshness:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge fresh",children:"3h ago"}),s.jsx(is,{width:"50%"})]}),pv_mock_profile_tabs:()=>s.jsx("div",{className:"g6-preview g6-row g6-gap-xs",children:["Overview","Scans","Gear","Notes"].map((t,e)=>s.jsx("div",{className:`g6-tab ${e===1?"active":""}`,children:t},t))}),pv_mock_linked_chars:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[["Main","Alt 1","Alt 2"].map((t,e)=>s.jsx("div",{className:`g6-chip ${e===0?"active":""}`,children:t},t)),s.jsx("div",{className:"g6-arrow-right"})]}),pv_mock_snapshot_compare:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Then"}),s.jsx(is,{width:"40%",tone:"muted"})]}),s.jsx("div",{className:"g6-compare-arrow"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Now"}),s.jsx(is,{width:"70%",tone:"accent"})]})]}),pv_mock_rank_inline:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Is,{label:"#24"}),s.jsx(Is,{label:" 3"}),s.jsx(Is,{label:" 1"})]}),pv_mock_scrapbook_tile:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-ring",children:[s.jsx("div",{className:"g6-ring-fill"}),s.jsx("div",{className:"g6-ring-hole",children:"68%"})]}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(is,{width:"60%"}),s.jsx(is,{width:"35%",tone:"muted"})]})]}),pv_mock_legendary_counter:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-legendary",children:"12"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Legendary"}),s.jsx(is,{width:"70%",tone:"warning"})]})]}),pv_mock_history_mini:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["+12 Lvl","+2 shards","Joined guild"].map((t,e)=>s.jsxs("div",{className:"g6-history-row",children:[s.jsx(KI,{tone:"accent",size:8}),s.jsx("span",{children:t}),s.jsxs("span",{className:"g6-time",children:[e+1,"d"]})]},t))}),pv_mock_guild_header:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-emblem"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(is,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Is,{label:"Lvl 12"}),s.jsx(Is,{label:"42 members"})]})]})]}),pv_mock_member_row:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-avatar",children:"M"}),s.jsx(is,{width:"50%"}),s.jsx(Is,{label:"Officer"}),s.jsx(Is,{label:"Scan 1d"})]}),pv_mock_recruitment:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(is,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Is,{label:"Open 3"}),s.jsx(Is,{label:"Role: DPS"})]})]}),pv_mock_fusion_tile:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(is,{width:"40%"}),s.jsx(Is,{label:"Guild A"})]}),s.jsx("div",{className:"g6-merge"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(is,{width:"40%"}),s.jsx(Is,{label:"Guild B"})]})]}),pv_mock_waitlist_panel:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Rae","Noah","Ivy"].map((t,e)=>s.jsxs("div",{className:"g6-wait-row",children:[s.jsx("span",{className:"g6-badge muted",children:e+1}),s.jsx(is,{width:`${40+e*15}%`})]},t))}),pv_mock_guild_activity:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-heat",children:Array.from({length:7}).map((t,e)=>s.jsx("span",{style:{height:`${10+e*4}px`}},e))}),s.jsx(Is,{label:"7d"})]}),pv_mock_guild_benchmarks:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Avg","Target","You"].map((t,e)=>s.jsxs("div",{className:"g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-mini",children:t}),s.jsx("div",{className:"g6-marker-line",children:s.jsx("div",{className:"g6-marker",style:{left:`${30+e*20}%`}})})]},t))}),pv_mock_war_readiness2:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx(Is,{label:"Ready"}),s.jsx(Is,{label:"Needs Gear"}),s.jsx(Is,{label:"Needs Scans"})]}),pv_mock_treasury_summary:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Gold"}),s.jsx(is,{width:"70%",tone:"warning"})]}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Gems"}),s.jsx(is,{width:"50%",tone:"accent"})]})]}),pv_mock_guild_notes:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("div",{className:"g6-note-pin"}),s.jsx(is,{width:"65%"}),s.jsx(is,{width:"40%",tone:"muted"})]}),pv_mock_toplist_table:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-table-head",children:[s.jsx(is,{width:"30%"}),s.jsx(is,{width:"20%"}),s.jsx(is,{width:"25%"})]}),Array.from({length:3}).map((t,e)=>s.jsx("div",{className:"g6-table-row",children:s.jsx(is,{width:`${60-e*10}%`,tone:"muted",height:6})},e))]}),pv_mock_rank_change_col:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx(Is,{label:" 8"}),s.jsx(Is,{label:" 2"}),s.jsx(is,{width:"40%"})]}),pv_mock_server_filters:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["EU","US","INT"].map((t,e)=>s.jsxs("div",{className:"g6-filter-row",children:[s.jsx("input",{type:"checkbox",checked:e===0,readOnly:!0}),s.jsx("span",{children:t})]},t))}),pv_mock_class_chips:()=>s.jsx("div",{className:"g6-preview g6-row g6-gap-xs g6-wrap",children:["Warrior","Mage","Hunter","Cleric"].map((t,e)=>s.jsx("span",{className:`g6-chip ${e===2?"active":""}`,children:t},t))}),pv_mock_snapshot_timer:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Is,{label:"Refresh in 03:12"}),s.jsx("div",{className:"g6-ring tiny",children:s.jsx("div",{className:"g6-ring-fill"})})]}),pv_mock_pagination_footer:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-page",children:"Prev"}),[1,2,3].map(t=>s.jsx("span",{className:`g6-page ${t===2?"active":""}`,children:t},t)),s.jsx("span",{className:"g6-page",children:"Next"})]}),pv_mock_sticky_header:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-sticky-head",children:[s.jsx(is,{width:"40%"}),s.jsx(is,{width:"20%",tone:"muted"})]}),s.jsx("div",{className:"g6-table-row",children:s.jsx(is,{width:"70%",tone:"muted",height:6})})]}),pv_mock_row_expand:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-expand-row",children:[s.jsx("span",{className:"g6-chevron"}),s.jsx(is,{width:"50%"})]}),s.jsxs("div",{className:"g6-expand-body",children:[s.jsx(is,{width:"60%",tone:"muted"}),s.jsx(is,{width:"40%",tone:"muted"})]})]}),pv_mock_export_strip:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs",children:[s.jsx("button",{className:"g6-btn ghost",children:"CSV"}),s.jsx("button",{className:"g6-btn ghost",children:"Excel"}),s.jsx("button",{className:"g6-btn solid",children:"Export"})]}),pv_mock_compare_bar:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(is,{width:"60%",tone:"accent"}),s.jsx(Is,{label:"2 selected"})]}),pv_mock_upload_queue:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["players.csv","guilds.csv"].map(t=>s.jsxs("div",{className:"g6-queue-row",children:[s.jsx(is,{width:"50%"}),s.jsx("span",{className:"g6-mini",children:t})]},t))}),pv_mock_dedup_toast:()=>s.jsxs("div",{className:"g6-preview g6-toast",children:[s.jsx("span",{className:"g6-dot tone-success"}),s.jsx("span",{children:"3 created / 1 duplicate"})]}),pv_mock_validation_panel:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Missing name","Invalid server","Bad class"].map(t=>s.jsxs("div",{className:"g6-error-row",children:[s.jsx("span",{className:"g6-badge warn",children:"!"}),s.jsx("span",{children:t})]},t))}),pv_mock_upload_progress:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("div",{className:"g6-steps",children:[1,2,3,4].map((t,e)=>s.jsx("div",{className:`g6-step ${e<2?"done":e===2?"active":""}`},t))}),s.jsx(is,{width:"65%"})]}),pv_mock_selected_counter:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Is,{label:"Players 32"}),s.jsx(Is,{label:"Guilds 4"}),s.jsx(Is,{label:"Servers 2"})]}),pv_mock_ttl_notice:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge warn",children:"TTL 12m"}),s.jsx(is,{width:"50%",tone:"warning"})]}),pv_mock_privacy_preview:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Sending"}),s.jsx(is,{width:"60%"}),s.jsx(is,{width:"40%",tone:"muted"})]}),pv_mock_error_log:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Timeout","Bad payload"].map(t=>s.jsxs("div",{className:"g6-error-row",children:[s.jsx("span",{className:"g6-badge danger",children:"!"}),s.jsx("span",{children:t})]},t))}),pv_mock_retry_banner:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge warn",children:"Rate limit"}),s.jsx("button",{className:"g6-btn ghost",children:"Retry"}),s.jsx("button",{className:"g6-btn ghost",children:"Backoff"})]}),pv_mock_success_summary:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(is,{width:"70%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Is,{label:"Created 42"}),s.jsx(Is,{label:"Duplicates 3"})]})]}),pv_mock_roles_menu:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Viewer","Editor","Admin"].map((t,e)=>s.jsxs("div",{className:`g6-menu-row ${e===2?"active":""}`,children:[s.jsx("span",{children:t}),e===2&&s.jsx("span",{className:"g6-check",children:""})]},t))}),pv_mock_feature_table:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Feature A","Feature B","Feature C"].map((t,e)=>s.jsxs("div",{className:"g6-feature-row",children:[s.jsx(is,{width:"40%"}),s.jsx("div",{className:`g6-toggle ${e===1?"on":""}`,children:s.jsx("div",{className:"g6-toggle-thumb"})})]},t))}),pv_mock_access_group:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(is,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx("div",{className:"g6-avatar small",children:"A"}),s.jsx("div",{className:"g6-avatar small",children:"B"}),s.jsx("div",{className:"g6-avatar small",children:"C"})]})]}),pv_mock_audit_row:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(is,{width:"40%"}),s.jsx(Is,{label:"by Admin"}),s.jsx(Is,{label:"2h ago"})]}),pv_mock_error_monitor:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[["OK","WARN","FAIL"].map((t,e)=>s.jsx("div",{className:`g6-status ${e===2?"danger":e===1?"warn":"ok"}`},t)),s.jsx(is,{width:"40%"})]}),pv_mock_api_status:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Is,{label:"/api/status"}),s.jsx("div",{className:"g6-dot tone-success"}),s.jsx("div",{className:"g6-mini",children:"200 OK"})]}),pv_mock_seed_warning:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge danger",children:"Internal"}),s.jsx(is,{width:"50%",tone:"danger"})]}),pv_mock_mod_queue:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Report #45","Report #46"].map(t=>s.jsxs("div",{className:"g6-mod-row",children:[s.jsx(is,{width:"50%"}),s.jsxs("div",{className:"g6-row g6-gap-xxs",children:[s.jsx("button",{className:"g6-btn ghost",children:"Approve"}),s.jsx("button",{className:"g6-btn ghost",children:"Deny"})]})]},t))}),pv_mock_feedback_inbox:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(is,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx("button",{className:"g6-btn ghost",children:"Keep"}),s.jsx("button",{className:"g6-btn ghost",children:"Discard"})]})]}),pv_mock_release_toggle:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Is,{label:"Staging"}),s.jsx("div",{className:"g6-toggle on",children:s.jsx("div",{className:"g6-toggle-thumb"})}),s.jsx(Is,{label:"Prod"})]})},AIe=t=>{const e=EIe[t];return e?e():s.jsx("div",{className:"g6-preview g6-fallback"})};function PIe(){return s.jsxs("div",{className:"g6-root",children:[s.jsxs("header",{className:"g6-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 6"}),s.jsx("p",{className:"g6-sub",children:"50 mock UI widgets spanning profile, guild, tables, upload, and admin snippets."})]}),s.jsx("div",{className:"g6-pill-row",children:s.jsx(Is,{label:"MOCK"})})]}),s.jsx("nav",{className:"g6-toc",children:WI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g6-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g6-sections",children:WI.map(t=>s.jsxs("details",{className:"g6-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g6-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g6-section-title",children:t.title}),s.jsx("div",{className:"g6-section-sub",children:t.description})]}),s.jsxs("span",{className:"g6-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g6-grid",children:t.items.map(e=>s.jsxs("div",{className:"g6-card",children:[s.jsxs("div",{className:"g6-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g6-card-title",children:e.title}),s.jsx("div",{className:"g6-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g6-pill-row",children:(e.tags||["MOCK"]).map(n=>s.jsx(Is,{label:n},n))})]}),AIe(e.previewId)]},e.id))})]},t.id))})]})}const qI=[{id:"progress",title:"Animated Progress",description:"Animated stripes, sweeps, counters, and wave fills.",items:[{id:"1",categoryId:"progress",title:"Stripe Motion Bar",subtitle:"moving stripes",tags:["UI"],previewId:"pv_ui7_stripe_motion2"},{id:"2",categoryId:"progress",title:"Gradient Sweep Fill",subtitle:"slow sweep",tags:["UI"],previewId:"pv_ui7_gradient_sweep"},{id:"3",categoryId:"progress",title:"Tick-Up Counter",subtitle:"odometer style",tags:["UI"],previewId:"pv_ui7_tickup_counter"},{id:"4",categoryId:"progress",title:"Milestone Pop",subtitle:"pop at thresholds",tags:["UI"],previewId:"pv_ui7_milestone_pop"},{id:"5",categoryId:"progress",title:"Ring Spinner Progress",subtitle:"rotating arc",tags:["UI"],previewId:"pv_ui7_ring_spinner"},{id:"6",categoryId:"progress",title:"Pulse Marker Line",subtitle:"avg marker pulse",tags:["UI"],previewId:"pv_ui7_marker_pulse"},{id:"7",categoryId:"progress",title:"Step Fill Animation",subtitle:"segment fill",tags:["UI"],previewId:"pv_ui7_step_fill"},{id:"8",categoryId:"progress",title:"Wave Fill Gauge",subtitle:"wave in bar",tags:["UI"],previewId:"pv_ui7_wave_fill"},{id:"9",categoryId:"progress",title:"Micro Spark Animate",subtitle:"spark drawing",tags:["UI"],previewId:"pv_ui7_spark_draw"},{id:"10",categoryId:"progress",title:"Heat Glow Cells",subtitle:"glow on cells",tags:["UI"],previewId:"pv_ui7_heat_glow_cells"}]},{id:"hover",title:"Hover/Focus States",description:"Focus rings, tilts, bounces, outlines, and menus.",items:[{id:"11",categoryId:"hover",title:"Focus Ring Showcase",subtitle:"focus styles",tags:["UI"],previewId:"pv_ui7_focus_rings"},{id:"12",categoryId:"hover",title:"Hover Tilt Card",subtitle:"subtle tilt",tags:["UI"],previewId:"pv_ui7_hover_tilt"},{id:"13",categoryId:"hover",title:"Glow Border on Hover",subtitle:"outer glow",tags:["UI"],previewId:"pv_ui7_hover_glow_border"},{id:"14",categoryId:"hover",title:"Icon Bounce Hover",subtitle:"bounce icon",tags:["UI"],previewId:"pv_ui7_icon_bounce"},{id:"15",categoryId:"hover",title:"Tooltip Follow Mock",subtitle:"offset tooltip",tags:["UI"],previewId:"pv_ui7_tooltip_follow"},{id:"16",categoryId:"hover",title:"Pressed Button Depth",subtitle:"down state",tags:["UI"],previewId:"pv_ui7_button_depth"},{id:"17",categoryId:"hover",title:"Selection Outline",subtitle:"selected frame",tags:["UI"],previewId:"pv_ui7_select_outline"},{id:"18",categoryId:"hover",title:"Drag Handle Mock",subtitle:"grab dots",tags:["UI"],previewId:"pv_ui7_drag_handle"},{id:"19",categoryId:"hover",title:"Context Menu Hover",subtitle:"menu highlight",tags:["UI"],previewId:"pv_ui7_context_hover"},{id:"20",categoryId:"hover",title:"Keyboard Nav Dots",subtitle:"tab order hint",tags:["UI"],previewId:"pv_ui7_keynav_dots"}]},{id:"decor",title:"Decorative UI",description:"Glass headers, neon lines, patterns, and status clusters.",items:[{id:"21",categoryId:"decor",title:"Glass Panel Header",subtitle:"frosted header",tags:["UI"],previewId:"pv_ui7_glass_header"},{id:"22",categoryId:"decor",title:"Neon Accent Line",subtitle:"accent stroke",tags:["UI"],previewId:"pv_ui7_neon_accent"},{id:"23",categoryId:"decor",title:"Pattern Background Card",subtitle:"subtle pattern",tags:["UI"],previewId:"pv_ui7_pattern_bg"},{id:"24",categoryId:"decor",title:"Corner Cut Card",subtitle:"cut corners",tags:["UI"],previewId:"pv_ui7_corner_cut"},{id:"25",categoryId:"decor",title:"Divider Variants",subtitle:"3 divider styles",tags:["UI"],previewId:"pv_ui7_dividers"},{id:"26",categoryId:"decor",title:"Tag Pill Variants",subtitle:"solid/outline",tags:["UI"],previewId:"pv_ui7_tag_variants"},{id:"27",categoryId:"decor",title:"Icon Badge Stack",subtitle:"icon + badge",tags:["UI"],previewId:"pv_ui7_icon_badges"},{id:"28",categoryId:"decor",title:"Mini Banner Strip",subtitle:"announcement strip",tags:["UI"],previewId:"pv_ui7_banner_strip"},{id:"29",categoryId:"decor",title:"Progress Notches",subtitle:"notched bar",tags:["UI"],previewId:"pv_ui7_notches_bar"},{id:"30",categoryId:"decor",title:"Status Dot Cluster",subtitle:"3 statuses",tags:["UI"],previewId:"pv_ui7_status_cluster"}]},{id:"micro",title:"Micro-layouts",description:"Mini cards, headers, grids, and stacked chips.",items:[{id:"31",categoryId:"micro",title:"KPI + Mini Chart",subtitle:"two-column",tags:["UI"],previewId:"pv_ui7_kpi_minichart"},{id:"32",categoryId:"micro",title:"Split Header Actions",subtitle:"actions right",tags:["UI"],previewId:"pv_ui7_header_actions"},{id:"33",categoryId:"micro",title:"Compact Card Grid",subtitle:"22 grid",tags:["UI"],previewId:"pv_ui7_compact_grid"},{id:"34",categoryId:"micro",title:"Sticky Mini Footer",subtitle:"footer tools",tags:["UI"],previewId:"pv_ui7_sticky_footer"},{id:"35",categoryId:"micro",title:"Inline Editable Field",subtitle:"edit pencil",tags:["UI"],previewId:"pv_ui7_inline_edit"},{id:"36",categoryId:"micro",title:"Multi-line Subtitle Clamp",subtitle:"clamp demo",tags:["UI"],previewId:"pv_ui7_clamp_demo"},{id:"37",categoryId:"micro",title:"Icon List with Counts",subtitle:"icon + num",tags:["UI"],previewId:"pv_ui7_icon_counts"},{id:"38",categoryId:"micro",title:"Dual Badge Header",subtitle:"two tags",tags:["UI"],previewId:"pv_ui7_dual_badge"},{id:"39",categoryId:"micro",title:"Avatar Stack",subtitle:"overlapping",tags:["UI"],previewId:"pv_ui7_avatar_stack"},{id:"40",categoryId:"micro",title:"Chips + Progress Row",subtitle:"mixed row",tags:["UI"],previewId:"pv_ui7_chips_progress_row"}]},{id:"states",title:"Feedback & States",description:"Success, warning, error, empty, loading, sync, offline, locked.",items:[{id:"41",categoryId:"states",title:"Success Glow Toast",subtitle:"success state",tags:["UI"],previewId:"pv_ui7_success_toast"},{id:"42",categoryId:"states",title:"Warning Banner",subtitle:"attention state",tags:["UI"],previewId:"pv_ui7_warning_banner"},{id:"43",categoryId:"states",title:"Error Inline Panel",subtitle:"error state",tags:["UI"],previewId:"pv_ui7_error_panel"},{id:"44",categoryId:"states",title:"Empty State Illustration",subtitle:"empty",tags:["UI"],previewId:"pv_ui7_empty_state"},{id:"45",categoryId:"states",title:"Loading Dots",subtitle:"3 dots",tags:["UI"],previewId:"pv_ui7_loading_dots"},{id:"46",categoryId:"states",title:"Sync Indicator",subtitle:"sync badge",tags:["UI"],previewId:"pv_ui7_sync_indicator"},{id:"47",categoryId:"states",title:"Offline Mode Chip",subtitle:"offline badge",tags:["UI"],previewId:"pv_ui7_offline_chip"},{id:"48",categoryId:"states",title:"Disabled Overlay",subtitle:"disabled state",tags:["UI"],previewId:"pv_ui7_disabled_overlay"},{id:"49",categoryId:"states",title:"New Ribbon + Glow",subtitle:"new state",tags:["UI"],previewId:"pv_ui7_new_ribbon_glow"},{id:"50",categoryId:"states",title:"Locked State Stamp",subtitle:"locked stamp",tags:["UI"],previewId:"pv_ui7_locked_stamp"}]}],co=({label:t})=>s.jsx("span",{className:"g7-pill",children:t}),Us=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g7-bar tone-${e}`,style:{width:t,height:n}}),k1=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g7-dot tone-${t}`,style:{width:e,height:e}}),RIe={pv_ui7_stripe_motion2:()=>s.jsx("div",{className:"g7-preview g7-stripes",children:s.jsx("div",{className:"g7-stripe-fill",style:{width:"78%"}})}),pv_ui7_gradient_sweep:()=>s.jsx("div",{className:"g7-preview g7-gradient",children:s.jsx("div",{className:"g7-gradient-fill"})}),pv_ui7_tickup_counter:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-odometer",children:["0","1","2"].map((t,e)=>s.jsx("span",{className:`g7-odo-digit ${e===2?"active":""}`,children:t},e))}),s.jsx(co,{label:"Counter"})]}),pv_ui7_milestone_pop:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[20,50,80].map((t,e)=>s.jsxs("div",{className:"g7-milestone",children:[s.jsx("div",{className:`g7-milestone-dot ${e===1?"pop":""}`}),s.jsx("span",{className:"g7-mini",children:t})]},t))}),pv_ui7_ring_spinner:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-spinner",children:s.jsx("div",{className:"g7-spinner-arc"})}),s.jsx(Us,{width:"50%"})]}),pv_ui7_marker_pulse:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx("div",{className:"g7-marker-line",children:s.jsx("div",{className:"g7-marker",style:{left:"62%"}})}),s.jsx("span",{className:"g7-mini",children:"Average"})]}),pv_ui7_step_fill:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-stepper",children:Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g7-step ${e<3?"filled":""}`},e))}),pv_ui7_wave_fill:()=>s.jsx("div",{className:"g7-preview g7-wave",children:s.jsx("div",{className:"g7-wave-fill"})}),pv_ui7_spark_draw:()=>s.jsx("div",{className:"g7-preview g7-spark",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g7-spark-bar",style:{height:`${8+e%4*6}px`}},e))}),pv_ui7_heat_glow_cells:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g7-heat-cell ${e>=3?"glow":""}`},e))}),pv_ui7_focus_rings:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-focus"}),s.jsx("div",{className:"g7-focus strong"}),s.jsx("div",{className:"g7-focus dashed"})]}),pv_ui7_hover_tilt:()=>s.jsxs("div",{className:"g7-preview g7-tilt-card",children:[s.jsx(Us,{width:"70%"}),s.jsx(Us,{width:"40%",tone:"muted"})]}),pv_ui7_hover_glow_border:()=>s.jsx("div",{className:"g7-preview g7-glow-border",children:s.jsx(Us,{width:"60%"})}),pv_ui7_icon_bounce:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-bounce",children:""}),s.jsx(Us,{width:"40%"})]}),pv_ui7_tooltip_follow:()=>s.jsxs("div",{className:"g7-preview g7-tooltip-follow",children:[s.jsx("div",{className:"g7-target"}),s.jsx("div",{className:"g7-follow-tip",children:s.jsx(Us,{width:"50%"})})]}),pv_ui7_button_depth:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("button",{className:"g7-press-btn",children:"Press"}),s.jsx("button",{className:"g7-press-btn pressed",children:"Pressed"})]}),pv_ui7_select_outline:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-outline-card active",children:s.jsx(Us,{width:"60%"})}),s.jsx("div",{className:"g7-outline-card",children:s.jsx(Us,{width:"40%"})})]}),pv_ui7_drag_handle:()=>s.jsxs("div",{className:"g7-preview g7-row g7-center g7-gap-sm",children:[s.jsx("div",{className:"g7-drag-handle",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{},e))}),s.jsx(Us,{width:"50%"})]}),pv_ui7_context_hover:()=>s.jsx("div",{className:"g7-preview g7-col g7-gap-xxs",children:["Edit","Duplicate","Archive"].map((t,e)=>s.jsx("div",{className:`g7-menu-row ${e===1?"hover":""}`,children:t},t))}),pv_ui7_keynav_dots:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[Array.from({length:4}).map((t,e)=>s.jsx("span",{className:`g7-keydot ${e===0?"active":""}`},e)),s.jsx("span",{className:"g7-mini",children:"Tab order"})]}),pv_ui7_glass_header:()=>s.jsxs("div",{className:"g7-preview g7-glass",children:[s.jsx("div",{className:"g7-glass-bar"}),s.jsx(Us,{width:"50%"})]}),pv_ui7_neon_accent:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-neon-line"}),s.jsx(Us,{width:"40%"})]}),pv_ui7_pattern_bg:()=>s.jsxs("div",{className:"g7-preview g7-pattern",children:[s.jsx(Us,{width:"60%"}),s.jsx(Us,{width:"30%",tone:"muted"})]}),pv_ui7_corner_cut:()=>s.jsxs("div",{className:"g7-preview g7-corner-card",children:[s.jsx(Us,{width:"70%"}),s.jsx(Us,{width:"40%",tone:"muted"})]}),pv_ui7_dividers:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xs",children:[s.jsx("div",{className:"g7-divider solid"}),s.jsx("div",{className:"g7-divider dashed"}),s.jsx("div",{className:"g7-divider dotted"})]}),pv_ui7_tag_variants:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs",children:[s.jsx(co,{label:"Solid"}),s.jsx("span",{className:"g7-pill ghost",children:"Outline"}),s.jsx("span",{className:"g7-pill muted",children:"Muted"})]}),pv_ui7_icon_badges:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsxs("div",{className:"g7-icon-badge",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"g7-badge-num",children:"3"})]}),s.jsx(Us,{width:"50%"})]}),pv_ui7_banner_strip:()=>s.jsxs("div",{className:"g7-preview g7-banner",children:[s.jsx("span",{children:"Announcement"}),s.jsx(co,{label:"Live"})]}),pv_ui7_notches_bar:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-notches",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:`g7-notch ${e<5?"active":""}`},e))}),pv_ui7_status_cluster:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx(k1,{tone:"success"}),s.jsx(k1,{tone:"warning"}),s.jsx(k1,{tone:"danger"}),s.jsx("span",{className:"g7-mini",children:"Status"})]}),pv_ui7_kpi_minichart:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm",children:[s.jsxs("div",{className:"g7-col g7-gap-xxs",children:[s.jsx("span",{className:"g7-mini",children:"KPI"}),s.jsx(Us,{width:"60%"})]}),s.jsx("div",{className:"g7-mini-chart",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{style:{height:`${10+e*4}px`}},e))})]}),pv_ui7_header_actions:()=>s.jsxs("div",{className:"g7-preview g7-row g7-space-between g7-center",children:[s.jsx(Us,{width:"40%"}),s.jsxs("div",{className:"g7-row g7-gap-xs",children:[s.jsx("button",{className:"g7-btn ghost",children:"Action"}),s.jsx("button",{className:"g7-btn solid",children:"Primary"})]})]}),pv_ui7_compact_grid:()=>s.jsx("div",{className:"g7-preview g7-grid g7-grid-2",children:Array.from({length:4}).map((t,e)=>s.jsxs("div",{className:"g7-mini-card",children:[s.jsx(Us,{width:"50%"}),s.jsx(Us,{width:"30%",tone:"muted"})]},e))}),pv_ui7_sticky_footer:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx(Us,{width:"70%"}),s.jsxs("div",{className:"g7-sticky-footer",children:[s.jsx("button",{className:"g7-btn ghost",children:"Cancel"}),s.jsx("button",{className:"g7-btn solid",children:"Save"})]})]}),pv_ui7_inline_edit:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("input",{className:"g7-inline",value:"Editable text",readOnly:!0}),s.jsx("span",{className:"g7-pencil"})]}),pv_ui7_clamp_demo:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx("div",{className:"g7-clamp",children:"Very long subtitle that is clamped after two lines for readability."}),s.jsx(Us,{width:"40%"})]}),pv_ui7_icon_counts:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:["","",""].map((t,e)=>s.jsxs("div",{className:"g7-icon-count",children:[s.jsx("span",{children:t}),s.jsx("span",{className:"g7-badge-num",children:e+2})]},t))}),pv_ui7_dual_badge:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs g7-center",children:[s.jsx(co,{label:"Pro"}),s.jsx(co,{label:"UI"}),s.jsx(Us,{width:"40%"})]}),pv_ui7_avatar_stack:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs g7-center",children:[s.jsx("div",{className:"g7-stack",children:["A","B","C"].map((t,e)=>s.jsx("span",{className:"g7-stack-avatar",style:{left:`${e*12}px`},children:t},t))}),s.jsx("span",{className:"g7-mini",children:"+5"})]}),pv_ui7_chips_progress_row:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx(co,{label:"UI"}),s.jsx(co,{label:"Motion"}),s.jsx("div",{className:"g7-pulse-bar",children:s.jsx("div",{className:"g7-pulse-fill",style:{width:"64%"}})})]}),pv_ui7_success_toast:()=>s.jsxs("div",{className:"g7-preview g7-toast success",children:[s.jsx("span",{className:"g7-dot tone-success"}),s.jsx("span",{children:"Saved successfully"})]}),pv_ui7_warning_banner:()=>s.jsx("div",{className:"g7-preview g7-banner warn",children:s.jsx("span",{children:"Warning: changes pending"})}),pv_ui7_error_panel:()=>s.jsxs("div",{className:"g7-preview g7-error",children:[s.jsx("div",{className:"g7-error-icon",children:"!"}),s.jsxs("div",{className:"g7-col g7-gap-xxs",children:[s.jsx(Us,{width:"60%",tone:"danger"}),s.jsx(Us,{width:"40%",tone:"muted"})]})]}),pv_ui7_empty_state:()=>s.jsxs("div",{className:"g7-preview g7-empty",children:[s.jsx("div",{className:"g7-ghost"}),s.jsx(Us,{width:"50%",tone:"muted"})]}),pv_ui7_loading_dots:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-center",children:Array.from({length:3}).map((t,e)=>s.jsx("span",{className:"g7-loading-dot"},e))}),pv_ui7_sync_indicator:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-sync",children:s.jsx("div",{className:"g7-sync-arc"})}),s.jsx(co,{label:"Syncing"})]}),pv_ui7_offline_chip:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-chip offline",children:"Offline"}),s.jsx(Us,{width:"40%",tone:"muted"})]}),pv_ui7_disabled_overlay:()=>s.jsxs("div",{className:"g7-preview g7-disabled",children:[s.jsx(Us,{width:"60%"}),s.jsx("div",{className:"g7-disabled-mask"})]}),pv_ui7_new_ribbon_glow:()=>s.jsxs("div",{className:"g7-preview g7-ribbon-card",children:[s.jsx("div",{className:"g7-ribbon",children:"New"}),s.jsx("div",{className:"g7-ribbon-glow"}),s.jsx(Us,{width:"60%"})]}),pv_ui7_locked_stamp:()=>s.jsxs("div",{className:"g7-preview g7-stamp",children:[s.jsx("div",{className:"g7-stamp-ring",children:"LOCKED"}),s.jsx(Us,{width:"40%"})]})},LIe=t=>{const e=RIe[t];return e?e():s.jsx("div",{className:"g7-preview g7-fallback"})};function DIe(){return s.jsxs("div",{className:"g7-root",children:[s.jsxs("header",{className:"g7-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 7"}),s.jsx("p",{className:"g7-sub",children:"50 animated UI micro-previews covering motion, hover states, decorative bits, and feedback."})]}),s.jsx("div",{className:"g7-pill-row",children:s.jsx(co,{label:"UI"})})]}),s.jsx("nav",{className:"g7-toc",children:qI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g7-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g7-sections",children:qI.map(t=>s.jsxs("details",{className:"g7-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g7-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g7-section-title",children:t.title}),s.jsx("div",{className:"g7-section-sub",children:t.description})]}),s.jsxs("span",{className:"g7-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g7-grid",children:t.items.map(e=>s.jsxs("div",{className:"g7-card",children:[s.jsxs("div",{className:"g7-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g7-card-title",children:e.title}),s.jsx("div",{className:"g7-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g7-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(co,{label:n},n))})]}),LIe(e.previewId)]},e.id))})]},t.id))})]})}const QI=[{id:"progress",title:"Animated Progress",description:"Pulses, stripes, sweeps, and counters that move on their own.",items:[{id:"1",categoryId:"progress",title:"Pulse Progress Bar",subtitle:"soft pulse fill",tags:["UI"],previewId:"pv_anim_pulse_bar"},{id:"2",categoryId:"progress",title:"Stripe Motion Fill",subtitle:"striped motion",tags:["UI"],previewId:"pv_anim_stripes_fill"},{id:"3",categoryId:"progress",title:"Gradient Sweep Meter",subtitle:"sweeping sheen",tags:["UI"],previewId:"pv_anim_gradient_sweep"},{id:"4",categoryId:"progress",title:"Segments Filling Track",subtitle:"sequential fill",tags:["UI"],previewId:"pv_anim_segments_fill"},{id:"5",categoryId:"progress",title:"Ring Spinner Progress",subtitle:"rotating arc",tags:["UI"],previewId:"pv_anim_ring_spinner"},{id:"6",categoryId:"progress",title:"Wave Fill Gauge",subtitle:"wave motion",tags:["UI"],previewId:"pv_anim_wave_fill"},{id:"7",categoryId:"progress",title:"Tick-Up Counter",subtitle:"rolling digits",tags:["UI"],previewId:"pv_anim_tickup_counter"},{id:"8",categoryId:"progress",title:"Marker Line Pulse",subtitle:"pulsing marker",tags:["UI"],previewId:"pv_anim_marker_pulse"},{id:"9",categoryId:"progress",title:"Notched Bar Scroll",subtitle:"notches glide",tags:["UI"],previewId:"pv_anim_notches_scroll"},{id:"10",categoryId:"progress",title:"Microbars Breathing",subtitle:"bars breathe",tags:["UI"],previewId:"pv_anim_microbars_breathe"}]},{id:"glow",title:"Glows, Unlocks, Highlights",description:"Shimmers, spotlights, confetti, and soft neon pulses.",items:[{id:"11",categoryId:"glow",title:"Unlock Glow Border",subtitle:"glowing frame",tags:["UI"],previewId:"pv_anim_unlock_glow_border"},{id:"12",categoryId:"glow",title:"Shimmer Skeleton",subtitle:"loading shimmer",tags:["UI"],previewId:"pv_anim_skeleton_shimmer"},{id:"13",categoryId:"glow",title:"New Ribbon Shine",subtitle:"ribbon sweep",tags:["UI"],previewId:"pv_anim_ribbon_shine"},{id:"14",categoryId:"glow",title:"Badge Pop Loop",subtitle:"pop animation",tags:["UI"],previewId:"pv_anim_badge_pop"},{id:"15",categoryId:"glow",title:"Spotlight Sweep",subtitle:"light sweep",tags:["UI"],previewId:"pv_anim_spotlight_sweep"},{id:"16",categoryId:"glow",title:"Confetti Drift",subtitle:"floating dots",tags:["UI"],previewId:"pv_anim_confetti_drift"},{id:"17",categoryId:"glow",title:"Spark Particles",subtitle:"spark drizzle",tags:["UI"],previewId:"pv_anim_spark_particles"},{id:"18",categoryId:"glow",title:"Aura Halo Ring",subtitle:"halo pulse",tags:["UI"],previewId:"pv_anim_halo_ring"},{id:"19",categoryId:"glow",title:"Hover Lift (auto demo)",subtitle:"auto float",tags:["UI"],previewId:"pv_anim_hover_lift_demo"},{id:"20",categoryId:"glow",title:"Soft Neon Pulse Line",subtitle:"neon flicker",tags:["UI"],previewId:"pv_anim_neon_line_pulse"}]},{id:"controls",title:"Animated Controls & Navigation",description:"Auto-animating toggles, tabs, tooltips, and badges.",items:[{id:"21",categoryId:"controls",title:"Toggle Flip Motion",subtitle:"thumb flip",tags:["UI"],previewId:"pv_anim_toggle_flip"},{id:"22",categoryId:"controls",title:"Segmented Toggle Slide",subtitle:"sliding highlight",tags:["UI"],previewId:"pv_anim_seg_toggle_slide"},{id:"23",categoryId:"controls",title:"Tabs Underline Slide",subtitle:"underline glide",tags:["UI"],previewId:"pv_anim_tabs_underline"},{id:"24",categoryId:"controls",title:"Dropdown Open Bounce",subtitle:"bouncy menu",tags:["UI"],previewId:"pv_anim_dropdown_bounce"},{id:"25",categoryId:"controls",title:"Tooltip Appear/Float",subtitle:"float reveal",tags:["UI"],previewId:"pv_anim_tooltip_float"},{id:"26",categoryId:"controls",title:"Button Press Depth Loop",subtitle:"press cycle",tags:["UI"],previewId:"pv_anim_button_depth"},{id:"27",categoryId:"controls",title:"Loading Dots",subtitle:"dot bounce",tags:["UI"],previewId:"pv_anim_loading_dots"},{id:"28",categoryId:"controls",title:"Sync Spinner Badge",subtitle:"badge spinner",tags:["UI"],previewId:"pv_anim_sync_spinner"},{id:"29",categoryId:"controls",title:"Notification Bell Pulse",subtitle:"bell ring",tags:["UI"],previewId:"pv_anim_bell_pulse"},{id:"30",categoryId:"controls",title:"Chip Select Ripple",subtitle:"ripple effect",tags:["UI"],previewId:"pv_anim_chip_ripple"}]},{id:"charts",title:"Animated Micro-Charts",description:"Drawing sparks, morphing radar, wobbling histograms, glowing grids.",items:[{id:"31",categoryId:"charts",title:"Sparkline Draw",subtitle:"line drawing",tags:["UI"],previewId:"pv_anim_spark_draw"},{id:"32",categoryId:"charts",title:"Step Line March",subtitle:"step march",tags:["UI"],previewId:"pv_anim_step_march"},{id:"33",categoryId:"charts",title:"Bar Grow Cycle",subtitle:"bars grow",tags:["UI"],previewId:"pv_anim_bar_grow_cycle"},{id:"34",categoryId:"charts",title:"Radar Polygon Morph",subtitle:"morphing radar",tags:["UI"],previewId:"pv_anim_radar_morph"},{id:"35",categoryId:"charts",title:"Donut Arc Sweep",subtitle:"arc sweep",tags:["UI"],previewId:"pv_anim_donut_sweep"},{id:"36",categoryId:"charts",title:"Histogram Wobble",subtitle:"wobble bars",tags:["UI"],previewId:"pv_anim_hist_wobble"},{id:"37",categoryId:"charts",title:"Delta Arrow Float",subtitle:"floating delta",tags:["UI"],previewId:"pv_anim_delta_arrow_float"},{id:"38",categoryId:"charts",title:"Timeline Dot Travel",subtitle:"dot travels",tags:["UI"],previewId:"pv_anim_timeline_dot"},{id:"39",categoryId:"charts",title:"Heat Cells Glow Cycle",subtitle:"cells glow",tags:["UI"],previewId:"pv_anim_heat_glow_cycle"},{id:"40",categoryId:"charts",title:"Grid Scanline",subtitle:"scanline sweep",tags:["UI"],previewId:"pv_anim_grid_scanline"}]},{id:"states",title:"Feedback & States",description:"Toasts, banners, pings, overlays, and queue motion.",items:[{id:"41",categoryId:"states",title:"Success Toast Slide-In",subtitle:"toast slides",tags:["UI"],previewId:"pv_anim_toast_slidein"},{id:"42",categoryId:"states",title:"Warning Banner Shake",subtitle:"gentle shake",tags:["UI"],previewId:"pv_anim_banner_shake"},{id:"43",categoryId:"states",title:"Error Pulse Border",subtitle:"border pulse",tags:["UI"],previewId:"pv_anim_error_pulse"},{id:"44",categoryId:"states",title:"Offline Chip Blink",subtitle:"chip blink",tags:["UI"],previewId:"pv_anim_offline_blink"},{id:"45",categoryId:"states",title:"Locked Overlay Fade",subtitle:"overlay fade",tags:["UI"],previewId:"pv_anim_locked_fade"},{id:"46",categoryId:"states",title:"Progress Complete Burst",subtitle:"burst ring",tags:["UI"],previewId:"pv_anim_complete_burst"},{id:"47",categoryId:"states",title:"Attention Ping Indicator",subtitle:"ping pulses",tags:["UI"],previewId:"pv_anim_ping_indicator"},{id:"48",categoryId:"states",title:"Tooltip Hint Nudge",subtitle:"hint nudge",tags:["UI"],previewId:"pv_anim_hint_nudge"},{id:"49",categoryId:"states",title:"Queue Item Slide",subtitle:"slide loop",tags:["UI"],previewId:"pv_anim_queue_slide"},{id:"50",categoryId:"states",title:'"New Data" Glow Dot',subtitle:"dot glow",tags:["UI"],previewId:"pv_anim_newdata_dot"}]}],Ou=({label:t})=>s.jsx("span",{className:"g8-pill",children:t}),rn=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g8-bar tone-${e}`,style:{width:t,height:n}}),MIe={pv_anim_pulse_bar:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-animated",children:s.jsx("div",{className:"g8-track-fill pulse",style:{width:"76%"}})}),s.jsxs("div",{className:"g8-mini-row",children:[s.jsx(Ou,{label:"UI"}),s.jsx("span",{className:"g8-mini",children:"Live"})]})]}),pv_anim_stripes_fill:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-stripes g8-animated"}),s.jsx(rn,{width:"60%",tone:"muted",height:6})]}),pv_anim_gradient_sweep:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-sweep g8-animated"}),s.jsx("span",{className:"g8-mini",children:"Gradient sweep"})]}),pv_anim_segments_fill:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-seg-track",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:`g8-seg ${e<6?"g8-animated fill":""}`,style:{animationDelay:`${e*.15}s`}},e))}),pv_anim_ring_spinner:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-ring g8-animated",children:s.jsx("div",{className:"g8-ring-arc"})}),s.jsx(rn,{width:"50%"})]}),pv_anim_wave_fill:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-wave g8-animated"}),s.jsx("span",{className:"g8-mini",children:"Wave fill"})]}),pv_anim_tickup_counter:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-odometer g8-animated",children:["0","1","2"].map((t,e)=>s.jsx("span",{className:`g8-odo-digit ${e===2?"active":""}`,children:t},e))}),s.jsx(Ou,{label:"Counter"})]}),pv_anim_marker_pulse:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-marker-line",children:s.jsx("div",{className:"g8-marker g8-animated",style:{left:"64%"}})}),s.jsx("span",{className:"g8-mini",children:"Avg marker"})]}),pv_anim_notches_scroll:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-notches g8-animated",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:"g8-notch"},e))}),pv_anim_microbars_breathe:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xs g8-center",children:["ATK","SPD","HP","LCK"].map((t,e)=>s.jsxs("div",{className:"g8-col g8-gap-xxs g8-center",children:[s.jsx("span",{className:"g8-mini",children:t}),s.jsx("div",{className:`g8-microbar g8-animated ${e%2===0?"alt":""}`})]},t))}),pv_anim_unlock_glow_border:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsxs("div",{className:"g8-glow-card g8-animated",children:[s.jsx(rn,{width:"60%"}),s.jsx(rn,{width:"40%",tone:"muted"})]}),s.jsx(Ou,{label:"Unlocked"})]}),pv_anim_skeleton_shimmer:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-skeleton g8-animated"}),s.jsx("div",{className:"g8-skeleton short g8-animated"})]}),pv_anim_ribbon_shine:()=>s.jsxs("div",{className:"g8-preview g8-ribbon-card",children:[s.jsx("div",{className:"g8-ribbon g8-animated",children:"NEW"}),s.jsx(rn,{width:"65%"}),s.jsx(rn,{width:"40%",tone:"muted"})]}),pv_anim_badge_pop:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-badge-pop g8-animated",children:"UI"}),s.jsx(rn,{width:"50%"})]}),pv_anim_spotlight_sweep:()=>s.jsxs("div",{className:"g8-preview g8-spotlight g8-animated",children:[s.jsx("div",{className:"g8-spot-sheen"}),s.jsx(rn,{width:"60%"})]}),pv_anim_confetti_drift:()=>s.jsx("div",{className:"g8-preview g8-confetti",children:Array.from({length:14}).map((t,e)=>s.jsx("span",{className:"g8-confetti-dot g8-animated",style:{animationDelay:`${e*.08}s`}},e))}),pv_anim_spark_particles:()=>s.jsx("div",{className:"g8-preview g8-sparks",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g8-spark g8-animated",style:{animationDelay:`${e*.12}s`}},e))}),pv_anim_halo_ring:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-halo g8-animated",children:s.jsx("div",{className:"g8-halo-ring"})}),s.jsx(rn,{width:"40%"})]}),pv_anim_hover_lift_demo:()=>s.jsxs("div",{className:"g8-preview g8-hover-card g8-animated",children:[s.jsx(rn,{width:"70%"}),s.jsx(rn,{width:"45%",tone:"muted"})]}),pv_anim_neon_line_pulse:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-neon-line g8-animated"}),s.jsx(rn,{width:"40%"})]}),pv_anim_toggle_flip:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-toggle g8-animated",children:s.jsx("div",{className:"g8-toggle-thumb"})}),s.jsx("span",{className:"g8-mini",children:"Auto flip"})]}),pv_anim_seg_toggle_slide:()=>s.jsx("div",{className:"g8-preview g8-seg-toggle",children:s.jsxs("div",{className:"g8-seg-rail",children:[s.jsx("div",{className:"g8-seg-slider g8-animated"}),s.jsxs("div",{className:"g8-seg-labels",children:[s.jsx("span",{children:"One"}),s.jsx("span",{children:"Two"}),s.jsx("span",{children:"Three"})]})]})}),pv_anim_tabs_underline:()=>s.jsxs("div",{className:"g8-preview g8-tabs",children:[s.jsx("div",{className:"g8-tab-row",children:["Overview","Stats","Logs"].map((t,e)=>s.jsx("span",{className:`g8-tab ${e===1?"active":""}`,children:t},t))}),s.jsx("div",{className:"g8-underline g8-animated"})]}),pv_anim_dropdown_bounce:()=>s.jsxs("div",{className:"g8-preview g8-dropdown",children:[s.jsx("div",{className:"g8-drop-head",children:"Select"}),s.jsxs("div",{className:"g8-drop-menu g8-animated",children:[s.jsx("div",{className:"g8-drop-item",children:"Option A"}),s.jsx("div",{className:"g8-drop-item",children:"Option B"}),s.jsx("div",{className:"g8-drop-item",children:"Option C"})]})]}),pv_anim_tooltip_float:()=>s.jsxs("div",{className:"g8-preview g8-tooltip",children:[s.jsx("div",{className:"g8-tooltip-target"}),s.jsx("div",{className:"g8-tooltip-box g8-animated",children:s.jsx(rn,{width:"60%"})})]}),pv_anim_button_depth:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("button",{className:"g8-press-btn g8-animated",children:"Press"}),s.jsx("button",{className:"g8-press-btn alt g8-animated",children:"Hold"})]}),pv_anim_loading_dots:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-center",children:Array.from({length:3}).map((t,e)=>s.jsx("span",{className:"g8-loading-dot g8-animated",style:{animationDelay:`${e*.15}s`}},e))}),pv_anim_sync_spinner:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-sync g8-animated",children:s.jsx("div",{className:"g8-sync-arc"})}),s.jsx(Ou,{label:"Syncing"})]}),pv_anim_bell_pulse:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-bell g8-animated",children:s.jsx("span",{className:"g8-bell-ring"})}),s.jsx(rn,{width:"50%"})]}),pv_anim_chip_ripple:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-xs g8-center",children:[s.jsx("span",{className:"g8-chip g8-animated",children:"UI"}),s.jsx("span",{className:"g8-chip",children:"Mock"})]}),pv_anim_spark_draw:()=>s.jsx("div",{className:"g8-preview g8-sparkline",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g8-spark-bar g8-animated",style:{animationDelay:`${e*.08}s`}},e))}),pv_anim_step_march:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-stepper",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g8-step g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_bar_grow_cycle:()=>s.jsx("div",{className:"g8-preview g8-col g8-gap-xxs",children:["A","B","C"].map((t,e)=>s.jsxs("div",{className:"g8-grow-row",children:[s.jsx("span",{className:"g8-mini",children:t}),s.jsx("div",{className:"g8-grow-bar g8-animated",style:{animationDelay:`${e*.15}s`}})]},t))}),pv_anim_radar_morph:()=>s.jsxs("div",{className:"g8-preview g8-radar",children:[s.jsx("div",{className:"g8-radar-shape g8-animated"}),s.jsx("div",{className:"g8-radar-ring outer"}),s.jsx("div",{className:"g8-radar-ring inner"})]}),pv_anim_donut_sweep:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-donut g8-animated",children:s.jsx("div",{className:"g8-donut-hole",children:"68%"})}),s.jsx(rn,{width:"40%"})]}),pv_anim_hist_wobble:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-center g8-hist",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:"g8-hist-bar g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_delta_arrow_float:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-delta g8-animated",children:""}),s.jsx(rn,{width:"50%"})]}),pv_anim_timeline_dot:()=>s.jsxs("div",{className:"g8-preview g8-timeline",children:[s.jsx("div",{className:"g8-timeline-line"}),s.jsx("div",{className:"g8-timeline-dot g8-animated"})]}),pv_anim_heat_glow_cycle:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-heatline",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:"g8-heat-cell g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_grid_scanline:()=>s.jsxs("div",{className:"g8-preview g8-grid-scan",children:[s.jsx("div",{className:"g8-scanline g8-animated"}),s.jsx("div",{className:"g8-grid-bg"})]}),pv_anim_toast_slidein:()=>s.jsxs("div",{className:"g8-preview g8-toast g8-animated",children:[s.jsx("span",{className:"g8-dot tone-success"}),s.jsx("span",{children:"Saved"})]}),pv_anim_banner_shake:()=>s.jsx("div",{className:"g8-preview g8-banner g8-animated",children:s.jsx("span",{children:"Warning: check inputs"})}),pv_anim_error_pulse:()=>s.jsxs("div",{className:"g8-preview g8-error g8-animated",children:[s.jsx("div",{className:"g8-error-icon",children:"!"}),s.jsxs("div",{className:"g8-col g8-gap-xxs",children:[s.jsx(rn,{width:"60%",tone:"danger"}),s.jsx(rn,{width:"40%",tone:"muted"})]})]}),pv_anim_offline_blink:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-chip offline g8-animated",children:"Offline"}),s.jsx(rn,{width:"40%",tone:"muted"})]}),pv_anim_locked_fade:()=>s.jsxs("div",{className:"g8-preview g8-locked",children:[s.jsx(rn,{width:"60%"}),s.jsx("div",{className:"g8-locked-mask g8-animated"})]}),pv_anim_complete_burst:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-burst g8-animated"}),s.jsx(rn,{width:"40%"})]}),pv_anim_ping_indicator:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-ping g8-animated",children:s.jsx("span",{className:"g8-ping-dot"})}),s.jsx(rn,{width:"50%"})]}),pv_anim_hint_nudge:()=>s.jsxs("div",{className:"g8-preview g8-tooltip-hint",children:[s.jsx("div",{className:"g8-hint-box g8-animated",children:s.jsx(rn,{width:"50%"})}),s.jsx("div",{className:"g8-hint-arrow"})]}),pv_anim_queue_slide:()=>s.jsx("div",{className:"g8-preview g8-queue",children:["Item 1","Item 2","Item 3"].map((t,e)=>s.jsx("div",{className:`g8-queue-row g8-animated ${e===1?"active":""}`,style:{animationDelay:`${e*.18}s`},children:s.jsx(rn,{width:`${50+e*10}%`})},t))}),pv_anim_newdata_dot:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-newdot g8-animated"}),s.jsx(rn,{width:"50%"})]})},FIe=t=>{const e=MIe[t];return e?e():s.jsx("div",{className:"g8-preview g8-fallback"})};function BIe(){return s.jsxs("div",{className:"g8-root",children:[s.jsxs("header",{className:"g8-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 8"}),s.jsx("p",{className:"g8-sub",children:"50 animated UI micro-demos with CSS motion. All scoped to this tab and honor reduced motion."})]}),s.jsx("div",{className:"g8-pill-row",children:s.jsx(Ou,{label:"UI"})})]}),s.jsx("nav",{className:"g8-toc",children:QI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g8-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g8-sections",children:QI.map(t=>s.jsxs("details",{className:"g8-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g8-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g8-section-title",children:t.title}),s.jsx("div",{className:"g8-section-sub",children:t.description})]}),s.jsxs("span",{className:"g8-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g8-grid",children:t.items.map(e=>s.jsxs("div",{className:"g8-card",children:[s.jsxs("div",{className:"g8-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g8-card-title",children:e.title}),s.jsx("div",{className:"g8-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g8-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(Ou,{label:n},n))})]}),FIe(e.previewId)]},e.id))})]},t.id))})]})}const YI=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function $Ie(t=120){const e=[];for(let n=1;n<=t;n++)e.push({id:String(n),name:`Player ${n}`,className:YI[n%YI.length],level:200+n%50,guild:n%3===0?`Guild ${n%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const C1={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function XI(){const[t,e]=A.useState("rows"),[n,r]=A.useState(0),[i,a]=A.useState(""),[o,c]=A.useState(60),u=A.useMemo(()=>$Ie(240),[]),h=A.useMemo(()=>u.filter(m=>m.level>=n).filter(m=>m.name.toLowerCase().includes(i.toLowerCase())).slice(0,o),[u,n,i,o]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[s.jsxs("select",{value:t,onChange:m=>e(m.target.value),children:[s.jsx("option",{value:"rows",children:"Compact Rows"}),s.jsx("option",{value:"cards",children:"Card Grid"}),s.jsx("option",{value:"masonry",children:"Masonry"})]}),s.jsx("input",{placeholder:"Search",value:i,onChange:m=>a(m.target.value)}),s.jsxs("label",{children:["Min Level ",s.jsx("input",{type:"number",value:n,onChange:m=>r(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]}),s.jsxs("label",{children:["Limit ",s.jsx("input",{type:"number",value:o,onChange:m=>c(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&s.jsx("div",{style:{...C1,padding:0,overflow:"hidden"},children:h.map(m=>{var g;return s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontWeight:700},children:[m.name," ",s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:m.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),s.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="cards"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>{var g;return s.jsxs("div",{style:C1,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:700},children:m.name}),s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),s.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),s.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="masonry"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>s.jsxs("div",{style:{...C1,height:140+parseInt(m.id)%3*40},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:700},children:m.name}),s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),s.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},m.id))})]})}function JI(t=24){const e=[];for(let n=1;n<=t;n++)e.push({id:String(n),name:`Player ${n}`,server:`EU${1+n%3}`,lastScanMinsAgo:60+n*7%240});return e}function ZI(){const[t,e]=A.useState(120),[n,r]=A.useState(()=>JI(24));A.useEffect(()=>{const a=setInterval(()=>{r(o=>{if(!o.length)return o;const c=Math.floor(Math.random()*o.length),u=[...o];return u[c]={...u[c],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),A.useEffect(()=>{const a=setInterval(()=>{r(o=>o.map(c=>({...c,lastScanMinsAgo:c.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=A.useMemo(()=>n.filter(a=>a.lastScanMinsAgo>t),[n,t]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[s.jsxs("label",{children:["Freshness TTL (min) ",s.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),s.jsx("button",{onClick:()=>r(JI(24)),children:"Reset Demo Data"})]}),s.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),s.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[s.jsx("div",{children:"Player"}),s.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[s.jsxs("div",{children:[a.name," ",s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),s.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&s.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function OIe(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),n=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:n}}function e5(){const[t,e]=A.useState("idle"),[n,r]=A.useState(null),[i,a]=A.useState(!1),o=A.useCallback(async c=>{var h;c.preventDefault(),a(!1);const u=(h=c.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const m=await u.text(),{isHar:g,isSf:v}=OIe(m);if(e("parsing"),await new Promise(b=>setTimeout(b,600)),!g&&!v){e("error"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":v?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(m.length/2500)} (rough).`})}catch(m){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(m==null?void 0:m.message)||"Parse failed"})}}},[]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),s.jsx("div",{onDragOver:c=>{c.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:o,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),s.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Status:"})," ",t]}),n?s.jsxs("ul",{children:[s.jsxs("li",{children:["isHar: ",String(n.isHar)]}),s.jsxs("li",{children:["isSf: ",String(n.isSf)]}),s.jsxs("li",{children:["sizeKB: ",n.sizeKB]}),n.error&&s.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",n.error]}),n.summary&&s.jsxs("li",{children:["summary: ",n.summary]})]}):s.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const VIe="_wrap_hxkkn_3",UIe="_left_hxkkn_17",zIe="_right_hxkkn_25",GIe="_canvasCard_hxkkn_33",HIe="_hint_hxkkn_83",WIe="_panel_hxkkn_95",KIe="_panelTitle_hxkkn_109",qIe="_panelBody_hxkkn_121",zo={wrap:VIe,left:UIe,right:zIe,canvasCard:GIe,hint:HIe,panel:WIe,panelTitle:KIe,panelBody:qIe},QIe=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],YIe=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function XIe(){const[t,e]=A.useState("Canvas ist vorbereitet (526526)."),n=A.useRef(null),[r,i]=A.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,o]=A.useState(!0);A.useEffect(()=>{const m=document.getElementById("PortraitCanvas");if(!m){e("Fehler: Canvas nicht gefunden.");return}try{n.current&&typeof n.current.dispose=="function"&&n.current.dispose()}catch(b){}let g=console.error;a&&(console.error=(...b)=>{var k;const _=String((k=b==null?void 0:b[0])!=null?k:"");_.includes("Failed to load URL")&&_.includes("PortraitMaker-res/portraits/")||g(...b)});let v=null;try{v=new P5(m,{...r}),n.current=v,e("Rendering")}catch(b){a&&(console.error=g),g("Error initializing PortraitMaker:",b),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return v&&(v.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{v&&typeof v.dispose=="function"&&v.dispose()}finally{a&&(console.error=g)}}},[r,a]);const c=()=>{const m=document.getElementById("PortraitCanvas");if(!m)return;const g=m.toDataURL("image/png"),v=document.createElement("a");v.href=g,v.download="portrait.png",v.click()},u=m=>{i(g=>({...g,genderName:m,beard:m==="female"?0:g.beard}))},h=r.special!==0;return s.jsxs("div",{className:zo.wrap,children:[s.jsx("div",{className:zo.left,children:s.jsxs("div",{className:zo.canvasCard,children:[s.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),s.jsx("div",{className:zo.hint,children:t})]})}),s.jsx("div",{className:zo.right,children:s.jsxs("div",{className:zo.panel,children:[s.jsx("h2",{className:zo.panelTitle,children:"Controls"}),s.jsx("div",{className:zo.panelBody,children:s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",s.jsx("input",{type:"number",value:r.special,onChange:m=>i(g=>({...g,special:Number(m.target.value||0)})),style:{width:100}})]}),s.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[s.jsxs("label",{children:["Gender:",s.jsxs("select",{value:r.genderName,onChange:m=>u(m.target.value),children:[s.jsx("option",{value:"male",children:"male"}),s.jsx("option",{value:"female",children:"female"})]})]}),s.jsxs("label",{children:["Class:",s.jsx("input",{type:"number",min:1,value:r.class,onChange:m=>i(g=>({...g,class:Number(m.target.value||0)})),style:{width:80}})]}),s.jsxs("label",{children:["Race:",s.jsx("input",{type:"number",min:1,value:r.race,onChange:m=>i(g=>({...g,race:Number(m.target.value||0)})),style:{width:80}})]})]}),s.jsxs("label",{children:["Background:",s.jsx("select",{value:r.background,onChange:m=>i(g=>({...g,background:m.target.value})),children:QIe.map(m=>s.jsx("option",{value:m,children:m===""?"transparent":m},m))})]}),s.jsxs("label",{children:["Frame:",s.jsx("select",{value:r.frame,onChange:m=>i(g=>({...g,frame:m.target.value})),children:YIe.map(m=>s.jsx("option",{value:m,children:m===""?"none":m},m))})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:m=>i(g=>({...g,showBorder:m.target.checked}))}),"showBorder"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:a,onChange:m=>o(m.target.checked)}),"Mute 404 logs (Playground)"]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:s.jsx("button",{onClick:c,children:"Export PNG"})}),h&&s.jsxs("div",{className:zo.hint,children:["Hinweis: Bei ",s.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const JIe=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],ZIe=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],e5e=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function t5e(){return s.jsx(os,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:s.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),s.jsx("ul",{className:"mt-2 space-y-2",children:JIe.map(t=>s.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[s.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),s.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),s.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[s.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),s.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),s.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:s.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),s.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:ZIe.map(t=>s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),s.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),s.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),s.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:e5e.map(t=>s.jsx("li",{children:t},t))})]})]}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),s.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),s.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),s.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>s.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),s.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),s.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>s.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),s.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),s.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const s5e={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function n5e(){return s.jsx(os,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:s.jsx("div",{className:"flex w-full justify-center pt-10",children:s.jsx(fL,{config:s5e,label:"Playground Avatar"})})})}const r5e=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function i5e(){return s.jsx(os,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:s.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:r5e.map(t=>s.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),s.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),s.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const a5e="_avatarFrameMask_1pzs8_5",o5e="_avatarFrameOverlay_1pzs8_7",t5={avatarFrameMask:a5e,avatarFrameOverlay:o5e},l5e=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function c5e(){return s.jsx(os,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:s.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[s.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:l5e.map(t=>s.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[s.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),s.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),s.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),s.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),s.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:t5.avatarFrameMask,children:s.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),s.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:t5.avatarFrameOverlay,children:s.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const d5e=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function u5e(){return s.jsx(os,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:s.jsx("div",{className:"flex w-full flex-col gap-4",children:d5e.map(t=>s.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,s.jsx("span",{children:"Leer"})]}),s.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),s.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function h5e(){return s.jsx(os,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),s.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),s.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),s.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const oe={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},m5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},p5e={maxWidth:1200,margin:"0 auto"},g5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function f5e(){return s.jsx("div",{style:m5e,children:s.jsxs("div",{style:p5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"HAR Import Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:g5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),s.jsxs("div",{style:{border:`1px dashed ${oe.line}`,borderRadius:12,padding:24,textAlign:"center",background:oe.tileAlt},children:["Drop .har file here or"," ",s.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),s.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const v5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},x5e={maxWidth:1200,margin:"0 auto"},y5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function b5e(){return s.jsx("div",{style:v5e,children:s.jsxs("div",{style:x5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"JSON/CSV Import Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:y5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsxs("label",{children:["Upload JSON ",s.jsx("input",{type:"file",accept:".json"})]}),s.jsxs("label",{children:["Upload CSV ",s.jsx("input",{type:"file",accept:".csv"})]})]}),s.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const _5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},w5e={maxWidth:1200,margin:"0 auto"},j5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function S5e(){return s.jsx("div",{style:_5e,children:s.jsxs("div",{style:w5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Index Schema Viewer Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:j5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const N5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},k5e={maxWidth:1200,margin:"0 auto"},C5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function T5e(){return s.jsx("div",{style:N5e,children:s.jsxs("div",{style:k5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Player Profile (Contained) Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:C5e,children:[s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${oe.line}`}}),s.jsxs("div",{children:[s.jsx("h3",{style:{margin:"4px 0",color:oe.title},children:"NightRaven"}),s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>s.jsx("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const I5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},E5e={maxWidth:1200,margin:"0 auto"},A5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function P5e(){return s.jsx("div",{style:I5e,children:s.jsxs("div",{style:E5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Guild Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:A5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[s.jsx("b",{style:{color:oe.title},children:"Ravens"}),s.jsx("span",{children:"Avg Lvl 465"}),s.jsx("span",{children:"Fresh scans 82%"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[s.jsx("b",{style:{color:oe.title},children:"Arcana"}),s.jsx("span",{children:"Avg Lvl 458"}),s.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const R5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},L5e={maxWidth:1200,margin:"0 auto"},D5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function M5e(){return s.jsx("div",{style:R5e,children:s.jsxs("div",{style:L5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Server Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:D5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const F5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},B5e={maxWidth:1200,margin:"0 auto"},$5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function O5e(){return s.jsx("div",{style:F5e,children:s.jsxs("div",{style:B5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Rankings Views Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:$5e,children:[s.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>s.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${oe.line}`,borderRadius:10},children:t},t))}),s.jsx("div",{style:{border:`1px solid ${oe.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[s.jsx("b",{style:{color:oe.title},children:t.name}),s.jsx("span",{children:t.delta}),s.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const V5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},U5e={maxWidth:1200,margin:"0 auto"},z5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function G5e(){return s.jsx("div",{style:V5e,children:s.jsxs("div",{style:U5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"KPI Dashboard Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsx("div",{style:z5e,children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>s.jsx("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const H5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},W5e={maxWidth:1200,margin:"0 auto"},K5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function q5e(){return s.jsx("div",{style:H5e,children:s.jsxs("div",{style:W5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Progression Tracker Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:K5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),s.jsx("div",{style:{height:160,border:`1px dashed ${oe.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const Q5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},Y5e={maxWidth:1200,margin:"0 auto"},X5e={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function J5e(){return s.jsx("div",{style:Q5e,children:s.jsxs("div",{style:Y5e,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Legendary & Pets Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsx("div",{style:X5e,children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"Legendary Tracker"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Shadow Bow "}),s.jsx("li",{children:"Mythic Ring "})]})]}),s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"Pets"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Firewolf 4/5"}),s.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const Z5e={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},eEe={maxWidth:1200,margin:"0 auto"},tEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function sEe(){return s.jsx("div",{style:Z5e,children:s.jsxs("div",{style:eEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Community Scans Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:tEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>s.jsx("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const nEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},rEe={maxWidth:1200,margin:"0 auto"},iEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function aEe(){return s.jsx("div",{style:nEe,children:s.jsxs("div",{style:rEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Creator Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:iEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const oEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},lEe={maxWidth:1200,margin:"0 auto"},cEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function dEe(){return s.jsx("div",{style:oEe,children:s.jsxs("div",{style:lEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Feedback Form Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:cEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),s.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[s.jsx("span",{children:"Category"}),s.jsxs("select",{style:{background:"#152A42",color:oe.text,border:`1px solid ${oe.line}`,borderRadius:8,padding:"6px 8px"},children:[s.jsx("option",{children:"UI"}),s.jsx("option",{children:"Data"}),s.jsx("option",{children:"Bug"})]})]}),s.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[s.jsx("span",{children:"Message"}),s.jsx("textarea",{rows:4,style:{background:"#152A42",color:oe.text,border:`1px solid ${oe.line}`,borderRadius:8,padding:"6px 8px"}})]}),s.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${oe.line}`,borderRadius:10},children:"Send"})]})})]})})}const uEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},hEe={maxWidth:1200,margin:"0 auto"},mEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function pEe(){return s.jsx("div",{style:uEe,children:s.jsxs("div",{style:hEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Feedback Admin Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:mEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),s.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("span",{children:t}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),s.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const gEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},fEe={maxWidth:1200,margin:"0 auto"},vEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function xEe(){return s.jsx("div",{style:gEe,children:s.jsxs("div",{style:fEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Tutorials Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:vEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),s.jsxs("ol",{children:[s.jsx("li",{children:"Step highlights"}),s.jsx("li",{children:"Progress bar"}),s.jsx("li",{children:"Badges"})]})]})})]})})}const yEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},bEe={maxWidth:1200,margin:"0 auto"},_Ee={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function wEe(){return s.jsx("div",{style:yEe,children:s.jsxs("div",{style:bEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Wiki & FAQ Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:_Ee,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),s.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${oe.line}`,borderRadius:10}}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"How to import HAR?"}),s.jsx("li",{children:"What data is stored?"})]})]})})]})})}const jEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},SEe={maxWidth:1200,margin:"0 auto"},NEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function kEe(){return s.jsx("div",{style:jEe,children:s.jsxs("div",{style:SEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Settings Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:NEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("label",{children:["Language",s.jsxs("select",{style:{marginLeft:8},children:[s.jsx("option",{children:"EN"}),s.jsx("option",{children:"DE"})]})]}),s.jsxs("label",{children:["Theme",s.jsxs("select",{style:{marginLeft:8},children:[s.jsx("option",{children:"Dark"}),s.jsx("option",{children:"Custom"})]})]}),s.jsxs("label",{children:["Notifications",s.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),s.jsxs("label",{children:["Privacy",s.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const CEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},TEe={maxWidth:1200,margin:"0 auto"},IEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function EEe(){return s.jsx("div",{style:CEe,children:s.jsxs("div",{style:TEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"ToS & Privacy Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:IEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),s.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:s.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),s.jsxs("label",{style:{marginTop:8},children:[s.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const AEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},PEe={maxWidth:1200,margin:"0 auto"},REe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function LEe(){return s.jsx("div",{style:AEe,children:s.jsxs("div",{style:PEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Transparency Viewer Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:REe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),s.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const DEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},MEe={maxWidth:1200,margin:"0 auto"},FEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function BEe(){return s.jsx("div",{style:DEe,children:s.jsxs("div",{style:MEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"PWA Update Flow Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:FEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),s.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const $Ee={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},OEe={maxWidth:1200,margin:"0 auto"},VEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function UEe(){return s.jsx("div",{style:$Ee,children:s.jsxs("div",{style:OEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"PWA Install Prompt Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:VEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[s.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${oe.line}`,borderRadius:20}}),s.jsxs("div",{children:[s.jsx("b",{style:{color:oe.title},children:"Install SFDataHub"}),s.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),s.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const zEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},GEe={maxWidth:1200,margin:"0 auto"},HEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function WEe(){return s.jsx("div",{style:zEe,children:s.jsxs("div",{style:GEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Connect Manual Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:HEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:[s.jsx("b",{style:{color:oe.title},children:"View source"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const KEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},qEe={maxWidth:1200,margin:"0 auto"},QEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function YEe(){return s.jsx("div",{style:KEe,children:s.jsxs("div",{style:qEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Connect Userscript Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:QEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx("div",{children:"Install/Enable check"}),s.jsx("div",{children:"Events preview"})]})]})})]})})}const XEe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},JEe={maxWidth:1200,margin:"0 auto"},ZEe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function eAe(){return s.jsx("div",{style:XEe,children:s.jsxs("div",{style:JEe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Exports Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:ZEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"CSV/Excel"}),s.jsx("div",{children:"Tabs, widths, locales"})]}),s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"JSON API"}),s.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const tAe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},sAe={maxWidth:1200,margin:"0 auto"},nAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function rAe(){return s.jsx("div",{style:tAe,children:s.jsxs("div",{style:sAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Deeplinks Demo Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:nAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),s.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const iAe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},aAe={maxWidth:1200,margin:"0 auto"},oAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function lAe(){return s.jsx("div",{style:iAe,children:s.jsxs("div",{style:aAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Servers Editor Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:oAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[s.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),s.jsxs("select",{children:[s.jsx("option",{children:"Active"}),s.jsx("option",{children:"Disabled"})]}),s.jsx("button",{children:"Add"})]})]})})]})})}const cAe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},dAe={maxWidth:1200,margin:"0 auto"},uAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function hAe(){return s.jsx("div",{style:cAe,children:s.jsxs("div",{style:dAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Jobs & Queues Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:uAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),s.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const mAe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},pAe={maxWidth:1200,margin:"0 auto"},gAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function fAe(){return s.jsx("div",{style:mAe,children:s.jsxs("div",{style:pAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Feature Flags Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:gAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[s.jsx("span",{children:"Beta: New Rankings"}),s.jsx("label",{children:s.jsx("input",{type:"checkbox",defaultChecked:!0})}),s.jsx("span",{children:"Widgets v2"}),s.jsx("label",{children:s.jsx("input",{type:"checkbox"})})]})]})})]})})}const vAe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},xAe={maxWidth:1200,margin:"0 auto"},yAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function bAe(){return s.jsx("div",{style:vAe,children:s.jsxs("div",{style:xAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Table Performance Lab Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:yAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),s.jsx("div",{style:{height:160,border:`1px dashed ${oe.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const _Ae={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},wAe={maxWidth:1200,margin:"0 auto"},jAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function SAe(){return s.jsx("div",{style:_Ae,children:s.jsxs("div",{style:wAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:jAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),s.jsx("div",{style:{height:180,border:`1px dashed ${oe.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const NAe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},kAe={maxWidth:1200,margin:"0 auto"},CAe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function TAe(){return s.jsx("div",{style:NAe,children:s.jsxs("div",{style:kAe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Accessibility Pass Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:CAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"Focus ring visible"}),s.jsx("li",{children:"Skip links"}),s.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const IAe=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function EAe({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:n,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:o}){const{t:c}=Vs(),[u,h]=A.useState(null);A.useEffect(()=>{const R=IAe(r);if(!R){h(null);return}const P=()=>{const x=Date.now(),w=Math.max(0,Math.floor((R-x)/1e3));h(w)};P();const N=window.setInterval(P,1e3);return()=>window.clearInterval(N)},[r]);const m=u!==null&&u>0,g=!t||a||!e||m,v=A.useMemo(()=>{if(u===null||u<=0)return null;const R=Math.floor(u/60),P=u%60;return`${String(R).padStart(2,"0")}:${String(P).padStart(2,"0")}`},[u]),b=a?c("tools.sync.saving"):v?c("tools.sync.cooldownLabel",{time:v}):c("tools.sync.buttonSave"),_=A.useMemo(()=>c(e?"tools.sync.statusUnsynced":n?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,n,c]),k=A.useMemo(()=>{if(e)return null;if(n){const R=typeof n=="string"?new Date(n):n;return`${c("tools.sync.lastSyncLabel")}: ${R.toLocaleTimeString()}`}return c("tools.sync.noChanges")},[e,n,c]),I=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return s.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[s.jsx("button",{type:"button",disabled:g,onClick:i,className:I,children:b}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:_}),k&&s.jsx("p",{className:"text-sm text-slate-200",children:k}),o&&s.jsx("p",{className:"text-sm text-rose-400",children:o})]})]})})}const Qf=3,h6="sfdatahub.tools.sets.v1",s5=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],Nu=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],AAe=300*1e3;async function PAe(t,e){const n=ps(pl(Tt,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",n.path);const r={version:1,updatedAt:Hi(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await gl(n,r,{merge:!1})}const RAe=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(h6);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function LAe(){var Be,je;const{t}=Vs(),{user:e,status:n,loginWithDiscord:r}=wa(),i=n==="authenticated"&&!!e,a=A.useMemo(()=>RAe(),[]),o=A.useMemo(()=>{var ue;return(ue=a==null?void 0:a.sets)!=null&&ue.length?a.sets.slice(0,Qf):s5},[a]),c=A.useMemo(()=>{var Pe,De,it,yt;const ue=a==null?void 0:a.activeSetId;return ue&&o.some(ie=>ie.id===ue)?ue:(yt=(it=(Pe=o[0])==null?void 0:Pe.id)!=null?it:(De=s5[0])==null?void 0:De.id)!=null?yt:"set-main-dh"},[a,o]),u=A.useMemo(()=>{var Pe,De;const ue=a==null?void 0:a.activeToolId;return ue&&Nu.some(it=>it.id===ue)?ue:(De=(Pe=Nu[0])==null?void 0:Pe.id)!=null?De:"gemSim"},[a]),[h,m]=A.useState(o),[g,v]=A.useState(c),[b,_]=A.useState(u),[k,I]=A.useState(null),[R,P]=A.useState(""),[N,x]=A.useState(""),[w,L]=A.useState(!1),[j,S]=A.useState(null),[C,M]=A.useState(null),[T,F]=A.useState(!1),[D,V]=A.useState(null),z=A.useRef(null),K=A.useRef(!0);A.useEffect(()=>{if(typeof window!="undefined")try{const ue={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:b};window.localStorage.setItem(h6,JSON.stringify(ue))}catch(ue){console.warn("Failed to persist tools state",ue)}},[h,g,b]),A.useEffect(()=>{if(!i){L(!1),K.current=!0;return}if(K.current){K.current=!1;return}L(!0)},[i,h,g,b]);const W=A.useMemo(()=>{var ue;return(ue=h.find(Pe=>Pe.id===g))!=null?ue:h[0]},[g,h]),U=A.useMemo(()=>{var ue;return(ue=Nu.find(Pe=>Pe.id===b))!=null?ue:Nu[0]},[b]),J=(Be=W==null?void 0:W.tools)==null?void 0:Be.gemSim,re=(je=W==null?void 0:W.tools)==null?void 0:je.dungeonPauseOpenXP,G=h.length,X=G>=Qf,Y=()=>{if(X)return;const ue=G+1,Pe=t("tools.sets.defaultName","New Set"),De={id:`set-${Date.now()}`,name:`${Pe} ${ue}`,classLabel:"Class TBD",serverLabel:"Server TBD"};m(it=>[...it,De]),v(De.id)},se=()=>{r()},ce=()=>{if(!W){console.warn("No active set to export.");return}const ue={version:1,type:"toolSet",set:W},Pe=new Blob([JSON.stringify(ue,null,2)],{type:"application/json"}),De=URL.createObjectURL(Pe),it=document.createElement("a"),yt=W.name.toLowerCase().replace(/\s+/g,"-");it.href=De,it.download=`sfdatahub-set-${yt}.json`,it.click(),URL.revokeObjectURL(De)},_e=()=>{var ue;(ue=z.current)==null||ue.click()},Ae=ue=>{var ie,he;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Pe=t("tools.sets.deleteConfirmTitle"),De=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Pe}

${De}`))return;const it=h.filter(ve=>ve.id!==ue),yt=ue===g?(he=(ie=it[0])==null?void 0:ie.id)!=null?he:null:g;m(it),yt&&v(yt)},ee=ue=>{const Pe=h.find(De=>De.id===ue);Pe&&(I(ue),P(Pe.name),x(""))},le=()=>{I(null),P(""),x("")},te=()=>{if(!k)return;const ue=R.trim();if(!ue){x(t("tools.sets.renameErrorEmpty"));return}m(Pe=>Pe.map(De=>De.id===k?{...De,name:ue}:De)),I(null),P(""),x("")},ye=async ue=>{var De,it;const Pe=(it=(De=ue.target)==null?void 0:De.files)==null?void 0:it[0];if(Pe)try{if(h.length>=Qf){alert(t("tools.sets.importErrorMaxReached"));return}const yt=await Pe.text(),ie=JSON.parse(yt);if((ie==null?void 0:ie.version)!==1||(ie==null?void 0:ie.type)!=="toolSet"||typeof(ie==null?void 0:ie.set)!="object")throw new Error("invalid payload");const{set:he}=ie;if(typeof(he==null?void 0:he.name)!="string"||typeof(he==null?void 0:he.classLabel)!="string"||typeof(he==null?void 0:he.serverLabel)!="string")throw new Error("invalid set");const ve={...he,id:`imported-${Date.now()}`,name:he.name,classLabel:he.classLabel,serverLabel:he.serverLabel};m(Te=>[...Te,ve]),v(ve.id)}catch(yt){console.error("Failed to import set",yt),alert(t("tools.sets.importErrorInvalid"))}finally{ue.target.value=""}},ke=ue=>{g&&(m(Pe=>Pe.map(De=>{var yt;if(De.id!==g)return De;const it={...(yt=De.tools)!=null?yt:{},gemSim:ue};return{...De,tools:it}})),L(!0))},Me=ue=>{g&&(m(Pe=>Pe.map(De=>{var yt;if(De.id!==g)return De;const it={...(yt=De.tools)!=null?yt:{},dungeonPauseOpenXP:ue};return{...De,tools:it}})),L(!0))},Re=`${G}/${Qf}`,Ee=t(U.labelKey,U.defaultLabel),Le=t(U.descriptionKey,U.defaultDescription),Fe=async()=>{if(!i)return;const ue=e==null?void 0:e.id;if(!(!ue||T||C!==null&&C>Date.now())&&w){F(!0),V(null);try{await PAe(ue,{sets:h,activeSetId:g,activeToolId:b});const De=Date.now(),it=De+AAe;L(!1),S(new Date(De)),M(it)}catch(De){console.error("Failed to sync tools state",De),V(t("tools.sync.error"))}finally{F(!1)}}};return s.jsx(os,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:s.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),s.jsx("span",{className:"text-xs text-slate-400",children:Re})]}),s.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(ue=>{const Pe=ue.id===g;return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>v(ue.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Pe?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-slate-50",children:ue.name}),s.jsx("span",{role:"button",tabIndex:0,onClick:De=>{De.stopPropagation(),ee(ue.id)},onKeyDown:De=>{(De.key==="Enter"||De.key===" ")&&(De.preventDefault(),De.stopPropagation(),ee(ue.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:s.jsx(Q7,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"text-xs text-emerald-200/90",children:ue.classLabel}),s.jsx("div",{className:"text-xs text-slate-400",children:ue.serverLabel}),Pe&&s.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&s.jsx("button",{type:"button",onClick:De=>{De.stopPropagation(),Ae(ue.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},ue.id)}),s.jsxs("button",{type:"button",onClick:Y,disabled:X,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",X?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[s.jsx("span",{className:"text-lg",children:"+"}),s.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[s.jsx("button",{type:"button",onClick:ce,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),s.jsx("button",{type:"button",onClick:_e,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),s.jsx("input",{ref:z,type:"file",accept:"application/json",className:"hidden",onChange:ye})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[s.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),s.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:Nu.map(ue=>{const Pe=ue.id===b,De=t(ue.labelKey,ue.defaultLabel);return s.jsxs("button",{type:"button",onClick:()=>_(ue.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Pe?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[s.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),s.jsx("span",{children:De})]},ue.id)})})]}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),s.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(ue=>s.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),s.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:ue})]},ue))})]}),s.jsx(EAe,{isLoggedIn:i,hasUnsyncedChanges:w,lastSyncedAt:j,cooldownUntil:C,onSyncClick:Fe,isSaving:T,syncError:D})]}):s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),s.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),s.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(ue=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),s.jsx("span",{children:ue})]},ue))})]}),s.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:s.jsx("button",{type:"button",onClick:se,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:Ee}),s.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(W==null?void 0:W.name)||"kein Set"]})]}),s.jsx("div",{className:"flex gap-2",children:Nu.map(ue=>s.jsx("div",{className:["h-2 w-8 rounded-full transition",b===ue.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},ue.id))})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsx("div",{className:"text-sm text-slate-300",children:Le}),s.jsx("div",{className:"mt-4",children:b==="gemSim"?s.jsx(a2,{initialState:J,onStateChange:ke}):b==="dungeonPauseOpenXP"?s.jsx(o2,{initialState:re,onStateChange:Me},g):s.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",s.jsx("br",{}),"(z. B. ",Ee,")"]})})]}),s.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),s.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:W==null?void 0:W.name}),s.jsx("div",{className:"text-sm text-emerald-200/90",children:W==null?void 0:W.classLabel}),s.jsx("div",{className:"text-xs text-slate-400",children:W==null?void 0:W.serverLabel})]}),s.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",s.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),k&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:le}),s.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),s.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),s.jsx("input",{value:R,onChange:ue=>P(ue.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),N&&s.jsx("p",{className:"mt-2 text-xs text-rose-400",children:N}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:le,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),s.jsx("button",{type:"button",onClick:te,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const T1=50,DAe=3,MAe=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),I1=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function FAe(){var w,L;const[t]=ar(),e=(L=(w=t.get("q"))==null?void 0:w.trim())!=null?L:"",n=MAe(e),[r,i]=q.useState([]),[a,o]=q.useState([]),[c,u]=q.useState(null),[h,m]=q.useState(null),[g,v]=q.useState(!1),[b,_]=q.useState(!1),[k,I]=q.useState(!1),[R,P]=q.useState(null),N=async j=>{const S=Bn("Search:results");try{const C=En(xh(Tt,"latest"),Qi("nameFold"),oc(n),lc(n+""),...j?[GG(j)]:[],rr(T1)),M=await wn(S,{},()=>_n(C)),T=M.docs.length?M.docs[M.docs.length-1]:null,F=[],D=[];M.forEach(V=>{var J,re,G,X,Y,se,ce,_e,Ae,ee,le,te,ye,ke,Me,Re,Ee,Le,Fe,Be,je,ue,Pe,De,it,yt,ie,he,ve,Te,St,at;const z=V.data(),K=(J=V.ref.parent)==null?void 0:J.parent,W=(re=K==null?void 0:K.parent)==null?void 0:re.id,U=(G=K==null?void 0:K.id)!=null?G:V.id;W==="players"?F.push({id:U,name:(se=(Y=z.name)!=null?Y:(X=z.values)==null?void 0:X.Name)!=null?se:null,server:(Ae=(_e=z.server)!=null?_e:(ce=z.values)==null?void 0:ce.Server)!=null?Ae:null,className:(te=(le=z.className)!=null?le:(ee=z.values)==null?void 0:ee.Class)!=null?te:null,level:I1((ke=z.level)!=null?ke:(ye=z.values)==null?void 0:ye.Level)}):W==="guilds"&&D.push({id:U,name:(Ee=(Re=z.name)!=null?Re:(Me=z.values)==null?void 0:Me.Name)!=null?Ee:null,server:(Be=(Fe=z.server)!=null?Fe:(Le=z.values)==null?void 0:Le.Server)!=null?Be:null,memberCount:I1((De=(ue=z.memberCount)!=null?ue:(je=z.values)==null?void 0:je["Guild Member Count"])!=null?De:(Pe=z.values)==null?void 0:Pe.GuildMemberCount),hofRank:I1((at=(Te=(he=(yt=z.hofRank)!=null?yt:(it=z.values)==null?void 0:it["Hall of Fame Rank"])!=null?he:(ie=z.values)==null?void 0:ie.HoF)!=null?Te:(ve=z.values)==null?void 0:ve.Rank)!=null?at:(St=z.values)==null?void 0:St["Guild Rank"])})}),i(V=>[...V,...F]),o(V=>[...V,...D]),u(T),m(T),v(M.docs.length===T1),_(M.docs.length===T1)}finally{un(S)}};q.useEffect(()=>{if(n.length<DAe){P("Type at least 3 characters to search.");return}P(null),i([]),o([]),u(null),m(null),v(!1),_(!1),I(!0),N().catch(j=>P((j==null?void 0:j.message)||"Search failed")).finally(()=>I(!1))},[n]);const x=()=>{k||(I(!0),N(c||h).catch(j=>P((j==null?void 0:j.message)||"Search failed")).finally(()=>I(!1)))};return s.jsxs(os,{title:"Search",subtitle:e?`Results for ${e}`:"",children:[R&&s.jsx("p",{style:{color:"#ff9c9c",marginBottom:12},children:R}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[s.jsxs("section",{children:[s.jsx("h3",{children:"Players"}),r.map(j=>{var S,C,M;return s.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[s.jsx("div",{style:{fontWeight:700},children:(S=j.name)!=null?S:j.id}),s.jsxs("div",{style:{opacity:.8},children:[(C=j.className)!=null?C:"?","  ",(M=j.server)!=null?M:"?","  ",j.level!=null?`Lvl ${j.level}`:"Lvl ?"]})]},j.id)})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Guilds"}),a.map(j=>{var S,C;return s.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[s.jsx("div",{style:{fontWeight:700},children:(S=j.name)!=null?S:j.id}),s.jsxs("div",{style:{opacity:.8},children:[(C=j.server)!=null?C:"?"," "," ",j.memberCount!=null?`${j.memberCount} members`:"Members ?"," "," ",j.hofRank!=null?`HoF #${j.hofRank}`:"HoF ?"]})]},j.id)})]})]}),(g||b)&&s.jsx("div",{style:{marginTop:16},children:s.jsx("button",{type:"button",onClick:x,disabled:k,style:{padding:"10px 14px"},children:k?"Loading":"Load more"})})]})}const BAe="_backdrop_19xh2_1",$Ae="_panel_19xh2_19",OAe="_header_19xh2_43",VAe="_tabs_19xh2_63",UAe="_tabBtn_19xh2_75",zAe="_tabActive_19xh2_97",GAe="_closeBtn_19xh2_101",HAe="_content_19xh2_123",oo={backdrop:BAe,panel:$Ae,header:OAe,tabs:VAe,tabBtn:UAe,tabActive:zAe,closeBtn:GAe,content:HAe},Gr=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const n=Number(e);return Number.isFinite(n)?n:0},n5=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),ku=(t,e)=>{if(!t||typeof t!="object")return;const n=n5(e);for(const r of Object.keys(t))if(n5(r)===n)return t[r]},WAe=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let n=e.match(/EU(\d+)/);return n?{group:"EU",serverKey:`EU${n[1]}`}:(n=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/),n?{group:"EU",serverKey:`EU${n[1]||n[2]}`}:(n=e.match(/^S(\d+)$/),n?{group:"EU",serverKey:`EU${n[1]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(n=e.match(/F(\d+)/),n?{group:"FUSION",serverKey:`F${n[1]}`}:{group:"ALL",serverKey:"all"})))},KAe={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Intelligence",Mage:"Base Intelligence","Battle Mage":"Base Strength",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},ic=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,m6=t=>{const e={str:Gr(ic(t,"Base Strength")),dex:Gr(ic(t,"Base Dexterity")),intl:Gr(ic(t,"Base Intelligence")),con:Gr(ic(t,"Base Constitution")),luck:Gr(ic(t,"Base Luck"))},n=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:n}},qAe=(t,e)=>{var z,K;const{playerId:n,name:r,className:i,level:a,server:o,guildIdentifier:c,guildName:u,timestamp:h,updatedAt:m,values:g={}}=t||{},v=Gr(a),{group:b,serverKey:_}=WAe(o),k=m6(g),I=Gr(ku(g,"Base")),R=Gr(ku(g,"Base Constitution")),P=(z=KAe[String(i!=null?i:"")])!=null?z:"Base Intelligence",N=Gr(ic(g,P)),x=I+R,w=k.con,L=v>0?x/v:0,j=Gr(ku(g,"Attribute")),S=Gr(ku(g,"Constitution")),C=j+S,M=Gr(ku(g,"XP")),T=Gr(ku(g,"XP Total")),F=Gr(ic(g,"Gem Mine")),D=Gr(ic(g,"Treasury")),V=e?e():null;return{playerId:String(n!=null?n:""),name:String(r!=null?r:""),class:String(i!=null?i:""),level:v,group:b,serverKey:_,guildId:c?String(c):"",guildName:u?String(u):"",sum:x,main:N,con:w,ratio:L,mainTotal:j,conTotal:S,sumTotal:C,xpProgress:M,xpTotal:T,mine:F,treasury:D,timestamp:Gr(h),updatedAtFromLatest:(K=m!=null?m:V)!=null?K:null}},zi=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},QAe=["latestScanAtSec"],YAe=t=>{if(typeof t=="number")return Number.isFinite(t)?t>1e12?Math.floor(t/1e3):t:null;if(typeof t=="string"){const e=t.trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e)}return null},yx=t=>{for(const e of QAe)if(Object.prototype.hasOwnProperty.call(t,e))return{sec:YAe(t[e]),field:e};return{sec:null,field:null}},p6=(t,e,n)=>{if(!Number.isFinite(e))return t;const r=n!=null?n:"latestScanAtSec";return t[r]===e?t:{...t,[r]:e}},XAe=t=>{var i,a,o,c,u,h,m,g,v,b,_,k,I,R,P,N,x,w,L,j;const e=t.lastScanRaw!=null?String(t.lastScanRaw).trim():"",n=String((i=t.timestampSec)!=null?i:"").trim(),r=(e||n).trim();return{playerId:String((a=t.playerId)!=null?a:""),server:String((o=t.server)!=null?o:""),name:String((c=t.name)!=null?c:""),class:String((m=(h=(u=t.derived)==null?void 0:u.class)!=null?h:t.className)!=null?m:""),guild:t.guildName?String(t.guildName):null,lastScan:r||null,latestScanAtSec:zi(t.timestampSec),level:zi((v=t.level)!=null?v:(g=t.derived)==null?void 0:g.level),con:zi((b=t.derived)==null?void 0:b.con),main:zi((_=t.derived)==null?void 0:_.main),mainTotal:zi((k=t.derived)==null?void 0:k.mainTotal),conTotal:zi((I=t.derived)==null?void 0:I.conTotal),sumTotal:zi((R=t.derived)==null?void 0:R.sumTotal),xpProgress:zi((P=t.derived)==null?void 0:P.xpProgress),xpTotal:zi((N=t.derived)==null?void 0:N.xpTotal),mine:zi((x=t.derived)==null?void 0:x.mine),ratio:zi((w=t.derived)==null?void 0:w.ratio),sum:zi((L=t.derived)==null?void 0:L.sum),treasury:zi((j=t.derived)==null?void 0:j.treasury)}},Ki=t=>String(t!=null?t:"").trim(),g6=t=>Ki(t).toUpperCase(),fs=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),yv=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),r5=t=>{const e=yv(t);if(!e)return[];const n=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(n))},i5=t=>{const e=new Set;for(const n of t)for(let r=1;r<=n.length;r++)e.add(n.slice(0,r));return Array.from(e)},a5=t=>{var n;const e=String((n=t==null?void 0:t.code)!=null?n:"").toLowerCase();return e.includes("permission")||e.includes("already")||e.includes("failed-precondition")},f6=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},JAe=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=e.replace(/[\s,\.]/g,""),r=Number(n);return Number.isFinite(r)?r:null},ZAe=1,e4e=200,t4e=t=>t==null?"non_numeric":t<ZAe||t>e4e?"out_of_range":"ok",o5=t=>{const e=f6(t);return Number.isFinite(e!=null?e:NaN)?Math.trunc(e):null},s4e=t=>{const e=fs(t);for(const[n,r]of Object.entries(v6))if(fs(r)===e)return Number(n);return null},l5=t=>{var a;const e=t==null?"":String(t).trim();if(!e)return{classId:null,className:null};const n=Number(e);if(Number.isInteger(n)&&!Number.isNaN(n)){const o=n;return{classId:o,className:(a=v6[o])!=null?a:String(o)}}return{classId:s4e(e),className:e}},zs={PLAYERS:{IDENTIFIER:fs("Identifier"),PID:fs("ID"),GUILD_IDENTIFIER:fs("Guild Identifier"),SERVER:fs("Server"),NAME:fs("Name"),TIMESTAMP:fs("Timestamp"),LEVEL:fs("Level"),CLASS:fs("Class"),GUILD:fs("Guild")},GUILDS:{GUILD_IDENTIFIER:fs("Guild Identifier"),SERVER:fs("Server"),NAME:fs("Name"),MEMBER_COUNT:fs("Guild Member Count"),TIMESTAMP:fs("Timestamp"),HOF:fs("Hall of Fame Rank"),HOF_ALT:fs("HoF"),RANK:fs("Rank"),GUILD_RANK:fs("Guild Rank")}},v6={1:"Warrior",2:"Mage",3:"Scout",4:"Assassin",5:"Battle Mage",6:"Berserker",7:"Demon Hunter",8:"Bard"},x6=[zs.PLAYERS.LEVEL,fs("Level"),fs("Lvl"),fs("Stufe")],y6=[zs.PLAYERS.CLASS,fs("Class"),fs("ClassID"),fs("Class ID"),fs("CharClass"),fs("Klasse")],p2=t=>{const e=new Map;return t.forEach(n=>{const r=fs(n);e.has(r)||e.set(r,n)}),e},Vu=t=>{const e=new Set;for(const n of t)Object.keys(n).forEach(r=>e.add(r));return Array.from(e)},Wi=(t,e,n)=>{const r=e.get(n);return r&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:ya(t,n)},V_=(t,e,n)=>n.map(r=>Wi(t,e,r)).find(r=>r!=null&&String(r)!==""),cd=t=>String(t!=null?t:"").replace(/\u00a0/g," ").trim().replace(/\s+/g," ").replace(/:+$/,"").toLowerCase().replace(/[\s-]+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_+|_+$/g,""),n4e=t=>{const e=new Map;return t.forEach(n=>{var a;const r=cd(n);if(!r)return;const i=(a=e.get(r))!=null?a:[];i.push(n),e.set(r,i)}),e},r4e=["guild_member_count","guild_membercount","guildmembercount","member_count","membercount","guild_members"],g2=t=>{const e=n4e(t),n=[];for(const r of r4e){const i=e.get(r);if(i)for(const a of i)n.includes(a)||n.push(a)}return n},b6=(t,e)=>{const n=e!=null?e:g2(t);if(!n.length)return null;const r=cd("Guild Member Count"),i=n.find(a=>cd(a)===r);return i||(n.length===1,n[0])},i4e=new Set([fs("Strength"),fs("Dexterity"),fs("Intelligence"),fs("Constitution"),fs("Luck"),fs("Attribute")]),a4e=["equipment"],o4e=t=>i4e.has(t)||a4e.some(e=>t.includes(e)),ya=(t,e)=>{for(const n of Object.keys(t))if(fs(n)===e)return t[n]},l4e=/^[a-z]{1,4}\d+$/i,c4e=/^([a-z]{1,4}\d+)[_.-]?(net|eu)$/i,d4e=/^([a-z]{1,4}\d+)\.sfgame\.(net|eu)$/i,bv=t=>{const e=String(t!=null?t:"").trim().toUpperCase();if(!e)return e;const n=e.match(/^S(\d+)$/);return n?`EU${n[1]}`:e},u4e=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase();if(l4e.test(n))return bv(n);const r=n.match(c4e);if(r)return bv(r[1]);const i=n.match(d4e);return i?bv(i[1]):e},_6=t=>{var i;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/);if(!n)return null;const r=(i=n[1])==null?void 0:i.trim();return r?u4e(r):null},h4e=t=>{var r;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/);return n&&(r=n[2])!=null?r:null},w6=(t,e,n,r,i)=>{var h;const a=(m,g,v,b)=>{const _=JAe(g),k=t4e(_);return{header:m,headerIndex:m?n.indexOf(m):-1,rawValue:g,parsedValue:_,validationResult:k,isValid:k==="ok",fallbackUsed:b,source:v}};if(r){const m=a(r,t[r],"primary",!1);if(m.isValid)return m}for(const m of i){if(m===r)continue;const g=a(m,t[m],"alias",!0);if(g.isValid)return g}const o=(h=e.get(zs.GUILDS.MEMBER_COUNT))!=null?h:null,c=o?t[o]:ya(t,zs.GUILDS.MEMBER_COUNT);return a(o,c,o?"lookup":"none",!0)};function bx(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(n){const i=Number(n[1]),a=Number(n[2])-1,o=Number(n[3]),c=Number(n[4]),u=Number(n[5]),h=n[6]?Number(n[6]):0,m=new Date(o,a,i,c,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function c5(t){const e=new Date(t*1e3),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=n.getUTCDay()||7;n.setUTCDate(n.getUTCDate()+4-r);const i=new Date(Date.UTC(n.getUTCFullYear(),0,1)),a=Math.ceil(((+n-+i)/864e5+1)/7),o=n.getUTCFullYear(),c=a.toString().padStart(2,"0");return`${o}-W${c}`}function d5(t){const e=new Date(t*1e3),n=new Date(e),r=(n.getDay()+6)%7;n.setHours(0,0,0,0),n.setDate(n.getDate()-r);const i=Math.floor(n.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function u5(t){const e=new Date(t*1e3),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${n}-${r}`}function h5(t){const e=new Date(t*1e3),n=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(n.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function j6(t){const e=[",",";","	","|"];let n=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(n=i,r=a)}return n}const m4e="sf_debug_guild_csv_parse",p4e=()=>typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(m4e)==="1",Yf=(t,e=260)=>t.length<=e?t:`${t.slice(0,Math.max(0,e-3))}...`,g4e=t=>{const e={},n=[",",";","	","|"];for(const r of n){let i=0;for(let a=0;a<t.length;a++)t[a]===r&&i++;e[r==="	"?"\\t":r]=i}return e},f4e=(t,e,n)=>{var D,V,z,K,W,U,J,re,G,X,Y,se;if(!p4e())return;const i=(D=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`)[0])!=null?D:"",a=i.replace(/^\uFEFF/,""),o=i.startsWith("\uFEFF"),c=i.includes(""),u=j6(a),h=g4e(a),m=e.headers.map(cd),g={};e.headers.forEach((ce,_e)=>{var le;const Ae=cd(ce);if(!Ae)return;const ee=(le=g[Ae])!=null?le:[];ee.push(_e),g[Ae]=ee});const v=e.headers.find(ce=>cd(ce)===cd("Guild Identifier")),b=v?e.headers.indexOf(v):-1,_=g2(e.headers),k=b6(e.headers,_),I=k?e.headers.indexOf(k):-1,R=p2(e.headers),P=e.rows[0],N=P?Wi(P,R,zs.GUILDS.GUILD_IDENTIFIER):null,x=P?w6(P,R,e.headers,k,_):null,w=(V=x==null?void 0:x.rawValue)!=null?V:null,L=(z=x==null?void 0:x.parsedValue)!=null?z:null,j=(W=(K=e.meta)==null?void 0:K.headerCount)!=null?W:e.headers.length,S=(re=(J=(U=e.meta)==null?void 0:U.rowTokenCounts)==null?void 0:J[0])!=null?re:null,C=S!=null&&j>0?S<j:null,M=(X=(G=e.meta)==null?void 0:G.paddedRowCount)!=null?X:0,T=(se=(Y=e.meta)==null?void 0:Y.truncatedRowCount)!=null?se:0,F=[];i||F.push("missing header line"),e.headers.length||F.push("no headers parsed"),e.rows.length===0&&F.push("no data rows after parse"),v||F.push("missing guild identifier header"),k||F.push("missing guild member count header"),e.rows.length>0&&n.rows.length===0&&F.push(`all rows filtered (missingIdentifier=${n.stats.missingIdentifier}, badTimestamp=${n.stats.badTimestamp}, missingServer=${n.stats.missingServer})`),!F.length&&n.rows.length===0&&F.push("no parsed guild rows"),console.groupCollapsed("[GuildCsvParse] Debug"),console.log("headerLine",{length:i.length,hasBom:o,hasNbsp:c,delimiter:u,delimiterCounts:h,sample:Yf(i)}),console.log("headers",{raw:e.headers,normalized:m,headerIndexMap:g}),console.log("requiredHeaders",{guildIdentifier:v,guildIdentifierIndex:b,memberCount:k,memberCountIndex:I,memberCountCandidates:_}),console.log("rowAlignment",{headerCount:j,sampleRowTokenCount:S,sampleRowPadded:C,paddedRowCount:M,truncatedRowCount:T}),console.log("rows",{parsedRows:e.rows.length,guildRows:n.rows.length,stats:n.stats}),console.log("sample",{guildIdentifier:N==null?null:Yf(String(N)),memberCountRaw:w==null?null:Yf(String(w)),memberCount:L}),x&&console.log("memberCountResolution",{primaryHeader:k,primaryIndex:I,resolvedHeader:x.header,resolvedIndex:x.headerIndex,rawValueAtIndex:x.rawValue==null?null:Yf(String(x.rawValue)),parsedMemberCount:x.parsedValue,validationResult:x.validationResult,fallbackUsed:x.fallbackUsed,source:x.source}),F.length&&console.warn("[GuildCsvParse] Issues",F),console.groupEnd()};function _x(t){var v;const n=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!n.length)return{headers:[],rows:[],meta:{headerCount:0,rowTokenCounts:[],paddedRowCount:0,truncatedRowCount:0}};const r=j6((v=n[0])!=null?v:""),i=b=>{const _=[];let k="",I=!1;for(let R=0;R<b.length;R++){const P=b[R];P==='"'?I&&b[R+1]==='"'?(k+='"',R++):I=!I:P===r&&!I?(_.push(k),k=""):k+=P}return _.push(k),_},o=(n[0]?i(n[0]).map(Ki):[]).map((b,_)=>b||`col${_}`),c=o.length,u=[],h=[];let m=0,g=0;for(let b=1;b<n.length;b++){if(!n[b])continue;const _=i(n[b]);if(_.every(R=>Ki(R)===""))continue;const k=_.length;k<c?(_.push(...Array(c-k).fill("")),m++):k>c&&g++,h.push(k);const I={};for(let R=0;R<c;R++)I[o[R]]=_[R]!=null?Ki(_[R]):"";u.push(I)}return{headers:o,rows:u,meta:{headerCount:c,rowTokenCounts:h,paddedRowCount:m,truncatedRowCount:g}}}function v4e(t){const e={};for(let n=0;n<t.length;n++){const r=fs(t[n]);x6.includes(r)&&e.levelIndex==null&&(e.levelIndex=n),y6.includes(r)&&e.classIndex==null&&(e.classIndex=n)}if(e.levelIndex==null){const n=t.findIndex(r=>r.trim()==="Level");n>=0&&(e.levelIndex=n)}if(e.classIndex==null){const n=t.findIndex(r=>r.trim()==="Class");n>=0&&(e.classIndex=n)}return e}function S6(t,e){const n=e&&e.length?e:Vu(t),r=p2(n),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[],o=v4e(n);for(const c of t){const u=Wi(c,r,zs.PLAYERS.IDENTIFIER),h=Ki(u);if(!h){i.missingIdentifier++;continue}const m=Wi(c,r,zs.PLAYERS.PID),g=Ki(m||h4e(h));if(!g){i.missingIdentifier++;continue}const v=bx(Wi(c,r,zs.PLAYERS.TIMESTAMP));if(v==null){i.badTimestamp++;continue}const b=_6(h),_=Wi(c,r,zs.PLAYERS.SERVER),k=_&&Ki(_)!==""?g6(_):void 0,I=b!=null?b:h?void 0:k;if(!I){i.missingServer++;continue}const R=Wi(c,r,zs.PLAYERS.NAME),P=R!=null&&Ki(R)!==""?String(R):null,N=Wi(c,r,zs.PLAYERS.GUILD_IDENTIFIER),x=N!=null&&Ki(N)!==""?String(N):null,w=Wi(c,r,zs.PLAYERS.GUILD),L=w!=null&&Ki(w)!==""?String(w):null,j=o.levelIndex!=null?o5(c[n[o.levelIndex]]):o5(V_(c,r,x6)),S=o.classIndex!=null?l5(c[n[o.classIndex]]):l5(V_(c,r,y6));a.push({playerId:g,identifier:h,server:I,name:P,timestampSec:v,guildIdentifier:x,guildName:L,level:j,classId:S.classId,className:S.className,raw:c})}return{rows:a,stats:i,headers:n}}function N6(t,e){const n=e&&e.length?e:Vu(t),r=p2(n),i=g2(n),a=b6(n,i),o={missingIdentifier:0,badTimestamp:0,missingServer:0},c=[];for(const u of t){const h=Wi(u,r,zs.GUILDS.GUILD_IDENTIFIER),m=Ki(h);if(!m){o.missingIdentifier++;continue}const g=bx(Wi(u,r,zs.GUILDS.TIMESTAMP));if(g==null){o.badTimestamp++;continue}const v=Wi(u,r,zs.GUILDS.SERVER),b=v&&Ki(v)!==""?g6(v):void 0;if(!b){o.missingServer++;continue}const _=Wi(u,r,zs.GUILDS.NAME),k=_!=null&&Ki(_)!==""?String(_):null,I=w6(u,r,n,a,i),R=I.isValid?I.parsedValue:null,P=f6(V_(u,r,[zs.GUILDS.HOF,zs.GUILDS.HOF_ALT,zs.GUILDS.RANK,zs.GUILDS.GUILD_RANK]));c.push({guildIdentifier:m,server:b,name:k,timestampSec:g,memberCount:R,hofRank:P,raw:u})}return{rows:c,stats:o,headers:n}}function x4e(t){const e=_x(t);return S6(e.rows,e.headers).rows}function y4e(t){const e=_x(t),n=N6(e.rows,e.headers);return f4e(t,e,n),n.rows}const b4e="stats_cache_player_derived",_4e="stats_cache_guild_derived",k6=40,m5=120,E1=500,A1=500,Fs=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},Go=t=>{if(t==null)return 0;const e=String(t).replace(/[^0-9]/g,"");if(!e)return 0;const n=Number(e);return Number.isFinite(n)?n:0},Ho=(t,e)=>{if(!(!t||typeof t!="object")){for(const n of e)if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}},Wo={honor:["Guild Honor"],hydra:["Guild Hydra"],instructor:["Guild Instructor"],knights:["Guild Knights"],knights15Plus:["Guild Knights 15+"],memberCount:["Guild Member Count"],portalFloor:["Guild Portal Floor"],raids:["Guild Raids"],treasury:["Guild Treasure","Guild Treasury"]},w4e=t=>({honor:Go(Ho(t,Wo.honor)),hydra:Go(Ho(t,Wo.hydra)),instructor:Go(Ho(t,Wo.instructor)),knights:Go(Ho(t,Wo.knights)),knights15Plus:Go(Ho(t,Wo.knights15Plus)),memberCount:Go(Ho(t,Wo.memberCount)),portalFloor:Go(Ho(t,Wo.portalFloor)),raids:Go(Ho(t,Wo.raids)),treasury:Go(Ho(t,Wo.treasury))}),C6=t=>`snapshot_${t}_player_derived`,f2=t=>`snapshot_${t}_guild_derived`,T6=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase(),r=n.match(/^eu(\d+)$/);if(r)return`EU${r[1]}`;const i=n.match(/^f(\d+)$/);return i?`F${i[1]}`:bv(e)},j4e=t=>{var r;if(!t)return null;if(/^[a-z][a-z0-9+.-]*:\/\//i.test(t))try{const i=new URL(t).hostname;if(i)return i.toLowerCase()}catch(i){}let e=t.replace(/^[a-z]+:\/\//i,"");if(e=(r=e.split(/[/?#]/)[0])!=null?r:"",e=e.replace(/\s+/g,"").trim(),!e)return null;let n=e.toLowerCase().replace(/:\d+$/,"");return n=n.replace(/^\.+|\.+$/g,""),n||null},ep=t=>{var o;const e=String(t!=null?t:"").replace(/\u00a0/g," ").trim();if(!e)return{input:e,normalizedInput:e,hostname:null,subdomain:null,canonicalCode:null};const n=(()=>{var u;let c=e.toLowerCase();return c.includes("_")&&c.endsWith("_net")&&(c=(u=c.split("_")[0])!=null?u:c),c})().trim(),r=j4e(n),i=r&&(o=r.split(".")[0])!=null?o:"",a=i?T6(i):null;return{input:e,normalizedInput:n,hostname:r,subdomain:i||null,canonicalCode:a}},_v=t=>{var i;const e=ep(t),n=(i=e.canonicalCode)!=null?i:e.subdomain?T6(e.subdomain):null,r=e.hostname&&e.hostname.includes(".")?e.hostname:null;return n&&r?{code:n,host:r}:n?{code:n}:r?{host:r}:{}},wv=(t,e)=>{var r,i;const n=_v(e);if(n.code){const a=(i=(r=t.get(n.code))!=null?r:t.get(n.code.toLowerCase()))!=null?i:t.get(n.code.toUpperCase());if(a)return a}if(n.host){const a=t.get(n.host);if(a)return a}return null},S4e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};async function jv(t){var i,a;const e=new Map,n=new Set,r=[];for(const o of t){const c=_v(o);c.code&&n.add(c.code),c.host&&r.push({host:c.host,code:(i=c.code)!=null?i:null})}if(r.length===0&&n.size===0)return e;try{const o=pl(Tt,"servers");for(const v of n){const b=ps(Tt,"servers",v),_=await An(null,b,()=>pn(b),{label:"ImportCsv:serversHostMap"});if(_.exists()){const k=_.data(),I=(a=_v(k==null?void 0:k.host).host)!=null?a:null;I&&e.set(I,_.id),e.set(v.toLowerCase(),_.id),e.set(v.toUpperCase(),_.id)}}const c=new Set,u=v=>v?e.has(v)||e.has(v.toLowerCase())||e.has(v.toUpperCase()):!1;for(const v of r)v.host&&(u(v.code)||c.add(v.host));const h=S4e(Array.from(c),10);for(const v of h){const b=En(o,Kr("host","in",v));(await wn(null,{path:o.path},()=>_n(b),{label:"ImportCsv:serversHostMap"})).forEach(k=>{var P;const I=k.data(),R=(P=_v(I==null?void 0:I.host).host)!=null?P:null;R&&e.set(R,k.id),e.set(k.id.toLowerCase(),k.id),e.set(k.id.toUpperCase(),k.id)})}const m=Array.from(c).filter(v=>!e.has(v));m.length&&console.warn("[ImportCsv] Server hosts not mapped",{hosts:m});const g=Array.from(n).filter(v=>!e.has(v.toLowerCase()));g.length&&console.warn("[ImportCsv] Server codes not mapped",{codes:g})}catch(o){console.warn("[ImportCsv] Failed to load server host map",{error:o})}return e}async function Sv(t,e,n,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:n});for(let i=0;i<t.length;i+=e){const a=JG(Tt),o=t.slice(i,i+e);for(const c of o)c.apply(a);r==null||r({phase:"write",current:Math.min(i+o.length,t.length),total:t.length,pass:n}),await gH(()=>a.commit(),{label:`ImportCsv:${n}`,path:`batch:${n}`}),o.forEach(c=>{var u,h;_h({path:c.path,op:(u=c.op)!=null?u:"setDoc",docCount:1,label:(h=c.label)!=null?h:`ImportCsv:${n}`})}),await new Promise(c=>setTimeout(c,12))}r==null||r({phase:"done",current:1,total:1,pass:n})}async function p5(t,e,n){var m,g,v;const r=[];if(!t.length)return r;let i=0,a=0,o=0,c=0;const u=b=>{e==null||e({phase:b,current:b==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:o,error:c,kind:n})};u("prepare");const h=Tt.bulkWriter;if(typeof h=="function"){const b=h.call(Tt,{throttling:!0}),_=()=>{i++,u("write")};for(const{ref:k,data:I,key:R}of t)b.create(k,I).then(()=>{a++,_h({path:k.path,op:"setDoc",docCount:1,label:"ImportCsv:scansBulk"}),r.push({key:R,status:"created"}),_()}).catch(P=>{var x,w;const N=String((x=P==null?void 0:P.code)!=null?x:"").toLowerCase();N.includes("already")&&N.includes("exist")?(o++,r.push({key:R,status:"duplicate"})):(c++,r.push({key:R,status:"error",message:String((w=P==null?void 0:P.message)!=null?w:P)})),_()});try{await b.close()}catch(k){console.warn("[ImportCsv] bulkWriter close with errors",{error:k})}return u("done"),r}for(const{ref:b,data:_,key:k}of t){try{await ij(b,()=>gl(b,_),{label:"ImportCsv:scansFallback"}),a++,r.push({key:k,status:"created"})}catch(I){const R=String((m=I==null?void 0:I.code)!=null?m:"").toLowerCase();R.includes("permission")||R.includes("already")?(o++,r.push({key:k,status:"duplicate",message:String((g=I==null?void 0:I.message)!=null?g:I)})):(c++,r.push({key:k,status:"error",message:String((v=I==null?void 0:I.message)!=null?v:I)}))}i++,u("write")}return u("done"),r}async function N4e(t,e){if(!t.length)return;const n=t.length,r=Tt.bulkWriter;if(typeof r=="function"){const a=r.call(Tt,{throttling:!0});e==null||e({phase:"prepare",current:0,total:n,pass:"latest"});for(const{ref:o,data:c}of t)a.set(o,c,{merge:!0});e==null||e({phase:"write",current:n,total:n,pass:"latest"}),await a.close(),t.forEach(({ref:o})=>_h({path:o.path,op:"setDoc",docCount:1,label:"ImportCsv:latestBulk"})),e==null||e({phase:"done",current:1,total:1,pass:"latest"});return}const i=t.map(({ref:a,data:o})=>({path:a.path,op:"setDoc",label:"ImportCsv:latest",apply:c=>c.set(a,o,{merge:!0})}));await Sv(i,k6,"latest",e)}async function k4e(t,e){var a,o,c,u;if(!e.length)return{skipped:[],skippedMissingTs:0,applied:0,wrote:!1};const n=String(t||"all").trim()||"all",r=ps(Tt,`${b4e}/${C6(n)}`),i=await P4(()=>_4(Tt,async h=>{var L,j,S,C,M,T,F;const m=await An(null,r,()=>h.get(r),{label:"ImportCsv:derivedSnapshot"}),g=m.exists()?(L=m.data())==null?void 0:L.players:null,v=new Map;if(Array.isArray(g))for(const D of g){if(!D||typeof D!="object")continue;const V=String((j=D.playerId)!=null?j:"");V&&v.set(V,D)}const b=()=>{var z;let D=null,V=Number.POSITIVE_INFINITY;for(const[K,W]of v.entries()){const U=(z=Fs(W.sum))!=null?z:0;U<V&&(V=U,D=K)}return{minId:D,minSum:V}},_=[];let k=0;const I=new Set;for(const D of e){const V=String((S=D.playerId)!=null?S:"");if(!V)continue;const z=yx(D),K=z.sec;if(K==null){k+=1;continue}const W=v.get(V),U=W?yx(W):{sec:null,field:null};if(W&&K!=null&&U.sec!=null&&K<U.sec){_.push({playerId:V,server:n,incoming:K,stored:U.sec});continue}const J=p6(D,K,(C=U.field)!=null?C:z.field);if(W){v.set(V,J),I.add(V);continue}if(v.size<E1){v.set(V,J),I.add(V);continue}const re=(M=Fs(J.sum))!=null?M:0,{minId:G,minSum:X}=b();G&&re>X&&(v.delete(G),v.set(V,J),I.add(V))}if(I.size===0)return{skipped:_,skippedMissingTs:k,applied:0,wrote:!1};const R=Array.from(v.values());R.sort((D,V)=>{var K,W,U,J;const z=((K=Fs(V.sum))!=null?K:0)-((W=Fs(D.sum))!=null?W:0);return z!==0?z:String((U=D.playerId)!=null?U:"").localeCompare(String((J=V.playerId)!=null?J:""))}),R.length>E1&&(R.length=E1);const P=m.exists()?(T=m.data())==null?void 0:T.meta:null,N=Number((F=P==null?void 0:P.pendingSincePublish)!=null?F:0),x=(Number.isFinite(N)?N:0)+I.size,w={...P&&typeof P=="object"?P:{},pendingSincePublish:x};return h.set(r,{server:n,updatedAt:Hi(),players:R,meta:w},{merge:!0}),{skipped:_,skippedMissingTs:k,applied:I.size,wrote:!0}}),{label:"ImportCsv:derivedSnapshot",path:r.path});if((a=i==null?void 0:i.skipped)!=null&&a.length)for(const h of i.skipped)console.info("[ImportCsv] skip derived update: older scan",{...h,path:r.path,function:"upsertPlayerDerivedServerSnapshot"});return{skipped:(o=i==null?void 0:i.skipped)!=null?o:[],skippedMissingTs:(c=i==null?void 0:i.skippedMissingTs)!=null?c:0,applied:(u=i==null?void 0:i.applied)!=null?u:0,wrote:!!(i!=null&&i.wrote)}}async function I6(t,e){var a,o,c,u;if(!e.length)return{skipped:[],skippedMissingTs:0,applied:0,wrote:!1};const n=String(t||"all").trim()||"all",r=ps(Tt,`${_4e}/${f2(n)}`),i=await P4(()=>_4(Tt,async h=>{var j,S,C,M,T,F;const m=await An(null,r,()=>h.get(r),{label:"ImportCsv:guildDerivedSnapshot"}),g=m.exists()?(j=m.data())==null?void 0:j.guilds:null,v=new Map;if(Array.isArray(g))for(const D of g){if(!D||typeof D!="object")continue;const V=String((S=D.guildId)!=null?S:"");V&&v.set(V,D)}const b=D=>{var V,z,K;return(K=Fs((z=(V=D.sumAvg)!=null?V:D.avgSumBaseTotal)!=null?z:D.sum))!=null?K:0},_=()=>{let D=null,V=Number.POSITIVE_INFINITY;for(const[z,K]of v.entries()){const W=b(K);W<V&&(V=W,D=z)}return{minId:D,minSum:V}},k=[];let I=0;const R=new Set;for(const D of e){const V=String((C=D.guildId)!=null?C:"");if(!V)continue;const z=yx(D),K=z.sec;if(K==null){I+=1;continue}const W=v.get(V),U=W?yx(W):{sec:null,field:null};if(W&&K!=null&&U.sec!=null&&K<U.sec){k.push({guildId:V,server:n,incoming:K,stored:U.sec});continue}const J=p6(D,K,(M=U.field)!=null?M:z.field);if(W){v.set(V,J),R.add(V);continue}if(v.size<A1){v.set(V,J),R.add(V);continue}const re=b(J),{minId:G,minSum:X}=_();G&&re>X&&(v.delete(G),v.set(V,J),R.add(V))}if(R.size===0)return{skipped:k,skippedMissingTs:I,applied:0,wrote:!1};const P=Array.from(v.values()).map(D=>{var V;return D.sumAvg==null?{...D,sumAvg:Fs((V=D.avgSumBaseTotal)!=null?V:D.sum)}:D});P.sort((D,V)=>{var K,W;const z=b(V)-b(D);return z!==0?z:String((K=D.guildId)!=null?K:"").localeCompare(String((W=V.guildId)!=null?W:""))}),P.length>A1&&(P.length=A1);const N=m.exists()?(T=m.data())==null?void 0:T.meta:null,x=Number((F=N==null?void 0:N.pendingSincePublish)!=null?F:0),w=(Number.isFinite(x)?x:0)+R.size,L={...N&&typeof N=="object"?N:{},pendingSincePublish:w};return h.set(r,{server:n,updatedAt:Hi(),guilds:P,meta:L},{merge:!0}),{skipped:k,skippedMissingTs:I,applied:R.size,wrote:!0}}),{label:"ImportCsv:guildDerivedSnapshot",path:r.path});if((a=i==null?void 0:i.skipped)!=null&&a.length)for(const h of i.skipped)console.info("[ImportCsv] skip derived update: older scan",{...h,path:r.path,function:"upsertGuildDerivedServerSnapshot"});return{skipped:(o=i==null?void 0:i.skipped)!=null?o:[],skippedMissingTs:(c=i==null?void 0:i.skippedMissingTs)!=null?c:0,applied:(u=i==null?void 0:i.applied)!=null?u:0,wrote:!!(i!=null&&i.wrote)}}async function C4e(t,e){var o,c,u,h,m,g,v,b,_,k,I;if(!t.size)return;const n=new Map;for(const[R,P]of t.entries()){const N=ep(P.server),x=(o=N.canonicalCode)!=null?o:null,w=wv(e,x!=null?x:P.server);if(!w){P.server&&console.warn("[ImportCsv] Guild derived snapshot skipped (server host not mapped)",{guildId:R,server:P.server,input:N.input,normalizedInput:N.normalizedInput,serverCode:x,hostname:N.hostname,subdomain:N.subdomain,canonicalCode:N.canonicalCode});continue}const L={guildId:String(R),server:w,name:String((c=P.name)!=null?c:R),memberCount:(u=Fs(P.memberCount))!=null?u:0,hofRank:Fs(P.hofRank),honor:(h=Fs(P.honor))!=null?h:0,hydra:(m=Fs(P.hydra))!=null?m:0,instructor:(g=Fs(P.instructor))!=null?g:0,knights:(v=Fs(P.knights))!=null?v:0,knights15Plus:(b=Fs(P.knights15Plus))!=null?b:0,portalFloor:(_=Fs(P.portalFloor))!=null?_:0,raids:(k=Fs(P.raids))!=null?k:0,treasury:(I=Fs(P.treasury))!=null?I:0,lastScan:P.lastScan?String(P.lastScan):null,latestScanAtSec:Fs(P.timestampSec),sum:null,sumAvg:Fs(P.avgSumBaseTotal),count:Fs(P.count),avgLevel:Fs(P.avgLevel),avgTreasury:Fs(P.avgTreasury),avgMine:Fs(P.avgMine),avgBaseMain:Fs(P.avgBaseMain),avgConBase:Fs(P.avgConBase),avgSumBaseTotal:Fs(P.avgSumBaseTotal),avgAttrTotal:Fs(P.avgAttrTotal),avgConTotal:Fs(P.avgConTotal),avgTotalStats:Fs(P.avgTotalStats)};n.has(w)||n.set(w,[]),n.get(w).push(L)}const r=Array.from(n.keys()),i=Array.from(n.values()).reduce((R,P)=>R+P.length,0);r.length&&console.log("[ImportCsv] Guild derived snapshot flush pending",{count:r.length,servers:r,entries:i});const a=[];for(const[R,P]of n.entries())try{await I6(R,P),a.push(f2(R))}catch(N){console.warn("[ImportCsv] Guild derived snapshot upsert failed",{serverKey:R,error:N})}r.length&&console.log("[ImportCsv] Guild derived snapshot flush done",{count:a.length,docs:a})}function g5(t,e){const n={};for(const r of e){const i=fs(r);if(o4e(i)){let a=null,o;for(const c of t){const u=c.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,o=u)}n[r]=o!=null?o:""}else{let a="";for(let o=t.length-1;o>=0;o--){const c=t[o].row[r];if(c!=null&&String(c)!==""){a=c;break}}n[r]=a}}return n}async function f5(t,e){var h;const n=t.path,r=e==null?void 0:e.get(n);if(r)return r.prevSec;const i=await An(null,t,()=>pn(t),{label:"ImportCsv:latestPrev"});if(!i.exists())return e==null||e.set(n,{prevSec:0,exists:!1}),0;const a=i.data();let o=null;if(((h=a==null?void 0:a.values)==null?void 0:h.Timestamp)!=null){const m=bx(a.values.Timestamp);m!=null&&(o=m)}if(o==null&&(a==null?void 0:a.timestampRaw)!=null){const m=bx(a.timestampRaw);m!=null&&(o=m)}o==null&&typeof(a==null?void 0:a.ts)=="number"&&(o=a.ts);const c=a==null?void 0:a.timestamp;if(o==null&&typeof c=="number"&&(o=c>9999999999?Math.floor(c/1e3):c),o==null&&typeof c=="string"){const m=Date.parse(c);Number.isFinite(m)&&(o=Math.floor(m/1e3))}const u=o!=null?o:0;return e==null||e.set(n,{prevSec:u,exists:!0}),u}async function v5(t,e){var g,v,b,_,k,I,R,P,N,x,w,L,j,S,C;const n=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},o=[],c=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');const u=e.onProgress?(M=>{var T;return(T=e.onProgress)==null?void 0:T.call(e,{...M,kind:e.kind})}):void 0,h=new Map;if(e.kind==="players"){const M=[],T=[],F=[],D=new Map;let V=[],z=[];if(e.rows&&Array.isArray(e.rows))V=e.rows,z=Vu(V);else if(e.raw&&typeof e.raw=="string"){const le=_x(e.raw);V=le.rows,z=le.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:K,stats:W,headers:U}=S6(V,z);a.skippedMissingIdentifier+=W.missingIdentifier,a.skippedBadTs+=W.badTimestamp,a.skippedMissingServer+=W.missingServer;const J=U.length?U:Vu(V),re=new Map;for(const le of K){const te=`${le.playerId}__${le.server}__${le.timestampSec}`;M.push({key:te,ref:ps(Tt,`players/${le.identifier}/scans/${le.timestampSec}`),data:{playerId:le.playerId,server:le.server,timestamp:le.timestampSec,timestampRaw:ya(le.raw,zs.PLAYERS.TIMESTAMP),name:le.name,values:le.raw,createdAt:Hi()}}),re.has(le.identifier)||re.set(le.identifier,[]),re.get(le.identifier).push({row:le.raw,ts:le.timestampSec,parsed:le})}const G=await p5(M,u,"players");o.push(...G),a.writtenScanPlayers=G.filter(le=>le.status==="created").length;let X=e.serverHostMap?new Map(e.serverHostMap):new Map;if(!e.serverHostMap)X=await jv(K.map(le=>le.server));else if(K.length>0&&K.some(te=>!wv(X,te.server))){const te=await jv(K.map(ye=>ye.server));for(const[ye,ke]of te.entries())X.has(ye)||X.set(ye,ke)}!X.size&&K.length>0&&console.warn("[ImportCsv] Server host map empty; derived snapshots will be skipped.");for(const[le,te]of re){te.sort((ot,nt)=>ot.ts-nt.ts);const ye=te[te.length-1],ke=ye.parsed,Me=ke.playerId,Re=ke.server,Ee=ke.name,Le=(g=ke.level)!=null?g:null,Fe=(v=ke.className)!=null?v:null,Be=(b=ke.guildName)!=null?b:null,je=ke.guildIdentifier,ue=Ee!=null?Ee:"",Pe=r5(ue),De=i5(Pe),it=ps(Tt,`players/${le}/latest/latest`),yt=await f5(it,h),ie=ye.ts>yt,he=ie?Hi():null;ie&&(T.push({ref:it,data:{playerId:Me,server:Re,timestamp:ye.ts,timestampRaw:ya(ye.row,zs.PLAYERS.TIMESTAMP),name:Ee,values:ye.row,updatedAt:he,nameFold:yv(ue),nameTokens:Pe,nameNgrams:De,level:Le,className:Fe,guildName:Be,guildNameFold:Be?yv(Be):null}}),a.writtenLatestPlayers++);const ve=ep(Re),Te=(_=ve.canonicalCode)!=null?_:null,St={playerId:Me,name:Ee,className:Fe,level:Le,server:Te!=null?Te:Re,guildIdentifier:je||void 0,guildName:Be||void 0,values:ye.row,timestamp:ye.ts,updatedAt:he!=null?he:void 0},at=qAe(St,Hi),rt=X.size>0?wv(X,Te!=null?Te:Re):null;if(!rt&&X.size>0&&console.warn("[ImportCsv] Derived snapshot skipped (server host not mapped)",{playerId:Me,server:Re,input:ve.input,normalizedInput:ve.normalizedInput,serverCode:Te,hostname:ve.hostname,subdomain:ve.subdomain,canonicalCode:ve.canonicalCode}),rt){const ot=ya(ye.row,zs.PLAYERS.TIMESTAMP),nt=XAe({playerId:Me,server:rt,name:Ee,className:Fe,guildName:Be,level:Le,lastScanRaw:ot,timestampSec:ye.ts,derived:at});D.has(rt)||D.set(rt,[]),D.get(rt).push(nt)}const ut=new Map,_t=new Map;for(const ot of te){const nt=c5(ot.ts),ts=u5(ot.ts);ut.has(nt)||ut.set(nt,[]),_t.has(ts)||_t.set(ts,[]),ut.get(nt).push(ot),_t.get(ts).push(ot)}for(const[ot,nt]of ut){nt.sort((Ve,ct)=>Ve.ts-ct.ts);const ts=g5(nt,J),pt=d5(nt[nt.length-1].ts),ne=nt[nt.length-1],Oe=ps(Tt,`players/${le}/history_weekly/${ot}`);F.push({path:Oe.path,op:"setDoc",label:"ImportCsv:historyWeekly",apply:Ve=>{Ve.set(Oe,{playerId:Me,weekId:ot,periodStartSec:pt.start,periodEndSec:pt.end,lastTs:ne.ts,lastTimestampRaw:ya(ne.row,zs.PLAYERS.TIMESTAMP),server:ne.parsed.server,name:ne.parsed.name,values:ts,updatedAt:Hi()},{merge:!0})}}),a.writtenWeeklyPlayers++}for(const[ot,nt]of _t){nt.sort((Ve,ct)=>Ve.ts-ct.ts);const ts=g5(nt,J),pt=h5(nt[nt.length-1].ts),ne=nt[nt.length-1],Oe=ps(Tt,`players/${le}/history_monthly/${ot}`);F.push({path:Oe.path,op:"setDoc",label:"ImportCsv:historyMonthly",apply:Ve=>{Ve.set(Oe,{playerId:Me,monthId:ot,periodStartSec:pt.start,periodEndSec:pt.end,lastTs:ne.ts,lastTimestampRaw:ya(ne.row,zs.PLAYERS.TIMESTAMP),server:ne.parsed.server,name:ne.parsed.name,values:ts,updatedAt:Hi()},{merge:!0})}}),a.writtenMonthlyPlayers++}}await N4e(T,u);const Y=Array.from(D.keys()),se=Array.from(D.values()).reduce((le,te)=>le+te.length,0);let ce=0,_e=0,Ae=0;Y.length&&console.log("[ImportCsv] Derived snapshot flush pending",{count:Y.length,servers:Y,entries:se});const ee=[];for(const[le,te]of D.entries())try{const ye=await k4e(le,te);ce+=ye.applied,_e+=ye.skipped.length,Ae+=ye.skippedMissingTs,ye.wrote&&ee.push(C6(le))}catch(ye){console.warn("[ImportCsv] Derived snapshot upsert failed",{serverKey:le,error:ye})}Y.length&&(ce===0?console.log("[ImportCsv] Derived snapshot flush skipped (no applied writes)",{servers:Y,skippedOlder:_e,missingTimestamp:Ae}):console.log("[ImportCsv] Derived snapshot flush done",{count:ee.length,docs:ee,appliedWrites:ce,skippedOlder:_e,missingTimestamp:Ae})),await Sv(F,m5,"history",u)}if(e.kind==="guilds"){const M=[],T=[],F=[],D=!e.skipGuildDerived,V=new Map;let z=[],K=[];if(e.rows&&Array.isArray(e.rows))z=e.rows,K=Vu(z);else if(e.raw&&typeof e.raw=="string"){const Y=_x(e.raw);z=Y.rows,K=Y.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:W,stats:U,headers:J}=N6(z,K);a.skippedMissingGuildIdentifier+=U.missingIdentifier,a.skippedBadTsGuild+=U.badTimestamp,a.skippedMissingServer+=U.missingServer,J.length||Vu(z);const re=new Map;for(const Y of W){const se=`${Y.guildIdentifier}__${Y.server}__${Y.timestampSec}`;M.push({key:se,ref:ps(Tt,`guilds/${Y.guildIdentifier}/scans/${Y.timestampSec}`),data:{guildIdentifier:Y.guildIdentifier,server:Y.server,timestamp:Y.timestampSec,timestampRaw:ya(Y.raw,zs.GUILDS.TIMESTAMP),name:Y.name,values:Y.raw,createdAt:Hi()}}),re.has(Y.guildIdentifier)||re.set(Y.guildIdentifier,[]),re.get(Y.guildIdentifier).push({row:Y.raw,ts:Y.timestampSec,parsed:Y})}const G=await p5(M,u,"guilds");c.push(...G),a.writtenScanGuilds=G.filter(Y=>Y.status==="created").length;const X=D?(k=e.serverHostMap)!=null?k:await jv(W.map(Y=>Y.server)):new Map;D&&!X.size&&W.length>0&&console.warn("[ImportCsv] Server host map empty; guild derived snapshots will be skipped.");for(const[Y,se]of re){se.sort((Fe,Be)=>Fe.ts-Be.ts);const ce=se[se.length-1],_e=ce.parsed,Ae=(I=_e.name)!=null?I:"",ee=r5(Ae),le=i5(ee),te=(R=_e.memberCount)!=null?R:null,ye=(P=_e.hofRank)!=null?P:null,ke=ps(Tt,`guilds/${Y}/latest/latest`),Me=await f5(ke,h);if(ce.ts>Me&&(T.push({path:ke.path,op:"setDoc",label:"ImportCsv:guildLatest",apply:Fe=>{Fe.set(ke,{guildIdentifier:Y,server:_e.server,timestamp:ce.ts,timestampRaw:ya(ce.row,zs.GUILDS.TIMESTAMP),name:_e.name,values:ce.row,updatedAt:Hi(),nameFold:yv(Ae),nameTokens:ee,nameNgrams:le,memberCount:te,hofRank:ye},{merge:!0})}}),a.writtenLatestGuilds++),D){const Fe=X.size>0?wv(X,(N=ep(_e.server).canonicalCode)!=null?N:_e.server):null;if(!Fe&&X.size>0){const Be=ep(_e.server);console.warn("[ImportCsv] Guild derived snapshot skipped (server host not mapped)",{guildId:Y,server:_e.server,input:Be.input,normalizedInput:Be.normalizedInput,serverCode:(x=Be.canonicalCode)!=null?x:null,hostname:Be.hostname,subdomain:Be.subdomain,canonicalCode:Be.canonicalCode})}if(Fe){const Be=ya(ce.row,zs.GUILDS.TIMESTAMP),ue=((Be!=null?String(Be).trim():"")||String((w=ce.ts)!=null?w:"")).trim(),Pe=m6((L=ce.row)!=null?L:{}),De=w4e((j=ce.row)!=null?j:null),it=De.memberCount>0?De.memberCount:(S=Fs(te))!=null?S:0,yt={guildId:String(Y),server:Fe,name:String((C=_e.name)!=null?C:Y),memberCount:it,hofRank:Fs(ye),honor:De.honor,hydra:De.hydra,instructor:De.instructor,knights:De.knights,knights15Plus:De.knights15Plus,portalFloor:De.portalFloor,raids:De.raids,treasury:De.treasury,lastScan:ue||null,latestScanAtSec:ce.ts,sum:Fs(Pe.sum),sumAvg:Fs(Pe.sum)};V.has(Fe)||V.set(Fe,[]),V.get(Fe).push(yt)}}const Ee=new Map,Le=new Map;for(const Fe of se){const Be=c5(Fe.ts),je=u5(Fe.ts);Ee.has(Be)||Ee.set(Be,[]),Le.has(je)||Le.set(je,[]),Ee.get(Be).push(Fe),Le.get(je).push(Fe)}for(const[Fe,Be]of Ee){Be.sort((De,it)=>De.ts-it.ts);const je=d5(Be[Be.length-1].ts),ue=Be[Be.length-1],Pe=ps(Tt,`guilds/${Y}/history_weekly/${Fe}`);F.push({path:Pe.path,op:"setDoc",label:"ImportCsv:historyWeekly",apply:De=>{De.set(Pe,{guildIdentifier:Y,weekId:Fe,periodStartSec:je.start,periodEndSec:je.end,lastTs:ue.ts,lastTimestampRaw:ya(ue.row,zs.GUILDS.TIMESTAMP),server:ue.parsed.server,name:ue.parsed.name,values:ue.row,updatedAt:Hi()},{merge:!0})}}),a.writtenWeeklyGuilds++}for(const[Fe,Be]of Le){Be.sort((De,it)=>De.ts-it.ts);const je=h5(Be[Be.length-1].ts),ue=Be[Be.length-1],Pe=ps(Tt,`guilds/${Y}/history_monthly/${Fe}`);F.push({path:Pe.path,op:"setDoc",label:"ImportCsv:historyMonthly",apply:De=>{De.set(Pe,{guildIdentifier:Y,monthId:Fe,periodStartSec:je.start,periodEndSec:je.end,lastTs:ue.ts,lastTimestampRaw:ya(ue.row,zs.GUILDS.TIMESTAMP),server:ue.parsed.server,name:ue.parsed.name,values:ue.row,updatedAt:Hi()},{merge:!0})}}),a.writtenMonthlyGuilds++}}try{await Sv(T,k6,"latest",u)}catch(Y){if(a5(Y))console.warn("[ImportCsv] guild latest write skipped (duplicate/permission)",{error:Y});else throw Y}try{await Sv(F,m5,"history",u)}catch(Y){if(a5(Y))console.warn("[ImportCsv] guild history write skipped (duplicate/permission)",{error:Y});else throw Y}if(D){const Y=Array.from(V.keys()),se=Array.from(V.values()).reduce((le,te)=>le+te.length,0);Y.length&&console.log("[ImportCsv] Guild derived snapshot flush pending",{count:Y.length,servers:Y,entries:se});let ce=0,_e=0,Ae=0;const ee=[];for(const[le,te]of V.entries())try{const ye=await I6(le,te);ce+=ye.applied,_e+=ye.skipped.length,Ae+=ye.skippedMissingTs,ye.wrote&&ee.push(f2(le))}catch(ye){console.warn("[ImportCsv] Guild derived snapshot upsert failed",{serverKey:le,error:ye})}Y.length&&(ce===0?console.log("[ImportCsv] Guild derived snapshot flush skipped (no applied writes)",{servers:Y,skippedOlder:_e,missingTimestamp:Ae}):console.log("[ImportCsv] Guild derived snapshot flush done",{count:ee.length,docs:ee,appliedWrites:ce,skippedOlder:_e,missingTimestamp:Ae}))}}const m=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:m-n,playerResults:o,guildResults:c}}const Vt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),T4e=t=>String(t!=null?t:"").trim(),U_=t=>T4e(t).toUpperCase(),z_=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function Tn(t,e){for(const n of Object.keys(t))if(Vt(n)===e)return t[n]}function lo(t,e){for(const n of e){const r=Tn(t,n);if(r!=null&&String(r)!=="")return r}}function Xo(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function xd(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(n){const i=Number(n[1]),a=Number(n[2])-1,o=Number(n[3]),c=Number(n[4]),u=Number(n[5]),h=n[6]?Number(n[6]):0,m=new Date(o,a,i,c,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const Ko=t=>{if(t==null)return 0;const e=String(t).replace(/[^0-9]/g,"");if(!e)return 0;const n=Number(e);return Number.isFinite(n)?n:0},qo=(t,e)=>{if(!(!t||typeof t!="object")){for(const n of e)if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}},Qo={honor:["Guild Honor"],hydra:["Guild Hydra"],instructor:["Guild Instructor"],knights:["Guild Knights"],knights15Plus:["Guild Knights 15+"],memberCount:["Guild Member Count"],portalFloor:["Guild Portal Floor"],raids:["Guild Raids"],treasury:["Guild Treasure","Guild Treasury"]},I4e=t=>({honor:Ko(qo(t,Qo.honor)),hydra:Ko(qo(t,Qo.hydra)),instructor:Ko(qo(t,Qo.instructor)),knights:Ko(qo(t,Qo.knights)),knights15Plus:Ko(qo(t,Qo.knights15Plus)),memberCount:Ko(qo(t,Qo.memberCount)),portalFloor:Ko(qo(t,Qo.portalFloor)),raids:Ko(qo(t,Qo.raids)),treasury:Ko(qo(t,Qo.treasury))}),Wn={GUILD_IDENTIFIER:Vt("Guild Identifier"),SERVER:Vt("Server"),NAME:Vt("Name"),TIMESTAMP:Vt("Timestamp"),LEVEL:Vt("Level"),CLASS:Vt("Class"),GUILD:Vt("Guild"),GUILD_ROLE:[Vt("Role"),Vt("Guild Role")],TREASURY:[Vt("Treasury"),Vt("Fortress Treasury"),Vt("Treasury Level"),Vt("Festungsschatzkammer")],MINE:[Vt("Mine"),Vt("Gem Mine"),Vt("Mine Level"),Vt("Festungsmine")],BASE_MAIN:[Vt("Base"),Vt("Base Attribute"),Vt("BaseMain"),Vt("Basis Attribut")],CON_BASE:[Vt("Con Base"),Vt("Constitution Base"),Vt("Base Constitution"),Vt("Basis Konstitution"),Vt("conbase")],ATTR_TOT:[Vt("Attribute"),Vt("Attr Total"),Vt("Attribut"),Vt("Attribut Gesamt")],CON_TOT:[Vt("Constitution"),Vt("Constitution Total"),Vt("Konstitution"),Vt("Konstitution Gesamt")],LAST_ACTIVE:[Vt("Last Active"),Vt("LastActivity"),Vt("Letzte Aktivitt")],GUILD_JOINED:[Vt("Guild Joined"),Vt("Joined Guild"),Vt("Gildenbeitritt")]},Ei={GUILD_IDENTIFIER:Vt("Guild Identifier"),SERVER:Vt("Server"),NAME:Vt("Name"),TIMESTAMP:Vt("Timestamp"),MEMBER_COUNT:Vt("Guild Member Count"),HOF:Vt("Hall of Fame Rank"),HOF_ALT:Vt("Hall of Fame"),RANK:Vt("Rank"),GUILD_RANK:Vt("Guild Rank")};function x5(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function E4e(t){let e=5381;for(let n=0;n<t.length;n++)e=e*33^t.charCodeAt(n);return(e>>>0).toString(36)}function A4e(t){var n;const e=new Map;for(const r of t){const i=String((n=Tn(r,Ei.GUILD_IDENTIFIER))!=null?n:"").trim(),a=Tn(r,Ei.SERVER),o=Tn(r,Ei.NAME);if(!i||!a||!o)continue;const c=`${U_(a)}__${z_(String(o))}`;e.set(c,i)}return e}function P4e(t){var N,x;const e=Tn(t,Wn.TIMESTAMP),n=xd(e),r=lo(t,Wn.LAST_ACTIVE),i=xd(r),a=lo(t,Wn.GUILD_JOINED),o=xd(a),c=Xo(Tn(t,Wn.LEVEL)),u=(()=>{const w=Tn(t,Wn.CLASS);return w!=null&&String(w).trim()!==""?String(w):null})(),h=(()=>{const w=lo(t,Wn.GUILD_ROLE);return w!=null&&String(w).trim()!==""?String(w):null})(),m=Xo(lo(t,Wn.TREASURY)),g=Xo(lo(t,Wn.MINE)),v=Xo(lo(t,Wn.BASE_MAIN)),b=Xo(lo(t,Wn.CON_BASE)),_=Xo(lo(t,Wn.ATTR_TOT)),k=Xo(lo(t,Wn.CON_TOT)),I=v!=null&&b!=null?v+b:null,R=_!=null&&k!=null?_+k:null,P=(()=>{const w=Tn(t,Wn.NAME);return w!=null&&String(w).trim()!==""?String(w):null})();return{id:String((x=(N=t==null?void 0:t.ID)!=null?N:t==null?void 0:t.Identifier)!=null?x:""),name:P,class:u,role:h,level:c,treasury:m,mine:g,baseMain:v,conBase:b,sumBaseTotal:I,attrTotal:_,conTotal:k,totalStats:R,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:n!=null?n*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:o!=null?o*1e3:null}}function Yo(t,e){const n=t.map(r=>r[e]).filter(r=>typeof r=="number");return n.length?n.reduce((r,i)=>r+i,0)/n.length:null}const R4e=t=>{const e=t==null?void 0:t.code;if(!e)return!1;const n=String(e).toLowerCase();return n==="permission-denied"||n==="already-exists"||n==="failed-precondition"};async function L4e(t){var c,u,h;const e=ps(Tt,`guilds/${t}/latest/latest`),n=await An(null,e,()=>pn(e),{label:"ImportGuildSnapshots:latest"});if(!n.exists())return{sec:null,raw:null,values:null};const r=n.data()||{},i=(h=(u=r.timestampRaw)!=null?u:(c=r.values)==null?void 0:c.Timestamp)!=null?h:null,a=r.values&&typeof r.values=="object"?r.values:null;let o=null;return typeof r.timestamp=="number"?o=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(o=xd(i)),{sec:o,raw:i,values:a}}async function D4e(t){const e=ps(Tt,`guilds/${t}/snapshots/members_summary`),n=await An(null,e,()=>pn(e),{label:"ImportGuildSnapshots:prevSnapshot"});if(!n.exists())return 0;const r=n.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=xd(r.updatedAt);if(i!=null)return i}return 0}async function M4e(t,e){var h,m,g,v,b,_,k,I,R,P,N;const n=A4e(e||[]),r=new Map,i=new Map,a=new Map;for(const x of e||[]){const w=String((h=Tn(x,Ei.GUILD_IDENTIFIER))!=null?h:"").trim();if(!w)continue;const L=xd(Tn(x,Ei.TIMESTAMP));if(L==null)continue;a.set(`${w}__${L}`,x);const j=i.get(w);(!j||L>j.tsSec)&&i.set(w,{row:x,tsSec:L})}const o=new Set;for(const x of e||[]){const w=String((m=Tn(x,Ei.GUILD_IDENTIFIER))!=null?m:"").trim();w&&o.add(w)}for(const x of t||[]){const w=Tn(x,Wn.SERVER);let L=String((g=Tn(x,Wn.GUILD_IDENTIFIER))!=null?g:"").trim();if(!L){const j=(v=Tn(x,Wn.GUILD))!=null?v:x.Guild;if(j&&w){const S=`${U_(w)}__${z_(String(j))}`,C=n.get(S);C&&(L=C)}}L&&o.add(L)}let c=0,u=null;for(const x of o){const{sec:w,raw:L,values:j}=await L4e(x),S=I4e(j);if(w==null)continue;const C=await D4e(x),M=w>C,T=new Map;for(const Re of t||[]){const Ee=Tn(Re,Wn.SERVER);let Le=String((b=Tn(Re,Wn.GUILD_IDENTIFIER))!=null?b:"").trim();if(!Le){const je=(_=Tn(Re,Wn.GUILD))!=null?_:Re.Guild;if(je&&Ee){const ue=`${U_(Ee)}__${z_(String(je))}`,Pe=n.get(ue);Pe&&(Le=Pe)}}if(Le!==x)continue;const Fe=xd(Tn(Re,Wn.TIMESTAMP));if(Fe==null||Fe!==w)continue;const Be=String((I=(k=Re==null?void 0:Re.ID)!=null?k:Re==null?void 0:Re.Identifier)!=null?I:"").trim();Be&&(T.has(Be)||T.set(Be,Re))}const F=Array.from(T.values()),D=[];for(const Re of F)D.push(P4e(Re));D.sort((Re,Ee)=>{var Be,je;const Le=x5(Re.role),Fe=x5(Ee.role);return Le!==Fe?Le-Fe:((Be=Re.name)!=null?Be:"").toLowerCase().localeCompare(((je=Ee.name)!=null?je:"").toLowerCase())});const V=Yo(D,"level"),z=Yo(D,"treasury"),K=Yo(D,"mine"),W=Yo(D,"baseMain"),U=Yo(D,"conBase"),J=Yo(D,"sumBaseTotal"),re=Yo(D,"attrTotal"),G=Yo(D,"conTotal"),X=Yo(D,"totalStats"),Y=JSON.stringify({gid:x,tsSec:w,members:D.map(Re=>{var Ee,Le,Fe,Be,je,ue,Pe,De,it,yt,ie,he,ve;return{id:Re.id,name:(Ee=Re.name)!=null?Ee:"",class:(Le=Re.class)!=null?Le:"",role:(Fe=Re.role)!=null?Fe:"",level:(Be=Re.level)!=null?Be:null,treasury:(je=Re.treasury)!=null?je:null,mine:(ue=Re.mine)!=null?ue:null,baseMain:(Pe=Re.baseMain)!=null?Pe:null,conBase:(De=Re.conBase)!=null?De:null,sumBaseTotal:(it=Re.sumBaseTotal)!=null?it:null,attrTotal:(yt=Re.attrTotal)!=null?yt:null,conTotal:(ie=Re.conTotal)!=null?ie:null,totalStats:(he=Re.totalStats)!=null?he:null,guildJoinedMs:(ve=Re.guildJoinedMs)!=null?ve:null}})}),se=E4e(Y);if(M){const Re=ps(Tt,`guilds/${x}/snapshots/members_summary`);try{await ij(Re,()=>gl(Re,{guildId:x,count:D.length,updatedAt:L!=null?L:String(w),updatedAtMs:w*1e3,hash:se,avgLevel:V,avgTreasury:z,avgMine:K,avgBaseMain:W,avgConBase:U,avgSumBaseTotal:J,avgAttrTotal:re,avgConTotal:G,avgTotalStats:X,members:D,updatedAtServer:Hi()},{merge:!0}),{label:"ImportGuildSnapshots:summary"}),c++}catch(Ee){if(R4e(Ee)){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows duplicate/permission",{gid:x,error:Ee});continue}console.error("[ImportSelectionToDb] writeGuildSnapshotsFromRows fatal",{gid:x,error:Ee}),u=u||Ee;continue}}const ce=(N=(P=a.get(`${x}__${w}`))!=null?P:(R=i.get(x))==null?void 0:R.row)!=null?N:null,_e=ce?Tn(ce,Ei.SERVER):null,Ae=ce?Tn(ce,Ei.NAME):null,ee=ce?Tn(ce,Ei.MEMBER_COUNT):null,le=ce?lo(ce,[Ei.HOF,Ei.HOF_ALT,Ei.RANK,Ei.GUILD_RANK]):null,te=ce?Tn(ce,Ei.TIMESTAMP):L,ye=te!=null?String(te).trim():L!=null?L:String(w),ke=Xo(ee),Me=S.memberCount>0?S.memberCount:ke!=null?ke:0;r.set(x,{guildId:x,server:_e!=null&&String(_e).trim()!==""?String(_e).trim():null,name:Ae!=null&&String(Ae).trim()!==""?String(Ae).trim():null,memberCount:Me,hofRank:Xo(le),honor:S.honor,hydra:S.hydra,instructor:S.instructor,knights:S.knights,knights15Plus:S.knights15Plus,portalFloor:S.portalFloor,raids:S.raids,treasury:S.treasury,lastScan:ye||null,timestampSec:w,count:D.length,avgLevel:V,avgTreasury:z,avgMine:K,avgBaseMain:W,avgConBase:U,avgSumBaseTotal:J,avgAttrTotal:re,avgConTotal:G,avgTotalStats:X})}if(u)throw u;return{guildsProcessed:o.size,snapshotsWritten:c,aggregatesByGuildId:r}}function F4e(t){const e=new Date(t),n=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${n}-${r}`}async function B4e(t,e,n,r){var u,h,m;const i=ps(Tt,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await pn(i);if(!a.exists())return await gl(i,n,{merge:!1}),{first:n,firstTsMs:(u=n.updatedAtMs)!=null?u:n.timestamp?n.timestamp*1e3:r};const o=a.data(),c=(h=o.updatedAtMs)!=null?h:o.timestamp?o.timestamp*1e3:r;return r<c?(await gl(i,n,{merge:!1}),{first:n,firstTsMs:(m=n.updatedAtMs)!=null?m:n.timestamp?n.timestamp*1e3:r}):{first:o,firstTsMs:c}}async function $4e(t,e,n){const r=ps(Tt,`guilds/${t}/history_monthly/${e}`);await gl(r,n,{merge:!0})}function O4e(t){var P,N,x,w,L,j,S,C,M,T,F,D,V;const{guildId:e,monthKey:n,server:r,first:i,firstTsMs:a,latest:o,latestTsMs:c}=t,u=a!=null?Math.floor((c-a)/864e5):null,h=u!=null&&u<=40,m={available:h};h||(m.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:n,label:new Date(`${n}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(c).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(c/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:m};if(!h||!i)return g;const v=new Map;for(const z of i.members||[])z.playerId&&v.set(z.playerId,z);const b=[],_=[],k=[],I=[],R=[];for(const z of o.members||[]){if(!z.playerId)continue;const K=v.get(z.playerId)||null,W=(P=z.sumBaseTotal)!=null?P:null,U=(N=K==null?void 0:K.sumBaseTotal)!=null?N:null,J=W!=null&&U!=null?W-U:0,re=(x=z.totalStats)!=null?x:null,G=(w=K==null?void 0:K.totalStats)!=null?w:null,X=re!=null&&G!=null?re-G:0;b.push({playerId:z.playerId,name:(L=z.name)!=null?L:null,class:(j=z.class)!=null?j:null,levelLatest:(S=z.level)!=null?S:null,baseLatest:W,baseDelta:J}),_.push({playerId:z.playerId,name:(C=z.name)!=null?C:null,base:W,stamDelta:null,shoDelta:null}),k.push({playerId:z.playerId,name:(M=z.name)!=null?M:null,stats:W,delta:J}),I.push({playerId:z.playerId,name:(T=z.name)!=null?T:null,total:re,delta:X}),R.push({playerId:z.playerId,name:(F=z.name)!=null?F:null,class:(D=z.class)!=null?D:null,stats:(V=z.baseMain)!=null?V:null,delta:(K==null?void 0:K.baseMain)!=null&&z.baseMain!=null?z.baseMain-K.baseMain:0})}return b.sort((z,K)=>{var W,U;return((W=K.baseDelta)!=null?W:-1/0)-((U=z.baseDelta)!=null?U:-1/0)}),k.sort((z,K)=>{var W,U;return((W=K.stats)!=null?W:-1/0)-((U=z.stats)!=null?U:-1/0)}),I.sort((z,K)=>{var W,U;return((W=K.total)!=null?W:-1/0)-((U=z.total)!=null?U:-1/0)}),_.sort((z,K)=>{var W,U;return((W=K.base)!=null?W:-1/0)-((U=z.base)!=null?U:-1/0)}),R.sort((z,K)=>{var W,U;return((W=K.stats)!=null?W:-1/0)-((U=z.stats)!=null?U:-1/0)}),{...g,mostBaseGained:b.slice(0,50),sumBaseStats:_.slice(0,50),highestBaseStats:k.slice(0,50),highestTotalStats:I.slice(0,50),mainAndCon:R.slice(0,50)}}const il=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),dc=(t,e)=>{for(const n of Object.keys(t))if(il(n)===e)return t[n]},V4e=t=>String(t!=null?t:"").trim().toLowerCase(),y5=(t,e)=>{for(const n of t){const r=dc(n,il("Server")),i=V4e(r);i&&e.add(i)}},wx=t=>String(t!=null?t:"").trim(),U4e=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=Number(e);return Number.isFinite(n)?n:null},z4e=(t,e)=>{var a,o;const n=new Map,r=new Map;for(const c of t){const u=wx(dc(c,il("Guild Identifier")));u&&n.set(u,((a=n.get(u))!=null?a:0)+1)}for(const c of e){const u=wx(dc(c,il("Guild Identifier")));if(!u)continue;const h=U4e(dc(c,il("Guild Member Count")));h==null||h<=0||r.set(u,h)}const i=new Set;for(const[c,u]of r.entries())((o=n.get(c))!=null?o:0)===u&&i.add(c);return{uploadableGuildIds:i,playerCountByGuildId:n,guildMemberCountByGuildId:r}};async function E6(t,e){var I,R;Jx("ImportSelection");const n=new Set;y5(t.playersRows,n),y5(t.guildsRows,n);const r=n.size>0?await jv(Array.from(n)):new Map,{uploadableGuildIds:i}=z4e(t.playersRows,t.guildsRows),a=t.guildsRows.filter(P=>{const N=wx(dc(P,il("Guild Identifier")));return N?i.has(N):!1}),o=t.playersRows.filter(P=>{const N=wx(dc(P,il("Guild Identifier")));return N?i.has(N):!1}),{playersRows:c}=t,u=a,h=[];let m=[],g=[],v=!0;const b=e!=null&&e.onProgress?(P,N)=>{var x;return(x=e.onProgress)==null?void 0:x.call(e,{...P,kind:N})}:void 0;if(u.length>0)try{const P=await v5(null,{kind:"guilds",rows:u,onProgress:b?N=>b(N,"guilds"):void 0,serverHostMap:r,skipGuildDerived:!0});h.push(P),Array.isArray(P.guildResults)&&(g=P.guildResults)}catch(P){console.error("[ImportSelectionToDb] guild import error",P),v=!1}try{const P=await v5(null,{kind:"players",rows:c,onProgress:b?N=>b(N,"players"):void 0,serverHostMap:r});h.push(P),Array.isArray(P.playerResults)&&(m=P.playerResults)}catch(P){console.error("[ImportSelectionToDb] player import error",P),v=!1}let _=null;if(u.length>0&&o.length>0)try{_=(await M4e(o,u)).aggregatesByGuildId}catch(P){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",P),v=!1}if(_&&_.size>0)try{await C4e(_,r)}catch(P){console.warn("[ImportSelectionToDb] guild derived snapshot flush skipped",P),v=!1}const k=new Set;for(const P of u){const N=dc(P,il("Guild Identifier"));N&&k.add(String(N))}for(const P of o){const N=dc(P,il("Guild Identifier"));N&&k.add(String(N))}for(const P of k){const N=Bn("ImportCsv:guildLatest"),x=ps(Tt,`guilds/${P}/snapshots/members_summary`);let w;try{w=await An(N,x,()=>pn(x))}finally{un(N)}if(!w.exists())continue;const L=w.data(),j=Number((I=L.updatedAtMs)!=null?I:L.timestamp?L.timestamp*1e3:Date.now()),S=F4e(j);let C=null,M=null;try{const F=await B4e(P,S,L,j);C=F.first,M=F.firstTsMs}catch(F){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:P,monthKey:S,error:F})}const T=O4e({guildId:P,monthKey:S,server:(R=L.server)!=null?R:null,first:C,firstTsMs:M,latest:L,latestTsMs:j});try{await $4e(P,S,T)}catch(F){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:P,monthKey:S,error:F})}}return Zx("ImportSelection"),ey("ImportSelection"),{ok:v,players:m,guilds:g,reports:h}}const P1=t=>String(t!=null?t:"").trim(),ri=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),G4e=t=>String(t!=null?t:"").trim().replace(/\s+/g," ").replace(/:+$/,"").toLowerCase();function H4e(t){const e=[",",";","	","|"];let n=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(n=i,r=a)}return n}function G_(t){var u;const n=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!n.length)return{headers:[],rows:[],delimiter:","};const r=H4e((u=n[0])!=null?u:""),i=h=>{const m=[];let g="",v=!1;for(let b=0;b<h.length;b++){const _=h[b];_==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:_===r&&!v?(m.push(g),g=""):g+=_}return m.push(g),m},o=(n[0]?i(n[0]).map(P1):[]).map((h,m)=>h||`col${m}`),c=[];for(let h=1;h<n.length;h++){if(!n[h])continue;const m=i(n[h]);if(m.every(v=>P1(v)===""))continue;const g={};for(let v=0;v<o.length;v++)g[o[v]]=m[v]!=null?P1(m[v]):"";c.push(g)}return{headers:o,rows:c,delimiter:r}}const qn={PLAYERS:{IDENTIFIER:ri("Identifier"),PID:ri("ID"),GUILD_IDENTIFIER:ri("Guild Identifier"),TIMESTAMP:ri("Timestamp"),NAME:ri("Name"),SERVER:ri("Server"),OWN:ri("Own")},GUILDS:{GUILD_IDENTIFIER:ri("Guild Identifier"),GUILD_MEMBER_COUNT:ri("Guild Member Count"),NAME:ri("Name"),TIMESTAMP:ri("Timestamp"),SERVER:ri("Server")}},A6=(t,e)=>{const n=new Set(t.map(ri));return e.every(r=>n.has(r))},Va=(t,e)=>{for(const n of Object.keys(t))if(ri(n)===e)return t[n]},W4e=t=>{const e=new Map;return t.forEach(n=>{var a;const r=G4e(n);if(!r)return;const i=(a=e.get(r))!=null?a:[];i.push(n),e.set(r,i)}),e},K4e=t=>{const e=W4e(t),n=["guild member count","guild membercount","member count","guild members"];for(const r of n){const i=e.get(r);if(i&&i.length===1)return i[0]}return null},q4e=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=e.replace(/[\s,\.]/g,""),r=Number(n);return Number.isFinite(r)?r:null};function Q4e(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function b5(t){const e=t.map(ri),n=a=>e.includes(a);let r=0,i=0;return n(qn.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),n(qn.PLAYERS.IDENTIFIER)&&(r+=2),n(qn.PLAYERS.TIMESTAMP)&&(r+=1),n(qn.GUILDS.GUILD_IDENTIFIER)&&(i+=2),n(qn.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),n(qn.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||n(qn.PLAYERS.IDENTIFIER)?"players":"guilds"}function H_(t,e){const n=Q4e(t);if(n!=="unknown"){const i=b5(e);return i!=="unknown"&&i!==n?{kind:n,via:"filename",warn:`Per Dateiname als "${n}" klassifiziert, Header deuten auf "${i}".`}:{kind:n,via:"filename"}}const r=b5(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function P6(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=Date.parse(e);return Number.isFinite(n)?Math.floor(n/1e3):null}function Y4e(t,e){var r;const n=[];if(!A6(e,[qn.PLAYERS.GUILD_IDENTIFIER]))return n;for(const i of t){const a=Va(i,qn.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const o=Va(i,qn.PLAYERS.IDENTIFIER),c=o!=null?String(o).trim():"",u=_6(c),h=Va(i,qn.PLAYERS.SERVER),m=h&&String(h).trim()!==""?String(h).trim().toUpperCase():void 0,g=u!=null?u:c?void 0:m;n.push({guildIdentifier:String(a),id:Va(i,qn.PLAYERS.IDENTIFIER)||void 0,name:Va(i,qn.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(Va(i,qn.PLAYERS.OWN)).toLowerCase()),server:g,tsSec:(r=P6(Va(i,qn.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return n}function X4e(t,e){const n=[];if(!A6(e,[qn.GUILDS.GUILD_IDENTIFIER]))return n;const r=K4e(e);for(const i of t){const a=Va(i,qn.GUILDS.GUILD_IDENTIFIER),o=r?i[r]:Va(i,qn.GUILDS.GUILD_MEMBER_COUNT),c=q4e(o);if(!a||c==null)continue;const u=P6(Va(i,qn.GUILDS.TIMESTAMP));n.push({guildIdentifier:String(a),name:Va(i,qn.GUILDS.NAME)||void 0,memberCount:c,tsSec:u!=null?u:void 0})}return n}function R6(t){var h,m,g,v,b,_,k,I,R,P,N,x,w,L;let e=[],n=[];for(const j of t){const S=G_(j.text),{kind:C}=H_(j.name,S.headers);C==="players"?e=e.concat(x4e(j.text)):C==="guilds"&&(n=n.concat(y4e(j.text)))}const r=[],i=new Map,a=new Map;for(const j of e){const S={playerId:j.playerId,name:(h=j.name)!=null?h:"",server:j.server,guildId:(m=j.guildIdentifier)!=null?m:void 0,level:(g=j.level)!=null?g:void 0,className:(v=j.className)!=null?v:void 0,scanTimestampSec:j.timestampSec,values:j.raw};r.push(S);const C=String((b=j.guildIdentifier)!=null?b:"").trim();C&&(i.has(C)||i.set(C,[]),i.get(C).push(S),a.set(C,((_=a.get(C))!=null?_:0)+1))}const o=[],c=new Map;for(const j of n){const S=String((k=j.guildIdentifier)!=null?k:"").trim();if(!S)continue;const C=Number((I=j.memberCount)!=null?I:NaN);!Number.isFinite(C)||C<=0||c.set(S,C)}const u=new Set;for(const[j,S]of c.entries())((R=a.get(j))!=null?R:0)===S&&u.add(j);for(const j of n){const S=String((P=j.guildIdentifier)!=null?P:"").trim();if(!u.has(S))continue;const C=(N=i.get(S))!=null?N:[];o.push({guildId:S,name:(x=j.name)!=null?x:S,server:j.server,memberCount:(w=j.memberCount)!=null?w:C.length,scanTimestampSec:j.timestampSec,values:j.raw,members:C.map(M=>({playerId:M.playerId,name:M.name,level:M.level,className:M.className}))}),i.delete(S)}return{filename:(L=t[0])==null?void 0:L.name,players:r,guilds:o}}function J4e(t,e){var I,R,P,N,x,w;const n=[],r=new Map;for(const L of t){const j=L.id||"",S=(I=L.server)==null?void 0:I.toUpperCase();if(j){const C=`${S!=null?S:"NO"}::${j}`;r.has(C)||r.set(C,{server:S,id:j,name:L.name||"",own:!!L.own})}}const i=r.size,a=t.length,o=Array.from(r.values()).filter(L=>L.own).length,c=new Map;for(const L of r.values())L.server&&c.set(L.server,((R=c.get(L.server))!=null?R:0)+1);const u=Array.from(c.entries()).map(([L,j])=>({server:L,players:j})).sort((L,j)=>j.players-L.players),h=u.length,m=new Map;for(const L of t)m.set(L.guildIdentifier,((P=m.get(L.guildIdentifier))!=null?P:0)+1);const g=new Set,v=new Map;for(const L of e)g.add(L.guildIdentifier),v.set(L.guildIdentifier,{name:L.name||"",declared:L.memberCount});for(const L of m.keys())g.add(L);let b=0;const _=[];for(const L of g){const j=(N=v.get(L))==null?void 0:N.declared,S=(x=m.get(L))!=null?x:0,C=j!=null&&S===j;C&&b++,_.push({id:L,name:((w=v.get(L))==null?void 0:w.name)||"",declaredCount:j!=null?j:0,playersCount:S,full:C})}[...v.values()].some(L=>Number.isFinite(L.declared))||n.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),_.sort((L,j)=>L.name?L.name.localeCompare(j.name):L.id.localeCompare(j.id));const k=Array.from(r.values()).sort((L,j)=>(L.server||"")===(j.server||"")?L.name.localeCompare(j.name):(L.server||"").localeCompare(j.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:o,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:b,notes:n,playersList:k,guildsList:_}}function L6({mode:t="db",onBuildUploadSession:e}){const[n,r]=A.useState([]),[i,a]=A.useState(null),[o,c]=A.useState(!1),[u,h]=A.useState(null),[m,g]=A.useState(!1),[v,b]=A.useState(null),[_,k]=A.useState([]),[I,R]=A.useState(null);A.useEffect(()=>{const T=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=T}},[]);const P=A.useCallback(async T=>{var F;c(!0),h(null),a(null),k([]),b(null);try{const D=Array.from(T).slice(0,2),V=[];let z=[],K=[];for(const W of D){const U=W,J=await U.text(),re=G_(J),{kind:G,warn:X}=H_(U.name,re.headers);V.push({name:U.name,size:U.size||J.length,rows:re.rows.length,delimiter:re.delimiter,text:J,kind:G,warn:X}),G==="players"?z=z.concat(Y4e(re.rows,re.headers)):G==="guilds"&&(K=K.concat(X4e(re.rows,re.headers)))}r(V),a(J4e(z,K))}catch(D){h(String((F=D==null?void 0:D.message)!=null?F:D))}finally{c(!1)}},[]),N=A.useCallback(async T=>{!T||T.length===0||await P(T)},[P]),x=A.useCallback(async T=>{T.preventDefault();const F=T.dataTransfer.files;!F||!F.length||await P(F)},[P]),w=A.useCallback(()=>{const T=n.map(F=>({name:F.name,text:F.text}));return R6(T)},[n]);async function L(){var T;if(n.length){g(!0),R({phase:"prepare",current:0,total:0}),b(null),k([]);try{let F=[],D=[];for(const z of n){const K=G_(z.text),{kind:W}=H_(z.name,K.headers);W==="players"&&(F=F.concat(K.rows)),W==="guilds"&&(D=D.concat(K.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!F.length,hasGuildsCsv:!!D.length,playersRows:F.length,guildsRows:D.length}),!D.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!F.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const V=await E6({playersRows:F,guildsRows:D},{onProgress:z=>R(z)});R({phase:"done",current:1,total:1}),k(V.reports),b("Import abgeschlossen.")}catch(F){console.error("[UploadCenter] Import error:",F),b(`Fehler beim Import: ${(T=F==null?void 0:F.message)!=null?T:F}`)}finally{g(!1),setTimeout(()=>R(null),1200)}}}const j=A.useCallback(async()=>{var T;if(!(t!=="session"||!e||!n.length)){g(!0),b(null),k([]),h(null),R(null);try{const F=w();e(F),b("Session prepared locally.")}catch(F){console.error("[UploadCenter] Session build error:",F),b(`Fehler beim Import: ${(T=F==null?void 0:F.message)!=null?T:F}`)}finally{g(!1)}}},[t,e,n,w]),S=A.useMemo(()=>n.map(T=>`${T.name} (${T.rows} rows, ${T.delimiter}, ${T.kind}${T.warn?" ":""})`),[n]),C=A.useMemo(()=>n.reduce((T,F)=>T+F.rows,0),[n]),M=I?Math.floor(100*I.current/Math.max(1,I.total||1)):0;return s.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[s.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[s.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[S.map((T,F)=>s.jsx("span",{className:"uc-chip",title:n[F].warn||"",children:T},F)),n.length>0&&s.jsxs("span",{className:"uc-chip",children:["Total: ",C," rows"]})]}),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[I&&t==="db"&&s.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[s.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:s.jsx("div",{style:{width:`${M}%`,height:"100%",background:"#2E75F0"}})}),s.jsxs("span",{style:{color:"#D6E4F7"},children:[M,"%"]})]}),s.jsx("button",{onClick:t==="session"?j:L,disabled:!n.length||!i||m||t==="session"&&!e,className:"uc-btn",children:m?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),v&&s.jsx("span",{style:{color:v.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:v})]})]}),s.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[s.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),s.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:T=>N(T.target.files),disabled:o})]}),s.jsx("div",{onDragOver:T=>T.preventDefault(),onDrop:x,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),o&&s.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&s.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[s.jsx("b",{children:"Fehler:"})," ",u]}),i&&s.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[s.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:s.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),s.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[s.jsx(wm,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),s.jsx(wm,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),s.jsx(wm,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),s.jsx(wm,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),s.jsx(wm,{label:"Verschiedene Server",value:i.servers})]}),s.jsxs("div",{style:{marginTop:12},children:[s.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Server"}),s.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),s.jsx("tbody",{children:i.perServer.map(T=>s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:T.server}),s.jsx("td",{style:{textAlign:"right"},children:T.players})]},T.server))})]})]}),s.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[s.jsxs("details",{children:[s.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),s.jsx("div",{style:{marginTop:8},children:s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Server"}),s.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),s.jsx("th",{style:{textAlign:"left"},children:"Name"}),s.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),s.jsx("tbody",{children:i.playersList.map((T,F)=>{var D,V;return s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:(D=T.server)!=null?D:""}),s.jsx("td",{children:T.id}),s.jsx("td",{children:T.name||""}),s.jsx("td",{children:T.own?"":""})]},`${(V=T.server)!=null?V:"NO"}-${T.id}-${F}`)})})]})})]}),s.jsxs("details",{open:!0,children:[s.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),s.jsx("div",{style:{marginTop:8},children:s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),s.jsx("th",{style:{textAlign:"left"},children:"Name"}),s.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),s.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),s.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),s.jsx("tbody",{children:i.guildsList.map((T,F)=>s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:T.id}),s.jsx("td",{children:T.name||""}),s.jsx("td",{style:{textAlign:"right"},children:T.declaredCount||0}),s.jsx("td",{style:{textAlign:"right"},children:T.playersCount}),s.jsx("td",{style:{textAlign:"center"},children:T.full?"":""})]},`${T.id}-${F}`))})]})})]})]}),!!i.notes.length&&s.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",s.jsx("ul",{children:i.notes.map((T,F)=>s.jsx("li",{children:T},F))})]})]})]})}function wm({label:t,value:e,hint:n}){return s.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[s.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),s.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),n&&s.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:n})]})}function Z4e(){return s.jsxs("div",{children:[s.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),s.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",s.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function ePe(){const{isOpen:t,close:e,activeTab:n,setTab:r,canUse:i}=oj();return!t||!i?null:s.jsx("div",{className:oo.backdrop,onClick:e,children:s.jsxs("div",{className:oo.panel,onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:oo.header,children:[s.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),s.jsxs("div",{className:oo.tabs,children:[s.jsx("button",{type:"button",className:`${oo.tabBtn} ${n==="csv"?oo.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),s.jsx("button",{type:"button",className:`${oo.tabBtn} ${n==="json"?oo.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),s.jsx("button",{type:"button",className:oo.closeBtn,onClick:e,children:"Schlieen"})]}),s.jsx("div",{className:oo.content,children:n==="csv"?s.jsx(L6,{mode:"db"}):s.jsx(Z4e,{})})]})})}const D6="sfdatahub_upload_sessions_v1",R1={sessions:[],activeSessionId:null},tPe=()=>{var t,e,n,r,i,a;if(typeof window=="undefined")return R1;try{const o=window.localStorage.getItem(D6);if(!o)return R1;const c=JSON.parse(o);if(c&&typeof c=="object"){if("version"in c&&(c==null?void 0:c.version)===1&&c.type==="uploadCenter.sessions"&&Array.isArray(c.sessions)){const u=c;return{sessions:u.sessions,activeSessionId:(n=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?n:null}}if(Array.isArray(c.sessions)){const u=c;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(o){console.warn("[UploadCenterSessions] Failed to parse persisted state",o)}return R1},M6=A.createContext(null);function sPe({children:t}){const e=A.useMemo(()=>tPe(),[]),[n,r]=A.useState(()=>e.sessions),[i,a]=A.useState(()=>e.activeSessionId),o=A.useCallback(N=>({...N,players:N.players.map(x=>({...x,status:"pending"})),guilds:N.guilds.map(x=>({...x,status:"pending"}))}),[]);A.useEffect(()=>{if(typeof window!="undefined")try{const N={version:1,type:"uploadCenter.sessions",sessions:n,activeSessionId:i};window.localStorage.setItem(D6,JSON.stringify(N))}catch(N){console.warn("[UploadCenterSessions] Failed to persist state",N)}},[n,i]);const c=A.useCallback(N=>{const x=o(N);r(w=>[...w,x]),a(x.id)},[o]),u=A.useCallback(N=>{a(N)},[]),h=A.useCallback(N=>{r(x=>{const w=x.filter(L=>L.id!==N);return a(L=>{var j,S;return L===N?(S=(j=w[0])==null?void 0:j.id)!=null?S:null:L}),w})},[]),m=A.useCallback(()=>{r([]),a(null)},[]),g=A.useCallback((N,x,w,L)=>{r(j=>j.map(S=>{if(S.id!==N)return S;if(x==="player"){const M=S.players.map(T=>T.key===w?{...T,selected:L}:T);return{...S,players:M}}const C=S.guilds.map(M=>M.key===w?{...M,selected:L}:M);return{...S,guilds:C}}))},[]),v=A.useCallback((N,x,w)=>{r(L=>L.map(j=>{if(j.id!==N)return j;if(x==="player"){const C=j.players.map(M=>({...M,selected:w}));return{...j,players:C}}const S=j.guilds.map(C=>({...C,selected:w}));return{...j,guilds:S}}))},[]),b=A.useCallback((N,x,w)=>{r(L=>L.map(j=>{if(j.id!==N)return j;const S=j.guilds.find(F=>F.key===x);if(!S)return j;const C=S.guildId,M=j.players.map(F=>F.guildId===C?{...F,selected:w}:F),T=j.guilds.map(F=>F.key===x?{...F,selected:w}:F);return{...j,players:M,guilds:T}}))},[]),_=A.useCallback((N,x,w)=>{r(L=>L.map(j=>{if(j.id!==N)return j;let S;const C=j.players.map(D=>D.key!==x?D:(S=D.guildId,{...D,selected:w}));if(!S)return{...j,players:C};const M=C.filter(D=>D.guildId===S),T=M.length>0&&M.every(D=>D.selected),F=j.guilds.map(D=>D.guildId!==S?D:w===!1?{...D,selected:!1}:T?{...D,selected:!0}:D);return{...j,players:C,guilds:F}}))},[]),k=A.useCallback((N,x)=>{r(w=>w.map(L=>{if(L.id!==N)return L;const j=L.players.map(C=>({...C,selected:x})),S=L.guilds.map(C=>{if(!x)return{...C,selected:!1};const M=j.filter(F=>F.guildId===C.guildId),T=M.length>0&&M.every(F=>F.selected);return{...C,selected:T}});return{...L,players:j,guilds:S}}))},[]),I=A.useCallback((N,x)=>{r(w=>w.map(L=>{if(L.id!==N)return L;const j=L.guilds.map(C=>({...C,selected:x})),S=L.players.map(C=>x&&C.guildId?{...C,selected:!0}:!x&&C.guildId?{...C,selected:!1}:C);return{...L,guilds:j,players:S}}))},[]),R=A.useCallback((N,x,w,L)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:N,kind:x,recordKey:w,status:L}),r(j=>j.map(S=>{if(S.id!==N)return S;if(x==="player"){const M=S.players.map(T=>T.key===w?{...T,status:L}:T);return{...S,players:M}}const C=S.guilds.map(M=>M.key===w?{...M,status:L}:M);return{...S,guilds:C}}))},[]),P=A.useMemo(()=>({sessions:n,activeSessionId:i,addSession:c,setActiveSession:u,removeSession:h,clearAllSessions:m,toggleRecordSelection:g,selectAllInSession:v,selectGuildWithPlayers:b,updateGuildSelectionFromPlayer:_,selectAllPlayersWithGuilds:k,selectAllGuildsWithPlayers:I,setRecordStatus:R}),[n,i,c,u,h,m,g,v,b,_,k,I,R]);return s.jsx(M6.Provider,{value:P,children:t})}function nPe(){const t=A.useContext(M6);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}const rPe="sfh:authNext";function iPe({route:t,featureId:e,fallback:n=null,children:r}){var k;const{isLoading:i,status:a}=wa(),{resolveRule:o,canAccessFeature:c,canAccessRule:u,loading:h}=ty(),m=ir(),g=(k=e!=null?e:t)!=null?k:"/",v=q.useMemo(()=>o(g),[o,g]);q.useEffect(()=>{v||console.debug(`[FeatureGate] No rule found for target "${g}", allowing by default.`)},[v,g]);const b=q.useMemo(()=>!e&&!t?!0:v?u(v):c(g),[c,u,e,t,v,g]),_=q.useMemo(()=>v?!!(v.status==="logged_in"||v.minRole&&v.minRole!=="guest"||v.allowedRoles&&v.allowedRoles.length>0||v.allowedGroups&&v.allowedGroups.length>0||v.allowedUserIds&&v.allowedUserIds.length>0):!1,[v]);if(i||h)return null;if(!b){const I=a==="unauthenticated",R=m.pathname==="/login";if(_&&I&&!R){const P=`${m.pathname}${m.search||""}`,N=P.startsWith("/")&&!P.startsWith("//");typeof window!="undefined"&&window.sessionStorage&&N&&window.sessionStorage.setItem(rPe,P);const x=N?`/login?next=${encodeURIComponent(P)}`:"/login";return s.jsx(uo,{to:x,replace:!0})}return s.jsx(s.Fragment,{children:n})}return s.jsx(s.Fragment,{children:r})}const _5="pending";function w5(t,e,n){const r=t.players.map(a=>{var c;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(c=a.guildId)!=null?c:void 0,level:a.level,className:a.className,values:a.values,selected:!0,status:_5}}),i=t.guilds.map(a=>{var u;const o=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,c=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:o,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:c,values:a.values,selected:!0,status:_5}});return{id:e,createdAt:n,sourceFilename:t.filename,scanUploadId:void 0,players:r,guilds:i}}const Nv=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`};async function aPe(t){var n,r,i,a;if(!t)return console.warn("[UploadCenterUsage] Missing userId, returning empty usage."),{date:null,guilds:0,players:0};const e=ps(Tt,"users",t);try{const o=await An(null,e,()=>pn(e),{label:"UploadCenterUsage:get"});if(!o.exists())return console.warn("[UploadCenterUsage] User document does not exist.",{userId:t}),{date:null,guilds:0,players:0};const c=(n=o.data())==null?void 0:n.uploadCenter,u=(r=c==null?void 0:c.usage)!=null?r:{};return{date:typeof(u==null?void 0:u.date)=="string"?u.date:null,guilds:Number((i=u==null?void 0:u.guilds)!=null?i:0)||0,players:Number((a=u==null?void 0:u.players)!=null?a:0)||0}}catch(o){return console.error("[UploadCenterUsage] Failed to fetch usage data.",{userId:t,error:o}),{date:null,guilds:0,players:0}}}async function oPe(t,e,n){var b,_,k;if(!t){console.warn("[UploadCenterUsage] Missing userId, skipping usage update.");return}const r=Nv(),i=ps(Tt,"users",t);let a;try{a=await An(null,i,()=>pn(i),{label:"UploadCenterUsage:update"})}catch(I){console.error("[UploadCenterUsage] Failed to fetch user document.",{userId:t,error:I});return}if(!a.exists()){console.warn("[UploadCenterUsage] User document does not exist.",{userId:t});return}const o=(b=a.data())==null?void 0:b.uploadCenter,c=o==null?void 0:o.usage,u=(c==null?void 0:c.date)===r,h=u?Number((_=c==null?void 0:c.guilds)!=null?_:0):0,m=u?Number((k=c==null?void 0:c.players)!=null?k:0):0,g=h+Number(e!=null?e:0),v=m+Number(n!=null?n:0);try{await ij(i,()=>gl(i,{uploadCenter:{...o!=null?o:{},usage:{date:r,guilds:g,players:v}}},{merge:!0}),{label:"UploadCenterUsage:updateWrite"})}catch(I){console.error("[UploadCenterUsage] Failed to update usage data.",{userId:t,error:I})}}const uc={enabled:!0,dailyGuildLimit:9999,dailyPlayerLimit:999999},jx=t=>{if(t==null||typeof t=="boolean"||typeof t=="string"&&t.trim()==="")return null;const e=Number(t);return Number.isFinite(e)&&e>=0?e:null},lPe=t=>{if(!t||typeof t!="object")return;const e={};return Object.entries(t).forEach(([n,r])=>{if(!r||typeof r!="object")return;const i=r,a=jx(i.dailyGuildLimit),o=jx(i.dailyPlayerLimit),c=i.enabled,u={};typeof c=="boolean"&&(u.enabled=c),a!==null&&(u.dailyGuildLimit=a),o!==null&&(u.dailyPlayerLimit=o),Object.keys(u).length>0&&(e[n]=u)}),Object.keys(e).length>0?e:void 0};async function cPe(t){const e=ps(Tt,"upload_quota_config","default");try{const n=await An(null,e,()=>pn(e),{label:"UploadQuota:config"});if(!n.exists())return console.warn("[UploadQuota] Missing config document. Using defaults."),uc;const r=n.data(),i=jx(r==null?void 0:r.dailyGuildLimit),a=jx(r==null?void 0:r.dailyPlayerLimit),o=lPe(r==null?void 0:r.roles),c={dailyGuildLimit:i!=null?i:uc.dailyGuildLimit,dailyPlayerLimit:a!=null?a:uc.dailyPlayerLimit};typeof(r==null?void 0:r.enabled)=="boolean"&&(c.enabled=r.enabled),o&&(c.roles=o);const u=r&&Object.prototype.hasOwnProperty.call(r,"dailyGuildLimit")&&i===null,h=r&&Object.prototype.hasOwnProperty.call(r,"dailyPlayerLimit")&&a===null;return(u||h)&&console.warn("[UploadQuota] Invalid config payload. Using defaults.",{data:r}),c}catch(n){return console.error("[UploadQuota] Failed to load quota config.",{userId:t==null?void 0:t.id,error:n}),uc}}function dPe(t,e){var a,o,c;const n=Array.isArray(e)?e.filter(u=>typeof u=="string"&&u.length>0):[],r=Number.isFinite(t.dailyGuildLimit)?t.dailyGuildLimit:uc.dailyGuildLimit,i=Number.isFinite(t.dailyPlayerLimit)?t.dailyPlayerLimit:uc.dailyPlayerLimit;for(const u of n){const h=(a=t.roles)==null?void 0:a[u];if(!h||h.enabled===!1)continue;const m=(o=h.dailyGuildLimit)!=null?o:r,g=(c=h.dailyPlayerLimit)!=null?c:i;return console.debug("[UploadQuota] Applying role override for upload limits.",{role:u,guildLimit:m,playerLimit:g}),{dailyGuildLimit:m,dailyPlayerLimit:g}}return{dailyGuildLimit:r,dailyPlayerLimit:i}}async function j5(t){var u,h,m;const e=(u=t==null?void 0:t.id)!=null?u:null,n=(m=(h=t==null?void 0:t.uploadCenter)==null?void 0:h.usage)!=null?m:{date:null,guilds:0,players:0},r=Array.isArray(t==null?void 0:t.roles)?t.roles:[],[i,a]=await Promise.all([cPe(t),e?aPe(e):Promise.resolve(null)]),o=dPe(i,r);return{config:{...i,dailyGuildLimit:o.dailyGuildLimit,dailyPlayerLimit:o.dailyPlayerLimit},usage:a!=null?a:n}}const uPe=(t,e)=>`${Ka}/scan-uploads/${encodeURIComponent(t)}/${e}.csv`,hPe=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function S5(t,e){const n=uPe(t,e);console.log(`[scan-uploads] Fetching ${e} CSV for scanId=${t}`);const r=await fetch(n,{method:"GET",credentials:"include",headers:{Accept:"text/csv"}});if(!r.ok)throw console.error(`[scan-uploads] Failed to fetch ${e} CSV for scanId=${t} (status ${r.status})`),await hPe(r);const i=await r.text();return console.log(`[scan-uploads] Fetched ${e} CSV for scanId=${t} (${i.length} chars)`),i}const mPe="sfdatahub:uploadCenter:scanUploads:v1:",F6=5,B6=t=>t&&"seconds"in t&&"nanoseconds"in t?{seconds:t.seconds,nanoseconds:t.nanoseconds}:null,dd=t=>t?t instanceof on?t.toMillis():"seconds"in t&&"nanoseconds"in t?t.seconds*1e3+t.nanoseconds/1e6:-1/0:-1/0,pPe=t=>({...t,uploadedAt:t.uploadedAt?new on(t.uploadedAt.seconds,t.uploadedAt.nanoseconds):null}),gPe=t=>({...t,uploadedAt:B6(t.uploadedAt)}),$6=t=>{let e=null,n=-1/0;return t.forEach(r=>{var o;const i=B6("uploadedAt"in r&&(o=r.uploadedAt)!=null?o:null),a=dd(i);a>n&&i&&(e=i,n=a)}),e},fPe=(t,e)=>{const n=new Map,r=i=>{const a=i.id||i.scanId;if(!a)return;const o=n.get(a);if(!o){n.set(a,i);return}const c=dd(o.uploadedAt),u=dd(i.uploadedAt);n.set(a,u>=c?i:o)};return t.forEach(r),e.forEach(r),Array.from(n.values()).sort((i,a)=>dd(a.uploadedAt)-dd(i.uploadedAt)).slice(0,F6)},vPe=(t,e)=>{if(!e)return[];const n=dd(e);return t.filter(r=>dd(r.uploadedAt)===n).map(r=>r.id).filter(r=>!!r)},xPe=t=>{if(typeof window=="undefined")return null;try{const e=window.localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return!n||!Array.isArray(n.items)?null:n}catch(e){return console.warn("[upload-center] Failed to read scan uploads cache",e),null}},N5=(t,e)=>{if(typeof window!="undefined")try{const n={savedAtMs:Date.now(),lastUploadedAt:$6(e),items:e.map(gPe)};window.localStorage.setItem(t,JSON.stringify(n))}catch(n){console.warn("[upload-center] Failed to persist scan uploads cache",n)}},L1=new Map,yPe=t=>{const[e,n]=A.useState([]),[r,i]=A.useState(!1),[a,o]=A.useState(null);return A.useEffect(()=>{if(!t){n([]),i(!1),o(null);return}let c=!0;const u=`${mPe}${t}`,h=xPe(u),m=h?h.items.map(pPe):[],g=(h==null?void 0:h.lastUploadedAt)||$6(m),v=vPe(m,g);o(null),m.length>0?(n(m),i(!1)):(n([]),i(!0));const b=async()=>{const k=Bn("UploadCenter:scanUploads");try{const I=pl(Tt,"scan_uploads"),R=En(I,Kr("discordUserId","==",t),Qi("uploadedAt","desc"),rr(F6)),P=await wn(k,{path:I.path},()=>_n(R));if(!c)return;const N=P.docs.map(x=>({id:x.id,...x.data()}));console.log(`[upload-center] Loaded ${N.length} scan_uploads for current user (remote sessions)`),n(N),N5(u,N)}catch(I){if(!c)return;console.error("[upload-center] Failed to load scan_uploads for current user (index may be required)",I),o(I instanceof Error?I:new Error("Failed to load scan uploads")),n([])}finally{un(k),c&&i(!1)}},_=async(k,I)=>{const R=`${t}:${k.seconds}:${k.nanoseconds}`,P=L1.get(R);if(P){await P;return}const N=Bn("UploadCenter:scanUploads"),w=(async()=>{try{const L=pl(Tt,"scan_uploads"),j=new on(k.seconds,k.nanoseconds),S=En(L,Kr("discordUserId","==",t),Qi("uploadedAt","asc"),Kr("uploadedAt",">",j)),C=await wn(N,{path:L.path},()=>_n(S));if(!c)return;let M=C.docs.map(T=>({id:T.id,...T.data()}));if(M.length===0&&I.length>0){const T=I.slice(0,10),F=En(L,Kr("discordUserId","==",t),Kr("uploadedAt","==",j),Kr(h_(),"not-in",T),Qi(h_())),D=await wn(N,{path:L.path},()=>_n(F));if(!c)return;M=D.docs.map(V=>({id:V.id,...V.data()}))}if(M.length===0){console.log("[upload-center] No new scan_uploads found; using cached entries");return}n(T=>{const F=fPe(T.length?T:m,M);return N5(u,F),F})}catch(L){if(!c)return;console.error("[upload-center] Delta refresh for scan_uploads failed (index may be required)",L)}finally{un(N)}})().finally(()=>{L1.delete(R)});L1.set(R,w),await w};return m.length>0&&g?_(g,v):b(),()=>{c=!1}},[t]),{items:e,loading:r,error:a}},O6="sfdatahub_upload_quota_v1",V6=t=>{var e,n;return{date:typeof(t==null?void 0:t.date)=="string"?t.date:null,guilds:Number((e=t==null?void 0:t.guilds)!=null?e:0)||0,players:Number((n=t==null?void 0:t.players)!=null?n:0)||0}},D1=(t,e)=>{if(typeof window=="undefined")return;const n={version:1,config:t,usage:V6(e),storedAt:new Date().toISOString()};try{window.localStorage.setItem(O6,JSON.stringify(n))}catch(r){console.warn("[UploadQuotaStorage] Failed to persist quota data",r)}},bPe=()=>{var t,e;if(typeof window=="undefined")return null;try{const n=window.localStorage.getItem(O6);if(!n)return null;const r=JSON.parse(n);return!r||typeof r!="object"||r.version!==1||typeof((t=r.config)==null?void 0:t.dailyGuildLimit)!="number"||typeof((e=r.config)==null?void 0:e.dailyPlayerLimit)!="number"?null:{version:1,config:{dailyGuildLimit:Number(r.config.dailyGuildLimit)||0,dailyPlayerLimit:Number(r.config.dailyPlayerLimit)||0},usage:V6(r.usage),storedAt:typeof r.storedAt=="string"?r.storedAt:""}}catch(n){return console.warn("[UploadQuotaStorage] Failed to read quota data",n),null}},Sx=(t,e)=>Math.max(t-e,0),k5=(t,e,n)=>{var o,c,u;const r=e.date===n,i=r&&(o=e.guilds)!=null?o:0,a=r&&(c=e.players)!=null?c:0;return{config:t,usageDate:(u=e.date)!=null?u:null,usedGuildsToday:i,usedPlayersToday:a,remainingGuilds:Sx(t.dailyGuildLimit,i),remainingPlayers:Sx(t.dailyPlayerLimit,a),today:n}},_Pe=({className:t})=>{if(!t)return s.jsx("span",{title:"Unknown class",className:"text-xs text-center text-zinc-400 block",children:"Unknown"});const{url:e,fallback:n}=V4(t),r=e?Pi(e,28):void 0;return r?s.jsx("img",{src:r,alt:t,title:t,className:"mx-auto h-6 w-6 rounded-full object-contain",draggable:!1}):n?s.jsx("span",{title:t,className:"mx-auto text-center text-sm leading-none",style:{display:"block"},children:n}):s.jsx("span",{title:t,className:"text-xs text-center text-zinc-400 block",children:t})};function wPe(){return s.jsx(os,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:s.jsx(jPe,{})},"upload-center-shell")}function jPe(){var St,at,rt,ut,_t,ot,nt,ts,pt;const{sessions:t,activeSessionId:e,addSession:n,setActiveSession:r,removeSession:i,selectGuildWithPlayers:a,updateGuildSelectionFromPlayer:o,selectAllPlayersWithGuilds:c,selectAllGuildsWithPlayers:u,setRecordStatus:h}=nPe(),{t:m}=Vs(),{user:g}=wa(),v=(rt=(at=(St=g==null?void 0:g.providers)==null?void 0:St.discord)==null?void 0:at.id)!=null?rt:(g==null?void 0:g.provider)==="discord"?g.id:null,{items:b,loading:_,error:k}=yPe(v),I=!!v,R=t.find(ne=>ne.id===e)||null,P=A.useMemo(()=>new Set(t.map(ne=>ne.scanUploadId).filter(ne=>!!ne)),[t]),[N,x]=q.useState(new Set),[w,L]=A.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),[j,S]=A.useState("all"),[C,M]=A.useState("all"),[T,F]=A.useState(!1),[D,V]=A.useState(!1),[z,K]=A.useState(null),[W,U]=A.useState(null),[J,re]=A.useState(()=>k5(uc,{date:null,guilds:0,players:0},Nv())),[G,X]=A.useState(null),Y=A.useCallback((ne,Oe)=>{const Ve=Nv();re(k5(ne,Oe,Ve)),X(null)},[]),se=A.useCallback(async()=>{try{const ne=await j5(g!=null?g:null);Y(ne.config,ne.usage),D1(ne.config,ne.usage)}catch(ne){console.error("[UploadCenter] Failed to refresh upload quota",ne),X("Could not refresh upload quota. Using last known values.")}},[Y,g]);A.useEffect(()=>{var ct,qe;let ne=!0;Nv();const Oe=(qe=(ct=g==null?void 0:g.uploadCenter)==null?void 0:ct.usage)!=null?qe:{date:null,guilds:0,players:0};Y(uc,Oe);const Ve=bPe();return Ve&&Y(Ve.config,Ve.usage),(async()=>{try{const ft=await j5(g!=null?g:null);if(!ne)return;Y(ft.config,ft.usage),D1(ft.config,ft.usage)}catch(ft){console.error("[UploadCenter] Failed to refresh upload quota",ft),ne&&X("Could not refresh upload quota. Using last known values.")}})(),()=>{ne=!1}},[g,(_t=(ut=g==null?void 0:g.uploadCenter)==null?void 0:ut.usage)==null?void 0:_t.date,(nt=(ot=g==null?void 0:g.uploadCenter)==null?void 0:ot.usage)==null?void 0:nt.guilds,(pt=(ts=g==null?void 0:g.uploadCenter)==null?void 0:ts.usage)==null?void 0:pt.players,Y]);const ce=A.useCallback(ne=>{const Oe=`csv_${Date.now()}`,Ve=new Date().toISOString(),ct=w5(ne,Oe,Ve);n(ct),r(Oe)},[n,r]),_e=ne=>{const Oe=new Date(ne);return Number.isNaN(Oe.getTime())?"Unknown date":Oe.toLocaleString()},Ae=ne=>{x(Oe=>{const Ve=new Set(Oe);return Ve.has(ne)?Ve.delete(ne):Ve.add(ne),Ve})},ee=ne=>{var qe,ft;const Oe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Ve={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},ct={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return s.jsx("span",{className:`${Oe} ${(qe=Ve[ne])!=null?qe:Ve.pending}`,children:(ft=ct[ne])!=null?ft:ne})},le=ne=>{if(!ne)return"Unknown date";try{if(typeof ne.toDate=="function")return ne.toDate().toLocaleString()}catch(Oe){}return"Unknown date"},te=ne=>{var ft,Mt,Lt;const Oe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Ve={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",stored:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",received:"bg-sky-500/10 text-sky-100 border border-sky-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},ct={pending:"PENDING",stored:"STORED",received:"RECEIVED",error:"ERROR"},qe=(ft=ne==null?void 0:ne.toLowerCase())!=null?ft:"pending";return s.jsx("span",{className:`${Oe} ${(Mt=Ve[qe])!=null?Mt:Ve.pending}`,children:(Lt=ct[qe])!=null?Lt:ne||"PENDING"})},ye=A.useCallback((ne,Oe,Ve)=>{const ct=ne==="created"||ne==="duplicate";return Ve&&ct?!1:Oe==="all"?!0:Oe==="pending"?ne==="pending":Oe==="inDb"?ct:Oe==="error"?ne==="error":!0},[]),ke=A.useMemo(()=>R?R.players.filter(ne=>ye(ne.status,j,T)):[],[R,ye,j,T]),Me=A.useMemo(()=>R?R.guilds.filter(ne=>ye(ne.status,C,D)):[],[R,ye,C,D]),Re=A.useCallback(async ne=>{if(ne!=null&&ne.id){U(null),K(ne.id);try{const Oe=[],Ve=ne.queueId||ne.scanId||ne.id,ct=ne.hasPlayersCsv!==!1,qe=ne.hasGuildsCsv!==!1;if(ct){const ss=await S5(ne.id,"players");Oe.push({name:`players.scan-${Ve}.csv`,text:ss})}if(qe){const ss=await S5(ne.id,"guilds");Oe.push({name:`guilds.scan-${Ve}.csv`,text:ss})}if(!Oe.length)throw new Error("No CSV data available for this scan.");const ft=R6(Oe);ft.filename=Ve||ft.filename;const Mt=`scan_${ne.id}_${Date.now()}`,Lt=new Date().toISOString(),dt={...w5(ft,Mt,Lt),scanUploadId:ne.id};n(dt),r(Mt),console.log(`[upload-center] Loaded remote scan session for scanId=${ne.id} (session ${Mt})`)}catch(Oe){console.error(`[upload-center] Failed to load remote scan session for scanId=${ne==null?void 0:ne.id}`,Oe),U(Oe instanceof Error?Oe.message:"Failed to load remote scan session.")}finally{K(null)}}},[n,r]),Ee=A.useMemo(()=>{if(!R)return!1;const ne=R.players.some(Ve=>Ve.selected),Oe=R.guilds.some(Ve=>Ve.selected);return ne||Oe},[R]),Le=w.phase==="uploading"||w.phase==="finalizing",Fe=()=>{if(!R)return null;const ne=R.players.filter(qe=>qe.selected),Oe=R.guilds.filter(qe=>qe.selected);if(!ne.length&&!Oe.length)return null;const Ve=ne.map(qe=>{var ft,Mt,Lt,Ns,dt,ss;if(qe.values&&typeof qe.values=="object"){const cs={...qe.values};return cs.Identifier==null&&cs.ID==null&&(cs.Identifier=qe.playerId),cs["Guild Identifier"]==null&&(cs["Guild Identifier"]=(ft=qe.guildId)!=null?ft:""),cs.Timestamp==null&&(cs.Timestamp=qe.scanTimestampSec),cs.Server==null&&(cs.Server=qe.server),cs.Name==null&&(cs.Name=qe.name),cs.Class==null&&(cs.Class=(Mt=qe.className)!=null?Mt:""),cs.Level==null&&(cs.Level=(Lt=qe.level)!=null?Lt:""),cs}return{Identifier:qe.playerId,"Guild Identifier":(Ns=qe.guildId)!=null?Ns:"",Timestamp:qe.scanTimestampSec,Server:qe.server,Name:qe.name,Class:(dt=qe.className)!=null?dt:"",Level:(ss=qe.level)!=null?ss:""}}),ct=Oe.map(qe=>{var ft,Mt;if(qe.values&&typeof qe.values=="object"){const Lt={...qe.values};return Lt["Guild Identifier"]==null&&(Lt["Guild Identifier"]=qe.guildId),Lt["Guild Member Count"]==null&&(Lt["Guild Member Count"]=(ft=qe.memberCount)!=null?ft:qe.members.length),Lt.Timestamp==null&&(Lt.Timestamp=qe.scanTimestampSec),Lt.Server==null&&(Lt.Server=qe.server),Lt.Name==null&&(Lt.Name=qe.name),Lt}return{"Guild Identifier":qe.guildId,"Guild Member Count":(Mt=qe.memberCount)!=null?Mt:qe.members.length,Timestamp:qe.scanTimestampSec,Name:qe.name,Server:qe.server}});return{playersRows:Ve,guildsRows:ct}},Be=A.useCallback((ne,Oe)=>{re(Ve=>{const ct=Ve.usedGuildsToday+ne,qe=Ve.usedPlayersToday+Oe,ft={...Ve,usedGuildsToday:ct,usedPlayersToday:qe,remainingGuilds:Sx(Ve.config.dailyGuildLimit,ct),remainingPlayers:Sx(Ve.config.dailyPlayerLimit,qe),usageDate:Ve.today};return D1(Ve.config,{date:Ve.today,guilds:ct,players:qe}),ft})},[]),je=A.useMemo(()=>J.usageDate?J.usageDate===J.today?"Today":J.usageDate:"No uploads yet",[J.today,J.usageDate]),ue=J.config.dailyPlayerLimit===0,Pe=J.config.dailyGuildLimit===0,De=ue?m("uploadCenter.quota.unlimited"):J.config.dailyPlayerLimit,it=Pe?m("uploadCenter.quota.unlimited"):J.config.dailyGuildLimit,yt=ue?m("uploadCenter.quota.unlimited"):`${De} limit today`,ie=Pe?m("uploadCenter.quota.unlimited"):`${it} limit today`,he=ue?m("uploadCenter.quota.unlimited"):J.remainingPlayers,ve=Pe?m("uploadCenter.quota.unlimited"):J.remainingGuilds,Te=async()=>{var or,lr,gn;if(!R)return;const ne=Fe();if(!ne)return;const Oe=R.players.filter(ds=>ds.selected),Ve=R.guilds.filter(ds=>ds.selected),ct=Oe.length+Ve.length;if(!ct)return;const qe=(or=g==null?void 0:g.id)!=null?or:null,{config:ft,usedGuildsToday:Mt,usedPlayersToday:Lt}=J,Ns=Mt+Ve.length,dt=Lt+Oe.length,ss=Ns>ft.dailyGuildLimit,cs=dt>ft.dailyPlayerLimit;if(ss||cs){X(`Daily quota exceeded: You can import up to ${ft.dailyGuildLimit} guilds / ${ft.dailyPlayerLimit} players per day. Today you already imported ${Mt} guilds / ${Lt} players. This selection would bring you to ${Ns} guilds / ${dt} players.`);return}X(null),L({phase:"uploading",processed:0,total:ct,created:0,duplicate:0,error:0});const bs={processed:0,created:0,duplicate:0,error:0},On={processed:0,created:0,duplicate:0,error:0},Rn=()=>{const ds=Math.min(bs.processed+On.processed,ct),Es=ds>=ct&&ct>0?"finalizing":"uploading";L({phase:Es,processed:ds,total:ct,created:bs.created+On.created,duplicate:bs.duplicate+On.duplicate,error:bs.error+On.error})},ln=ds=>Es=>{var ht;if((Es==null?void 0:Es.pass)!=="scans")return;const fn=ds==="players"?bs:On;typeof Es.current=="number"&&(fn.processed=Math.min(Es.current,(ht=Es.total)!=null?ht:Es.current)),typeof Es.created=="number"&&(fn.created=Es.created),typeof Es.duplicate=="number"&&(fn.duplicate=Es.duplicate),typeof Es.error=="number"&&(fn.error=Es.error),Rn()};try{console.log("[UploadCenter] starting selection upload",{players:Oe.length,guilds:Ve.length});const ds=await E6(ne,{onProgress:ge=>{(ge==null?void 0:ge.kind)==="players"?ln("players")(ge):(ge==null?void 0:ge.kind)==="guilds"&&ln("guilds")(ge)}}),Es=R.id;let fn=!1,ht=!1;if(console.log("[UploadCenter] importSelectionToDb result",{playersSample:(lr=ds==null?void 0:ds.players)==null?void 0:lr.slice(0,5),guildsSample:(gn=ds==null?void 0:ds.guilds)==null?void 0:gn.slice(0,5),selectedPlayerKeys:Oe.slice(0,5).map(ge=>ge.key),selectedGuildKeys:Ve.slice(0,5).map(ge=>ge.key)}),((ds==null?void 0:ds.players)||[]).forEach(ge=>{fn=!0,h(Es,"player",ge.key,ge.status)}),((ds==null?void 0:ds.guilds)||[]).forEach(ge=>{ht=!0,h(Es,"guild",ge.key,ge.status)}),!fn&&!ht&&(Oe.forEach(ge=>h(Es,"player",ge.key,"created")),Ve.forEach(ge=>h(Es,"guild",ge.key,"created"))),Oe.length||Ve.length){if(Be(Ve.length,Oe.length),!qe)console.warn("[UploadCenter] Cannot persist upload usage because the user ID is missing.");else try{await oPe(qe,Ve.length,Oe.length)}catch(ge){console.error("[UploadCenter] Failed to record upload usage.",ge)}await se()}}catch(ds){console.error("[UploadCenter] Failed to upload selection",ds)}finally{L(ds=>({...ds,phase:"done"}))}};return s.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[s.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),s.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),s.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 md:p-5",children:[s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Upload quota"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Daily limits & usage"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Values are cached locally in your browser so you can resume uploads across page reloads."})]}),s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-800/80 px-3 py-2 text-xs text-slate-200",children:["Last upload: ",je]})]}),s.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-emerald-200/80",children:"Players"}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-semibold text-emerald-50",children:he}),s.jsx("span",{className:"text-sm text-emerald-100/80",children:"remaining"})]}),s.jsxs("div",{className:"mt-1 text-xs text-emerald-100/70",children:[J.usedPlayersToday," used / ",yt]})]}),s.jsxs("div",{className:"rounded-xl border border-sky-400/40 bg-sky-500/5 p-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-sky-200/80",children:"Guilds"}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-semibold text-sky-50",children:ve}),s.jsx("span",{className:"text-sm text-sky-100/80",children:"remaining"})]}),s.jsxs("div",{className:"mt-1 text-xs text-sky-100/70",children:[J.usedGuildsToday," used / ",ie]})]})]}),G&&s.jsx("div",{className:"mt-3 rounded-xl border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-50",children:G})]}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[s.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),s.jsx(L6,{mode:"session",onBuildUploadSession:ce})]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):s.jsx("div",{className:"flex flex-col gap-3",children:t.map(ne=>{const Oe=ne.id===e;return s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>r(ne.id),onKeyDown:Ve=>{(Ve.key==="Enter"||Ve.key===" ")&&(Ve.preventDefault(),r(ne.id))},className:["w-full rounded-xl border px-4 py-3 text-left transition",Oe?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-semibold",children:ne.sourceFilename||"Unnamed session"}),s.jsx("span",{className:"text-xs text-slate-400",children:_e(ne.createdAt)})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right text-xs text-slate-400",children:[s.jsxs("div",{children:["Players: ",ne.players.length]}),s.jsxs("div",{children:["Guilds: ",ne.guilds.length]})]}),s.jsx("button",{type:"button",onClick:Ve=>{Ve.stopPropagation(),window.confirm("Remove this session from the list? This will NOT delete any data from the database.")&&i(ne.id)},className:"rounded-full p-1 transition text-red-400 hover:text-red-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-300","aria-label":"Remove session",title:"Remove this session from the list",children:s.jsx(_9,{className:"h-4 w-4"})})]})]}),Oe&&s.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},ne.id)})}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"Scan uploads from Discord bot"}),W&&s.jsx("div",{className:"rounded-xl border border-amber-400/60 bg-amber-500/10 p-3 text-sm text-amber-100",children:W}),I?_?s.jsx("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Loading scan uploads..."}):k?s.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100",children:"Error loading scan uploads."}):b.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"No scan uploads from Discord bot yet."}):s.jsx("div",{className:"flex flex-col gap-3",children:b.map(ne=>{const Oe=z===ne.id,Ve=P.has(ne.id),ct=Oe||Ve;return s.jsxs("button",{type:"button",onClick:()=>{ct||Re(ne)},disabled:ct,title:Ve?"This scan is already loaded above. Remove it there to load it again.":void 0,className:["w-full rounded-xl border px-4 py-3 text-left text-slate-100 transition","border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:text-emerald-50",ct?"cursor-not-allowed opacity-70 bg-slate-700/60 text-slate-400":""].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-semibold",children:ne.queueId||ne.scanId||ne.id}),s.jsx("span",{className:"text-xs text-slate-400",children:le(ne.uploadedAt)}),ne.discordUsername&&s.jsx("span",{className:"text-xs text-slate-400",children:ne.discordUsername})]}),s.jsxs("div",{className:"text-right text-xs text-slate-400",children:[s.jsxs("div",{children:["Players CSV: ",ne.hasPlayersCsv?"yes":"no"]}),s.jsxs("div",{children:["Guilds CSV: ",ne.hasGuildsCsv?"yes":"no"]})]})]}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[te(ne.status),ne.serverCode&&s.jsxs("span",{className:"rounded-full border border-slate-600/70 bg-slate-800/60 px-2 py-0.5",children:["Server: ",ne.serverCode]}),ne.lastError&&s.jsxs("span",{className:"rounded-full border border-rose-500/60 bg-rose-500/10 px-2 py-0.5 text-rose-100",children:["Error: ",ne.lastError]}),s.jsx("span",{className:"rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-emerald-100",children:Ve?"Loaded":Oe?"Loading...":"Load into preview"})]})]},ne.id)})}):s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Link your Discord account to see bot uploads here."})]})]})}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:Te,disabled:Le||!R||!Ee,children:w.phase==="uploading"?"Uploading...":w.phase==="finalizing"?"Finalizing...":"Upload selected to DB"}),G&&s.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100",children:G}),w.total>0&&s.jsx("div",{className:"text-xs text-slate-300",children:w.phase==="uploading"?s.jsxs(s.Fragment,{children:["Uploading ",w.processed," / ",w.total," records (",Math.round(w.processed/Math.max(w.total,1)*100),"%) - ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):w.phase==="finalizing"?s.jsxs(s.Fragment,{children:["Finalizing import - ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):w.phase==="done"?s.jsxs(s.Fragment,{children:["Upload finished: ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):null}),R?s.jsx("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:`Active session: ${R.sourceFilename||R.id} - ${R.players.length} players, ${R.guilds.length} guilds`}):s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),R&&s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),s.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",R.players.length," total,"," ",R.players.filter(ne=>ne.selected).length," selected"]})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[s.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>c(R.id,!0),children:"Select all"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>c(R.id,!1),children:"Clear selection"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[s.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ne=>s.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",j===ne?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>S(ne),children:ne==="all"?"All":ne==="pending"?"Pending":ne==="inDb"?"In DB":"Error"},ne))}),s.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:T,onChange:ne=>F(ne.target.checked)}),s.jsx("span",{children:"Hide uploaded"})]})]}),ke.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):s.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{children:ke.map(ne=>{var Oe;return s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"checkbox",checked:ne.selected,onChange:()=>o(R.id,ne.key,!ne.selected)})}),s.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ne.name||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:ne.server||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:(Oe=ne.level)!=null?Oe:""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:s.jsx(_Pe,{className:ne.className})}),s.jsx("td",{className:"px-3 py-2",children:ee(ne.status)})]},ne.key)})})]})})]}),s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),s.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",R.guilds.length," total,"," ",R.guilds.filter(ne=>ne.selected).length," selected"]})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[s.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>u(R.id,!0),children:"Select all"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>u(R.id,!1),children:"Clear selection"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[s.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ne=>s.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",C===ne?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>M(ne),children:ne==="all"?"All":ne==="pending"?"Pending":ne==="inDb"?"In DB":"Error"},ne))}),s.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:D,onChange:ne=>V(ne.target.checked)}),s.jsx("span",{children:"Hide uploaded"})]})]}),Me.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):s.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{children:Me.map(ne=>{var ct;const Oe=N.has(ne.key),Ve=(ct=ne.memberCount)!=null?ct:ne.members.length;return s.jsxs(q.Fragment,{children:[s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>Ae(ne.key),"aria-expanded":Oe,children:Oe?"Collapse":"Expand"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"checkbox",checked:ne.selected,onChange:()=>a(R.id,ne.key,!ne.selected)})}),s.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ne.name||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:ne.server||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:Ve}),s.jsx("td",{className:"px-3 py-2",children:ee(ne.status)})]}),Oe&&s.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:s.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[s.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),ne.members.length===0?s.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):s.jsxs("table",{className:"w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),s.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),s.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),s.jsx("tbody",{children:ne.members.map(qe=>{var ft,Mt;return s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-2 py-1",children:qe.name||""}),s.jsx("td",{className:"px-2 py-1",children:(ft=qe.level)!=null?ft:""}),s.jsx("td",{className:"px-2 py-1",children:(Mt=qe.className)!=null?Mt:""})]},qe.key)})})]})]})})]},ne.key)})})]})})]})]})]})})]})}function SPe(){const{canUse:t}=oj();return t?s.jsx(wPe,{}):s.jsx(os,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[s.jsx(oE,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),s.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const NPe=t=>()=>s.jsx("div",{style:{padding:16},children:s.jsx("h2",{style:{color:"var(--title)"},children:t})}),Gi=NPe("Diese Unterseite existiert in der neuen Struktur nicht mehr."),C5=({tab:t})=>{const e=ir(),n=new URLSearchParams(e.search);n.set("tab",t);const r=n.toString();return s.jsx(uo,{to:`/toplists${r?`?${r}`:""}`,replace:!0})},us=(t,e,n,r=s.jsx(uo,{to:"/",replace:!0}))=>s.jsx(iPe,{featureId:t,route:e,fallback:r,children:n});Z8.createRoot(document.getElementById("root")).render(s.jsx(q.StrictMode,{children:s.jsx(iH,{children:s.jsx(CH,{children:s.jsx(PH,{children:s.jsxs(sPe,{children:[s.jsx(VF,{children:s.jsx(vF,{children:s.jsxs(Se,{element:s.jsx(PK,{}),children:[s.jsx(Se,{path:"/",element:us("main.home","/",s.jsx(xee,{}),s.jsx(uo,{to:"/login",replace:!0}))}),s.jsx(Se,{path:"/login",element:s.jsx(yee,{})}),s.jsx(Se,{path:"/dashboard",element:us("main.dashboard","/dashboard",s.jsx(bee,{}))}),s.jsx(Se,{path:"/dashboard/kpis",element:us("main.dashboard","/dashboard",s.jsx(jee,{}))}),s.jsx(Se,{path:"/dashboard/activity",element:us("main.dashboard","/dashboard",s.jsx(See,{}))}),s.jsx(Se,{path:"/dashboard/progression",element:us("main.dashboard","/dashboard",s.jsx(Nee,{}))}),s.jsx(Se,{path:"/discover",element:us("main.discover","/discover",s.jsx(kee,{}))}),s.jsx(Se,{path:"/toplists",element:us("main.toplists","/toplists",s.jsx(nre,{}))}),s.jsx(Se,{path:"/sfmagazine",element:s.jsx(Aee,{})}),s.jsx(Se,{path:"/sfmagazine/historybook",element:s.jsx(ote,{})}),s.jsx(Se,{path:"/help",element:s.jsx(wte,{})}),s.jsx(Se,{path:"/search",element:s.jsx(FAe,{})}),s.jsx(Se,{path:"/players",element:s.jsx(rre,{})}),s.jsx(Se,{path:"/players/rankings",element:s.jsx(ire,{})}),s.jsx(Se,{path:"/players/stats",element:s.jsx(are,{})}),s.jsx(Se,{path:"/players/profile",element:s.jsx(qb,{})}),s.jsx(Se,{path:"/players/profile/:identifier",element:s.jsx(qb,{})}),s.jsx(Se,{path:"/players/compare",element:s.jsx(kae,{})}),s.jsx(Se,{path:"/player/:identifier",element:s.jsx(qb,{})}),s.jsx(Se,{path:"/guilds",element:s.jsx(Lae,{})}),s.jsx(Se,{path:"/guilds/rankings",element:s.jsx(Dae,{})}),s.jsx(Se,{path:"/guilds/stats",element:s.jsx(Mae,{})}),s.jsx(Se,{path:"/guilds/profile",element:s.jsx(e1,{})}),s.jsx(Se,{path:"/guilds/profile/:guildId",element:s.jsx(e1,{})}),s.jsx(Se,{path:"/guild/:guildId",element:s.jsx(e1,{})}),s.jsx(Se,{path:"/servers",element:s.jsx(wce,{})}),s.jsx(Se,{path:"/servers/rankings",element:s.jsx(jce,{})}),s.jsx(Se,{path:"/servers/stats",element:s.jsx(Sce,{})}),s.jsx(Se,{path:"/servers/overview",element:s.jsx(sde,{})}),s.jsx(Se,{path:"/servers/profile",element:s.jsx(s1,{})}),s.jsx(Se,{path:"/servers/profile/:serverId",element:s.jsx(s1,{})}),s.jsx(Se,{path:"/server/:serverId",element:s.jsx(s1,{})}),s.jsx(Se,{path:"/u/:profileId",element:s.jsx(uue,{})}),s.jsx(Se,{path:"/guidehub/*",element:us("main.guidehub","/guidehub",s.jsx(Xfe,{}))}),s.jsx(Se,{path:"/guidehub-v2",element:us("main.guidehub","/guidehub-v2",s.jsx(Uye,{}))}),s.jsx(Se,{path:"/tools",element:us("main.tools","/tools",s.jsx(LAe,{}))}),s.jsx(Se,{path:"/upload-center",element:us("main.uploadCenter","/upload-center",s.jsx(SPe,{}),s.jsx(uo,{to:"/login",replace:!0}))}),s.jsx(Se,{path:"/UploadCenter",element:s.jsx(uo,{to:"/upload-center",replace:!0})}),s.jsx(Se,{path:"/community",element:us("main.community","/community",s.jsx(Dbe,{}))}),s.jsx(Se,{path:"/community/scans",element:us("main.community","/community",s.jsx(zL,{}))}),s.jsx(Se,{path:"/community/predictions",element:us("main.community","/community",s.jsx(GL,{}))}),s.jsx(Se,{path:"/community/creators",element:us("main.community","/community",s.jsx(UL,{}))}),s.jsx(Se,{path:"/community/feedback",element:us("main.community","/community",s.jsx(WL,{}))}),s.jsx(Se,{path:"/community/news",element:us("main.community","/community",s.jsx(HL,{}))}),s.jsx(Se,{path:"/community/records",element:us("main.community","/community",s.jsx(KL,{}))}),s.jsx(Se,{path:"/scans",element:us("main.scans","/scans",s.jsx(Mbe,{}))}),s.jsx(Se,{path:"/scans/latest",element:us("main.scans","/scans",s.jsx(Fbe,{}))}),s.jsx(Se,{path:"/scans/archive",element:us("main.scans","/scans",s.jsx(Bbe,{}))}),s.jsx(Se,{path:"/guild-hub",element:us("main.guildHub","/guild-hub",s.jsx($be,{}))}),s.jsx(Se,{path:"/guild-hub/planner",element:us("main.guildHub","/guild-hub",s.jsx(o_e,{}))}),s.jsx(Se,{path:"/guild-hub/fusion-planner",element:us("main.guildHub","/guild-hub",s.jsx(HSe,{}))}),s.jsx(Se,{path:"/guild-hub/compare-guilds",element:us("main.guildHub","/guild-hub",s.jsx(WSe,{}))}),s.jsx(Se,{path:"/guild-hub/waitlist",element:us("main.guildHub","/guild-hub",s.jsx(uke,{}))}),s.jsx(Se,{path:"/guild-hub/activity",element:us("main.guildHub","/guild-hub",s.jsx(yke,{}))}),s.jsx(Se,{path:"/guild-hub/imports",element:us("main.guildHub","/guild-hub",s.jsx(bke,{}))}),s.jsx(Se,{path:"/guild-hub/announcements",element:us("main.guildHub","/guild-hub",s.jsx(_ke,{}))}),s.jsx(Se,{path:"/guild-hub/events",element:us("main.guildHub","/guild-hub",s.jsx(wke,{}))}),s.jsx(Se,{path:"/guild-hub/roles",element:us("main.guildHub","/guild-hub",s.jsx(jke,{}))}),s.jsx(Se,{path:"/guild-hub/settings",element:us("main.guildHub","/guild-hub",s.jsx(Ske,{}))}),s.jsx(Se,{path:"/admin",element:us("main.admin","/admin",s.jsx(Tke,{}))}),s.jsx(Se,{path:"/admin/errors",element:us("main.admin","/admin",s.jsx(Pke,{}))}),s.jsx(Se,{path:"/admin/scans-uploaded",element:us("main.admin","/admin",s.jsx(Lke,{}))}),s.jsx(Se,{path:"/admin/creators-api",element:us("main.admin","/admin",s.jsx(Gke,{}))}),s.jsx(Se,{path:"/admin/users",element:us("main.admin","/admin",s.jsx(rCe,{}))}),s.jsx(Se,{path:"/settings",element:us("main.settings","/settings",s.jsx(uo,{to:"/settings/account",replace:!0}))}),s.jsx(Se,{path:"/settings/account",element:us("main.settings","/settings",s.jsx(UTe,{}))}),s.jsxs(Se,{path:"/playground",element:us("main.playground","/playground",s.jsx(GTe,{})),children:[s.jsx(Se,{index:!0,element:s.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),s.jsx(Se,{path:"list-views",element:s.jsx(XI,{})}),s.jsx(Se,{path:"rescan-widget",element:s.jsx(ZI,{})}),s.jsx(Se,{path:"upload-sim",element:s.jsx(e5,{})}),s.jsx(Se,{path:"theme-maker",element:s.jsx(FI,{})}),s.jsx(Se,{path:"theme-maker-pro",element:s.jsx($I,{})}),s.jsx(Se,{path:"gamified",element:s.jsx(xIe,{})}),s.jsx(Se,{path:"gamified-2",element:s.jsx(bIe,{})}),s.jsx(Se,{path:"gamified-3",element:s.jsx(jIe,{})}),s.jsx(Se,{path:"gamified-4",element:s.jsx(kIe,{})}),s.jsx(Se,{path:"gamified-5",element:s.jsx(IIe,{})}),s.jsx(Se,{path:"gamified-6",element:s.jsx(PIe,{})}),s.jsx(Se,{path:"gamified-7",element:s.jsx(DIe,{})}),s.jsx(Se,{path:"gamified-8",element:s.jsx(BIe,{})}),s.jsx(Se,{path:"am-rune-bonuses-demos",element:s.jsx(V3e,{})}),s.jsx(Se,{path:"templates/content-shell",element:s.jsx(t5e,{})}),s.jsx(Se,{path:"templates/blank",element:s.jsx(n5e,{})}),s.jsx(Se,{path:"templates/blank-alt",element:s.jsx(i5e,{})}),s.jsx(Se,{path:"templates/blank-layout-2",element:s.jsx(c5e,{})}),s.jsx(Se,{path:"templates/blank-layout-3",element:s.jsx(u5e,{})}),s.jsx(Se,{path:"templates/blank-layout-4",element:s.jsx(h5e,{})}),s.jsx(Se,{path:"portrait-maker",element:s.jsx(XIe,{})}),s.jsx(Se,{path:"hud",element:s.jsx(U3e,{})}),s.jsx(Se,{path:"hud/game-buttons",element:s.jsx(gIe,{})}),s.jsx(Se,{path:"core-ui/theme-maker",element:s.jsx(FI,{})}),s.jsx(Se,{path:"core-ui/theme-maker-pro",element:s.jsx($I,{})}),s.jsx(Se,{path:"core-ui/list-views",element:s.jsx(XI,{})}),s.jsx(Se,{path:"sync/rescan",element:s.jsx(ZI,{})}),s.jsx(Se,{path:"upload/sim",element:s.jsx(e5,{})}),s.jsx(Se,{path:"import/har",element:s.jsx(f5e,{})}),s.jsx(Se,{path:"import/json-csv",element:s.jsx(b5e,{})}),s.jsx(Se,{path:"import/schema",element:s.jsx(S5e,{})}),s.jsx(Se,{path:"hubs/player-contained",element:s.jsx(T5e,{})}),s.jsx(Se,{path:"hubs/guilds",element:s.jsx(P5e,{})}),s.jsx(Se,{path:"hubs/servers",element:s.jsx(M5e,{})}),s.jsx(Se,{path:"rankings/views",element:s.jsx(O5e,{})}),s.jsx(Se,{path:"analytics/kpi",element:s.jsx(G5e,{})}),s.jsx(Se,{path:"analytics/progression",element:s.jsx(q5e,{})}),s.jsx(Se,{path:"analytics/legendary-pets",element:s.jsx(J5e,{})}),s.jsx(Se,{path:"community/scans",element:s.jsx(sEe,{})}),s.jsx(Se,{path:"community/creators",element:s.jsx(aEe,{})}),s.jsx(Se,{path:"feedback/form",element:s.jsx(dEe,{})}),s.jsx(Se,{path:"feedback/admin",element:s.jsx(pEe,{})}),s.jsx(Se,{path:"help/tutorials",element:s.jsx(xEe,{})}),s.jsx(Se,{path:"help/wiki",element:s.jsx(wEe,{})}),s.jsx(Se,{path:"legal/tos",element:s.jsx(EEe,{})}),s.jsx(Se,{path:"legal/transparency",element:s.jsx(LEe,{})}),s.jsx(Se,{path:"settings",element:s.jsx(kEe,{})}),s.jsx(Se,{path:"pwa/update",element:s.jsx(BEe,{})}),s.jsx(Se,{path:"pwa/install",element:s.jsx(UEe,{})}),s.jsx(Se,{path:"connect/manual",element:s.jsx(WEe,{})}),s.jsx(Se,{path:"connect/userscript",element:s.jsx(YEe,{})}),s.jsx(Se,{path:"interop/exports",element:s.jsx(eAe,{})}),s.jsx(Se,{path:"interop/deeplinks",element:s.jsx(rAe,{})}),s.jsx(Se,{path:"admin/servers",element:s.jsx(lAe,{})}),s.jsx(Se,{path:"admin/jobs",element:s.jsx(hAe,{})}),s.jsx(Se,{path:"admin/flags",element:s.jsx(fAe,{})}),s.jsx(Se,{path:"perf/table-lab",element:s.jsx(bAe,{})}),s.jsx(Se,{path:"mobile/filters",element:s.jsx(SAe,{})}),s.jsx(Se,{path:"qa/a11y",element:s.jsx(TAe,{})})]}),s.jsx(Se,{path:"/latest-scan",element:s.jsx(uo,{to:"/scans/latest",replace:!0})}),s.jsx(Se,{path:"/old-scans",element:s.jsx(uo,{to:"/scans/archive",replace:!0})}),s.jsx(Se,{path:"/favorites",element:Gi()}),s.jsx(Se,{path:"/notifications",element:Gi()}),s.jsx(Se,{path:"/guilds/planner",element:Gi()}),s.jsx(Se,{path:"/guilds/fusion",element:Gi()}),s.jsx(Se,{path:"/guilds/academy",element:Gi()}),s.jsx(Se,{path:"/toplists/players",element:s.jsx(C5,{tab:"players"})}),s.jsx(Se,{path:"/toplists/guilds",element:s.jsx(C5,{tab:"guilds"})}),s.jsx(Se,{path:"/toplists/servers",element:Gi()}),s.jsx(Se,{path:"/settings/profile",element:Gi()}),s.jsx(Se,{path:"/settings/appearance",element:Gi()}),s.jsx(Se,{path:"/players/search",element:Gi()}),s.jsx(Se,{path:"/servers/list",element:Gi()}),s.jsx(Se,{path:"/servers/trend",element:Gi()}),s.jsx(Se,{path:"/scans/upload",element:Gi()}),s.jsx(Se,{path:"/scans/history",element:Gi()}),s.jsx(Se,{path:"*",element:s.jsx(uo,{to:"/",replace:!0})})]})})}),s.jsx(ePe,{})]})})})})}));

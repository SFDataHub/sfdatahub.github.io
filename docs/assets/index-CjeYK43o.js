import E5 from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function W_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O0={exports:{}},Jh={},V0={exports:{}},ps={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function G8(){if(_N)return ps;_N=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function x(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function A(G,X,J){this.props=G,this.context=X,this.refs=k,this.updater=J||b}A.prototype.isReactComponent={},A.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},A.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function L(){}L.prototype=A.prototype;function I(G,X,J){this.props=G,this.context=X,this.refs=k,this.updater=J||b}var N=I.prototype=new L;N.constructor=I,w(N,A.prototype),N.isPureReactComponent=!0;var v=Array.isArray,_=Object.prototype.hasOwnProperty,R={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(G,X,J){var se,ue={},Ne=null,Ee=null;if(X!=null)for(se in X.ref!==void 0&&(Ee=X.ref),X.key!==void 0&&(Ne=""+X.key),X)_.call(X,se)&&!j.hasOwnProperty(se)&&(ue[se]=X[se]);var ee=arguments.length-2;if(ee===1)ue.children=J;else if(1<ee){for(var le=Array(ee),re=0;re<ee;re++)le[re]=arguments[re+2];ue.children=le}if(G&&G.defaultProps)for(se in ee=G.defaultProps,ee)ue[se]===void 0&&(ue[se]=ee[se]);return{$$typeof:t,type:G,key:Ne,ref:Ee,props:ue,_owner:R.current}}function C(G,X){return{$$typeof:t,type:G.type,key:X,ref:G.ref,props:G.props,_owner:G._owner}}function M(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function T(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(J){return X[J]})}var F=/\/+/g;function D(G,X){return typeof G=="object"&&G!==null&&G.key!=null?T(""+G.key):X.toString(36)}function V(G,X,J,se,ue){var Ne=typeof G;(Ne==="undefined"||Ne==="boolean")&&(G=null);var Ee=!1;if(G===null)Ee=!0;else switch(Ne){case"string":case"number":Ee=!0;break;case"object":switch(G.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=G,ue=ue(Ee),G=se===""?"."+D(Ee,0):se,v(ue)?(J="",G!=null&&(J=G.replace(F,"$&/")+"/"),V(ue,X,J,"",function(re){return re})):ue!=null&&(M(ue)&&(ue=C(ue,J+(!ue.key||Ee&&Ee.key===ue.key?"":(""+ue.key).replace(F,"$&/")+"/")+G)),X.push(ue)),1;if(Ee=0,se=se===""?".":se+":",v(G))for(var ee=0;ee<G.length;ee++){Ne=G[ee];var le=se+D(Ne,ee);Ee+=V(Ne,X,J,le,ue)}else if(le=x(G),typeof le=="function")for(G=le.call(G),ee=0;!(Ne=G.next()).done;)Ne=Ne.value,le=se+D(Ne,ee++),Ee+=V(Ne,X,J,le,ue);else if(Ne==="object")throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ee}function U(G,X,J){if(G==null)return G;var se=[],ue=0;return V(G,se,"","",function(Ne){return X.call(J,Ne,ue++)}),se}function K(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(J){(G._status===0||G._status===-1)&&(G._status=1,G._result=J)},function(J){(G._status===0||G._status===-1)&&(G._status=2,G._result=J)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var H={current:null},z={transition:null},Y={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:z,ReactCurrentOwner:R};function te(){throw Error("act(...) is not supported in production builds of React.")}return ps.Children={map:U,forEach:function(G,X,J){U(G,function(){X.apply(this,arguments)},J)},count:function(G){var X=0;return U(G,function(){X++}),X},toArray:function(G){return U(G,function(X){return X})||[]},only:function(G){if(!M(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},ps.Component=A,ps.Fragment=n,ps.Profiler=i,ps.PureComponent=I,ps.StrictMode=r,ps.Suspense=u,ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ps.act=te,ps.cloneElement=function(G,X,J){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var se=w({},G.props),ue=G.key,Ne=G.ref,Ee=G._owner;if(X!=null){if(X.ref!==void 0&&(Ne=X.ref,Ee=R.current),X.key!==void 0&&(ue=""+X.key),G.type&&G.type.defaultProps)var ee=G.type.defaultProps;for(le in X)_.call(X,le)&&!j.hasOwnProperty(le)&&(se[le]=X[le]===void 0&&ee!==void 0?ee[le]:X[le])}var le=arguments.length-2;if(le===1)se.children=J;else if(1<le){ee=Array(le);for(var re=0;re<le;re++)ee[re]=arguments[re+2];se.children=ee}return{$$typeof:t,type:G.type,key:ue,ref:Ne,props:se,_owner:Ee}},ps.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:a,_context:G},G.Consumer=G},ps.createElement=S,ps.createFactory=function(G){var X=S.bind(null,G);return X.type=G,X},ps.createRef=function(){return{current:null}},ps.forwardRef=function(G){return{$$typeof:c,render:G}},ps.isValidElement=M,ps.lazy=function(G){return{$$typeof:m,_payload:{_status:-1,_result:G},_init:K}},ps.memo=function(G,X){return{$$typeof:h,type:G,compare:X===void 0?null:X}},ps.startTransition=function(G){var X=z.transition;z.transition={};try{G()}finally{z.transition=X}},ps.unstable_act=te,ps.useCallback=function(G,X){return H.current.useCallback(G,X)},ps.useContext=function(G){return H.current.useContext(G)},ps.useDebugValue=function(){},ps.useDeferredValue=function(G){return H.current.useDeferredValue(G)},ps.useEffect=function(G,X){return H.current.useEffect(G,X)},ps.useId=function(){return H.current.useId()},ps.useImperativeHandle=function(G,X,J){return H.current.useImperativeHandle(G,X,J)},ps.useInsertionEffect=function(G,X){return H.current.useInsertionEffect(G,X)},ps.useLayoutEffect=function(G,X){return H.current.useLayoutEffect(G,X)},ps.useMemo=function(G,X){return H.current.useMemo(G,X)},ps.useReducer=function(G,X,J){return H.current.useReducer(G,X,J)},ps.useRef=function(G){return H.current.useRef(G)},ps.useState=function(G){return H.current.useState(G)},ps.useSyncExternalStore=function(G,X,J){return H.current.useSyncExternalStore(G,X,J)},ps.useTransition=function(){return H.current.useTransition()},ps.version="18.3.1",ps}var wN;function K_(){return wN||(wN=1,V0.exports=G8()),V0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function H8(){if(jN)return Jh;jN=1;var t=K_(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,h){var m,g={},x=null,b=null;h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(b=u.ref);for(m in u)r.call(u,m)&&!a.hasOwnProperty(m)&&(g[m]=u[m]);if(c&&c.defaultProps)for(m in u=c.defaultProps,u)g[m]===void 0&&(g[m]=u[m]);return{$$typeof:e,type:c,key:x,ref:b,props:g,_owner:i.current}}return Jh.Fragment=n,Jh.jsx=o,Jh.jsxs=o,Jh}var SN;function W8(){return SN||(SN=1,O0.exports=H8()),O0.exports}var s=W8(),P=K_();const q=W_(P);var lf={},U0={exports:{}},xi={},z0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function K8(){return NN||(NN=1,(function(t){function e(z,Y){var te=z.length;z.push(Y);e:for(;0<te;){var G=te-1>>>1,X=z[G];if(0<i(X,Y))z[G]=Y,z[te]=X,te=G;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],te=z.pop();if(te!==Y){z[0]=te;e:for(var G=0,X=z.length,J=X>>>1;G<J;){var se=2*(G+1)-1,ue=z[se],Ne=se+1,Ee=z[Ne];if(0>i(ue,te))Ne<X&&0>i(Ee,ue)?(z[G]=Ee,z[Ne]=te,G=Ne):(z[G]=ue,z[se]=te,G=se);else if(Ne<X&&0>i(Ee,te))z[G]=Ee,z[Ne]=te,G=Ne;else break e}}return Y}function i(z,Y){var te=z.sortIndex-Y.sortIndex;return te!==0?te:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,g=null,x=3,b=!1,w=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(z){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=z)r(h),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(h)}}function v(z){if(k=!1,N(z),!w)if(n(u)!==null)w=!0,K(_);else{var Y=n(h);Y!==null&&H(v,Y.startTime-z)}}function _(z,Y){w=!1,k&&(k=!1,L(S),S=-1),b=!0;var te=x;try{for(N(Y),g=n(u);g!==null&&(!(g.expirationTime>Y)||z&&!T());){var G=g.callback;if(typeof G=="function"){g.callback=null,x=g.priorityLevel;var X=G(g.expirationTime<=Y);Y=t.unstable_now(),typeof X=="function"?g.callback=X:g===n(u)&&r(u),N(Y)}else r(u);g=n(u)}if(g!==null)var J=!0;else{var se=n(h);se!==null&&H(v,se.startTime-Y),J=!1}return J}finally{g=null,x=te,b=!1}}var R=!1,j=null,S=-1,C=5,M=-1;function T(){return!(t.unstable_now()-M<C)}function F(){if(j!==null){var z=t.unstable_now();M=z;var Y=!0;try{Y=j(!0,z)}finally{Y?D():(R=!1,j=null)}}else R=!1}var D;if(typeof I=="function")D=function(){I(F)};else if(typeof MessageChannel!="undefined"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=F,D=function(){U.postMessage(null)}}else D=function(){A(F,0)};function K(z){j=z,R||(R=!0,D())}function H(z,Y){S=A(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){w||b||(w=!0,K(_))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var te=x;x=Y;try{return z()}finally{x=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=x;x=z;try{return Y()}finally{x=te}},t.unstable_scheduleCallback=function(z,Y,te){var G=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?G+te:G):te=G,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,z={id:m++,callback:Y,priorityLevel:z,startTime:te,expirationTime:X,sortIndex:-1},te>G?(z.sortIndex=te,e(h,z),n(u)===null&&z===n(h)&&(k?(L(S),S=-1):k=!0,H(v,te-G))):(z.sortIndex=X,e(u,z),w||b||(w=!0,K(_))),z},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(z){var Y=x;return function(){var te=x;x=Y;try{return z.apply(this,arguments)}finally{x=te}}}})(G0)),G0}var kN;function q8(){return kN||(kN=1,z0.exports=K8()),z0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function Q8(){if(CN)return xi;CN=1;var t=K_(),e=q8();function n(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(i[l]=d,l=0;l<d.length;l++)r.add(d[l])}var c=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function x(l){return u.call(g,l)?!0:u.call(m,l)?!1:h.test(l)?g[l]=!0:(m[l]=!0,!1)}function b(l,d,p,y){if(p!==null&&p.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,d,p,y){if(d===null||typeof d=="undefined"||b(l,d,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function k(l,d,p,y,E,$,W){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=p,this.propertyName=l,this.type=d,this.sanitizeURL=$,this.removeEmptyString=W}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){A[l]=new k(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];A[d]=new k(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){A[l]=new k(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){A[l]=new k(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){A[l]=new k(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){A[l]=new k(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){A[l]=new k(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){A[l]=new k(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){A[l]=new k(l,5,!1,l.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function I(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(L,I);A[d]=new k(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(L,I);A[d]=new k(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(L,I);A[d]=new k(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){A[l]=new k(l,1,!1,l.toLowerCase(),null,!1,!1)}),A.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){A[l]=new k(l,1,!1,l.toLowerCase(),null,!0,!0)});function N(l,d,p,y){var E=A.hasOwnProperty(d)?A[d]:null;(E!==null?E.type!==0:y||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(w(d,p,E,y)&&(p=null),y||E===null?x(d)&&(p===null?l.removeAttribute(d):l.setAttribute(d,""+p)):E.mustUseProperty?l[E.propertyName]=p===null?E.type===3?!1:"":p:(d=E.attributeName,y=E.attributeNamespace,p===null?l.removeAttribute(d):(E=E.type,p=E===3||E===4&&p===!0?"":""+p,y?l.setAttributeNS(y,d,p):l.setAttribute(d,p))))}var v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),z=Symbol.iterator;function Y(l){return l===null||typeof l!="object"?null:(l=z&&l[z]||l["@@iterator"],typeof l=="function"?l:null)}var te=Object.assign,G;function X(l){if(G===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);G=d&&d[1]||""}return`
`+G+l}var J=!1;function se(l,d){if(!l||J)return"";J=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Se){var y=Se}Reflect.construct(l,[],d)}else{try{d.call()}catch(Se){y=Se}l.call(d.prototype)}else{try{throw Error()}catch(Se){y=Se}l()}}catch(Se){if(Se&&y&&typeof Se.stack=="string"){for(var E=Se.stack.split(`
`),$=y.stack.split(`
`),W=E.length-1,Z=$.length-1;1<=W&&0<=Z&&E[W]!==$[Z];)Z--;for(;1<=W&&0<=Z;W--,Z--)if(E[W]!==$[Z]){if(W!==1||Z!==1)do if(W--,Z--,0>Z||E[W]!==$[Z]){var ie=`
`+E[W].replace(" at new "," at ");return l.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",l.displayName)),ie}while(1<=W&&0<=Z);break}}}finally{J=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?X(l):""}function ue(l){switch(l.tag){case 5:return X(l.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return l=se(l.type,!1),l;case 11:return l=se(l.type.render,!1),l;case 1:return l=se(l.type,!0),l;default:return""}}function Ne(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case R:return"Portal";case C:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case V:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case T:return(l.displayName||"Context")+".Consumer";case M:return(l._context.displayName||"Context")+".Provider";case F:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case U:return d=l.displayName||null,d!==null?d:Ne(l.type)||"Memo";case K:d=l._payload,l=l._init;try{return Ne(l(d))}catch(p){}}return null}function Ee(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(d);case 8:return d===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function ee(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function le(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function re(l){var d=le(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),y=""+l[d];if(!l.hasOwnProperty(d)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,$=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(W){y=""+W,$.call(this,W)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(W){y=""+W},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function be(l){l._valueTracker||(l._valueTracker=re(l))}function Te(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=le(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function Le(l){if(l=l||(typeof document!="undefined"?document:void 0),typeof l=="undefined")return null;try{return l.activeElement||l.body}catch(d){return l.body}}function Re(l,d){var p=d.checked;return te({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p!=null?p:l._wrapperState.initialChecked})}function Oe(l,d){var p=d.defaultValue==null?"":d.defaultValue,y=d.checked!=null?d.checked:d.defaultChecked;p=ee(d.value!=null?d.value:p),l._wrapperState={initialChecked:y,initialValue:p,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Me(l,d){d=d.checked,d!=null&&N(l,"checked",d,!1)}function De(l,d){Me(l,d);var p=ee(d.value),y=d.type;if(p!=null)y==="number"?(p===0&&l.value===""||l.value!=p)&&(l.value=""+p):l.value!==""+p&&(l.value=""+p);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?we(l,d.type,p):d.hasOwnProperty("defaultValue")&&we(l,d.type,ee(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Fe(l,d,p){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var y=d.type;if(!(y!=="submit"&&y!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,p||d===l.value||(l.value=d),l.defaultValue=d}p=l.name,p!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,p!==""&&(l.name=p)}function we(l,d,p){(d!=="number"||Le(l.ownerDocument)!==l)&&(p==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+p&&(l.defaultValue=""+p))}var de=Array.isArray;function Ie(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+ee(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function Ae(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Xe(l,d){var p=d.value;if(p==null){if(p=d.children,d=d.defaultValue,p!=null){if(d!=null)throw Error(n(92));if(de(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),p=d}l._wrapperState={initialValue:ee(p)}}function oe(l,d){var p=ee(d.value),y=ee(d.defaultValue);p!=null&&(p=""+p,p!==l.value&&(l.value=p),d.defaultValue==null&&l.defaultValue!==p&&(l.defaultValue=p)),y!=null&&(l.defaultValue=""+y)}function fe(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function me(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xe(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?me(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var tt,lt=(function(l){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(d,p,y,E){MSApp.execUnsafeLocalFunction(function(){return l(d,p,y,E)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(tt=tt||document.createElement("div"),tt.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=tt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function Je(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(l){bt.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),ut[d]=ut[l]})});function ft(l,d,p){return d==null||typeof d=="boolean"||d===""?"":p||typeof d!="number"||d===0||ut.hasOwnProperty(l)&&ut[l]?(""+d).trim():d+"px"}function mt(l,d){l=l.style;for(var p in d)if(d.hasOwnProperty(p)){var y=p.indexOf("--")===0,E=ft(p,d[p],y);p==="float"&&(p="cssFloat"),y?l.setProperty(p,E):l[p]=E}}var ot=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function os(l,d){if(d){if(ot[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function gt(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ne=null;function Ue(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ve=null,dt=null,qe=null;function _t(l){if(l=Fh(l)){if(typeof Ve!="function")throw Error(n(280));var d=l.stateNode;d&&(d=wg(d),Ve(l.stateNode,l.type,d))}}function Dt(l){dt?qe?qe.push(l):qe=[l]:dt=l}function Ot(){if(dt){var l=dt,d=qe;if(qe=dt=null,_t(l),d)for(l=0;l<d.length;l++)_t(d[l])}}function Be(l,d){return l(d)}function Ct(){}var ys=!1;function ke(l,d,p){if(ys)return l(d,p);ys=!0;try{return Be(l,d,p)}finally{ys=!1,(dt!==null||qe!==null)&&(Ct(),Ot())}}function Ss(l,d){var p=l.stateNode;if(p===null)return null;var y=wg(p);if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,d,typeof p));return p}var Qn=!1;if(c)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch(l){Qn=!1}function vr(l,d,p,y,E,$,W,Z,ie){var Se=Array.prototype.slice.call(arguments,3);try{d.apply(p,Se)}catch(Ge){this.onError(Ge)}}var nr=!1,xr=null,pn=!1,us=null,Ts={onError:function(l){nr=!0,xr=l}};function _n(l,d,p,y,E,$,W,Z,ie){nr=!1,xr=null,vr.apply(Ts,arguments)}function rr(l,d,p,y,E,$,W,Z,ie){if(_n.apply(this,arguments),nr){if(nr){var Se=xr;nr=!1,xr=null}else throw Error(n(198));pn||(pn=!0,us=Se)}}function Qt(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function Lr(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Yn(l){if(Qt(l)!==l)throw Error(n(188))}function Yi(l){var d=l.alternate;if(!d){if(d=Qt(l),d===null)throw Error(n(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var $=E.alternate;if($===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===$.child){for($=E.child;$;){if($===p)return Yn(E),l;if($===y)return Yn(E),d;$=$.sibling}throw Error(n(188))}if(p.return!==y.return)p=E,y=$;else{for(var W=!1,Z=E.child;Z;){if(Z===p){W=!0,p=E,y=$;break}if(Z===y){W=!0,y=E,p=$;break}Z=Z.sibling}if(!W){for(Z=$.child;Z;){if(Z===p){W=!0,p=$,y=E;break}if(Z===y){W=!0,y=$,p=E;break}Z=Z.sibling}if(!W)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:d}function ki(l){return l=Yi(l),l!==null?ci(l):null}function ci(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=ci(l);if(d!==null)return d;l=l.sibling}return null}var di=e.unstable_scheduleCallback,Ci=e.unstable_cancelCallback,Xi=e.unstable_shouldYield,Ji=e.unstable_requestPaint,Is=e.unstable_now,ya=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,Ti=e.unstable_UserBlockingPriority,Xs=e.unstable_NormalPriority,yc=e.unstable_LowPriority,bc=e.unstable_IdlePriority,xo=null,Dr=null;function Jp(l){if(Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(xo,l,void 0,(l.current.flags&128)===128)}catch(d){}}var Kr=Math.clz32?Math.clz32:eg,_h=Math.log,Zp=Math.LN2;function eg(l){return l>>>=0,l===0?32:31-(_h(l)/Zp|0)|0}var Ad=64,Pd=4194304;function ml(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function _c(l,d){var p=l.pendingLanes;if(p===0)return 0;var y=0,E=l.suspendedLanes,$=l.pingedLanes,W=p&268435455;if(W!==0){var Z=W&~E;Z!==0?y=ml(Z):($&=W,$!==0&&(y=ml($)))}else W=p&~E,W!==0?y=ml(W):$!==0&&(y=ml($));if(y===0)return 0;if(d!==0&&d!==y&&(d&E)===0&&(E=y&-y,$=d&-d,E>=$||E===16&&($&4194240)!==0))return d;if((y&4)!==0&&(y|=p&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=y;0<d;)p=31-Kr(d),E=1<<p,y|=l[p],d&=~E;return y}function fy(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,$=l.pendingLanes;0<$;){var W=31-Kr($),Z=1<<W,ie=E[W];ie===-1?((Z&p)===0||(Z&y)!==0)&&(E[W]=fy(Z,d)):ie<=d&&(l.expiredLanes|=Z),$&=~Z}}function Ii(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function wc(){var l=Ad;return Ad<<=1,(Ad&4194240)===0&&(Ad=64),l}function pl(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function gl(l,d,p){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-Kr(d),l[d]=p}function Qs(l,d){var p=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<p;){var E=31-Kr(p),$=1<<E;d[E]=0,y[E]=-1,l[E]=-1,p&=~$}}function fl(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-Kr(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}var bs=0;function vl(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var tg,Rd,sg,ng,rg,wh=!1,Ga=[],yr=null,ba=null,_a=null,xl=new Map,ea=new Map,Ha=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ig(l,d){switch(l){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":xl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(d.pointerId)}}function ui(l,d,p,y,E,$){return l===null||l.nativeEvent!==$?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:$,targetContainers:[E]},d!==null&&(d=Fh(d),d!==null&&Rd(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function xy(l,d,p,y,E){switch(d){case"focusin":return yr=ui(yr,l,d,p,y,E),!0;case"dragenter":return ba=ui(ba,l,d,p,y,E),!0;case"mouseover":return _a=ui(_a,l,d,p,y,E),!0;case"pointerover":var $=E.pointerId;return xl.set($,ui(xl.get($)||null,l,d,p,y,E)),!0;case"gotpointercapture":return $=E.pointerId,ea.set($,ui(ea.get($)||null,l,d,p,y,E)),!0}return!1}function ag(l){var d=Cc(l.target);if(d!==null){var p=Qt(d);if(p!==null){if(d=p.tag,d===13){if(d=Lr(p),d!==null){l.blockedOn=d,rg(l.priority,function(){sg(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function bo(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=Ld(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);ne=y,p.target.dispatchEvent(y),ne=null}else return d=Fh(p),d!==null&&Rd(d),l.blockedOn=p,!1;d.shift()}return!0}function jc(l,d,p){bo(l)&&p.delete(d)}function og(){wh=!1,yr!==null&&bo(yr)&&(yr=null),ba!==null&&bo(ba)&&(ba=null),_a!==null&&bo(_a)&&(_a=null),xl.forEach(jc),ea.forEach(jc)}function wa(l,d){l.blockedOn===d&&(l.blockedOn=null,wh||(wh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,og)))}function ja(l){function d(E){return wa(E,l)}if(0<Ga.length){wa(Ga[0],l);for(var p=1;p<Ga.length;p++){var y=Ga[p];y.blockedOn===l&&(y.blockedOn=null)}}for(yr!==null&&wa(yr,l),ba!==null&&wa(ba,l),_a!==null&&wa(_a,l),xl.forEach(d),ea.forEach(d),p=0;p<Ha.length;p++)y=Ha[p],y.blockedOn===l&&(y.blockedOn=null);for(;0<Ha.length&&(p=Ha[0],p.blockedOn===null);)ag(p),p.blockedOn===null&&Ha.shift()}var _o=v.ReactCurrentBatchConfig,yl=!0;function ln(l,d,p,y){var E=bs,$=_o.transition;_o.transition=null;try{bs=1,jh(l,d,p,y)}finally{bs=E,_o.transition=$}}function yy(l,d,p,y){var E=bs,$=_o.transition;_o.transition=null;try{bs=4,jh(l,d,p,y)}finally{bs=E,_o.transition=$}}function jh(l,d,p,y){if(yl){var E=Ld(l,d,p,y);if(E===null)Ey(l,d,y,Sc,p),ig(l,y);else if(xy(E,l,d,p,y))y.stopPropagation();else if(ig(l,y),d&4&&-1<vy.indexOf(l)){for(;E!==null;){var $=Fh(E);if($!==null&&tg($),$=Ld(l,d,p,y),$===null&&Ey(l,d,y,Sc,p),$===E)break;E=$}E!==null&&y.stopPropagation()}else Ey(l,d,y,null,p)}}var Sc=null;function Ld(l,d,p,y){if(Sc=null,l=Ue(y),l=Cc(l),l!==null)if(d=Qt(l),d===null)l=null;else if(p=d.tag,p===13){if(l=Lr(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return Sc=l,null}function Sh(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ya()){case Zi:return 1;case Ti:return 4;case Xs:case yc:return 16;case bc:return 536870912;default:return 16}default:return 16}}var Ei=null,Dd=null,hi=null;function Nh(){if(hi)return hi;var l,d=Dd,p=d.length,y,E="value"in Ei?Ei.value:Ei.textContent,$=E.length;for(l=0;l<p&&d[l]===E[l];l++);var W=p-l;for(y=1;y<=W&&d[p-y]===E[$-y];y++);return hi=E.slice(l,1<y?1-y:void 0)}function Md(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Wa(){return!0}function kh(){return!1}function br(l){function d(p,y,E,$,W){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=$,this.target=W,this.currentTarget=null;for(var Z in l)l.hasOwnProperty(Z)&&(p=l[Z],this[Z]=p?p($):$[Z]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?Wa:kh,this.isPropagationStopped=kh,this}return te(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),d}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fd=br(Sa),Ka=te({},Sa,{view:0,detail:0}),by=br(Ka),Bd,wo,bl,Nc=te({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==bl&&(bl&&l.type==="mousemove"?(Bd=l.screenX-bl.screenX,wo=l.screenY-bl.screenY):wo=Bd=0,bl=l),Bd)},movementY:function(l){return"movementY"in l?l.movementY:wo}}),$d=br(Nc),Ch=te({},Nc,{dataTransfer:0}),lg=br(Ch),Od=te({},Ka,{relatedTarget:0}),Vd=br(Od),cg=te({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),jo=br(cg),dg=te({},Sa,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),ug=br(dg),hg=te({},Sa,{data:0}),Th=br(hg),Ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pg(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=mg[l])?!!d[l]:!1}function qa(){return pg}var f=te({},Ka,{key:function(l){if(l.key){var d=Ud[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Md(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?qr[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(l){return l.type==="keypress"?Md(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Md(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),B=br(f),O=te({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q=br(O),ge=te({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),Ce=br(ge),it=te({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hs=br(it),Xn=te({},Nc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ns=br(Xn),ir=[9,13,27,32],Bn=c&&"CompositionEvent"in window,ta=null;c&&"documentMode"in document&&(ta=document.documentMode);var Ai=c&&"TextEvent"in window&&!ta,kc=c&&(!Bn||ta&&8<ta&&11>=ta),zd=" ",g2=!1;function f2(l,d){switch(l){case"keyup":return ir.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v2(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Gd=!1;function V6(l,d){switch(l){case"compositionend":return v2(d);case"keypress":return d.which!==32?null:(g2=!0,zd);case"textInput":return l=d.data,l===zd&&g2?null:l;default:return null}}function U6(l,d){if(Gd)return l==="compositionend"||!Bn&&f2(l,d)?(l=Nh(),hi=Dd=Ei=null,Gd=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return kc&&d.locale!=="ko"?null:d.data;default:return null}}var z6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x2(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!z6[l.type]:d==="textarea"}function y2(l,d,p,y){Dt(y),d=yg(d,"onChange"),0<d.length&&(p=new Fd("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Ih=null,Eh=null;function G6(l){F2(l,0)}function gg(l){var d=Qd(l);if(Te(d))return l}function H6(l,d){if(l==="change")return d}var b2=!1;if(c){var _y;if(c){var wy="oninput"in document;if(!wy){var _2=document.createElement("div");_2.setAttribute("oninput","return;"),wy=typeof _2.oninput=="function"}_y=wy}else _y=!1;b2=_y&&(!document.documentMode||9<document.documentMode)}function w2(){Ih&&(Ih.detachEvent("onpropertychange",j2),Eh=Ih=null)}function j2(l){if(l.propertyName==="value"&&gg(Eh)){var d=[];y2(d,Eh,l,Ue(l)),ke(G6,d)}}function W6(l,d,p){l==="focusin"?(w2(),Ih=d,Eh=p,Ih.attachEvent("onpropertychange",j2)):l==="focusout"&&w2()}function K6(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return gg(Eh)}function q6(l,d){if(l==="click")return gg(d)}function Q6(l,d){if(l==="input"||l==="change")return gg(d)}function Y6(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Na=typeof Object.is=="function"?Object.is:Y6;function Ah(l,d){if(Na(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!u.call(d,E)||!Na(l[E],d[E]))return!1}return!0}function S2(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function N2(l,d){var p=S2(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=S2(p)}}function k2(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?k2(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function C2(){for(var l=window,d=Le();d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch(y){p=!1}if(p)l=d.contentWindow;else break;d=Le(l.document)}return d}function jy(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function X6(l){var d=C2(),p=l.focusedElem,y=l.selectionRange;if(d!==p&&p&&p.ownerDocument&&k2(p.ownerDocument.documentElement,p)){if(y!==null&&jy(p)){if(d=y.start,l=y.end,l===void 0&&(l=d),"selectionStart"in p)p.selectionStart=d,p.selectionEnd=Math.min(l,p.value.length);else if(l=(d=p.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var E=p.textContent.length,$=Math.min(y.start,E);y=y.end===void 0?$:Math.min(y.end,E),!l.extend&&$>y&&(E=y,y=$,$=E),E=N2(p,$);var W=N2(p,y);E&&W&&(l.rangeCount!==1||l.anchorNode!==E.node||l.anchorOffset!==E.offset||l.focusNode!==W.node||l.focusOffset!==W.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),l.removeAllRanges(),$>y?(l.addRange(d),l.extend(W.node,W.offset)):(d.setEnd(W.node,W.offset),l.addRange(d)))}}for(d=[],l=p;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<d.length;p++)l=d[p],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var J6=c&&"documentMode"in document&&11>=document.documentMode,Hd=null,Sy=null,Ph=null,Ny=!1;function T2(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ny||Hd==null||Hd!==Le(y)||(y=Hd,"selectionStart"in y&&jy(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Ph&&Ah(Ph,y)||(Ph=y,y=yg(Sy,"onSelect"),0<y.length&&(d=new Fd("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=Hd)))}function fg(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Wd={animationend:fg("Animation","AnimationEnd"),animationiteration:fg("Animation","AnimationIteration"),animationstart:fg("Animation","AnimationStart"),transitionend:fg("Transition","TransitionEnd")},ky={},I2={};c&&(I2=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function vg(l){if(ky[l])return ky[l];if(!Wd[l])return l;var d=Wd[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in I2)return ky[l]=d[p];return l}var E2=vg("animationend"),A2=vg("animationiteration"),P2=vg("animationstart"),R2=vg("transitionend"),L2=new Map,D2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(l,d){L2.set(l,d),a(d,[l])}for(var Cy=0;Cy<D2.length;Cy++){var Ty=D2[Cy],Z6=Ty.toLowerCase(),e8=Ty[0].toUpperCase()+Ty.slice(1);_l(Z6,"on"+e8)}_l(E2,"onAnimationEnd"),_l(A2,"onAnimationIteration"),_l(P2,"onAnimationStart"),_l("dblclick","onDoubleClick"),_l("focusin","onFocus"),_l("focusout","onBlur"),_l(R2,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rh));function M2(l,d,p){var y=l.type||"unknown-event";l.currentTarget=p,rr(y,d,void 0,l),l.currentTarget=null}function F2(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var $=void 0;if(d)for(var W=y.length-1;0<=W;W--){var Z=y[W],ie=Z.instance,Se=Z.currentTarget;if(Z=Z.listener,ie!==$&&E.isPropagationStopped())break e;M2(E,Z,Se),$=ie}else for(W=0;W<y.length;W++){if(Z=y[W],ie=Z.instance,Se=Z.currentTarget,Z=Z.listener,ie!==$&&E.isPropagationStopped())break e;M2(E,Z,Se),$=ie}}}if(pn)throw l=us,pn=!1,us=null,l}function sn(l,d){var p=d[My];p===void 0&&(p=d[My]=new Set);var y=l+"__bubble";p.has(y)||(B2(d,l,2,!1),p.add(y))}function Iy(l,d,p){var y=0;d&&(y|=4),B2(p,l,y,d)}var xg="_reactListening"+Math.random().toString(36).slice(2);function Lh(l){if(!l[xg]){l[xg]=!0,r.forEach(function(p){p!=="selectionchange"&&(t8.has(p)||Iy(p,!1,l),Iy(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[xg]||(d[xg]=!0,Iy("selectionchange",!1,d))}}function B2(l,d,p,y){switch(Sh(d)){case 1:var E=ln;break;case 4:E=yy;break;default:E=jh}p=E.bind(null,d,p,l),E=void 0,!Qn||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function Ey(l,d,p,y,E){var $=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var W=y.tag;if(W===3||W===4){var Z=y.stateNode.containerInfo;if(Z===E||Z.nodeType===8&&Z.parentNode===E)break;if(W===4)for(W=y.return;W!==null;){var ie=W.tag;if((ie===3||ie===4)&&(ie=W.stateNode.containerInfo,ie===E||ie.nodeType===8&&ie.parentNode===E))return;W=W.return}for(;Z!==null;){if(W=Cc(Z),W===null)return;if(ie=W.tag,ie===5||ie===6){y=$=W;continue e}Z=Z.parentNode}}y=y.return}ke(function(){var Se=$,Ge=Ue(p),Qe=[];e:{var ze=L2.get(l);if(ze!==void 0){var pt=Fd,yt=l;switch(l){case"keypress":if(Md(p)===0)break e;case"keydown":case"keyup":pt=B;break;case"focusin":yt="focus",pt=Vd;break;case"focusout":yt="blur",pt=Vd;break;case"beforeblur":case"afterblur":pt=Vd;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Ce;break;case E2:case A2:case P2:pt=jo;break;case R2:pt=Hs;break;case"scroll":pt=by;break;case"wheel":pt=Ns;break;case"copy":case"cut":case"paste":pt=ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Q}var wt=(d&4)!==0,An=!wt&&l==="scroll",ve=wt?ze!==null?ze+"Capture":null:ze;wt=[];for(var ce=Se,ye;ce!==null;){ye=ce;var Ze=ye.stateNode;if(ye.tag===5&&Ze!==null&&(ye=Ze,ve!==null&&(Ze=Ss(ce,ve),Ze!=null&&wt.push(Dh(ce,Ze,ye)))),An)break;ce=ce.return}0<wt.length&&(ze=new pt(ze,yt,null,p,Ge),Qe.push({event:ze,listeners:wt}))}}if((d&7)===0){e:{if(ze=l==="mouseover"||l==="pointerover",pt=l==="mouseout"||l==="pointerout",ze&&p!==ne&&(yt=p.relatedTarget||p.fromElement)&&(Cc(yt)||yt[So]))break e;if((pt||ze)&&(ze=Ge.window===Ge?Ge:(ze=Ge.ownerDocument)?ze.defaultView||ze.parentWindow:window,pt?(yt=p.relatedTarget||p.toElement,pt=Se,yt=yt?Cc(yt):null,yt!==null&&(An=Qt(yt),yt!==An||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(pt=null,yt=Se),pt!==yt)){if(wt=$d,Ze="onMouseLeave",ve="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(wt=Q,Ze="onPointerLeave",ve="onPointerEnter",ce="pointer"),An=pt==null?ze:Qd(pt),ye=yt==null?ze:Qd(yt),ze=new wt(Ze,ce+"leave",pt,p,Ge),ze.target=An,ze.relatedTarget=ye,Ze=null,Cc(Ge)===Se&&(wt=new wt(ve,ce+"enter",yt,p,Ge),wt.target=ye,wt.relatedTarget=An,Ze=wt),An=Ze,pt&&yt)t:{for(wt=pt,ve=yt,ce=0,ye=wt;ye;ye=Kd(ye))ce++;for(ye=0,Ze=ve;Ze;Ze=Kd(Ze))ye++;for(;0<ce-ye;)wt=Kd(wt),ce--;for(;0<ye-ce;)ve=Kd(ve),ye--;for(;ce--;){if(wt===ve||ve!==null&&wt===ve.alternate)break t;wt=Kd(wt),ve=Kd(ve)}wt=null}else wt=null;pt!==null&&$2(Qe,ze,pt,wt,!1),yt!==null&&An!==null&&$2(Qe,An,yt,wt,!0)}}e:{if(ze=Se?Qd(Se):window,pt=ze.nodeName&&ze.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ze.type==="file")var kt=H6;else if(x2(ze))if(b2)kt=Q6;else{kt=K6;var Ft=W6}else(pt=ze.nodeName)&&pt.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(kt=q6);if(kt&&(kt=kt(l,Se))){y2(Qe,kt,p,Ge);break e}Ft&&Ft(l,ze,Se),l==="focusout"&&(Ft=ze._wrapperState)&&Ft.controlled&&ze.type==="number"&&we(ze,"number",ze.value)}switch(Ft=Se?Qd(Se):window,l){case"focusin":(x2(Ft)||Ft.contentEditable==="true")&&(Hd=Ft,Sy=Se,Ph=null);break;case"focusout":Ph=Sy=Hd=null;break;case"mousedown":Ny=!0;break;case"contextmenu":case"mouseup":case"dragend":Ny=!1,T2(Qe,p,Ge);break;case"selectionchange":if(J6)break;case"keydown":case"keyup":T2(Qe,p,Ge)}var Bt;if(Bn)e:{switch(l){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Gd?f2(l,p)&&(Kt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Kt="onCompositionStart");Kt&&(kc&&p.locale!=="ko"&&(Gd||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Gd&&(Bt=Nh()):(Ei=Ge,Dd="value"in Ei?Ei.value:Ei.textContent,Gd=!0)),Ft=yg(Se,Kt),0<Ft.length&&(Kt=new Th(Kt,l,null,p,Ge),Qe.push({event:Kt,listeners:Ft}),Bt?Kt.data=Bt:(Bt=v2(p),Bt!==null&&(Kt.data=Bt)))),(Bt=Ai?V6(l,p):U6(l,p))&&(Se=yg(Se,"onBeforeInput"),0<Se.length&&(Ge=new Th("onBeforeInput","beforeinput",null,p,Ge),Qe.push({event:Ge,listeners:Se}),Ge.data=Bt))}F2(Qe,d)})}function Dh(l,d,p){return{instance:l,listener:d,currentTarget:p}}function yg(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,$=E.stateNode;E.tag===5&&$!==null&&(E=$,$=Ss(l,p),$!=null&&y.unshift(Dh(l,$,E)),$=Ss(l,d),$!=null&&y.push(Dh(l,$,E))),l=l.return}return y}function Kd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function $2(l,d,p,y,E){for(var $=d._reactName,W=[];p!==null&&p!==y;){var Z=p,ie=Z.alternate,Se=Z.stateNode;if(ie!==null&&ie===y)break;Z.tag===5&&Se!==null&&(Z=Se,E?(ie=Ss(p,$),ie!=null&&W.unshift(Dh(p,ie,Z))):E||(ie=Ss(p,$),ie!=null&&W.push(Dh(p,ie,Z)))),p=p.return}W.length!==0&&l.push({event:d,listeners:W})}var s8=/\r\n?/g,n8=/\u0000|\uFFFD/g;function O2(l){return(typeof l=="string"?l:""+l).replace(s8,`
`).replace(n8,"")}function bg(l,d,p){if(d=O2(d),O2(l)!==d&&p)throw Error(n(425))}function _g(){}var Ay=null,Py=null;function Ry(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ly=typeof setTimeout=="function"?setTimeout:void 0,r8=typeof clearTimeout=="function"?clearTimeout:void 0,V2=typeof Promise=="function"?Promise:void 0,i8=typeof queueMicrotask=="function"?queueMicrotask:typeof V2!="undefined"?function(l){return V2.resolve(null).then(l).catch(a8)}:Ly;function a8(l){setTimeout(function(){throw l})}function Dy(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"){if(y===0){l.removeChild(E),ja(d);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=E}while(p);ja(d)}function wl(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function U2(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}var qd=Math.random().toString(36).slice(2),Qa="__reactFiber$"+qd,Mh="__reactProps$"+qd,So="__reactContainer$"+qd,My="__reactEvents$"+qd,o8="__reactListeners$"+qd,l8="__reactHandles$"+qd;function Cc(l){var d=l[Qa];if(d)return d;for(var p=l.parentNode;p;){if(d=p[So]||p[Qa]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=U2(l);l!==null;){if(p=l[Qa])return p;l=U2(l)}return d}l=p,p=l.parentNode}return null}function Fh(l){return l=l[Qa]||l[So],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Qd(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function wg(l){return l[Mh]||null}var Fy=[],Yd=-1;function jl(l){return{current:l}}function nn(l){0>Yd||(l.current=Fy[Yd],Fy[Yd]=null,Yd--)}function Js(l,d){Yd++,Fy[Yd]=l.current,l.current=d}var Sl={},Mr=jl(Sl),mi=jl(!1),Tc=Sl;function Xd(l,d){var p=l.type.contextTypes;if(!p)return Sl;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===d)return y.__reactInternalMemoizedMaskedChildContext;var E={},$;for($ in p)E[$]=d[$];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=E),E}function pi(l){return l=l.childContextTypes,l!=null}function jg(){nn(mi),nn(Mr)}function z2(l,d,p){if(Mr.current!==Sl)throw Error(n(168));Js(Mr,d),Js(mi,p)}function G2(l,d,p){var y=l.stateNode;if(d=d.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var E in y)if(!(E in d))throw Error(n(108,Ee(l)||"Unknown",E));return te({},p,y)}function Sg(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Sl,Tc=Mr.current,Js(Mr,l),Js(mi,mi.current),!0}function H2(l,d,p){var y=l.stateNode;if(!y)throw Error(n(169));p?(l=G2(l,d,Tc),y.__reactInternalMemoizedMergedChildContext=l,nn(mi),nn(Mr),Js(Mr,l)):nn(mi),Js(mi,p)}var No=null,Ng=!1,By=!1;function W2(l){No===null?No=[l]:No.push(l)}function c8(l){Ng=!0,W2(l)}function Nl(){if(!By&&No!==null){By=!0;var l=0,d=bs;try{var p=No;for(bs=1;l<p.length;l++){var y=p[l];do y=y(!0);while(y!==null)}No=null,Ng=!1}catch(E){throw No!==null&&(No=No.slice(l+1)),di(Zi,Nl),E}finally{bs=d,By=!1}}return null}var Jd=[],Zd=0,kg=null,Cg=0,sa=[],na=0,Ic=null,ko=1,Co="";function Ec(l,d){Jd[Zd++]=Cg,Jd[Zd++]=kg,kg=l,Cg=d}function K2(l,d,p){sa[na++]=ko,sa[na++]=Co,sa[na++]=Ic,Ic=l;var y=ko;l=Co;var E=32-Kr(y)-1;y&=~(1<<E),p+=1;var $=32-Kr(d)+E;if(30<$){var W=E-E%5;$=(y&(1<<W)-1).toString(32),y>>=W,E-=W,ko=1<<32-Kr(d)+E|p<<E|y,Co=$+l}else ko=1<<$|p<<E|y,Co=l}function $y(l){l.return!==null&&(Ec(l,1),K2(l,1,0))}function Oy(l){for(;l===kg;)kg=Jd[--Zd],Jd[Zd]=null,Cg=Jd[--Zd],Jd[Zd]=null;for(;l===Ic;)Ic=sa[--na],sa[na]=null,Co=sa[--na],sa[na]=null,ko=sa[--na],sa[na]=null}var Pi=null,Ri=null,cn=!1,ka=null;function q2(l,d){var p=oa(5,null,null,0);p.elementType="DELETED",p.stateNode=d,p.return=l,d=l.deletions,d===null?(l.deletions=[p],l.flags|=16):d.push(p)}function Q2(l,d){switch(l.tag){case 5:var p=l.type;return d=d.nodeType!==1||p.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Pi=l,Ri=wl(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Pi=l,Ri=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(p=Ic!==null?{id:ko,overflow:Co}:null,l.memoizedState={dehydrated:d,treeContext:p,retryLane:1073741824},p=oa(18,null,null,0),p.stateNode=d,p.return=l,l.child=p,Pi=l,Ri=null,!0):!1;default:return!1}}function Vy(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Uy(l){if(cn){var d=Ri;if(d){var p=d;if(!Q2(l,d)){if(Vy(l))throw Error(n(418));d=wl(p.nextSibling);var y=Pi;d&&Q2(l,d)?q2(y,p):(l.flags=l.flags&-4097|2,cn=!1,Pi=l)}}else{if(Vy(l))throw Error(n(418));l.flags=l.flags&-4097|2,cn=!1,Pi=l}}}function Y2(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Pi=l}function Tg(l){if(l!==Pi)return!1;if(!cn)return Y2(l),cn=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!Ry(l.type,l.memoizedProps)),d&&(d=Ri)){if(Vy(l))throw X2(),Error(n(418));for(;d;)q2(l,d),d=wl(d.nextSibling)}if(Y2(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"){if(d===0){Ri=wl(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++}l=l.nextSibling}Ri=null}}else Ri=Pi?wl(l.stateNode.nextSibling):null;return!0}function X2(){for(var l=Ri;l;)l=wl(l.nextSibling)}function eu(){Ri=Pi=null,cn=!1}function zy(l){ka===null?ka=[l]:ka.push(l)}var d8=v.ReactCurrentBatchConfig;function Bh(l,d,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var y=p.stateNode}if(!y)throw Error(n(147,l));var E=y,$=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(W){var Z=E.refs;W===null?delete Z[$]:Z[$]=W},d._stringRef=$,d)}if(typeof l!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,l))}return l}function Ig(l,d){throw l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function J2(l){var d=l._init;return d(l._payload)}function Z2(l){function d(ve,ce){if(l){var ye=ve.deletions;ye===null?(ve.deletions=[ce],ve.flags|=16):ye.push(ce)}}function p(ve,ce){if(!l)return null;for(;ce!==null;)d(ve,ce),ce=ce.sibling;return null}function y(ve,ce){for(ve=new Map;ce!==null;)ce.key!==null?ve.set(ce.key,ce):ve.set(ce.index,ce),ce=ce.sibling;return ve}function E(ve,ce){return ve=Rl(ve,ce),ve.index=0,ve.sibling=null,ve}function $(ve,ce,ye){return ve.index=ye,l?(ye=ve.alternate,ye!==null?(ye=ye.index,ye<ce?(ve.flags|=2,ce):ye):(ve.flags|=2,ce)):(ve.flags|=1048576,ce)}function W(ve){return l&&ve.alternate===null&&(ve.flags|=2),ve}function Z(ve,ce,ye,Ze){return ce===null||ce.tag!==6?(ce=L0(ye,ve.mode,Ze),ce.return=ve,ce):(ce=E(ce,ye),ce.return=ve,ce)}function ie(ve,ce,ye,Ze){var kt=ye.type;return kt===j?Ge(ve,ce,ye.props.children,Ze,ye.key):ce!==null&&(ce.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===K&&J2(kt)===ce.type)?(Ze=E(ce,ye.props),Ze.ref=Bh(ve,ce,ye),Ze.return=ve,Ze):(Ze=Zg(ye.type,ye.key,ye.props,null,ve.mode,Ze),Ze.ref=Bh(ve,ce,ye),Ze.return=ve,Ze)}function Se(ve,ce,ye,Ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?(ce=D0(ye,ve.mode,Ze),ce.return=ve,ce):(ce=E(ce,ye.children||[]),ce.return=ve,ce)}function Ge(ve,ce,ye,Ze,kt){return ce===null||ce.tag!==7?(ce=Bc(ye,ve.mode,Ze,kt),ce.return=ve,ce):(ce=E(ce,ye),ce.return=ve,ce)}function Qe(ve,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=L0(""+ce,ve.mode,ye),ce.return=ve,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case _:return ye=Zg(ce.type,ce.key,ce.props,null,ve.mode,ye),ye.ref=Bh(ve,null,ce),ye.return=ve,ye;case R:return ce=D0(ce,ve.mode,ye),ce.return=ve,ce;case K:var Ze=ce._init;return Qe(ve,Ze(ce._payload),ye)}if(de(ce)||Y(ce))return ce=Bc(ce,ve.mode,ye,null),ce.return=ve,ce;Ig(ve,ce)}return null}function ze(ve,ce,ye,Ze){var kt=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return kt!==null?null:Z(ve,ce,""+ye,Ze);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case _:return ye.key===kt?ie(ve,ce,ye,Ze):null;case R:return ye.key===kt?Se(ve,ce,ye,Ze):null;case K:return kt=ye._init,ze(ve,ce,kt(ye._payload),Ze)}if(de(ye)||Y(ye))return kt!==null?null:Ge(ve,ce,ye,Ze,null);Ig(ve,ye)}return null}function pt(ve,ce,ye,Ze,kt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return ve=ve.get(ye)||null,Z(ce,ve,""+Ze,kt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case _:return ve=ve.get(Ze.key===null?ye:Ze.key)||null,ie(ce,ve,Ze,kt);case R:return ve=ve.get(Ze.key===null?ye:Ze.key)||null,Se(ce,ve,Ze,kt);case K:var Ft=Ze._init;return pt(ve,ce,ye,Ft(Ze._payload),kt)}if(de(Ze)||Y(Ze))return ve=ve.get(ye)||null,Ge(ce,ve,Ze,kt,null);Ig(ce,Ze)}return null}function yt(ve,ce,ye,Ze){for(var kt=null,Ft=null,Bt=ce,Kt=ce=0,lr=null;Bt!==null&&Kt<ye.length;Kt++){Bt.index>Kt?(lr=Bt,Bt=null):lr=Bt.sibling;var Ds=ze(ve,Bt,ye[Kt],Ze);if(Ds===null){Bt===null&&(Bt=lr);break}l&&Bt&&Ds.alternate===null&&d(ve,Bt),ce=$(Ds,ce,Kt),Ft===null?kt=Ds:Ft.sibling=Ds,Ft=Ds,Bt=lr}if(Kt===ye.length)return p(ve,Bt),cn&&Ec(ve,Kt),kt;if(Bt===null){for(;Kt<ye.length;Kt++)Bt=Qe(ve,ye[Kt],Ze),Bt!==null&&(ce=$(Bt,ce,Kt),Ft===null?kt=Bt:Ft.sibling=Bt,Ft=Bt);return cn&&Ec(ve,Kt),kt}for(Bt=y(ve,Bt);Kt<ye.length;Kt++)lr=pt(Bt,ve,Kt,ye[Kt],Ze),lr!==null&&(l&&lr.alternate!==null&&Bt.delete(lr.key===null?Kt:lr.key),ce=$(lr,ce,Kt),Ft===null?kt=lr:Ft.sibling=lr,Ft=lr);return l&&Bt.forEach(function(Ll){return d(ve,Ll)}),cn&&Ec(ve,Kt),kt}function wt(ve,ce,ye,Ze){var kt=Y(ye);if(typeof kt!="function")throw Error(n(150));if(ye=kt.call(ye),ye==null)throw Error(n(151));for(var Ft=kt=null,Bt=ce,Kt=ce=0,lr=null,Ds=ye.next();Bt!==null&&!Ds.done;Kt++,Ds=ye.next()){Bt.index>Kt?(lr=Bt,Bt=null):lr=Bt.sibling;var Ll=ze(ve,Bt,Ds.value,Ze);if(Ll===null){Bt===null&&(Bt=lr);break}l&&Bt&&Ll.alternate===null&&d(ve,Bt),ce=$(Ll,ce,Kt),Ft===null?kt=Ll:Ft.sibling=Ll,Ft=Ll,Bt=lr}if(Ds.done)return p(ve,Bt),cn&&Ec(ve,Kt),kt;if(Bt===null){for(;!Ds.done;Kt++,Ds=ye.next())Ds=Qe(ve,Ds.value,Ze),Ds!==null&&(ce=$(Ds,ce,Kt),Ft===null?kt=Ds:Ft.sibling=Ds,Ft=Ds);return cn&&Ec(ve,Kt),kt}for(Bt=y(ve,Bt);!Ds.done;Kt++,Ds=ye.next())Ds=pt(Bt,ve,Kt,Ds.value,Ze),Ds!==null&&(l&&Ds.alternate!==null&&Bt.delete(Ds.key===null?Kt:Ds.key),ce=$(Ds,ce,Kt),Ft===null?kt=Ds:Ft.sibling=Ds,Ft=Ds);return l&&Bt.forEach(function(z8){return d(ve,z8)}),cn&&Ec(ve,Kt),kt}function An(ve,ce,ye,Ze){if(typeof ye=="object"&&ye!==null&&ye.type===j&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case _:e:{for(var kt=ye.key,Ft=ce;Ft!==null;){if(Ft.key===kt){if(kt=ye.type,kt===j){if(Ft.tag===7){p(ve,Ft.sibling),ce=E(Ft,ye.props.children),ce.return=ve,ve=ce;break e}}else if(Ft.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===K&&J2(kt)===Ft.type){p(ve,Ft.sibling),ce=E(Ft,ye.props),ce.ref=Bh(ve,Ft,ye),ce.return=ve,ve=ce;break e}p(ve,Ft);break}else d(ve,Ft);Ft=Ft.sibling}ye.type===j?(ce=Bc(ye.props.children,ve.mode,Ze,ye.key),ce.return=ve,ve=ce):(Ze=Zg(ye.type,ye.key,ye.props,null,ve.mode,Ze),Ze.ref=Bh(ve,ce,ye),Ze.return=ve,ve=Ze)}return W(ve);case R:e:{for(Ft=ye.key;ce!==null;){if(ce.key===Ft)if(ce.tag===4&&ce.stateNode.containerInfo===ye.containerInfo&&ce.stateNode.implementation===ye.implementation){p(ve,ce.sibling),ce=E(ce,ye.children||[]),ce.return=ve,ve=ce;break e}else{p(ve,ce);break}else d(ve,ce);ce=ce.sibling}ce=D0(ye,ve.mode,Ze),ce.return=ve,ve=ce}return W(ve);case K:return Ft=ye._init,An(ve,ce,Ft(ye._payload),Ze)}if(de(ye))return yt(ve,ce,ye,Ze);if(Y(ye))return wt(ve,ce,ye,Ze);Ig(ve,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,ce!==null&&ce.tag===6?(p(ve,ce.sibling),ce=E(ce,ye),ce.return=ve,ve=ce):(p(ve,ce),ce=L0(ye,ve.mode,Ze),ce.return=ve,ve=ce),W(ve)):p(ve,ce)}return An}var tu=Z2(!0),eS=Z2(!1),Eg=jl(null),Ag=null,su=null,Gy=null;function Hy(){Gy=su=Ag=null}function Wy(l){var d=Eg.current;nn(Eg),l._currentValue=d}function Ky(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function nu(l,d){Ag=l,Gy=su=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(gi=!0),l.firstContext=null)}function ra(l){var d=l._currentValue;if(Gy!==l)if(l={context:l,memoizedValue:d,next:null},su===null){if(Ag===null)throw Error(n(308));su=l,Ag.dependencies={lanes:0,firstContext:l}}else su=su.next=l;return d}var Ac=null;function qy(l){Ac===null?Ac=[l]:Ac.push(l)}function tS(l,d,p,y){var E=d.interleaved;return E===null?(p.next=p,qy(d)):(p.next=E.next,E.next=p),d.interleaved=p,To(l,y)}function To(l,d){l.lanes|=d;var p=l.alternate;for(p!==null&&(p.lanes|=d),p=l,l=l.return;l!==null;)l.childLanes|=d,p=l.alternate,p!==null&&(p.childLanes|=d),p=l,l=l.return;return p.tag===3?p.stateNode:null}var kl=!1;function Qy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sS(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Io(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function Cl(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Es&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,To(l,p)}return E=y.interleaved,E===null?(d.next=d,qy(y)):(d.next=E.next,E.next=d),y.interleaved=d,To(l,p)}function Pg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194240)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,fl(l,p)}}function nS(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,$=null;if(p=p.firstBaseUpdate,p!==null){do{var W={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};$===null?E=$=W:$=$.next=W,p=p.next}while(p!==null);$===null?E=$=d:$=$.next=d}else E=$=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:$,shared:y.shared,effects:y.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}function Rg(l,d,p,y){var E=l.updateQueue;kl=!1;var $=E.firstBaseUpdate,W=E.lastBaseUpdate,Z=E.shared.pending;if(Z!==null){E.shared.pending=null;var ie=Z,Se=ie.next;ie.next=null,W===null?$=Se:W.next=Se,W=ie;var Ge=l.alternate;Ge!==null&&(Ge=Ge.updateQueue,Z=Ge.lastBaseUpdate,Z!==W&&(Z===null?Ge.firstBaseUpdate=Se:Z.next=Se,Ge.lastBaseUpdate=ie))}if($!==null){var Qe=E.baseState;W=0,Ge=Se=ie=null,Z=$;do{var ze=Z.lane,pt=Z.eventTime;if((y&ze)===ze){Ge!==null&&(Ge=Ge.next={eventTime:pt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var yt=l,wt=Z;switch(ze=d,pt=p,wt.tag){case 1:if(yt=wt.payload,typeof yt=="function"){Qe=yt.call(pt,Qe,ze);break e}Qe=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=wt.payload,ze=typeof yt=="function"?yt.call(pt,Qe,ze):yt,ze==null)break e;Qe=te({},Qe,ze);break e;case 2:kl=!0}}Z.callback!==null&&Z.lane!==0&&(l.flags|=64,ze=E.effects,ze===null?E.effects=[Z]:ze.push(Z))}else pt={eventTime:pt,lane:ze,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ge===null?(Se=Ge=pt,ie=Qe):Ge=Ge.next=pt,W|=ze;if(Z=Z.next,Z===null){if(Z=E.shared.pending,Z===null)break;ze=Z,Z=ze.next,ze.next=null,E.lastBaseUpdate=ze,E.shared.pending=null}}while(!0);if(Ge===null&&(ie=Qe),E.baseState=ie,E.firstBaseUpdate=Se,E.lastBaseUpdate=Ge,d=E.shared.interleaved,d!==null){E=d;do W|=E.lane,E=E.next;while(E!==d)}else $===null&&(E.shared.lanes=0);Lc|=W,l.lanes=W,l.memoizedState=Qe}}function rS(l,d,p){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var y=l[d],E=y.callback;if(E!==null){if(y.callback=null,y=p,typeof E!="function")throw Error(n(191,E));E.call(y)}}}var $h={},Ya=jl($h),Oh=jl($h),Vh=jl($h);function Pc(l){if(l===$h)throw Error(n(174));return l}function Yy(l,d){switch(Js(Vh,d),Js(Oh,l),Js(Ya,$h),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:xe(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=xe(d,l)}nn(Ya),Js(Ya,d)}function ru(){nn(Ya),nn(Oh),nn(Vh)}function iS(l){Pc(Vh.current);var d=Pc(Ya.current),p=xe(d,l.type);d!==p&&(Js(Oh,l),Js(Ya,p))}function Xy(l){Oh.current===l&&(nn(Ya),nn(Oh))}var gn=jl(0);function Lg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Jy=[];function Zy(){for(var l=0;l<Jy.length;l++)Jy[l]._workInProgressVersionPrimary=null;Jy.length=0}var Dg=v.ReactCurrentDispatcher,e0=v.ReactCurrentBatchConfig,Rc=0,fn=null,Jn=null,ar=null,Mg=!1,Uh=!1,zh=0,u8=0;function Fr(){throw Error(n(321))}function t0(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Na(l[p],d[p]))return!1;return!0}function s0(l,d,p,y,E,$){if(Rc=$,fn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Dg.current=l===null||l.memoizedState===null?g8:f8,l=p(y,E),Uh){$=0;do{if(Uh=!1,zh=0,25<=$)throw Error(n(301));$+=1,ar=Jn=null,d.updateQueue=null,Dg.current=v8,l=p(y,E)}while(Uh)}if(Dg.current=$g,d=Jn!==null&&Jn.next!==null,Rc=0,ar=Jn=fn=null,Mg=!1,d)throw Error(n(300));return l}function n0(){var l=zh!==0;return zh=0,l}function Xa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?fn.memoizedState=ar=l:ar=ar.next=l,ar}function ia(){if(Jn===null){var l=fn.alternate;l=l!==null?l.memoizedState:null}else l=Jn.next;var d=ar===null?fn.memoizedState:ar.next;if(d!==null)ar=d,Jn=l;else{if(l===null)throw Error(n(310));Jn=l,l={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},ar===null?fn.memoizedState=ar=l:ar=ar.next=l}return ar}function Gh(l,d){return typeof d=="function"?d(l):d}function r0(l){var d=ia(),p=d.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var y=Jn,E=y.baseQueue,$=p.pending;if($!==null){if(E!==null){var W=E.next;E.next=$.next,$.next=W}y.baseQueue=E=$,p.pending=null}if(E!==null){$=E.next,y=y.baseState;var Z=W=null,ie=null,Se=$;do{var Ge=Se.lane;if((Rc&Ge)===Ge)ie!==null&&(ie=ie.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),y=Se.hasEagerState?Se.eagerState:l(y,Se.action);else{var Qe={lane:Ge,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};ie===null?(Z=ie=Qe,W=y):ie=ie.next=Qe,fn.lanes|=Ge,Lc|=Ge}Se=Se.next}while(Se!==null&&Se!==$);ie===null?W=y:ie.next=Z,Na(y,d.memoizedState)||(gi=!0),d.memoizedState=y,d.baseState=W,d.baseQueue=ie,p.lastRenderedState=y}if(l=p.interleaved,l!==null){E=l;do $=E.lane,fn.lanes|=$,Lc|=$,E=E.next;while(E!==l)}else E===null&&(p.lanes=0);return[d.memoizedState,p.dispatch]}function i0(l){var d=ia(),p=d.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,$=d.memoizedState;if(E!==null){p.pending=null;var W=E=E.next;do $=l($,W.action),W=W.next;while(W!==E);Na($,d.memoizedState)||(gi=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),p.lastRenderedState=$}return[$,y]}function aS(){}function oS(l,d){var p=fn,y=ia(),E=d(),$=!Na(y.memoizedState,E);if($&&(y.memoizedState=E,gi=!0),y=y.queue,a0(dS.bind(null,p,y,l),[l]),y.getSnapshot!==d||$||ar!==null&&ar.memoizedState.tag&1){if(p.flags|=2048,Hh(9,cS.bind(null,p,y,E,d),void 0,null),or===null)throw Error(n(349));(Rc&30)!==0||lS(p,d,E)}return E}function lS(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=fn.updateQueue,d===null?(d={lastEffect:null,stores:null},fn.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function cS(l,d,p,y){d.value=p,d.getSnapshot=y,uS(d)&&hS(l)}function dS(l,d,p){return p(function(){uS(d)&&hS(l)})}function uS(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Na(l,p)}catch(y){return!0}}function hS(l){var d=To(l,1);d!==null&&Ea(d,l,1,-1)}function mS(l){var d=Xa();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:l},d.queue=l,l=l.dispatch=p8.bind(null,fn,l),[d.memoizedState,l]}function Hh(l,d,p,y){return l={tag:l,create:d,destroy:p,deps:y,next:null},d=fn.updateQueue,d===null?(d={lastEffect:null,stores:null},fn.updateQueue=d,d.lastEffect=l.next=l):(p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l)),l}function pS(){return ia().memoizedState}function Fg(l,d,p,y){var E=Xa();fn.flags|=l,E.memoizedState=Hh(1|d,p,void 0,y===void 0?null:y)}function Bg(l,d,p,y){var E=ia();y=y===void 0?null:y;var $=void 0;if(Jn!==null){var W=Jn.memoizedState;if($=W.destroy,y!==null&&t0(y,W.deps)){E.memoizedState=Hh(d,p,$,y);return}}fn.flags|=l,E.memoizedState=Hh(1|d,p,$,y)}function gS(l,d){return Fg(8390656,8,l,d)}function a0(l,d){return Bg(2048,8,l,d)}function fS(l,d){return Bg(4,2,l,d)}function vS(l,d){return Bg(4,4,l,d)}function xS(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function yS(l,d,p){return p=p!=null?p.concat([l]):null,Bg(4,4,xS.bind(null,d,l),p)}function o0(){}function bS(l,d){var p=ia();d=d===void 0?null:d;var y=p.memoizedState;return y!==null&&d!==null&&t0(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function _S(l,d){var p=ia();d=d===void 0?null:d;var y=p.memoizedState;return y!==null&&d!==null&&t0(d,y[1])?y[0]:(l=l(),p.memoizedState=[l,d],l)}function wS(l,d,p){return(Rc&21)===0?(l.baseState&&(l.baseState=!1,gi=!0),l.memoizedState=p):(Na(p,d)||(p=wc(),fn.lanes|=p,Lc|=p,l.baseState=!0),d)}function h8(l,d){var p=bs;bs=p!==0&&4>p?p:4,l(!0);var y=e0.transition;e0.transition={};try{l(!1),d()}finally{bs=p,e0.transition=y}}function jS(){return ia().memoizedState}function m8(l,d,p){var y=Al(l);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},SS(l))NS(d,p);else if(p=tS(l,d,p,y),p!==null){var E=Yr();Ea(p,l,y,E),kS(p,d,y)}}function p8(l,d,p){var y=Al(l),E={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(SS(l))NS(d,E);else{var $=l.alternate;if(l.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var W=d.lastRenderedState,Z=$(W,p);if(E.hasEagerState=!0,E.eagerState=Z,Na(Z,W)){var ie=d.interleaved;ie===null?(E.next=E,qy(d)):(E.next=ie.next,ie.next=E),d.interleaved=E;return}}catch(Se){}finally{}p=tS(l,d,E,y),p!==null&&(E=Yr(),Ea(p,l,y,E),kS(p,d,y))}}function SS(l){var d=l.alternate;return l===fn||d!==null&&d===fn}function NS(l,d){Uh=Mg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function kS(l,d,p){if((p&4194240)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,fl(l,p)}}var $g={readContext:ra,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},g8={readContext:ra,useCallback:function(l,d){return Xa().memoizedState=[l,d===void 0?null:d],l},useContext:ra,useEffect:gS,useImperativeHandle:function(l,d,p){return p=p!=null?p.concat([l]):null,Fg(4194308,4,xS.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Fg(4194308,4,l,d)},useInsertionEffect:function(l,d){return Fg(4,2,l,d)},useMemo:function(l,d){var p=Xa();return d=d===void 0?null:d,l=l(),p.memoizedState=[l,d],l},useReducer:function(l,d,p){var y=Xa();return d=p!==void 0?p(d):d,y.memoizedState=y.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},y.queue=l,l=l.dispatch=m8.bind(null,fn,l),[y.memoizedState,l]},useRef:function(l){var d=Xa();return l={current:l},d.memoizedState=l},useState:mS,useDebugValue:o0,useDeferredValue:function(l){return Xa().memoizedState=l},useTransition:function(){var l=mS(!1),d=l[0];return l=h8.bind(null,l[1]),Xa().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,p){var y=fn,E=Xa();if(cn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=d(),or===null)throw Error(n(349));(Rc&30)!==0||lS(y,d,p)}E.memoizedState=p;var $={value:p,getSnapshot:d};return E.queue=$,gS(dS.bind(null,y,$,l),[l]),y.flags|=2048,Hh(9,cS.bind(null,y,$,p,d),void 0,null),p},useId:function(){var l=Xa(),d=or.identifierPrefix;if(cn){var p=Co,y=ko;p=(y&~(1<<32-Kr(y)-1)).toString(32)+p,d=":"+d+"R"+p,p=zh++,0<p&&(d+="H"+p.toString(32)),d+=":"}else p=u8++,d=":"+d+"r"+p.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},f8={readContext:ra,useCallback:bS,useContext:ra,useEffect:a0,useImperativeHandle:yS,useInsertionEffect:fS,useLayoutEffect:vS,useMemo:_S,useReducer:r0,useRef:pS,useState:function(){return r0(Gh)},useDebugValue:o0,useDeferredValue:function(l){var d=ia();return wS(d,Jn.memoizedState,l)},useTransition:function(){var l=r0(Gh)[0],d=ia().memoizedState;return[l,d]},useMutableSource:aS,useSyncExternalStore:oS,useId:jS,unstable_isNewReconciler:!1},v8={readContext:ra,useCallback:bS,useContext:ra,useEffect:a0,useImperativeHandle:yS,useInsertionEffect:fS,useLayoutEffect:vS,useMemo:_S,useReducer:i0,useRef:pS,useState:function(){return i0(Gh)},useDebugValue:o0,useDeferredValue:function(l){var d=ia();return Jn===null?d.memoizedState=l:wS(d,Jn.memoizedState,l)},useTransition:function(){var l=i0(Gh)[0],d=ia().memoizedState;return[l,d]},useMutableSource:aS,useSyncExternalStore:oS,useId:jS,unstable_isNewReconciler:!1};function Ca(l,d){if(l&&l.defaultProps){d=te({},d),l=l.defaultProps;for(var p in l)d[p]===void 0&&(d[p]=l[p]);return d}return d}function l0(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:te({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var Og={isMounted:function(l){return(l=l._reactInternals)?Qt(l)===l:!1},enqueueSetState:function(l,d,p){l=l._reactInternals;var y=Yr(),E=Al(l),$=Io(y,E);$.payload=d,p!=null&&($.callback=p),d=Cl(l,$,E),d!==null&&(Ea(d,l,E,y),Pg(d,l,E))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=Yr(),E=Al(l),$=Io(y,E);$.tag=1,$.payload=d,p!=null&&($.callback=p),d=Cl(l,$,E),d!==null&&(Ea(d,l,E,y),Pg(d,l,E))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Yr(),y=Al(l),E=Io(p,y);E.tag=2,d!=null&&(E.callback=d),d=Cl(l,E,y),d!==null&&(Ea(d,l,y,p),Pg(d,l,y))}};function CS(l,d,p,y,E,$,W){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,$,W):d.prototype&&d.prototype.isPureReactComponent?!Ah(p,y)||!Ah(E,$):!0}function TS(l,d,p){var y=!1,E=Sl,$=d.contextType;return typeof $=="object"&&$!==null?$=ra($):(E=pi(d)?Tc:Mr.current,y=d.contextTypes,$=(y=y!=null)?Xd(l,E):Sl),d=new d(p,$),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Og,l.stateNode=d,d._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=$),d}function IS(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&Og.enqueueReplaceState(d,d.state,null)}function c0(l,d,p,y){var E=l.stateNode;E.props=p,E.state=l.memoizedState,E.refs={},Qy(l);var $=d.contextType;typeof $=="object"&&$!==null?E.context=ra($):($=pi(d)?Tc:Mr.current,E.context=Xd(l,$)),E.state=l.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(l0(l,d,$,p),E.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Og.enqueueReplaceState(E,E.state,null),Rg(l,p,E,y),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}function iu(l,d){try{var p="",y=d;do p+=ue(y),y=y.return;while(y);var E=p}catch($){E=`
Error generating stack: `+$.message+`
`+$.stack}return{value:l,source:d,stack:E,digest:null}}function d0(l,d,p){return{value:l,source:null,stack:p!=null?p:null,digest:d!=null?d:null}}function u0(l,d){try{console.error(d.value)}catch(p){setTimeout(function(){throw p})}}var x8=typeof WeakMap=="function"?WeakMap:Map;function ES(l,d,p){p=Io(-1,p),p.tag=3,p.payload={element:null};var y=d.value;return p.callback=function(){Kg||(Kg=!0,k0=y),u0(l,d)},p}function AS(l,d,p){p=Io(-1,p),p.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var E=d.value;p.payload=function(){return y(E)},p.callback=function(){u0(l,d)}}var $=l.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(p.callback=function(){u0(l,d),typeof y!="function"&&(Il===null?Il=new Set([this]):Il.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),p}function PS(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new x8;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(E.add(p),l=P8.bind(null,l,d,p),d.then(l,l))}function RS(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function LS(l,d,p,y,E){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(d=Io(-1,1),d.tag=2,Cl(p,d,1))),p.lanes|=1),l):(l.flags|=65536,l.lanes=E,l)}var y8=v.ReactCurrentOwner,gi=!1;function Qr(l,d,p,y){d.child=l===null?eS(d,null,p,y):tu(d,l.child,p,y)}function DS(l,d,p,y,E){p=p.render;var $=d.ref;return nu(d,E),y=s0(l,d,p,y,$,E),p=n0(),l!==null&&!gi?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~E,Eo(l,d,E)):(cn&&p&&$y(d),d.flags|=1,Qr(l,d,y,E),d.child)}function MS(l,d,p,y,E){if(l===null){var $=p.type;return typeof $=="function"&&!R0($)&&$.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(d.tag=15,d.type=$,FS(l,d,$,y,E)):(l=Zg(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if($=l.child,(l.lanes&E)===0){var W=$.memoizedProps;if(p=p.compare,p=p!==null?p:Ah,p(W,y)&&l.ref===d.ref)return Eo(l,d,E)}return d.flags|=1,l=Rl($,y),l.ref=d.ref,l.return=d,d.child=l}function FS(l,d,p,y,E){if(l!==null){var $=l.memoizedProps;if(Ah($,y)&&l.ref===d.ref)if(gi=!1,d.pendingProps=y=$,(l.lanes&E)!==0)(l.flags&131072)!==0&&(gi=!0);else return d.lanes=l.lanes,Eo(l,d,E)}return h0(l,d,p,y,E)}function BS(l,d,p){var y=d.pendingProps,E=y.children,$=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Js(ou,Li),Li|=p;else{if((p&1073741824)===0)return l=$!==null?$.baseLanes|p:p,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,Js(ou,Li),Li|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=$!==null?$.baseLanes:p,Js(ou,Li),Li|=y}else $!==null?(y=$.baseLanes|p,d.memoizedState=null):y=p,Js(ou,Li),Li|=y;return Qr(l,d,E,p),d.child}function $S(l,d){var p=d.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(d.flags|=512,d.flags|=2097152)}function h0(l,d,p,y,E){var $=pi(p)?Tc:Mr.current;return $=Xd(d,$),nu(d,E),p=s0(l,d,p,y,$,E),y=n0(),l!==null&&!gi?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~E,Eo(l,d,E)):(cn&&y&&$y(d),d.flags|=1,Qr(l,d,p,E),d.child)}function OS(l,d,p,y,E){if(pi(p)){var $=!0;Sg(d)}else $=!1;if(nu(d,E),d.stateNode===null)Ug(l,d),TS(d,p,y),c0(d,p,y,E),y=!0;else if(l===null){var W=d.stateNode,Z=d.memoizedProps;W.props=Z;var ie=W.context,Se=p.contextType;typeof Se=="object"&&Se!==null?Se=ra(Se):(Se=pi(p)?Tc:Mr.current,Se=Xd(d,Se));var Ge=p.getDerivedStateFromProps,Qe=typeof Ge=="function"||typeof W.getSnapshotBeforeUpdate=="function";Qe||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Z!==y||ie!==Se)&&IS(d,W,y,Se),kl=!1;var ze=d.memoizedState;W.state=ze,Rg(d,y,W,E),ie=d.memoizedState,Z!==y||ze!==ie||mi.current||kl?(typeof Ge=="function"&&(l0(d,p,Ge,y),ie=d.memoizedState),(Z=kl||CS(d,p,Z,y,ze,ie,Se))?(Qe||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ie),W.props=y,W.state=ie,W.context=Se,y=Z):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{W=d.stateNode,sS(l,d),Z=d.memoizedProps,Se=d.type===d.elementType?Z:Ca(d.type,Z),W.props=Se,Qe=d.pendingProps,ze=W.context,ie=p.contextType,typeof ie=="object"&&ie!==null?ie=ra(ie):(ie=pi(p)?Tc:Mr.current,ie=Xd(d,ie));var pt=p.getDerivedStateFromProps;(Ge=typeof pt=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Z!==Qe||ze!==ie)&&IS(d,W,y,ie),kl=!1,ze=d.memoizedState,W.state=ze,Rg(d,y,W,E);var yt=d.memoizedState;Z!==Qe||ze!==yt||mi.current||kl?(typeof pt=="function"&&(l0(d,p,pt,y),yt=d.memoizedState),(Se=kl||CS(d,p,Se,y,ze,yt,ie)||!1)?(Ge||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(y,yt,ie),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(y,yt,ie)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||Z===l.memoizedProps&&ze===l.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&ze===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=yt),W.props=y,W.state=yt,W.context=ie,y=Se):(typeof W.componentDidUpdate!="function"||Z===l.memoizedProps&&ze===l.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&ze===l.memoizedState||(d.flags|=1024),y=!1)}return m0(l,d,p,y,$,E)}function m0(l,d,p,y,E,$){$S(l,d);var W=(d.flags&128)!==0;if(!y&&!W)return E&&H2(d,p,!1),Eo(l,d,$);y=d.stateNode,y8.current=d;var Z=W&&typeof p.getDerivedStateFromError!="function"?null:y.render();return d.flags|=1,l!==null&&W?(d.child=tu(d,l.child,null,$),d.child=tu(d,null,Z,$)):Qr(l,d,Z,$),d.memoizedState=y.state,E&&H2(d,p,!0),d.child}function VS(l){var d=l.stateNode;d.pendingContext?z2(l,d.pendingContext,d.pendingContext!==d.context):d.context&&z2(l,d.context,!1),Yy(l,d.containerInfo)}function US(l,d,p,y,E){return eu(),zy(E),d.flags|=256,Qr(l,d,p,y),d.child}var p0={dehydrated:null,treeContext:null,retryLane:0};function g0(l){return{baseLanes:l,cachePool:null,transitions:null}}function zS(l,d,p){var y=d.pendingProps,E=gn.current,$=!1,W=(d.flags&128)!==0,Z;if((Z=W)||(Z=l!==null&&l.memoizedState===null?!1:(E&2)!==0),Z?($=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),Js(gn,E&1),l===null)return Uy(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(W=y.children,l=y.fallback,$?(y=d.mode,$=d.child,W={mode:"hidden",children:W},(y&1)===0&&$!==null?($.childLanes=0,$.pendingProps=W):$=ef(W,y,0,null),l=Bc(l,y,p,null),$.return=d,l.return=d,$.sibling=l,d.child=$,d.child.memoizedState=g0(p),d.memoizedState=p0,l):f0(d,W));if(E=l.memoizedState,E!==null&&(Z=E.dehydrated,Z!==null))return b8(l,d,W,y,Z,E,p);if($){$=y.fallback,W=d.mode,E=l.child,Z=E.sibling;var ie={mode:"hidden",children:y.children};return(W&1)===0&&d.child!==E?(y=d.child,y.childLanes=0,y.pendingProps=ie,d.deletions=null):(y=Rl(E,ie),y.subtreeFlags=E.subtreeFlags&14680064),Z!==null?$=Rl(Z,$):($=Bc($,W,p,null),$.flags|=2),$.return=d,y.return=d,y.sibling=$,d.child=y,y=$,$=d.child,W=l.child.memoizedState,W=W===null?g0(p):{baseLanes:W.baseLanes|p,cachePool:null,transitions:W.transitions},$.memoizedState=W,$.childLanes=l.childLanes&~p,d.memoizedState=p0,y}return $=l.child,l=$.sibling,y=Rl($,{mode:"visible",children:y.children}),(d.mode&1)===0&&(y.lanes=p),y.return=d,y.sibling=null,l!==null&&(p=d.deletions,p===null?(d.deletions=[l],d.flags|=16):p.push(l)),d.child=y,d.memoizedState=null,y}function f0(l,d){return d=ef({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function Vg(l,d,p,y){return y!==null&&zy(y),tu(d,l.child,null,p),l=f0(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function b8(l,d,p,y,E,$,W){if(p)return d.flags&256?(d.flags&=-257,y=d0(Error(n(422))),Vg(l,d,W,y)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):($=y.fallback,E=d.mode,y=ef({mode:"visible",children:y.children},E,0,null),$=Bc($,E,W,null),$.flags|=2,y.return=d,$.return=d,y.sibling=$,d.child=y,(d.mode&1)!==0&&tu(d,l.child,null,W),d.child.memoizedState=g0(W),d.memoizedState=p0,$);if((d.mode&1)===0)return Vg(l,d,W,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var Z=y.dgst;return y=Z,$=Error(n(419)),y=d0($,y,void 0),Vg(l,d,W,y)}if(Z=(W&l.childLanes)!==0,gi||Z){if(y=or,y!==null){switch(W&-W){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|W))!==0?0:E,E!==0&&E!==$.retryLane&&($.retryLane=E,To(l,E),Ea(y,l,E,-1))}return P0(),y=d0(Error(n(421))),Vg(l,d,W,y)}return E.data==="$?"?(d.flags|=128,d.child=l.child,d=R8.bind(null,l),E._reactRetry=d,null):(l=$.treeContext,Ri=wl(E.nextSibling),Pi=d,cn=!0,ka=null,l!==null&&(sa[na++]=ko,sa[na++]=Co,sa[na++]=Ic,ko=l.id,Co=l.overflow,Ic=d),d=f0(d,y.children),d.flags|=4096,d)}function GS(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),Ky(l.return,d,p)}function v0(l,d,p,y,E){var $=l.memoizedState;$===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=y,$.tail=p,$.tailMode=E)}function HS(l,d,p){var y=d.pendingProps,E=y.revealOrder,$=y.tail;if(Qr(l,d,y.children,p),y=gn.current,(y&2)!==0)y=y&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&GS(l,p,d);else if(l.tag===19)GS(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Js(gn,y),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Lg(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),v0(d,!1,E,p,$);break;case"backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Lg(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}v0(d,!0,p,null,$);break;case"together":v0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ug(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function Eo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),Lc|=d.lanes,(p&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,p=Rl(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Rl(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function _8(l,d,p){switch(d.tag){case 3:VS(d),eu();break;case 5:iS(d);break;case 1:pi(d.type)&&Sg(d);break;case 4:Yy(d,d.stateNode.containerInfo);break;case 10:var y=d.type._context,E=d.memoizedProps.value;Js(Eg,y._currentValue),y._currentValue=E;break;case 13:if(y=d.memoizedState,y!==null)return y.dehydrated!==null?(Js(gn,gn.current&1),d.flags|=128,null):(p&d.child.childLanes)!==0?zS(l,d,p):(Js(gn,gn.current&1),l=Eo(l,d,p),l!==null?l.sibling:null);Js(gn,gn.current&1);break;case 19:if(y=(p&d.childLanes)!==0,(l.flags&128)!==0){if(y)return HS(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Js(gn,gn.current),y)break;return null;case 22:case 23:return d.lanes=0,BS(l,d,p)}return Eo(l,d,p)}var WS,x0,KS,qS;WS=function(l,d){for(var p=d.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},x0=function(){},KS=function(l,d,p,y){var E=l.memoizedProps;if(E!==y){l=d.stateNode,Pc(Ya.current);var $=null;switch(p){case"input":E=Re(l,E),y=Re(l,y),$=[];break;case"select":E=te({},E,{value:void 0}),y=te({},y,{value:void 0}),$=[];break;case"textarea":E=Ae(l,E),y=Ae(l,y),$=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=_g)}os(p,y);var W;p=null;for(Se in E)if(!y.hasOwnProperty(Se)&&E.hasOwnProperty(Se)&&E[Se]!=null)if(Se==="style"){var Z=E[Se];for(W in Z)Z.hasOwnProperty(W)&&(p||(p={}),p[W]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(i.hasOwnProperty(Se)?$||($=[]):($=$||[]).push(Se,null));for(Se in y){var ie=y[Se];if(Z=E!=null?E[Se]:void 0,y.hasOwnProperty(Se)&&ie!==Z&&(ie!=null||Z!=null))if(Se==="style")if(Z){for(W in Z)!Z.hasOwnProperty(W)||ie&&ie.hasOwnProperty(W)||(p||(p={}),p[W]="");for(W in ie)ie.hasOwnProperty(W)&&Z[W]!==ie[W]&&(p||(p={}),p[W]=ie[W])}else p||($||($=[]),$.push(Se,p)),p=ie;else Se==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,Z=Z?Z.__html:void 0,ie!=null&&Z!==ie&&($=$||[]).push(Se,ie)):Se==="children"?typeof ie!="string"&&typeof ie!="number"||($=$||[]).push(Se,""+ie):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(i.hasOwnProperty(Se)?(ie!=null&&Se==="onScroll"&&sn("scroll",l),$||Z===ie||($=[])):($=$||[]).push(Se,ie))}p&&($=$||[]).push("style",p);var Se=$;(d.updateQueue=Se)&&(d.flags|=4)}},qS=function(l,d,p,y){p!==y&&(d.flags|=4)};function Wh(l,d){if(!cn)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Br(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function w8(l,d,p){var y=d.pendingProps;switch(Oy(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(d),null;case 1:return pi(d.type)&&jg(),Br(d),null;case 3:return y=d.stateNode,ru(),nn(mi),nn(Mr),Zy(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(Tg(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ka!==null&&(I0(ka),ka=null))),x0(l,d),Br(d),null;case 5:Xy(d);var E=Pc(Vh.current);if(p=d.type,l!==null&&d.stateNode!=null)KS(l,d,p,y,E),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!y){if(d.stateNode===null)throw Error(n(166));return Br(d),null}if(l=Pc(Ya.current),Tg(d)){y=d.stateNode,p=d.type;var $=d.memoizedProps;switch(y[Qa]=d,y[Mh]=$,l=(d.mode&1)!==0,p){case"dialog":sn("cancel",y),sn("close",y);break;case"iframe":case"object":case"embed":sn("load",y);break;case"video":case"audio":for(E=0;E<Rh.length;E++)sn(Rh[E],y);break;case"source":sn("error",y);break;case"img":case"image":case"link":sn("error",y),sn("load",y);break;case"details":sn("toggle",y);break;case"input":Oe(y,$),sn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!$.multiple},sn("invalid",y);break;case"textarea":Xe(y,$),sn("invalid",y)}os(p,$),E=null;for(var W in $)if($.hasOwnProperty(W)){var Z=$[W];W==="children"?typeof Z=="string"?y.textContent!==Z&&($.suppressHydrationWarning!==!0&&bg(y.textContent,Z,l),E=["children",Z]):typeof Z=="number"&&y.textContent!==""+Z&&($.suppressHydrationWarning!==!0&&bg(y.textContent,Z,l),E=["children",""+Z]):i.hasOwnProperty(W)&&Z!=null&&W==="onScroll"&&sn("scroll",y)}switch(p){case"input":be(y),Fe(y,$,!0);break;case"textarea":be(y),fe(y);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(y.onclick=_g)}y=E,d.updateQueue=y,y!==null&&(d.flags|=4)}else{W=E.nodeType===9?E:E.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=me(p)),l==="http://www.w3.org/1999/xhtml"?p==="script"?(l=W.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=W.createElement(p,{is:y.is}):(l=W.createElement(p),p==="select"&&(W=l,y.multiple?W.multiple=!0:y.size&&(W.size=y.size))):l=W.createElementNS(l,p),l[Qa]=d,l[Mh]=y,WS(l,d,!1,!1),d.stateNode=l;e:{switch(W=gt(p,y),p){case"dialog":sn("cancel",l),sn("close",l),E=y;break;case"iframe":case"object":case"embed":sn("load",l),E=y;break;case"video":case"audio":for(E=0;E<Rh.length;E++)sn(Rh[E],l);E=y;break;case"source":sn("error",l),E=y;break;case"img":case"image":case"link":sn("error",l),sn("load",l),E=y;break;case"details":sn("toggle",l),E=y;break;case"input":Oe(l,y),E=Re(l,y),sn("invalid",l);break;case"option":E=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},E=te({},y,{value:void 0}),sn("invalid",l);break;case"textarea":Xe(l,y),E=Ae(l,y),sn("invalid",l);break;default:E=y}os(p,E),Z=E;for($ in Z)if(Z.hasOwnProperty($)){var ie=Z[$];$==="style"?mt(l,ie):$==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&lt(l,ie)):$==="children"?typeof ie=="string"?(p!=="textarea"||ie!=="")&&Je(l,ie):typeof ie=="number"&&Je(l,""+ie):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?ie!=null&&$==="onScroll"&&sn("scroll",l):ie!=null&&N(l,$,ie,W))}switch(p){case"input":be(l),Fe(l,y,!1);break;case"textarea":be(l),fe(l);break;case"option":y.value!=null&&l.setAttribute("value",""+ee(y.value));break;case"select":l.multiple=!!y.multiple,$=y.value,$!=null?Ie(l,!!y.multiple,$,!1):y.defaultValue!=null&&Ie(l,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(l.onclick=_g)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Br(d),null;case 6:if(l&&d.stateNode!=null)qS(l,d,l.memoizedProps,y);else{if(typeof y!="string"&&d.stateNode===null)throw Error(n(166));if(p=Pc(Vh.current),Pc(Ya.current),Tg(d)){if(y=d.stateNode,p=d.memoizedProps,y[Qa]=d,($=y.nodeValue!==p)&&(l=Pi,l!==null))switch(l.tag){case 3:bg(y.nodeValue,p,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&bg(y.nodeValue,p,(l.mode&1)!==0)}$&&(d.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Qa]=d,d.stateNode=y}return Br(d),null;case 13:if(nn(gn),y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(cn&&Ri!==null&&(d.mode&1)!==0&&(d.flags&128)===0)X2(),eu(),d.flags|=98560,$=!1;else if($=Tg(d),y!==null&&y.dehydrated!==null){if(l===null){if(!$)throw Error(n(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(n(317));$[Qa]=d}else eu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Br(d),$=!1}else ka!==null&&(I0(ka),ka=null),$=!0;if(!$)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=p,d):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(gn.current&1)!==0?Zn===0&&(Zn=3):P0())),d.updateQueue!==null&&(d.flags|=4),Br(d),null);case 4:return ru(),x0(l,d),l===null&&Lh(d.stateNode.containerInfo),Br(d),null;case 10:return Wy(d.type._context),Br(d),null;case 17:return pi(d.type)&&jg(),Br(d),null;case 19:if(nn(gn),$=d.memoizedState,$===null)return Br(d),null;if(y=(d.flags&128)!==0,W=$.rendering,W===null)if(y)Wh($,!1);else{if(Zn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(W=Lg(l),W!==null){for(d.flags|=128,Wh($,!1),y=W.updateQueue,y!==null&&(d.updateQueue=y,d.flags|=4),d.subtreeFlags=0,y=p,p=d.child;p!==null;)$=p,l=y,$.flags&=14680066,W=$.alternate,W===null?($.childLanes=0,$.lanes=l,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=W.childLanes,$.lanes=W.lanes,$.child=W.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=W.memoizedProps,$.memoizedState=W.memoizedState,$.updateQueue=W.updateQueue,$.type=W.type,l=W.dependencies,$.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),p=p.sibling;return Js(gn,gn.current&1|2),d.child}l=l.sibling}$.tail!==null&&Is()>lu&&(d.flags|=128,y=!0,Wh($,!1),d.lanes=4194304)}else{if(!y)if(l=Lg(W),l!==null){if(d.flags|=128,y=!0,p=l.updateQueue,p!==null&&(d.updateQueue=p,d.flags|=4),Wh($,!0),$.tail===null&&$.tailMode==="hidden"&&!W.alternate&&!cn)return Br(d),null}else 2*Is()-$.renderingStartTime>lu&&p!==1073741824&&(d.flags|=128,y=!0,Wh($,!1),d.lanes=4194304);$.isBackwards?(W.sibling=d.child,d.child=W):(p=$.last,p!==null?p.sibling=W:d.child=W,$.last=W)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=Is(),d.sibling=null,p=gn.current,Js(gn,y?p&1|2:p&1),d):(Br(d),null);case 22:case 23:return A0(),y=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(d.flags|=8192),y&&(d.mode&1)!==0?(Li&1073741824)!==0&&(Br(d),d.subtreeFlags&6&&(d.flags|=8192)):Br(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function j8(l,d){switch(Oy(d),d.tag){case 1:return pi(d.type)&&jg(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return ru(),nn(mi),nn(Mr),Zy(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return Xy(d),null;case 13:if(nn(gn),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));eu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return nn(gn),null;case 4:return ru(),null;case 10:return Wy(d.type._context),null;case 22:case 23:return A0(),null;case 24:return null;default:return null}}var zg=!1,$r=!1,S8=typeof WeakSet=="function"?WeakSet:Set,vt=null;function au(l,d){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){wn(l,d,y)}else p.current=null}function y0(l,d,p){try{p()}catch(y){wn(l,d,y)}}var QS=!1;function N8(l,d){if(Ay=yl,l=C2(),jy(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,$=y.focusNode;y=y.focusOffset;try{p.nodeType,$.nodeType}catch(Ze){p=null;break e}var W=0,Z=-1,ie=-1,Se=0,Ge=0,Qe=l,ze=null;t:for(;;){for(var pt;Qe!==p||E!==0&&Qe.nodeType!==3||(Z=W+E),Qe!==$||y!==0&&Qe.nodeType!==3||(ie=W+y),Qe.nodeType===3&&(W+=Qe.nodeValue.length),(pt=Qe.firstChild)!==null;)ze=Qe,Qe=pt;for(;;){if(Qe===l)break t;if(ze===p&&++Se===E&&(Z=W),ze===$&&++Ge===y&&(ie=W),(pt=Qe.nextSibling)!==null)break;Qe=ze,ze=Qe.parentNode}Qe=pt}p=Z===-1||ie===-1?null:{start:Z,end:ie}}else p=null}p=p||{start:0,end:0}}else p=null;for(Py={focusedElem:l,selectionRange:p},yl=!1,vt=d;vt!==null;)if(d=vt,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,vt=l;else for(;vt!==null;){d=vt;try{var yt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var wt=yt.memoizedProps,An=yt.memoizedState,ve=d.stateNode,ce=ve.getSnapshotBeforeUpdate(d.elementType===d.type?wt:Ca(d.type,wt),An);ve.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var ye=d.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ze){wn(d,d.return,Ze)}if(l=d.sibling,l!==null){l.return=d.return,vt=l;break}vt=d.return}return yt=QS,QS=!1,yt}function Kh(l,d,p){var y=d.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&l)===l){var $=E.destroy;E.destroy=void 0,$!==void 0&&y0(d,p,$)}E=E.next}while(E!==y)}}function Gg(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&l)===l){var y=p.create;p.destroy=y()}p=p.next}while(p!==d)}}function b0(l){var d=l.ref;if(d!==null){var p=l.stateNode;switch(l.tag){case 5:l=p;break;default:l=p}typeof d=="function"?d(l):d.current=l}}function YS(l){var d=l.alternate;d!==null&&(l.alternate=null,YS(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[Qa],delete d[Mh],delete d[My],delete d[o8],delete d[l8])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function XS(l){return l.tag===5||l.tag===3||l.tag===4}function JS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||XS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function _0(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.nodeType===8?p.parentNode.insertBefore(l,d):p.insertBefore(l,d):(p.nodeType===8?(d=p.parentNode,d.insertBefore(l,p)):(d=p,d.appendChild(l)),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=_g));else if(y!==4&&(l=l.child,l!==null))for(_0(l,d,p),l=l.sibling;l!==null;)_0(l,d,p),l=l.sibling}function w0(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(w0(l,d,p),l=l.sibling;l!==null;)w0(l,d,p),l=l.sibling}var _r=null,Ta=!1;function Tl(l,d,p){for(p=p.child;p!==null;)ZS(l,d,p),p=p.sibling}function ZS(l,d,p){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(xo,p)}catch(Z){}switch(p.tag){case 5:$r||au(p,d);case 6:var y=_r,E=Ta;_r=null,Tl(l,d,p),_r=y,Ta=E,_r!==null&&(Ta?(l=_r,p=p.stateNode,l.nodeType===8?l.parentNode.removeChild(p):l.removeChild(p)):_r.removeChild(p.stateNode));break;case 18:_r!==null&&(Ta?(l=_r,p=p.stateNode,l.nodeType===8?Dy(l.parentNode,p):l.nodeType===1&&Dy(l,p),ja(l)):Dy(_r,p.stateNode));break;case 4:y=_r,E=Ta,_r=p.stateNode.containerInfo,Ta=!0,Tl(l,d,p),_r=y,Ta=E;break;case 0:case 11:case 14:case 15:if(!$r&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var $=E,W=$.destroy;$=$.tag,W!==void 0&&(($&2)!==0||($&4)!==0)&&y0(p,d,W),E=E.next}while(E!==y)}Tl(l,d,p);break;case 1:if(!$r&&(au(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(Z){wn(p,d,Z)}Tl(l,d,p);break;case 21:Tl(l,d,p);break;case 22:p.mode&1?($r=(y=$r)||p.memoizedState!==null,Tl(l,d,p),$r=y):Tl(l,d,p);break;default:Tl(l,d,p)}}function eN(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new S8),d.forEach(function(y){var E=L8.bind(null,l,y);p.has(y)||(p.add(y),y.then(E,E))})}}function Ia(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];try{var $=l,W=d,Z=W;e:for(;Z!==null;){switch(Z.tag){case 5:_r=Z.stateNode,Ta=!1;break e;case 3:_r=Z.stateNode.containerInfo,Ta=!0;break e;case 4:_r=Z.stateNode.containerInfo,Ta=!0;break e}Z=Z.return}if(_r===null)throw Error(n(160));ZS($,W,E),_r=null,Ta=!1;var ie=E.alternate;ie!==null&&(ie.return=null),E.return=null}catch(Se){wn(E,d,Se)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)tN(d,l),d=d.sibling}function tN(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Ia(d,l),Ja(l),y&4){try{Kh(3,l,l.return),Gg(3,l)}catch(wt){wn(l,l.return,wt)}try{Kh(5,l,l.return)}catch(wt){wn(l,l.return,wt)}}break;case 1:Ia(d,l),Ja(l),y&512&&p!==null&&au(p,p.return);break;case 5:if(Ia(d,l),Ja(l),y&512&&p!==null&&au(p,p.return),l.flags&32){var E=l.stateNode;try{Je(E,"")}catch(wt){wn(l,l.return,wt)}}if(y&4&&(E=l.stateNode,E!=null)){var $=l.memoizedProps,W=p!==null?p.memoizedProps:$,Z=l.type,ie=l.updateQueue;if(l.updateQueue=null,ie!==null)try{Z==="input"&&$.type==="radio"&&$.name!=null&&Me(E,$),gt(Z,W);var Se=gt(Z,$);for(W=0;W<ie.length;W+=2){var Ge=ie[W],Qe=ie[W+1];Ge==="style"?mt(E,Qe):Ge==="dangerouslySetInnerHTML"?lt(E,Qe):Ge==="children"?Je(E,Qe):N(E,Ge,Qe,Se)}switch(Z){case"input":De(E,$);break;case"textarea":oe(E,$);break;case"select":var ze=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!$.multiple;var pt=$.value;pt!=null?Ie(E,!!$.multiple,pt,!1):ze!==!!$.multiple&&($.defaultValue!=null?Ie(E,!!$.multiple,$.defaultValue,!0):Ie(E,!!$.multiple,$.multiple?[]:"",!1))}E[Mh]=$}catch(wt){wn(l,l.return,wt)}}break;case 6:if(Ia(d,l),Ja(l),y&4){if(l.stateNode===null)throw Error(n(162));E=l.stateNode,$=l.memoizedProps;try{E.nodeValue=$}catch(wt){wn(l,l.return,wt)}}break;case 3:if(Ia(d,l),Ja(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{ja(d.containerInfo)}catch(wt){wn(l,l.return,wt)}break;case 4:Ia(d,l),Ja(l);break;case 13:Ia(d,l),Ja(l),E=l.child,E.flags&8192&&($=E.memoizedState!==null,E.stateNode.isHidden=$,!$||E.alternate!==null&&E.alternate.memoizedState!==null||(N0=Is())),y&4&&eN(l);break;case 22:if(Ge=p!==null&&p.memoizedState!==null,l.mode&1?($r=(Se=$r)||Ge,Ia(d,l),$r=Se):Ia(d,l),Ja(l),y&8192){if(Se=l.memoizedState!==null,(l.stateNode.isHidden=Se)&&!Ge&&(l.mode&1)!==0)for(vt=l,Ge=l.child;Ge!==null;){for(Qe=vt=Ge;vt!==null;){switch(ze=vt,pt=ze.child,ze.tag){case 0:case 11:case 14:case 15:Kh(4,ze,ze.return);break;case 1:au(ze,ze.return);var yt=ze.stateNode;if(typeof yt.componentWillUnmount=="function"){y=ze,p=ze.return;try{d=y,yt.props=d.memoizedProps,yt.state=d.memoizedState,yt.componentWillUnmount()}catch(wt){wn(y,p,wt)}}break;case 5:au(ze,ze.return);break;case 22:if(ze.memoizedState!==null){rN(Qe);continue}}pt!==null?(pt.return=ze,vt=pt):rN(Qe)}Ge=Ge.sibling}e:for(Ge=null,Qe=l;;){if(Qe.tag===5){if(Ge===null){Ge=Qe;try{E=Qe.stateNode,Se?($=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(Z=Qe.stateNode,ie=Qe.memoizedProps.style,W=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,Z.style.display=ft("display",W))}catch(wt){wn(l,l.return,wt)}}}else if(Qe.tag===6){if(Ge===null)try{Qe.stateNode.nodeValue=Se?"":Qe.memoizedProps}catch(wt){wn(l,l.return,wt)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===l)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===l)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===l)break e;Ge===Qe&&(Ge=null),Qe=Qe.return}Ge===Qe&&(Ge=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:Ia(d,l),Ja(l),y&4&&eN(l);break;case 21:break;default:Ia(d,l),Ja(l)}}function Ja(l){var d=l.flags;if(d&2){try{e:{for(var p=l.return;p!==null;){if(XS(p)){var y=p;break e}p=p.return}throw Error(n(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(Je(E,""),y.flags&=-33);var $=JS(l);w0(l,$,E);break;case 3:case 4:var W=y.stateNode.containerInfo,Z=JS(l);_0(l,Z,W);break;default:throw Error(n(161))}}catch(ie){wn(l,l.return,ie)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function k8(l,d,p){vt=l,sN(l)}function sN(l,d,p){for(var y=(l.mode&1)!==0;vt!==null;){var E=vt,$=E.child;if(E.tag===22&&y){var W=E.memoizedState!==null||zg;if(!W){var Z=E.alternate,ie=Z!==null&&Z.memoizedState!==null||$r;Z=zg;var Se=$r;if(zg=W,($r=ie)&&!Se)for(vt=E;vt!==null;)W=vt,ie=W.child,W.tag===22&&W.memoizedState!==null?iN(E):ie!==null?(ie.return=W,vt=ie):iN(E);for(;$!==null;)vt=$,sN($),$=$.sibling;vt=E,zg=Z,$r=Se}nN(l)}else(E.subtreeFlags&8772)!==0&&$!==null?($.return=E,vt=$):nN(l)}}function nN(l){for(;vt!==null;){var d=vt;if((d.flags&8772)!==0){var p=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:$r||Gg(5,d);break;case 1:var y=d.stateNode;if(d.flags&4&&!$r)if(p===null)y.componentDidMount();else{var E=d.elementType===d.type?p.memoizedProps:Ca(d.type,p.memoizedProps);y.componentDidUpdate(E,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&rS(d,$,y);break;case 3:var W=d.updateQueue;if(W!==null){if(p=null,d.child!==null)switch(d.child.tag){case 5:p=d.child.stateNode;break;case 1:p=d.child.stateNode}rS(d,W,p)}break;case 5:var Z=d.stateNode;if(p===null&&d.flags&4){p=Z;var ie=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&p.focus();break;case"img":ie.src&&(p.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Se=d.alternate;if(Se!==null){var Ge=Se.memoizedState;if(Ge!==null){var Qe=Ge.dehydrated;Qe!==null&&ja(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$r||d.flags&512&&b0(d)}catch(ze){wn(d,d.return,ze)}}if(d===l){vt=null;break}if(p=d.sibling,p!==null){p.return=d.return,vt=p;break}vt=d.return}}function rN(l){for(;vt!==null;){var d=vt;if(d===l){vt=null;break}var p=d.sibling;if(p!==null){p.return=d.return,vt=p;break}vt=d.return}}function iN(l){for(;vt!==null;){var d=vt;try{switch(d.tag){case 0:case 11:case 15:var p=d.return;try{Gg(4,d)}catch(ie){wn(d,p,ie)}break;case 1:var y=d.stateNode;if(typeof y.componentDidMount=="function"){var E=d.return;try{y.componentDidMount()}catch(ie){wn(d,E,ie)}}var $=d.return;try{b0(d)}catch(ie){wn(d,$,ie)}break;case 5:var W=d.return;try{b0(d)}catch(ie){wn(d,W,ie)}}}catch(ie){wn(d,d.return,ie)}if(d===l){vt=null;break}var Z=d.sibling;if(Z!==null){Z.return=d.return,vt=Z;break}vt=d.return}}var C8=Math.ceil,Hg=v.ReactCurrentDispatcher,j0=v.ReactCurrentOwner,aa=v.ReactCurrentBatchConfig,Es=0,or=null,$n=null,wr=0,Li=0,ou=jl(0),Zn=0,qh=null,Lc=0,Wg=0,S0=0,Qh=null,fi=null,N0=0,lu=1/0,Ao=null,Kg=!1,k0=null,Il=null,qg=!1,El=null,Qg=0,Yh=0,C0=null,Yg=-1,Xg=0;function Yr(){return(Es&6)!==0?Is():Yg!==-1?Yg:Yg=Is()}function Al(l){return(l.mode&1)===0?1:(Es&2)!==0&&wr!==0?wr&-wr:d8.transition!==null?(Xg===0&&(Xg=wc()),Xg):(l=bs,l!==0||(l=window.event,l=l===void 0?16:Sh(l.type)),l)}function Ea(l,d,p,y){if(50<Yh)throw Yh=0,C0=null,Error(n(185));gl(l,p,y),((Es&2)===0||l!==or)&&(l===or&&((Es&2)===0&&(Wg|=p),Zn===4&&Pl(l,wr)),vi(l,y),p===1&&Es===0&&(d.mode&1)===0&&(lu=Is()+500,Ng&&Nl()))}function vi(l,d){var p=l.callbackNode;yo(l,d);var y=_c(l,l===or?wr:0);if(y===0)p!==null&&Ci(p),l.callbackNode=null,l.callbackPriority=0;else if(d=y&-y,l.callbackPriority!==d){if(p!=null&&Ci(p),d===1)l.tag===0?c8(oN.bind(null,l)):W2(oN.bind(null,l)),i8(function(){(Es&6)===0&&Nl()}),p=null;else{switch(vl(y)){case 1:p=Zi;break;case 4:p=Ti;break;case 16:p=Xs;break;case 536870912:p=bc;break;default:p=Xs}p=gN(p,aN.bind(null,l))}l.callbackPriority=d,l.callbackNode=p}}function aN(l,d){if(Yg=-1,Xg=0,(Es&6)!==0)throw Error(n(327));var p=l.callbackNode;if(cu()&&l.callbackNode!==p)return null;var y=_c(l,l===or?wr:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||d)d=Jg(l,y);else{d=y;var E=Es;Es|=2;var $=cN();(or!==l||wr!==d)&&(Ao=null,lu=Is()+500,Mc(l,d));do try{E8();break}catch(Z){lN(l,Z)}while(!0);Hy(),Hg.current=$,Es=E,$n!==null?d=0:(or=null,wr=0,d=Zn)}if(d!==0){if(d===2&&(E=Ii(l),E!==0&&(y=E,d=T0(l,E))),d===1)throw p=qh,Mc(l,0),Pl(l,y),vi(l,Is()),p;if(d===6)Pl(l,y);else{if(E=l.current.alternate,(y&30)===0&&!T8(E)&&(d=Jg(l,y),d===2&&($=Ii(l),$!==0&&(y=$,d=T0(l,$))),d===1))throw p=qh,Mc(l,0),Pl(l,y),vi(l,Is()),p;switch(l.finishedWork=E,l.finishedLanes=y,d){case 0:case 1:throw Error(n(345));case 2:Fc(l,fi,Ao);break;case 3:if(Pl(l,y),(y&130023424)===y&&(d=N0+500-Is(),10<d)){if(_c(l,0)!==0)break;if(E=l.suspendedLanes,(E&y)!==y){Yr(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=Ly(Fc.bind(null,l,fi,Ao),d);break}Fc(l,fi,Ao);break;case 4:if(Pl(l,y),(y&4194240)===y)break;for(d=l.eventTimes,E=-1;0<y;){var W=31-Kr(y);$=1<<W,W=d[W],W>E&&(E=W),y&=~$}if(y=E,y=Is()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*C8(y/1960))-y,10<y){l.timeoutHandle=Ly(Fc.bind(null,l,fi,Ao),y);break}Fc(l,fi,Ao);break;case 5:Fc(l,fi,Ao);break;default:throw Error(n(329))}}}return vi(l,Is()),l.callbackNode===p?aN.bind(null,l):null}function T0(l,d){var p=Qh;return l.current.memoizedState.isDehydrated&&(Mc(l,d).flags|=256),l=Jg(l,d),l!==2&&(d=fi,fi=p,d!==null&&I0(d)),l}function I0(l){fi===null?fi=l:fi.push.apply(fi,l)}function T8(l){for(var d=l;;){if(d.flags&16384){var p=d.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var E=p[y],$=E.getSnapshot;E=E.value;try{if(!Na($(),E))return!1}catch(W){return!1}}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Pl(l,d){for(d&=~S0,d&=~Wg,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var p=31-Kr(d),y=1<<p;l[p]=-1,d&=~y}}function oN(l){if((Es&6)!==0)throw Error(n(327));cu();var d=_c(l,0);if((d&1)===0)return vi(l,Is()),null;var p=Jg(l,d);if(l.tag!==0&&p===2){var y=Ii(l);y!==0&&(d=y,p=T0(l,y))}if(p===1)throw p=qh,Mc(l,0),Pl(l,d),vi(l,Is()),p;if(p===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,Fc(l,fi,Ao),vi(l,Is()),null}function E0(l,d){var p=Es;Es|=1;try{return l(d)}finally{Es=p,Es===0&&(lu=Is()+500,Ng&&Nl())}}function Dc(l){El!==null&&El.tag===0&&(Es&6)===0&&cu();var d=Es;Es|=1;var p=aa.transition,y=bs;try{if(aa.transition=null,bs=1,l)return l()}finally{bs=y,aa.transition=p,Es=d,(Es&6)===0&&Nl()}}function A0(){Li=ou.current,nn(ou)}function Mc(l,d){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==-1&&(l.timeoutHandle=-1,r8(p)),$n!==null)for(p=$n.return;p!==null;){var y=p;switch(Oy(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&jg();break;case 3:ru(),nn(mi),nn(Mr),Zy();break;case 5:Xy(y);break;case 4:ru();break;case 13:nn(gn);break;case 19:nn(gn);break;case 10:Wy(y.type._context);break;case 22:case 23:A0()}p=p.return}if(or=l,$n=l=Rl(l.current,null),wr=Li=d,Zn=0,qh=null,S0=Wg=Lc=0,fi=Qh=null,Ac!==null){for(d=0;d<Ac.length;d++)if(p=Ac[d],y=p.interleaved,y!==null){p.interleaved=null;var E=y.next,$=p.pending;if($!==null){var W=$.next;$.next=E,y.next=W}p.pending=y}Ac=null}return l}function lN(l,d){do{var p=$n;try{if(Hy(),Dg.current=$g,Mg){for(var y=fn.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}Mg=!1}if(Rc=0,ar=Jn=fn=null,Uh=!1,zh=0,j0.current=null,p===null||p.return===null){Zn=1,qh=d,$n=null;break}e:{var $=l,W=p.return,Z=p,ie=d;if(d=wr,Z.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Se=ie,Ge=Z,Qe=Ge.tag;if((Ge.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var ze=Ge.alternate;ze?(Ge.updateQueue=ze.updateQueue,Ge.memoizedState=ze.memoizedState,Ge.lanes=ze.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var pt=RS(W);if(pt!==null){pt.flags&=-257,LS(pt,W,Z,$,d),pt.mode&1&&PS($,Se,d),d=pt,ie=Se;var yt=d.updateQueue;if(yt===null){var wt=new Set;wt.add(ie),d.updateQueue=wt}else yt.add(ie);break e}else{if((d&1)===0){PS($,Se,d),P0();break e}ie=Error(n(426))}}else if(cn&&Z.mode&1){var An=RS(W);if(An!==null){(An.flags&65536)===0&&(An.flags|=256),LS(An,W,Z,$,d),zy(iu(ie,Z));break e}}$=ie=iu(ie,Z),Zn!==4&&(Zn=2),Qh===null?Qh=[$]:Qh.push($),$=W;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var ve=ES($,ie,d);nS($,ve);break e;case 1:Z=ie;var ce=$.type,ye=$.stateNode;if(($.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Il===null||!Il.has(ye)))){$.flags|=65536,d&=-d,$.lanes|=d;var Ze=AS($,Z,d);nS($,Ze);break e}}$=$.return}while($!==null)}uN(p)}catch(kt){d=kt,$n===p&&p!==null&&($n=p=p.return);continue}break}while(!0)}function cN(){var l=Hg.current;return Hg.current=$g,l===null?$g:l}function P0(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),or===null||(Lc&268435455)===0&&(Wg&268435455)===0||Pl(or,wr)}function Jg(l,d){var p=Es;Es|=2;var y=cN();(or!==l||wr!==d)&&(Ao=null,Mc(l,d));do try{I8();break}catch(E){lN(l,E)}while(!0);if(Hy(),Es=p,Hg.current=y,$n!==null)throw Error(n(261));return or=null,wr=0,Zn}function I8(){for(;$n!==null;)dN($n)}function E8(){for(;$n!==null&&!Xi();)dN($n)}function dN(l){var d=pN(l.alternate,l,Li);l.memoizedProps=l.pendingProps,d===null?uN(l):$n=d,j0.current=null}function uN(l){var d=l;do{var p=d.alternate;if(l=d.return,(d.flags&32768)===0){if(p=w8(p,d,Li),p!==null){$n=p;return}}else{if(p=j8(p,d),p!==null){p.flags&=32767,$n=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Zn=6,$n=null;return}}if(d=d.sibling,d!==null){$n=d;return}$n=d=l}while(d!==null);Zn===0&&(Zn=5)}function Fc(l,d,p){var y=bs,E=aa.transition;try{aa.transition=null,bs=1,A8(l,d,p,y)}finally{aa.transition=E,bs=y}return null}function A8(l,d,p,y){do cu();while(El!==null);if((Es&6)!==0)throw Error(n(327));p=l.finishedWork;var E=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var $=p.lanes|p.childLanes;if(Qs(l,$),l===or&&($n=or=null,wr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||qg||(qg=!0,gN(Xs,function(){return cu(),null})),$=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||$){$=aa.transition,aa.transition=null;var W=bs;bs=1;var Z=Es;Es|=4,j0.current=null,N8(l,p),tN(p,l),X6(Py),yl=!!Ay,Py=Ay=null,l.current=p,k8(p),Ji(),Es=Z,bs=W,aa.transition=$}else l.current=p;if(qg&&(qg=!1,El=l,Qg=E),$=l.pendingLanes,$===0&&(Il=null),Jp(p.stateNode),vi(l,Is()),d!==null)for(y=l.onRecoverableError,p=0;p<d.length;p++)E=d[p],y(E.value,{componentStack:E.stack,digest:E.digest});if(Kg)throw Kg=!1,l=k0,k0=null,l;return(Qg&1)!==0&&l.tag!==0&&cu(),$=l.pendingLanes,($&1)!==0?l===C0?Yh++:(Yh=0,C0=l):Yh=0,Nl(),null}function cu(){if(El!==null){var l=vl(Qg),d=aa.transition,p=bs;try{if(aa.transition=null,bs=16>l?16:l,El===null)var y=!1;else{if(l=El,El=null,Qg=0,(Es&6)!==0)throw Error(n(331));var E=Es;for(Es|=4,vt=l.current;vt!==null;){var $=vt,W=$.child;if((vt.flags&16)!==0){var Z=$.deletions;if(Z!==null){for(var ie=0;ie<Z.length;ie++){var Se=Z[ie];for(vt=Se;vt!==null;){var Ge=vt;switch(Ge.tag){case 0:case 11:case 15:Kh(8,Ge,$)}var Qe=Ge.child;if(Qe!==null)Qe.return=Ge,vt=Qe;else for(;vt!==null;){Ge=vt;var ze=Ge.sibling,pt=Ge.return;if(YS(Ge),Ge===Se){vt=null;break}if(ze!==null){ze.return=pt,vt=ze;break}vt=pt}}}var yt=$.alternate;if(yt!==null){var wt=yt.child;if(wt!==null){yt.child=null;do{var An=wt.sibling;wt.sibling=null,wt=An}while(wt!==null)}}vt=$}}if(($.subtreeFlags&2064)!==0&&W!==null)W.return=$,vt=W;else e:for(;vt!==null;){if($=vt,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:Kh(9,$,$.return)}var ve=$.sibling;if(ve!==null){ve.return=$.return,vt=ve;break e}vt=$.return}}var ce=l.current;for(vt=ce;vt!==null;){W=vt;var ye=W.child;if((W.subtreeFlags&2064)!==0&&ye!==null)ye.return=W,vt=ye;else e:for(W=ce;vt!==null;){if(Z=vt,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:Gg(9,Z)}}catch(kt){wn(Z,Z.return,kt)}if(Z===W){vt=null;break e}var Ze=Z.sibling;if(Ze!==null){Ze.return=Z.return,vt=Ze;break e}vt=Z.return}}if(Es=E,Nl(),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(xo,l)}catch(kt){}y=!0}return y}finally{bs=p,aa.transition=d}}return!1}function hN(l,d,p){d=iu(p,d),d=ES(l,d,1),l=Cl(l,d,1),d=Yr(),l!==null&&(gl(l,1,d),vi(l,d))}function wn(l,d,p){if(l.tag===3)hN(l,l,p);else for(;d!==null;){if(d.tag===3){hN(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Il===null||!Il.has(y))){l=iu(p,l),l=AS(d,l,1),d=Cl(d,l,1),l=Yr(),d!==null&&(gl(d,1,l),vi(d,l));break}}d=d.return}}function P8(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),d=Yr(),l.pingedLanes|=l.suspendedLanes&p,or===l&&(wr&p)===p&&(Zn===4||Zn===3&&(wr&130023424)===wr&&500>Is()-N0?Mc(l,0):S0|=p),vi(l,d)}function mN(l,d){d===0&&((l.mode&1)===0?d=1:(d=Pd,Pd<<=1,(Pd&130023424)===0&&(Pd=4194304)));var p=Yr();l=To(l,d),l!==null&&(gl(l,d,p),vi(l,p))}function R8(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),mN(l,p)}function L8(l,d){var p=0;switch(l.tag){case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(d),mN(l,p)}var pN;pN=function(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps||mi.current)gi=!0;else{if((l.lanes&p)===0&&(d.flags&128)===0)return gi=!1,_8(l,d,p);gi=(l.flags&131072)!==0}else gi=!1,cn&&(d.flags&1048576)!==0&&K2(d,Cg,d.index);switch(d.lanes=0,d.tag){case 2:var y=d.type;Ug(l,d),l=d.pendingProps;var E=Xd(d,Mr.current);nu(d,p),E=s0(null,d,y,l,E,p);var $=n0();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,pi(y)?($=!0,Sg(d)):$=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Qy(d),E.updater=Og,d.stateNode=E,E._reactInternals=d,c0(d,y,l,p),d=m0(null,d,y,!0,$,p)):(d.tag=0,cn&&$&&$y(d),Qr(null,d,E,p),d=d.child),d;case 16:y=d.elementType;e:{switch(Ug(l,d),l=d.pendingProps,E=y._init,y=E(y._payload),d.type=y,E=d.tag=M8(y),l=Ca(y,l),E){case 0:d=h0(null,d,y,l,p);break e;case 1:d=OS(null,d,y,l,p);break e;case 11:d=DS(null,d,y,l,p);break e;case 14:d=MS(null,d,y,Ca(y.type,l),p);break e}throw Error(n(306,y,""))}return d;case 0:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Ca(y,E),h0(l,d,y,E,p);case 1:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Ca(y,E),OS(l,d,y,E,p);case 3:e:{if(VS(d),l===null)throw Error(n(387));y=d.pendingProps,$=d.memoizedState,E=$.element,sS(l,d),Rg(d,y,null,p);var W=d.memoizedState;if(y=W.element,$.isDehydrated)if($={element:y,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){E=iu(Error(n(423)),d),d=US(l,d,y,p,E);break e}else if(y!==E){E=iu(Error(n(424)),d),d=US(l,d,y,p,E);break e}else for(Ri=wl(d.stateNode.containerInfo.firstChild),Pi=d,cn=!0,ka=null,p=eS(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(eu(),y===E){d=Eo(l,d,p);break e}Qr(l,d,y,p)}d=d.child}return d;case 5:return iS(d),l===null&&Uy(d),y=d.type,E=d.pendingProps,$=l!==null?l.memoizedProps:null,W=E.children,Ry(y,E)?W=null:$!==null&&Ry(y,$)&&(d.flags|=32),$S(l,d),Qr(l,d,W,p),d.child;case 6:return l===null&&Uy(d),null;case 13:return zS(l,d,p);case 4:return Yy(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=tu(d,null,y,p):Qr(l,d,y,p),d.child;case 11:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Ca(y,E),DS(l,d,y,E,p);case 7:return Qr(l,d,d.pendingProps,p),d.child;case 8:return Qr(l,d,d.pendingProps.children,p),d.child;case 12:return Qr(l,d,d.pendingProps.children,p),d.child;case 10:e:{if(y=d.type._context,E=d.pendingProps,$=d.memoizedProps,W=E.value,Js(Eg,y._currentValue),y._currentValue=W,$!==null)if(Na($.value,W)){if($.children===E.children&&!mi.current){d=Eo(l,d,p);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var Z=$.dependencies;if(Z!==null){W=$.child;for(var ie=Z.firstContext;ie!==null;){if(ie.context===y){if($.tag===1){ie=Io(-1,p&-p),ie.tag=2;var Se=$.updateQueue;if(Se!==null){Se=Se.shared;var Ge=Se.pending;Ge===null?ie.next=ie:(ie.next=Ge.next,Ge.next=ie),Se.pending=ie}}$.lanes|=p,ie=$.alternate,ie!==null&&(ie.lanes|=p),Ky($.return,p,d),Z.lanes|=p;break}ie=ie.next}}else if($.tag===10)W=$.type===d.type?null:$.child;else if($.tag===18){if(W=$.return,W===null)throw Error(n(341));W.lanes|=p,Z=W.alternate,Z!==null&&(Z.lanes|=p),Ky(W,p,d),W=$.sibling}else W=$.child;if(W!==null)W.return=$;else for(W=$;W!==null;){if(W===d){W=null;break}if($=W.sibling,$!==null){$.return=W.return,W=$;break}W=W.return}$=W}Qr(l,d,E.children,p),d=d.child}return d;case 9:return E=d.type,y=d.pendingProps.children,nu(d,p),E=ra(E),y=y(E),d.flags|=1,Qr(l,d,y,p),d.child;case 14:return y=d.type,E=Ca(y,d.pendingProps),E=Ca(y.type,E),MS(l,d,y,E,p);case 15:return FS(l,d,d.type,d.pendingProps,p);case 17:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:Ca(y,E),Ug(l,d),d.tag=1,pi(y)?(l=!0,Sg(d)):l=!1,nu(d,p),TS(d,y,E),c0(d,y,E,p),m0(null,d,y,!0,l,p);case 19:return HS(l,d,p);case 22:return BS(l,d,p)}throw Error(n(156,d.tag))};function gN(l,d){return di(l,d)}function D8(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(l,d,p,y){return new D8(l,d,p,y)}function R0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function M8(l){if(typeof l=="function")return R0(l)?1:0;if(l!=null){if(l=l.$$typeof,l===F)return 11;if(l===U)return 14}return 2}function Rl(l,d){var p=l.alternate;return p===null?(p=oa(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function Zg(l,d,p,y,E,$){var W=2;if(y=l,typeof l=="function")R0(l)&&(W=1);else if(typeof l=="string")W=5;else e:switch(l){case j:return Bc(p.children,E,$,d);case S:W=8,E|=8;break;case C:return l=oa(12,p,d,E|2),l.elementType=C,l.lanes=$,l;case D:return l=oa(13,p,d,E),l.elementType=D,l.lanes=$,l;case V:return l=oa(19,p,d,E),l.elementType=V,l.lanes=$,l;case H:return ef(p,E,$,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case M:W=10;break e;case T:W=9;break e;case F:W=11;break e;case U:W=14;break e;case K:W=16,y=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return d=oa(W,p,d,E),d.elementType=l,d.type=y,d.lanes=$,d}function Bc(l,d,p,y){return l=oa(7,l,y,d),l.lanes=p,l}function ef(l,d,p,y){return l=oa(22,l,y,d),l.elementType=H,l.lanes=p,l.stateNode={isHidden:!1},l}function L0(l,d,p){return l=oa(6,l,null,d),l.lanes=p,l}function D0(l,d,p){return d=oa(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function F8(l,d,p,y,E){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pl(0),this.expirationTimes=pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function M0(l,d,p,y,E,$,W,Z,ie){return l=new F8(l,d,p,Z,ie),d===1?(d=1,$===!0&&(d|=8)):d=0,$=oa(3,null,null,d),l.current=$,$.stateNode=l,$.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qy($),l}function B8(l,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:y==null?null:""+y,children:l,containerInfo:d,implementation:p}}function fN(l){if(!l)return Sl;l=l._reactInternals;e:{if(Qt(l)!==l||l.tag!==1)throw Error(n(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(pi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(l.tag===1){var p=l.type;if(pi(p))return G2(l,p,d)}return d}function vN(l,d,p,y,E,$,W,Z,ie){return l=M0(p,y,!0,l,E,$,W,Z,ie),l.context=fN(null),p=l.current,y=Yr(),E=Al(p),$=Io(y,E),$.callback=d!=null?d:null,Cl(p,$,E),l.current.lanes=E,gl(l,E,y),vi(l,y),l}function tf(l,d,p,y){var E=d.current,$=Yr(),W=Al(E);return p=fN(p),d.context===null?d.context=p:d.pendingContext=p,d=Io($,W),d.payload={element:l},y=y===void 0?null:y,y!==null&&(d.callback=y),l=Cl(E,d,W),l!==null&&(Ea(l,E,W,$),Pg(l,E,W)),W}function sf(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function xN(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function F0(l,d){xN(l,d),(l=l.alternate)&&xN(l,d)}function $8(){return null}var yN=typeof reportError=="function"?reportError:function(l){console.error(l)};function B0(l){this._internalRoot=l}nf.prototype.render=B0.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));tf(l,d,null,null)},nf.prototype.unmount=B0.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Dc(function(){tf(null,l,null,null)}),d[So]=null}};function nf(l){this._internalRoot=l}nf.prototype.unstable_scheduleHydration=function(l){if(l){var d=ng();l={blockedOn:null,target:l,priority:d};for(var p=0;p<Ha.length&&d!==0&&d<Ha[p].priority;p++);Ha.splice(p,0,l),p===0&&ag(l)}};function $0(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function rf(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function bN(){}function O8(l,d,p,y,E){if(E){if(typeof y=="function"){var $=y;y=function(){var Se=sf(W);$.call(Se)}}var W=vN(d,y,l,0,null,!1,!1,"",bN);return l._reactRootContainer=W,l[So]=W.current,Lh(l.nodeType===8?l.parentNode:l),Dc(),W}for(;E=l.lastChild;)l.removeChild(E);if(typeof y=="function"){var Z=y;y=function(){var Se=sf(ie);Z.call(Se)}}var ie=M0(l,0,!1,null,null,!1,!1,"",bN);return l._reactRootContainer=ie,l[So]=ie.current,Lh(l.nodeType===8?l.parentNode:l),Dc(function(){tf(d,ie,p,y)}),ie}function af(l,d,p,y,E){var $=p._reactRootContainer;if($){var W=$;if(typeof E=="function"){var Z=E;E=function(){var ie=sf(W);Z.call(ie)}}tf(d,W,l,E)}else W=O8(p,d,l,E,y);return sf(W)}tg=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var p=ml(d.pendingLanes);p!==0&&(fl(d,p|1),vi(d,Is()),(Es&6)===0&&(lu=Is()+500,Nl()))}break;case 13:Dc(function(){var y=To(l,1);if(y!==null){var E=Yr();Ea(y,l,1,E)}}),F0(l,1)}},Rd=function(l){if(l.tag===13){var d=To(l,134217728);if(d!==null){var p=Yr();Ea(d,l,134217728,p)}F0(l,134217728)}},sg=function(l){if(l.tag===13){var d=Al(l),p=To(l,d);if(p!==null){var y=Yr();Ea(p,l,d,y)}F0(l,d)}},ng=function(){return bs},rg=function(l,d){var p=bs;try{return bs=l,d()}finally{bs=p}},Ve=function(l,d,p){switch(d){case"input":if(De(l,p),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=wg(y);if(!E)throw Error(n(90));Te(y),De(y,E)}}}break;case"textarea":oe(l,p);break;case"select":d=p.value,d!=null&&Ie(l,!!p.multiple,d,!1)}},Be=E0,Ct=Dc;var V8={usingClientEntryPoint:!1,Events:[Fh,Qd,wg,Dt,Ot,E0]},Xh={findFiberByHostInstance:Cc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U8={bundleType:Xh.bundleType,version:Xh.version,rendererPackageName:Xh.rendererPackageName,rendererConfig:Xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ki(l),l===null?null:l.stateNode},findFiberByHostInstance:Xh.findFiberByHostInstance||$8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{xo=of.inject(U8),Dr=of}catch(l){}}return xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V8,xi.createPortal=function(l,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$0(d))throw Error(n(200));return B8(l,d,null,p)},xi.createRoot=function(l,d){if(!$0(l))throw Error(n(299));var p=!1,y="",E=yN;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=M0(l,1,!1,null,null,p,!1,y,E),l[So]=d.current,Lh(l.nodeType===8?l.parentNode:l),new B0(d)},xi.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=ki(d),l=l===null?null:l.stateNode,l},xi.flushSync=function(l){return Dc(l)},xi.hydrate=function(l,d,p){if(!rf(d))throw Error(n(200));return af(null,l,d,!0,p)},xi.hydrateRoot=function(l,d,p){if(!$0(l))throw Error(n(405));var y=p!=null&&p.hydratedSources||null,E=!1,$="",W=yN;if(p!=null&&(p.unstable_strictMode===!0&&(E=!0),p.identifierPrefix!==void 0&&($=p.identifierPrefix),p.onRecoverableError!==void 0&&(W=p.onRecoverableError)),d=vN(d,null,l,1,p!=null?p:null,E,!1,$,W),l[So]=d.current,Lh(l),y)for(l=0;l<y.length;l++)p=y[l],E=p._getVersion,E=E(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,E]:d.mutableSourceEagerHydrationData.push(p,E);return new nf(d)},xi.render=function(l,d,p){if(!rf(d))throw Error(n(200));return af(null,l,d,!1,p)},xi.unmountComponentAtNode=function(l){if(!rf(l))throw Error(n(40));return l._reactRootContainer?(Dc(function(){af(null,null,l,!1,function(){l._reactRootContainer=null,l[So]=null})}),!0):!1},xi.unstable_batchedUpdates=E0,xi.unstable_renderSubtreeIntoContainer=function(l,d,p,y){if(!rf(p))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return af(l,d,p,!1,y)},xi.version="18.3.1-next-f1338f8080-20240426",xi}var TN;function A5(){if(TN)return U0.exports;TN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),U0.exports=Q8(),U0.exports}var IN;function Y8(){if(IN)return lf;IN=1;var t=A5();return lf.createRoot=t.createRoot,lf.hydrateRoot=t.hydrateRoot,lf}var X8=Y8();const J8=W_(X8),Jt=t=>typeof t=="string",Zh=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},EN=t=>t==null?"":""+t,Z8=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},eD=/###/g,AN=t=>t&&t.indexOf("###")>-1?t.replace(eD,"."):t,PN=t=>!t||Jt(t),km=(t,e,n)=>{const r=Jt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(PN(t))return{};const a=AN(r[i]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return PN(t)?{}:{obj:t,k:AN(r[i])}},RN=(t,e,n)=>{const{obj:r,k:i}=km(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let a=e[e.length-1],o=e.slice(0,e.length-1),c=km(t,o,Object);for(;c.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),c=km(t,o,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${a}`]!="undefined"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=n},tD=(t,e,n,r)=>{const{obj:i,k:a}=km(t,e,Object);i[a]=i[a]||[],i[a].push(n)},Sv=(t,e)=>{const{obj:n,k:r}=km(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},sD=(t,e,n)=>{const r=Sv(t,n);return r!==void 0?r:Sv(e,n)},P5=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Jt(t[r])||t[r]instanceof String||Jt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):P5(t[r],e[r],n):t[r]=e[r]);return t},du=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var nD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const rD=t=>Jt(t)?t.replace(/[&<>"'\/]/g,e=>nD[e]):t;class iD{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const aD=[" ",",","?","!",";"],oD=new iD(20),lD=(t,e,n)=>{e=e||"",n=n||"";const r=aD.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=oD.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(t);if(!a){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a},M1=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,c="";for(let u=a;u<r.length;++u)if(u!==a&&(c+=n),c+=r[u],o=i[c],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=o}return i},Qm=t=>t==null?void 0:t.replace("_","-"),cD={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};let dD=class F1{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||cD,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(Jt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new F1(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new F1(this.logger,e)}};var ro=new dD;class jx{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...n])})}}class LN extends jx{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var h,m;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],r&&(Array.isArray(r)?c.push(...r):Jt(r)&&a?c.push(...r.split(a)):c.push(r)));const u=Sv(this.data,c);return!u&&!n&&!r&&e.indexOf(".")>-1&&(e=c[0],n=c[1],r=c.slice(2).join(".")),u||!o||!Jt(r)?u:M1((m=(h=this.data)==null?void 0:h[e])==null?void 0:m[n],r,a)}addResource(e,n,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,n];r&&(c=c.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(c=e.split("."),i=n,n=c[1]),this.addNamespaces(n),RN(this.data,c,i),a.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const a in r)(Jt(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,a,o={silent:!1,skipCopy:!1}){let c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),i=r,r=n,n=c[1]),this.addNamespaces(n);let u=Sv(this.data,c)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?P5(u,r,a):u={...u,...r},RN(this.data,c,u),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var R5={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(a=>{var o,c;e=(c=(o=this.processors[a])==null?void 0:o.process(e,n,r,i))!=null?c:e}),e}};const L5=Symbol("i18next/PATH_KEY");function uD(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>{var a;return(a=n==null?void 0:n.revoke)==null||a.call(n),i===L5?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function B1(t,e){var r;const{[L5]:n}=t(uD());return n.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const DN={},MN=t=>!Jt(t)&&typeof t!="boolean"&&typeof t!="number";class Nv extends jx{constructor(e,n={}){super(),Z8(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ro.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!lD(e,r,i);if(o&&!c){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:Jt(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:Jt(a)?[a]:a}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=B1(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:c,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const g=i.lng||this.language,x=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return x?a?{res:`${h}${m}${c}`,usedKey:c,exactUsedKey:c,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${m}${c}`:a?{res:c,usedKey:c,exactUsedKey:c,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:c;const b=this.resolve(e,i);let w=b==null?void 0:b.res;const k=(b==null?void 0:b.usedKey)||c,A=(b==null?void 0:b.exactUsedKey)||c,L=["[object Number]","[object Function]","[object RegExp]"],I=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,v=i.count!==void 0&&!Jt(i.count),_=Nv.hasDefaultValue(i),R=v?this.pluralResolver.getSuffix(g,i.count,i):"",j=i.ordinal&&v?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",S=v&&!i.ordinal&&i.count===0,C=S&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${R}`]||i[`defaultValue${j}`]||i.defaultValue;let M=w;N&&!w&&_&&(M=C);const T=MN(M),F=Object.prototype.toString.apply(M);if(N&&M&&T&&L.indexOf(F)<0&&!(Jt(I)&&Array.isArray(M))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,M,{...i,ns:u}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(b.res=D,b.usedParams=this.getUsedParamsDetails(i),b):D}if(o){const D=Array.isArray(M),V=D?[]:{},U=D?A:k;for(const K in M)if(Object.prototype.hasOwnProperty.call(M,K)){const H=`${U}${o}${K}`;_&&!w?V[K]=this.translate(H,{...i,defaultValue:MN(C)?C[K]:void 0,joinArrays:!1,ns:u}):V[K]=this.translate(H,{...i,joinArrays:!1,ns:u}),V[K]===H&&(V[K]=M[K])}w=V}}else if(N&&Jt(I)&&Array.isArray(w))w=w.join(I),w&&(w=this.extendTranslation(w,e,i,r));else{let D=!1,V=!1;!this.isValidLookup(w)&&_&&(D=!0,w=C),this.isValidLookup(w)||(V=!0,w=c);const K=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:w,H=_&&C!==w&&this.options.updateMissing;if(V||D||H){if(this.logger.log(H?"updateKey":"missingKey",g,h,c,H?C:w),o){const G=this.resolve(c,{...i,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let G=0;G<Y.length;G++)z.push(Y[G]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(i.lng||this.language):z.push(i.lng||this.language);const te=(G,X,J)=>{var ue;const se=_&&J!==w?J:K;this.options.missingKeyHandler?this.options.missingKeyHandler(G,h,X,se,H,i):(ue=this.backendConnector)!=null&&ue.saveMissing&&this.backendConnector.saveMissing(G,h,X,se,H,i),this.emit("missingKey",G,h,X,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?z.forEach(G=>{const X=this.pluralResolver.getSuffixes(G,i);S&&i[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(J=>{te([G],c+J,i[`defaultValue${J}`]||C)})}):te(z,c,C))}w=this.extendTranslation(w,e,i,b,r),V&&w===c&&this.options.appendNamespaceToMissingKey&&(w=`${h}${m}${c}`),(V||D)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${c}`:c,D?w:void 0,i))}return a?(b.res=w,b.usedParams=this.getUsedParamsDetails(i),b):w}extendTranslation(e,n,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=Jt(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(m){const b=e.match(this.interpolator.nestingRegexp);g=b&&b.length}let x=r.replace&&!Jt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),e=this.interpolator.interpolate(e,x,r.lng||this.language||i.usedLng,r),m){const b=e.match(this.interpolator.nestingRegexp),w=b&&b.length;g<w&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>(a==null?void 0:a[0])===b[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):this.translate(...b,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,c=Jt(o)?[o]:o;return e!=null&&(c!=null&&c.length)&&r.applyPostProcessor!==!1&&(e=R5.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,a,o,c;return Jt(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,n),m=h.key;i=m;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const x=n.count!==void 0&&!Jt(n.count),b=x&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(Jt(n.context)||typeof n.context=="number")&&n.context!=="",k=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);g.forEach(A=>{var L,I;this.isValidLookup(r)||(c=A,!DN[`${k[0]}-${A}`]&&((L=this.utils)!=null&&L.hasLoadedNamespace)&&!((I=this.utils)!=null&&I.hasLoadedNamespace(c))&&(DN[`${k[0]}-${A}`]=!0,this.logger.warn(`key "${i}" for languages "${k.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(N=>{var R;if(this.isValidLookup(r))return;o=N;const v=[m];if((R=this.i18nFormat)!=null&&R.addLookupKeys)this.i18nFormat.addLookupKeys(v,m,N,A,n);else{let j;x&&(j=this.pluralResolver.getSuffix(N,n.count,n));const S=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(n.ordinal&&j.indexOf(C)===0&&v.push(m+j.replace(C,this.options.pluralSeparator)),v.push(m+j),b&&v.push(m+S)),w){const M=`${m}${this.options.contextSeparator||"_"}${n.context}`;v.push(M),x&&(n.ordinal&&j.indexOf(C)===0&&v.push(M+j.replace(C,this.options.pluralSeparator)),v.push(M+j),b&&v.push(M+S))}}let _;for(;_=v.pop();)this.isValidLookup(r)||(a=_,r=this.getResource(N,A,_,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Jt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class FN{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ro.create("languageUtils")}getScriptPartFromCode(e){if(e=Qm(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Qm(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Jt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch(r){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Jt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Jt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Jt(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const BN={zero:0,one:1,two:2,few:3,many:4,other:5},$N={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class hD{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ro.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Qm(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch(c){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),$N;if(!e.match(/-|_/))return $N;const u=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(u,n)}return this.pluralRulesCache[a]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>BN[i]-BN[a]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const ON=(t,e,n,r=".",i=!0)=>{let a=sD(t,e,n);return!a&&i&&Jt(n)&&(a=M1(t,n,r),a===void 0&&(a=M1(e,n,r))),a},H0=t=>t.replace(/\$/g,"$$$$");class mD{constructor(e={}){var n;this.logger=ro.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:c,suffixEscaped:u,formatSeparator:h,unescapeSuffix:m,unescapePrefix:g,nestingPrefix:x,nestingPrefixEscaped:b,nestingSuffix:w,nestingSuffixEscaped:k,nestingOptionsSeparator:A,maxReplaces:L,alwaysFormat:I}=e.interpolation;this.escape=n!==void 0?n:rD,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?du(a):o||"{{",this.suffix=c?du(c):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=x?du(x):b||du("$t("),this.nestingSuffix=w?du(w):k||du(")"),this.nestingOptionsSeparator=A||",",this.maxReplaces=L||1e3,this.alwaysFormat=I!==void 0?I:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var b;let a,o,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=w=>{if(w.indexOf(this.formatSeparator)<0){const I=ON(n,u,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(I,void 0,r,{...i,...n,interpolationkey:w}):I}const k=w.split(this.formatSeparator),A=k.shift().trim(),L=k.join(this.formatSeparator).trim();return this.format(ON(n,u,A,this.options.keySeparator,this.options.ignoreJSONStructure),L,r,{...i,...n,interpolationkey:A})};this.resetRegExp();const m=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=i==null?void 0:i.interpolation)==null?void 0:b.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>H0(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?H0(this.escape(w)):H0(w)}].forEach(w=>{for(c=0;a=w.regex.exec(e);){const k=a[1].trim();if(o=h(k),o===void 0)if(typeof m=="function"){const L=m(e,a,i);o=Jt(L)?L:""}else if(i&&Object.prototype.hasOwnProperty.call(i,k))o="";else if(g){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),o="";else!Jt(o)&&!this.useRawValueToEscape&&(o=EN(o));const A=w.safeValue(o);if(e=e.replace(a[0],A),g?(w.regex.lastIndex+=o.length,w.regex.lastIndex-=a[0].length):w.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,a,o;const c=(u,h)=>{var k;const m=this.nestingOptionsSeparator;if(u.indexOf(m)<0)return u;const g=u.split(new RegExp(`${m}[ ]*{`));let x=`{${g[1]}`;u=g[0],x=this.interpolate(x,o);const b=x.match(/'/g),w=x.match(/"/g);(((k=b==null?void 0:b.length)!=null?k:0)%2===0&&!w||w.length%2!==0)&&(x=x.replace(/'/g,'"'));try{o=JSON.parse(x),h&&(o={...h,...o})}catch(A){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,A),`${u}${m}${x}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];o={...r},o=o.replace&&!Jt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=n(c.call(this,i[1].trim(),o),o),a&&i[0]===e&&!Jt(a))return a;Jt(a)||(a=EN(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((m,g)=>this.format(m,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const pD=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[c,...u]=o.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),m=c.trim();n[m]||(n[m]=h),h==="false"&&(n[m]=!1),h==="true"&&(n[m]=!0),isNaN(h)||(n[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},VN=t=>{const e={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let c=e[o];return c||(c=t(Qm(r),i),e[o]=c),c(n)}},gD=t=>(e,n,r)=>t(Qm(n),r)(e);class fD{constructor(e={}){this.logger=ro.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?VN:gD;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return c=>o.format(c)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return c=>o.format(c)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return c=>o.format(c)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return c=>o.format(c,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return c=>o.format(c)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=VN(n)}format(e,n,r,i={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,u)=>{var g;const{formatName:h,formatOptions:m}=pD(u);if(this.formats[h]){let x=c;try{const b=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},w=b.locale||b.lng||i.locale||i.lng||r;x=this.formats[h](c,w,{...m,...i,...b})}catch(b){this.logger.warn(b)}return x}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const vD=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class xD extends jx{constructor(e,n,r,i={}){var a,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ro.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(a=this.backend)==null?void 0:a.init)==null||o.call(a,r,i.backend,i)}queueLoad(e,n,r,i){const a={},o={},c={},u={};return e.forEach(h=>{let m=!0;n.forEach(g=>{const x=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?o[x]===void 0&&(o[x]=!0):(this.state[x]=1,m=!1,o[x]===void 0&&(o[x]=!0),a[x]===void 0&&(a[x]=!0),u[g]===void 0&&(u[g]=!0)))}),m||(c[h]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(e,n,r){const i=e.split("|"),a=i[0],o=i[1];n&&this.emit("failedLoading",a,o,n),!n&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const c={};this.queue.forEach(u=>{tD(u.loaded,[a],o),vD(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{c[h]||(c[h]={});const m=u.loaded[h];m.length&&m.forEach(g=>{c[h][g]===void 0&&(c[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(e,n,r,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const c=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,a*2,o)},a);return}o(h,m)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,n);h&&typeof h.then=="function"?h.then(m=>c(null,m)).catch(c):c(null,h)}catch(h){c(h)}return}return u(e,n,c)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Jt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Jt(n)&&(n=[n]);const a=this.queueLoad(e,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,c)=>{o&&this.logger.warn(`${n}loading namespace ${a} for language ${i} failed`,o),!o&&c&&this.logger.log(`${n}loaded namespace ${a} for language ${i}`,c),this.loaded(e,o,c)})}saveMissing(e,n,r,i,a,o={},c=()=>{}){var u,h,m,g,x;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(m=this.services)==null?void 0:m.utils)!=null&&g.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((x=this.backend)!=null&&x.create){const b={...o,isUpdate:a},w=this.backend.create.bind(this.backend);if(w.length<6)try{let k;w.length===5?k=w(e,n,r,i,b):k=w(e,n,r,i),k&&typeof k.then=="function"?k.then(A=>c(null,A)).catch(c):c(null,k)}catch(k){c(k)}else w(e,n,r,i,c,b)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const UN=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Jt(t[1])&&(e.defaultValue=t[1]),Jt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),zN=t=>{var e,n;return Jt(t.ns)&&(t.ns=[t.ns]),Jt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Jt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},cf=()=>{},yD=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ym extends jx{constructor(e={},n){if(super(),this.options=zN(e),this.services={},this.logger=ro,this.modules={external:[]},yD(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Jt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=UN();this.options={...r,...this.options,...zN(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?ro.init(i(this.modules.logger),this.options):ro.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=fD;const m=new FN(this.options);this.store=new LN(this.options.resources,this.options);const g=this.services;g.logger=ro,g.resourceStore=this.store,g.languageUtils=m,g.pluralResolver=new hD(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new mD(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new xD(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(b,...w)=>{this.emit(b,...w)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Nv(this.services,this.options),this.translator.on("*",(b,...w)=>{this.emit(b,...w)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,n||(n=cf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const c=Zh(),u=()=>{const h=(m,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(g),n(m,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),c}loadResources(e,n=cf){var a,o;let r=n;const i=Jt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const c=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&c.indexOf(g)<0&&c.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>u(m)),(o=(a=this.options.preload)==null?void 0:a.forEach)==null||o.call(a,h=>u(h)),this.services.backendConnector.load(c,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,n,r){const i=Zh();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=cf),this.services.backendConnector.reload(e,n,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&R5.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Zh();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),n&&n(c,(...h)=>this.t(...h))},o=c=>{var m,g;!e&&!c&&this.services.languageDetector&&(c=[]);const u=Jt(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Jt(c)?[c]:c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(m=this.services.languageDetector)==null?void 0:m.cacheUserLanguage)==null||g.call(m,h)),this.loadResources(h,x=>{a(x,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(a,o,...c)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([a,o].concat(c)):u={...o},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let m;return u.keyPrefix&&Array.isArray(a)?m=a.map(g=>(typeof g=="function"&&(g=B1(g,{...this.options,...o})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=B1(a,{...this.options,...o})),m=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(m,u)};return Jt(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(c,u)=>{const h=this.services.backendConnector.state[`${c}|${u}`];return h===-1||h===0||h===2};if(n.precheck){const c=n.precheck(this,o);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,n){const r=Zh();return this.options.ns?(Jt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Zh();Jt(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const c=o.getTextInfo();if(c&&c.direction)return c.direction}}catch(o){}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new FN(UN());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Ym(e,n)}cloneInstance(e={},n=cf){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new Ym(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const c=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((m,g)=>(m[g]={...u[h][g]},m),u[h]),u),{});a.store=new LN(c,i),a.services.resourceStore=a.store}return a.translator=new Nv(a.services,i),a.translator.on("*",(c,...u)=>{a.emit(c,...u)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Fn=Ym.createInstance();Fn.createInstance=Ym.createInstance;Fn.createInstance;Fn.dir;Fn.init;Fn.loadResources;Fn.reloadResources;Fn.use;Fn.changeLanguage;Fn.getFixedT;Fn.t;Fn.exists;Fn.setDefaultNamespace;Fn.hasLoadedNamespace;Fn.loadNamespaces;Fn.loadLanguages;const bD=(t,e,n,r)=>{var a,o,c,u;const i=[n,{code:e,...r||{}}];if((o=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);ad(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(c=t==null?void 0:t.services)==null?void 0:c.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},GN={},$1=(t,e,n,r)=>{ad(n)&&GN[n]||(ad(n)&&(GN[n]=new Date),bD(t,e,n,r))},D5=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},O1=(t,e,n)=>{t.loadNamespaces(e,D5(t,n))},HN=(t,e,n,r)=>{if(ad(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return O1(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,D5(t,r))},_D=(t,e,n={})=>!e.languages||!e.languages.length?($1(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),ad=t=>typeof t=="string",wD=t=>typeof t=="object"&&t!==null,jD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,SD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},ND=t=>SD[t],kD=t=>t.replace(jD,ND);let V1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:kD};const CD=(t={})=>{V1={...V1,...t}},TD=()=>V1;let M5;const ID=t=>{M5=t},ED=()=>M5,AD={type:"3rdParty",init(t){CD(t.options.react),ID(t)}},PD=P.createContext();class RD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const LD=(t,e)=>{const n=P.useRef();return P.useEffect(()=>{n.current=t},[t,e]),n.current},F5=(t,e,n,r)=>t.getFixedT(e,n,r),DD=(t,e,n,r)=>P.useCallback(F5(t,e,n,r),[t,e,n,r]),Os=(t,e={})=>{var v,_,R,j;const{i18n:n}=e,{i18n:r,defaultNS:i}=P.useContext(PD)||{},a=n||r||ED();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new RD),!a){$1(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(M,T)=>ad(T)?T:wD(T)&&ad(T.defaultValue)?T.defaultValue:Array.isArray(M)?M[M.length-1]:M,C=[S,{},!1];return C.t=S,C.i18n={},C.ready=!1,C}(v=a.options.react)!=null&&v.wait&&$1(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...TD(),...a.options.react,...e},{useSuspense:c,keyPrefix:u}=o;let h=i||((_=a.options)==null?void 0:_.defaultNS);h=ad(h)?[h]:h||["translation"],(j=(R=a.reportNamespaces).addUsedNamespaces)==null||j.call(R,h);const m=(a.isInitialized||a.initializedStoreOnce)&&h.every(S=>_D(S,a,o)),g=DD(a,e.lng||null,o.nsMode==="fallback"?h:h[0],u),x=()=>g,b=()=>F5(a,e.lng||null,o.nsMode==="fallback"?h:h[0],u),[w,k]=P.useState(x);let A=h.join();e.lng&&(A=`${e.lng}${A}`);const L=LD(A),I=P.useRef(!0);P.useEffect(()=>{const{bindI18n:S,bindI18nStore:C}=o;I.current=!0,!m&&!c&&(e.lng?HN(a,e.lng,h,()=>{I.current&&k(b)}):O1(a,h,()=>{I.current&&k(b)})),m&&L&&L!==A&&I.current&&k(b);const M=()=>{I.current&&k(b)};return S&&(a==null||a.on(S,M)),C&&(a==null||a.store.on(C,M)),()=>{I.current=!1,a&&S&&(S==null||S.split(" ").forEach(T=>a.off(T,M))),C&&a&&C.split(" ").forEach(T=>a.store.off(T,M))}},[a,A]),P.useEffect(()=>{I.current&&m&&k(x)},[a,u,m]);const N=[w,a,m];if(N.t=w,N.i18n=a,N.ready=m,m||!m&&!c)return N;throw new Promise(S=>{e.lng?HN(a,e.lng,h,()=>S()):O1(a,h,()=>S())})},MD={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community",creatorHub:"Creator Hub",settings:"Settings",discover:"Discover",guildHub:"Guild Hub",admin:"Admin",playground:"Playground",guideHub:"Guide Hub",scans:"Scans",overview:"Overview",guildPlanner:"Guild Planner",fusionPlanner:"Fusion Planner",guildCompare:"Guild comparison",waitlist:"Waitlist",sfMagazine:"SFMagazine",historyBook:"History Book",errorLog:"Error log",feedback:"Feedback",users:"Users",profile:"Profile",account:"Account",appearance:"Appearance",listViews:"List Views",rescanWidget:"Rescan Widget",uploadSimulator:"Upload Simulator",hudGameButtons:"HUD  Game Buttons"},FD={title:"Home",subtitle:"Welcome back",historybook:{title:"Historybook",credit:"Historybook - created by Resist 2 Exist & DonMuErte",logoAlt:"Historybook logo",coverAlt:"Historybook cover",open:"Open Historybook"},guidehub:{title:"GuideHub",subtitle:"Guides & calculators",logoAlt:"GuideHub logo",previewAlt:"GuideHub preview",open:"Open GuideHub"},sftools:{title:"SFTools",subtitle:"Tools & resources",previewAlt:"SFTools preview"},taverndiscord:{title:"Tavern Discord",subtitle:"Community Discord",previewAlt:"Tavern Discord preview"},discordBanner:{title:"JOIN OUR DISCORD",subtitle:"JOIN HERE",linkLabel:"Invite",linkValue:"discord.gg/2FqSvXC3",aria:"Open the SFDataHub Discord invite",logoAlt:"Discord logo"},news:{title:"Community news",empty:"No news yet.",emptyChannel:"No recent news in this channel.",openOnDiscord:"Open on Discord",prev:"Previous channel",next:"Next channel"},youtube:{title:"YouTube",prev:"Previous video",next:"Next video",empty:"No videos"},live:{title:"Live now",none:"Nobody is live right now.",open_on_twitch:"Open on Twitch",badge:"LIVE",viewers:"{{viewers}} viewers",prev:"Previous stream",next:"Next stream"},schedule:{open:"Show streaming schedule",title:"Streaming schedule",close:"Close",platform:"Platform",platformAll:"All",platformTwitch:"Twitch",platformYouTube:"YouTube",search:"Search",searchPlaceholder:"Streamer / Title",today:"Today only",columns:{weekday:"Weekday",start:"Start (UTC)",end:"End (UTC)",timezone:"Timezone",platform:"Platform",channel:"Channel URL",streamer:"Streamer",title:"Title"},empty:"No schedule yet.",link:"Link"}},BD={arenaManager:{links:{runeBonuses:"Rune Bonuses",buildOrder:"Build Order"},amRuneBonuses:{description:"Complete overview of Arena Manager runes and their bonus values. Grouped by tier; max, achievements, and breakpoints are highlighted.",searchPlaceholder:"Search (e.g., thousand, E34, x60)...",table:{tier:"Tier",amount:"Amount",goldBonus:"Gold Bonus",xpBonus:"XP Bonus",hpBonus:"HP Bonus",totalResistance:"Total Resistance",singleResistance:"Single Resistance",elementalDamage:"Elemental Damage",improvedItemQuality:"Improved Item Quality",chancesOfEpics:"Chances of Epics",tags:"Tags"},badges:{max:"MAX",achievement:"Achievement",x2:"x2",x12:"x12",x60:"x60",x8:"x8"},achievements:{capitalist:"Capitalist Achievement",stinkingrich:"Stinking Rich Achievement",runemaster:"Rune Master"},tiers:{thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion",quintillion:"Quintillion",sextillion:"Sextillion",septillion:"Septillion",octillion:"Octillion",nonillion:"Nonillion",decillion:"Decillion",undecillion:"Undecillion",duodecillion:"Duodecillion",tredecillion:"Tredecillion",quattuordecillion:"Quattuordecillion",quindecillion:"Quindecillion",sexdecillion:"Sexdecillion",septendecillion:"Septendecillion",octodecillion:"Octodecillion",novendecillion:"Novendecillion",vigintillion:"Vigintillion",unvigintillion:"Unvigintillion",duovigintillion:"Duovigintillion",trevigintillion:"Trevigintillion",quattuorvigintillion:"Quattuorvigintillion",quinquavigintillion:"Quinquavigintillion",sesvigintillion:"Sesvigintillion",septemvigintillion:"Septemvigintillion",octovigintillion:"Octovigintillion",novemvigintillion:"Novemvigintillion",trigintillion:"Trigintillion",untrigintillion:"Untrigintillion",duotrigintillion:"Duotrigintillion",trestrigintillion:"Trestrigintillion",quattuortrigintillion:"Quattuortrigintillion",quinquatrigintillion:"Quinquatrigintillion",sextrigintillion:"Sextrigintillion",septentrigintillion:"Septentrigintillion",octotrigintillion:"Octotrigintillion",noventrigintillion:"Noventrigintillion",quadragintillion:"Quadragintillion",unquadragintillion:"Unquadragintillion",duoquadragintillion:"Duoquadragintillion",trequadragintillion:"Trequadragintillion",quattuorquadragintillion:"Quattuorquadragintillion",quinquadragintillion:"Quinquadragintillion",sexquadragintillion:"Sexquadragintillion",septenquadragintillion:"Septenquadragintillion",octoquadragintillion:"Octoquadragintillion",novenquadragintillion:"Novenquadragintillion"}}},calculators:{fortress:{title:"Fortress - {{building}}",inputs:{buildingSelectLabel:"Select building",l2Label:"Laborers Quarter"},table:{level:"Level",wood:"Wood",stone:"Stone",buildTime:"Build Time",buildTimeL2:"Build Time",skip:"Skip (Mushr.)"},hints:{l2Effect:"Note: L2 applies to all buildings (0-15 -> 0-75%). Skip is based on the L2 time (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Woodcutter",treasury:"Treasury",smithy:"Smithy",quarry:"Quarry",magetower:"Mage Tower",laborersquarter:"Laborers Quarters",gemmine:"Gem Mine",fortress:"Fortress",fortifications:"Fortification",barracks:"Barracks",archery:"Archery",academy:"Academy"}},underworld:{title:"Underworld - {{building}}",inputs:{buildingSelectLabel:"Select building",l2Label:"Laborers Quarter"},table:{level:"Level",soul:"Soul",gold:"Gold",buildTime:"Build Time",buildTimeL2:"Build Time",skip:"Skip (Mushr.)"},empty:"No data for this building yet.",hints:{l2Effect:"Note: L2 applies to all buildings (1-15 -> up to 75%). Skip is based on the L2 time (ceil(ceil(sec/60)/10))."},buildings:{uwgate:"Underworld Gate",trollblock:"Troll Block",torturechamber:"Torture Chamber",soulextractor:"Soul Extractor",keeper:"Keeper",hearthofdarkn:"Hearth of Darkness",goldpit:"Gold Pit",goblinpit:"Goblin Pit",gladiator:"Gladiator",adventuromatic:"Adventuromatic"}}}},$D={tiles:{overview:{title:"Server Overview",subtitle:"Fusion tree & active servers"}},overview:{pageTitle:"Server Overview",expandAll:"Expand all",collapseAll:"Collapse all"}},OD={tabs:{gamified:"Gamified",gamified2:"Gamified 2",gamified3:"Gamified 3"}},VD={navigation:"Navigation",categories:"Categories",login:"Login",logout:"Logout",pin:"Pin",unpin:"Unpin",languagePreference:"Sidebar language preference",languageSwitchEn:"Switch language to English",languageSwitchDe:"Switch language to German",connectedCharacters:{title:"Connected characters",empty:"No characters linked yet. Link a character in your account to see it here.",loginPrompt:"Sign in to see your linked characters.",ctaGuest:"Open start guide",ctaAuthed:"Open linked characters guide",chip:{server:"Server",class:"Class"}}},UD={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}},connectedCharacters:{title:"Connected characters",subtitle:"These game characters are linked to your SFDataHub account.",loading:"Refreshing characters...",empty:{title:"No characters linked yet",description:'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.',cta:"Click to learn how linking works"},actions:{refresh:"Refresh",refreshing:"Refreshing...",unlink:"Disconnect character"},confirmation:{title:"Are you sure you want to unlink this character?",cancel:"Cancel",confirm:"Yes, unlink",confirming:"Unlinking..."},errors:{serviceUnavailable:"Auth service is not configured for unlinking.",unlink:"Could not unlink character."},columns:{character:"Character",server:"Server",playerId:"Player ID",class:"Class",level:"Level",guild:"Guild",lastVerified:"Last linked",source:"Source",actions:"Actions"},method:{discord:"Discord bot"},help:{title:"How does linking work?",show:"Show",hide:"Hide",steps:{link:'Link a character via the Discord bot using the "!connect char" command.',verify:"We match the character to your latest verified scan; keep your game data up to date.",refresh:"After linking, click Refresh here to sync the latest characters from the auth service.",unlink:"You can unlink any character in the Actions column; the source column shows how it was linked."},footnote:"Tip: Click Refresh after linking or unlinking to update this table."}}},zD={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},GD={quickAccess:"Quick access",upload:"Upload scan",officialGameSite:"Visit the official game website",search:"Search /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},HD={errors:{noSnapshot:"No snapshot yet for this server."}},WD={compareMonth:"Progress since",compareOff:"Off",compareMissingSnapshot:"No baseline data for {{key}}.",deltaNew:"NEW",filters:{guilds:{label:"Guilds",placeholder:"All guilds",empty:"No guilds in snapshot.",clear:"Clear",selected:"{{count}} selected"}}},KD={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},qD={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},QD={quota:{unlimited:"No limit"}},YD={placeholder:"Search players",inputLabel:"Search players, guilds and servers",loading:"Loading",recents:"Recent searches",minCharsHint:"Type at least 3 characters",noResults:"No results",players:"Players",guilds:"Guilds",servers:"Servers",active:"Active",inactive:"Inactive",guildMembers:"{{count}} members",guildMembersUnknown:"Members ?",moreResults:"More results press Enter",recentLabel:"Recent"},XD={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},JD={gem:{title:"Gem Calculator",inputs:{charLevel:{label:"Char Level",placeholder:"e.g., 360"},mineLevel:{label:"Mine Level",placeholder:"e.g., 10"},guildHok:{label:"Guild HoK",placeholder:"e.g., 840"}},gems:{normal:{label:"Normal",alt:"Normal Gem"},black:{label:"Black",alt:"Black Gem"},legendary:{label:"Legendary",alt:"Legendary Gem"}},hint:{prefix:"The values are approximations and represent the ",emphasis:"max possible",suffix:" you can find. Actual results may vary slightly."}},calculators:{fortress:{title:"Fortress - {{building}}",inputs:{buildingSelectLabel:"Select building",l2Label:"L2 (Laborers)"},table:{level:"Level",wood:"Wood",stone:"Stone",buildTime:"Build Time",buildTimeL2:"Build Time (L2)",skip:"Skip (Mushr.)"},hints:{l2Effect:"Note: L2 applies to all buildings (0-15 -> 0-75%). Skip is based on the L2 time (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Woodcutter",treasury:"Treasury",smithy:"Smithy",quarry:"Quarry",magetower:"Mage Tower",laborersquarter:"Laborers Quarters",gemmine:"Gem Mine",fortress:"Fortress",fortifications:"Fortification",barracks:"Barracks",archery:"Archery",academy:"Academy"}}}},ZD={links:{runeBonuses:"Rune Bonuses",buildOrder:"Build Order"},buildOrder:{title:"Arena Manager  Build Order",updated:"Last updated: {{date}}",body1:"Build your Attractions according to the picture below for maximum efficiency.",body2:"Upgrading to full Platinum on all Attractions will cost you {{mushrooms}}.",imageAlt:"Arena Manager build order",credit:"Credit to {{discord}}."}},eM={status:{label:"Status",up_to_date:"Up to date",work_in_progress:"Work in progress",outdated:"Outdated"}},tM={v2:{searchPlaceholder:"Search guides",searchLabel:"Search guides",navHomeLabel:"Home",emptyStateTitle:"Select a guide",emptyStateBody:"Choose an entry from the guide navigation.",loading:"Loading guide...",missingTitle:"Guide not available yet",missingBody:"This guide does not have markdown content yet.",createdLabel:"Created",updatedLabel:"Last edited",sectionsLabel:"Sections",noSections:"No sections",galleryLabel:"Gallery",closeLabel:"Close"}},sM={nav:MD,home:FD,guidehub:BD,servers:$D,playground:OD,sidebar:VD,account:UD,tools:zD,topbar:GD,toplistsPage:HD,toplists:WD,profile:KD,help:qD,uploadCenter:QD,search:YD,footer:XD,calculators:JD,arenaManager:ZD,guide:eM,guides:tM},nM={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community",creatorHub:"Creator Hub",settings:"Einstellungen",discover:"Discover",guildHub:"Guild Hub",admin:"Admin",playground:"Playground",guideHub:"Guide Hub",scans:"Scans",overview:"Uebersicht",guildPlanner:"Guild Planner",fusionPlanner:"Fusion Planner",guildCompare:"Gildenvergleich",waitlist:"Warteliste",sfMagazine:"SFMagazine",historyBook:"History Book",errorLog:"Fehlerprotokoll",feedback:"Feedback",users:"Nutzer",profile:"Profil",account:"Account",appearance:"Darstellung",listViews:"Listenansichten",rescanWidget:"Rescan-Widget",uploadSimulator:"Upload-Simulator",hudGameButtons:"HUD  Game Buttons"},rM={title:"Start",subtitle:"Willkommen zurueck",historybook:{title:"Historybook",credit:"Historybook - erstellt von Resist 2 Exist & DonMuErte",logoAlt:"Historybook Logo",coverAlt:"Historybook Cover",open:"Historybook oeffnen"},guidehub:{title:"GuideHub",subtitle:"Guides & Rechner",logoAlt:"GuideHub Logo",previewAlt:"GuideHub Vorschau",open:"GuideHub oeffnen"},sftools:{title:"SFTools",subtitle:"Tools & Ressourcen",previewAlt:"SFTools Vorschau"},taverndiscord:{title:"Tavern Discord",subtitle:"Community-Discord",previewAlt:"Tavern Discord Vorschau"},discordBanner:{title:"JOIN OUR DISCORD",subtitle:"HIER BEITRETEN",linkLabel:"Invite",linkValue:"discord.gg/2FqSvXC3",aria:"SFDataHub Discord-Invite oeffnen",logoAlt:"Discord-Logo"},news:{title:"Community-News",empty:"Noch keine Neuigkeiten.",emptyChannel:"Keine aktuellen News in diesem Kanal.",openOnDiscord:"Auf Discord oeffnen",prev:"Vorheriger Kanal",next:"Naechster Kanal"},youtube:{title:"YouTube",prev:"Vorheriges Video",next:"Naechstes Video",empty:"Keine Videos"},live:{title:"Jetzt live",none:"Niemand ist gerade live.",open_on_twitch:"Auf Twitch oeffnen",badge:"LIVE",viewers:"{{viewers}} Zuschauer",prev:"Vorheriger Stream",next:"Naechster Stream"},schedule:{open:"Streaming-Plan anzeigen",title:"Streaming-Plan",close:"Schliessen",platform:"Plattform",platformAll:"Alle",platformTwitch:"Twitch",platformYouTube:"YouTube",search:"Suche",searchPlaceholder:"Streamer / Titel",today:"Nur heute",columns:{weekday:"Wochentag",start:"Start (UTC)",end:"Ende (UTC)",timezone:"Zeitzone",platform:"Plattform",channel:"Kanal-URL",streamer:"Streamer",title:"Titel"},empty:"Noch kein Streaming-Plan.",link:"Link"}},iM={arenaManager:{links:{runeBonuses:"Runen-Boni",buildOrder:"Build Order"},amRuneBonuses:{description:"Komplette Uebersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Errungenschaften und Breakpoints sind markiert.",searchPlaceholder:"Suche (z. B. thousand, E34, x60)...",table:{tier:"Tier",amount:"Menge",goldBonus:"Gold Bonus",xpBonus:"XP Bonus",hpBonus:"HP Bonus",totalResistance:"Gesamtwiderstand",singleResistance:"Einzelwiderstand",elementalDamage:"Elementarschaden",improvedItemQuality:"Verbesserte Item-Qualitaet",chancesOfEpics:"Chance auf Epics",tags:"Tags"},badges:{max:"MAX",achievement:"Errungenschaft",x2:"x2",x12:"x12",x60:"x60",x8:"x8"},achievements:{capitalist:"Kapitalist Errungenschaft",stinkingrich:"Stinkreich Errungenschaft",runemaster:"Runenmeister"},tiers:{thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion",quintillion:"Quintillion",sextillion:"Sextillion",septillion:"Septillion",octillion:"Octillion",nonillion:"Nonillion",decillion:"Decillion",undecillion:"Undecillion",duodecillion:"Duodecillion",tredecillion:"Tredecillion",quattuordecillion:"Quattuordecillion",quindecillion:"Quindecillion",sexdecillion:"Sexdecillion",septendecillion:"Septendecillion",octodecillion:"Octodecillion",novendecillion:"Novendecillion",vigintillion:"Vigintillion",unvigintillion:"Unvigintillion",duovigintillion:"Duovigintillion",trevigintillion:"Trevigintillion",quattuorvigintillion:"Quattuorvigintillion",quinquavigintillion:"Quinquavigintillion",sesvigintillion:"Sesvigintillion",septemvigintillion:"Septemvigintillion",octovigintillion:"Octovigintillion",novemvigintillion:"Novemvigintillion",trigintillion:"Trigintillion",untrigintillion:"Untrigintillion",duotrigintillion:"Duotrigintillion",trestrigintillion:"Trestrigintillion",quattuortrigintillion:"Quattuortrigintillion",quinquatrigintillion:"Quinquatrigintillion",sextrigintillion:"Sextrigintillion",septentrigintillion:"Septentrigintillion",octotrigintillion:"Octotrigintillion",noventrigintillion:"Noventrigintillion",quadragintillion:"Quadragintillion",unquadragintillion:"Unquadragintillion",duoquadragintillion:"Duoquadragintillion",trequadragintillion:"Trequadragintillion",quattuorquadragintillion:"Quattuorquadragintillion",quinquadragintillion:"Quinquadragintillion",sexquadragintillion:"Sexquadragintillion",septenquadragintillion:"Septenquadragintillion",octoquadragintillion:"Octoquadragintillion",novenquadragintillion:"Novenquadragintillion"}}},calculators:{fortress:{title:"Festung - {{building}}",inputs:{buildingSelectLabel:"Gebaeude auswaehlen",l2Label:"Laborers Quarter"},table:{level:"Level",wood:"Holz",stone:"Stein",buildTime:"Bauzeit",buildTimeL2:"Bauzeit",skip:"Skip (Pilze)"},hints:{l2Effect:"Hinweis: L2 gilt fuer alle Gebaeude (0-15 -> 0-75%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Holzfaeller",treasury:"Schatzkammer",smithy:"Schmiede",quarry:"Steinbruch",magetower:"Magierturm",laborersquarter:"Arbeiterquartier",gemmine:"Edelsteinmine",fortress:"Festung",fortifications:"Befestigung",barracks:"Kaserne",archery:"Bogenschuetzen",academy:"Akademie"}},underworld:{title:"Unterwelt - {{building}}",inputs:{buildingSelectLabel:"Gebaeude auswaehlen",l2Label:"Laborers Quarter"},table:{level:"Level",soul:"Seelen",gold:"Gold",buildTime:"Bauzeit",buildTimeL2:"Bauzeit",skip:"Skip (Pilze)"},empty:"Noch keine Daten fuer dieses Gebaeude.",hints:{l2Effect:"Hinweis: L2 gilt fuer alle Gebaeude (1-15 -> bis zu 75%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."},buildings:{uwgate:"Unterwelt-Tor",trollblock:"Trollblock",torturechamber:"Folterkammer",soulextractor:"Seelenextraktor",keeper:"Waechter",hearthofdarkn:"Herd der Finsternis",goldpit:"Goldgrube",goblinpit:"Goblin-Grube",gladiator:"Gladiator",adventuromatic:"Abenteuer-o-mat"}}}},aM={tiles:{overview:{title:"Server-Uebersicht",subtitle:"Fusion-Tree & aktive Server"}},overview:{pageTitle:"Server-Uebersicht",expandAll:"Alle aufklappen",collapseAll:"Alle einklappen"}},oM={tabs:{gamified:"Gamifiziert",gamified2:"Gamified 2",gamified3:"Gamified 3"}},lM={navigation:"Navigation",categories:"Kategorien",login:"Login",logout:"Logout",pin:"Pin",unpin:"Unpin",languagePreference:"Sidebar-Sprache",languageSwitchEn:"Sprache auf Englisch wechseln",languageSwitchDe:"Sprache auf Deutsch wechseln",connectedCharacters:{title:"Verknuepfte Charaktere",empty:"Noch keine Charaktere verknuepft. Verknuepfe einen Charakter in deinem Account, damit er hier erscheint.",loginPrompt:"Bitte einloggen, um verknuepfte Charaktere zu sehen.",ctaGuest:"Start-Guide oeffnen",ctaAuthed:"Zum Account-Tab wechseln",chip:{server:"Server",class:"Klasse"}}},cM={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fuer deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}},connectedCharacters:{title:"Verknuepfte Charaktere",subtitle:"Diese Spielcharaktere sind mit deinem SFDataHub-Account verknuepft.",loading:"Charaktere werden aktualisiert...",empty:{title:"Noch keine Charaktere verknuepft",description:'Nutze den Befehl "!connect char" im Discord-Bot, verknuepfe deinen Account und klicke dann hier auf "Refresh".',cta:"Klicke hier, um zu erfahren, wie das Verknuepfen funktioniert"},actions:{refresh:"Refresh",refreshing:"Aktualisiere...",unlink:"Charakter trennen"},confirmation:{title:"Moechtest du diesen Charakter wirklich trennen?",cancel:"Abbrechen",confirm:"Ja, trennen",confirming:"Trenne..."},errors:{serviceUnavailable:"Auth-Service ist fuer das Trennen nicht konfiguriert.",unlink:"Charakter konnte nicht getrennt werden."},columns:{character:"Charakter",server:"Server",playerId:"Player ID",class:"Klasse",level:"Level",guild:"Gilde",lastVerified:"Zuletzt verknuepft",source:"Quelle",actions:"Aktionen"},method:{discord:"Discord-Bot"},help:{title:"Wie funktioniert das Verknuepfen?",show:"Anzeigen",hide:"Ausblenden",steps:{link:'Verknuepfe einen Charakter ueber den Discord-Bot mit dem Befehl "!connect char".',verify:"Wir gleichen den Charakter mit deinem letzten verifizierten Scan ab; halte deine Daten aktuell.",refresh:"Klicke nach dem Verknuepfen auf Refresh, damit die Liste aktualisiert wird.",unlink:"Du kannst jeden Charakter ueber die Spalte Aktionen trennen; die Quelle zeigt, wie er verknuepft wurde."},footnote:"Tipp: Nach dem Verknuepfen oder Trennen immer kurz auf Refresh klicken."}}},dM={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},uM={quickAccess:"Schnellzugriff",upload:"Scan hochladen",officialGameSite:"Besuche die offizielle Spielseite",search:"Suchen /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},hM={errors:{noSnapshot:"Noch kein Snapshot fuer diesen Server."}},mM={compareMonth:"Fortschritt seit",compareOff:"Aus",compareMissingSnapshot:"Keine Basisdaten fr {{key}}.",deltaNew:"NEU",filters:{guilds:{label:"Gilden",placeholder:"Alle Gilden",empty:"Keine Gilden im Snapshot.",clear:"Leeren",selected:"{{count}} ausgewaehlt"}}},pM={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},gM={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},fM={quota:{unlimited:"Kein Limit"}},vM={placeholder:"Suchen (Spieler)",inputLabel:"Spieler, Gilden und Server suchen",loading:"Ldt?",recents:"Letzte Suchen",minCharsHint:"Mindestens 3 Zeichen eingeben?",noResults:"Keine Treffer",players:"Spieler",guilds:"Gilden",servers:"Server",active:"Aktiv",inactive:"Inaktiv",guildMembers:"{{count}} Mitglieder",guildMembersUnknown:"Mitglieder ?",moreResults:"Mehr Ergebnisse? Enter drcken",recentLabel:"Kuerzlich"},xM={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},yM={gem:{title:"Edelstein-Rechner",inputs:{charLevel:{label:"Charakterlevel",placeholder:"z. B. 360"},mineLevel:{label:"Minenlevel",placeholder:"z. B. 10"},guildHok:{label:"Gilden-HoK",placeholder:"z. B. 840"}},gems:{normal:{label:"Normal",alt:"Normaler Edelstein"},black:{label:"Schwarz",alt:"Schwarzer Edelstein"},legendary:{label:"Legendaer",alt:"Legendaerer Edelstein"}},hint:{prefix:"Die Werte sind Schaetzwerte und geben das ",emphasis:"maximal Moegliche",suffix:" an, das du finden kannst. Tatsaechliche Ergebnisse koennen leicht abweichen."}},calculators:{fortress:{title:"Festung - {{building}}",inputs:{buildingSelectLabel:"Gebaeude auswaehlen",l2Label:"L2 (Arbeiter)"},table:{level:"Level",wood:"Holz",stone:"Stein",buildTime:"Bauzeit",buildTimeL2:"Bauzeit (L2)",skip:"Skip (Pilze)"},hints:{l2Effect:"Hinweis: L2 gilt fuer alle Gebaeude (0-15 -> 0-75%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."},buildings:{woodcutter:"Holzfaeller",treasury:"Schatzkammer",smithy:"Schmiede",quarry:"Steinbruch",magetower:"Magierturm",laborersquarter:"Arbeiterquartier",gemmine:"Edelsteinmine",fortress:"Festung",fortifications:"Befestigung",barracks:"Kaserne",archery:"Bogenschuetzen",academy:"Akademie"}}}},bM={links:{runeBonuses:"Runen-Boni",buildOrder:"Build Order"},buildOrder:{title:"Arena Manager  Build Order",updated:"Zuletzt aktualisiert: {{date}}",body1:"Baue deine Attraktionen gemaess dem Bild unten fuer maximale Effizienz.",body2:"Das Aufwerten auf vollstaendiges Platin bei allen Attraktionen kostet dich {{mushrooms}}.",imageAlt:"Arena Manager Build Order",credit:"Dank an {{discord}}."}},_M={status:{label:"Status",up_to_date:"Aktuell",work_in_progress:"In Arbeit",outdated:"Veraltet"}},wM={v2:{searchPlaceholder:"Guides suchen",searchLabel:"Guides suchen",navHomeLabel:"Startseite",emptyStateTitle:"Guide auswaehlen",emptyStateBody:"Waehle einen Eintrag in der Guide-Navigation.",loading:"Guide wird geladen...",missingTitle:"Guide noch nicht verfuegbar",missingBody:"Fuer diesen Guide gibt es noch keinen Markdown-Inhalt.",createdLabel:"Erstellt",updatedLabel:"Bearbeitet",sectionsLabel:"Sektionen",noSections:"Keine Sektionen",galleryLabel:"Galerie",closeLabel:"Schliessen"}},jM={nav:nM,home:rM,guidehub:iM,servers:aM,playground:oM,sidebar:lM,account:cM,tools:dM,topbar:uM,toplistsPage:hM,toplists:mM,profile:pM,help:gM,uploadCenter:fM,search:vM,footer:xM,calculators:yM,arenaManager:bM,guide:_M,guides:wM},SM={en:{translation:sM},de:{translation:jM}};Fn.use(AD).init({resources:SM,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function Yt(t,e="en"){return Fn.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var WN="popstate";function NM(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=jd(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),U1("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");c=h===-1?u:u.slice(0,h)}return c+"#"+(typeof a=="string"?a:Xm(a))}function r(i,a){qi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return CM(e,n,r,t)}function hn(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function qi(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function kM(){return Math.random().toString(36).substring(2,10)}function KN(t,e){return{usr:t.state,key:t.key,idx:e}}function U1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?jd(e):e,state:n,key:e&&e.key||r||kM()}}function Xm({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function CM(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function g(){c="POP";let A=m(),L=A==null?null:A-h;h=A,u&&u({action:c,location:k.location,delta:L})}function x(A,L){c="PUSH";let I=U1(k.location,A,L);n&&n(I,A),h=m()+1;let N=KN(I,h),v=k.createHref(I);try{o.pushState(N,"",v)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(v)}a&&u&&u({action:c,location:k.location,delta:1})}function b(A,L){c="REPLACE";let I=U1(k.location,A,L);n&&n(I,A),h=m();let N=KN(I,h),v=k.createHref(I);o.replaceState(N,"",v),a&&u&&u({action:c,location:k.location,delta:0})}function w(A){return TM(A)}let k={get action(){return c},get location(){return t(i,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(WN,g),u=A,()=>{i.removeEventListener(WN,g),u=null}},createHref(A){return e(i,A)},createURL:w,encodeLocation(A){let L=w(A);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:x,replace:b,go(A){return o.go(A)}};return k}function TM(t,e=!1){let n="http://localhost";typeof window!="undefined"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),hn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xm(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function B5(t,e,n="/"){return IM(t,e,n,!1)}function IM(t,e,n,r){let i=typeof e=="string"?jd(e):e,a=sl(i.pathname||"/",n);if(a==null)return null;let o=$5(t);EM(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=VM(a);c=$M(o[u],h,r)}return c}function $5(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;hn(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Zo([r,m.relativePath]),x=n.concat(m);o.children&&o.children.length>0&&(hn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),$5(o.children,e,x,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:FM(g,o.index),routesMeta:x})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let h of O5(o.path))a(o,c,!0,h)}),e}function O5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=O5(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function EM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var AM=/^:[\w-]+$/,PM=3,RM=2,LM=1,DM=10,MM=-2,qN=t=>t==="*";function FM(t,e){let n=t.split("/"),r=n.length;return n.some(qN)&&(r+=MM),e&&(r+=RM),n.filter(i=>!qN(i)).reduce((i,a)=>i+(AM.test(a)?PM:a===""?LM:DM),r)}function BM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function $M(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=kv({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),x=u.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=kv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Zo([a,g.pathname]),pathnameBase:HM(Zo([a,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(a=Zo([a,g.pathnameBase]))}return o}function kv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=OM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},x)=>{if(m==="*"){let w=c[x]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=c[x];return g&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function OM(t,e=!1,n=!0){qi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function VM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function sl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function UM(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?jd(t):t;return{pathname:n?n.startsWith("/")?n:zM(n,e):e,search:WM(r),hash:KM(i)}}function zM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function W0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function q_(t){let e=GM(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Q_(t,e,n,r=!1){let i;typeof t=="string"?i=jd(t):(i={...t},hn(!i.pathname||!i.pathname.includes("?"),W0("?","pathname","search",i)),hn(!i.pathname||!i.pathname.includes("#"),W0("#","pathname","hash",i)),hn(!i.search||!i.search.includes("#"),W0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}c=g>=0?e[g]:"/"}let u=UM(i,c),h=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var Zo=t=>t.join("/").replace(/\/\/+/g,"/"),HM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var V5=["POST","PUT","PATCH","DELETE"];new Set(V5);var QM=["GET",...V5];new Set(QM);var ih=P.createContext(null);ih.displayName="DataRouter";var Sx=P.createContext(null);Sx.displayName="DataRouterState";P.createContext(!1);var U5=P.createContext({isTransitioning:!1});U5.displayName="ViewTransition";var YM=P.createContext(new Map);YM.displayName="Fetchers";var XM=P.createContext(null);XM.displayName="Await";var Ua=P.createContext(null);Ua.displayName="Navigation";var _p=P.createContext(null);_p.displayName="Location";var fa=P.createContext({outlet:null,matches:[],isDataRoute:!1});fa.displayName="Route";var Y_=P.createContext(null);Y_.displayName="RouteError";function JM(t,{relative:e}={}){hn(ah(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Ua),{hash:i,pathname:a,search:o}=wp(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:Zo([n,a])),r.createHref({pathname:c,search:o,hash:i})}function ah(){return P.useContext(_p)!=null}function qn(){return hn(ah(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(_p).location}var z5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function G5(t){P.useContext(Ua).static||P.useLayoutEffect(t)}function Wr(){let{isDataRoute:t}=P.useContext(fa);return t?mF():ZM()}function ZM(){hn(ah(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(ih),{basename:e,navigator:n}=P.useContext(Ua),{matches:r}=P.useContext(fa),{pathname:i}=qn(),a=JSON.stringify(q_(r)),o=P.useRef(!1);return G5(()=>{o.current=!0}),P.useCallback((u,h={})=>{if(qi(o.current,z5),!o.current)return;if(typeof u=="number"){n.go(u);return}let m=Q_(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Zo([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,a,i,t])}var eF=P.createContext(null);function tF(t){let e=P.useContext(fa).outlet;return e&&P.createElement(eF.Provider,{value:t},e)}function Nx(){let{matches:t}=P.useContext(fa),e=t[t.length-1];return e?e.params:{}}function wp(t,{relative:e}={}){let{matches:n}=P.useContext(fa),{pathname:r}=qn(),i=JSON.stringify(q_(n));return P.useMemo(()=>Q_(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function sF(t,e){return H5(t,e)}function H5(t,e,n,r,i){var I;hn(ah(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(Ua),{matches:o}=P.useContext(fa),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",g=c&&c.route;{let N=g&&g.path||"";W5(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let x=qn(),b;if(e){let N=typeof e=="string"?jd(e):e;hn(m==="/"||((I=N.pathname)==null?void 0:I.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${N.pathname}" was given in the \`location\` prop.`),b=N}else b=x;let w=b.pathname||"/",k=w;if(m!=="/"){let N=m.replace(/^\//,"").split("/");k="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=B5(t,{pathname:k});qi(g||A!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),qi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=oF(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Zo([m,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:Zo([m,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,r,i);return e&&L?P.createElement(_p.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},L):L}function nF(){let t=hF(),e=qM(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,o)}var rF=P.createElement(nF,null),iF=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?P.createElement(fa.Provider,{value:this.props.routeContext},P.createElement(Y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aF({routeContext:t,match:e,children:n}){let r=P.useContext(ih);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(fa.Provider,{value:t},n)}function oF(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);hn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:g,errors:x}=n,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,m,g)=>{let x,b=!1,w=null,k=null;n&&(x=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||rF,c&&(u<0&&g===0?(W5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,k=null):u===g&&(b=!0,k=m.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,g+1)),L=()=>{let I;return x?I=w:b?I=k:m.route.Component?I=P.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=h,P.createElement(aF,{match:m,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(iF,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:L(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):L()},null)}function X_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lF(t){let e=P.useContext(ih);return hn(e,X_(t)),e}function cF(t){let e=P.useContext(Sx);return hn(e,X_(t)),e}function dF(t){let e=P.useContext(fa);return hn(e,X_(t)),e}function J_(t){let e=dF(t),n=e.matches[e.matches.length-1];return hn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function uF(){return J_("useRouteId")}function hF(){var r;let t=P.useContext(Y_),e=cF("useRouteError"),n=J_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function mF(){let{router:t}=lF("useNavigate"),e=J_("useNavigate"),n=P.useRef(!1);return G5(()=>{n.current=!0}),P.useCallback(async(i,a={})=>{qi(n.current,z5),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var QN={};function W5(t,e,n){!e&&!QN[t]&&(QN[t]=!0,qi(!1,n))}P.memo(pF);function pF({routes:t,future:e,state:n,unstable_onError:r}){return H5(t,void 0,n,r,e)}function no({to:t,replace:e,state:n,relative:r}){hn(ah(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Ua);qi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext(fa),{pathname:o}=qn(),c=Wr(),u=Q_(t,q_(a),o,r==="path"),h=JSON.stringify(u);return P.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:r})},[c,h,r,e,n]),null}function K5(t){return tF(t.context)}function je(t){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gF({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){hn(!ah(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=jd(n));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:x="default"}=n,b=P.useMemo(()=>{let w=sl(u,o);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:x},navigationType:r}},[o,u,h,m,g,x,r]);return qi(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:P.createElement(Ua.Provider,{value:c},P.createElement(_p.Provider,{children:e,value:b}))}function fF({children:t,location:e}){return sF(z1(t),e)}function z1(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let a=[...e,i];if(r.type===P.Fragment){n.push.apply(n,z1(r.props.children,a));return}hn(r.type===je,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=z1(r.props.children,a)),n.push(o)}),n}var Qf="get",Yf="application/x-www-form-urlencoded";function kx(t){return t!=null&&typeof t.tagName=="string"}function vF(t){return kx(t)&&t.tagName.toLowerCase()==="button"}function xF(t){return kx(t)&&t.tagName.toLowerCase()==="form"}function yF(t){return kx(t)&&t.tagName.toLowerCase()==="input"}function bF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _F(t,e){return t.button===0&&(!e||e==="_self")&&!bF(t)}function G1(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function wF(t,e){let n=G1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var df=null;function jF(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch(t){df=!0}return df}var SF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function K0(t){return t!=null&&!SF.has(t)?(qi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yf}"`),null):t}function NF(t,e){let n,r,i,a,o;if(xF(t)){let c=t.getAttribute("action");r=c?sl(c,e):null,n=t.getAttribute("method")||Qf,i=K0(t.getAttribute("enctype"))||Yf,a=new FormData(t)}else if(vF(t)||yF(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?sl(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Qf,i=K0(t.getAttribute("formenctype"))||K0(c.getAttribute("enctype"))||Yf,a=new FormData(c,t),!jF()){let{name:h,type:m,value:g}=t;if(m==="image"){let x=h?`${h}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else h&&a.append(h,g)}}else{if(kx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qf,r=null,i=Yf,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Z_(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function kF(t,e,n){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&sl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function CF(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IF(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await CF(a,n);return o.links?o.links():[]}return[]}));return RF(r.flat(1).filter(TF).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function YN(t,e,n,r,i,a){let o=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var m;return n[h].pathname!==u.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{var g;let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function EF(t,e,{includeHydrateFallback:n}={}){return AF(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function AF(t){return[...new Set(t)]}function PF(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function RF(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(PF(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function q5(){let t=P.useContext(ih);return Z_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LF(){let t=P.useContext(Sx);return Z_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ew=P.createContext(void 0);ew.displayName="FrameworkContext";function Q5(){let t=P.useContext(ew);return Z_(t,"You must render this element inside a <HydratedRouter> element"),t}function DF(t,e){let n=P.useContext(ew),[r,i]=P.useState(!1),[a,o]=P.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,x=P.useRef(null);P.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let k=L=>{L.forEach(I=>{o(I.isIntersecting)})},A=new IntersectionObserver(k,{threshold:.5});return x.current&&A.observe(x.current),()=>{A.disconnect()}}},[t]),P.useEffect(()=>{if(r){let k=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(k)}}},[r]);let b=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,x,{}]:[a,x,{onFocus:em(c,b),onBlur:em(u,w),onMouseEnter:em(h,b),onMouseLeave:em(m,w),onTouchStart:em(g,b)}]:[!1,x,{}]}function em(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function MF({page:t,...e}){let{router:n}=q5(),r=P.useMemo(()=>B5(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(BF,{page:t,matches:r,...e}):null}function FF(t){let{manifest:e,routeModules:n}=Q5(),[r,i]=P.useState([]);return P.useEffect(()=>{let a=!1;return IF(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function BF({page:t,matches:e,...n}){let r=qn(),{manifest:i,routeModules:a}=Q5(),{basename:o}=q5(),{loaderData:c,matches:u}=LF(),h=P.useMemo(()=>YN(t,e,u,i,r,"data"),[t,e,u,i,r]),m=P.useMemo(()=>YN(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,k=!1;if(e.forEach(L=>{var N;let I=i.routes[L.route.id];!I||!I.hasLoader||(!h.some(v=>v.route.id===L.route.id)&&L.route.id in c&&((N=a[L.route.id])!=null&&N.shouldRevalidate)||I.hasClientLoader?k=!0:w.add(L.route.id))}),w.size===0)return[];let A=kF(t,o,"data");return k&&w.size>0&&A.searchParams.set("_routes",e.filter(L=>w.has(L.route.id)).map(L=>L.route.id).join(",")),[A.pathname+A.search]},[o,c,r,i,h,e,t,a]),x=P.useMemo(()=>EF(m,i),[m,i]),b=FF(m);return P.createElement(P.Fragment,null,g.map(w=>P.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),x.map(w=>P.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:k})=>P.createElement("link",{key:w,nonce:n.nonce,...k})))}function $F(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Y5=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{Y5&&(window.__reactRouterVersion="7.9.1")}catch(t){}function OF({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=NM({window:n,v5Compat:!0}));let i=r.current,[a,o]=P.useState({action:i.action,location:i.location}),c=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement(gF,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var X5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zs=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:g,...x},b){let{basename:w}=P.useContext(Ua),k=typeof h=="string"&&X5.test(h),A,L=!1;if(typeof h=="string"&&k&&(A=h,Y5))try{let C=new URL(window.location.href),M=h.startsWith("//")?new URL(C.protocol+h):new URL(h),T=sl(M.pathname,w);M.origin===C.origin&&T!=null?h=T+M.search+M.hash:L=!0}catch(C){qi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=JM(h,{relative:i}),[N,v,_]=DF(r,x),R=zF(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:g});function j(C){e&&e(C),C.defaultPrevented||R(C)}let S=P.createElement("a",{...x,..._,href:A||I,onClick:L||a?e:j,ref:$F(b,v),target:u,"data-discover":!k&&n==="render"?"true":void 0});return N&&!k?P.createElement(P.Fragment,null,S,P.createElement(MF,{page:I})):S});zs.displayName="Link";var Bs=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},m){let g=wp(o,{relative:h.relative}),x=qn(),b=P.useContext(Sx),{navigator:w,basename:k}=P.useContext(Ua),A=b!=null&&qF(g)&&c===!0,L=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,I=x.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(I=I.toLowerCase(),N=N?N.toLowerCase():null,L=L.toLowerCase()),N&&k&&(N=sl(N,k)||N);const v=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let _=I===L||!i&&I.startsWith(L)&&I.charAt(v)==="/",R=N!=null&&(N===L||!i&&N.startsWith(L)&&N.charAt(L.length)==="/"),j={isActive:_,isPending:R,isTransitioning:A},S=_?e:void 0,C;typeof r=="function"?C=r(j):C=[r,_?"active":null,R?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(j):a;return P.createElement(zs,{...h,"aria-current":S,className:C,ref:m,style:M,to:o,viewTransition:c},typeof u=="function"?u(j):u)});Bs.displayName="NavLink";var VF=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Qf,action:c,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:g,...x},b)=>{let w=WF(),k=KF(c,{relative:h}),A=o.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&X5.test(c),I=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let v=N.nativeEvent.submitter,_=(v==null?void 0:v.getAttribute("formmethod"))||o;w(v||N.currentTarget,{fetcherKey:e,method:_,navigate:n,replace:i,state:a,relative:h,preventScrollReset:m,viewTransition:g})};return P.createElement("form",{ref:b,method:A,action:k,onSubmit:r?u:I,...x,"data-discover":!L&&t==="render"?"true":void 0})});VF.displayName="Form";function UF(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J5(t){let e=P.useContext(ih);return hn(e,UF(t)),e}function zF(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Wr(),u=qn(),h=wp(t,{relative:a});return P.useCallback(m=>{if(_F(m,e)){m.preventDefault();let g=n!==void 0?n:Xm(u)===Xm(h);c(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,n,r,e,t,i,a,o])}function sr(t){qi(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(G1(t)),n=P.useRef(!1),r=qn(),i=P.useMemo(()=>wF(r.search,n.current?null:e.current),[r.search]),a=Wr(),o=P.useCallback((c,u)=>{const h=G1(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var GF=0,HF=()=>`__${String(++GF)}__`;function WF(){let{router:t}=J5("useSubmit"),{basename:e}=P.useContext(Ua),n=uF();return P.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=NF(r,e);if(i.navigate===!1){let m=i.fetcherKey||HF();await t.fetch(m,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function KF(t,{relative:e}={}){let{basename:n}=P.useContext(Ua),r=P.useContext(fa);hn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...wp(t||".",{relative:e})},o=qn();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Zo([n,a.pathname])),Xm(a)}function qF(t,{relative:e}={}){let n=P.useContext(U5);hn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=J5("useViewTransitionState"),i=wp(t,{relative:e});if(!n.isTransitioning)return!1;let a=sl(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=sl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return kv(i.pathname,o)!=null||kv(i.pathname,a)!=null}var QF=A5();const YF=W_(QF);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),XN=t=>{const e=JF(t);return e.charAt(0).toUpperCase()+e.slice(1)},Z5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),ZF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>P.createElement("svg",{ref:u,...e7,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Z5("lucide",i),...!a&&!ZF(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>P.createElement(h,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(t,e)=>{const n=P.forwardRef(({className:r,...i},a)=>P.createElement(t7,{ref:a,iconNode:e,className:Z5(`lucide-${XF(XN(t))}`,`lucide-${t}`,r),...i}));return n.displayName=XN(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],Cx=Gt("aperture",s7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],r7=Gt("arrow-up-right",n7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],a7=Gt("ban",i7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],l7=Gt("bell",o7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],d7=Gt("book-open",c7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],h7=Gt("chart-column",u7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],p7=Gt("chevron-right",m7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Cm=Gt("circle-alert",g7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v7=Gt("circle-check",f7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Xf=Gt("circle-dot",x7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b7=Gt("circle-user-round",y7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],w7=Gt("clock-3",_7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],S7=Gt("cloud-upload",j7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k7=Gt("compass",N7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],T7=Gt("database",C7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],eE=Gt("diamond",I7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],A7=Gt("file-text",E7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],R7=Gt("folder-search",P7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],D7=Gt("globe",L7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],tE=Gt("hexagon",M7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],B7=Gt("house",F7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],O7=Gt("layers",$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],U7=Gt("layout-dashboard",V7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rc=Gt("loader-circle",z7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],H7=Gt("menu",G7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],K7=Gt("messages-square",W7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Q7=Gt("pencil",q7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],X7=Gt("pin-off",Y7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Z7=Gt("pin",J7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Tx=Gt("refresh-ccw",e9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],s9=Gt("scroll-text",t9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cv=Gt("search",n9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],i9=Gt("server-cog",r9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o9=Gt("settings",a9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],sE=Gt("shapes",l9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],nE=Gt("shield-alert",c9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],u9=Gt("shield-check",d9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],rE=Gt("shield-off",h9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sd=Gt("shield",m9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],g9=Gt("square-activity",p9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],v9=Gt("star",f9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],y9=Gt("sticky-note",x9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_9=Gt("trash-2",b9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tw=Gt("triangle-alert",w9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],S9=Gt("trophy",j9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],k9=Gt("upload",N9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ix=Gt("users",C9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],I9=Gt("wrench",T9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],iE=Gt("zap",E9),A9="_topbar_y7gox_3",P9="_topbarLeft_y7gox_39",R9="_searchWrap_y7gox_55",L9="_topbarRight_y7gox_109",D9="_mobileSearchBtn_y7gox_123",M9="_ico_y7gox_133",F9="_btnIco_y7gox_147",B9="_pill_y7gox_181",$9="_pillActive_y7gox_203",O9="_onlyExpanded_y7gox_211",V9="_topbarNav_y7gox_213",U9="_topbarLink_y7gox_223",z9="_gameLinkButton_y7gox_231",G9="_upload_y7gox_265",H9="_label_y7gox_295",W9="_avatarBtn_y7gox_301",K9="_avatar_y7gox_301",q9="_avatarSpinnerShell_y7gox_329",Q9="_avatarSpinner_y7gox_329",Y9="_srOnly_y7gox_365",X9="_accountRoot_y7gox_391",J9="_accountDropdown_y7gox_399",Z9="_accountHeader_y7gox_429",eB="_accountName_y7gox_441",tB="_accountSub_y7gox_453",sB="_accountStatusText_y7gox_463",nB="_accountPrimary_y7gox_473",rB="_accountHint_y7gox_495",iB="_accountItem_y7gox_505",aB="_accountDivider_y7gox_535",oB="_accountMiniAvatar_y7gox_547",lB="_accountLogout_y7gox_559",cB="_mobileSearchPanel_y7gox_589",dB="_mobileSearchOverlay_y7gox_617",qt={topbar:A9,topbarLeft:P9,searchWrap:R9,topbarRight:L9,mobileSearchBtn:D9,ico:M9,btnIco:F9,pill:B9,pillActive:$9,onlyExpanded:O9,topbarNav:V9,topbarLink:U9,gameLinkButton:z9,upload:G9,label:H9,avatarBtn:W9,avatar:K9,avatarSpinnerShell:q9,avatarSpinner:Q9,srOnly:Y9,accountRoot:X9,accountDropdown:J9,accountHeader:Z9,accountName:eB,accountSub:tB,accountStatusText:sB,accountPrimary:nB,accountHint:rB,accountItem:iB,accountDivider:aB,accountMiniAvatar:oB,accountLogout:lB,mobileSearchPanel:cB,mobileSearchOverlay:dB},va="https://auth.sfdatahub.com",uB=`${va}/auth/firebase-token`;async function hB(){var r,i;const t=await fetch(uB,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),n=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!n)throw new Error("Firebase token missing in response");return n}var JN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=a>>2,g=(a&3)<<4|c>>4;let x=(c&15)<<2|h>>6,b=h&63;u||(b=64,o||(x=64)),r.push(n[m],n[g],n[x],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||g==null)throw new pB;const x=a<<2|c>>4;if(r.push(x),h!==64){const b=c<<4&240|h>>2;if(r.push(b),g!==64){const w=h<<6&192|g;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gB=function(t){const e=aE(t);return oE.encodeByteArray(e,!0)},Tv=function(t){return gB(t).replace(/\./g,"")},lE=function(t){try{return oE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=()=>fB().__FIREBASE_DEFAULTS__,xB=()=>{if(typeof process=="undefined"||typeof JN=="undefined")return;const t=JN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yB=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&lE(t[1]);return e&&JSON.parse(e)},Ex=()=>{try{return vB()||xB()||yB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cE=t=>{var e,n;return(n=(e=Ex())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bB=t=>{const e=cE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dE=()=>{var t;return(t=Ex())===null||t===void 0?void 0:t.config},uE=t=>{var e;return(e=Ex())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tv(JSON.stringify(n)),Tv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jB(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hr())}function SB(){var t;const e=(t=Ex())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function NB(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function kB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TB(){const t=Hr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IB(){return!SB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EB(){try{return typeof indexedDB=="object"}catch(t){return!1}}function AB(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB="FirebaseError";class ul extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PB,Object.setPrototypeOf(this,ul.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jp.prototype.create)}}class jp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?RB(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ul(i,c,r)}}function RB(t,e){return t.replace(LB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const LB=/\{\$([^}]+)}/g;function DB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Iv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(ZN(a)&&ZN(o)){if(!Iv(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ZN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function MB(t,e){const n=new FB(t,e);return n.subscribe.bind(n)}class FB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=q0),i.error===void 0&&(i.error=q0),i.complete===void 0&&(i.complete=q0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){return t&&t._delegate?t._delegate:t}class pd{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _B;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VB(e))try{this.getOrInitializeService({instanceIdentifier:Yc})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=Yc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yc){return this.instances.has(e)}getOptions(e=Yc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Yc){return this.component?this.component.multipleInstances?e:Yc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OB(t){return t===Yc?void 0:t}function VB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $B(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(js||(js={}));const zB={debug:js.DEBUG,verbose:js.VERBOSE,info:js.INFO,warn:js.WARN,error:js.ERROR,silent:js.SILENT},GB=js.INFO,HB={[js.DEBUG]:"log",[js.VERBOSE]:"log",[js.INFO]:"info",[js.WARN]:"warn",[js.ERROR]:"error"},WB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=HB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sw{constructor(e){this.name=e,this._logLevel=GB,this._logHandler=WB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in js))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,js.DEBUG,...e),this._logHandler(this,js.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,js.VERBOSE,...e),this._logHandler(this,js.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,js.INFO,...e),this._logHandler(this,js.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,js.WARN,...e),this._logHandler(this,js.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,js.ERROR,...e),this._logHandler(this,js.ERROR,...e)}}const KB=(t,e)=>e.some(n=>t instanceof n);let ek,tk;function qB(){return ek||(ek=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QB(){return tk||(tk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,H1=new WeakMap,mE=new WeakMap,Q0=new WeakMap,nw=new WeakMap;function YB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ic(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hE.set(n,t)}).catch(()=>{}),nw.set(e,t),e}function XB(t){if(H1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});H1.set(t,e)}let W1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ic(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JB(t){W1=t(W1)}function ZB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Y0(this),e,...n);return mE.set(r,e.sort?e.sort():[e]),ic(r)}:QB().includes(t)?function(...e){return t.apply(Y0(this),e),ic(hE.get(this))}:function(...e){return ic(t.apply(Y0(this),e))}}function e$(t){return typeof t=="function"?ZB(t):(t instanceof IDBTransaction&&XB(t),KB(t,qB())?new Proxy(t,W1):t)}function ic(t){if(t instanceof IDBRequest)return YB(t);if(Q0.has(t))return Q0.get(t);const e=e$(t);return e!==t&&(Q0.set(t,e),nw.set(e,t)),e}const Y0=t=>nw.get(t);function t$(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=ic(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ic(o.result),u.oldVersion,u.newVersion,ic(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const s$=["get","getKey","getAll","getAllKeys","count"],n$=["put","add","delete","clear"],X0=new Map;function sk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(X0.get(e))return X0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=n$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||s$.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return X0.set(e,a),a}JB(t=>({...t,get:(e,n,r)=>sk(e,n)||t.get(e,n,r),has:(e,n)=>!!sk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const K1="@firebase/app",nk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new sw("@firebase/app"),a$="@firebase/app-compat",o$="@firebase/analytics-compat",l$="@firebase/analytics",c$="@firebase/app-check-compat",d$="@firebase/app-check",u$="@firebase/auth",h$="@firebase/auth-compat",m$="@firebase/database",p$="@firebase/data-connect",g$="@firebase/database-compat",f$="@firebase/functions",v$="@firebase/functions-compat",x$="@firebase/installations",y$="@firebase/installations-compat",b$="@firebase/messaging",_$="@firebase/messaging-compat",w$="@firebase/performance",j$="@firebase/performance-compat",S$="@firebase/remote-config",N$="@firebase/remote-config-compat",k$="@firebase/storage",C$="@firebase/storage-compat",T$="@firebase/firestore",I$="@firebase/vertexai-preview",E$="@firebase/firestore-compat",A$="firebase",P$="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="[DEFAULT]",R$={[K1]:"fire-core",[a$]:"fire-core-compat",[l$]:"fire-analytics",[o$]:"fire-analytics-compat",[d$]:"fire-app-check",[c$]:"fire-app-check-compat",[u$]:"fire-auth",[h$]:"fire-auth-compat",[m$]:"fire-rtdb",[p$]:"fire-data-connect",[g$]:"fire-rtdb-compat",[f$]:"fire-fn",[v$]:"fire-fn-compat",[x$]:"fire-iid",[y$]:"fire-iid-compat",[b$]:"fire-fcm",[_$]:"fire-fcm-compat",[w$]:"fire-perf",[j$]:"fire-perf-compat",[S$]:"fire-rc",[N$]:"fire-rc-compat",[k$]:"fire-gcs",[C$]:"fire-gcs-compat",[T$]:"fire-fst",[E$]:"fire-fst-compat",[I$]:"fire-vertex","fire-js":"fire-js",[A$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map,L$=new Map,Q1=new Map;function rk(t,e){try{t.container.addComponent(e)}catch(n){nl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gu(t){const e=t.name;if(Q1.has(e))return nl.debug(`There were multiple attempts to register component ${e}.`),!1;Q1.set(e,t);for(const n of Jm.values())rk(n,t);for(const n of L$.values())rk(n,t);return!0}function rw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function io(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ac=new jp("app","Firebase",D$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ac.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=P$;function pE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:q1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ac.create("bad-app-name",{appName:String(i)});if(n||(n=dE()),!n)throw ac.create("no-options");const a=Jm.get(i);if(a){if(Iv(n,a.options)&&Iv(r,a.config))return a;throw ac.create("duplicate-app",{appName:i})}const o=new UB(i);for(const u of Q1.values())o.addComponent(u);const c=new M$(n,r,o);return Jm.set(i,c),c}function iw(t=q1){const e=Jm.get(t);if(!e&&t===q1&&dE())return pE();if(!e)throw ac.create("no-app",{appName:t});return e}function F$(){return Array.from(Jm.values())}function oc(t,e,n){var r;let i=(r=R$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nl.warn(c.join(" "));return}Gu(new pd(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$="firebase-heartbeat-database",$$=1,Zm="firebase-heartbeat-store";let J0=null;function gE(){return J0||(J0=t$(B$,$$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zm)}catch(n){console.warn(n)}}}}).catch(t=>{throw ac.create("idb-open",{originalErrorMessage:t.message})})),J0}async function O$(t){try{const n=(await gE()).transaction(Zm),r=await n.objectStore(Zm).get(fE(t));return await n.done,r}catch(e){if(e instanceof ul)nl.warn(e.message);else{const n=ac.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nl.warn(n.message)}}}async function ik(t,e){try{const r=(await gE()).transaction(Zm,"readwrite");await r.objectStore(Zm).put(e,fE(t)),await r.done}catch(n){if(n instanceof ul)nl.warn(n.message);else{const r=ac.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nl.warn(r.message)}}}function fE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=1024,U$=720*60*60*1e3;class z${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new H$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ak();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=U$}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ak(),{heartbeatsToSend:r,unsentEntries:i}=G$(this._heartbeatsCache.heartbeats),a=Tv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return nl.warn(n),""}}}function ak(){return new Date().toISOString().substring(0,10)}function G$(t,e=V$){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),ok(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ok(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class H${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EB()?AB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ik(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ik(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ok(t){return Tv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){Gu(new pd("platform-logger",e=>new r$(e),"PRIVATE")),Gu(new pd("heartbeat",e=>new z$(e),"PRIVATE")),oc(K1,nk,t),oc(K1,nk,"esm2017"),oc("fire-js","")}W$("");var K$="firebase",q$="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oc(K$,q$,"app");function aw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q$=vE,xE=new jp("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new sw("@firebase/auth");function Y$(t,...e){Ev.logLevel<=js.WARN&&Ev.warn(`Auth (${oh}): ${t}`,...e)}function Jf(t,...e){Ev.logLevel<=js.ERROR&&Ev.error(`Auth (${oh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t,...e){throw lw(t,...e)}function $a(t,...e){return lw(t,...e)}function ow(t,e,n){const r=Object.assign(Object.assign({},Q$()),{[e]:n});return new jp("auth","Firebase",r).create(e,{appName:t.name})}function lc(t){return ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X$(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&po(t,"argument-error"),ow(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xE.create(t,...e)}function Zt(t,e,...n){if(!t)throw lw(e,...n)}function qo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jf(e),new Error(e)}function rl(t,e){t||qo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J$(){return lk()==="http:"||lk()==="https:"}function lk(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J$()||kB()||"connection"in navigator)?navigator.onLine:!0}function eO(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.shortDelay=e,this.longDelay=n,rl(n>e,"Short delay should be less than long delay!"),this.isMobile=jB()||CB()}get(){return Z$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){rl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;qo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;qo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;qo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Np(3e4,6e4);function Ax(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function lh(t,e,n,r,i={}){return bE(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Sp(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return NB()||(h.referrerPolicy="no-referrer"),yE.fetch()(wE(t,t.config.apiHost,n,c),h)})}async function bE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tO),e);try{const i=new nO(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw uf(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw uf(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ow(t,m,h);po(t,m)}}catch(i){if(i instanceof ul)throw i;po(t,"network-request-failed",{message:String(i)})}}async function _E(t,e,n,r,i={}){const a=await lh(t,e,n,r,i);return"mfaPendingCredential"in a&&po(t,"multi-factor-auth-required",{_serverResponse:a}),a}function wE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?cw(t.config,i):`${t.config.apiScheme}://${i}`}class nO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($a(this.auth,"network-request-failed")),sO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$a(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e){return lh(t,"POST","/v1/accounts:delete",e)}async function jE(t,e){return lh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function iO(t,e=!1){const n=Kn(t),r=await n.getIdToken(e),i=dw(r);Zt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Tm(Z0(i.auth_time)),issuedAtTime:Tm(Z0(i.iat)),expirationTime:Tm(Z0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Z0(t){return Number(t)*1e3}function dw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{const i=lE(n);return i?JSON.parse(i):(Jf("Failed to decode base64 JWT payload"),null)}catch(i){return Jf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ck(t){const e=dw(t);return Zt(e,"internal-error"),Zt(typeof e.exp!="undefined","internal-error"),Zt(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ul&&aO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tm(this.lastLoginAt),this.creationTime=Tm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Av(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ep(t,jE(n,{idToken:r}));Zt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?SE(a.providerUserInfo):[],c=cO(t.providerData,o),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),m=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new X1(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function lO(t){const e=Kn(t);await Av(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SE(t){return t.map(e=>{var{providerId:n}=e,r=aw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){const n=await bE(t,{},async()=>{const r=Sp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=wE(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",yE.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uO(t,e){return lh(t,"POST","/v2/accounts:revokeToken",Ax(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Zt(e.idToken,"internal-error"),Zt(typeof e.idToken!="undefined","internal-error"),Zt(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):ck(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Zt(e.length!==0,"internal-error");const n=ck(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Zt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await dO(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Fu;return r&&(Zt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Zt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Zt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fu,this.toJSON())}_performRefresh(){return qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e){Zt(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Qo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=aw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new X1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await ep(this,this.stsTokenManager.getToken(this.auth,e));return Zt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iO(this,e)}reload(){return lO(this)}_assign(e){this!==e&&(Zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Av(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(io(this.auth.app))return Promise.reject(lc(this.auth));const e=await this.getIdToken();return await ep(this,rO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,h,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,b=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,L=(h=n.createdAt)!==null&&h!==void 0?h:void 0,I=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:N,emailVerified:v,isAnonymous:_,providerData:R,stsTokenManager:j}=n;Zt(N&&j,e,"internal-error");const S=Fu.fromJSON(this.name,j);Zt(typeof N=="string",e,"internal-error"),Dl(g,e.name),Dl(x,e.name),Zt(typeof v=="boolean",e,"internal-error"),Zt(typeof _=="boolean",e,"internal-error"),Dl(b,e.name),Dl(w,e.name),Dl(k,e.name),Dl(A,e.name),Dl(L,e.name),Dl(I,e.name);const C=new Qo({uid:N,auth:e,email:x,emailVerified:v,displayName:g,isAnonymous:_,photoURL:w,phoneNumber:b,tenantId:k,stsTokenManager:S,createdAt:L,lastLoginAt:I});return R&&Array.isArray(R)&&(C.providerData=R.map(M=>Object.assign({},M))),A&&(C._redirectEventId=A),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Fu;i.updateFromServerResponse(n);const a=new Qo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Av(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Zt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?SE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Fu;c.updateFromIdToken(r);const u=new Qo({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new X1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new Map;function Yo(t){rl(t instanceof Function,"Expected a class definition");let e=dk.get(t);return e?(rl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NE.type="NONE";const uk=NE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e,n){return`firebase:${t}:${e}:${n}`}class Bu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Zf(this.userKey,i.apiKey,a),this.fullPersistenceKey=Zf("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bu(Yo(uk),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Yo(uk);const o=Zf(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(o);if(m){const g=Qo._fromJSON(e,m);h!==a&&(c=g),a=h;break}}catch(m){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Bu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch(m){}})),new Bu(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AE(e))return"Blackberry";if(PE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||TE(e))&&!e.includes("edge/"))return"Chrome";if(EE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kE(t=Hr()){return/firefox\//i.test(t)}function CE(t=Hr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TE(t=Hr()){return/crios\//i.test(t)}function IE(t=Hr()){return/iemobile/i.test(t)}function EE(t=Hr()){return/android/i.test(t)}function AE(t=Hr()){return/blackberry/i.test(t)}function PE(t=Hr()){return/webos/i.test(t)}function uw(t=Hr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hO(t=Hr()){var e;return uw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mO(){return TB()&&document.documentMode===10}function RE(t=Hr()){return uw(t)||EE(t)||PE(t)||AE(t)||/windows phone/i.test(t)||IE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e=[]){let n;switch(t){case"Browser":n=hk(Hr());break;case"Worker":n=`${hk(Hr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(t,e={}){return lh(t,"GET","/v2/passwordPolicy",Ax(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=6;class vO{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mk(this),this.idTokenSubscription=new mk(this),this.beforeStateQueue=new pO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jE(this,{idToken:e}),r=await Qo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(io(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Av(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(io(this.app))return Promise.reject(lc(this));const n=e?Kn(e):null;return n&&Zt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Zt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return io(this.app)?Promise.reject(lc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return io(this.app)?Promise.reject(lc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gO(this),n=new vO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yo(e)||this._popupRedirectResolver;Zt(n,this,"argument-error"),this.redirectPersistenceManager=await Bu.create(this,[Yo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Zt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Y$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kp(t){return Kn(t)}class mk{constructor(e){this.auth=e,this.observer=null,this.addObserver=MB(n=>this.observer=n)}get next(){return Zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yO(t){hw=t}function bO(t){return hw.loadJS(t)}function _O(){return hw.gapiScript}function wO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){const n=rw(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Iv(a,e!=null?e:{}))return i;po(i,"already-initialized")}return n.initialize({options:e})}function SO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NO(t,e,n){const r=kp(t);Zt(r._canInitEmulator,r,"emulator-config-failed"),Zt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=DE(e),{host:o,port:c}=kO(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),CO()}function DE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kO(t){const e=DE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:pk(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:pk(o)}}}function pk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qo("not implemented")}_getIdTokenResponse(e){return qo("not implemented")}_linkToIdToken(e,n){return qo("not implemented")}_getReauthenticationResolver(e){return qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t,e){return _E(t,"POST","/v1/accounts:signInWithIdp",Ax(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="http://localhost";class gd extends ME{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):po("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=aw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gd(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $u(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$u(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$u(e,n)}buildRequest(){const e={requestUri:TO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sp(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends mw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Cp{constructor(){super("facebook.com")}static credential(e){return gd._fromParams({providerId:Kl.PROVIDER_ID,signInMethod:Kl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kl.credentialFromTaggedObject(e)}static credentialFromError(e){return Kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kl.credential(e.oauthAccessToken)}catch(n){return null}}}Kl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Cp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gd._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ko.credential(n,r)}catch(i){return null}}}Ko.GOOGLE_SIGN_IN_METHOD="google.com";Ko.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Cp{constructor(){super("github.com")}static credential(e){return gd._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ql.credential(e.oauthAccessToken)}catch(n){return null}}}ql.GITHUB_SIGN_IN_METHOD="github.com";ql.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Cp{constructor(){super("twitter.com")}static credential(e,n){return gd._fromParams({providerId:Ql.PROVIDER_ID,signInMethod:Ql.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ql.credentialFromTaggedObject(e)}static credentialFromError(e){return Ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ql.credential(n,r)}catch(i){return null}}}Ql.TWITTER_SIGN_IN_METHOD="twitter.com";Ql.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Qo._fromIdTokenResponse(e,r,i),o=gk(r);return new fd({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=gk(r);return new fd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function gk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv extends ul{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pv(e,n,r,i)}}function FE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Pv._fromErrorAndOperation(t,a,e,r):a})}async function IO(t,e,n=!1){const r=await ep(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fd._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e,n=!1){const{auth:r}=t;if(io(r.app))return Promise.reject(lc(r));const i="reauthenticate";try{const a=await ep(t,FE(r,i,e,t),n);Zt(a.idToken,r,"internal-error");const o=dw(a.idToken);Zt(o,r,"internal-error");const{sub:c}=o;return Zt(t.uid===c,r,"user-mismatch"),fd._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&po(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e,n=!1){if(io(t.app))return Promise.reject(lc(t));const r="signIn",i=await FE(t,r,e),a=await fd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t,e){return _E(t,"POST","/v1/accounts:signInWithCustomToken",Ax(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){if(io(t.app))return Promise.reject(lc(t));const n=kp(t),r=await PO(n,{token:e,returnSecureToken:!0}),i=await fd._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function RO(t,e,n,r){return Kn(t).onIdTokenChanged(e,n,r)}function LO(t,e,n){return Kn(t).beforeAuthStateChanged(e,n)}function DO(t,e,n,r){return Kn(t).onAuthStateChanged(e,n,r)}function MO(t){return Kn(t).signOut()}const Rv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rv,"1"),this.storage.removeItem(Rv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1e3,BO=10;class $E extends BE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);mO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$E.type="LOCAL";const $O=$E;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends BE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OE.type="SESSION";const VE=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Px(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await OO(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Px.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=pw("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const x=g;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(x.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(){return window}function UO(t){ao().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(){return typeof ao().WorkerGlobalScope!="undefined"&&typeof ao().importScripts=="function"}async function zO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function GO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HO(){return UE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="firebaseLocalStorageDb",WO=1,Lv="firebaseLocalStorage",GE="fbase_key";class Tp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rx(t,e){return t.transaction([Lv],e?"readwrite":"readonly").objectStore(Lv)}function KO(){const t=indexedDB.deleteDatabase(zE);return new Tp(t).toPromise()}function J1(){const t=indexedDB.open(zE,WO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lv,{keyPath:GE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lv)?e(r):(r.close(),await KO(),e(await J1()))})})}async function vk(t,e,n){const r=Rx(t,!0).put({[GE]:e,value:n});return new Tp(r).toPromise()}async function qO(t,e){const n=Rx(t,!1).get(e),r=await new Tp(n).toPromise();return r===void 0?null:r.value}function xk(t,e){const n=Rx(t,!0).delete(e);return new Tp(n).toPromise()}const QO=800,YO=3;class HE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Px._getInstance(HO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zO(),!this.activeServiceWorker)return;this.sender=new VO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J1();return await vk(e,Rv,"1"),await xk(e,Rv),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Rx(i,!1).getAll();return new Tp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HE.type="LOCAL";const XO=HE;new Np(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e){return e?Yo(e):(Zt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends ME{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $u(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $u(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $u(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JO(t){return AO(t.auth,new gw(t),t.bypassAuthState)}function ZO(t){const{auth:e,user:n}=t;return Zt(n,e,"internal-error"),EO(n,new gw(t),t.bypassAuthState)}async function eV(t){const{auth:e,user:n}=t;return Zt(n,e,"internal-error"),IO(n,new gw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JO;case"linkViaPopup":case"linkViaRedirect":return eV;case"reauthViaPopup":case"reauthViaRedirect":return ZO;default:po(this.auth,"internal-error")}}resolve(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Np(2e3,1e4);async function sV(t,e,n){if(io(t.app))return Promise.reject($a(t,"operation-not-supported-in-this-environment"));const r=kp(t);X$(t,e,mw);const i=WE(r,n);return new td(r,"signInViaPopup",e,i).executeNotNull()}class td extends KE{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,td.currentPopupAction&&td.currentPopupAction.cancel(),td.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Zt(e,this.auth,"internal-error"),e}async onExecution(){rl(this.filter.length===1,"Popup operations only handle one event");const e=pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($a(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($a(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,td.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($a(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tV.get())};e()}}td.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="pendingRedirect",ev=new Map;class rV extends KE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ev.get(this.auth._key());if(!e){try{const r=await iV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ev.set(this.auth._key(),e)}return this.bypassAuthState||ev.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iV(t,e){const n=lV(e),r=oV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aV(t,e){ev.set(t._key(),e)}function oV(t){return Yo(t._redirectPersistence)}function lV(t){return Zf(nV,t.config.apiKey,t.name)}async function cV(t,e,n=!1){if(io(t.app))return Promise.reject(lc(t));const r=kp(t),i=WE(r,e),o=await new rV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=600*1e3;class uV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($a(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dV&&this.cachedEventUids.clear(),this.cachedEventUids.has(yk(e))}saveEventToCache(e){this.cachedEventUids.add(yk(e)),this.lastProcessedEventTime=Date.now()}}function yk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e={}){return lh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gV=/^https?/;async function fV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mV(t);for(const n of e)try{if(vV(n))return}catch(r){}po(t,"unauthorized-domain")}function vV(t){const e=Y1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gV.test(n))return!1;if(pV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new Np(3e4,6e4);function bk(){const t=ao().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yV(t){return new Promise((e,n)=>{var r,i,a;function o(){bk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bk(),n($a(t,"network-request-failed"))},timeout:xV.get()})}if(!((i=(r=ao().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ao().gapi)===null||a===void 0)&&a.load)o();else{const c=wO("iframefcb");return ao()[c]=()=>{gapi.load?o():n($a(t,"network-request-failed"))},bO(`${_O()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw tv=null,e})}let tv=null;function bV(t){return tv=tv||yV(t),tv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new Np(5e3,15e3),wV="__/auth/iframe",jV="emulator/auth/iframe",SV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kV(t){const e=t.config;Zt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cw(e,jV):`https://${t.config.authDomain}/${wV}`,r={apiKey:e.apiKey,appName:t.name,v:oh},i=NV.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Sp(r).slice(1)}`}async function CV(t){const e=await bV(t),n=ao().gapi;return Zt(n,t,"internal-error"),e.open({where:document.body,url:kV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SV,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=$a(t,"network-request-failed"),c=ao().setTimeout(()=>{a(o)},_V.get());function u(){ao().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IV=500,EV=600,AV="_blank",PV="http://localhost";class _k{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function RV(t,e,n,r=IV,i=EV){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},TV),{width:r.toString(),height:i.toString(),top:a,left:o}),h=Hr().toLowerCase();n&&(c=TE(h)?AV:n),kE(h)&&(e=e||PV,u.scrollbars="yes");const m=Object.entries(u).reduce((x,[b,w])=>`${x}${b}=${w},`,"");if(hO(h)&&c!=="_self")return LV(e||"",c),new _k(null);const g=window.open(e||"",c,m);Zt(g,t,"popup-blocked");try{g.focus()}catch(x){}return new _k(g)}function LV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="__/auth/handler",MV="emulator/auth/handler",FV=encodeURIComponent("fac");async function wk(t,e,n,r,i,a){Zt(t.config.authDomain,t,"auth-domain-config-required"),Zt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oh,eventId:i};if(e instanceof mw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof Cp){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),h=u?`#${FV}=${encodeURIComponent(u)}`:"";return`${BV(t)}?${Sp(c).slice(1)}${h}`}function BV({config:t}){return t.emulator?cw(t,MV):`https://${t.authDomain}/${DV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="webStorageSupport";class $V{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VE,this._completeRedirectFn=cV,this._overrideRedirectResult=aV}async _openPopup(e,n,r,i){var a;rl((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await wk(e,n,r,Y1(),i);return RV(e,o,pw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await wk(e,n,r,Y1(),i);return UO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(rl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CV(e),r=new uV(e);return n.register("authEvent",i=>(Zt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eb,{type:eb},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[eb];o!==void 0&&n(!!o),po(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RE()||CE()||uw()}}const OV=$V;var jk="@firebase/auth",Sk="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zV(t){Gu(new pd("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Zt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LE(t)},h=new xO(r,i,a,u);return SO(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gu(new pd("auth-internal",e=>{const n=kp(e.getProvider("auth").getImmediate());return(r=>new VV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oc(jk,Sk,UV(t)),oc(jk,Sk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=300,HV=uE("authIdTokenMaxAge")||GV;let Nk=null;const WV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HV)return;const i=n==null?void 0:n.token;Nk!==i&&(Nk=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KV(t=iw()){const e=rw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jO(t,{popupRedirectResolver:OV,persistence:[XO,$O,VE]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=WV(a.toString());LO(n,o,()=>o(n.currentUser)),RO(n,c=>o(c))}}const i=cE("auth");return i&&NO(n,`http://${i}`),n}function qV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=$a("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",qV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zV("Browser");var kk=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var od,QE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function C(){}C.prototype=S.prototype,j.D=S.prototype,j.prototype=new C,j.prototype.constructor=j,j.C=function(M,T,F){for(var D=Array(arguments.length-2),V=2;V<arguments.length;V++)D[V-2]=arguments[V];return S.prototype[T].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,S,C){C||(C=0);var M=Array(16);if(typeof S=="string")for(var T=0;16>T;++T)M[T]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(T=0;16>T;++T)M[T]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=j.g[0],C=j.g[1],T=j.g[2];var F=j.g[3],D=S+(F^C&(T^F))+M[0]+3614090360&4294967295;S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[1]+3905402710&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[2]+606105819&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[3]+3250441966&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(F^C&(T^F))+M[4]+4118548399&4294967295,S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[5]+1200080426&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[6]+2821735955&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[7]+4249261313&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(F^C&(T^F))+M[8]+1770035416&4294967295,S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[9]+2336552879&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[10]+4294925233&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[11]+2304563134&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(F^C&(T^F))+M[12]+1804603682&4294967295,S=C+(D<<7&4294967295|D>>>25),D=F+(T^S&(C^T))+M[13]+4254626195&4294967295,F=S+(D<<12&4294967295|D>>>20),D=T+(C^F&(S^C))+M[14]+2792965006&4294967295,T=F+(D<<17&4294967295|D>>>15),D=C+(S^T&(F^S))+M[15]+1236535329&4294967295,C=T+(D<<22&4294967295|D>>>10),D=S+(T^F&(C^T))+M[1]+4129170786&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[6]+3225465664&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[11]+643717713&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[0]+3921069994&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(T^F&(C^T))+M[5]+3593408605&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[10]+38016083&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[15]+3634488961&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[4]+3889429448&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(T^F&(C^T))+M[9]+568446438&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[14]+3275163606&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[3]+4107603335&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[8]+1163531501&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(T^F&(C^T))+M[13]+2850285829&4294967295,S=C+(D<<5&4294967295|D>>>27),D=F+(C^T&(S^C))+M[2]+4243563512&4294967295,F=S+(D<<9&4294967295|D>>>23),D=T+(S^C&(F^S))+M[7]+1735328473&4294967295,T=F+(D<<14&4294967295|D>>>18),D=C+(F^S&(T^F))+M[12]+2368359562&4294967295,C=T+(D<<20&4294967295|D>>>12),D=S+(C^T^F)+M[5]+4294588738&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[8]+2272392833&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[11]+1839030562&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[14]+4259657740&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(C^T^F)+M[1]+2763975236&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[4]+1272893353&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[7]+4139469664&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[10]+3200236656&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(C^T^F)+M[13]+681279174&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[0]+3936430074&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[3]+3572445317&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[6]+76029189&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(C^T^F)+M[9]+3654602809&4294967295,S=C+(D<<4&4294967295|D>>>28),D=F+(S^C^T)+M[12]+3873151461&4294967295,F=S+(D<<11&4294967295|D>>>21),D=T+(F^S^C)+M[15]+530742520&4294967295,T=F+(D<<16&4294967295|D>>>16),D=C+(T^F^S)+M[2]+3299628645&4294967295,C=T+(D<<23&4294967295|D>>>9),D=S+(T^(C|~F))+M[0]+4096336452&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[7]+1126891415&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[14]+2878612391&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[5]+4237533241&4294967295,C=T+(D<<21&4294967295|D>>>11),D=S+(T^(C|~F))+M[12]+1700485571&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[3]+2399980690&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[10]+4293915773&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[1]+2240044497&4294967295,C=T+(D<<21&4294967295|D>>>11),D=S+(T^(C|~F))+M[8]+1873313359&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[15]+4264355552&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[6]+2734768916&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[13]+1309151649&4294967295,C=T+(D<<21&4294967295|D>>>11),D=S+(T^(C|~F))+M[4]+4149444226&4294967295,S=C+(D<<6&4294967295|D>>>26),D=F+(C^(S|~T))+M[11]+3174756917&4294967295,F=S+(D<<10&4294967295|D>>>22),D=T+(S^(F|~C))+M[2]+718787259&4294967295,T=F+(D<<15&4294967295|D>>>17),D=C+(F^(T|~S))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(T+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+T&4294967295,j.g[3]=j.g[3]+F&4294967295}r.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var C=S-this.blockSize,M=this.B,T=this.h,F=0;F<S;){if(T==0)for(;F<=C;)i(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<S;)if(M[T++]=j.charCodeAt(F++),T==this.blockSize){i(this,M),T=0;break}}else for(;F<S;)if(M[T++]=j[F++],T==this.blockSize){i(this,M),T=0;break}}this.h=T,this.o+=S},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var C=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=C&255,C/=256;for(this.u(j),j=Array(16),S=C=0;4>S;++S)for(var M=0;32>M;M+=8)j[C++]=this.g[S]>>>M&255;return j};function a(j,S){var C=c;return Object.prototype.hasOwnProperty.call(C,j)?C[j]:C[j]=S(j)}function o(j,S){this.h=S;for(var C=[],M=!0,T=j.length-1;0<=T;T--){var F=j[T]|0;M&&F==S||(C[T]=F,M=!1)}this.g=C}var c={};function u(j){return-128<=j&&128>j?a(j,function(S){return new o([S|0],0>S?-1:0)}):new o([j|0],0>j?-1:0)}function h(j){if(isNaN(j)||!isFinite(j))return g;if(0>j)return A(h(-j));for(var S=[],C=1,M=0;j>=C;M++)S[M]=j/C|0,C*=4294967296;return new o(S,0)}function m(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return A(m(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(S,8)),M=g,T=0;T<j.length;T+=8){var F=Math.min(8,j.length-T),D=parseInt(j.substring(T,T+F),S);8>F?(F=h(Math.pow(S,F)),M=M.j(F).add(h(D))):(M=M.j(C),M=M.add(h(D)))}return M}var g=u(0),x=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-A(this).m();for(var j=0,S=1,C=0;C<this.g.length;C++){var M=this.i(C);j+=(0<=M?M:4294967296+M)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(w(this))return"0";if(k(this))return"-"+A(this).toString(j);for(var S=h(Math.pow(j,6)),C=this,M="";;){var T=v(C,S).g;C=L(C,T.j(S));var F=((0<C.g.length?C.g[0]:C.h)>>>0).toString(j);if(C=T,w(C))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function w(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function k(j){return j.h==-1}t.l=function(j){return j=L(this,j),k(j)?-1:w(j)?0:1};function A(j){for(var S=j.g.length,C=[],M=0;M<S;M++)C[M]=~j.g[M];return new o(C,~j.h).add(x)}t.abs=function(){return k(this)?A(this):this},t.add=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0,T=0;T<=S;T++){var F=M+(this.i(T)&65535)+(j.i(T)&65535),D=(F>>>16)+(this.i(T)>>>16)+(j.i(T)>>>16);M=D>>>16,F&=65535,D&=65535,C[T]=D<<16|F}return new o(C,C[C.length-1]&-2147483648?-1:0)};function L(j,S){return j.add(A(S))}t.j=function(j){if(w(this)||w(j))return g;if(k(this))return k(j)?A(this).j(A(j)):A(A(this).j(j));if(k(j))return A(this.j(A(j)));if(0>this.l(b)&&0>j.l(b))return h(this.m()*j.m());for(var S=this.g.length+j.g.length,C=[],M=0;M<2*S;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(var T=0;T<j.g.length;T++){var F=this.i(M)>>>16,D=this.i(M)&65535,V=j.i(T)>>>16,U=j.i(T)&65535;C[2*M+2*T]+=D*U,I(C,2*M+2*T),C[2*M+2*T+1]+=F*U,I(C,2*M+2*T+1),C[2*M+2*T+1]+=D*V,I(C,2*M+2*T+1),C[2*M+2*T+2]+=F*V,I(C,2*M+2*T+2)}for(M=0;M<S;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=S;M<2*S;M++)C[M]=0;return new o(C,0)};function I(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function N(j,S){this.g=j,this.h=S}function v(j,S){if(w(S))throw Error("division by zero");if(w(j))return new N(g,g);if(k(j))return S=v(A(j),S),new N(A(S.g),A(S.h));if(k(S))return S=v(j,A(S)),new N(A(S.g),S.h);if(30<j.g.length){if(k(j)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,M=S;0>=M.l(j);)C=_(C),M=_(M);var T=R(C,1),F=R(M,1);for(M=R(M,2),C=R(C,2);!w(M);){var D=F.add(M);0>=D.l(j)&&(T=T.add(C),F=D),M=R(M,1),C=R(C,1)}return S=L(j,T.j(S)),new N(T,S)}for(T=g;0<=j.l(S);){for(C=Math.max(1,Math.floor(j.m()/S.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=h(C),D=F.j(S);k(D)||0<D.l(j);)C-=M,F=h(C),D=F.j(S);w(F)&&(F=x),T=T.add(F),j=L(j,D)}return new N(T,j)}t.A=function(j){return v(this,j).h},t.and=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)&j.i(M);return new o(C,this.h&j.h)},t.or=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)|j.i(M);return new o(C,this.h|j.h)},t.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)^j.i(M);return new o(C,this.h^j.h)};function _(j){for(var S=j.g.length+1,C=[],M=0;M<S;M++)C[M]=j.i(M)<<1|j.i(M-1)>>>31;return new o(C,j.h)}function R(j,S){var C=S>>5;S%=32;for(var M=j.g.length-C,T=[],F=0;F<M;F++)T[F]=0<S?j.i(F+C)>>>S|j.i(F+C+1)<<32-S:j.i(F+C);return new o(T,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,od=o}).apply(typeof kk!="undefined"?kk:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var hf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YE,vm,XE,sv,Z1,JE,ZE,eA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,B,O){return f==Array.prototype||f==Object.prototype||(f[B]=O.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var B=0;B<f.length;++B){var O=f[B];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(f,B){if(B)e:{var O=r;f=f.split(".");for(var Q=0;Q<f.length-1;Q++){var ge=f[Q];if(!(ge in O))break e;O=O[ge]}f=f[f.length-1],Q=O[f],B=B(Q),B!=Q&&B!=null&&e(O,f,{configurable:!0,writable:!0,value:B})}}function a(f,B){f instanceof String&&(f+="");var O=0,Q=!1,ge={next:function(){if(!Q&&O<f.length){var Ce=O++;return{value:B(Ce,f[Ce]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}i("Array.prototype.values",function(f){return f||function(){return a(this,function(B,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(f){var B=typeof f;return B=B!="object"?B:f?Array.isArray(f)?"array":B:"null",B=="array"||B=="object"&&typeof f.length=="number"}function h(f){var B=typeof f;return B=="object"&&f!=null||B=="function"}function m(f,B,O){return f.call.apply(f.bind,arguments)}function g(f,B,O){if(!f)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,Q),f.apply(B,ge)}}return function(){return f.apply(B,arguments)}}function x(f,B,O){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,x.apply(null,arguments)}function b(f,B){var O=Array.prototype.slice.call(arguments,1);return function(){var Q=O.slice();return Q.push.apply(Q,arguments),f.apply(this,Q)}}function w(f,B){function O(){}O.prototype=B.prototype,f.aa=B.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(Q,ge,Ce){for(var it=Array(arguments.length-2),Hs=2;Hs<arguments.length;Hs++)it[Hs-2]=arguments[Hs];return B.prototype[ge].apply(Q,it)}}function k(f){const B=f.length;if(0<B){const O=Array(B);for(let Q=0;Q<B;Q++)O[Q]=f[Q];return O}return[]}function A(f,B){for(let O=1;O<arguments.length;O++){const Q=arguments[O];if(u(Q)){const ge=f.length||0,Ce=Q.length||0;f.length=ge+Ce;for(let it=0;it<Ce;it++)f[ge+it]=Q[it]}else f.push(Q)}}class L{constructor(B,O){this.i=B,this.j=O,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function I(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function v(f){return v[" "](f),f}v[" "]=function(){};var _=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function R(f,B,O){for(const Q in f)B.call(O,f[Q],Q,f)}function j(f,B){for(const O in f)B.call(void 0,f[O],O,f)}function S(f){const B={};for(const O in f)B[O]=f[O];return B}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,B){let O,Q;for(let ge=1;ge<arguments.length;ge++){Q=arguments[ge];for(O in Q)f[O]=Q[O];for(let Ce=0;Ce<C.length;Ce++)O=C[Ce],Object.prototype.hasOwnProperty.call(Q,O)&&(f[O]=Q[O])}}function T(f){var B=1;f=f.split(":");const O=[];for(;0<B&&f.length;)O.push(f.shift()),B--;return f.length&&O.push(f.join(":")),O}function F(f){c.setTimeout(()=>{throw f},0)}function D(){var f=Y;let B=null;return f.g&&(B=f.g,f.g=f.g.next,f.g||(f.h=null),B.next=null),B}class V{constructor(){this.h=this.g=null}add(B,O){const Q=U.get();Q.set(B,O),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var U=new L(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(B,O){this.h=B,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let H,z=!1,Y=new V,te=()=>{const f=c.Promise.resolve(void 0);H=()=>{f.then(G)}};var G=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(O){F(O)}var B=U;B.j(f),100>B.h&&(B.h++,f.next=B.g,B.g=f)}z=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(f,B){this.type=f,this.g=this.target=B,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,B=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};c.addEventListener("test",O,B),c.removeEventListener("test",O,B)}catch(O){}return f})();function ue(f,B){if(J.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,Q=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=B,B=f.relatedTarget){if(_){e:{try{v(B.nodeName);var ge=!0;break e}catch(Ce){}ge=!1}ge||(B=null)}}else O=="mouseover"?B=f.fromElement:O=="mouseout"&&(B=f.toElement);this.relatedTarget=B,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ne[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ue.aa.h.call(this)}}w(ue,J);var Ne={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),ee=0;function le(f,B,O,Q,ge){this.listener=f,this.proxy=null,this.src=B,this.type=O,this.capture=!!Q,this.ha=ge,this.key=++ee,this.da=this.fa=!1}function re(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function be(f){this.src=f,this.g={},this.h=0}be.prototype.add=function(f,B,O,Q,ge){var Ce=f.toString();f=this.g[Ce],f||(f=this.g[Ce]=[],this.h++);var it=Le(f,B,Q,ge);return-1<it?(B=f[it],O||(B.fa=!1)):(B=new le(B,this.src,Ce,!!Q,ge),B.fa=O,f.push(B)),B};function Te(f,B){var O=B.type;if(O in f.g){var Q=f.g[O],ge=Array.prototype.indexOf.call(Q,B,void 0),Ce;(Ce=0<=ge)&&Array.prototype.splice.call(Q,ge,1),Ce&&(re(B),f.g[O].length==0&&(delete f.g[O],f.h--))}}function Le(f,B,O,Q){for(var ge=0;ge<f.length;++ge){var Ce=f[ge];if(!Ce.da&&Ce.listener==B&&Ce.capture==!!O&&Ce.ha==Q)return ge}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Oe={};function Me(f,B,O,Q,ge){if(Array.isArray(B)){for(var Ce=0;Ce<B.length;Ce++)Me(f,B[Ce],O,Q,ge);return null}return O=fe(O),f&&f[Ee]?f.K(B,O,h(Q)?!!Q.capture:!1,ge):De(f,B,O,!1,Q,ge)}function De(f,B,O,Q,ge,Ce){if(!B)throw Error("Invalid event type");var it=h(ge)?!!ge.capture:!!ge,Hs=Xe(f);if(Hs||(f[Re]=Hs=new be(f)),O=Hs.add(B,O,Q,it,Ce),O.proxy)return O;if(Q=Fe(),O.proxy=Q,Q.src=f,Q.listener=O,f.addEventListener)se||(ge=it),ge===void 0&&(ge=!1),f.addEventListener(B.toString(),Q,ge);else if(f.attachEvent)f.attachEvent(Ie(B.toString()),Q);else if(f.addListener&&f.removeListener)f.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Fe(){function f(O){return B.call(f.src,f.listener,O)}const B=Ae;return f}function we(f,B,O,Q,ge){if(Array.isArray(B))for(var Ce=0;Ce<B.length;Ce++)we(f,B[Ce],O,Q,ge);else Q=h(Q)?!!Q.capture:!!Q,O=fe(O),f&&f[Ee]?(f=f.i,B=String(B).toString(),B in f.g&&(Ce=f.g[B],O=Le(Ce,O,Q,ge),-1<O&&(re(Ce[O]),Array.prototype.splice.call(Ce,O,1),Ce.length==0&&(delete f.g[B],f.h--)))):f&&(f=Xe(f))&&(B=f.g[B.toString()],f=-1,B&&(f=Le(B,O,Q,ge)),(O=-1<f?B[f]:null)&&de(O))}function de(f){if(typeof f!="number"&&f&&!f.da){var B=f.src;if(B&&B[Ee])Te(B.i,f);else{var O=f.type,Q=f.proxy;B.removeEventListener?B.removeEventListener(O,Q,f.capture):B.detachEvent?B.detachEvent(Ie(O),Q):B.addListener&&B.removeListener&&B.removeListener(Q),(O=Xe(B))?(Te(O,f),O.h==0&&(O.src=null,B[Re]=null)):re(f)}}}function Ie(f){return f in Oe?Oe[f]:Oe[f]="on"+f}function Ae(f,B){if(f.da)f=!0;else{B=new ue(B,this);var O=f.listener,Q=f.ha||f.src;f.fa&&de(f),f=O.call(Q,B)}return f}function Xe(f){return f=f[Re],f instanceof be?f:null}var oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(f){return typeof f=="function"?f:(f[oe]||(f[oe]=function(B){return f.handleEvent(B)}),f[oe])}function me(){X.call(this),this.i=new be(this),this.M=this,this.F=null}w(me,X),me.prototype[Ee]=!0,me.prototype.removeEventListener=function(f,B,O,Q){we(this,f,B,O,Q)};function xe(f,B){var O,Q=f.F;if(Q)for(O=[];Q;Q=Q.F)O.push(Q);if(f=f.M,Q=B.type||B,typeof B=="string")B=new J(B,f);else if(B instanceof J)B.target=B.target||f;else{var ge=B;B=new J(Q,f),M(B,ge)}if(ge=!0,O)for(var Ce=O.length-1;0<=Ce;Ce--){var it=B.g=O[Ce];ge=tt(it,Q,!0,B)&&ge}if(it=B.g=f,ge=tt(it,Q,!0,B)&&ge,ge=tt(it,Q,!1,B)&&ge,O)for(Ce=0;Ce<O.length;Ce++)it=B.g=O[Ce],ge=tt(it,Q,!1,B)&&ge}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var f=this.i,B;for(B in f.g){for(var O=f.g[B],Q=0;Q<O.length;Q++)re(O[Q]);delete f.g[B],f.h--}}this.F=null},me.prototype.K=function(f,B,O,Q){return this.i.add(String(f),B,!1,O,Q)},me.prototype.L=function(f,B,O,Q){return this.i.add(String(f),B,!0,O,Q)};function tt(f,B,O,Q){if(B=f.i.g[String(B)],!B)return!0;B=B.concat();for(var ge=!0,Ce=0;Ce<B.length;++Ce){var it=B[Ce];if(it&&!it.da&&it.capture==O){var Hs=it.listener,Xn=it.ha||it.src;it.fa&&Te(f.i,it),ge=Hs.call(Xn,Q)!==!1&&ge}}return ge&&!Q.defaultPrevented}function lt(f,B,O){if(typeof f=="function")O&&(f=x(f,O));else if(f&&typeof f.handleEvent=="function")f=x(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:c.setTimeout(f,B||0)}function Je(f){f.g=lt(()=>{f.g=null,f.i&&(f.i=!1,Je(f))},f.l);const B=f.h;f.h=null,f.m.apply(null,B)}class ut extends X{constructor(B,O){super(),this.m=B,this.l=O,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(f){X.call(this),this.h=f,this.g={}}w(bt,X);var ft=[];function mt(f){R(f.g,function(B,O){this.g.hasOwnProperty(O)&&de(B)},f),f.g={}}bt.prototype.N=function(){bt.aa.N.call(this),mt(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ot=c.JSON.stringify,os=c.JSON.parse,gt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ne(){}ne.prototype.h=null;function Ue(f){return f.h||(f.h=f.i())}function Ve(){}var dt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qe(){J.call(this,"d")}w(qe,J);function _t(){J.call(this,"c")}w(_t,J);var Dt={},Ot=null;function Be(){return Ot=Ot||new me}Dt.La="serverreachability";function Ct(f){J.call(this,Dt.La,f)}w(Ct,J);function ys(f){const B=Be();xe(B,new Ct(B))}Dt.STAT_EVENT="statevent";function ke(f,B){J.call(this,Dt.STAT_EVENT,f),this.stat=B}w(ke,J);function Ss(f){const B=Be();xe(B,new ke(B,f))}Dt.Ma="timingevent";function Qn(f,B){J.call(this,Dt.Ma,f),this.size=B}w(Qn,J);function Ks(f,B){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},B)}function vr(){this.g=!0}vr.prototype.xa=function(){this.g=!1};function nr(f,B,O,Q,ge,Ce){f.info(function(){if(f.g)if(Ce)for(var it="",Hs=Ce.split("&"),Xn=0;Xn<Hs.length;Xn++){var Ns=Hs[Xn].split("=");if(1<Ns.length){var ir=Ns[0];Ns=Ns[1];var Bn=ir.split("_");it=2<=Bn.length&&Bn[1]=="type"?it+(ir+"="+Ns+"&"):it+(ir+"=redacted&")}}else it=null;else it=Ce;return"XMLHTTP REQ ("+Q+") [attempt "+ge+"]: "+B+`
`+O+`
`+it})}function xr(f,B,O,Q,ge,Ce,it){f.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+ge+"]: "+B+`
`+O+`
`+Ce+" "+it})}function pn(f,B,O,Q){f.info(function(){return"XMLHTTP TEXT ("+B+"): "+Ts(f,O)+(Q?" "+Q:"")})}function us(f,B){f.info(function(){return"TIMEOUT: "+B})}vr.prototype.info=function(){};function Ts(f,B){if(!f.g)return B;if(!B)return null;try{var O=JSON.parse(B);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var Q=O[f];if(!(2>Q.length)){var ge=Q[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ce=ge[0];if(Ce!="noop"&&Ce!="stop"&&Ce!="close")for(var it=1;it<ge.length;it++)ge[it]=""}}}}return ot(O)}catch(Hs){return B}}var _n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qt;function Lr(){}w(Lr,ne),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},Qt=new Lr;function Yn(f,B,O,Q){this.j=f,this.i=B,this.l=O,this.R=Q||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yi}function Yi(){this.i=null,this.g="",this.h=!1}var ki={},ci={};function di(f,B,O){f.L=1,f.v=fl(Ii(B)),f.m=O,f.P=!0,Ci(f,null)}function Ci(f,B){f.F=Date.now(),Is(f),f.A=Ii(f.v);var O=f.A,Q=f.R;Array.isArray(Q)||(Q=[String(Q)]),xl(O.i,"t",Q),f.C=0,O=f.j.J,f.h=new Yi,f.g=hg(f.j,O?B:null,!f.m),0<f.O&&(f.M=new ut(x(f.Y,f,f.g),f.O)),B=f.U,O=f.g,Q=f.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(ft[0]=ge.toString()),ge=ft);for(var Ce=0;Ce<ge.length;Ce++){var it=Me(O,ge[Ce],Q||B.handleEvent,!1,B.h||B);if(!it)break;B.g[it.key]=it}B=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,B)):(f.u="GET",f.g.ea(f.A,f.u,null,B)),ys(),nr(f.i,f.u,f.A,f.l,f.R,f.m)}Yn.prototype.ca=function(f){f=f.target;const B=this.M;B&&hi(f)==3?B.j():this.Y(f)},Yn.prototype.Y=function(f){try{if(f==this.g)e:{const Bn=hi(this.g);var B=this.g.Ba();const ta=this.g.Z();if(!(3>Bn)&&(Bn!=3||this.g&&(this.h.h||this.g.oa()||Nh(this.g)))){this.J||Bn!=4||B==7||(B==8||0>=ta?ys(3):ys(2)),Zi(this);var O=this.g.Z();this.X=O;t:if(Xi(this)){var Q=Nh(this.g);f="";var ge=Q.length,Ce=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Xs(this),Ti(this);var it="";break t}this.h.i=new c.TextDecoder}for(B=0;B<ge;B++)this.h.h=!0,f+=this.h.i.decode(Q[B],{stream:!(Ce&&B==ge-1)});Q.length=0,this.h.g+=f,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=O==200,xr(this.i,this.u,this.A,this.l,this.R,Bn,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Hs,Xn=this.g;if((Hs=Xn.g?Xn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Hs)){var Ns=Hs;break t}}Ns=null}if(O=Ns)pn(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yc(this,O);else{this.o=!1,this.s=3,Ss(12),Xs(this),Ti(this);break e}}if(this.P){O=!0;let Ai;for(;!this.J&&this.C<it.length;)if(Ai=Ji(this,it),Ai==ci){Bn==4&&(this.s=4,Ss(14),O=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ai==ki){this.s=4,Ss(15),pn(this.i,this.l,it,"[Invalid Chunk]"),O=!1;break}else pn(this.i,this.l,Ai,null),yc(this,Ai);if(Xi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bn!=4||it.length!=0||this.h.h||(this.s=1,Ss(16),O=!1),this.o=this.o&&O,!O)pn(this.i,this.l,it,"[Invalid Chunked Response]"),Xs(this),Ti(this);else if(0<it.length&&!this.W){this.W=!0;var ir=this.j;ir.g==this&&ir.ba&&!ir.M&&(ir.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),Ch(ir),ir.M=!0,Ss(11))}}else pn(this.i,this.l,it,null),yc(this,it);Bn==4&&Xs(this),this.o&&!this.J&&(Bn==4?Vd(this.j,this):(this.o=!1,Is(this)))}else Md(this.g),O==400&&0<it.indexOf("Unknown SID")?(this.s=3,Ss(12)):(this.s=0,Ss(13)),Xs(this),Ti(this)}}}catch(Bn){}finally{}};function Xi(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Ji(f,B){var O=f.C,Q=B.indexOf(`
`,O);return Q==-1?ci:(O=Number(B.substring(O,Q)),isNaN(O)?ki:(Q+=1,Q+O>B.length?ci:(B=B.slice(Q,Q+O),f.C=Q+O,B)))}Yn.prototype.cancel=function(){this.J=!0,Xs(this)};function Is(f){f.S=Date.now()+f.I,ya(f,f.I)}function ya(f,B){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ks(x(f.ba,f),B)}function Zi(f){f.B&&(c.clearTimeout(f.B),f.B=null)}Yn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(us(this.i,this.A),this.L!=2&&(ys(),Ss(17)),Xs(this),this.s=2,Ti(this)):ya(this,this.S-f)};function Ti(f){f.j.G==0||f.J||Vd(f.j,f)}function Xs(f){Zi(f);var B=f.M;B&&typeof B.ma=="function"&&B.ma(),f.M=null,mt(f.U),f.g&&(B=f.g,f.g=null,B.abort(),B.ma())}function yc(f,B){try{var O=f.j;if(O.G!=0&&(O.g==f||Kr(O.h,f))){if(!f.K&&Kr(O.h,f)&&O.G==3){try{var Q=O.Da.g.parse(B)}catch(Ns){Q=null}if(Array.isArray(Q)&&Q.length==3){var ge=Q;if(ge[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)Od(O),Sa(O);else break e;$d(O),Ss(18)}}else O.za=ge[1],0<O.za-O.T&&37500>ge[2]&&O.F&&O.v==0&&!O.C&&(O.C=Ks(x(O.Za,O),6e3));if(1>=Jp(O.h)&&O.ca){try{O.ca()}catch(Ns){}O.ca=void 0}}else jo(O,11)}else if((f.K||O.g==f)&&Od(O),!I(B))for(ge=O.Da.g.parse(B),B=0;B<ge.length;B++){let Ns=ge[B];if(O.T=Ns[0],Ns=Ns[1],O.G==2)if(Ns[0]=="c"){O.K=Ns[1],O.ia=Ns[2];const ir=Ns[3];ir!=null&&(O.la=ir,O.j.info("VER="+O.la));const Bn=Ns[4];Bn!=null&&(O.Aa=Bn,O.j.info("SVER="+O.Aa));const ta=Ns[5];ta!=null&&typeof ta=="number"&&0<ta&&(Q=1.5*ta,O.L=Q,O.j.info("backChannelRequestTimeoutMs_="+Q)),Q=O;const Ai=f.g;if(Ai){const kc=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kc){var Ce=Q.h;Ce.g||kc.indexOf("spdy")==-1&&kc.indexOf("quic")==-1&&kc.indexOf("h2")==-1||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(_h(Ce,Ce.h),Ce.h=null))}if(Q.D){const zd=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;zd&&(Q.ya=zd,Qs(Q.I,Q.D,zd))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),Q=O;var it=f;if(Q.qa=ug(Q,Q.J?Q.ia:null,Q.W),it.K){Zp(Q.h,it);var Hs=it,Xn=Q.L;Xn&&(Hs.I=Xn),Hs.B&&(Zi(Hs),Is(Hs)),Q.g=it}else Nc(Q);0<O.i.length&&Ka(O)}else Ns[0]!="stop"&&Ns[0]!="close"||jo(O,7);else O.G==3&&(Ns[0]=="stop"||Ns[0]=="close"?Ns[0]=="stop"?jo(O,7):br(O):Ns[0]!="noop"&&O.l&&O.l.ta(Ns),O.v=0)}}ys(4)}catch(Ns){}}var bc=class{constructor(f,B){this.g=f,this.map=B}};function xo(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Jp(f){return f.h?1:f.g?f.g.size:0}function Kr(f,B){return f.h?f.h==B:f.g?f.g.has(B):!1}function _h(f,B){f.g?f.g.add(B):f.h=B}function Zp(f,B){f.h&&f.h==B?f.h=null:f.g&&f.g.has(B)&&f.g.delete(B)}xo.prototype.cancel=function(){if(this.i=eg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function eg(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let B=f.i;for(const O of f.g.values())B=B.concat(O.D);return B}return k(f.i)}function Ad(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var B=[],O=f.length,Q=0;Q<O;Q++)B.push(f[Q]);return B}B=[],O=0;for(Q in f)B[O++]=f[Q];return B}function Pd(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var B=[];f=f.length;for(var O=0;O<f;O++)B.push(O);return B}B=[],O=0;for(const Q in f)B[O++]=Q;return B}}}function ml(f,B){if(f.forEach&&typeof f.forEach=="function")f.forEach(B,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,B,void 0);else for(var O=Pd(f),Q=Ad(f),ge=Q.length,Ce=0;Ce<ge;Ce++)B.call(void 0,Q[Ce],O&&O[Ce],f)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fy(f,B){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var Q=f[O].indexOf("="),ge=null;if(0<=Q){var Ce=f[O].substring(0,Q);ge=f[O].substring(Q+1)}else Ce=f[O];B(Ce,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function yo(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof yo){this.h=f.h,wc(this,f.j),this.o=f.o,this.g=f.g,pl(this,f.s),this.l=f.l;var B=f.i,O=new Ga;O.i=B.i,B.g&&(O.g=new Map(B.g),O.h=B.h),gl(this,O),this.m=f.m}else f&&(B=String(f).match(_c))?(this.h=!1,wc(this,B[1]||"",!0),this.o=bs(B[2]||""),this.g=bs(B[3]||"",!0),pl(this,B[4]),this.l=bs(B[5]||"",!0),gl(this,B[6]||"",!0),this.m=bs(B[7]||"")):(this.h=!1,this.i=new Ga(null,this.h))}yo.prototype.toString=function(){var f=[],B=this.j;B&&f.push(vl(B,Rd,!0),":");var O=this.g;return(O||B=="file")&&(f.push("//"),(B=this.o)&&f.push(vl(B,Rd,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(vl(O,O.charAt(0)=="/"?ng:sg,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",vl(O,wh)),f.join("")};function Ii(f){return new yo(f)}function wc(f,B,O){f.j=O?bs(B,!0):B,f.j&&(f.j=f.j.replace(/:$/,""))}function pl(f,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);f.s=B}else f.s=null}function gl(f,B,O){B instanceof Ga?(f.i=B,Ha(f.i,f.h)):(O||(B=vl(B,rg)),f.i=new Ga(B,f.h))}function Qs(f,B,O){f.i.set(B,O)}function fl(f){return Qs(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function bs(f,B){return f?B?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function vl(f,B,O){return typeof f=="string"?(f=encodeURI(f).replace(B,tg),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function tg(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Rd=/[#\/\?@]/g,sg=/[#\?:]/g,ng=/[#\?]/g,rg=/[#\?@]/g,wh=/#/g;function Ga(f,B){this.h=this.g=null,this.i=f||null,this.j=!!B}function yr(f){f.g||(f.g=new Map,f.h=0,f.i&&fy(f.i,function(B,O){f.add(decodeURIComponent(B.replace(/\+/g," ")),O)}))}t=Ga.prototype,t.add=function(f,B){yr(this),this.i=null,f=ea(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(B),this.h+=1,this};function ba(f,B){yr(f),B=ea(f,B),f.g.has(B)&&(f.i=null,f.h-=f.g.get(B).length,f.g.delete(B))}function _a(f,B){return yr(f),B=ea(f,B),f.g.has(B)}t.forEach=function(f,B){yr(this),this.g.forEach(function(O,Q){O.forEach(function(ge){f.call(B,ge,Q,this)},this)},this)},t.na=function(){yr(this);const f=Array.from(this.g.values()),B=Array.from(this.g.keys()),O=[];for(let Q=0;Q<B.length;Q++){const ge=f[Q];for(let Ce=0;Ce<ge.length;Ce++)O.push(B[Q])}return O},t.V=function(f){yr(this);let B=[];if(typeof f=="string")_a(this,f)&&(B=B.concat(this.g.get(ea(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)B=B.concat(f[O])}return B},t.set=function(f,B){return yr(this),this.i=null,f=ea(this,f),_a(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[B]),this.h+=1,this},t.get=function(f,B){return f?(f=this.V(f),0<f.length?String(f[0]):B):B};function xl(f,B,O){ba(f,B),0<O.length&&(f.i=null,f.g.set(ea(f,B),k(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],B=Array.from(this.g.keys());for(var O=0;O<B.length;O++){var Q=B[O];const Ce=encodeURIComponent(String(Q)),it=this.V(Q);for(Q=0;Q<it.length;Q++){var ge=Ce;it[Q]!==""&&(ge+="="+encodeURIComponent(String(it[Q]))),f.push(ge)}}return this.i=f.join("&")};function ea(f,B){return B=String(B),f.j&&(B=B.toLowerCase()),B}function Ha(f,B){B&&!f.j&&(yr(f),f.i=null,f.g.forEach(function(O,Q){var ge=Q.toLowerCase();Q!=ge&&(ba(this,Q),xl(this,ge,O))},f)),f.j=B}function vy(f,B){const O=new vr;if(c.Image){const Q=new Image;Q.onload=b(ui,O,"TestLoadImage: loaded",!0,B,Q),Q.onerror=b(ui,O,"TestLoadImage: error",!1,B,Q),Q.onabort=b(ui,O,"TestLoadImage: abort",!1,B,Q),Q.ontimeout=b(ui,O,"TestLoadImage: timeout",!1,B,Q),c.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=f}else B(!1)}function ig(f,B){const O=new vr,Q=new AbortController,ge=setTimeout(()=>{Q.abort(),ui(O,"TestPingServer: timeout",!1,B)},1e4);fetch(f,{signal:Q.signal}).then(Ce=>{clearTimeout(ge),Ce.ok?ui(O,"TestPingServer: ok",!0,B):ui(O,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(ge),ui(O,"TestPingServer: error",!1,B)})}function ui(f,B,O,Q,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),Q(O)}catch(Ce){}}function xy(){this.g=new gt}function ag(f,B,O){const Q=O||"";try{ml(f,function(ge,Ce){let it=ge;h(ge)&&(it=ot(ge)),B.push(Q+Ce+"="+encodeURIComponent(it))})}catch(ge){throw B.push(Q+"type="+encodeURIComponent("_badmap")),ge}}function bo(f){this.l=f.Ub||null,this.j=f.eb||!1}w(bo,ne),bo.prototype.g=function(){return new jc(this.l,this.j)},bo.prototype.i=(function(f){return function(){return f}})({});function jc(f,B){me.call(this),this.D=f,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(jc,me),t=jc.prototype,t.open=function(f,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=B,this.readyState=1,ja(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(B.body=f),(this.D||c).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ja(this)),this.g&&(this.readyState=3,ja(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;og(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function og(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var B=f.value?f.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!f.done}))&&(this.response=this.responseText+=B)}f.done?wa(this):ja(this),this.readyState==3&&og(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,wa(this))},t.Qa=function(f){this.g&&(this.response=f,wa(this))},t.ga=function(){this.g&&wa(this)};function wa(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ja(f)}t.setRequestHeader=function(f,B){this.u.append(f,B)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],B=this.h.entries();for(var O=B.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=B.next();return f.join(`\r
`)};function ja(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _o(f){let B="";return R(f,function(O,Q){B+=Q,B+=":",B+=O,B+=`\r
`}),B}function yl(f,B,O){e:{for(Q in O){var Q=!1;break e}Q=!0}Q||(O=_o(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):Qs(f,B,O))}function ln(f){me.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ln,me);var yy=/^https?$/i,jh=["POST","PUT"];t=ln.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,B,O,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);B=B?B.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qt.g(),this.v=this.o?Ue(this.o):Ue(Qt),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(B,String(f),!0),this.B=!1}catch(Ce){Sc(this,Ce);return}if(f=O||"",O=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var ge in Q)O.set(ge,Q[ge]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ce of Q.keys())O.set(Ce,Q.get(Ce));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(O.keys()).find(Ce=>Ce.toLowerCase()=="content-type"),ge=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(jh,B,void 0))||Q||ge||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,it]of O)this.g.setRequestHeader(Ce,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dd(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ce){Sc(this,Ce)}};function Sc(f,B){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=B,f.m=5,Ld(f),Ei(f)}function Ld(f){f.A||(f.A=!0,xe(f,"complete"),xe(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,xe(this,"complete"),xe(this,"abort"),Ei(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),ln.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Sh(this):this.bb())},t.bb=function(){Sh(this)};function Sh(f){if(f.h&&typeof o!="undefined"&&(!f.v[1]||hi(f)!=4||f.Z()!=2)){if(f.u&&hi(f)==4)lt(f.Ea,0,f);else if(xe(f,"readystatechange"),hi(f)==4){f.h=!1;try{const it=f.Z();e:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var O;if(!(O=B)){var Q;if(Q=it===0){var ge=String(f.D).match(_c)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),Q=!yy.test(ge?ge.toLowerCase():"")}O=Q}if(O)xe(f,"complete"),xe(f,"success");else{f.m=6;try{var Ce=2<hi(f)?f.g.statusText:""}catch(Hs){Ce=""}f.l=Ce+" ["+f.Z()+"]",Ld(f)}}finally{Ei(f)}}}}function Ei(f,B){if(f.g){Dd(f);const O=f.g,Q=f.v[0]?()=>{}:null;f.g=null,f.v=null,B||xe(f,"ready");try{O.onreadystatechange=Q}catch(ge){}}}function Dd(f){f.I&&(c.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function hi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var B=this.g.responseText;return f&&B.indexOf(f)==0&&(B=B.substring(f.length)),os(B)}};function Nh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(B){return null}}function Md(f){const B={};f=(f.g&&2<=hi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<f.length;Q++){if(I(f[Q]))continue;var O=T(f[Q]);const ge=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Ce=B[ge]||[];B[ge]=Ce,Ce.push(O)}j(B,function(Q){return Q.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(f,B,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||B}function kh(f){this.Aa=0,this.i=[],this.j=new vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wa("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wa("baseRetryDelayMs",5e3,f),this.cb=Wa("retryDelaySeedMs",1e4,f),this.Wa=Wa("forwardChannelMaxRetries",2,f),this.wa=Wa("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new xo(f&&f.concurrentRequestLimit),this.Da=new xy,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kh.prototype,t.la=8,t.G=1,t.connect=function(f,B,O,Q){Ss(0),this.W=f,this.H=B||{},O&&Q!==void 0&&(this.H.OSID=O,this.H.OAID=Q),this.F=this.X,this.I=ug(this,null,this.W),Ka(this)};function br(f){if(Fd(f),f.G==3){var B=f.U++,O=Ii(f.I);if(Qs(O,"SID",f.K),Qs(O,"RID",B),Qs(O,"TYPE","terminate"),wo(f,O),B=new Yn(f,f.j,B),B.L=2,B.v=fl(Ii(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(B.v.toString(),"")}catch(Q){}!O&&c.Image&&(new Image().src=B.v,O=!0),O||(B.g=hg(B.j,null),B.g.ea(B.v)),B.F=Date.now(),Is(B)}dg(f)}function Sa(f){f.g&&(Ch(f),f.g.cancel(),f.g=null)}function Fd(f){Sa(f),f.u&&(c.clearTimeout(f.u),f.u=null),Od(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Ka(f){if(!Dr(f.h)&&!f.s){f.s=!0;var B=f.Ga;H||te(),z||(H(),z=!0),Y.add(B,f),f.B=0}}function by(f,B){return Jp(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=B.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ks(x(f.Ga,f,B),cg(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ge=new Yn(this,this.j,f);let Ce=this.o;if(this.S&&(Ce?(Ce=S(Ce),M(Ce,this.S)):Ce=this.S),this.m!==null||this.O||(ge.H=Ce,Ce=null),this.P)e:{for(var B=0,O=0;O<this.i.length;O++){t:{var Q=this.i[O];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(B+=Q,4096<B){B=O;break e}if(B===4096||O===this.i.length-1){B=O+1;break e}}B=1e3}else B=1e3;B=bl(this,ge,B),O=Ii(this.I),Qs(O,"RID",f),Qs(O,"CVER",22),this.D&&Qs(O,"X-HTTP-Session-Id",this.D),wo(this,O),Ce&&(this.O?B="headers="+encodeURIComponent(String(_o(Ce)))+"&"+B:this.m&&yl(O,this.m,Ce)),_h(this.h,ge),this.Ua&&Qs(O,"TYPE","init"),this.P?(Qs(O,"$req",B),Qs(O,"SID","null"),ge.T=!0,di(ge,O,null)):di(ge,O,B),this.G=2}}else this.G==3&&(f?Bd(this,f):this.i.length==0||Dr(this.h)||Bd(this))};function Bd(f,B){var O;B?O=B.l:O=f.U++;const Q=Ii(f.I);Qs(Q,"SID",f.K),Qs(Q,"RID",O),Qs(Q,"AID",f.T),wo(f,Q),f.m&&f.o&&yl(Q,f.m,f.o),O=new Yn(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),B&&(f.i=B.D.concat(f.i)),B=bl(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),_h(f.h,O),di(O,Q,B)}function wo(f,B){f.H&&R(f.H,function(O,Q){Qs(B,Q,O)}),f.l&&ml({},function(O,Q){Qs(B,Q,O)})}function bl(f,B,O){O=Math.min(f.i.length,O);var Q=f.l?x(f.l.Na,f.l,f):null;e:{var ge=f.i;let Ce=-1;for(;;){const it=["count="+O];Ce==-1?0<O?(Ce=ge[0].g,it.push("ofs="+Ce)):Ce=0:it.push("ofs="+Ce);let Hs=!0;for(let Xn=0;Xn<O;Xn++){let Ns=ge[Xn].g;const ir=ge[Xn].map;if(Ns-=Ce,0>Ns)Ce=Math.max(0,ge[Xn].g-100),Hs=!1;else try{ag(ir,it,"req"+Ns+"_")}catch(Bn){Q&&Q(ir)}}if(Hs){Q=it.join("&");break e}}}return f=f.i.splice(0,O),B.D=f,Q}function Nc(f){if(!f.g&&!f.u){f.Y=1;var B=f.Fa;H||te(),z||(H(),z=!0),Y.add(B,f),f.v=0}}function $d(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ks(x(f.Fa,f),cg(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,lg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ks(x(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ss(10),Sa(this),lg(this))};function Ch(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function lg(f){f.g=new Yn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var B=Ii(f.qa);Qs(B,"RID","rpc"),Qs(B,"SID",f.K),Qs(B,"AID",f.T),Qs(B,"CI",f.F?"0":"1"),!f.F&&f.ja&&Qs(B,"TO",f.ja),Qs(B,"TYPE","xmlhttp"),wo(f,B),f.m&&f.o&&yl(B,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=fl(Ii(B)),O.m=null,O.P=!0,Ci(O,f)}t.Za=function(){this.C!=null&&(this.C=null,Sa(this),$d(this),Ss(19))};function Od(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Vd(f,B){var O=null;if(f.g==B){Od(f),Ch(f),f.g=null;var Q=2}else if(Kr(f.h,B))O=B.D,Zp(f.h,B),Q=1;else return;if(f.G!=0){if(B.o)if(Q==1){O=B.m?B.m.length:0,B=Date.now()-B.F;var ge=f.B;Q=Be(),xe(Q,new Qn(Q,O)),Ka(f)}else Nc(f);else if(ge=B.s,ge==3||ge==0&&0<B.X||!(Q==1&&by(f,B)||Q==2&&$d(f)))switch(O&&0<O.length&&(B=f.h,B.i=B.i.concat(O)),ge){case 1:jo(f,5);break;case 4:jo(f,10);break;case 3:jo(f,6);break;default:jo(f,2)}}}function cg(f,B){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*B}function jo(f,B){if(f.j.info("Error code "+B),B==2){var O=x(f.fb,f),Q=f.Xa;const ge=!Q;Q=new yo(Q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wc(Q,"https"),fl(Q),ge?vy(Q.toString(),O):ig(Q.toString(),O)}else Ss(2);f.G=0,f.l&&f.l.sa(B),dg(f),Fd(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ss(2)):(this.j.info("Failed to ping google.com"),Ss(1))};function dg(f){if(f.G=0,f.ka=[],f.l){const B=eg(f.h);(B.length!=0||f.i.length!=0)&&(A(f.ka,B),A(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function ug(f,B,O){var Q=O instanceof yo?Ii(O):new yo(O);if(Q.g!="")B&&(Q.g=B+"."+Q.g),pl(Q,Q.s);else{var ge=c.location;Q=ge.protocol,B=B?B+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ce=new yo(null);Q&&wc(Ce,Q),B&&(Ce.g=B),ge&&pl(Ce,ge),O&&(Ce.l=O),Q=Ce}return O=f.D,B=f.ya,O&&B&&Qs(Q,O,B),Qs(Q,"VER",f.la),wo(f,Q),Q}function hg(f,B,O){if(B&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=f.Ca&&!f.pa?new ln(new bo({eb:O})):new ln(f.pa),B.Ha(f.J),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Th(){}t=Th.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ud(){}Ud.prototype.g=function(f,B){return new qr(f,B)};function qr(f,B){me.call(this),this.g=new kh(B),this.l=f,this.h=B&&B.messageUrlParams||null,f=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(f?f["X-WebChannel-Content-Type"]=B.messageContentType:f={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(f?f["X-WebChannel-Client-Profile"]=B.va:f={"X-WebChannel-Client-Profile":B.va}),this.g.S=f,(f=B&&B.Sb)&&!I(f)&&(this.g.m=f),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!I(B)&&(this.g.D=B,f=this.h,f!==null&&B in f&&(f=this.h,B in f&&delete f[B])),this.j=new qa(this)}w(qr,me),qr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qr.prototype.close=function(){br(this.g)},qr.prototype.o=function(f){var B=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=ot(f),f=O);B.i.push(new bc(B.Ya++,f)),B.G==3&&Ka(B)},qr.prototype.N=function(){this.g.l=null,delete this.j,br(this.g),delete this.g,qr.aa.N.call(this)};function mg(f){qe.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var B=f.__sm__;if(B){e:{for(const O in B){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,B=B!==null&&f in B?B[f]:void 0),this.data=B}else this.data=f}w(mg,qe);function pg(){_t.call(this),this.status=1}w(pg,_t);function qa(f){this.g=f}w(qa,Th),qa.prototype.ua=function(){xe(this.g,"a")},qa.prototype.ta=function(f){xe(this.g,new mg(f))},qa.prototype.sa=function(f){xe(this.g,new pg)},qa.prototype.ra=function(){xe(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,qr.prototype.send=qr.prototype.o,qr.prototype.open=qr.prototype.m,qr.prototype.close=qr.prototype.close,eA=function(){return new Ud},ZE=function(){return Be()},JE=Dt,Z1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_n.NO_ERROR=0,_n.TIMEOUT=8,_n.HTTP_ERROR=6,sv=_n,rr.COMPLETE="complete",XE=rr,Ve.EventType=dt,dt.OPEN="a",dt.CLOSE="b",dt.ERROR="c",dt.MESSAGE="d",me.prototype.listen=me.prototype.K,vm=Ve,ln.prototype.listenOnce=ln.prototype.L,ln.prototype.getLastError=ln.prototype.Ka,ln.prototype.getLastErrorCode=ln.prototype.Ba,ln.prototype.getStatus=ln.prototype.Z,ln.prototype.getResponseJson=ln.prototype.Oa,ln.prototype.getResponseText=ln.prototype.oa,ln.prototype.send=ln.prototype.ea,ln.prototype.setWithCredentials=ln.prototype.Ha,YE=ln}).apply(typeof hf!="undefined"?hf:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const Ck="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new sw("@firebase/firestore");function tm(){return vd.logLevel}function jt(t,...e){if(vd.logLevel<=js.DEBUG){const n=e.map(fw);vd.debug(`Firestore (${ch}): ${t}`,...n)}}function il(t,...e){if(vd.logLevel<=js.ERROR){const n=e.map(fw);vd.error(`Firestore (${ch}): ${t}`,...n)}}function Hu(t,...e){if(vd.logLevel<=js.WARN){const n=e.map(fw);vd.warn(`Firestore (${ch}): ${t}`,...n)}}function fw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t="Unexpected state"){const e=`FIRESTORE (${ch}) INTERNAL ASSERTION FAILED: `+t;throw il(e),new Error(e)}function Rs(t,e){t||zt()}function es(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends ul{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(zr.UNAUTHENTICATED)))}shutdown(){}}class YV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class XV{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Rs(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new oo,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new oo)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rs(typeof r.accessToken=="string"),new tA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rs(e===null||typeof e=="string"),new zr(e)}}class JV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(zr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Rs(this.o===void 0);const r=a=>{a.error!=null&&jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,jt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Rs(typeof n.token=="string"),this.R=n.token,new eU(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sU(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Fs(t,e){return t<e?-1:t>e?1:0}function Wu(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new at(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new at(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new on(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fs(this.nanoseconds,e.nanoseconds):Fs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new on(0,0))}static max(){return new Wt(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r){n===void 0?n=0:n>e.length&&zt(),r===void 0?r=e.length-n:r>e.length-n&&zt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tp?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ws extends tp{construct(e,n,r){return new Ws(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new at(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ws(n)}static emptyPath(){return new Ws([])}}const nU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends tp{construct(e,n,r){return new Tr(e,n,r)}static isValidIdentifier(e){return nU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new at(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new at(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new at(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new at(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(n)}static emptyPath(){return new Tr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.path=e}static fromPath(e){return new At(Ws.fromString(e))}static fromName(e){return new At(Ws.fromString(e).popFirst(5))}static empty(){return new At(Ws.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ws.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ws.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Ws(e.slice()))}}function rU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(r===1e9?new on(n+1,0):new on(n,r));return new uc(i,At.empty(),e)}function iU(t){return new uc(t.readTime,t.key,-1)}class uc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new uc(Wt.min(),At.empty(),-1)}static max(){return new uc(Wt.max(),At.empty(),-1)}}function aU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:Fs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ip(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==oU)throw t;jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ke(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ke?n:Ke.resolve(n)}catch(n){return Ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ke.reject(n)}static resolve(e){return new Ke(((n,r)=>{n(e)}))}static reject(e){return new Ke(((n,r)=>{r(e)}))}static waitFor(e){return new Ke(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=Ke.resolve(!1);for(const r of e)n=n.next((i=>i?Ke.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Ke(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next((m=>{o[h]=m,++c,c===a&&r(o)}),(m=>i(m)))}}))}static doWhile(e,n){return new Ke(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function cU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ep(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vw.oe=-1;function Ap(t){return t==null}function Dv(t){return t===0&&1/t==-1/0}function dU(t){return typeof t=="number"&&Number.isInteger(t)&&!Dv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nd(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.comparator=e,this.root=n||Nr.EMPTY}insert(e,n){return new yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r!=null?r:Nr.RED,this.left=i!=null?i:Nr.EMPTY,this.right=a!=null?a:Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Nr(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(e,n,r,i,a){return this}insert(e,n,r){return new Nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ik(this.data.getIterator())}getIteratorFrom(e){return new Ik(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ar)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ar(this.comparator);return n.data=e,n}}class Ik{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Gi([])}unionWith(e){let n=new Ar(Tr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new rA("Invalid base64 string: "+a):a}})(e);return new Rr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Rr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const uU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hc(t){if(Rs(!!t),typeof t=="string"){let e=0;const n=uU.exec(t);if(Rs(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(t.seconds),nanos:Ln(t.nanos)}}function Ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xd(t){return typeof t=="string"?Rr.fromBase64String(t):Rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xw(t){const e=t.mapValue.fields.__previous_value__;return Lx(e)?xw(e):e}function sp(t){const e=hc(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class np{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new np("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof np&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf={mapValue:{}};function yd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lx(t)?4:pU(t)?9007199254740991:mU(t)?10:11:zt()}function go(t,e){if(t===e)return!0;const n=yd(t);if(n!==yd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sp(t).isEqual(sp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=hc(i.timestampValue),c=hc(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return xd(i.bytesValue).isEqual(xd(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Ln(i.geoPointValue.latitude)===Ln(a.geoPointValue.latitude)&&Ln(i.geoPointValue.longitude)===Ln(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Ln(i.integerValue)===Ln(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Ln(i.doubleValue),c=Ln(a.doubleValue);return o===c?Dv(o)===Dv(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Wu(t.arrayValue.values||[],e.arrayValue.values||[],go);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Tk(o)!==Tk(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!go(o[u],c[u])))return!1;return!0})(t,e);default:return zt()}}function rp(t,e){return(t.values||[]).find((n=>go(n,e)))!==void 0}function Ku(t,e){if(t===e)return 0;const n=yd(t),r=yd(e);if(n!==r)return Fs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fs(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=Ln(a.integerValue||a.doubleValue),u=Ln(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return Ek(t.timestampValue,e.timestampValue);case 4:return Ek(sp(t),sp(e));case 5:return Fs(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=xd(a),u=xd(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=Fs(c[h],u[h]);if(m!==0)return m}return Fs(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=Fs(Ln(a.latitude),Ln(o.latitude));return c!==0?c:Fs(Ln(a.longitude),Ln(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ak(t.arrayValue,e.arrayValue);case 10:return(function(a,o){var c,u,h,m;const g=a.fields||{},x=o.fields||{},b=(c=g.value)===null||c===void 0?void 0:c.arrayValue,w=(u=x.value)===null||u===void 0?void 0:u.arrayValue,k=Fs(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((m=w==null?void 0:w.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:Ak(b,w)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===pf.mapValue&&o===pf.mapValue)return 0;if(a===pf.mapValue)return 1;if(o===pf.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const x=Fs(u[g],m[g]);if(x!==0)return x;const b=Ku(c[u[g]],h[m[g]]);if(b!==0)return b}return Fs(u.length,m.length)})(t.mapValue,e.mapValue);default:throw zt()}}function Ek(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fs(t,e);const n=hc(t),r=hc(e),i=Fs(n.seconds,r.seconds);return i!==0?i:Fs(n.nanos,r.nanos)}function Ak(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Ku(n[i],r[i]);if(a)return a}return Fs(n.length,r.length)}function qu(t){return e_(t)}function e_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=hc(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return xd(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=e_(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${e_(n.fields[o])}`;return i+"}"})(t.mapValue):zt()}function Mv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function t_(t){return!!t&&"integerValue"in t}function yw(t){return!!t&&"arrayValue"in t}function Pk(t){return!!t&&"nullValue"in t}function Rk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nv(t){return!!t&&"mapValue"in t}function mU(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Im(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nd(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Im(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Im(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Im(n)}setAll(e){let n=Tr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Im(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());nv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return go(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Nd(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ai(Im(this.value))}}function iA(t){const e=[];return Nd(t.fields,((n,r)=>{const i=new Tr([n]);if(nv(r)){const a=iA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new mr(e,0,Wt.min(),Wt.min(),Wt.min(),ai.empty(),0)}static newFoundDocument(e,n,r,i){return new mr(e,1,n,Wt.min(),r,i,0)}static newNoDocument(e,n){return new mr(e,2,n,Wt.min(),Wt.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new mr(e,3,n,Wt.min(),Wt.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.position=e,this.inclusive=n}}function Lk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Ku(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!go(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n="asc"){this.field=e,this.dir=n}}function gU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class Wn extends aA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vU(e,n,r):n==="array-contains"?new bU(e,r):n==="in"?new _U(e,r):n==="not-in"?new wU(e,r):n==="array-contains-any"?new jU(e,r):new Wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xU(e,r):new yU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ku(n,this.value)):n!==null&&yd(this.value)===yd(n)&&this.matchesComparison(Ku(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Va extends aA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Va(e,n)}matches(e){return oA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oA(t){return t.op==="and"}function lA(t){return fU(t)&&oA(t)}function fU(t){for(const e of t.filters)if(e instanceof Va)return!1;return!0}function s_(t){if(t instanceof Wn)return t.field.canonicalString()+t.op.toString()+qu(t.value);if(lA(t))return t.filters.map((e=>s_(e))).join(",");{const e=t.filters.map((n=>s_(n))).join(",");return`${t.op}(${e})`}}function cA(t,e){return t instanceof Wn?(function(r,i){return i instanceof Wn&&r.op===i.op&&r.field.isEqual(i.field)&&go(r.value,i.value)})(t,e):t instanceof Va?(function(r,i){return i instanceof Va&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&cA(o,i.filters[c])),!0):!1})(t,e):void zt()}function dA(t){return t instanceof Wn?(function(n){return`${n.field.canonicalString()} ${n.op} ${qu(n.value)}`})(t):t instanceof Va?(function(n){return n.op.toString()+" {"+n.getFilters().map(dA).join(" ,")+"}"})(t):"Filter"}class vU extends Wn{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class xU extends Wn{constructor(e,n){super(e,"in",n),this.keys=uA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yU extends Wn{constructor(e,n){super(e,"not-in",n),this.keys=uA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>At.fromName(r.referenceValue)))}class bU extends Wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yw(n)&&rp(n.arrayValue,this.value)}}class _U extends Wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rp(this.value.arrayValue,n)}}class wU extends Wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rp(this.value.arrayValue,n)}}class jU extends Wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>rp(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Mk(t,e=null,n=[],r=[],i=null,a=null,o=null){return new SU(t,e,n,r,i,a,o)}function bw(t){const e=es(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>s_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>qu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>qu(r))).join(",")),e.ue=n}return e.ue}function _w(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dk(t.startAt,e.startAt)&&Dk(t.endAt,e.endAt)}function n_(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function NU(t,e,n,r,i,a,o,c){return new hl(t,e,n,r,i,a,o,c)}function ww(t){return new hl(t)}function Fk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jw(t){return t.collectionGroup!==null}function Ou(t){const e=es(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ar(Tr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new ip(a,r))})),n.has(Tr.keyField().canonicalString())||e.ce.push(new ip(Tr.keyField(),r))}return e.ce}function lo(t){const e=es(t);return e.le||(e.le=kU(e,Ou(t))),e.le}function kU(t,e){if(t.limitType==="F")return Mk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new ip(i.field,a)}));const n=t.endAt?new Qu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qu(t.startAt.position,t.startAt.inclusive):null;return Mk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r_(t,e){const n=t.filters.concat([e]);return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fv(t,e,n){return new hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dx(t,e){return _w(lo(t),lo(e))&&t.limitType===e.limitType}function hA(t){return`${bw(lo(t))}|lt:${t.limitType}`}function wu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>dA(i))).join(", ")}]`),Ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>qu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>qu(i))).join(",")),`Target(${r})`})(lo(t))}; limitType=${t.limitType})`}function Mx(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):At.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Ou(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const h=Lk(o,c,u);return o.inclusive?h<=0:h<0})(r.startAt,Ou(r),i)||r.endAt&&!(function(o,c,u){const h=Lk(o,c,u);return o.inclusive?h>=0:h>0})(r.endAt,Ou(r),i))})(t,e)}function CU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mA(t){return(e,n)=>{let r=!1;for(const i of Ou(t)){const a=TU(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function TU(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?Ku(u,h):zt()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nd(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return nA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=new yn(At.comparator);function al(){return IU}const pA=new yn(At.comparator);function xm(...t){let e=pA;for(const n of t)e=e.insert(n.key,n);return e}function gA(t){let e=pA;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function sd(){return Em()}function fA(){return Em()}function Em(){return new dh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const EU=new yn(At.comparator),AU=new Ar(At.comparator);function xs(...t){let e=AU;for(const n of t)e=e.add(n);return e}const PU=new Ar(Fs);function RU(){return PU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dv(e)?"-0":e}}function vA(t){return{integerValue:""+t}}function LU(t,e){return dU(e)?vA(e):Sw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this._=void 0}}function DU(t,e,n){return t instanceof ap?(function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Lx(a)&&(a=xw(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}})(n,e):t instanceof op?yA(t,e):t instanceof lp?bA(t,e):(function(i,a){const o=xA(i,a),c=Bk(o)+Bk(i.Pe);return t_(o)&&t_(i.Pe)?vA(c):Sw(i.serializer,c)})(t,e)}function MU(t,e,n){return t instanceof op?yA(t,e):t instanceof lp?bA(t,e):n}function xA(t,e){return t instanceof Bv?(function(r){return t_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class ap extends Fx{}class op extends Fx{constructor(e){super(),this.elements=e}}function yA(t,e){const n=_A(e);for(const r of t.elements)n.some((i=>go(i,r)))||n.push(r);return{arrayValue:{values:n}}}class lp extends Fx{constructor(e){super(),this.elements=e}}function bA(t,e){let n=_A(e);for(const r of t.elements)n=n.filter((i=>!go(i,r)));return{arrayValue:{values:n}}}class Bv extends Fx{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Bk(t){return Ln(t.integerValue||t.doubleValue)}function _A(t){return yw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.field=e,this.transform=n}}function BU(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof op&&i instanceof op||r instanceof lp&&i instanceof lp?Wu(r.elements,i.elements,go):r instanceof Bv&&i instanceof Bv?go(r.Pe,i.Pe):r instanceof ap&&i instanceof ap})(t.transform,e.transform)}class $U{constructor(e,n){this.version=e,this.transformResults=n}}class Ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bx{}function wA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $x(t.key,Ir.none()):new Pp(t.key,t.data,Ir.none());{const n=t.data,r=ai.empty();let i=new Ar(Tr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new fc(t.key,r,new Gi(i.toArray()),Ir.none())}}function OU(t,e,n){t instanceof Pp?(function(i,a,o){const c=i.value.clone(),u=Ok(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof fc?(function(i,a,o){if(!rv(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Ok(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(jA(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Am(t,e,n,r){return t instanceof Pp?(function(a,o,c,u){if(!rv(a.precondition,o))return c;const h=a.value.clone(),m=Vk(a.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof fc?(function(a,o,c,u){if(!rv(a.precondition,o))return c;const h=Vk(a.fieldTransforms,u,o),m=o.data;return m.setAll(jA(a)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return rv(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function VU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=xA(r.transform,i||null);a!=null&&(n===null&&(n=ai.empty()),n.set(r.field,a))}return n||null}function $k(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wu(r,i,((a,o)=>BU(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pp extends Bx{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fc extends Bx{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ok(t,e,n){const r=new Map;Rs(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,MU(o,c,n[i]))}return r}function Vk(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,DU(a,o,e))}return r}class $x extends Bx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SA extends Bx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&OU(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Am(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Am(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fA();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=wA(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Wt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xs())}isEqual(e){return this.batchId===e.batchId&&Wu(this.mutations,e.mutations,((n,r)=>$k(n,r)))&&Wu(this.baseMutations,e.baseMutations,((n,r)=>$k(n,r)))}}class Nw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Rs(e.mutations.length===r.length);let i=(function(){return EU})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Nw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un,ks;function NA(t){switch(t){default:return zt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function kA(t){if(t===void 0)return il("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case Un.OK:return Pe.OK;case Un.CANCELLED:return Pe.CANCELLED;case Un.UNKNOWN:return Pe.UNKNOWN;case Un.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Un.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Un.INTERNAL:return Pe.INTERNAL;case Un.UNAVAILABLE:return Pe.UNAVAILABLE;case Un.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Un.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Un.NOT_FOUND:return Pe.NOT_FOUND;case Un.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Un.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Un.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Un.ABORTED:return Pe.ABORTED;case Un.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Un.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Un.DATA_LOSS:return Pe.DATA_LOSS;default:return zt()}}(ks=Un||(Un={}))[ks.OK=0]="OK",ks[ks.CANCELLED=1]="CANCELLED",ks[ks.UNKNOWN=2]="UNKNOWN",ks[ks.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ks[ks.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ks[ks.NOT_FOUND=5]="NOT_FOUND",ks[ks.ALREADY_EXISTS=6]="ALREADY_EXISTS",ks[ks.PERMISSION_DENIED=7]="PERMISSION_DENIED",ks[ks.UNAUTHENTICATED=16]="UNAUTHENTICATED",ks[ks.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ks[ks.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ks[ks.ABORTED=10]="ABORTED",ks[ks.OUT_OF_RANGE=11]="OUT_OF_RANGE",ks[ks.UNIMPLEMENTED=12]="UNIMPLEMENTED",ks[ks.INTERNAL=13]="INTERNAL",ks[ks.UNAVAILABLE=14]="UNAVAILABLE",ks[ks.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new od([4294967295,4294967295],0);function Uk(t){const e=HU().encode(t),n=new QE;return n.update(e),new Uint8Array(n.digest())}function zk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new od([n,r],0),new od([i,a],0)]}class kw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ym(`Invalid padding: ${n}`);if(r<0)throw new ym(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ym(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ym(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=od.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(od.fromNumber(r)));return i.compare(WU)===1&&(i=new od([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Uk(e),[r,i]=zk(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new kw(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const n=Uk(e),[r,i]=zk(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ym extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ox(Wt.min(),i,new yn(Fs),al(),xs())}}class Rp{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rp(r,n,xs(),xs(),xs())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class CA{constructor(e,n){this.targetId=e,this.me=n}}class TA{constructor(e,n,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Gk{constructor(){this.fe=0,this.ge=Wk(),this.pe=Rr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xs(),n=xs(),r=xs();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:zt()}})),new Rp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Wk()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Rs(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class KU{constructor(e){this.Le=e,this.Be=new Map,this.ke=al(),this.qe=Hk(),this.Qe=new yn(Fs)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:zt()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(n_(a))if(r===0){const o=new At(a.path);this.Ue(n,o,mr.newNoDocument(o,Wt.min()))}else Rs(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=xd(r).toUint8Array()}catch(u){if(u instanceof rA)return Hu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new kw(o,i,a)}catch(u){return Hu(u instanceof ym?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((a,o)=>{const c=this.Je(o);if(c){if(a.current&&n_(c.target)){const u=new At(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,mr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}}));let r=xs();this.qe.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.ke.forEach(((a,o)=>o.setReadTime(e)));const i=new Ox(e,n,this.Qe,this.ke,r);return this.ke=al(),this.qe=Hk(),this.Qe=new yn(Fs),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Gk,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ar(Fs),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||jt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gk),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hk(){return new yn(At.comparator)}function Wk(){return new yn(At.comparator)}const qU={asc:"ASCENDING",desc:"DESCENDING"},QU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YU={and:"AND",or:"OR"};class XU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i_(t,e){return t.useProto3Json||Ap(e)?e:{value:e}}function $v(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JU(t,e){return $v(t,e.toTimestamp())}function Wi(t){return Rs(!!t),Wt.fromTimestamp((function(n){const r=hc(n);return new on(r.seconds,r.nanos)})(t))}function Cw(t,e){return a_(t,e).canonicalString()}function a_(t,e){const n=(function(i){return new Ws(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function EA(t){const e=Ws.fromString(t);return Rs(MA(e)),e}function Ov(t,e){return Cw(t.databaseId,e.path)}function Pm(t,e){const n=EA(e);if(n.get(1)!==t.databaseId.projectId)throw new at(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new at(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(PA(n))}function AA(t,e){return Cw(t.databaseId,e)}function ZU(t){const e=EA(t);return e.length===4?Ws.emptyPath():PA(e)}function o_(t){return new Ws(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PA(t){return Rs(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kk(t,e,n){return{name:Ov(t,e),fields:n.value.mapValue.fields}}function ez(t,e){return"found"in e?(function(r,i){Rs(!!i.found),i.found.name,i.found.updateTime;const a=Pm(r,i.found.name),o=Wi(i.found.updateTime),c=i.found.createTime?Wi(i.found.createTime):Wt.min(),u=new ai({mapValue:{fields:i.found.fields}});return mr.newFoundDocument(a,o,c,u)})(t,e):"missing"in e?(function(r,i){Rs(!!i.missing),Rs(!!i.readTime);const a=Pm(r,i.missing),o=Wi(i.readTime);return mr.newNoDocument(a,o)})(t,e):zt()}function tz(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:zt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,m){return h.useProto3Json?(Rs(m===void 0||typeof m=="string"),Rr.fromBase64String(m||"")):(Rs(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Rr.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const m=h.code===void 0?Pe.UNKNOWN:kA(h.code);return new at(m,h.message||"")})(o);n=new TA(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pm(t,r.document.name),a=Wi(r.document.updateTime),o=r.document.createTime?Wi(r.document.createTime):Wt.min(),c=new ai({mapValue:{fields:r.document.fields}}),u=mr.newFoundDocument(i,a,o,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new iv(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Pm(t,r.document),a=r.readTime?Wi(r.readTime):Wt.min(),o=mr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new iv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Pm(t,r.document),a=r.removedTargetIds||[];n=new iv([],a,i,null)}else{if(!("filter"in e))return zt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new GU(i,a),c=r.targetId;n=new CA(c,o)}}return n}function RA(t,e){let n;if(e instanceof Pp)n={update:Kk(t,e.key,e.value)};else if(e instanceof $x)n={delete:Ov(t,e.key)};else if(e instanceof fc)n={update:Kk(t,e.key,e.data),updateMask:dz(e.fieldMask)};else{if(!(e instanceof SA))return zt();n={verify:Ov(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof ap)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof op)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bv)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw zt()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:JU(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:zt()})(t,e.precondition)),n}function sz(t,e){return t&&t.length>0?(Rs(e!==void 0),t.map((n=>(function(i,a){let o=i.updateTime?Wi(i.updateTime):Wi(a);return o.isEqual(Wt.min())&&(o=Wi(a)),new $U(o,i.transformResults||[])})(n,e)))):[]}function nz(t,e){return{documents:[AA(t,e.path)]}}function rz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AA(t,i);const a=(function(h){if(h.length!==0)return DA(Va.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((m=>(function(x){return{field:ju(x.field),direction:oz(x.dir)}})(m)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=i_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:i}}function iz(t){let e=ZU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Rs(r===1);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=(function(g){const x=LA(g);return x instanceof Va&&lA(x)?x.getFilters():[x]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((x=>(function(w){return new ip(Su(w.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(x)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let x;return x=typeof g=="object"?g.value:g,Ap(x)?null:x})(n.limit));let u=null;n.startAt&&(u=(function(g){const x=!!g.before,b=g.values||[];return new Qu(b,x)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const x=!g.before,b=g.values||[];return new Qu(b,x)})(n.endAt)),NU(e,i,o,a,c,"F",u,h)}function az(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zt()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Su(n.unaryFilter.field);return Wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Su(n.unaryFilter.field);return Wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Su(n.unaryFilter.field);return Wn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Su(n.unaryFilter.field);return Wn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return zt()}})(t):t.fieldFilter!==void 0?(function(n){return Wn.create(Su(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Va.create(n.compositeFilter.filters.map((r=>LA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return zt()}})(n.compositeFilter.op))})(t):zt()}function oz(t){return qU[t]}function lz(t){return QU[t]}function cz(t){return YU[t]}function ju(t){return{fieldPath:t.canonicalString()}}function Su(t){return Tr.fromServerFormat(t.fieldPath)}function DA(t){return t instanceof Wn?(function(n){if(n.op==="=="){if(Rk(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NAN"}};if(Pk(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rk(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NOT_NAN"}};if(Pk(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(n.field),op:lz(n.op),value:n.value}}})(t):t instanceof Va?(function(n){const r=n.getFilters().map((i=>DA(i)));return r.length===1?r[0]:{compositeFilter:{op:cz(n.op),filters:r}}})(t):zt()}function dz(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function MA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,r,i,a=Wt.min(),o=Wt.min(),c=Rr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.ct=e}}function hz(t){const e=iz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(){this.un=new pz}addToCollectionParentIndex(e,n){return this.un.add(n),Ke.resolve()}getCollectionParents(e,n){return Ke.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ke.resolve()}deleteFieldIndex(e,n){return Ke.resolve()}deleteAllFieldIndexes(e){return Ke.resolve()}createTargetIndexes(e,n){return Ke.resolve()}getDocumentsMatchingTarget(e,n){return Ke.resolve(null)}getIndexType(e,n){return Ke.resolve(0)}getFieldIndexes(e,n){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,n){return Ke.resolve(uc.min())}getMinOffsetFromCollectionGroup(e,n){return Ke.resolve(uc.min())}updateCollectionGroup(e,n,r){return Ke.resolve()}updateIndexEntries(e,n){return Ke.resolve()}}class pz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ar(Ws.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ar(Ws.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yu(0)}static kn(){return new Yu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.changes=new dh((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Am(r.mutation,i,Gi.empty(),on.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,xs()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=xs()){const i=sd();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=xm();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=sd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,xs())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=al();const o=Em(),c=(function(){return Em()})();return n.forEach(((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof fc)?a=a.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Am(m.mutation,h,m.mutation.getFieldMask(),on.now())):o.set(h.key,Gi.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,m)=>o.set(h,m))),n.forEach(((h,m)=>{var g;return c.set(h,new fz(m,(g=o.get(h))!==null&&g!==void 0?g:null))})),c)))}recalculateAndSaveOverlays(e,n){const r=Em();let i=new yn(((o,c)=>o-c)),a=xs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||Gi.empty();m=c.applyToLocalView(h,m),r.set(u,m);const g=(i.get(c.batchId)||xs()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,g=fA();m.forEach((x=>{if(!a.has(x)){const b=wA(n.get(x),r.get(x));b!==null&&g.set(x,b),a=a.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return Ke.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ke.resolve(sd());let c=-1,u=a;return o.next((h=>Ke.forEach(h,((m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(m)?Ke.resolve():this.remoteDocumentCache.getEntry(e,m).next((x=>{u=u.insert(m,x)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,xs()))).next((m=>({batchId:c,changes:gA(m)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=xm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=xm();return this.indexManager.getCollectionParents(e,a).next((c=>Ke.forEach(c,(u=>{const h=(function(g,x){return new hl(x,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,x)=>{o=o.insert(g,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,mr.newInvalidDocument(m)))}));let c=xm();return o.forEach(((u,h)=>{const m=a.get(u);m!==void 0&&Am(m.mutation,h,Gi.empty(),on.now()),Mx(n,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ke.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Wi(i.createTime)}})(n)),Ke.resolve()}getNamedQuery(e,n){return Ke.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:hz(i.bundledQuery),readTime:Wi(i.readTime)}})(n)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.overlays=new yn(At.comparator),this.Ir=new Map}getOverlay(e,n){return Ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sd();return Ke.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.ht(e,n,a)})),Ke.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),Ke.resolve()}getOverlaysForCollection(e,n,r){const i=sd(),a=n.length+1,o=new At(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ke.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new yn(((h,m)=>h-m));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=a.get(h.largestBatchId);m===null&&(m=sd(),a=a.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=sd(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,m)=>c.set(h,m))),!(c.size()>=i)););return Ke.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zU(n,r));let a=this.Ir.get(n);a===void 0&&(a=xs(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(){this.sessionToken=Rr.EMPTY_BYTE_STRING}getSessionToken(e){return Ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.Tr=new Ar(hr.Er),this.dr=new Ar(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new hr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new hr(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new At(new Ws([])),r=new hr(n,e),i=new hr(n,e+1),a=[];return this.dr.forEachInRange([r,i],(o=>{this.Vr(o),a.push(o.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new At(new Ws([])),r=new hr(n,e),i=new hr(n,e+1);let a=xs();return this.dr.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new hr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return At.comparator(e.key,n.key)||Fs(e.wr,n.wr)}static Ar(e,n){return Fs(e.wr,n.wr)||At.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ar(hr.Er)}checkEmpty(e){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UU(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new hr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ke.resolve(o)}lookupMutationBatch(e,n){return Ke.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return Ke.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hr(n,0),i=new hr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(o=>{const c=this.Dr(o.wr);a.push(c)})),Ke.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ar(Fs);return n.forEach((i=>{const a=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],(c=>{r=r.add(c.wr)}))})),Ke.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;At.isDocumentKey(a)||(a=a.child(""));const o=new hr(new At(a),0);let c=new Ar(Fs);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)}),o),Ke.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Rs(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ke.forEach(n.mutations,(i=>{const a=new hr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new hr(n,0),i=this.br.firstAfterOrEqual(r);return Ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ke.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.Mr=e,this.docs=(function(){return new yn(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ke.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(n))}getEntries(e,n){let r=al();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():mr.newInvalidDocument(i))})),Ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=al();const o=n.path,c=new At(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||aU(iU(m),r)<=0||(i.has(m.key)||Mx(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return Ke.resolve(a)}getAllFromCollectionGroup(e,n,r,i){zt()}Or(e,n){return Ke.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jz(this)}getSize(e){return Ke.resolve(this.size)}}class jz extends gz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Ke.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.persistence=e,this.Nr=new dh((n=>bw(n)),_w),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tw,this.targetCount=0,this.kr=Yu.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ke.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Yu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ke.resolve()}updateTargetData(e,n){return this.Kn(n),Ke.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Ke.waitFor(a).next((()=>i))}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ke.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ke.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),Ke.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ke.resolve(r)}containsKey(e,n){return Ke.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vw(0),this.Kr=!1,this.Kr=!0,this.$r=new bz,this.referenceDelegate=e(this),this.Ur=new Sz(this),this.indexManager=new mz,this.remoteDocumentCache=(function(i){return new wz(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new uz(n),this.Gr=new xz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _z(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){jt("MemoryPersistence","Starting transaction:",e);const i=new kz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,n){return Ke.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class kz extends lU{constructor(e){super(),this.currentSequenceNumber=e}}class Iw{constructor(e){this.persistence=e,this.Jr=new Tw,this.Yr=null}static Zr(e){return new Iw(e)}get Xr(){if(this.Yr)return this.Yr;throw zt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ke.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ke.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ke.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Xr,(r=>{const i=At.fromPath(r);return this.ei(e,i).next((a=>{a||n.removeEntry(i,Wt.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return Ke.or([()=>Ke.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=xs(),i=xs();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ew(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return IB()?8:cU(Hr())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.Zi(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new Cz;return this.Xi(e,n,o).next((c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)}))})).next((()=>a.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(tm()<=js.DEBUG&&jt("QueryEngine","SDK will not create cache indexes for query:",wu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ke.resolve()):(tm()<=js.DEBUG&&jt("QueryEngine","Query:",wu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(tm()<=js.DEBUG&&jt("QueryEngine","The SDK decides to create cache indexes for query:",wu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lo(n))):Ke.resolve())}Yi(e,n){if(Fk(n))return Ke.resolve(null);let r=lo(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Fv(n,null,"F"),r=lo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=xs(...a);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,Fv(n,null,"F")):this.rs(e,h,n,u)}))))})))))}Zi(e,n,r,i){return Fk(n)||i.isEqual(Wt.min())?Ke.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?Ke.resolve(null):(tm()<=js.DEBUG&&jt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wu(n)),this.rs(e,o,n,rU(i,-1)).next((c=>c)))}))}ts(e,n){let r=new Ar(mA(e));return n.forEach(((i,a)=>{Mx(e,a)&&(r=r.add(a))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return tm()<=js.DEBUG&&jt("QueryEngine","Using full collection scan to execute query:",wu(n)),this.Ji.getDocumentsMatchingQuery(e,n,uc.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new yn(Fs),this._s=new dh((a=>bw(a)),_w),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function Ez(t,e,n,r){return new Iz(t,e,n,r)}async function FA(t,e){const n=es(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=xs();for(const h of i){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of a){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Az(t,e){const n=es(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,m){const g=h.batch,x=g.keys();let b=Ke.resolve();return x.forEach((w=>{b=b.next((()=>m.getEntry(u,w))).next((k=>{const A=h.docVersions.get(w);Rs(A!==null),k.version.compareTo(A)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),m.addEntry(k)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=xs();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function BA(t){const e=es(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function Pz(t,e){const n=es(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach(((m,g)=>{const x=i.get(g);if(!x)return;c.push(n.Ur.removeMatchingKeys(a,m.removedDocuments,g).next((()=>n.Ur.addMatchingKeys(a,m.addedDocuments,g))));let b=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Rr.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(g,b),(function(k,A,L){return k.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(x,b,m)&&c.push(n.Ur.updateTargetData(a,b))}));let u=al(),h=xs();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(Rz(a,o,e.documentUpdates).next((m=>{u=m.Ps,h=m.Is}))),!r.isEqual(Wt.min())){const m=n.Ur.getLastRemoteSnapshotVersion(a).next((g=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(m)}return Ke.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(n.os=i,a)))}function Rz(t,e,n){let r=xs(),i=xs();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=al();return n.forEach(((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Wt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):jt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{Ps:o,Is:i}}))}function Lz(t,e){const n=es(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Dz(t,e){const n=es(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((a=>a?(i=a,Ke.resolve(i)):n.Ur.allocateTargetId(r).next((o=>(i=new Jl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function l_(t,e,n){const r=es(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ep(o))throw o;jt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qk(t,e,n){const r=es(t);let i=Wt.min(),a=xs();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,h,m){const g=es(u),x=g._s.get(m);return x!==void 0?Ke.resolve(g.os.get(x)):g.Ur.getTargetData(h,m)})(r,o,lo(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Wt.min(),n?a:xs()))).next((c=>(Mz(r,CU(e),c),{documents:c,Ts:a})))))}function Mz(t,e,n){let r=t.us.get(e)||Wt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class Qk{constructor(){this.activeTargetIds=RU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fz{constructor(){this.so=new Qk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Qk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function tb(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="WebChannelConnection";class Vz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=tb(),u=this.xo(n,r.toUriEncodedString());jt("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,o),this.No(n,u,h,i).then((m=>(jt("RestConnection",`Received RPC '${n}' ${c}: `,m),m)),(m=>{throw Hu("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",i),m}))}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ch})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,o)=>n[o]=a)),i&&i.headers.forEach(((a,o)=>n[o]=a))}xo(n,r){const i=$z[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=tb();return new Promise(((o,c)=>{const u=new YE;u.setWithCredentials(!0),u.listenOnce(XE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case sv.NO_ERROR:const m=u.getResponseJson();jt(Or,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),o(m);break;case sv.TIMEOUT:jt(Or,`RPC '${e}' ${a} timed out`),c(new at(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:const g=u.getStatus();if(jt(Or,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const w=(function(A){const L=A.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(L)>=0?L:Pe.UNKNOWN})(b.status);c(new at(w,b.message))}else c(new at(Pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new at(Pe.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{jt(Or,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);jt(Or,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",h,r,15)}))}Bo(e,n,r){const i=tb(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=eA(),c=ZE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=a.join("");jt(Or,`Creating RPC '${e}' stream ${i}: ${m}`,u);const g=o.createWebChannel(m,u);let x=!1,b=!1;const w=new Oz({Io:A=>{b?jt(Or,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(x||(jt(Or,`Opening RPC '${e}' stream ${i} transport.`),g.open(),x=!0),jt(Or,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},To:()=>g.close()}),k=(A,L,I)=>{A.listen(L,(N=>{try{I(N)}catch(v){setTimeout((()=>{throw v}),0)}}))};return k(g,vm.EventType.OPEN,(()=>{b||(jt(Or,`RPC '${e}' stream ${i} transport opened.`),w.yo())})),k(g,vm.EventType.CLOSE,(()=>{b||(b=!0,jt(Or,`RPC '${e}' stream ${i} transport closed`),w.So())})),k(g,vm.EventType.ERROR,(A=>{b||(b=!0,Hu(Or,`RPC '${e}' stream ${i} transport errored:`,A),w.So(new at(Pe.UNAVAILABLE,"The operation could not be completed")))})),k(g,vm.EventType.MESSAGE,(A=>{var L;if(!b){const I=A.data[0];Rs(!!I);const N=I,v=N.error||((L=N[0])===null||L===void 0?void 0:L.error);if(v){jt(Or,`RPC '${e}' stream ${i} received error:`,v);const _=v.status;let R=(function(C){const M=Un[C];if(M!==void 0)return kA(M)})(_),j=v.message;R===void 0&&(R=Pe.INTERNAL,j="Unknown error status: "+_+" with message "+v.message),b=!0,w.So(new at(R,j)),g.close()}else jt(Or,`RPC '${e}' stream ${i} received:`,I),w.bo(I)}})),k(c,JE.STAT_EVENT,(A=>{A.stat===Z1.PROXY?jt(Or,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Z1.NOPROXY&&jt(Or,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.wo()}),0),w}}function sb(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t){return new XU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&jt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Aw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(il(n.toString()),il("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new at(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return jt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Uz extends $A{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=tz(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Wt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Wt.min():o.readTime?Wi(o.readTime):Wt.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=o_(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=n_(u)?{documents:nz(a,u)}:{query:rz(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=IA(a,o.resumeToken);const h=i_(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Wt.min())>0){c.readTime=$v(a,o.snapshotVersion.toTimestamp());const h=i_(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=az(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=o_(this.serializer),n.removeTarget=e,this.a_(n)}}class zz extends $A{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Rs(!!e.streamToken),this.lastStreamToken=e.streamToken,Rs(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Rs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sz(e.writeResults,e.commitTime),r=Wi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=o_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>RA(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new at(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Mo(e,a_(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new at(Pe.UNKNOWN,a.toString())}))}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,a_(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new at(Pe.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Hz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(il(n),this.D_=!1):jt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((o=>{r.enqueueAndForget((async()=>{kd(this)&&(jt("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=es(u);h.L_.add(4),await Lp(h),h.q_.set("Unknown"),h.L_.delete(4),await Ux(h)})(this))}))})),this.q_=new Hz(r,i)}}async function Ux(t){if(kd(t))for(const e of t.B_)await e(!0)}async function Lp(t){for(const e of t.B_)await e(!1)}function OA(t,e){const n=es(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dw(n)?Lw(n):uh(n).r_()&&Rw(n,e))}function Pw(t,e){const n=es(t),r=uh(n);n.N_.delete(e),r.r_()&&VA(n,e),n.N_.size===0&&(r.r_()?r.o_():kd(n)&&n.q_.set("Unknown"))}function Rw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uh(t).A_(e)}function VA(t,e){t.Q_.xe(e),uh(t).R_(e)}function Lw(t){t.Q_=new KU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uh(t).start(),t.q_.v_()}function Dw(t){return kd(t)&&!uh(t).n_()&&t.N_.size>0}function kd(t){return es(t).L_.size===0}function UA(t){t.Q_=void 0}async function Kz(t){t.q_.set("Online")}async function qz(t){t.N_.forEach(((e,n)=>{Rw(t,e)}))}async function Qz(t,e){UA(t),Dw(t)?(t.q_.M_(e),Lw(t)):t.q_.set("Unknown")}async function Yz(t,e,n){if(t.q_.set("Online"),e instanceof TA&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(r){jt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vv(t,r)}else if(e instanceof iv?t.Q_.Ke(e):e instanceof CA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Wt.min()))try{const r=await BA(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.N_.get(h);m&&a.N_.set(h,m.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,h)=>{const m=a.N_.get(u);if(!m)return;a.N_.set(u,m.withResumeToken(Rr.EMPTY_BYTE_STRING,m.snapshotVersion)),VA(a,u);const g=new Jl(m.target,u,h,m.sequenceNumber);Rw(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){jt("RemoteStore","Failed to raise snapshot:",r),await Vv(t,r)}}async function Vv(t,e,n){if(!Ep(e))throw e;t.L_.add(1),await Lp(t),t.q_.set("Offline"),n||(n=()=>BA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{jt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ux(t)}))}function zA(t,e){return e().catch((n=>Vv(t,n,e)))}async function zx(t){const e=es(t),n=mc(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xz(e);)try{const i=await Lz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Jz(e,i)}catch(i){await Vv(e,i)}GA(e)&&HA(e)}function Xz(t){return kd(t)&&t.O_.length<10}function Jz(t,e){t.O_.push(e);const n=mc(t);n.r_()&&n.V_&&n.m_(e.mutations)}function GA(t){return kd(t)&&!mc(t).n_()&&t.O_.length>0}function HA(t){mc(t).start()}async function Zz(t){mc(t).p_()}async function eG(t){const e=mc(t);for(const n of t.O_)e.m_(n.mutations)}async function tG(t,e,n){const r=t.O_.shift(),i=Nw.from(r,e,n);await zA(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await zx(t)}async function sG(t,e){e&&mc(t).V_&&await(async function(r,i){if((function(o){return NA(o)&&o!==Pe.ABORTED})(i.code)){const a=r.O_.shift();mc(r).s_(),await zA(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await zx(r)}})(t,e),GA(t)&&HA(t)}async function Xk(t,e){const n=es(t);n.asyncQueue.verifyOperationInProgress(),jt("RemoteStore","RemoteStore received new credentials");const r=kd(n);n.L_.add(3),await Lp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ux(n)}async function nG(t,e){const n=es(t);e?(n.L_.delete(2),await Ux(n)):e||(n.L_.add(2),await Lp(n),n.q_.set("Unknown"))}function uh(t){return t.K_||(t.K_=(function(n,r,i){const a=es(n);return a.w_(),new Uz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Kz.bind(null,t),Ro:qz.bind(null,t),mo:Qz.bind(null,t),d_:Yz.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Dw(t)?Lw(t):t.q_.set("Unknown")):(await t.K_.stop(),UA(t))}))),t.K_}function mc(t){return t.U_||(t.U_=(function(n,r,i){const a=es(n);return a.w_(),new zz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zz.bind(null,t),mo:sG.bind(null,t),f_:eG.bind(null,t),g_:tG.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await zx(t)):(await t.U_.stop(),t.O_.length>0&&(jt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new Mw(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fw(t,e){if(il("AsyncQueue",`${e}: ${t}`),Ep(t))return new at(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=xm(),this.sortedSet=new yn(this.comparator)}static emptySet(e){return new Vu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.W_=new yn(At.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):zt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Xu{constructor(e,n,r,i,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Xu(e,n,Vu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class iG{constructor(){this.queries=Zk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=es(n),a=i.queries;i.queries=Zk(),a.forEach(((o,c)=>{for(const u of c.j_)u.onError(r)}))})(this,new at(Pe.ABORTED,"Firestore shutting down"))}}function Zk(){return new dh((t=>hA(t)),Dx)}async function WA(t,e){const n=es(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new rG,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Fw(o,`Initialization of query '${wu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Bw(n)}async function KA(t,e){const n=es(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aG(t,e){const n=es(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Bw(n)}function oG(t,e,n){const r=es(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function Bw(t){t.Y_.forEach((e=>{e.next()}))}var c_,eC;(eC=c_||(c_={})).ea="default",eC.Cache="cache";class qA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==c_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.key=e}}class YA{constructor(e){this.key=e}}class lG{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xs(),this.mutatedKeys=xs(),this.Aa=mA(e),this.Ra=new Vu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Jk,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const x=i.get(m),b=Mx(this.query,g)?g:null,w=!!x&&this.mutatedKeys.has(x.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;x&&b?x.data.isEqual(b.data)?w!==k&&(r.track({type:3,doc:b}),A=!0):this.ga(x,b)||(r.track({type:2,doc:b}),A=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(c=!0)):!x&&b?(r.track({type:0,doc:b}),A=!0):x&&!b&&(r.track({type:1,doc:x}),A=!0,(u||h)&&(c=!0)),A&&(b?(o=o.add(b),a=k?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,g)=>(function(b,w){const k=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return k(b)-k(w)})(m.type,g.type)||this.Aa(m.doc,g.doc))),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Xu(this.query,e.Ra,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jk,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xs(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new YA(r))})),this.da.forEach((r=>{e.has(r)||n.push(new QA(r))})),n}ba(e){this.Ta=e.Ts,this.da=xs();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class cG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dG{constructor(e){this.key=e,this.va=!1}}class uG{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new dh((c=>hA(c)),Dx),this.Ma=new Map,this.xa=new Set,this.Oa=new yn(At.comparator),this.Na=new Map,this.La=new Tw,this.Ba={},this.ka=new Map,this.qa=Yu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hG(t,e,n=!0){const r=s4(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await XA(r,e,n,!0),i}async function mG(t,e){const n=s4(t);await XA(n,e,!0,!1)}async function XA(t,e,n,r){const i=await Dz(t.localStore,lo(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await pG(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&OA(t.remoteStore,i),c}async function pG(t,e,n,r,i){t.Ka=(g,x,b)=>(async function(k,A,L,I){let N=A.view.ma(L);N.ns&&(N=await qk(k.localStore,A.query,!1).then((({documents:j})=>A.view.ma(j,N))));const v=I&&I.targetChanges.get(A.targetId),_=I&&I.targetMismatches.get(A.targetId)!=null,R=A.view.applyChanges(N,k.isPrimaryClient,v,_);return sC(k,A.targetId,R.wa),R.snapshot})(t,g,x,b);const a=await qk(t.localStore,e,!0),o=new lG(e,a.Ts),c=o.ma(a.documents),u=Rp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);sC(t,n,h.wa);const m=new cG(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function gG(t,e,n){const r=es(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((o=>!Dx(o,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await l_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pw(r.remoteStore,i.targetId),d_(r,i.targetId)})).catch(Ip)):(d_(r,i.targetId),await l_(r.localStore,i.targetId,!0))}async function fG(t,e){const n=es(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pw(n.remoteStore,r.targetId))}async function vG(t,e,n){const r=SG(t);try{const i=await(function(o,c){const u=es(o),h=on.now(),m=c.reduce(((b,w)=>b.add(w.key)),xs());let g,x;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let w=al(),k=xs();return u.cs.getEntries(b,m).next((A=>{w=A,w.forEach(((L,I)=>{I.isValidDocument()||(k=k.add(L))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,w))).next((A=>{g=A;const L=[];for(const I of c){const N=VU(I,g.get(I.key).overlayedDocument);N!=null&&L.push(new fc(I.key,N,iA(N.value.mapValue),Ir.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,L,c)})).next((A=>{x=A;const L=A.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(b,A.batchId,L)}))})).then((()=>({batchId:x.batchId,changes:gA(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new yn(Fs)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h})(r,i.batchId,n),await Dp(r,i.changes),await zx(r.remoteStore)}catch(i){const a=Fw(i,"Failed to persist write");n.reject(a)}}async function JA(t,e){const n=es(t);try{const r=await Pz(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Na.get(a);o&&(Rs(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Rs(o.va):i.removedDocuments.size>0&&(Rs(o.va),o.va=!1))})),await Dp(n,r,e)}catch(r){await Ip(r)}}function tC(t,e,n){const r=es(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=es(o);u.onlineState=c;let h=!1;u.queries.forEach(((m,g)=>{for(const x of g.j_)x.Z_(c)&&(h=!0)})),h&&Bw(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xG(t,e,n){const r=es(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new yn(At.comparator);o=o.insert(a,mr.newNoDocument(a,Wt.min()));const c=xs().add(a),u=new Ox(Wt.min(),new Map,new yn(Fs),o,c);await JA(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),$w(r)}else await l_(r.localStore,e,!1).then((()=>d_(r,e,n))).catch(Ip)}async function yG(t,e){const n=es(t),r=e.batch.batchId;try{const i=await Az(n.localStore,e);e4(n,r,null),ZA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dp(n,i)}catch(i){await Ip(i)}}async function bG(t,e,n){const r=es(t);try{const i=await(function(o,c){const u=es(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(Rs(g!==null),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>u.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);e4(r,e,n),ZA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Dp(r,i)}catch(i){await Ip(i)}}function ZA(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function e4(t,e,n){const r=es(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function d_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||t4(t,r)}))}function t4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Pw(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$w(t))}function sC(t,e,n){for(const r of n)r instanceof QA?(t.La.addReference(r.key,e),_G(t,r)):r instanceof YA?(jt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||t4(t,r.key)):zt()}function _G(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(jt("SyncEngine","New document in limbo: "+n),t.xa.add(r),$w(t))}function $w(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new At(Ws.fromString(e)),r=t.qa.next();t.Na.set(r,new dG(n)),t.Oa=t.Oa.insert(n,r),OA(t.remoteStore,new Jl(lo(ww(n.path)),r,"TargetPurposeLimboResolution",vw.oe))}}async function Dp(t,e,n){const r=es(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((c,u)=>{o.push(r.Ka(u,e,n).then((h=>{var m;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=Ew.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(o),r.Ca.d_(i),await(async function(u,h){const m=es(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Ke.forEach(h,(x=>Ke.forEach(x.$i,(b=>m.persistence.referenceDelegate.addReference(g,x.targetId,b))).next((()=>Ke.forEach(x.Ui,(b=>m.persistence.referenceDelegate.removeReference(g,x.targetId,b)))))))))}catch(g){if(!Ep(g))throw g;jt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const x=g.targetId;if(!g.fromCache){const b=m.os.get(x),w=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(w);m.os=m.os.insert(x,k)}}})(r.localStore,a))}async function wG(t,e){const n=es(t);if(!n.currentUser.isEqual(e)){jt("SyncEngine","User change. New user:",e.toKey());const r=await FA(n.localStore,e);n.currentUser=e,(function(a,o){a.ka.forEach((c=>{c.forEach((u=>{u.reject(new at(Pe.CANCELLED,o))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dp(n,r.hs)}}function jG(t,e){const n=es(t),r=n.Na.get(e);if(r&&r.va)return xs().add(r.key);{let i=xs();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function s4(t){const e=es(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xG.bind(null,e),e.Ca.d_=aG.bind(null,e.eventManager),e.Ca.$a=oG.bind(null,e.eventManager),e}function SG(t){const e=es(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bG.bind(null,e),e}class Uv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Ez(this.persistence,new Tz,e.initialUser,this.serializer)}Ga(e){return new Nz(Iw.Zr,this.serializer)}Wa(e){return new Fz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uv.provider={build:()=>new Uv};class u_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wG.bind(null,this.syncEngine),await nG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iG})()}createDatastore(e){const n=Vx(e.databaseInfo.databaseId),r=(function(a){return new Vz(a)})(e.databaseInfo);return(function(a,o,c,u){return new Gz(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new Wz(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>tC(this.syncEngine,n,0)),(function(){return Yk.D()?new Yk:new Bz})())}createSyncEngine(e,n){return(function(i,a,o,c,u,h,m){const g=new uG(i,a,o,c,u,h);return m&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=es(i);jt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Lp(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}u_.provider={build:()=>new u_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):il("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new at(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const o=es(i),c={documents:a.map((g=>Ov(o.serializer,g)))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ws.emptyPath(),c,a.length),h=new Map;u.forEach((g=>{const x=ez(o.serializer,g);h.set(x.key.toString(),x)}));const m=[];return a.forEach((g=>{const x=h.get(g.toString());Rs(!!x),m.push(x)})),m})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $x(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=At.fromPath(r);this.mutations.push(new SA(i,this.precondition(i)))})),await(async function(r,i){const a=es(r),o={writes:i.map((c=>RA(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,Ws.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw zt();n=Wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new at(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Wt.min())?Ir.exists(!1):Ir.updateTime(n):Ir.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Wt.min()))throw new at(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(n)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this._u=r.maxAttempts,this.t_=new Aw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new NG(this.datastore),n=this.cu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.lu(i)}))))})).catch((r=>{this.lu(r)}))}))}cu(e){try{const n=this.updateFunction(e);return!Ap(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!NA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=sA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{jt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(jt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function nb(t,e){t.asyncQueue.verifyOperationInProgress(),jt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await FA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function nC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TG(t);jt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Xk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Xk(e.remoteStore,i))),t._onlineComponents=e}async function TG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){jt("FirestoreClient","Using user provided OfflineComponentProvider");try{await nb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Hu("Error using user provided cache. Falling back to memory cache: "+n),await nb(t,new Uv)}}else jt("FirestoreClient","Using default OfflineComponentProvider"),await nb(t,new Uv);return t._offlineComponents}async function Ow(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(jt("FirestoreClient","Using user provided OnlineComponentProvider"),await nC(t,t._uninitializedComponentsProvider._online)):(jt("FirestoreClient","Using default OnlineComponentProvider"),await nC(t,new u_))),t._onlineComponents}function IG(t){return Ow(t).then((e=>e.syncEngine))}function EG(t){return Ow(t).then((e=>e.datastore))}async function r4(t){const e=await Ow(t),n=e.eventManager;return n.onListen=hG.bind(null,e.syncEngine),n.onUnlisten=gG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fG.bind(null,e.syncEngine),n}function AG(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const m=new n4({next:x=>{m.Za(),o.enqueueAndForget((()=>KA(a,g)));const b=x.docs.has(c);!b&&x.fromCache?h.reject(new at(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&u&&u.source==="server"?h.reject(new at(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),g=new qA(ww(c.path),m,{includeMetadataChanges:!0,_a:!0});return WA(a,g)})(await r4(t),t.asyncQueue,e,n,r))),r.promise}function PG(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const m=new n4({next:x=>{m.Za(),o.enqueueAndForget((()=>KA(a,g))),x.fromCache&&u.source==="server"?h.reject(new at(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),g=new qA(c,m,{includeMetadataChanges:!0,_a:!0});return WA(a,g)})(await r4(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){if(!n)throw new at(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RG(t,e,n,r){if(e===!0&&r===!0)throw new at(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iC(t){if(!At.isDocumentKey(t))throw new at(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aC(t){if(At.isDocumentKey(t))throw new at(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":zt()}function fo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new at(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gx(t);throw new at(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LG(t,e){if(e<=0)throw new at(Pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new at(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new at(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new at(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new at(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new at(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new at(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oC(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QV;switch(r.type){case"firstParty":return new ZV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=rC.get(n);r&&(jt("ComponentProvider","Removing Datastore"),rC.delete(n),r.terminate())})(this),Promise.resolve()}}function DG(t,e,n,r={}){var i;const a=(t=fo(t,Mp))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=zr.MOCK_USER;else{c=wB(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new at(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new zr(h)}t._authCredentials=new YV(new tA(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new za(this.firestore,e,this._query)}}class oi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oi(this.firestore,e,this._key)}}class cc extends za{constructor(e,n,r){super(e,n,ww(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oi(this.firestore,null,new At(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function ol(t,e,...n){if(t=Kn(t),Vw("collection","path",e),t instanceof Mp){const r=Ws.fromString(e,...n);return aC(r),new cc(t,null,r)}{if(!(t instanceof oi||t instanceof cc))throw new at(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ws.fromString(e,...n));return aC(r),new cc(t.firestore,null,r)}}function Fp(t,e){if(t=fo(t,Mp),Vw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new at(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new za(t,null,(function(r){return new hl(Ws.emptyPath(),r)})(e))}function ms(t,e,...n){if(t=Kn(t),arguments.length===1&&(e=sA.newId()),Vw("doc","path",e),t instanceof Mp){const r=Ws.fromString(e,...n);return iC(r),new oi(t,null,new At(r))}{if(!(t instanceof oi||t instanceof cc))throw new at(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ws.fromString(e,...n));return iC(r),new oi(t.firestore,t instanceof cc?t.converter:null,new At(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Aw(this,"async_queue_retry"),this.Vu=()=>{const r=sb();r&&jt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new oo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ep(e))throw e;jt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(r);throw il("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Mw.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&zt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class hh extends Mp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new lC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lC(e),this._firestoreClient=void 0,await e}}}function MG(t,e){const n=typeof t=="object"?t:iw(),r=typeof t=="string"?t:"(default)",i=rw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=bB("firestore");a&&DG(i,...a)}return i}function Bp(t){if(t._terminated)throw new at(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FG(t),t._firestoreClient}function FG(t){var e,n,r;const i=t._freezeSettings(),a=(function(c,u,h,m){return new hU(c,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,i4(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new CG(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bd(Rr.fromBase64String(e))}catch(n){throw new at(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bd(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new at(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function h_(){return new mh("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new at(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new at(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fs(this._lat,e._lat)||Fs(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG=/^__.*__$/;class $G{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pp(e,this.data,n,this.fieldTransforms)}}class a4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class Gw{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(o4(this.Cu)&&BG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vx(e)}Qu(e,n,r,i=!1){return new Gw({Cu:e,methodName:n,qu:r,path:Tr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $p(t){const e=t._freezeSettings(),n=Vx(t._databaseId);return new OG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hw(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Kw("Data must be an object, but it was:",o,r);const c=u4(r,o);let u,h;if(a.merge)u=new Gi(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const x=m_(e,g,n);if(!o.contains(x))throw new at(Pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);m4(m,x)||m.push(x)}u=new Gi(m),h=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=o.fieldTransforms;return new $G(new ai(c),u,h)}class Wx extends Hx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wx}}class Ww extends Hx{_toFieldTransform(e){return new FU(e.path,new ap)}isEqual(e){return e instanceof Ww}}function l4(t,e,n,r){const i=t.Qu(1,e,n);Kw("Data must be an object, but it was:",i,r);const a=[],o=ai.empty();Nd(r,((u,h)=>{const m=qw(e,u,n);h=Kn(h);const g=i.Nu(m);if(h instanceof Wx)a.push(m);else{const x=Op(h,g);x!=null&&(a.push(m),o.set(m,x))}}));const c=new Gi(a);return new a4(o,c,i.fieldTransforms)}function c4(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[m_(e,r,n)],u=[i];if(a.length%2!=0)throw new at(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)c.push(m_(e,a[x])),u.push(a[x+1]);const h=[],m=ai.empty();for(let x=c.length-1;x>=0;--x)if(!m4(h,c[x])){const b=c[x];let w=u[x];w=Kn(w);const k=o.Nu(b);if(w instanceof Wx)h.push(b);else{const A=Op(w,k);A!=null&&(h.push(b),m.set(b,A))}}const g=new Gi(h);return new a4(m,g,o.fieldTransforms)}function d4(t,e,n,r=!1){return Op(n,t.Qu(r?4:3,e))}function Op(t,e){if(h4(t=Kn(t)))return Kw("Unsupported field value:",e,t),u4(t,e);if(t instanceof Hx)return(function(r,i){if(!o4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Op(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=on.fromDate(r);return{timestampValue:$v(i.serializer,a)}}if(r instanceof on){const a=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$v(i.serializer,a)}}if(r instanceof Uw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bd)return{bytesValue:IA(i.serializer,r._byteString)};if(r instanceof oi){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zw)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Sw(c.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Gx(r)}`)})(t,e)}function u4(t,e){const n={};return nA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nd(t,((r,i)=>{const a=Op(i,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function h4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof on||t instanceof Uw||t instanceof bd||t instanceof oi||t instanceof Hx||t instanceof zw)}function Kw(t,e,n){if(!h4(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=Gx(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function m_(t,e,n){if((e=Kn(e))instanceof mh)return e._internalPath;if(typeof e=="string")return qw(t,e);throw zv("Field path arguments must be of type string or ",t,!1,void 0,n)}const VG=new RegExp("[~\\*/\\[\\]]");function qw(t,e,n){if(e.search(VG)>=0)throw zv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mh(...e.split("."))._internalPath}catch(r){throw zv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new at(Pe.INVALID_ARGUMENT,c+t+u)}function m4(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UG extends cp{data(){return super.data()}}function Kx(t,e){return typeof e=="string"?qw(t,e):e instanceof mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new at(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qw{}class Vp extends Qw{}function Dn(t,e,...n){let r=[];e instanceof Qw&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof Yw)).length,c=a.filter((u=>u instanceof qx)).length;if(o>1||o>0&&c>0)throw new at(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class qx extends Vp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qx(e,n,r)}_apply(e){const n=this._parse(e);return g4(e._query,n),new za(e.firestore,e.converter,r_(e._query,n))}_parse(e){const n=$p(e.firestore);return(function(a,o,c,u,h,m,g){let x;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new at(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){dC(g,m);const b=[];for(const w of g)b.push(cC(u,a,w));x={arrayValue:{values:b}}}else x=cC(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||dC(g,m),x=d4(c,o,g,m==="in"||m==="not-in");return Wn.create(h,m,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ji(t,e,n){const r=e,i=Kx("where",t);return qx._create(i,r,n)}class Yw extends Qw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yw(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Va.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)g4(o,u),o=r_(o,u)})(e._query,n),new za(e.firestore,e.converter,r_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xw extends Vp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xw(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new at(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new at(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ip(a,o)})(e._query,this._field,this._direction);return new za(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new hl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Hi(t,e="asc"){const n=e,r=Kx("orderBy",t);return Xw._create(r,n)}class Jw extends Vp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jw(e,n,r)}_apply(e){return new za(e.firestore,e.converter,Fv(e._query,this._limit,this._limitType))}}function pr(t){return LG("limit",t),Jw._create("limit",t,"F")}class Qx extends Vp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Qx(e,n,r)}_apply(e){const n=p4(e,this.type,this._docOrFields,this._inclusive);return new za(e.firestore,e.converter,(function(i,a){return new hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,n))}}function Zl(...t){return Qx._create("startAt",t,!0)}function GG(...t){return Qx._create("startAfter",t,!1)}class Zw extends Vp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zw(e,n,r)}_apply(e){const n=p4(e,this.type,this._docOrFields,this._inclusive);return new za(e.firestore,e.converter,(function(i,a){return new hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,n))}}function ec(...t){return Zw._create("endAt",t,!0)}function p4(t,e,n,r){if(n[0]=Kn(n[0]),n[0]instanceof cp)return(function(a,o,c,u,h){if(!u)throw new at(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const m=[];for(const g of Ou(a))if(g.field.isKeyField())m.push(Mv(o,u.key));else{const x=u.data.field(g.field);if(Lx(x))throw new at(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const b=g.field.canonicalString();throw new at(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(x)}return new Qu(m,h)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=$p(t.firestore);return(function(o,c,u,h,m,g){const x=o.explicitOrderBy;if(m.length>x.length)throw new at(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let w=0;w<m.length;w++){const k=m[w];if(x[w].field.isKeyField()){if(typeof k!="string")throw new at(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof k}`);if(!jw(o)&&k.indexOf("/")!==-1)throw new at(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${k}' contains a slash.`);const A=o.path.child(Ws.fromString(k));if(!At.isDocumentKey(A))throw new at(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const L=new At(A);b.push(Mv(c,L))}else{const A=d4(u,h,k);b.push(A)}}return new Qu(b,g)})(t._query,t.firestore._databaseId,i,e,n,r)}}function cC(t,e,n){if(typeof(n=Kn(n))=="string"){if(n==="")throw new at(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&n.indexOf("/")!==-1)throw new at(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ws.fromString(n));if(!At.isDocumentKey(r))throw new at(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mv(t,new At(r))}if(n instanceof oi)return Mv(t,n._key);throw new at(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gx(n)}.`)}function dC(t,e){if(!Array.isArray(t)||t.length===0)throw new at(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g4(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new at(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new at(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class f4{convertValue(e,n="none"){switch(yd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw zt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Nd(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((o=>Ln(o.doubleValue)));return new zw(a)}convertGeoPoint(e){return new Uw(Ln(e.latitude),Ln(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sp(e));default:return null}}convertTimestamp(e){const n=hc(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ws.fromString(e);Rs(MA(r));const i=new np(r.get(1),r.get(3)),a=new At(r.popFirst(5));return i.isEqual(n)||il(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class HG extends f4{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tj extends cp{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new av(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class av extends tj{data(e={}){return super.data(e)}}class WG{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ku(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new av(this._firestore,this._userDataWriter,r.key,r,new ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new av(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ku(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new av(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ku(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:KG(c.type),doc:u,oldIndex:h,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){t=fo(t,oi);const e=fo(t.firestore,hh);return AG(Bp(e),t._key).then((n=>qG(e,t,n)))}class sj extends f4{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,n)}}function Cn(t){t=fo(t,za);const e=fo(t.firestore,hh),n=Bp(e),r=new sj(e);return zG(t._query),PG(n,t._query).then((i=>new WG(e,r,t,i)))}function ll(t,e,n){t=fo(t,oi);const r=fo(t.firestore,hh),i=ej(t.converter,e,n);return v4(r,[Hw($p(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ir.none())])}function v4(t,e){return(function(r,i){const a=new oo;return r.asyncQueue.enqueueAndForget((async()=>vG(await IG(r),i,a))),a.promise})(Bp(t),e)}function qG(t,e,n){const r=n.docs.get(e._key),i=new sj(t);return new tj(t,i,e._key,r,new ku(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$p(e)}set(e,n,r){this._verifyNotCommitted();const i=Yl(e,this._firestore),a=ej(i.converter,n,r),o=Hw(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ir.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Yl(e,this._firestore);let o;return o=typeof(n=Kn(n))=="string"||n instanceof mh?c4(this._dataReader,"WriteBatch.update",a._key,n,r,i):l4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yl(e,this._firestore);return this._mutations=this._mutations.concat(new $x(n._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yl(t,e){if((t=Kn(t)).firestore!==e)throw new at(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=$p(n)}get(n){const r=Yl(n,this._firestore),i=new HG(this._firestore);return this._transaction.lookup([r._key]).then((a=>{if(!a||a.length!==1)return zt();const o=a[0];if(o.isFoundDocument())return new cp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new cp(this._firestore,i,r._key,null,r.converter);throw zt()}))}set(n,r,i){const a=Yl(n,this._firestore),o=ej(a.converter,r,i),c=Hw(this._dataReader,"Transaction.set",a._key,o,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(n,r,i,...a){const o=Yl(n,this._firestore);let c;return c=typeof(r=Kn(r))=="string"||r instanceof mh?c4(this._dataReader,"Transaction.update",o._key,r,i,a):l4(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,c),this}delete(n){const r=Yl(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Yl(e,this._firestore),r=new sj(this._firestore);return super.get(e).then((i=>new tj(this._firestore,r,n._key,i._document,new ku(!1,!1),n.converter)))}}function x4(t,e,n){t=fo(t,hh);const r=Object.assign(Object.assign({},QG),n);return(function(a){if(a.maxAttempts<1)throw new at(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new oo;return a.asyncQueue.enqueueAndForget((async()=>{const h=await EG(a);new kG(a.asyncQueue,h,c,o,u).au()})),u.promise})(Bp(t),(i=>e(new XG(t,i))),r)}function Vi(){return new Ww("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(t){return Bp(t=fo(t,hh)),new YG(t,(e=>v4(t,e)))}(function(e,n=!0){(function(i){ch=i})(oh),Gu(new pd("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new hh(new XV(r.getProvider("auth-internal")),new tU(r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new at(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new np(h.options.projectId,m)})(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),oc(Ck,"4.7.3",e),oc(Ck,"4.7.3","esm2017")})();const nj={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};nj.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const ZG=()=>{var i,a;if(typeof window=="undefined")return;const t=(i=window.location.hostname)==null?void 0:i.toLowerCase(),e=String((a=nj.authDomain)!=null?a:"").toLowerCase();if(!t||!e||t===e||t==="localhost"||t==="127.0.0.1"||t.endsWith(".local"))return;const r=e.endsWith(".firebaseapp.com")?e.replace(".firebaseapp.com",".web.app"):e.endsWith(".web.app")?e.replace(".web.app",".firebaseapp.com"):"";if(r&&t===r){const o=window.location.href.replace(t,e);window.location.replace(o)}};ZG();const y4=F$().length?iw():pE(nj),Tt=MG(y4),Ra=KV(y4),b4=P.createContext(void 0),uC=`${va}/auth/session`,hC=`${va}/auth/logout`,rb="sfh:authPopupNonce",eH=2e3,tH=new Set(["auth/popup-blocked","auth/popup-closed-by-user","auth/cancelled-popup-request","auth/operation-not-supported-in-this-environment"]),sH=()=>{var e;if(typeof window=="undefined")return!1;try{const n=(e=window.localStorage)==null?void 0:e.getItem("sfh:debug:auth");if(n==="1"||n==="true")return!0}catch(n){console.warn("[Auth] Failed to read auth debug flag",n)}return!1},Aa=(...t)=>{sH()&&console.info(...t)},nH=()=>{var t;try{const e=new Uint8Array(16);if(typeof window!="undefined"&&((t=window.crypto)!=null&&t.getRandomValues))return window.crypto.getRandomValues(e),Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")}catch(e){}return Math.random().toString(36).slice(2,14)},mC=(t,e)=>{try{const n=new URL(`${va}/auth/${t}/login`);return(e==null?void 0:e.mode)==="popup"&&n.searchParams.set("mode","popup"),e!=null&&e.nonce&&n.searchParams.set("nonce",e.nonce),n.toString()}catch(n){return console.warn("[Auth] Failed to construct login URL",n),""}},rH=()=>{var e;const t=new Set;typeof window!="undefined"&&((e=window.location)!=null&&e.origin)&&t.add(window.location.origin);try{t.add(new URL(va).origin)}catch(n){console.warn("[Auth] Failed to parse AUTH_BASE_URL for allowed origins",n)}return t},iH=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState("idle"),a=P.useRef({tried:!1}),o=P.useRef(!1),c=P.useRef(!1),u=P.useMemo(()=>{try{return new Ko}catch(v){return console.warn("[Auth] Failed to initialize Google provider",v),null}},[]),h=P.useCallback(v=>{v!=null&&v.authenticated&&v.user?(n(v.user),i("authenticated")):(n(null),i("unauthenticated"))},[]),m=P.useCallback(async v=>{if(v!=null&&v.silent||i("loading"),!uC)return console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),n(null),i("unauthenticated"),!1;try{const _=await fetch(uC,{credentials:"include"});if(!_.ok)throw new Error(`Failed to fetch session (${_.status})`);const R=await _.json();return h(R),!!(R!=null&&R.authenticated&&R.user)}catch(_){return console.error("[Auth] Failed to refresh session.",_),n(null),i("unauthenticated"),!1}},[h]);P.useEffect(()=>{m()},[m]),P.useEffect(()=>{console.log("[AuthDebug] session user:",e);const v=Ra.currentUser;console.log("[AuthDebug] firebase currentUser uid:",v==null?void 0:v.uid),v==null||v.getIdTokenResult().then(_=>{console.log("[AuthDebug] firebase claims:",_.claims)}).catch(_=>{console.warn("[AuthDebug] failed to fetch token claims",_)})},[e]),P.useEffect(()=>{const v=DO(Ra,_=>{console.log("[AuthDebug] firebase currentUser uid:",_==null?void 0:_.uid)});return()=>v()},[]),P.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const v=await hB();await fk(Ra,v),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(v){console.error("[AuthDebug] failed to sign in to Firebase",v)}})())},[e]);const g=P.useCallback(v=>{window.location.href=mC(v)},[]),x=P.useCallback(async(v,_)=>{const R=rH();return new Promise((j,S)=>{let C=!1;const M=window.setTimeout(()=>{C||(F(),S(new Error("auth_popup_timeout")))},18e4),T=window.setInterval(()=>{if(v.closed){if(C||c.current){F(),j({});return}Aa("[Auth] Discord popup closed; starting grace window");const V=2200,U=Date.now(),K=window.setInterval(()=>{if(C||c.current){window.clearInterval(K),F(),j({});return}if(Ra.currentUser||r==="authenticated"&&e){window.clearInterval(K),F(),j({});return}Date.now()-U>=V&&(window.clearInterval(K),F(),S(new Error("auth_popup_closed")))},200)}},500),F=V=>{window.removeEventListener("message",D),window.clearTimeout(M),window.clearInterval(T)},D=V=>{if(!R.has(V.origin))return;const U=V.data;(U==null?void 0:U.type)==="sfh:discordAuth"&&(U!=null&&U.nonce&&U.nonce!==_||(c.current=!0,C=!0,F(),j({customToken:typeof(U==null?void 0:U.customToken)=="string"?U.customToken:void 0})))};window.addEventListener("message",D)})},[]),b=P.useCallback(async()=>{const v=Date.now(),_=2e3,R=200,j=async()=>await m({silent:!0})?!0:Date.now()-v>=_?!1:(await new Promise(C=>setTimeout(C,R)),j());return j()},[m]),w=P.useCallback(async()=>{var C,M,T;if(o.current){Aa("[Auth] Discord login already in-flight, ignoring new request");return}o.current=!0,c.current=!1;const v=typeof window!="undefined"?window.location.origin:"N/A",_=typeof window!="undefined"?window.location.host:"N/A";Aa("[Auth] Starting Discord auth-api popup login",{origin:v,host:_});const R=nH();try{(C=window.sessionStorage)==null||C.setItem(rb,R)}catch(F){console.warn("[Auth] Failed to persist popup nonce",F)}const j=mC("discord",{mode:"popup",nonce:R});if(!j){console.warn("[Auth] Missing AUTH_BASE_URL for Discord login.");return}const S=window.open(j,"sfh_discord_oauth","width=520,height=720,menubar=no,toolbar=no,resizable=yes,scrollbars=yes");if(!S||S.closed){Aa("[Auth] Popup blocked or failed, redirecting to auth-api flow");try{(M=window.sessionStorage)==null||M.removeItem(rb)}catch(F){}g("discord"),o.current=!1;return}try{const F=await x(S,R);F!=null&&F.customToken?(await fk(Ra,F.customToken),Aa("[Auth] Discord popup custom token received and signed in"),await m({silent:!0})):await b()||(Aa("[Auth] Popup login completed but session missing, redirecting for sync"),g("discord"))}catch(F){Aa("[Auth] Popup login did not complete, falling back to redirect",{code:F==null?void 0:F.code,message:F==null?void 0:F.message}),g("discord")}finally{try{(T=window.sessionStorage)==null||T.removeItem(rb)}catch(F){}setTimeout(()=>{o.current=!1},eH)}},[g,x,b]),k=P.useCallback(async()=>{var M,T,F,D,V,U,K;const v=typeof window!="undefined"?window.location.origin:"N/A",_=typeof window!="undefined"?window.location.host:"N/A",R=(F=(T=(M=Ra.app)==null?void 0:M.options)==null?void 0:T.projectId)!=null?F:"unknown",j=(U=(V=(D=Ra.app)==null?void 0:D.options)==null?void 0:V.authDomain)!=null?U:"unknown";Aa("[Auth] Starting google login",{origin:v,host:_,projectId:R,authDomain:j});const S=u;if(!S||(()=>{var z;if(typeof window=="undefined")return!1;const H=(((z=window.navigator)==null?void 0:z.userAgent)||"").toLowerCase();return/mobile|android|iphone|ipad|ipod/.test(H)?!0:typeof window.matchMedia=="function"?window.matchMedia("(max-width: 768px)").matches:!1})()){Aa("[Auth] Falling back to redirect for google",{reason:S?"mobile":"provider_unavailable"}),g("google");return}try{await sV(Ra,S),await m({silent:!0})||(Aa("[Auth] Popup login succeeded but session missing, redirecting for sync"),g("google"))}catch(H){const z=typeof(H==null?void 0:H.code)=="string"?H.code:"",Y=typeof(H==null?void 0:H.message)=="string"?H.message:"Auth popup failed",te=tH.has(z);if(Aa("[Auth] Popup login failed for google",{code:z,message:Y,host:_,origin:v,projectId:R,authDomain:j,email:typeof((K=H==null?void 0:H.customData)==null?void 0:K.email)=="string"?H.customData.email:void 0}),te){g("google");return}console.error("[Auth] Popup login failed for google (no fallback)",{code:z,message:Y});const G=new Error(Y);throw z&&(G.code=z),G}},[m,u,g]),A=P.useCallback(async()=>{if(await MO(Ra).catch(()=>{}),!hC){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),n(null),i("unauthenticated");return}try{const v=await fetch(hC,{method:"POST",credentials:"include"});if(!v.ok)throw new Error(`Logout failed (${v.status})`)}catch(v){console.error("[Auth] Failed to logout. Clearing local session anyway.",v)}finally{n(null),i("unauthenticated")}},[]),L=P.useCallback(async v=>m(v),[m]),I=r==="idle"||r==="loading",N=P.useMemo(()=>({user:e,status:r,isLoading:I,loginWithDiscord:w,loginWithGoogle:k,logout:A,refreshSession:L}),[e,r,I,w,k,A,L]);return s.jsx(b4.Provider,{value:N,children:t})},xa=()=>{const t=P.useContext(b4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},aH="https://i.pravatar.cc/72",oH=({fallbackName:t})=>{var I,N;const{user:e,status:n,logout:r,isLoading:i}=xa(),a=Wr(),[o,c]=P.useState(!1),u=P.useRef(null),h=n==="authenticated",m=h?(N=(I=e==null?void 0:e.displayName)!=null?I:t)!=null?N:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:aH;P.useEffect(()=>{const v=_=>{u.current&&!u.current.contains(_.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]),P.useEffect(()=>{i&&c(!1)},[i]);const x=P.useCallback(()=>c(!1),[]),b=()=>{c(v=>!v)},w=()=>{typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):a("/login"),x()},k=()=>{a("/settings/account"),x()},A=P.useCallback(async()=>{try{await r()}finally{x(),a("/")}},[x,r,a]),L=()=>{var v;if(i)return s.jsx("p",{className:qt.accountStatusText,children:"Checking session..."});if(n==="unauthenticated")return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:qt.accountHeader,children:[s.jsx("p",{className:qt.accountName,children:"Not signed in"}),s.jsx("p",{className:qt.accountSub,children:"Your scans stay synced when you log in."})]}),s.jsx("button",{type:"button",className:qt.accountPrimary,onClick:w,children:"Sign in"}),s.jsx("p",{className:qt.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(n==="authenticated"){const _=!!((v=e==null?void 0:e.roles)!=null&&v.includes("admin"));return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:qt.accountHeader,children:[s.jsx("img",{className:qt.accountMiniAvatar,src:g,alt:m}),s.jsxs("div",{children:[s.jsx("p",{className:qt.accountName,children:m}),s.jsxs("p",{className:qt.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),s.jsx("button",{type:"button",className:qt.accountItem,onClick:k,children:"Account & Profile"}),_?s.jsx("a",{className:qt.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,s.jsx("hr",{className:qt.accountDivider}),s.jsx("button",{type:"button",className:`${qt.accountItem} ${qt.accountLogout}`,onClick:A,children:"Logout"})]})}return null};return s.jsxs("div",{className:qt.accountRoot,ref:u,children:[i?s.jsxs("div",{className:qt.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[s.jsx("span",{className:qt.avatarSpinner,"aria-hidden":"true"}),s.jsx("span",{className:qt.srOnly,children:"Checking login status"})]}):s.jsx("button",{type:"button",className:qt.avatarBtn,"aria-haspopup":"menu","aria-expanded":o,"aria-label":m,onClick:b,children:s.jsx("img",{className:qt.avatar,src:g,alt:m})}),!i&&o&&s.jsx("div",{className:qt.accountDropdown,role:"menu",children:L()})]})},lH="sfh:debug:firestoreReadsCallsite",cH="sf_debug_firestore_reads_callsite",dH="sfh:debug:firestoreWritesCallsite",uH="sf_debug_firestore_writes_callsite",Gv=new Map,Hv=new Map,dp=new Map,Wv=new Map,Kv=new Map,up=new Map,qv=new Map,_4=new Map,w4=new Map;let hH=1,j4=0,S4=0,ld=null;const ii=(...t)=>{console.log(...t)},Cd=()=>!1,Up=()=>!1,N4=()=>!Cd()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(lH)==="1"||window.localStorage.getItem(cH)==="1",k4=()=>!Up()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(dH)==="1"||window.localStorage.getItem(uH)==="1",rj=(t,e)=>t?t.split("/").filter(Boolean)[0]||e||"unknown":e!=null?e:"unknown",mH=()=>{if(!N4())return;const t=new Error;if(!t.stack)return;const n=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracegetdoc")&&!r.toLowerCase().includes("tracegetdocs")&&!r.toLowerCase().includes("traceonsnapshot"));return n[1]||n[0]},pH=()=>{if(!k4())return;const t=new Error;if(!t.stack)return;const n=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracewrit")&&!r.toLowerCase().includes("tracesetdoc")&&!r.toLowerCase().includes("traceupdatedoc")&&!r.toLowerCase().includes("traceadddoc")&&!r.toLowerCase().includes("tracedeletedoc")&&!r.toLowerCase().includes("recordwrite")&&!r.toLowerCase().includes("tracebatchcommit")&&!r.toLowerCase().includes("traceruntransaction"));return n[1]||n[0]},C4=t=>(t==null?void 0:t.trim())||"unknown",Mn=t=>Cd()?{id:hH++,name:t,startedAt:performance.now(),reads:[]}:null,T4=(t,e)=>{var o,c,u,h,m,g,x;if(!Cd())return;const n=C4(e.path),r=rj(e.collection||n),i=(c=(o=e.callsite)!=null?o:e.label)!=null?c:mH();t&&t.reads.push({collection:r,path:n,op:e.op,docCount:e.docCount,startedAt:performance.now(),callsite:i,label:e.label}),Gv.set(r,((u=Gv.get(r))!=null?u:0)+e.docCount);const a=(h=Hv.get(n))!=null?h:{total:0,ops:{}};a.total+=e.docCount,a.ops[e.op]=((m=a.ops[e.op])!=null?m:0)+e.docCount,Hv.set(n,a),dp.set(e.op,((g=dp.get(e.op))!=null?g:0)+e.docCount),i&&Wv.set(i,((x=Wv.get(i))!=null?x:0)+e.docCount)},ph=t=>{var a,o,c,u,h,m,g;if(!Up())return;const e=C4(t.path),n=(a=t.docCount)!=null?a:1,r=(c=(o=t.callsite)!=null?o:t.label)!=null?c:pH();if(t.includeInPaths!==!1){const x=(u=Kv.get(e))!=null?u:{total:0,ops:{}};x.total+=n,x.ops[t.op]=((h=x.ops[t.op])!=null?h:0)+n,Kv.set(e,x)}up.set(t.op,((m=up.get(t.op))!=null?m:0)+n),r&&qv.set(r,((g=qv.get(r))!=null?g:0)+n)},dn=t=>{var o;if(!t)return;t.endedAt=performance.now();const e=Math.round(t.endedAt-t.startedAt),n=t.reads.reduce((c,u)=>{var h;return c[u.collection]=((h=c[u.collection])!=null?h:0)+u.docCount,c},{}),r=t.reads.reduce((c,u)=>c+u.docCount,0),i=t.reads.map(c=>({op:c.op,path:c.path,collection:c.collection,docs:c.docCount,callsite:c.callsite})),a=`[FirestoreTrace] ${t.name} - ${r} reads in ${e}ms`;if(console.groupCollapsed(a),ii("Breakdown by collection",n),ii("Entries",i),N4()){const c=(o=t.reads.find(u=>u.callsite))==null?void 0:o.callsite;c&&ii("Top callsite",c)}ii("Totals (page lifetime)",Object.fromEntries(Gv.entries())),console.groupEnd()},In=async(t,e,n,r)=>{const i=await n(),a=i!=null&&i.exists?i.exists()?1:0:1;return T4(t,{collection:rj(e.path),path:e.path,op:"getDoc",docCount:a,label:r==null?void 0:r.label}),i},Tn=async(t,e,n,r)=>{var c,u,h;const i=await n(),a=(c=i==null?void 0:i.size)!=null?c:Array.isArray(i==null?void 0:i.docs)?i.docs.length:0,o=(h=(u=e.path)!=null?u:r==null?void 0:r.collectionHint)!=null?h:"unknown";return T4(t,{collection:rj(o,r==null?void 0:r.collectionHint),path:o,op:"getDocs",docCount:typeof a=="number"?a:0,label:r==null?void 0:r.label}),i},ij=async(t,e,n)=>{const r=await e();return ph({path:t.path,op:"setDoc",docCount:1,label:n==null?void 0:n.label}),r},gH=async(t,e)=>{var r;const n=await t();return ph({path:(r=e==null?void 0:e.path)!=null?r:"batchCommit",op:"batchCommit",docCount:1,label:e==null?void 0:e.label,includeInPaths:!1}),n},I4=async(t,e)=>{var r;const n=await t();return ph({path:(r=e==null?void 0:e.path)!=null?r:"transaction",op:"runTransaction",docCount:1,label:e==null?void 0:e.label}),n},fH=()=>{!Cd()&&!Up()||(Gv.clear(),Hv.clear(),dp.clear(),Wv.clear(),Kv.clear(),up.clear(),qv.clear(),_4.clear(),j4=0,S4=0,w4.forEach(t=>{t.callbacks=0,t.docs=0}))},Yx=t=>{!Cd()&&!Up()||(fH(),ld={name:t,startedAt:performance.now()})},Xx=(t,e)=>{var x,b;if(!Cd())return;const n=10,r=t||(ld==null?void 0:ld.name),i=r?` (${r})`:"",a={getDoc:(x=dp.get("getDoc"))!=null?x:0,getDocs:(b=dp.get("getDocs"))!=null?b:0},o=a.getDoc+a.getDocs,u=Array.from(Hv.entries()).map(([w,k])=>({path:w,total:k.total,ops:k.ops})).sort((w,k)=>k.total-w.total).slice(0,n),h=Array.from(Wv.entries()).map(([w,k])=>({callsite:w,count:k})).sort((w,k)=>k.count-w.count).slice(0,n),m=Array.from(w4.values()).map(w=>({path:w.path,callbacks:w.callbacks,docs:w.docs,callsite:w.callsite})).sort((w,k)=>k.callbacks-w.callbacks),g=Array.from(_4.entries()).map(([w,k])=>({path:w,callbacks:k.callbacks,docs:k.docs})).sort((w,k)=>k.callbacks-w.callbacks).slice(0,n);console.groupCollapsed(`[FirestoreTrace] READ SUMMARY${i}`),ii("Totals",{...a,total:o}),ii("Top paths",u),h.length>0&&ii("Top callsites",h),console.groupEnd(),console.groupCollapsed(`[FirestoreTrace] LISTENER SUMMARY${i}`),ii("Listener callbacks",{total:j4,estimatedReads:S4}),ii("Listeners active",m.length?m:"None"),g.length>0&&ii("Top listener paths",g),console.groupEnd()},Jx=(t,e)=>{if(!Up())return;const n=10,r=t||(ld==null?void 0:ld.name),i=r?` (${r})`:"",a=Object.fromEntries(up.entries()),o=Array.from(up.values()).reduce((m,g)=>m+g,0),c=Array.from(Kv.entries()).map(([m,g])=>({path:m,total:g.total,ops:g.ops})).sort((m,g)=>g.total-m.total),u=c.slice(0,n),h=k4()?Array.from(qv.entries()).map(([m,g])=>({callsite:m,count:g})).sort((m,g)=>g.count-m.count).slice(0,n):[];console.groupCollapsed(`[FirestoreTrace] WRITE SUMMARY${i}`),ii("Totals",{...a,total:o}),ii("Top paths",u),ii("All paths",c),ii("All paths",c),h.length>0&&ii("Top callsites",h),console.groupEnd()},vH=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub-v2",area:"main",titleKey:"nav.guideHub",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],pC=["guest","user","moderator","developer","admin"];function E4(t){const e=t.trim();if(!e)return"/";const n=e.startsWith("/")?e:`/${e}`;return n==="/"?n:n.replace(/\/+$/,"").toLowerCase()}function A4(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function P4(t){if(!Array.isArray(t))return;const e=t.map(n=>A4(n)).filter(Boolean);return e.length?e:void 0}function R4(t){if(!Array.isArray(t))return;const e=t.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0);return e.length?e:void 0}function L4(t){if(!Array.isArray(t))return;const e=t.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0);return e.length?e:void 0}function aj(t){var e,n,r;return{...t,id:t.id.trim(),route:E4(t.route),area:t.area.trim(),allowedRoles:(e=P4(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(n=R4(t.allowedGroups))!=null?n:t.allowedGroups,allowedUserIds:(r=L4(t.allowedUserIds))!=null?r:t.allowedUserIds}}function gC(t,e){if(!e||typeof e!="object")return null;const n=e,r=typeof n.route=="string"?n.route:"",i=typeof n.area=="string"?n.area:"",a=typeof n.id=="string"&&n.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const o={id:a,route:r,area:i,titleKey:typeof n.titleKey=="string"?n.titleKey:void 0,status:typeof n.status=="string"?n.status:void 0,minRole:A4(n.minRole),allowedRoles:P4(n.allowedRoles),allowedGroups:R4(n.allowedGroups),allowedUserIds:L4(n.allowedUserIds),showInTopbar:typeof n.showInTopbar=="boolean"?n.showInTopbar:void 0,showInSidebar:typeof n.showInSidebar=="boolean"?n.showInSidebar:void 0,navOrder:typeof n.navOrder=="number"?n.navOrder:void 0,isExperimental:typeof n.isExperimental=="boolean"?n.isExperimental:void 0,description:typeof n.description=="string"?n.description:void 0};return aj(o)}function xH(t){if(!t||typeof t!="object")return[];const n=t.items;return Array.isArray(n)?n.map(r=>{if(!r||typeof r!="object")return null;const i=r,a=typeof i.id=="string"?i.id:"";return gC(a,i)}).filter(r=>!!r):n&&typeof n=="object"?Object.entries(n).map(([r,i])=>gC(r,i)).filter(r=>!!r):[]}function yH(t){const e={},n={};return t.forEach(r=>{const i=aj(r);e[i.id]=i,n[i.route]=i}),{byId:e,byRoute:n}}const el=yH(vH),bH={...el,loading:!1,error:null},_H=300*1e3,fC="sf_feature_access_snapshot",vC="sf_feature_access_date",wH="stats_public",jH="feature_access_main_nav";let Nu=null,Cu=null;const SH=async t=>{const e=Date.now();return Cu&&e-Cu.fetchedAt<_H?Cu:Nu||(Nu=(async()=>{const n=ms(Tt,wH,jH),r=await In(t,n,()=>mn(n),{label:"feature_access_snapshot"}),i=r.exists()?xH(r.data()):[],o={rules:kH(i),fetchedAt:Date.now()};return Cu=o,o})().finally(()=>{Nu=null}),Nu)};function NH(t,e){const n={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const o=i;n[o]=a}}),n}function kH(t){const e={...el.byId},n={...el.byRoute};return t.forEach(r=>{const i=aj(r),a=e[i.id],o=NH(a,i);e[o.id]=o,n[o.route]=o}),{byId:e,byRoute:n}}const D4=q.createContext(bH),CH=({children:t})=>{const[e,n]=q.useState({...el,loading:!0,error:null});q.useEffect(()=>{let i=!0;return(async()=>{const o=new Date().toISOString().split("T")[0];if(typeof window!="undefined")try{const h=window.localStorage.getItem(fC),m=window.localStorage.getItem(vC);if(h&&m===o){const g=JSON.parse(h);if(g&&typeof g=="object"){Cu={rules:g,fetchedAt:Date.now()},i&&n({...g,loading:!1,error:null});return}}}catch(h){console.warn("[FeatureAccess] localStorage cache read failed; falling back to Firestore.",h)}const u=Cd()&&!Cu&&!Nu?Mn("FeatureAccess:load"):null;try{const{rules:h}=await SH(u);if(i&&n({...h,loading:!1,error:null}),typeof window!="undefined")try{window.localStorage.setItem(fC,JSON.stringify(h)),window.localStorage.setItem(vC,o)}catch(m){console.warn("[FeatureAccess] localStorage cache write failed.",m)}}catch(h){const m=h,g=m==null?void 0:m.code,x=g==="permission-denied"||g==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore stats_public feature access snapshot ${x?"not readable":"load failed"}. Falling back to defaults.`,h),i&&n(w=>({...w,loading:!1,error:h instanceof Error?h.message:"Failed to load feature access rules"}))}finally{dn(u)}})(),()=>{i=!1}},[]);const r=q.useMemo(()=>e,[e]);return s.jsx(D4.Provider,{value:r,children:t})};function TH(){return q.useContext(D4)}function IH(t,e){var i,a,o;if(!t)return;const n=e!=null?e:el,r=E4(t);return(o=(a=(i=n.byId[t])!=null?i:n.byRoute[r])!=null?a:el.byId[t])!=null?o:el.byRoute[r]}function EH(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function AH(t,e,n,r,i){if(n)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const o=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&o!=="developer"&&o!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!o&&t.allowedRoles.includes(o);if(t.minRole){const c=pC.indexOf(o),u=pC.indexOf(t.minRole);return c>=u&&c!==-1}return!0}function Zx(){var k;let t=null;try{t=xa().user}catch(A){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:n,loading:r,error:i}=TH(),a=q.useMemo(()=>({byId:e!=null?e:el.byId,byRoute:n!=null?n:el.byRoute}),[e,n]),o=q.useMemo(()=>EH(t==null?void 0:t.roles),[t==null?void 0:t.roles]),c=q.useMemo(()=>{var A;return!!((A=t==null?void 0:t.roles)!=null&&A.includes("admin"))},[t==null?void 0:t.roles]),u=q.useMemo(()=>{var A;return(A=t==null?void 0:t.accessGroups)!=null?A:[]},[t==null?void 0:t.accessGroups]),h=(k=t==null?void 0:t.id)!=null?k:null,m=q.useCallback(A=>IH(A,a),[a]),g=q.useCallback(A=>A?AH(A,o,c,h,u):!0,[c,u,h,o]),x=q.useCallback(A=>{if(!A)return!0;const L=m(A);return g(L)},[g,m]),b=q.useCallback(A=>{if(!A)return!0;const L=m(A);return L?L.status==="hidden"||L.showInSidebar===!1?!1:g(L):!0},[g,m]),w=q.useCallback(A=>{if(!A)return!0;const L=m(A);return L?L.status==="hidden"||L.showInTopbar===!1?!1:g(L):!0},[g,m]);return{loading:r,error:i,rulesById:e,rulesByRoute:n,storeRules:a,resolveRule:m,canAccessRule:g,canAccessFeature:x,isVisibleInSidebar:b,isVisibleInTopbar:w}}const M4=P.createContext(null);function PH({children:t}){const{canAccessFeature:e}=Zx(),[n,r]=P.useState(!1),[i,a]=P.useState("csv"),o=e("main.uploadCenter"),c=P.useCallback(m=>{o&&(m!=null&&m.tab?a(m.tab):a("csv"),r(!0))},[o]),u=P.useCallback(()=>r(!1),[]),h=P.useMemo(()=>({isOpen:n,open:c,close:u,activeTab:i,setTab:a,canUse:o}),[n,c,u,i,o]);return s.jsx(M4.Provider,{value:h,children:t})}function oj(){const t=P.useContext(M4);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const la={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB","plague-doctor":"1sRziBjLKnZ-iE7OC44c_mJ_0j62ra9fg",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},ca=t=>`https://drive.google.com/uc?export=view&id=${t}`,F4=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),fr=[{key:"warrior",label:"Warrior",iconUrl:ca(la.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:ca(la.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:ca(la.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:ca(la.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:ca(la["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:ca(la.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:ca(la["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:ca(la.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:ca(la.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:ca(la.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:ca(la.paladin),fallback:""},{key:"plague-doctor",label:"Plague Doctor",iconUrl:ca(la["plague-doctor"]),fallback:"?"}],xC=Object.fromEntries(fr.map(t=>[t.key,t])),p_=new Map;function tn(t,e){p_.set(F4(t),e)}for(const t of fr)tn(t.key,t.key),tn(t.label,t.key);tn("war","warrior");tn("krieger","warrior");tn("magier","mage");tn("jaeger","scout");tn("jger","scout");tn("assa","assassin");tn("meuchelmoerder","assassin");tn("meuchelmrder","assassin");tn("demonhunter","demon-hunter");tn("dh","demon-hunter");tn("daemonenjaeger","demon-hunter");tn("dmonenjger","demon-hunter");tn("zerker","berserker");tn("battlemage","battle-mage");tn("kampfmagier","battle-mage");tn("bm","battle-mage");tn("druide","druid");tn("barde","bard");tn("necro","necromancer");tn("nekromant","necromancer");tn("pala","paladin");tn("plaguedoctor","plague-doctor");tn("plague doctor","plague-doctor");tn("plague-doctor","plague-doctor");function B4(t){const e=F4(t);if(!e)return{};const n=p_.get(e);if(n){const r=xC[n];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of p_.entries())if(r.startsWith(e)||e.startsWith(r)){const a=xC[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}function ey(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const n=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(n!=null&&n[1])return n[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function ov(t){if(t==null)return;const e=ey(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function $4(t,e=64){if(t==null)return;const n=ey(t);if(!n)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${n}&sz=w${r}`}function O4(t,e){const n="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${n}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function V4(t,e,n,r){const i=ov(t);return i?O4(i,{w:e,h:n,fit:r}):void 0}function Ni(t,e=64){const n=$4(t,e);return n?O4(n,{w:e,h:e,fit:"contain"}):void 0}function ib(t){if(t==null)return;const e=ey(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function RH(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const _d=Object.assign(t=>ov(t),{id:ey,direct:ov,thumb:$4,proxy:V4,thumbProxy:Ni,raw:ib,gif:ib,gifProxy:t=>{const e=ib(t);return e&&/^https?:\/\//i.test(e)?RH(e):ov(t)}}),ty="sfh:search:cache:v1:universal:",U4=`${ty}lru`,LH=720*60,Rm=150,gh=()=>typeof window!="undefined"&&!!window.localStorage,DH=t=>t.trim().replace(/\s+/g," ").toLowerCase(),z4=(...t)=>{try{gh()&&window.localStorage.getItem("sfh:debug:firestoreReads")==="1"&&console.debug(...t)}catch(e){}},G4=()=>{if(!gh())return[];try{const t=window.localStorage.getItem(U4);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}catch(t){return[]}},H4=t=>{if(gh())try{window.localStorage.setItem(U4,JSON.stringify(t.slice(0,Rm)))}catch(e){}},W4=t=>{const e=G4().filter(n=>n!==t);e.unshift(t),H4(e.slice(0,Rm))},MH=()=>{const t=G4();if(t.length<=Rm)return;const e=t.slice(0,Rm);if(H4(e),!!gh())try{t.slice(Rm).forEach(r=>window.localStorage.removeItem(ty+r))}catch(n){}},FH=t=>{if(!gh())return null;try{const e=window.localStorage.getItem(ty+t);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.ts!="number"||typeof n.ttlSec!="number"||Date.now()-n.ts>n.ttlSec*1e3?null:(z4("[SearchCache] hit",t),W4(t),n)}catch(e){return null}},BH=(t,e,n=LH)=>{if(!gh())return;const r={...e,ts:Date.now(),ttlSec:n};try{window.localStorage.setItem(ty+t,JSON.stringify(r)),W4(t),MH(),z4("[SearchCache] store",t,{players:e.players.length,guilds:e.guilds.length})}catch(i){}},$H=/^[a-z]{1,4}\d+$/i,OH=/^([a-z]{1,4}\d+)[_.-]?(net|eu)$/i,VH=/^([a-z]{1,4}\d+)\.sfgame\.(net|eu)$/i,ff=t=>{const e=String(t!=null?t:"").trim().toUpperCase();if(!e)return"";const n=e.match(/^S(\d+)$/);return n?`EU${n[1]}`:e},K4=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase();if($H.test(n))return ff(n);const r=n.match(OH);if(r)return ff(r[1]);const i=n.match(VH);return ff(i?i[1]:e)},q4=t=>{var o;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/i);if(!n)return null;const r=(o=n[1])==null?void 0:o.trim(),i=n[2],a=K4(r);return!a||!i?null:{identifier:e,playerId:i,serverKey:a}},sy=(t,e)=>{const n=String(e!=null?e:"").trim();if(!n)return null;const r=K4(t);return r?`${r.toLowerCase()}_p${n}`:null},vf=3,UH=350,Ml=25,xf=10,lj="sfh:search:recents",Q4=20,ab=t=>Number.isFinite(t),uu=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},Fl=t=>{if(typeof t!="string")return null;const e=t.trim();return e||null},zH=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),Hl=()=>{try{const t=typeof window!="undefined"?window.localStorage.getItem(lj):null;if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.slice(0,Q4).map(n=>{var r,i,a,o,c,u,h,m,g;return(n==null?void 0:n.kind)==="player"||(n==null?void 0:n.kind)==="guild"?{kind:n.kind,id:String((i=(r=n.id)!=null?r:n.value)!=null?i:""),server:(o=(a=n.server)!=null?a:n.serverId)!=null?o:null,name:(u=(c=n.name)!=null?c:n.label)!=null?u:null,className:(h=n.className)!=null?h:null,level:typeof n.level=="number"?n.level:null,guildName:(m=n.guildName)!=null?m:null}:(n==null?void 0:n.kind)==="query"?{kind:"query",value:String((g=n.value)!=null?g:"")}:null}).filter(Boolean):[]}catch(t){return[]}},cd=t=>{var n;if(t.kind==="query")return`query:${t.value}`;const e=(n=t.server)!=null?n:"";return`${t.kind}:${e}:${t.id}`},yC=t=>{var e,n,r,i,a,o,c,u,h;if(t.kind!=="player"||t.name&&t.className&&t.server||typeof window=="undefined")return t;try{const m=window.localStorage.getItem(`player-profile-cache:${t.id}`);if(!m)return t;const g=JSON.parse(m),x=(g==null?void 0:g.data)||{};return{...t,name:(n=(e=t.name)!=null?e:x.name)!=null?n:null,className:(i=(r=t.className)!=null?r:x.className)!=null?i:null,server:(o=(a=t.server)!=null?a:x.server)!=null?o:null,level:(c=t.level)!=null?c:typeof x.level=="number"?x.level:null,guildName:(h=(u=t.guildName)!=null?u:x.guild)!=null?h:null}}catch(m){return t}},ob=t=>{if(typeof window!="undefined")try{const e=Hl().map(yC),n=t.kind==="player"?yC(t):t,r=cd(n),i=[n,...e.filter(a=>cd(a)!==r)];window.localStorage.setItem(lj,JSON.stringify(i.slice(0,Q4)))}catch(e){}},lb=(t,e)=>{try{const n=Hl().filter(r=>cd(r)!==t);window.localStorage.setItem(lj,JSON.stringify(n)),e(n)}catch(n){e(r=>r.filter(i=>cd(i)!==t))}};function GH(t){const e=t.ref.parent,n=e==null?void 0:e.parent,r=n==null?void 0:n.parent;return{root:r==null?void 0:r.id,id:n==null?void 0:n.id}}const HH=(t,e)=>{var o,c,u,h,m,g,x,b;const n=(m=(u=(o=Fl(e==null?void 0:e.identifier))!=null?o:Fl(e==null?void 0:e.playerIdentifier))!=null?u:Fl((c=e==null?void 0:e.values)==null?void 0:c.Identifier))!=null?m:Fl((h=e==null?void 0:e.values)==null?void 0:h.identifier);if(n)return n;const r=Fl(t);if(r&&q4(r))return r;const i=(g=Fl(e==null?void 0:e.playerId))!=null?g:r,a=(b=Fl(e==null?void 0:e.server))!=null?b:Fl((x=e==null?void 0:e.values)==null?void 0:x.Server);return sy(a,i)};function bC({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:n}){const{t:r}=Os(),i=Wr(),[a,o]=q.useState(""),[c,u]=q.useState(""),[h,m]=q.useState(!1),[g,x]=q.useState(null),[b,w]=q.useState([]),[k,A]=q.useState([]),[L,I]=q.useState([]),[N,v]=q.useState(!1),[_,R]=q.useState(!1),[j,S]=q.useState(Hl()),[C,M]=q.useState(-1),[T,F]=q.useState(!1),[D,V]=q.useState(!1),[U,K]=q.useState(null),H=q.useRef(null),z=q.useRef(0);q.useEffect(()=>{const ee=setTimeout(()=>u(a.trim()),UH);return()=>clearTimeout(ee)},[a]),q.useEffect(()=>{let ee=!1;async function le(){const re=c,be=DH(re);if(re.length<vf){w([]),A([]),I([]),v(!1),R(!1),M(j.length?0:-1),K(null);return}const Te=FH(be);if(Te){w(Te.players.slice(0,xf).map(Oe=>{var Me,De,Fe;return{kind:"player",id:String(Oe.playerId),name:Oe.name,server:(Me=Oe.server)!=null?Me:null,className:(De=Oe.className)!=null?De:null,guildName:(Fe=Oe.guildName)!=null?Fe:null,nameFold:null,level:null}})),A(Te.guilds.slice(0,xf).map(Oe=>{var Me;return{kind:"guild",id:Oe.guildId,name:Oe.name,nameFold:null,server:(Me=Oe.server)!=null?Me:null,memberCount:null,hofRank:null}})),v(Te.playersHasMore),R(Te.guildsHasMore),I([]),M(Te.players.length+Te.guilds.length?0:-1),K("cache");return}F(!0);const Le=Mn("Search:universal");x(null),m(!0);const Re=++z.current;try{let Oe=function(gt){var dt,qe,_t,Dt,Ot,Be,Ct,ys,ke,Ss,Qn,Ks,vr,nr,xr,pn,us,Ts,_n,rr,Qt,Lr,Yn,Yi,ki,ci,di,Ci,Xi,Ji,Is,ya,Zi,Ti;const ne=gt.data(),{root:Ue,id:Ve}=GH(gt);if(Ue==="players"||ne.playerId&&!ne.guildIdentifier){const Xs=HH(Ve,ne);if(!Xs||Ae.has(Xs))return;Ae.add(Xs),oe.push({kind:"player",id:Xs,name:(_t=(qe=ne.name)!=null?qe:(dt=ne.values)==null?void 0:dt.Name)!=null?_t:null,nameFold:(Dt=ne.nameFold)!=null?Dt:null,server:(Ct=(Be=ne.server)!=null?Be:(Ot=ne.values)==null?void 0:Ot.Server)!=null?Ct:null,guildName:(Ss=(ke=ne.guildName)!=null?ke:(ys=ne.values)==null?void 0:ys.Guild)!=null?Ss:null,className:(vr=(Ks=ne.className)!=null?Ks:(Qn=ne.values)==null?void 0:Qn.Class)!=null?vr:null,level:uu((xr=ne.level)!=null?xr:(nr=ne.values)==null?void 0:nr.Level),ts:uu(ne.timestamp)});return}if(Ue==="guilds"||ne.guildIdentifier&&!ne.playerId){const Xs=Ve||ne.guildIdentifier||"";if(!Xs||Xe.has(Xs))return;Xe.add(Xs),fe.push({kind:"guild",id:Xs,name:(Ts=(us=ne.name)!=null?us:(pn=ne.values)==null?void 0:pn.Name)!=null?Ts:null,nameFold:(_n=ne.nameFold)!=null?_n:null,server:(Lr=(Qt=ne.server)!=null?Qt:(rr=ne.values)==null?void 0:rr.Server)!=null?Lr:null,memberCount:uu((ci=(Yi=ne.memberCount)!=null?Yi:(Yn=ne.values)==null?void 0:Yn["Guild Member Count"])!=null?ci:(ki=ne.values)==null?void 0:ki.GuildMemberCount),hofRank:uu((Ti=(ya=(Ji=(Ci=ne.hofRank)!=null?Ci:(di=ne.values)==null?void 0:di["Hall of Fame Rank"])!=null?Ji:(Xi=ne.values)==null?void 0:Xi.HoF)!=null?ya:(Is=ne.values)==null?void 0:Is.Rank)!=null?Ti:(Zi=ne.values)==null?void 0:Zi["Guild Rank"]),ts:uu(ne.timestamp)});return}};const Me=zH(re),De=Fp(Tt,"latest"),Fe=Dn(De,Hi("nameFold"),Zl(Me),ec(Me+""),pr(Ml)),we=await Tn(Le,{path:"latest"},()=>Cn(Fe),{collectionHint:"latest"}),de=Dn(De,ji("nameNgrams","array-contains",Me),pr(Ml)),Ie=await Tn(Le,{path:"latest"},()=>Cn(de),{collectionHint:"latest"}),Ae=new Set,Xe=new Set,oe=[],fe=[];we.forEach(Oe),Ie.forEach(Oe);const me=oe.slice(0,Ml),xe=fe.slice(0,Ml);if(Re!==z.current||ee){dn(Le);return}const tt=ol(Tt,"servers"),lt=re.toLowerCase(),Je=re.toUpperCase(),ut=[Tn(Le,{path:"servers"},()=>Cn(Dn(tt,Hi("displayName"),Zl(re),ec(re+""),pr(e))),{collectionHint:"servers"}),Tn(Le,{path:"servers"},()=>Cn(Dn(tt,Hi("code"),Zl(Je),ec(Je+""),pr(e))),{collectionHint:"servers"}),Tn(Le,{path:"servers"},()=>Cn(Dn(tt,Hi("host"),Zl(lt),ec(lt+""),pr(e))),{collectionHint:"servers"})],bt=await Promise.allSettled(ut),ft=new Set,mt=[];for(const gt of bt)gt.status==="fulfilled"&&gt.value.forEach(ne=>{var dt,qe,_t,Dt,Ot;const Ue=ne.data(),Ve=ne.id;!Ve||ft.has(Ve)||(ft.add(Ve),mt.push({kind:"server",id:Ve,displayName:(dt=Ue.displayName)!=null?dt:null,code:(qe=Ue.code)!=null?qe:null,host:(_t=Ue.host)!=null?_t:null,region:(Dt=Ue.region)!=null?Dt:null,type:(Ot=Ue.type)!=null?Ot:null,numericId:uu(Ue.numericId),active:typeof Ue.active=="boolean"?Ue.active:null}))});const ot=[],os=gt=>{for(const ne of gt){if(ot.length>=xf)break;ot.push(ne)}};os(me),os(xe),ot.length<xf&&(os(me.slice(ot.length)),os(xe.slice(ot.length))),w(ot.filter(gt=>gt.kind==="player")),A(ot.filter(gt=>gt.kind==="guild")),I(mt.slice(0,e)),v(me.length===Ml),R(xe.length===Ml),M(ot.length+mt.length?0:-1),K("live"),BH(be,{players:me.map(gt=>({playerId:gt.id,name:gt.name,server:gt.server,className:gt.className,guildName:gt.guildName})),guilds:xe.map(gt=>{var ne;return{guildId:gt.id,name:gt.name,server:(ne=gt.server)!=null?ne:void 0}}),playersHasMore:me.length===Ml,guildsHasMore:xe.length===Ml})}catch(Oe){x((Oe==null?void 0:Oe.message)||"Unbekannter Fehler bei der Suche."),w([]),A([]),I([]),M(-1)}finally{dn(Le),m(!1)}}return le(),()=>{ee=!0}},[c,e,j.length]),q.useEffect(()=>{const ee=le=>{H.current&&(H.current.contains(le.target)||(w([]),A([]),I([]),M(-1),F(!1),V(!1)))};return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[]);const Y=T&&a.trim().length<vf&&j.length>0,te=T&&(h||g||Y||[...b,...k,...L].length>0||D&&a.trim().length<vf),G=j.filter(ee=>ee.kind==="player"||ee.kind==="guild").map(ee=>{var le,re,be,Te,Le,Re,Oe;return ee.kind==="player"?{kind:"player",id:ee.id,name:(le=ee.name)!=null?le:null,nameFold:null,server:(re=ee.server)!=null?re:null,guildName:(be=ee.guildName)!=null?be:null,className:(Te=ee.className)!=null?Te:null,level:(Le=ee.level)!=null?Le:null,ts:null}:{kind:"guild",id:ee.id,name:(Re=ee.name)!=null?Re:null,nameFold:null,server:(Oe=ee.server)!=null?Oe:null,memberCount:null,hofRank:null,ts:null}}),X=Y?G:[...b,...k,...L],J=ee=>{var le;if(ee.kind==="player"){const re=q4(ee.id)?ee.id:sy((le=ee.server)!=null?le:null,ee.id);if(!re)return;ob({kind:"player",id:re,name:ee.name,className:ee.className,level:ee.level,guildName:ee.guildName,server:ee.server}),S(Hl()),i(`/player/${encodeURIComponent(re)}`)}else ee.kind==="guild"?(ob({kind:"guild",id:ee.id,name:ee.name,server:ee.server}),S(Hl()),i(`/guild/${encodeURIComponent(ee.id)}`)):i(`/server/${encodeURIComponent(ee.id)}`);w([]),A([]),I([]),M(-1),o(""),F(!1),K(null)},se=()=>{a.trim().length<vf||(ob({kind:"query",value:a.trim()}),S(Hl()),i(`/search?q=${encodeURIComponent(a.trim())}`),F(!1))},ue=ee=>{if(ee.key==="Enter"){ee.preventDefault(),C>=0&&X[C]?J(X[C]):se();return}if(ee.key==="Escape"){w([]),A([]),I([]),M(-1),F(!1);return}X.length&&(ee.key==="ArrowDown"?(ee.preventDefault(),M(le=>(le+1)%X.length)):ee.key==="ArrowUp"&&(ee.preventDefault(),M(le=>(le-1+X.length)%X.length)))},Ne=(ee,le,re=!1,be)=>{var Oe,Me,De,Fe,we,de;const Te=le===C,Le=re?"div":"button",Re=re?{role:"button",tabIndex:0,onKeyDown:Ie=>{(Ie.key==="Enter"||Ie.key===" ")&&(Ie.preventDefault(),J(ee))}}:{type:"button"};return s.jsxs(Le,{onClick:()=>J(ee),style:Te?Lt.itemActive:Lt.item,title:ee.name||"",onMouseEnter:()=>M(le),...Re,children:[s.jsx("div",{style:Lt.iconBox,children:n?s.jsx("img",{src:n((Oe=ee.className)!=null?Oe:void 0,64),alt:(Me=ee.className)!=null?Me:"class icon",style:Lt.iconImgShadow,loading:"lazy"}):s.jsx("span",{style:Lt.iconFallback,children:(De=ee.className)!=null?De:"?"})}),s.jsxs("div",{style:Lt.meta,children:[s.jsxs("div",{style:Lt.line1,children:[s.jsx("span",{style:Lt.name,children:(Fe=ee.name)!=null?Fe:ee.id}),ab(ee.level)&&s.jsxs("span",{style:Lt.badge,children:["Lvl ",ee.level]}),re&&s.jsx("span",{style:Lt.recentsBadge,children:r("search.recentLabel","Recent")}),re&&be&&s.jsx("button",{type:"button",style:Lt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Ie=>{Ie.preventDefault(),Ie.stopPropagation(),lb(be,S)},children:""})]}),s.jsxs("div",{style:Lt.line2,children:[s.jsx("span",{children:(we=ee.className)!=null?we:"Klasse ?"}),s.jsx("span",{style:Lt.sep,children:""}),s.jsx("span",{children:(de=ee.server)!=null?de:"Server ?"})]})]})]},`p-${ee.id}-${le}-${re?"r":"s"}`)},Ee=(ee,le,re=!1,be)=>{var Oe,Me;const Te=le===C,Le=re?"div":"button",Re=re?{role:"button",tabIndex:0,onKeyDown:De=>{(De.key==="Enter"||De.key===" ")&&(De.preventDefault(),J(ee))}}:{type:"button"};return s.jsxs(Le,{onClick:()=>J(ee),style:Te?Lt.itemActive:Lt.item,title:ee.name||"",onMouseEnter:()=>M(le),...Re,children:[s.jsx("div",{style:Lt.iconBox,children:""}),s.jsxs("div",{style:Lt.meta,children:[s.jsxs("div",{style:Lt.line1,children:[s.jsx("span",{style:Lt.name,children:(Oe=ee.name)!=null?Oe:ee.id}),ab(ee.hofRank)&&s.jsxs("span",{style:Lt.badge,children:["HoF #",ee.hofRank]}),re&&s.jsx("span",{style:Lt.recentsBadge,children:r("search.recentLabel","Recent")}),re&&be&&s.jsx("button",{type:"button",style:Lt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:De=>{De.preventDefault(),De.stopPropagation(),lb(be,S)},children:""})]}),s.jsxs("div",{style:Lt.line2,children:[s.jsx("span",{children:(Me=ee.server)!=null?Me:"Server ?"}),s.jsx("span",{style:Lt.sep,children:""}),s.jsx("span",{children:ab(ee.memberCount)?r("search.guildMembers","{{count}} members",{count:ee.memberCount}):r("search.guildMembersUnknown","Members ?")})]})]})]},`g-${ee.id}-${le}-${re?"r":"s"}`)};return s.jsxs("div",{ref:H,style:Lt.wrap,children:[s.jsx("input",{style:Lt.input,placeholder:t,value:a,onChange:ee=>o(ee.target.value),onKeyDown:ue,onFocus:()=>{V(!0),F(!0)},onBlur:()=>{V(!1)},"aria-label":r("search.inputLabel","Spieler, Gilden und Server suchen")}),te&&s.jsxs("div",{style:Lt.dropdown,children:[h&&s.jsx("div",{style:Lt.hint,children:r("search.loading","Laden ")}),g&&s.jsx("div",{style:Lt.err,children:g}),!h&&!g&&Y&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Lt.sectionHdr,children:r("search.recents","Recent searches")}),j.length===0&&s.jsx("div",{style:Lt.hint,children:r("search.minCharsHint","Type at least 3 characters")}),j.map((ee,le)=>{var re,be,Te,Le,Re,Oe,Me;if(ee.kind==="query"){const De=cd(ee);return s.jsx("div",{style:Lt.item,role:"button",tabIndex:0,onClick:()=>{o(ee.value),u(ee.value),F(!1),S(Hl())},onKeyDown:Fe=>{(Fe.key==="Enter"||Fe.key===" ")&&(Fe.preventDefault(),o(ee.value),u(ee.value),F(!1),S(Hl()))},children:s.jsx("div",{style:Lt.meta,children:s.jsxs("div",{style:Lt.line1,children:[s.jsx("span",{style:Lt.name,children:ee.value}),s.jsx("span",{style:Lt.recentsBadge,children:r("search.recentLabel","Recent")}),s.jsx("button",{type:"button",style:Lt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Fe=>{Fe.preventDefault(),Fe.stopPropagation(),lb(De,S)},children:""})]})})},`rq-${le}`)}if(ee.kind==="player"){const De={kind:"player",id:ee.id,name:(re=ee.name)!=null?re:null,server:(be=ee.server)!=null?be:null,guildName:(Te=ee.guildName)!=null?Te:null,className:(Le=ee.className)!=null?Le:null,level:(Re=ee.level)!=null?Re:null},Fe=cd(ee);return s.jsx(q.Fragment,{children:Ne(De,le,!0,Fe)},`rp-${ee.id}-${le}`)}if(ee.kind==="guild"){const De={kind:"guild",id:ee.id,name:(Oe=ee.name)!=null?Oe:null,server:(Me=ee.server)!=null?Me:null,memberCount:null,hofRank:null},Fe=cd(ee);return s.jsx(q.Fragment,{children:Ee(De,le+b.length,!0,Fe)},`rg-${ee.id}-${le}`)}return null})]}),!h&&!g&&!Y&&X.length===0&&s.jsx("div",{style:Lt.hint,children:r("search.noResults","No results")}),!h&&!g&&b.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Lt.sectionHdr,children:r("search.players","Players")}),b.map((ee,le)=>Ne(ee,le))]}),!h&&!g&&k.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Lt.sectionHdr,children:r("search.guilds","Guilds")}),k.map((ee,le)=>{const re=b.length+le;return Ee(ee,re)})]}),!h&&!g&&L.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:Lt.sectionHdr,children:r("search.servers","Servers")}),L.map((ee,le)=>{var Te,Le,Re,Oe,Me,De;const re=b.length+k.length+le,be=re===C;return s.jsxs("button",{onClick:()=>J(ee),style:be?Lt.itemActive:Lt.item,title:ee.displayName||ee.code||ee.host||"",onMouseEnter:()=>M(re),children:[s.jsx("div",{style:Lt.iconBoxPlain,children:s.jsx("div",{style:Lt.serverGlyph,children:""})}),s.jsxs("div",{style:Lt.meta,children:[s.jsxs("div",{style:Lt.line1,children:[s.jsx("span",{style:Lt.name,children:(Re=(Le=(Te=ee.displayName)!=null?Te:ee.code)!=null?Le:ee.host)!=null?Re:ee.id}),ee.active!=null&&s.jsx("span",{style:Lt.badge,children:ee.active?r("search.active","Active"):r("search.inactive","Inactive")})]}),s.jsxs("div",{style:Lt.line2,children:[s.jsx("span",{children:(Oe=ee.code)!=null?Oe:"?"}),s.jsx("span",{style:Lt.sep,children:""}),s.jsx("span",{children:(Me=ee.host)!=null?Me:"?"}),s.jsx("span",{style:Lt.sep,children:""}),s.jsx("span",{children:(De=ee.region)!=null?De:"?"}),ee.type?s.jsxs(s.Fragment,{children:[s.jsx("span",{style:Lt.sep,children:""}),s.jsx("span",{children:ee.type.toUpperCase()})]}):null]})]})]},`s-${ee.id}-${le}`)})]}),(N||_)&&s.jsx("button",{style:Lt.moreCta,onClick:se,children:r("search.moreResults","More results press Enter")})]})]})}const Lt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},moreCta:{width:"100%",border:"1px dashed rgba(255,255,255,0.3)",background:"transparent",color:"#d6e4f7",padding:"10px 12px",borderRadius:10,cursor:"pointer",marginTop:8},recentsBadge:{marginLeft:8,fontSize:11,color:"#8aa5c4",border:"1px solid rgba(255,255,255,0.2)",padding:"0 6px",borderRadius:12},clearBtn:{marginLeft:8,background:"transparent",border:"none",color:"rgba(214,228,247,0.85)",cursor:"pointer",fontSize:12,padding:"0 4px"}},yf=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function ny(t,e=64){if(!t)return;const n=yf(t);let r=fr.find(i=>yf(i.label)===n);return r||(r=fr.find(i=>yf(i.label).startsWith(n)||n.startsWith(yf(i.label)))),r?Ni(r.iconUrl,e):void 0}const WH=[{to:"/",labelKey:"home",defaultLabel:"Home",featureId:"main.home"},{to:"/dashboard",labelKey:"dashboard",defaultLabel:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",labelKey:"guildHub",defaultLabel:"Guild Hub",featureId:"main.guildHub"},{to:"/community",labelKey:"community",defaultLabel:"Community",featureId:"main.community"},{to:"/tools",labelKey:"tools",defaultLabel:"Tools",featureId:"main.tools"}];function _C(t,e){return ny(t,e)}function KH({user:t}){const{open:e,canUse:n}=oj(),{isVisibleInTopbar:r}=Zx(),{t:i}=Os(),[a,o]=q.useState(()=>typeof window=="undefined"?!1:window.matchMedia("(max-width: 767px)").matches),[c,u]=q.useState(!1),h=q.useRef(null),m=q.useMemo(()=>WH.filter(b=>!b.featureId||r(b.featureId)),[r]),g=()=>{e({tab:"json"})};q.useEffect(()=>{if(typeof window=="undefined")return;const b=window.matchMedia("(max-width: 767px)"),w=()=>o(b.matches);return w(),b.addEventListener("change",w),()=>b.removeEventListener("change",w)},[]),q.useEffect(()=>{a||u(!1)},[a]),q.useEffect(()=>{if(!c||typeof window=="undefined")return;const b=w=>{w.key==="Escape"&&u(!1)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[c]),q.useEffect(()=>{if(!c||typeof document=="undefined")return;const b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=b}},[c]),q.useEffect(()=>{if(!c)return;const b=()=>{var A;const k=(A=h.current)==null?void 0:A.querySelector("input");k==null||k.focus()},w=window.requestAnimationFrame(b);return()=>window.cancelAnimationFrame(w)},[c]);const x=i("search.open",{defaultValue:"Open search"});return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:qt.topbar,children:[s.jsxs("div",{className:qt.topbarLeft,children:[s.jsx("button",{className:qt.btnIco,"aria-label":i("nav.notifications",{defaultValue:"Notifications"}),children:s.jsx(l7,{className:qt.ico})}),s.jsx("button",{className:qt.btnIco,"aria-label":i("nav.favorites",{defaultValue:"Favorites"}),children:s.jsx(v9,{className:qt.ico})}),s.jsx("button",{className:`${qt.btnIco} ${qt.mobileSearchBtn}`,"aria-label":x,onClick:()=>u(!0),type:"button",children:s.jsx(Cv,{className:qt.ico})}),m.length>0?s.jsx("nav",{className:qt.topbarNav,"aria-label":i("topbar.quickAccess",{defaultValue:"Quick access"}),children:m.map(b=>s.jsx(Bs,{to:b.to,className:({isActive:w})=>`${qt.pill} ${qt.topbarLink} ${w?qt.pillActive:""}`,children:i(`nav.${b.labelKey}`,{defaultValue:b.defaultLabel})},b.to))}):null]}),s.jsx("div",{className:qt.searchWrap,children:s.jsx(bC,{placeholder:i("search.placeholder",{defaultValue:"Search players"}),getClassIcon:_C,maxPerSection:10})}),s.jsxs("div",{className:qt.topbarRight,children:[s.jsxs("a",{className:`${qt.pill} ${qt.gameLinkButton} ${qt.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer","aria-label":i("topbar.officialGameSite",{defaultValue:"Visit the official game website"}),children:[s.jsx(D7,{className:qt.ico}),i("topbar.officialGameSite",{defaultValue:"Visit the official game website"})]}),n?s.jsxs("button",{className:qt.upload,"aria-label":i("topbar.upload",{defaultValue:"Upload scan"}),onClick:g,title:i("topbar.upload",{defaultValue:"Upload scan"}),children:[s.jsx(k9,{className:qt.ico}),s.jsx("span",{className:qt.label,children:i("topbar.upload",{defaultValue:"Upload scan"})})]}):null,s.jsx(oH,{fallbackName:t==null?void 0:t.name})]})]}),a&&c?s.jsx("div",{className:qt.mobileSearchOverlay,role:"presentation",onClick:()=>u(!1),children:s.jsx("div",{className:qt.mobileSearchPanel,onClick:b=>b.stopPropagation(),ref:h,children:s.jsx("div",{className:qt.searchWrap,children:s.jsx(bC,{placeholder:i("search.placeholder",{defaultValue:"Search players"}),getClassIcon:_C,maxPerSection:10})})})}):null]})}const qH="_root_1uloe_3",QH="_expanded_1uloe_45",YH="_drawer_1uloe_49",XH="_headRow_1uloe_75",JH="_headTitle_1uloe_83",ZH="_headDot_1uloe_85",eW="_headLabel_1uloe_87",tW="_pinBtn_1uloe_89",sW="_navScroll_1uloe_103",nW="_pad_1uloe_105",rW="_segCard_1uloe_111",iW="_segTitle_1uloe_143",aW="_connectedCharactersCard_1uloe_161",oW="_connectedCharactersTitle_1uloe_167",lW="_connectedCharactersList_1uloe_181",cW="_characterChip_1uloe_197",dW="_characterChipId_1uloe_237",uW="_characterChipMeta_1uloe_245",hW="_connectedCharactersEmpty_1uloe_253",mW="_connectedCharactersEmptyText_1uloe_307",pW="_connectedCharactersEmptyCta_1uloe_313",gW="_navCol_1uloe_363",fW="_navItemWrap_1uloe_365",vW="_navBtn_1uloe_371",xW="_navBtnActive_1uloe_395",yW="_label_1uloe_399",bW="_trailing_1uloe_429",_W="_isOpen_1uloe_477",wW="_footer_1uloe_503",jW="_login_1uloe_505",SW="_userMeta_1uloe_527",NW="_footerLink_1uloe_541",kW="_footerRow_1uloe_569",CW="_footerRowCell_1uloe_579",TW="_footerRowLink_1uloe_593",IW="_languageSwitch_1uloe_599",EW="_languageSegment_1uloe_625",AW="_languageSegmentEn_1uloe_715",PW="_languageSegmentDe_1uloe_725",RW="_languageSegmentActive_1uloe_737",LW="_languageSegmentInactive_1uloe_755",DW="_legal_1uloe_781",MW="_labelText_1uloe_805",FW="_char_1uloe_197",BW="_mainNavCard_1uloe_883",$W="_mobileTrigger_1uloe_893",OW="_mobileOverlay_1uloe_907",VW="_mobileDrawer_1uloe_929",Nt={root:qH,expanded:QH,drawer:YH,headRow:XH,headTitle:JH,headDot:ZH,headLabel:eW,pinBtn:tW,navScroll:sW,pad:nW,segCard:rW,segTitle:iW,connectedCharactersCard:aW,connectedCharactersTitle:oW,connectedCharactersList:lW,characterChip:cW,characterChipId:dW,characterChipMeta:uW,connectedCharactersEmpty:hW,connectedCharactersEmptyText:mW,connectedCharactersEmptyCta:pW,navCol:gW,navItemWrap:fW,navBtn:vW,navBtnActive:xW,label:yW,trailing:bW,isOpen:_W,footer:wW,login:jW,userMeta:SW,footerLink:NW,footerRow:kW,footerRowCell:CW,footerRowLink:TW,languageSwitch:IW,languageSegment:EW,languageSegmentEn:AW,languageSegmentDe:PW,languageSegmentActive:RW,languageSegmentInactive:LW,legal:DW,labelText:MW,char:FW,mainNavCard:BW,mobileTrigger:$W,mobileOverlay:OW,mobileDrawer:VW},UW="_row_18xz2_3",zW="_rowSplit_18xz2_17",GW="_rowFeatured_18xz2_19",HW="_splitMain_18xz2_67",WW="_splitSide_18xz2_69",KW="_card_18xz2_193",qW="_discordBanner_18xz2_31",QW="_discordBannerText_18xz2_271",YW="_discordBannerLogo_18xz2_283",XW="_discordBannerTitle_18xz2_293",JW="_discordBannerSubtitle_18xz2_307",ZW="_header_18xz2_373",eK="_headerGroup_18xz2_385",tK="_title_18xz2_397",sK="_subtitle_18xz2_399",nK="_empty_18xz2_401",rK="_errorNote_18xz2_403",iK="_linkBtn_18xz2_405",aK="_primaryBtn_18xz2_405",oK="_navBtn_18xz2_405",lK="_closeBtn_18xz2_405",cK="_actionsRight_18xz2_421",dK="_newsList_18xz2_467",uK="_newsCard_18xz2_471",hK="_newsCardWithImage_18xz2_487",mK="_newsBody_18xz2_495",pK="_newsActions_18xz2_497",gK="_newsMeta_18xz2_499",fK="_newsAuthor_18xz2_501",vK="_newsTime_18xz2_503",xK="_newsText_18xz2_505",yK="_newsImage_18xz2_523",bK="_newsSkeleton_18xz2_527",_K="_carouselCtrls_18xz2_565",wK="_carousel_18xz2_565",jK="_slide_18xz2_573",SK="_slideActive_18xz2_575",NK="_slideInactive_18xz2_577",kK="_slideThumb_18xz2_579",CK="_slideFallback_18xz2_581",TK="_slideCaption_18xz2_583",IK="_liveCard_18xz2_589",EK="_liveAvatar_18xz2_591",AK="_liveAvatarFallback_18xz2_593",PK="_liveName_18xz2_595",RK="_liveMeta_18xz2_597",LK="_liveBadge_18xz2_599",DK="_liveViewers_18xz2_601",MK="_modalOverlay_18xz2_607",FK="_modal_18xz2_607",BK="_modalHeader_18xz2_611",$K="_modalTitle_18xz2_613",OK="_modalFilters_18xz2_617",VK="_formRow_18xz2_619",UK="_formRowCheckbox_18xz2_621",zK="_select_18xz2_623",GK="_input_18xz2_623",HK="_tableWrap_18xz2_625",WK="_table_18xz2_625",rt={row:UW,rowSplit:zW,rowFeatured:GW,splitMain:HW,splitSide:WW,card:KW,discordBanner:qW,discordBannerText:QW,discordBannerLogo:YW,discordBannerTitle:XW,discordBannerSubtitle:JW,header:ZW,headerGroup:eK,title:tK,subtitle:sK,empty:nK,errorNote:rK,linkBtn:iK,primaryBtn:aK,navBtn:oK,closeBtn:lK,actionsRight:cK,newsList:dK,newsCard:uK,newsCardWithImage:hK,newsBody:mK,newsActions:pK,newsMeta:gK,newsAuthor:fK,newsTime:vK,newsText:xK,newsImage:yK,newsSkeleton:bK,carouselCtrls:_K,carousel:wK,slide:jK,slideActive:SK,slideInactive:NK,slideThumb:kK,slideFallback:CK,slideCaption:TK,liveCard:IK,liveAvatar:EK,liveAvatarFallback:AK,liveName:PK,liveMeta:RK,liveBadge:LK,liveViewers:DK,modalOverlay:MK,modal:FK,modalHeader:BK,modalTitle:$K,modalFilters:OK,formRow:VK,formRowCheckbox:UK,select:zK,input:GK,tableWrap:HK,table:WK},KK="_panel_90cjk_1",qK="_open_90cjk_31",QK="_col_90cjk_43",YK="_link_90cjk_55",XK="_linkActive_90cjk_73",Lm={panel:KK,open:qK,col:QK,link:YK,linkActive:XK};function JK(t,e=8){const n=t.getBoundingClientRect();return{left:Math.round(n.right+e),top:Math.round(n.top)}}function ZK({anchorEl:t,open:e,items:n,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[o,c]=q.useState({left:0,top:0});return q.useEffect(()=>{if(!e||!t)return;const u=()=>c(JK(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(n!=null&&n.length)&&console.log("submenu items:",n.map(u=>u.label)),YF.createPortal(s.jsx("div",{className:`${Lm.panel} ${e?Lm.open:""}`,style:{left:o.left,top:o.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:s.jsx("div",{className:Lm.col,children:n.map(u=>r(u))})}),document.body))}const eq="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20199'%20role='img'%20aria-label='Discord%20Logo'%3e%3cpath%20fill='%23EAF7FF'%20d='M216.8%2016.6C200.7%209.1%20183.4%203.7%20165.3%200c-2.3%204.2-4.9%209.9-6.7%2014.4-19.7-3-39.3-3-58.6%200-1.8-4.5-4.5-10.2-6.8-14.4-18.8%203.2-36.7%208.8-53.4%2016.6C6.1%2067-.6%20116.2%204%20164.8c22.3%2016.3%2043.9%2026.2%2065.1%2032.7%205.2-7.1%209.8-14.7%2013.5-22.7-7.4-2.8-14.5-6.2-21.3-10.2%201.8-1.3%203.5-2.7%205.2-4.1%2041%2019.2%2085.3%2019.2%20125.8%200%201.7%201.4%203.4%202.8%205.2%204.1-6.8%204-13.9%207.4-21.4%2010.2%203.7%208%208.3%2015.6%2013.5%2022.7%2021.2-6.5%2042.8-16.4%2065.1-32.7%205.5-56.4-9.4-105.1-38.1-148.2zM85.2%20127.3c-12.3%200-22.3-11.3-22.3-25.1%200-13.8%209.8-25.1%2022.3-25.1%2012.5%200%2022.5%2011.3%2022.3%2025.1%200%2013.8-9.8%2025.1-22.3%2025.1zm85.6%200c-12.3%200-22.3-11.3-22.3-25.1%200-13.8%209.8-25.1%2022.3-25.1%2012.5%200%2022.5%2011.3%2022.3%2025.1%200%2013.8-9.8%2025.1-22.3%2025.1z'/%3e%3c/svg%3e",tq=[{code:"en",ariaLabelKey:"sidebar.languageSwitchEn"},{code:"de",ariaLabelKey:"sidebar.languageSwitchDe"}],sq="https://discord.gg/5hXBuyRssK",nq=[{to:"/",labelKey:"nav.home",icon:s.jsx(B7,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",labelKey:"nav.discover",icon:s.jsx(k7,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",labelKey:"nav.dashboard",icon:s.jsx(U7,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",labelKey:"nav.settings",icon:s.jsx(o9,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",labelKey:"nav.guildHub",icon:s.jsx(Sd,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",labelKey:"nav.admin",icon:s.jsx(u9,{className:"ico"}),featureId:"main.admin"},{to:"/playground",labelKey:"nav.playground",icon:s.jsx(Cx,{className:"ico"}),featureId:"main.playground"}],rq=[{to:"/toplists",labelKey:"nav.toplists",icon:s.jsx(S9,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub-v2",labelKey:"nav.guideHub",icon:s.jsx(d7,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",labelKey:"nav.tools",icon:s.jsx(I9,{className:"ico"}),featureId:"main.tools"},{to:"/community",labelKey:"nav.community",icon:s.jsx(K7,{className:"ico"}),featureId:"main.community"},{to:"/scans",labelKey:"nav.scans",icon:s.jsx(R7,{className:"ico"}),featureId:"main.scans"}],iq={"/guild-hub":[{to:"/guild-hub",labelKey:"nav.overview"},{to:"/guild-hub/planner",labelKey:"nav.guildPlanner"},{to:"/guild-hub/fusion-planner",labelKey:"nav.fusionPlanner"},{to:"/guild-hub/compare-guilds",labelKey:"nav.guildCompare"},{to:"/guild-hub/waitlist",labelKey:"nav.waitlist"},{to:"/guild-hub/settings",labelKey:"nav.settings"}],"/discover":[{to:"/players",labelKey:"nav.players"},{to:"/sfmagazine",labelKey:"nav.sfMagazine"},{to:"/sfmagazine/historybook",labelKey:"nav.historyBook"},{to:"/guilds",labelKey:"nav.guilds"},{to:"/servers",labelKey:"nav.servers"},{to:"/scans",labelKey:"nav.scans"},{to:"/discover/favorites",labelKey:"nav.favorites"}],"/admin":[{to:"/admin",labelKey:"nav.overview"},{to:"/admin/errors",labelKey:"nav.errorLog"},{to:"/admin/feedback",labelKey:"nav.feedback"},{to:"/admin/users",labelKey:"nav.users",minRole:"mod"}],"/settings":[{to:"/settings/account",labelKey:"nav.account"}],"/playground":[{to:"/playground/list-views",labelKey:"nav.listViews"},{to:"/playground/rescan-widget",labelKey:"nav.rescanWidget"},{to:"/playground/upload-sim",labelKey:"nav.uploadSimulator"},{to:"/playground/hud/game-buttons",labelKey:"nav.hudGameButtons"}]};function aq(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function oq(t,e){return t?t.filter(n=>aq(e,n.minRole)):[]}const lq=220;function cq(t=lq){const[e,n]=q.useState(!1),r=q.useRef(null),i=q.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=q.useCallback(()=>{i(),n(!0)},[i]),o=q.useCallback(()=>{i(),r.current=window.setTimeout(()=>n(!1),t)},[i,t]);return q.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:o,setOpen:n}}function cj({text:t,isOpen:e,duration:n=1,step:r=45}){const i=q.useMemo(()=>Array.from(t),[t]);return s.jsx("span",{className:Nt.label,children:s.jsx("span",{className:Nt.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${n}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,o)=>s.jsx("span",{className:Nt.char,style:{"--i":o},"aria-hidden":"true",children:a===" "?"":a},`${t}-${o}`))})})}function dq({it:t,label:e,collapsed:n,allowSubmenus:r,subItems:i,onNavigate:a}){const o=i.length>0,{open:c,onEnter:u,onLeave:h,setOpen:m}=cq(),g=q.useRef(null),x=q.useCallback(()=>{if(!r||!o){m(!1);return}u()},[r,o,u,m]);return s.jsxs("div",{ref:g,className:`${Nt.navItemWrap} ${c?Nt.isOpen:""}`,onMouseEnter:x,onMouseLeave:h,children:[s.jsxs(Bs,{to:t.to,end:!!t.end,className:({isActive:b})=>`${Nt.navBtn} ${b?Nt.navBtnActive:""}`,onClick:a,children:[t.icon,s.jsx(cj,{text:e,isOpen:!n}),o&&!n&&s.jsx("span",{className:Nt.trailing,"aria-hidden":"true",children:s.jsx(p7,{className:"ico"})})]}),o&&s.jsx(ZK,{anchorEl:g.current,open:c,items:i.map(({to:b,label:w})=>({to:b,label:w})),renderLink:b=>s.jsx(Bs,{to:b.to,end:!0,className:({isActive:w})=>`${Lm.link} ${w?Lm.linkActive:""}`,onClick:a,children:b.label},b.to),onMouseEnter:u,onMouseLeave:h})]})}function wC({title:t,items:e,collapsed:n,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:o,onNavigate:c}){return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:`${Nt.navTitle} ${Nt.segTitle}`,children:t}),s.jsx("div",{className:Nt.navCol,children:e.map(u=>{if(!o(u))return null;const m=oq(iq[u.to],i).map(x=>({to:x.to,label:a(x.labelKey)})),g=a(u.labelKey);return m.length?s.jsx(dq,{it:u,label:g,collapsed:n,allowSubmenus:r,subItems:m,onNavigate:c},u.to):s.jsxs(Bs,{to:u.to,end:!!u.end,className:({isActive:x})=>`${Nt.navBtn} ${x?Nt.navBtnActive:""}`,onClick:c,children:[u.icon,s.jsx(cj,{text:g,isOpen:!n})]},u.to)})})]})}const uq=90,hq=180;function jC({expanded:t,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:i=!0,variant:a="default",onNavigate:o}){var te;const c=q.useRef(null),u=q.useRef(null),[h,m]=q.useState(!1),g=q.useCallback(()=>{c.current&&(window.clearTimeout(c.current),c.current=null),u.current&&(window.clearTimeout(u.current),u.current=null)},[]),x=q.useCallback(()=>{!i||n||(g(),m(!1),c.current=window.setTimeout(()=>e(!0),uq))},[i,n,g,e]),b=q.useCallback(()=>{!i||n||(g(),u.current=window.setTimeout(()=>{e(!1),m(!1)},hq))},[i,n,g,e]);q.useEffect(()=>()=>g(),[g]),q.useEffect(()=>{n&&m(!0)},[n]);const w=G=>{G.propertyName==="width"&&t&&!n&&m(!0)};q.useEffect(()=>{if(t&&!n){const G=window.setTimeout(()=>m(!0),250);return()=>window.clearTimeout(G)}},[t,n]);const k=!t,A=n||t&&h,L=Wr(),{t:I,i18n:N}=Os(),{status:v,user:_,logout:R}=xa(),j=v==="authenticated",S=(te=_==null?void 0:_.roles)!=null?te:[],C=q.useMemo(()=>{var G;return(G=_==null?void 0:_.linkedPlayers)!=null?G:[]},[_==null?void 0:_.linkedPlayers]),{isVisibleInSidebar:M}=Zx(),T=q.useMemo(()=>{if(!S.length)return!1;const G=S.filter(X=>typeof X=="string").map(X=>X.toLowerCase());return G.includes("admin")||G.includes("developer")||G.includes("dev")||G.includes("moderator")||G.includes("mod")},[S]),[F,D]=q.useState("en");q.useEffect(()=>{var J;if(typeof window=="undefined")return;const G=window.localStorage.getItem("sf_lang"),X=G==="en"||G==="de"?G:(J=N.language)!=null&&J.startsWith("de")?"de":"en";D(X),N.language!==X&&N.changeLanguage(X)},[N]);const V=q.useCallback(G=>{D(G),typeof window!="undefined"&&window.localStorage.setItem("sf_lang",G),N.language!==G&&N.changeLanguage(G)},[N]),U=()=>{j?R():typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):L("/login")},K=(G,X)=>{const J=String(G!=null?G:"").trim();if(!J||J==="-")return;const se=sy(X!=null?X:null,J);se&&(L(`/player/${encodeURIComponent(se)}`),o==null||o())},H=()=>{C.length>0||(L(j?"/settings/account?tab=connected-characters&openHelp=1":"/help#linking"),o==null||o())},z=j?I("sidebar.connectedCharacters.empty",{defaultValue:"No characters linked yet. Link a character in your account to see it here."}):I("sidebar.connectedCharacters.loginPrompt",{defaultValue:"Sign in to see your linked characters."}),Y=j?I("sidebar.connectedCharacters.ctaAuthed",{defaultValue:"Open linked characters guide"}):I("sidebar.connectedCharacters.ctaGuest",{defaultValue:"Open start guide"});return s.jsxs("aside",{id:"sidebar-root",className:`${Nt.root} ${t?Nt.expanded:""} ${a==="drawer"?Nt.drawer:""}`,"data-collapsed":k?"true":"false",onMouseEnter:x,onMouseLeave:b,onTransitionEnd:w,"aria-label":I("sidebar.navigation",{defaultValue:"Navigation"}),children:[s.jsxs("div",{className:Nt.headRow,children:[s.jsxs("div",{className:Nt.headTitle,children:[s.jsx("span",{className:Nt.headDot})," ",s.jsx("span",{className:Nt.headLabel,children:I("sidebar.navigation",{defaultValue:"Navigation"})})]}),s.jsx("button",{className:Nt.pinBtn,"aria-pressed":n,title:n?I("sidebar.unpin",{defaultValue:"Unpin"}):I("sidebar.pin",{defaultValue:"Pin"}),onClick:()=>r(!n),type:"button",children:n?s.jsx(Z7,{className:"ico"}):s.jsx(X7,{className:"ico"})})]}),s.jsx("div",{className:Nt.navScroll,children:s.jsxs("div",{className:Nt.pad,children:[s.jsx("div",{className:`${Nt.segCard} ${Nt.mainNavCard}`,children:s.jsx(wC,{items:nq,collapsed:k,allowSubmenus:A,userRoles:S,translate:I,isItemVisible:G=>{var X;return M((X=G.featureId)!=null?X:G.to)},onNavigate:o})}),s.jsx("div",{className:Nt.segTitle,children:I("sidebar.categories",{defaultValue:"Categories"})}),s.jsx("div",{className:`${Nt.segCard} ${Nt.mainNavCard}`,children:s.jsx(wC,{items:rq,collapsed:k,allowSubmenus:A,userRoles:S,translate:I,isItemVisible:G=>{var X;return M((X=G.featureId)!=null?X:G.to)},onNavigate:o})}),T?s.jsxs("div",{className:`${Nt.segCard} ${Nt.mainNavCard} ${Nt.connectedCharactersCard}`,children:[s.jsx("div",{className:Nt.connectedCharactersTitle,children:I("sidebar.connectedCharacters.title",{defaultValue:"Connected characters"})}),C.length===0?s.jsxs("button",{type:"button",className:Nt.connectedCharactersEmpty,onClick:H,children:[s.jsx("span",{className:Nt.connectedCharactersEmptyText,children:z}),s.jsx("span",{className:Nt.connectedCharactersEmptyCta,children:Y})]}):s.jsx("div",{className:Nt.connectedCharactersList,"data-collapsed":k?"true":"false",children:C.map(G=>{var ue,Ne;const X=[G.server,G.class].filter(Boolean).join(" | "),J=(ue=G.playerId)!=null?ue:"-",se=`${(Ne=G.server)!=null?Ne:"server"}-${J}`;return s.jsxs("button",{type:"button",className:Nt.characterChip,onClick:()=>{var Ee;return K(J,(Ee=G.server)!=null?Ee:null)},children:[s.jsx("span",{className:Nt.characterChipId,children:J}),X&&s.jsx("span",{className:Nt.characterChipMeta,children:X})]},se)})})]}):null,s.jsx("a",{href:sq,className:`${rt.card} ${rt.discordBanner}`,target:"_blank",rel:"noreferrer noopener","aria-label":I("home.discordBanner.aria"),"data-i18n-scope":"home.discordBanner",children:s.jsxs("div",{className:rt.discordBannerText,children:[s.jsx("img",{src:eq,alt:"Discord Logo",className:rt.discordBannerLogo}),s.jsx("h2",{className:rt.discordBannerTitle,"data-i18n":"home.discordBanner.title",children:I("home.discordBanner.title")}),s.jsx("p",{className:rt.discordBannerSubtitle,"data-i18n":"home.discordBanner.subtitle",children:I("home.discordBanner.subtitle")})]})})]})}),s.jsxs("div",{className:`${Nt.footer} ${Nt.segCard} ${Nt.mainNavCard}`,children:[s.jsxs("button",{className:Nt.login,type:"button",onClick:U,children:[s.jsx(Sd,{className:"ico"}),s.jsx(cj,{text:j?I("sidebar.logout",{defaultValue:"Logout"}):I("sidebar.login",{defaultValue:"Login"}),isOpen:!k})]}),j&&(_!=null&&_.displayName)?s.jsx("div",{className:Nt.userMeta,title:_.displayName,children:_.displayName}):null,s.jsxs("div",{className:Nt.footerRow,children:[s.jsx("div",{className:Nt.footerRowCell,children:s.jsx(Bs,{to:"/help",className:`${Nt.footerLink} ${Nt.footerRowLink}`,onClick:o,children:I("nav.help",{defaultValue:"Help"})})}),s.jsx("div",{className:Nt.footerRowCell,children:s.jsx("div",{className:Nt.languageSwitch,role:"group","aria-label":I("sidebar.languagePreference",{defaultValue:"Sidebar language preference"}),children:tq.map(G=>{const X=F===G.code,J=`${Nt.languageSegment} ${G.code==="de"?Nt.languageSegmentDe:Nt.languageSegmentEn} ${X?Nt.languageSegmentActive:Nt.languageSegmentInactive}`;return s.jsx("button",{type:"button",className:J,onClick:()=>V(G.code),"aria-pressed":X,"aria-label":I(G.ariaLabelKey,{defaultValue:G.code==="de"?"Switch language to German":"Switch language to English"})},G.code)})})})]}),s.jsxs("div",{className:Nt.legal,children:["(c) 2025 ",I("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const lv="/assets/logo-sfdatahub-CUdhlsEb.png";function mq({src:t,alt:e="",children:n,to:r="/",loading:i="eager",decoding:a="async"}){const o=t!=null?t:lv;return s.jsxs("div",{className:"logo-dock",children:[s.jsx(Bs,{to:r,"aria-label":"Go to home",children:s.jsx("img",{className:"logo-img",src:o,alt:e,loading:i,decoding:a,onError:c=>{const u=c.currentTarget;u.src!==lv&&(u.src=lv)}})}),n]})}const pq="_wrapper_su530_1",gq="_card_su530_19",fq="_logo_su530_45",vq="_heading_su530_61",xq="_subcopy_su530_73",yq="_buttonStack_su530_83",bq="_providerButton_su530_97",_q="_discord_su530_145",wq="_google_su530_153",jq="_errorMessage_su530_161",Sq="_diagnostics_su530_183",Nq="_diagnosticsBody_su530_195",kq="_disclaimer_su530_215",Cq="_status_su530_227",Tq="_sessionBlock_su530_237",Iq="_logoutButton_su530_251",Eq="_linkButton_su530_281",Aq="_loading_su530_299",Pq="_spinner_su530_315",On={wrapper:pq,card:gq,logo:fq,heading:vq,subcopy:xq,buttonStack:yq,providerButton:bq,discord:_q,google:wq,errorMessage:jq,diagnostics:Sq,diagnosticsBody:Nq,disclaimer:kq,status:Cq,sessionBlock:Tq,logoutButton:Iq,linkButton:Eq,loading:Aq,spinner:Pq},Y4=()=>{var L,I,N,v,_,R;const t=Wr(),{status:e,user:n,loginWithDiscord:r,loginWithGoogle:i,logout:a}=xa(),[o,c]=q.useState(null),u=e==="loading"||e==="idle",h=e==="authenticated"&&!!n,m=q.useCallback(()=>{var S;if(typeof window=="undefined")return!1;try{const C=(S=window.localStorage)==null?void 0:S.getItem("sfh:debug:auth");if(C==="1"||C==="true")return!0}catch(C){console.warn("[Login] Failed to read auth debug flag",C)}return!1},[]),g=q.useCallback((j,S)=>{const C=typeof window!="undefined"?window.location.host:"unknown host";switch(j){case"auth/unauthorized-domain":return`This domain is not authorized for login. Please add "${C}" to your Firebase Auth authorized domains or use the correct environment.`;case"auth/popup-blocked":return"The login popup was blocked. Please allow popups for this site or continue with the redirect flow.";case"auth/popup-closed-by-user":return"The login popup was closed before completing sign-in. Please try again.";default:{const M=j?` (code: ${j})`:"";return`${S||"Login failed. Please try again."}${M}`}}},[]),x=async()=>{if(!u){c(null);try{await r()}catch(j){const S=typeof(j==null?void 0:j.code)=="string"?j.code:void 0,C=typeof(j==null?void 0:j.message)=="string"?j.message:void 0;c({code:S,message:g(S,C)})}}},b=async()=>{if(!u){c(null);try{await i()}catch(j){const S=typeof(j==null?void 0:j.code)=="string"?j.code:void 0,C=typeof(j==null?void 0:j.message)=="string"?j.message:void 0;c({code:S,message:g(S,C)})}}},w=async()=>{await a()},k=()=>{t("/")};let A;return u?A=s.jsxs("div",{className:On.loading,children:[s.jsx("div",{className:On.spinner}),s.jsx("div",{children:"Checking session?"})]}):h&&n?A=s.jsxs("div",{className:On.sessionBlock,children:[s.jsxs("div",{className:On.status,children:["You are logged in as ",n.displayName,"."]}),s.jsx("button",{className:On.logoutButton,type:"button",onClick:w,children:"Logout"}),s.jsx("button",{className:On.linkButton,type:"button",onClick:k,children:"Back to dashboard"})]}):A=s.jsxs("div",{className:On.buttonStack,children:[s.jsx("button",{className:`${On.providerButton} ${On.discord}`,type:"button",onClick:x,children:"Login with Discord"}),s.jsx("button",{className:`${On.providerButton} ${On.google}`,type:"button",onClick:b,children:"Login with Google"}),o&&s.jsx("div",{className:On.errorMessage,children:o.message}),m()&&s.jsxs("details",{className:On.diagnostics,children:[s.jsx("summary",{children:"Auth diagnostics"}),s.jsxs("div",{className:On.diagnosticsBody,children:[s.jsxs("div",{children:["Host: ",typeof window!="undefined"?window.location.host:"N/A"]}),s.jsxs("div",{children:["Origin: ",typeof window!="undefined"?window.location.origin:"N/A"]}),s.jsxs("div",{children:["Firebase projectId: ",(N=(I=(L=Ra.app)==null?void 0:L.options)==null?void 0:I.projectId)!=null?N:"unknown"]}),s.jsxs("div",{children:["Firebase authDomain: ",(R=(_=(v=Ra.app)==null?void 0:v.options)==null?void 0:_.authDomain)!=null?R:"unknown"]})]})]})]}),s.jsx("div",{className:On.wrapper,children:s.jsxs("div",{className:On.card,children:[s.jsx("img",{className:On.logo,src:lv,alt:"SFDataHub logo"}),s.jsx("h1",{className:On.heading,children:"Sign in"}),s.jsx("p",{className:On.subcopy,children:"Choose a method to access SFDataHub."}),A,s.jsx("p",{className:On.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})},Rq="_backdrop_bbe4l_1",Lq="_inner_bbe4l_23",SC={backdrop:Rq,inner:Lq},Dq=({isOpen:t,onClose:e})=>(q.useEffect(()=>{if(!t)return;const n=r=>{r.key==="Escape"&&e()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[t,e]),q.useEffect(()=>{if(!t)return;const n=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=n}},[t]),t?s.jsx("div",{className:SC.backdrop,role:"dialog","aria-modal":"true","aria-label":"Sign in",onMouseDown:n=>{n.target===n.currentTarget&&e()},children:s.jsx("div",{className:SC.inner,children:s.jsx(Y4,{})})}):null),NC="sfh:openLoginModal",Mq=()=>{const{status:t,user:e}=xa(),n=qn(),[r,i]=q.useState(!1);return q.useEffect(()=>{const a=()=>i(!0);return window.addEventListener(NC,a),()=>window.removeEventListener(NC,a)},[]),q.useEffect(()=>{r&&n.pathname==="/login"&&i(!1)},[r,n.pathname]),q.useEffect(()=>{if(!r)return;t==="authenticated"&&!!e&&i(!1)},[r,t,e]),s.jsx(Dq,{isOpen:r,onClose:()=>i(!1)})},Fq={borderColor:"#2B4C73",background:"#1A2F4A"},kC="sfh:authNext",Bq=t=>{if(!t)return null;const e=t.trim();return!e.startsWith("/")||e.startsWith("//")||/^[a-z][a-z0-9+.-]*:/i.test(e)||e.toLowerCase().startsWith("/login")?null:e};function $q(){const[t,e]=P.useState(!1),[n,r]=P.useState(!1),[i,a]=P.useState(()=>typeof window=="undefined"?!1:window.matchMedia("(max-width: 1023px)").matches),[o,c]=P.useState(!1),u=n||t,{t:h}=Os(),{status:m,user:g}=xa(),x=Wr(),b=qn();P.useEffect(()=>{if(m!=="authenticated"||!g)return;const N=()=>{if(typeof window=="undefined"||!window.sessionStorage)return null;try{return window.sessionStorage.getItem(kC)}catch(j){return console.warn("[AuthNext] Failed to read auth next from sessionStorage",j),null}},v=()=>{if(!(typeof window=="undefined"||!window.sessionStorage))try{window.sessionStorage.removeItem(kC)}catch(j){console.warn("[AuthNext] Failed to clear auth next from sessionStorage",j)}},_=Bq(N());if(!_){v();return}v(),`${b.pathname}${b.search||""}`!==_&&x(_,{replace:!0})},[m,g,b.pathname,b.search,x]),P.useEffect(()=>{if(typeof window=="undefined")return;const N=window.matchMedia("(max-width: 1023px)"),v=()=>a(N.matches);return v(),N.addEventListener("change",v),()=>N.removeEventListener("change",v)},[]),P.useEffect(()=>{i||c(!1)},[i]),P.useEffect(()=>{if(!o||typeof window=="undefined")return;const N=v=>{v.key==="Escape"&&c(!1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[o]),P.useEffect(()=>{if(!o||typeof document=="undefined")return;const N=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=N}},[o]);const w=P.useMemo(()=>i?"0px":u?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i,u]),k=h("footer.about.body").split(`

`),A=[],L=h("nav.open",{defaultValue:"Open navigation"}),I=i?"collapsed":u?"expanded":"collapsed";return s.jsxs("div",{id:"app-shell","data-sidebar":I,style:{"--left":w},children:[s.jsx(mq,{src:"/logo.png"}),s.jsx(KH,{}),s.jsx("div",{className:"logo-fill"}),i?!o&&s.jsx("div",{className:`${Nt.headRow} ${Nt.mobileTrigger}`,children:s.jsx("button",{className:Nt.pinBtn,type:"button","aria-label":L,"aria-expanded":o,onClick:()=>c(!0),children:s.jsx(H7,{className:"ico"})})}):s.jsx(jC,{expanded:u,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:!n}),i&&o?s.jsx("div",{className:Nt.mobileOverlay,role:"presentation",onClick:()=>c(!1),children:s.jsx("div",{className:Nt.mobileDrawer,onClick:N=>N.stopPropagation(),children:s.jsx(jC,{expanded:!0,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:!1,variant:"drawer",onNavigate:()=>c(!1)})})}):null,s.jsx("div",{className:"content",children:s.jsx("div",{className:"content-inner",children:s.jsxs("div",{className:"content-body",children:[s.jsx(K5,{}),s.jsx(Mq,{}),s.jsx("div",{className:"mt-4 px-4 md:px-6",children:s.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:Fq,children:[s.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:h("footer.about.title")}),s.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:k.map((N,v)=>s.jsx("p",{className:"whitespace-pre-line",children:N},`footer-about-${v}`))}),s.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[s.jsx("div",{children:h("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),s.jsx("div",{children:h("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:A.map(N=>s.jsx(zs,{to:N.to,className:"underline hover:no-underline",children:N.label},N.key))})]})})]})})})]})}const X4=P.createContext({});function dj(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const uj=P.createContext(null),hj=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Oq(t=!0){const e=P.useContext(uj);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=P.useId();P.useEffect(()=>{t&&i(a)},[t]);const o=P.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const mj=typeof window!="undefined",J4=mj?P.useLayoutEffect:P.useEffect,Ki=t=>t;let Z4=Ki;function pj(t){let e;return()=>(e===void 0&&(e=t()),e)}const wd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},co=t=>t*1e3,uo=t=>t/1e3,Vq={useManualTiming:!1};function Uq(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(u.schedule(h),t()),h(o)}const u={schedule:(h,m=!1,g=!1)=>{const b=g&&r?e:n;return m&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{n.delete(h),a.delete(h)},process:h=>{if(o=h,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(c),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const bf=["read","resolveKeyframes","update","preRender","render","postRender"],zq=40;function eP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=bf.reduce((L,I)=>(L[I]=Uq(a),L),{}),{read:c,resolveKeyframes:u,update:h,preRender:m,render:g,postRender:x}=o,b=()=>{const L=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(L-i.timestamp,zq),1),i.timestamp=L,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),m.process(i),g.process(i),x.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},w=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:bf.reduce((L,I)=>{const N=o[I];return L[I]=(v,_=!1,R=!1)=>(n||w(),N.schedule(v,_,R)),L},{}),cancel:L=>{for(let I=0;I<bf.length;I++)o[bf[I]].cancel(L)},state:i,steps:o}}const{schedule:en,cancel:cl,state:Sr,steps:cb}=eP(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Ki,!0),tP=P.createContext({strict:!1}),CC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ju={};for(const t in CC)Ju[t]={isEnabled:e=>CC[t].some(n=>!!e[n])};function Gq(t){for(const e in t)Ju[e]={...Ju[e],...t[e]}}const Hq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Hq.has(t)}let sP=t=>!Qv(t);function Wq(t){t&&(sP=e=>e.startsWith("on")?!Qv(e):t(e))}try{Wq(require("@emotion/is-prop-valid").default)}catch(t){}function Kq(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(sP(i)||n===!0&&Qv(i)||!e&&!Qv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function qq(t){if(typeof Proxy=="undefined")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const ry=P.createContext({});function hp(t){return typeof t=="string"||Array.isArray(t)}function iy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const gj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fj=["initial",...gj];function ay(t){return iy(t.animate)||fj.some(e=>hp(t[e]))}function nP(t){return!!(ay(t)||t.variants)}function Qq(t,e){if(ay(t)){const{initial:n,animate:r}=t;return{initial:n===!1||hp(n)?n:void 0,animate:hp(r)?r:void 0}}return t.inherit!==!1?e:{}}function Yq(t){const{initial:e,animate:n}=Qq(t,P.useContext(ry));return P.useMemo(()=>({initial:e,animate:n}),[TC(e),TC(n)])}function TC(t){return Array.isArray(t)?t.join(" "):t}const Xq=Symbol.for("motionComponentSymbol");function Tu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Jq(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Tu(n)&&(n.current=r))},[e])}const vj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Zq="framerAppearId",rP="data-"+vj(Zq),{schedule:xj}=eP(queueMicrotask,!1),iP=P.createContext({});function eQ(t,e,n,r,i){var a,o;const{visualElement:c}=P.useContext(ry),u=P.useContext(tP),h=P.useContext(uj),m=P.useContext(hj).reducedMotion,g=P.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const x=g.current,b=P.useContext(iP);x&&!x.projection&&i&&(x.type==="html"||x.type==="svg")&&tQ(g.current,n,i,b);const w=P.useRef(!1);P.useInsertionEffect(()=>{x&&w.current&&x.update(n,h)});const k=n[rP],A=P.useRef(!!k&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,k))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,k)));return J4(()=>{x&&(w.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),xj.render(x.render),A.current&&x.animationState&&x.animationState.animateChanges())}),P.useEffect(()=>{x&&(!A.current&&x.animationState&&x.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)===null||L===void 0||L.call(window,k)}),A.current=!1))}),x}function tQ(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:aP(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Tu(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function aP(t){if(t)return t.options.allowProjection!==!1?t.projection:aP(t.parent)}function sQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,o;t&&Gq(t);function c(h,m){let g;const x={...P.useContext(hj),...h,layoutId:nQ(h)},{isStatic:b}=x,w=Yq(h),k=r(h,b);if(!b&&mj){rQ();const A=iQ(x);g=A.MeasureLayout,w.visualElement=eQ(i,k,x,e,A.ProjectionNode)}return s.jsxs(ry.Provider,{value:w,children:[g&&w.visualElement?s.jsx(g,{visualElement:w.visualElement,...x}):null,n(i,h,Jq(k,w.visualElement,m),k,b,w.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${(o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:""})`}`;const u=P.forwardRef(c);return u[Xq]=i,u}function nQ({layoutId:t}){const e=P.useContext(X4).id;return e&&t!==void 0?e+"-"+t:t}function rQ(t,e){P.useContext(tP).strict}function iQ(t){const{drag:e,layout:n}=Ju;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const aQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yj(t){return typeof t!="string"||t.includes("-")?!1:!!(aQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function IC(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function bj(t,e,n,r){if(typeof e=="function"){const[i,a]=IC(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=IC(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const g_=t=>Array.isArray(t),oQ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lQ=t=>g_(t)?t[t.length-1]||0:t,gr=t=>!!(t&&t.getVelocity);function cv(t){const e=gr(t)?t.get():t;return oQ(e)?e.toValue():e}function cQ({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const o={latestValues:dQ(r,i,a,t),renderState:e()};return n&&(o.onMount=c=>n({props:r,current:c,...o}),o.onUpdate=c=>n(c)),o}const oP=t=>(e,n)=>{const r=P.useContext(ry),i=P.useContext(uj),a=()=>cQ(t,e,r,i);return n?a():dj(a)};function dQ(t,e,n,r){const i={},a=r(t,{});for(const x in a)i[x]=cv(a[x]);let{initial:o,animate:c}=t;const u=ay(t),h=nP(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||o===!1;const g=m?c:o;if(g&&typeof g!="boolean"&&!iy(g)){const x=Array.isArray(g)?g:[g];for(let b=0;b<x.length;b++){const w=bj(t,x[b]);if(w){const{transitionEnd:k,transition:A,...L}=w;for(const I in L){let N=L[I];if(Array.isArray(N)){const v=m?N.length-1:0;N=N[v]}N!==null&&(i[I]=N)}for(const I in k)i[I]=k[I]}}}return i}const fh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Td=new Set(fh),lP=t=>e=>typeof e=="string"&&e.startsWith(t),cP=lP("--"),uQ=lP("var(--"),_j=t=>uQ(t)?hQ.test(t.split("/*")[0].trim()):!1,hQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,dl=(t,e,n)=>n>e?e:n<t?t:n,vh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mp={...vh,transform:t=>dl(0,1,t)},_f={...vh,default:1},zp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zl=zp("deg"),ho=zp("%"),Ut=zp("px"),mQ=zp("vh"),pQ=zp("vw"),EC={...ho,parse:t=>ho.parse(t)/100,transform:t=>ho.transform(t*100)},gQ={borderWidth:Ut,borderTopWidth:Ut,borderRightWidth:Ut,borderBottomWidth:Ut,borderLeftWidth:Ut,borderRadius:Ut,radius:Ut,borderTopLeftRadius:Ut,borderTopRightRadius:Ut,borderBottomRightRadius:Ut,borderBottomLeftRadius:Ut,width:Ut,maxWidth:Ut,height:Ut,maxHeight:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,backgroundPositionX:Ut,backgroundPositionY:Ut},fQ={rotate:zl,rotateX:zl,rotateY:zl,rotateZ:zl,scale:_f,scaleX:_f,scaleY:_f,scaleZ:_f,skew:zl,skewX:zl,skewY:zl,distance:Ut,translateX:Ut,translateY:Ut,translateZ:Ut,x:Ut,y:Ut,z:Ut,perspective:Ut,transformPerspective:Ut,opacity:mp,originX:EC,originY:EC,originZ:Ut},AC={...vh,transform:Math.round},wj={...gQ,...fQ,zIndex:AC,size:Ut,fillOpacity:mp,strokeOpacity:mp,numOctaves:AC},vQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xQ=fh.length;function yQ(t,e,n){let r="",i=!0;for(let a=0;a<xQ;a++){const o=fh[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=dP(c,wj[o]);if(!u){i=!1;const m=vQ[o]||o;r+=`${m}(${h}) `}n&&(e[o]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function jj(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const h=e[u];if(Td.has(u)){o=!0;continue}else if(cP(u)){i[u]=h;continue}else{const m=dP(h,wj[u]);u.startsWith("origin")?(c=!0,a[u]=m):r[u]=m}}if(e.transform||(o||n?r.transform=yQ(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:m=0}=a;r.transformOrigin=`${u} ${h} ${m}`}}const bQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},_Q={offset:"strokeDashoffset",array:"strokeDasharray"};function wQ(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?bQ:_Q;t[a.offset]=Ut.transform(-r);const o=Ut.transform(e),c=Ut.transform(n);t[a.array]=`${o} ${c}`}function PC(t,e,n){return typeof t=="string"?t:Ut.transform(e+n*t)}function jQ(t,e,n){const r=PC(e,t.x,t.width),i=PC(n,t.y,t.height);return`${r} ${i}`}function Sj(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:c=1,pathOffset:u=0,...h},m,g){if(jj(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:b,dimensions:w}=t;x.transform&&(w&&(b.transform=x.transform),delete x.transform),w&&(i!==void 0||a!==void 0||b.transform)&&(b.transformOrigin=jQ(w,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),o!==void 0&&wQ(x,o,c,u,!1)}const Nj=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),uP=()=>({...Nj(),attrs:{}}),kj=t=>typeof t=="string"&&t.toLowerCase()==="svg";function hP(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const mP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pP(t,e,n,r){hP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(mP.has(i)?i:vj(i),e.attrs[i])}const Yv={};function SQ(t){Object.assign(Yv,t)}function gP(t,{layout:e,layoutId:n}){return Td.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yv[t]||t==="opacity")}function Cj(t,e,n){var r;const{style:i}=t,a={};for(const o in i)(gr(i[o])||e.style&&gr(e.style[o])||gP(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function fP(t,e,n){const r=Cj(t,e,n);for(const i in t)if(gr(t[i])||gr(e[i])){const a=fh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function NQ(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(n){e.dimensions={x:0,y:0,width:0,height:0}}}const RC=["x","y","width","height","cx","cy","r"],kQ={useVisualState:oP({scrapeMotionValuesFromProps:fP,createRenderState:uP,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const c in i)if(Td.has(c)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let c=0;c<RC.length;c++){const u=RC[c];t[u]!==e[u]&&(o=!0)}o&&en.read(()=>{NQ(n,r),en.render(()=>{Sj(r,i,kj(n.tagName),t.transformTemplate),pP(n,r)})})}})},CQ={useVisualState:oP({scrapeMotionValuesFromProps:Cj,createRenderState:Nj})};function vP(t,e,n){for(const r in e)!gr(e[r])&&!gP(r,n)&&(t[r]=e[r])}function TQ({transformTemplate:t},e){return P.useMemo(()=>{const n=Nj();return jj(n,e,t),Object.assign({},n.vars,n.style)},[e])}function IQ(t,e){const n=t.style||{},r={};return vP(r,n,t),Object.assign(r,TQ(t,e)),r}function EQ(t,e){const n={},r=IQ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function AQ(t,e,n,r){const i=P.useMemo(()=>{const a=uP();return Sj(a,e,kj(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};vP(a,t.style,t),i.style={...a,...i.style}}return i}function PQ(t=!1){return(n,r,i,{latestValues:a},o)=>{const u=(yj(n)?AQ:EQ)(r,a,o,n),h=Kq(r,typeof n=="string",t),m=n!==P.Fragment?{...h,...u,ref:i}:{},{children:g}=r,x=P.useMemo(()=>gr(g)?g.get():g,[g]);return P.createElement(n,{...m,children:x})}}function RQ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...yj(r)?kQ:CQ,preloadedFeatures:t,useRender:PQ(i),createVisualElement:e,Component:r};return sQ(o)}}function xP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function oy(t,e,n){const r=t.getProps();return bj(r,e,n!==void 0?n:r.custom,t)}const LQ=pj(()=>window.ScrollTimeline!==void 0);class DQ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(LQ()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class yP extends DQ{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Tj(t,e){return t?t[e]||t.default||t:void 0}const Xv=2e4;function Ij(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Xv;)e+=n,r=t.next(e);return e>=Xv?1/0:e}function MQ(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Ij(r),Xv);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:uo(i)}}function ly(t){return typeof t=="function"}function LC(t,e){t.timeline=e,t.onfinish=null}const Ej=t=>Array.isArray(t)&&typeof t[0]=="number",FQ={linearEasing:void 0};function BQ(t,e){const n=pj(t);return()=>{var r;return(r=FQ[e])!==null&&r!==void 0?r:n()}}const Jv=BQ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),bP=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(wd(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function _P(t){return!!(typeof t=="function"&&Jv()||!t||typeof t=="string"&&(t in f_||Jv())||Ej(t)||Array.isArray(t)&&t.every(_P))}const bm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,f_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bm([0,.65,.55,1]),circOut:bm([.55,0,1,.45]),backIn:bm([.31,.01,.66,-.59]),backOut:bm([.33,1.53,.69,.99])};function wP(t,e){if(t)return typeof t=="function"&&Jv()?bP(t,e):Ej(t)?bm(t):Array.isArray(t)?t.map(n=>wP(n,e)||f_.easeOut):f_[t]}const La={x:!1,y:!1};function jP(){return La.x||La.y}function SP(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=n==null?void 0:n[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function NP(t,e){const n=SP(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function DC(t){return e=>{e.pointerType==="touch"||jP()||t(e)}}function $Q(t,e,n={}){const[r,i,a]=NP(t,n),o=DC(c=>{const{target:u}=c,h=e(c);if(typeof h!="function"||!u)return;const m=DC(g=>{h(g),u.removeEventListener("pointerleave",m)});u.addEventListener("pointerleave",m,i)});return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const kP=(t,e)=>e?t===e?!0:kP(t,e.parentElement):!1,Aj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,OQ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VQ(t){return OQ.has(t.tagName)||t.tabIndex!==-1}const _m=new WeakSet;function MC(t){return e=>{e.key==="Enter"&&t(e)}}function db(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const UQ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=MC(()=>{if(_m.has(n))return;db(n,"down");const i=MC(()=>{db(n,"up")}),a=()=>db(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function FC(t){return Aj(t)&&!jP()}function zQ(t,e,n={}){const[r,i,a]=NP(t,n),o=c=>{const u=c.currentTarget;if(!FC(c)||_m.has(u))return;_m.add(u);const h=e(c),m=(b,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),!(!FC(b)||!_m.has(u))&&(_m.delete(u),typeof h=="function"&&h(b,{success:w}))},g=b=>{m(b,n.useGlobalTarget||kP(u,b.target))},x=b=>{m(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",x,i)};return r.forEach(c=>{!VQ(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),c.addEventListener("focus",h=>UQ(h,i),i)}),a}function GQ(t){return t==="x"||t==="y"?La[t]?null:(La[t]=!0,()=>{La[t]=!1}):La.x||La.y?null:(La.x=La.y=!0,()=>{La.x=La.y=!1})}const CP=new Set(["width","height","top","left","right","bottom",...fh]);let dv;function HQ(){dv=void 0}const mo={now:()=>(dv===void 0&&mo.set(Sr.isProcessing||Vq.useManualTiming?Sr.timestamp:performance.now()),dv),set:t=>{dv=t,queueMicrotask(HQ)}};function Pj(t,e){t.indexOf(e)===-1&&t.push(e)}function cy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Rj{constructor(){this.subscriptions=[]}add(e){return Pj(this.subscriptions,e),()=>cy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function TP(t,e){return e?t*(1e3/e):0}const BC=30,WQ=t=>!isNaN(parseFloat(t)),Dm={current:void 0};class KQ{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=mo.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=mo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=WQ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Rj);const r=this.events[e].add(n);return e==="change"?()=>{r(),en.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Dm.current&&Dm.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=mo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>BC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,BC);return TP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zu(t,e){return new KQ(t,e)}function qQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zu(n))}function QQ(t,e){const n=oy(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=lQ(a[o]);qQ(t,o,c)}}function YQ(t){return!!(gr(t)&&t.add)}function v_(t,e){const n=t.getValue("willChange");if(YQ(n))return n.add(e)}function IP(t){return t.props[rP]}const EP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,XQ=1e-7,JQ=12;function ZQ(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=EP(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>XQ&&++c<JQ);return o}function Gp(t,e,n,r){if(t===e&&n===r)return Ki;const i=a=>ZQ(a,0,1,t,n);return a=>a===0||a===1?a:EP(i(a),e,r)}const AP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PP=t=>e=>1-t(1-e),RP=Gp(.33,1.53,.69,.99),Lj=PP(RP),LP=AP(Lj),DP=t=>(t*=2)<1?.5*Lj(t):.5*(2-Math.pow(2,-10*(t-1))),Dj=t=>1-Math.sin(Math.acos(t)),MP=PP(Dj),FP=AP(Dj),BP=t=>/^0[^.\s]+$/u.test(t);function eY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||BP(t):!0}const Mm=t=>Math.round(t*1e5)/1e5,Mj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tY(t){return t==null}const sY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fj=(t,e)=>n=>!!(typeof n=="string"&&sY.test(n)&&n.startsWith(t)||e&&!tY(n)&&Object.prototype.hasOwnProperty.call(n,e)),$P=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Mj);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},nY=t=>dl(0,255,t),ub={...vh,transform:t=>Math.round(nY(t))},nd={test:Fj("rgb","red"),parse:$P("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ub.transform(t)+", "+ub.transform(e)+", "+ub.transform(n)+", "+Mm(mp.transform(r))+")"};function rY(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const x_={test:Fj("#"),parse:rY,transform:nd.transform},Iu={test:Fj("hsl","hue"),parse:$P("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ho.transform(Mm(e))+", "+ho.transform(Mm(n))+", "+Mm(mp.transform(r))+")"},Ur={test:t=>nd.test(t)||x_.test(t)||Iu.test(t),parse:t=>nd.test(t)?nd.parse(t):Iu.test(t)?Iu.parse(t):x_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?nd.transform(t):Iu.transform(t)},iY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aY(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Mj))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(iY))===null||n===void 0?void 0:n.length)||0)>0}const OP="number",VP="color",oY="var",lY="var(",$C="${}",cY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(cY,u=>(Ur.test(u)?(r.color.push(a),i.push(VP),n.push(Ur.parse(u))):u.startsWith(lY)?(r.var.push(a),i.push(oY),n.push(u)):(r.number.push(a),i.push(OP),n.push(parseFloat(u))),++a,$C)).split($C);return{values:n,split:c,indexes:r,types:i}}function UP(t){return pp(t).values}function zP(t){const{split:e,types:n}=pp(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===OP?a+=Mm(i[o]):c===VP?a+=Ur.transform(i[o]):a+=i[o]}return a}}const dY=t=>typeof t=="number"?0:t;function uY(t){const e=UP(t);return zP(t)(e.map(dY))}const pc={test:aY,parse:UP,createTransformer:zP,getAnimatableNone:uY},hY=new Set(["brightness","contrast","saturate","opacity"]);function mY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Mj)||[];if(!r)return t;const i=n.replace(r,"");let a=hY.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const pY=/\b([a-z-]*)\(.*?\)/gu,y_={...pc,getAnimatableNone:t=>{const e=t.match(pY);return e?e.map(mY).join(" "):t}},gY={...wj,color:Ur,backgroundColor:Ur,outlineColor:Ur,fill:Ur,stroke:Ur,borderColor:Ur,borderTopColor:Ur,borderRightColor:Ur,borderBottomColor:Ur,borderLeftColor:Ur,filter:y_,WebkitFilter:y_},Bj=t=>gY[t];function GP(t,e){let n=Bj(t);return n!==y_&&(n=pc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fY=new Set(["auto","none","0"]);function vY(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!fY.has(a)&&pp(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=GP(n,i)}const OC=t=>t===vh||t===Ut,VC=(t,e)=>parseFloat(t.split(", ")[e]),UC=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return VC(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?VC(a[1],t):0}},xY=new Set(["x","y","z"]),yY=fh.filter(t=>!xY.has(t));function bY(t){const e=[];return yY.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const eh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:UC(4,13),y:UC(5,14)};eh.translateX=eh.x;eh.translateY=eh.y;const dd=new Set;let b_=!1,__=!1;function HP(){if(__){const t=Array.from(dd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=bY(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}__=!1,b_=!1,dd.forEach(t=>t.complete()),dd.clear()}function WP(){dd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(__=!0)})}function _Y(){WP(),HP()}class $j{constructor(e,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(dd.add(this),b_||(b_=!0,en.read(WP),en.resolveKeyframes(HP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),dd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,dd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const KP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),wY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jY(t){const e=wY.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n!=null?n:r}`,i]}function qP(t,e,n=1){const[r,i]=jY(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return KP(o)?parseFloat(o):o}return _j(i)?qP(i,e,n+1):i}const QP=t=>e=>e.test(t),SY={test:t=>t==="auto",parse:t=>t},YP=[vh,Ut,ho,zl,pQ,mQ,SY],zC=t=>YP.find(QP(t));class XP extends $j{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),_j(h))){const m=qP(h,n.current);m!==void 0&&(e[u]=m),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!CP.has(r)||e.length!==2)return;const[i,a]=e,o=zC(i),c=zC(a);if(o!==c)if(OC(o)&&OC(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)eY(e[i])&&r.push(i);r.length&&vY(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=eh[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=eh[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{n.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const GC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pc.test(t)||t==="0")&&!t.startsWith("url("));function NY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function kY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=GC(i,e),c=GC(a,e);return!o||!c?!1:NY(t)||(n==="spring"||ly(n))&&r}const CY=t=>t!==null;function dy(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(CY),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const TY=40;class JP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=mo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>TY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&_Y(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=mo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:c,onUpdate:u,isGenerator:h}=this.options;if(!h&&!kY(e,r,i,a))if(o)this.options.duration=0;else{u&&u(dy(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const un=(t,e,n)=>t+(e-t)*n;function hb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IY({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=hb(u,c,t+1/3),a=hb(u,c,t),o=hb(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Zv(t,e){return n=>n>0?e:t}const mb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},EY=[x_,nd,Iu],AY=t=>EY.find(e=>e.test(t));function HC(t){const e=AY(t);if(!e)return!1;let n=e.parse(t);return e===Iu&&(n=IY(n)),n}const WC=(t,e)=>{const n=HC(t),r=HC(e);if(!n||!r)return Zv(t,e);const i={...n};return a=>(i.red=mb(n.red,r.red,a),i.green=mb(n.green,r.green,a),i.blue=mb(n.blue,r.blue,a),i.alpha=un(n.alpha,r.alpha,a),nd.transform(i))},PY=(t,e)=>n=>e(t(n)),Hp=(...t)=>t.reduce(PY),w_=new Set(["none","hidden"]);function RY(t,e){return w_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function LY(t,e){return n=>un(t,e,n)}function Oj(t){return typeof t=="number"?LY:typeof t=="string"?_j(t)?Zv:Ur.test(t)?WC:FY:Array.isArray(t)?ZP:typeof t=="object"?Ur.test(t)?WC:DY:Zv}function ZP(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>Oj(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function DY(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Oj(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function MY(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][i[o]],u=(n=t.values[c])!==null&&n!==void 0?n:0;r[a]=u,i[o]++}return r}const FY=(t,e)=>{const n=pc.createTransformer(e),r=pp(t),i=pp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?w_.has(t)&&!i.values.length||w_.has(e)&&!r.values.length?RY(t,e):Hp(ZP(MY(r,i),i.values),n):Zv(t,e)};function eR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?un(t,e,n):Oj(t)(t,e)}const BY=5;function tR(t,e,n){const r=Math.max(e-BY,0);return TP(n-t(r),e-r)}const kn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pb=.001;function $Y({duration:t=kn.duration,bounce:e=kn.bounce,velocity:n=kn.velocity,mass:r=kn.mass}){let i,a,o=1-e;o=dl(kn.minDamping,kn.maxDamping,o),t=dl(kn.minDuration,kn.maxDuration,uo(t)),o<1?(i=h=>{const m=h*o,g=m*t,x=m-n,b=j_(h,o),w=Math.exp(-g);return pb-x/b*w},a=h=>{const g=h*o*t,x=g*n+n,b=Math.pow(o,2)*Math.pow(h,2)*t,w=Math.exp(-g),k=j_(Math.pow(h,2),o);return(-i(h)+pb>0?-1:1)*((x-b)*w)/k}):(i=h=>{const m=Math.exp(-h*t),g=(h-n)*t+1;return-pb+m*g},a=h=>{const m=Math.exp(-h*t),g=(n-h)*(t*t);return m*g});const c=5/t,u=VY(i,a,c);if(t=co(t),isNaN(u))return{stiffness:kn.stiffness,damping:kn.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const OY=12;function VY(t,e,n){let r=n;for(let i=1;i<OY;i++)r=r-t(r)/e(r);return r}function j_(t,e){return t*Math.sqrt(1-e*e)}const UY=["duration","bounce"],zY=["stiffness","damping","mass"];function KC(t,e){return e.some(n=>t[n]!==void 0)}function GY(t){let e={velocity:kn.velocity,stiffness:kn.stiffness,damping:kn.damping,mass:kn.mass,isResolvedFromDuration:!1,...t};if(!KC(t,zY)&&KC(t,UY))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*dl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:kn.mass,stiffness:i,damping:a}}else{const n=$Y(t);e={...e,...n,mass:kn.mass},e.isResolvedFromDuration=!0}return e}function Vj(t=kn.visualDuration,e=kn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:h,mass:m,duration:g,velocity:x,isResolvedFromDuration:b}=GY({...n,velocity:-uo(n.velocity||0)}),w=x||0,k=h/(2*Math.sqrt(u*m)),A=o-a,L=uo(Math.sqrt(u/m)),I=Math.abs(A)<5;r||(r=I?kn.restSpeed.granular:kn.restSpeed.default),i||(i=I?kn.restDelta.granular:kn.restDelta.default);let N;if(k<1){const _=j_(L,k);N=R=>{const j=Math.exp(-k*L*R);return o-j*((w+k*L*A)/_*Math.sin(_*R)+A*Math.cos(_*R))}}else if(k===1)N=_=>o-Math.exp(-L*_)*(A+(w+L*A)*_);else{const _=L*Math.sqrt(k*k-1);N=R=>{const j=Math.exp(-k*L*R),S=Math.min(_*R,300);return o-j*((w+k*L*A)*Math.sinh(S)+_*A*Math.cosh(S))/_}}const v={calculatedDuration:b&&g||null,next:_=>{const R=N(_);if(b)c.done=_>=g;else{let j=0;k<1&&(j=_===0?co(w):tR(N,_,R));const S=Math.abs(j)<=r,C=Math.abs(o-R)<=i;c.done=S&&C}return c.value=c.done?o:R,c},toString:()=>{const _=Math.min(Ij(v),Xv),R=bP(j=>v.next(_*j).value,_,30);return _+"ms "+R}};return v}function qC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:m}){const g=t[0],x={done:!1,value:g},b=S=>c!==void 0&&S<c||u!==void 0&&S>u,w=S=>c===void 0?u:u===void 0||Math.abs(c-S)<Math.abs(u-S)?c:u;let k=n*e;const A=g+k,L=o===void 0?A:o(A);L!==A&&(k=L-g);const I=S=>-k*Math.exp(-S/r),N=S=>L+I(S),v=S=>{const C=I(S),M=N(S);x.done=Math.abs(C)<=h,x.value=x.done?L:M};let _,R;const j=S=>{b(x.value)&&(_=S,R=Vj({keyframes:[x.value,w(x.value)],velocity:tR(N,S,x.value),damping:i,stiffness:a,restDelta:h,restSpeed:m}))};return j(0),{calculatedDuration:null,next:S=>{let C=!1;return!R&&_===void 0&&(C=!0,v(S),j(S)),_!==void 0&&S>=_?R.next(S-_):(!C&&v(S),x)}}}const HY=Gp(.42,0,1,1),WY=Gp(0,0,.58,1),sR=Gp(.42,0,.58,1),nR=t=>Array.isArray(t)&&typeof t[0]!="number",KY={linear:Ki,easeIn:HY,easeInOut:sR,easeOut:WY,circIn:Dj,circInOut:FP,circOut:MP,backIn:Lj,backInOut:LP,backOut:RP,anticipate:DP},QC=t=>{if(Ej(t)){Z4(t.length===4);const[e,n,r,i]=t;return Gp(e,n,r,i)}else if(typeof t=="string")return KY[t];return t};function qY(t,e,n){const r=[],i=n||eR,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ki:e;c=Hp(u,c)}r.push(c)}return r}function rR(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(Z4(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=qY(e,r,i),u=c.length,h=m=>{if(o&&m<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const x=wd(t[g],t[g+1],m);return c[g](x)};return n?m=>h(dl(t[0],t[a-1],m)):h}function iR(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=wd(0,e,r);t.push(un(n,1,i))}}function aR(t){const e=[0];return iR(e,t.length-1),e}function QY(t,e){return t.map(n=>n*e)}function YY(t,e){return t.map(()=>e||sR).splice(0,t.length-1)}function ex({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=nR(r)?r.map(QC):QC(r),a={done:!1,value:e[0]},o=QY(n&&n.length===e.length?n:aR(e),t),c=rR(o,e,{ease:Array.isArray(i)?i:YY(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const XY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>en.update(e,!0),stop:()=>cl(e),now:()=>Sr.isProcessing?Sr.timestamp:mo.now()}},JY={decay:qC,inertia:qC,tween:ex,keyframes:ex,spring:Vj},ZY=t=>t/100;class Uj extends JP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||$j,c=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new o(a,c,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,c=ly(n)?n:JY[n]||ex;let u,h;c!==ex&&typeof e[0]!="number"&&(u=Hp(ZY,eR(e[0],e[1])),e=[0,100]);const m=c({...this.options,keyframes:e});a==="mirror"&&(h=c({...this.options,keyframes:[...e].reverse(),velocity:-o})),m.calculatedDuration===null&&(m.calculatedDuration=Ij(m));const{calculatedDuration:g}=m,x=g+i,b=x*(r+1)-i;return{generator:m,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:x,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:h,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:x,repeat:b,repeatType:w,repeatDelay:k,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const L=this.currentTime-x*(this.speed>=0?1:-1),I=this.speed>=0?L<0:L>m;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let N=this.currentTime,v=a;if(b){const S=Math.min(this.currentTime,m)/g;let C=Math.floor(S),M=S%1;!M&&S>=1&&(M=1),M===1&&C--,C=Math.min(C,b+1),!!(C%2)&&(w==="reverse"?(M=1-M,k&&(M-=k/g)):w==="mirror"&&(v=o)),N=dl(0,1,M)*g}const _=I?{done:!1,value:u[0]}:v.next(N);c&&(_.value=c(_.value));let{done:R}=_;!I&&h!==null&&(R=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return j&&i!==void 0&&(_.value=dy(u,this.options,i)),A&&A(_.value),j&&this.finish(),_}get duration(){const{resolved:e}=this;return e?uo(e.calculatedDuration):0}get time(){return uo(this.currentTime)}set time(e){e=co(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=uo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=XY,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const eX=new Set(["opacity","clipPath","filter","transform"]);function tX(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeInOut",times:u}={}){const h={[e]:n};u&&(h.offset=u);const m=wP(c,i);return Array.isArray(m)&&(h.easing=m),t.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const sX=pj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tx=10,nX=2e4;function rX(t){return ly(t.type)||t.type==="spring"||!_P(t.ease)}function iX(t,e){const n=new Uj({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<nX;)r=n.sample(a),i.push(r.value),a+=tx;return{times:void 0,keyframes:i,duration:a-tx,ease:"linear"}}const oR={anticipate:DP,backInOut:LP,circInOut:FP};function aX(t){return t in oR}class YC extends JP{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new XP(a,(o,c)=>this.onKeyframesResolved(o,c),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:o,motionValue:c,name:u,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&Jv()&&aX(a)&&(a=oR[a]),rX(this.options)){const{onComplete:g,onUpdate:x,motionValue:b,element:w,...k}=this.options,A=iX(e,k);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,i=A.times,a=A.ease,o="keyframes"}const m=tX(c.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return m.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?(LC(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;c.set(dy(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return uo(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return uo(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=co(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ki;const{animation:r}=n;LC(r,e)}return Ki}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:o,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:m,onComplete:g,element:x,...b}=this.options,w=new Uj({...b,keyframes:r,duration:i,type:a,ease:o,times:c,isGenerator:!0}),k=co(this.time);h.setWithVelocity(w.sample(k-tx).value,w.sample(k).value,tx)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:o,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=n.owner.getProps();return sX()&&r&&eX.has(r)&&!u&&!h&&!i&&a!=="mirror"&&o!==0&&c!=="inertia"}}const oX={type:"spring",stiffness:500,damping:25,restSpeed:10},lX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cX={type:"keyframes",duration:.8},dX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uX=(t,{keyframes:e})=>e.length>2?cX:Td.has(t)?t.startsWith("scale")?lX(e[1]):oX:dX;function hX({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const zj=(t,e,n,r={},i,a)=>o=>{const c=Tj(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-co(u);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};hX(c)||(m={...m,...uX(t,m)}),m.duration&&(m.duration=co(m.duration)),m.repeatDelay&&(m.repeatDelay=co(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const x=dy(m.keyframes,c);if(x!==void 0)return en.update(()=>{m.onUpdate(x),m.onComplete()}),new yP([])}return!a&&YC.supports(m)?new YC(m):new Uj(m)};function mX({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Gj(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(o=r);const h=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const x=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),b=u[g];if(b===void 0||m&&mX(m,g))continue;const w={delay:n,...Tj(o||{},g)};let k=!1;if(window.MotionHandoffAnimation){const L=IP(t);if(L){const I=window.MotionHandoffAnimation(L,g,en);I!==null&&(w.startTime=I,k=!0)}}v_(t,g),x.start(zj(g,x,b,t.shouldReduceMotion&&CP.has(g)?{type:!1}:w,t,k));const A=x.animation;A&&h.push(A)}return c&&Promise.all(h).then(()=>{en.update(()=>{c&&QQ(t,c)})}),h}function S_(t,e,n={}){var r;const i=oy(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(Gj(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:x}=a;return pX(t,e,m+h,g,x,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,m]=u==="beforeChildren"?[o,c]:[c,o];return h().then(()=>m())}else return Promise.all([o(),c(n.delay)])}function pX(t,e,n=0,r=0,i=1,a){const o=[],c=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(t.variantChildren).sort(gX).forEach((h,m)=>{h.notify("AnimationStart",e),o.push(S_(h,e,{...a,delay:n+u(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function gX(t,e){return t.sortNodePosition(e)}function fX(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>S_(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=S_(t,e,n);else{const i=typeof e=="function"?oy(t,e,n.custom):e;r=Promise.all(Gj(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const vX=fj.length;function lR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<vX;n++){const r=fj[n],i=t.props[r];(hp(i)||i===!1)&&(e[r]=i)}return e}const xX=[...gj].reverse(),yX=gj.length;function bX(t){return e=>Promise.all(e.map(({animation:n,options:r})=>fX(t,n,r)))}function _X(t){let e=bX(t),n=XC(),r=!0;const i=u=>(h,m)=>{var g;const x=oy(t,m,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(x){const{transition:b,transitionEnd:w,...k}=x;h={...h,...k,...w}}return h};function a(u){e=u(t)}function o(u){const{props:h}=t,m=lR(t.parent)||{},g=[],x=new Set;let b={},w=1/0;for(let A=0;A<yX;A++){const L=xX[A],I=n[L],N=h[L]!==void 0?h[L]:m[L],v=hp(N),_=L===u?I.isActive:null;_===!1&&(w=A);let R=N===m[L]&&N!==h[L]&&v;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),I.protectedKeys={...b},!I.isActive&&_===null||!N&&!I.prevProp||iy(N)||typeof N=="boolean")continue;const j=wX(I.prevProp,N);let S=j||L===u&&I.isActive&&!R&&v||A>w&&v,C=!1;const M=Array.isArray(N)?N:[N];let T=M.reduce(i(L),{});_===!1&&(T={});const{prevResolvedValues:F={}}=I,D={...F,...T},V=H=>{S=!0,x.has(H)&&(C=!0,x.delete(H)),I.needsAnimating[H]=!0;const z=t.getValue(H);z&&(z.liveStyle=!1)};for(const H in D){const z=T[H],Y=F[H];if(b.hasOwnProperty(H))continue;let te=!1;g_(z)&&g_(Y)?te=!xP(z,Y):te=z!==Y,te?z!=null?V(H):x.add(H):z!==void 0&&x.has(H)?V(H):I.protectedKeys[H]=!0}I.prevProp=N,I.prevResolvedValues=T,I.isActive&&(b={...b,...T}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(R&&j)||C)&&g.push(...M.map(H=>({animation:H,options:{type:L}})))}if(x.size){const A={};x.forEach(L=>{const I=t.getBaseTarget(L),N=t.getValue(L);N&&(N.liveStyle=!0),A[L]=I!=null?I:null}),g.push({animation:A})}let k=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(g):Promise.resolve()}function c(u,h){var m;if(n[u].isActive===h)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(x=>{var b;return(b=x.animationState)===null||b===void 0?void 0:b.setActive(u,h)}),n[u].isActive=h;const g=o(u);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=XC(),r=!0}}}function wX(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xP(e,t):!1}function $c(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XC(){return{animate:$c(!0),whileInView:$c(),whileHover:$c(),whileTap:$c(),whileDrag:$c(),whileFocus:$c(),exit:$c()}}class vc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class jX extends vc{constructor(e){super(e),e.animationState||(e.animationState=_X(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();iy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let SX=0;class NX extends vc{constructor(){super(...arguments),this.id=SX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const kX={animation:{Feature:jX},exit:{Feature:NX}};function gp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wp(t){return{point:{x:t.pageX,y:t.pageY}}}const CX=t=>e=>Aj(e)&&t(e,Wp(e));function Fm(t,e,n,r){return gp(t,e,CX(n),r)}const JC=(t,e)=>Math.abs(t-e);function TX(t,e){const n=JC(t.x,e.x),r=JC(t.y,e.y);return Math.sqrt(n**2+r**2)}class cR{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=fb(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=TX(g.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:w}=g,{timestamp:k}=Sr;this.history.push({...w,timestamp:k});const{onStart:A,onMove:L}=this.handlers;x||(A&&A(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=gb(x,this.transformPagePoint),en.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=fb(g.type==="pointercancel"?this.lastMoveEventInfo:gb(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,A),w&&w(g,A)},!Aj(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Wp(e),c=gb(o,this.transformPagePoint),{point:u}=c,{timestamp:h}=Sr;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,fb(c,this.history)),this.removeListeners=Hp(Fm(this.contextWindow,"pointermove",this.handlePointerMove),Fm(this.contextWindow,"pointerup",this.handlePointerUp),Fm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cl(this.updatePoint)}}function gb(t,e){return e?{point:e(t.point)}:t}function ZC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fb({point:t},e){return{point:t,delta:ZC(t,dR(e)),offset:ZC(t,IX(e)),velocity:EX(e,.1)}}function IX(t){return t[0]}function dR(t){return t[t.length-1]}function EX(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=dR(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>co(e)));)n--;if(!r)return{x:0,y:0};const a=uo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const uR=1e-4,AX=1-uR,PX=1+uR,hR=.01,RX=0-hR,LX=0+hR;function Qi(t){return t.max-t.min}function DX(t,e,n){return Math.abs(t-e)<=n}function eT(t,e,n,r=.5){t.origin=r,t.originPoint=un(e.min,e.max,t.origin),t.scale=Qi(n)/Qi(e),t.translate=un(n.min,n.max,t.origin)-t.originPoint,(t.scale>=AX&&t.scale<=PX||isNaN(t.scale))&&(t.scale=1),(t.translate>=RX&&t.translate<=LX||isNaN(t.translate))&&(t.translate=0)}function Bm(t,e,n,r){eT(t.x,e.x,n.x,r?r.originX:void 0),eT(t.y,e.y,n.y,r?r.originY:void 0)}function tT(t,e,n){t.min=n.min+e.min,t.max=t.min+Qi(e)}function MX(t,e,n){tT(t.x,e.x,n.x),tT(t.y,e.y,n.y)}function sT(t,e,n){t.min=e.min-n.min,t.max=t.min+Qi(e)}function $m(t,e,n){sT(t.x,e.x,n.x),sT(t.y,e.y,n.y)}function FX(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?un(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?un(n,t,r.max):Math.min(t,n)),t}function nT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function BX(t,{top:e,left:n,bottom:r,right:i}){return{x:nT(t.x,n,i),y:nT(t.y,e,r)}}function rT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $X(t,e){return{x:rT(t.x,e.x),y:rT(t.y,e.y)}}function OX(t,e){let n=.5;const r=Qi(t),i=Qi(e);return i>r?n=wd(e.min,e.max-r,t.min):r>i&&(n=wd(t.min,t.max-i,e.min)),dl(0,1,n)}function VX(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const N_=.35;function UX(t=N_){return t===!1?t=0:t===!0&&(t=N_),{x:iT(t,"left","right"),y:iT(t,"top","bottom")}}function iT(t,e,n){return{min:aT(t,e),max:aT(t,n)}}function aT(t,e){return typeof t=="number"?t:t[e]||0}const oT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Eu=()=>({x:oT(),y:oT()}),lT=()=>({min:0,max:0}),Sn=()=>({x:lT(),y:lT()});function ha(t){return[t("x"),t("y")]}function mR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zX({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function GX(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vb(t){return t===void 0||t===1}function k_({scale:t,scaleX:e,scaleY:n}){return!vb(t)||!vb(e)||!vb(n)}function Xc(t){return k_(t)||pR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function pR(t){return cT(t.x)||cT(t.y)}function cT(t){return t&&t!=="0%"}function sx(t,e,n){const r=t-n,i=e*r;return n+i}function dT(t,e,n,r,i){return i!==void 0&&(t=sx(t,i,r)),sx(t,n,r)+e}function C_(t,e=0,n=1,r,i){t.min=dT(t.min,e,n,r,i),t.max=dT(t.max,e,n,r,i)}function gR(t,{x:e,y:n}){C_(t.x,e.translate,e.scale,e.originPoint),C_(t.y,n.translate,n.scale,n.originPoint)}const uT=.999999999999,hT=1.0000000000001;function HX(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Pu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,gR(t,o)),r&&Xc(a.latestValues)&&Pu(t,a.latestValues))}e.x<hT&&e.x>uT&&(e.x=1),e.y<hT&&e.y>uT&&(e.y=1)}function Au(t,e){t.min=t.min+e,t.max=t.max+e}function mT(t,e,n,r,i=.5){const a=un(t.min,t.max,i);C_(t,e,n,a,r)}function Pu(t,e){mT(t.x,e.x,e.scaleX,e.scale,e.originX),mT(t.y,e.y,e.scaleY,e.scale,e.originY)}function fR(t,e){return mR(GX(t.getBoundingClientRect(),e))}function WX(t,e,n){const r=fR(t,n),{scroll:i}=e;return i&&(Au(r.x,i.offset.x),Au(r.y,i.offset.y)),r}const vR=({current:t})=>t?t.ownerDocument.defaultView:null,KX=new WeakMap;class qX{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Sn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wp(m).point)},a=(m,g)=>{const{drag:x,dragPropagation:b,onDragStart:w}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=GQ(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ha(A=>{let L=this.getAxisMotionValue(A).get()||0;if(ho.test(L)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[A];N&&(L=Qi(N)*(parseFloat(L)/100))}}this.originPoint[A]=L}),w&&en.postRender(()=>w(m,g)),v_(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},o=(m,g)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:w,onDrag:k}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:A}=g;if(b&&this.currentDirection===null){this.currentDirection=QX(A),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,A),this.updateAxis("y",g.point,A),this.visualElement.render(),k&&k(m,g)},c=(m,g)=>this.stop(m,g),u=()=>ha(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new cR(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:vR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&en.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wf(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=FX(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Tu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=BX(i.layoutBox,n):this.constraints=!1,this.elastic=UX(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ha(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=VX(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Tu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=WX(r,i.root,this.visualElement.getTransformPagePoint());let o=$X(i.layout.layoutBox,a);if(n){const c=n(zX(o));this.hasMutatedConstraints=!!c,c&&(o=mR(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=ha(m=>{if(!wf(m,n,this.currentDirection))return;let g=u&&u[m]||{};o&&(g={min:0,max:0});const x=i?200:1e6,b=i?40:1e7,w={type:"inertia",velocity:r?e[m]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,w)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return v_(this.visualElement,e),r.start(zj(e,r,0,n,this.visualElement,!1))}stopAnimation(){ha(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ha(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ha(n=>{const{drag:r}=this.getProps();if(!wf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-un(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Tu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ha(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=OX({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ha(o=>{if(!wf(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(un(u,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;KX.set(this.visualElement,this);const e=this.visualElement.current,n=Fm(e,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Tu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),en.read(r);const o=gp(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ha(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=N_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function wf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function QX(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class YX extends vc{constructor(e){super(e),this.removeGroupControls=Ki,this.removeListeners=Ki,this.controls=new qX(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const pT=t=>(e,n)=>{t&&en.postRender(()=>t(e,n))};class XX extends vc{constructor(){super(...arguments),this.removePointerDownListener=Ki}onPointerDown(e){this.session=new cR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pT(e),onStart:pT(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&en.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Fm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ut.test(t))t=parseFloat(t);else return t;const n=gT(t,e.target.x),r=gT(t,e.target.y);return`${n}% ${r}%`}},JX={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=pc.parse(t);if(i.length>5)return r;const a=pc.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const h=un(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}};class ZX extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;SQ(eJ),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),uv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||en.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xR(t){const[e,n]=Oq(),r=P.useContext(X4);return s.jsx(ZX,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(iP),isPresent:e,safeToRemove:n})}const eJ={borderRadius:{...sm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sm,borderTopRightRadius:sm,borderBottomLeftRadius:sm,borderBottomRightRadius:sm,boxShadow:JX};function yR(t,e,n){const r=gr(t)?t:Zu(t);return r.start(zj("",r,e,n)),r.animation}function bR(t){return t instanceof SVGElement&&t.tagName!=="svg"}const tJ=(t,e)=>t.depth-e.depth;class sJ{constructor(){this.children=[],this.isDirty=!1}add(e){Pj(this.children,e),this.isDirty=!0}remove(e){cy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tJ),this.isDirty=!1,this.children.forEach(e)}}function nJ(t,e){const n=mo.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(cl(r),t(a-e))};return en.read(r,!0),()=>cl(r)}const _R=["TopLeft","TopRight","BottomLeft","BottomRight"],rJ=_R.length,fT=t=>typeof t=="string"?parseFloat(t):t,vT=t=>typeof t=="number"||Ut.test(t);function iJ(t,e,n,r,i,a){i?(t.opacity=un(0,n.opacity!==void 0?n.opacity:1,aJ(r)),t.opacityExit=un(e.opacity!==void 0?e.opacity:1,0,oJ(r))):a&&(t.opacity=un(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<rJ;o++){const c=`border${_R[o]}Radius`;let u=xT(e,c),h=xT(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||vT(u)===vT(h)?(t[c]=Math.max(un(fT(u),fT(h),r),0),(ho.test(h)||ho.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=un(e.rotate||0,n.rotate||0,r))}function xT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aJ=wR(0,.5,MP),oJ=wR(.5,.95,Ki);function wR(t,e,n){return r=>r<t?0:r>e?1:n(wd(t,e,r))}function yT(t,e){t.min=e.min,t.max=e.max}function da(t,e){yT(t.x,e.x),yT(t.y,e.y)}function bT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _T(t,e,n,r,i){return t-=e,t=sx(t,1/n,r),i!==void 0&&(t=sx(t,1/i,r)),t}function lJ(t,e=0,n=1,r=.5,i,a=t,o=t){if(ho.test(e)&&(e=parseFloat(e),e=un(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=un(a.min,a.max,r);t===a&&(c-=e),t.min=_T(t.min,e,n,c,i),t.max=_T(t.max,e,n,c,i)}function wT(t,e,[n,r,i],a,o){lJ(t,e[n],e[r],e[i],e.scale,a,o)}const cJ=["x","scaleX","originX"],dJ=["y","scaleY","originY"];function jT(t,e,n,r){wT(t.x,e,cJ,n?n.x:void 0,r?r.x:void 0),wT(t.y,e,dJ,n?n.y:void 0,r?r.y:void 0)}function ST(t){return t.translate===0&&t.scale===1}function jR(t){return ST(t.x)&&ST(t.y)}function NT(t,e){return t.min===e.min&&t.max===e.max}function uJ(t,e){return NT(t.x,e.x)&&NT(t.y,e.y)}function kT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function SR(t,e){return kT(t.x,e.x)&&kT(t.y,e.y)}function CT(t){return Qi(t.x)/Qi(t.y)}function TT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hJ{constructor(){this.members=[]}add(e){Pj(this.members,e),e.scheduleRender()}remove(e){if(cy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mJ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:x,skewX:b,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),x&&(r+=`rotateY(${x}deg) `),b&&(r+=`skewX(${b}deg) `),w&&(r+=`skewY(${w}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Jc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},wm=typeof window!="undefined"&&window.MotionDebug!==void 0,xb=["","X","Y","Z"],pJ={visibility:"hidden"},IT=1e3;let gJ=0;function yb(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function NR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=IP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",en,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&NR(r)}function kR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e==null?void 0:e()){this.id=gJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wm&&(Jc.totalNodes=Jc.resolvedTargetDeltas=Jc.recalculatedProjection=0),this.nodes.forEach(xJ),this.nodes.forEach(jJ),this.nodes.forEach(SJ),this.nodes.forEach(yJ),wm&&window.MotionDebug.record(Jc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new sJ)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Rj),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=bR(o),this.instance=o;const{layoutId:u,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const x=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=nJ(x,250),uv.hasAnimatedSinceResize&&(uv.hasAnimatedSinceResize=!1,this.nodes.forEach(AT))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeTargetChanged:b,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||IJ,{onLayoutAnimationStart:A,onLayoutAnimationComplete:L}=m.getProps(),I=!this.targetLayout||!SR(this.targetLayout,w)||b,N=!x&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||x&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,N);const v={...Tj(k,"layout"),onPlay:A,onComplete:L};(m.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else x||AT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ET);return}this.isUpdating||this.nodes.forEach(_J),this.isUpdating=!1,this.nodes.forEach(wJ),this.nodes.forEach(fJ),this.nodes.forEach(vJ),this.clearAllSnapshots();const c=mo.now();Sr.delta=dl(0,1e3/60,c-Sr.timestamp),Sr.timestamp=c,Sr.isProcessing=!0,cb.update.process(Sr),cb.preRender.process(Sr),cb.render.process(Sr),Sr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bJ),this.sharedNodes.forEach(kJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,en.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){en.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Sn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!jR(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&(c||Xc(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),EJ(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return Sn();const u=c.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(AJ))){const{scroll:m}=this.root;m&&(Au(u.x,m.offset.x),Au(u.y,m.offset.y))}return u}removeElementScroll(o){var c;const u=Sn();if(da(u,o),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:x}=m;m!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&da(u,o),Au(u.x,g.offset.x),Au(u.y,g.offset.y))}return u}applyTransform(o,c=!1){const u=Sn();da(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Pu(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Xc(m.latestValues)&&Pu(u,m.latestValues)}return Xc(this.latestValues)&&Pu(u,this.latestValues),u}removeTransform(o){const c=Sn();da(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Xc(h.latestValues))continue;k_(h.latestValues)&&h.updateSnapshot();const m=Sn(),g=h.measurePageBox();da(m,g),jT(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Xc(this.latestValues)&&jT(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=Sr.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sn(),this.relativeTargetOrigin=Sn(),$m(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),da(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Sn(),this.targetWithTransforms=Sn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):da(this.target,this.layout.layoutBox),gR(this.target,this.targetDelta)):da(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sn(),this.relativeTargetOrigin=Sn(),$m(this.relativeTargetOrigin,this.target,b.target),da(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wm&&Jc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||k_(this.parent.latestValues)||pR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Sr.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;da(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,b=this.treeScale.y;HX(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Sn());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bT(this.prevProjectionDelta.x,this.projectionDelta.x),bT(this.prevProjectionDelta.y,this.projectionDelta.y)),Bm(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==b||!TT(this.projectionDelta.x,this.prevProjectionDelta.x)||!TT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),wm&&Jc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Eu(),this.projectionDelta=Eu(),this.projectionDeltaWithTransform=Eu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=Eu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=Sn(),b=u?u.source:void 0,w=this.layout?this.layout.source:void 0,k=b!==w,A=this.getStack(),L=!A||A.members.length<=1,I=!!(k&&!L&&this.options.crossfade===!0&&!this.path.some(TJ));this.animationProgress=0;let N;this.mixTargetDelta=v=>{const _=v/1e3;PT(g.x,o.x,_),PT(g.y,o.y,_),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($m(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CJ(this.relativeTarget,this.relativeTargetOrigin,x,_),N&&uJ(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Sn()),da(N,this.relativeTarget)),k&&(this.animationValues=m,iJ(m,h,this.latestValues,_,I,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=en.update(()=>{uv.hasAnimatedSinceResize=!0,this.currentAnimation=yR(0,IT,{...o,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:m}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&CR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Sn();const g=Qi(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const x=Qi(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}da(c,u),Pu(c,m),Bm(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hJ),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:c}=this.options;return c?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:c}=this.options;return c?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&yb("z",o,h,this.animationValues);for(let m=0;m<xb.length;m++)yb(`rotate${xb[m]}`,o,h,this.animationValues),yb(`skew${xb[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}getProjectionStyles(o){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return pJ;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=cv(o==null?void 0:o.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=cv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Xc(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const x=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=mJ(this.projectionDeltaWithTransform,this.treeScale,x),m&&(h.transform=m(x,h.transform));const{x:b,y:w}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${w.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(c=x.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=g===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const k in Yv){if(x[k]===void 0)continue;const{correct:A,applyTo:L}=Yv[k],I=h.transform==="none"?x[k]:A(x[k],g);if(L){const N=L.length;for(let v=0;v<N;v++)h[L[v]]=I}else h[k]=I}return this.options.layoutId&&(h.pointerEvents=g===this?cv(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(ET),this.root.sharedNodes.clear()}}}function fJ(t){t.updateLayout()}function vJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=n.source!==t.layout.source;a==="size"?ha(g=>{const x=o?n.measuredBox[g]:n.layoutBox[g],b=Qi(x);x.min=r[g].min,x.max=x.min+b}):CR(a,n.layoutBox,r)&&ha(g=>{const x=o?n.measuredBox[g]:n.layoutBox[g],b=Qi(r[g]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const c=Eu();Bm(c,r,n.layoutBox);const u=Eu();o?Bm(u,t.applyTransform(i,!0),n.measuredBox):Bm(u,r,n.layoutBox);const h=!jR(c);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:b}=g;if(x&&b){const w=Sn();$m(w,n.layoutBox,x.layoutBox);const k=Sn();$m(k,r,b.layoutBox),SR(w,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=w,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function xJ(t){wm&&Jc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function yJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bJ(t){t.clearSnapshot()}function ET(t){t.clearMeasurements()}function _J(t){t.isLayoutDirty=!1}function wJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function AT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jJ(t){t.resolveTargetDelta()}function SJ(t){t.calcProjection()}function NJ(t){t.resetSkewAndRotation()}function kJ(t){t.removeLeadSnapshot()}function PT(t,e,n){t.translate=un(e.translate,0,n),t.scale=un(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function RT(t,e,n,r){t.min=un(e.min,n.min,r),t.max=un(e.max,n.max,r)}function CJ(t,e,n,r){RT(t.x,e.x,n.x,r),RT(t.y,e.y,n.y,r)}function TJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const IJ={duration:.45,ease:[.4,0,.1,1]},LT=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),DT=LT("applewebkit/")&&!LT("chrome/")?Math.round:Ki;function MT(t){t.min=DT(t.min),t.max=DT(t.max)}function EJ(t){MT(t.x),MT(t.y)}function CR(t,e,n){return t==="position"||t==="preserve-aspect"&&!DX(CT(e),CT(n),.2)}function AJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const PJ=kR({attachResizeListener:(t,e)=>gp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bb={current:void 0},TR=kR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bb.current){const t=new PJ({});t.mount(window),t.setOptions({layoutScroll:!0}),bb.current=t}return bb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),RJ={pan:{Feature:XX},drag:{Feature:YX,ProjectionNode:TR,MeasureLayout:xR}};function FT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&en.postRender(()=>a(e,Wp(e)))}class LJ extends vc{mount(){const{current:e}=this.node;e&&(this.unmount=$Q(e,n=>(FT(this.node,n,"Start"),r=>FT(this.node,r,"End"))))}unmount(){}}class DJ extends vc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hp(gp(this.node.current,"focus",()=>this.onFocus()),gp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function BT(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&en.postRender(()=>a(e,Wp(e)))}class MJ extends vc{mount(){const{current:e}=this.node;e&&(this.unmount=zQ(e,n=>(BT(this.node,n,"Start"),(r,{success:i})=>BT(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const T_=new WeakMap,_b=new WeakMap,FJ=t=>{const e=T_.get(t.target);e&&e(t)},BJ=t=>{t.forEach(FJ)};function $J({root:t,...e}){const n=t||document;_b.has(n)||_b.set(n,{});const r=_b.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(BJ,{root:t,...e})),r[i]}function OJ(t,e,n){const r=$J(e);return T_.set(t,n),r.observe(t),()=>{T_.delete(t),r.unobserve(t)}}const VJ={some:0,all:1};class UJ extends vc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:VJ[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),x=h?m:g;x&&x(u)};return OJ(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zJ(e,n))&&this.startObserver()}unmount(){}}function zJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const GJ={inView:{Feature:UJ},tap:{Feature:MJ},focus:{Feature:DJ},hover:{Feature:LJ}},HJ={layout:{ProjectionNode:TR,MeasureLayout:xR}},nx={current:null},Hj={current:!1};function IR(){if(Hj.current=!0,!!mj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>nx.current=t.matches;t.addListener(e),e()}else nx.current=!1}const WJ=[...YP,Ur,pc],KJ=t=>WJ.find(QP(t)),th=new WeakMap;function qJ(t,e,n){for(const r in e){const i=e[r],a=n[r];if(gr(i))t.addValue(r,i);else if(gr(a))t.addValue(r,Zu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Zu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const $T=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ER{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$j,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=mo.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,en.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:m}=o;this.onUpdate=m,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=ay(n),this.isVariantNode=nP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in x){const w=x[b];u[b]!==void 0&&gr(w)&&w.set(u[b],!1)}}mount(e){this.current=e,th.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Hj.current||IR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){th.delete(this.current),this.projection&&this.projection.unmount(),cl(this.notifyUpdate),cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Td.has(e),i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&en.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ju){const n=Ju[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Sn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<$T.length;r++){const i=$T[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=qJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Zu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(KP(i)||BP(i))?i=parseFloat(i):!KJ(i)&&pc.test(n)&&(i=GP(e,n)),this.setBaseTarget(e,gr(i)?i.get():i)),gr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=bj(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!gr(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Rj),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class AR extends ER{constructor(){super(...arguments),this.KeyframeResolver=XP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function QJ(t){return window.getComputedStyle(t)}class PR extends AR{constructor(){super(...arguments),this.type="html",this.renderInstance=hP}readValueFromInstance(e,n){if(Td.has(n)){const r=Bj(n);return r&&r.default||0}else{const r=QJ(e),i=(cP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fR(e,n)}build(e,n,r){jj(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Cj(e,n,r)}}class RR extends AR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Sn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Td.has(n)){const r=Bj(n);return r&&r.default||0}return n=mP.has(n)?n:vj(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return fP(e,n,r)}build(e,n,r){Sj(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){pP(e,n,r,i)}mount(e){this.isSVGTag=kj(e.tagName),super.mount(e)}}const YJ=(t,e)=>yj(t)?new RR(e):new PR(e,{allowProjection:t!==P.Fragment}),XJ=RQ({...kX,...GJ,...RJ,...HJ},YJ),LR=qq(XJ);function jm(t){const e=dj(()=>Zu(t)),{isStatic:n}=P.useContext(hj);if(n){const[,r]=P.useState(t);P.useEffect(()=>e.on("change",r),[])}return e}function DR(t,e){const n=jm(e()),r=()=>n.set(e());return r(),J4(()=>{const i=()=>en.preRender(r,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),cl(r)}}),n}const JJ=t=>t&&typeof t=="object"&&t.mix,ZJ=t=>JJ(t)?t.mix:void 0;function eZ(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],o=t[3+n],c=rR(i,a,{mixer:ZJ(a[0]),...o});return e?c(r):c}function tZ(t){Dm.current=[],t();const e=DR(Dm.current,t);return Dm.current=void 0,e}function jf(t,e,n,r){if(typeof t=="function")return tZ(t);const i=typeof e=="function"?e:eZ(e,n,r);return Array.isArray(t)?OT(t,i):OT([t],([a])=>i(a))}function OT(t,e){const n=dj(()=>[]);return DR(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function MR(){!Hj.current&&IR();const[t]=P.useState(nx.current);return t}const sZ=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function FR(t,e){return nR(t)?t[sZ(0,t.length,e)]:t}function Wj(t){return typeof t=="object"&&!Array.isArray(t)}function BR(t,e,n,r){return typeof t=="string"&&Wj(e)?SP(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function nZ(t,e,n){return t*(e+1)}function VT(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}function rZ(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(cy(t,i),r--)}}function iZ(t,e,n,r,i,a){rZ(t,i,a);for(let o=0;o<e.length;o++)t.push({value:e[o],at:un(i,a,r[o]),easing:FR(n,o)})}function aZ(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function oZ(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const lZ="easeInOut";function cZ(t,{defaultTransition:e={},...n}={},r,i){const a=e.duration||.3,o=new Map,c=new Map,u={},h=new Map;let m=0,g=0,x=0;for(let b=0;b<t.length;b++){const w=t[b];if(typeof w=="string"){h.set(w,g);continue}else if(!Array.isArray(w)){h.set(w.name,VT(g,w.at,m,h));continue}let[k,A,L={}]=w;L.at!==void 0&&(g=VT(g,L.at,m,h));let I=0;const N=(v,_,R,j=0,S=0)=>{const C=dZ(v),{delay:M=0,times:T=aR(C),type:F="keyframes",repeat:D,repeatType:V,repeatDelay:U=0,...K}=_;let{ease:H=e.ease||"easeOut",duration:z}=_;const Y=typeof M=="function"?M(j,S):M,te=C.length,G=ly(F)?F:i==null?void 0:i[F];if(te<=2&&G){let ue=100;if(te===2&&mZ(C)){const ee=C[1]-C[0];ue=Math.abs(ee)}const Ne={...K};z!==void 0&&(Ne.duration=co(z));const Ee=MQ(Ne,ue,G);H=Ee.ease,z=Ee.duration}z!=null||(z=a);const X=g+Y;T.length===1&&T[0]===0&&(T[1]=1);const J=T.length-C.length;if(J>0&&iR(T,J),C.length===1&&C.unshift(null),D){z=nZ(z,D);const ue=[...C],Ne=[...T];H=Array.isArray(H)?[...H]:[H];const Ee=[...H];for(let ee=0;ee<D;ee++){C.push(...ue);for(let le=0;le<ue.length;le++)T.push(Ne[le]+(ee+1)),H.push(le===0?"linear":FR(Ee,le-1))}aZ(T,D)}const se=X+z;iZ(R,C,H,T,X,se),I=Math.max(Y+z,I),x=Math.max(se,x)};if(gr(k)){const v=UT(k,c);N(A,L,zT("default",v))}else{const v=BR(k,A,r,u),_=v.length;for(let R=0;R<_;R++){A=A,L=L;const j=v[R],S=UT(j,c);for(const C in A)N(A[C],uZ(L,C),zT(C,S),R,_)}}m=g,g+=I}return c.forEach((b,w)=>{for(const k in b){const A=b[k];A.sort(oZ);const L=[],I=[],N=[];for(let _=0;_<A.length;_++){const{at:R,value:j,easing:S}=A[_];L.push(j),I.push(wd(0,x,R)),N.push(S||"easeOut")}I[0]!==0&&(I.unshift(0),L.unshift(L[0]),N.unshift(lZ)),I[I.length-1]!==1&&(I.push(1),L.push(null)),o.has(w)||o.set(w,{keyframes:{},transition:{}});const v=o.get(w);v.keyframes[k]=L,v.transition[k]={...e,duration:x,ease:N,times:I,...n}}}),o}function UT(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function zT(t,e){return e[t]||(e[t]=[]),e[t]}function dZ(t){return Array.isArray(t)?t:[t]}function uZ(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const hZ=t=>typeof t=="number",mZ=t=>t.every(hZ);function pZ(t,e){return t in e}class gZ extends ER{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(pZ(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return Sn()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function fZ(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=bR(t)?new RR(e):new PR(e);n.mount(t),th.set(t,n)}function vZ(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new gZ(e);n.mount(t),th.set(t,n)}function xZ(t,e){return gr(t)||typeof t=="number"||typeof t=="string"&&!Wj(e)}function $R(t,e,n,r){const i=[];if(xZ(t,e))i.push(yR(t,Wj(e)&&e.default||e,n&&(n.default||n)));else{const a=BR(t,e,r),o=a.length;for(let c=0;c<o;c++){const u=a[c],h=u instanceof Element?fZ:vZ;th.has(u)||h(u);const m=th.get(u),g={...n};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(c,o)),i.push(...Gj(m,{...e,transition:g},{}))}}return i}function yZ(t,e,n){const r=[];return cZ(t,e,n,{spring:Vj}).forEach(({keyframes:a,transition:o},c)=>{r.push(...$R(c,a,o))}),r}function bZ(t){return Array.isArray(t)&&t.some(Array.isArray)}function _Z(t){function e(n,r,i){let a=[];return bZ(n)?a=yZ(n,r,t):a=$R(n,r,i,t),new yP(a)}return e}const Sf=_Z(),Xo={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function wZ(){return s.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+Xo.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function jZ(){return s.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[s.jsx("stop",{offset:"0%",stopColor:Xo.icon,stopOpacity:"0.42"}),s.jsx("stop",{offset:"70%",stopColor:Xo.icon,stopOpacity:"0"})]}),s.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[s.jsx("stop",{offset:"0%",stopColor:Xo.icon,stopOpacity:"0.20"}),s.jsx("stop",{offset:"70%",stopColor:Xo.icon,stopOpacity:"0"})]})]}),s.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),s.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function GT({rounded:t="rounded-3xl",padded:e=!0,children:n}){const r=MR();return s.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:Xo.border,background:"var(--nav, "+Xo.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[s.jsx(wZ,{}),s.jsx(LR.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),s.jsx(jZ,{}),s.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:n})]})}const wb={borderColor:"#2B4C73",background:"#1A2F4A"},Nf={borderColor:"#2B4C73",background:"#152A42"};function as({hex:t,title:e,subtitle:n,actions:r,subheader:i,left:a,right:o,children:c,rounded:u="rounded-3xl",padded:h=!0,centerFramed:m=!1,leftWidth:g=0,rightWidth:x=0,stickyRails:b=!0,leftFullHeight:w=!1,mode:k="card",outerPadding:A="px-4 py-3",leftPlacement:L="inside",stickyTopbar:I=!0,stickySubheader:N=!0,shellViewportOffset:v="var(--app-topbar-h,72px)",topbarHeight:_=56}){const R={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof x=="number"?`${x}px`:x},j=s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:wb,children:t}),(e||n||r)&&s.jsxs("div",{className:[I?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:wb,children:[s.jsxs("div",{className:"min-w-0",children:[e&&s.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),n&&s.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:n})]}),r?s.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&s.jsx("div",{className:[N?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...N?{top:I?`${_}px`:0}:{},...wb},children:i})]}),S=k==="card"?({children:M})=>s.jsx(GT,{rounded:u,padded:h,children:M}):({children:M})=>s.jsx("div",{className:`w-full ${A}`,children:M}),C=s.jsx("div",{className:"relative min-h-0 h-full",style:R,children:s.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Nf,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:w?"stretch":"start",height:w?"100%":"fit-content",minHeight:w?0:void 0},children:a}):g?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"}),m?s.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:Nf,children:c}):s.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:c}),o?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Nf,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:o}):x?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"})]})});return L==="bleed"&&k==="card"?s.jsx("div",{className:`w-full ${A}`,children:s.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[j,s.jsx("div",{className:"flex-1 min-h-0",style:R,children:s.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Nf,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:w?"stretch":"start",height:w?"100%":"fit-content",minHeight:w?0:void 0},children:a}):g?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"}),s.jsx(GT,{rounded:u,padded:h,children:s.jsx("div",{className:"flex-1 min-h-0 h-full",children:C})})]})})]})}):s.jsx(S,{children:s.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${v})`},children:[j,s.jsx("div",{className:"flex-1 min-h-0",children:C})]})})}const SZ="_card_z6isy_1",NZ="_header_z6isy_19",kZ="_headerGroup_z6isy_33",CZ="_headerText_z6isy_47",TZ="_headerIcon_z6isy_61",IZ="_title_z6isy_81",EZ="_subtitle_z6isy_93",AZ="_previewWrap_z6isy_103",PZ="_previewSurface_z6isy_115",RZ="_previewLink_z6isy_134",LZ="_previewStatic_z6isy_142",DZ="_previewImage_z6isy_168",MZ="_previewImageIcon_z6isy_188",FZ="_previewImageCover_z6isy_196",BZ="_guidehubScale_z6isy_206",Jr={card:SZ,header:NZ,headerGroup:kZ,headerText:CZ,headerIcon:TZ,title:IZ,subtitle:EZ,previewWrap:AZ,previewSurface:PZ,previewLink:RZ,previewStatic:LZ,previewImage:DZ,previewImageIcon:MZ,previewImageCover:FZ,guidehubScale:BZ},jb=({href:t,title:e,subtitle:n,headerIconSrc:r,headerIconAlt:i="",previewImageSrc:a,previewAlt:o,variant:c="icon",previewHeightOverride:u,className:h,i18nScope:m,titleI18nKey:g,subtitleI18nKey:x,previewAltI18nKey:b,linkAriaLabel:w,linkAriaI18nKey:k})=>{const A=[Jr.card,h].filter(Boolean).join(" "),L=typeof t=="string"&&t.trim()?t:null,I=L?/^https?:\/\//i.test(L):!1,N=w||e,v=!i,_=u?{"--featured-preview-height-override":u}:void 0,R=[Jr.previewImage,c==="cover"?Jr.previewImageCover:Jr.previewImageIcon].filter(Boolean).join(" "),j=[Jr.previewSurface,L?Jr.previewLink:Jr.previewStatic].filter(Boolean).join(" "),S=L?"true":"false";return s.jsxs("section",{className:A,"data-i18n-scope":m,style:_,children:[s.jsx("div",{className:Jr.previewWrap,children:L?I?s.jsx("a",{href:L,className:j,"aria-label":N,"data-i18n-aria-label":k,"data-clickable":S,target:"_blank",rel:"noopener noreferrer",children:s.jsx("img",{src:a,alt:o,"data-i18n":b,className:R,loading:"eager",decoding:"async"})}):s.jsx(zs,{to:L,className:j,"aria-label":N,"data-i18n-aria-label":k,"data-clickable":S,children:s.jsx("img",{src:a,alt:o,"data-i18n":b,className:R,loading:"eager",decoding:"async"})}):s.jsx("div",{className:j,"data-clickable":S,children:s.jsx("img",{src:a,alt:o,"data-i18n":b,className:R,loading:"eager",decoding:"async"})})}),s.jsx("header",{className:Jr.header,children:s.jsxs("div",{className:Jr.headerGroup,children:[r&&s.jsx("img",{src:r,alt:i,className:Jr.headerIcon,"aria-hidden":v}),s.jsxs("div",{className:Jr.headerText,children:[s.jsx("span",{className:Jr.title,"data-i18n":g,children:e}),n&&s.jsx("span",{className:Jr.subtitle,"data-i18n":x,children:n})]})]})})]})},$Z="_row_anakb_1",OZ="_viewport_anakb_13",VZ="_track_anakb_21",UZ="_navBtn_anakb_37",Oc={row:$Z,viewport:OZ,track:VZ,navBtn:UZ},zZ=({children:t,className:e})=>{const n=P.useRef(null),r=P.useRef(null),[i,a]=P.useState(0),[o,c]=P.useState(0),[u,h]=P.useState(0),m=q.Children.count(t);P.useEffect(()=>{const w=()=>{const A=n.current,L=r.current;if(!A||!L)return;const I=L.children;if(!I.length){c(0),h(0),a(0);return}const v=I[0].getBoundingClientRect().width,_=window.getComputedStyle(L),R=parseFloat(_.columnGap||_.gap||"0"),j=Number.isNaN(R)?0:R,S=v+j,C=A.getBoundingClientRect().width,M=S>0?Math.max(1,Math.floor((C+j)/S)):1,T=Math.max(0,I.length-M);h(S),c(T),a(F=>Math.min(F,T))};w();let k=null;return typeof ResizeObserver!="undefined"&&(k=new ResizeObserver(()=>w()),n.current&&k.observe(n.current),r.current&&k.observe(r.current)),window.addEventListener("resize",w),()=>{k==null||k.disconnect(),window.removeEventListener("resize",w)}},[m]);const g=i>0,x=i<o,b=u*i*-1;return s.jsxs("div",{className:[Oc.row,e].filter(Boolean).join(" "),children:[s.jsx("button",{className:`${Oc.navBtn} ${Oc.navPrev}`,onClick:()=>a(w=>Math.max(0,w-1)),disabled:!g,"aria-label":"Previous",children:"<"}),s.jsx("div",{className:Oc.viewport,ref:n,children:s.jsx("div",{className:Oc.track,ref:r,style:{transform:`translateX(${b}px)`},children:t})}),s.jsx("button",{className:`${Oc.navBtn} ${Oc.navNext}`,onClick:()=>a(w=>Math.min(o,w+1)),disabled:!x,"aria-label":"Next",children:">"})]})},GZ="https://firestore.googleapis.com/v1/projects",HZ="stats_public/news_latestByChannel",WZ=()=>`${GZ}/sfdatahub-staging/databases/(default)/documents/${HZ}?key=AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA`,Ho=t=>t&&typeof t.stringValue=="string"?t.stringValue:null,KZ=t=>!t||t.nullValue!==void 0?null:typeof t.stringValue=="string"?t.stringValue:null,HT=t=>{if(!t)return null;if(typeof t.integerValue=="string"){const e=Number(t.integerValue);return Number.isFinite(e)?e:null}if(typeof t.doubleValue=="number")return Number.isFinite(t.doubleValue)?t.doubleValue:null;if(typeof t.timestampValue=="string"){const e=Date.parse(t.timestampValue);return Number.isFinite(e)?e:null}if(typeof t.stringValue=="string"){const e=Number(t.stringValue);return Number.isFinite(e)?e:null}return null},WT=t=>!t||!t.mapValue||!t.mapValue.fields?null:t.mapValue.fields,qZ=t=>{var n;const e=(n=t==null?void 0:t.arrayValue)==null?void 0:n.values;return Array.isArray(e)?e:[]},QZ=t=>{if(!t)return null;const e=Ho(t.id),n=Ho(t.channelId),r=Ho(t.author),i=Ho(t.timestamp),a=Ho(t.contentText),o=KZ(t.imageUrl),c=Ho(t.jumpUrl);return!e||!n||!r||!i||!a||!c?null:{id:e,channelId:n,author:r,timestamp:i,contentText:a,imageUrl:o,jumpUrl:c}},YZ=t=>{const e=WT(t);if(!e)return null;const n=Ho(e.channelId),r=Ho(e.label);if(!n||!r)return null;const i=WT(e.item);return{channelId:n,label:r,item:i?QZ(i):null}},XZ=t=>t.map(e=>{var n,r,i,a;return`${e.channelId}|${(r=(n=e.item)==null?void 0:n.id)!=null?r:"-"}|${(a=(i=e.item)==null?void 0:i.timestamp)!=null?a:"-"}`}).join(`
`),JZ=t=>{var c;const e=t==null?void 0:t.fields;if(!e||typeof e!="object")return null;const n=qZ(e.items),r=[];for(const u of n){const h=YZ(u);h&&r.push(h)}const i=HT(e.updatedAt),a=HT(e.nextUpdateAt),o=(c=Ho(e.hash))!=null?c:XZ(r);return o?{updatedAt:i,nextUpdateAt:a,hash:o,items:r}:null};async function ZZ(t){const e=WZ();if(!e)return null;const n=await fetch(e,{cache:"no-store",signal:t});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json();return JZ(r)}const Kj="/assets/logo_guidehub-c4zKGdF-.png";function OR(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function eee(t){const e=t.filter(Boolean).join(" ");return OR(e)}const tee={woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",amruneoverview:"1YlAG-4hNVBfXHTBvcMIWXs-h-_8Yz7MS",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",stinkingrich:"1wtKrBGPIhb-c381aRwdFdItZ4bjcQuFs",runemaster:"13jn9YGSj6jwAHAyFgZci7xItANOMLEvb",runeemporer:"1NoV1yiiq3aa-jtUL0F8j0MUG--5sVkDW",capitalist:"1i7276mR37xH9ywdGAf5QqAZmy9ecbeom",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",calendarrewards:"1K9bm0OUtW0_QUg5i9q40N0slV6kg_iTd",calendarskip:"1jOgaf09diVUyCdXWdFoc-kXj4mUHejo7",elementaladvantages:"1wuV_5LJCMKVWA9FkCVILcQ_xF6GS9NM3",petsp2w:"1Smy-lLOCHFd_n4qqhy_mQh1cQEfIfYfW",petsf2p:"1_LfcLaZ9Yte_55iO0jl40KO8ZIvOyzjd",normalpack:"",leveluppack:"1U5IfT1x471-eiA20GIkeVddLRp5z1-C3",birthdaysale:"1tnGr2TqWZ8-mbfB_FLA81cmawN6MHM2U",blackfridaysale:"151Vt48Snv14yaemu2br4a0p5ZJOwoBAJ",christmassale:"1YtjNmFDSdoZOMP7pr4u8Hpq-ngUoZSnL",communitysale:"1IcqlVQSmUmTjK5d-3uDSgWzfMdSoYXOz",eastersale:"1VjRJ5FYsPMH8shHO3ygFy8o7OW7Ok2s9",fallsale:"1WEBrcC16kKEuDqVrNN1_30YE-mvbLKRL",luckysale:"1ghdb7rzBd9IwfIThrZkWoBu_cJUu52Y8",newyearsale:"1oqiVjh189TymQOJ6rFgplKX5d19F8dRQ",oktoberfestsale:"15_EJDighENIzrGyWc_G-zoS90hf21I2O",prechristmassale:"1oF2EBqkCQoIpbea4DbWtBwVjiU0CQ3qH",soulfulsale:"1QXKH1xPEzpA1vPBL4KVYXs3Wz61Xwaoh",summersale:"1QXKH1xPEzpA1vPBL4KVYXs3Wz61Xwaoh",wintersale:"1dQgJjNPUwhYXFXe_D3ECSCZVxQ-tI4Wi",worldbosssale:"1PAtXeA1xucL-NQdEpl4c7koesaN6o4n9",hydrastages:"1NosDzLmsNFLkTOuzpEKV0wjPo9TbMpMG",guildskillcost:"18Bx5BeItjYGP3cyNhvJ-Rwr3mfqNQkpc",levelzweibiszweihundert:"1xisisp1_yooyzPpjAdUEEi_0p284CtCz",levelzweihunzehnbissiebenhun:"1xisisp1_yooyzPpjAdUEEi_0p284CtCz",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450",sftaverndiscord:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY",sfmagazine:"1DkwbJdIRSI0DxVJCo9aCDD9FyjZGf-TQ",sftools:"1fcnNhvUliXJU6Fuw95mLrcNowjzZlYSh",step1adg:"1s18qj9thQdvKQySqdgv3jhAZ6WXu4Z_T",step2adg:"1XD6h0xe56G4nfatc4Cs9wFnPveWwyxr8",step3adg:"1FBYaP5H-UhlrMiAhlfxcEyP8PGBWbPO5"};function see(t){var n;const e=Array.isArray(t)?eee(t):OR(t!=null?t:"");return(n=tee[e])!=null?n:null}function Oa(t,e=512){var a,o;const n=see(t);if(!n)return{id:null,url:null,thumb:null,fallback:""};const r=(a=_d(n))!=null?a:null,i=r&&(o=Ni(r,e))!=null?o:null;return{id:n,url:r,thumb:i,fallback:""}}function ud(t,e=512){return Oa(t,e).thumb}const nee="/guidehub-v2",KT=Oa("sftools",512),qT=Oa("sftaverndiscord",512);var k5,C5;const ree=(C5=(k5=KT.thumb)!=null?k5:KT.url)!=null?C5:"";var T5,I5;const iee=(I5=(T5=qT.thumb)!=null?T5:qT.url)!=null?I5:"",QT="clamp(96px, 22vw, 192px)",aee="https://discord.gg/5hXBuyRssK",YT=`${va}/api/twitch/live`,oee=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"],VR="sfh_news_latestByChannel_v1",lee=600*1e3;async function cee(){const t=[];for(const n of oee)try{const i=await(await fetch(n,{cache:"no-store"})).text(),a=dee(i);t.push(...a)}catch(r){}const e=new Map;for(const n of t){const r=String(n["Creator Name"]||n.creator_name||n.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,n)}return Array.from(e.values())}function XT(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(n+='"',i++):r=!r:a===","&&!r?(e.push(n),n=""):n+=a}return e.push(n),e}function dee(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const n=XT(e[0]);return e.slice(1).map(r=>{const i=XT(r),a={};return n.forEach((o,c)=>{var u;return a[o.trim()]=((u=i[c])!=null?u:"").trim()}),a})}function uee(t){try{const e=Date.now(),n=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-n),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const o=Math.floor(a/60);return o<24?`${o}h`:`${Math.floor(o/24)}d`}catch(e){return""}}function UR(t,e){const n=t.trim();return n.length<=e?n:`${n.slice(0,Math.max(0,e-3)).trimEnd()}...`}function hee(){try{if(typeof sessionStorage=="undefined")return null;const t=sessionStorage.getItem(VR);if(!t)return null;const e=JSON.parse(t);return!e||typeof e!="object"?null:e}catch(t){return null}}function JT(t){try{if(typeof sessionStorage=="undefined")return;sessionStorage.setItem(VR,JSON.stringify(t))}catch(e){}}function mee(t){if(!t)return null;const e=Date.now(),n=typeof t.nextUpdateAt=="number"?t.nextUpdateAt:null;return n&&n>e?n:e+lee}function pee(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const n=e.pathname.toLowerCase();if(n.startsWith("/shorts/"))return n.split("/")[2]||null}}catch(e){}return null}const gee=()=>{var D,V;const{t}=Os(),[e,n]=P.useState(0),[r,i]=P.useState(null),[a,o]=P.useState(!0),[c,u]=P.useState(null),h=P.useRef(!1),m=P.useRef(!1),g=P.useRef(null),x=P.useRef(null),b=P.useRef(null),w=P.useRef(null),k=P.useRef(null),A=U=>{var z,Y;let K=-1,H=Number.NEGATIVE_INFINITY;for(let te=0;te<U.length;te++){const G=(Y=(z=U[te])==null?void 0:z.item)==null?void 0:Y.timestamp;if(!G)continue;const X=Date.parse(G);Number.isNaN(X)||X>H&&(H=X,K=te)}return K===-1?0:K};P.useEffect(()=>{let U=!0;const K=()=>{g.current&&(window.clearTimeout(g.current),g.current=null)},H=se=>{K();const ue=mee(se);if(!ue)return;k.current=ue;const Ne=Math.max(0,ue-Date.now());g.current=window.setTimeout(()=>{Y()},Ne)},z=(se,ue)=>{var ee;const Ne=se.hash||String((ee=se.updatedAt)!=null?ee:""),Ee=w.current;if(Ee&&Ee===Ne){b.current=se,ue&&JT(se);return}w.current=Ne,b.current=se,i(se),ue&&JT(se)},Y=async()=>{var ue;if(!U)return;(ue=x.current)==null||ue.abort();const se=new AbortController;x.current=se,b.current||o(!0);try{const Ne=await ZZ(se.signal);if(!U||se.signal.aborted)return;Ne&&(z(Ne,!0),u(null),H(Ne))}catch(Ne){if(!U||se.signal.aborted)return;u(String((Ne==null?void 0:Ne.message)||Ne||"error"))}finally{U&&!se.signal.aborted&&(o(!1),H(b.current))}},te=hee();te&&(z(te,!1),o(!1));const G=Date.now();te&&typeof te.nextUpdateAt=="number"&&te.nextUpdateAt>G?H(te):Y();const J=()=>{if(!U||document.visibilityState!=="visible")return;const se=k.current;typeof se=="number"&&Date.now()>se&&Y()};return document.addEventListener("visibilitychange",J),()=>{var se;U=!1,K(),(se=x.current)==null||se.abort(),document.removeEventListener("visibilitychange",J)}},[]),P.useEffect(()=>{var K;const U=(K=r==null?void 0:r.items)!=null?K:[];if(U.length===0){n(0);return}if(!h.current&&!m.current){n(A(U)),m.current=!0;return}n(H=>Math.min(H,U.length-1))},[r]);const L=(D=r==null?void 0:r.items.length)!=null?D:0,I=L>0?r.items[e]:null,N=(I==null?void 0:I.label)||(I==null?void 0:I.channelId)||"",v=!a&&I&&!I.item,_=(V=I==null?void 0:I.item)!=null?V:null,R=_?uee(_.timestamp):"",j=(_==null?void 0:_.author)||"Discord",S=_!=null&&_.contentText?UR(_.contentText,240):"",C=_?`${j} ${R}`.trim():void 0,M=!a&&L===0,T=()=>{L<=1||(h.current=!0,n(U=>(U-1+L)%L))},F=()=>{L<=1||(h.current=!0,n(U=>(U+1)%L))};return s.jsxs("section",{className:rt.card,"data-i18n-scope":"home.news","aria-busy":a,children:[s.jsxs("header",{className:rt.header,children:[s.jsxs("div",{className:rt.headerGroup,children:[s.jsx("span",{className:rt.title,"data-i18n":"home.news.title",children:t("home.news.title")}),N&&s.jsx("span",{className:rt.subtitle,title:N,children:N})]}),s.jsxs("div",{className:rt.carouselCtrls,children:[s.jsx("button",{className:rt.navBtn,onClick:T,disabled:L<=1,"aria-label":t("home.news.prev"),"data-i18n-aria-label":"home.news.prev",children:""}),s.jsx("button",{className:rt.navBtn,onClick:F,disabled:L<=1,"aria-label":t("home.news.next"),"data-i18n-aria-label":"home.news.next",children:""})]})]}),s.jsxs("div",{className:rt.newsList,children:[a&&s.jsx("div",{className:rt.newsSkeleton,"aria-hidden":!0}),_&&s.jsxs("article",{className:[rt.newsCard,_.imageUrl?rt.newsCardWithImage:""].join(" "),tabIndex:0,children:[s.jsxs("div",{className:rt.newsBody,children:[s.jsxs("div",{className:rt.newsMeta,children:[s.jsx("span",{className:rt.newsAuthor,children:j}),s.jsx("span",{className:rt.newsTime,children:R})]}),S&&s.jsx("p",{className:rt.newsText,children:S}),s.jsx("div",{className:rt.newsActions,children:s.jsx("a",{href:_.jumpUrl,target:"_blank",rel:"noreferrer",className:rt.linkBtn,"aria-label":C,"data-i18n":"home.news.openOnDiscord",children:t("home.news.openOnDiscord")})})]}),_.imageUrl&&s.jsx("img",{src:_.imageUrl,alt:"",className:rt.newsImage,loading:"lazy",decoding:"async"})]}),v&&s.jsx("div",{className:rt.empty,"data-i18n":"home.news.emptyChannel",children:t("home.news.emptyChannel")}),M&&s.jsx("div",{className:rt.empty,"data-i18n":"home.news.empty",children:t("home.news.empty")})]}),c&&s.jsx("div",{className:rt.errorNote,"aria-live":"polite",children:c})]})},fee=()=>{const{t}=Os(),[e,n]=P.useState([]),[r,i]=P.useState(0),a=P.useRef(null);P.useEffect(()=>{let h=!0;async function m(){try{const x=(await cee()).map(b=>{const w=String(b["Creator Name"]||b.creator_name||b.name||"").trim(),k=String(b["YouTube Link"]||b.youtube||b.YouTube||"").trim();if(!k)return null;const A=pee(k),L=A?`https://i.ytimg.com/vi/${A}/hqdefault.jpg`:void 0;return{title:w,url:k,thumb:L}}).filter(Boolean).slice(0,12);h&&n(x)}catch(g){h&&n([])}}return m(),()=>{h=!1}},[]),P.useEffect(()=>{if(!(e.length<=1))return a.current=window.setInterval(()=>i(h=>(h+1)%e.length),6e3),()=>{a.current&&window.clearInterval(a.current)}},[e]);const o=()=>i(h=>(h-1+e.length)%Math.max(e.length,1)),c=()=>i(h=>(h+1)%Math.max(e.length,1)),u=h=>{h.key==="ArrowLeft"&&(h.preventDefault(),o()),h.key==="ArrowRight"&&(h.preventDefault(),c())};return s.jsxs("section",{className:rt.card,"data-i18n-scope":"home.youtube",children:[s.jsxs("header",{className:rt.header,children:[s.jsx("span",{className:rt.title,"data-i18n":"home.youtube.title",children:t("home.youtube.title")}),s.jsxs("div",{className:rt.carouselCtrls,children:[s.jsx("button",{className:rt.navBtn,onClick:o,"aria-label":t("home.youtube.prev"),children:""}),s.jsx("button",{className:rt.navBtn,onClick:c,"aria-label":t("home.youtube.next"),children:""})]})]}),s.jsx("div",{className:rt.carousel,tabIndex:0,onKeyDown:u,"aria-roledescription":"carousel",children:e.length===0?s.jsx("div",{className:rt.empty,"data-i18n":"home.youtube.empty",children:t("home.youtube.empty")}):e.map((h,m)=>s.jsxs("a",{href:h.url,target:"_blank",rel:"noreferrer",className:[rt.slide,m===r?rt.slideActive:rt.slideInactive].join(" "),children:[h.thumb?s.jsx("img",{src:h.thumb,alt:"",className:rt.slideThumb}):s.jsx("div",{className:rt.slideFallback,children:h.title.slice(0,2).toUpperCase()}),s.jsx("div",{className:rt.slideCaption,children:h.title})]},h.url))})]})},vee=({onOpenSchedule:t})=>{const{t:e}=Os(),[n,r]=P.useState(null);return P.useEffect(()=>{let i=!0;async function a(){if(!YT){r({live:!1});return}try{const o=await fetch(YT,{cache:"no-store"});if(!o.ok)throw new Error("Twitch live request failed");const c=await o.json();i&&r(c)}catch(o){i&&r({live:!1})}}return a(),()=>{i=!1}},[]),!n||!n.live||!Array.isArray(n.items)||n.items.length===0?s.jsxs("section",{className:rt.card,"data-i18n-scope":"home.live",children:[s.jsx("header",{className:rt.header,children:s.jsx("span",{className:rt.title,"data-i18n":"home.live.title",children:e("home.live.title")})}),s.jsx("div",{className:rt.empty,"data-i18n":"home.live.none",children:e("home.live.none")}),s.jsx("div",{className:rt.actionsRight,children:s.jsx("button",{className:rt.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:e("home.schedule.open")})})]}):s.jsxs("section",{className:rt.card,"data-i18n-scope":"home.live",children:[s.jsx("header",{className:rt.header,children:s.jsx("span",{className:rt.title,"data-i18n":"home.live.title",children:e("home.live.title")})}),n.items.map(i=>{const a=i.channel.displayName||i.channel.login,o=i.stream.title?UR(i.stream.title,80):"";return s.jsxs("div",{className:rt.liveCard,children:[i.stream.thumbnailUrl?s.jsx("img",{src:i.stream.thumbnailUrl,alt:"",className:rt.liveAvatar}):s.jsx("div",{className:rt.liveAvatarFallback,"aria-hidden":!0,children:a.slice(0,2).toUpperCase()}),s.jsxs("div",{className:rt.liveInfo,children:[s.jsx("div",{className:rt.liveName,children:a}),s.jsxs("div",{className:rt.liveMeta,children:[s.jsx("span",{className:rt.liveBadge,"data-i18n":"home.live.badge",children:e("home.live.badge")}),typeof i.stream.viewerCount=="number"&&s.jsx("span",{className:rt.liveViewers,children:e("home.live.viewers",{viewers:i.stream.viewerCount.toLocaleString()})})]}),o&&s.jsx("div",{className:rt.liveMeta,children:o})]}),s.jsx("a",{href:i.channel.url,target:"_blank",rel:"noreferrer",className:rt.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:e("home.live.open_on_twitch")})]},i.channel.login)})]})},xee=({open:t,onClose:e})=>{var w;const{t:n}=Os(),[r,i]=P.useState(null),[a,o]=P.useState("All"),[c,u]=P.useState(""),[h,m]=P.useState(!1);if(P.useEffect(()=>{if(!t)return;async function k(){{i([]);return}}return k(),()=>{}},[t]),P.useEffect(()=>{const k=A=>{A.key==="Escape"&&e()};return t&&window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[t,e]),!t)return null;const g=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),x=(r||[]).filter(k=>{if(a!=="All"&&k.platform.toLowerCase()!==a.toLowerCase()||h&&k.weekday&&k.weekday.toLowerCase()!==g.toLowerCase())return!1;if(c){const A=c.toLowerCase();if(!`${k.streamer} ${k.title}`.toLowerCase().includes(A))return!1}return!0}),b=((w=r==null?void 0:r.length)!=null?w:0)===0;return s.jsx("div",{className:rt.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:s.jsxs("div",{className:rt.modal,children:[s.jsxs("header",{className:rt.modalHeader,children:[s.jsx("h2",{id:"schedule-title",className:rt.modalTitle,"data-i18n":"home.schedule.title",children:n("home.schedule.title")}),s.jsx("button",{className:rt.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:n("home.schedule.close")})]}),s.jsxs("div",{className:rt.modalFilters,children:[s.jsxs("label",{className:rt.formRow,children:[s.jsx("span",{"data-i18n":"home.schedule.platform",children:n("home.schedule.platform")}),s.jsxs("select",{value:a,onChange:k=>o(k.target.value),className:rt.select,children:[s.jsx("option",{value:"All",children:n("home.schedule.platformAll")}),s.jsx("option",{value:"Twitch",children:n("home.schedule.platformTwitch")}),s.jsx("option",{value:"YouTube",children:n("home.schedule.platformYouTube")})]})]}),s.jsxs("label",{className:rt.formRow,children:[s.jsx("span",{"data-i18n":"home.schedule.search",children:n("home.schedule.search")}),s.jsx("input",{value:c,onChange:k=>u(k.target.value),className:rt.input,placeholder:n("home.schedule.searchPlaceholder")})]}),s.jsxs("label",{className:rt.formRowCheckbox,children:[s.jsx("input",{type:"checkbox",checked:h,onChange:k=>m(k.target.checked)}),s.jsx("span",{"data-i18n":"home.schedule.today",children:n("home.schedule.today")})]})]}),s.jsx("div",{className:rt.tableWrap,children:s.jsxs("table",{className:rt.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:n("home.schedule.columns.weekday")}),s.jsx("th",{children:n("home.schedule.columns.start")}),s.jsx("th",{children:n("home.schedule.columns.end")}),s.jsx("th",{children:n("home.schedule.columns.timezone")}),s.jsx("th",{children:n("home.schedule.columns.platform")}),s.jsx("th",{children:n("home.schedule.columns.channel")}),s.jsx("th",{children:n("home.schedule.columns.streamer")}),s.jsx("th",{children:n("home.schedule.columns.title")})]})}),s.jsx("tbody",{children:b?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:rt.empty,children:n("home.schedule.empty")})}):x.map((k,A)=>s.jsxs("tr",{children:[s.jsx("td",{children:k.weekday}),s.jsx("td",{children:k.start_utc}),s.jsx("td",{children:k.end_utc}),s.jsx("td",{children:k.timezone}),s.jsx("td",{children:k.platform}),s.jsx("td",{children:k.channel_url?s.jsx("a",{href:k.channel_url,target:"_blank",rel:"noreferrer",children:n("home.schedule.link")}):""}),s.jsx("td",{children:k.streamer}),s.jsx("td",{children:k.title})]},A))})]})})]})})},yee=()=>{const{t}=Os(),[e,n]=P.useState(!1);return s.jsxs(as,{title:t("home.title"),subtitle:t("home.subtitle"),children:[s.jsxs("div",{className:`${rt.row} ${rt.rowSplit}`,children:[s.jsx("div",{className:rt.splitMain,children:s.jsx(gee,{})}),s.jsx("div",{className:rt.splitSide,children:s.jsx(vee,{onOpenSchedule:()=>n(!0)})})]}),s.jsxs("div",{className:`${rt.row} ${rt.rowSplit} ${rt.rowFeatured}`,children:[s.jsx("div",{className:rt.splitMain,children:s.jsxs(zZ,{children:[s.jsx(jb,{href:nee,title:t("home.guidehub.title"),subtitle:t("home.guidehub.subtitle"),previewImageSrc:Kj,previewAlt:t("home.guidehub.previewAlt"),className:Jr.guidehubScale,i18nScope:"home.guidehub",titleI18nKey:"home.guidehub.title",subtitleI18nKey:"home.guidehub.subtitle",previewAltI18nKey:"home.guidehub.previewAlt",linkAriaLabel:t("home.guidehub.open"),linkAriaI18nKey:"home.guidehub.open"}),s.jsx(jb,{href:"https://sftools.mar21.eu/",title:t("home.sftools.title"),subtitle:t("home.sftools.subtitle"),previewImageSrc:ree,previewAlt:t("home.sftools.previewAlt"),previewHeightOverride:QT,i18nScope:"home.sftools",titleI18nKey:"home.sftools.title",subtitleI18nKey:"home.sftools.subtitle",previewAltI18nKey:"home.sftools.previewAlt"}),s.jsx(jb,{href:aee,title:t("home.taverndiscord.title"),subtitle:t("home.taverndiscord.subtitle"),previewImageSrc:iee,previewAlt:t("home.taverndiscord.previewAlt"),previewHeightOverride:QT,i18nScope:"home.taverndiscord",titleI18nKey:"home.taverndiscord.title",subtitleI18nKey:"home.taverndiscord.subtitle",previewAltI18nKey:"home.taverndiscord.previewAlt"})]})}),s.jsx("div",{className:rt.splitSide,children:s.jsx(fee,{})})]}),s.jsx(xee,{open:e,onClose:()=>n(!1)})]})},ZT="sfh:authNext",e3=t=>{if(!t)return null;const e=t.trim();return!e.startsWith("/")||e.startsWith("//")||/^[a-z][a-z0-9+.-]*:/i.test(e)||e.toLowerCase().startsWith("/login")?null:e},bee=()=>{const t=Wr(),e=qn(),{status:n,user:r}=xa(),i=n==="authenticated"&&!!r,a=q.useMemo(()=>new URLSearchParams(e.search).get("next"),[e.search]),o=q.useMemo(()=>{if(typeof window=="undefined")return null;try{return window.sessionStorage.getItem(ZT)}catch(u){return console.warn("[Login] Failed to read auth next from sessionStorage",u),null}},[]),c=q.useMemo(()=>{var u;return(u=e3(a))!=null?u:e3(o)},[a,o]);return q.useEffect(()=>{if(!i)return;const u=c;typeof window!="undefined"&&window.sessionStorage&&window.sessionStorage.removeItem(ZT),u&&t(u,{replace:!0})},[i,t,c]),s.jsx(as,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:s.jsx(Y4,{})})};function _ee(){return s.jsx(as,{hex:s.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:s.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:s.jsx(wee,{}),right:s.jsx(jee,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(Sb,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),s.jsx(Sb,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),s.jsx(Sb,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function wee(){return s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Nb,{to:"/dashboard/kpis",children:"KPIs"}),s.jsx(Nb,{to:"/dashboard/activity",children:"Activity"}),s.jsx(Nb,{to:"/dashboard/progression",children:"Progression"})]})]})}function jee(){return s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),s.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function Sb({to:t,title:e,desc:n}){return s.jsxs(zs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),n?s.jsx("div",{className:"mt-1 text-sm opacity-75",children:n}):null]})}function Nb({to:t,children:e}){return s.jsx(zs,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function See(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  KPIs"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(kb,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),s.jsx(kb,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),s.jsx(kb,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function kb({label:t,value:e,hint:n}){return s.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),s.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Nee(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  Activity"}),s.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),s.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[s.jsx("li",{children:" Neues Scan-File hochgeladen"}),s.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),s.jsx("li",{children:" Gilden-Event geplant"})]})]})}function kee(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  Progression"}),s.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[s.jsx(Cb,{title:"Scrapbook 100%",progress:72}),s.jsx(Cb,{title:"Fortress Ausbaustufe",progress:48}),s.jsx(Cb,{title:"Underworld Boss",progress:35})]})]})}function Cb({title:t,progress:e}){return s.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),s.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:s.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),s.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function Cee(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Discover"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(Vc,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),s.jsx(Vc,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),s.jsx(Vc,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),s.jsx(Vc,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),s.jsx(Vc,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),s.jsx(Vc,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),s.jsx(Vc,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function Vc({to:t,title:e,desc:n}){return s.jsxs(zs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Tee({children:t,framed:e=!0}){return e?s.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:Xo.border,backgroundColor:Xo.tile},children:t}):s.jsx("main",{className:"min-w-0",children:t})}function Iee(t,e){if(!t)return"";const n=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return n;const r=n.includes("?")?"&":"?";return`${n}${r}bg=transparent&background=transparent`}const Eee=({srcOrId:t,aspectRatio:e="16/10",height:n,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:o=!1,infoText:c="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[m,g]=P.useState(!1),x=P.useMemo(()=>Iee(t,h),[t,h]),b=i?"lazy":"eager",w={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},k={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},A=n?{position:"relative",width:"100%",height:n,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},L={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return s.jsx("div",{className:a,style:w,children:s.jsx("div",{style:k,children:s.jsxs("div",{style:A,children:[s.jsx("iframe",{src:x,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:b,scrolling:"no",title:"Heyzine Flipbook"}),o&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(I=>!I),style:L,title:"Info",children:"i"}),m&&s.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[c," ",s.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},Aee="#0C1C2E",Pee=()=>s.jsx(as,{children:s.jsx(Tee,{children:s.jsxs("div",{style:{position:"relative",width:"100%"},children:[s.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:Aee,borderRadius:16,pointerEvents:"none",zIndex:0}}),s.jsx("div",{style:{position:"relative",zIndex:1},children:s.jsx(Eee,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),Ree="_pageWrap_72re9_7",Lee="_infoLine_72re9_17",Dee="_viewerHost_72re9_43",Mee="_overlay_72re9_99",Fee="_dragZoneLeft_72re9_101",Bee="_dragZoneRight_72re9_103",$ee="_inbookLink_72re9_105",Bl={pageWrap:Ree,infoLine:Lee,viewerHost:Dee,overlay:Mee,dragZoneLeft:Fee,dragZoneRight:Bee,inbookLink:$ee};var Sm={exports:{}},Oee=Sm.exports,t3;function Vee(){return t3||(t3=1,(function(t,e){(function(n,r){r(e)})(Oee,(function(n){class r{constructor(v,_){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=_,this.nowDrawingDensity=this.createdDensity,this.render=v}setDensity(v){this.createdDensity=v,this.nowDrawingDensity=v}setDrawingDensity(v){this.nowDrawingDensity=v}setPosition(v){this.state.position=v}setAngle(v){this.state.angle=v}setArea(v){this.state.area=v}setHardDrawingAngle(v){this.state.hardDrawingAngle=v}setHardAngle(v){this.state.hardAngle=v,this.state.hardDrawingAngle=v}setOrientation(v){this.orientation=v}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(v,_,R){super(v,R),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=_}draw(v){const _=this.render.getContext(),R=this.render.convertToGlobal(this.state.position),j=this.render.getRect().pageWidth,S=this.render.getRect().height;_.save(),_.translate(R.x,R.y),_.beginPath();for(let C of this.state.area)C!==null&&(C=this.render.convertToGlobal(C),_.lineTo(C.x-R.x,C.y-R.y));_.rotate(this.state.angle),_.clip(),this.isLoad?_.drawImage(this.image,0,0,j,S):this.drawLoader(_,{x:0,y:0},j,S),_.restore()}simpleDraw(v){const _=this.render.getRect(),R=this.render.getContext(),j=_.pageWidth,S=_.height,C=v===1?_.left+_.pageWidth:_.left,M=_.top;this.isLoad?R.drawImage(this.image,C,M,j,S):this.drawLoader(R,{x:C,y:M},j,S)}drawLoader(v,_,R,j){v.beginPath(),v.strokeStyle="rgb(200, 200, 200)",v.fillStyle="rgb(255, 255, 255)",v.lineWidth=1,v.rect(_.x+1,_.y+1,R-1,j-1),v.stroke(),v.fill();const S={x:_.x+R/2,y:_.y+j/2};v.beginPath(),v.lineWidth=10,v.arc(S.x,S.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),v.stroke(),v.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(v,_){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=_,this.app=v,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let _=0;_<this.pages.length;_++)this.portraitSpread.push([_]);let v=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([v]),v++);for(let _=v;_<this.pages.length;_+=2)_<this.pages.length-1?this.landscapeSpread.push([_,_+1]):(this.landscapeSpread.push([_]),this.pages[_].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(v){const _=this.getSpread();for(let R=0;R<_.length;R++)if(v===_[R][0]||v===_[R][1])return R;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(v){if(v>=0&&v<this.pages.length)return this.pages[v];throw new Error("Invalid page number")}nextBy(v){const _=this.pages.indexOf(v);return _<this.pages.length-1?this.pages[_+1]:null}prevBy(v){const _=this.pages.indexOf(v);return _>0?this.pages[_-1]:null}getFlippingPage(v){const _=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return v===0?this.pages[_].newTemporaryCopy():this.pages[_-1];{const R=v===0?this.getSpread()[_+1]:this.getSpread()[_-1];return R.length===1||v===0?this.pages[R[0]]:this.pages[R[1]]}}getBottomPage(v){const _=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return v===0?this.pages[_+1]:this.pages[_-1];{const R=v===0?this.getSpread()[_+1]:this.getSpread()[_-1];return R.length===1?this.pages[R[0]]:v===0?this.pages[R[1]]:this.pages[R[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(v=null){if(v===null&&(v=this.currentPageIndex),v<0||v>=this.pages.length)return;const _=this.getSpreadIndexByPage(v);_!==null&&(this.currentSpreadIndex=_,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(v){if(!(v>=0&&v<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=v}showSpread(){const v=this.getSpread()[this.currentSpreadIndex];v.length===2?(this.render.setLeftPage(this.pages[v[0]]),this.render.setRightPage(this.pages[v[1]])):this.render.getOrientation()==="landscape"&&v[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[v[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[v[0]])),this.currentPageIndex=v[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends a{constructor(v,_,R){super(v,_),this.imagesHref=R}load(){for(const v of this.imagesHref){const _=new i(this.render,v,"soft");_.load(),this.pages.push(_)}this.createSpread()}}class c{static GetDistanceBetweenTwoPoint(v,_){return v===null||_===null?1/0:Math.sqrt(Math.pow(_.x-v.x,2)+Math.pow(_.y-v.y,2))}static GetSegmentLength(v){return c.GetDistanceBetweenTwoPoint(v[0],v[1])}static GetAngleBetweenTwoLine(v,_){const R=v[0].y-v[1].y,j=_[0].y-_[1].y,S=v[1].x-v[0].x,C=_[1].x-_[0].x;return Math.acos((R*j+S*C)/(Math.sqrt(R*R+S*S)*Math.sqrt(j*j+C*C)))}static PointInRect(v,_){return _===null?null:_.x>=v.left&&_.x<=v.width+v.left&&_.y>=v.top&&_.y<=v.top+v.height?_:null}static GetRotatedPoint(v,_,R){return{x:v.x*Math.cos(R)+v.y*Math.sin(R)+_.x,y:v.y*Math.cos(R)-v.x*Math.sin(R)+_.y}}static LimitPointToCircle(v,_,R){if(c.GetDistanceBetweenTwoPoint(v,R)<=_)return R;const j=v.x,S=v.y,C=R.x,M=R.y;let T=Math.sqrt(Math.pow(_,2)*Math.pow(j-C,2)/(Math.pow(j-C,2)+Math.pow(S-M,2)))+j;R.x<0&&(T*=-1);let F=(T-j)*(S-M)/(j-C)+S;return j-C+S===0&&(F=_),{x:T,y:F}}static GetIntersectBetweenTwoSegment(v,_,R){return c.PointInRect(v,c.GetIntersectBeetwenTwoLine(_,R))}static GetIntersectBeetwenTwoLine(v,_){const R=v[0].y-v[1].y,j=_[0].y-_[1].y,S=v[1].x-v[0].x,C=_[1].x-_[0].x,M=v[0].x*v[1].y-v[1].x*v[0].y,T=_[0].x*_[1].y-_[1].x*_[0].y,F=R*T-j*M,D=S*T-C*M,V=-(M*C-T*S)/(R*C-j*S),U=-(R*T-j*M)/(R*C-j*S);if(isFinite(V)&&isFinite(U))return{x:V,y:U};if(Math.abs(F-D)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(v,_){const R=Math.abs(v.x-_.x),j=Math.abs(v.y-_.y),S=Math.max(R,j),C=[v];function M(T,F,D,V,U){return F>T?T+U*(D/V):F<T?T-U*(D/V):T}for(let T=1;T<=S;T+=1)C.push({x:M(v.x,_.x,R,S,T),y:M(v.y,_.y,j,S,T)});return C}}class u extends r{constructor(v,_,R){super(v,R),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=_,this.element.classList.add("stf__item"),this.element.classList.add("--"+R)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(v){const _=v||this.nowDrawingDensity,R=this.render.convertToGlobal(this.state.position),j=this.render.getRect().pageWidth,S=this.render.getRect().height;this.element.classList.remove("--simple");const C=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${j}px;
            height: ${S}px;
        `;_==="hard"?this.drawHard(C):this.drawSoft(R,C)}drawHard(v=""){const _=this.render.getRect().left+this.render.getRect().width/2,R=this.state.hardDrawingAngle,j=v+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${R}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${_}px, 0, 0) rotateY(${R}deg);`);this.element.style.cssText=j}drawSoft(v,_=""){let R="polygon( ";for(const S of this.state.area)if(S!==null){let C=this.render.getDirection()===1?{x:-S.x+this.state.position.x,y:S.y-this.state.position.y}:{x:S.x-this.state.position.x,y:S.y-this.state.position.y};C=c.GetRotatedPoint(C,{x:0,y:0},this.state.angle),R+=C.x+"px "+C.y+"px, "}R=R.slice(0,-2),R+=")";const j=_+`transform-origin: 0 0; clip-path: ${R}; -webkit-clip-path: ${R};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${v.x}px, ${v.y}px);`:`transform: translate3d(${v.x}px, ${v.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=j}simpleDraw(v){const _=this.render.getRect(),R=_.pageWidth,j=_.height,S=v===1?_.left+_.pageWidth:_.left,C=_.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${j}px; 
            left: ${S}px; 
            top: ${C}px; 
            width: ${R}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(v){super.setOrientation(v),this.element.classList.remove("--left","--right"),this.element.classList.add(v===1?"--right":"--left")}setDrawingDensity(v){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+v),super.setDrawingDensity(v)}}class h extends a{constructor(v,_,R,j){super(v,_),this.element=R,this.pagesElement=j}load(){for(const v of this.pagesElement){const _=new u(this.render,v,v.dataset.density==="hard"?"hard":"soft");_.load(),this.pages.push(_)}this.createSpread()}}class m{constructor(v,_,R,j){this.direction=v,this.corner=_,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(R,10),this.pageHeight=parseInt(j,10)}calc(v){try{return this.position=this.calcAngleAndPosition(v),this.calculateIntersectPoint(this.position),!0}catch(_){return!1}}getFlippingClipArea(){const v=[];let _=!1;return v.push(this.rect.topLeft),v.push(this.topIntersectPoint),this.sideIntersectPoint===null?_=!0:(v.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(_=!1)),v.push(this.bottomIntersectPoint),(_||this.corner==="bottom")&&v.push(this.rect.bottomLeft),v}getBottomClipArea(){const v=[];return v.push(this.topIntersectPoint),this.corner==="top"?v.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&v.push({x:this.pageWidth,y:0}),v.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?c.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&v.push(this.sideIntersectPoint):this.corner==="top"&&v.push({x:this.pageWidth,y:this.pageHeight}),v.push(this.bottomIntersectPoint),v.push(this.topIntersectPoint),v}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const v=c.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?v:Math.PI-v}calcAngleAndPosition(v){let _=v;if(this.updateAngleAndGeometry(_),_=this.corner==="top"?this.checkPositionAtCenterLine(_,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(_,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(_.x-this.pageWidth)<1&&Math.abs(_.y)<1)throw new Error("Point is too small");return _}updateAngleAndGeometry(v){this.angle=this.calculateAngle(v),this.rect=this.getPageRect(v)}calculateAngle(v){const _=this.pageWidth-v.x+1,R=this.corner==="bottom"?this.pageHeight-v.y:v.y;let j=2*Math.acos(_/Math.sqrt(R*R+_*_));R<0&&(j=-j);const S=Math.PI-j;if(!isFinite(j)||S>=0&&S<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(j=-j),j}getPageRect(v){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],v):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],v)}getRectFromBasePoint(v,_){return{topLeft:this.getRotatedPoint(v[0],_),topRight:this.getRotatedPoint(v[1],_),bottomLeft:this.getRotatedPoint(v[2],_),bottomRight:this.getRotatedPoint(v[3],_)}}getRotatedPoint(v,_){return{x:v.x*Math.cos(this.angle)+v.y*Math.sin(this.angle)+_.x,y:v.y*Math.cos(this.angle)-v.x*Math.sin(this.angle)+_.y}}calculateIntersectPoint(v){const _={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(_,[v,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(_,[v,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(_,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(_,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(_,[v,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(_,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(v,_,R){let j=v;const S=c.LimitPointToCircle(_,this.pageWidth,j);j!==S&&(j=S,this.updateAngleAndGeometry(j));const C=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let M=this.rect.bottomRight,T=this.rect.topLeft;if(this.corner==="bottom"&&(M=this.rect.topRight,T=this.rect.bottomLeft),M.x<=0){const F=c.LimitPointToCircle(R,C,T);F!==j&&(j=F,this.updateAngleAndGeometry(j))}return j}getSegmentToShadowLine(){const v=this.getShadowStartPoint();return[v,v!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(v,_){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=v,this.app=_}fold(v){this.setState("user_fold"),this.calc===null&&this.start(v),this.do(this.render.convertToPage(v))}flip(v){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(v)||(this.calc!==null&&this.render.finishAnimation(),!this.start(v)))return;const _=this.getBoundsRect();this.setState("flipping");const R=_.height/10,j=this.calc.getCorner()==="bottom"?_.height-R:R,S=this.calc.getCorner()==="bottom"?_.height:0;this.calc.calc({x:_.pageWidth-R,y:j}),this.animateFlippingTo({x:_.pageWidth-R,y:j},{x:-_.pageWidth,y:S},!0)}start(v){this.reset();const _=this.render.convertToBook(v),R=this.getBoundsRect(),j=this.getDirectionByPoint(_),S=_.y>=R.height/2?"bottom":"top";if(!this.checkDirection(j))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(j),this.bottomPage=this.app.getPageCollection().getBottomPage(j),this.render.getOrientation()==="landscape")if(j===1){const C=this.app.getPageCollection().nextBy(this.flippingPage);C!==null&&this.flippingPage.getDensity()!==C.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),C.setDrawingDensity("hard"))}else{const C=this.app.getPageCollection().prevBy(this.flippingPage);C!==null&&this.flippingPage.getDensity()!==C.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),C.setDrawingDensity("hard"))}return this.render.setDirection(j),this.calc=new m(j,S,R.pageWidth.toString(10),R.height.toString(10)),!0}catch(C){return!1}}do(v){if(this.calc!==null&&this.calc.calc(v)){const _=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*_)/100):this.flippingPage.setHardAngle(-90*(200-2*_)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),_,this.calc.getDirection())}}flipToPage(v,_){const R=this.app.getPageCollection().getCurrentSpreadIndex(),j=this.app.getPageCollection().getSpreadIndexByPage(v);try{j>R&&(this.app.getPageCollection().setCurrentSpreadIndex(j-1),this.flipNext(_)),j<R&&(this.app.getPageCollection().setCurrentSpreadIndex(j+1),this.flipPrev(_))}catch(S){}}flipNext(v){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:v==="top"?1:this.render.getRect().height-2})}flipPrev(v){this.flip({x:10,y:v==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const v=this.calc.getPosition(),_=this.getBoundsRect(),R=this.calc.getCorner()==="bottom"?_.height:0;v.x<=0?this.animateFlippingTo(v,{x:-_.pageWidth,y:R},!0):this.animateFlippingTo(v,{x:_.pageWidth,y:R},!1)}showCorner(v){if(!this.checkState("read","fold_corner"))return;const _=this.getBoundsRect(),R=_.pageWidth;if(this.isPointOnCorners(v))if(this.calc===null){if(!this.start(v))return;this.setState("fold_corner"),this.calc.calc({x:R-1,y:1});const j=50,S=this.calc.getCorner()==="bottom"?_.height-1:1,C=this.calc.getCorner()==="bottom"?_.height-j:j;this.animateFlippingTo({x:R-1,y:S},{x:R-j,y:C},!1,!1)}else this.do(this.render.convertToPage(v));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(v,_,R,j=!0){const S=c.GetCordsFromTwoPoint(v,_),C=[];for(const T of S)C.push(()=>this.do(T));const M=this.getAnimationDuration(S.length);this.render.startAnimation(C,M,()=>{this.calc&&(R&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),j&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(v){this.state!==v&&(this.app.updateState(v),this.state=v)}getDirectionByPoint(v){const _=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(v.x-_.pageWidth<=_.width/5)return 1}else if(v.x<_.width/2)return 1;return 0}getAnimationDuration(v){const _=this.app.getSettings().flippingTime;return v>=1e3?_:v/1e3*_}checkDirection(v){return v===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...v){for(const _ of v)if(this.state===_)return!0;return!1}isPointOnCorners(v){const _=this.getBoundsRect(),R=_.pageWidth,j=Math.sqrt(Math.pow(R,2)+Math.pow(_.height,2))/5,S=this.render.convertToBook(v);return S.x>0&&S.y>0&&S.x<_.width&&S.y<_.height&&(S.x<j||S.x>_.width-j)&&(S.y<j||S.y>_.height-j)}}class x{constructor(v,_){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=_,this.app=v;const R=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=R.exec(window.navigator.userAgent)!==null}render(v){if(this.animation!==null){const _=Math.round((v-this.animation.startedAt)/this.animation.durationFrame);_<this.animation.frames.length?this.animation.frames[_]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=v,this.drawFrame()}start(){this.update();const v=_=>{this.render(_),requestAnimationFrame(v)};requestAnimationFrame(v)}startAnimation(v,_,R){this.finishAnimation(),this.animation={frames:v,duration:_,durationFrame:_/v.length,onAnimateEnd:R,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const v=this.calculateBoundsRect();this.orientation!==v&&(this.orientation=v,this.app.updateOrientation(v))}calculateBoundsRect(){let v="landscape";const _=this.getBlockWidth(),R=_/2,j=this.getBlockHeight()/2,S=this.setting.width/this.setting.height;let C=this.setting.width,M=this.setting.height,T=R-C;return this.setting.size==="stretch"?(_<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(v="portrait"),C=v==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,C>this.setting.maxWidth&&(C=this.setting.maxWidth),M=C/S,M>this.getBlockHeight()&&(M=this.getBlockHeight(),C=M*S),T=v==="portrait"?R-C/2-C:R-C):_<2*C&&this.app.getSettings().usePortrait&&(v="portrait",T=R-C/2-C),this.boundsRect={left:T,top:j-M/2,width:2*C,height:M,pageWidth:C},v}setShadowData(v,_,R,j){if(!this.app.getSettings().drawShadow)return;const S=100*this.getSettings().maxShadowOpacity;this.shadow={pos:v,angle:_,width:3*this.getRect().pageWidth/4*R/100,opacity:(100-R)*S/100/100,direction:j,progress:2*R}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(v){this.pageRect=v}setDirection(v){this.direction=v}setRightPage(v){v!==null&&v.setOrientation(1),this.rightPage=v}setLeftPage(v){v!==null&&v.setOrientation(0),this.leftPage=v}setBottomPage(v){v!==null&&v.setOrientation(this.direction===1?0:1),this.bottomPage=v}setFlippingPage(v){v!==null&&v.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=v}convertToBook(v){const _=this.getRect();return{x:v.x-_.left,y:v.y-_.top}}isSafari(){return this.safari}convertToPage(v,_){_||(_=this.direction);const R=this.getRect();return{x:_===0?v.x-R.left-R.width/2:R.width/2-v.x+R.left,y:v.y-R.top}}convertToGlobal(v,_){if(_||(_=this.direction),v==null)return null;const R=this.getRect();return{x:_===0?v.x+R.left+R.width/2:R.width/2-v.x+R.left,y:v.y+R.top}}convertRectToGlobal(v,_){return _||(_=this.direction),{topLeft:this.convertToGlobal(v.topLeft,_),topRight:this.convertToGlobal(v.topRight,_),bottomLeft:this.convertToGlobal(v.bottomLeft,_),bottomRight:this.convertToGlobal(v.bottomRight,_)}}}class b extends x{constructor(v,_,R){super(v,_),this.canvas=R,this.ctx=R.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const v=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(v.left+v.pageWidth,v.top,v.width,v.height),this.ctx.clip())}drawBookShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath();const _=v.width/20;this.ctx.rect(v.left,v.top,v.width,v.height);const R={x:v.left+v.width/2-_/2,y:0};this.ctx.translate(R.x,R.y);const j=this.ctx.createLinearGradient(0,0,_,0);j.addColorStop(0,"rgba(0, 0, 0, 0)"),j.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),j.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),j.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),j.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),j.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=j,this.ctx.fillRect(0,0,_,2*v.height),this.ctx.restore()}drawOuterShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(v.left,v.top,v.width,v.height);const _=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(_.x,_.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const R=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),R.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),R.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),R.addColorStop(0,"rgba(0, 0, 0, 0)"),R.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=R,this.ctx.fillRect(0,0,this.shadow.width,2*v.height),this.ctx.restore()}drawInnerShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath();const _=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),R=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(R.topLeft.x,R.topLeft.y),this.ctx.lineTo(R.topRight.x,R.topRight.y),this.ctx.lineTo(R.bottomRight.x,R.bottomRight.y),this.ctx.lineTo(R.bottomLeft.x,R.bottomLeft.y),this.ctx.translate(_.x,_.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const j=3*this.shadow.width/4,S=this.ctx.createLinearGradient(0,0,j,0);this.shadow.direction===0?(this.ctx.translate(-j,-100),S.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),S.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=S,this.ctx.fillRect(0,0,j,2*v.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class w{constructor(v,_,R){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=S=>{if(this.checkTarget(S.target)){const C=this.getMousePos(S.clientX,S.clientY);this.app.startUserTouch(C),S.preventDefault()}},this.onTouchStart=S=>{if(this.checkTarget(S.target)&&S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);this.touchPoint={point:M,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(M)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||S.preventDefault()}},this.onMouseUp=S=>{const C=this.getMousePos(S.clientX,S.clientY);this.app.userStop(C)},this.onMouseMove=S=>{const C=this.getMousePos(S.clientX,S.clientY);this.app.userMove(C,!1)},this.onTouchMove=S=>{if(S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-M.x)>10||this.app.getState()!=="read")&&S.cancelable&&this.app.userMove(M,!0),this.app.getState()!=="read"&&S.preventDefault()):this.app.userMove(M,!0)}},this.onTouchEnd=S=>{if(S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);let T=!1;if(this.touchPoint!==null){const F=M.x-this.touchPoint.point.x,D=Math.abs(M.y-this.touchPoint.point.y);Math.abs(F)>this.swipeDistance&&D<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(F>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),T=!0),this.touchPoint=null}this.app.userStop(M,T)}},this.parentElement=v,v.classList.add("stf__parent"),v.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=v.querySelector(".stf__wrapper"),this.app=_;const j=this.app.getSettings().usePortrait?1:2;v.style.minWidth=R.minWidth*j+"px",v.style.minHeight=R.minHeight+"px",R.size==="fixed"&&(v.style.minWidth=R.width*j+"px",v.style.minHeight=R.height+"px"),R.autoSize&&(v.style.width="100%",v.style.maxWidth=2*R.maxWidth+"px"),v.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=R.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(v){this.wrapper.classList.remove("--portrait","--landscape"),v==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(v,_){const R=this.distElement.getBoundingClientRect();return{x:v-R.left,y:_-R.top}}checkTarget(v){return!this.app.getSettings().clickEventForward||!["a","button"].includes(v.tagName.toLowerCase())}}class k extends w{constructor(v,_,R,j){super(v,_,R),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=v.querySelector(".stf__block"),this.items=j;for(const S of j)this.distElement.appendChild(S);this.setHandlers()}clear(){for(const v of this.items)this.parentElement.appendChild(v)}updateItems(v){this.removeHandlers(),this.distElement.innerHTML="";for(const _ of v)this.distElement.appendChild(_);this.items=v,this.setHandlers()}update(){this.app.getRender().update()}}class A extends w{constructor(v,_,R){super(v,_,R),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=v.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const v=getComputedStyle(this.canvas),_=parseInt(v.getPropertyValue("width"),10),R=parseInt(v.getPropertyValue("height"),10);this.canvas.width=_,this.canvas.height=R}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class L extends x{constructor(v,_,R){super(v,_),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=R,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const v=this.getRect(),_=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let R=(100-_)*(2.5*v.pageWidth)/100+20;R>v.pageWidth&&(R=v.pageWidth);let j=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${R}px;
            height: ${v.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*_/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${v.left+v.width/2}px;
            transform-origin: 0 0;
        `;j+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=j}drawHardOuterShadow(){const v=this.getRect();let _=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*v.pageWidth)/100+20;_>v.pageWidth&&(_=v.pageWidth);let R=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${_}px;
            height: ${v.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${v.left+v.width/2}px;
            transform-origin: 0 0;
        `;R+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=R}drawInnerShadow(){const v=this.getRect(),_=3*this.shadow.width/4,R=this.getDirection()===0?_:0,j=this.getDirection()===0?"to left":"to right",S=this.convertToGlobal(this.shadow.pos),C=this.shadow.angle+3*Math.PI/2,M=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let T="polygon( ";for(const D of M){let V=this.getDirection()===1?{x:-D.x+this.shadow.pos.x,y:D.y-this.shadow.pos.y}:{x:D.x-this.shadow.pos.x,y:D.y-this.shadow.pos.y};V=c.GetRotatedPoint(V,{x:R,y:100},C),T+=V.x+"px "+V.y+"px, "}T=T.slice(0,-2),T+=")";const F=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${_}px;
            height: ${2*v.height}px;
            background: linear-gradient(${j},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${R}px 100px;
            transform: translate3d(${S.x-R}px, ${S.y-100}px, 0) rotate(${C}rad);
            clip-path: ${T};
            -webkit-clip-path: ${T};
        `;this.innerShadow.style.cssText=F}drawOuterShadow(){const v=this.getRect(),_=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),R=this.shadow.angle+3*Math.PI/2,j=this.getDirection()===1?this.shadow.width:0,S=this.getDirection()===0?"to right":"to left",C=[{x:0,y:0},{x:v.pageWidth,y:0},{x:v.pageWidth,y:v.height},{x:0,y:v.height}];let M="polygon( ";for(const F of C)if(F!==null){let D=this.getDirection()===1?{x:-F.x+this.shadow.pos.x,y:F.y-this.shadow.pos.y}:{x:F.x-this.shadow.pos.x,y:F.y-this.shadow.pos.y};D=c.GetRotatedPoint(D,{x:j,y:100},R),M+=D.x+"px "+D.y+"px, "}M=M.slice(0,-2),M+=")";const T=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*v.height}px;
            background: linear-gradient(${S}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${j}px 100px;
            transform: translate3d(${_.x-j}px, ${_.y-100}px, 0) rotate(${R}rad);
            clip-path: ${M};
            -webkit-clip-path: ${M};
        `;this.outerShadow.style.cssText=T}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const v=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(v))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const v of this.app.getPageCollection().getPages())v!==this.leftPage&&v!==this.rightPage&&v!==this.flippingPage&&v!==this.bottomPage&&(v.getElement().style.cssText="display: none"),v.getTemporaryCopy()!==this.flippingPage&&v.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class I{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(v){const _=this._default;if(Object.assign(_,v),_.size!=="stretch"&&_.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(_.width<=0||_.height<=0)throw new Error("Invalid width or height");if(_.flippingTime<=0)throw new Error("Invalid flipping time");return _.size==="stretch"?(_.minWidth<=0&&(_.minWidth=100),_.maxWidth<_.minWidth&&(_.maxWidth=2e3),_.minHeight<=0&&(_.minHeight=100),_.maxHeight<_.minHeight&&(_.maxHeight=2e3)):(_.minWidth=_.width,_.maxWidth=_.width,_.minHeight=_.height,_.maxHeight=_.height),_}}(function(N,v){v===void 0&&(v={});var _=v.insertAt;if(typeof document!="undefined"){var R=document.head||document.getElementsByTagName("head")[0],j=document.createElement("style");j.type="text/css",_==="top"&&R.firstChild?R.insertBefore(j,R.firstChild):R.appendChild(j),j.styleSheet?j.styleSheet.cssText=N:j.appendChild(document.createTextNode(N))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(N,v){return this.events.has(N)?this.events.get(N).push(v):this.events.set(N,[v]),this}off(N){this.events.delete(N)}trigger(N,v,_=null){if(this.events.has(N))for(const R of this.events.get(N))R({data:_,object:v})}}{constructor(N,v){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new I().getSettings(v),this.block=N}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(N){this.ui=new A(this.block,this,this.setting);const v=this.ui.getCanvas();this.render=new b(this,this.setting,v),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(N){this.ui=new k(this.block,this,this.setting,N),this.render=new L(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(N){const v=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,N),this.pages.load(),this.pages.show(v),this.trigger("update",this,{page:v,mode:this.render.getOrientation()})}updateFromHtml(N){const v=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.ui.updateItems(N),this.render.reload(),this.pages.show(v),this.trigger("update",this,{page:v,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(N){this.pages.show(N)}flipNext(N="top"){this.flipController.flipNext(N)}flipPrev(N="top"){this.flipController.flipPrev(N)}flip(N,v="top"){this.flipController.flipToPage(N,v)}updateState(N){this.trigger("changeState",this,N)}updatePageIndex(N){this.trigger("flip",this,N)}updateOrientation(N){this.ui.setOrientationStyle(N),this.update(),this.trigger("changeOrientation",this,N)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(N){return this.pages.getPage(N)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(N){this.mousePosition=N,this.isUserTouch=!0,this.isUserMove=!1}userMove(N,v){this.isUserTouch||v||!this.setting.showPageCorners?this.isUserTouch&&c.GetDistanceBetweenTwoPoint(this.mousePosition,N)>5&&(this.isUserMove=!0,this.flipController.fold(N)):this.flipController.showCorner(N)}userStop(N,v=!1){this.isUserTouch&&(this.isUserTouch=!1,v||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(N)))}},Object.defineProperty(n,"__esModule",{value:!0})}))})(Sm,Sm.exports)),Sm.exports}var Uee=Vee();const zee="_viewerRoot_hj39c_5",Gee="_stage_hj39c_17",Hee="_host_hj39c_43",Wee="_hud_hj39c_91",Kee="_hBtn_hj39c_125",qee="_hText_hj39c_153",Qee="_title_hj39c_167",Yee="_sep_hj39c_169",Xee="_spacer_hj39c_171",Jee="_errorBox_hj39c_175",Di={viewerRoot:zee,stage:Gee,host:Hee,hud:Wee,hBtn:Kee,hText:qee,title:Qee,sep:Yee,spacer:Xee,errorBox:Jee},Zee="/".endsWith("/")?"/":"//",zR=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${Zee}${e}`.replace(/\/{2,}/g,"/")},ete=async t=>{const e=zR(`flipbooks/${t}/manifest.json`),n=await fetch(e,{cache:"no-cache"});if(!n.ok)throw new Error(`Manifest not found for slug "${t}"`);return n.json()},tte=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},ste=(t,e,n)=>Math.max(e,Math.min(n,t)),Vn={hostEl:null,pf:null,slug:null},Ma={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},nte=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function rte(t){for(const e of t)e&&(Ma.cache.has(e)||Ma.inFlight.has(e)||Ma.queue.includes(e)||Ma.queue.push(e));GR()}function GR(){nte(()=>{for(;Ma.inFlight.size<Ma.maxParallel&&Ma.queue.length>0;){const t=Ma.queue.shift();Ma.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{Ma.inFlight.delete(t),Ma.cache.add(t),GR()},e.src=t}})}const ite=({slug:t,initialPage:e=1,onReady:n,onPageChange:r,noSound:i=!0})=>{const a=P.useRef(null),o=P.useRef(null),[c,u]=P.useState(null),[h,m]=P.useState(null),g=P.useRef(),x=P.useRef(),b=P.useRef(e);P.useEffect(()=>{g.current=n},[n]),P.useEffect(()=>{x.current=r},[r]),P.useEffect(()=>{b.current=e},[e]);const w=P.useMemo(()=>zR(`flipbooks/${t}`),[t]),k=P.useCallback(N=>{var v,_;if((v=N.srcset)!=null&&v.length){const R=[...N.srcset].sort((S,C)=>S.width-C.width),j=(_=R.find(S=>S.width>=1600))!=null?_:R[R.length-1];return/^https?:\/\//i.test(j.src)||j.src.startsWith("/")?j.src:`${w}/${j.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(N.src)||N.src.startsWith("/")?N.src:`${w}/${N.src}`.replace(/\/{2,}/g,"/")},[w]);P.useEffect(()=>{let N=!0;return m(null),ete(t).then(v=>{N&&u(v)}).catch(v=>{N&&m(v.message||"Failed to load flipbook manifest.")}),()=>{N=!1}},[t]),P.useEffect(()=>{const N=o.current,v=a.current;if(!N||!v||!c||(Vn.hostEl||(Vn.hostEl=document.createElement("div"),Vn.hostEl.className=Di.host),Vn.hostEl.parentElement!==N&&N.appendChild(Vn.hostEl),!Vn.hostEl.isConnected))return;if(!(!Vn.pf||Vn.slug!==t)){try{Vn.pf.update()}catch(D){}return}if(Vn.pf){try{Vn.pf.destroy()}catch(D){}Vn.pf=null}const R={width:c.pageWidth,height:c.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},j=new Uee.PageFlip(Vn.hostEl,R);Vn.pf=j,Vn.slug=t;const S=c.pages.map(k);j.loadFromImages(S);const C=D=>{const V=[],U=D+1,K=D+2;c.pages[U]&&V.push(k(c.pages[U])),c.pages[K]&&V.push(k(c.pages[K])),rte(V)},M=()=>{var V;const D=ste(b.current,1,c.pageCount)-1;j.turnToPage(D,"hard"),setTimeout(()=>C(D),220),(V=g.current)==null||V.call(g,j)};j.on("init",M),j.on("flip",D=>{var U;const V=D.data;(U=x.current)==null||U.call(x,V),setTimeout(()=>C(V),220)});const T=new ResizeObserver(()=>{var D;try{(D=Vn.pf)==null||D.update()}catch(V){}});T.observe(v);const F=D=>{var V,U;D.key==="ArrowLeft"&&(D.preventDefault(),(V=Vn.pf)==null||V.flipPrev()),D.key==="ArrowRight"&&(D.preventDefault(),(U=Vn.pf)==null||U.flipNext())};return window.addEventListener("keydown",F,{passive:!1}),()=>{window.removeEventListener("keydown",F),T.disconnect()}},[c,k,t]);const A=()=>{var N;return(N=Vn.pf)==null?void 0:N.flipPrev()},L=()=>{var N;return(N=Vn.pf)==null?void 0:N.flipNext()},I=()=>{var _;const N=a.current;if(!N)return;const v=N;(_=v.requestFullscreen||v.webkitRequestFullscreen||v.msRequestFullscreen)==null||_.call(v)};return h?s.jsxs("div",{className:Di.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):c?s.jsxs("div",{className:Di.viewerRoot,ref:a,"aria-label":c.title,children:[s.jsx("div",{className:Di.stage,ref:o}),s.jsxs("div",{className:Di.hud,children:[s.jsx("button",{className:Di.hBtn,onClick:A,"aria-label":"Zurck",children:""}),s.jsxs("div",{className:Di.hText,children:[s.jsx("span",{className:Di.title,children:c.title}),s.jsx("span",{className:Di.sep,children:""}),s.jsxs("span",{children:[c.pageCount," Seiten"]})]}),s.jsx("div",{className:Di.spacer}),tte()&&s.jsx("button",{className:Di.hBtn,onClick:I,"aria-label":"Fullscreen",children:""}),s.jsx("button",{className:Di.hBtn,onClick:L,"aria-label":"Weiter",children:""})]})]}):s.jsx("div",{className:Di.errorBox,children:"Lade Flipbook"})},ate=q.memo(ite),ote={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},lte=()=>{const t="sf-history-book",[e,n]=P.useState(1),r=P.useRef(null),i=P.useMemo(()=>{var m;return(m=ote[e])!=null?m:[]},[e]),a=P.useCallback(m=>{r.current=m},[]),o=P.useCallback(m=>{n(m+1)},[]),c=P.useCallback(m=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,m-1))}catch(x){}},[]),u=P.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipPrev()},[]),h=P.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipNext()},[]);return s.jsx(as,{title:"SF History Book",children:s.jsxs("div",{className:Bl.pageWrap,children:[s.jsx("div",{className:Bl.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),s.jsxs("div",{className:Bl.viewerHost,children:[s.jsx(ate,{slug:t,initialPage:1,onReady:a,onPageChange:o,noSound:!0}),s.jsxs("div",{className:Bl.overlay,"aria-hidden":!0,children:[s.jsx("div",{className:Bl.dragZoneLeft,onClick:u}),s.jsx("div",{className:Bl.dragZoneRight,onClick:h}),i.map((m,g)=>{const x={"--t":`${m.t}%`,"--l":`${m.l}%`,"--w":`${m.w}%`,"--h":`${m.h}%`};return m.kind==="goto"?s.jsx("button",{className:Bl.inbookLink,style:x,"aria-label":m.label,onClick:()=>c(m.toPage)},g):s.jsx("a",{className:Bl.inbookLink,style:x,"aria-label":m.label,href:m.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},cte="_root_zvspc_1",dte="_hero_zvspc_15",ute="_eyebrow_zvspc_47",hte="_heading_zvspc_63",mte="_lead_zvspc_77",pte="_freshnessHint_zvspc_91",gte="_hintLabel_zvspc_105",fte="_hintText_zvspc_121",vte="_grid_zvspc_135",xte="_card_zvspc_147",yte="_cardTitle_zvspc_163",bte="_paragraph_zvspc_177",_te="_list_zvspc_191",wte="_listItem_zvspc_207",yi={root:cte,hero:dte,eyebrow:ute,heading:hte,lead:mte,freshnessHint:pte,hintLabel:gte,hintText:fte,grid:vte,card:xte,cardTitle:yte,paragraph:bte,list:_te,listItem:wte},jte=()=>{const{t}=Os(),e=t("help.dataFreshness.body").split(`

`),r=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}].filter(i=>i.key!=="legal");return s.jsx(as,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:s.jsxs("div",{className:yi.root,children:[s.jsxs("section",{className:yi.hero,children:[s.jsxs("div",{children:[s.jsx("p",{className:yi.eyebrow,children:t("help.hero.eyebrow")}),s.jsx("h1",{className:yi.heading,children:t("help.hero.heading")}),s.jsx("p",{className:yi.lead,children:t("help.hero.lead")})]}),s.jsxs("div",{className:yi.freshnessHint,children:[s.jsx("div",{className:yi.hintLabel,children:t("help.hero.freshnessLabel")}),s.jsx("p",{className:yi.hintText,children:t("help.hero.freshnessBody")})]})]}),s.jsx("div",{className:yi.grid,children:r.map(i=>{var o;const a=i.key==="login"?"linking":void 0;return s.jsxs("section",{id:a,className:yi.card,children:[s.jsx("h2",{className:yi.cardTitle,children:i.title}),(o=i.paragraphs)==null?void 0:o.map((c,u)=>s.jsx("p",{className:yi.paragraph,children:c},`${i.key}-p-${u}`)),i.bullets&&s.jsx("ul",{className:yi.list,children:i.bullets.map(c=>s.jsx("li",{className:yi.listItem,children:c},`${i.key}-${c}`))})]},i.key)})})]})})};function Ste(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const Nte=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function dc(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let hu=null;function HR(t={}){return hu||(t.includeStyleProperties?(hu=t.includeStyleProperties,hu):(hu=dc(window.getComputedStyle(document.documentElement)),hu))}function rx(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function kte(t){const e=rx(t,"border-left-width"),n=rx(t,"border-right-width");return t.clientWidth+e+n}function Cte(t){const e=rx(t,"border-top-width"),n=rx(t,"border-bottom-width");return t.clientHeight+e+n}function WR(t,e={}){const n=e.width||kte(t),r=e.height||Cte(t);return{width:n,height:r}}function Tte(){let t,e;try{e=process}catch(r){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Mi=16384;function Ite(t){(t.width>Mi||t.height>Mi)&&(t.width>Mi&&t.height>Mi?t.width>t.height?(t.height*=Mi/t.width,t.width=Mi):(t.width*=Mi/t.height,t.height=Mi):t.width>Mi?(t.height*=Mi/t.width,t.width=Mi):(t.width*=Mi/t.height,t.height=Mi))}function ix(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Ete(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Ate(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(t),Ete(i)}const Si=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Si(n,e)};function Pte(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Rte(t,e){return HR(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Lte(t,e,n,r){const i=`.${t}:${e}`,a=n.cssText?Pte(n):Rte(n,r);return document.createTextNode(`${i}{${a}}`)}function s3(t,e,n,r){const i=window.getComputedStyle(t,n),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=Nte();try{e.className=`${e.className} ${o}`}catch(u){return}const c=document.createElement("style");c.appendChild(Lte(o,n,i,r)),e.appendChild(c)}function Dte(t,e,n){s3(t,e,":before",n),s3(t,e,":after",n)}const n3="application/font-woff",r3="image/jpeg",Mte={woff:n3,woff2:n3,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:r3,jpeg:r3,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Fte(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function qj(t){const e=Fte(t).toLowerCase();return Mte[e]||""}function Bte(t){return t.split(/,/)[1]}function I_(t){return t.search(/^(data:)/)!==-1}function $te(t,e){return`data:${e};base64,${t}`}async function KR(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(n({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const Tb={};function Ote(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Qj(t,e,n){const r=Ote(t,e,n.includeQueryParams);if(Tb[r]!=null)return Tb[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const a=await KR(t,n.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),Bte(c)));i=$te(a,e)}catch(a){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return Tb[r]=i,i}async function Vte(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ix(e)}async function Ute(t,e){if(t.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,o==null||o.drawImage(t,0,0,a.width,a.height);const c=a.toDataURL();return ix(c)}const n=t.poster,r=qj(n),i=await Qj(n,r,e);return ix(i)}async function zte(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await uy(t.contentDocument.body,e,!0)}catch(r){}return t.cloneNode(!1)}async function Gte(t,e){return Si(t,HTMLCanvasElement)?Vte(t):Si(t,HTMLVideoElement)?Ute(t,e):Si(t,HTMLIFrameElement)?zte(t,e):t.cloneNode(qR(t))}const Hte=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",qR=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function Wte(t,e,n){var r,i;if(qR(e))return e;let a=[];return Hte(t)&&t.assignedNodes?a=dc(t.assignedNodes()):Si(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=dc(t.contentDocument.body.childNodes):a=dc(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),a.length===0||Si(t,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>uy(c,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function Kte(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):HR(n).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Si(t,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function qte(t,e){Si(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Si(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function Qte(t,e){if(Si(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Yte(t,e,n){return Si(e,Element)&&(Kte(t,e,n),Dte(t,e,n),qte(t,e),Qte(t,e)),e}async function Xte(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const c=n[a].getAttribute("xlink:href");if(c){const u=t.querySelector(c),h=document.querySelector(c);!u&&h&&!r[c]&&(r[c]=await uy(h,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);t.appendChild(o)}return t}async function uy(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>Gte(r,e)).then(r=>Wte(t,r,e)).then(r=>Yte(t,r,e)).then(r=>Xte(r,e))}const QR=/url\((['"]?)([^'"]+?)\1\)/g,Jte=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Zte=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ese(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function tse(t){const e=[];return t.replace(QR,(n,r,i)=>(e.push(i),n)),e.filter(n=>!I_(n))}async function sse(t,e,n,r,i){try{const a=n?Ste(e,n):e,o=qj(e);let c;return i||(c=await Qj(a,o,r)),t.replace(ese(e),`$1${c}$3`)}catch(a){}return t}function nse(t,{preferredFontFormat:e}){return e?t.replace(Zte,n=>{for(;;){const[r,,i]=Jte.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function YR(t){return t.search(QR)!==-1}async function XR(t,e,n){if(!YR(t))return t;const r=nse(t,n);return tse(r).reduce((a,o)=>a.then(c=>sse(c,o,e,n)),Promise.resolve(r))}async function mu(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const a=await XR(i,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function rse(t,e){await mu("background",t,e)||await mu("background-image",t,e),await mu("mask",t,e)||await mu("-webkit-mask",t,e)||await mu("mask-image",t,e)||await mu("-webkit-mask-image",t,e)}async function ise(t,e){const n=Si(t,HTMLImageElement);if(!(n&&!I_(t.src))&&!(Si(t,SVGImageElement)&&!I_(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Qj(r,qj(r),e);await new Promise((a,o)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(h){o(h)}}:o;const c=t;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function ase(t,e){const r=dc(t.childNodes).map(i=>JR(i,e));await Promise.all(r).then(()=>t)}async function JR(t,e){Si(t,Element)&&(await rse(t,e),await ise(t,e),await ase(t,e))}function ose(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const i3={};async function a3(t){let e=i3[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},i3[t]=e,e}async function o3(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,t.url).href),KR(c,e.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>n)}function l3(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function lse(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{dc(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,h=a3(u).then(m=>o3(m,e)).then(m=>l3(m).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(x){console.error("Error inserting rule from remote css",{rule:g,error:x})}})).catch(m=>{console.error("Error loading remote css",m.toString())});r.push(h)}})}catch(a){const o=t.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(a3(i.href).then(c=>o3(c,e)).then(c=>l3(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{dc(i.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),n))}function cse(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>YR(e.style.getPropertyValue("src")))}async function dse(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=dc(t.ownerDocument.styleSheets),r=await lse(n,e);return cse(r)}function ZR(t){return t.trim().replace(/["']/g,"")}function use(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(ZR(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function hse(t,e){const n=await dse(t,e),r=use(t);return(await Promise.all(n.filter(a=>r.has(ZR(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return XR(a.cssText,o,e)}))).join(`
`)}async function mse(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await hse(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function pse(t,e={}){const{width:n,height:r}=WR(t,e),i=await uy(t,e,!0);return await mse(i,e),await JR(i,e),ose(i,e),await Ate(i,n,r)}async function gse(t,e={}){const{width:n,height:r}=WR(t,e),i=await pse(t,e),a=await ix(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||Tte(),h=e.canvasWidth||n,m=e.canvasHeight||r;return o.width=h*u,o.height=m*u,e.skipAutoScale||Ite(o),o.style.width=`${h}`,o.style.height=`${m}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function fse(t,e={}){return(await gse(t,e)).toDataURL()}const Yj=[{id:"am1",label:"AM 1",region:"NA",active:!0},{id:"eu5",label:"EU 5",region:"EU",active:!0},{id:"eu6",label:"EU 6",region:"EU",active:!0},{id:"eu7",label:"EU 7",region:"EU",active:!0},{id:"eu8",label:"EU 8",region:"EU",active:!0},{id:"eu9",label:"EU 9",region:"EU",active:!0},{id:"eu10",label:"EU 10",region:"EU",active:!0},{id:"eu11",label:"EU 11",region:"EU",active:!0},{id:"eu12",label:"EU 12",region:"EU",active:!0},{id:"eu13",label:"EU 13",region:"EU",active:!0},{id:"eu14",label:"EU 14",region:"EU",active:!0},{id:"eu15",label:"EU 15",region:"EU",active:!0},{id:"eu16",label:"EU 16",region:"EU",active:!0},{id:"eu17",label:"EU 17",region:"EU",active:!0},{id:"eu18",label:"EU 18",region:"EU",active:!0},{id:"eu19",label:"EU 19",region:"EU",active:!0},{id:"eu20",label:"EU 20",region:"EU",active:!0},{id:"eu21",label:"EU 21",region:"EU",active:!0},{id:"eu22",label:"EU 22",region:"EU",active:!0},{id:"eu23",label:"EU 23",region:"EU",active:!0},{id:"eu24",label:"EU 24",region:"EU",active:!0},{id:"eu25",label:"EU 25",region:"EU",active:!0},{id:"f6",label:"F 6",region:"Fusion",active:!0},{id:"f7",label:"F 7",region:"Fusion",active:!0},{id:"f8",label:"F 8",region:"Fusion",active:!0},{id:"f9",label:"F 9",region:"Fusion",active:!0},{id:"f10",label:"F 10",region:"Fusion",active:!0},{id:"f11",label:"F 11",region:"Fusion",active:!0},{id:"f12",label:"F 12",region:"Fusion",active:!0},{id:"f13",label:"F 13",region:"Fusion",active:!0},{id:"f14",label:"F 14",region:"Fusion",active:!0},{id:"f15",label:"F 15",region:"Fusion",active:!0},{id:"f16",label:"F 16",region:"Fusion",active:!0},{id:"f17",label:"F 17",region:"Fusion",active:!0},{id:"f18",label:"F 18",region:"Fusion",active:!0},{id:"f19",label:"F 19",region:"Fusion",active:!0},{id:"f20",label:"F 20",region:"Fusion",active:!0},{id:"f21",label:"F 21",region:"Fusion",active:!0},{id:"f22",label:"F 22",region:"Fusion",active:!0},{id:"f23",label:"F 23",region:"Fusion",active:!0},{id:"f24",label:"F 24",region:"Fusion",active:!0},{id:"f25",label:"F 25",region:"Fusion",active:!0},{id:"f26",label:"F 26",region:"Fusion",active:!0},{id:"f27",label:"F 27",region:"Fusion",active:!0},{id:"f28",label:"F 28",region:"Fusion",active:!0},{id:"mearwynn",label:"MEARWYNN",region:"Fusion",active:!0},{id:"blackforest",label:"BLACKFOREST",region:"Fusion",active:!0},{id:"gnarogrim",label:"GNAROGRIM",region:"Fusion",active:!0}],vse=Object.fromEntries(Yj.map(t=>[t.id,t])),eL="TL_FILTERS_V2",ni={servers:[],classes:[],guilds:[],days:"all",sortBy:"sum",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function xse(){var t;try{const e=localStorage.getItem(eL);if(!e)return ni;const n=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(n.days)?n.days:ni.days,i=["cards","buttons","table"].includes(n.listView)?n.listView:ni.listView,a=["hud","sheet"].includes(n.filterMode)?n.filterMode:ni.filterMode,o=typeof n.quickFav=="boolean"?n.quickFav:!!n.favoritesOnly,c=typeof n.quickActive=="boolean"?n.quickActive:!!n.activeOnly;return{...ni,...n,servers:Array.isArray(n.servers)?n.servers:[],classes:Array.isArray(n.classes)?n.classes:[],guilds:Array.isArray(n.guilds)?n.guilds:[],favoritesOnly:typeof n.favoritesOnly=="boolean"?n.favoritesOnly:o,activeOnly:typeof n.activeOnly=="boolean"?n.activeOnly:c,quickFav:o,quickActive:c,days:r,listView:i,filterMode:a,bottomFilterOpen:!!n.bottomFilterOpen,serverSheetOpen:!!n.serverSheetOpen,sortBy:typeof n.sortBy=="string"?n.sortBy:ni.sortBy,searchText:typeof n.searchText=="string"?n.searchText:ni.searchText}}catch(e){return ni}}function yse(t){try{localStorage.setItem(eL,JSON.stringify(t))}catch(e){}}const tL=P.createContext(null),Ib=t=>Array.from(new Set(t));function nm(t,e){return typeof t=="function"?t(e):t}function bse({children:t}){const[e,n]=P.useState(()=>xse());P.useEffect(()=>{yse(e)},[e]);const r=T=>n(F=>({...F,servers:Ib(nm(T,F.servers))})),i=T=>n(F=>{const D=new Set(F.servers);return D.has(T)?D.delete(T):D.add(T),{...F,servers:Array.from(D)}}),a=()=>n(T=>({...T,servers:[]})),o=T=>n(F=>({...F,classes:Ib(nm(T,F.classes))})),c=T=>n(F=>{const D=new Set(F.classes);return D.has(T)?D.delete(T):D.add(T),{...F,classes:Array.from(D)}}),u=()=>n(T=>({...T,classes:[]})),h=T=>n(F=>({...F,guilds:Ib(nm(T,F.guilds))})),m=T=>n(F=>{const D=new Set(F.guilds);return D.has(T)?D.delete(T):D.add(T),{...F,guilds:Array.from(D)}}),g=()=>n(T=>({...T,guilds:[]})),x=T=>n(F=>({...F,days:T})),b=T=>x(T),w=T=>n(F=>({...F,sortBy:T||"level"})),k=T=>n(F=>({...F,favoritesOnly:!!T,quickFav:!!T})),A=T=>n(F=>({...F,activeOnly:!!T,quickActive:!!T})),L=T=>n(F=>({...F,searchText:T})),I=T=>n(F=>{const D=nm(T,F.quickFav);return{...F,quickFav:D,favoritesOnly:D}}),N=T=>n(F=>{const D=nm(T,F.quickActive);return{...F,quickActive:D,activeOnly:D}}),v=T=>n(F=>({...F,filterMode:T})),_=T=>n(F=>({...F,listView:T})),R=T=>n(F=>({...F,bottomFilterOpen:!!T})),j=T=>n(F=>({...F,serverSheetOpen:!!T})),S=()=>n(ni),C=()=>S(),M=P.useMemo(()=>({servers:e.servers,classes:e.classes,guilds:e.guilds,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:o,toggleClass:c,clearClasses:u,setGuilds:h,toggleGuild:m,clearGuilds:g,setDays:x,setRange:b,setSortBy:w,setFavoritesOnly:k,setActiveOnly:A,setSearchText:L,setQuickFav:I,setQuickActive:N,setFilterMode:v,setListView:_,setBottomFilterOpen:R,setServerSheetOpen:j,resetFilters:S,resetAll:C}),[e]);return s.jsx(tL.Provider,{value:M,children:t})}function Kp(){const t=P.useContext(tL);return t||{...ni,guilds:ni.guilds,range:ni.days,searchText:ni.searchText,quickFav:ni.quickFav,quickActive:ni.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setGuilds:()=>{},toggleGuild:()=>{},clearGuilds:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const _se="_hudWrap_pyu4f_9",wse="_hudBtn_pyu4f_11",jse="_hudSubBtn_pyu4f_15",Sse="_iconRow_pyu4f_19",Nse="_sortLabel_pyu4f_27",kse="_sortSelect_pyu4f_29",Cse="_guildField_pyu4f_43",Tse="_guildLabel_pyu4f_45",Ise="_guildSelect_pyu4f_47",Ese="_guildSummary_pyu4f_49",Ase="_guildSummaryText_pyu4f_53",Pse="_guildCaret_pyu4f_55",Rse="_guildDropdown_pyu4f_57",Lse="_guildOption_pyu4f_59",Dse="_guildEmptyText_pyu4f_63",Mse="_guildClear_pyu4f_65",jn={hudWrap:_se,hudBtn:wse,hudSubBtn:jse,iconRow:Sse,sortLabel:Nse,sortSelect:kse,guildField:Cse,guildLabel:Tse,guildSelect:Ise,guildSummary:Ese,guildSummaryText:Ase,guildCaret:Pse,guildDropdown:Rse,guildOption:Lse,guildEmptyText:Dse,guildClear:Mse};function Fse({active:t=!1,title:e,iconUrl:n,fallback:r="",size:i=40,onClick:a}){const o=Math.round(i*.7),c=q.useMemo(()=>{const L=[],I=V4(n,o*2,o*2,"contain");I&&L.push(I);const N=Ni(n,o*2);return N&&N!==I&&L.push(N),!L.length&&n&&L.push(n),L},[n,o]),[u,h]=q.useState(0),[m,g]=q.useState(!1),[x,b]=q.useState(!1);q.useEffect(()=>h(0),[c]);const w=c[u]||"",k={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:x||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};m&&(k.background="rgba(255,255,255,.04)"),t&&(k.outline="2px solid #5C8BC6");const A={display:"block",width:o,height:o,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return s.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),style:k,children:w?s.jsx("img",{src:w,alt:e||"class",width:o,height:o,loading:"lazy",style:A,onError:()=>{h(L=>L+1<c.length?L+1:L)}}):s.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}function Bse({compareMonth:t,setCompareMonth:e,monthOptions:n,guildOptions:r,onExportPng:i,exportDisabled:a}){const{t:o}=Os(),{servers:c,classes:u,setClasses:h,guilds:m,toggleGuild:g,clearGuilds:x,sortBy:b,setSortBy:w,filterMode:k,setBottomFilterOpen:A,serverSheetOpen:L,setServerSheetOpen:I,resetAll:N}=Kp(),v=o("toplists.filters.guilds.label","Guilds"),_=o("toplists.filters.guilds.placeholder","All guilds"),R=o("toplists.filters.guilds.empty","No guilds in snapshot"),j=o("toplists.filters.guilds.clear","Clear"),S=m.length?o("toplists.filters.guilds.selected","{{count}} selected",{count:m.length}):_;return s.jsxs("div",{className:jn.hudWrap,children:[s.jsxs("button",{type:"button",className:jn.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),I(!0)},"aria-haspopup":"dialog","aria-expanded":L||!1,"aria-label":`Select servers${c.length?` (${c.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",c.length?`(${c.length})`:""]}),s.jsxs("div",{className:jn.iconRow,children:[fr.map(C=>s.jsx(Fse,{active:u.includes(C.key),title:C.label,iconUrl:C.iconUrl,fallback:C.fallback,size:40,onClick:()=>h(M=>M.includes(C.key)?M.filter(T=>T!==C.key):[...M,C.key])},C.key)),s.jsx("button",{type:"button",className:jn.hudSubBtn,onClick:()=>h(fr.map(C=>C.key)),children:"All"}),s.jsx("button",{type:"button",className:jn.hudSubBtn,onClick:()=>h([]),children:"None"})]}),s.jsxs("div",{className:jn.guildField,children:[s.jsx("span",{className:jn.guildLabel,children:v}),r.length?s.jsxs("details",{className:jn.guildSelect,children:[s.jsxs("summary",{className:jn.guildSummary,"aria-label":v,children:[s.jsx("span",{className:jn.guildSummaryText,children:S}),s.jsx("span",{className:jn.guildCaret,"aria-hidden":"true",children:"v"})]}),s.jsxs("div",{className:jn.guildDropdown,children:[r.map(C=>{const M=m.includes(C.value);return s.jsxs("label",{className:jn.guildOption,children:[s.jsx("input",{type:"checkbox",checked:M,onChange:()=>g(C.value)}),s.jsx("span",{children:C.label})]},C.value)}),m.length>0&&s.jsx("button",{type:"button",className:jn.guildClear,onClick:x,children:j})]})]}):s.jsx("span",{className:jn.guildEmptyText,children:R})]}),s.jsx("label",{className:jn.sortLabel,htmlFor:"toplists-sort",children:"Sort."}),s.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:b,onChange:C=>w(C.target.value),className:jn.sortSelect,"aria-label":"Sort",children:[s.jsx("option",{value:"main",children:"Main"}),s.jsx("option",{value:"constitution",children:"Constitution"}),s.jsx("option",{value:"sum",children:"Base Stats"}),s.jsx("option",{value:"statsDay",children:"Stats/Day"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"mine",children:"Mine"})]}),s.jsx("label",{className:jn.sortLabel,htmlFor:"toplists-compare",children:o("toplists.compareMonth","Compare month")}),s.jsxs("select",{id:"toplists-compare",name:"toplists-compare",value:t,onChange:C=>e(C.target.value),className:jn.sortSelect,"aria-label":o("toplists.compareMonth","Compare month"),children:[s.jsx("option",{value:"",children:o("toplists.compareOff","Off")}),n.map(C=>s.jsx("option",{value:C,children:C},C))]}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsx("button",{type:"button",className:jn.hudSubBtn,onClick:i,disabled:a||!i,style:a||!i?{opacity:.55,cursor:"not-allowed"}:void 0,children:"Export PNG"}),s.jsx("button",{type:"button",className:jn.hudSubBtn,onClick:N,children:"Reset"}),k==="sheet"&&s.jsx("button",{type:"button",className:jn.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),A(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const $se=["EU","US","INT","Fusion"],Pr={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"},Ose=t=>t.trim().toLowerCase(),c3=t=>{var i;const e=Ose(t),n=(i=vse[e])==null?void 0:i.label;if(n)return n;const r=t.trim().toUpperCase();return r?r.replace(/^([A-Z]+)(\d+)$/,"$1 $2"):t};function Vse({open:t,onClose:e,mode:n="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:o,onClearAll:c}){const[u,h]=P.useState(""),m=P.useRef(null);P.useEffect(()=>{if(!t)return;const b=w=>{w.key==="Escape"&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e]),P.useEffect(()=>{if(t&&m.current){const b=m.current.querySelector("#sheet-serversearch");b==null||b.focus()}},[t]);const g=$se,x=b=>{const w=u.trim().toLowerCase();if(!w)return!0;const k=c3(b).toLowerCase();return b.toLowerCase().includes(w)||k.includes(w)};return t?s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:Use,onClick:b=>{b.target===b.currentTarget&&e()},children:s.jsxs("div",{ref:m,style:n==="modal"?sL:zse,className:"sf-server-sheet",children:[s.jsxs("div",{style:Gse,children:[s.jsx("h2",{id:"server-dialog-title",style:Hse,children:"Select servers"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{type:"button",onClick:c,style:d3,children:"Clear"}),s.jsx("button",{type:"button",onClick:e,style:Jse,children:"Done"})]})]}),s.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[s.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),s.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:b=>h(b.target.value),"aria-label":"Search servers",autoComplete:"off",style:Kse})]}),s.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(b=>{const w=(r[b]||[]).filter(x);return s.jsxs("section",{"aria-labelledby":`region-${b}`,children:[s.jsxs("div",{style:qse,children:[s.jsx("h3",{id:`region-${b}`,style:Wse,children:b}),s.jsx("div",{style:{display:"flex",gap:8},children:s.jsx("button",{type:"button",style:d3,onClick:()=>{o?o(b):w.filter(A=>!i.includes(A)).forEach(a)},children:"Select all"})})]}),s.jsxs("div",{style:Qse,children:[w.map(k=>{const A=i.includes(k),L=c3(k);return s.jsx("button",{type:"button",onClick:()=>a(k),"aria-pressed":A,title:L,style:{...Yse,...A?Xse:null},children:L},k)}),w.length===0&&s.jsx("div",{style:{color:Pr.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},b)})})]})}):null}const Use={position:"fixed",inset:0,background:Pr.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},sL={width:"min(900px, 100%)",background:Pr.tile,border:`1px solid ${Pr.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:Pr.text},zse={...sL,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},Gse={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},Hse={fontSize:18,margin:0},Wse={fontSize:14,margin:0,color:Pr.text2},Kse={width:"100%",background:Pr.input,color:Pr.text,border:`1px solid ${Pr.line}`,borderRadius:12,padding:"10px 12px"},qse={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},Qse={display:"flex",flexWrap:"wrap",gap:8},Yse={background:Pr.chip,border:`1px solid ${Pr.line}`,padding:"6px 10px",borderRadius:999,color:Pr.text},Xse={outline:`2px solid ${Pr.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},Jse={background:"#25456B",color:Pr.text,border:`1px solid ${Pr.accent}`,borderRadius:10,padding:"8px 12px"},d3={background:"transparent",color:Pr.text,border:`1px solid ${Pr.line}`,borderRadius:10,padding:"8px 12px"},Zse=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=Zse,document.head.appendChild(e)}}const Er={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function ene({open:t,onClose:e}){const{searchText:n,setSearchText:r,range:i,setRange:a,sortBy:o,setSortBy:c,quickFav:u,setQuickFav:h,quickActive:m,setQuickActive:g}=Kp(),x=P.useRef(null);if(P.useEffect(()=>{if(!t)return;const w=k=>{k.key==="Escape"&&e()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[t,e]),P.useEffect(()=>{if(t&&x.current){const w=x.current.querySelector("#sheet-search");w==null||w.focus()}},[t]),!t)return null;const b=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:tne,onClick:w=>{w.target===w.currentTarget&&e()},children:s.jsxs("div",{ref:x,style:sne,children:[s.jsxs("div",{style:nne,children:[s.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:Er.text},children:"Filters"}),s.jsx("button",{type:"button",onClick:e,style:ine,children:"Done"})]}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),s.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:n,onChange:w=>r(w.target.value),"aria-label":"Search",autoComplete:"off",style:nL})]}),s.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[s.jsx("span",{style:{color:Er.text2,fontSize:12},children:"Range"}),s.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:b.map(w=>s.jsx("button",{type:"button","aria-pressed":i===w.value,onClick:()=>a(w.value),style:{...Eb,...i===w.value?Ab:null},children:w.label},w.label))})]}),s.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[s.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:Er.text2,fontSize:12},children:"Sort."}),s.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:o,onChange:w=>c(w.target.value),"aria-label":"Sort",autoComplete:"off",style:rne,children:[s.jsx("option",{value:"main",children:"Main"}),s.jsx("option",{value:"constitution",children:"Constitution"}),s.jsx("option",{value:"sum",children:"Base Stats"}),s.jsx("option",{value:"statsDay",children:"Stats/Day"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"mine",children:"Mine"})]})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[s.jsx("button",{type:"button",onClick:()=>h(w=>!w),"aria-pressed":u,style:{...Eb,...u?Ab:null},children:" Favorites"}),s.jsx("button",{type:"button",onClick:()=>g(w=>!w),"aria-pressed":m,style:{...Eb,...m?Ab:null},children:" Active"})]})]})})}const tne={position:"fixed",inset:0,background:Er.backdrop,zIndex:60,display:"grid",alignItems:"end"},sne={background:Er.tile,borderTop:`1px solid ${Er.line}`,borderLeft:`1px solid ${Er.line}`,borderRight:`1px solid ${Er.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:Er.text,maxHeight:"80vh",overflow:"auto"},nne={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},nL={width:"100%",background:Er.input,color:Er.text,border:`1px solid ${Er.line}`,borderRadius:12,padding:"10px 12px"},rne={...nL,appearance:"none"},Eb={background:"#14273E",border:`1px solid ${Er.line}`,padding:"6px 10px",borderRadius:999,color:Er.text},Ab={outline:`2px solid ${Er.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},ine={background:"#25456B",color:Er.text,border:`1px solid ${Er.accent}`,borderRadius:10,padding:"8px 12px"},ane=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=ane,document.head.appendChild(e)}}function one(){var i;const t=Kp(),e=(i=t==null?void 0:t.listView)!=null?i:"table",n=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:n;return e==="table"?null:s.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:s.jsxs("div",{children:["Showing ",r.length," / ",n.length]})}),e==="cards"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var o,c,u,h,m,g,x;return s.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(o=a.name)!=null?o:""}),s.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(c=a.server)!=null?c:""})]}),s.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",s.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(m=a.scrapbook)!=null?m:""]}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[s.jsx(Pb,{children:a.active?"Active":"Idle"}),a.favorite&&s.jsx(Pb,{children:" Fav"}),s.jsx(Pb,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(x=a.id)!=null?x:`${a.name}-${a.server}`)})}),e==="buttons"&&s.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var o,c,u,h;return s.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(o=a.name)!=null?o:"",s.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(c=a.server)!=null?c:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function Pb({children:t}){return s.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const hy="stats_public",rL="toplists_players_v1",lne="v1",cne=`snapshot:${lne}`,ax=new Set,dne=(t,e,n)=>{ax.has(t)||(ax.add(t),n?console.warn(e,n):console.warn(e))},une=(t,e,n)=>{ax.has(t)||(ax.add(t),n?console.error(e,n):console.error(e))};async function hne(){try{const t=await mn(ms(Tt,hy,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const n=(t.data()||{}).servers,r=u=>u.split(/[\n,;]+/g).map(h=>h.replace(/^[\s\["']+|[\s\]"']+$/g,"").trim()).filter(h=>!!h);let i=null,a=null,o;if(Array.isArray(n))i=n;else if(typeof n=="string"){const u=n.trim();if(!u)a="servers string empty";else if(u.startsWith("["))try{const h=JSON.parse(u);Array.isArray(h)?i=h:a="servers JSON parsed but not an array"}catch(h){const m=r(u);m.length?i=m:(a="servers JSON parse failed",o={message:h==null?void 0:h.message})}else{const h=r(u);h.length?i=h:(a="servers string is not a JSON array",o={preview:u.slice(0,120)})}}else n==null?a="servers field missing":a=`servers has unexpected type: ${typeof n}`;if(!Array.isArray(i))return dne("bundle_invalid","[toplistsFirestore] Server bundle missing/invalid, falling back to static config",o?{reason:a!=null?a:"unknown",...o}:{reason:a!=null?a:"unknown"}),{ok:!1,error:"decode_failed",detail:a!=null?a:"servers missing or invalid"};const c=[];for(const u of i){if(typeof u!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:u});continue}const h=u.trim();h&&c.push(h)}return{ok:!0,servers:c}}catch(t){return une("bundle_firestore_error","[toplistsFirestore] Firestore error while loading toplist servers",{code:t==null?void 0:t.code,message:t==null?void 0:t.message}),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}const qs=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},ri=t=>typeof t=="string"?t:null,mne=t=>typeof t=="string"?t:typeof t=="number"&&Number.isFinite(t)?String(t):null,iL=t=>{var i,a;if(!t||typeof t!="object")return null;const e=ri(t.server),n=ri(t.name),r=ri(t.class);return!e||!n||!r?null:{playerId:mne((a=(i=t.playerId)!=null?i:t.id)!=null?a:t.player_id),flag:ri(t.flag),deltaRank:qs(t.deltaRank),server:e,name:n,class:r,level:qs(t.level),guild:ri(t.guild),main:qs(t.main),con:qs(t.con),sum:qs(t.sum),ratio:ri(t.ratio),mainTotal:qs(t.mainTotal),conTotal:qs(t.conTotal),sumTotal:qs(t.sumTotal),xpProgress:qs(t.xpProgress),xpTotal:qs(t.xpTotal),mine:qs(t.mine),treasury:qs(t.treasury),lastScan:ri(t.lastScan),deltaSum:qs(t.deltaSum)}},pne=t=>{var a,o,c,u;if(!t||typeof t!="object")return null;const e=ri(t.server),n=(a=ri(t.name))!=null?a:ri(t.guildId),r=(o=ri(t.guildId))!=null?o:n;if(!e||!n||!r)return null;const i=qs((u=(c=t.sumAvg)!=null?c:t.avgSumBaseTotal)!=null?u:t.sum);return{guildId:r,server:e,name:n,memberCount:qs(t.memberCount),hofRank:qs(t.hofRank),lastScan:ri(t.lastScan),sumAvg:i,avgLevel:qs(t.avgLevel),avgTreasury:qs(t.avgTreasury),avgMine:qs(t.avgMine),avgBaseMain:qs(t.avgBaseMain),avgConBase:qs(t.avgConBase),avgSumBaseTotal:qs(t.avgSumBaseTotal),avgAttrTotal:qs(t.avgAttrTotal),avgConTotal:qs(t.avgConTotal),avgTotalStats:qs(t.avgTotalStats)}};async function gne(t){var i;const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=`ToplistsPlayers:${e}`;Yx(n);const r=Mn(n);try{const a=ms(Tt,hy,rL,"lists","latest_toplists","servers",e),o=await In(r,a,()=>mn(a),{label:"ToplistsPlayers"});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.players)?c.players:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing players array"};const h=[];for(const m of u){const g=iL(m);if(!g)return console.error("[toplistsFirestore] Latest snapshot row decode failed",m),{ok:!1,error:"decode_error",detail:"invalid player row"};h.push(g)}return{ok:!0,snapshot:{server:(i=ri(c.server))!=null?i:e,updatedAt:qs(c.updatedAt),players:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{dn(r),Xx(n),Jx(n)}}async function fne(t){var i;const e=(t||"").trim();if(!e)return{ok:!1,error:"decode_error",detail:"missing doc id"};const n=`ToplistsPlayersCompare:${e}`;Yx(n);const r=Mn(n);try{const a=ms(Tt,hy,rL,"lists","latest_toplists","servers",e),o=await In(r,a,()=>mn(a),{label:`ToplistsPlayersCompare:${e}`});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.players)?c.players:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing players array"};const h=[];for(const m of u){const g=iL(m);if(!g)return console.error("[toplistsFirestore] Snapshot row decode failed",m),{ok:!1,error:"decode_error",detail:"invalid player row"};h.push(g)}return{ok:!0,snapshot:{server:(i=ri(c.server))!=null?i:e,updatedAt:qs(c.updatedAt),players:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{dn(r),Xx(n),Jx(n)}}const aL=(t,e)=>`${cne}:${t}:${e}`,vne=t=>`toplists:compare:${t}`,Rb=new Map,Xj=t=>{const e=new Date(t);return e.setMinutes(0,0,0),e.getTime()<=t&&e.setHours(e.getHours()+1),e.getTime()},Jj=t=>{try{if(typeof localStorage=="undefined")return null;const e=localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return!n||typeof n!="object"||typeof n.expiresAt!="number"||!("snapshot"in n)?null:n}catch(e){return null}},xne=t=>t==null||typeof t=="string"&&t.includes("/"),oL=t=>{const e=t==null?void 0:t.players;return Array.isArray(e)?e.some(n=>n&&!xne(n.ratio)):!1},Zj=(t,e)=>{try{if(typeof localStorage=="undefined")return;localStorage.setItem(t,JSON.stringify(e))}catch(n){}},e2=t=>{try{if(typeof localStorage=="undefined")return;localStorage.removeItem(t)}catch(e){}};async function yne(t){const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=aL("players",e),r=Date.now(),i=Jj(n);if(i){if(r<i.expiresAt&&!oL(i.snapshot))return{ok:!0,snapshot:i.snapshot};e2(n)}const a=await gne(e);return a.ok&&Zj(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:Xj(r)}),a}async function bne(t,e){const n=(t||"").trim();if(!n)return{ok:!1,error:"decode_error",detail:"missing doc id"};const r=vne(n),i=Date.now(),a=Jj(r);if(a){if(i<a.expiresAt&&!oL(a.snapshot))return{ok:!0,snapshot:a.snapshot};e2(r)}const o=Rb.get(n);if(o)return o;const c=(async()=>{const u=await fne(n);if(u.ok){const h=Xj(i);Zj(r,{snapshot:u.snapshot,fetchedAt:i,expiresAt:h})}return u})();Rb.set(n,c);try{return await c}finally{Rb.delete(n)}}async function _ne(t){var i;const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=`ToplistsGuilds:${e}`;Yx(n);const r=Mn(n);try{const a=ms(Tt,hy,"toplists_guilds_v1","lists","latest_toplists","servers",e),o=await In(r,a,()=>mn(a),{label:"ToplistsGuilds"});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.guilds)?c.guilds:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing guilds array"};const h=[];for(const m of u){const g=pne(m);if(!g)return console.error("[toplistsFirestore] Latest guild snapshot row decode failed",m),{ok:!1,error:"decode_error",detail:"invalid guild row"};h.push(g)}return{ok:!0,snapshot:{server:(i=ri(c.server))!=null?i:e,updatedAt:qs(c.updatedAt),guilds:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{dn(r),Xx(n),Jx(n)}}async function wne(t){const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=aL("guilds",e),r=Date.now(),i=Jj(n);if(i){if(r<i.expiresAt)return{ok:!0,snapshot:i.snapshot};e2(n)}const a=await _ne(e);return a.ok&&Zj(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:Xj(r)}),a}const jne={EU:[],US:[],INT:[],Fusion:[]},Sne=["EU","US","INT","Fusion"],Nne=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function lL(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=Nne(r);e[i].add(r)});const n={...jne};return Sne.forEach(r=>{n[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),n}const kne="EU",Lb=lL(Yj.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),cL=P.createContext(null),u3=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]);function Cne(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&u3(t.servers,e.servers)&&u3(t.classes,e.classes)}function Tne(t,e){return t.key===e.key&&t.dir===e.dir}const hv=t=>t.trim().toUpperCase(),dL=t=>t!=null?t.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/-+/g,"-"):"",Ine=t=>{if(!Array.isArray(t))return[];const e=new Set;for(const n of t){const r=hv(String(n||""));r&&e.add(r)}return Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},Ene=t=>{if(!Array.isArray(t))return[];const e=new Set;for(const n of t){const r=dL(n);r&&e.add(r)}return Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{sensitivity:"base"}))},Db=t=>{var x,b;if(t==null)return null;if(typeof t=="number")return t<1e12?t*1e3:t;const e=String(t).trim();if(!e)return null;if(/^\d{10,13}$/.test(e)){const w=Number(e);return Number.isFinite(w)?w<1e12?w*1e3:w:null}const n=e.split(/\s+/),r=(x=n[0])!=null?x:"",i=(b=n[1])!=null?b:"",a=r.split(".");if(a.length!==3)return null;const o=Number(a[0]),c=Number(a[1]),u=Number(a[2]);if(!Number.isFinite(o)||!Number.isFinite(c)||!Number.isFinite(u))return null;let h=0,m=0;if(i){const w=i.split(":");if(w.length<2||(h=Number(w[0]),m=Number(w[1]),!Number.isFinite(h)||!Number.isFinite(m)))return null}const g=new Date(u,c-1,o,h,m,0,0);return g.getFullYear()!==u||g.getMonth()!==c-1||g.getDate()!==o?null:g.getTime()};function Ane({children:t}){const[e,n]=P.useState({group:kne,servers:[],classes:[],timeRange:"all"}),[r,i]=P.useState({key:"sum",dir:"desc"}),[a,o]=P.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null,rowLimit:null}),c=P.useRef(new Map),u=null,[h,m]=P.useState(Lb),g=P.useMemo(()=>Ine(e.servers),[e.servers]),x=P.useMemo(()=>Ene(e.classes),[e.classes]),b=P.useMemo(()=>g,[g]),w=P.useMemo(()=>b.join(","),[b]),k=P.useCallback(N=>{n(v=>{const _=typeof N=="function"?N(v):{...v,...N};return Cne(v,_)?v:_})},[]),A=P.useCallback(N=>{i(v=>{const _=typeof N=="function"?N(v):N;return Tne(v,_)?v:_})},[]);P.useEffect(()=>{let N=!1;return(async()=>{const v=await hne();if(!N){if(v.ok){const _=lL(v.servers);if(Object.values(_).some(j=>j.length>0)){m(_);return}}m(Lb)}})().catch(v=>{N||(console.error("[ToplistsProvider] unexpected error while loading server list",v),m(Lb))}),()=>{N=!0}},[]),P.useEffect(()=>{let N=!1;if(!b.length)return o({rows:[],loading:!1,error:Fn.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."),lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null,rowLimit:null}),()=>{N=!0};const v=S=>{const C=[];let M=null,T=0;for(const F of S){F.updatedAt!=null&&(M=M==null?F.updatedAt:Math.max(M,F.updatedAt));const D=Array.isArray(F.players)?F.players:[];T=Math.max(T,D.length);for(const V of D)C.push(V.server?V:{...V,server:F.server})}return{rows:C,updatedAt:M,rowLimit:T||null}},_=[],R=[];for(const S of b){const C=c.current.get(S);C?_.push(C.snapshot):R.push(S)}const j=v(_);return R.length===0?(o({rows:j.rows,loading:!1,error:null,lastUpdatedAt:j.updatedAt,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:j.rowLimit}),()=>{N=!0}):(o(S=>({...S,rows:j.rows,lastUpdatedAt:j.updatedAt,rowLimit:j.rowLimit,listId:w||null,loading:!0,error:null})),(async()=>{const S=await Promise.all(R.map(D=>yne(D)));if(N)return;const C=[..._];let M=null,T=null;if(S.forEach((D,V)=>{var K;const U=R[V]||"";D.ok?(c.current.set(U,{snapshot:D.snapshot,cachedAt:Date.now()}),C.push(D.snapshot)):M||(M=D.error,T=(K=D.detail)!=null?K:null)}),!C.length){const D=T?` (${T})`:"";let V="Firestore Fehler";M==="not_found"?V=Fn.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."):M==="decode_error"&&(V="Fehler beim Lesen der Daten"),o({rows:[],loading:!1,error:`${V}${D}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:null});return}const F=v(C);o({rows:F.rows,loading:!1,error:null,lastUpdatedAt:F.updatedAt,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:F.rowLimit})})().catch(S=>{N||(console.error("[ToplistsProvider] unexpected error",S),o({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:null}))}),()=>{N=!0})},[w]);const L=P.useMemo(()=>{let N=Array.isArray(a.rows)?[...a.rows]:[];if(!N.length)return N;const v=(D,V)=>{const U=typeof D=="number"&&Number.isFinite(D)?D:0,K=typeof V=="number"&&Number.isFinite(V)?V:0,H=U+K;if(!(H>0))return{label:"",mainRatio:null};const z=Math.round(U/H*100),Y=100-z;return{label:`${z}/${Y}`,mainRatio:z}};N=N.map(D=>{var H,z;const{label:V,mainRatio:U}=v(D.main,D.con),K=((H=D.main)!=null?H:0)+((z=D.con)!=null?z:0);return{...D,ratio:V,_ratioLabel:V,_ratioMain:U,_calculatedSum:K}});const _=g,R=_.length?new Set(_):null,j=x,S=j.length?new Set(j):null,C=e.timeRange==="all"?null:Number(String(e.timeRange).replace("d","")),M=C&&Number.isFinite(C)?Date.now()-C*864e5:null;N=N.filter(D=>{if(R&&!R.has(hv(D.server))||S&&!S.has(dL(D.class)))return!1;if(M!=null){const V=Db(D.lastScan);if(V!=null&&V<M)return!1}return!0}),r.dir;const T=(D,V)=>{if(D==null&&V==null)return 0;if(D==null)return 1;if(V==null)return-1;const U=D-V;return r.dir==="asc"?U:-U},F=(D,V)=>{var X,J,se,ue,Ne,Ee,ee,le,re,be;const U=hv(String((X=D.server)!=null?X:"")),K=hv(String((J=V.server)!=null?J:"")),H=(Ne=(ue=(se=D.playerId)!=null?se:D.id)!=null?ue:D.name)!=null?Ne:"",z=(le=(ee=(Ee=V.playerId)!=null?Ee:V.id)!=null?ee:V.name)!=null?le:"",Y=`${U}__${String(H).trim()}__${String((re=D.class)!=null?re:"").trim()}`,te=`${K}__${String(z).trim()}__${String((be=V.class)!=null?be:"").trim()}`,G=Y.localeCompare(te,void 0,{numeric:!0,sensitivity:"base"});return r.dir==="asc"?G:-G};return N.sort((D,V)=>{var K,H;let U=0;switch(r.key){case"name":{const z=String((K=D.name)!=null?K:""),Y=String((H=V.name)!=null?H:""),te=z.localeCompare(Y,void 0,{sensitivity:"base"});U=r.dir==="asc"?te:-te;break}case"lastScan":{const z=Db(D.lastScan),Y=Db(V.lastScan);U=T(z==null?null:z,Y==null?null:Y);break}case"main":U=T(D.main,V.main);break;case"con":U=T(D.con,V.con);break;case"sum":U=T(D._calculatedSum,V._calculatedSum);break;case"ratio":U=T(D._ratioMain,V._ratioMain);break;case"mine":U=T(D.mine,V.mine);break;case"treasury":U=T(D.treasury,V.treasury);break;case"mainTotal":U=T(D.mainTotal,V.mainTotal);break;case"conTotal":U=T(D.conTotal,V.conTotal);break;case"sumTotal":U=T(D.sumTotal,V.sumTotal);break;case"xpProgress":U=T(D.xpProgress,V.xpProgress);break;case"xpTotal":U=T(D.xpTotal,V.xpTotal);break;case"level":default:U=T(D.level,V.level);break}return U!==0?U:F(D,V)}),a.rowLimit!=null&&a.rowLimit>0&&N.length>a.rowLimit&&(N=N.slice(0,a.rowLimit)),N},[a.rows,a.rowLimit,e.timeRange,g,x,r]),I=P.useMemo(()=>({player:a,playerRows:L,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:u,serverGroups:h,filters:e,sort:r,setFilters:k,setSort:A}),[a,L,e,r,h,k,A,u]);return s.jsx(cL.Provider,{value:I,children:t})}function uL(){const t=P.useContext(cL);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}const Pne=t=>{const e=new Set;return t.forEach(n=>{const r=String(n||"").trim().toUpperCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))};function Rne({serverCodes:t}){const[e,n]=P.useState([]),[r,i]=P.useState(!1),[a,o]=P.useState(null),[c,u]=P.useState(null),[h,m]=P.useState(null),g=Wr(),x=qn(),b=P.useMemo(()=>{var _;const I=Pne(t!=null?t:[]);if(I.length)return I;const N=((_=Yj.find(R=>R.id))==null?void 0:_.id)||"EU1",v=String(N).toUpperCase();return v?[v]:[]},[t]),w=P.useMemo(()=>b.join(","),[b]);P.useEffect(()=>{let I=!0;return i(!0),o(null),b.length?(Promise.all(b.map(N=>wne(N))).then(N=>{if(!I)return;const v=[];let _=null,R=null;if(N.forEach(M=>{var T,F;if(M.ok)v.push(M.snapshot);else if(!_){const D=M;_=(T=D.error)!=null?T:null,R=(F=D.detail)!=null?F:null}}),!v.length){const M=R?` (${R})`:"";let T="Firestore Fehler";_==="not_found"?T=Fn.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."):_==="decode_error"&&(T="Fehler beim Lesen der Daten"),n([]),u(null),m(null),o(`${T}${M}`);return}let j=null,S=0;const C=[];v.forEach(M=>{M.updatedAt!=null&&(j=j==null?M.updatedAt:Math.max(j,M.updatedAt));const T=Array.isArray(M.guilds)?M.guilds:[];S=Math.max(S,T.length),T.forEach(F=>{C.push((F.server,F))})}),n(C),u(j),m(S||null),o(null)}).catch(N=>{I&&(console.error("[GuildToplists] unexpected error",N),n([]),u(null),m(null),o("Unerwarteter Fehler beim Laden"))}).finally(()=>{I&&i(!1)}),()=>{I=!1}):(n([]),u(null),m(null),o(Fn.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server.")),i(!1),()=>{I=!1})},[w]);const k=I=>I==null?"":new Intl.NumberFormat("en").format(I),A=I=>{if(I==null)return null;const N=I<1e12?I*1e3:I;return new Date(N).toLocaleString()},L=P.useMemo(()=>{let I=Array.isArray(e)?[...e]:[];if(!I.length)return I;const N=(v,_)=>v==null&&_==null?0:v==null?1:_==null?-1:_-v;return I.sort((v,_)=>N(v.sumAvg,_.sumAvg)),h!=null&&h>0&&I.length>h&&(I=I.slice(0,h)),I},[e,h]);return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{opacity:.8,fontSize:12},children:["Guilds - snapshots (latest)",b.length?` - ${b.join(", ")}`:""]}),s.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[s.jsxs("div",{children:[r?"Loading...":a?"Error":"Ready"," - ",L.length," rows"]}),s.jsx("div",{children:c?`Updated: ${A(c)}`:null})]}),a&&s.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),s.jsx("div",{style:{wordBreak:"break-all"},children:a}),s.jsx("button",{onClick:()=>g(`${x.pathname}${x.search}${x.hash}`),style:{marginTop:8},children:"Retry"})]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{padding:"8px 6px"},children:"#"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Members"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Avg Lv"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Avg Sum"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"})]})}),s.jsxs("tbody",{children:[L.map((I,N)=>{var v;return s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("td",{style:{padding:"8px 6px"},children:N+1}),s.jsx("td",{style:{padding:"8px 6px"},children:I.server}),s.jsx("td",{style:{padding:"8px 6px"},children:I.name}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:k(I.memberCount)}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:k(I.avgLevel)}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:k(I.sumAvg)}),s.jsx("td",{style:{padding:"8px 6px"},children:(v=I.lastScan)!=null?v:""})]},`${I.guildId}-${I.server}`)}),r&&L.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:12},children:"Loading..."})}),!r&&!a&&L.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:12},children:"No results"})})]})]})})]})}const h3=t=>(t!=null?t:"").split(",").map(e=>e.trim()).filter(Boolean),ox=t=>{const e=new Set;return t.forEach(n=>{const r=n.trim().toUpperCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},hL=t=>{const e=String(t!=null?t:"").trim().toUpperCase();if(!e)return"";const n=e.match(/^S(\d+)(?:\.EU)?$/);if(n)return`EU${n[1]}`;const r=e.match(/^EU(\d+)$/);return r?`EU${r[1]}`:e},Lne=(t,e)=>`${hL(t)}__${e}`,Dne="sf_compare_snapshot",Mne=t=>{const e=new Set;return t.forEach(n=>{const r=hL(n).trim().toLowerCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},Fne=({scope:t,servers:e,month:n,mode:r})=>{const i=String(n!=null?n:"").trim(),a=Mne(e).join("+"),o=String(r!=null?r:"").trim(),c=o?`__${o.toLowerCase()}`:"";return`${Dne}__${t}__${a}__${i}${c}`},Bne=t=>{var e;try{if(typeof localStorage=="undefined")return null;const n=localStorage.getItem(t);if(!n)return null;const r=JSON.parse(n);if(!r||typeof r!="object")return null;const i=r;return!Array.isArray(i.rows)||!Array.isArray(i.baselineServers)||!Array.isArray(i.missingServers)||i.error!=null&&typeof i.error!="string"?null:{rows:i.rows,baselineServers:i.baselineServers.map(a=>String(a||"").trim()).filter(Boolean),missingServers:i.missingServers.map(a=>String(a||"").trim()).filter(Boolean),error:(e=i.error)!=null?e:null}}catch(n){return null}},$ne=(t,e)=>{try{if(typeof localStorage=="undefined")return;localStorage.setItem(t,JSON.stringify(e))}catch(n){}},E_=t=>{const e=new Set;return t.forEach(n=>{const r=n.trim().toLowerCase().replace(/[\s_]+/g,"-").replace(/-+/g,"-");r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{sensitivity:"base"}))},Nm=t=>(t!=null?t:"").toString().trim().toLowerCase(),m3=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]),One=t=>t<10?`0${t}`:String(t),Vne=t=>`${t.getUTCFullYear()}-${One(t.getUTCMonth()+1)}`,Une=t=>{const e=[],n=new Date;n.setUTCDate(1),n.setUTCMonth(n.getUTCMonth()-1);for(let r=0;r<t;r++)e.push(Vne(n)),n.setUTCMonth(n.getUTCMonth()-1);return e},zne="2026-01",mL=1440*60*1e3,Gne=(t,e)=>{if(!t)return null;let n=null;if(typeof t=="number")n=t<1e12?t*1e3:t;else{const i=String(t).trim();if(!i)return null;if(/^\d{10,13}$/.test(i)){const a=Number(i);if(!Number.isFinite(a))return null;n=a<1e12?a*1e3:a}else n=pL(i)}if(n==null||!Number.isFinite(n))return null;const r=Math.max(0,Math.floor((e-n)/mL));return r<=0?"#34d399":r===1?"#4ade80":r<=3?"#a3e635":r<=7?"#facc15":r<=14?"#f97316":r<=30?"#ef4444":"#b91c1c"},Wl=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},Uu=t=>t.trim().toUpperCase(),p3=t=>t!=null?t.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/-+/g,"-"):"";function pL(t){var x,b;const e=t.trim();if(!e)return null;const n=e.split(/\s+/),r=(x=n[0])!=null?x:"",i=(b=n[1])!=null?b:"",a=r.split(".");if(a.length!==3)return null;const o=Number(a[0]),c=Number(a[1]),u=Number(a[2]);if(!Number.isFinite(o)||!Number.isFinite(c)||!Number.isFinite(u))return null;let h=0,m=0;if(i){const w=i.split(":");if(w.length<2||(h=Number(w[0]),m=Number(w[1]),!Number.isFinite(h)||!Number.isFinite(m)))return null}const g=new Date(u,c-1,o,h,m,0,0);return g.getFullYear()!==u||g.getMonth()!==c-1||g.getDate()!==o?null:g.getTime()}const fp=t=>{if(t==null)return null;if(typeof t=="number")return t<1e12?t*1e3:t;const e=String(t).trim();if(!e)return null;if(/^\d{10,13}$/.test(e)){const n=Number(e);return Number.isFinite(n)?n<1e12?n*1e3:n:null}return pL(e)},Hne=(t,e)=>{const n=typeof t=="number"&&Number.isFinite(t)?t:0,r=typeof e=="number"&&Number.isFinite(e)?e:0,i=n+r;return i>0?Math.round(n/i*100):null},g3=(t,e,n)=>{if(!t||!e)return{days:null,perDay:null};const r=fp(t.lastScan),i=fp(e.lastScan);if(r==null||i==null)return{days:null,perDay:null};const a=Math.abs(r-i)/mL,o=Math.max(1,Math.round(a));let c=n;if(c==null){const h=Wl(t.sum),m=Wl(e.sum);m!=null&&(c=(h!=null?h:0)-m)}const u=c!=null?Math.round(c/o):null;return{days:o,perDay:u}},f3=t=>{var a,o,c,u,h;const e=Uu(String((a=t.server)!=null?a:"")),n=(c=(o=t.playerId)!=null?o:t.id)!=null?c:null,r=String((u=n!=null?n:t.name)!=null?u:"").trim(),i=String((h=t.class)!=null?h:"").trim();return`${e}__${r}__${i}`},Wne=(t,e)=>{const n=Array.isArray(e.servers)?e.servers:[],r=n.length?new Set(n.map(Uu)):null,i=Array.isArray(e.classes)?e.classes:[],a=i.length?new Set(i.map(p3)):null,o=e.timeRange==="all"?null:Number(String(e.timeRange).replace("d","")),c=o&&Number.isFinite(o)?Date.now()-o*864e5:null;return t.filter(u=>{var h;if(r&&!r.has(Uu(String((h=u.server)!=null?h:"")))||a&&!a.has(p3(u.class)))return!1;if(c!=null){const m=fp(u.lastScan);if(m!=null&&m<c)return!1}return!0})},v3=(t,e)=>{const n=(i,a)=>{if(i==null&&a==null)return 0;if(i==null)return 1;if(a==null)return-1;const o=i-a;return e.dir==="asc"?o:-o},r=(i,a)=>{const o=f3(i).localeCompare(f3(a),void 0,{numeric:!0,sensitivity:"base"});return e.dir==="asc"?o:-o};return t.sort((i,a)=>{var c,u;let o=0;switch(e.key){case"name":{const h=String((c=i.name)!=null?c:""),m=String((u=a.name)!=null?u:""),g=h.localeCompare(m,void 0,{sensitivity:"base"});o=e.dir==="asc"?g:-g;break}case"lastScan":{const h=fp(i.lastScan),m=fp(a.lastScan);o=n(h==null?null:h,m==null?null:m);break}case"main":o=n(i.main,a.main);break;case"con":o=n(i.con,a.con);break;case"sum":o=n(i._calculatedSum,a._calculatedSum);break;case"statsDay":o=n(i._statsPerDay,a._statsPerDay);break;case"ratio":o=n(i._ratioMain,a._ratioMain);break;case"mine":o=n(i.mine,a.mine);break;case"treasury":o=n(i.treasury,a.treasury);break;case"mainTotal":o=n(i.mainTotal,a.mainTotal);break;case"conTotal":o=n(i.conTotal,a.conTotal);break;case"sumTotal":o=n(i.sumTotal,a.sumTotal);break;case"xpProgress":o=n(i.xpProgress,a.xpProgress);break;case"xpTotal":o=n(i.xpTotal,a.xpTotal);break;case"level":default:o=n(i.level,a.level);break}return o!==0?o:r(i,a)}),t},Kne=["#f6e7a6","#f4de89","#f2d56d","#f0cc51","#edc236"],qne=["#ffe4b3","#ffdda0","#ffd68d","#ffcf7a","#ffc867"],Qne=["#9ec5ff","#8ab7ff","#76a9ff","#629bff","#4e8dff"],Yne={1:"#d8b4fe",2:"#c084fc",3:"#a855f7",4:"#f472b6"},Mb=(t,e)=>t&&t>0&&t<=e.length?e[t-1]:null,Xne=t=>{var e;return t&&(e=Yne[t])!=null?e:null},kf=t=>t?{boxShadow:`inset 0 0 0 1px ${t}`,borderRadius:6,padding:"0 4px",display:"inline-flex",alignItems:"center"}:void 0;function Jne(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"statsDay":return{key:"statsDay",dir:"desc"};case"mine":return{key:"mine",dir:"desc"};case"mainTotal":return{key:"mainTotal",dir:"desc"};case"conTotal":return{key:"conTotal",dir:"desc"};case"sumTotal":return{key:"sumTotal",dir:"desc"};case"xpProgress":return{key:"xpProgress",dir:"desc"};case"xpTotal":return{key:"xpTotal",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function Zne(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function ere(){return s.jsx(Ane,{children:s.jsx(tre,{})})}function tre(){var Re,Oe;const t=Kp(),{filterMode:e,setFilterMode:n,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:o,serverSheetOpen:c,setServerSheetOpen:u,servers:h,setServers:m,classes:g,setClasses:x,setGuilds:b,range:w,sortBy:k}=t,{serverGroups:A,player:L}=uL();Wr();const[I,N]=sr(),v=I.get("server"),_=I.get("servers"),R=I.get("class"),j=I.get("classes"),C=I.get("tab")==="guilds"?"guilds":"players",[M,T]=q.useState((Re=I.get("compare"))!=null?Re:""),F=q.useMemo(()=>Une(17).filter(Me=>Me>=zne),[]),D=((Oe=h==null?void 0:h.length)!=null?Oe:0)>0,V=q.useMemo(()=>ox(h!=null?h:[]),[h]),U=q.useMemo(()=>E_(g!=null?g:[]),[g]),K=q.useMemo(()=>{const Me=v!=null?v:_;return ox(h3(Me))},[v,_]),H=q.useMemo(()=>{const Me=R!=null?R:j;return E_(h3(Me))},[R,j]),z=v!=null||_!=null,Y=R!=null||j!=null,te=q.useMemo(()=>I.toString(),[I]),G=V.join(","),X=U.join(","),J=K.join(","),se=H.join(","),ue=q.useRef(null),Ne=q.useRef(V),Ee=q.useRef(U),ee=q.useRef(m),le=q.useRef(x),re=q.useRef(null),be=q.useRef(null),Te=async()=>{if(typeof document=="undefined")return;const Me=be.current;if(!Me)return;const De=()=>{let Ae=Me;for(;Ae;){const Xe=window.getComputedStyle(Ae).backgroundColor;if(Xe&&Xe!=="transparent"&&Xe!=="rgba(0, 0, 0, 0)")return Xe;Ae=Ae.parentElement}return"#0C1C2E"},Fe=Me.cloneNode(!0);Fe.querySelectorAll("img").forEach(Ae=>{Ae.loading="eager",Ae.decoding="sync"});const we=Array.from(Fe.querySelectorAll("tbody tr"));if(we.length>50)we.slice(50).forEach(Ae=>Ae.remove());else if(we.length===0){const Xe=Array.from(Fe.querySelectorAll('[role="row"]')).filter(oe=>!(oe.closest("thead")||oe.querySelector('[role="columnheader"]')));Xe.length>50&&Xe.slice(50).forEach(oe=>oe.remove())}const de=De(),Ie=document.createElement("div");Ie.setAttribute("aria-hidden","true"),Ie.style.position="fixed",Ie.style.top="0",Ie.style.left="0",Ie.style.transform="translate3d(-10000px, 0, 0)",Ie.style.pointerEvents="none",Ie.style.padding="0",Ie.style.background=de,Ie.style.width=`${Math.max(1,Me.offsetWidth)}px`,Ie.appendChild(Fe),document.body.appendChild(Ie);try{await new Promise(oe=>requestAnimationFrame(()=>oe()));const Ae=await fse(Ie,{pixelRatio:2,cacheBust:!0,backgroundColor:de}),Xe=document.createElement("a");Xe.download="sfdatahub_toplist.png",Xe.href=Ae,Xe.click()}finally{Ie.remove()}};q.useEffect(()=>{Ne.current=V},[V]),q.useEffect(()=>{Ee.current=U},[U]),q.useEffect(()=>{ee.current=m},[m]),q.useEffect(()=>{le.current=x},[x]),q.useEffect(()=>{const Me=ue.current;ue.current=G,Me!=null&&Me!==G&&b([])},[G,b]),P.useEffect(()=>{if(re.current===te){re.current=null;return}if(z){const Me=K;m3(Ne.current,Me)||ee.current(Me)}Y&&!m3(Ee.current,H)&&le.current(H)},[te,z,Y,J,se]),P.useEffect(()=>{const Me=new URLSearchParams(I),De=G,Fe=X;De?Me.set("server",De):Me.delete("server"),Me.delete("servers"),Fe?Me.set("class",Fe):Me.delete("class"),Me.delete("classes");const we=Me.toString();we!==te&&(re.current=we,N(Me,{replace:!0}))},[G,X,te,I,N]);const Le=q.useMemo(()=>{const Me=Array.isArray(L==null?void 0:L.rows)?L.rows:[];if(!Me.length)return[];const De=new Map;return Me.forEach(Fe=>{var Xe;const we=String((Xe=Fe.guild)!=null?Xe:"").trim();if(!we)return;const de=Nm(we);if(!de)return;const Ie=Fe.server&&String(Fe.server).trim().toUpperCase()||(V.length===1?V[0]:""),Ae=Ie?`${we} (${Ie})`:we;De.has(de)||De.set(de,{value:we,label:Ae})}),Array.from(De.values()).sort((Fe,we)=>Fe.label.localeCompare(we.label,void 0,{sensitivity:"base"}))},[L==null?void 0:L.rows,V]);return s.jsxs(s.Fragment,{children:[s.jsxs(as,{mode:"card",title:"Top Lists",actions:s.jsx(nre,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?s.jsx(Bse,{compareMonth:M,setCompareMonth:T,monthOptions:F,guildOptions:Le,onExportPng:Te,exportDisabled:!D||C!=="players"||r!=="table"}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[s.jsx(one,{}),C==="players"&&r==="table"&&s.jsx(sre,{servers:h!=null?h:[],classes:g!=null?g:[],range:w!=null?w:"all",sortKey:k!=null?k:"level",compareMonth:M,tableRef:be}),C==="guilds"&&s.jsx(Rne,{serverCodes:h!=null?h:[]})]}),s.jsx(Vse,{mode:"modal",open:c,onClose:()=>u(!1),serversByRegion:A,selected:h,onToggle:Me=>m(De=>De.includes(Me)?De.filter(Fe=>Fe!==Me):[...De,Me]),onSelectAllInRegion:Me=>{var De;return m((De=A[Me])!=null?De:[])},onClearAll:()=>m([])}),s.jsx(ene,{open:e==="sheet"&&a,onClose:()=>o(!1)})]})}function sre({servers:t,classes:e,range:n,sortKey:r,compareMonth:i,tableRef:a}){var de,Ie,Ae,Xe;const{t:o}=Os(),{guilds:c}=Kp(),{player:u,playerRows:h,playerLoading:m,playerError:g,playerLastUpdatedAt:x,playerScopeStatus:b,filters:w,sort:k,setFilters:A,setSort:L}=uL(),I=Wr(),N=qn(),v=((de=t==null?void 0:t.length)!=null?de:0)>0;P.useEffect(()=>{const oe=n==="all"?"all":n===60?"30d":`${n}d`,fe=ox(t),me=E_(e),xe=Zne(fe);A({servers:fe,classes:me,timeRange:oe,group:xe})},[t,e,n,A]),P.useEffect(()=>{const oe=Jne(r);L(oe)},[r,L]);const _=oe=>oe==null?"":new Intl.NumberFormat("en").format(oe),R=oe=>{if(oe==null)return"";const fe=_(Math.abs(oe));return fe?oe>0?`+${fe}`:`-${fe}`:String(oe)},j=(oe,fe)=>{if(fe)return{text:"n/a",variant:"na"};if(oe==null||oe==="")return{text:"n/a",variant:"na"};let me=null;if(typeof oe=="number")me=oe;else if(typeof oe=="string"){const lt=oe.trim();if(!lt||/^n\/a$/i.test(lt))return{text:"n/a",variant:"na"};const Je=Number(lt);me=Number.isFinite(Je)?Je:null}if(me==null||!Number.isFinite(me))return{text:"n/a",variant:"na"};if(me===0||Object.is(me,-0))return{text:"-",variant:"zero"};const xe=_(Math.abs(me));return{text:me>0?`+${xe}`:`-${xe}`,variant:me>0?"pos":"neg"}},S=(oe,fe)=>{if(oe==null||fe==null||!Number.isFinite(oe)||!Number.isFinite(fe)||fe===0)return"";const me=oe/fe;return me>=1.25?"pos2":me>=1.1?"pos1":me>=.95?"mid0":me>=.8?"mid1":me>=.6?"neg1":me>0?"neg2":"neg3"},C=oe=>{if(oe==null)return null;const fe=oe<1e12?oe*1e3:oe;return new Date(fe).toLocaleString()},M=oe=>oe?oe.toLocaleString():"",T=h||[],F=q.useMemo(()=>{const oe=(c||[]).map(Nm).filter(Boolean);return oe.length?new Set(oe):null},[c]),D=q.useMemo(()=>(Array.isArray(u==null?void 0:u.rows)?u.rows:[]).some(fe=>!!Nm(fe.guild)),[u==null?void 0:u.rows]),V=q.useMemo(()=>!F||!D?T:T.filter(oe=>{const fe=Nm(oe.guild);return fe?F.has(fe):!1}),[T,F,D]),[U,K]=sr(),[H,z]=q.useState({rows:[],loading:!1,baselineServers:[],missingServers:[],error:null}),Y=!!i&&!H.loading,te=q.useMemo(()=>ox(t).join(","),[t]),G=q.useMemo(()=>te?te.split(",").filter(Boolean):[],[te]),X=q.useMemo(()=>{const oe=(H.baselineServers||[]).map(fe=>String(fe).trim().toUpperCase()).filter(Boolean);return new Set(oe)},[H.baselineServers]);P.useEffect(()=>{var me;const oe=new URLSearchParams(U);i?oe.set("compare",i):oe.delete("compare"),((me=U.get("compare"))!=null?me:"")!==i&&K(oe,{replace:!0})},[i,U,K]),P.useEffect(()=>{let oe=!1;const fe=String(i!=null?i:"").trim();if(!fe||fe.toLowerCase()==="off")return z({rows:[],loading:!1,baselineServers:[],missingServers:[],error:null}),()=>{oe=!0};if(!G.length)return z({rows:[],loading:!1,baselineServers:[],missingServers:[],error:null}),()=>{oe=!0};const xe=G.map(ut=>Lne(ut,fe)),tt=Fne({scope:"players",servers:G,month:fe}),lt=Bne(tt);if(lt)return z({...lt,loading:!1}),()=>{oe=!0};const Je=ut=>{const bt=[];for(const ft of ut){const mt=Array.isArray(ft.players)?ft.players:[];for(const ot of mt)bt.push({...ot,server:ft.server||ot.server})}return bt};return z(ut=>({...ut,loading:!0,baselineServers:[],missingServers:[],error:null})),(async()=>{var dt;const ut=await Promise.all(xe.map(qe=>bne(qe)));if(oe)return;const bt=[],ft=[],mt=[];let ot=null,os=null;ut.forEach((qe,_t)=>{var Ot,Be;const Dt=xe[_t];if(qe.ok){const Ct=(Dt.split("__")[0]||"").trim();ft.push(Ct),bt.push({...qe.snapshot,server:Ct||qe.snapshot.server})}else{const Ct=qe;mt.push(Dt),ot||(ot=(Ot=Ct.error)!=null?Ot:null,os=(Be=Ct.detail)!=null?Be:null)}});const gt=bt.length?Je(bt):[],ne=mt.length?mt.join(", "):null,Ue=mt.length?o("toplists.compareMissingSnapshot","Baseline missing for {{key}}.",{key:ne!=null?ne:""}):(dt=os!=null?os:ot)!=null?dt:null,Ve={rows:gt,loading:!1,baselineServers:ft,missingServers:mt,error:Ue};z(Ve),mt.length||$ne(tt,{rows:Ve.rows,baselineServers:Ve.baselineServers,missingServers:[],error:null})})().catch(ut=>{if(oe)return;const bt=xe.join(", "),ft=o("toplists.compareMissingSnapshot","Baseline missing for {{key}}.",{key:bt});z({rows:[],loading:!1,baselineServers:[],missingServers:xe,error:ft}),console.warn("[ToplistsPlayersCompare] snapshot fetch failed",ut)}),()=>{oe=!0}},[i,te,o]);const J=q.useCallback(oe=>{var me;const fe=(me=oe.playerId)!=null?me:oe.id;return fe?`id:${fe}`:`${oe.server||"ALL"}:${oe.name}:${oe.class||""}`},[]),se=q.useCallback(oe=>{var Je,ut,bt,ft;const fe=Uu(String((Je=oe.server)!=null?Je:"")),me=(ut=oe.playerId)!=null?ut:oe.id,xe=me!=null?String(me).trim():"";if(fe&&xe)return`${fe}__${xe}`;const tt=String((bt=oe.name)!=null?bt:"").trim(),lt=String((ft=oe.class)!=null?ft:"").trim();return fe||tt||lt?`${fe}__${tt}__${lt}`:J(oe)},[J]),ue=q.useMemo(()=>{const oe=new Map;return Y&&H.rows.forEach(fe=>{const me=se(fe);oe.has(me)||oe.set(me,fe)}),oe},[Y,H.rows,se]),Ne=q.useMemo(()=>Y?V.map(oe=>{var Ot;const fe=se(oe),me=ue.get(fe),xe=Uu(String((Ot=oe.server)!=null?Ot:"")),lt=!X.has(xe)||!me,Je=Be=>{if(lt||!me||Be==="ratio")return null;const Ct=Wl(oe[Be]),ys=Wl(me[Be]);return ys==null?null:(Ct!=null?Ct:0)-ys},ut=Je("level"),bt=Je("main"),ft=Je("con"),mt=Je("sum"),ot=Je("mainTotal"),os=Je("conTotal"),gt=Je("sumTotal"),ne=Je("xpProgress"),Ue=Je("xpTotal"),Ve=Je("ratio"),dt=Je("mine"),qe=Je("treasury");let _t=null,Dt=null;if(!lt&&me){const Be=g3(oe,me,mt);_t=Be.days,Dt=Be.perDay}return{...oe,_compareMissing:lt,_statsPerDay:Dt,_statsDays:_t,_delta:{level:ut,main:bt,con:ft,sum:mt,mainTotal:ot,conTotal:os,sumTotal:gt,xpProgress:ne,xpTotal:Ue,ratio:Ve,mine:dt,treasury:qe}}}):V,[Y,V,se,ue,X]),Ee=q.useMemo(()=>{const oe=new Map;return Ne.forEach(fe=>{const me=se(fe);oe.has(me)||oe.set(me,fe)}),oe},[Ne,se]),ee=q.useMemo(()=>{if(!Y)return null;const oe=new Map;H.rows.forEach(me=>{var lt;const xe=Uu(String((lt=me.server)!=null?lt:"")),tt=(oe.get(xe)||0)+1;oe.set(xe,tt)});let fe=0;return oe.forEach(me=>{me>fe&&(fe=me)}),fe||null},[Y,H.rows]),le=q.useMemo(()=>{if(!Y)return[];let oe=Array.isArray(H.rows)?[...H.rows]:[];return oe.length&&(oe=oe.map(fe=>{var Je,ut;const me=Hne(fe.main,fe.con),xe=Ee.get(se(fe)),tt=xe?g3(xe,fe):{days:null,perDay:null},lt=((Je=fe.main)!=null?Je:0)+((ut=fe.con)!=null?ut:0);return{...fe,_ratioMain:me,_statsPerDay:tt.perDay,_statsDays:tt.days,_calculatedSum:lt}}),oe=Wne(oe,w),oe=v3(oe,k),ee!=null&&ee>0&&oe.length>ee&&(oe=oe.slice(0,ee)),F&&D&&(oe=oe.filter(fe=>{const me=Nm(fe.guild);return me?F.has(me):!1}))),oe},[Y,H.rows,w,k,F,D,ee,Ee,se]),re=q.useMemo(()=>{const oe=new Map;return Y&&le.forEach((fe,me)=>{const xe=se(fe);oe.has(xe)||oe.set(xe,me+1)}),oe},[Y,le,se]),be=q.useMemo(()=>{if(!Y||k.key!=="statsDay")return Ne;const oe=[...Ne];return v3(oe,k),oe},[Y,Ne,k]),Te=q.useMemo(()=>{const oe=new Map;return be.forEach((fe,me)=>{const xe=se(fe);oe.has(xe)||oe.set(xe,me+1)}),oe},[be,se]),Le=q.useMemo(()=>be.map((oe,fe)=>{var Je;if(!Y)return{...oe,_rank:fe+1};const me=se(oe),xe=(Je=Te.get(me))!=null?Je:fe+1,tt=re.get(me),lt=tt!=null&&xe!=null?tt-xe:null;return{...oe,_rank:fe+1,_rankDelta:lt}}),[Y,be,se,re,Te]),Re=(()=>{if(!Y)return null;const oe=Le.slice(0,100);let fe=0,me=0;return oe.forEach(xe=>{const tt=xe._statsPerDay;typeof tt=="number"&&Number.isFinite(tt)&&(fe+=tt,me+=1)}),me?fe/me:null})(),Oe=(()=>{if(!Y)return null;let oe=null;return Le.forEach(fe=>{const me=fe._statsPerDay;typeof me=="number"&&Number.isFinite(me)&&(oe==null||me>oe)&&(oe=me)}),oe})(),Me=q.useMemo(()=>{const oe=new Map,fe=Le,me=lt=>{var Je,ut;return(ut=(Je=lt.playerId)!=null?Je:lt.id)!=null?ut:J(lt)},xe=lt=>{const Je=me(lt);let ut=oe.get(Je);return ut||(ut={},oe.set(Je,ut)),ut},tt=(lt,Je)=>{const ut=fe.map((bt,ft)=>{const mt=lt(bt);return mt==null?null:{row:bt,value:mt,idx:ft}}).filter(Boolean);ut.sort((bt,ft)=>ft.value-bt.value||bt.idx-ft.idx),ut.slice(0,5).forEach((bt,ft)=>{xe(bt.row)[Je]=ft+1})};return tt(lt=>Wl(lt.main),"mainRank"),tt(lt=>Wl(lt.con),"conRank"),tt(lt=>Wl(lt.level),"levelRank"),fe.forEach(lt=>{const Je=Wl(lt.mine);if(Je==null)return;const ut=Je>=100?4:Je>=80?3:Je>=65?2:Je>=50?1:null;ut&&(xe(lt).mineTier=ut)}),oe},[Le,J]),De=Date.now(),Fe=v?m?"Loading...":g?"Error":"Ready":"No server selected",we=oe=>{const fe=Le,me=xe=>{var lt,Je,ut,bt,ft,mt;const tt=[xe.identifier,(lt=xe.original)==null?void 0:lt.identifier,(Je=xe.value)==null?void 0:Je.identifier,(ut=xe.data)==null?void 0:ut.identifier,(bt=xe.player)==null?void 0:bt.identifier,(mt=(ft=xe.value)==null?void 0:ft.player)==null?void 0:mt.identifier];for(const ot of tt)if(typeof ot=="string"&&ot.trim())return ot.trim();return null};return s.jsxs("table",{className:"toplists-table",style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{padding:"8px 6px"},children:"#"}),s.jsx("th",{style:{padding:"8px 6px"},children:" Rank"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"center",width:60},children:"Class"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Stats/Day"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"})]})}),s.jsxs("tbody",{children:[fe.map((xe,tt)=>{var nr,xr,pn,us,Ts,_n,rr,Qt,Lr,Yn,Yi,ki,ci,di,Ci,Xi;const lt=Y?xe._rankDelta:null,Je=xe._delta||{},ut=Y?!!xe._compareMissing:!1,bt=Y?j(lt,ut):null,ft=Y?xe._statsPerDay:null,mt=Y?xe._statsDays:null,ot=ft==null?"-":_(ft),os=mt==null?"-":`${mt}d`,gt=S(ft,Re),Ue=ft!=null&&Oe!=null&&ft===Oe?"stats-day-chip stats-day-chip--best":gt?`stats-day-chip stats-day-chip--${gt}`:"stats-day-chip",Ve=Gne(xe.lastScan,De),dt=String((nr=xe.class)!=null?nr:"").trim(),qe=ny(dt,48),_t=(pn=(xr=xe.playerId)!=null?xr:xe.id)!=null?pn:null,Dt=me(xe),Ot=_t!=null?_t:J(xe),Be=Me.get(Ot),Ct=Mb(Be==null?void 0:Be.mainRank,Kne),ys=Mb(Be==null?void 0:Be.conRank,qne),ke=Mb(Be==null?void 0:Be.levelRank,Qne),Ss=Xne(Be==null?void 0:Be.mineTier),Qn=(us=xe._calculatedSum)!=null?us:0,Ks=(Ji,Is,ya=!1)=>Y?Is?s.jsx("div",{style:{fontSize:11,opacity:.8},children:"-"}):Ji==null&&ya?null:s.jsx("div",{style:{fontSize:11,opacity:.8},children:Ji==null?o("toplists.deltaNew","NEW"):R(Ji)}):null,vr=()=>{Dt&&I(`/player/${encodeURIComponent(Dt)}`)};return s.jsxs("tr",{className:"toplists-row",style:{borderBottom:"1px solid #2C4A73",cursor:"pointer",userSelect:"none"},onClick:vr,children:[s.jsx("td",{style:{padding:"8px 6px"},children:tt+1}),s.jsx("td",{style:{padding:"8px 6px"},children:bt?s.jsx("span",{className:`rank-delta-chip rank-delta-chip--${bt.variant}`,children:bt.text}):""}),s.jsx("td",{style:{padding:"8px 6px"},children:xe.server}),s.jsx("td",{style:{padding:"8px 6px"},children:xe.name}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"center"},children:s.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:qe?s.jsx("img",{src:qe,alt:dt||"class",loading:oe.imgLoading,className:"class-icon-toplist",style:{display:"block",objectFit:"contain"}}):s.jsx("span",{children:dt})})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:kf(ke),children:_(xe.level)}),Ks((Ts=Je.level)!=null?Ts:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:(_n=xe.guild)!=null?_n:""}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:kf(Ct),children:_(xe.main)}),Ks((rr=Je.main)!=null?rr:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:kf(ys),children:_(xe.con)}),Ks((Qt=Je.con)!=null?Qt:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{children:_(Qn)}),Ks((Lr=Je.sum)!=null?Lr:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{className:Ue,children:ot}),s.jsx("div",{style:{fontSize:11,opacity:.8},children:os})]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[s.jsx("span",{children:(Yi=(Yn=xe._ratioLabel)!=null?Yn:xe.ratio)!=null?Yi:""}),Ks((ki=Je.ratio)!=null?ki:null,ut,!0)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:kf(Ss),children:_(xe.mine)}),Ks((ci=Je.mine)!=null?ci:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{children:_(xe.treasury)}),Ks((di=Je.treasury)!=null?di:null,ut)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[s.jsx("span",{children:(Ci=xe.lastScan)!=null?Ci:""}),Ve&&s.jsx("span",{"aria-hidden":!0,style:{width:8,height:8,borderRadius:"50%",background:Ve,boxShadow:"0 0 6px rgba(0, 0, 0, 0.35)"}})]})})]},`${xe.name}__${xe.server}__${(Xi=xe.class)!=null?Xi:""}`)}),m&&Le.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:15,style:{padding:12},children:"Loading..."})}),!m&&!g&&fe.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:15,style:{padding:12},children:"No results"})})]})]})};return s.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[s.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[s.jsxs("div",{children:[Fe," - ",Le.length," rows"]}),s.jsx("div",{children:x?`Updated: ${C(x)}`:null})]}),i&&H.error&&s.jsx("div",{style:{fontSize:12,color:"#ffb347"},children:H.error}),b&&s.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[s.jsxs("span",{children:["Scope ",b.scopeId,"  ",b.changesSinceLastRebuild,"/",(Ie=b.minChanges)!=null?Ie:"?"," changes since last rebuild"]}),s.jsxs("span",{children:["Auto rebuild at ",(Ae=b.minChanges)!=null?Ae:"?"," changes or after ",(Xe=b.maxAgeDays)!=null?Xe:"?"," days"]}),s.jsxs("span",{children:["Last rebuild: ",M(b.lastRebuildAt)]})]}),v&&g&&s.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),s.jsx("div",{style:{wordBreak:"break-all"},children:g}),s.jsx("button",{onClick:()=>I(`${N.pathname}${N.search}${N.hash}`),style:{marginTop:8},children:"Retry"})]}),v?s.jsx(s.Fragment,{children:s.jsx("div",{ref:a,style:{overflowX:"auto"},children:we({imgLoading:"lazy"})})}):s.jsx("div",{style:{padding:12,color:"#B0C4D9"},children:"Please select at least one server."})]})}function nre(){const[t,e]=sr(),r=t.get("tab")==="guilds"?"guilds":"players",i=a=>{const o=new URLSearchParams(t);o.set("tab",a),e(o)};return s.jsx("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:s.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[s.jsx(x3,{active:r==="players",onClick:()=>i("players"),label:"Players"}),s.jsx(x3,{active:r==="guilds",onClick:()=>i("guilds"),label:"Guilds"})]})})}function x3({active:t,onClick:e,label:n}){return s.jsx("button",{type:"button",onClick:e,className:["rounded-lg px-3 py-1.5 text-sm text-white border",t?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:n})}function rre(){return s.jsx(bse,{children:s.jsx(ere,{})})}function ire(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Browse"})})}function are(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Rankings"})})}function ore(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Stats"})})}const lre="/assets/demo-avatar-special.png",y3={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!1,background:"gradient",frame:"",mirrorHorizontal:!0},cre={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},bi=(t,e)=>Math.min(Math.max(Math.round(t),0),e),dre=t=>{var n;const e={...y3,...t||{}};return{...e,class:bi(e.class,15),race:bi(e.race,8),mouth:bi(e.mouth,30),hair:bi(e.hair,40),hairColor:bi(e.hairColor,12),horn:bi(e.horn,10),hornColor:bi(e.hornColor,10),brows:bi(e.brows,10),eyes:bi(e.eyes,20),beard:bi(e.beard,15),nose:bi(e.nose,10),ears:bi(e.ears,10),extra:bi(e.extra,20),special:bi(e.special,200),showBorder:!1,background:"",frame:"",mirrorHorizontal:(n=e.mirrorHorizontal)!=null?n:y3.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function gL({config:t,label:e,fallbackImage:n,fallbackLabel:r}){const i=P.useRef(null),a=P.useRef(null),[o,c]=P.useState("idle"),u=P.useMemo(()=>!t||Object.keys(t||{}).length===0?null:dre(t),[JSON.stringify(t||{})]);P.useEffect(()=>{let b=!1;if(!u){c("idle");return}c("loading");try{const w=i.current;if(!w){c("error");return}const k=new E5(w,u);a.current=k,c("ready")}catch(w){console.error("[PortraitMaker] failed to initialize",w),b||c("error")}return()=>{var w,k;b=!0;try{(k=(w=a.current)==null?void 0:w.dispose)==null||k.call(w)}catch(A){}a.current=null}},[u]);const h=u&&o!=="ready"?cre[o]:null,m=n||lre,g=r||e,x=!u||o==="error";return s.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[s.jsxs("div",{className:"avatar-portrait__canvas-shell",children:[!x&&s.jsx("canvas",{ref:i,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`}),x&&s.jsx("img",{src:m,alt:g,className:"avatar-portrait__fallback",draggable:!1,width:240,height:240})]}),h&&s.jsx("span",{className:"avatar-portrait__status",children:h})]})}const Fb=[{key:"str",label:"STR",name:"Strength"},{key:"dex",label:"DEX",name:"Dexterity"},{key:"int",label:"INT",name:"Intelligence"},{key:"con",label:"CON",name:"Constitution"},{key:"lck",label:"LCK",name:"Luck"}],ure=8,Bb=t=>typeof t=="number"&&Number.isFinite(t)?t.toLocaleString("de-DE"):"-",$b=(t,e)=>e<=0?0:Math.min(100,Math.max(0,t/e*100)),b3=t=>typeof t=="number"&&Number.isFinite(t);function hre({baseStats:t,totalStats:e,benchmarks:n,mode:r,onModeChange:i}){const[a,o]=P.useState("base"),[c,u]=P.useState(!1),[h,m]=P.useState(!1);P.useEffect(()=>{let v=null,_=null;return v=requestAnimationFrame(()=>{_=requestAnimationFrame(()=>u(!0))}),()=>{v!=null&&cancelAnimationFrame(v),_!=null&&cancelAnimationFrame(_)}},[]),P.useEffect(()=>{c&&!h&&m(!0)},[c,h]);const g=Fb.some(v=>b3(e==null?void 0:e[v.key])),b=(r!=null?r:a)==="total"&&g?"total":"base",w=v=>{v==="total"&&!g||(i?i(v):o(v))},k=Fb.map(v=>{const _=b==="total"?e:t,R=_==null?void 0:_[v.key];return b3(R)?R:0}),A=Math.max(...k,0),L=A>0?A*1.05:1,I=b==="base",N=b==="base"?"Base Stats":"Total Stats";return s.jsxs("div",{className:"player-profile__attribute-bars",children:[s.jsxs("div",{className:"player-profile__attribute-bars-head",children:[s.jsx("div",{className:"player-profile__card-label",children:N}),s.jsxs("div",{className:"player-profile__attribute-toggle",role:"group","aria-label":"Attribute Ansicht",children:[s.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${b==="base"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":b==="base",onClick:()=>w("base"),children:"Base"}),s.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${b==="total"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":b==="total",onClick:()=>w("total"),disabled:!g,children:"Total"})]})]}),s.jsx("div",{className:"player-profile__attribute-bars-list",children:Fb.map(v=>{var te,G,X;const _=b==="total"?e:t,R=Number(_==null?void 0:_[v.key])||0,j=I?(te=n==null?void 0:n.serverAvg)==null?void 0:te[v.key]:void 0,S=I?(G=n==null?void 0:n.guildAvg)==null?void 0:G[v.key]:void 0,C=I?(X=n==null?void 0:n.scaleMax)==null?void 0:X[v.key]:void 0,M=Number(j)||0,T=Number(S)||0,F=typeof C=="number"&&Number.isFinite(C),D=Math.max(F?Number(C):L,R,M,T,1),V=$b(R,D),U=$b(M,D),K=$b(T,D),H=Math.min(1,Math.max(0,V/100)),z=c?H:0,Y=h?void 0:"500ms";return s.jsxs("div",{className:"player-profile__attribute-bar-row",children:[s.jsxs("div",{className:"player-profile__attribute-bar-label","aria-hidden":!0,children:[s.jsx("span",{className:"player-profile__attribute-bar-icon",children:v.label}),s.jsx("span",{className:"player-profile__attribute-bar-name",children:v.name})]}),s.jsxs("div",{className:"player-profile__attribute-bar-track",role:"presentation",children:[s.jsx("div",{className:"player-profile__attribute-bar-fill",style:{transform:`scaleX(${z})`,minWidth:R>0&&V<100?ure:void 0,transitionDuration:Y},"aria-hidden":!0}),Number.isFinite(j)&&s.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--server",style:{left:`${U}%`},"aria-hidden":!0}),Number.isFinite(S)&&s.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--guild",style:{left:`${K}%`},"aria-hidden":!0})]}),s.jsxs("div",{className:"player-profile__attribute-bar-values",children:[s.jsx("div",{className:"player-profile__attribute-bar-value",children:Bb(R)}),Number.isFinite(j)&&s.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Server ",Bb(j)]}),Number.isFinite(S)&&s.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Gilde ",Bb(S)]})]})]},v.key)})})]})}const mre="_tooltipWrapper_cc7ym_1",pre="_bottom_cc7ym_13",gre="_bubble_cc7ym_13",fre="_tail_cc7ym_25",vre="_trigger_cc7ym_39",xre="_card_cc7ym_89",pu={tooltipWrapper:mre,bottom:pre,bubble:gre,tail:fre,trigger:vre,card:xre},t2=({content:t,children:e,className:n,placement:r="top"})=>{if(!t)return s.jsx(s.Fragment,{children:e});const i=r==="bottom"?` ${pu.bottom}`:"";return s.jsxs("div",{className:`${pu.tooltipWrapper}${i}${n?` ${n}`:""}`,children:[s.jsx("div",{className:pu.trigger,children:e}),s.jsxs("div",{className:pu.bubble,role:"tooltip",children:[s.jsx("div",{className:pu.card,children:t}),s.jsx("div",{className:pu.tail})]})]})},yre=t=>{if(t==null||!Number.isFinite(t))return{level:"unknown",label:"Unknown",hint:"Scan history unavailable"};const e=Math.max(0,Math.floor(t));return e===0?{level:0,label:"Scanned today",hint:"No rescan needed"}:e===1?{level:1,label:"Very fresh",hint:"No rescan needed"}:e<=3?{level:2,label:"Fresh",hint:"No rescan needed"}:e<=7?{level:3,label:"Recent",hint:"Rescan recommended"}:e<=14?{level:4,label:"Aging",hint:"Rescan recommended"}:e<=30?{level:5,label:"Outdated",hint:"Rescan strongly recommended"}:{level:6,label:"Stale",hint:"Rescan strongly recommended"}},bre=t=>{if(t==null||!Number.isFinite(t))return null;const e=Math.max(0,Math.floor(t));return e===0?"today":e===1?"1 day ago":`${e} days ago`};function _re({label:t,size:e=40}){const n=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return s.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:n||"?"})}function wre({className:t,label:e,size:n=40}){const r=c=>c.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=fr.find(c=>r(c.label)===i)||fr.find(c=>r(c.label).startsWith(i)||i.startsWith(r(c.label))),o=a?Ni(a.iconUrl,n*2):null;return o?s.jsx("div",{className:"player-profile__class-avatar",style:{width:n,height:n},children:s.jsx("img",{src:o,alt:"",draggable:!1})}):s.jsx(_re,{label:e,size:n})}function jre({data:t,loading:e,onAction:n}){const[r,i]=P.useState("base"),a=w=>w.toLowerCase().replace(/[^a-z0-9]+/g,""),o=P.useMemo(()=>yre(t.lastScanDays),[t.lastScanDays]),c=P.useMemo(()=>{const w=[];t.lastScanAtLabel&&w.push(`Last scan: ${t.lastScanAtLabel}`);const k=bre(t.lastScanDays);return k&&w.push(`Age: ${k}`),o.hint&&w.push(o.hint),w.join(" | ")},[t.lastScanAtLabel,t.lastScanDays,o.hint]),u=fr.find(w=>a(w.label)===a(t.className||""))||fr.find(w=>a(w.label).startsWith(a(t.className||""))||a(t.className||"").startsWith(a(w.label))),h=t.portraitFallbackUrl||(u?Ni(u.iconUrl,420):void 0)||"/assets/demo-avatar-special.png",m=t.portraitFallbackLabel||t.className||t.playerName,g=t.hasPortrait===!1?void 0:t.portrait,x=w=>typeof w=="number"&&Number.isFinite(w)?w.toLocaleString("de-DE"):"-",b=P.useMemo(()=>t.metrics.map(w=>{var k;return w.label==="Total Base Stats"&&r==="total"?{...w,label:"Total Stats",value:x((k=t.totalStatsValue)!=null?k:0)}:w}),[t.metrics,t.totalStatsValue,r]);return s.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[s.jsxs("div",{className:"player-profile__hero-portrait",children:[s.jsxs("div",{className:"player-profile__identity player-profile__identity--overlay",children:[s.jsx(wre,{className:t.className,label:t.playerName,size:48}),s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__player-name",children:t.playerName}),s.jsxs("div",{className:"player-profile__player-meta",children:[s.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&s.jsxs("span",{children:[" ",t.guild]}),t.server&&s.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&s.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),s.jsx(t2,{content:c,children:s.jsxs("div",{className:"player-profile__freshness",children:[s.jsx("span",{"aria-hidden":!0,className:`player-profile__freshness-dot player-profile__freshness-dot--${o.level}`}),s.jsx("span",{className:"player-profile__freshness-label",children:o.label}),s.jsx("span",{"aria-hidden":!0,className:"player-profile__freshness-info",children:""})]})})]})]}),s.jsx(gL,{config:g,label:t.playerName,fallbackImage:h,fallbackLabel:m})]}),s.jsxs("div",{className:"player-profile__hero-body",children:[s.jsx("div",{className:"player-profile__hero-metrics",children:b.map(w=>s.jsxs("div",{className:"player-profile__hero-metric",children:[s.jsx("div",{className:"player-profile__hero-metric-label",children:w.label}),s.jsx("div",{className:"player-profile__hero-metric-value",children:w.value}),w.hint&&s.jsx("div",{className:"player-profile__hero-metric-hint",children:w.hint})]},w.label))}),t.baseStats&&s.jsx(hre,{baseStats:t.baseStats,totalStats:t.totalStats,benchmarks:t.baseStatBenchmarks,mode:r,onModeChange:i}),t.badges.length>0&&s.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(w=>s.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${w.tone||"neutral"}`,title:w.hint,children:[w.icon&&s.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:w.icon}),s.jsx("span",{children:w.label}),s.jsx("strong",{children:w.value})]},w.label))}),t.actions.length>0&&s.jsx("div",{className:"player-profile__hero-actions",children:t.actions.map(w=>s.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||w.disabled,title:w.title,onClick:()=>n==null?void 0:n(w.key),children:w.label},w.key))})]})]})}const Sre=q.memo(jre),Ob=600,mv=240,Nre=[80,160,240,320,400,480,560],kre=[40,80,120,160,200],gu=40,Cre=560,Vb=40,_3=200,Cf=mv,Tre=(t,e,n)=>Math.max(e,Math.min(n,t));function Ire({points:t,avgValue:e=null,showAvg:n=!0,showFill:r=!0,showDots:i=!0,showXLabels:a=!0,className:o}){const c=P.useId(),u=Cre-gu,h=_3-Vb,{linePath:m,areaPath:g,dots:x,avgY:b,labels:w}=P.useMemo(()=>{if(!t.length)return{linePath:"",areaPath:"",dots:[],avgY:null,labels:[]};let k=Math.min(...t),A=Math.max(...t);const I=Math.max(1,A-k)*.1;k-=I,A+=I;const N=Math.max(1,A-k),v=F=>t.length>1?gu+F/(t.length-1)*u:gu,_=F=>Tre(Vb+(1-(F-k)/N)*h,Vb,_3);if(t.length===1){const F=gu,D=gu+u*.1,V=_(t[0]),U=`${[`M${F},${V}`,`L${D},${V}`,`L${D},${Cf}`,`L${F},${Cf}`,"Z"].join(" ")}`;return{linePath:`M${F},${V} L${D},${V}`,areaPath:U,dots:i?[{x:(F+D)/2,y:V}]:[],avgY:n&&e!=null?_(e):null,labels:[{x:gu,text:"t0"}]}}const R=t.map((F,D)=>({x:v(D),y:_(F)})),j=R.map((F,D)=>`${D===0?"M":"L"}${F.x},${F.y}`).join(" "),S=`${j} L${R[R.length-1].x},${Cf} L${R[0].x},${Cf} Z`,C=i?R:[],M=n&&e!=null?_(e):null,T=t.map((F,D)=>({x:v(D),text:`t${D}`}));return{linePath:j,areaPath:S,dots:C,avgY:M,labels:T}},[t,e,n,i,u,h]);return s.jsxs("svg",{viewBox:`0 0 ${Ob} ${mv}`,preserveAspectRatio:"none",className:`player-profile__trend-chart ${o!=null?o:""}`.trim(),role:"img","aria-label":"Anchored trend",children:[s.jsxs("g",{className:"player-profile__trend-grid",opacity:"0.55",stroke:"rgba(43,76,115,0.55)",strokeWidth:1,children:[Nre.map((k,A)=>s.jsx("line",{x1:k,x2:k,y1:0,y2:mv},`gv-${A}`)),kre.map((k,A)=>s.jsx("line",{x1:0,x2:Ob,y1:k,y2:k},`gh-${A}`))]}),n&&b!=null&&s.jsxs("g",{className:"player-profile__trend-avg",children:[s.jsx("text",{x:12,y:20,className:"player-profile__trend-avg-label",children:"Avg"}),s.jsx("line",{x1:0,x2:Ob,y1:b,y2:b})]}),r&&g&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:c,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"rgba(92, 139, 198, 0.28)"}),s.jsx("stop",{offset:"100%",stopColor:"rgba(92, 139, 198, 0)"})]})}),r&&g&&s.jsx("path",{d:g,className:"player-profile__trend-area",fill:`url(#${c})`}),m&&s.jsx("path",{d:m,className:"player-profile__trend-line",fill:"none"}),x.map((k,A)=>s.jsx("circle",{cx:k.x,cy:k.y,r:4,className:"player-profile__trend-dot"},`dot-${A}`)),a&&s.jsx("g",{className:"player-profile__trend-xlabels",children:w.map((k,A)=>s.jsx("text",{x:k.x,y:mv-8,textAnchor:"middle",children:k.text},`lbl-${A}`))})]})}const Ub=t=>t==null?"-":t.toLocaleString("de-DE");function Ere({title:t,subtitle:e,badgeLabel:n="Line + Avg marker",series:r,className:i}){const{latest:a,start:o,delta:c,deltaPct:u,avg:h,xLabels:m}=P.useMemo(()=>{const x=Array.isArray(r.points)?r.points:[],b=x.length?x[x.length-1]:null,w=x.length?x[0]:null,k=b!=null&&w!=null?b-w:null,A=k!=null&&w&&Math.abs(w)>0?k/w*100:null,L=x.length?x.reduce((N,v)=>N+v,0)/x.length:null,I=x.map((N,v)=>`t${v}`);return{latest:b,start:w,delta:k,deltaPct:A,avg:L,xLabels:I}},[r.points]),g=u!=null?`${u>=0?"+":""}${u.toFixed(1)}%`:c!=null?`${c>=0?"+":""}${c.toLocaleString("de-DE")}`:"+0";return s.jsxs("article",{className:`anchored-card ${i!=null?i:""}`.trim(),children:[s.jsxs("header",{className:"anchored-card__header",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"anchored-card__title",children:[t,n&&s.jsx("span",{className:"anchored-card__badge",children:n})]}),e&&s.jsx("div",{className:"anchored-card__subtitle",children:e})]}),s.jsxs("div",{className:"anchored-card__delta anchored-card__delta--up","aria-label":"Delta",children:[" ",g]})]}),s.jsx("div",{className:"anchored-card__chart",children:s.jsx(Ire,{points:r.points,avgValue:h,showAvg:!0,showDots:!0,showFill:!0,showXLabels:!0})}),s.jsxs("footer",{className:"anchored-card__footer",children:[s.jsxs("div",{className:"anchored-card__kpis",children:[s.jsxs("div",{className:"anchored-card__kpi",children:[s.jsx("strong",{children:Ub(a)}),s.jsx("span",{children:"Base Stats (latest)"})]}),s.jsxs("div",{className:"anchored-card__kpi",children:[s.jsx("strong",{children:Ub(o)}),s.jsx("span",{children:"Server  marker"})]}),s.jsxs("div",{className:"anchored-card__pill anchored-card__pill--up",children:[" ",Ub(c)]})]}),s.jsxs("div",{className:"anchored-card__legend",children:[s.jsxs("span",{children:[s.jsx("span",{className:"anchored-card__dot"})," Player"]}),s.jsxs("span",{children:[s.jsx("span",{className:"anchored-card__dot anchored-card__dot--muted"})," Average marker"]})]})]})]})}function Are({data:t}){return s.jsxs("div",{className:"player-profile__tab-panel",children:[s.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>s.jsxs("article",{className:"player-profile__card",children:[s.jsx("div",{className:"player-profile__card-label",children:e.label}),s.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&s.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),s.jsxs("div",{className:"player-profile__section",children:[s.jsxs("header",{className:"player-profile__section-head",children:[s.jsx("h3",{children:"Attribute"}),s.jsx("span",{children:"Basis vs. Gesamt"})]}),s.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>s.jsxs("div",{className:"player-profile__attr-card",children:[s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__attr-label",children:e.label}),s.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&s.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),s.jsxs("div",{className:"player-profile__split",children:[s.jsxs("div",{className:"player-profile__section",children:[s.jsx("header",{className:"player-profile__section-head",children:s.jsx("h3",{children:"Resistenzen"})}),s.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>s.jsxs("li",{children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]}),s.jsxs("div",{className:"player-profile__section",children:[s.jsx("header",{className:"player-profile__section-head",children:s.jsx("h3",{children:"konomie"})}),s.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>s.jsxs("li",{children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function Pre({items:t}){return s.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>s.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[s.jsxs("div",{className:"player-profile__progress-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__card-label",children:e.label}),s.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),s.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),s.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:s.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&s.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function Rre({series:t}){return s.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var n;return s.jsx(Ere,{title:e.label,subtitle:(n=e.subLabel)!=null?n:"Looks natural even when the values are high (no 0-baseline).",series:e},e.label)})})}function Lre({rows:t}){return s.jsxs("div",{className:"player-profile__tab-panel",children:[s.jsx("div",{className:"player-profile__section-head",children:s.jsx("h3",{children:"Serververgleich"})}),s.jsx("div",{className:"player-profile__comparison-wrapper",children:s.jsxs("table",{className:"player-profile__comparison",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Kategorie"}),s.jsx("th",{children:"Spieler"}),s.jsx("th",{children:"Cluster"}),s.jsx("th",{children:""})]})}),s.jsx("tbody",{children:t.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.label}),s.jsx("td",{children:e.playerValue}),s.jsx("td",{children:e.benchmark}),s.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function Dre({entries:t}){return s.jsx("div",{className:"player-profile__tab-panel",children:s.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>s.jsxs("li",{children:[s.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),s.jsxs("div",{className:"player-profile__timeline-card",children:[s.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),s.jsx("div",{className:"player-profile__timeline-title",children:e.title}),s.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}const Mre={genderName:"male",class:1,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:1,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},_i=(t,e,n=0)=>{if(!Array.isArray(t)||e<0)return n;const r=t[e],i=typeof r=="number"?r:Number(r);return Number.isFinite(i)?i:n},Fre=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}};function w3(t){const e=_i(t,18),n=_i(t,21),r=_i(t,25),i=_i(t,705),a=_i(t,28)&255,o=Math.floor(e/100),c=Math.max(o,1),u=Math.floor(e/100);return{...Mre,genderName:a===1?"female":"male",class:_i(t,29)&65535,race:_i(t,27)&65535,mouth:_i(t,17),hair:Math.max(e%100,0),brows:Math.max(_i(t,19)%100,0),eyes:_i(t,20),beard:Math.max(n%100,0),nose:_i(t,22),ears:_i(t,23),extra:_i(t,24),horn:Math.max(r%100,0),special:Math.min(_i(t,26),0),hairColor:c,hornColor:a===1?1:u===0?c:u,frame:Fre(i)}}function Bre(t){return typeof t!="string"||!t.trim()?[]:t.split("/").map(e=>{const n=Number(e.trim());return Number.isFinite(n)?n:0})}const $re={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},$s=(t,e=0)=>{const n=typeof t=="number"?t:Number(t);return Number.isFinite(n)?n:e},Ore=t=>t&&typeof t=="object"&&Object.values(t).some(e=>e!=null),j3=t=>{if(typeof t!="string")return[];const e=t.trim();if(!e)return[];const n=e.toLowerCase().replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"");return n?[n]:[]},rm=new Map,S3="avatar-cache:",Vre=1440*60*1e3,Ure=async(t,e,n,r)=>{var I,N;const i=Number(t),a=String(t!=null?t:"").trim(),o=(I=j3(e)[0])!=null?I:"",c=typeof n=="string"&&n.trim()?n.trim():"",h=(v=>{if(!v)return"";const _=v.trim().toLowerCase();if(!_)return"";const R=_.split("/").filter(Boolean).pop()||_,[j,...S]=R.split("__"),C=S.join("__");if(j&&C){const M=j3(C)[0];if(M)return`${j}__${M}`}return a&&o?`${a}__${o}`:R.replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"")})(c)||(a&&o?`${a}__${o}`:"");if(!h)return null;const g=(()=>{var v;if(rm.has(h))return(v=rm.get(h))!=null?v:null;try{const _=typeof window!="undefined"?window.localStorage.getItem(`${S3}${h}`):null;if(!_)return null;const R=JSON.parse(_);return!(R!=null&&R.data)||typeof R.savedAt!="number"||!(Date.now()-R.savedAt<Vre)?null:R.data}catch(_){return null}})();if(g)return rm.set(h,g),g;const x=await In(r!=null?r:null,ms(Tt,"linked_players","avatars","avatars",h),()=>mn(ms(Tt,"linked_players","avatars","avatars",h)));if(!x.exists())return rm.set(h,null),null;const b=x.data(),w=(b==null?void 0:b.portrait)||{},k=Ore(w),A={genderName:(w==null?void 0:w.genderName)==="female"?"female":"male",classId:$s(w==null?void 0:w.classId),raceId:$s(w==null?void 0:w.raceId),mouth:$s(w==null?void 0:w.mouth),hair:$s(w==null?void 0:w.hair),hairColor:$s(w==null?void 0:w.hairColor),horn:$s(w==null?void 0:w.horn),hornColor:$s(w==null?void 0:w.hornColor),brows:$s(w==null?void 0:w.brows),eyes:$s(w==null?void 0:w.eyes),beard:$s(w==null?void 0:w.beard),nose:$s(w==null?void 0:w.nose),ears:$s(w==null?void 0:w.ears),extra:$s(w==null?void 0:w.extra),special:$s(w==null?void 0:w.special),frameId:$s(w==null?void 0:w.frameId),frame:typeof(w==null?void 0:w.frame)=="string"?w.frame:void 0,background:typeof(w==null?void 0:w.background)=="string"?w.background:void 0,showBorder:typeof(w==null?void 0:w.showBorder)=="boolean"?w.showBorder:void 0,mirrorHorizontal:typeof(w==null?void 0:w.mirrorHorizontal)=="boolean"?w.mirrorHorizontal:void 0},L={playerId:$s(b==null?void 0:b.playerId,i),server:typeof(b==null?void 0:b.server)=="string"?b.server:e,portrait:A,updatedAt:(N=b==null?void 0:b.updatedAt)!=null?N:null,hasPortraitData:k};if(rm.set(h,L),typeof window!="undefined")try{window.localStorage.setItem(`${S3}${h}`,JSON.stringify({data:L,savedAt:Date.now()}))}catch(v){}return L},zre=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}},Gre=["","goldenFrame","twitchFrame","zenFrame","silverFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"],Hre=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],Wre=(t,e)=>{const n=(t==null?void 0:t.portrait)||{},r={...$re,...e||{}},i=zre($s(n.frameId,0)),a=typeof n.frame=="string"&&Gre.includes(n.frame)?n.frame:"",o=typeof n.background=="string"&&Hre.includes(n.background)?n.background:r.background;return{...r,genderName:n.genderName==="female"?"female":r.genderName,class:$s(n.classId,r.class),race:$s(n.raceId,r.race),mouth:$s(n.mouth,r.mouth),hair:$s(n.hair,r.hair),hairColor:$s(n.hairColor,r.hairColor),horn:$s(n.horn,r.horn),hornColor:$s(n.hornColor,r.hornColor),brows:$s(n.brows,r.brows),eyes:$s(n.eyes,r.eyes),beard:$s(n.beard,r.beard),nose:$s(n.nose,r.nose),ears:$s(n.ears,r.ears),extra:$s(n.extra,r.extra),special:$s(n.special,r.special),frame:i||a||r.frame||"",background:o,showBorder:typeof n.showBorder=="boolean"?n.showBorder:r.showBorder,mirrorHorizontal:typeof n.mirrorHorizontal=="boolean"?n.mirrorHorizontal:r.mirrorHorizontal}};function fL(t,e){var n;if(typeof window=="undefined")return null;try{const r=window.localStorage.getItem(t);if(!r)return null;const i=JSON.parse(r);return!i||typeof i.cachedAt!="number"||Date.now()-i.cachedAt>=e?null:(n=i.data)!=null?n:null}catch(r){return null}}function vL(t,e){if(typeof window!="undefined")try{const n={cachedAt:Date.now(),data:e};window.localStorage.setItem(t,JSON.stringify(n))}catch(n){}}const Kre=["Statistiken","Charts","Fortschritt","Vergleich","Historie"],N3="sf_profile_player__",k3="sf_profile_player_server_index",qre=3600*1e3,Qre="playerProfile:charts:monthly3:",Yre=720*60*1e3,xL=3,zb="Last 3 months",A_="history_monthly",yL=["honor","ehre","honour","honorpoints","ehrepunkte"],bL=[{key:"str",label:"Strke",base:["Base Strength","Strke","basestrength"],total:["Strength"]},{key:"dex",label:"Geschick",base:["Base Dexterity","Geschick","basedexterity"],total:["Dexterity"]},{key:"int",label:"Intelligenz",base:["Base Intelligence","Intelligenz","baseintelligence"],total:["Intelligence"]},{key:"con",label:"Konstitution",base:["Base Constitution","Konstitution","baseconstitution"],total:["Constitution"]},{key:"lck",label:"Glck",base:["Base Luck","Glck","baseluck"],total:["Luck"]}];function Xre(){var V;const e=(V=Nx().identifier)!=null?V:"",n=Wr(),[r,i]=P.useState(!0),[a,o]=P.useState(null),[c,u]=P.useState(null),[h,m]=P.useState("Statistiken"),[g,x]=P.useState(null),[b,w]=P.useState(null),[,k]=P.useState(!1),[,A]=P.useState(null),[L,I]=P.useState(null),N=P.useRef(!1),v=P.useRef(null),_=P.useRef(null),R=P.useRef(null),j=P.useRef(null);P.useEffect(()=>{let U=!1;async function K(){var X,J,se,ue,Ne,Ee,ee,le,re,be,Te,Le,Re,Oe,Me,De,Fe,we,de,Ie,Ae,Xe,oe,fe,me,xe,tt,lt,Je,ut,bt,ft,mt,ot,os,gt,ne,Ue,Ve,dt,qe,_t,Dt,Ot;i(!0),o(null);const H=e;if(!H){u(null),o("Kein Spieler ausgewhlt."),i(!1);return}const z=()=>{if(typeof window=="undefined")return{};try{const Be=window.localStorage.getItem(k3);if(!Be)return{};const Ct=JSON.parse(Be);return Ct&&typeof Ct=="object"?Ct:{}}catch(Be){return{}}},Y=z()[H],te=Y?`${N3}${Y}__${H}`:null;if(te){const Be=fL(te,qre);if(Be&&typeof Be=="object"){u(Be),i(!1);return}}let G=null;try{G=Mn("PlayerProfile:load");let Be=null;const Ct=ms(Tt,"players",H,"latest","latest"),ys=await In(G,Ct,()=>mn(Ct));if(ys.exists()&&(Be=ys.data()),!Be)throw new Error("Spieler nicht gefunden.");if(!Be||typeof Be!="object")throw new Error("Spieler nicht gefunden.");const ke=typeof Be.values=="object"&&Be.values?Be.values:{};Be.timestampRaw!=null&&ke.timestampRaw==null&&(ke.timestampRaw=Be.timestampRaw);const Ss=Array.isArray(Be.save)&&Be.save||Array.isArray(ke==null?void 0:ke.save)&&ke.save||Array.isArray(Be.saveArray)&&Be.saveArray||Array.isArray(ke==null?void 0:ke.saveArray)&&ke.saveArray||void 0,Qn=typeof Be.save=="string"&&Be.save||typeof(ke==null?void 0:ke.save)=="string"&&ke.save||typeof Be.saveString=="string"&&Be.saveString||typeof(ke==null?void 0:ke.saveString)=="string"&&ke.saveString||void 0,Ks=String((X=Be==null?void 0:Be.playerId)!=null?X:H).trim()||H,vr=(se=tr((J=Be.level)!=null?J:ke==null?void 0:ke.Level))!=null?se:null,nr=((Ne=(ue=Be.className)!=null?ue:ke==null?void 0:ke.Class)!=null?Ne:null)||null,xr=((ee=(Ee=Be.guildName)!=null?Ee:ke==null?void 0:ke.Guild)!=null?ee:null)||null,pn=ke["Guild Identifier"],us=typeof pn=="string"&&pn.trim()||null,Ts=ke["Guild Joined"],_n=typeof Ts=="string"&&Ts.trim()||null,rr=(re=(le=Be.name)!=null?le:ke==null?void 0:ke.Name)!=null?re:Ks,Qt=(Te=(be=Be.server)!=null?be:ke==null?void 0:ke.Server)!=null?Te:null,Lr=typeof Qt=="string"?Qt.trim().toLowerCase().replace(/\./g,"_"):"",Yn=H||null,Yi=(Me=(Oe=(Re=(Le=Be.avatarIdentifier)!=null?Le:Be.identifier)!=null?Re:ke==null?void 0:ke.avatarIdentifier)!=null?Oe:ke==null?void 0:ke.identifier)!=null?Me:Lr?`${Ks}__${Lr}`:null,ki=(Fe=tr((De=Be.totalStats)!=null?De:ke==null?void 0:ke["Total Stats"]))!=null?Fe:null,ci=(Ie=tr((de=(we=Be.base)!=null?we:ke==null?void 0:ke.Base)!=null?de:ke==null?void 0:ke.base))!=null?Ie:null,di=(oe=tr((Xe=(Ae=Be.con)!=null?Ae:ke==null?void 0:ke.Con)!=null?Xe:ke==null?void 0:ke.con))!=null?oe:null,Ci=(xe=tr((me=(fe=Be.attributeTotal)!=null?fe:ke==null?void 0:ke["Attribute Total"])!=null?me:ke==null?void 0:ke.AttributeTotal))!=null?xe:null,Xi=(Je=tr((lt=(tt=Be.conTotal)!=null?tt:ke==null?void 0:ke["Con Total"])!=null?lt:ke==null?void 0:ke.ConTotal))!=null?Je:null,Ji=(qe=(dt=(Ve=(Ue=(ne=(gt=(os=(ot=(mt=(ft=(bt=(ut=Be.scrapbookPct)!=null?ut:Be.scrapbook)!=null?bt:ke==null?void 0:ke.scrapbookPct)!=null?ft:ke==null?void 0:ke.scrapbook)!=null?mt:ke==null?void 0:ke["Scrapbook %"])!=null?ot:ke==null?void 0:ke.Scrapbook)!=null?os:ke==null?void 0:ke.Album)!=null?gt:ke==null?void 0:ke["Album %"])!=null?ne:ke==null?void 0:ke.AlbumPct)!=null?Ue:ke==null?void 0:ke.AlbumPercent)!=null?Ve:ke==null?void 0:ke.AlbumPercentage)!=null?dt:ke==null?void 0:ke.AlbumCompletion)!=null?qe:ke==null?void 0:ke.AlbumProgress,Is=(_t=tr(Ji))!=null?_t:null,ya=(Dt=tr(Be.timestamp))!=null?Dt:tr(ke==null?void 0:ke.timestamp),Zi=_L(ya),Ti=typeof Be.portrait=="object"?Be.portrait:typeof Be.portraitOptions=="object"?Be.portraitOptions:typeof(ke==null?void 0:ke.portraitOptions)=="object"?ke.portraitOptions:void 0,Xs={id:Ks,name:rr,className:nr,level:vr,guild:xr,guildIdentifier:us,guildJoined:_n,server:Qt,identifier:Yn,avatarIdentifier:Yi,scrapbookPct:Is,totalStats:ki,base:ci,con:di,conTotal:Xi,attributeTotal:Ci,lastScanDays:Zi,values:ke,portraitConfig:Ti,saveArray:Ss,saveString:Qn};if(typeof window!="undefined")try{const bc=String((Ot=Xs.server)!=null?Ot:"").trim().toLowerCase().replace(/[^a-z0-9]/g,"")||"unknown",xo=`${N3}${bc}__${H}`,Dr=z();Dr[H]=bc,vL(xo,Xs),window.localStorage.setItem(k3,JSON.stringify(Dr))}catch(yc){}U||u(Xs)}catch(Be){U||(u(null),o((Be==null?void 0:Be.message)||"Unbekannter Fehler beim Laden."))}finally{dn(G),U||i(!1)}}return K(),()=>{U=!0}},[e]),P.useEffect(()=>{I(null),N.current=!1,v.current=null,_.current=null},[e,c==null?void 0:c.server]),P.useEffect(()=>{R.current=L},[L]);const S=U=>{m(U)};P.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),P.useEffect(()=>{let U=!1;return(async()=>{var Y,te;const H=Mn("PlayerProfile:avatar");if(!(c!=null&&c.id)){w(null),k(!1),A(null),dn(H);return}const z=tr(c.id);if(z==null){w(null),k(!1),A(null),dn(H);return}k(!0),A(null);try{const G=await Ure(z,(Y=c.server)!=null?Y:"",(te=c.avatarIdentifier)!=null?te:void 0,H);U||w(G)}catch(G){U||(w(null),A(G instanceof Error?G:new Error("AvatarSnapshot failed")))}finally{dn(H),U||k(!1)}})(),()=>{U=!0}},[c==null?void 0:c.id,c==null?void 0:c.server]),P.useEffect(()=>{if(h!=="Charts"||!(c!=null&&c.id))return;const U=`${jL(c.server)}:${c.id}`;if(N.current||_.current===U&&v.current&&R.current)return;const K=Zre(c.id,c.server),H=tie(K);if(H){const G=Wb(H.months);I(X=>{const J=im(X,G);return J||console.log(`[charts] load set from cache key=${U} months=${H.months.length}`),J?X:G}),R.current=Wb(H.months),v.current="cache",_.current=U;return}let z=!1;N.current=!0,console.log(`[charts] load start key=${U} source=firestore`);const Y=Mn("PlayerProfile:charts");return(async()=>{try{const G=c.identifier;if(!G){if(Om(K),!z){const Ee=Kb(c);R.current=Ee,v.current="fallback",_.current=U,I(ee=>im(ee,Ee)?ee:Ee),console.log(`[charts] load done key=${U} months=0 (missing identifier)`)}return}const X=ol(Tt,`players/${G}/history_monthly`),J=Dn(X,Hi(h_(),"desc"),pr(3)),ue=(await Tn(Y,{path:X.path},()=>Cn(J))).docs.map(Ee=>eie(Ee)).filter(Ee=>!!Ee);if(!ue.length){if(Om(K),!z){const Ee=Kb(c);R.current=Ee,v.current="fallback",_.current=U,I(ee=>im(ee,Ee)?ee:Ee),console.log(`[charts] load done key=${U} months=0 (fallback)`)}return}const Ne=Wb(ue);z||(R.current=Ne,v.current="monthly",_.current=U,I(Ee=>im(Ee,Ne)?Ee:Ne),sie(K,ue),console.log(`[charts] load done key=${U} months=${ue.length}`))}catch(G){if(!z){const X=Kb(c);R.current=X,v.current="fallback",_.current=U,I(J=>im(J,X)?J:X),console.log(`[charts] load error key=${U}`,G)}}finally{N.current=!1,dn(Y)}})(),()=>{z=!0}},[h,c==null?void 0:c.id,c==null?void 0:c.identifier,c==null?void 0:c.server]);const C=P.useMemo(()=>c?iie(c,b,L):null,[c,b,L]),M=P.useCallback(U=>{x(U),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>x(null),3500)},[]),T=P.useCallback(async U=>{var K,H,z;if(c){if(U==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const Y=(z=(H=c.identifier)!=null?H:sy((K=c.server)!=null?K:null,c.id))!=null?z:c.id,te=`${window.location.origin}/players/profile/${encodeURIComponent(Y)}`;try{await navigator.clipboard.writeText(te),M("Profil-Link wurde kopiert.")}catch(G){M("Konnte Link nicht kopieren.")}}return}if(U==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:c.name,text:`Shakes & Fidget Charakter ${c.name}`,url:window.location.href}),M("Profil geteilt.")}catch(Y){M("Teilen abgebrochen.")}return}if(U==="guild"){c.guildIdentifier&&n(`/guild/${c.guildIdentifier}`);return}if(U==="rescan"){M("Rescan-Queue folgt aktuell noch Platzhalter.");return}}},[n,M,c]),F=()=>{if(!C)return null;switch(h){case"Statistiken":return s.jsx(Are,{data:C.stats});case"Charts":return s.jsx(Rre,{series:C.charts});case"Fortschritt":return s.jsx(Pre,{items:C.progress});case"Vergleich":return s.jsx(Lre,{rows:C.comparison});case"Historie":return s.jsx(Dre,{entries:C.history});default:return null}},D=()=>s.jsxs("div",{className:"player-profile__loading",children:[s.jsx("p",{children:a!=null?a:"Spieler nicht gefunden."}),s.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>n("/"),style:{marginTop:12},children:"Zur Startseite"})]});return s.jsxs("div",{className:"player-profile",children:[r&&!c&&s.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!r&&(!c||!C)&&D(),C&&s.jsxs(s.Fragment,{children:[s.jsx(Sre,{data:C.hero,loading:r,onAction:T}),s.jsx(Jre,{message:g}),s.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:Kre.map(U=>{const K=h===U;return s.jsx("button",{type:"button",role:"tab","aria-selected":K,className:`player-profile__tab-button ${K?"player-profile__tab-button--active":""}`,onClick:()=>S(U),children:U},U)})}),F()]})]})}const Jre=q.memo(({message:t})=>t?s.jsx("p",{className:"player-profile__hero-feedback",role:"status","aria-live":"polite",children:t}):null),tr=t=>{if(t==null||t==="")return null;if(typeof t=="number")return Number.isFinite(t)?t:null;const e=String(t).trim(),n=e.startsWith("-")?-1:1,r=e.replace(/^[+-]/,"").replace(/[\s%]/g,""),i=r.lastIndexOf(","),a=r.lastIndexOf("."),o=Math.max(i,a);let c="";if(o>-1){const h=r.slice(o+1).replace(/[^0-9]/g,""),m=r.slice(0,o).replace(/[^0-9]/g,"");h.length>0&&h.length<=2?c=`${m}.${h}`:c=(m+h).replace(/[^0-9]/g,"")}else c=r.replace(/[^0-9]/g,"");if(!c)return null;const u=Number(c)*n;return Number.isFinite(u)?u:null},_L=t=>{if(!t)return null;const e=Date.now()/1e3,n=Math.max(0,e-t);return Math.floor(n/86400)},Gb=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),wL=t=>{const e=new Map;return Object.entries(t||{}).forEach(([n,r])=>e.set(Gb(n),r)),{number(n,r=null){for(const i of n){const a=tr(e.get(Gb(i)));if(a!=null)return a}return r},text(n,r=null){for(const i of n){const a=e.get(Gb(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},jL=t=>typeof t!="string"?"unknown":t.trim().toLowerCase().replace(/\./g,"_")||"unknown",Zre=(t,e)=>`${Qre}${jL(e)}:${t}`,tl=t=>typeof t=="number"&&Number.isFinite(t)?t:0,Hb=(t,e=3)=>{var r;const n=t.map(i=>Number.isFinite(i)?i:0);for(n.length||n.push(0);n.length<e;)n.unshift((r=n[0])!=null?r:0);return n.slice(-e)},lx=(t,e,n)=>[{label:"Level Verlauf",points:Hb(t),unit:"",subLabel:zb},{label:"Total Stats",points:Hb(e),unit:"",subLabel:zb},{label:"Honor",points:Hb(n),unit:"",subLabel:zb}],SL=t=>{const e=wL(t||{}),n=e.number(["level"]),r=e.number(yL);let a=e.number(["totalstats","stats"]);if(a==null){let o=0,c=0;bL.forEach(u=>{var m;const h=(m=e.number(u.total))!=null?m:e.number(u.base);h!=null&&(o+=h,c++)}),a=c?o:null}return{level:n,totalStats:a,honor:r}},Wb=t=>{if(!t.length)return lx([],[],[]);const e=[...t].sort((a,o)=>a.monthId.localeCompare(o.monthId)),n=e.map(a=>tl(a.values.level)),r=e.map(a=>tl(a.values.totalStats)),i=e.map(a=>tl(a.values.honor));return lx(n,r,i)},im=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++){if(t[n].label!==e[n].label||t[n].unit!==e[n].unit||t[n].subLabel!==e[n].subLabel||t[n].points.length!==e[n].points.length)return!1;for(let r=0;r<t[n].points.length;r++)if(t[n].points[r]!==e[n].points[r])return!1}return!0},eie=t=>{var i,a,o;const e=typeof t.data=="function"?t.data():{},n=e!=null&&e.values&&typeof e.values=="object"?e.values:{},r=typeof(e==null?void 0:e.monthId)=="string"&&e.monthId?e.monthId:t.id;return r?{monthId:r,lastTs:(o=tr((a=(i=e==null?void 0:e.lastTs)!=null?i:e==null?void 0:e.lastTimestamp)!=null?a:e==null?void 0:e.lastTimestampRaw))!=null?o:null,values:SL(n)}:null},Om=t=>{if(typeof window!="undefined")try{window.localStorage.removeItem(t)}catch(e){}},tie=t=>{if(typeof window=="undefined")return null;try{const e=window.localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e),r=(n==null?void 0:n.source)===A_,i=typeof n.fetchedAt=="number"&&n.version===xL,a=i&&Date.now()-n.fetchedAt<=Yre,o=Array.isArray(n.months)?n.months:null;if(!r||!i||!a||!o)return Om(t),null;const c=o.map(u=>{var h,m,g,x,b,w;return!u||typeof u.monthId!="string"?null:{monthId:u.monthId,lastTs:typeof u.lastTs=="number"?u.lastTs:null,values:{level:(m=tr((h=u.values)==null?void 0:h.level))!=null?m:null,totalStats:(x=tr((g=u.values)==null?void 0:g.totalStats))!=null?x:null,honor:(w=tr((b=u.values)==null?void 0:b.honor))!=null?w:null}}}).filter(u=>!!u);return c.length<1?(Om(t),null):{fetchedAt:n.fetchedAt,version:n.version,source:A_,months:c}}catch(e){return Om(t),null}},sie=(t,e)=>{if(typeof window=="undefined"||e.length<1)return;const n={fetchedAt:Date.now(),version:xL,source:A_,months:e.map(r=>{var i,a,o;return{monthId:r.monthId,lastTs:r.lastTs,values:{level:(i=r.values.level)!=null?i:null,totalStats:(a=r.values.totalStats)!=null?a:null,honor:(o=r.values.honor)!=null?o:null}}})};try{window.localStorage.setItem(t,JSON.stringify(n))}catch(r){}},Kb=t=>{var r,i,a,o,c;const e=SL(t.values||{}),n={level:(i=(r=e.level)!=null?r:t.level)!=null?i:null,totalStats:(o=(a=e.totalStats)!=null?a:t.totalStats)!=null?o:null,honor:(c=e.honor)!=null?c:null};return lx([tl(n.level)],[tl(n.totalStats)],[tl(n.honor)])},nie=t=>{let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return()=>{e+=1831565813;let n=Math.imul(e^e>>>15,1|e);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}},cr=(t,e="-")=>t==null?e:t.toLocaleString("de-DE"),pv=t=>{if(t==null)return"-";const e=Math.floor(t*100)/100,n=e%1!==0;return`${e.toLocaleString("de-DE",{minimumFractionDigits:n?2:0,maximumFractionDigits:2})}%`},C3=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,T3=t=>{if(t==null)return null;const e=new Date(t*1e3);if(Number.isNaN(e.getTime()))return null;const n=r=>String(r).padStart(2,"0");return`${n(e.getDate())}.${n(e.getMonth()+1)}.${e.getFullYear()} ${n(e.getHours())}:${n(e.getMinutes())}`},rie=(t,e)=>{let n;const r=t.portraitConfig&&Object.keys(t.portraitConfig).length>0;if(Array.isArray(t.saveArray)&&t.saveArray.length>0)n=w3(t.saveArray);else if(t.saveString){const i=Bre(t.saveString);n=i.length>0?w3(i):void 0}else r&&(n={...t.portraitConfig});return e!=null&&e.hasPortraitData?{config:Wre(e,n),hasData:!0}:n?{config:n,hasData:!0}:{config:void 0,hasData:!1}},iie=(t,e,n)=>{var xe,tt,lt,Je,ut,bt,ft,mt,ot,os,gt,ne,Ue,Ve,dt,qe,_t,Dt,Ot;const r=t.values||{},i=wL(r),a=nie(t.id),o=rie(t,e),c=B4((xe=t.className)!=null?xe:void 0),u=Ni(c.url,420)||"/assets/demo-avatar-special.png",h=t.className?`Klassenbild ${t.className}`:"Portrait-Platzhalter",m=["album","album%","albumpct","albumpercent","albumpercentage","albumcompletion","albumprogress","scrapbook","scrapbook%","scrapbookpct","scrapbookpercent"],g=yL,x=["hofrank","halloffamerank","hofposition","halloffameposition","hofplatz","halloffame","hof"],b=["mount","reittier","mountname"],w=["mountpct","mountpercent","mountpercentage","mountspeed","mountbonus","mountvalue"],k=["guildrole","role","guildrank","gildenrolle"],A=(tt=t.level)!=null?tt:i.number(["level"]),L=(lt=t.scrapbookPct)!=null?lt:i.number(m),I=i.number(g),N=(Je=t.totalStats)!=null?Je:i.number(["totalstats","stats"]),v=bL,_={str:0,dex:0,int:0,con:0,lck:0},R={str:0,dex:0,int:0,con:0,lck:0};let j=!1,S=!1;v.forEach(Be=>{const Ct=i.number(Be.base);Ct!=null&&(_[Be.key]=Ct,j=!0);const ys=i.number(Be.total);ys!=null&&(R[Be.key]=ys,S=!0)});const C=t.values||{},M=Be=>{const Ct=String(Be!=null?Be:"0").replace(/[.\\s]/g,""),ys=parseInt(Ct,10);return Number.isFinite(ys)?ys:0},T=M(C.Base),F=M(C["Base Constitution"]),D=M(C.Attribute),V=M(C.Constitution),U=j?Object.values(_).reduce((Be,Ct)=>Be+Ct,0):null,K=T+F,H=D+V,z=L!=null?L:null,Y=(ut=i.number(["fortresslevel","fortress"]))!=null?ut:Math.round(a()*20)+30,te=(bt=i.number(["underworld","underworldlevel"]))!=null?bt:Math.round(a()*10)+20,G=(ft=i.number(["tower","towerfloor"]))!=null?ft:Math.round(a()*90)+10,X=(mt=i.number(["pets","petprogress"]))!=null?mt:Math.round(a()*50)+25,J=(A!=null?A:0)*1200+(U!=null?U:0)+Math.round((L!=null?L:0)*3200),se=i.text(b),ue=se&&/[a-zA-Z]/.test(se)||se&&/%/.test(se)?se:null,Ne=(Ue=(ne=(gt=(os=(ot=r==null?void 0:r["Mount %"])!=null?ot:r==null?void 0:r["mount %"])!=null?os:r==null?void 0:r.MountPct)!=null?gt:r==null?void 0:r.mountPct)!=null?ne:r==null?void 0:r.MountBonus)!=null?Ue:r==null?void 0:r.mountBonus,Ee=(Ve=tr(Ne))!=null?Ve:i.number(w),ee=ue?tr((ue.match(/(\d+)\s*%/)||[])[1]):null,le=Ee!=null?Ee:ee;let re="-";ue?re=le!=null&&!/%/.test(ue)?`${ue} (${Math.round(le)}%)`:ue:le!=null&&(re=`${Math.round(le)}%`);const be=i.text(k),Te=tr(r==null?void 0:r.Rank),Le=Te!=null?Te:i.number(x),Re=i.text(["timestampraw"]),Oe=i.number(["timestamp"]),Me=Re&&/^\s*\d+\s*$/.test(Re)?(dt=T3(tr(Re)))!=null?dt:Re:(qe=Re!=null?Re:T3(Oe))!=null?qe:"-",De=(_t=t.lastScanDays)!=null?_t:Oe!=null?_L(Oe):null,Fe=[{label:"Last Scan",value:Me},{label:"Level",value:A!=null?`Lvl ${cr(A)}`:"-"},{label:"Scrapbook",value:pv(z)},{label:"Total Base Stats",value:K!=null?cr(K):"-"}],we=[{label:"Mount",value:re!=null?re:"-",tone:"neutral"},{label:"Honor",value:cr(I),tone:"success"},{label:"Gildenrolle",value:be!=null?be:"-",tone:"warning"},{label:"HoF",value:Le!=null?`#${cr(Le)}`:"-",tone:"neutral"}],de=j?_:void 0,Ie={playerName:t.name,className:t.className,guild:t.guild,server:t.server,guildIdentifier:t.guildIdentifier,guildJoined:t.guildJoined,levelLabel:A?`Level ${cr(A)}`:void 0,lastScanLabel:(Dt=C3(De))!=null?Dt:void 0,lastScanAtLabel:Me!=="-"?Me:void 0,lastScanDays:De,status:De!=null&&De<=2?"online":"offline",metrics:Fe,badges:we,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guildIdentifier,title:t.guildIdentifier?void 0:"No guild linked in latest scan."},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:o.hasData?o.config:void 0,hasPortrait:o.hasData,portraitFallbackUrl:u,portraitFallbackLabel:h,baseStats:de,totalStats:S?R:void 0,totalStatsValue:H},Ae={summary:[{label:"Power Score",value:cr(J),hint:"Level * SumBase"},{label:"Honor",value:cr(I)},{label:"HoF Platz",value:Le?`#${cr(Le)}`:"-"},{label:"Letzter Scan",value:(Ot=C3(De))!=null?Ot:"-"}],attributes:v.map(Be=>({label:Be.label,baseLabel:cr(i.number(Be.base)),totalLabel:i.number(Be.total)!=null?`Gesamt ${cr(i.number(Be.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(a()*40+40)}%`},{label:"Schatten",value:`${Math.round(a()*40+35)}%`},{label:"Frost",value:`${Math.round(a()*30+30)}%`},{label:"Licht",value:`${Math.round(a()*20+30)}%`}],resources:[{label:"Gold/h",value:`${cr(Math.round((A!=null?A:1)*(a()*8+3)))}k`},{label:"XP/h",value:`${cr(Math.round((A!=null?A:1)*(a()*5+2)))}k`},{label:"Mount Bonus",value:re},{label:"Quest Slots",value:`${Math.round(a()*2)+3}`}]},Xe=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(z!=null?z:0)/100),targetLabel:`${pv(z)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:z!=null&&z>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,G/100),targetLabel:`Ebene ${Math.round(G)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudebau",progress:Math.min(1,Y/25),targetLabel:`Lvl ${Math.round(Y)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,te/30),targetLabel:`Lvl ${Math.round(te)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,X/100),targetLabel:`${Math.round(X)} / 100`,meta:"Habitate offen"}],oe=n!=null?n:lx([tl(A)],[tl(N)],[tl(I)]),fe=[{label:"Level",playerValue:A?`Lvl ${cr(A)}`:"-",benchmark:A?`Lvl ${cr(Math.round(A*.92))}`:"-",diffLabel:A?`+${Math.round(A*.08)}`:"-",trend:"up"},{label:"Power Score",playerValue:cr(J),benchmark:cr(Math.round(J*.9)),diffLabel:`+${cr(Math.round(J*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:pv(z),benchmark:`${Math.min(100,Math.round((z!=null?z:60)-8))}%`,diffLabel:z!=null?`+${Math.round(z-60)}%`:"-",trend:z!=null&&z>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(Y)}`,benchmark:`Lvl ${Math.round(Y-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(te)}`,benchmark:`Lvl ${Math.round(te-2)}`,diffLabel:"+2",trend:"neutral"}],me=aie(t,i,a);return{hero:Ie,stats:Ae,progress:Xe,charts:oe,comparison:fe,history:me}},aie=(t,e,n)=>{var o,c;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:Tf(Math.round(n()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:Tf(2),title:"Level-Up",description:`Erreichte Level ${cr(t.level)}`,tag:"Level"}),r.push({dateLabel:Tf(10),title:"Scrapbook Meilenstein",description:`${pv((o=t.scrapbookPct)!=null?o:Math.round(n()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:Tf(18),title:"Festung",description:`Fortress Level ${Math.round((c=e.number(["fortress"],Math.round(n()*20+15)))!=null?c:0)}`,tag:"Festung"}),r},Tf=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function qb(){return s.jsx(as,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:s.jsx(Xre,{})})}function sh(t,e=300){const[n,r]=q.useState(t);return q.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),n}function nh(t){const e=q.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[n,r]=q.useState(()=>e());return q.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=o=>r(o.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),n}const oie='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function rh(t,e){q.useEffect(()=>{var o;if(!e)return;const n=t.current;if(!n)return;const r=()=>n.querySelectorAll(oie);(o=r()[0])==null||o.focus();const a=c=>{if(c.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],m=u[u.length-1];c.shiftKey?document.activeElement===h&&(c.preventDefault(),m.focus()):document.activeElement===m&&(c.preventDefault(),h.focus())};return n.addEventListener("keydown",a),()=>n.removeEventListener("keydown",a)},[t,e])}const lie="_page_1jzf5_1",cie="_header_1jzf5_13",die="_headerStack_1jzf5_25",uie="_kicker_1jzf5_37",hie="_title_1jzf5_53",mie="_subtitle_1jzf5_65",pie="_headerActions_1jzf5_79",gie="_secondaryAction_1jzf5_89",fie="_infoStrip_1jzf5_131",vie="_infoCard_1jzf5_143",xie="_infoLabel_1jzf5_163",yie="_inlineFilters_1jzf5_177",bie="_filterField_1jzf5_197",_ie="_select_1jzf5_227",wie="_searchInput_1jzf5_229",jie="_layout_1jzf5_249",Sie="_selectionColumn_1jzf5_261",Nie="_selectionCard_1jzf5_273",kie="_slotHeader_1jzf5_293",Cie="_slotLabel_1jzf5_307",Tie="_slotStatus_1jzf5_323",Iie="_clearButton_1jzf5_335",Eie="_slotBody_1jzf5_355",Aie="_resultList_1jzf5_367",Pie="_emptyResult_1jzf5_385",Rie="_resultItem_1jzf5_397",Lie="_resultName_1jzf5_421",Die="_resultMeta_1jzf5_433",Mie="_selectButton_1jzf5_445",Fie="_selectedCard_1jzf5_465",Bie="_selectedName_1jzf5_479",$ie="_selectedMeta_1jzf5_489",Oie="_selectedTagline_1jzf5_491",Vie="_comparisonColumn_1jzf5_503",Uie="_comparisonCard_1jzf5_515",zie="_comparisonHeader_1jzf5_535",Gie="_sectionTitle_1jzf5_551",Hie="_diffBadge_1jzf5_561",Wie="_metricGrid_1jzf5_579",Kie="_metricCard_1jzf5_591",qie="_metricLabel_1jzf5_611",Qie="_metricValues_1jzf5_627",Yie="_metricDivider_1jzf5_643",Xie="_metricDelta_1jzf5_653",Jie="_freshnessRow_1jzf5_665",Zie="_freshnessItem_1jzf5_677",eae="_freshnessBadge_1jzf5_685",tae="_freshnessPopover_1jzf5_733",sae="_popoverTitle_1jzf5_757",nae="_classCard_1jzf5_807",rae="_classGrid_1jzf5_827",iae="_classColumn_1jzf5_837",aae="_classBar_1jzf5_857",oae="_classSlice_1jzf5_873",lae="_classLegend_1jzf5_907",cae="_emptyState_1jzf5_931",dae="_supportPanels_1jzf5_947",uae="_checklistCard_1jzf5_959",hae="_infoCardExtended_1jzf5_961",mae="_checklist_1jzf5_959",pae="_infoNote_1jzf5_1033",gae="_sheetOverlay_1jzf5_1045",fae="_sheetOpen_1jzf5_1073",vae="_sheet_1jzf5_1045",xae="_sheetHeader_1jzf5_1105",yae="_sheetBody_1jzf5_1119",pe={page:lie,header:cie,headerStack:die,kicker:uie,title:hie,subtitle:mie,headerActions:pie,secondaryAction:gie,infoStrip:fie,infoCard:vie,infoLabel:xie,inlineFilters:yie,filterField:bie,select:_ie,searchInput:wie,layout:jie,selectionColumn:Sie,selectionCard:Nie,slotHeader:kie,slotLabel:Cie,slotStatus:Tie,clearButton:Iie,slotBody:Eie,resultList:Aie,emptyResult:Pie,resultItem:Rie,resultName:Lie,resultMeta:Die,selectButton:Mie,selectedCard:Fie,selectedName:Bie,selectedMeta:$ie,selectedTagline:Oie,comparisonColumn:Vie,comparisonCard:Uie,comparisonHeader:zie,sectionTitle:Gie,diffBadge:Hie,metricGrid:Wie,metricCard:Kie,metricLabel:qie,metricValues:Qie,metricDivider:Yie,metricDelta:Xie,freshnessRow:Jie,freshnessItem:Zie,freshnessBadge:eae,freshnessPopover:tae,popoverTitle:sae,classCard:nae,classGrid:rae,classColumn:iae,classBar:aae,classSlice:oae,classLegend:lae,emptyState:cae,supportPanels:dae,checklistCard:uae,infoCardExtended:hae,checklist:mae,infoNote:pae,sheetOverlay:gae,sheetOpen:fae,sheet:vae,sheetHeader:xae,sheetBody:yae},NL=["Ari","Borin","Celeste","Doran","Lena","Nix"],bae={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},s2={raid:"Raid",event:"Event",task:"Task"},n2={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},I3={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},E3={urgent:4,high:3,medium:2,low:1},_ae={"7d":7,"30d":30,"90d":90,all:null},Qb={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},wae=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:Uc(5,20),createdAt:Xr(2,14),updatedAt:Xr(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:Ef(3),nextUpdateAt:If(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:Uc(2,12),createdAt:Xr(4,9),updatedAt:Xr(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:Ef(8),nextUpdateAt:If(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:Uc(7,17),createdAt:Xr(1,10),updatedAt:Xr(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:Ef(22),nextUpdateAt:If(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:Xr(1,19),createdAt:Xr(9,10),updatedAt:Xr(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:Xr(1,19),nextUpdateAt:Uc(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:Uc(12,18),createdAt:Xr(6,15),updatedAt:Xr(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:Ef(1),nextUpdateAt:If(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:Uc(18,13),createdAt:Xr(12,18),updatedAt:Xr(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:Xr(2,16),nextUpdateAt:Uc(4,9)}];function Uc(t,e=12){const n=new Date;return n.setDate(n.getDate()+t),n.setHours(e,0,0,0),n.toISOString()}function If(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function Xr(t,e=12){const n=new Date;return n.setDate(n.getDate()-t),n.setHours(e,0,0,0),n.toISOString()}function Ef(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function A3(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function jae(t,e,n){const r=Date.now(),i=_ae[e.range];return t.filter(a=>{const o=n===""||a.title.toLowerCase().includes(n.toLowerCase())||a.description.toLowerCase().includes(n.toLowerCase()),c=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let m=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),x=r+i*24*60*60*1e3;m=g<=x}return o&&c&&u&&h&&m})}function Sae(t,e,n){const r=[...t];return r.sort((i,a)=>{let o=0;switch(e){case"dueAt":o=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":o=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":o=E3[i.priority]-E3[a.priority];break;case"title":o=i.title.localeCompare(a.title);break;default:o=0}return n==="asc"?o:-o}),r}function Nae(t,e,n){const r=(e-1)*n;return t.slice(r,r+n)}function vo(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function qp(t){const e=Date.now()-new Date(t).getTime(),n=Math.round(e/6e4);if(n<60)return`${n} min`;const r=Math.round(n/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function vp(t,e){const n=new Date(t).getTime()-e;if(n<=0)return"faellig";const r=Math.floor(n/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function kae(t){return t.length===0?null:t.reduce((e,n)=>e?I3[n.freshness]>I3[e.freshness]?n:e:n,null)}const P_=["EU-01","EU-02","US-01","US-02","ASIA-01"],Vm=new Intl.NumberFormat("de-DE");function Cae(){const t=nh("(min-width: 768px)"),[e,n]=q.useState("all"),[r,i]=q.useState(null),[a,o]=q.useState(null),[c,u]=q.useState(null),[h,m]=q.useState(null),g=[r,a].filter(Boolean).length,x=q.useMemo(()=>{const T=[c,h].filter(Boolean);if(!T.length)return 0;const F=T.reduce((D,V)=>{var U;return D+((U=V.level)!=null?U:0)},0);return Math.round(F/T.length)},[c,h]),[b,w]=q.useState(null),[k,A]=q.useState(!1),L=q.useRef(null);rh(L,k&&!t),q.useEffect(()=>{t&&A(!1)},[t]),q.useEffect(()=>{if(!b)return;const T=D=>{const V=D.target;V&&(V.closest(`.${pe.freshnessBadge}`)||V.closest(`.${pe.freshnessPopover}`)||w(null))},F=D=>{D.key==="Escape"&&w(null)};return document.addEventListener("pointerdown",T),document.addEventListener("keydown",F),()=>{document.removeEventListener("pointerdown",T),document.removeEventListener("keydown",F)}},[b]);const I=q.useMemo(()=>c?vp(c.nextUpdateAt,Date.now()):"",[c]),N=q.useMemo(()=>h?vp(h.nextUpdateAt,Date.now()):"",[h]),v=()=>A(!0),_=()=>A(!1),R=T=>{n(T)},j=(T,F)=>{T==="playerA"?(i(F.id),u(F)):(o(F.id),m(F))},S=T=>{T==="playerA"?(i(null),u(null)):(o(null),m(null))},C=T=>{w(F=>F===T?null:T)},M=c&&h;return s.jsxs(as,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[s.jsxs("div",{className:pe.page,children:[s.jsxs("header",{className:pe.header,children:[s.jsxs("div",{className:pe.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Players"}),s.jsx("h1",{className:pe.title,children:"Spieler vergleichen"}),s.jsx("p",{className:pe.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),s.jsx("div",{className:pe.headerActions,children:!t&&s.jsx("button",{type:"button",className:pe.secondaryAction,onClick:v,children:"Filter"})})]}),s.jsxs("div",{className:pe.infoStrip,children:[s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Slots gefuellt"}),s.jsxs("strong",{children:[Vm.format(g)," Spieler"]})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Durchschnittslevel"}),s.jsx("strong",{children:Vm.format(x)})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Serverfilter"}),s.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&s.jsx("div",{className:pe.inlineFilters,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>R(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),P_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]}),s.jsxs("div",{className:pe.layout,children:[s.jsxs("section",{className:pe.selectionColumn,children:[s.jsx(P3,{title:"Spieler A",slot:"playerA",selectedPlayer:c,excludeId:a,onSelect:j,onClear:S,serverFilter:e,onServerChange:R}),s.jsx(P3,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:j,onClear:S,serverFilter:e,onServerChange:R})]}),s.jsxs("section",{className:pe.comparisonColumn,children:[s.jsxs("div",{className:pe.comparisonCard,children:[s.jsxs("div",{className:pe.comparisonHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Vergleich"}),s.jsx("h2",{className:pe.sectionTitle,children:"Kennzahlen"})]}),M&&s.jsxs("span",{className:pe.diffBadge,children:["Delta Level: ",Vm.format(c.level-h.level)]})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pe.metricGrid,children:[s.jsx(R3,{label:"Level",aValue:c.level,bValue:h.level}),s.jsx(R3,{label:"Scrapbook (%)",aValue:c.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),s.jsx(Tae,{playerA:c,playerB:h,countdownA:I,countdownB:N,activePopover:b,onToggle:C})]}),s.jsx(Iae,{playerA:c,playerB:h})]}):s.jsx("div",{className:pe.emptyState,children:s.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),s.jsxs("div",{className:pe.supportPanels,children:[s.jsx(Eae,{}),s.jsx(Aae,{})]})]})]})]}),!t&&s.jsx("div",{className:`${pe.sheetOverlay} ${k?pe.sheetOpen:""}`,children:s.jsxs("div",{className:pe.sheet,role:"dialog","aria-modal":"true",ref:L,children:[s.jsxs("header",{className:pe.sheetHeader,children:[s.jsx("h3",{children:"Filter"}),s.jsx("button",{type:"button",className:pe.clearButton,onClick:_,children:"Schliessen"})]}),s.jsx("div",{className:pe.sheetBody,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>R(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),P_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]})})]})}function P3({title:t,slot:e,selectedPlayer:n,excludeId:r,onSelect:i,onClear:a,serverFilter:o,onServerChange:c}){const[u,h]=q.useState(""),m=sh(u,300);q.useEffect(()=>{h("")},[n,o]);const{results:g,loading:x}=Pae(m,o,r);return s.jsxs("article",{className:pe.selectionCard,children:[s.jsxs("div",{className:pe.slotHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.slotLabel,children:t}),s.jsx("p",{className:pe.slotStatus,children:n?"Ausgewaehlt":"Noch keine Auswahl"})]}),n&&s.jsx("button",{type:"button",className:pe.clearButton,onClick:()=>a(e),children:"Reset"})]}),s.jsxs("div",{className:pe.slotBody,children:[s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:o,onChange:b=>c(b.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),P_.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Suchen"}),s.jsx("input",{className:pe.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),s.jsxs("div",{className:pe.resultList,role:"list",children:[x&&s.jsx("div",{className:pe.emptyResult,children:"Lade..."}),!x&&g.length===0&&s.jsx("div",{className:pe.emptyResult,children:"Kein Spieler gefunden."}),!x&&g.map(b=>s.jsxs("div",{className:pe.resultItem,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.resultName,children:b.name}),s.jsxs("p",{className:pe.resultMeta,children:[b.server," - Level ",b.level," - ",b.className]})]}),s.jsx("button",{type:"button",className:pe.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),n&&s.jsxs("div",{className:pe.selectedCard,children:[s.jsx("p",{className:pe.selectedName,children:n.name}),s.jsxs("p",{className:pe.selectedMeta,children:[n.server," - Level ",n.level," - ",n.className," -"," ",n.guildName||"ohne Gilde"]}),s.jsx("p",{className:pe.selectedTagline,children:n.tagline})]})]})]})}function R3({label:t,aValue:e,bValue:n,isDecimal:r=!1}){const i=c=>r?c.toFixed(1).replace(".",","):Vm.format(c),a=e-n;let o="gleich";if(a!==0){const c=r?Math.abs(a).toFixed(1).replace(".",","):Vm.format(Math.abs(a));o=a>0?`+${c}`:`-${c}`}return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:t}),s.jsxs("div",{className:pe.metricValues,children:[s.jsx("span",{"aria-label":"Spieler A",children:i(e)}),s.jsx("span",{className:pe.metricDivider,children:"vs"}),s.jsx("span",{"aria-label":"Spieler B",children:i(n)})]}),s.jsx("p",{className:pe.metricDelta,children:o})]})}function Tae({playerA:t,playerB:e,countdownA:n,countdownB:r,activePopover:i,onToggle:a}){return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Freshness"}),s.jsx("div",{className:pe.freshnessRow,children:[t,e].map(o=>{const c=o.id===t.id?n:r,u=`fresh-${o.id}`,h=i===u;return s.jsxs("div",{className:pe.freshnessItem,children:[s.jsxs("button",{type:"button",className:pe.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[s.jsx("span",{children:o.freshness.toUpperCase()}),s.jsx("small",{children:qp(o.lastScanAt)})]}),h&&s.jsxs("div",{className:pe.freshnessPopover,role:"dialog",children:[s.jsx("p",{className:pe.popoverTitle,children:o.name}),s.jsxs("dl",{children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{children:n2[o.freshness]})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt gescannt"}),s.jsx("dd",{children:vo(o.lastScanAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Naechstes Update"}),s.jsxs("dd",{children:[vo(o.nextUpdateAt)," (",c,")"]})]})]})]})]},o.id)})})]})}function Iae({playerA:t,playerB:e}){const n=q.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return s.jsxs("div",{className:pe.classColumn,children:[s.jsx("h3",{children:i.name}),s.jsx("div",{className:pe.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(o=>s.jsxs("span",{style:{width:`${o.percent}%`},className:pe.classSlice,children:[s.jsx("small",{children:o.label}),s.jsxs("strong",{children:[o.percent,"%"]})]},`${i.id}-${o.label}`))})]})};return s.jsxs("div",{className:pe.classCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Stat-Verteilung"}),s.jsx("div",{className:pe.classGrid,children:[t,e].map(r)}),n.length>0&&s.jsx("ul",{className:pe.classLegend,children:n.map(i=>s.jsx("li",{children:i},i))})]})}function Eae(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return s.jsxs("section",{className:pe.checklistCard,children:[s.jsx("h3",{children:"Vor dem Vergleich pruefen"}),s.jsx("ul",{className:pe.checklist,children:t.map(e=>s.jsx("li",{children:e},e))})]})}function Aae(){return s.jsxs("section",{className:pe.infoCardExtended,children:[s.jsx("h3",{children:"Matchup-Diff"}),s.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",s.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),s.jsx("p",{className:pe.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),s.jsx("button",{type:"button",className:pe.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function Pae(t,e,n){const[r,i]=q.useState([]),[a,o]=q.useState(!1);return q.useEffect(()=>{const c=t.trim();if(c.length===0){i([]),o(!1);return}let u=!1;async function h(){const m=Mn("PlayersCompare:search");o(!0);try{const g=c.toLowerCase(),x=Fp(Tt,"latest"),b=await Tn(m,{path:"players/latest (collectionGroup)"},()=>Cn(Dn(x,Hi("nameFold"),Zl(g),ec(g+""),pr(15)))),w=await Tn(m,{path:"players/latest (collectionGroup)"},()=>Cn(Dn(x,ji("nameNgrams","array-contains",g),pr(15)))),k=new Set,A=[],L=I=>{var z,Y,te,G,X,J,se,ue,Ne,Ee,ee,le,re,be,Te,Le,Re,Oe,Me,De,Fe,we,de,Ie,Ae,Xe,oe,fe,me;const N=I.data(),_=(z=I.ref.parent)==null?void 0:z.parent,R=_==null?void 0:_.parent;if((R==null?void 0:R.id)!=="players")return;const S=(te=(Y=_==null?void 0:_.id)!=null?Y:N.playerIdentifier)!=null?te:I.id;if(!S||k.has(S)||n&&S===n)return;const C=(J=(X=N.name)!=null?X:(G=N.values)==null?void 0:G.Name)!=null?J:"Unbekannter Spieler",M=(Ne=(ue=N.server)!=null?ue:(se=N.values)==null?void 0:se.Server)!=null?Ne:"Unknown";if(e!=="all"&&M!==e)return;const T=(be=(re=(ee=N.className)!=null?ee:(Ee=N.values)==null?void 0:Ee.Class)!=null?re:(le=N.values)==null?void 0:le.Class)!=null?be:"Unbekannte Klasse",F=(Re=(Le=N.guildName)!=null?Le:(Te=N.values)==null?void 0:Te.Guild)!=null?Re:"",D=Gl(N.level)||Gl((Oe=N.values)==null?void 0:Oe.Level)||Gl((Me=N.values)==null?void 0:Me.Level),V=Gl(N.scrapbookPct)||Gl((De=N.values)==null?void 0:De["Album %"])||Gl((Fe=N.values)==null?void 0:Fe.AlbumPct)||Gl((we=N.values)==null?void 0:we["Scrapbook %"]),U=(Ae=(Ie=N.updatedAt)!=null?Ie:(de=N.values)==null?void 0:de.UpdatedAt)!=null?Ae:N.timestamp?new Date(N.timestamp*1e3).toISOString():new Date().toISOString(),K=(Xe=N.nextUpdateAt)!=null?Xe:Lae(12),H=Rae((oe=N.values)!=null?oe:N.stats);k.add(S),A.push({id:S,name:C,tagline:(fe=N.tagline)!=null?fe:F?`Mitglied in ${F}`:T,server:M,className:T,guildName:F,level:D||0,scrapbookPct:V,lastScanAt:U,updatedAt:U,nextUpdateAt:K,freshness:(me=N.freshness)!=null?me:"unknown",stats:H})};b.forEach(L),w.forEach(L),u||(A.sort((I,N)=>I.name.localeCompare(N.name)),i(A))}catch(g){console.error("[Players Compare] player search failed",g),u||i([])}finally{dn(m),u||o(!1)}}return h(),()=>{u=!0}},[t,e,n]),{results:r,loading:a}}const L3={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function Rae(t={}){const e=Object.keys(L3).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:L3[r],value:Gl(i)}}).filter(r=>r.value>0),n=e.reduce((r,i)=>r+i.value,0);return n?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/n*100))})):[]}function Gl(t){const e=Number(t);return Number.isFinite(e)?e:0}function Lae(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function Dae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(D3,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),s.jsx(D3,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function D3({to:t,title:e,desc:n}){return s.jsxs(zs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Mae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds  Rankings"}),s.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function Fae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds  Stats"}),s.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}const Bae={freedom:{fileId:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59",name:"Freedom"},weltenimwandel:{fileId:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",name:"Welten im Wandel"},poenacapitis:{fileId:"1L9RiqzxQumXOZ3e-GlG6RCGVAN1kFFBG",name:"Poena Capitis"},thevoid:{fileId:"13Ud0Wap5YiSAe4tHALOS7JvpLl1g471t",name:"The Void"},legionz:{fileId:"",name:"LegionZ"},dielegion:{fileId:"1NiEnFnOglOvvhV1c-kRwIs083zETmDWIp",name:"Die Legion"},asylum:{fileId:"1YWhfhmS6U4IPc0ydJ3ctSsXJrpKD7fg",name:"Asylum"},imperium:{fileId:"1Ma_Pm-ed6qgRf-4prgzC71DWn5u2nJ79",name:"Imperium"},sladkydomov:{fileId:"1kQkgEgpzSzi4QPwD1atWs8DNS3mcHRbE",name:"Sladky domov"},exils1eu:{fileId:"16UdoSWWP3s9xrB8qFTKDEabDsOrCHFL7",name:"Exil"}};function $ae(t){if(!t)return null;const e=Bae[t];return e!=null&&e.fileId?e.fileId:null}function Oae(t,e=128){var a,o;const n=$ae(t);if(!n)return{id:null,url:null,thumb:null,fallback:""};const r=(a=_d(n))!=null?a:null,i=r&&(o=Ni(r,e))!=null?o:null;return{id:n,url:r,thumb:i,fallback:""}}function xp(t,e=128){return Oae(t,e).thumb}const Id={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},my=(t,e)=>({...t||{},...e||{}}),M3=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),n=Math.floor((Date.now()-e.getTime())/864e5);return n<=0?"today":n===1?"yesterday":`${n}d ago`},Vae=t=>Object.values(t||{}).reduce((e,n)=>e+(n||0),0),jr=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function Uae(t){var x,b,w,k,A,L,I,N;const e=jr(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const n=jr(t==null?void 0:t.baseMain),r=jr(t==null?void 0:t.conBase);if(n!=null&&r!=null)return n+r;const i=(t==null?void 0:t.baseStats)||{},a=jr(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const o=jr(i==null?void 0:i.main),c=jr(i==null?void 0:i.con);if(o!=null&&c!=null)return o+c;const u=(t==null?void 0:t.values)||{},h=(b=(x=jr(u==null?void 0:u.SumBaseTotal))!=null?x:jr(u==null?void 0:u.sumBaseTotal))!=null?b:jr(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const m=(A=(k=(w=jr(u==null?void 0:u.Main))!=null?w:jr(u==null?void 0:u.main))!=null?k:jr(u==null?void 0:u.BaseMain))!=null?A:jr(u==null?void 0:u.baseMain),g=(N=(I=(L=jr(u==null?void 0:u.Con))!=null?L:jr(u==null?void 0:u.con))!=null?I:jr(u==null?void 0:u.ConBase))!=null?N:jr(u==null?void 0:u.conBase);return m!=null&&g!=null?m+g:null}function zc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function zae(t,e=56){if(!t)return;const n=zc(t),r=fr.find(i=>zc(i.label)===n||zc(i.key)===n)||fr.find(i=>zc(i.label).startsWith(n)||n.startsWith(zc(i.label))||zc(i.key).startsWith(n)||n.startsWith(zc(i.key)));return r?Ni(r.iconUrl,e):void 0}function Gae({name:t,memberClass:e,online:n,theme:r=Id}){const i=t.split("_").map(o=>o[0]).join("").slice(0,2).toUpperCase(),a=zae(e,56);return s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:o=>{const c=o.currentTarget.parentElement;c&&(c.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),n&&s.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const Hae={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},Wae=({role:t})=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(Hae[t]||""),children:t});function F3(t,e){const n=(t!=null?t:"").trim();if(n)return n;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function Kae(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,n=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:n!=null&&r!=null?n+r:null;return i!=null?i.toLocaleString("de-DE"):""}function Af({label:t,value:e,theme:n=Id}){return s.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:n.border,background:n.tile},children:[s.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),s.jsx("div",{className:"text-lg font-semibold",style:{color:n.title},children:e})]})}function qae({member:t,theme:e,actions:n,extraKPIs:r}){var m,g,x,b,w,k,A,L,I;if(!t)return null;const i=my(Id,e),a=t,o=F3((g=(m=a.guildJoined)!=null?m:a.joinedAt)!=null?g:null,(x=a.guildJoinedMs)!=null?x:null),c=F3((b=a.lastActivity)!=null?b:null,(w=a.lastActivityMs)!=null?w:typeof a.lastOnline=="number"?a.lastOnline:null),u=Kae(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return s.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),s.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[s.jsx("div",{className:"shrink-0",children:s.jsx(Gae,{name:t.name,memberClass:(L=(A=a.class)!=null?A:(k=a.values)==null?void 0:k.Class)!=null?L:null,online:a.online,theme:i})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[s.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&s.jsx(Wae,{role:a.role})]}),s.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",o,"  Last ",c]})]}),s.jsx("div",{className:"ml-auto",children:n})]}),s.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(Af,{label:"Level",value:(I=a.level)!=null?I:"",theme:i}),typeof a.scrapbook=="number"&&s.jsx(Af,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),s.jsx(Af,{label:"Sum Base",value:u,theme:i}),s.jsx(Af,{label:"Total Stats",value:h,theme:i}),r]})]})}function Gc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function Qae(t,e=40){if(!t)return;const n=Gc(t);let r=fr.find(i=>Gc(i.label)===n||Gc(i.key)===n)||fr.find(i=>Gc(i.label).startsWith(n)||n.startsWith(Gc(i.label))||Gc(i.key).startsWith(n)||n.startsWith(Gc(i.key)));return r?Ni(r.iconUrl,e):void 0}function Yae({name:t,memberClass:e,online:n,theme:r=Id}){const i=t.split("_").map(o=>o[0]).join("").slice(0,2).toUpperCase(),a=Qae(e,40);return s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:o=>{const c=o.currentTarget.parentElement;c&&(c.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),n&&s.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const Xae=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function Jae({rows:t,selId:e,onSelect:n,rightCols:r,theme:i}){const a=my(Id,i);return s.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[s.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),s.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[s.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((o,c)=>{var u,h,m;return s.jsxs("button",{onClick:()=>n(o.id),"aria-pressed":o.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(c%2?"bg-slate-800/10":"")+(o.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[s.jsx(Yae,{name:o.name,memberClass:(m=(h=o.class)!=null?h:(u=o.values)==null?void 0:u.Class)!=null?m:null,online:o.online,theme:a}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:o.name}),s.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[o.class,o.server?`  ${o.server}`:""]})]}),s.jsx("div",{className:"justify-self-end",children:s.jsx(Xae,{role:o.role})}),r(o)]},o.id)})]})]})}function Hc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function Zae(t,e=40){if(!t)return;const n=Hc(t);let r=fr.find(i=>Hc(i.label)===n||Hc(i.key)===n)||fr.find(i=>Hc(i.label).startsWith(n)||n.startsWith(Hc(i.label))||Hc(i.key).startsWith(n)||n.startsWith(Hc(i.key)));return r?Ni(r.iconUrl,e):void 0}function eoe({rows:t,selId:e,onSelect:n,footer:r,theme:i}){const a=my(Id,i);return s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(o=>{var x,b,w,k,A,L,I,N,v;const c=o,u=o.name.slice(0,2).toUpperCase(),h=Zae((w=(b=c.class)!=null?b:(x=c.values)==null?void 0:x.Class)!=null?w:null,40),m=typeof c.level=="number"?c.level:typeof((k=c.values)==null?void 0:k.Level)=="number"?c.values.Level:"",g=typeof c.scrapbook=="number"?`${c.scrapbook}%`:typeof((A=c.values)==null?void 0:A.Scrapbook)=="number"?`${c.values.Scrapbook}%`:null;return s.jsxs("button",{onClick:()=>n(o.id),"aria-pressed":o.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(o.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:o.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h?s.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:_=>{const R=_.currentTarget.parentElement;R&&(R.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:o.name}),s.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(N=(I=c.class)!=null?I:(L=c.values)==null?void 0:L.Class)!=null?N:"",c.server?`  ${c.server}`:""]})]}),s.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(v=c.role)!=null?v:""})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),s.jsx("div",{className:"font-semibold",style:{color:a.title},children:m})]}),g&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),s.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),s.jsx("div",{className:"mt-3",children:r(o)})]},o.id)})})}const toe=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(n=>{const r=t[n];typeof r=="number"&&(e[n]=r)}),Object.keys(e).length?e:void 0};function soe({members:t,defaultView:e="list",defaultQuery:n="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:o,renderActions:c,renderKPIs:u,theme:h}){var M;const m=P.useMemo(()=>my(Id,h),[h]),[g,x]=P.useState(e),[b,w]=P.useState(n),[k,A]=P.useState(r.key),[L,I]=P.useState(r.dir),[N,v]=P.useState((M=t[0])==null?void 0:M.id),_=a!=null?a:N,R=T=>{a||v(T);const F=t.find(D=>D.id===T);F&&o&&o(F)},j=P.useMemo(()=>{const T=b.trim().toLowerCase();return T?t.filter(F=>F.name.toLowerCase().includes(T)||F.class.toLowerCase().includes(T)||String(F.role).toLowerCase().includes(T)):t},[t,b]),S=P.useMemo(()=>{const T=L==="asc"?1:-1,F=D=>{var V,U;switch(k){case"sumBaseStats":{const K=Uae(D);return K==null?-1/0:K}case"totalStats":return(U=(V=D.totalStats)!=null?V:Vae(toe(D.baseStats)))!=null?U:-1/0;default:return D[k]}};return[...j].sort((D,V)=>{const U=F(D),K=F(V);return U===K?0:U>K?T:-T})},[j,k,L]),C=P.useMemo(()=>S.find(T=>T.id===_)||S[0],[S,_]);return s.jsxs("div",{children:[i&&s.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:m.tile,borderColor:m.border},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"View"}),s.jsxs("select",{value:g,onChange:T=>x(T.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[s.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),s.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Search"}),s.jsx("input",{value:b,onChange:T=>w(T.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:m.border}})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Sort by"}),s.jsxs("select",{value:String(k),onChange:T=>A(T.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[s.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),s.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),s.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),s.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),s.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),s.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),s.jsx("button",{onClick:()=>I(T=>T==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:m.border},children:L==="asc"?"":""})]})]}),s.jsx(qae,{member:C,actions:C&&(c?c(C):s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Profile"}),s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Compare"}),s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Message"})]})),extraKPIs:C&&u?u(C):null,theme:m}),g==="list"?s.jsx(Jae,{rows:S,selId:_,onSelect:R,theme:m,rightCols:T=>{var F;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-right text-sm",children:(F=T.level)!=null?F:""}),s.jsx("div",{className:"text-right text-xs",style:{color:m.sub},children:M3(T.lastOnline)})]})}}):s.jsx(eoe,{rows:S,selId:_,onSelect:R,theme:m,footer:T=>s.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:m.sub},children:s.jsxs("span",{children:["Last ",M3(T.lastOnline)]})})})]})}function noe({guildName:t,server:e,emblemUrl:n,lastScanISO:r,members:i,avgLevel:a,totalPower:o,activity7d:c,topClasses:u,tickerItems:h,href:m,onClick:g,className:x}){const b=!!MR(),w=P.useMemo(()=>{if(!r)return null;const F=Date.now()-new Date(r).getTime(),D=Math.max(0,Math.floor(F/6e4));if(D<60)return`${D}m`;const V=Math.floor(D/60);return V<24?`${V}h`:`${Math.floor(V/24)}d`},[r]),k=jm(0),A=jm(0),L=jm(0),I=jm(0),N=jf(k,F=>Math.round(F).toString()),v=jf(A,F=>Math.round(F).toString()),_=jf(L,F=>Math.round(F).toLocaleString()),R=jf(I,F=>`${Math.round(F)}%`);P.useEffect(()=>{const F=b?0:.6;if(F===0){k.set(i),A.set(a),L.set(o!=null?o:0),I.set(c!=null?c:0);return}const D=[Sf(k,i,{duration:F}),Sf(A,a,{duration:F}),Sf(L,o!=null?o:0,{duration:F}),Sf(I,c!=null?c:0,{duration:F})];return()=>D.forEach(V=>V.stop())},[i,a,o,c,b]);const j=P.useRef(null);P.useEffect(()=>{if(b||!j.current)return;const F=j.current;let D=0,V=0;const U=()=>{V+=.016;const K=V*14%140-20;F.style.setProperty("--s-x",`${K}%`),D=requestAnimationFrame(U)};return D=requestAnimationFrame(U),()=>cancelAnimationFrame(D)},[b]);const S={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},C=100,M=m?"a":"div",T=m?{href:m}:{onClick:g};return s.jsxs(M,{...T,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",x!=null?x:""].join(" "),style:{background:`linear-gradient(135deg, ${S.bgFrom}, ${S.bgTo})`},children:[s.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),s.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[s.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[n?s.jsx("img",{src:n,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:s.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),s.jsx("div",{ref:j,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),w&&s.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:S.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${S.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",w]}),s.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${C}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),s.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${C}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${C}deg, transparent 0 46px, ${S.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),s.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[s.jsx("h3",{className:"truncate font-extrabold",style:{color:S.title,fontSize:22},children:t}),s.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:S.soft,border:`1px solid ${S.border}`},children:e})]}),s.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[s.jsx(Pf,{label:"Members",value:N}),s.jsx(Pf,{label:" Level",value:v}),s.jsx(Pf,{label:"Total Power",value:_}),typeof c=="number"&&s.jsx(Pf,{label:"Activity (7d)",value:R})]}),u!=null&&u.length?s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:S.soft},children:"Top Classes"}),u.slice(0,3).map(F=>s.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${S.border}`,color:S.text},children:[F.iconUrl?s.jsx("img",{src:F.iconUrl,alt:F.key,className:"h-4 w-4 object-contain"}):s.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:S.accent,opacity:.85}}),s.jsxs("span",{className:"text-xs",children:[F.key," ",s.jsxs("span",{className:"opacity-70",children:["(",Math.round(F.percent),"%)"]})]})]},F.key))]}):null]})]})]}),h!=null&&h.length?s.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${S.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:s.jsx(roe,{items:h,muted:b,color:S.soft})}):null]})}function Pf({label:t,value:e}){return s.jsxs("div",{className:"relative z-10 min-w-0",children:[s.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),s.jsx(LR.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function roe({items:t,muted:e,color:n}){const r=P.useRef(null);return P.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,o=0;const c=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,o=requestAnimationFrame(c)};return o=requestAnimationFrame(c),()=>cancelAnimationFrame(o)},[e]),s.jsx("div",{className:"overflow-hidden",children:s.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:n},children:t.concat(t).map((i,a)=>s.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const ioe="_wrap_q5gkc_53",aoe="_banner_q5gkc_59",ooe="_bannerRowTop_q5gkc_61",loe="_bannerStripe_q5gkc_71",coe="_bannerTitle_q5gkc_79",doe="_bannerRowBottom_q5gkc_93",uoe="_bannerSub_q5gkc_95",hoe="_monthPickerWrap_q5gkc_101",moe="_monthPickerLabel_q5gkc_113",poe="_monthPicker_q5gkc_101",goe="_monthButton_q5gkc_131",foe="_monthButtonText_q5gkc_159",voe="_chev_q5gkc_161",xoe="_monthList_q5gkc_165",yoe="_monthOption_q5gkc_195",boe="_monthBadge_q5gkc_221",_oe="_gridRow_q5gkc_237",woe="_gridRowBottom_q5gkc_239",joe="_sideImage_q5gkc_253",Soe="_sideImagePh_q5gkc_271",Noe="_emblemPanel_q5gkc_275",koe="_emblemFrame_q5gkc_295",Coe="_emblemImg_q5gkc_297",Toe="_emblemPlaceholder_q5gkc_299",Ioe="_emblemShimmer_q5gkc_307",Eoe="_emblemCaption_q5gkc_315",Aoe="_card_q5gkc_319",Poe="_cardHeader_q5gkc_331",Roe="_cardTitle_q5gkc_339",Loe="_cardSubtitle_q5gkc_341",Doe="_headerRight_q5gkc_343",Moe="_cardBody_q5gkc_345",Foe="_tableWrap_q5gkc_349",Boe="_tableTitle_q5gkc_351",$oe="_table_q5gkc_349",Ooe="_th_q5gkc_355",Voe="_td_q5gkc_355",Uoe="_tdEmpty_q5gkc_365",zoe="_sectionDivider_q5gkc_375",Goe="_sectionStripe_q5gkc_389",Hoe="_sectionTitle_q5gkc_397",ts={wrap:ioe,banner:aoe,bannerRowTop:ooe,bannerStripe:loe,bannerTitle:coe,bannerRowBottom:doe,bannerSub:uoe,monthPickerWrap:hoe,monthPickerLabel:moe,monthPicker:poe,monthButton:goe,monthButtonText:foe,chev:voe,monthList:xoe,monthOption:yoe,monthBadge:boe,gridRow:_oe,gridRowBottom:woe,sideImage:joe,sideImagePh:Soe,emblemPanel:Noe,emblemFrame:koe,emblemImg:Coe,emblemPlaceholder:Toe,emblemShimmer:Ioe,emblemCaption:Eoe,card:Aoe,cardHeader:Poe,cardTitle:Roe,cardSubtitle:Loe,headerRight:Doe,cardBody:Moe,tableWrap:Foe,tableTitle:Boe,table:$oe,th:Ooe,td:Voe,tdEmpty:Uoe,sectionDivider:zoe,sectionStripe:Goe,sectionTitle:Hoe};function Woe(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function B3(t,e="de-DE"){const n=new Date(t);return Number.isNaN(n.getTime())?"":n.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const $3=({title:t,subtitle:e,children:n,rightBadge:r})=>s.jsxs("section",{className:ts.card,children:[(t||e||r)&&s.jsxs("header",{className:ts.cardHeader,children:[s.jsxs("div",{className:ts.headerTitles,children:[t&&s.jsx("h3",{className:ts.cardTitle,children:t}),e&&s.jsx("div",{className:ts.cardSubtitle,children:e})]}),r&&s.jsx("div",{className:ts.headerRight,children:r})]}),s.jsx("div",{className:ts.cardBody,children:n})]}),O3=({block:t})=>{var r,i;const e=t.columns,n=(r=t.rows)!=null?r:[];return s.jsxs("div",{className:ts.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&s.jsx("div",{className:ts.tableTitle,children:t.title}),s.jsxs("table",{className:ts.table,children:[s.jsx("thead",{children:s.jsx("tr",{children:e.map(a=>s.jsx("th",{className:ts.th,style:{width:a.width},children:a.label},a.key))})}),s.jsx("tbody",{children:n.length===0?s.jsx("tr",{children:s.jsx("td",{className:ts.tdEmpty,colSpan:e.length,children:"No data"})}):n.map((a,o)=>{var c;return s.jsx("tr",{children:e.map(u=>{var x;const h=a[u.key],m=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?Woe(m):m;return s.jsx("td",{className:ts.td,"data-align":(x=u.align)!=null?x:"left",children:u.render?u.render(a):g},u.key)})},(c=a.id)!=null?c:o)})})]}),t.footer&&s.jsx("div",{className:ts.tableFooter,children:t.footer})]})},Koe=(t,e)=>{P.useEffect(()=>{function n(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[t,e])},qoe=({months:t,currentKey:e,onChange:n,fallbackDate:r})=>{var m;if(!(Array.isArray(t)&&t.length>0&&e))return s.jsx("div",{className:ts.bannerSub,children:r!=null?r:""});const a=P.useRef(null),[o,c]=P.useState(!1);Koe(a,()=>c(!1));const u=t.find(g=>g.key===e),h=u?`${B3(u.fromISO)}${B3(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return s.jsxs("div",{className:ts.monthPickerWrap,children:[s.jsx("div",{className:ts.monthPickerLabel,children:"Monat"}),s.jsxs("div",{className:ts.monthPicker,ref:a,children:[s.jsxs("button",{type:"button",className:ts.monthButton,onClick:()=>c(g=>!g),"aria-haspopup":"listbox","aria-expanded":o,children:[s.jsx("span",{className:ts.monthButtonText,children:(m=u==null?void 0:u.label)!=null?m:""}),s.jsx("svg",{className:ts.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),o&&s.jsx("ul",{className:ts.monthList,role:"listbox",children:t.map(g=>s.jsx("li",{children:s.jsx("button",{type:"button",className:ts.monthOption,onClick:()=>{c(!1),n==null||n(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&s.jsx("span",{className:ts.monthBadge,children:h})]})},Qoe=({title:t,monthRange:e,months:n,currentMonthKey:r,onMonthChange:i})=>s.jsxs("div",{className:ts.banner,children:[s.jsxs("div",{className:ts.bannerRowTop,children:[s.jsx("div",{className:ts.bannerStripe}),s.jsx("div",{className:ts.bannerTitle,children:t}),s.jsx("div",{className:ts.bannerStripe})]}),s.jsx("div",{className:ts.bannerRowBottom,children:s.jsx(qoe,{months:n,currentKey:r,onChange:i,fallbackDate:e})})]}),Yoe=({emblemUrl:t,caption:e})=>s.jsxs("div",{className:ts.emblemPanel,children:[s.jsxs("div",{className:ts.emblemFrame,children:[t?s.jsx("img",{src:t,alt:"Guild Emblem",className:ts.emblemImg}):s.jsx("div",{className:ts.emblemPlaceholder,children:"Emblem"}),s.jsx("div",{className:ts.emblemShimmer})]}),e&&s.jsx("div",{className:ts.emblemCaption,children:e})]}),V3=({imgUrl:t,alt:e})=>s.jsx("div",{className:ts.sideImage,children:t?s.jsx("img",{src:t,alt:e!=null?e:"side"}):s.jsx("div",{className:ts.sideImagePh,children:"Image"})}),Yb=({children:t,className:e})=>s.jsx("div",{className:`${ts.gridRow} ${e!=null?e:""}`,children:t}),Xoe=({children:t})=>s.jsxs("div",{className:ts.sectionDivider,children:[s.jsx("div",{className:ts.sectionStripe}),s.jsx("div",{className:ts.sectionTitle,children:t}),s.jsx("div",{className:ts.sectionStripe})]}),Joe=({data:t,onMonthChange:e})=>{const{header:n,panels:r,tablesTop:i,tablesBottom:a}=t;return s.jsxs("div",{className:ts.wrap,children:[s.jsx(Qoe,{title:n.title,monthRange:n.monthRange,months:n.months,currentMonthKey:n.currentMonthKey,onMonthChange:e}),s.jsxs(Yb,{children:[s.jsx(V3,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),s.jsx(Yoe,{emblemUrl:n.emblemUrl,caption:n.centerCaption}),s.jsx(V3,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),s.jsx(Yb,{children:i.map((o,c)=>s.jsx($3,{title:o.title,subtitle:o.subtitle,children:s.jsx(O3,{block:o})},c))}),s.jsx(Xoe,{children:"Guild Overview"}),s.jsx(Yb,{className:ts.gridRowBottom,children:a.map((o,c)=>s.jsx($3,{title:o.title,subtitle:o.subtitle,children:s.jsx(O3,{block:o})},c))})]})},Xb=new Map,U3=new Map,Zoe=({guildId:t,guildName:e,guildServer:n})=>{const[r,i]=P.useState(!0),[a,o]=P.useState(null),[c,u]=P.useState(void 0),h=P.useRef({}),[m,g]=P.useState(()=>am(t,e,n));P.useEffect(()=>{let b=!1;const w=t.trim().toLowerCase(),k=I=>{h.current={...I.progressByMonth};const N=I.opts;if(!N.length){o(null),u(void 0),g(am(t,e,n));return}o(N);const v=N[0].key;u(v);const _=h.current[v];g(z3(_,{guildId:t,guildName:e,guildServer:n,currentMonthKey:v,months:N}))},A=async()=>{var N,v,_,R,j;const I=Mn("GuildMonthly:months");i(!0);try{const S=ol(Tt,`guilds/${t}/history_monthly`),C=await Tn(I,{path:S.path},()=>Cn(S)),M=[],T={};for(const F of C.docs){const D=F.id,V=F.data();if(!V)continue;T[D]=V;const U=(N=V==null?void 0:V.meta)!=null?N:{},K=U.fromISO||U.baselineISO||U.firstISO||"",H=U.toISO||U.latestISO||U.nowISO||"",z=Number((v=U.daysSpan)!=null?v:Math.floor((+new Date(H)-+new Date(K))/864e5))||0,Y=!!((R=(_=V==null?void 0:V.status)==null?void 0:_.available)!=null?R:K&&H&&z<=40),te=U.label||new Date(D+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});M.push({key:D,label:te,fromISO:K||new Date(D+"-01").toISOString(),toISO:H||new Date(D+"-28").toISOString(),daysSpan:z,available:Y,reason:Y||(j=V==null?void 0:V.status)==null?void 0:j.reason})}return M.sort((F,D)=>F.key<D.key?1:-1),{opts:M,progressByMonth:T}}finally{dn(I)}};async function L(){try{if(!w){o(null),u(void 0),g(am(t,e,n)),i(!1);return}const I=U3.get(w);if(I){b||k(I),i(!1);return}const N=Xb.get(w),v=N!=null?N:A();N||Xb.set(w,v);const _=await v;U3.set(w,_),b||k(_)}catch(I){console.error(I),b||(o(null),u(void 0),g(am(t,e,n)))}finally{existing||Xb.delete(w),b||i(!1)}}return L(),()=>{b=!0}},[t,e,n]);async function x(b){u(b);let w=h.current[b];if(!w){const k=Mn("GuildMonthly:monthDoc");try{const A=ms(Tt,`guilds/${t}/history_monthly/${b}`),L=await In(k,A,()=>mn(A));L.exists()?(w=L.data(),h.current[b]=w):w=null}catch(A){console.error(A),w=null}finally{dn(k)}}if(!w){g(am(t,e,n,{currentMonthKey:b,months:a!=null?a:void 0}));return}g(z3(w,{guildId:t,guildName:e,guildServer:n,currentMonthKey:b,months:a!=null?a:void 0}))}return s.jsx(Joe,{data:m,onMonthChange:x})};function am(t,e,n,r){return{header:{title:`${e} - Monthly Progress`,monthRange:"-",emblemUrl:xp(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:r==null?void 0:r.currentMonthKey,months:r==null?void 0:r.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[Wc("Most Base Stats gained",n?`Server ${n}`:void 0),Wc("Sum Base Stats"),Wc("Highest Base Stats")],tablesBottom:[Wc("Main & Con"),Wc("Sum Base Stats"),Wc("Highest Base Stats"),Wc("Highest Total Stats")]}}function Wc(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function z3(t,e){var o,c,u,h,m,g,x,b;(o=t==null?void 0:t.meta)!=null;const n={title:`${e.guildName} - Monthly Progress`,monthRange:void 0,emblemUrl:xp(e.guildId,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"Delta",width:70,align:"right",format:"num"}],rows:((c=t==null?void 0:t.mostBaseGained)!=null?c:[]).map((w,k)=>{var A,L,I,N,v,_,R,j;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",level:(N=(I=w.levelLatest)!=null?I:w.level)!=null?N:null,base:(_=(v=w.baseLatest)!=null?v:w.base)!=null?_:null,delta:(j=(R=w.baseDelta)!=null?R:w.delta)!=null?j:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam Delta",width:90,align:"right",format:"num"},{key:"sho",label:"Sho Delta",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((w,k)=>{var A,L,I,N,v,_,R;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",base:(I=w.base)!=null?I:null,stam:(v=(N=w.stamDelta)!=null?N:w.staminaDelta)!=null?v:null,sho:(R=(_=w.shoDelta)!=null?_:w.shootingDelta)!=null?R:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((w,k)=>{var A,L,I,N,v;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",stats:(N=(I=w.stats)!=null?I:w.base)!=null?N:null,delta:(v=w.delta)!=null?v:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((m=t==null?void 0:t.mainAndCon)!=null?m:[]).map((w,k)=>{var A,L,I,N,v,_;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",class:(N=(I=w.class)!=null?I:w.className)!=null?N:"",stats:(v=w.stats)!=null?v:null,delta:(_=w.delta)!=null?_:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam Delta",width:90,align:"right",format:"num"},{key:"sho",label:"Sho Delta",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((w,k)=>{var A,L,I,N,v;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",base:(I=w.base)!=null?I:null,stam:(N=w.stamDelta)!=null?N:null,sho:(v=w.shoDelta)!=null?v:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((x=t==null?void 0:t.highestBaseStats)!=null?x:[]).map((w,k)=>{var A,L,I,N;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",stats:(I=w.stats)!=null?I:null,delta:(N=w.delta)!=null?N:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"Delta",width:80,align:"right",format:"num"}],rows:((b=t==null?void 0:t.highestTotalStats)!=null?b:[]).map((w,k)=>{var A,L,I,N;return{id:(A=w.playerId)!=null?A:k,rank:k+1,name:(L=w.name)!=null?L:"-",total:(I=w.total)!=null?I:null,delta:(N=w.delta)!=null?N:null}})}];return{header:n,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const ele="_root_r1uj3_5",tle="_sectionDivider_r1uj3_17",sle="_sectionStripe_r1uj3_31",nle="_sectionTitle_r1uj3_33",om={root:ele,sectionDivider:tle,sectionStripe:sle,sectionTitle:nle},rle="_root_4jywc_1",ile="_accent_4jywc_31",G3={root:rle,default:"_default_4jywc_29",accent:ile};function gc({text:t,tone:e="default",className:n}){return s.jsx("div",{className:`${G3.root} ${G3[e]} ${n!=null?n:""}`.trim(),children:t})}const ale="_card_vvv3s_3",ole="_wrap_vvv3s_31",lle="_divider_vvv3s_45",cle="_rows_vvv3s_77",dle="_row_vvv3s_77",ule="_left_vvv3s_109",hle="_label_vvv3s_111",mle="_avgHead_vvv3s_113",ple="_avgNum_vvv3s_115",gle="_top3_vvv3s_121",fle="_chip_vvv3s_123",vle="_badge_vvv3s_151",xle="_name_vvv3s_159",yle="_score_vvv3s_161",ble="_headerSpacer_vvv3s_167",ti={card:ale,wrap:ole,divider:lle,rows:cle,row:dle,left:ule,label:hle,avgHead:mle,avgNum:ple,top3:gle,chip:fle,badge:vle,name:xle,score:yle,headerSpacer:ble};function _le({name:t,value:e,classLabel:n,colors:r}){const i=ny(n,64);return s.jsxs("div",{className:ti.chip,children:[s.jsx("span",{className:ti.badge,children:i?s.jsx("img",{src:i,alt:""}):null}),s.jsx("span",{className:ti.name,children:t!=null?t:""}),s.jsx("span",{className:ti.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function wle({snapshot:t,colors:e,title:n="Base Stats"}){var o;const r=(o=t==null?void 0:t.members)!=null?o:[],i=c=>[...r].filter(u=>typeof u[c]=="number").sort((u,h)=>{var m,g;return((m=h[c])!=null?m:0)-((g=u[c])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return s.jsxs("div",{className:ti.card,children:[s.jsx(gc,{text:n}),s.jsx("div",{className:ti.headerSpacer}),s.jsxs("div",{className:ti.wrap,children:[s.jsx("div",{className:ti.divider}),s.jsx("div",{className:ti.rows,children:a.map((c,u)=>s.jsxs("div",{className:ti.row,children:[s.jsxs("div",{className:ti.left,children:[s.jsx("div",{className:ti.label,children:c.label}),s.jsx("div",{className:ti.avgHead,children:""}),s.jsx("div",{className:ti.avgNum,style:{color:e.title},children:typeof c.avg=="number"?c.avg.toLocaleString("de-DE"):""})]}),s.jsx("div",{className:ti.top3,children:c.list.map((h,m)=>s.jsx(_le,{name:h.name,value:h[c.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}const jle="_card_1enwc_1",Sle="_wrap_1enwc_1",Nle="_divider_1enwc_1",kle="_rows_1enwc_1",Cle="_row_1enwc_1",Tle="_left_1enwc_1",Ile="_label_1enwc_1",Ele="_avgHead_1enwc_1",Ale="_avgNum_1enwc_1",Ple="_top3_1enwc_1",Rle="_chip_1enwc_1",Lle="_badge_1enwc_1",Dle="_name_1enwc_1",Mle="_score_1enwc_1",Fle="_headerSpacer_1enwc_1",si={card:jle,wrap:Sle,divider:Nle,rows:kle,row:Cle,left:Tle,label:Ile,avgHead:Ele,avgNum:Ale,top3:Ple,chip:Rle,badge:Lle,name:Dle,score:Mle,headerSpacer:Fle};function Ble({name:t,value:e,classLabel:n,colors:r}){const i=ny(n,64);return s.jsxs("div",{className:si.chip,children:[s.jsx("span",{className:si.badge,children:i?s.jsx("img",{src:i,alt:""}):null}),s.jsx("span",{className:si.name,children:t!=null?t:""}),s.jsx("span",{className:si.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function $le({snapshot:t,colors:e,title:n="Total Stats"}){var o;const r=(o=t==null?void 0:t.members)!=null?o:[],i=c=>[...r].filter(u=>typeof u[c]=="number").sort((u,h)=>{var m,g;return((m=h[c])!=null?m:0)-((g=u[c])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return s.jsxs("div",{className:si.card,children:[s.jsx(gc,{text:n}),s.jsx("div",{className:si.headerSpacer}),s.jsxs("div",{className:si.wrap,children:[s.jsx("div",{className:si.divider}),s.jsx("div",{className:si.rows,children:a.map((c,u)=>s.jsxs("div",{className:si.row,children:[s.jsxs("div",{className:si.left,children:[s.jsx("div",{className:si.label,children:c.label}),s.jsx("div",{className:si.avgHead,children:""}),s.jsx("div",{className:si.avgNum,style:{color:e.title},children:typeof c.avg=="number"?c.avg.toLocaleString("de-DE"):""})]}),s.jsx("div",{className:si.top3,children:c.list.map((h,m)=>s.jsx(Ble,{name:h.name,value:h[c.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}function Ole({guild:t,snapshot:e,colors:n}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(gc,{text:"General Info"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function Vle({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(gc,{text:"Fortress"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function Ule({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(gc,{text:"Rankings"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function zle({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(gc,{text:"Serververgleich"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const Gle=P.memo(function({guild:e,snapshot:n,emblemUrl:r,colors:i}){const a=i.icon,o=({text:c})=>s.jsxs("div",{className:om.sectionDivider,children:[s.jsx("div",{className:om.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),s.jsx("div",{className:om.sectionTitle,style:{color:i.soft},children:c}),s.jsx("div",{className:om.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return s.jsxs("div",{className:om.root+" space-y-4",children:[s.jsx(o,{text:"GUILD OVERVIEW"}),s.jsx("div",{style:{marginTop:6,marginBottom:10},children:s.jsx(o,{text:"AVERAGE PLAYER STATS"})}),s.jsx(Ole,{guild:e,snapshot:n,colors:i}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[s.jsx(wle,{snapshot:n,colors:i}),s.jsx($le,{snapshot:n,colors:i})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[s.jsx(Vle,{colors:i}),s.jsx(Ule,{colors:i})]}),s.jsx("div",{className:"mt-4",children:s.jsx(zle,{colors:i})})]})}),Hle="_wrapper_zqchq_3",Wle="_grid_zqchq_9",Kle="_tile_zqchq_13",qle="_disabled_zqchq_37",Qle="_crestWrap_zqchq_41",Yle="_crest_zqchq_41",Xle="_ring_zqchq_53",Jle="_badge_zqchq_55",Zle="_meta_zqchq_67",ece="_nameRow_zqchq_69",tce="_name_zqchq_69",sce="_share_zqchq_73",nce="_sub_zqchq_75",rce="_tileButton_zqchq_79",ice="_donutCard_zqchq_85",ace="_donutHeader_zqchq_87",oce="_legend_zqchq_91",lce="_legendItem_zqchq_93",cce="_legendSwatch_zqchq_95",dce="_legendRight_zqchq_97",uce="_centerLabel_zqchq_101",xn={wrapper:Hle,grid:Wle,tile:Kle,disabled:qle,crestWrap:Qle,crest:Yle,ring:Xle,badge:Jle,meta:Zle,nameRow:ece,name:tce,share:sce,sub:nce,tileButton:rce,donutCard:ice,donutHeader:ace,legend:oce,legendItem:lce,legendSwatch:cce,legendRight:dce,centerLabel:uce},R_=56;function cx(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function H3(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const hce=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function mce(t){return t?/drive\.google\.com/.test(t):!1}function W3(t,e=R_){if(t)return mce(t)?Ni(t,e):t}function pce(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const n={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return n[e]?n[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function gce(t){var m,g,x,b,w,k;if(!t)return null;const e=t,n=t,r=(m=e.key)!=null?m:n.id,i=(g=e.label)!=null?g:n.name,a=(b=(x=n.crestUrl)!=null?x:e.iconUrl)!=null?b:n.iconUrl,o=(w=e.iconUrl)!=null?w:n.iconUrl,c=(k=e.fallback)!=null?k:n.fallback;if(!r||!i)return null;const u=W3(a,R_),h=W3(o,R_);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:c?String(c):void 0}}function kL(t,e){var m,g,x,b,w,k,A,L,I,N,v,_,R,j,S,C,M,T,F,D,V;const n={},r={},i={},a={},o=e.map(U=>U.id);for(const U of o)n[U]=0,r[U]=0,i[U]=0,a[U]=null;for(const U of Array.isArray(t)?t:[]){const K=(_=(N=(L=(k=(b=(x=(g=(m=U.classId)!=null?m:U.class)!=null?g:U.klass)!=null?x:U.playerClass)!=null?b:U.cls)!=null?k:(w=U.values)==null?void 0:w.Class)!=null?L:(A=U.values)==null?void 0:A.class)!=null?N:(I=U.values)==null?void 0:I.Klasse)!=null?_:(v=U.values)==null?void 0:v.klasse,H=pce(K);if(!H||!o.includes(H))continue;n[H]+=1;const z=hce((C=(j=U.level)!=null?j:(R=U.values)==null?void 0:R.Level)!=null?C:(S=U.values)==null?void 0:S.level);z!=null&&(r[H]+=z,i[H]+=1,(!a[H]||((T=(M=a[H])==null?void 0:M.level)!=null?T:-1/0)<z)&&(a[H]={id:U.id,name:(V=(D=U.name)!=null?D:(F=U.values)==null?void 0:F.Name)!=null?V:null,level:z}))}const c=Object.values(n).reduce((U,K)=>U+K,0),u={},h={};return o.forEach(U=>{u[U]=c>0?n[U]/c*100:0,h[U]=i[U]>0?r[U]/i[U]:null}),{counts:n,shares:u,avg:h,top:a}}const fce=({valuePct:t})=>{const n=2*Math.PI*28,r=n*(1-Math.max(0,Math.min(100,t))/100);return s.jsxs("svg",{className:xn.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[s.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),s.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:n,strokeDashoffset:r,strokeLinecap:"round"})]})},vce=({data:t,classMeta:e,onPickClass:n})=>{const[r,i]=P.useState({}),a=Array.isArray(t)?t:[],o=Array.isArray(e)?e:[],{counts:c,shares:u,avg:h,top:m}=P.useMemo(()=>kL(a,o),[a,o]);return s.jsx("section",{className:xn.wrapper,children:s.jsx("div",{className:xn.grid,style:{gridTemplateColumns:"1fr"},children:o.map(g=>{var I,N,v;const x=(I=c[g.id])!=null?I:0,b=(N=u[g.id])!=null?N:0,w=h[g.id],k=m[g.id],A=x<=0,L=r[g.id]?void 0:g.crestUrl||g.iconUrl;return s.jsxs("div",{className:`${xn.tile} ${A?xn.disabled:""}`,title:A?`${g.name}: kein Mitglied`:`${g.name}  ${H3(x)}  ${cx(b)}${w?`   ${w.toFixed(1)}`:""}`,children:[s.jsxs("div",{className:xn.crestWrap,children:[L?s.jsx("img",{className:xn.crest,src:L,alt:g.name,onError:()=>i(_=>({..._,[g.id]:!0}))}):s.jsx("div",{className:xn.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(v=g.fallback)!=null?v:""}),s.jsx(fce,{valuePct:b}),s.jsx("div",{className:xn.badge,children:H3(x)})]}),s.jsxs("div",{className:xn.meta,children:[s.jsxs("div",{className:xn.nameRow,children:[s.jsx("div",{className:xn.name,children:g.name}),s.jsx("div",{className:xn.share,children:cx(b)})]}),s.jsxs("div",{className:xn.sub,children:[w?` Lvl ${w.toFixed(1)}`:"",k?`  Top: ${k.name}${k.level?` (Lv ${k.level})`:""}`:""]})]}),!A&&n&&s.jsx("button",{className:xn.tileButton,onClick:()=>n(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},xce=({data:t,classMeta:e})=>{const n=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=P.useMemo(()=>kL(n,r),[n,r]),o=P.useMemo(()=>Object.values(a).reduce((c,u)=>c+u,0),[a]);return s.jsxs("div",{className:xn.donutCard,children:[s.jsxs("div",{className:xn.donutHeader,children:[s.jsx("div",{children:"Klassen-Verteilung"}),s.jsxs("div",{className:xn.legendRight,children:["Gesamt: ",o]})]}),s.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[s.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[s.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,x=r.map((w,k)=>{var A;return{id:w.id,pct:(A=i[w.id])!=null?A:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*k)} 60% 55%)`}});let b=0;return x.map(w=>{const k=(w.pct||0)/100;if(k<=0)return null;const A=b,L=b+g*k;b=L;const I=L-A>Math.PI?1:0,N=130+100*Math.cos(A),v=130+100*Math.sin(A),_=130+100*Math.cos(L),R=130+100*Math.sin(L),j=130+64*Math.cos(L),S=130+64*Math.sin(L),C=130+64*Math.cos(A),M=130+64*Math.sin(A),T=`M ${N} ${v} A 100 100 0 ${I} 1 ${_} ${R} L ${j} ${S} A 64 64 0 ${I} 0 ${C} ${M} Z`;return s.jsx("path",{d:T,fill:w.color,opacity:.95},w.id)})})()]}),s.jsx("div",{className:xn.legend,children:r.map((c,u)=>{var g,x;const h=(g=i[c.id])!=null?g:0,m=(x=a[c.id])!=null?x:0;return s.jsxs("div",{className:xn.legendItem,title:`${c.name}: ${m}  ${cx(h)}`,children:[s.jsx("span",{className:xn.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),s.jsx("span",{children:c.name}),s.jsxs("span",{className:xn.legendRight,children:[m,"  ",cx(h)]})]},c.id)})})]}),s.jsx("div",{className:xn.centerLabel,children:"Anteile je Klasse"})]})},Gn={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},Jb=new Map,Rf=new Map,K3="sf_profile_guild__",q3="sf_profile_guild_server_index",Q3=3600*1e3,yce=t=>{var e,n,r,i,a,o,c,u,h,m,g,x,b,w,k;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(n=t.class)!=null?n:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(o=t.baseMain)!=null?o:void 0,con:(c=t.conBase)!=null?c:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(m=t.treasury)!=null?m:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(x=t.attrTotal)!=null?x:void 0,conTotal:(b=t.conTotal)!=null?b:void 0,lastScan:(w=t.lastScan)!=null?w:void 0,lastActivity:(k=t.lastActivity)!=null?k:void 0}}},Zb=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},bce=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function CL({title:t,right:e,children:n}){return s.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:Gn.tile,border:`1px solid ${Gn.line}`},children:[(t||e)&&s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:Gn.line},children:[s.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:Gn.soft},children:t}),e]}),s.jsx("div",{className:"p-4",children:n})]})}function lm({k:t,v:e}){return s.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[s.jsx("span",{className:"opacity-80",children:t}),s.jsx("span",{className:"font-semibold",style:{color:Gn.title},children:e})]})}function _ce({guild:t}){var n,r;const e=xp(t.id,800);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:s.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?s.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):s.jsx("div",{className:"text-6xl",children:""})})}),s.jsx(CL,{title:"GILDEN INFO",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsx(lm,{k:"Mitglieder",v:(n=t.memberCount)!=null?n:"-"}),s.jsx(lm,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:"-"}),s.jsx(lm,{k:"Server",v:(r=t.server)!=null?r:"-"}),s.jsx(lm,{k:"Inaktiv",v:"0"}),s.jsx(lm,{k:"Aktivitaet",v:"100%"})]})})]})}function e1(){var A,L,I,N,v,_;const t=Nx(),e=t.id||t.gid||t.guildId||t.guild||"",n=Wr(),[r,i]=P.useState(!0),[a,o]=P.useState(null),[c,u]=P.useState(null),[h,m]=P.useState(null),[g,x]=P.useState("grid"),b=P.useMemo(()=>(Array.isArray(fr)?fr:[]).map(gce).filter(Boolean),[]);P.useEffect(()=>{let R=!1;async function j(){var K;i(!0),o(null);const S=e.trim();if(!S){o("Keine Gilde gewaehlt."),i(!1);return}const C=()=>{if(typeof window=="undefined")return{};try{const H=window.localStorage.getItem(q3);if(!H)return{};const z=JSON.parse(H);return z&&typeof z=="object"?z:{}}catch(H){return{}}},M=C()[S],T=M?`${K3}${M}__${S}`:null;if(T){const H=Rf.get(T);if(H)if(Date.now()-H.cachedAt<Q3){R||(u(H.data.guild),m(H.data.snapshot),i(!1));return}else Rf.delete(T)}if(T){const H=fL(T,Q3);if(H&&typeof H=="object"){const z=H;Rf.set(T,{cachedAt:Date.now(),data:z}),R||(u(z.guild),m(z.snapshot),i(!1));return}}const F=async()=>{var z,Y,te,G,X,J,se,ue,Ne,Ee,ee,le,re,be,Te,Le,Re,Oe,Me,De,Fe,we,de,Ie,Ae,Xe,oe,fe,me,xe,tt,lt,Je,ut,bt,ft,mt;let H=null;try{H=Mn("GuildProfile:load");const ot=ms(Tt,`guilds/${S}/latest/latest`),os=await In(H,ot,()=>mn(ot));if(!os.exists())throw new Error("Gilde nicht gefunden.");const gt=os.data(),ne=(te=(Y=gt.name)!=null?Y:(z=gt.values)==null?void 0:z.Name)!=null?te:S,Ue=(J=(X=gt.server)!=null?X:(G=gt.values)==null?void 0:G.Server)!=null?J:null,Ve=(ee=Zb((Ee=(ue=gt.memberCount)!=null?ue:(se=gt.values)==null?void 0:se["Guild Member Count"])!=null?Ee:(Ne=gt.values)==null?void 0:Ne.GuildMemberCount))!=null?ee:null,dt=(De=Zb((Me=(Re=(Te=(re=gt.hofRank)!=null?re:(le=gt.values)==null?void 0:le["Hall of Fame Rank"])!=null?Te:(be=gt.values)==null?void 0:be.HoF)!=null?Re:(Le=gt.values)==null?void 0:Le.Rank)!=null?Me:(Oe=gt.values)==null?void 0:Oe["Guild Rank"]))!=null?De:null,qe=bce(Zb(gt.timestamp)),_t={id:S,name:ne,server:Ue,memberCount:Ve,hofRank:dt,lastScanDays:qe};let Dt=null;const Ot=ms(Tt,`guilds/${S}/snapshots/members_summary`),Be=await In(H,Ot,()=>mn(Ot));if(Be.exists()){const Ct=Be.data();Dt={guildId:String((Fe=Ct.guildId)!=null?Fe:S),updatedAt:String((Ie=(de=Ct.updatedAt)!=null?de:(we=gt.values)==null?void 0:we.Timestamp)!=null?Ie:""),updatedAtMs:Number((Xe=(Ae=Ct.updatedAtMs)!=null?Ae:gt.timestamp*1e3)!=null?Xe:0),count:Number((oe=Ct.count)!=null?oe:0),hash:String((fe=Ct.hash)!=null?fe:""),avgLevel:(me=Ct.avgLevel)!=null?me:null,avgTreasury:(xe=Ct.avgTreasury)!=null?xe:null,avgMine:(tt=Ct.avgMine)!=null?tt:null,avgBaseMain:(lt=Ct.avgBaseMain)!=null?lt:null,avgConBase:(Je=Ct.avgConBase)!=null?Je:null,avgSumBaseTotal:(ut=Ct.avgSumBaseTotal)!=null?ut:null,avgAttrTotal:(bt=Ct.avgAttrTotal)!=null?bt:null,avgConTotal:(ft=Ct.avgConTotal)!=null?ft:null,avgTotalStats:(mt=Ct.avgTotalStats)!=null?mt:null,members:Array.isArray(Ct.members)?Ct.members:[]}}return{guild:_t,snapshot:Dt}}finally{dn(H)}},D=T!=null?T:S.toLowerCase(),V=Jb.get(D),U=V!=null?V:F();V||Jb.set(D,U);try{const H=await U,Y=String((K=H.guild.server)!=null?K:"").trim().toLowerCase().replace(/[^a-z0-9]/g,"")||"unknown",te=`${K3}${Y}__${S}`;if(typeof window!="undefined")try{const G=C();G[S]=Y,window.localStorage.setItem(q3,JSON.stringify(G)),vL(te,H)}catch(G){}Rf.set(te,{cachedAt:Date.now(),data:H}),R||(u(H.guild),m(H.snapshot))}catch(H){R||o((H==null?void 0:H.message)||"Fehler beim Laden.")}finally{V||Jb.delete(D),R||i(!1)}}return j(),()=>{R=!0}},[e]);const w=P.useMemo(()=>{var R;return((R=h==null?void 0:h.members)!=null?R:[]).map(j=>yce(j))},[h]);if(r)return s.jsx(as,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:s.jsx("div",{className:"text-sm",style:{color:Gn.soft},children:"Lade Gildenprofil..."})});if(!c)return s.jsx(as,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:s.jsxs("div",{className:"text-sm",style:{color:Gn.soft},children:[a!=null?a:"Unbekannter Fehler.",s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:()=>n("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const k=s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"px-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${Gn.line}`,position:"relative",zIndex:2},children:[s.jsx("div",{className:"min-w-[120px]",children:s.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:Gn.tile,border:`1px solid ${Gn.line}`,color:Gn.title},children:(A=c.server)!=null?A:"S?.EU"})}),s.jsx("div",{className:"flex-1 text-center",children:s.jsx("div",{className:"font-extrabold",style:{color:Gn.title,fontSize:26,lineHeight:1.15},children:c.name})}),s.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:Gn.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:"-"," ",s.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),s.jsx("div",{style:{height:1,background:Gn.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return s.jsxs(as,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[k,s.jsx("div",{className:"px-6 pb-8",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[s.jsx("div",{className:"col-span-12 md:col-span-3",children:s.jsx(_ce,{guild:c})}),s.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[s.jsx(Gle,{guild:c,snapshot:h,emblemUrl:xp(c.id,512)||void 0,colors:Gn}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-full max-w-[980px]",children:s.jsx(noe,{guildName:c.name,server:(L=c.server)!=null?L:"-",emblemUrl:xp(c.id,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(I=c.memberCount)!=null?I:0,avgLevel:(N=h==null?void 0:h.avgLevel)!=null?N:0,totalPower:(v=h==null?void 0:h.avgTotalStats)!=null?v:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(_=c.memberCount)!=null?_:0}`]:void 0})})}),s.jsx(wce,{members:w,guildId:c.id,guildName:c.name,guildServer:c.server})]}),s.jsxs("div",{className:"col-span-12 md:col-span-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("button",{onClick:()=>x("grid"),"aria-label":"Klassenuebersicht",children:s.jsx(gc,{text:"Klassenuebersicht",tone:g==="grid"?"accent":"default"})}),s.jsx("button",{onClick:()=>x("donut"),"aria-label":"Klassenverteilung",children:s.jsx(gc,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?s.jsx(vce,{data:w,classMeta:b,onPickClass:R=>{const j=new URL(window.location.href);j.searchParams.set("tab","Uebersicht"),j.searchParams.set("class",R),window.location.href=j.toString()}}):s.jsx(xce,{data:w,classMeta:b})]})]})})]})}function wce({members:t,guildId:e,guildName:n,guildServer:r}){const[i,a]=P.useState("Uebersicht");return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:Gn.line},role:"tablist",children:["Uebersicht","Rankings","Monthly Progress","Historie"].map(o=>{const c=o===i;return s.jsx("button",{role:"tab","aria-selected":c,onClick:()=>a(o),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${c?Gn.header:"transparent"}`,background:c?"rgba(45,78,120,0.35)":"transparent",color:Gn.title},children:o},o)})}),s.jsxs(CL,{children:[i==="Uebersicht"&&s.jsx(soe,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&s.jsxs("div",{className:"text-sm",style:{color:Gn.soft},children:["Platzhalter ",s.jsx("b",{children:"Rankings"})," - Inhalt folgt."]}),i==="Monthly Progress"&&s.jsx(Zoe,{guildId:e,guildName:n,guildServer:r}),i==="Historie"&&s.jsxs("div",{className:"text-sm",style:{color:Gn.soft},children:["Platzhalter ",s.jsx("b",{children:"Historie"})," - Inhalt folgt."]})]})]})}function jce(){const{t}=Os();return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(t1,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),s.jsx(t1,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"}),s.jsx(t1,{to:"/servers/overview",title:t("servers.tiles.overview.title"),desc:t("servers.tiles.overview.subtitle")})]})]})}function t1({to:t,title:e,desc:n}){return s.jsxs(zs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Sce(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers  Rankings"}),s.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function Nce(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers  Stats"}),s.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const kce="_card_1rxdx_21",Cce="_hoverLift_1rxdx_51",Tce="_title_1rxdx_63",Ice="_body_1rxdx_89",Ece="_iconStack_1rxdx_99",cm={card:kce,hoverLift:Cce,title:Tce,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:Ice,iconStack:Ece};function Gr({title:t,padding:e="md",hover:n=!0,className:r="",children:i}){return s.jsxs("div",{className:[cm.card,cm[`pad-${e}`],n?cm.hoverLift:"",r].join(" "),children:[t?s.jsx("div",{className:cm.title,children:t}):null,s.jsx("div",{className:cm.body,children:i})]})}const Ace="_page_frkd2_1",Pce="_controlsRow_frkd2_13",Rce="_controls_frkd2_13",Lce="_controlButton_frkd2_33",Dce="_entryGrid_frkd2_63",Mce="_entryItem_frkd2_75",Fce="_nodeList_frkd2_89",Bce="_nodeChildren_frkd2_91",$ce="_nodeItem_frkd2_121",Oce="_nodeButton_frkd2_129",Vce="_nodeCard_frkd2_149",Uce="_nodeTitleRow_frkd2_157",zce="_nodeTitle_frkd2_157",Gce="_nodeToggle_frkd2_181",Hce="_nodeMeta_frkd2_207",Wce="_nodeCode_frkd2_225",Kce="_placeholder_frkd2_233",qce="_desktopOnly_frkd2_245",er={page:Ace,controlsRow:Pce,controls:Rce,controlButton:Lce,entryGrid:Dce,entryItem:Mce,nodeList:Fce,nodeChildren:Bce,nodeItem:$ce,nodeButton:Oce,nodeCard:Vce,nodeTitleRow:Uce,nodeTitle:zce,nodeToggle:Gce,nodeMeta:Hce,nodeCode:Wce,placeholder:Kce,desktopOnly:qce};function Et(t,e,n){const r=[];for(let i=e;i<=n;i+=1)r.push(`${t}${i}`);return r}function Qce(t){const e=/^([A-Z]+)(\d+)$/.exec(t);return e?`${e[1]} ${e[2]}`:t}function Yce(t){return{code:t,displayName:Qce(t),type:"origin",tier:0,mergedFrom:[]}}function Xce(t,e){return{code:t,displayName:e!=null?e:t,type:"other",tier:0,mergedFrom:[]}}function Gs(t,e,n,r){return{code:t,displayName:r!=null?r:t,type:"fusion",tier:n,mergedFrom:e}}const Ls={};function bn(t){for(const e of t)Ls[e]=Yce(e)}function Jce(t){for(const e of t)Ls[e]=Xce(e)}bn(Et("EU",1,23));bn(Et("US",1,10));bn(Et("BR",1,2));bn(Et("CL",1,2));bn(["CA1","MX1"]);bn(Et("AE",1,2));bn(Et("DK",1,2));bn(Et("NL",1,3));bn(Et("SE",1,2));bn(Et("UK",1,2));bn(["IN1","JP1","RO1","RU1"]);bn(Et("IT",1,8));bn(Et("GR",1,6));bn(Et("PT",1,8));bn(Et("TR",1,6));bn(Et("ES",1,12));bn(Et("FR",1,15));bn(Et("PL",1,40));bn(Et("DE",1,43));bn(Et("INT",1,60));bn(Et("CZ",1,35));bn(Et("SK",1,3));bn(Et("HU",1,20));Jce(["tv2","123playgames","minijuegos","rtl","rtl2","sevengames","wp","buffed","gamona","xchar","ingame"]);Ls.F1=Gs("F1",[...Et("BR",1,2),"CA1",...Et("CL",1,2),"MX1",...Et("US",1,10)],1);Ls.F2=Gs("F2",[...Et("AE",1,2),...Et("DK",1,2),"tv2","IN1","JP1",...Et("NL",1,3),"RO1","RU1",...Et("SE",1,2),...Et("UK",1,2)],1);Ls.F3=Gs("F3",[...Et("IT",1,8)],1);Ls.F4=Gs("F4",[...Et("GR",1,6),"123playgames",...Et("PT",1,8),...Et("TR",1,6)],1);Ls.F5=Gs("F5",[...Et("ES",1,12),"minijuegos"],1);Ls.F6=Gs("F6",[...Et("FR",1,13)],1);Ls.F7=Gs("F7",[...Et("PL",7,17)],1);Ls.F8=Gs("F8",[...Et("DE",5,12)],1);Ls.F9=Gs("F9",[...Et("DE",25,37)],1);Ls.F10=Gs("F10",[...Et("PL",18,33)],1);Ls.F11=Gs("F11",[...Et("DE",13,24),"rtl","sevengames"],1);Ls.F12=Gs("F12",[...Et("INT",1,5)],1);Ls.F13=Gs("F13",[...Et("PL",1,6),"wp"],1);Ls.F14=Gs("F14",[...Et("INT",15,21)],1);Ls.F15=Gs("F15",[...Et("CZ",17,28),"SK2","SK3"],1);Ls.F16=Gs("F16",[...Et("CZ",6,16),"SK1"],1);Ls.F17=Gs("F17",[...Et("DE",1,4),"buffed","rtl2","gamona","xchar","ingame"],1);Ls.F18=Gs("F18",[...Et("CZ",1,5)],1);Ls.F19=Gs("F19",[...Et("HU",1,15)],1);Ls.F20=Gs("F20",[...Et("INT",6,14),"CZ29","HU16","PL34"],1);Ls.F21=Gs("F21",[...Et("INT",22,30),"CZ30","DE38","PL35"],1);Ls.F22=Gs("F22",[...Et("INT",31,37),"CZ31","CZ32","DE39","DE40","HU17","PL36","PL37"],1);Ls.F23=Gs("F23",[...Et("INT",38,45),"FR14","FR15","CZ33","CZ34","DE41","DE42","HU18","HU19","PL38","PL39"],1);Ls.F24=Gs("F24",[...Et("INT",46,50)],1);Ls.F25=Gs("F25",[...Et("INT",51,52),"CZ35","DE43","HU20","PL40"],1);Ls.F26=Gs("F26",[...Et("INT",53,56)],1);Ls.F27=Gs("F27",[...Et("INT",57,60)],1);Ls.MAERWYNN=Gs("MAERWYNN",["F1","F2","F3","F4","F5"],2,"Maerwynn");Ls.BLACK_FOREST=Gs("BLACK_FOREST",["F7","F10","F13"],2,"Black Forest");Ls.GRANOGRIM=Gs("GRANOGRIM",["F15","F16","F18"],2,"Granogrim");const Zce=["MAERWYNN","BLACK_FOREST","GRANOGRIM",...Et("F",1,27),...Et("EU",1,23)],ede={entrypoints:Zce,nodes:Ls},Y3=(t,e)=>{const n=e[t];return n?{node:n,isPlaceholder:!1,key:n.code}:{node:{code:t,displayName:t,type:"other",tier:0,mergedFrom:[]},isPlaceholder:!0,key:`placeholder:${t}`}},tde=(t,e)=>{var i,a;const n=new Set,r=[...t];for(;r.length;){const o=r.pop();if(!o||n.has(o))continue;n.add(o),((a=(i=e[o])==null?void 0:i.mergedFrom)!=null?a:[]).forEach(u=>{n.has(u)||r.push(u)})}return n};function X3({node:t,hasChildren:e,isExpanded:n,isPlaceholder:r,onToggle:i}){return s.jsx("button",{type:"button",onClick:i,className:er.nodeButton,"aria-expanded":e?n:void 0,children:s.jsxs(Gr,{hover:!0,className:[er.nodeCard,r?er.placeholder:""].join(" "),children:[s.jsxs("div",{className:er.nodeTitleRow,children:[s.jsx("div",{className:er.nodeTitle,children:t.displayName||t.code}),e?s.jsx("span",{className:er.nodeToggle,"aria-hidden":!0,children:n?"-":"+"}):null]}),s.jsx("div",{className:er.nodeMeta,children:s.jsx("span",{className:er.nodeCode,children:t.code})})]})})}function sde(){const{t}=Os(),{entrypoints:e,nodes:n}=ede,[r,i]=q.useState(()=>new Set),a=h=>{i(m=>{const g=new Set(m);return g.has(h)?g.delete(h):g.add(h),g})},o=()=>{i(tde(e,n))},c=()=>{i(new Set)},u=(h,m)=>{var A;if(m.has(h))return null;const g=Y3(h,n),x=(A=g.node.mergedFrom)!=null?A:[],b=x.length>0,w=r.has(h),k=new Set(m);return k.add(h),s.jsxs("li",{className:er.nodeItem,children:[s.jsx(X3,{node:g.node,hasChildren:b,isExpanded:w,isPlaceholder:g.isPlaceholder,onToggle:()=>a(h)}),b&&w?s.jsx("ul",{className:er.nodeChildren,children:x.map(L=>u(L,k))}):null]},g.key)};return s.jsxs("div",{className:er.page,children:[s.jsx("div",{className:er.controlsRow,children:s.jsxs("div",{className:`${er.controls} ${er.desktopOnly}`,children:[s.jsx("button",{type:"button",onClick:o,className:er.controlButton,children:t("servers.overview.expandAll")}),s.jsx("button",{type:"button",onClick:c,className:er.controlButton,children:t("servers.overview.collapseAll")})]})}),s.jsx("div",{className:er.entryGrid,children:e.map(h=>{var w;const m=Y3(h,n),g=(w=m.node.mergedFrom)!=null?w:[],x=g.length>0,b=r.has(h);return s.jsxs("div",{className:er.entryItem,children:[s.jsx(X3,{node:m.node,hasChildren:x,isExpanded:b,isPlaceholder:m.isPlaceholder,onToggle:()=>a(h)}),x&&b?s.jsx("ul",{className:er.nodeList,children:g.map(k=>u(k,new Set([h])))}):null]},m.key)})})]})}function nde(){const{t}=Os();return s.jsx(as,{title:t("servers.overview.pageTitle"),centerFramed:!1,padded:!0,children:s.jsx(sde,{})})}const dr={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function J3({children:t,style:e}){return s.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function rde({size:t=36}){return s.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:s.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function fu({label:t,value:e}){return s.jsxs("div",{style:{background:dr.tileAlt,border:`1px solid ${dr.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[s.jsx("div",{style:{fontSize:12,color:dr.textSoft,marginBottom:4},children:t}),s.jsx("div",{style:{fontSize:22,color:dr.title,fontWeight:700},children:e})]})}function ide(t){const e=t.trim(),n=e.toUpperCase(),r=e.toLowerCase(),i=n.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let o="";const c=n.match(/^([A-Z]{2})(\d{1,3})$/);if(c){const u=c[1],h=String(parseInt(c[2],10)),m=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();o=`s${h}.sfgame.${m}`}return Array.from(new Set([e,n,r,i,a,o].filter(Boolean)))}function s1(){var k,A,L,I;const t=Nx(),e=Wr(),n=qn(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=P.useState(!0),[o,c]=P.useState(null),[u,h]=P.useState(null),[m,g]=P.useState(null);P.useEffect(()=>{let N=!1;async function v(){const _=Mn("ServerProfile:load");a(!0),c(null),h(null),g(null);try{const R=r.trim();if(!R)throw new Error("Kein Server gewhlt.");const j=ms(Tt,`servers/${R}`),S=await In(_,j,()=>mn(j));if(S.exists()){N||(h(S.id),g(S.data()));return}const C=ol(Tt,"servers"),M=ide(R),T=[];for(const U of M)T.push(Tn(_,C,()=>Cn(Dn(C,ji("code","==",U),pr(1))))),T.push(Tn(_,C,()=>Cn(Dn(C,ji("displayName","==",U),pr(1))))),T.push(Tn(_,C,()=>Cn(Dn(C,ji("host","==",U),pr(1)))));const F=await Promise.allSettled(T);let D=null,V=null;for(const U of F){if(U.status!=="fulfilled")continue;const K=U.value;if(!K.empty){const H=K.docs[0];D=H.id,V=H.data();break}}if(!D||!V)throw new Error("Server nicht gefunden.");N||(h(D),g(V),D!==R&&e(`/server/${encodeURIComponent(D)}`,{replace:!0,state:{from:n.pathname}}))}catch(R){N||c((R==null?void 0:R.message)||"Fehler beim Laden.")}finally{dn(_),N||a(!1)}}return v(),()=>{N=!0}},[r,e,n.pathname]);const x=P.useMemo(()=>s.jsxs("div",{style:{padding:24,color:dr.textSoft},children:[o!=null?o:"Unbekannter Fehler.",s.jsx("div",{style:{marginTop:12},children:s.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:dr.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[o,e]);if(i)return s.jsx(as,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:s.jsx("div",{style:{padding:16,color:dr.textSoft},children:"Lade Serverprofil"})});if(!m)return s.jsx(as,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:x});const b=m.displayName||m.code||u||r,w=m.active===!0?"Aktiv":m.active===!1?"Inaktiv":"";return s.jsxs(as,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[s.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${dr.line}`},children:s.jsxs(J3,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[s.jsx(rde,{size:36}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:18,color:dr.title,fontWeight:700},children:b}),s.jsxs("div",{style:{fontSize:12,color:dr.textSoft},children:[m.host||"","  ",m.region||"","  ",((k=m.type)==null?void 0:k.toUpperCase())||""]})]})]})}),s.jsxs(J3,{style:{paddingTop:12,paddingBottom:24},children:[s.jsxs("div",{style:{background:dr.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${dr.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:dr.title,fontSize:24,fontWeight:800},children:b}),s.jsxs("div",{style:{marginTop:6,color:dr.textSoft,fontSize:13},children:[m.host||"","  ",m.region||"","  ",((A=m.type)==null?void 0:A.toUpperCase())||""]})]}),s.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[s.jsxs("span",{style:{color:dr.textSoft},children:["Status: ",w]}),s.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:m.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[s.jsx(fu,{label:"Code",value:m.code||""}),s.jsx(fu,{label:"Host",value:m.host||""}),s.jsx(fu,{label:"Region",value:m.region||""}),s.jsx(fu,{label:"Typ",value:((L=m.type)==null?void 0:L.toUpperCase())||""}),s.jsx(fu,{label:"Numeric ID",value:(I=m.numericId)!=null?I:""}),s.jsx(fu,{label:"Status",value:w})]}),s.jsxs("div",{style:{marginTop:16,background:dr.tileAlt,padding:15,borderRadius:12,border:`1px solid ${dr.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:dr.textSoft},children:["Platzhalter ",s.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const ade="_page_177kv_1",ode="_sectionCard_177kv_15",lde="_identityCard_177kv_29",cde="_identityGrid_177kv_39",dde="_profileName_177kv_63",ude="_identityMeta_177kv_77",hde="_mainCharacter_177kv_95",mde="_characterHeader_177kv_117",pde="_characterTitle_177kv_131",gde="_characterSubtitle_177kv_143",fde="_classIcon_177kv_153",vde="_metaGrid_177kv_181",xde="_metaLabel_177kv_193",yde="_metaValue_177kv_207",bde="_portrait_177kv_217",_de="_sectionHeader_177kv_245",wde="_sectionHint_177kv_265",jde="_bioText_177kv_275",Sde="_tagGroups_177kv_295",Nde="_tagGroupLabel_177kv_309",kde="_tagList_177kv_323",Cde="_tag_177kv_295",Tde="_showcaseGrid_177kv_353",Ide="_characterCard_177kv_365",Ede="_characterCardHeader_177kv_385",Ade="_characterName_177kv_399",Pde="_badge_177kv_411",Rde="_characterMeta_177kv_433",Lde="_characterStats_177kv_449",Dde="_statGrid_177kv_465",Mde="_statTile_177kv_477",Fde="_statLabel_177kv_491",Bde="_statValue_177kv_505",$de="_statSubtext_177kv_519",Ode="_emptyState_177kv_531",Vde="_recordsHighlights_177kv_551",Ude="_highlightCard_177kv_565",zde="_recordType_177kv_579",Gde="_recordTitle_177kv_593",Hde="_timeline_177kv_607",Wde="_timelineItem_177kv_625",Kde="_timelineBullet_177kv_635",qde="_timelineContent_177kv_653",Qde="_timelineTitle_177kv_661",Yde="_timelineMeta_177kv_673",Xde="_achievementsHighlights_177kv_685",Jde="_achievementCard_177kv_699",Zde="_achievementIcon_177kv_723",eue="_achievementName_177kv_747",tue="_achievementDesc_177kv_759",sue="_achievementTier_177kv_771",nue="_achievementDate_177kv_785",rue="_achievementsGrid_177kv_795",iue="_achievementBadge_177kv_807",aue="_tierGold_177kv_831",oue="_tierSilver_177kv_839",lue="_tierBronze_177kv_847",st={page:ade,sectionCard:ode,identityCard:lde,identityGrid:cde,profileName:dde,identityMeta:ude,mainCharacter:hde,characterHeader:mde,characterTitle:pde,characterSubtitle:gde,classIcon:fde,metaGrid:vde,metaLabel:xde,metaValue:yde,portrait:bde,sectionHeader:_de,sectionHint:wde,bioText:jde,tagGroups:Sde,tagGroupLabel:Nde,tagList:kde,tag:Cde,showcaseGrid:Tde,characterCard:Ide,characterCardHeader:Ede,characterName:Ade,badge:Pde,characterMeta:Rde,characterStats:Lde,statGrid:Dde,statTile:Mde,statLabel:Fde,statValue:Bde,statSubtext:$de,emptyState:Ode,recordsHighlights:Vde,highlightCard:Ude,recordType:zde,recordTitle:Gde,timeline:Hde,timelineItem:Wde,timelineBullet:Kde,timelineContent:qde,timelineTitle:Qde,timelineMeta:Yde,achievementsHighlights:Xde,achievementCard:Jde,achievementIcon:Zde,achievementName:eue,achievementDesc:tue,achievementTier:sue,achievementDate:nue,achievementsGrid:rue,achievementBadge:iue,tierGold:aue,tierSilver:oue,tierBronze:lue},cue={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},due=1e3*60*60*24,Z3={gold:3,silver:2,bronze:1};function uue(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const n=Date.now()-e;return n<0?0:Math.floor(n/due)}function Lf(t){const e=new Date(t);return Number.isNaN(e.getTime())?Yt("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function hue(){const{profileId:t}=Nx(),e=cue,n=uue(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(m=>m.type==="record").slice(0,3),a=[...e.achievements].sort((m,g)=>Z3[g.tier]-Z3[m.tier]).slice(0,3),o=[{label:Yt("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:Yt("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:Yt("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:Yt("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],c=n==null?Yt("profile.public.identity.dateUnknown"):n===0?Yt("profile.public.identity.lastScanToday"):`${n} ${Yt("profile.public.identity.daysAgoSuffix")}`,u=Yt("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):Yt("profile.public.identity.unknownValue");return s.jsx(as,{title:Yt("profile.public.title"),subtitle:Yt("profile.public.subtitle"),centerFramed:!1,padded:!0,children:s.jsxs("div",{className:st.page,children:[s.jsx("section",{className:`${st.sectionCard} ${st.identityCard}`,children:s.jsxs("div",{className:st.identityGrid,children:[s.jsxs("div",{children:[s.jsx("h1",{className:st.profileName,children:e.profileUser.displayName}),s.jsxs("div",{className:st.identityMeta,children:[s.jsxs("span",{children:[Yt("profile.public.identity.profileIdLabel"),": ",t!=null?t:Yt("profile.public.identity.unknownValue")]}),s.jsxs("span",{children:[Yt("profile.public.identity.lastScanLabel"),": ",c]})]}),s.jsxs("article",{className:st.mainCharacter,children:[s.jsxs("div",{className:st.characterHeader,children:[s.jsxs("div",{children:[s.jsx("div",{className:st.metaLabel,children:Yt("profile.public.identity.mainCharacterLabel")}),s.jsx("div",{className:st.characterTitle,children:e.mainCharacter.name}),s.jsxs("div",{className:st.characterSubtitle,children:[e.mainCharacter.class,"  ",Yt("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),s.jsx("div",{className:st.classIcon,children:e.mainCharacter.class.charAt(0)})]}),s.jsxs("div",{className:st.metaGrid,children:[s.jsxs("div",{children:[s.jsx("div",{className:st.metaLabel,children:Yt("profile.public.identity.serverLabel")}),s.jsx("div",{className:st.metaValue,children:e.mainCharacter.server})]}),s.jsxs("div",{children:[s.jsx("div",{className:st.metaLabel,children:Yt("profile.public.identity.guildLabel")}),s.jsx("div",{className:st.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),s.jsx("div",{className:st.portrait,children:u})]})}),s.jsxs("section",{className:st.sectionCard,children:[s.jsx("div",{className:st.sectionHeader,children:s.jsx("span",{children:Yt("profile.public.bio.title")})}),s.jsx("p",{className:st.bioText,children:e.bio}),s.jsxs("div",{className:st.tagGroups,children:[s.jsxs("div",{children:[s.jsx("div",{className:st.tagGroupLabel,children:Yt("profile.public.bio.languagesLabel")}),s.jsx("div",{className:st.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(m=>s.jsx("span",{className:st.tag,children:m.toUpperCase()},m)):s.jsx("span",{className:st.tag,children:Yt("profile.public.identity.unknownValue")})})]}),s.jsxs("div",{children:[s.jsx("div",{className:st.tagGroupLabel,children:Yt("profile.public.bio.rolesLabel")}),s.jsx("div",{className:st.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(m=>s.jsx("span",{className:st.tag,children:Yt(`profile.public.roles.${m}`)},m)):s.jsx("span",{className:st.tag,children:Yt("profile.public.identity.unknownValue")})})]})]})]}),s.jsxs("section",{className:st.sectionCard,children:[s.jsxs("div",{className:st.sectionHeader,children:[s.jsx("span",{children:Yt("profile.public.showcase.title")}),s.jsx("span",{className:st.sectionHint,children:Yt("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?s.jsx("div",{className:st.emptyState,children:Yt("profile.public.showcase.empty")}):s.jsx("div",{className:st.showcaseGrid,children:e.showcaseCharacters.map(m=>s.jsxs("article",{className:st.characterCard,children:[s.jsxs("div",{className:st.characterCardHeader,children:[s.jsxs("div",{children:[s.jsx("div",{className:st.characterName,children:m.name}),s.jsxs("div",{className:st.characterMeta,children:[s.jsx("span",{children:m.class}),s.jsxs("span",{children:[Yt("profile.public.identity.levelShort")," ",m.level]})]})]}),s.jsx("span",{className:st.badge,children:Yt(`profile.public.showcase.tags.${m.tag}`)})]}),s.jsxs("div",{className:st.characterMeta,children:[s.jsx("span",{children:m.server}),s.jsx("span",{children:m.guildName})]}),s.jsxs("div",{className:st.characterStats,children:[s.jsxs("span",{children:[Yt("profile.public.showcase.scrapbookLabel")," ",m.scrapbookPercent,"%"]}),s.jsxs("span",{children:[Yt("profile.public.showcase.highlightLabel"),": ",m.highlightProgress]})]})]},m.id))})]}),s.jsxs("section",{className:st.sectionCard,children:[s.jsx("div",{className:st.sectionHeader,children:s.jsx("span",{children:Yt("profile.public.stats.title")})}),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:st.statGrid,children:o.map(m=>s.jsxs("article",{className:st.statTile,children:[s.jsx("div",{className:st.statLabel,children:m.label}),s.jsx("div",{className:st.statValue,children:m.value})]},m.label))}),s.jsxs("div",{className:st.statSubtext,children:[Yt("profile.public.stats.topServersLabel"),": ",h]}),s.jsxs("div",{className:st.statSubtext,children:[Yt("profile.public.stats.firstScanLabel"),": ",Lf(e.scanStats.firstScanAt)]})]})]}),s.jsxs("section",{className:st.sectionCard,children:[s.jsx("div",{className:st.sectionHeader,children:s.jsx("span",{children:Yt("profile.public.records.title")})}),e.recordsAndMilestones.length===0?s.jsx("div",{className:st.emptyState,children:Yt("profile.public.records.empty")}):s.jsxs(s.Fragment,{children:[i.length>0&&s.jsx("div",{className:st.recordsHighlights,children:i.map(m=>s.jsxs("article",{className:st.highlightCard,children:[s.jsx("div",{className:st.recordType,children:Yt(`profile.public.records.type.${m.type}`)}),s.jsx("div",{className:st.recordTitle,children:m.title}),s.jsxs("div",{className:st.timelineMeta,children:[Lf(m.when),"  ",m.context]})]},m.id))}),s.jsx("ul",{className:st.timeline,children:e.recordsAndMilestones.map(m=>s.jsxs("li",{className:st.timelineItem,children:[s.jsx("div",{className:st.timelineBullet}),s.jsxs("div",{className:st.timelineContent,children:[s.jsx("div",{className:st.timelineTitle,children:m.title}),s.jsxs("div",{className:st.timelineMeta,children:[Lf(m.when),"  ",m.context]})]})]},m.id))})]})]}),s.jsxs("section",{className:st.sectionCard,children:[s.jsxs("div",{className:st.sectionHeader,children:[s.jsx("span",{children:Yt("profile.public.achievements.title")}),e.achievements.length>0&&s.jsx("span",{className:st.sectionHint,children:Yt("profile.public.achievements.highlights")})]}),e.achievements.length===0?s.jsx("div",{className:st.emptyState,children:Yt("profile.public.achievements.empty")}):s.jsxs(s.Fragment,{children:[a.length>0&&s.jsx("div",{className:st.achievementsHighlights,children:a.map(m=>s.jsxs("article",{className:st.achievementCard,children:[s.jsx("div",{className:[st.achievementIcon,m.tier==="gold"?st.tierGold:m.tier==="silver"?st.tierSilver:st.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),s.jsx("div",{className:st.achievementTier,children:Yt(`profile.public.achievements.tiers.${m.tier}`)}),s.jsx("div",{className:st.achievementName,children:Yt(m.nameKey)}),s.jsx("div",{className:st.achievementDesc,children:Yt(m.descriptionKey)}),m.unlockedAt&&s.jsx("div",{className:st.achievementDate,children:Lf(m.unlockedAt)})]},m.id))}),s.jsx("div",{className:st.achievementsGrid,children:e.achievements.map(m=>s.jsxs("article",{className:st.achievementBadge,children:[s.jsx("div",{className:[st.achievementIcon,m.tier==="gold"?st.tierGold:m.tier==="silver"?st.tierSilver:st.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),s.jsx("div",{className:st.achievementName,children:Yt(m.nameKey)}),s.jsx("div",{className:st.achievementDesc,children:Yt(m.descriptionKey)})]},m.id))})]})]})]})})}const mue="_wrap_k6pqt_1",pue="_centerLogoWrap_k6pqt_21",gue="_centerLogoLink_k6pqt_37",fue="_centerLogo_k6pqt_21",vue="_arc_k6pqt_55",xue="_left_k6pqt_57",yue="_right_k6pqt_59",bue="_sub_k6pqt_61",_ue="_full_k6pqt_63",wue="_arcItem_k6pqt_65",jue="_iconBtn_k6pqt_71",Sue="_active_k6pqt_125",Nue="_iconImg_k6pqt_135",kue="_placeholderIcon_k6pqt_139",Cue="_placeholderText_k6pqt_157",Tue="_iconLabel_k6pqt_161",kr={wrap:mue,centerLogoWrap:pue,centerLogoLink:gue,centerLogo:fue,arc:vue,left:xue,right:yue,sub:bue,full:_ue,arcItem:wue,iconBtn:jue,active:Sue,iconImg:Nue,placeholderIcon:kue,placeholderText:Cue,iconLabel:Tue},Iue=({to:t,label:e,icon:n,variant:r="main"})=>{const{search:i}=qn();let a=!1;try{const o=new URLSearchParams(i),c=o.get("tab"),u=o.get("sub"),h=o.get("sub2"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),x=m.get("sub"),b=m.get("sub2");r==="main"?a=c===g:r==="sub"?a=c===g&&!!x&&u===x:a=c===g&&!!x&&u===x&&!!b&&h===b}catch(o){a=!1}return s.jsxs(zs,{to:t,"aria-label":e,className:[kr.iconBtn,a?kr.active:""].join(" "),title:e,replace:!1,children:[n?s.jsx("img",{src:n,alt:"",className:kr.iconImg}):s.jsx("div",{className:kr.placeholderIcon,"aria-hidden":"true",children:s.jsx("span",{className:kr.placeholderText,children:e.slice(0,2).toUpperCase()})}),s.jsx("div",{className:kr.iconLabel,children:e})]})},Df=({items:t,side:e,anchorSide:n,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:o=440,superOffset:c=660})=>{if((e==="sub"||e==="sub2")&&!n)return null;const u=P.useMemo(()=>{const g=t.length;if(g===0)return[];let x=-90,b=90;e==="left"?(x=90,b=270):e==="sub"||e==="sub2"?n==="left"?(x=90,b=270):(x=-90,b=90):e==="full"&&(x=0,b=360);const w=(b-x)/(g+1),k=r?190:250;return t.map((A,L)=>{const N=(x+w*(L+1))*Math.PI/180;return{it:A,x:Math.cos(N)*k,y:Math.sin(N)*k}})},[t,e,n,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=n==="left"?`calc(50% - ${o}px)`:`calc(50% + ${o}px)`:e==="sub2"&&(g.left=n==="left"?`calc(50% - ${c}px)`:`calc(50% + ${c}px)`),g})(),m=e==="sub"?"sub":e==="sub2"?"sub2":"main";return s.jsx("div",{className:[kr.arc,e==="left"?kr.left:"",e==="right"?kr.right:"",e==="sub"?kr.sub:"",e==="sub2"?kr.sub2:"",e==="full"?kr.full:""].join(" "),style:h,children:u.map(({it:g,x,y:b})=>s.jsx("div",{className:kr.arcItem,style:{transform:`translate(${x}px, ${b}px)`},children:s.jsx(Iue,{to:g.to,label:g.label,icon:g.icon,variant:m})},g.key))})},Eue=({logoSrc:t,categories:e})=>{const[n]=sr(),r=n.get("tab")||null,i=n.get("sub")||null;n.get("sub2");const a=P.useMemo(()=>e.find(N=>N.key===r)||null,[e,r]),o=(a==null?void 0:a.sub)||[],c=P.useMemo(()=>o.find(N=>N.key===i)||null,[o,i]),u=(c==null?void 0:c.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",m=P.useRef(null),[g,x]=P.useState(!1),[b,w]=P.useState(220),[k,A]=P.useState(440),[L,I]=P.useState(660);return P.useLayoutEffect(()=>{(()=>{var M,T;const _=((T=(M=m.current)==null?void 0:M.getBoundingClientRect().width)!=null?T:380)/2,j=Math.round(_+60),S=Math.round(j+220),C=Math.round(S+220);w(j),A(S),I(C),x(!0)})()},[]),P.useEffect(()=>{let N=0,v=null,_={main:b,out:k,sup:L};const R=()=>{v!=null&&window.clearTimeout(v),v=window.setTimeout(()=>{N=requestAnimationFrame(()=>{var K,H;const S=((H=(K=m.current)==null?void 0:K.getBoundingClientRect().width)!=null?H:380)/2,M=Math.round(S+60),T=Math.round(M+220),F=Math.round(T+220),D=Math.abs(M-_.main),V=Math.abs(T-_.out),U=Math.abs(F-_.sup);D>1&&w(M),V>1&&A(T),U>1&&I(F),_={main:M,out:T,sup:F}})},120)};return window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R),v!=null&&window.clearTimeout(v),N&&cancelAnimationFrame(N)}},[b,k,L]),s.jsxs("div",{className:kr.wrap,children:[s.jsx("div",{className:kr.centerLogoWrap,children:s.jsx(zs,{to:"/guidehub",className:kr.centerLogoLink,"aria-label":"Guide Hub Home",children:s.jsx("img",{ref:m,src:t,alt:"Guide Hub",className:kr.centerLogo})})}),g&&s.jsxs(s.Fragment,{children:[s.jsx(Df,{items:e.filter(N=>N.side==="left").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"left",variant:"main",arcOffset:b}),s.jsx(Df,{items:e.filter(N=>N.side==="right").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"right",variant:"main",arcOffset:b}),h&&o.length>0&&s.jsx(Df,{items:o.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:k,compact:!0}),h&&u.length>0&&s.jsx(Df,{items:u.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:L,compact:!0})]})]})},hd=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]}],Aue="_topWrap_1vr4p_1",Pue="_divider_1vr4p_19",Rue="_contentArea_1vr4p_53",Lue="_placeholder_1vr4p_65",Due="_placeholderTitle_1vr4p_79",Mue="_placeholderText_1vr4p_93",vu={topWrap:Aue,divider:Pue,contentArea:Rue,placeholder:Lue,placeholderTitle:Due,placeholderText:Mue};function Ed({title:t}){return s.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[s.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),s.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const Fue=()=>s.jsx(Ed,{title:"Game Features"});function En({title:t}){return s.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[s.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),s.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const Bue=()=>s.jsx(En,{title:"Progression"}),$ue=()=>s.jsx(En,{title:"Hellevator"}),Oue=()=>s.jsx(En,{title:"Legendary Dungeon"}),Vue=()=>s.jsx(En,{title:"Events"}),Uue=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],zue="_grid_1amcc_3",Gue="_tileBtn_1amcc_45",Hue="_wrap_1amcc_87",Wue="_headerBar_1amcc_99",Kue="_title_1amcc_117",dm={grid:zue,tileBtn:Gue,wrap:Hue,headerBar:Wue,title:Kue};function que(){const[t,e]=sr(),n=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return s.jsxs("div",{className:dm.wrap,children:[s.jsx("div",{className:dm.headerBar,children:s.jsx("h2",{className:dm.title,children:"Calculators"})}),s.jsx("div",{className:dm.grid,children:Uue.map(r=>s.jsx("button",{className:dm.tileBtn,onClick:()=>n(r.slug),"aria-label":r.title,children:s.jsx(Gr,{title:r.title,padding:"md",hover:!0,children:s.jsx(s.Fragment,{children:" "})})},r.slug))})]})}const Que=()=>s.jsx(En,{title:"Infographics (Dropdown inside page)"}),Yue=()=>s.jsx(En,{title:"Class book"}),Xue=()=>s.jsx(En,{title:"Dungeons"}),Jue=()=>s.jsx(Ed,{title:"Fortress"}),Zue=()=>s.jsx(Ed,{title:"Fortress Calculator"}),ehe="_wrap_188zo_7",the="_headerBar_188zo_21",she="_title_188zo_39",nhe="_meta_188zo_55",rhe="_description_188zo_67",ihe="_contentWrapper_188zo_83",ahe="_tableSection_188zo_97",ohe="_table_188zo_97",lhe="_infoBox_188zo_151",che="_sectionTitle_188zo_165",dhe="_divider_188zo_181",uhe="_uwWrap_188zo_239",hhe="_uwCard_188zo_251",mhe="_uwTitle_188zo_271",phe="_uwTableWrap_188zo_283",ghe="_uwTable_188zo_283",fhe="_uwTh_188zo_303",vhe="_uwTd_188zo_305",xhe="_uwTdNumber_188zo_333",an={wrap:ehe,headerBar:the,title:she,meta:nhe,description:rhe,contentWrapper:ihe,tableSection:ahe,table:ohe,infoBox:lhe,sectionTitle:che,divider:dhe,uwWrap:uhe,uwCard:hhe,uwTitle:mhe,uwTableWrap:phe,uwTable:ghe,uwTh:fhe,uwTd:vhe,uwTdNumber:xhe};function TL({variant:t="guidehub"}){const e=t==="underworld",n=e?an.uwTh:void 0,r=e?`${an.uwTh} ${an.uwTdNumber}`:void 0,i=e?an.uwTd:void 0,a=e?`${an.uwTd} ${an.uwTdNumber}`:void 0,o=s.jsx("div",{className:e?an.uwTableWrap:void 0,children:s.jsxs("table",{className:e?an.uwTable:an.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:n,children:"Building"}),s.jsx("th",{className:r,children:"Level"}),s.jsx("th",{className:r,children:"Gold Cost"}),s.jsx("th",{className:r,children:"Shroom Cost"}),s.jsx("th",{className:r,children:"Wood Cost"}),s.jsx("th",{className:r,children:"Stone Cost"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"35"}),s.jsx("td",{className:a,children:"12"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"20"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"150"}),s.jsx("td",{className:a,children:"50"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"138"}),s.jsx("td",{className:a,children:"46"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"30"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"440"}),s.jsx("td",{className:a,children:"140"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"15"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"406"}),s.jsx("td",{className:a,children:"129"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"40"}),s.jsx("td",{className:a,children:"12"}),s.jsx("td",{className:a,children:"1,100"}),s.jsx("td",{className:a,children:"333"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"20"}),s.jsx("td",{className:a,children:"12"}),s.jsx("td",{className:a,children:"1,015"}),s.jsx("td",{className:a,children:"308"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"50"}),s.jsx("td",{className:a,children:"24"}),s.jsx("td",{className:a,children:"2,500"}),s.jsx("td",{className:a,children:"800"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"25"}),s.jsx("td",{className:a,children:"24"}),s.jsx("td",{className:a,children:"2,308"}),s.jsx("td",{className:a,children:"738"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"60"}),s.jsx("td",{className:a,children:"36"}),s.jsx("td",{className:a,children:"6,000"}),s.jsx("td",{className:a,children:"2,000"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Laborer's Quarter"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"30"}),s.jsx("td",{className:a,children:"36"}),s.jsx("td",{className:a,children:"5,538"}),s.jsx("td",{className:a,children:"1,849"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"7"}),s.jsx("td",{className:a,children:"70"}),s.jsx("td",{className:a,children:"48"}),s.jsx("td",{className:a,children:"13,417"}),s.jsx("td",{className:a,children:"4,433"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress"}),s.jsx("td",{className:a,children:"8"}),s.jsx("td",{className:a,children:"80"}),s.jsx("td",{className:a,children:"78"}),s.jsx("td",{className:a,children:"27,200"}),s.jsx("td",{className:a,children:"9,280"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"720"}),s.jsx("td",{className:a,children:"240"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"1,408"}),s.jsx("td",{className:a,children:"448"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"2,640"}),s.jsx("td",{className:a,children:"800"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"4,800"}),s.jsx("td",{className:a,children:"1,536"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"9,600"}),s.jsx("td",{className:a,children:"3,200"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Hall of Knight"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"18,400"}),s.jsx("td",{className:a,children:"6,080"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Gem Mine"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"15"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"50"}),s.jsx("td",{className:a,children:"17"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Treasury"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"25"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"40"}),s.jsx("td",{className:a,children:"13"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"0"}),s.jsx("td",{className:a,children:"20"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"30"}),s.jsx("td",{className:a,children:"20"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"88"}),s.jsx("td",{className:a,children:"56"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"8"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"220"}),s.jsx("td",{className:a,children:"133"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Woodcutter"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"21"}),s.jsx("td",{className:a,children:"500"}),s.jsx("td",{className:a,children:"320"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"22"}),s.jsx("td",{className:a,children:"0"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"6"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"90"}),s.jsx("td",{className:a,children:"16"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"9"}),s.jsx("td",{className:a,children:"5"}),s.jsx("td",{className:a,children:"264"}),s.jsx("td",{className:a,children:"45"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Quarry"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"12"}),s.jsx("td",{className:a,children:"10"}),s.jsx("td",{className:a,children:"660"}),s.jsx("td",{className:a,children:"107"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Barracks"}),s.jsx("td",{className:a,children:"1"}),s.jsx("td",{className:a,children:"4"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"20"}),s.jsx("td",{className:a,children:"14"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Barracks"}),s.jsx("td",{className:a,children:"2"}),s.jsx("td",{className:a,children:"8"}),s.jsx("td",{className:a,children:"3"}),s.jsx("td",{className:a,children:"82"}),s.jsx("td",{className:a,children:"55"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Total cost"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"577"}),s.jsx("td",{className:a,children:"363"}),s.jsx("td",{className:a,children:"99,881"}),s.jsx("td",{className:a,children:"33,218"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Fortress Pack ressources"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"300"}),s.jsx("td",{className:a,children:"100,000"}),s.jsx("td",{className:a,children:"50,000"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:i,children:"Left over"}),s.jsx("td",{className:a,children:"-"}),s.jsx("td",{className:a,children:"-577"}),s.jsx("td",{className:a,children:"-63"}),s.jsx("td",{className:a,children:"119"}),s.jsx("td",{className:a,children:"16,782"})]})]})]})});return e?s.jsx("div",{className:an.uwWrap,children:s.jsxs("div",{className:an.uwCard,children:[s.jsx("h2",{className:an.uwTitle,children:"Fortress Build Order"}),o]})}):s.jsxs("section",{className:an.tableSection,children:[s.jsx("h3",{className:an.sectionTitle,children:"Fortress Build Order"}),o]})}function yhe(){return s.jsxs("div",{className:an.wrap,children:[s.jsxs("div",{className:an.headerBar,children:[s.jsx("h2",{className:an.title,children:"Fortress Package skip order"}),s.jsx("span",{className:an.meta,children:"Last updated: 21.02.2025"})]}),s.jsx("p",{className:an.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),s.jsxs("div",{className:an.contentWrapper,children:[s.jsx(TL,{}),s.jsxs("section",{className:an.infoBox,children:[s.jsx("h3",{className:an.sectionTitle,children:"Important"}),s.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Archery Guild"}),s.jsx("li",{children:"Mage's Tower"}),s.jsx("li",{children:"Fortifications"})]}),s.jsx("div",{className:an.divider}),s.jsx("h3",{className:an.sectionTitle,children:"Total Costs"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Gold:"})," 577 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Shrooms:"})," 363 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Wood:"})," 99,881 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Stone:"})," 33,218 ",s.jsx("br",{})]}),s.jsx("h3",{className:an.sectionTitle,children:"Remaining Resources"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Remaining Gold:"})," -577 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Wood:"})," 119 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const bhe=()=>s.jsx(Ed,{title:"Fortress attack duplication guide"}),_he=()=>s.jsx(Ed,{title:"Underworld"}),whe=()=>s.jsx(Ed,{title:"Underworld Calculator"}),jhe=()=>s.jsx(Ed,{title:"Underworld Pro Package skip order"}),She=()=>s.jsx(En,{title:"Arena / AM"}),Nhe="_wrap_13u9w_5",khe="_description_13u9w_63",Che="_controls_13u9w_79",The="_search_13u9w_83",Ihe="_tableWrap_13u9w_119",Ehe="_table_13u9w_119",Ahe="_thead_13u9w_143",Phe="_th_13u9w_143",Rhe="_td_13u9w_167",Lhe="_tierCell_13u9w_179",Dhe="_amountCell_13u9w_181",Mhe="_bonusCell_13u9w_183",Fhe="_tags_13u9w_185",Bhe="_tierBox_13u9w_191",$he="_tierIcon_13u9w_193",Ohe="_tierTexts_13u9w_203",Vhe="_tierName_13u9w_215",Uhe="_badge_13u9w_221",zhe="_badgeMax_13u9w_241",Ghe="_badgeAchiev_13u9w_243",Hhe="_badgeX2_13u9w_245",Whe="_badgeX12_13u9w_247",Khe="_badgeX60_13u9w_249",qhe="_iconHead_13u9w_255",Qhe="_achievTooltip_13u9w_271",Yhe="_achiev_13u9w_271",Xhe="_achievImg_13u9w_275",Jhe="_dataRow_13u9w_303",Zhe="_tierCellHover_13u9w_323",xt={wrap:Nhe,description:khe,controls:Che,search:The,tableWrap:Ihe,table:Ehe,thead:Ahe,th:Phe,td:Rhe,tierCell:Lhe,amountCell:Dhe,bonusCell:Mhe,tags:Fhe,tierBox:Bhe,tierIcon:$he,tierTexts:Ohe,tierName:Vhe,badge:Uhe,badgeMax:zhe,badgeAchiev:Ghe,badgeX2:Hhe,badgeX12:Whe,badgeX60:Khe,iconHead:qhe,achievTooltip:Qhe,achiev:Yhe,achievImg:Xhe,dataRow:Jhe,tierCellHover:Zhe},$l={gold:"goldrune",xp:"xprune",hp:"healthrune",totalRes:"totalresrune",singleRes:"lightresrune",elem:"lightdmgrune",item:"itemqualrune",epics:"epicrune"},um=44,n1=72,eme={Quintillion:"capitalist",Septillion:"stinkingrich",Decillion:"runemaster"};function Ol({keyName:t,label:e}){const n=Oa(t,um);return s.jsx(t2,{content:e,placement:"bottom",children:s.jsx("div",{className:xt.iconHead,children:n.thumb?s.jsx("img",{src:n.thumb,alt:e,width:um,height:um,style:{borderRadius:6,border:"1px solid #2B4C73"}}):s.jsx("div",{style:{width:um,height:um,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(n.fallback||e).slice(0,1).toUpperCase()})})})}function tme(){return s.jsx(IL,{})}function sme({id:t,label:e}){const n=Oa(t,n1);return s.jsx(t2,{content:e,placement:"bottom",className:xt.achievTooltip,children:s.jsx("div",{className:xt.achiev,children:n.thumb?s.jsx("img",{src:n.thumb,alt:e,width:n1,height:n1,style:{borderRadius:3,border:"1px solid #2C4A73"}}):s.jsx("div",{className:xt.achievImg})})})}const dx=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1%",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",elemDmg:"11%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",totalRes:"5%",singleRes:"14%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",elemDmg:"12%",itemQuality:"+2%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%"},{tier:"Sextillion",amount:"1 E21",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"10 E22",gold:"11%",singleRes:"17%",elemDmg:"14%",epics:"11%"},{tier:"Sextillion",amount:"100 E23",hp:"4%",totalRes:"6%",singleRes:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",elemDmg:"15%",epics:"12%"},{tier:"Septillion",amount:"10 E25",gold:"13%",xp:"3%",singleRes:"19%",elemDmg:"16%"},{tier:"Septillion",amount:"100 E26",singleRes:"20%",epics:"13%"},{tier:"Octillion",amount:"1 E27",totalRes:"7%",singleRes:"21%",elemDmg:"17%"},{tier:"Octillion",amount:"10 E28",gold:"14%",singleRes:"22%",epics:"14%"},{tier:"Octillion",amount:"100 E29",gold:"15%",elemDmg:"18%"},{tier:"Nonillion",amount:"1 E30",hp:"5%",singleRes:"23%",epics:"15%"},{tier:"Nonillion",amount:"10 E31",totalRes:"8%",singleRes:"24%",elemDmg:"19%"},{tier:"Nonillion",amount:"100 E32",gold:"16%",singleRes:"25%",elemDmg:"20%",epics:"16%"},{tier:"Decillion",amount:"1 E33",xp:"4%",singleRes:"26%"},{tier:"Decillion",amount:"10 E34",gold:"17%",totalRes:"9%",elemDmg:"21%",epics:"17%"},{tier:"Decillion",amount:"100 E35",singleRes:"27%",elemDmg:"22%"},{tier:"Undecillion",amount:"1 E36",gold:"18%",hp:"6%",singleRes:"28%",epics:"18%"},{tier:"Undecillion",amount:"10 E37",elemDmg:"23%"},{tier:"Undecillion",amount:"100 E38",gold:"19%",totalRes:"10%",singleRes:"29%",epics:"19%"},{tier:"Duodecillion",amount:"1 E39",elemDmg:"24%",note:"x2 Boost"},{tier:"Duodecillion",amount:"10 E40",gold:"20%",singleRes:"30%",elemDmg:"25%",epics:"20%"},{tier:"Duodecillion",amount:"100 E41",singleRes:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",totalRes:"11%",singleRes:"32%",elemDmg:"26%",epics:"21%"},{tier:"Tredecillion",amount:"10 E43",hp:"7%",singleRes:"33%"},{tier:"Tredecillion",amount:"100 E44",gold:"22%",singleRes:"34%",elemDmg:"27%",epics:"22%"},{tier:"Quattuordecillion",amount:"1 E45",xp:"5%",elemDmg:"28%"},{tier:"Quattuordecillion",amount:"10 E46",gold:"23%",totalRes:"12%",singleRes:"35%",epics:"23%"},{tier:"Quattuordecillion",amount:"100 E47",singleRes:"36%",elemDmg:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",epics:"24%",note:"x12 Boost"},{tier:"Quindecillion",amount:"10 E49",singleRes:"37%",elemDmg:"30%"},{tier:"Quindecillion",amount:"100 E50",gold:"25%",hp:"8%",totalRes:"13%",singleRes:"38%",itemQuality:"+3%",epics:"25%"},{tier:"Sexdecillion",amount:"1 E51",singleRes:"39%",elemDmg:"31%"},{tier:"Sexdecillion",amount:"10 E52",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"100 E53",singleRes:"40%",elemDmg:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",totalRes:"14%",singleRes:"41%",elemDmg:"33%",epics:"27%"},{tier:"Septendecillion",amount:"10 E55",xp:"6%"},{tier:"Septendecillion",amount:"100 E56",gold:"28%",hp:"9%",singleRes:"42%",elemDmg:"34%",epics:"28%"},{tier:"Octodecillion",amount:"1 E57",singleRes:"43%",elemDmg:"35%",note:"x8 Boost"},{tier:"Octodecillion",amount:"10 E58",gold:"29%",totalRes:"15%",singleRes:"44%",epics:"29%"},{tier:"Octodecillion",amount:"100 E59",singleRes:"45%",elemDmg:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",epics:"30%"},{tier:"Novendecillion",amount:"10 E61",singleRes:"46%",elemDmg:"37%"},{tier:"Novendecillion",amount:"100 E62",gold:"31%",totalRes:"19%",singleRes:"47%",epics:"31%"},{tier:"Vigintillion",amount:"1 E63",hp:"10%",singleRes:"48%",elemDmg:"38%"},{tier:"Vigintillion",amount:"10 E64",gold:"32%",singleRes:"49%",epics:"32%"},{tier:"Vigintillion",amount:"100 E65",xp:"7%",elemDmg:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",totalRes:"17%",elemDmg:"40%",epics:"33%"},{tier:"Unvigintillion",amount:"10 E67",singleRes:"50%"},{tier:"Unvigintillion",amount:"100 E68",gold:"34%",singleRes:"51%",epics:"34%"},{tier:"Duovigintillion",amount:"1 E69",singleRes:"52%",elemDmg:"41%"},{tier:"Duovigintillion",amount:"10 E70",gold:"35%",hp:"11%",totalRes:"18%",singleRes:"53%",elemDmg:"42%",itemQuality:"+4%",epics:"35%",note:"x60 Boost"},{tier:"Duovigintillion",amount:"100 E71",singleRes:"54%",elemDmg:"43%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"55%",elemDmg:"44%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"19%",elemDmg:"45%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",xp:"8%",singleRes:"56%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",singleRes:"57%",elemDmg:"46%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",hp:"12%",singleRes:"58%",elemDmg:"47%"},{tier:"Quinquavigintillion",amount:"1 E78",gold:"39%",totalRes:"20%",elemDmg:"48%",epics:"39%"},{tier:"Quinquavigintillion",amount:"10 E79",singleRes:"59%",elemDmg:"49%"},{tier:"Quinquavigintillion",amount:"100 E80",gold:"40%",singleRes:"60%",elemDmg:"50%",epics:"40%"},{tier:"Sesvigintillion",amount:"1 E81",singleRes:"61%"},{tier:"Sesvigintillion",amount:"10 E82",gold:"41%",totalRes:"21%",singleRes:"62%",elemDmg:"51%",epics:"41%"},{tier:"Sesvigintillion",amount:"100 E83"},{tier:"Septemvigintillion",amount:"1 E84",gold:"42%",hp:"13%",singleRes:"63%",elemDmg:"52%",epics:"42%"},{tier:"Septemvigintillion",amount:"10 E85",xp:"9%",singleRes:"64%"},{tier:"Septemvigintillion",amount:"100 E86",gold:"43%",totalRes:"22%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"65%",elemDmg:"53%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",singleRes:"66%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",totalRes:"23%",singleRes:"67%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",hp:"14%",singleRes:"68%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",itemQuality:"+5%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"69%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",totalRes:"24%",singleRes:"70%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",xp:"10%",singleRes:"71%",elemDmg:"56%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"72%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",hp:"15%",totalRes:"25%",singleRes:"73%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"74%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",singleRes:"75%",elemDmg:"60%",epics:"50%",note:"MAX"},{tier:"Duotrigintillion",amount:"100 E101"},{tier:"Trestrigintillion",amount:"1 E102"},{tier:"Trestrigintillion",amount:"10 E103"},{tier:"Trestrigintillion",amount:"100 E104"},{tier:"Quattuortrigintillion",amount:"1 E105"},{tier:"Quattuortrigintillion",amount:"10 E106"},{tier:"Quattuortrigintillion",amount:"100 E107"},{tier:"Quinquatrigintillion",amount:"1 E108"},{tier:"Quinquatrigintillion",amount:"10 E109"},{tier:"Quinquatrigintillion",amount:"100 E110"},{tier:"Sextrigintillion",amount:"1 E111"},{tier:"Sextrigintillion",amount:"10 E112"},{tier:"Sextrigintillion",amount:"100 E113"},{tier:"Septentrigintillion",amount:"1 E114"},{tier:"Septentrigintillion",amount:"10 E115"},{tier:"Septentrigintillion",amount:"100 E116"},{tier:"Octotrigintillion",amount:"1 E117"},{tier:"Octotrigintillion",amount:"10 E118"},{tier:"Octotrigintillion",amount:"100 E119"},{tier:"Noventrigintillion",amount:"1 E120"},{tier:"Noventrigintillion",amount:"10 E121"},{tier:"Noventrigintillion",amount:"100 E122"},{tier:"Quadragintillion",amount:"1 E123"},{tier:"Quadragintillion",amount:"10 E124"},{tier:"Quadragintillion",amount:"100 E125"},{tier:"Unquadragintillion",amount:"1 E126"},{tier:"Unquadragintillion",amount:"10 E127"},{tier:"Unquadragintillion",amount:"100 E128"},{tier:"Duoquadragintillion",amount:"1 E129"},{tier:"Duoquadragintillion",amount:"10 E130"},{tier:"Duoquadragintillion",amount:"100 E131"},{tier:"Trequadragintillion",amount:"1 E132"},{tier:"Trequadragintillion",amount:"10 E133"},{tier:"Trequadragintillion",amount:"100 E134"},{tier:"Quattuorquadragintillion",amount:"1 E135"},{tier:"Quattuorquadragintillion",amount:"10 E136"},{tier:"Quattuorquadragintillion",amount:"100 E137"},{tier:"Quinquadragintillion",amount:"1 E138"},{tier:"Quinquadragintillion",amount:"10 E139"},{tier:"Quinquadragintillion",amount:"100 E140"},{tier:"Sexquadragintillion",amount:"1 E141"},{tier:"Sexquadragintillion",amount:"10 E142"},{tier:"Sexquadragintillion",amount:"100 E143"},{tier:"Septenquadragintillion",amount:"1 E144"},{tier:"Septenquadragintillion",amount:"10 E145"},{tier:"Septenquadragintillion",amount:"100 E146"},{tier:"Octoquadragintillion",amount:"1 E147"},{tier:"Octoquadragintillion",amount:"10 E148"},{tier:"Octoquadragintillion",amount:"100 E149"},{tier:"Novenquadragintillion",amount:"1 E150"},{tier:"Novenquadragintillion",amount:"10 E151"},{tier:"Novenquadragintillion",amount:"100 E152"}];function r1(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const n=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(n)+r}function nme(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function rme(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}function ime(t){const e=t.trim().toLowerCase();return e?dx.filter(n=>{var r;return`${n.tier} ${n.amount} ${(r=n.note)!=null?r:""}`.toLowerCase().includes(e)}):dx}function IL(){const{t}=Os(),[e,n]=P.useState(""),[r,i]=P.useState(null),a=ime(e),o=P.useMemo(()=>Math.max(...dx.map(u=>r1(u.amount))),[]),c=P.useMemo(()=>{const u=new Map;for(const m of a)u.has(m.tier)||u.set(m.tier,[]),u.get(m.tier).push(m);const h=Array.from(new Set(dx.map(m=>m.tier)));return Array.from(u.entries()).sort((m,g)=>h.indexOf(m[0])-h.indexOf(g[0]))},[a]);return s.jsxs("div",{className:xt.wrap,children:[s.jsx("p",{className:xt.description,children:t("guidehub.arenaManager.amRuneBonuses.description")}),s.jsx("div",{className:xt.controls,children:s.jsx("input",{className:xt.search,placeholder:t("guidehub.arenaManager.amRuneBonuses.searchPlaceholder"),value:e,onChange:u=>n(u.target.value)})}),s.jsx("div",{className:xt.tableWrap,children:s.jsxs("table",{className:xt.table,children:[s.jsx("thead",{className:xt.thead,children:s.jsxs("tr",{className:xt.headRow,children:[s.jsx("th",{className:`${xt.th} ${xt.tierCell}`,children:t("guidehub.arenaManager.amRuneBonuses.table.tier")}),s.jsx("th",{className:`${xt.th} ${xt.amountCell}`,children:t("guidehub.arenaManager.amRuneBonuses.table.amount")}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.gold,label:t("guidehub.arenaManager.amRuneBonuses.table.goldBonus")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.xp,label:t("guidehub.arenaManager.amRuneBonuses.table.xpBonus")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.hp,label:t("guidehub.arenaManager.amRuneBonuses.table.hpBonus")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.totalRes,label:t("guidehub.arenaManager.amRuneBonuses.table.totalResistance")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.singleRes,label:t("guidehub.arenaManager.amRuneBonuses.table.singleResistance")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.elem,label:t("guidehub.arenaManager.amRuneBonuses.table.elementalDamage")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.item,label:t("guidehub.arenaManager.amRuneBonuses.table.improvedItemQuality")})}),s.jsx("th",{className:xt.th,children:s.jsx(Ol,{keyName:$l.epics,label:t("guidehub.arenaManager.amRuneBonuses.table.chancesOfEpics")})}),s.jsx("th",{className:xt.th,children:t("guidehub.arenaManager.amRuneBonuses.table.tags")})]})}),s.jsx("tbody",{children:c.map(([u,h])=>{const m=Math.max(...h.map(w=>r1(w.amount))),g=t(`guidehub.arenaManager.amRuneBonuses.tiers.${u.toLowerCase()}`),x=eme[u],b=x?t(`guidehub.arenaManager.amRuneBonuses.achievements.${x}`):null;return h.map((w,k)=>{var I,N,v,_,R,j,S,C;const A=Math.abs(r1(w.amount)-o)<1e-6,L=rme(w.note);return s.jsxs("tr",{className:xt.dataRow,onMouseEnter:()=>i(u),onMouseLeave:()=>i(null),children:[k===0&&s.jsx("td",{className:`${xt.td} ${xt.tierCell} ${Math.abs(m-o)<1e-6?xt.tierMax:""} ${r===u?xt.tierCellHover:""}`,rowSpan:h.length,children:s.jsxs("div",{className:xt.tierBox,children:[s.jsx("div",{className:xt.tierIcon,children:g.slice(0,1).toUpperCase()}),s.jsxs("div",{className:xt.tierTexts,children:[s.jsx("div",{className:xt.tierName,children:g}),x&&b&&s.jsx(sme,{id:x,label:b})]})]})}),s.jsx("td",{className:`${xt.td} ${xt.amountCell}`,children:w.amount}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(I=w.gold)!=null?I:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(N=w.xp)!=null?N:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(v=w.hp)!=null?v:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(_=w.totalRes)!=null?_:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(R=w.singleRes)!=null?R:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(j=w.elemDmg)!=null?j:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(S=w.itemQuality)!=null?S:""}),s.jsx("td",{className:`${xt.td} ${xt.bonusCell}`,children:(C=w.epics)!=null?C:""}),s.jsxs("td",{className:`${xt.td} ${xt.tags}`,children:[A&&s.jsx("span",{className:`${xt.badge} ${xt.badgeMax}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.max")}),nme(w.note)&&s.jsx("span",{className:`${xt.badge} ${xt.badgeAchiev}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.achievement")}),L==="x2"&&s.jsx("span",{className:`${xt.badge} ${xt.badgeX2}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x2")}),L==="x12"&&s.jsx("span",{className:`${xt.badge} ${xt.badgeX12}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x12")}),L==="x60"&&s.jsx("span",{className:`${xt.badge} ${xt.badgeX60}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x60")}),L==="x8"&&s.jsx("span",{className:xt.badge,children:t("guidehub.arenaManager.amRuneBonuses.badges.x8")})]})]},`${u}-${k}`)})})})]})})]})}const ame="_wrap_zrza7_11",ome="_headerBar_zrza7_15",lme="_title_zrza7_31",cme="_meta_zrza7_33",dme="_centerCol_zrza7_37",ume="_text_zrza7_53",hme="_imageBox_zrza7_55",mme="_imageFallback_zrza7_57",pme="_credit_zrza7_59",Po={wrap:ame,headerBar:ome,title:lme,meta:cme,centerCol:dme,text:ume,imageBox:hme,imageFallback:mme,credit:pme};function gme(){const{t}=Os(),e=Oa("ambuildorder"),n=P.useMemo(()=>e.id?`https://drive.google.com/thumbnail?id=${e.id}&sz=w1024`:null,[e.id]),r=P.useMemo(()=>e.id?`https://drive.google.com/uc?export=view&id=${e.id}`:null,[e.id]),i=e.thumb||null,a=n||r||i;return s.jsxs("div",{className:Po.wrap,children:[s.jsxs("div",{className:Po.headerBar,children:[s.jsx("h2",{className:Po.title,children:t("guidehub.arenaManager.buildOrder.title")}),s.jsx("span",{className:Po.meta,children:t("guidehub.arenaManager.buildOrder.updated",{date:"30.11.2024"})})]}),s.jsxs("div",{className:Po.centerCol,children:[s.jsxs("div",{className:Po.text,children:[s.jsx("p",{children:t("guidehub.arenaManager.buildOrder.body1")}),s.jsx("p",{dangerouslySetInnerHTML:{__html:t("guidehub.arenaManager.buildOrder.body2",{mushrooms:"<strong>4300 Mushrooms</strong>"})}})]}),a?s.jsx("div",{className:Po.imageBox,children:s.jsx("img",{src:a,alt:t("guidehub.arenaManager.buildOrder.imageAlt"),loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):s.jsx("div",{className:Po.imageFallback,children:"??"}),s.jsx("p",{className:Po.credit,children:t("guidehub.arenaManager.buildOrder.credit",{discord:"SF Tavern Discord"})})]})]})}const fme=()=>s.jsx(En,{title:"Hellevator Guide"}),vme=()=>s.jsx(En,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),xme="_foCalc_18a5w_3",yme="_panel_18a5w_211",bme="_panelHead_18a5w_227",_me="_panelTitle_18a5w_241",wme="_controls_18a5w_243",jme="_ctrlLabel_18a5w_245",Sme="_ctrlSelect_18a5w_249",Nme="_tableWrap_18a5w_291",kme="_table_18a5w_291",Cme="_th_18a5w_305",Tme="_td_18a5w_321",Ime="_row_18a5w_333",Eme="_note_18a5w_335",Pn={foCalc:xme,panel:yme,panelHead:bme,panelTitle:_me,controls:wme,ctrlLabel:jme,ctrlSelect:Sme,tableWrap:Nme,table:kme,th:Cme,td:Tme,row:Ime,note:Eme},EL={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},Rn=(t,e=0)=>t*3600+e*60,he=[Rn(0,15),Rn(0,31),Rn(1,6),Rn(2,20),Rn(5,0),Rn(8,0),Rn(11,25),Rn(18,27),Rn(40,0),Rn(87,16),Rn(190,46),Rn(320,0),Rn(480,0),Rn(615,33),Rn(800,0)],_s=[Rn(1054,17),Rn(1122,51),Rn(1245,42),Rn(1343,20),Rn(1440,0)],Ame={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:he[0]},{level:2,wood:150,stone:50,gold:20,timeSec:he[1]},{level:3,wood:440,stone:140,gold:30,timeSec:he[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:he[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:he[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:he[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:he[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:he[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:he[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:he[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:he[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:he[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:he[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:he[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:he[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:_s[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:_s[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:_s[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:_s[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:_s[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:he[0]},{level:2,wood:138,stone:46,gold:10,timeSec:he[1]},{level:3,wood:406,stone:129,gold:15,timeSec:he[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:he[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:he[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:he[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:he[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:he[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:he[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:he[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:he[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:he[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:he[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:he[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:he[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:he[0]},{level:2,wood:28,stone:37,gold:14,timeSec:he[1]},{level:3,wood:81,stone:103,gold:21,timeSec:he[2]},{level:4,wood:203,stone:246,gold:28,timeSec:he[3]},{level:5,wood:462,stone:591,gold:35,timeSec:he[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:he[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:he[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:he[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:he[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:he[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:he[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:he[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:he[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:he[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:he[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:_s[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:_s[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:_s[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:_s[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:_s[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:he[0]},{level:2,wood:160,stone:53,gold:50,timeSec:he[1]},{level:3,wood:469,stone:149,gold:75,timeSec:he[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:he[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:he[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:he[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:he[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:he[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:he[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:he[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:he[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:he[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:he[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:he[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:he[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:he[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:he[0]},{level:2,wood:200,stone:67,gold:30,timeSec:he[1]},{level:3,wood:587,stone:187,gold:45,timeSec:he[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:he[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:he[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:he[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:he[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:he[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:he[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:he[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:he[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:he[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:he[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:he[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:he[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:_s[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:_s[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:_s[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:_s[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:_s[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:Rn(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:he[0]},{level:2,wood:30,stone:20,gold:4,timeSec:he[1]},{level:3,wood:88,stone:56,gold:6,timeSec:he[2]},{level:4,wood:220,stone:133,gold:8,timeSec:he[3]},{level:5,wood:500,stone:320,gold:10,timeSec:he[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:he[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:he[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:he[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:he[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:he[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:he[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:he[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:he[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:he[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:he[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:_s[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:_s[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:_s[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:_s[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:_s[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:he[0]},{level:2,wood:90,stone:16,gold:6,timeSec:he[1]},{level:3,wood:264,stone:45,gold:9,timeSec:he[2]},{level:4,wood:660,stone:107,gold:12,timeSec:he[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:he[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:he[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:he[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:he[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:he[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:he[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:he[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:he[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:he[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:he[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:he[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:_s[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:_s[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:_s[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:_s[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:_s[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:he[0]},{level:2,wood:82,stone:55,gold:8,timeSec:he[1]},{level:3,wood:240,stone:153,gold:12,timeSec:he[2]},{level:4,wood:600,stone:364,gold:16,timeSec:he[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:he[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:he[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:he[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:he[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:he[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:he[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:he[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:he[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:he[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:he[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:he[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:he[0]},{level:2,wood:100,stone:33,gold:8,timeSec:he[1]},{level:3,wood:293,stone:93,gold:12,timeSec:he[2]},{level:4,wood:733,stone:222,gold:16,timeSec:he[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:he[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:he[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:he[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:he[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:he[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:he[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:he[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:he[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:he[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:he[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:he[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:_s[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:_s[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:_s[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:_s[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:_s[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:he[0]},{level:2,wood:240,stone:61,gold:12,timeSec:he[1]},{level:3,wood:675,stone:205,gold:18,timeSec:he[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:he[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:he[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:he[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:he[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:he[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:he[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:he[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:he[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:he[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:he[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:he[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:he[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:he[0]},{level:2,wood:164,stone:27,gold:10,timeSec:he[1]},{level:3,wood:480,stone:76,gold:15,timeSec:he[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:he[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:he[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:he[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:he[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:he[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:he[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:he[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:he[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:he[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:he[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:he[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:he[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:he[0]},{level:2,wood:120,stone:53,gold:30,timeSec:he[1]},{level:3,wood:352,stone:149,gold:45,timeSec:he[2]},{level:4,wood:880,stone:356,gold:60,timeSec:he[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:he[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:he[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:he[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:he[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:he[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:he[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:he[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:he[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:he[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:he[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:he[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:_s[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:_s[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:_s[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:_s[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:_s[4]}]}},Pme=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],Rme="fortress",Lme={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function Dme(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function Mme(t){const e=Math.max(0,Math.round(t)),n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=o=>o.toString().padStart(2,"0");return`${a(n)}:${a(r)}:${a(i)}`}const AL=()=>{const{t}=Os(),[e,n]=P.useState(Rme),[r,i]=P.useState(1),a=P.useMemo(()=>{var x;const h=Lme[e],m=EL[h],g=(x=m==null?void 0:m.id)!=null?x:m;return _d.gifProxy(g)||_d.gif(g)||""},[e]),o=P.useMemo(()=>{var h,m;return(m=(h=Ame[e])==null?void 0:h.costs)!=null?m:[]},[e]),c=P.useMemo(()=>Dme(r),[r]),u=t(`guidehub.calculators.fortress.buildings.${e}`);return s.jsxs("div",{className:`${Pn.foCalc}`,children:[s.jsxs("div",{className:"tabs",children:[s.jsx("span",{className:"tabSelectLabel",children:t("guidehub.calculators.fortress.inputs.buildingSelectLabel")}),s.jsx("select",{className:"tabSelect",value:e,onChange:h=>n(h.target.value),children:Pme.map(h=>s.jsx("option",{value:h.key,children:t(`guidehub.calculators.fortress.buildings.${h.key}`)},h.key))})]}),s.jsxs("div",{className:"mediaRow",children:[s.jsx("div",{className:"media",children:a?s.jsx("img",{src:a,alt:u}):null}),s.jsxs("div",{className:Pn.panel,children:[s.jsxs("div",{className:Pn.panelHead,children:[s.jsx("div",{className:Pn.panelTitle,children:t("guidehub.calculators.fortress.title",{building:u})}),s.jsxs("div",{className:Pn.controls,children:[s.jsx("span",{className:Pn.ctrlLabel,children:t("guidehub.calculators.fortress.inputs.l2Label")}),s.jsx("select",{className:Pn.ctrlSelect,value:r,onChange:h=>i(parseInt(h.target.value,10)),children:Array.from({length:16},(h,m)=>m).map(h=>s.jsx("option",{value:h,children:h},h))})]})]}),s.jsx("div",{className:Pn.tableWrap,children:s.jsxs("table",{className:Pn.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:Pn.th,children:t("guidehub.calculators.fortress.table.level")}),s.jsx("th",{className:Pn.th,children:t("guidehub.calculators.fortress.table.wood")}),s.jsx("th",{className:Pn.th,children:t("guidehub.calculators.fortress.table.stone")}),s.jsx("th",{className:Pn.th,children:t("guidehub.calculators.fortress.table.buildTimeL2")}),s.jsx("th",{className:Pn.th,children:t("guidehub.calculators.fortress.table.skip")})]})}),s.jsx("tbody",{children:o.map(h=>{var b,w,k,A,L,I,N;const m=(b=h.timeSec)!=null?b:0,g=Math.round(m*(1-c)),x=Math.ceil(Math.ceil(g/60)/10);return s.jsxs("tr",{className:Pn.row,children:[s.jsx("td",{className:Pn.td,children:h.level}),s.jsx("td",{className:Pn.td,children:(A=(k=(w=h.wood)==null?void 0:w.toLocaleString)==null?void 0:k.call(w))!=null?A:h.wood}),s.jsx("td",{className:Pn.td,children:(N=(I=(L=h.stone)==null?void 0:L.toLocaleString)==null?void 0:I.call(L))!=null?N:h.stone}),s.jsx("td",{className:Pn.td,children:Mme(g)}),s.jsx("td",{className:Pn.td,children:x.toLocaleString()})]},h.level)})})]})}),s.jsx("div",{className:Pn.note,children:t("guidehub.calculators.fortress.hints.l2Effect")})]})]})]})},Fme="_uwCalc_64lws_3",Bme="_panel_64lws_211",$me="_panelHead_64lws_227",Ome="_panelTitle_64lws_241",Vme="_controls_64lws_243",Ume="_ctrlLabel_64lws_245",zme="_ctrlSelect_64lws_251",Gme="_tableWrap_64lws_295",Hme="_table_64lws_295",Wme="_th_64lws_309",Kme="_td_64lws_325",qme="_row_64lws_337",Qme="_note_64lws_339",vn={uwCalc:Fme,panel:Bme,panelHead:$me,panelTitle:Ome,controls:Vme,ctrlLabel:Ume,ctrlSelect:zme,tableWrap:Gme,table:Hme,th:Wme,td:Kme,row:qme,note:Qme},eI={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},Yme={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function Xme(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function Jme(t){const e=Math.max(0,t),n=Math.round(e),r=Math.floor(n/3600),i=Math.floor(n%3600/60),a=n%60;return{h:r,m:i,s:a}}function Zme(t){const{h:e,m:n,s:r}=Jme(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(n)}:${i(r)}`}function epe(t,e){var i,a;const n=Xme(e);return((a=(i=Yme[t])==null?void 0:i.costs)!=null?a:[]).map(o=>{const c=o.timeSec*(1-n),u=Math.ceil(Math.ceil(c/60)/10);return{...o,timeAdjSec:c,skipMushroomsAdj:u}})}const tpe=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],PL=()=>{const{t}=Os(),[e,n]=P.useState("hearthofdarkngif"),[r,i]=P.useState(1),a=P.useMemo(()=>{var g;const h=EL[e],m=(g=h==null?void 0:h.id)!=null?g:h;return _d.gifProxy(m)||_d.gif(m)||""},[e]),o=P.useMemo(()=>{var h;return(h=eI[e])!=null?h:"hearthofdarkn"},[e]),c=t(`guidehub.calculators.underworld.buildings.${o}`),u=P.useMemo(()=>epe(o,r),[o,r]);return s.jsxs("div",{className:vn.uwCalc,children:[s.jsxs("div",{className:"tabs",children:[s.jsx("span",{className:"tabSelectLabel",children:t("guidehub.calculators.underworld.inputs.buildingSelectLabel")}),s.jsx("select",{className:"tabSelect",value:e,onChange:h=>n(h.target.value),children:tpe.map(h=>{var m;return s.jsx("option",{value:h,children:t(`guidehub.calculators.underworld.buildings.${(m=eI[h])!=null?m:"hearthofdarkn"}`)},h)})})]}),s.jsxs("div",{className:"mediaRow",children:[s.jsx("div",{className:"media",children:a?s.jsx("img",{src:a,alt:c}):null}),s.jsxs("div",{className:vn.panel,children:[s.jsxs("div",{className:vn.panelHead,children:[s.jsx("div",{className:vn.panelTitle,children:t("guidehub.calculators.underworld.title",{building:c})}),s.jsxs("div",{className:vn.controls,children:[s.jsx("label",{htmlFor:"uw-l2",className:vn.ctrlLabel,children:t("guidehub.calculators.underworld.inputs.l2Label")}),s.jsx("select",{id:"uw-l2",className:vn.ctrlSelect,value:r,onChange:h=>i(parseInt(h.target.value,10)),children:Array.from({length:15},(h,m)=>m+1).map(h=>s.jsx("option",{value:h,children:h},h))})]})]}),s.jsx("div",{className:vn.tableWrap,children:s.jsxs("table",{className:vn.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:vn.th,children:t("guidehub.calculators.underworld.table.level")}),s.jsx("th",{className:vn.th,children:t("guidehub.calculators.underworld.table.soul")}),s.jsx("th",{className:vn.th,children:t("guidehub.calculators.underworld.table.gold")}),s.jsx("th",{className:vn.th,children:t("guidehub.calculators.underworld.table.buildTimeL2")}),s.jsx("th",{className:vn.th,children:t("guidehub.calculators.underworld.table.skip")})]})}),s.jsx("tbody",{children:u.length===0?s.jsx("tr",{className:vn.row,children:s.jsx("td",{className:vn.td,colSpan:5,children:t("guidehub.calculators.underworld.empty")})}):u.map(h=>s.jsxs("tr",{className:vn.row,children:[s.jsx("td",{className:vn.td,children:h.level}),s.jsx("td",{className:vn.td,children:h.soul}),s.jsx("td",{className:vn.td,children:h.gold}),s.jsx("td",{className:vn.td,children:Zme(h.timeAdjSec)}),s.jsx("td",{className:vn.td,children:h.skipMushroomsAdj})]},h.level))})]})}),s.jsx("p",{className:vn.note,children:t("guidehub.calculators.underworld.hints.l2Effect")})]})]})]})},spe=()=>s.jsx(En,{title:"Max Item Stats Calculator"}),npe="_wrap_mnr0g_1",rpe="_card_mnr0g_13",ipe="_title_mnr0g_33",ape="_form_mnr0g_45",ope="_field_mnr0g_57",lpe="_input_mnr0g_71",cpe="_gemsRow_mnr0g_87",dpe="_gemBox_mnr0g_101",upe="_disabled_mnr0g_127",hpe="_gemImg_mnr0g_135",mpe="_gemFallback_mnr0g_149",ppe="_normalGem_mnr0g_165",gpe="_blackGem_mnr0g_173",fpe="_legendaryGem_mnr0g_181",vpe="_gemLabel_mnr0g_189",xpe="_gemValue_mnr0g_199",ype="_hint_mnr0g_211",As={wrap:npe,card:rpe,title:ipe,form:ape,field:ope,input:lpe,gemsRow:cpe,gemBox:dpe,disabled:upe,gemImg:hpe,gemFallback:mpe,normalGem:ppe,blackGem:gpe,legendaryGem:fpe,gemLabel:vpe,gemValue:xpe,hint:ype},bpe={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},_pe=.25,ux=t=>Math.round(Number.isFinite(t)?t:0);function wpe(t){const e=Number(t.charLevel),n=Number(t.mineLevel),r=Number(t.guildHoK);if(n<25){const A=e*_pe*(1+(n-1)*.25)+r/3;return ux(A)}const{A:i,B:a,C:o,D:c,E:u,F:h,G:m,H:g,I:x,J:b}=bpe,k=i+a*e+o/n+c*e**2+u/n**2+h*e/n+m*e**3+g/n**3+x*e/n**2+b*e**2/n+r/3;return ux(k)}function jpe(t){return ux(t*(2/3))}function Spe(t){return ux(t)}const i1={char:1e3,mine:100,hok:1e3},r2=({initialState:t,onStateChange:e})=>{var A,L,I;const{t:n}=Os(),[r,i]=P.useState((A=t==null?void 0:t.charLevel)!=null?A:""),[a,o]=P.useState((L=t==null?void 0:t.mineLevel)!=null?L:""),[c,u]=P.useState((I=t==null?void 0:t.guildHoKLevel)!=null?I:""),h=(N,v,_)=>{e&&(typeof N!="number"||typeof v!="number"||typeof _!="number"||e({charLevel:N,mineLevel:v,guildHoKLevel:_}))},m=P.useMemo(()=>r===""||a===""||c===""?null:wpe({charLevel:Number(r),mineLevel:Number(a),guildHoK:Number(c)}),[r,a,c]),g=P.useMemo(()=>m==null?null:jpe(m),[m]),x=P.useMemo(()=>m==null?null:Spe(m),[m]),b=ud("luckbig"),w=ud("blackbig"),k=ud("legendarybig");return s.jsx("div",{className:As.wrap,children:s.jsxs("div",{className:As.card,children:[s.jsx("h2",{className:As.title,children:n("calculators.gem.title",{defaultValue:"Gem Calculator"})}),s.jsxs("div",{className:As.form,children:[s.jsxs("label",{className:As.field,children:[s.jsx("span",{children:n("calculators.gem.inputs.charLevel.label",{defaultValue:"Char Level"})}),s.jsx("input",{type:"number",inputMode:"numeric",className:As.input,placeholder:n("calculators.gem.inputs.charLevel.placeholder",{defaultValue:"e.g., 360"}),value:r,onChange:N=>{const v=N.currentTarget.value;if(v===""){i("");return}const _=Number(v),R=Number.isFinite(_)?_:"";i(R),h(R,a,c)},max:i1.char})]}),s.jsxs("label",{className:As.field,children:[s.jsx("span",{children:n("calculators.gem.inputs.mineLevel.label",{defaultValue:"Mine Level"})}),s.jsx("input",{type:"number",inputMode:"numeric",className:As.input,placeholder:n("calculators.gem.inputs.mineLevel.placeholder",{defaultValue:"e.g., 10"}),value:a,onChange:N=>{const v=N.currentTarget.value;if(v===""){o("");return}const _=Number(v),R=Number.isFinite(_)?_:"";o(R),h(r,R,c)},max:i1.mine})]}),s.jsxs("label",{className:As.field,children:[s.jsx("span",{children:n("calculators.gem.inputs.guildHok.label",{defaultValue:"Guild HoK"})}),s.jsx("input",{type:"number",inputMode:"numeric",className:As.input,placeholder:n("calculators.gem.inputs.guildHok.placeholder",{defaultValue:"e.g., 840"}),value:c,onChange:N=>{const v=N.currentTarget.value;if(v===""){u("");return}const _=Number(v),R=Number.isFinite(_)?_:"";u(R),h(r,a,R)},max:i1.hok})]})]}),s.jsxs("div",{className:As.gemsRow,children:[s.jsxs("div",{className:`${As.gemBox} ${m==null?As.disabled:""}`,children:[b?s.jsx("img",{className:As.gemImg,src:b,alt:n("calculators.gem.gems.normal.alt",{defaultValue:"Normal Gem"})}):s.jsx("div",{className:`${As.gemFallback} ${As.normalGem}`}),s.jsx("div",{className:As.gemLabel,children:n("calculators.gem.gems.normal.label",{defaultValue:"Normal"})}),s.jsx("div",{className:As.gemValue,children:m!=null?m:"-"})]}),s.jsxs("div",{className:`${As.gemBox} ${g==null?As.disabled:""}`,children:[w?s.jsx("img",{className:As.gemImg,src:w,alt:n("calculators.gem.gems.black.alt",{defaultValue:"Black Gem"})}):s.jsx("div",{className:`${As.gemFallback} ${As.blackGem}`}),s.jsx("div",{className:As.gemLabel,children:n("calculators.gem.gems.black.label",{defaultValue:"Black"})}),s.jsx("div",{className:As.gemValue,children:g!=null?g:"-"})]}),s.jsxs("div",{className:`${As.gemBox} ${x==null?As.disabled:""}`,children:[k?s.jsx("img",{className:As.gemImg,src:k,alt:n("calculators.gem.gems.legendary.alt",{defaultValue:"Legendary Gem"})}):s.jsx("div",{className:`${As.gemFallback} ${As.legendaryGem}`}),s.jsx("div",{className:As.gemLabel,children:n("calculators.gem.gems.legendary.label",{defaultValue:"Legendary"})}),s.jsx("div",{className:As.gemValue,children:x!=null?x:"-"})]})]}),s.jsxs("p",{className:As.hint,children:[n("calculators.gem.hint.prefix",{defaultValue:"The values are approximations and represent the "}),s.jsx("em",{children:n("calculators.gem.hint.emphasis",{defaultValue:"max possible"})}),n("calculators.gem.hint.suffix",{defaultValue:" you can find. Actual results may vary slightly."})]})]})})},Npe="_container_19zdf_1",kpe="_headerBar_19zdf_13",Cpe="_title_19zdf_31",Tpe="_meta_19zdf_47",Ipe="_description_19zdf_59",hm={container:Npe,headerBar:kpe,title:Cpe,meta:Tpe,description:Ipe},RL=({title:t,meta:e,description:n})=>s.jsxs("header",{className:hm.container,children:[s.jsxs("div",{className:hm.headerBar,children:[s.jsx("h2",{className:hm.title,children:t}),e&&s.jsx("span",{className:hm.meta,children:e})]}),n&&s.jsx("p",{className:hm.description,children:n})]}),Epe=()=>s.jsxs(s.Fragment,{children:[s.jsx(RL,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:s.jsxs(s.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",s.jsx("em",{children:"max possible"})," you can find."]})}),s.jsx(r2,{})]}),Ape="_wrapper_1mksb_1",Ppe="_gridContainer_1mksb_11",Rpe="_rowOne_1mksb_23",Lpe="_rowTwo_1mksb_35",Dpe="_cardWrapper_1mksb_43",Mpe="_controls_1mksb_51",Fpe="_resetNote_1mksb_65",Bpe="_panel_1mksb_75",$pe="_header_1mksb_91",Ope="_title_1mksb_105",Vpe="_resetBtn_1mksb_117",Upe="_table_1mksb_137",zpe="_row_1mksb_23",Gpe="_name_1mksb_179",Hpe="_selectCell_1mksb_189",Wpe="_sumCell_1mksb_207",Kpe="_footer_1mksb_219",qpe="_footerLine_1mksb_239",Qpe="_resultStack_1mksb_265",Ype="_resultLevel_1mksb_279",Xpe="_resultLevelLabel_1mksb_295",Jpe="_resultLevelSecondary_1mksb_309",Zpe="_resultXP_1mksb_323",ege="_note_1mksb_333",ws={wrapper:Ape,gridContainer:Ppe,rowOne:Rpe,rowTwo:Lpe,cardWrapper:Dpe,controls:Mpe,resetNote:Fpe,panel:Bpe,header:$pe,title:Ope,resetBtn:Vpe,table:Upe,row:zpe,name:Gpe,selectCell:Hpe,sumCell:Wpe,footer:Kpe,footerLine:qpe,resultStack:Qpe,resultLevel:Ype,resultLevelLabel:Xpe,resultLevelSecondary:Jpe,resultXP:Zpe,note:ege};function tge(t,e,n){var o;if(!Array.isArray(t)||e<=0||n<=0)return 0;const r=Math.min(e,n),i=Math.max(e,n);let a=0;for(let c=r;c<=i;c++)a+=(o=t[c])!=null?o:0;return a}function sge(t){const e=[0];for(let n=1;n<=t;n++)e.push(n);return e}function is(t,e){const n=[0,...t.map(r=>Number(r)||0)];if(e&&n.length<e+1)for(;n.length<e+1;)n.push(0);return n}const nge=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:is([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:is([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:is([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:is([54764113,57660160,60696773,63853128,67159972,70595045,74191870,77926126,81832831,90125436],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:is([31862139,36305620,42016588,47615630,54764113,61727510,70595045,79213665,90125436,100672054],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:is([11412835,15166093,20723258,27343418,36987473,48459828,63853128,83158305,103875282,128778486],10)},{key:"light_19_easteros",name:"19 Easteros",levels:is([90125436,105514978,123067419,143018630,165631756,191202824,220033230,252458197,288853442,3e8],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:is([94521325,99114456,103875282,108847145,113997992,119373368,124939452,130745487,136754704,143018630],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:is([113997992,126854805,143018630,158537364,178017293,196694080,220033230,242313317,270120546,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:is([14222021,26302843,45958126,83158305,123067419,191202824,288853442,3e8,3e8,3e8],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:is([160885033,196694080,242313317,296636662,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:is([14222021,26302843,45958126,83158305,123067419,191202824,288853442,3e8,3e8,3e8],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)}],rge=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:is([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:is([165631756,175491135,185838637,196694080,208088681,220033230,232549429,245671462,259411408,288853422],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:is([220033230,239036142,259411408,281239819,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:is([119373368,163232702,220033230,296636662,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_19_easteros",name:"Easteros",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:is([153964246,288853442,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:is([153964246,288853442,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:is([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)}],tI=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],ige=(()=>{const t=[0,...tI],e=1e3-tI.length;for(let n=0;n<e;n++)t.push(3e7);return t})(),age=is([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),oge=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),Wo={light:nge.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:rge.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:ige,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:age,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:oge,specialType:"sandstorm"}]},hx=t=>t.toLocaleString("en-US"),lge=t=>Math.round(t/15e8*100)/100,LL=t=>lge(t).toFixed(2),Um=(t,e,n)=>e>n?0:tge(t,e,n);function sI(){const t={},e={},n={};return Wo.light.forEach(r=>t[r.key]={from:0,to:0}),Wo.shadow.forEach(r=>e[r.key]={from:0,to:0}),t.light_23_school_of_magic_express={from:1,to:10},t.light_24_nordic_gods={from:9,to:10},t.light_25_ash_mountain={from:9,to:10},t.light_26_playa_hq={from:7,to:10},t.light_27_mount_olympus={from:7,to:10},t.light_28_monster_grotto={from:1,to:10},t.light_29_arcade_of_the_old_pixel_icons={from:1,to:10},e.shadow_16_the_3rd_league_of_superheroes={from:1,to:10},e.shadow_17_time_honored_school_of_magic={from:1,to:10},e.shadow_18_hemorridor={from:3,to:10},e.shadow_19_easteros={from:6,to:10},e.shadow_20_dojo_of_childhood_heroes={from:1,to:10},e.shadow_21_tavern_of_the_dark_doppelgangers={from:1,to:3},e.shadow_22_city_of_intrigues={from:1,to:10},e.shadow_23_school_of_magic_express={from:1,to:5},e.shadow_24_nordic_gods={from:1,to:5},e.shadow_25_ash_mountain={from:1,to:5},e.shadow_26_playa_hq={from:1,to:10},e.shadow_27_mount_olympus={from:1,to:2},Wo.special.forEach(r=>{r.specialType==="twister"?n[r.key]={from:486,to:1e3}:r.specialType==="cloi"?n[r.key]={from:6,to:15}:n[r.key]={from:0,to:0}}),{light:t,shadow:e,special:n}}function DL({row:t,range:e,onChange:n}){var u,h;const r=P.useMemo(()=>sge(t.maxLevel),[t.maxLevel]),i=(u=e.from)!=null?u:0,a=(h=e.to)!=null?h:0,o=P.useMemo(()=>i===0?r:r.filter(m=>m>=i),[i,r]),c=P.useMemo(()=>i===0||a===0?0:Um(t.levels,i,a),[t.levels,i,a]);return s.jsxs("tr",{className:ws.row,children:[s.jsx("td",{className:ws.name,children:t.name}),s.jsx("td",{className:ws.selectCell,children:s.jsx("select",{value:i,onChange:m=>{const g=Number(m.target.value),x=g>a?g:a;n({from:g,to:x})},children:r.map(m=>s.jsx("option",{value:m,children:m===0?"":m},m))})}),s.jsx("td",{className:ws.selectCell,children:s.jsx("select",{value:a,onChange:m=>n({from:i,to:Number(m.target.value)}),children:o.map(m=>s.jsx("option",{value:m,children:m===0?"":m},m))})}),s.jsxs("td",{className:ws.sumCell,children:[hx(c)," XP"]})]})}function nI({title:t,rows:e,ranges:n,setRanges:r}){const i=P.useMemo(()=>e.reduce((a,o)=>{const c=n[o.key]||{from:0,to:0};return a+Um(o.levels,c.from,c.to)},0),[e,n]);return s.jsxs("div",{className:ws.panel,children:[s.jsx("div",{className:ws.header,children:s.jsx("div",{className:ws.title,children:t})}),s.jsxs("table",{className:ws.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Dungeon"}),s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum XP"})]})}),s.jsx("tbody",{children:e.map(a=>{var o;return s.jsx(DL,{row:a,range:(o=n[a.key])!=null?o:{from:0,to:0},onChange:c=>r(a.key,c)},a.key)})})]}),s.jsx("div",{className:ws.footer,children:s.jsxs("div",{className:ws.footerLine,children:[s.jsxs("span",{children:["Sum Total ",t]}),s.jsxs("span",{className:ws.resultStack,children:[s.jsxs("span",{className:ws.resultXP,children:[hx(i)," XP"]}),s.jsxs("span",{className:ws.resultLevelSecondary,children:["Level ",LL(i)]})]})]})})]})}function i2({initialState:t,onStateChange:e}){var I,N,v;const n=P.useMemo(()=>sI(),[]),[r,i]=P.useState((I=t==null?void 0:t.light)!=null?I:n.light),[a,o]=P.useState((N=t==null?void 0:t.shadow)!=null?N:n.shadow),[c,u]=P.useState((v=t==null?void 0:t.special)!=null?v:n.special),h=(_,R,j)=>{e&&e({light:_,shadow:R,special:j})},m=(_,R)=>{i(j=>{const S={...j,[_]:R};return h(S,a,c),S})},g=(_,R)=>{o(j=>{const S={...j,[_]:R};return h(r,S,c),S})},x=(_,R)=>{u(j=>{const S={...j,[_]:R};return h(r,a,S),S})};P.useEffect(()=>{var _,R,j;if(t){i((_=t.light)!=null?_:n.light),o((R=t.shadow)!=null?R:n.shadow),u((j=t.special)!=null?j:n.special);return}i(n.light),o(n.shadow),u(n.special)},[t,n]);const b=P.useMemo(()=>Wo.light.reduce((_,R)=>{const j=r[R.key];return _+(j?Um(R.levels,j.from,j.to):0)},0),[r]),w=P.useMemo(()=>Wo.shadow.reduce((_,R)=>{const j=a[R.key];return _+(j?Um(R.levels,j.from,j.to):0)},0),[a]),k=P.useMemo(()=>Wo.special.reduce((_,R)=>{const j=c[R.key];return _+(j?Um(R.levels,j.from,j.to):0)},0),[c]),A=b+w+k,L=()=>{const _=sI();i(_.light),o(_.shadow),u(_.special),h(_.light,_.shadow,_.special)};return s.jsxs("div",{className:ws.wrapper,children:[s.jsxs("div",{className:ws.controls,children:[s.jsx("button",{className:ws.resetBtn,onClick:L,children:"Reset"}),s.jsx("span",{className:ws.resetNote,children:"Resets all selections to defaults."})]}),s.jsxs("div",{className:ws.gridContainer,children:[s.jsxs("div",{className:ws.rowOne,children:[s.jsx("div",{className:ws.cardWrapper,children:s.jsx(nI,{title:"Light World",rows:Wo.light,ranges:r,setRanges:m})}),s.jsx("div",{className:ws.cardWrapper,children:s.jsx(nI,{title:"Shadow World",rows:Wo.shadow,ranges:a,setRanges:g})})]}),s.jsx("div",{className:ws.rowTwo,children:s.jsxs("div",{className:ws.panel,children:[s.jsx("div",{className:ws.header,children:s.jsx("div",{className:ws.title,children:"Special Dungeons"})}),s.jsxs("table",{className:ws.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Dungeon"}),s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum"})]})}),s.jsx("tbody",{children:Wo.special.map(_=>{var R;return s.jsx(DL,{row:_,range:(R=c[_.key])!=null?R:{from:0,to:0},onChange:j=>x(_.key,j)},_.key)})})]}),s.jsxs("div",{className:ws.footer,children:[s.jsxs("div",{className:ws.footerLine,children:[s.jsx("span",{children:"Sum Total Special"}),s.jsxs("span",{children:[hx(k)," XP"]})]}),s.jsxs("div",{className:ws.footerLine,children:[s.jsx("span",{children:"Total XP"}),s.jsxs("span",{className:ws.resultStack,children:[s.jsxs("span",{className:ws.resultXP,children:[hx(A)," XP"]}),s.jsxs("span",{className:ws.resultLevel,children:[s.jsx("span",{className:ws.resultLevelLabel,children:"Level"})," ",LL(A)]})]})]}),s.jsx("div",{className:ws.note,children:"XP values are summed per selection and converted to level using the project formula."})]})]})})]})]})}function cge(){return s.jsx("div",{style:{padding:12},children:s.jsx(i2,{})})}const dge=()=>s.jsx(En,{title:"Progression  Early Game"}),uge="_wrap_n2poq_31",hge="_title_n2poq_33",mge="_infoBox_n2poq_39",pge="_infoTitle_n2poq_63",gge="_infoList_n2poq_73",fge="_section_n2poq_89",vge="_h2_n2poq_101",xge="_h3_n2poq_103",yge="_intro_n2poq_105",bge="_ul_n2poq_107",_ge="_img_n2poq_113",Ys={wrap:uge,title:hge,infoBox:mge,infoTitle:pge,infoList:gge,section:fge,h2:vge,h3:xge,intro:yge,ul:bge,img:_ge},wge=()=>{sr();const t=[ud("first-weekend-guide-day1",900),ud("first-weekend-guide-day2",900),ud("first-weekend-guide-day3",900)];return s.jsxs("div",{className:Ys.wrap,children:[s.jsx("h1",{className:Ys.title,children:"First Weekend Guide"}),s.jsxs("aside",{className:Ys.infoBox,role:"note","aria-label":"Important Level Tips",children:[s.jsx("div",{className:Ys.infoTitle,children:"Important Level Tips"}),s.jsxs("ul",{className:Ys.infoList,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),s.jsx("p",{className:Ys.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),s.jsxs("div",{className:Ys.section,children:[s.jsx("h2",{className:Ys.h2,children:"Preparation before launch"}),s.jsxs("ul",{className:Ys.ul,children:[s.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),s.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),s.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),s.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),s.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),s.jsxs("div",{className:Ys.section,children:[s.jsx("h2",{className:Ys.h2,children:"Day 1"}),s.jsx("h3",{className:Ys.h3,children:"Level 13"}),s.jsxs("ul",{className:Ys.ul,children:[s.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),s.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&s.jsx("img",{className:Ys.img,src:t[0],alt:"Day 1 overview"})]}),s.jsxs("div",{className:Ys.section,children:[s.jsx("h3",{className:Ys.h3,children:"Level 410"}),s.jsxs("ul",{className:Ys.ul,children:[s.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),s.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),s.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),s.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),s.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),s.jsxs("div",{className:Ys.section,children:[s.jsx("h2",{className:Ys.h2,children:"Day 2"}),s.jsx("h3",{className:Ys.h3,children:"Level 1015"}),s.jsxs("ul",{className:Ys.ul,children:[s.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),s.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),s.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),s.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&s.jsx("img",{className:Ys.img,src:t[1],alt:"Day 2 overview"})]}),s.jsxs("div",{className:Ys.section,children:[s.jsx("h2",{className:Ys.h2,children:"Day 3"}),s.jsx("h3",{className:Ys.h3,children:"Level 1520"}),s.jsxs("ul",{className:Ys.ul,children:[s.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),s.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&s.jsx("img",{className:Ys.img,src:t[2],alt:"Day 3 overview"})]})]})},jge=()=>s.jsx(En,{title:"Max Item Stats Calculator"}),Sge=()=>s.jsx(En,{title:"Fortress Package skip order (Early)"}),Nge=()=>s.jsx(En,{title:"Underworld Pro Package skip order (Early)"}),kge=()=>s.jsx(En,{title:"Gem Calculator (Early)"}),Cge=()=>s.jsx(En,{title:"Fortress attack duplication guide (Early)"}),Tge=()=>s.jsx(En,{title:"Progression  Mid Game"}),Ige="_wrap_1x7jo_31",Ege="_header_1x7jo_35",Age="_titles_1x7jo_55",Pge="_h1_1x7jo_57",Rge="_lead_1x7jo_59",Lge="_ctaRow_1x7jo_63",Dge="_cta_1x7jo_63",Mge="_section_1x7jo_85",Fge="_sectionGrid_1x7jo_87",Bge="_card_1x7jo_99",$ge="_h2_1x7jo_103",Oge="_h3_1x7jo_105",Vge="_p_1x7jo_107",Uge="_ul_1x7jo_111",zge="_ol_1x7jo_111",Gge="_figure_1x7jo_117",Hge="_figureNarrow_1x7jo_139",Wge="_img_1x7jo_149",Kge="_fallbackImg_1x7jo_151",qge="_figCaption_1x7jo_159",Qge="_tableWrap_1x7jo_163",Yge="_table_1x7jo_163",Xge="_footer_1x7jo_217",Jge="_tools_1x7jo_219",Zge="_toolBtn_1x7jo_221",fs={wrap:Ige,header:Ege,titles:Age,h1:Pge,lead:Rge,ctaRow:Lge,cta:Dge,section:Mge,sectionGrid:Fge,card:Bge,h2:$ge,h3:Oge,p:Vge,ul:Uge,ol:zge,figure:Gge,figureNarrow:Hge,img:Wge,fallbackImg:Kge,figCaption:qge,tableWrap:Qge,table:Yge,footer:Xge,tools:Jge,toolBtn:Zge},efe=1400;function tfe(){const t=P.useMemo(()=>ud("goldxpcurve",efe),[]);return s.jsxs("div",{className:fs.wrap,children:[s.jsxs("header",{className:fs.header,children:[s.jsxs("div",{className:fs.titles,children:[s.jsx("h1",{className:fs.h1,children:"Dungeon Pause"}),s.jsx("p",{className:fs.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),s.jsxs("div",{className:fs.ctaRow,children:[s.jsx(zs,{className:fs.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),s.jsx(zs,{className:fs.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),s.jsxs("section",{className:fs.section,children:[s.jsx("h2",{className:fs.h2,children:"Worum gehts?"}),s.jsxs("p",{className:fs.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",s.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",s.jsx("strong",{children:"Level 370"})," und endet um ",s.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),s.jsxs("section",{className:fs.section,children:[s.jsx("h3",{className:fs.h3,children:"XP & Gold  Verlauf"}),s.jsxs("div",{className:`${fs.figure} ${fs.figureNarrow}`,children:[t?s.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:fs.img}):s.jsx("div",{className:fs.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),s.jsx("div",{className:fs.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),s.jsxs("section",{className:fs.sectionGrid,children:[s.jsxs("div",{className:fs.card,children:[s.jsx("h3",{className:fs.h3,children:"Start & Ende"}),s.jsxs("ul",{className:fs.ul,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",s.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",s.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),s.jsxs("div",{className:fs.card,children:[s.jsx("h3",{className:fs.h3,children:"Twister & Light/Shadow"}),s.jsxs("ul",{className:fs.ul,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Twister:"})," bei ca. ",s.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),s.jsxs("li",{children:["Whrend der Pause weiterhin ",s.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",s.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",s.jsx("em",{children:"Devilsatt"})," &"," ",s.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),s.jsxs("section",{className:fs.section,children:[s.jsx("h3",{className:fs.h3,children:"Vorgehen"}),s.jsxs("ol",{className:fs.ol,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",s.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",s.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",s.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),s.jsxs("section",{className:fs.section,children:[s.jsx("h3",{className:fs.h3,children:"Kompaktbersicht"}),s.jsx("div",{className:fs.tableWrap,children:s.jsxs("table",{className:fs.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Aspekt"}),s.jsx("th",{children:"Empfehlung"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:"Start (Faustregel)"}),s.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Ende (Faustregel)"}),s.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Open XP vor Eintritt"}),s.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Twister"}),s.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Light/Shadow"}),s.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Whrend der Pause"}),s.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Pets"}),s.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Optimaler Exit"}),s.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),s.jsx("footer",{className:fs.footer,children:s.jsxs("div",{className:fs.tools,children:[s.jsx(zs,{className:fs.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),s.jsx(zs,{className:fs.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const sfe=()=>s.jsx(En,{title:"Dungeon Pause open XP Calculator"}),nfe="_wrap_1uhww_3",rfe="_headerBar_1uhww_15",ife="_title_1uhww_33",afe="_meta_1uhww_45",ofe="_description_1uhww_55",lfe="_section_1uhww_69",cfe="_sectionTitle_1uhww_77",dfe="_steps_1uhww_87",Za={wrap:nfe,headerBar:rfe,title:ife,meta:afe,description:ofe,section:lfe,sectionTitle:cfe,steps:dfe};function ufe(){return s.jsxs("div",{className:Za.wrap,children:[s.jsxs("div",{className:Za.headerBar,children:[s.jsx("h2",{className:Za.title,children:"Dungeon Pause Exit"}),s.jsx("span",{className:Za.meta,children:"Last updated: 28.03.2025"})]}),s.jsx("p",{className:Za.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),s.jsxs("section",{className:Za.section,children:[s.jsx("h3",{className:Za.sectionTitle,children:"Sequence for the Exit"}),s.jsxs("ol",{className:Za.steps,children:[s.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),s.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),s.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),s.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),s.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),s.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),s.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),s.jsxs("section",{className:Za.section,children:[s.jsx("h3",{className:Za.sectionTitle,children:"Extra Tip"}),s.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const hfe=()=>s.jsx(En,{title:"Gem Calculator (Mid)"}),mfe=()=>s.jsx(En,{title:"Calendar Skip"}),pfe=()=>s.jsx(En,{title:"Progression  Late Game"}),gfe="_layout_13sgm_29",ffe="_side_13sgm_49",vfe="_sideHead_13sgm_61",xfe="_search_13sgm_71",yfe="_spotBtn_13sgm_89",bfe="_sideList_13sgm_109",_fe="_sideItem_13sgm_111",wfe="_active_13sgm_119",jfe="_sideTitle_13sgm_121",Sfe="_ico_13sgm_123",Nfe="_badge_13sgm_125",kfe="_detail_13sgm_139",Cfe="_detailInner_13sgm_141",Tfe="_detailHead_13sgm_143",Ife="_detailTitle_13sgm_145",Efe="_empty_13sgm_147",Afe="_grid_13sgm_151",Pfe="_card_13sgm_157",Rfe="_cardHead_13sgm_175",Lfe="_btnGrid_13sgm_177",Dfe="_itemBtn_13sgm_179",Mfe="_spotWrap_13sgm_203",Ffe="_spot_13sgm_89",Bfe="_spotHead_13sgm_227",$fe="_spotSearch_13sgm_235",Ofe="_spotClose_13sgm_243",Vfe="_spotList_13sgm_253",Ufe="_spotItem_13sgm_255",zfe="_spotItemEmpty_13sgm_259",Gfe="_spotCat_13sgm_261",Hfe="_spotLabel_13sgm_263",Wfe="_mark_13sgm_267",hs={layout:gfe,side:ffe,sideHead:vfe,search:xfe,spotBtn:yfe,sideList:bfe,sideItem:_fe,active:wfe,sideTitle:jfe,ico:Sfe,badge:Nfe,detail:kfe,detailInner:Cfe,detailHead:Tfe,detailTitle:Ife,empty:Efe,grid:Afe,card:Pfe,cardHead:Rfe,btnGrid:Lfe,itemBtn:Dfe,spotWrap:Mfe,spot:Ffe,spotHead:Bfe,spotSearch:$fe,spotClose:Ofe,spotList:Vfe,spotItem:Ufe,spotItemEmpty:zfe,spotCat:Gfe,spotLabel:Hfe,mark:Wfe};function Kfe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mm(t,e){if(!e)return t;const n=new RegExp(`(${Kfe(e)})`,"ig");return t.replace(n,`<mark class="${hs.mark}">$1</mark>`)}function rI(t){if(!t||!t.length)return 0;let e=0;for(const n of t)if(n.sub2&&n.sub2.length)if(n.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of n.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=n.sub2.length;else e+=1;return e}function qfe(t){const e=[];for(const n of t){const r=n.label;if(!(!n.sub||!n.sub.length))for(const i of n.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(o=>o.sub2&&o.sub2.length))for(const o of i.sub2)if(o.sub2&&o.sub2.length)for(const c of o.sub2)e.push({full:`${r}  ${i.label}  ${o.label}  ${c.label}`,catKey:n.key,subKey:i.key,sub2Key:c.key});else e.push({full:`${r}  ${i.label}  ${o.label}`,catKey:n.key,subKey:i.key,sub2Key:o.key});else for(const o of i.sub2)e.push({full:`${r}  ${i.label}  ${o.label}`,catKey:n.key,subKey:i.key,sub2Key:o.key});else e.push({full:`${r}  ${i.label}`,catKey:n.key,subKey:i.key})}return e}function Qfe(t,e){var n;return e&&t.some(r=>r.key===e)?e:((n=t==null?void 0:t[0])==null?void 0:n.key)||""}const Yfe=({categories:t,onNavigate:e,autoFocusSearch:n})=>{const[r,i]=P.useState(()=>{var I;return((I=t==null?void 0:t[0])==null?void 0:I.key)||""}),[a,o]=P.useState(""),[c,u]=P.useState(!1),h=P.useRef(null),m=P.useMemo(()=>{const I=a.trim().toLowerCase();if(!I)return t;const N=v=>v.toLowerCase().includes(I);return t.map(v=>{const _=N(v.label),R=[];for(const j of v.sub||[]){const S=N(j.label);if(j.sub2&&j.sub2.length)if(j.sub2.some(M=>M.sub2&&M.sub2.length)){const M=[];for(const T of j.sub2)if(T.sub2&&T.sub2.length){const F=T.sub2.filter(D=>N(D.label));F.length&&M.push({...T,sub2:F})}else N(T.label)&&M.push(T);(S||M.length)&&R.push({...j,sub2:M})}else{const M=j.sub2.filter(T=>N(T.label));(S||M.length)&&R.push({...j,sub2:M})}else S&&R.push(j)}return _||R.length?{...v,sub:R.length?R:v.sub}:null}).filter(Boolean)},[t,a]),g=P.useMemo(()=>{const I=m.length?m:t,N=Qfe(I,r);return I.find(v=>v.key===N)||I[0]||null},[m,t,r]),x=P.useMemo(()=>qfe(t),[t]),[b,w]=P.useState(""),k=P.useMemo(()=>{const I=b.trim().toLowerCase();return I?x.filter(N=>N.full.toLowerCase().includes(I)):x},[x,b]);P.useEffect(()=>{const I=N=>{const v=N.key.toLowerCase()==="k";(N.metaKey||N.ctrlKey)&&v&&(N.preventDefault(),u(!0),setTimeout(()=>{var _;return(_=h.current)==null?void 0:_.focus()},0)),N.key==="Escape"&&u(!1)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[]);const A=P.useRef(null);P.useEffect(()=>{var I;n&&((I=A.current)==null||I.focus())},[n]);const L=()=>{var R;const I=a.trim().toLowerCase(),N=(I?x.find(j=>j.full.toLowerCase().includes(I)):x[0])||null;if(N){e({tab:N.catKey,sub:N.subKey,sub2:N.sub2Key});return}const v=g,_=(R=v==null?void 0:v.sub)==null?void 0:R[0];if(!(!v||!_))if(_.sub2&&_.sub2.length)if(_.sub2.some(S=>S.sub2&&S.sub2.length)){const S=_.sub2[0];S.sub2&&S.sub2.length?e({tab:v.key,sub:_.key,sub2:S.sub2[0].key}):e({tab:v.key,sub:_.key,sub2:S.key})}else e({tab:v.key,sub:_.key,sub2:_.sub2[0].key});else e({tab:v.key,sub:_.key})};return s.jsxs("div",{className:hs.layout,children:[s.jsxs("div",{className:hs.side,children:[s.jsxs("div",{className:hs.sideHead,children:[s.jsx("input",{ref:A,className:hs.search,type:"search",placeholder:"Suche",value:a,onChange:I=>o(I.target.value),onKeyDown:I=>{I.key==="Enter"&&L()}}),s.jsx("button",{className:hs.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var I;return(I=h.current)==null?void 0:I.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),s.jsx("div",{className:hs.sideList,children:(m.length?m:t).map(I=>s.jsxs("div",{className:`${hs.sideItem} ${(g==null?void 0:g.key)===I.key?hs.active:""}`,onClick:()=>i(I.key),children:[s.jsxs("span",{className:hs.sideTitle,children:[I.icon?s.jsx("span",{className:hs.ico,"aria-hidden":!0,children:I.icon}):null,I.label]}),s.jsx("span",{className:hs.badge,children:rI(I.sub)})]},I.key))})]}),s.jsx("div",{className:hs.detail,children:g?s.jsxs("div",{className:hs.detailInner,children:[s.jsxs("div",{className:hs.detailHead,children:[s.jsxs("h3",{className:hs.detailTitle,children:[g.icon?s.jsx("span",{className:hs.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),s.jsxs("div",{className:hs.badge,children:[rI(g.sub)," Eintrge"]})]}),s.jsx("div",{className:hs.grid,children:(g.sub||[]).map(I=>{const N=I.sub2&&I.sub2.length>0,v=N&&I.sub2.some(_=>_.sub2&&_.sub2.length);return s.jsxs("div",{className:hs.card,children:[s.jsx("div",{className:hs.cardHead,dangerouslySetInnerHTML:{__html:mm(I.label,a)}}),N?s.jsx("div",{className:hs.btnGrid,children:v?I.sub2.flatMap(_=>_.sub2&&_.sub2.length?_.sub2.map(R=>s.jsx("button",{className:hs.itemBtn,onClick:()=>e({tab:g.key,sub:I.key,sub2:R.key}),dangerouslySetInnerHTML:{__html:mm(`${_.label}  ${R.label}`,a)}},`${_.key}__${R.key}`)):[s.jsx("button",{className:hs.itemBtn,onClick:()=>e({tab:g.key,sub:I.key,sub2:_.key}),dangerouslySetInnerHTML:{__html:mm(_.label,a)}},_.key)]):I.sub2.map(_=>s.jsx("button",{className:hs.itemBtn,onClick:()=>e({tab:g.key,sub:I.key,sub2:_.key}),dangerouslySetInnerHTML:{__html:mm(_.label,a)}},_.key))}):s.jsx("div",{className:hs.btnGrid,children:s.jsx("button",{className:hs.itemBtn,onClick:()=>e({tab:g.key,sub:I.key}),dangerouslySetInnerHTML:{__html:mm(I.label,a)}})})]},I.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(I=>!I.sub2||!I.sub2.length?!I.label.toLowerCase().includes(a.trim().toLowerCase()):I.sub2.some(v=>v.sub2&&v.sub2.length)?I.sub2.every(v=>v.sub2&&v.sub2.length?v.sub2.every(_=>!_.label.toLowerCase().includes(a.trim().toLowerCase())):!v.label.toLowerCase().includes(a.trim().toLowerCase())):I.sub2.every(v=>!v.label.toLowerCase().includes(a.trim().toLowerCase())))?s.jsxs("div",{className:hs.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):s.jsx("div",{className:hs.empty,children:"Keine Kategorie gefunden."})}),c&&s.jsx("div",{className:hs.spotWrap,onClick:()=>u(!1),children:s.jsxs("div",{className:hs.spot,onClick:I=>I.stopPropagation(),children:[s.jsxs("div",{className:hs.spotHead,children:[s.jsx("input",{ref:h,className:hs.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:b,onChange:I=>w(I.target.value)}),s.jsx("button",{className:hs.spotClose,onClick:()=>u(!1),children:"Esc"})]}),s.jsx("div",{className:hs.spotList,children:k.length===0?s.jsx("div",{className:hs.spotItemEmpty,children:"Keine Treffer"}):k.map((I,N)=>s.jsxs("div",{className:hs.spotItem,onClick:()=>{u(!1),e({tab:I.catKey,sub:I.subKey,sub2:I.sub2Key})},children:[s.jsx("div",{className:hs.spotCat,children:I.catKey}),s.jsx("div",{className:hs.spotLabel,children:I.full})]},N))})]})})]})},Xfe={gamefeatures:Fue,progression:Bue,hellevator:$ue,"legendary-dungeon":Oue,events:Vue,calculators:que,infographics:Que,"class-book":Yue,dungeons:Xue},iI={gamefeatures:{fortress:Jue,underworld:_he,arenaam:She},hellevator:{"hellevator-guide":fme},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":vme},calculators:{"fortress-calculator":AL,"underworld-calculator":PL,"max-item-stats-calculator":spe,"gem-calculator":Epe,"dungeon-pause-open-xp-calculator":cge},progression:{early:dge,mid:Tge,late:pfe}},a1={gamefeatures:{arenaam:{"am-rune-bonuses":tme,"am-build-order":gme},underworld:{"underworld-calculator":whe,"underworld-pro-package-skip-order":jhe},fortress:{"fortress-calculator":Zue,"fortress-package-skip-order":yhe,"fortress-attack-duplication":bhe}},progression:{early:{"first-weekend-guide":wge,"max-item-stats-calculator":jge,"fortress-package-skip-order":Sge,"underworld-pro-package-skip-order":Nge,"gem-calculator":kge,"fortress-attack-duplication":Cge},mid:{"dungeon-pause":tfe,"dungeon-pause-open-xp-calculator":sfe,"dungeon-pause-exit":ufe,"gem-calculator":hfe,"calendar-skip":mfe}}};function Jfe(){const[t,e]=sr(),n=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;n?n&&!r?a=Xfe[n]||null:n&&r&&!i?a=iI[n]&&iI[n][r]||null:n&&r&&i&&(a=a1[n]&&a1[n][r]&&a1[n][r][i]||null):a=null;const o=c=>{const u=new URLSearchParams(t);u.set("tab",c.tab),c.sub?u.set("sub",c.sub):u.delete("sub"),c.sub2?u.set("sub2",c.sub2):u.delete("sub2"),e(u,{replace:!1})};return s.jsxs(as,{children:[s.jsx("div",{className:vu.topWrap,children:s.jsx(Eue,{logoSrc:Kj,categories:hd,titleI18nKey:"guides.index.title"})}),s.jsx("div",{className:vu.divider}),s.jsx("div",{className:vu.contentArea,children:a?s.jsx(a,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:vu.placeholder,children:[s.jsx("h2",{className:vu.placeholderTitle,children:"Guides"}),s.jsx("p",{className:vu.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),s.jsx(Yfe,{categories:hd,onNavigate:o,autoFocusSearch:!1})]})})]})}const Zfe="modulepreload",eve=function(t){return"/"+t},aI={},ct=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=u(n.map(h=>{if(h=eve(h),h in aI)return;aI[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":Zfe,m||(x.as="script"),x.crossOrigin="",x.href=h,c&&x.setAttribute("nonce",c),document.head.appendChild(x),m)return new Promise((b,w)=>{x.addEventListener("load",b),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},o1=Object.assign({"../../content/guidehub-v2/de/calculators/dungeon-pause-open-xp-calculator/index.md":()=>ct(()=>import("./index-BccBAByF.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/fortress-calculator/index.md":()=>ct(()=>import("./index-Cyz1Q9ly.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/gem-calculator/index.md":()=>ct(()=>import("./index-Bzwi2WKw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/index.md":()=>ct(()=>import("./index-Bj-2sk9C.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/max-item-stats-calculator/index.md":()=>ct(()=>import("./index-VIKJeLo2.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/underworld-calculator/index.md":()=>ct(()=>import("./index-B1ZmDA31.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/class-book/index.md":()=>ct(()=>import("./index-CM6ckwNB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/hellevator/hellevator-guide.md":()=>ct(()=>import("./hellevator-guide-CSuvFlly.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/hellevator/index.md":()=>ct(()=>import("./index-C8RGTfnk.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/index.md":()=>ct(()=>import("./index-B8qQ1zkH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/legendary-dungeon/index.md":()=>ct(()=>import("./index-BSyGjv3f.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/legendary-dungeon/legendary-dungeon-guide-epics-legendaries.md":()=>ct(()=>import("./legendary-dungeon-guide-epics-legendaries-Bush_y1j.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/am-build-order.md":()=>ct(()=>import("./am-build-order-CbkuUWAg.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/am-rune-bonuses.md":()=>ct(()=>import("./am-rune-bonuses-DthFi9NV.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/index.md":()=>ct(()=>import("./index-swq29ovJ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-attack-duplication.md":()=>ct(()=>import("./fortress-attack-duplication-dO_fjrWc.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-calculator.md":()=>ct(()=>import("./fortress-calculator-oChNdHV0.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-package-skip-order.md":()=>ct(()=>import("./fortress-package-skip-order-dIpYHLyt.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/index.md":()=>ct(()=>import("./index-CxcVn1-f.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/index.md":()=>ct(()=>import("./index-D1Z6jRml.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/index.md":()=>ct(()=>import("./index-C7gSE_OQ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/underworld-calculator.md":()=>ct(()=>import("./underworld-calculator-B-QJcbJo.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/underworld-pro-package-skip-order.md":()=>ct(()=>import("./underworld-pro-package-skip-order-BPBlsGqH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/home.md":()=>ct(()=>import("./home-CpWCkAMy.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/infographics/index.md":()=>ct(()=>import("./index-Bq-ZhXgC.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/first-weekend-guide.md":()=>ct(()=>import("./first-weekend-guide-ByGMUoW8.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/fortress-attack-duplication.md":()=>ct(()=>import("./fortress-attack-duplication-DO2y3c6F.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/fortress-package-skip-order.md":()=>ct(()=>import("./fortress-package-skip-order-yRqDN5dU.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/gem-calculator.md":()=>ct(()=>import("./gem-calculator-O_9f14l2.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/index.md":()=>ct(()=>import("./index-SSi3aA8C.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/max-item-stats-calculator.md":()=>ct(()=>import("./max-item-stats-calculator-C0xzNTgN.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/underworld-pro-package-skip-order.md":()=>ct(()=>import("./underworld-pro-package-skip-order-v6hmJBRZ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/index.md":()=>ct(()=>import("./index-BbODEWMa.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/late/index.md":()=>ct(()=>import("./index-DNzHOCOW.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/calendar-skip.md":()=>ct(()=>import("./calendar-skip-BUyRUAXw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/dungeon-pause-exit.md":()=>ct(()=>import("./dungeon-pause-exit-B5IFUcUm.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/dungeon-pause-open-xp-calculator.md":()=>ct(()=>import("./dungeon-pause-open-xp-calculator-D8V5pOUU.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/gem-calculator.md":()=>ct(()=>import("./gem-calculator-BSbXOrQl.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/index.md":()=>ct(()=>import("./index-C7G1cFaF.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/dungeon-pause-open-xp-calculator/index.md":()=>ct(()=>import("./index-Dh8XH0bw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/fortress-calculator/index.md":()=>ct(()=>import("./index-Q6Nc81Sw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/gem-calculator/index.md":()=>ct(()=>import("./index-DMwsmNS8.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/index.md":()=>ct(()=>import("./index-CVPSESMR.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/max-item-stats-calculator/index.md":()=>ct(()=>import("./index-BrqJGpac.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/underworld-calculator/index.md":()=>ct(()=>import("./index-C4KmCqeJ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/class-book/index.md":()=>ct(()=>import("./index-D-MLvn0d.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/hellevator/hellevator-guide.md":()=>ct(()=>import("./hellevator-guide-BiVEfiVG.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/hellevator/index.md":()=>ct(()=>import("./index-C5svQqJ3.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/index.md":()=>ct(()=>import("./index-Bk41PZMs.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/legendary-dungeon/index.md":()=>ct(()=>import("./index-C-0okAmy.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/legendary-dungeon/legendary-dungeon-guide-epics-legendaries.md":()=>ct(()=>import("./legendary-dungeon-guide-epics-legendaries-6x37v76n.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/am-build-order.md":()=>ct(()=>import("./am-build-order-DrZTZN4Y.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/am-rune-bonuses.md":()=>ct(()=>import("./am-rune-bonuses-CHSsVUFd.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/index.md":()=>ct(()=>import("./index-DSdlq0WB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-attack-duplication.md":()=>ct(()=>import("./fortress-attack-duplication-COz0aNOt.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-calculator.md":()=>ct(()=>import("./fortress-calculator-B8Y-Jqe7.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-package-skip-order.md":()=>ct(()=>import("./fortress-package-skip-order-DD-OFNyA.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/index.md":()=>ct(()=>import("./index-pW6nTut-.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/index.md":()=>ct(()=>import("./index-Buci9R0c.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/index.md":()=>ct(()=>import("./index-BBKqkJkB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/underworld-calculator.md":()=>ct(()=>import("./underworld-calculator-DlMcBkpX.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/underworld-pro-package-skip-order.md":()=>ct(()=>import("./underworld-pro-package-skip-order-mti9NSZl.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/home.md":()=>ct(()=>import("./home-BDNnNlKn.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/infographics/index.md":()=>ct(()=>import("./index-Hr_u-pc5.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/first-weekend-guide.md":()=>ct(()=>import("./first-weekend-guide-B-dpwGXG.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/fortress-attack-duplication.md":()=>ct(()=>import("./fortress-attack-duplication-CIDaqJ_q.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/fortress-package-skip-order.md":()=>ct(()=>import("./fortress-package-skip-order-wmG25680.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/gem-calculator.md":()=>ct(()=>import("./gem-calculator-CC2DMWQa.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/index.md":()=>ct(()=>import("./index-CwLKLdCz.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/max-item-stats-calculator.md":()=>ct(()=>import("./max-item-stats-calculator-DLnYXe6u.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/underworld-pro-package-skip-order.md":()=>ct(()=>import("./underworld-pro-package-skip-order-DJsAcroK.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/index.md":()=>ct(()=>import("./index-UGKl7Bwz.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/late/index.md":()=>ct(()=>import("./index-MqIV6usH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/calendar-skip.md":()=>ct(()=>import("./calendar-skip-BpANE0x7.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/dungeon-pause-exit.md":()=>ct(()=>import("./dungeon-pause-exit-bXq3IZPW.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/dungeon-pause-open-xp-calculator.md":()=>ct(()=>import("./dungeon-pause-open-xp-calculator-AMOhwByC.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/gem-calculator.md":()=>ct(()=>import("./gem-calculator-DXl-gr4a.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/index.md":()=>ct(()=>import("./index-LZ44SvgE.js"),[]).then(t=>t.default)}),l1=new Map,oI={title:"",category:"",status:"work_in_progress",gallery:[]};function tve(t){return t==="up_to_date"||t==="work_in_progress"||t==="outdated"}function zm(t){const e=t.trim();return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e}function sve(t){const e=t.trim();return e?e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1).split(",").map(r=>zm(r).trim()).filter(Boolean):[zm(e)].filter(Boolean):[]}function nve(t){var c;const e=t.replace(/^\uFEFF/,""),n=e.match(/^---\r?\n([\s\S]*?)\r?\n---\r?\n?/);if(!n)return{frontmatter:{...oI},body:e};const r={...oI},i=n[1].split(/\r?\n/);let a=null;for(const u of i){const h=u.trim();if(!h)continue;const m=h.match(/^-+\s+(.*)$/);if(a==="gallery"&&m){r.gallery.push(zm(m[1]));continue}const g=h.match(/^([a-zA-Z0-9_]+)\s*:\s*(.*)$/);if(!g)continue;const x=g[1],b=(c=g[2])!=null?c:"";if(a=x,x==="gallery"){r.gallery=sve(b);continue}if(x==="status"){const w=zm(b);tve(w)&&(r.status=w);continue}(x==="title"||x==="category")&&(r[x]=zm(b))}const o=e.slice(n[0].length);return{frontmatter:r,body:o}}function lI(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c1(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d1(t){let e=lI(t);return e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,i)=>{const a=c1(String(r!=null?r:""));return`<img src="${c1(String(i!=null?i:""))}" alt="${a}" />`}),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(n,r,i)=>{const a=lI(String(r!=null?r:"")),o=c1(String(i!=null?i:"")),u=/^https?:\/\//i.test(i)?' target="_blank" rel="noopener noreferrer"':"";return`<a href="${o}"${u}>${a}</a>`}),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e}function rve(t){return t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function ive(t){const e=t.split(/\r?\n/),n=[],r=[],i=new Set;let a=!1;const o=()=>{a&&(n.push("</ul>"),a=!1)},c=h=>{let m=h,g=1;for(;i.has(m);)m=`${h}-${g}`,g+=1;return i.add(m),m},u=h=>{const m=h.match(/\s*\{#([a-zA-Z0-9\-_]+)\}\s*$/);return m?{text:h.replace(m[0],"").trimEnd(),anchor:m[1]}:{text:h,anchor:null}};for(const h of e){const m=h.trim();if(!m){o();continue}const g=m.match(/^\[\[embed:([a-z0-9-_]+)\]\]$/i);if(g){o();const k=g[1].toLowerCase();n.push(`<div data-embed="${k}"></div>`);continue}const x=m.match(/^\[\[asset:([a-z0-9-_]+)\]\]$/i);if(x){o();const k=x[1].toLowerCase();n.push(`<div data-asset="${k}"></div>`);continue}if(m==="---"||m==="***"){o(),n.push("<hr />");continue}const b=m.match(/^(#{1,3})\s+(.*)$/);if(b){o();const k=b[1].length,A=b[2].trim(),{text:L,anchor:I}=u(A),N=d1(L),v=I||rve(L)||"section";if(k===2){const _=c(v);r.push({id:_,text:L}),n.push(`<h2 id="${_}">${N}</h2>`)}else if(k===1)if(I){const _=c(v);n.push(`<h1 id="${_}">${N}</h1>`)}else n.push(`<h1>${N}</h1>`);else if(I){const _=c(v);n.push(`<h3 id="${_}">${N}</h3>`)}else n.push(`<h3>${N}</h3>`);continue}const w=m.match(/^-+\s+(.*)$/);if(w){a||(n.push("<ul>"),a=!0),n.push(`<li>${d1(w[1])}</li>`);continue}o(),n.push(`<p>${d1(m)}</p>`)}return o(),{html:n.join(`
`),toc:r}}function cI(t,e){const{tab:n,sub:r,sub2:i}=e;return!n&&!r&&!i?`../../content/guidehub-v2/${t}/home.md`:n&&!r&&!i?`../../content/guidehub-v2/${t}/${n}/index.md`:n&&r&&!i?`../../content/guidehub-v2/${t}/${n}/${r}/index.md`:n&&r&&i?`../../content/guidehub-v2/${t}/${n}/${r}/${i}.md`:`../../content/guidehub-v2/${t}/home.md`}async function ave(t,e){var i,a,o;const n=`${e}:${(i=t.tab)!=null?i:""}:${(a=t.sub)!=null?a:""}:${(o=t.sub2)!=null?o:""}`;if(l1.has(n))return l1.get(n);const r=(async()=>{const c=cI(e,t),u=cI("en",t),h=o1[c]||o1[u];if(!h)return null;const m=await h(),{frontmatter:g,body:x}=nve(m),{html:b,toc:w}=ive(x),k=o1[c]?e:"en";return{id:t.sub2||t.sub||t.tab||"home",lang:k,frontmatter:g,body:x,html:b,toc:w}})();return l1.set(n,r),r}const ove="_wrap_1ck4m_1",lve="_card_1ck4m_13",cve="_title_1ck4m_33",dve="_section_1ck4m_45",uve="_sectionHeader_1ck4m_59",hve="_grid_1ck4m_75",mve="_field_1ck4m_87",pve="_input_1ck4m_101",gve="_select_1ck4m_103",fve="_readonly_1ck4m_119",vve="_controlsRow_1ck4m_135",xve="_checkbox_1ck4m_149",yve="_resultsGrid_1ck4m_165",bve="_resultCard_1ck4m_177",_ve="_resultLabel_1ck4m_199",wve="_resultValue_1ck4m_209",jve="_note_1ck4m_221",Rt={wrap:ove,card:lve,title:cve,section:dve,sectionHeader:uve,grid:hve,field:mve,input:pve,select:gve,readonly:fve,controlsRow:vve,checkbox:xve,resultsGrid:yve,resultCard:bve,resultLabel:_ve,resultValue:wve,note:jve},ML=350,dI={a:.001756211,b:1.04214299},u1={a:.00182949,b:1.11599,c:18.08035},Mf={normal1:{below:2,above:1.25},normal2:{below:2,above:5/3},epic3:{below:1.2,above:1},epic5:{below:1,above:5/6}},uI={offset:20,multiplier:1.2},hI=10,Sve=3,mI=[{key:"light",label:"Light",multiplier:3},{key:"medium",label:"Medium",multiplier:7.5},{key:"heavy",label:"Heavy",multiplier:15}],pI=[{key:"melee",label:"Melee",multiplier:1},{key:"ranged",label:"Ranged",multiplier:1.25},{key:"magic",label:"Magic",multiplier:2.25}],Ff={cap:1e3,baseOffset:1,baseMultiplier:2},Kc=(t,e=0)=>t==null||Number.isNaN(t)?"-":new Intl.NumberFormat("en-US",{minimumFractionDigits:e,maximumFractionDigits:e}).format(t),h1=t=>{if(t.trim()==="")return"";const e=Number(t);return Number.isFinite(e)?e:""},Nve=t=>dI.a*t*t+dI.b*t,Bf=(t,e)=>t<ML?t*e.below:Nve(t)*e.above,kve=t=>t<ML?(t+uI.offset)*uI.multiplier:u1.a*t*t+u1.b*t+u1.c,Cve=t=>{const e=Math.min(t,Ff.cap),n=Math.max(t-Ff.cap,0);return(Ff.baseOffset+e)*Ff.baseMultiplier+n},Tve=()=>{var V,U,K,H;const[t,e]=P.useState(""),[n,r]=P.useState(""),[i,a]=P.useState(""),[o,c]=P.useState(0),[u,h]=P.useState("light"),[m,g]=P.useState("melee"),[x,b]=P.useState(!1),[w,k]=P.useState(!1),A=typeof t=="number"?t:null,L=P.useMemo(()=>{if(typeof n!="number"||typeof i!="number")return null;const z=1+o/100;return(n+i+Sve)*z},[n,i,o]),I=P.useMemo(()=>A==null?null:Bf(A,Mf.normal1),[A]),N=P.useMemo(()=>A==null?null:Bf(A,Mf.normal2),[A]),v=P.useMemo(()=>A==null?null:Bf(A,Mf.epic3),[A]),_=P.useMemo(()=>A==null?null:Bf(A,Mf.epic5),[A]),R=P.useMemo(()=>A==null?null:kve(A),[A]),j=(U=(V=mI.find(z=>z.key===u))==null?void 0:V.multiplier)!=null?U:0,S=A==null?null:A+(x?hI:0),C=S==null?null:S*j,M=(H=(K=pI.find(z=>z.key===m))==null?void 0:K.multiplier)!=null?H:0,T=A==null?null:A+(w?hI:0),F=T==null?null:Cve(T),D=F==null?null:F*M;return s.jsx("div",{className:Rt.wrap,children:s.jsxs("div",{className:Rt.card,children:[s.jsx("h2",{className:Rt.title,children:"Max Item Stats Calculator"}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Inputs"}),s.jsxs("div",{className:Rt.grid,children:[s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Item Quality"}),s.jsx("input",{type:"number",inputMode:"numeric",className:Rt.input,placeholder:"e.g., 266",value:t,onChange:z=>e(h1(z.currentTarget.value))})]}),s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Level"}),s.jsx("input",{type:"number",inputMode:"numeric",className:Rt.input,placeholder:"e.g., 460",value:n,onChange:z=>r(h1(z.currentTarget.value))})]}),s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Aura"}),s.jsx("input",{type:"number",inputMode:"numeric",className:Rt.input,placeholder:"e.g., 181",value:i,onChange:z=>a(h1(z.currentTarget.value))})]}),s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Item Quality Rune %"}),s.jsx("select",{className:Rt.select,value:o,onChange:z=>c(Number(z.currentTarget.value)),children:Array.from({length:6},(z,Y)=>Y).map(z=>s.jsxs("option",{value:z,children:[z,"%"]},z))})]}),s.jsxs("div",{className:Rt.field,children:[s.jsx("span",{children:"Theoretical Item Quality"}),s.jsx("div",{className:Rt.readonly,children:L==null?"-":Math.floor(L).toLocaleString("en-US")})]})]})]}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Item Quality Stats"}),s.jsxs("div",{className:Rt.resultsGrid,children:[s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Normal Item 1 stat"}),s.jsx("div",{className:Rt.resultValue,children:Kc(I)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Normal Item 2 stat"}),s.jsx("div",{className:Rt.resultValue,children:Kc(N)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"3 Stat Epic"}),s.jsx("div",{className:Rt.resultValue,children:Kc(v)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"5 Stat Epic"}),s.jsx("div",{className:Rt.resultValue,children:Kc(_)})]}),s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Legendary"}),s.jsx("div",{className:Rt.resultValue,children:Kc(R)})]})]})]}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Armor"}),s.jsxs("div",{className:Rt.controlsRow,children:[s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Armor Type"}),s.jsx("select",{className:Rt.select,value:u,onChange:z=>h(z.currentTarget.value),children:mI.map(z=>s.jsx("option",{value:z.key,children:z.label},z.key))})]}),s.jsxs("label",{className:Rt.checkbox,children:[s.jsx("input",{type:"checkbox",checked:x,onChange:z=>b(z.currentTarget.checked)}),"Legendary"]})]}),s.jsx("div",{className:Rt.resultsGrid,children:s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Max Armor"}),s.jsx("div",{className:Rt.resultValue,children:Kc(C)})]})})]}),s.jsxs("div",{className:Rt.section,children:[s.jsx("div",{className:Rt.sectionHeader,children:"Average Weapon Damage"}),s.jsxs("div",{className:Rt.controlsRow,children:[s.jsxs("label",{className:Rt.field,children:[s.jsx("span",{children:"Weapon Type"}),s.jsx("select",{className:Rt.select,value:m,onChange:z=>g(z.currentTarget.value),children:pI.map(z=>s.jsx("option",{value:z.key,children:z.label},z.key))})]}),s.jsxs("label",{className:Rt.checkbox,children:[s.jsx("input",{type:"checkbox",checked:w,onChange:z=>k(z.currentTarget.checked)}),"Legendary"]})]}),s.jsx("div",{className:Rt.resultsGrid,children:s.jsxs("div",{className:Rt.resultCard,children:[s.jsx("div",{className:Rt.resultLabel,children:"Average Weapon DMG"}),s.jsx("div",{className:Rt.resultValue,children:Kc(D)})]})})]}),s.jsx("div",{className:Rt.note,children:"All values represent the maximum possible results based on the selected inputs."})]})})},Ive="_wrap_16vzl_1",Eve="_card_16vzl_13",Ave="_title_16vzl_33",Pve="_subtle_16vzl_45",Rve="_controls_16vzl_57",Lve="_field_16vzl_73",Dve="_select_16vzl_87",Mve="_tableWrap_16vzl_103",Fve="_table_16vzl_103",Bve="_th_16vzl_123",$ve="_td_16vzl_125",Ove="_tdNumber_16vzl_153",Vve="_rowMuted_16vzl_163",Uve="_summaryGrid_16vzl_171",zve="_summaryCard_16vzl_185",Gve="_summaryLabel_16vzl_199",Hve="_summaryValue_16vzl_213",Wve="_note_16vzl_227",$t={wrap:Ive,card:Eve,title:Ave,subtle:Pve,controls:Rve,field:Lve,select:Dve,tableWrap:Mve,table:Fve,th:Bve,td:$ve,tdNumber:Ove,rowMuted:Vve,summaryGrid:Uve,summaryCard:zve,summaryLabel:Gve,summaryValue:Hve,note:Wve},$f=[{id:"heart-of-darkness-1",building:"Heart of Darkness",level:1,gold:null,shrooms:2,souls:null,baseTimeMinutes:31},{id:"soul-extractor-1",building:"Soul Extractor",level:1,gold:250,shrooms:2,souls:null,baseTimeMinutes:66},{id:"gladiator-trainer-1",building:"Gladiator Trainer",level:1,gold:700,shrooms:2,souls:148,baseTimeMinutes:140},{id:"heart-of-darkness-2",building:"Heart of Darkness",level:2,gold:2e3,shrooms:4,souls:616,baseTimeMinutes:300},{id:"soul-extractor-2",building:"Soul Extractor",level:2,gold:500,shrooms:4,souls:462,baseTimeMinutes:480},{id:"gladiator-trainer-2",building:"Gladiator Trainer",level:2,gold:1400,shrooms:4,souls:554,baseTimeMinutes:685},{id:"heart-of-darkness-3",building:"Heart of Darkness",level:3,gold:3e3,shrooms:7,souls:1650,baseTimeMinutes:1107},{id:"soul-extractor-3",building:"Soul Extractor",level:3,gold:750,shrooms:7,souls:1235,baseTimeMinutes:2400},{id:"gladiator-trainer-3",building:"Gladiator Trainer",level:3,gold:2100,shrooms:7,souls:1485,baseTimeMinutes:5236},{id:"heart-of-darkness-4",building:"Heart of Darkness",level:4,gold:4e3,shrooms:14,souls:4220,baseTimeMinutes:11446},{id:"soul-extractor-4",building:"Soul Extractor",level:4,gold:1e3,shrooms:14,souls:3165,baseTimeMinutes:19200},{id:"gladiator-trainer-4",building:"Gladiator Trainer",level:4,gold:2800,shrooms:14,souls:3800,baseTimeMinutes:28800},{id:"heart-of-darkness-5",building:"Heart of Darkness",level:5,gold:5e3,shrooms:30,souls:11e3,baseTimeMinutes:36933},{id:"soul-extractor-5",building:"Soul Extractor",level:5,gold:1250,shrooms:30,souls:8250,baseTimeMinutes:48e3},{id:"gladiator-trainer-5",building:"Gladiator Trainer",level:5,gold:3500,shrooms:30,souls:9900,baseTimeMinutes:null},{id:"heart-of-darkness-6",building:"Heart of Darkness",level:6,gold:6e3,shrooms:48,souls:25080,baseTimeMinutes:null},{id:"soul-extractor-6",building:"Soul Extractor",level:6,gold:1500,shrooms:48,souls:18810,baseTimeMinutes:null},{id:"underworld-gate-1",building:"Underworld Gate",level:1,gold:500,shrooms:2,souls:null,baseTimeMinutes:null},{id:"underworld-gate-2",building:"Underworld Gate",level:2,gold:1e3,shrooms:4,souls:55,baseTimeMinutes:null},{id:"underworld-gate-3",building:"Underworld Gate",level:3,gold:1500,shrooms:7,souls:149,baseTimeMinutes:null},{id:"underworld-gate-4",building:"Underworld Gate",level:4,gold:2e3,shrooms:14,souls:380,baseTimeMinutes:null},{id:"underworld-gate-5",building:"Underworld Gate",level:5,gold:2500,shrooms:30,souls:990,baseTimeMinutes:null},{id:"adventuromatic-1",building:"Adventuromatic",level:1,gold:1e4,shrooms:2,souls:297,baseTimeMinutes:null},{id:"keeper-1",building:"Keeper",level:1,gold:1500,shrooms:2,souls:198,baseTimeMinutes:null},{id:"keeper-2",building:"Keeper",level:2,gold:3e3,shrooms:4,souls:739,baseTimeMinutes:null},{id:"keeper-3",building:"Keeper",level:3,gold:4500,shrooms:7,souls:1980,baseTimeMinutes:null}],Of={shrooms:750,souls:1e5},Pa=t=>t==null?"-":t.toLocaleString("en-US"),gI=t=>{if(t==null)return"-";const e=Math.max(0,Math.ceil(t)),n=Math.floor(e/60),r=e%60;return`${n}h ${r}m`},Kve=t=>t<=0?0:t>=15?.75:+(t*.05).toFixed(2),qve=(t,e)=>t.baseTimeMinutes==null?null:t.baseTimeMinutes*(1-e),Qve=t=>{if(t==null)return null;const e=Math.ceil(t);return Math.ceil(e/10)},m1=(t,e)=>t.reduce((n,r)=>{var i;return n+((i=r[e])!=null?i:0)},0),Yve=()=>{const[t,e]=q.useState(0),n=q.useMemo(()=>Kve(t),[t]),r=q.useMemo(()=>({gold:m1($f,"gold"),shrooms:m1($f,"shrooms"),souls:m1($f,"souls")}),[]),i=q.useMemo(()=>({shrooms:Of.shrooms-r.shrooms,souls:Of.souls-r.souls}),[r]);return s.jsx("div",{className:$t.wrap,children:s.jsxs("div",{className:$t.card,children:[s.jsx("h2",{className:$t.title,children:"Underworld Pro Pack skip order"}),s.jsx("div",{className:$t.subtle,children:"Build order and costs based on the provided Pro Pack sheet."}),s.jsxs("div",{className:$t.controls,children:[s.jsxs("label",{className:$t.field,children:[s.jsx("span",{children:"Laborers Quarter"}),s.jsx("select",{className:$t.select,value:t,onChange:a=>e(Number(a.currentTarget.value)),children:Array.from({length:16},(a,o)=>o).map(a=>s.jsx("option",{value:a,children:a},a))})]}),s.jsxs("div",{className:$t.field,children:[s.jsx("span",{children:"Build time reduction"}),s.jsxs("div",{className:$t.select,children:[(n*100).toFixed(0),"%"]})]})]}),s.jsx("div",{className:$t.tableWrap,children:s.jsxs("table",{className:$t.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:$t.th,children:"Build order"}),s.jsx("th",{className:$t.th,children:"Level"}),s.jsx("th",{className:`${$t.th} ${$t.tdNumber}`,children:"Gold"}),s.jsx("th",{className:`${$t.th} ${$t.tdNumber}`,children:"Shrooms"}),s.jsx("th",{className:`${$t.th} ${$t.tdNumber}`,children:"Souls"}),s.jsx("th",{className:`${$t.th} ${$t.tdNumber}`,children:"Build time"}),s.jsx("th",{className:`${$t.th} ${$t.tdNumber}`,children:"Time (LQ)"}),s.jsx("th",{className:`${$t.th} ${$t.tdNumber}`,children:"Skip"})]})}),s.jsx("tbody",{children:$f.map(a=>{const o=qve(a,n),c=Qve(o);return s.jsxs("tr",{children:[s.jsx("td",{className:$t.td,children:a.building}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber}`,children:a.level}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber}`,children:Pa(a.gold)}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber}`,children:Pa(a.shrooms)}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber}`,children:Pa(a.souls)}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber} ${$t.rowMuted}`,children:gI(a.baseTimeMinutes)}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber}`,children:gI(o)}),s.jsx("td",{className:`${$t.td} ${$t.tdNumber}`,children:Pa(c)})]},a.id)})})]})}),s.jsxs("div",{className:$t.summaryGrid,children:[s.jsxs("div",{className:$t.summaryCard,children:[s.jsx("div",{className:$t.summaryLabel,children:"Total cost"}),s.jsxs("div",{className:$t.summaryValue,children:[Pa(r.gold)," Gold  ",Pa(r.shrooms)," Shrooms  ",Pa(r.souls)," Souls"]})]}),s.jsxs("div",{className:$t.summaryCard,children:[s.jsx("div",{className:$t.summaryLabel,children:"Pro Pack resources"}),s.jsxs("div",{className:$t.summaryValue,children:[Pa(Of.shrooms)," Shrooms  ",Pa(Of.souls)," Souls"]})]}),s.jsxs("div",{className:$t.summaryCard,children:[s.jsx("div",{className:$t.summaryLabel,children:"Leftover"}),s.jsxs("div",{className:$t.summaryValue,children:[Pa(i.shrooms)," Shrooms  ",Pa(i.souls)," Souls"]})]})]}),s.jsx("div",{className:$t.note,children:"Skip cost is computed as roundup(roundup(time in minutes)/10)."})]})})},Vf=[{key:"gold-xp-curve",title:"Gold & XP Curve",assetKey:"goldxpcurve",filterA:"Economy",filterB:"Curve"},{key:"calendar-rewards",title:"Calendar Rewards",assetKey:"calendarrewards",filterA:"Calendar",filterB:"Rewards"},{key:"calendar-skip",title:"Calendar Skip",assetKey:"calendarskip",filterA:"Calendar",filterB:"Skip"},{key:"pet-elemental-advantages",title:"Elemental Advantages",assetKey:"elementaladvantages",filterA:"Pets",filterB:"Advantages"},{key:"pets-p2w",title:"Pets P2W",assetKey:"petsp2w",filterA:"Pets",filterB:"Pet Paths"},{key:"pets-f2p",title:"Pets F2P",assetKey:"petsf2p",filterA:"Pets",filterB:"Pet Paths"},{key:"level-up-pack",title:"Level Up Packages",assetKey:"leveluppack",filterA:"Mushroom Packages",filterB:"Level Up"},{key:"birthday-sale",title:"Birthday Sale",assetKey:"birthdaysale",filterA:"Mushroom Packages",filterB:"S&F Birthday"},{key:"black-friday-sale",title:"Black Friday Sale",assetKey:"blackfridaysale",filterA:"Mushroom Packages",filterB:"Black Friday"},{key:"christmas-sale",title:"Christmas Sale",assetKey:"christmassale",filterA:"Mushroom Packages",filterB:"Christmas"},{key:"community-sale",title:"Community Sale",assetKey:"communitysale",filterA:"Mushroom Packages",filterB:"Community"},{key:"easter-sale",title:"Easter Sale",assetKey:"eastersale",filterA:"Mushroom Packages",filterB:"Easter"},{key:"fall-sale",title:"Fall Sale",assetKey:"fallsale",filterA:"Mushroom Packages",filterB:"Fall"},{key:"lucky-sale",title:"Lucky Sale",assetKey:"luckysale",filterA:"Mushroom Packages",filterB:"Lucky"},{key:"new-year-sale",title:"New Year Sale",assetKey:"newyearsale",filterA:"Mushroom Packages",filterB:"New Year"},{key:"oktoberfest-sale",title:"Oktoberfest Sale",assetKey:"oktoberfestsale",filterA:"Mushroom Packages",filterB:"Oktoberfest"},{key:"pre-christmas-sale",title:"Pre-Christmas Sale",assetKey:"prechristmassale",filterA:"Mushroom Packages",filterB:"Christmas"},{key:"soulful-sale",title:"Soulful Sale",assetKey:"soulfulsale",filterA:"Mushroom Packages",filterB:"Soulful"},{key:"summer-sale",title:"Summer Sale",assetKey:"summersale",filterA:"Mushroom Packages",filterB:"Summer"},{key:"winter-sale",title:"Winter Sale",assetKey:"wintersale",filterA:"Mushroom Packages",filterB:"Winter"},{key:"world-boss-sale",title:"World Boss Sale",assetKey:"worldbosssale",filterA:"Mushroom Packages",filterB:"World Boss"},{key:"hydra-stages",title:"Hydra Stages",assetKey:"hydrastages",filterA:"Hydra",filterB:"Stages"},{key:"guild-skill-cost",title:"Guild Skill Cost",assetKey:"guildskillcost",filterA:"Guild",filterB:"Skill Cost"},{key:"level-2-200",title:"Progress Level 2-200",assetKey:"levelzweibiszweihundert",filterA:"Progress",filterB:"2-200"},{key:"level-210-700",title:"Progress Level 210-700",assetKey:"levelzweihunzehnbissiebenhun",filterA:"Progress",filterB:"210-700"},{key:"attack-duplication-step-3",title:"Attack Duplication Step 3",assetKey:"step3adg",filterA:"Guides",filterB:"Steps"}],Xve="_viewerWrap_jg1o6_1",Jve="_nav_jg1o6_21",Zve="_navCard_jg1o6_37",exe="_navHeader_jg1o6_59",txe="_logoWrap_jg1o6_73",sxe="_logoImg_jg1o6_85",nxe="_divider_jg1o6_99",rxe="_navHomeWrap_jg1o6_133",ixe="_navScroller_jg1o6_141",axe="_searchInput_jg1o6_195",oxe="_navSection_jg1o6_221",lxe="_navSubTitle_jg1o6_251",cxe="_navRow_jg1o6_265",dxe="_navRowLabel_jg1o6_281",uxe="_navRowChevron_jg1o6_291",hxe="_navRowChevronOpen_jg1o6_319",mxe="_categoryRow_jg1o6_327",pxe="_entryList_jg1o6_355",gxe="_entryListClosed_jg1o6_369",fxe="_entryListOpen_jg1o6_377",vxe="_subSection_jg1o6_385",xxe="_subRow_jg1o6_397",yxe="_subEntryList_jg1o6_423",bxe="_subGroup_jg1o6_437",_xe="_navItem_jg1o6_449",wxe="_navItemIndented_jg1o6_475",jxe="_navItemActive_jg1o6_505",Sxe="_viewer_jg1o6_1",Nxe="_viewerCard_jg1o6_525",kxe="_viewerHeader_jg1o6_543",Cxe="_viewerTitle_jg1o6_561",Txe="_metaRow_jg1o6_575",Ixe="_metaLabel_jg1o6_591",Exe="_statusChip_jg1o6_601",Axe="_statusChipUpToDate_jg1o6_625",Pxe="_statusChipWorkInProgress_jg1o6_637",Rxe="_statusChipOutdated_jg1o6_649",Lxe="_categoryPill_jg1o6_661",Dxe="_tocRow_jg1o6_683",Mxe="_tocLabel_jg1o6_697",Fxe="_tocPills_jg1o6_711",Bxe="_tocPill_jg1o6_711",$xe="_contentGrid_jg1o6_755",Oxe="_contentGridHasGallery_jg1o6_767",Vxe="_markdown_jg1o6_775",Uxe="_hudButtonGrid_jg1o6_869",zxe="_hudButton_jg1o6_869",Gxe="_hudButtonLink_jg1o6_909",Hxe="_hudButtonBox_jg1o6_931",Wxe="_hudButtonText_jg1o6_939",Kxe="_infoBlock_jg1o6_1005",qxe="_infoFilters_jg1o6_1013",Qxe="_infoSelect_jg1o6_1029",Yxe="_infoLabel_jg1o6_1041",Xxe="_infoSelectField_jg1o6_1055",Jxe="_infoGalleryGrid_jg1o6_1083",Zxe="_infoCard_jg1o6_1095",eye="_infoThumb_jg1o6_1141",tye="_infoThumbFallback_jg1o6_1159",sye="_infoTitle_jg1o6_1183",nye="_infoEmpty_jg1o6_1197",rye="_markdownHome_jg1o6_1213",iye="_galleryCard_jg1o6_1283",aye="_galleryTitle_jg1o6_1297",oye="_galleryGrid_jg1o6_1313",lye="_galleryThumb_jg1o6_1325",cye="_galleryEmpty_jg1o6_1339",dye="_loadingState_jg1o6_1351",uye="_missingState_jg1o6_1353",hye="_emptyTitle_jg1o6_1371",mye="_viewerLoadingOverlay_jg1o6_1385",pye="_viewerLoadingOverlayVisible_jg1o6_1413",gye="_loadingOverlayContent_jg1o6_1421",fye="_loadingSpinner_jg1o6_1433",vye="_overlay_jg1o6_1463",xye="_overlayPanel_jg1o6_1481",yye="_overlayImage_jg1o6_1507",bye="_overlayClose_jg1o6_1537",_ye="_overlayNav_jg1o6_1559",wye="_overlayNavLeft_jg1o6_1617",jye="_overlayNavRight_jg1o6_1625",_e={viewerWrap:Xve,nav:Jve,navCard:Zve,navHeader:exe,logoWrap:txe,logoImg:sxe,divider:nxe,navHomeWrap:rxe,navScroller:ixe,searchInput:axe,navSection:oxe,navSubTitle:lxe,navRow:cxe,navRowLabel:dxe,navRowChevron:uxe,navRowChevronOpen:hxe,categoryRow:mxe,entryList:pxe,entryListClosed:gxe,entryListOpen:fxe,subSection:vxe,subRow:xxe,subEntryList:yxe,subGroup:bxe,navItem:_xe,navItemIndented:wxe,navItemActive:jxe,viewer:Sxe,viewerCard:Nxe,viewerHeader:kxe,viewerTitle:Cxe,metaRow:Txe,metaLabel:Ixe,statusChip:Exe,statusChipUpToDate:Axe,statusChipWorkInProgress:Pxe,statusChipOutdated:Rxe,categoryPill:Lxe,tocRow:Dxe,tocLabel:Mxe,tocPills:Fxe,tocPill:Bxe,contentGrid:$xe,contentGridHasGallery:Oxe,markdown:Vxe,hudButtonGrid:Uxe,hudButton:zxe,hudButtonLink:Gxe,hudButtonBox:Hxe,hudButtonText:Wxe,infoBlock:Kxe,infoFilters:qxe,infoSelect:Qxe,infoLabel:Yxe,infoSelectField:Xxe,infoGalleryGrid:Jxe,infoCard:Zxe,infoThumb:eye,infoThumbFallback:tye,infoTitle:sye,infoEmpty:nye,markdownHome:rye,galleryCard:iye,galleryTitle:aye,galleryGrid:oye,galleryThumb:lye,galleryEmpty:cye,loadingState:dye,missingState:uye,emptyTitle:hye,viewerLoadingOverlay:mye,viewerLoadingOverlayVisible:pye,loadingOverlayContent:gye,loadingSpinner:fye,overlay:vye,overlayPanel:xye,overlayImage:yye,overlayClose:bye,overlayNav:_ye,overlayNavLeft:wye,overlayNavRight:jye},Ro="__all__";function Sye(){var R;const{t}=Os(),e=q.useMemo(()=>Array.from(new Set(Vf.map(j=>j.filterA))).sort((j,S)=>j.localeCompare(S)),[]),n=q.useMemo(()=>{const j=new Map;return Vf.forEach(S=>{var M;const C=(M=j.get(S.filterA))!=null?M:[];C.includes(S.filterB)||C.push(S.filterB),j.set(S.filterA,C)}),j.forEach((S,C)=>{j.set(C,S.sort((M,T)=>M.localeCompare(T)))}),j},[]),r=q.useMemo(()=>Array.from(new Set(Vf.map(j=>j.filterB))).sort((j,S)=>j.localeCompare(S)),[]),[i,a]=q.useState(Ro),[o,c]=q.useState(Ro),[u,h]=q.useState(null),m=i===Ro?r:(R=n.get(i))!=null?R:[];q.useEffect(()=>{o!==Ro&&(m.includes(o)||c(Ro))},[m,o]);const g=q.useMemo(()=>Vf.filter(j=>!(i!==Ro&&j.filterA!==i||o!==Ro&&j.filterB!==o)),[i,o]),x=t("guides.v2.infographics.allLabel",{defaultValue:"All"}),b=t("guides.v2.infographics.filterA.label",{defaultValue:"Category"}),w=t("guides.v2.infographics.filterB.label",{defaultValue:"Type"}),k=t("guides.v2.infographics.empty",{defaultValue:"No images found."}),A=t("guides.v2.closeLabel",{defaultValue:"Close"}),L=q.useCallback(j=>{var V,U,K,H;const S=Oa(j.assetKey,1200),C=Oa(j.assetKey,640),M=(U=(V=S.thumb)!=null?V:S.url)!=null?U:null,T=(H=(K=C.thumb)!=null?K:C.url)!=null?H:null,F=M!=null?M:T;if(!F)return null;const D=t(`guides.v2.infographics.item.${j.key}`,{defaultValue:j.title});return{key:j.key,src:F,fallback:F&&T&&F!==T?T:void 0,label:D}},[t]),I=q.useMemo(()=>u?g.findIndex(j=>j.key===u.key):-1,[u,g]),N=g.length>1&&I>=0,v=q.useCallback(()=>{if(!N)return;const j=(I-1+g.length)%g.length,S=g[j],C=L(S);C&&h(C)},[I,L,N,g]),_=q.useCallback(()=>{if(!N)return;const j=(I+1)%g.length,S=g[j],C=L(S);C&&h(C)},[I,L,N,g]);return q.useEffect(()=>{if(!u)return;g.some(S=>S.key===u.key)||h(null)},[u,g]),q.useEffect(()=>{if(!u)return;const j=S=>{S.key==="Escape"&&h(null)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[u]),s.jsxs("div",{className:_e.infoBlock,children:[s.jsxs("div",{className:_e.infoFilters,children:[s.jsxs("label",{className:_e.infoSelect,children:[s.jsx("span",{className:_e.infoLabel,children:b}),s.jsxs("select",{className:_e.infoSelectField,value:i,onChange:j=>a(j.target.value),children:[s.jsx("option",{value:Ro,children:x}),e.map(j=>s.jsx("option",{value:j,children:t(`guides.v2.infographics.filterA.${j}`,{defaultValue:j})},j))]})]}),s.jsxs("label",{className:_e.infoSelect,children:[s.jsx("span",{className:_e.infoLabel,children:w}),s.jsxs("select",{className:_e.infoSelectField,value:o,onChange:j=>c(j.target.value),children:[s.jsx("option",{value:Ro,children:x}),m.map(j=>s.jsx("option",{value:j,children:t(`guides.v2.infographics.filterB.${j}`,{defaultValue:j})},j))]})]})]}),g.length===0?s.jsx("div",{className:_e.infoEmpty,children:k}):s.jsx("div",{className:_e.infoGalleryGrid,children:g.map(j=>{var T;const S=Oa(j.assetKey,640),C=(T=S.thumb)!=null?T:S.url,M=t(`guides.v2.infographics.item.${j.key}`,{defaultValue:j.title});return s.jsxs("button",{className:_e.infoCard,type:"button",onClick:()=>{const F=L(j);F&&h(F)},children:[C?s.jsx("img",{className:_e.infoThumb,src:C,alt:M}):s.jsx("div",{className:_e.infoThumbFallback,children:(M||"I").slice(0,1).toUpperCase()}),s.jsx("div",{className:_e.infoTitle,children:M})]},j.key)})}),u&&s.jsx("div",{className:_e.overlay,onClick:()=>h(null),children:s.jsxs("div",{className:_e.overlayPanel,onClick:j=>j.stopPropagation(),children:[N&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:`${_e.overlayNav} ${_e.overlayNavLeft}`,type:"button",onClick:v,"aria-label":t("guides.v2.galleryPrev",{defaultValue:"Previous image"}),children:"<"}),s.jsx("button",{className:`${_e.overlayNav} ${_e.overlayNavRight}`,type:"button",onClick:_,"aria-label":t("guides.v2.galleryNext",{defaultValue:"Next image"}),children:">"})]}),s.jsx("button",{className:_e.overlayClose,onClick:()=>h(null),type:"button",children:A}),s.jsx("img",{className:_e.overlayImage,src:u.src,alt:u.label,onError:()=>{!u.fallback||u.fallback===u.src||h({key:u.key,src:u.fallback,label:u.label})}})]})})]})}const Nye=()=>{var u;const{i18n:t}=Os(),[e,n]=sr(),i=((u=t.language)==null?void 0:u.startsWith("de"))?[{key:"first-weekend-guide",label:"First-Weekend-Guide",selection:{tab:"progression",sub:"early",sub2:"first-weekend-guide"}},{key:"hellevator-guide",label:"Hellevator-Guide",selection:{tab:"hellevator",sub:"hellevator-guide"}},{key:"legendary-dungeon-guide",label:"Legendrer Dungeon-Guide",selection:{tab:"legendary-dungeon",sub:"legendary-dungeon-guide-epics-legendaries"}},{key:"rune-bonuses",label:"Runen-Boni",selection:{tab:"gamefeatures",sub:"arenaam",sub2:"am-rune-bonuses"}},{key:"calculators",label:"Rechner",selection:{tab:"calculators"}}]:[{key:"first-weekend-guide",label:"First Weekend Guide",selection:{tab:"progression",sub:"early",sub2:"first-weekend-guide"}},{key:"hellevator-guide",label:"Hellevator Guide",selection:{tab:"hellevator",sub:"hellevator-guide"}},{key:"legendary-dungeon-guide",label:"Legendary Dungeon Guide",selection:{tab:"legendary-dungeon",sub:"legendary-dungeon-guide-epics-legendaries"}},{key:"rune-bonuses",label:"Rune Bonuses",selection:{tab:"gamefeatures",sub:"arenaam",sub2:"am-rune-bonuses"}},{key:"calculators",label:"Calculators",selection:{tab:"calculators"}}],a=h=>{const m=new URLSearchParams;return m.set("tab",h.tab),h.sub&&m.set("sub",h.sub),h.sub2&&m.set("sub2",h.sub2),`/guidehub?${m.toString()}`},o=h=>{const m=new URLSearchParams(e);m.set("tab",h.tab),h.sub?m.set("sub",h.sub):m.delete("sub"),h.sub2?m.set("sub2",h.sub2):m.delete("sub2"),n(m,{replace:!1,preventScrollReset:!0})},c=(h,m)=>{h.defaultPrevented||h.button===0&&(h.metaKey||h.ctrlKey||h.shiftKey||h.altKey||(h.preventDefault(),o(m)))};return s.jsx("ul",{children:i.map(h=>s.jsx("li",{children:s.jsx("a",{href:a(h.selection),onClick:m=>c(m,h.selection),children:h.label})},h.key))})},kye=()=>{const[t,e]=sr(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","fortress"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:_e.hudButtonGrid,children:[s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("fortress-calculator"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Fortress Calculator"})})}),s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("fortress-package-skip-order"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Fortress Package skip order"})})}),s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("fortress-attack-duplication"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Fortress attack duplication guide"})})})]})},Cye=()=>{const[t,e]=sr(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:_e.hudButtonGrid,children:[s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("fortress"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Fortress"})})}),s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("underworld"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Underworld"})})}),s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("arenaam"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Arena Manager"})})})]})},Tye=()=>{const[t,e]=sr(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","fortress"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsx("div",{className:_e.hudButtonGrid,children:s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("fortress-package-skip-order"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Fortress Package skip order"})})})})},Iye=()=>s.jsx(TL,{variant:"underworld"}),Eye=()=>{const[t,e]=sr(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","underworld"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:_e.hudButtonGrid,children:[s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("underworld-calculator"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Underworld Calculator"})})}),s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("underworld-pro-package-skip-order"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Underworld Pro Package skip order"})})})]})},Aye=()=>{const[t,e]=sr(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","underworld"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsx("div",{className:_e.hudButtonGrid,children:s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>n("underworld-pro-package-skip-order"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:"Underworld Pro Package skip order"})})})})},Pye=()=>{const{t}=Os(),[e,n]=sr(),r=i=>{const a=new URLSearchParams(e);a.set("tab","gamefeatures"),a.set("sub","arenaam"),a.set("sub2",i),n(a,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:_e.hudButtonGrid,children:[s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>r("am-rune-bonuses"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:t("guidehub.arenaManager.links.runeBonuses")})})}),s.jsx("button",{type:"button",className:_e.hudButton,onClick:()=>r("am-build-order"),children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:t("guidehub.arenaManager.links.buildOrder")})})})]})},Rye=()=>{var r;const{i18n:t}=Os(),e=(r=t.language)==null?void 0:r.startsWith("de"),n=[{label:"SF Tavernen Discord FAQ",href:"https://discord.com/channels/551152314329858048/1415410382981562542"},{label:"SF Tools",href:"https://sftools.mar21.eu/idle.html"},{label:"SF Coaching",href:e?"https://discord.com/channels/1381647290606817452/1420471280284733491":"https://discord.com/channels/1381647290606817452/1420473511364923432"}];return s.jsx("div",{className:_e.hudButtonGrid,children:n.map(i=>s.jsx("a",{className:`${_e.hudButton} ${_e.hudButtonLink}`,href:i.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:i.label})})},i.href))})},Lye=()=>{const t=[{label:"SF Coaching",href:"https://discord.com/channels/1381647290606817452/1420473231256850584"},{label:"SF Tavernen Discord FAQ",href:"https://discord.com/channels/551152314329858048/1415410624606896279"},{label:"SF Tools",href:"https://sftools.mar21.eu/fortress.html"}];return s.jsx("div",{className:_e.hudButtonGrid,children:t.map(e=>s.jsx("a",{className:`${_e.hudButton} ${_e.hudButtonLink}`,href:e.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(Gr,{padding:"md",hover:!0,className:_e.hudButtonBox,children:s.jsx("span",{className:_e.hudButtonText,children:e.label})})},e.href))})},FL="guidehub-v2:gem-calculator",Dye=()=>{if(typeof window!="undefined")try{const t=window.localStorage.getItem(FL);if(!t)return;const e=JSON.parse(t);if(!e||typeof e!="object")return;const{charLevel:n,mineLevel:r,guildHoKLevel:i}=e;return typeof n!="number"||typeof r!="number"||typeof i!="number"?void 0:{charLevel:n,mineLevel:r,guildHoKLevel:i}}catch(t){return}},Mye=t=>{if(typeof window!="undefined")try{window.localStorage.setItem(FL,JSON.stringify(t))}catch(e){}},Fye=()=>{const t=q.useMemo(()=>Dye(),[]),e=q.useCallback(n=>{Mye(n)},[]);return s.jsx(r2,{initialState:t,onStateChange:e})};function Bye(){const t=[];return hd.forEach(e=>{(e.sub||[]).forEach(n=>{n.sub2&&n.sub2.length?n.sub2.some(i=>i.sub2&&i.sub2.length)?n.sub2.forEach(i=>{i.sub2&&i.sub2.length&&i.sub2.forEach(a=>{t.push({id:a.key,label:a.label,tab:e.key,sub:n.key,sub2:a.key,categoryLabel:e.label})})}):n.sub2.forEach(i=>{t.push({id:i.key,label:i.label,tab:e.key,sub:n.key,sub2:i.key,categoryLabel:e.label})}):t.push({id:n.key,label:n.label,tab:e.key,sub:n.key,categoryLabel:e.label})})}),t}function $ye(t){return t!=null&&t.startsWith("de")?"de":"en"}const Oye=330;function Vye(t){return t==="up_to_date"||t==="outdated"||t==="work_in_progress"?t:"work_in_progress"}const Uye=({tab:t,sub:e,sub2:n,isHome:r,openTabs:i,openSubs:a,onToggleTab:o,onToggleSub:c,onNavigate:u,onNavigateHome:h,onNavigateCategory:m,onNavigateSub:g,t:x})=>{const[b,w]=q.useState(""),k=b.trim().toLowerCase(),A=q.useMemo(()=>{const N=hd.find(v=>v.key==="gamefeatures");return N?[N,...hd.filter(v=>v.key!=="gamefeatures")]:hd},[]),L=q.useCallback(N=>!k||N.toLowerCase().includes(k),[k]),I=()=>A.map(N=>{const v=L(N.label),R=(N.sub||[]).map(C=>{var V;const M=v||L(C.label);let T=[];if(!C.sub2||C.sub2.length===0)return!M&&k?null:s.jsx("button",{className:`${_e.navItem} ${t===N.key&&e===C.key&&!n?_e.navItemActive:""}`,onClick:()=>g(N.key,C.key),type:"button",children:C.label},`${N.key}-${C.key}`);C.sub2&&C.sub2.length&&(C.sub2.some(K=>K.sub2&&K.sub2.length)?T=C.sub2.map(K=>{if(!K.sub2||!K.sub2.length)return null;const H=M||L(K.label),z=K.sub2.filter(Y=>H||L(Y.label));return z.length?s.jsxs("div",{className:_e.subGroup,children:[s.jsx("div",{className:_e.navSubTitle,children:K.label}),z.map(Y=>s.jsx("button",{className:`${_e.navItem} ${_e.navItemIndented} ${t===N.key&&e===C.key&&n===Y.key?_e.navItemActive:""}`,onClick:()=>u({tab:N.key,sub:C.key,sub2:Y.key}),type:"button",children:Y.label},`${N.key}-${C.key}-${Y.key}`))]},`${N.key}-${C.key}-${K.key}`):null}).filter(Boolean):T=C.sub2.filter(H=>M||L(H.label)).map(H=>s.jsx("button",{className:`${_e.navItem} ${_e.navItemIndented} ${t===N.key&&e===C.key&&n===H.key?_e.navItemActive:""}`,onClick:()=>u({tab:N.key,sub:C.key,sub2:H.key}),type:"button",children:H.label},`${N.key}-${C.key}-${H.key}`)));const F=T.length>0;if(!M&&!F)return null;const D=!!((V=a[N.key])!=null&&V[C.key])||!!k&&F;return s.jsxs("div",{className:_e.subSection,children:[s.jsxs("button",{className:`${_e.navRow} ${_e.subRow} ${t===N.key&&e===C.key&&!n?_e.navItemActive:""}`,onClick:()=>{c(N.key,C.key),g(N.key,C.key)},"aria-expanded":D,type:"button",children:[s.jsx("span",{className:_e.navRowLabel,children:C.label}),s.jsx("span",{className:`${_e.navRowChevron} ${D?_e.navRowChevronOpen:""}`})]}),s.jsx("div",{className:`${_e.subEntryList} ${D?_e.entryListOpen:_e.entryListClosed}`,children:D?T:null})]},`${N.key}-${C.key}`)}).filter(Boolean),j=R.length>0;if(!v&&!j&&k)return null;const S=!!i[N.key]||!!k&&(v||j);return s.jsxs("div",{className:_e.navSection,children:[s.jsxs("button",{className:`${_e.navRow} ${_e.categoryRow} ${t===N.key&&!e&&!n?_e.navItemActive:""}`,onClick:()=>{o(N.key),m(N.key)},"aria-expanded":S,type:"button",children:[s.jsx("span",{className:_e.navRowLabel,children:N.label}),s.jsx("span",{className:`${_e.navRowChevron} ${S?_e.navRowChevronOpen:""}`})]}),s.jsx("div",{className:`${_e.entryList} ${S?_e.entryListOpen:_e.entryListClosed}`,children:S?R:null})]},N.key)});return s.jsx("div",{className:_e.nav,children:s.jsxs("div",{className:_e.navCard,children:[s.jsxs("div",{className:_e.navHeader,children:[s.jsx("div",{className:_e.logoWrap,children:s.jsx("img",{src:Kj,alt:"Guide Hub",className:_e.logoImg})}),s.jsx("div",{className:_e.divider}),s.jsx("input",{className:_e.searchInput,type:"search",value:b,onChange:N=>w(N.target.value),placeholder:x("guides.v2.searchPlaceholder",{defaultValue:"Search guides"}),"aria-label":x("guides.v2.searchLabel",{defaultValue:"Search guides"})})]}),s.jsxs("div",{className:_e.navScroller,children:[s.jsx("div",{className:_e.navHomeWrap,children:s.jsx("button",{className:`${_e.navItem} ${r?_e.navItemActive:""}`,onClick:h,type:"button",children:x("guides.v2.navHomeLabel",{defaultValue:"Home"})})}),I()]})]})})},zye=()=>{const[t,e]=sr(),{t:n,i18n:r}=Os(),i=$ye(r.language),a=t.get("tab")||"",o=t.get("sub")||"",c=t.get("sub2")||"",u=q.useMemo(()=>({tab:a||void 0,sub:o||void 0,sub2:c||void 0}),[a,o,c]),[h,m]=q.useState(()=>({tab:a||void 0,sub:o||void 0,sub2:c||void 0})),g=h.tab||"",x=h.sub||"",b=h.sub2||"",w=!g&&!x&&!b,k=g==="infographics"&&!x&&!b,A=q.useMemo(()=>Bye(),[]),L=q.useMemo(()=>A.find(we=>{var de;return we.tab===g&&we.sub===x&&((de=we.sub2)!=null?de:"")===b})||null,[A,g,x,b]),I=q.useMemo(()=>hd.find(we=>we.key===g)||null,[g]),N=q.useMemo(()=>{var we;return((we=I==null?void 0:I.sub)==null?void 0:we.find(de=>de.key===x))||null},[I,x]),[v,_]=q.useState({}),[R,j]=q.useState({}),[S,C]=q.useState(null),[M,T]=q.useState("idle"),[F,D]=q.useState(!1),V=q.useRef(0),U=q.useRef(0),K=q.useRef(null),H=q.useCallback(()=>{K.current&&(window.clearTimeout(K.current),K.current=null)},[]);q.useEffect(()=>{let we=!1;const de=V.current+1;return V.current=de,H(),U.current=Date.now(),D(!0),ave(u,i).then(Ie=>{if(we||V.current!==de)return;const Ae=Ie?"ready":"missing",Xe=()=>{we||V.current!==de||(C(Ie),T(Ae),m(u),D(!1))},oe=Date.now()-U.current,fe=Oye-oe;fe<=0?Xe():K.current=window.setTimeout(Xe,fe)}),()=>{we=!0,H()}},[u,i,H]),q.useEffect(()=>{a&&_(we=>we[a]?we:{...we,[a]:!0})},[a]),q.useEffect(()=>{!a||!o||j(we=>{const de=we[a]||{};return de[o]?we:{...we,[a]:{...de,[o]:!0}}})},[a,o]);const z=q.useCallback(we=>{const de=new URLSearchParams(t);de.set("tab",we.tab),we.sub?de.set("sub",we.sub):de.delete("sub"),we.sub2?de.set("sub2",we.sub2):de.delete("sub2"),e(de,{replace:!1,preventScrollReset:!0})},[t,e]),Y=q.useCallback(()=>{const we=new URLSearchParams(t);we.delete("tab"),we.delete("sub"),we.delete("sub2"),e(we,{replace:!1,preventScrollReset:!0})},[t,e]),te=q.useCallback(we=>{_(de=>({...de,[we]:!de[we]}))},[]),G=q.useCallback(we=>{const de=new URLSearchParams(t);de.set("tab",we),de.delete("sub"),de.delete("sub2"),e(de,{replace:!1,preventScrollReset:!0})},[t,e]),X=q.useCallback((we,de)=>{j(Ie=>{const Ae=Ie[we]||{};return{...Ie,[we]:{...Ae,[de]:!Ae[de]}}})},[]),J=q.useCallback((we,de)=>{const Ie=new URLSearchParams(t);Ie.set("tab",we),Ie.set("sub",de),Ie.delete("sub2"),e(Ie,{replace:!1,preventScrollReset:!0})},[t,e]),se=q.useCallback(we=>{const de=document.getElementById(we);if(!de)return;const Ie=de.closest("main");if(Ie){const Ae=Ie.getBoundingClientRect(),oe=de.getBoundingClientRect().top-Ae.top+Ie.scrollTop-12;Ie.scrollTo({top:oe,behavior:"smooth"});return}de.scrollIntoView({behavior:"smooth",block:"start"})},[]),ue=(S==null?void 0:S.frontmatter.title)||(L==null?void 0:L.label)||(N==null?void 0:N.label)||(I==null?void 0:I.label)||"",Ne=(S==null?void 0:S.frontmatter.category)||(I==null?void 0:I.label)||(L==null?void 0:L.categoryLabel)||"",Ee=q.useMemo(()=>((S==null?void 0:S.toc)||[]).filter(we=>we.id!=="overview"),[S]),ee=q.useMemo(()=>!(S!=null&&S.frontmatter.gallery)||S.frontmatter.gallery.length===0?[]:S.frontmatter.gallery.map(we=>{if(!we)return null;if(/^https?:\/\//i.test(we))return{key:we,thumb:we,full:we};const Ie=Oa(we,640),Ae=Ie.thumb||Ie.url,Xe=Ie.url||Ie.thumb;return!Ae||!Xe?null:{key:we,thumb:Ae,full:Xe}}).filter(Boolean),[S]),[le,re]=q.useState(null);q.useEffect(()=>{if(!le)return;const we=de=>{de.key==="Escape"&&re(null)};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[le]);const be=ee.length?`${_e.contentGrid} ${_e.contentGridHasGallery}`:_e.contentGrid,Te=w?`${_e.markdown} ${_e.markdownHome}`:_e.markdown,Le=Vye(S==null?void 0:S.frontmatter.status),Re=Le==="up_to_date"?n("guide.status.up_to_date",{defaultValue:"Up to date"}):Le==="outdated"?n("guide.status.outdated",{defaultValue:"Outdated"}):n("guide.status.work_in_progress",{defaultValue:"Work in progress"}),Oe=Le==="up_to_date"?_e.statusChipUpToDate:Le==="outdated"?_e.statusChipOutdated:_e.statusChipWorkInProgress,Me=()=>s.jsxs("div",{className:_e.tocRow,children:[s.jsx("div",{className:_e.tocLabel,children:n("guides.v2.sectionsLabel",{defaultValue:"Sections"})}),s.jsx("div",{className:_e.tocPills,children:Ee.length===0?s.jsx("span",{className:_e.galleryEmpty,children:n("guides.v2.noSections",{defaultValue:"No sections"})}):Ee.map(we=>s.jsx("button",{className:_e.tocPill,onClick:()=>se(we.id),type:"button",children:we.text},we.id))})]}),De=()=>{if(!S)return null;const we=k?s.jsx(Sye,{}):null,de={"am-rune-bonuses-table":IL,"arenaam-link-buttons":Pye,"arenaam-related-buttons":Rye,"gamefeatures-link-buttons":Cye,"home-quick-links":Nye,"fortress-link-buttons":kye,"fortress-package-skip-order-button":Tye,"underworld-link-buttons":Eye,"fortress-related-buttons":Lye,"fortress-package-skip-order-table":Iye,"fortress-calculator":AL,"underworld-calculator":PL,"gem-calculator":Fye,"max-item-stats-calculator":Tve,"underworld-pro-pack-link-button":Aye,"underworld-pro-package-skip-order":Yve,"dungeon-pause-open-xp-calculator":i2},Ie=Object.keys(de).some(Je=>S.html.includes(`data-embed="${Je}"`)),Ae=S.html.includes('data-asset="'),Xe=Ie||Ae,oe=Je=>{if(!Xe)return s.jsx("div",{dangerouslySetInnerHTML:{__html:Je}});const ut=/<div data-(embed|asset)="([a-z0-9-_]+)"><\/div>/g;let bt=0,ft,mt=0;const ot=[];for(;ft=ut.exec(Je);){const gt=Je.slice(bt,ft.index);gt&&(ot.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:gt}},`html-${mt}`)),mt+=1);const ne=ft[1],Ue=ft[2];if(ne==="embed"){const Ve=de[Ue];Ve?(ot.push(s.jsx(Ve,{},`embed-${Ue}-${mt}`)),mt+=1):(ot.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:ft[0]}},`html-${mt}`)),mt+=1)}else{const Ve=Oa(Ue,960),dt=Ve.thumb||Ve.url;dt?(ot.push(s.jsx("img",{src:dt,alt:Ue},`asset-${Ue}-${mt}`)),mt+=1):(ot.push(s.jsx("div",{},`asset-${Ue}-${mt}`)),mt+=1)}bt=ft.index+ft[0].length}const os=Je.slice(bt);return os&&ot.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:os}},`html-${mt}`)),ot.length===0?s.jsx("div",{dangerouslySetInnerHTML:{__html:Je}}):s.jsx(s.Fragment,{children:ot})},me=S.html.indexOf('<h2 id="overview">');if(me===-1)return Xe?s.jsxs("div",{className:Te,children:[oe(S.html),we]}):s.jsxs("div",{className:Te,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:S.html}}),we]});const xe=S.html.indexOf("</h2>",me);if(xe===-1)return Xe?s.jsxs("div",{className:Te,children:[oe(S.html),we]}):s.jsxs("div",{className:Te,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:S.html}}),we]});const tt=S.html.slice(0,xe+5),lt=S.html.slice(xe+5);return Xe?s.jsxs("div",{className:Te,children:[oe(tt),Me(),we,oe(lt)]}):s.jsxs("div",{className:Te,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:tt}}),Me(),we,s.jsx("div",{dangerouslySetInnerHTML:{__html:lt}})]})},Fe=s.jsx(Uye,{tab:a,sub:o,sub2:c,isHome:w,openTabs:v,openSubs:R,onToggleTab:te,onToggleSub:X,onNavigate:z,onNavigateHome:Y,onNavigateCategory:G,onNavigateSub:J,t:n});return s.jsxs(as,{left:Fe,leftWidth:280,leftFullHeight:!0,children:[s.jsx("div",{className:_e.viewerWrap,children:s.jsx("section",{className:_e.viewer,children:s.jsxs("div",{className:_e.viewerCard,children:[M==="missing"&&s.jsxs("div",{className:_e.missingState,children:[s.jsx("div",{className:_e.emptyTitle,children:n("guides.v2.missingTitle",{defaultValue:"Guide not available yet"})}),s.jsx("div",{children:n("guides.v2.missingBody",{defaultValue:"This guide does not have markdown content yet."})})]}),S&&M!=="missing"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:_e.viewerHeader,children:[s.jsxs("div",{children:[s.jsx("h1",{className:_e.viewerTitle,children:ue}),s.jsx("div",{className:_e.metaRow,children:s.jsxs("span",{children:[s.jsxs("span",{className:_e.metaLabel,children:[n("guide.status.label",{defaultValue:"Status"}),":"]}),s.jsx("span",{className:`${_e.statusChip} ${Oe}`,children:Re})]})})]}),Ne&&s.jsx("div",{className:_e.categoryPill,children:Ne})]}),s.jsxs("div",{className:be,children:[De(),ee.length>0&&s.jsxs("aside",{className:_e.galleryCard,children:[s.jsx("div",{className:_e.galleryTitle,children:n("guides.v2.galleryLabel",{defaultValue:"Gallery"})}),s.jsx("div",{className:_e.galleryGrid,children:ee.map(we=>s.jsx("img",{src:we.thumb,alt:we.key,className:_e.galleryThumb,onClick:()=>re(we.full)},we.key))})]})]})]}),s.jsx("div",{className:`${_e.viewerLoadingOverlay} ${F?_e.viewerLoadingOverlayVisible:""}`,children:s.jsx("div",{className:_e.loadingState,children:s.jsxs("div",{className:_e.loadingOverlayContent,children:[s.jsx("span",{className:_e.loadingSpinner,"aria-hidden":!0}),s.jsx("span",{children:n("guides.v2.loading",{defaultValue:"Loading guide..."})})]})})})]})})}),le&&s.jsx("div",{className:_e.overlay,onClick:()=>re(null),children:s.jsxs("div",{className:_e.overlayPanel,onClick:we=>we.stopPropagation(),children:[s.jsx("button",{className:_e.overlayClose,onClick:()=>re(null),type:"button",children:n("guides.v2.closeLabel",{defaultValue:"Close"})}),s.jsx("img",{className:_e.overlayImage,src:le,alt:"Guide preview"})]})})]})},Gye="_wrap_1353r_1",Hye="_centerLogoWrap_1353r_21",Wye="_centerLogoLink_1353r_37",Kye="_centerLogo_1353r_21",qye="_arc_1353r_71",Qye="_left_1353r_73",Yye="_right_1353r_75",Xye="_sub_1353r_77",Jye="_full_1353r_79",Zye="_arcItem_1353r_81",e0e="_iconBtn_1353r_87",t0e="_active_1353r_141",s0e="_iconImg_1353r_151",n0e="_placeholderIcon_1353r_155",r0e="_placeholderText_1353r_173",i0e="_iconLabel_1353r_177",Cr={wrap:Gye,centerLogoWrap:Hye,centerLogoLink:Wye,centerLogo:Kye,arc:qye,left:Qye,right:Yye,sub:Xye,full:Jye,arcItem:Zye,iconBtn:e0e,active:t0e,iconImg:s0e,placeholderIcon:n0e,placeholderText:r0e,iconLabel:i0e},a0e=({to:t,label:e,icon:n,variant:r="main"})=>{const{search:i}=qn();let a=!1;try{const o=new URLSearchParams(i),c=o.get("tab"),u=o.get("sub"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),x=m.get("sub");a=r==="sub"?c===g&&!!x&&u===x:c===g}catch(o){a=!1}return s.jsxs(zs,{to:t,"aria-label":e,className:[Cr.iconBtn,r==="sub"?Cr.muted:"",a?Cr.active:""].join(" "),title:e,replace:!1,children:[n?s.jsx("img",{src:n,alt:"",className:Cr.iconImg}):s.jsx("div",{className:Cr.placeholderIcon,"aria-hidden":"true",children:s.jsx("span",{className:Cr.placeholderText,children:e.slice(0,2).toUpperCase()})}),s.jsx("div",{className:Cr.iconLabel,children:e})]})},p1=({items:t,side:e,anchorSide:n="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:o=440})=>{const c=P.useMemo(()=>{const h=t.length;if(h===0)return[];let m=-90,g=90;e==="left"?(m=90,g=270):e==="sub"?n==="left"?(m=90,g=270):(m=-90,g=90):e==="full"&&(m=0,g=360);const x=(g-m)/(h+1),b=r?190:250;return t.map((w,k)=>{const L=(m+x*(k+1))*Math.PI/180;return{it:w,x:Math.cos(L)*b,y:Math.sin(L)*b}})},[t,e,n,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=n==="left"?`calc(50% - ${o}px)`:`calc(50% + ${o}px)`),h})();return s.jsx("div",{className:[Cr.arc,e==="left"?Cr.left:"",e==="right"?Cr.right:"",e==="sub"?Cr.sub:"",e==="full"?Cr.full:""].join(" "),style:u,children:c.map(({it:h,x:m,y:g})=>s.jsx("div",{className:Cr.arcItem,style:{transform:`translate(${m}px, ${g}px)`},children:s.jsx(a0e,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},o0e=["creators","scans","predictions","news","records","feedback"],L_=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],l0e={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},c0e=new Set(o0e),d0e=L_.reduce((t,e)=>(t[e.key]=e,t),{}),u0e=t=>typeof t=="string"&&c0e.has(t),h0e=({logoSrc:t})=>{const[e]=sr(),n=e.get("tab")||null,r=P.useMemo(()=>L_.filter(b=>b.side==="left"),[]),i=P.useMemo(()=>L_.filter(b=>b.side==="right"),[]),a=u0e(n)?n:null,o=a?l0e[a]:[],c=a?d0e[a].side:"right",u=P.useRef(null),[h,m]=P.useState(220),[g,x]=P.useState(440);return P.useEffect(()=>{const b=()=>{var N,v;const k=((v=(N=u.current)==null?void 0:N.offsetWidth)!=null?v:380)/2,L=Math.round(k+60),I=Math.round(L+220);m(L),x(I)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),s.jsxs("div",{className:Cr.wrap,children:[s.jsx("div",{className:Cr.centerLogoWrap,children:s.jsx(zs,{to:"/community",className:Cr.centerLogoLink,"aria-label":"Community Hub Home",children:s.jsx("img",{ref:u,src:t,alt:"Community Hub",className:Cr.centerLogo})})}),s.jsx(p1,{items:r.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"left",variant:"main",arcOffset:h}),s.jsx(p1,{items:i.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"right",variant:"main",arcOffset:h}),o.length>0&&s.jsx(p1,{items:o.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"sub",anchorSide:c,compact:!0,variant:"sub",outerOffset:g})]})},m0e="_topWrap_1rivx_1",p0e="_divider_1rivx_19",g0e="_contentArea_1rivx_53",f0e="_placeholder_1rivx_63",v0e="_placeholderTitle_1rivx_77",x0e="_placeholderText_1rivx_91",xu={topWrap:m0e,divider:p0e,contentArea:g0e,placeholder:f0e,placeholderTitle:v0e,placeholderText:x0e},y0e="/assets/logo_communityhub-LVMLHRD6.png",b0e=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function BL(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function _0e(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(o=>parseInt(o,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const n=new Date(t);return Number.isNaN(n.getTime())?new Date().toISOString():n.toISOString()}function g1(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function w0e(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function j0e(t){return t.avatar?t.avatar:`/avatars/${BL(t.code||t.name||"creator")}.png`}function S0e(t){const e=BL(t.code||t.name||"creator"),n=[],r=g1(t.youtube);r&&n.push({type:"YouTube",url:r});const i=g1(t.twitch);i&&n.push({type:"Twitch",url:i});const a=g1(t.discord);return a&&n.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:j0e(t),description:w0e(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:_0e(t.latestActivity),platforms:n}}function N0e(t){var n,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(n=t==null?void 0:t.generatedAt)!=null?n:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function $L(t="/data/creators-live.json"){const[e,n]=P.useState(null),[r,i]=P.useState(""),[a,o]=P.useState(!1),[c,u]=P.useState(0);return P.useEffect(()=>{let h=!1;async function m(){o(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const x=await g.json();h||n(N0e(x))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),n(null))}finally{h||o(!1)}}return m(),()=>{h=!0}},[t,c]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const k0e=b0e,C0e=k0e.map(S0e),T0e=[...C0e];function OL(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function tc(t,e,n=OL){if(t<=0)return"";const r=n(t);return e?`${r} ${e}`:r}function yp(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function I0e(t,e){const n=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*n;case"views":return(r.totalViews-i.totalViews)*n;case"activity":return(yp(r.lastActive)-yp(i.lastActive))*n*-1;case"language":return r.language.localeCompare(i.language)*n;default:return 0}}}function E0e(t){const e={width:16,height:16};switch(t){case"YouTube":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),s.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[s.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),s.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),s.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[s.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),s.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),s.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[s.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),s.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),s.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function fI({c:t}){return s.jsxs("article",{className:"cc-card",children:[s.jsxs("header",{className:"cc-card-head",children:[s.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const n=e.currentTarget;n.onerror=null,n.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),s.jsxs("div",{className:"cc-card-title",children:[s.jsx("h3",{className:"cc-name",children:t.name}),s.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[E0e(e.type),s.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),s.jsx("p",{className:"cc-desc",children:t.description}),s.jsxs("div",{className:"cc-stats",children:[s.jsx("span",{title:"Subscribers",children:tc(t.subscribers,"subs")}),s.jsx("span",{title:"Total views",children:tc(t.totalViews,"views")}),s.jsx("span",{title:"Weekly views",children:tc(t.weeklyViews,"/wk")}),s.jsx("span",{title:"Weekly posts",children:tc(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),s.jsxs("footer",{className:"cc-meta",children:[s.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),s.jsxs("span",{className:"cc-meta-right",children:["active ",yp(t.lastActive),"d ago"]})]})]},t.id)}function A0e({data:t}){return s.jsx("div",{className:"cc-table-wrap",children:s.jsxs("table",{className:"cc-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Lang"}),s.jsx("th",{children:"Subs"}),s.jsx("th",{children:"Total Views"}),s.jsx("th",{children:"Weekly Views"}),s.jsx("th",{children:"Weekly Posts"}),s.jsx("th",{children:"Active"})]})}),s.jsx("tbody",{children:t.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"cc-table-name",children:[s.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),s.jsx("span",{children:e.name})]})}),s.jsx("td",{children:e.language.toUpperCase()}),s.jsx("td",{children:tc(e.subscribers)}),s.jsx("td",{children:tc(e.totalViews)}),s.jsx("td",{children:tc(e.weeklyViews)}),s.jsx("td",{children:tc(e.weeklyPosts,void 0,n=>`${n}`)}),s.jsxs("td",{children:[yp(e.lastActive),"d"]})]},e.id))})]})})}function VL(){var X,J;const[t,e]=P.useState("static"),[n,r]=P.useState("cards"),[i,a]=P.useState("subs"),[o,c]=P.useState("desc"),[u,h]=P.useState("all"),[m,g]=P.useState("all"),[x,b]=P.useState(0),[w,k]=P.useState(365),[A,L]=P.useState(null),[I,N]=P.useState(""),[v,_]=P.useState(!1),[R,j]=P.useState(""),[S,C]=P.useState(null),{snapshot:M,error:T}=$L(),F=(X=M==null?void 0:M.data)!=null&&X.length?M.data:null,D=F!=null?F:T0e,V=t==="static"?D:(J=S!=null?S:F)!=null?J:[],U=P.useMemo(()=>{const se=new Set(V.map(ue=>ue.language));return Array.from(se).sort()},[V]),K=P.useMemo(()=>V.filter(se=>u==="all"?!0:se.language===u).filter(se=>m==="all"?!0:se.platforms.some(ue=>ue.type===m)).filter(se=>se.subscribers>=x).filter(se=>yp(se.lastActive)<=w).slice().sort(I0e(i,o)),[V,u,m,x,w,i,o]);P.useEffect(()=>{if(!A&&K.length){const se=K[Math.floor(Math.random()*K.length)];L(se.id)}},[K,A]);const H=P.useMemo(()=>K.find(se=>se.id===A)||null,[K,A]),z=P.useMemo(()=>K.slice().sort((se,ue)=>ue.weeklyViews-se.weeklyViews).slice(0,5),[K]),Y=P.useMemo(()=>K.slice().sort((se,ue)=>ue.weeklyPosts-se.weeklyPosts).slice(0,5),[K]);async function te(){j(""),_(!0);try{const se=await fetch(I,{headers:{Accept:"application/json"}});if(!se.ok)throw new Error(`HTTP ${se.status}`);const ue=await se.json(),Ne=Array.isArray(ue)?ue:Array.isArray(ue==null?void 0:ue.data)?ue.data:[];C(Ne)}catch(se){j((se==null?void 0:se.message)||"Fetch failed")}finally{_(!1)}}const G=K.length===0;return s.jsxs("section",{className:"cc-wrap",children:[s.jsxs("div",{className:"cc-heading",children:[s.jsx("h1",{children:"Content Creator Hub"}),s.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),M&&s.jsxs("p",{className:"cc-sync",children:[s.jsxs("span",{children:["Live stats synced ",new Date(M.generatedAt).toLocaleString()]}),s.jsxs("span",{children:[M.data.length," profiles"]})]}),T&&s.jsx("p",{className:"cc-sync-error",children:T})]}),s.jsxs("div",{className:"cc-toolbar",children:[s.jsxs("div",{className:"cc-toolbar-row",children:[s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Data"}),s.jsxs("select",{value:t,onChange:se=>e(se.target.value),children:[s.jsx("option",{value:"static",children:"Static"}),s.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"View"}),s.jsxs("select",{value:n,onChange:se=>r(se.target.value),children:[s.jsx("option",{value:"cards",children:"Cards"}),s.jsx("option",{value:"table",children:"Table"}),s.jsx("option",{value:"json",children:"JSON"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Sort by"}),s.jsxs("select",{value:i,onChange:se=>a(se.target.value),children:[s.jsx("option",{value:"subs",children:"Subs"}),s.jsx("option",{value:"views",children:"Views"}),s.jsx("option",{value:"activity",children:"Activity"}),s.jsx("option",{value:"language",children:"Language"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Dir"}),s.jsxs("select",{value:o,onChange:se=>c(se.target.value),children:[s.jsx("option",{value:"desc",children:"Desc"}),s.jsx("option",{value:"asc",children:"Asc"})]})]})]}),s.jsxs("div",{className:"cc-toolbar-row",children:[s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Language"}),s.jsxs("select",{value:u,onChange:se=>h(se.target.value),children:[s.jsx("option",{value:"all",children:"All"}),U.map(se=>s.jsx("option",{value:se,children:se.toUpperCase()},se))]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Platform"}),s.jsxs("select",{value:m,onChange:se=>g(se.target.value),children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"YouTube",children:"YouTube"}),s.jsx("option",{value:"Twitch",children:"Twitch"}),s.jsx("option",{value:"TikTok",children:"TikTok"}),s.jsx("option",{value:"Discord",children:"Discord"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Min subs"}),s.jsx("input",{type:"number",min:0,value:x,onChange:se=>b(Number(se.target.value||0)),placeholder:"0"})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Active within"}),s.jsxs("select",{value:w,onChange:se=>k(Number(se.target.value)),children:[s.jsx("option",{value:7,children:"7 days"}),s.jsx("option",{value:30,children:"30 days"}),s.jsx("option",{value:90,children:"90 days"}),s.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&s.jsxs("div",{className:"cc-api",children:[s.jsxs("div",{className:"cc-api-ctrls",children:[s.jsxs("label",{className:"cc-field cc-field-grow",children:[s.jsx("span",{children:"API URL"}),s.jsx("input",{type:"url",value:I,onChange:se=>N(se.target.value),placeholder:"https://api.example.com/creators"})]}),s.jsx("button",{className:"cc-btn",onClick:te,disabled:!I||v,children:v?"Loading":"Fetch"})]}),R&&s.jsx("div",{className:"cc-api-error",children:R}),s.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),H&&s.jsxs("div",{className:"cc-spotlight",children:[s.jsxs("div",{className:"cc-spot-head",children:[s.jsx("h2",{children:"Random CC Spotlight"}),s.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!K.length)return;const se=K[Math.floor(Math.random()*K.length)];L(se.id)},children:"Shuffle"})]}),s.jsx(fI,{c:H})]}),s.jsxs("div",{className:"cc-main",children:[s.jsxs("div",{className:"cc-main-left",children:[G&&s.jsxs("div",{className:"cc-empty",children:[s.jsx("h3",{children:"No creators match the filters"}),s.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!G&&n==="cards"&&s.jsx("div",{className:"cc-grid",children:K.map(se=>s.jsx(fI,{c:se},se.id))}),!G&&n==="table"&&s.jsx(A0e,{data:K}),n==="json"&&s.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(K,null,2)})]}),s.jsxs("aside",{className:"cc-main-right",children:[s.jsxs("div",{className:"cc-side",children:[s.jsx("h3",{children:"Weekly Toplists"}),s.jsxs("div",{className:"cc-toplist",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"By Weekly Views"}),s.jsx("ol",{children:z.map(se=>s.jsxs("li",{children:[s.jsx("span",{children:se.name}),s.jsx("span",{className:"cc-top-val",children:OL(se.weeklyViews)})]},se.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"By Weekly Posts"}),s.jsx("ol",{children:Y.map(se=>s.jsxs("li",{children:[s.jsx("span",{children:se.name}),s.jsx("span",{className:"cc-top-val",children:se.weeklyPosts})]},se.id))})]})]})]}),s.jsxs("div",{className:"cc-side cc-legal",children:[s.jsx("h3",{children:"Legal & Disclaimer"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Only public data; no embedding without permission."}),s.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),s.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function UL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Scans"}),s.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function zL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Predictions"}),s.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function GL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  News"}),s.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function HL(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Feedback"}),s.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const P0e=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],f1=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],R0e={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},L0e=t=>R0e[t],D0e=(t,e=64)=>{var i;const n=L0e(t),r=_d(n);return r&&(i=Ni(r,e))!=null?i:null},M0e="_recordsPage_kdw96_1",F0e="_navArea_kdw96_15",B0e="_tabList_kdw96_27",$0e="_tabButton_kdw96_55",O0e="_tabButtonActive_kdw96_101",V0e="_sectionContent_kdw96_115",U0e="_placeholderPanel_kdw96_127",z0e="_placeholderTitle_kdw96_143",G0e="_placeholderText_kdw96_157",H0e="_milestoneSection_kdw96_171",W0e="_sectionHeader_kdw96_183",K0e="_filterBar_kdw96_197",q0e="_filterButtons_kdw96_231",Q0e="_filterButton_kdw96_231",Y0e="_filterButtonActive_kdw96_295",X0e="_filterSelectWrapper_kdw96_309",J0e="_filterLabel_kdw96_321",Z0e="_filterSelect_kdw96_309",ebe="_emptyFilterMessage_kdw96_355",tbe="_currentSection_kdw96_369",sbe="_currentGrid_kdw96_381",nbe="_currentCard_kdw96_393",rbe="_categoryLabel_kdw96_419",ibe="_recordTitle_kdw96_433",abe="_currentDetails_kdw96_445",obe="_notes_kdw96_457",lbe="_infoPanel_kdw96_469",cbe="_infoCard_kdw96_481",dbe="_disclaimerCard_kdw96_483",ube="_infoHeader_kdw96_525",hbe="_infoAuthor_kdw96_539",mbe="_authorName_kdw96_557",pbe="_authorBadge_kdw96_565",gbe="_infoAuthorIcon_kdw96_591",fbe="_infoDate_kdw96_623",vbe="_infoBody_kdw96_633",xbe="_infoTitle_kdw96_645",ybe="_infoLink_kdw96_665",bbe="_milestoneGrid_kdw96_719",_be="_milestoneCard_kdw96_731",wbe="_milestoneCategory_kdw96_757",jbe="_milestoneTitle_kdw96_771",Sbe="_milestoneDetails_kdw96_785",Nbe="_detailRow_kdw96_797",kbe="_detailLabel_kdw96_809",Cbe="_detailValue_kdw96_823",Tbe="_sourceLink_kdw96_833",Ibe="_emptyState_kdw96_855",ht={recordsPage:M0e,navArea:F0e,tabList:B0e,tabButton:$0e,tabButtonActive:O0e,sectionContent:V0e,placeholderPanel:U0e,placeholderTitle:z0e,placeholderText:G0e,milestoneSection:H0e,sectionHeader:W0e,filterBar:K0e,filterButtons:q0e,filterButton:Q0e,filterButtonActive:Y0e,filterSelectWrapper:X0e,filterLabel:J0e,filterSelect:Z0e,emptyFilterMessage:ebe,currentSection:tbe,currentGrid:sbe,currentCard:nbe,categoryLabel:rbe,recordTitle:ibe,currentDetails:abe,notes:obe,infoPanel:lbe,infoCard:cbe,disclaimerCard:dbe,infoHeader:ube,infoAuthor:hbe,authorName:mbe,authorBadge:pbe,infoAuthorIcon:gbe,infoDate:fbe,infoBody:vbe,infoTitle:xbe,infoLink:ybe,milestoneGrid:bbe,milestoneCard:_be,milestoneCategory:wbe,milestoneTitle:jbe,milestoneDetails:Sbe,detailRow:Nbe,detailLabel:kbe,detailValue:Cbe,sourceLink:Tbe,emptyState:Ibe},Ebe=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],Abe={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},Pbe=({title:t,description:e,hint:n})=>s.jsxs("article",{className:ht.placeholderPanel,children:[s.jsx("h2",{className:ht.placeholderTitle,children:t}),s.jsx("p",{className:ht.placeholderText,children:e}),n&&s.jsx("p",{className:ht.emptyState,children:n})]}),Rbe=()=>{const[t,e]=P.useState("all"),n=P.useMemo(()=>{const a=new Set,o=[];for(const c of f1)a.has(c.category)||(a.add(c.category),o.push(c.category));return["all",...o]},[]),r=t==="all"?f1:f1.filter(a=>a.category===t),i=a=>{e(a)};return s.jsxs("section",{className:ht.milestoneSection,"aria-label":"Records milestones",children:[s.jsxs("div",{className:ht.sectionHeader,children:[s.jsx("p",{children:"Milestones"}),s.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),s.jsxs("div",{className:ht.filterBar,children:[s.jsx("div",{className:ht.filterButtons,children:n.map(a=>s.jsx("button",{type:"button",className:[ht.filterButton,t===a&&ht.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),s.jsxs("label",{className:ht.filterSelectWrapper,children:[s.jsx("span",{className:ht.filterLabel,children:"Category"}),s.jsx("select",{value:t,onChange:a=>i(a.target.value),className:ht.filterSelect,children:n.map(a=>s.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?s.jsx("p",{className:ht.emptyFilterMessage,children:"No milestones fall into this category yet."}):s.jsx("div",{className:ht.milestoneGrid,children:r.map(a=>s.jsxs("article",{className:ht.milestoneCard,children:[s.jsx("span",{className:ht.milestoneCategory,children:a.category}),s.jsx("h3",{className:ht.milestoneTitle,children:a.achievement}),s.jsxs("div",{className:ht.milestoneDetails,children:[s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Name"}),s.jsx("span",{className:ht.detailValue,children:a.name})]}),s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Server"}),s.jsx("span",{className:ht.detailValue,children:a.server})]}),s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Date"}),s.jsx("span",{className:ht.detailValue,children:a.date})]}),a.notes&&s.jsx("p",{className:ht.notes,children:a.notes}),a.source&&s.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:ht.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},Lbe=()=>s.jsxs("section",{className:ht.currentSection,"aria-label":"Current community records",children:[s.jsxs("div",{className:ht.sectionHeader,children:[s.jsx("p",{children:"Current Records"}),s.jsx("h2",{children:"The latest verified achievements"})]}),s.jsx("div",{className:ht.currentGrid,children:P0e.map((t,e)=>s.jsxs("article",{className:ht.currentCard,children:[s.jsx("span",{className:ht.categoryLabel,children:t.category}),s.jsx("h3",{className:ht.recordTitle,children:t.record}),s.jsxs("div",{className:ht.currentDetails,children:[s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Class"}),s.jsx("span",{className:ht.detailValue,children:t.classType})]}),s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Player"}),s.jsx("span",{className:ht.detailValue,children:t.playerName})]}),s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Server"}),s.jsx("span",{className:ht.detailValue,children:t.server})]}),s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Days"}),s.jsx("span",{className:ht.detailValue,children:t.days})]}),t.release&&s.jsxs("div",{className:ht.detailRow,children:[s.jsx("span",{className:ht.detailLabel,children:"Release"}),s.jsx("span",{className:ht.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&s.jsxs("p",{className:ht.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&s.jsx("p",{className:ht.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),pm={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function WL(){const[t,e]=P.useState("current"),n=D0e("infoCard",32),r=()=>{if(t==="current")return s.jsx(Lbe,{});if(t==="milestones")return s.jsx(Rbe,{});const i=Abe[t];return s.jsx(Pbe,{title:i.title,description:i.description,hint:i.hint})};return s.jsxs("section",{className:ht.recordsPage,children:[s.jsx(RL,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),s.jsxs("div",{className:ht.infoPanel,children:[s.jsxs("div",{className:ht.infoCard,children:[s.jsxs("div",{className:ht.infoHeader,children:[s.jsxs("div",{className:ht.infoAuthor,children:[n?s.jsx("img",{src:n,alt:"Community Data",className:ht.infoAuthorIcon}):null,s.jsx("span",{className:ht.authorName,children:"S&F Tavern Info"}),s.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:ht.authorBadge,children:"Discord"})]}),s.jsx("span",{className:ht.infoDate,children:"11.12.2020 14:08"})]}),s.jsxs("div",{className:ht.infoBody,children:[s.jsx("h3",{className:ht.infoTitle,children:pm.title}),pm.paragraphs.map(i=>s.jsx("p",{children:i},i))]}),s.jsxs("div",{className:ht.infoLink,children:[s.jsx("span",{children:pm.linkLabel}),s.jsx("a",{href:pm.linkUrl,target:"_blank",rel:"noreferrer",children:pm.linkUrl})]})]}),s.jsxs("div",{className:ht.disclaimerCard,children:[s.jsx("h3",{className:ht.infoTitle,children:"Disclaimer"}),s.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),s.jsx("div",{className:ht.navArea,children:s.jsx("nav",{className:ht.tabList,"aria-label":"Records navigation",children:Ebe.map(i=>s.jsx("button",{type:"button",className:`${ht.tabButton} ${t===i.key?ht.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),s.jsx("div",{className:ht.sectionContent,children:r()})]})}const Dbe={creators:VL,scans:UL,predictions:zL,news:GL,records:WL,feedback:HL};function Mbe(){const[t]=sr(),e=t.get("tab")||"",n=Dbe[e];return s.jsxs(as,{children:[s.jsx("div",{className:xu.topWrap,children:s.jsx(h0e,{logoSrc:y0e})}),s.jsx("div",{className:xu.divider}),s.jsx("div",{className:xu.contentArea,children:n?s.jsx(n,{}):s.jsxs("div",{className:xu.placeholder,children:[s.jsx("h2",{className:xu.placeholderTitle,children:"Community"}),s.jsx("p",{className:xu.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function Fbe(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsxs(zs,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),s.jsxs(zs,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),s.jsxs(zs,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function Bbe(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans  Letzter Scan"}),s.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function $be(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans  Archiv"}),s.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function Obe(){return s.jsx(as,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:s.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:s.jsx(Vbe,{}),right:s.jsx(Ube,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[s.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),s.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.jsx(zs,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),s.jsx(zs,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(Uf,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),s.jsx(Uf,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),s.jsx(Uf,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),s.jsx(Uf,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function Vbe(){return s.jsxs("nav",{className:"space-y-2 text-sm",children:[s.jsx(gm,{to:"/guild-hub/planner",children:"Planner"}),s.jsx(gm,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),s.jsx(gm,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),s.jsx(gm,{to:"/guild-hub/waitlist",children:"Waitlist"}),s.jsx(gm,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function Ube(){return s.jsxs("aside",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),s.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function Uf({to:t,title:e,desc:n}){return s.jsxs(zs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),n?s.jsx("div",{className:"mt-1 text-sm opacity-75",children:n}):null]})}function gm({to:t,children:e}){return s.jsx(Bs,{to:t,className:({isActive:n})=>`block rounded-lg border px-3 py-2 no-underline ${n?"font-semibold":""}`,style:({isActive:n})=>({borderColor:n?"#2B6DE0":"#2B4C73",background:n?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:n?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const zbe="_page_1mlmy_1",Gbe="_header_1mlmy_13",Hbe="_headerStack_1mlmy_25",Wbe="_kicker_1mlmy_37",Kbe="_title_1mlmy_53",qbe="_headerActions_1mlmy_65",Qbe="_primaryAction_1mlmy_77",Ybe="_secondaryAction_1mlmy_79",Xbe="_infoStrip_1mlmy_127",Jbe="_infoBlock_1mlmy_147",Zbe="_infoLabel_1mlmy_161",e1e="_freshnessWrapper_1mlmy_181",t1e="_freshnessBadge_1mlmy_189",s1e="_badge_f0_1mlmy_213",n1e="_badge_f1_1mlmy_215",r1e="_badge_f2_1mlmy_217",i1e="_badge_f3_1mlmy_219",a1e="_badge_f4_1mlmy_221",o1e="_badge_f5_1mlmy_223",l1e="_badge_f6_1mlmy_225",c1e="_badge_f7_1mlmy_227",d1e="_badge_unknown_1mlmy_229",u1e="_popover_1mlmy_233",h1e="_popoverLabel_1mlmy_265",m1e="_filterToolbar_1mlmy_275",p1e="_filterSheetButton_1mlmy_285",g1e="_inlineFilters_1mlmy_303",f1e="_searchInput_1mlmy_315",v1e="_select_1mlmy_317",x1e="_ownerGroup_1mlmy_335",y1e="_ownerChip_1mlmy_347",b1e="_ownerChipActive_1mlmy_365",_1e="_sortGroup_1mlmy_375",w1e="_sortLabel_1mlmy_387",j1e="_directionButton_1mlmy_397",S1e="_listBody_1mlmy_415",N1e="_tableWrapper_1mlmy_427",k1e="_table_1mlmy_427",C1e="_stickyColumn_1mlmy_481",T1e="_rowTitleButton_1mlmy_495",I1e="_tableStatus_1mlmy_513",E1e="_cardList_1mlmy_533",A1e="_card_1mlmy_533",P1e="_cardHeader_1mlmy_565",R1e="_cardTitle_1mlmy_577",L1e="_cardMeta_1mlmy_595",D1e="_cardDescription_1mlmy_611",M1e="_cardFooter_1mlmy_623",F1e="_cardLabel_1mlmy_639",B1e="_scanBadge_1mlmy_649",$1e="_emptyState_1mlmy_665",O1e="_sheetBackdrop_1mlmy_681",V1e="_sheet_1mlmy_681",U1e="_sheetHandle_1mlmy_721",z1e="_sheetBody_1mlmy_739",G1e="_sheetLabel_1mlmy_755",H1e="_sheetActions_1mlmy_793",W1e="_overlay_1mlmy_807",K1e="_panel_1mlmy_825",q1e="_modal_1mlmy_851",Q1e="_drawer_1mlmy_861",Y1e="_panelHeader_1mlmy_869",X1e="_panelControls_1mlmy_883",J1e="_panelDescription_1mlmy_913",Z1e="_detailGrid_1mlmy_925",e_e="_panelFooter_1mlmy_957",t_e="_formOverlay_1mlmy_969",s_e="_formPanel_1mlmy_991",n_e="_formGrid_1mlmy_1017",r_e="_menuWrapper_1mlmy_1029",i_e="_dotsButton_1mlmy_1037",a_e="_menu_1mlmy_1029",o_e="_pagination_1mlmy_1109",He={page:zbe,header:Gbe,headerStack:Hbe,kicker:Wbe,title:Kbe,headerActions:qbe,primaryAction:Qbe,secondaryAction:Ybe,infoStrip:Xbe,infoBlock:Jbe,infoLabel:Zbe,freshnessWrapper:e1e,freshnessBadge:t1e,badge_f0:s1e,badge_f1:n1e,badge_f2:r1e,badge_f3:i1e,badge_f4:a1e,badge_f5:o1e,badge_f6:l1e,badge_f7:c1e,badge_unknown:d1e,popover:u1e,popoverLabel:h1e,filterToolbar:m1e,filterSheetButton:p1e,inlineFilters:g1e,searchInput:f1e,select:v1e,ownerGroup:x1e,ownerChip:y1e,ownerChipActive:b1e,sortGroup:_1e,sortLabel:w1e,directionButton:j1e,listBody:S1e,tableWrapper:N1e,table:k1e,stickyColumn:C1e,rowTitleButton:T1e,tableStatus:I1e,cardList:E1e,card:A1e,cardHeader:P1e,cardTitle:R1e,cardMeta:L1e,cardDescription:D1e,cardFooter:M1e,cardLabel:F1e,scanBadge:B1e,emptyState:$1e,sheetBackdrop:O1e,sheet:V1e,sheetHandle:U1e,sheetBody:z1e,sheetLabel:G1e,sheetActions:H1e,overlay:W1e,panel:K1e,modal:q1e,drawer:Q1e,panelHeader:Y1e,panelControls:X1e,panelDescription:J1e,detailGrid:Z1e,panelFooter:e_e,formOverlay:t_e,formPanel:s_e,formGrid:n_e,menuWrapper:r_e,dotsButton:i_e,menu:a_e,pagination:o_e};function l_e(){var te;const[t,e]=q.useState(wae),[n,r]=q.useState(Qb),[i,a]=q.useState(Qb),o=sh(n.q,300),c=q.useMemo(()=>{const G=jae(t,n,o);return Sae(G,n.sort,n.dir)},[t,n,o]),u=q.useMemo(()=>Nae(c,n.page,n.pageSize),[c,n.page,n.pageSize]),h=Math.max(1,Math.ceil(c.length/n.pageSize)),m=q.useMemo(()=>Array.from(new Set(t.map(G=>G.owner))),[t]),g=nh("(min-width: 768px)"),x=nh("(min-width: 1024px)"),[b,w]=q.useState(!1),[k,A]=q.useState(null),L=(te=t.find(G=>G.id===k))!=null?te:null,I=q.useRef(null);rh(I,!!L&&!x);const[N,v]=q.useState(null),[_,R]=q.useState(!1),j=q.useRef(null);rh(j,_);const S=q.useMemo(()=>kae(t),[t]),C=q.useMemo(()=>S?vp(S.nextUpdateAt,Date.now()):"",[S]),M=g,T=x,F=s.jsxs("div",{className:He.headerActions,children:[s.jsx("button",{type:"button",className:He.primaryAction,onClick:()=>{v(null),R(!0)},children:"Neuer Eintrag"}),!g&&s.jsx("button",{type:"button",className:He.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>w(!0),children:"Filter"})]}),D=G=>{const X=A3(G);r(X),a(X)},V=(G,X)=>{const J=A3({...n,[G]:X,page:G==="page"||G==="pageSize"?X:1});D(J)},U=()=>{D(i),w(!1)},K=()=>{D(Qb),w(!1)},H=(G,X=!1)=>{if(X)a(J=>{const ue=J.owner.includes(G)?J.owner.filter(Ne=>Ne!==G):[...J.owner,G];return{...J,owner:ue}});else{const se=n.owner.includes(G)?n.owner.filter(ue=>ue!==G):[...n.owner,G];V("owner",se)}},z=(G,X)=>{e(J=>J.map(se=>se.id===G?{...se,status:X,updatedAt:new Date().toISOString()}:se))},Y=G=>{e(X=>X.some(se=>se.id===G.id)?X.map(se=>se.id===G.id?G:se):[G,...X]),R(!1)};return s.jsxs(as,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[s.jsxs("div",{className:He.page,children:[s.jsxs("header",{className:He.header,children:[s.jsxs("div",{className:He.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:He.kicker,children:"Deployment"}),s.jsx("h1",{className:He.title,children:"Planer"})]}),F]}),s.jsxs("div",{className:He.infoStrip,children:[s.jsxs("div",{className:He.infoBlock,children:[s.jsx("span",{className:He.infoLabel,children:"Offen"}),s.jsx("strong",{children:c.filter(G=>G.status==="open").length})]}),s.jsxs("div",{className:He.infoBlock,children:[s.jsx("span",{className:He.infoLabel,children:"In Arbeit"}),s.jsx("strong",{children:c.filter(G=>G.status==="in_progress").length})]}),S&&s.jsx(c_e,{code:S.freshness,label:n2[S.freshness],updatedAt:S.lastScanAt,nextUpdateAt:S.nextUpdateAt,countdown:C})]})]}),s.jsx("section",{className:He.filterToolbar,children:g?s.jsx(d_e,{filters:n,owners:m,onChange:V,onOwnerToggle:G=>H(G,!1)}):s.jsx("button",{type:"button",className:He.filterSheetButton,onClick:()=>w(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),s.jsx("section",{className:He.listBody,children:M?s.jsx(u_e,{items:u,sort:n.sort,dir:n.dir,onSortChange:G=>{const X=n.sort===G&&n.dir==="asc"?"desc":"asc";V("sort",G),V("dir",X)},onSelect:G=>A(G.id),onStatusChange:z,onEdit:G=>{v(G),R(!0)}}):s.jsx(h_e,{items:u,onSelect:G=>A(G.id),onStatusChange:z,onEdit:G=>{v(G),R(!0)}})}),s.jsx(p_e,{page:n.page,totalPages:h,onChange:G=>V("page",G)})]}),b&&s.jsx(m_e,{filters:i,owners:m,onChange:a,onOwnerToggle:G=>H(G,!0),onClose:()=>w(!1),onApply:U,onReset:K}),L&&s.jsx(qL,{ref:I,item:L,mode:T?"drawer":"modal",onClose:()=>A(null),onEdit:()=>{v(L),R(!0),A(null)},onStatusChange:z}),_&&s.jsx(QL,{ref:j,owners:m.length?m:NL,item:N,onClose:()=>R(!1),onSubmit:Y})]})}function c_e({code:t,label:e,updatedAt:n,nextUpdateAt:r,countdown:i}){var c;const[a,o]=q.useState(!1);return s.jsxs("div",{className:He.freshnessWrapper,children:[s.jsx("button",{type:"button",className:`${He.freshnessBadge} ${(c=He[`badge_${t}`])!=null?c:""}`,"aria-label":`Freshness ${e}`,onClick:()=>o(u=>!u),children:e}),a&&s.jsxs("div",{className:He.popover,role:"dialog","aria-label":"Freshness Details",children:[s.jsxs("div",{children:[s.jsx("span",{className:He.popoverLabel,children:"Zuletzt gescannt"}),s.jsx("strong",{children:vo(n)})]}),s.jsxs("div",{children:[s.jsx("span",{className:He.popoverLabel,children:"Naechster Scan"}),s.jsx("strong",{children:vo(r)})]}),s.jsxs("div",{children:[s.jsx("span",{className:He.popoverLabel,children:"Countdown"}),s.jsx("strong",{children:i})]})]})]})}function d_e({filters:t,owners:e,onChange:n,onOwnerToggle:r}){return s.jsxs("div",{className:He.inlineFilters,children:[s.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:He.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>n("q",i.target.value)}),s.jsxs("select",{className:He.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>n("type",i.target.value),children:[s.jsx("option",{value:"all",children:"Typ (alle)"}),s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]}),s.jsxs("select",{className:He.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>n("status",i.target.value),children:[s.jsx("option",{value:"all",children:"Status (alle)"}),s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),s.jsxs("select",{className:He.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>n("range",i.target.value),children:[s.jsx("option",{value:"7d",children:"7 Tage"}),s.jsx("option",{value:"30d",children:"30 Tage"}),s.jsx("option",{value:"90d",children:"90 Tage"}),s.jsx("option",{value:"all",children:"Alle"})]}),s.jsx("div",{className:He.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return s.jsx("button",{type:"button",className:`${He.ownerChip} ${a?He.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),s.jsxs("div",{className:He.sortGroup,children:[s.jsx("label",{htmlFor:"planner-sort",className:He.sortLabel,children:"Sortieren"}),s.jsxs("select",{id:"planner-sort",name:"plannerSort",className:He.select,value:t.sort,onChange:i=>n("sort",i.target.value),children:[s.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),s.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),s.jsx("option",{value:"priority",children:"Prioritaet"}),s.jsx("option",{value:"title",children:"Titel"})]}),s.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:He.directionButton,onClick:()=>n("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function u_e({items:t,sort:e,dir:n,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:o}){const c=u=>e===u?n==="asc"?" ":" ":"";return t.length===0?s.jsx(KL,{}):s.jsx("div",{className:He.tableWrapper,children:s.jsxs("table",{className:He.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:He.stickyColumn,onClick:()=>r("title"),children:["Titel",c("title")]}),s.jsx("th",{children:"Typ"}),s.jsx("th",{children:"Owner"}),s.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",c("dueAt")]}),s.jsx("th",{children:"Status"}),s.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",c("updatedAt")]}),s.jsx("th",{})]})}),s.jsx("tbody",{children:t.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:He.stickyColumn,children:s.jsx("button",{type:"button",className:He.rowTitleButton,onClick:()=>i(u),children:u.title})}),s.jsx("td",{children:s2[u.type]}),s.jsx("td",{children:u.owner}),s.jsx("td",{children:vo(u.dueAt)}),s.jsx("td",{children:s.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:He.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),s.jsx("td",{children:qp(u.updatedAt)}),s.jsx("td",{children:s.jsx(YL,{onEdit:()=>o(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function h_e({items:t,onSelect:e,onStatusChange:n,onEdit:r}){return t.length===0?s.jsx(KL,{}):s.jsx("div",{className:He.cardList,children:t.map(i=>s.jsxs("article",{className:He.card,children:[s.jsxs("div",{className:He.cardHeader,children:[s.jsxs("div",{children:[s.jsx("button",{type:"button",className:He.cardTitle,onClick:()=>e(i),children:i.title}),s.jsxs("div",{className:He.cardMeta,children:[s.jsx("span",{children:s2[i.type]}),s.jsx("span",{children:bae[i.status]}),s.jsxs("span",{children:["Due ",vo(i.dueAt)]})]})]}),s.jsx(YL,{onEdit:()=>r(i),onComplete:()=>n(i.id,"done")})]}),s.jsx("p",{className:He.cardDescription,children:i.description}),s.jsxs("div",{className:He.cardFooter,children:[s.jsxs("div",{children:[s.jsx("span",{className:He.cardLabel,children:"Owner"}),s.jsx("strong",{children:i.owner})]}),s.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:He.tableStatus,value:i.status,onChange:a=>n(i.id,a.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),s.jsxs("span",{className:He.scanBadge,children:["Letzter Scan ",qp(i.lastScanAt)]})]})]},i.id))})}function KL(){return s.jsx("div",{className:He.emptyState,children:s.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function m_e({filters:t,owners:e,onChange:n,onOwnerToggle:r,onClose:i,onApply:a,onReset:o}){return s.jsx("div",{className:He.sheetBackdrop,role:"presentation",onClick:i,children:s.jsxs("div",{className:He.sheet,role:"dialog","aria-label":"Filter",onClick:c=>c.stopPropagation(),children:[s.jsx("div",{className:He.sheetHandle}),s.jsxs("div",{className:He.sheetBody,children:[s.jsx("h2",{children:"Filter"}),s.jsxs("label",{className:He.sheetLabel,children:["Suche",s.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:c=>n(u=>({...u,q:c.target.value}))})]}),s.jsxs("label",{className:He.sheetLabel,children:["Typ",s.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:c=>n(u=>({...u,type:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]})]}),s.jsxs("label",{className:He.sheetLabel,children:["Status",s.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:c=>n(u=>({...u,status:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{className:He.sheetLabel,children:["Zeitraum",s.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:c=>n(u=>({...u,range:c.target.value})),children:[s.jsx("option",{value:"7d",children:"7 Tage"}),s.jsx("option",{value:"30d",children:"30 Tage"}),s.jsx("option",{value:"90d",children:"90 Tage"}),s.jsx("option",{value:"all",children:"Alle"})]})]}),s.jsxs("div",{className:He.sheetLabel,children:["Owner",s.jsx("div",{className:He.ownerGroup,children:e.map(c=>{const u=t.owner.includes(c);return s.jsx("button",{type:"button",className:`${He.ownerChip} ${u?He.ownerChipActive:""}`,onClick:()=>r(c),children:c},c)})})]})]}),s.jsxs("div",{className:He.sheetActions,children:[s.jsx("button",{type:"button",onClick:o,children:"Zuruecksetzen"}),s.jsx("button",{type:"button",className:He.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const qL=q.forwardRef(({item:t,mode:e,onClose:n,onEdit:r,onStatusChange:i},a)=>s.jsx("div",{className:He.overlay,children:s.jsxs("div",{ref:a,className:`${He.panel} ${e==="drawer"?He.drawer:He.modal}`,children:[s.jsxs("header",{className:He.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:He.cardLabel,children:s2[t.type]}),s.jsx("h2",{children:t.title})]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("div",{className:He.panelControls,children:[s.jsxs("label",{children:["Status",s.jsxs("select",{value:t.status,onChange:o=>i(t.id,o.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{children:["Prioritaet",s.jsxs("select",{disabled:!0,value:t.priority,children:[s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"Hoch"}),s.jsx("option",{value:"medium",children:"Mittel"}),s.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),s.jsx("p",{className:He.panelDescription,children:t.description}),s.jsxs("dl",{className:He.detailGrid,children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Owner"}),s.jsx("dd",{children:t.owner})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Assignees"}),s.jsx("dd",{children:t.assignees.join(", ")})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Termin"}),s.jsx("dd",{children:vo(t.dueAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt aktualisiert"}),s.jsx("dd",{children:qp(t.updatedAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Erstellt"}),s.jsx("dd",{children:vo(t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Tags"}),s.jsx("dd",{children:t.tags.join(", ")})]})]}),s.jsxs("div",{className:He.panelFooter,children:[s.jsx("button",{type:"button",className:He.secondaryAction,onClick:r,children:"Bearbeiten"}),s.jsx("button",{type:"button",className:He.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));qL.displayName="DetailPanel";const QL=q.forwardRef(({owners:t,item:e,onClose:n,onSubmit:r},i)=>{const[a,o]=q.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:NL[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});q.useEffect(()=>{e&&o(e)},[JSON.stringify(e)]);const c=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{o(m=>{const x=m.tags.includes(h)?m.tags.filter(b=>b!==h):[...m.tags,h];return{...m,tags:x}})};return s.jsx("div",{className:He.formOverlay,children:s.jsxs("form",{ref:i,className:He.formPanel,onSubmit:c,children:[s.jsxs("header",{className:He.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:He.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),s.jsx("h2",{children:e?e.title:"Planner Task"})]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("label",{className:He.sheetLabel,children:["Titel",s.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>o(m=>({...m,title:h.target.value})),required:!0})]}),s.jsxs("label",{className:He.sheetLabel,children:["Beschreibung",s.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>o(m=>({...m,description:h.target.value})),rows:4})]}),s.jsxs("div",{className:He.formGrid,children:[s.jsxs("label",{children:["Typ",s.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>o(m=>({...m,type:h.target.value})),children:[s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>o(m=>({...m,status:h.target.value})),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{children:["Owner",s.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>o(m=>({...m,owner:h.target.value})),children:t.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Prioritaet",s.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>o(m=>({...m,priority:h.target.value})),children:[s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"Hoch"}),s.jsx("option",{value:"medium",children:"Mittel"}),s.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),s.jsxs("label",{className:He.sheetLabel,children:["Termin",s.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>o(m=>({...m,dueAt:new Date(h.target.value).toISOString()}))})]}),s.jsxs("div",{className:He.sheetLabel,children:["Tags",s.jsx("div",{className:He.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const m=a.tags.includes(h);return s.jsx("button",{type:"button",className:`${He.ownerChip} ${m?He.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),s.jsxs("footer",{className:He.panelFooter,children:[s.jsx("button",{type:"button",className:He.secondaryAction,onClick:n,children:"Abbrechen"}),s.jsx("button",{type:"submit",className:He.primaryAction,children:"Speichern"})]})]})})});QL.displayName="PlannerFormOverlay";function YL({onEdit:t,onComplete:e}){const[n,r]=q.useState(!1),i=q.useRef(null);return q.useEffect(()=>{if(!n)return;const a=o=>{var c;(c=i.current)!=null&&c.contains(o.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n]),s.jsxs("div",{className:He.menuWrapper,ref:i,children:[s.jsx("button",{type:"button",className:He.dotsButton,"aria-haspopup":"menu","aria-expanded":n,onClick:()=>r(a=>!a),children:"..."}),n&&s.jsxs("div",{className:He.menu,role:"menu",children:[s.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),s.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),s.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function p_e({page:t,totalPages:e,onChange:n}){return s.jsxs("div",{className:He.pagination,children:[s.jsx("button",{type:"button",className:He.secondaryAction,onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),s.jsxs("span",{children:["Seite ",t," / ",e]}),s.jsx("button",{type:"button",className:He.secondaryAction,onClick:()=>n(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const g_e="_page_1cvuk_1",f_e="_header_1cvuk_13",v_e="_headerLeading_1cvuk_29",x_e="_backLink_1cvuk_41",y_e="_headerStack_1cvuk_77",b_e="_kicker_1cvuk_89",__e="_title_1cvuk_105",w_e="_subtitle_1cvuk_117",j_e="_headerActions_1cvuk_129",S_e="_plannerNotice_1cvuk_141",N_e="_noticeItem_1cvuk_163",k_e="_noticeWarning_1cvuk_185",C_e="_noticeDot_1cvuk_197",T_e="_tabSection_1cvuk_213",I_e="_tabBar_1cvuk_225",E_e="_tabItem_1cvuk_239",A_e="_tabItemActive_1cvuk_279",P_e="_tabLabel_1cvuk_291",R_e="_tabHelper_1cvuk_301",L_e="_tabPanel_1cvuk_311",D_e="_tabBadge_1cvuk_331",M_e="_primaryAction_1cvuk_1331",F_e="_secondaryAction_1cvuk_1333",B_e="_infoStrip_1cvuk_1383",$_e="_infoBlock_1cvuk_1403",O_e="_infoLabel_1cvuk_1415",V_e="_infoHint_1cvuk_1441",U_e="_stageGrid_1cvuk_1453",z_e="_panel_1cvuk_1465",G_e="_panelHeader_1cvuk_1487",H_e="_panelKicker_1cvuk_1501",W_e="_panelTitle_1cvuk_1517",K_e="_panelLead_1cvuk_1529",q_e="_badge_1cvuk_1541",Q_e="_panelBody_1cvuk_1563",Y_e="_placeholderGrid_1cvuk_1575",X_e="_placeholderCard_1cvuk_1587",J_e="_placeholderTitle_1cvuk_1609",Z_e="_placeholderText_1cvuk_1619",ewe="_helperSection_1cvuk_1631",twe="_helperCard_1cvuk_1639",swe="_helperKicker_1cvuk_1661",nwe="_helperTitle_1cvuk_1677",rwe="_helperText_1cvuk_1689",iwe="_helperActions_1cvuk_1701",Pt={page:g_e,header:f_e,headerLeading:v_e,backLink:x_e,headerStack:y_e,kicker:b_e,title:__e,subtitle:w_e,headerActions:j_e,plannerNotice:S_e,noticeItem:N_e,noticeWarning:k_e,noticeDot:C_e,tabSection:T_e,tabBar:I_e,tabItem:E_e,tabItemActive:A_e,tabLabel:P_e,tabHelper:R_e,tabPanel:L_e,tabBadge:D_e,primaryAction:M_e,secondaryAction:F_e,infoStrip:B_e,infoBlock:$_e,infoLabel:O_e,infoHint:V_e,stageGrid:U_e,panel:z_e,panelHeader:G_e,panelKicker:H_e,panelTitle:W_e,panelLead:K_e,badge:q_e,panelBody:Q_e,placeholderGrid:Y_e,placeholderCard:X_e,placeholderTitle:J_e,placeholderText:Z_e,helperSection:ewe,helperCard:twe,helperKicker:swe,helperTitle:nwe,helperText:rwe,helperActions:iwe},awe="_setupGrid_rdp6l_1",owe="_setupLeft_rdp6l_13",lwe="_setupRight_rdp6l_15",cwe="_card_rdp6l_27",dwe="_cardHeader_rdp6l_49",uwe="_cardKicker_rdp6l_61",hwe="_cardTitle_rdp6l_77",mwe="_cardText_rdp6l_89",pwe="_toggleGroup_rdp6l_101",gwe="_toggleButton_rdp6l_113",fwe="_toggleButtonActive_rdp6l_143",vwe="_modeHint_rdp6l_155",xwe="_formGrid_rdp6l_167",ywe="_formField_rdp6l_179",bwe="_formLabel_rdp6l_191",_we="_input_rdp6l_201",wwe="_suggestions_rdp6l_231",jwe="_suggestionBtn_rdp6l_257",Swe="_suggestionName_rdp6l_297",Nwe="_suggestionMeta_rdp6l_305",kwe="_partnerActions_rdp6l_315",Cwe="_primaryAction_rdp6l_329",Twe="_secondaryAction_rdp6l_331",Iwe="_partnerList_rdp6l_381",Ewe="_partnerRow_rdp6l_393",Awe="_partnerName_rdp6l_413",Pwe="_partnerMeta_rdp6l_423",Rwe="_removeButton_rdp6l_433",Lwe="_emptyState_rdp6l_463",Dwe="_previewBlock_rdp6l_473",Mwe="_previewLabel_rdp6l_485",Fwe="_previewValue_rdp6l_499",Bwe="_previewCard_rdp6l_509",$we="_previewTitle_rdp6l_523",Owe="_previewMeta_rdp6l_533",Vwe="_previewList_rdp6l_543",Uwe="_previewItem_rdp6l_555",zwe="_setupInfo_rdp6l_569",Gwe="_setupWarning_rdp6l_593",Hwe="_setupInfoIcon_rdp6l_605",Wwe="_setupInfoTitle_rdp6l_629",Kwe="_setupInfoText_rdp6l_639",nt={setupGrid:awe,setupLeft:owe,setupRight:lwe,card:cwe,cardHeader:dwe,cardKicker:uwe,cardTitle:hwe,cardText:mwe,toggleGroup:pwe,toggleButton:gwe,toggleButtonActive:fwe,modeHint:vwe,formGrid:xwe,formField:ywe,formLabel:bwe,input:_we,suggestions:wwe,suggestionBtn:jwe,suggestionName:Swe,suggestionMeta:Nwe,partnerActions:kwe,primaryAction:Cwe,secondaryAction:Twe,partnerList:Iwe,partnerRow:Ewe,partnerName:Awe,partnerMeta:Pwe,removeButton:Rwe,emptyState:Lwe,previewBlock:Dwe,previewLabel:Mwe,previewValue:Fwe,previewCard:Bwe,previewTitle:$we,previewMeta:Owe,previewList:Vwe,previewItem:Uwe,setupInfo:zwe,setupWarning:Gwe,setupInfoIcon:Hwe,setupInfoTitle:Wwe,setupInfoText:Kwe};function qwe({setupState:t,onChangeMode:e,onChangeBaseGuild:n,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var A,L,I,N,v,_,R,j,S,C;const[a,o]=q.useState(()=>{var M,T,F,D;return{name:(T=(M=t.baseGuild)==null?void 0:M.name)!=null?T:"",server:(D=(F=t.baseGuild)==null?void 0:F.server)!=null?D:""}}),[c,u]=q.useState({id:void 0,name:"",server:""}),h=sh(a.name,250),m=sh(c.name,250),g=vI(h,a.server||"all"),x=vI(m,c.server||"all"),b=!!((L=(A=t.baseGuild)==null?void 0:A.name)!=null&&L.trim()&&((N=(I=t.baseGuild)==null?void 0:I.server)!=null&&N.trim())),w=t.partnerGuilds.length>0;q.useEffect(()=>{var T,F,D,V;const M={name:(F=(T=t.baseGuild)==null?void 0:T.name)!=null?F:"",server:(V=(D=t.baseGuild)==null?void 0:D.server)!=null?V:""};(M.name!==a.name||M.server!==a.server)&&o(M)},[(v=t.baseGuild)==null?void 0:v.name,(_=t.baseGuild)==null?void 0:_.server]);const k=()=>{!c.name.trim()||!c.server.trim()||(r(c),u({id:void 0,name:"",server:""}))};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:nt.setupGrid,children:[s.jsxs("div",{className:nt.setupLeft,children:[s.jsxs("div",{className:nt.card,children:[s.jsx("div",{className:nt.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:nt.cardKicker,children:"Modus"}),s.jsx("h3",{className:nt.cardTitle,children:"Scan-based oder manuell"}),s.jsx("p",{className:nt.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),s.jsxs("div",{className:nt.toggleGroup,role:"group","aria-label":"Setup Modus",children:[s.jsx("button",{type:"button",className:`${nt.toggleButton} ${t.mode==="scan"?nt.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),s.jsx("button",{type:"button",className:`${nt.toggleButton} ${t.mode==="manual"?nt.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),s.jsx("p",{className:nt.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),s.jsxs("div",{className:nt.card,children:[s.jsx("div",{className:nt.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:nt.cardKicker,children:"Base Guild"}),s.jsx("h3",{className:nt.cardTitle,children:"Stammdaten"}),s.jsx("p",{className:nt.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),s.jsxs("div",{className:nt.formGrid,children:[s.jsxs("label",{className:nt.formField,children:[s.jsx("span",{className:nt.formLabel,children:"Guild name"}),s.jsx("input",{type:"text",className:nt.input,value:a.name,onChange:M=>{const T=M.target.value;o(F=>({...F,name:T}))},onBlur:()=>n({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&s.jsx("div",{className:nt.suggestions,children:g.map(M=>s.jsxs("button",{type:"button",className:nt.suggestionBtn,onClick:()=>{o({name:M.name,server:M.server}),n({id:M.id,name:M.name,server:M.server})},children:[s.jsx("span",{className:nt.suggestionName,children:M.name}),s.jsx("span",{className:nt.suggestionMeta,children:M.server})]},M.id))})]}),s.jsxs("label",{className:nt.formField,children:[s.jsx("span",{className:nt.formLabel,children:"Server"}),s.jsx("input",{type:"text",className:nt.input,value:a.server,onChange:M=>{const T=M.target.value;o(F=>({...F,server:T}))},onBlur:()=>n({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),s.jsxs("div",{className:nt.card,children:[s.jsx("div",{className:nt.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:nt.cardKicker,children:"Partner Guilds"}),s.jsx("h3",{className:nt.cardTitle,children:"Partner hinzufuegen"}),s.jsx("p",{className:nt.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),s.jsxs("div",{className:nt.formGrid,children:[s.jsxs("label",{className:nt.formField,children:[s.jsx("span",{className:nt.formLabel,children:"Name"}),s.jsx("input",{type:"text",className:nt.input,value:c.name,onChange:M=>u(T=>({...T,name:M.target.value})),placeholder:"z.B. Nova Alliance"}),x.length>0&&s.jsx("div",{className:nt.suggestions,children:x.map(M=>s.jsxs("button",{type:"button",className:nt.suggestionBtn,onClick:()=>u({id:M.id,name:M.name,server:M.server}),children:[s.jsx("span",{className:nt.suggestionName,children:M.name}),s.jsx("span",{className:nt.suggestionMeta,children:M.server})]},M.id))})]}),s.jsxs("label",{className:nt.formField,children:[s.jsx("span",{className:nt.formLabel,children:"Server"}),s.jsx("input",{type:"text",className:nt.input,value:c.server,onChange:M=>u(T=>({...T,server:M.target.value})),placeholder:"z.B. EU-02"})]})]}),s.jsxs("div",{className:nt.partnerActions,children:[s.jsx("button",{type:"button",className:nt.primaryAction,onClick:k,children:"Add partner guild"}),s.jsx("button",{type:"button",className:nt.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),s.jsx("div",{className:nt.partnerList,children:t.partnerGuilds.length===0?s.jsx("div",{className:nt.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(M=>s.jsxs("div",{className:nt.partnerRow,children:[s.jsxs("div",{children:[s.jsx("div",{className:nt.partnerName,children:M.name||"Unbenannt"}),s.jsx("div",{className:nt.partnerMeta,children:M.server||"Server n/a"})]}),s.jsx("button",{type:"button",className:nt.removeButton,onClick:()=>i(M.id),children:"Remove"})]},M.id))})]})]}),s.jsx("aside",{className:nt.setupRight,children:s.jsxs("div",{className:nt.card,children:[s.jsx("div",{className:nt.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:nt.cardKicker,children:"Preview"}),s.jsx("h3",{className:nt.cardTitle,children:"Uebersicht"}),s.jsx("p",{className:nt.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),s.jsxs("div",{className:nt.previewBlock,children:[s.jsx("div",{className:nt.previewLabel,children:"Modus"}),s.jsx("div",{className:nt.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),s.jsxs("div",{className:nt.previewBlock,children:[s.jsx("div",{className:nt.previewLabel,children:"Base Guild"}),s.jsx("div",{className:nt.previewCard,children:(R=t.baseGuild)!=null&&R.name||(j=t.baseGuild)!=null&&j.server?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:nt.previewTitle,children:((S=t.baseGuild)==null?void 0:S.name)||"Unbenannt"}),s.jsx("div",{className:nt.previewMeta,children:((C=t.baseGuild)==null?void 0:C.server)||"Server n/a"})]}):s.jsx("div",{className:nt.emptyState,children:"No base guild selected yet."})})]}),s.jsxs("div",{className:nt.previewBlock,children:[s.jsx("div",{className:nt.previewLabel,children:"Partner Guilds"}),s.jsx("div",{className:nt.previewList,children:t.partnerGuilds.length===0?s.jsx("div",{className:nt.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(M=>s.jsxs("div",{className:nt.previewItem,children:[s.jsx("div",{className:nt.previewTitle,children:M.name||"Unbenannt"}),s.jsx("div",{className:nt.previewMeta,children:M.server||"Server n/a"})]},M.id))})]})]})})]}),b?w?null:s.jsxs("div",{className:nt.setupInfo,role:"status","aria-live":"polite",children:[s.jsx("span",{className:nt.setupInfoIcon,"aria-hidden":!0,children:"i"}),s.jsxs("div",{children:[s.jsx("div",{className:nt.setupInfoTitle,children:"Optional: add partner guilds."}),s.jsx("p",{className:nt.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):s.jsxs("div",{className:`${nt.setupInfo} ${nt.setupWarning}`,role:"status","aria-live":"polite",children:[s.jsx("span",{className:nt.setupInfoIcon,"aria-hidden":!0,children:"i"}),s.jsxs("div",{children:[s.jsx("div",{className:nt.setupInfoTitle,children:"No base guild selected yet."}),s.jsx("p",{className:nt.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function vI(t,e){const[n,r]=q.useState([]);return q.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function o(){const c=Mn("FusionSetup:guildSearch");try{const u=Fp(Tt,"latest"),h=await Tn(c,{path:"guilds/latest (collectionGroup)"},()=>Cn(Dn(u,Hi("nameFold"),Zl(i),ec(i+""),pr(12)))),m=await Tn(c,{path:"guilds/latest (collectionGroup)"},()=>Cn(Dn(u,ji("nameNgrams","array-contains",i),pr(12)))),g=new Set,x=[],b=w=>{var R,j,S,C,M,T,F,D,V,U;const k=w.data(),L=(R=w.ref.parent)==null?void 0:R.parent;if(((j=L==null?void 0:L.parent)==null?void 0:j.id)!=="guilds")return;const N=(C=(S=L==null?void 0:L.id)!=null?S:k.guildIdentifier)!=null?C:w.id;if(!N||g.has(N))return;const v=(F=(T=k.server)!=null?T:(M=k.values)==null?void 0:M.Server)!=null?F:"Unknown";if(e!=="all"&&v!==e)return;const _=(U=(V=k.name)!=null?V:(D=k.values)==null?void 0:D.Name)!=null?U:"Unbekannte Gilde";g.add(N),x.push({id:N,name:_,server:v})};h.forEach(b),m.forEach(b),a||(x.sort((w,k)=>w.name.localeCompare(k.name)),r(x))}catch(u){console.error("[FusionPlanner] guild search failed",u),a||r([])}finally{dn(c)}}return o(),()=>{a=!0}},[t,e]),n}const Qwe="_membersContainer_1ctw8_1",Ywe="_scenarioSwitcher_1ctw8_13",Xwe="_scenarioButton_1ctw8_25",Jwe="_scenarioButtonActive_1ctw8_63",Zwe="_scenarioButtonName_1ctw8_75",eje="_scenarioButtonDesc_1ctw8_83",tje="_setupInfo_1ctw8_93",sje="_setupInfoHeader_1ctw8_113",nje="_setupInfoTitle_1ctw8_127",rje="_setupInfoMode_1ctw8_139",ije="_setupInfoRow_1ctw8_163",aje="_setupInfoLabel_1ctw8_175",oje="_setupInfoValue_1ctw8_189",lje="_setupInfoMeta_1ctw8_199",cje="_setupInfoPartners_1ctw8_209",dje="_setupInfoBadge_1ctw8_221",uje="_setupInfoEmpty_1ctw8_245",hje="_membersSummary_1ctw8_255",mje="_membersSummaryItem_1ctw8_275",pje="_membersSummaryLabel_1ctw8_287",gje="_membersSummaryValue_1ctw8_301",fje="_maxSlotsInput_1ctw8_313",vje="_membersTable_1ctw8_331",xje="_membersRow_1ctw8_349",yje="_membersHead_1ctw8_375",bje="_membersCell_1ctw8_385",_je="_memberName_1ctw8_395",wje="_memberBadge_1ctw8_403",jje="_assignmentCell_1ctw8_427",Sje="_assignmentBadge_1ctw8_439",Nje="_assignmentBadgeMain_1ctw8_463",kje="_assignmentBadgePartner_1ctw8_475",Cje="_assignmentBadgeWatch_1ctw8_487",Tje="_assignmentBadgeIdle_1ctw8_499",Ije="_assignmentActions_1ctw8_507",Eje="_assignmentButton_1ctw8_519",Aje="_assignmentButtonActive_1ctw8_551",Pje="_decisionGroup_1ctw8_563",Rje="_decisionButton_1ctw8_575",Lje="_decisionButtonActive_1ctw8_607",Dje="_emptyWrap_1ctw8_619",Mje="_emptyTitle_1ctw8_633",Fje="_emptyText_1ctw8_641",Bje="_contextMenuBackdrop_1ctw8_651",$je="_contextMenu_1ctw8_651",Oje="_contextMenuItem_1ctw8_693",Vje="_partnerPickerCell_1ctw8_725",Uje="_partnerLabel_1ctw8_737",zje="_partnerSelect_1ctw8_751",Ye={membersContainer:Qwe,scenarioSwitcher:Ywe,scenarioButton:Xwe,scenarioButtonActive:Jwe,scenarioButtonName:Zwe,scenarioButtonDesc:eje,setupInfo:tje,setupInfoHeader:sje,setupInfoTitle:nje,setupInfoMode:rje,setupInfoRow:ije,setupInfoLabel:aje,setupInfoValue:oje,setupInfoMeta:lje,setupInfoPartners:cje,setupInfoBadge:dje,setupInfoEmpty:uje,membersSummary:hje,membersSummaryItem:mje,membersSummaryLabel:pje,membersSummaryValue:gje,maxSlotsInput:fje,membersTable:vje,membersRow:xje,membersHead:yje,membersCell:bje,memberName:_je,memberBadge:wje,assignmentCell:jje,assignmentBadge:Sje,assignmentBadgeMain:Nje,assignmentBadgePartner:kje,assignmentBadgeWatch:Cje,assignmentBadgeIdle:Tje,assignmentActions:Ije,assignmentButton:Eje,assignmentButtonActive:Aje,decisionGroup:Pje,decisionButton:Rje,decisionButtonActive:Lje,emptyWrap:Dje,emptyTitle:Mje,emptyText:Fje,contextMenuBackdrop:Bje,contextMenu:$je,contextMenuItem:Oje,partnerPickerCell:Vje,partnerLabel:Uje,partnerSelect:zje};function Gje({members:t,scenario:e,onChangeScenarioDecision:n,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var j,S,C,M,T,F;const[o,c]=q.useState(null),u=q.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map((D,V)=>({id:D.id,label:D.name||`Partner ${V+1}`})):[{id:"partner-default",label:"Partner guild"}],m=q.useCallback((D,V)=>{c({memberId:D,...V})},[]),g=q.useCallback(()=>{c(null)},[]),x=q.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),b=q.useCallback((D,V,U)=>{x(),u.current=window.setTimeout(()=>{m(D,{x:V,y:U})},550)},[x,m]);q.useEffect(()=>()=>x(),[x]);const w=q.useCallback((D,V,U)=>{if(V==="main")n(D,"take"),r(D,"main");else if(V==="partner"){const K=U?`partner:${U}`:"partner";n(D,"take"),r(D,K)}else n(D,"bench"),r(D,"none");g()},[g,n,r]),k=q.useCallback((D,V)=>{n(D,V),V==="take"?r(D,"main"):r(D,"none")},[n,r]);if(!!!((S=(j=a.baseGuild)==null?void 0:j.name)!=null&&S.trim()&&((M=(C=a.baseGuild)==null?void 0:C.server)!=null&&M.trim())))return s.jsxs("div",{className:Ye.emptyWrap,children:[s.jsx("h3",{className:Ye.emptyTitle,children:"No base guild configured"}),s.jsx("p",{className:Ye.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return s.jsxs("div",{className:Ye.emptyWrap,children:[s.jsx("h3",{className:Ye.emptyTitle,children:"Members & Slots"}),s.jsx("p",{className:Ye.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return s.jsxs("div",{className:Ye.emptyWrap,children:[s.jsx("h3",{className:Ye.emptyTitle,children:"No members found"}),s.jsx("p",{className:Ye.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const L=(T=e.decisions)!=null?T:{},I=(F=e.targetGuildAssignments)!=null?F:{},N=t.filter(D=>L[D.id]==="take").length,v=t.filter(D=>L[D.id]==="bench").length,_=t.filter(D=>L[D.id]==="drop").length,R=Math.max(0,e.maxSlots-e.reservedSlots-N);return s.jsxs("div",{className:Ye.membersContainer,children:[s.jsx("div",{className:Ye.scenarioSwitcher,children:s.jsxs("div",{className:`${Ye.scenarioButton} ${Ye.scenarioButtonActive}`,children:[s.jsx("span",{className:Ye.scenarioButtonName,children:e.name}),e.description?s.jsx("span",{className:Ye.scenarioButtonDesc,children:e.description}):null]})}),s.jsxs("div",{className:Ye.setupInfo,children:[s.jsxs("div",{className:Ye.setupInfoHeader,children:[s.jsx("div",{className:Ye.setupInfoTitle,children:"Planning for"}),s.jsx("span",{className:Ye.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?s.jsxs("div",{className:Ye.setupInfoRow,children:[s.jsx("span",{className:Ye.setupInfoLabel,children:"Base Guild"}),s.jsxs("span",{className:Ye.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",s.jsxs("span",{className:Ye.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):s.jsx("div",{className:Ye.setupInfoEmpty,children:"No base guild selected in Setup tab."}),s.jsxs("div",{className:Ye.setupInfoRow,children:[s.jsx("span",{className:Ye.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?s.jsx("div",{className:Ye.setupInfoPartners,children:a.partnerGuilds.map(D=>s.jsxs("span",{className:Ye.setupInfoBadge,children:[D.name||"Unbenannt",s.jsxs("span",{className:Ye.setupInfoMeta,children:[" (",D.server||"Server n/a",")"]})]},D.id))}):s.jsx("span",{className:Ye.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),s.jsxs("div",{className:Ye.membersSummary,children:[s.jsxs("div",{className:Ye.membersSummaryItem,children:[s.jsx("div",{className:Ye.membersSummaryLabel,children:"Selected"}),s.jsxs("div",{className:Ye.membersSummaryValue,children:[N," / ",e.maxSlots]})]}),s.jsxs("div",{className:Ye.membersSummaryItem,children:[s.jsx("div",{className:Ye.membersSummaryLabel,children:"Free slots"}),s.jsx("div",{className:Ye.membersSummaryValue,children:R})]}),s.jsxs("div",{className:Ye.membersSummaryItem,children:[s.jsx("div",{className:Ye.membersSummaryLabel,children:"Bench"}),s.jsx("div",{className:Ye.membersSummaryValue,children:v})]}),s.jsxs("div",{className:Ye.membersSummaryItem,children:[s.jsx("div",{className:Ye.membersSummaryLabel,children:"Drop"}),s.jsx("div",{className:Ye.membersSummaryValue,children:_})]}),s.jsxs("div",{className:Ye.membersSummaryItem,children:[s.jsx("div",{className:Ye.membersSummaryLabel,children:"Reserved"}),s.jsx("div",{className:Ye.membersSummaryValue,children:e.reservedSlots})]}),s.jsxs("div",{className:Ye.membersSummaryItem,children:[s.jsx("div",{className:Ye.membersSummaryLabel,children:"Max slots"}),s.jsx("input",{type:"number",className:Ye.maxSlotsInput,value:e.maxSlots,min:0,onChange:D=>i(Number(D.target.value))})]})]}),s.jsxs("div",{className:Ye.membersTable,children:[s.jsxs("div",{className:`${Ye.membersRow} ${Ye.membersHead}`,children:[s.jsx("div",{className:Ye.membersCell,children:"Name"}),s.jsx("div",{className:Ye.membersCell,children:"Level"}),s.jsx("div",{className:Ye.membersCell,children:"Guild"}),s.jsx("div",{className:Ye.membersCell,children:"Class"}),s.jsx("div",{className:Ye.membersCell,children:"Plan"}),s.jsx("div",{className:Ye.membersCell,children:"Decision"}),s.jsx("div",{className:Ye.membersCell,children:"Partner"})]}),t.map(D=>{var te,G,X,J,se,ue,Ne,Ee,ee;const V=(te=L[D.id])!=null?te:"undecided",U=(G=I[D.id])!=null?G:"none",K=U&&U.toString().startsWith("partner:")?U.split(":")[1]:null,H=(ue=(X=h.find(le=>le.id===K))==null?void 0:X.label)!=null?ue:U==="partner"?(se=(J=h[0])==null?void 0:J.label)!=null?se:"Partner guild":null,z=V==="take"&&U==="main"?"main":V==="take"&&(U==="partner"||K)?"partner":V==="bench"?"watch":"unassigned",Y=z==="main"?"Main guild":z==="partner"?H||"Partner guild":z==="watch"?"Watchlist":"Not planned";return s.jsxs("div",{className:Ye.membersRow,onContextMenu:le=>{le.preventDefault(),m(D.id,{x:le.clientX,y:le.clientY})},onTouchStart:le=>{const re=le.touches[0];re&&b(D.id,re.clientX,re.clientY)},onTouchEnd:x,onTouchCancel:x,children:[s.jsx("div",{className:Ye.membersCell,children:s.jsx("div",{className:Ye.memberName,children:D.name})}),s.jsx("div",{className:Ye.membersCell,children:s.jsxs("span",{className:Ye.memberBadge,children:["Lvl ",D.level]})}),s.jsx("div",{className:Ye.membersCell,children:D.guildName}),s.jsx("div",{className:Ye.membersCell,children:(Ee=(Ne=D.className)!=null?Ne:D.class)!=null?Ee:"?"}),s.jsxs("div",{className:`${Ye.membersCell} ${Ye.assignmentCell}`,children:[s.jsx("span",{className:`${Ye.assignmentBadge} ${z==="main"?Ye.assignmentBadgeMain:z==="partner"?Ye.assignmentBadgePartner:z==="watch"?Ye.assignmentBadgeWatch:Ye.assignmentBadgeIdle}`,children:Y}),s.jsxs("div",{className:Ye.assignmentActions,role:"group","aria-label":"Target guild selection",children:[s.jsx("button",{type:"button",className:`${Ye.assignmentButton} ${z==="main"?Ye.assignmentButtonActive:""}`,onClick:()=>w(D.id,"main"),children:"Main"}),s.jsx("button",{type:"button",className:`${Ye.assignmentButton} ${z==="watch"?Ye.assignmentButtonActive:""}`,onClick:()=>w(D.id,"watch"),children:"Watch"}),s.jsx("button",{type:"button",className:`${Ye.assignmentButton} ${z==="partner"?Ye.assignmentButtonActive:""}`,onClick:()=>w(D.id,"partner"),children:"Partner"})]})]}),s.jsx("div",{className:Ye.membersCell,children:s.jsx("div",{className:Ye.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(le=>s.jsx("button",{type:"button",className:`${Ye.decisionButton} ${V===le?Ye.decisionButtonActive:""}`,onClick:()=>k(D.id,le),children:le==="take"?"Take":le==="bench"?"Bench":le==="drop"?"Drop":"?"},le))})}),s.jsxs("div",{className:`${Ye.membersCell} ${Ye.partnerPickerCell}`,children:[s.jsx("label",{className:Ye.partnerLabel,htmlFor:`partner-select-${D.id}`,children:"Partner"}),s.jsx("select",{id:`partner-select-${D.id}`,className:Ye.partnerSelect,value:K!=null?K:(ee=h[0])==null?void 0:ee.id,onChange:le=>w(D.id,"partner",le.target.value),children:h.map(le=>s.jsx("option",{value:le.id,children:le.label},le.id))})]})]},D.id)})]}),o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ye.contextMenuBackdrop,onClick:g}),s.jsxs("div",{className:Ye.contextMenu,style:{top:o.y,left:o.x},children:[s.jsx("button",{type:"button",className:Ye.contextMenuItem,onClick:()=>w(o.memberId,"main"),children:"Move to Main guild"}),s.jsx("button",{type:"button",className:Ye.contextMenuItem,onClick:()=>w(o.memberId,"watch"),children:"Move to Watchlist"}),h.map(D=>s.jsxs("button",{type:"button",className:Ye.contextMenuItem,onClick:()=>w(o.memberId,"partner",D.id),children:["Move to ",D.label]},D.id))]})]}):null]})}const Hje="_overview_6ytw3_1",Wje="_contextBox_6ytw3_15",Kje="_contextKicker_6ytw3_35",qje="_contextTitle_6ytw3_51",Qje="_contextText_6ytw3_61",Yje="_contextDetails_6ytw3_71",Xje="_detailItem_6ytw3_85",Jje="_detailLabel_6ytw3_99",Zje="_detailValue_6ytw3_113",e2e="_kpiGrid_6ytw3_121",t2e="_kpiCard_6ytw3_133",s2e="_kpiLabel_6ytw3_153",n2e="_kpiValue_6ytw3_167",r2e="_columnsWrapper_6ytw3_177",i2e="_column_6ytw3_177",a2e="_columnDropTarget_6ytw3_213",o2e="_columnHeader_6ytw3_223",l2e="_columnKicker_6ytw3_235",c2e="_columnTitle_6ytw3_251",d2e="_columnCount_6ytw3_259",u2e="_columnBody_6ytw3_281",h2e="_memberCard_6ytw3_293",m2e="_memberTop_6ytw3_337",p2e="_memberName_6ytw3_349",g2e="_memberMeta_6ytw3_357",f2e="_memberBadge_6ytw3_369",v2e="_memberBottom_6ytw3_395",x2e="_memberGuild_6ytw3_409",y2e="_memberServer_6ytw3_419",b2e="_memberActions_6ytw3_427",_2e="_emptyList_6ytw3_469",w2e="_emptyWrap_6ytw3_487",j2e="_emptyTitle_6ytw3_501",S2e="_emptyText_6ytw3_509",N2e="_addPartnerCard_6ytw3_519",k2e="_contextMenuBackdrop_6ytw3_559",C2e="_contextMenu_6ytw3_559",T2e="_contextMenuItem_6ytw3_601",St={overview:Hje,contextBox:Wje,contextKicker:Kje,contextTitle:qje,contextText:Qje,contextDetails:Yje,detailItem:Xje,detailLabel:Jje,detailValue:Zje,kpiGrid:e2e,kpiCard:t2e,kpiLabel:s2e,kpiValue:n2e,columnsWrapper:r2e,column:i2e,columnDropTarget:a2e,columnHeader:o2e,columnKicker:l2e,columnTitle:c2e,columnCount:d2e,columnBody:u2e,memberCard:h2e,memberTop:m2e,memberName:p2e,memberMeta:g2e,memberBadge:f2e,memberBottom:v2e,memberGuild:x2e,memberServer:y2e,memberActions:b2e,emptyList:_2e,emptyWrap:w2e,emptyTitle:j2e,emptyText:S2e,addPartnerCard:N2e,contextMenuBackdrop:k2e,contextMenu:C2e,contextMenuItem:T2e};function I2e({members:t,scenario:e,setupState:n,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var U,K,H;const o=(U=e==null?void 0:e.decisions)!=null?U:{},c=(K=e==null?void 0:e.targetGuildAssignments)!=null?K:{},u=n.partnerGuilds.length>0?n.partnerGuilds.map((z,Y)=>({id:z.id,label:z.name||`Partner ${Y+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(z=>o[z.id]==="take"&&c[z.id]==="main"),m=t.filter(z=>o[z.id]==="bench"),g=u.reduce((z,Y)=>(z[Y.id]=t.filter(te=>{const G=c[te.id];return o[te.id]==="take"&&(G===`partner:${Y.id}`||G==="partner")}),z),{}),x=t.filter(z=>!h.includes(z)&&!m.includes(z)&&!Object.values(g).some(Y=>Y.includes(z))),[b,w]=q.useState(null),[k,A]=q.useState(null),L=q.useRef(null),I=t.length,N=h.length,v=m.length,_=Object.values(g).reduce((z,Y)=>z+Y.length,0),R=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-N-_):0,j=q.useCallback((z,Y,te)=>{z&&(Y==="main"?(r(z,"take"),i(z,"main")):Y==="partner"?(r(z,"take"),i(z,te?`partner:${te}`:"partner")):Y==="unassigned"?(r(z,"undecided"),i(z,"none")):(r(z,"bench"),i(z,"none")),A(null))},[r,i]),S=q.useCallback((z,Y)=>te=>{te.preventDefault();const G=te.dataTransfer.getData("text/plain");G&&j(G,z,Y),w(null)},[j]),C=q.useCallback(z=>Y=>{Y.preventDefault(),w(z)},[]),M=q.useCallback(()=>w(null),[]),T=q.useCallback((z,Y)=>{A({memberId:z,...Y})},[]),F=q.useCallback(()=>{L.current!==null&&(window.clearTimeout(L.current),L.current=null)},[]),D=q.useCallback((z,Y,te)=>{F(),L.current=window.setTimeout(()=>{T(z,{x:Y,y:te})},550)},[F,T]);if(q.useEffect(()=>()=>F(),[F]),!e)return s.jsxs("div",{className:St.emptyWrap,children:[s.jsx("h3",{className:St.emptyTitle,children:"Overview"}),s.jsx("p",{className:St.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return s.jsxs("div",{className:St.emptyWrap,children:[s.jsx("h3",{className:St.emptyTitle,children:"No members loaded"}),s.jsx("p",{className:St.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const V=(z,Y,te,G,X)=>s.jsxs("div",{className:`${St.column} ${b===z?St.columnDropTarget:""}`,onDragOver:C(z),onDragEnter:C(z),onDragLeave:M,onDrop:S(z,X),children:[s.jsxs("div",{className:St.columnHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:St.columnKicker,children:te}),s.jsx("h4",{className:St.columnTitle,children:Y})]}),s.jsx("span",{className:St.columnCount,children:G.length})]}),s.jsx("div",{className:St.columnBody,children:G.length?G.map(J=>{var se,ue,Ne,Ee;return s.jsxs("div",{className:St.memberCard,draggable:!0,onDragStart:ee=>ee.dataTransfer.setData("text/plain",J.id),onContextMenu:ee=>{ee.preventDefault(),T(J.id,{x:ee.clientX,y:ee.clientY})},onTouchStart:ee=>{const le=ee.touches[0];le&&D(J.id,le.clientX,le.clientY)},onTouchEnd:F,onTouchCancel:F,children:[s.jsxs("div",{className:St.memberTop,children:[s.jsxs("div",{children:[s.jsx("div",{className:St.memberName,children:J.name}),s.jsxs("p",{className:St.memberMeta,children:[(ue=(se=J.className)!=null?se:J.class)!=null?ue:"Unknown","  ",(Ne=J.role)!=null?Ne:"Unknown"]})]}),s.jsxs("span",{className:St.memberBadge,children:["Lvl ",(Ee=J.level)!=null?Ee:"?"]})]}),s.jsxs("div",{className:St.memberBottom,children:[s.jsxs("span",{className:St.memberGuild,children:[J.guildName," ",s.jsxs("span",{className:St.memberServer,children:["(",J.server||"Server n/a",")"]})]}),s.jsxs("div",{className:St.memberActions,children:[s.jsx("button",{type:"button",onClick:()=>j(J.id,"main"),children:"Main"}),s.jsx("button",{type:"button",onClick:()=>j(J.id,"watch"),children:"Watch"}),s.jsx("button",{type:"button",onClick:()=>j(J.id,"partner"),children:"Partner"})]})]})]},J.id)}):s.jsx("div",{className:St.emptyList,children:"No players in this list yet."})})]});return s.jsxs("div",{className:St.overview,children:[s.jsxs("div",{className:St.contextBox,children:[s.jsxs("div",{children:[s.jsx("p",{className:St.contextKicker,children:"Setup"}),s.jsx("h3",{className:St.contextTitle,children:"Fusion Overview"}),s.jsx("p",{className:St.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),s.jsxs("div",{className:St.contextDetails,children:[s.jsxs("div",{className:St.detailItem,children:[s.jsx("span",{className:St.detailLabel,children:"Base Guild"}),s.jsx("strong",{className:St.detailValue,children:((H=n.baseGuild)==null?void 0:H.name)||"Unbenannt"})]}),s.jsxs("div",{className:St.detailItem,children:[s.jsx("span",{className:St.detailLabel,children:"Partner Guilds"}),s.jsx("strong",{className:St.detailValue,children:n.partnerGuilds.length})]}),s.jsxs("div",{className:St.detailItem,children:[s.jsx("span",{className:St.detailLabel,children:"Max Slots"}),s.jsx("strong",{className:St.detailValue,children:e.maxSlots})]})]})]}),s.jsxs("div",{className:St.kpiGrid,children:[s.jsxs("div",{className:St.kpiCard,children:[s.jsx("span",{className:St.kpiLabel,children:"Total players"}),s.jsx("strong",{className:St.kpiValue,children:I})]}),s.jsxs("div",{className:St.kpiCard,children:[s.jsx("span",{className:St.kpiLabel,children:"Main guild"}),s.jsx("strong",{className:St.kpiValue,children:N})]}),s.jsxs("div",{className:St.kpiCard,children:[s.jsx("span",{className:St.kpiLabel,children:"Watchlist"}),s.jsx("strong",{className:St.kpiValue,children:v})]}),s.jsxs("div",{className:St.kpiCard,children:[s.jsx("span",{className:St.kpiLabel,children:"Partner guild"}),s.jsx("strong",{className:St.kpiValue,children:_})]}),s.jsxs("div",{className:St.kpiCard,children:[s.jsx("span",{className:St.kpiLabel,children:"Free slots"}),s.jsx("strong",{className:St.kpiValue,children:R})]})]}),s.jsxs("div",{className:St.columnsWrapper,children:[V("unassigned","Unassigned","Noch ohne Planung",x),V("main","Main guild","Take & Assign main",h),V("watch","Watchlist","Bench for review",m),u.map(z=>{var Y;return V("partner",z.label,"Take & Assign partner",(Y=g[z.id])!=null?Y:[],z.id)}),s.jsx("button",{type:"button",className:St.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:St.contextMenuBackdrop,onClick:()=>A(null)}),s.jsxs("div",{className:St.contextMenu,style:{top:k.y,left:k.x},children:[s.jsx("button",{type:"button",className:St.contextMenuItem,onClick:()=>j(k.memberId,"main"),children:"Move to Main guild"}),s.jsx("button",{type:"button",className:St.contextMenuItem,onClick:()=>j(k.memberId,"watch"),children:"Move to Watchlist"}),u.map(z=>s.jsxs("button",{type:"button",className:St.contextMenuItem,onClick:()=>j(k.memberId,"partner",z.id),children:["Move to ",z.label]},z.id))]})]}):null]})}const E2e="_scenariosTab_3v4iw_1",A2e="_scenariosHeader_3v4iw_13",P2e="_scenariosTitle_3v4iw_35",R2e="_scenariosText_3v4iw_45",L2e="_scenarioInfo_3v4iw_57",D2e="_headerActions_3v4iw_71",M2e="_createButton_3v4iw_81",F2e="_scenarioList_3v4iw_115",B2e="_scenarioCard_3v4iw_127",$2e="_scenarioCardActive_3v4iw_147",O2e="_scenarioCardTop_3v4iw_157",V2e="_cardKicker_3v4iw_169",U2e="_cardTitle_3v4iw_185",z2e="_cardText_3v4iw_197",G2e="_scenarioActiveBadge_3v4iw_209",H2e="_scenarioMeta_3v4iw_231",W2e="_scenarioMetaLabel_3v4iw_243",K2e="_scenarioMetaValue_3v4iw_259",q2e="_scenarioStats_3v4iw_269",Q2e="_scenarioStatItem_3v4iw_281",Y2e="_scenarioStatLabel_3v4iw_295",X2e="_scenarioStatValue_3v4iw_311",J2e="_scenarioActions_3v4iw_321",Z2e="_scenarioActionButton_3v4iw_337",eSe="_scenarioActionActive_3v4iw_367",tSe="_scenarioActionGroup_3v4iw_377",sSe="_secondaryActionButton_3v4iw_389",nSe="_deleteActionButton_3v4iw_391",rSe="_deleteActionDisabled_3v4iw_443",ls={scenariosTab:E2e,scenariosHeader:A2e,scenariosTitle:P2e,scenariosText:R2e,scenarioInfo:L2e,headerActions:D2e,createButton:M2e,scenarioList:F2e,scenarioCard:B2e,scenarioCardActive:$2e,scenarioCardTop:O2e,cardKicker:V2e,cardTitle:U2e,cardText:z2e,scenarioActiveBadge:G2e,scenarioMeta:H2e,scenarioMetaLabel:W2e,scenarioMetaValue:K2e,scenarioStats:q2e,scenarioStatItem:Q2e,scenarioStatLabel:Y2e,scenarioStatValue:X2e,scenarioActions:J2e,scenarioActionButton:Z2e,scenarioActionActive:eSe,scenarioActionGroup:tSe,secondaryActionButton:sSe,deleteActionButton:nSe,deleteActionDisabled:rSe};function iSe({scenarios:t,activeScenarioId:e,onSetActiveScenario:n,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:o}){const c=q.useCallback(m=>{const g=Object.values(m.decisions),x=g.filter(A=>A==="take").length,b=g.filter(A=>A==="bench").length,w=g.filter(A=>A==="drop").length,k=Math.max(0,m.maxSlots-m.reservedSlots-x);return{selected:x,bench:b,drop:w,free:k}},[]),u=m=>{const g=window.prompt("Neuer Szenario-Name",m.name);g!==null&&a(m.id,g)},h=m=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&o(m.id)};return s.jsxs("div",{className:ls.scenariosTab,children:[s.jsxs("div",{className:ls.scenariosHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:ls.cardKicker,children:"Scenarios"}),s.jsx("h3",{className:ls.scenariosTitle,children:"Fusion Plans verwalten"}),s.jsx("p",{className:ls.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),s.jsx("div",{className:ls.headerActions,children:s.jsx("button",{type:"button",className:ls.createButton,onClick:r,children:"Neues Szenario"})})]}),s.jsx("p",{className:ls.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),s.jsx("div",{className:ls.scenarioList,children:t.map(m=>{const g=c(m),x=m.id===e,b=t.length<=1;return s.jsxs("article",{className:`${ls.scenarioCard} ${x?ls.scenarioCardActive:""}`,children:[s.jsxs("div",{className:ls.scenarioCardTop,children:[s.jsxs("div",{children:[s.jsx("p",{className:ls.cardKicker,children:"Scenario"}),s.jsx("h3",{className:ls.cardTitle,children:m.name}),m.description?s.jsx("p",{className:ls.cardText,children:m.description}):null]}),x?s.jsx("span",{className:ls.scenarioActiveBadge,children:"Active"}):null]}),s.jsxs("div",{className:ls.scenarioMeta,children:[s.jsxs("div",{children:[s.jsx("span",{className:ls.scenarioMetaLabel,children:"Max slots"}),s.jsx("span",{className:ls.scenarioMetaValue,children:m.maxSlots})]}),s.jsxs("div",{children:[s.jsx("span",{className:ls.scenarioMetaLabel,children:"Reserved"}),s.jsx("span",{className:ls.scenarioMetaValue,children:m.reservedSlots})]})]}),s.jsxs("div",{className:ls.scenarioStats,children:[s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Selected"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.selected})]}),s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Free"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.free})]}),s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Bench"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.bench})]}),s.jsxs("div",{className:ls.scenarioStatItem,children:[s.jsx("span",{className:ls.scenarioStatLabel,children:"Drop"}),s.jsx("strong",{className:ls.scenarioStatValue,children:g.drop})]})]}),s.jsxs("div",{className:ls.scenarioActions,children:[s.jsx("button",{type:"button",className:`${ls.scenarioActionButton} ${x?ls.scenarioActionActive:""}`,onClick:()=>n(m.id),children:"Set active"}),s.jsxs("div",{className:ls.scenarioActionGroup,children:[s.jsx("button",{type:"button",className:ls.secondaryActionButton,onClick:()=>i(m.id),children:"Duplicate"}),s.jsx("button",{type:"button",className:ls.secondaryActionButton,onClick:()=>u(m),children:"Rename"}),s.jsx("button",{type:"button",className:`${ls.deleteActionButton} ${b?ls.deleteActionDisabled:""}`,onClick:()=>h(m),disabled:b,children:"Delete"})]})]})]},m.id)})})]})}const aSe="_resultWrap_179wi_1",oSe="_emptyState_179wi_13",lSe="_emptyTitle_179wi_35",cSe="_emptyText_179wi_43",dSe="_resultHeader_179wi_55",uSe="_resultKicker_179wi_79",hSe="_resultTitle_179wi_95",mSe="_resultText_179wi_107",pSe="_emptyNote_179wi_119",gSe="_setupSummary_179wi_131",fSe="_setupSummaryTitle_179wi_149",vSe="_setupSummaryRow_179wi_159",xSe="_setupSummaryLabel_179wi_171",ySe="_setupSummaryValue_179wi_185",bSe="_setupSummaryMeta_179wi_195",_Se="_setupSummaryTags_179wi_205",wSe="_setupSummaryTag_179wi_205",jSe="_classDistribution_179wi_241",SSe="_resultStats_179wi_253",NSe="_resultStatBadge_179wi_267",kSe="_resultStatBadgeMuted_179wi_269",CSe="_group_179wi_307",TSe="_groupHeader_179wi_327",ISe="_groupTitle_179wi_341",ESe="_groupHint_179wi_351",ASe="_groupBadge_179wi_361",PSe="_badgeSuccess_179wi_387",RSe="_badgeMuted_179wi_399",LSe="_badgeDanger_179wi_409",DSe="_groupEmpty_179wi_421",MSe="_groupTable_179wi_437",FSe="_groupRow_179wi_455",BSe="_groupHead_179wi_327",$Se="_groupCell_179wi_491",OSe="_memberName_179wi_501",VSe="_memberBadge_179wi_509",It={resultWrap:aSe,emptyState:oSe,emptyTitle:lSe,emptyText:cSe,resultHeader:dSe,resultKicker:uSe,resultTitle:hSe,resultText:mSe,emptyNote:pSe,setupSummary:gSe,setupSummaryTitle:fSe,setupSummaryRow:vSe,setupSummaryLabel:xSe,setupSummaryValue:ySe,setupSummaryMeta:bSe,setupSummaryTags:_Se,setupSummaryTag:wSe,classDistribution:jSe,resultStats:SSe,resultStatBadge:NSe,resultStatBadgeMuted:kSe,group:CSe,groupHeader:TSe,groupTitle:ISe,groupHint:ESe,groupBadge:ASe,badgeSuccess:PSe,badgeMuted:RSe,badgeDanger:LSe,groupEmpty:DSe,groupTable:MSe,groupRow:FSe,groupHead:BSe,groupCell:$Se,memberName:OSe,memberBadge:VSe};function USe({members:t,scenario:e,setupState:n}){var w;if(!e)return s.jsxs("div",{className:It.emptyState,children:[s.jsx("h3",{className:It.emptyTitle,children:"No scenario selected"}),s.jsx("p",{className:It.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return s.jsxs("div",{className:It.emptyState,children:[s.jsx("h3",{className:It.emptyTitle,children:"No members available"}),s.jsx("p",{className:It.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:o}=q.useMemo(()=>{const k=[],A=[],L=[],I=[];return t.forEach(N=>{var _;const v=(_=e.decisions[N.id])!=null?_:"undecided";v==="take"?k.push(N):v==="bench"?A.push(N):v==="drop"?L.push(N):I.push(N)}),{takeMembers:k,benchMembers:A,dropMembers:L,undecidedMembers:I}},[t,e.decisions]),c=r.length,u=i.length,h=a.length,m=Math.max(0,e.maxSlots-c),g=e.maxSlots?Math.round(c/e.maxSlots*100):0,x=q.useMemo(()=>{const k=r.reduce((L,I)=>{var v,_;const N=(v=I.className)!=null?v:I.class;return N&&(L[N]=((_=L[N])!=null?_:0)+1),L},{});return Object.entries(k).map(([L,I])=>`${L}: ${I}`).join(" | ")},[r]),b=(k,A,L,I)=>s.jsxs("div",{className:It.group,children:[s.jsxs("div",{className:It.groupHeader,children:[s.jsxs("div",{children:[s.jsx("h4",{className:It.groupTitle,children:k}),s.jsx("span",{className:It.groupHint,children:A})]}),s.jsx("span",{className:`${It.groupBadge} ${I}`,children:L.length})]}),L.length===0?s.jsx("div",{className:It.groupEmpty,children:"No players in this group."}):s.jsxs("div",{className:It.groupTable,role:"table",children:[s.jsxs("div",{className:`${It.groupRow} ${It.groupHead}`,role:"row",children:[s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Name"}),s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Level"}),s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Guild"}),s.jsx("div",{className:It.groupCell,role:"columnheader",children:"Class"})]}),L.map(N=>{var v,_;return s.jsxs("div",{className:It.groupRow,role:"row",children:[s.jsx("div",{className:It.groupCell,role:"cell",children:s.jsx("span",{className:It.memberName,children:N.name})}),s.jsx("div",{className:It.groupCell,role:"cell",children:s.jsxs("span",{className:It.memberBadge,children:["Lvl ",N.level]})}),s.jsx("div",{className:It.groupCell,role:"cell",children:N.guildName}),s.jsx("div",{className:It.groupCell,role:"cell",children:(_=(v=N.className)!=null?v:N.class)!=null?_:"-"})]},N.id)})]})]});return s.jsxs("div",{className:It.resultWrap,children:[s.jsxs("div",{className:It.resultHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:It.resultKicker,children:"Final Plan"}),s.jsx("h3",{className:It.resultTitle,children:e.name}),s.jsx("p",{className:It.resultText,children:(w=e.description)!=null?w:"Zusammenfassung des aktuellen Plans."}),r.length===0?s.jsx("p",{className:It.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,x?s.jsxs("p",{className:It.classDistribution,children:["Class distribution: ",x]}):null,s.jsxs("div",{className:It.setupSummary,children:[s.jsx("div",{className:It.setupSummaryTitle,children:"Fusion plan between"}),n.baseGuild?s.jsxs("div",{className:It.setupSummaryRow,children:[s.jsx("span",{className:It.setupSummaryLabel,children:"Base"}),s.jsxs("span",{className:It.setupSummaryValue,children:[n.baseGuild.name||"Unbenannt"," ",s.jsxs("span",{className:It.setupSummaryMeta,children:["(",n.baseGuild.server||"Server n/a",")"]})]})]}):s.jsxs("div",{className:It.setupSummaryRow,children:[s.jsx("span",{className:It.setupSummaryLabel,children:"Base"}),s.jsx("span",{className:It.setupSummaryMeta,children:"No base guild selected."})]}),s.jsxs("div",{className:It.setupSummaryRow,children:[s.jsx("span",{className:It.setupSummaryLabel,children:"Partners"}),n.partnerGuilds.length?s.jsx("div",{className:It.setupSummaryTags,children:n.partnerGuilds.map(k=>s.jsxs("span",{className:It.setupSummaryTag,children:[k.name||"Unbenannt"," ",s.jsxs("span",{className:It.setupSummaryMeta,children:["(",k.server||"Server n/a",")"]})]},k.id))}):s.jsx("span",{className:It.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),s.jsxs("div",{className:It.resultStats,children:[s.jsxs("span",{className:It.resultStatBadge,children:["Members selected: ",c," / ",e.maxSlots]}),s.jsxs("span",{className:It.resultStatBadge,children:["Bench: ",u]}),s.jsxs("span",{className:It.resultStatBadge,children:["Drop: ",h]}),s.jsxs("span",{className:It.resultStatBadge,children:["Free slots: ",m]}),s.jsxs("span",{className:It.resultStatBadge,children:["Utilization: ",g,"%"]}),o.length>0?s.jsxs("span",{className:It.resultStatBadgeMuted,children:["Undecided: ",o.length]}):null]})]}),b("Final roster (selected)","Take",r,It.badgeSuccess),b("Bench (waiting list)","Bench",i,It.badgeMuted),b("Not included","Drop",a,It.badgeDanger)]})}const zf=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],xI=t=>t.reduce((e,n)=>(e[n.id]="undecided",e),{}),yI=t=>t.reduce((e,n)=>(e[n.id]="none",e),{}),zSe=(t,e,n)=>{var r,i,a,o,c,u,h,m,g,x,b,w,k,A,L,I;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(o=t.role)!=null?o:"Unknown",level:(c=t.level)!=null?c:void 0,guildName:e,server:n,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(m=t.conBase)!=null?m:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(x=t.totalStats)!=null?x:void 0,values:{treasury:(b=t.treasury)!=null?b:void 0,mine:(w=t.mine)!=null?w:void 0,attrTotal:(k=t.attrTotal)!=null?k:void 0,conTotal:(A=t.conTotal)!=null?A:void 0,lastScan:(L=t.lastScan)!=null?L:void 0,lastActivity:(I=t.lastActivity)!=null?I:void 0}}},GSe=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const n=(i=t.name)==null?void 0:i.trim();return n||null},bI=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,_I=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],HSe=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function WSe(){var D;const[t,e]=q.useState("setup"),[n,r]=q.useState(zf),[i,a]=q.useState(!1),[o,c]=q.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=q.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:xI(zf),targetGuildAssignments:yI(zf),isDefault:!0}]),[m,g]=q.useState("plan-a"),x=q.useMemo(()=>{var V,U;return(U=(V=u.find(K=>K.id===m))!=null?V:u[0])!=null?U:null},[m,u]),b=q.useMemo(()=>{var H,z;const V=o.baseGuild,U=(H=V==null?void 0:V.name)==null?void 0:H.trim(),K=(z=V==null?void 0:V.server)==null?void 0:z.trim();return!!(U&&K)},[o.baseGuild]),w=q.useMemo(()=>n.length>0,[n.length]),k=q.useMemo(()=>u.length>0,[u.length]),A=q.useMemo(()=>{const V=[];return b||V.push("Setup incomplete - no base guild selected."),b&&!w&&V.push("No members loaded yet. Check scans or setup."),k||V.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),V},[b,w,k]),L=(V,U)=>{h(K=>K.map(H=>H.id===m?{...H,decisions:{...H.decisions,[V]:U}}:H))},I=(V,U)=>{h(K=>K.map(H=>{var z;return H.id===m?{...H,targetGuildAssignments:{...(z=H.targetGuildAssignments)!=null?z:{},[V]:U}}:H}))},N=V=>{const U=Number(V)||0;h(K=>K.map(H=>H.id===m?{...H,maxSlots:Math.max(0,U)}:H))},v=()=>{h(V=>{const U={id:bI(),name:`Plan ${V.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:xI(n),targetGuildAssignments:yI(n)};return g(U.id),[...V,U]})},_=V=>{h(U=>{var z;const K=U.find(Y=>Y.id===V);if(!K)return U;const H={...K,id:bI(),name:`${K.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...K.decisions},targetGuildAssignments:{...(z=K.targetGuildAssignments)!=null?z:{}}};return g(H.id),[...U,H]})},R=(V,U)=>{const K=U.trim();K&&h(H=>H.map(z=>z.id===V?{...z,name:K}:z))},j=V=>{h(U=>{if(U.length<=1)return U;const K=U.filter(H=>H.id!==V);return K.length?(m===V&&g(K[0].id),K):U})};q.useEffect(()=>{if(o.mode!=="scan"){a(!1),r(zf);return}const V=[o.baseGuild,...o.partnerGuilds].filter(Boolean);if(V.length===0){a(!1),r([]);return}let U=!1;async function K(){var z,Y,te,G,X,J,se,ue,Ne,Ee;const H=Mn("FusionPlanner:loadMembers");a(!0);try{const ee=[];for(const le of V){const re=GSe(le);if(!re)continue;const be=ms(Tt,`guilds/${re}/latest/latest`),Te=await In(H,be,()=>mn(be)),Le=Te.exists()?Te.data():null,Re=(X=(G=(Y=(z=le.name)==null?void 0:z.trim())!=null?Y:Le==null?void 0:Le.name)!=null?G:(te=Le==null?void 0:Le.values)==null?void 0:te.Name)!=null?X:re,Oe=(Ee=(Ne=(se=(J=le.server)==null?void 0:J.trim())!=null?se:Le==null?void 0:Le.server)!=null?Ne:(ue=Le==null?void 0:Le.values)==null?void 0:ue.Server)!=null?Ee:null,Me=ms(Tt,`guilds/${re}/snapshots/members_summary`),De=await In(H,Me,()=>mn(Me));if(!De.exists())continue;const Fe=De.data();(Array.isArray(Fe.members)?Fe.members:[]).forEach(de=>{ee.push(zSe(de,Re,Oe))})}U||r(ee)}catch(ee){console.error("[FusionPlanner] Failed to load members",ee),U||r([])}finally{U||a(!1),dn(H)}}return r([]),K(),()=>{U=!0}},[o.baseGuild,o.partnerGuilds,o.mode]),q.useEffect(()=>{i||h(V=>V.map(U=>{var Y;const K=new Set(n.map(te=>te.id)),H={...U.decisions},z={...(Y=U.targetGuildAssignments)!=null?Y:{}};return n.forEach(te=>{H[te.id]||(H[te.id]="undecided"),z[te.id]||(z[te.id]="none")}),Object.keys(H).forEach(te=>{K.has(te)||delete H[te]}),Object.keys(z).forEach(te=>{K.has(te)||delete z[te]}),{...U,decisions:H,targetGuildAssignments:z}}))},[n,i]);const S=V=>{c(U=>({...U,mode:V}))},C=V=>{c(U=>{var H,z,Y;const K=(H=U.baseGuild)!=null?H:{id:"base-1",kind:"base",name:"",server:""};return{...U,baseGuild:{...K,...V.id?{id:V.id}:{},name:(z=V.name)!=null?z:K.name,server:(Y=V.server)!=null?Y:K.server}}})},M=V=>{var z;if(!V.name.trim()||!V.server.trim())return;const U=V.name.trim(),K=V.server.trim(),H=(z=V.id)==null?void 0:z.trim();c(Y=>({...Y,partnerGuilds:[...Y.partnerGuilds,{id:H&&!H.startsWith("partner-")?H:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:U,server:K,kind:"partner"}]}))},T=V=>{c(U=>({...U,partnerGuilds:U.partnerGuilds.filter(K=>K.id!==V)}))},F=()=>{switch(t){case"setup":return s.jsx(qwe,{setupState:o,onChangeMode:S,onChangeBaseGuild:C,onAddPartnerGuild:M,onRemovePartnerGuild:T});case"members":return s.jsx(Gje,{members:n,scenario:x,onChangeScenarioDecision:L,onChangeScenarioTargetGuild:I,onChangeScenarioMaxSlots:N,setupState:o});case"overview":return s.jsx(I2e,{members:n,scenario:x,setupState:o,onChangeScenarioDecision:L,onChangeScenarioTargetGuild:I,onAddPartnerGuild:V=>M({name:V,server:"tbd"})});case"scenarios":return s.jsx(iSe,{scenarios:u,activeScenarioId:m,onSetActiveScenario:g,onCreateScenario:v,onDuplicateScenario:_,onRenameScenario:R,onDeleteScenario:j});case"result":return s.jsx(USe,{members:n,scenario:x,setupState:o});default:return null}};return s.jsx(as,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:s.jsxs("div",{className:Pt.page,children:[s.jsxs("header",{className:Pt.header,children:[s.jsxs("div",{className:Pt.headerLeading,children:[s.jsx(zs,{to:"/guild-hub",className:Pt.backLink,children:"Back to Guild Hub"}),s.jsxs("div",{className:Pt.headerStack,children:[s.jsx("p",{className:Pt.kicker,children:"Guild Hub"}),s.jsx("h1",{className:Pt.title,children:"Fusion Planner"}),s.jsx("p",{className:Pt.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),s.jsxs("div",{className:Pt.headerActions,children:[s.jsx("button",{type:"button",className:Pt.primaryAction,children:"Neues Setup"}),s.jsx("button",{type:"button",className:Pt.secondaryAction,children:"Checkliste"})]})]}),A.length?s.jsx("div",{className:Pt.plannerNotice,role:"status","aria-live":"polite",children:A.map(V=>s.jsxs("div",{className:`${Pt.noticeItem} ${V.toLowerCase().includes("no base guild")?Pt.noticeWarning:""}`,children:[s.jsx("span",{className:Pt.noticeDot,"aria-hidden":!0}),s.jsx("span",{children:V})]},V))}):null,s.jsxs("section",{className:Pt.tabSection,"aria-label":"Fusion Planner Tabs",children:[s.jsx("div",{className:Pt.tabBar,children:_I.map(V=>{const U=V.key===t;return s.jsxs("button",{type:"button",className:`${Pt.tabItem} ${U?Pt.tabItemActive:""}`,onClick:()=>e(V.key),"aria-pressed":U,children:[s.jsx("span",{className:Pt.tabLabel,children:V.label}),s.jsx("span",{className:Pt.tabHelper,children:V.helper})]},V.key)})}),s.jsxs("div",{className:Pt.tabPanel,children:[s.jsx("span",{className:Pt.tabBadge,children:(D=_I.find(V=>V.key===t))==null?void 0:D.label}),F()]})]}),s.jsxs("section",{className:Pt.infoStrip,children:[s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Status"}),s.jsx("strong",{children:"Entwurf"}),s.jsx("p",{className:Pt.infoHint,children:"Bereit fuer weitere Eingaben."})]}),s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Slots geplant"}),s.jsx("strong",{children:"0 / 40"}),s.jsx("p",{className:Pt.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Szenarien"}),s.jsx("strong",{children:"3"}),s.jsx("p",{className:Pt.infoHint,children:"Baseline, Optimistic, Risiko."})]}),s.jsxs("div",{className:Pt.infoBlock,children:[s.jsx("span",{className:Pt.infoLabel,children:"Letztes Update"}),s.jsx("strong",{children:"vor wenigen Minuten"}),s.jsx("p",{className:Pt.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),s.jsx("section",{className:Pt.stageGrid,children:HSe.map(V=>s.jsxs("article",{className:Pt.panel,children:[s.jsxs("div",{className:Pt.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Pt.panelKicker,children:V.step}),s.jsx("h2",{className:Pt.panelTitle,children:V.title}),s.jsx("p",{className:Pt.panelLead,children:V.description})]}),V.badge?s.jsx("span",{className:Pt.badge,children:V.badge}):null]}),s.jsx("div",{className:Pt.panelBody,children:s.jsx("div",{className:Pt.placeholderGrid,children:V.placeholders.map(U=>s.jsxs("div",{className:Pt.placeholderCard,children:[s.jsx("div",{className:Pt.placeholderTitle,children:U}),s.jsx("p",{className:Pt.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},U))})})]},V.key))}),s.jsx("section",{className:Pt.helperSection,children:s.jsxs("div",{className:Pt.helperCard,children:[s.jsxs("div",{children:[s.jsx("p",{className:Pt.helperKicker,children:"Result"}),s.jsx("h3",{className:Pt.helperTitle,children:"Finaler Merge-Plan"}),s.jsx("p",{className:Pt.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),s.jsxs("div",{className:Pt.helperActions,children:[s.jsx("button",{type:"button",className:Pt.secondaryAction,children:"Teilen"}),s.jsx("button",{type:"button",className:Pt.primaryAction,children:"Review starten"})]})]})})]})})}const D_=["EU-01","EU-02","US-01","US-02","ASIA-01"],Gm=new Intl.NumberFormat("de-DE");function KSe(){const t=nh("(min-width: 768px)"),[e,n]=q.useState("all"),[r,i]=q.useState(null),[a,o]=q.useState(null),[c,u]=q.useState(null),[h,m]=q.useState(null),g=[r,a].filter(Boolean).length,x=q.useMemo(()=>{const T=[c,h].filter(Boolean);if(!T.length)return 0;const F=T.reduce((D,V)=>{var U;return D+((U=V.members)!=null?U:0)},0);return Math.round(F/T.length)},[c,h]),[b,w]=q.useState(null),[k,A]=q.useState(!1),L=q.useRef(null);rh(L,k&&!t),q.useEffect(()=>{t&&A(!1)},[t]),q.useEffect(()=>{if(!b)return;const T=D=>{const V=D.target;V&&(V.closest(`.${pe.freshnessBadge}`)||V.closest(`.${pe.freshnessPopover}`)||w(null))},F=D=>{D.key==="Escape"&&w(null)};return document.addEventListener("pointerdown",T),document.addEventListener("keydown",F),()=>{document.removeEventListener("pointerdown",T),document.removeEventListener("keydown",F)}},[b]);const I=q.useMemo(()=>c?vp(c.nextUpdateAt,Date.now()):"",[c]),N=q.useMemo(()=>h?vp(h.nextUpdateAt,Date.now()):"",[h]),v=()=>A(!0),_=()=>A(!1),R=T=>{n(T)},j=(T,F)=>{T==="guildA"?(i(F.id),u(F)):(o(F.id),m(F))},S=T=>{T==="guildA"?(i(null),u(null)):(o(null),m(null))},C=T=>{w(F=>F===T?null:T)},M=c&&h;return s.jsxs(as,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[s.jsxs("div",{className:pe.page,children:[s.jsxs("header",{className:pe.header,children:[s.jsxs("div",{className:pe.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Guild Hub"}),s.jsx("h1",{className:pe.title,children:"Gilden vergleichen"}),s.jsx("p",{className:pe.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),s.jsx("div",{className:pe.headerActions,children:!t&&s.jsx("button",{type:"button",className:pe.secondaryAction,onClick:v,children:"Filter"})})]}),s.jsxs("div",{className:pe.infoStrip,children:[s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Pool"}),s.jsxs("strong",{children:[Gm.format(g)," Gilden"]})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Durchschnitt Mitglieder"}),s.jsx("strong",{children:Gm.format(x)})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Serverfilter"}),s.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&s.jsx("div",{className:pe.inlineFilters,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>R(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),D_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]}),s.jsxs("div",{className:pe.layout,children:[s.jsxs("section",{className:pe.selectionColumn,children:[s.jsx(wI,{title:"Gilde A",slot:"guildA",selectedGuild:c,excludeId:a,onSelect:j,onClear:S,serverFilter:e,onServerChange:R}),s.jsx(wI,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:j,onClear:S,serverFilter:e,onServerChange:R})]}),s.jsxs("section",{className:pe.comparisonColumn,children:[s.jsxs("div",{className:pe.comparisonCard,children:[s.jsxs("div",{className:pe.comparisonHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Vergleich"}),s.jsx("h2",{className:pe.sectionTitle,children:"Kennzahlen"})]}),M&&s.jsxs("span",{className:pe.diffBadge,children:["Delta Mitglieder:"," ",Gm.format(c.members-h.members)]})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pe.metricGrid,children:[s.jsx(jI,{label:"Mitglieder",aValue:c.members,bValue:h.members}),s.jsx(jI,{label:"Durchschnittslevel",aValue:c.avgLevel,bValue:h.avgLevel,isDecimal:!0}),s.jsx(qSe,{guildA:c,guildB:h,countdownA:I,countdownB:N,activePopover:b,onToggle:C})]}),s.jsx(QSe,{guildA:c,guildB:h})]}):s.jsx("div",{className:pe.emptyState,children:s.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),s.jsxs("div",{className:pe.supportPanels,children:[s.jsx(YSe,{}),s.jsx(XSe,{})]})]})]})]}),!t&&s.jsx("div",{className:`${pe.sheetOverlay} ${k?pe.sheetOpen:""}`,children:s.jsxs("div",{className:pe.sheet,role:"dialog","aria-modal":"true",ref:L,children:[s.jsxs("header",{className:pe.sheetHeader,children:[s.jsx("h3",{children:"Filter"}),s.jsx("button",{type:"button",className:pe.clearButton,onClick:_,children:"Schliessen"})]}),s.jsx("div",{className:pe.sheetBody,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>R(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),D_.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]})})]})}function wI({title:t,slot:e,selectedGuild:n,excludeId:r,onSelect:i,onClear:a,serverFilter:o,onServerChange:c}){const[u,h]=q.useState(""),m=sh(u,300);q.useEffect(()=>{h("")},[n,o]);const{results:g,loading:x}=JSe(m,o,r);return s.jsxs("article",{className:pe.selectionCard,children:[s.jsxs("div",{className:pe.slotHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.slotLabel,children:t}),s.jsx("p",{className:pe.slotStatus,children:n?"Ausgewaehlt":"Noch keine Auswahl"})]}),n&&s.jsx("button",{type:"button",className:pe.clearButton,onClick:()=>a(e),children:"Reset"})]}),s.jsxs("div",{className:pe.slotBody,children:[s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:o,onChange:b=>c(b.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),D_.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Suchen"}),s.jsx("input",{className:pe.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),s.jsxs("div",{className:pe.resultList,role:"list",children:[x&&s.jsx("div",{className:pe.emptyResult,children:"Lade..."}),!x&&g.length===0&&s.jsx("div",{className:pe.emptyResult,children:"Keine Gilde gefunden."}),!x&&g.map(b=>s.jsxs("div",{className:pe.resultItem,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.resultName,children:b.name}),s.jsxs("p",{className:pe.resultMeta,children:[b.server," - ",b.members," Mitglieder"]})]}),s.jsx("button",{type:"button",className:pe.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),n&&s.jsxs("div",{className:pe.selectedCard,children:[s.jsx("p",{className:pe.selectedName,children:n.name}),s.jsxs("p",{className:pe.selectedMeta,children:[n.server," - ",n.members," Mitglieder - Durchschnittslevel"," ",n.avgLevel.toFixed(1)]}),s.jsx("p",{className:pe.selectedTagline,children:n.tagline})]})]})]})}function jI({label:t,aValue:e,bValue:n,isDecimal:r=!1}){const i=c=>r?c.toFixed(1).replace(".",","):Gm.format(c),a=e-n;let o="gleich";if(a!==0){const c=r?Math.abs(a).toFixed(1).replace(".",","):Gm.format(Math.abs(a));o=a>0?`+${c}`:`-${c}`}return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:t}),s.jsxs("div",{className:pe.metricValues,children:[s.jsx("span",{"aria-label":"Gilde A",children:i(e)}),s.jsx("span",{className:pe.metricDivider,children:"vs"}),s.jsx("span",{"aria-label":"Gilde B",children:i(n)})]}),s.jsx("p",{className:pe.metricDelta,children:o})]})}function qSe({guildA:t,guildB:e,countdownA:n,countdownB:r,activePopover:i,onToggle:a}){return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Freshness"}),s.jsx("div",{className:pe.freshnessRow,children:[t,e].map(o=>{const c=o.id===t.id?n:r,u=`fresh-${o.id}`,h=i===u;return s.jsxs("div",{className:pe.freshnessItem,children:[s.jsxs("button",{type:"button",className:pe.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[s.jsx("span",{children:o.freshness.toUpperCase()}),s.jsx("small",{children:qp(o.lastScanAt)})]}),h&&s.jsxs("div",{className:pe.freshnessPopover,role:"dialog",children:[s.jsx("p",{className:pe.popoverTitle,children:o.name}),s.jsxs("dl",{children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{children:n2[o.freshness]})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt gescannt"}),s.jsx("dd",{children:vo(o.lastScanAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Naechstes Update"}),s.jsxs("dd",{children:[vo(o.nextUpdateAt)," (",c,")"]})]})]})]})]},o.id)})})]})}function QSe({guildA:t,guildB:e}){const n=q.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return s.jsxs("div",{className:pe.classCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Klassenverteilung"}),s.jsx("div",{className:pe.classGrid,children:[t,e].map(r=>s.jsxs("div",{className:pe.classColumn,children:[s.jsx("h3",{children:r.name}),s.jsx("div",{className:pe.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>s.jsxs("span",{style:{width:`${i.percent}%`},className:pe.classSlice,children:[s.jsx("small",{children:i.label}),s.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),s.jsx("ul",{className:pe.classLegend,children:n.map(r=>s.jsx("li",{children:r},r))})]})}function YSe(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return s.jsxs("section",{className:pe.checklistCard,children:[s.jsx("h3",{children:"Vor dem Vergleich pruefen"}),s.jsx("ul",{className:pe.checklist,children:t.map(e=>s.jsx("li",{children:e},e))})]})}function XSe(){return s.jsxs("section",{className:pe.infoCardExtended,children:[s.jsx("h3",{children:"Transfers-Diff"}),s.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",s.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),s.jsx("p",{className:pe.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),s.jsx("button",{type:"button",className:pe.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function JSe(t,e,n){const[r,i]=q.useState([]),[a,o]=q.useState(!1);return q.useEffect(()=>{const c=t.trim();if(c.length===0){i([]),o(!1);return}let u=!1;async function h(){const m=Mn("CompareGuilds:search");o(!0);try{const g=c.toLowerCase(),x=Fp(Tt,"latest"),b=await Tn(m,{path:"guilds/latest (collectionGroup)"},()=>Cn(Dn(x,Hi("nameFold"),Zl(g),ec(g+""),pr(15)))),w=await Tn(m,{path:"guilds/latest (collectionGroup)"},()=>Cn(Dn(x,ji("nameNgrams","array-contains",g),pr(15)))),k=new Set,A=[],L=I=>{var D,V,U,K,H,z,Y,te,G,X,J,se,ue,Ne,Ee,ee,le,re,be,Te,Le;const N=I.data(),_=(D=I.ref.parent)==null?void 0:D.parent,R=_==null?void 0:_.parent;if((R==null?void 0:R.id)!=="guilds")return;const S=(U=(V=_==null?void 0:_.id)!=null?V:N.guildIdentifier)!=null?U:I.id;if(!S||k.has(S)||n&&S===n)return;const C=(z=(H=N.name)!=null?H:(K=N.values)==null?void 0:K.Name)!=null?z:"Unbekannte Gilde",M=(G=(te=N.server)!=null?te:(Y=N.values)==null?void 0:Y.Server)!=null?G:"Unknown";if(e!=="all"&&M!==e)return;const T=(Ne=(ue=(J=N.memberCount)!=null?J:(X=N.values)==null?void 0:X["Guild Member Count"])!=null?ue:(se=N.values)==null?void 0:se.GuildMemberCount)!=null?Ne:0,F=(le=(ee=N.updatedAt)!=null?ee:(Ee=N.values)==null?void 0:Ee.UpdatedAt)!=null?le:N.timestamp?new Date(N.timestamp*1e3).toISOString():new Date().toISOString();k.add(S),A.push({id:S,name:C,tagline:(re=N.tagline)!=null?re:"",server:M,members:T,avgLevel:(Le=(Te=N.avgLevel)!=null?Te:(be=N.values)==null?void 0:be.AvgLevel)!=null?Le:0,lastScanAt:F,updatedAt:F,nextUpdateAt:F,freshness:"unknown",classes:[]})};b.forEach(L),w.forEach(L),u||(A.sort((I,N)=>I.name.localeCompare(N.name)),i(A))}catch(g){console.error("[GuildHub CompareGuilds] guild search failed",g),u||i([])}finally{dn(m),u||o(!1)}}return h(),()=>{u=!0}},[t,e,n]),{results:r,loading:a}}const ZSe="_page_o27vc_1",eNe="_header_o27vc_13",tNe="_headerStack_o27vc_25",sNe="_kicker_o27vc_37",nNe="_title_o27vc_53",rNe="_headerActions_o27vc_65",iNe="_primaryAction_o27vc_77",aNe="_secondaryAction_o27vc_79",oNe="_infoStrip_o27vc_109",lNe="_infoPill_o27vc_129",cNe="_freshnessWrapper_o27vc_163",dNe="_freshnessBadge_o27vc_171",uNe="_popover_o27vc_191",hNe="_popoverLabel_o27vc_221",mNe="_filterToolbar_o27vc_231",pNe="_filterSheetButton_o27vc_241",gNe="_inlineFilters_o27vc_259",fNe="_searchInput_o27vc_271",vNe="_select_o27vc_273",xNe="_chipGroup_o27vc_295",yNe="_chip_o27vc_295",bNe="_chipActive_o27vc_325",_Ne="_levelRow_o27vc_335",wNe="_sortControls_o27vc_363",jNe="_sortLabel_o27vc_375",SNe="_directionButton_o27vc_385",NNe="_listBody_o27vc_403",kNe="_tableWrapper_o27vc_415",CNe="_table_o27vc_415",TNe="_cardFooter_o27vc_459",INe="_panel_o27vc_461",ENe="_formPanel_o27vc_463",ANe="_statusSelect_o27vc_481",PNe="_stickyColumn_o27vc_515",RNe="_rowButton_o27vc_529",LNe="_scanBadge_o27vc_545",DNe="_cardList_o27vc_561",MNe="_card_o27vc_459",FNe="_cardHeader_o27vc_593",BNe="_cardTitle_o27vc_605",$Ne="_cardMeta_o27vc_623",ONe="_cardNotes_o27vc_635",VNe="_emptyState_o27vc_659",UNe="_sheetBackdrop_o27vc_675",zNe="_sheet_o27vc_675",GNe="_sheetHandle_o27vc_717",HNe="_sheetBody_o27vc_733",WNe="_sheetLabel_o27vc_749",KNe="_sheetActions_o27vc_785",qNe="_overlay_o27vc_797",QNe="_drawer_o27vc_837",YNe="_modal_o27vc_845",XNe="_panelHeader_o27vc_853",JNe="_section_o27vc_867",ZNe="_tagRow_o27vc_899",eke="_historyList_o27vc_913",tke="_panelFooter_o27vc_943",ske="_formOverlay_o27vc_955",nke="_formGrid_o27vc_1003",rke="_warning_o27vc_1015",ike="_pagination_o27vc_1033",We={page:ZSe,header:eNe,headerStack:tNe,kicker:sNe,title:nNe,headerActions:rNe,primaryAction:iNe,secondaryAction:aNe,infoStrip:oNe,infoPill:lNe,freshnessWrapper:cNe,freshnessBadge:dNe,popover:uNe,popoverLabel:hNe,filterToolbar:mNe,filterSheetButton:pNe,inlineFilters:gNe,searchInput:fNe,select:vNe,chipGroup:xNe,chip:yNe,chipActive:bNe,levelRow:_Ne,sortControls:wNe,sortLabel:jNe,directionButton:SNe,listBody:NNe,tableWrapper:kNe,table:CNe,cardFooter:TNe,panel:INe,formPanel:ENe,statusSelect:ANe,stickyColumn:PNe,rowButton:RNe,scanBadge:LNe,cardList:DNe,card:MNe,cardHeader:FNe,cardTitle:BNe,cardMeta:$Ne,cardNotes:ONe,emptyState:VNe,sheetBackdrop:UNe,sheet:zNe,sheetHandle:GNe,sheetBody:HNe,sheetLabel:WNe,sheetActions:KNe,overlay:qNe,drawer:QNe,modal:YNe,panelHeader:XNe,section:JNe,tagRow:ZNe,historyList:eke,panelFooter:tke,formOverlay:ske,formGrid:nke,warning:rke,pagination:ike},mx=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],px=["EU-01","EU-02","US-01","US-02","ASIA-01"],a2={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},SI={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},v1={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},ake=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:Vl(2),updatedAt:Vl(3),freshness:"f1",history:[{date:Fi(1),message:"Interview abgeschlossen"},{date:Fi(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:Vl(10),updatedAt:Vl(11),freshness:"f3",history:[{date:Fi(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:Vl(20),updatedAt:Vl(5),freshness:"f4",history:[{date:Fi(4),message:"Probe erfolgreich"},{date:Fi(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:Fi(2),updatedAt:Fi(2),freshness:"f5",history:[{date:Fi(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:Fi(3),updatedAt:Fi(1),freshness:"f6",history:[{date:Fi(1),message:"Bewerbung zurueckgezogen"},{date:Fi(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:Vl(5),updatedAt:Vl(5),freshness:"f2",history:[{date:Fi(1),message:"Profil verifiziert"}]}];function NI(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function oke(t,e,n){const r=n.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),o=e.status==="all"||i.status===e.status,c=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&o&&c&&u&&h})}function lke(t,e,n){const r=[...t];return r.sort((i,a)=>{let o=0;switch(e){case"name":o=i.name.localeCompare(a.name);break;case"level":o=i.level-a.level;break;case"status":o=i.status.localeCompare(a.status);break;case"lastScan":o=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:o=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return n==="asc"?o:-o}),r}function cke(t,e,n){const r=(e-1)*n;return t.slice(r,r+n)}function gv(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function dke(t){const e=Date.now()-new Date(t).getTime(),n=Math.round(e/6e4);if(n<60)return`${n} min`;const r=Math.round(n/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function uke(t){return t.length?t.reduce((e,n)=>e?SI[n.freshness]>SI[e.freshness]?n:e:n,null):null}function Fi(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function Vl(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function hke(){var U;const[t,e]=q.useState(ake),[n,r]=q.useState(v1),[i,a]=q.useState(v1),o=sh(n.q,300),c=q.useMemo(()=>{const K=oke(t,n,o);return lke(K,n.sort,n.dir)},[t,n,o]),u=q.useMemo(()=>cke(c,n.page,n.pageSize),[c,n.page,n.pageSize]),h=Math.max(1,Math.ceil(c.length/n.pageSize)),m=nh("(min-width: 768px)"),g=nh("(min-width: 1024px)"),[x,b]=q.useState(!1),[w,k]=q.useState(null),A=(U=t.find(K=>K.id===w))!=null?U:null,L=q.useRef(null);rh(L,!!A&&!g);const[I,N]=q.useState(null),[v,_]=q.useState(!1),R=q.useRef(null);rh(R,v);const j=q.useMemo(()=>uke(t),[t]),S=j&&j.lastScanAt?dke(j.lastScanAt):"unbekannt",C=K=>{const H=NI(K);r(H),a(H)},M=(K,H)=>{const z=NI({...n,[K]:H,page:K==="page"?H:1});C(z)},T=()=>{C(i),b(!1)},F=()=>{C(v1),b(!1)},D=(K,H)=>{e(z=>z.map(Y=>Y.id===K?{...Y,status:H,updatedAt:new Date().toISOString()}:Y))},V=K=>{e(H=>H.some(Y=>Y.id===K.id)?H.map(Y=>Y.id===K.id?K:Y):[K,...H]),_(!1)};return s.jsxs(as,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[s.jsxs("div",{className:We.page,children:[s.jsxs("header",{className:We.header,children:[s.jsxs("div",{className:We.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:We.kicker,children:"Recruiting"}),s.jsx("h1",{className:We.title,children:"Waitlist"})]}),s.jsxs("div",{className:We.headerActions,children:[s.jsx("button",{type:"button",className:We.primaryAction,onClick:()=>{N(null),_(!0)},children:"Neuer Eintrag"}),!m&&s.jsx("button",{type:"button",className:We.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>b(!0),children:"Filter"})]})]}),s.jsxs("div",{className:We.infoStrip,children:[s.jsx(x1,{label:"Neu",value:c.filter(K=>K.status==="new").length}),s.jsx(x1,{label:"In Review",value:c.filter(K=>K.status==="in_review").length}),s.jsx(x1,{label:"Zugesagt",value:c.filter(K=>K.status==="accepted").length}),j&&s.jsx(mke,{label:a2[j.freshness],updatedAt:j.lastScanAt,countdown:S})]})]}),s.jsx("section",{className:We.filterToolbar,children:m?s.jsx(pke,{filters:n,onChange:M,onToggleClass:K=>{const H=n.classes.includes(K)?n.classes.filter(z=>z!==K):[...n.classes,K];M("classes",H)},onToggleServer:K=>{const H=n.servers.includes(K)?n.servers.filter(z=>z!==K):[...n.servers,K];M("servers",H)}}):s.jsx("button",{type:"button",className:We.filterSheetButton,onClick:()=>b(!0),children:"Filter & Sortierung"})}),s.jsx("section",{className:We.listBody,children:m?s.jsx(gke,{items:u,sort:n.sort,dir:n.dir,onSortChange:K=>{const H=n.sort===K&&n.dir==="asc"?"desc":"asc";M("sort",K),M("dir",H)},onSelect:k,onStatusChange:D}):s.jsx(fke,{items:u,onSelect:k,onStatusChange:D})}),s.jsx(xke,{page:n.page,totalPages:h,onChange:K=>M("page",K)})]}),x&&s.jsx(vke,{filters:i,onChange:a,onToggleClass:K=>a(H=>({...H,classes:H.classes.includes(K)?H.classes.filter(z=>z!==K):[...H.classes,K]})),onToggleServer:K=>a(H=>({...H,servers:H.servers.includes(K)?H.servers.filter(z=>z!==K):[...H.servers,K]})),onClose:()=>b(!1),onApply:T,onReset:F}),A&&s.jsx(JL,{ref:L,item:A,mode:g?"drawer":"modal",onClose:()=>k(null),onEdit:()=>{N(A),_(!0),k(null)}}),v&&s.jsx(ZL,{ref:R,item:I,entries:t,onClose:()=>_(!1),onSubmit:V})]})}function x1({label:t,value:e}){return s.jsxs("div",{className:We.infoPill,children:[s.jsx("span",{children:t}),s.jsx("strong",{children:e})]})}function mke({label:t,updatedAt:e,countdown:n}){const[r,i]=q.useState(!1);return s.jsxs("div",{className:We.freshnessWrapper,children:[s.jsx("button",{type:"button",className:We.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&s.jsxs("div",{className:We.popover,children:[s.jsxs("div",{children:[s.jsx("span",{className:We.popoverLabel,children:"Letzter Scan"}),s.jsx("strong",{children:gv(e)})]}),s.jsxs("div",{children:[s.jsx("span",{className:We.popoverLabel,children:"Aktualisiert"}),s.jsx("strong",{children:n})]})]})]})}function pke({filters:t,onChange:e,onToggleClass:n,onToggleServer:r}){return s.jsxs("div",{className:We.inlineFilters,children:[s.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:We.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),s.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:We.select,value:t.status,onChange:i=>e("status",i.target.value),children:[s.jsx("option",{value:"all",children:"Status (alle)"}),s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),s.jsx("div",{className:We.chipGroup,children:mx.map(i=>{const a=t.classes.includes(i);return s.jsx("button",{type:"button",className:`${We.chip} ${a?We.chipActive:""}`,onClick:()=>n(i),children:i},i)})}),s.jsx("div",{className:We.chipGroup,children:px.map(i=>{const a=t.servers.includes(i);return s.jsx("button",{type:"button",className:`${We.chip} ${a?We.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),s.jsxs("div",{className:We.levelRow,children:[s.jsxs("label",{children:["Lv min",s.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),s.jsxs("label",{children:["Lv max",s.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),s.jsxs("div",{className:We.sortControls,children:[s.jsx("label",{className:We.sortLabel,children:"Sortieren"}),s.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"status",children:"Status"}),s.jsx("option",{value:"lastScan",children:"Letzter Scan"}),s.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),s.jsx("button",{type:"button",className:We.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function gke({items:t,sort:e,dir:n,onSortChange:r,onSelect:i,onStatusChange:a}){const o=c=>e===c?n==="asc"?" ":" ":"";return t.length?s.jsx("div",{className:We.tableWrapper,children:s.jsxs("table",{className:We.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:We.stickyColumn,onClick:()=>r("name"),children:["Name",o("name")]}),s.jsx("th",{children:"Klasse"}),s.jsxs("th",{onClick:()=>r("level"),children:["Level",o("level")]}),s.jsx("th",{children:"Server"}),s.jsxs("th",{onClick:()=>r("status"),children:["Status",o("status")]}),s.jsx("th",{children:"Notizen"}),s.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",o("lastScan")]})]})}),s.jsx("tbody",{children:t.map(c=>s.jsxs("tr",{children:[s.jsx("td",{className:We.stickyColumn,children:s.jsx("button",{type:"button",className:We.rowButton,onClick:()=>i(c.id),children:c.name})}),s.jsx("td",{children:c.classRole}),s.jsx("td",{children:c.level}),s.jsx("td",{children:c.server}),s.jsx("td",{children:s.jsxs("select",{className:We.statusSelect,name:`waitlistStatus-${c.id}`,"aria-label":`Status fuer ${c.name}`,value:c.status,onChange:u=>a(c.id,u.target.value),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),s.jsxs("td",{children:[c.notes.slice(0,64),"..."]}),s.jsx("td",{children:s.jsx("span",{className:We.scanBadge,children:a2[c.freshness]})})]},c.id))})]})}):s.jsx(XL,{})}function fke({items:t,onSelect:e,onStatusChange:n}){return t.length?s.jsx("div",{className:We.cardList,children:t.map(r=>s.jsxs("article",{className:We.card,children:[s.jsxs("div",{className:We.cardHeader,children:[s.jsxs("div",{children:[s.jsx("button",{type:"button",className:We.cardTitle,onClick:()=>e(r.id),children:r.name}),s.jsxs("p",{className:We.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),s.jsx("span",{className:We.scanBadge,children:a2[r.freshness]})]}),s.jsxs("p",{className:We.cardNotes,children:[r.notes.slice(0,160),"..."]}),s.jsxs("div",{className:We.cardFooter,children:[s.jsxs("select",{className:We.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>n(r.id,i.target.value),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),s.jsx("button",{type:"button",className:We.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):s.jsx(XL,{})}function XL(){return s.jsx("div",{className:We.emptyState,children:s.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function vke({filters:t,onChange:e,onToggleClass:n,onToggleServer:r,onClose:i,onApply:a,onReset:o}){return s.jsx("div",{className:We.sheetBackdrop,onClick:i,children:s.jsxs("div",{className:We.sheet,onClick:c=>c.stopPropagation(),children:[s.jsx("div",{className:We.sheetHandle}),s.jsxs("div",{className:We.sheetBody,children:[s.jsx("h2",{children:"Filter"}),s.jsxs("label",{className:We.sheetLabel,children:["Suche",s.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:c=>e(u=>({...u,q:c.target.value}))})]}),s.jsxs("label",{className:We.sheetLabel,children:["Status",s.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:c=>e(u=>({...u,status:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),s.jsxs("div",{className:We.sheetLabel,children:["Klassen",s.jsx("div",{className:We.chipGroup,children:mx.map(c=>{const u=t.classes.includes(c);return s.jsx("button",{type:"button",className:`${We.chip} ${u?We.chipActive:""}`,"aria-label":`Klasse ${c}`,onClick:()=>n(c),children:c},c)})})]}),s.jsxs("div",{className:We.sheetLabel,children:["Server",s.jsx("div",{className:We.chipGroup,children:px.map(c=>{const u=t.servers.includes(c);return s.jsx("button",{type:"button",className:`${We.chip} ${u?We.chipActive:""}`,"aria-label":`Server ${c}`,onClick:()=>r(c),children:c},c)})})]}),s.jsxs("div",{className:We.levelRow,children:[s.jsxs("label",{children:["Lv min",s.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:c=>e(u=>({...u,lvMin:Number(c.target.value)}))})]}),s.jsxs("label",{children:["Lv max",s.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:c=>e(u=>({...u,lvMax:Number(c.target.value)}))})]})]})]}),s.jsxs("div",{className:We.sheetActions,children:[s.jsx("button",{type:"button",onClick:o,children:"Zuruecksetzen"}),s.jsx("button",{type:"button",className:We.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const JL=q.forwardRef(({item:t,mode:e,onClose:n,onEdit:r},i)=>s.jsx("div",{className:We.overlay,children:s.jsxs("div",{ref:i,className:`${We.panel} ${e==="drawer"?We.drawer:We.modal}`,children:[s.jsxs("header",{className:We.panelHeader,children:[s.jsxs("div",{children:[s.jsxs("p",{className:We.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),s.jsx("h2",{children:t.name})]}),s.jsx("button",{type:"button",className:We.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("section",{className:We.section,children:[s.jsx("h3",{children:"Kontakt"}),s.jsx("p",{children:t.contact}),s.jsxs("p",{children:["Quelle: ",t.source]})]}),s.jsxs("section",{className:We.section,children:[s.jsx("h3",{children:"Notizen"}),s.jsx("p",{children:t.notes})]}),s.jsxs("section",{className:We.section,children:[s.jsx("h3",{children:"Tags"}),s.jsx("div",{className:We.tagRow,children:t.tags.length?t.tags.map(a=>s.jsx("span",{children:a},a)):s.jsx("span",{children:"Keine"})})]}),s.jsxs("section",{className:We.section,children:[s.jsx("h3",{children:"Historie"}),s.jsx("ul",{className:We.historyList,children:t.history.map(a=>s.jsxs("li",{children:[s.jsx("span",{children:gv(a.date)}),s.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),s.jsxs("section",{className:We.section,children:[s.jsx("h3",{children:"Scan-Infos"}),s.jsxs("p",{children:["Letzter Scan: ",gv(t.lastScanAt)]}),s.jsxs("p",{children:["Aktualisiert: ",gv(t.updatedAt)]})]}),s.jsxs("footer",{className:We.panelFooter,children:[s.jsx("button",{type:"button",className:We.secondaryAction,onClick:r,children:"Bearbeiten"}),s.jsx("button",{type:"button",className:We.primaryAction,onClick:n,children:"Schliessen"})]})]})}));JL.displayName="DetailPanel";const ZL=q.forwardRef(({item:t,entries:e,onClose:n,onSubmit:r},i)=>{const[a,o]=q.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:mx[0],level:1,server:px[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});q.useEffect(()=>{t&&o(t)},[JSON.stringify(t)]);const c=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return s.jsx("div",{className:We.formOverlay,children:s.jsxs("form",{ref:i,className:We.formPanel,onSubmit:c,children:[s.jsxs("header",{className:We.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:We.cardMeta,children:t?"Bearbeiten":"Neu"}),s.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),s.jsx("button",{type:"button",className:We.secondaryAction,onClick:n,children:"Schliessen"})]}),u&&s.jsx("div",{className:We.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),s.jsxs("label",{className:We.sheetLabel,children:["Name",s.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>o(m=>({...m,name:h.target.value}))})]}),s.jsxs("div",{className:We.formGrid,children:[s.jsxs("label",{children:["Klasse",s.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>o(m=>({...m,classRole:h.target.value})),children:mx.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Level",s.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>o(m=>({...m,level:Number(h.target.value)}))})]}),s.jsxs("label",{children:["Server",s.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>o(m=>({...m,server:h.target.value})),children:px.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>o(m=>({...m,status:h.target.value})),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),s.jsxs("label",{className:We.sheetLabel,children:["Kontakt",s.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>o(m=>({...m,contact:h.target.value}))})]}),s.jsxs("label",{className:We.sheetLabel,children:["Quelle",s.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>o(m=>({...m,source:h.target.value}))})]}),s.jsxs("label",{className:We.sheetLabel,children:["Notizen",s.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>o(m=>({...m,notes:h.target.value})),rows:4})]}),s.jsxs("footer",{className:We.panelFooter,children:[s.jsx("button",{type:"button",className:We.secondaryAction,onClick:n,children:"Abbrechen"}),s.jsx("button",{type:"submit",className:We.primaryAction,children:"Speichern"})]})]})})});ZL.displayName="WaitlistForm";function xke({page:t,totalPages:e,onChange:n}){return s.jsxs("div",{className:We.pagination,children:[s.jsx("button",{type:"button",className:We.secondaryAction,onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),s.jsxs("span",{children:["Seite ",t," / ",e]}),s.jsx("button",{type:"button",className:We.secondaryAction,onClick:()=>n(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const yke=["tab","sub","sub2","q","sort","dir","page","pageSize"];function xh(t=[]){const[e,n]=sr(),r=q.useMemo(()=>[...t].sort().join("|"),[t]),i=q.useMemo(()=>{const m=new Set([...yke]);return t.forEach(g=>m.add(g)),Array.from(m)},[r]),a=q.useMemo(()=>{const m={};return i.forEach(g=>{const x=e.get(g);x!==null&&(m[g]=x)}),m},[e,i]),o=q.useCallback((m,g)=>{var b;const x=new URLSearchParams(e);Object.entries(m).forEach(([w,k])=>{k==null||k===""?x.delete(w):x.set(w,String(k))}),n(x,{replace:(b=g==null?void 0:g.replace)!=null?b:!1})},[e,n]),c=q.useCallback(m=>{const g=new URLSearchParams(e);(m&&m.length>0?m:i).forEach(b=>g.delete(b)),n(g,{replace:!0})},[e,n,i]),u=q.useCallback((m,g="")=>{var x;return(x=a[m])!=null?x:g},[a]),h=q.useCallback((m,g=0)=>{const x=a[m],b=x?Number(x):NaN;return Number.isFinite(b)?b:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:o,resetParams:c}}function bke(){return xh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Activity"})})}function _ke(){return xh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Imports"})})}function wke(){return xh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Announcements"})})}function jke(){return xh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Events"})})}function Ske(){return xh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Roles"})})}function Nke(){return xh(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Settings"})})}const kke=[{icon:s.jsx(Ix,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:s.jsx(g9,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:s.jsx(i9,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],Cke=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],Tke=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function Ike(){return s.jsx(as,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(zs,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),s.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:s.jsx(Eke,{}),right:s.jsx(Ake,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:kke.map(t=>s.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),s.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),s.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),s.jsx(zs,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),s.jsx("ul",{className:"space-y-3",children:Cke.map(t=>s.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[s.jsx(tw,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),s.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),s.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function Eke(){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsx(zs,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),s.jsx(zs,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),s.jsx(zs,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),s.jsx(zs,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),s.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[s.jsx("li",{children:" Pager rotation: Ops Team"}),s.jsx("li",{children:" Slack channel: #sf-alerts"}),s.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function Ake(){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),s.jsx("ul",{className:"mt-3 space-y-2",children:Tke.map(t=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),s.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),s.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),s.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const Pke=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function Rke(){return s.jsx(as,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:s.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[s.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[s.jsx("span",{children:"ID"}),s.jsx("span",{children:"Time"}),s.jsx("span",{children:"Service"}),s.jsx("span",{className:"text-right",children:"Severity"})]}),s.jsx("ul",{children:Pke.map(t=>s.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),s.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:Lke(t.severity)},children:t.severity})]},t.id))})]})})}function Lke(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const Ba={background:"#152A42",borderColor:"#2B4C73"},Ru={background:"#1A2F4A",borderColor:"#2B4C73"},y1=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function Dke(){const{data:t,loading:e,refreshing:n,error:r,refresh:i}=$ke(),a=q.useMemo(()=>[{label:"Total uploads",value:ma(t.metrics.totalUploads),hint:`${ma(t.metrics.last24h)} in the last 24h`,icon:s.jsx(S7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:bp(t.metrics.successRate),hint:`${ma(t.metrics.failed)} failed`,icon:s.jsx(h7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?b1(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${b1(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:s.jsx(w7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:kI(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:s.jsx(T7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:ma(t.metrics.uniqueUploaders),hint:`${ma(t.metrics.uniqueGuilds)} guilds represented`,icon:s.jsx(Ix,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:ma(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:s.jsx(nE,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return s.jsx(as,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:s.jsx(Mke,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:n}),right:s.jsx(Fke,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(o=>s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[o.icon,o.label]}),s.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:o.value})]})}),s.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:o.hint})]},o.label))}),s.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),s.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(o=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:Ru,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Lu(o.status)},"aria-hidden":"true"}),o2(o.status)]}),s.jsx("span",{className:"font-semibold",children:ma(o.count)})]}),s.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:s.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(o.share*100,100).toFixed(1)}%`,backgroundColor:Lu(o.status)}})}),s.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[bp(o.share)," of window"]})]},o.status))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),s.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(o=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:Ru,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{className:"font-semibold",children:o.hourLabel}),s.jsxs("span",{children:[ma(o.total)," uploads"]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:Lu("success")},"aria-hidden":"true"}),"Success ",ma(o.success)]}),s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:Lu("failed")},"aria-hidden":"true"}),"Failed ",ma(o.failed)]})]})]},o.hourLabel))})]})]}),s.jsxs("section",{className:"rounded-2xl border",style:Ba,children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(rc,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?s.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[s.jsx(tw,{className:"h-3.5 w-3.5"}),r]}):s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(r7,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),s.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[s.jsx("span",{children:"ID"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Uploader"}),s.jsx("span",{children:"Guild"}),s.jsx("span",{className:"text-right",children:"Processing"}),s.jsx("span",{className:"text-right",children:"File size"})]}),s.jsx("ul",{children:t.recentUploads.map(o=>{var c,u,h,m;return s.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:o.id}),s.jsx("span",{children:s.jsx(Bke,{status:o.status})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(c=o.uploaderName)!=null?c:o.uploaderId)!=null?u:""}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:o.uploadedAt?o.uploadedAt.toLocaleString():"Timestamp missing"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(m=(h=o.guildName)!=null?h:o.guildId)!=null?m:""}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:o.errorCode?`Issue: ${o.errorCode}`:"Healthy"})]}),s.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:o.processingMs?b1(o.processingMs):"Pending"}),s.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:o.fileSizeBytes?kI(o.fileSizeBytes):""})]},o.id)})})]})]})})}function Mke({breakdown:t,onRefresh:e,loading:n,refreshing:r}){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[s.jsx("span",{children:"Controls"}),s.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[s.jsx(Tx,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),s.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),s.jsxs("div",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>s.jsxs("li",{className:"flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Lu(i.status)},"aria-hidden":"true"}),o2(i.status)]}),s.jsx("span",{children:bp(i.share)})]},i.status))}),n&&s.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[s.jsx(rc,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),s.jsxs("div",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),s.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Xf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Xf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Xf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function Fke({issues:t,failures:e,uploaders:n,guilds:r}){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(nE,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),s.jsx("span",{children:"Top failure signatures"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?s.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>s.jsxs("li",{className:"rounded-xl border px-3 py-2",style:Ru,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{children:i.code}),s.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),s.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(tw,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("span",{children:"Latest failed uploads"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?s.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return s.jsxs("li",{className:"rounded-xl border px-3 py-2",style:Ru,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),s.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(Ix,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Uploader leaderboard"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:n.map(i=>s.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:Ru,children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),s.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",bp(i.successRate)]})]}),s.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:ma(i.count)})]},i.id))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:Ba,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(A7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Guild spotlight"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>s.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:Ru,children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),s.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",bp(i.successRate)]})]}),s.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:ma(i.count)})]},i.id))})]})]})}function Bke({status:t}){const e=Lu(t);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[s.jsx(Xf,{className:"h-3 w-3","aria-hidden":"true"}),o2(t)]})}function $ke(){const[t,e]=q.useState(y1),[n,r]=q.useState(!0),[i,a]=q.useState(!1),[o,c]=q.useState(null),u=q.useCallback(async(m=!1)=>{const g=Mn("AdminScansUploaded:overview");m?a(!0):r(!0);try{const x=ol(Tt,"scanUploads"),b=Dn(x,Hi("uploadedAt","desc"),pr(100)),k=(await Tn(g,x,()=>Cn(b))).docs.map(A=>Oke(A.id,A.data()));k.length>0?(e(k),c(null)):(e(y1),c("No uploads in window - showing fallback snapshot"))}catch(x){console.error("[ScansUploaded] Failed to load Firestore data",x),c("Live data unavailable - fallback snapshot active"),e(y1)}finally{dn(g),m?a(!1):r(!1)}},[]);q.useEffect(()=>{u(!1)},[u]);const h=q.useMemo(()=>Uke(t),[t]);return{loading:n,refreshing:i,error:o,data:h,refresh:q.useCallback(()=>u(!0),[u])}}function Oke(t,e){const n=Vke(e.status);return{id:t,status:n,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof on?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function Vke(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function Uke(t){var C,M;const e=new Map,n=new Map,r=new Map,i=new Map,a=[];let o=0,c=0;const h=Date.now()-1440*60*1e3,m=new Map;t.forEach(T=>{var U,K,H,z,Y,te,G,X,J,se,ue,Ne,Ee,ee,le,re,be;const F=(U=e.get(T.status))!=null?U:0;if(e.set(T.status,F+1),T.uploadedAt&&T.uploadedAt.getTime()>=h&&(c+=1),T.processingMs!=null&&a.push(T.processingMs),T.fileSizeBytes!=null&&(o+=T.fileSizeBytes),T.status==="failed"&&T.errorCode){const Te=(K=n.get(T.errorCode))!=null?K:{count:0,lastSeen:null};n.set(T.errorCode,{count:Te.count+1,lastSeen:!Te.lastSeen||T.uploadedAt&&Te.lastSeen<T.uploadedAt?T.uploadedAt:Te.lastSeen})}const D=(z=(H=T.uploaderId)!=null?H:T.uploaderName)!=null?z:`anon-${T.id}`,V=(G=r.get(D))!=null?G:{name:(te=(Y=T.uploaderName)!=null?Y:T.uploaderId)!=null?te:"Unknown",success:0,total:0};if(r.set(D,{name:(J=(X=T.uploaderName)!=null?X:T.uploaderId)!=null?J:"Unknown",success:V.success+(T.status==="success"?1:0),total:V.total+1}),T.guildId||T.guildName){const Te=(ue=(se=T.guildId)!=null?se:T.guildName)!=null?ue:`guild-${T.id}`,Le=(ee=i.get(Te))!=null?ee:{name:(Ee=(Ne=T.guildName)!=null?Ne:T.guildId)!=null?Ee:"Unknown",success:0,total:0};i.set(Te,{name:(re=(le=T.guildName)!=null?le:T.guildId)!=null?re:"Unknown",success:Le.success+(T.status==="success"?1:0),total:Le.total+1})}if(T.uploadedAt){const Te=new Date(T.uploadedAt);Te.setMinutes(0,0,0);const Le=Te.toISOString(),Re=(be=m.get(Le))!=null?be:{hourLabel:Gke(Te),timestamp:Te,total:0,success:0,failed:0};m.set(Le,{hourLabel:Re.hourLabel,timestamp:Re.timestamp,total:Re.total+1,success:Re.success+(T.status==="success"?1:0),failed:Re.failed+(T.status==="failed"?1:0)})}});const g=t.length,x=(C=e.get("success"))!=null?C:0,b=(M=e.get("failed"))!=null?M:0,w=a.length?a.reduce((T,F)=>T+F,0)/a.length:null,k=a.length?zke(a,95):null,A=r.size,L=i.size,I=Array.from(e.entries()).map(([T,F])=>({status:T,count:F,share:g?F/g:0})).sort((T,F)=>F.count-T.count),N=Array.from(m.values()).sort((T,F)=>F.timestamp.getTime()-T.timestamp.getTime()).slice(0,12),v=Array.from(n.entries()).map(([T,F])=>({code:T,...F})).sort((T,F)=>F.count-T.count).slice(0,6),_=[...t].sort((T,F)=>{var D,V,U,K;return((V=(D=F.uploadedAt)==null?void 0:D.getTime())!=null?V:0)-((K=(U=T.uploadedAt)==null?void 0:U.getTime())!=null?K:0)}).slice(0,12),R=t.filter(T=>T.status==="failed").sort((T,F)=>{var D,V,U,K;return((V=(D=F.uploadedAt)==null?void 0:D.getTime())!=null?V:0)-((K=(U=T.uploadedAt)==null?void 0:U.getTime())!=null?K:0)}),j=Array.from(r.entries()).map(([T,F])=>({id:T,name:F.name,count:F.total,successRate:F.total?F.success/F.total:0})).sort((T,F)=>F.count-T.count).slice(0,5),S=Array.from(i.entries()).map(([T,F])=>({id:T,name:F.name,count:F.total,successRate:F.total?F.success/F.total:0})).sort((T,F)=>F.count-T.count).slice(0,5);return{metrics:{totalUploads:g,last24h:c,successRate:g?x/g:0,failed:b,avgProcessingMs:w,p95ProcessingMs:k,uniqueUploaders:A,uniqueGuilds:L,totalFileSizeBytes:o},statusBreakdown:I,timeline:N,issues:v,recentFailures:R,recentUploads:_,topUploaders:j,topGuilds:S}}function zke(t,e){const n=[...t].sort((c,u)=>c-u);if(n.length===0)return 0;const r=e/100*(n.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return n[i];const o=r-i;return n[i]*(1-o)+n[a]*o}function ma(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function bp(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function b1(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function kI(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r+=1;return`${n.toFixed(n>=10?0:1)} ${e[r]}`}function Lu(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function o2(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function Gke(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function _1({label:t,value:e,hint:n}){return s.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),s.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),n&&s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:n})]})}function Hke(){var c,u,h,m,g,x;const{snapshot:t,error:e,loading:n,refresh:r}=$L(),i=(c=t==null?void 0:t.warnings)!=null?c:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,o=(m=t==null?void 0:t.stats)!=null?m:{};return s.jsx(as,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:n,children:n?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(_1,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),s.jsx(_1,{label:"Creators tracked",value:a?a.toString():"0"}),s.jsx(_1,{label:"API lookups",value:`${(g=o.youtubeLookups)!=null?g:0}  ${(x=o.twitchLookups)!=null?x:0}`,hint:"YouTube  Twitch"})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3",children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?s.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):s.jsx("ul",{className:"space-y-2",children:i.map((b,w)=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[s.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[b.creator,"  ",b.scope]}),s.jsx("div",{className:"text-xs text-[#B0C4D9]",children:b.message}),b.source&&s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:b.source})]},`${b.scope}-${w}`))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3",children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),s.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[s.jsxs("li",{children:["Add the following environment variables (e.g. in ",s.jsx("code",{children:".env.local"}),"):",s.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),s.jsxs("li",{children:["Execute the sync script:",s.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),s.jsxs("li",{children:["Commit/deploy the generated ",s.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&s.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const py=`${va}/admin/users`,Wke=25,l2=()=>{if(!py)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},CI=t=>typeof t!="number"?null:on.fromMillis(t),c2=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:CI(t.createdAt),lastLoginAt:CI(t.lastLoginAt),status:t.status,notes:t.notes}},Kke=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:Wke)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const n=e.toString();return n?`?${n}`:""},d2=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function TI(t={}){var r;l2();const e=Kke(t),n=`${py}${e}`;try{const i=await fetch(n,{credentials:"include"});if(!i.ok)throw await d2(i);const a=await i.json();return{users:a.users.map(c2),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function qke(t){l2();const e=await fetch(`${py}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await d2(e);const n=await e.json();return c2(n.user)}async function Qke(t,e){l2();const n=await fetch(`${py}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw await d2(n);const r=await n.json();return c2(r.user)}const e6=`${va}/admin/audit-events`,Yke=50,Xke=()=>{if(!e6)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},Jke=t=>typeof t!="number"?null:on.fromMillis(t),Zke=t=>{var e,n;return{id:t.id,createdAt:Jke(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(n=t.changes)!=null?n:{},context:t.context}},eCe=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:Yke)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const n=e.toString();return n?`?${n}`:""},tCe=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function M_(t={}){var i;Xke();const e=`${e6}${eCe(t)}`,n=await fetch(e,{credentials:"include"});if(!n.ok)throw await tCe(n);const r=await n.json();return{events:r.events.map(Zke),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function sCe(t,e=10){return M_({targetUserId:t,limit:e})}const nCe=20,rCe=50,Hm={borderColor:"#2B4C73",background:"#152A42"},t6={background:"#1A2F4A"};function iCe(){var c;const{status:t,user:e}=xa(),n=(c=e==null?void 0:e.roles)!=null?c:[],r=n.includes("admin"),i=r||n.includes("mod"),[a,o]=P.useState("users");return t==="loading"||t==="idle"?s.jsx(as,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[s.jsx(rc,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?s.jsx(as,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:s.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[s.jsx(Sd,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:s.jsx(aCe,{activeTab:a,onChange:o}),children:a==="users"?s.jsx(oCe,{isAdmin:r}):s.jsx(lCe,{isAdmin:r,onSelectUser:u=>{o("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):s.jsx(as,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[s.jsx(rE,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),s.jsxs("p",{children:["You need at least the ",s.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function aCe({activeTab:t,onChange:e}){const n=[{key:"users",label:"Users",icon:s.jsx(Ix,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:s.jsx(s9,{className:"h-4 w-4"})}];return s.jsx("div",{className:"flex gap-2",children:n.map(r=>s.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function oCe({isAdmin:t}){const[e,n]=P.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=P.useState(""),a=B_(r,350);P.useEffect(()=>{n(re=>re.search===a?re:{...re,search:a})},[a]);const[o,c]=P.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=P.useState(0),m=P.useMemo(()=>({pageSize:nCe,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);P.useEffect(()=>{let re=!1;return c(be=>({...be,loading:!0,error:null})),TI(m).then(be=>{re||c({items:be.users,cursor:be.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(be=>{re||c(Te=>({...Te,loading:!1,loadingMore:!1,error:be instanceof Error?be.message:"Failed to load users"}))}),()=>{re=!0}},[m,u]);const g=()=>h(re=>re+1),x=async()=>{if(o.cursor){c(re=>({...re,loadingMore:!0,error:null}));try{const re=await TI({...m,cursor:o.cursor});c(be=>({items:[...be.items,...re.users],cursor:re.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(re){c(be=>{var Te;return{...be,loadingMore:!1,error:(Te=re==null?void 0:re.message)!=null?Te:"Failed to load additional users"}})}}},[b,w]=P.useState(null),[k,A]=P.useState(null),[L,I]=P.useState(!1),[N,v]=P.useState(null),[_,R]=P.useState(""),[j,S]=P.useState(!1),[C,M]=P.useState(null),[T,F]=P.useState(!1),[D,V]=P.useState(!1),[U,K]=P.useState([]),[H,z]=P.useState(!1),[Y,te]=P.useState(null),G=P.useRef(null);P.useEffect(()=>{G.current=b},[b]);const X=P.useRef(!1);P.useEffect(()=>{X.current=j},[j]);const J=P.useCallback(async re=>{var be;z(!0),te(null);try{const Te=await sCe(re,12);G.current===re&&K(Te.events)}catch(Te){G.current===re&&te((be=Te==null?void 0:Te.message)!=null?be:"Failed to load audit history")}finally{G.current===re&&z(!1)}},[]);P.useEffect(()=>{var Le;if(!b){A(null),R(""),S(!1),K([]),te(null),V(!1);return}const re=b,be=o.items.find(Re=>Re.id===re);be?(A(be),R((Le=be.notes)!=null?Le:"")):(A(null),R("")),S(!1),I(!0),v(null);let Te=!1;return qke(re).then(Re=>{var Oe;Te||G.current!==re||(A(Re),R((Oe=Re.notes)!=null?Oe:""),S(!1),I(!1))}).catch(Re=>{var Oe;Te||G.current!==re||(I(!1),v((Oe=Re==null?void 0:Re.message)!=null?Oe:"Failed to load user"))}),J(re),()=>{Te=!0}},[b,o.items,J]),P.useEffect(()=>{var be;if(!b)return;const re=o.items.find(Te=>Te.id===b);re&&(A(Te=>Te&&Te.id===re.id?{...Te,...re}:re),X.current||R((be=re.notes)!=null?be:""))},[o.items,b]);const se=P.useCallback(re=>{c(be=>({...be,items:be.items.map(Te=>Te.id===re.id?re:Te)}))},[]),ue=P.useCallback(async re=>{var be,Te;if(k){F(!0),M(null);try{const Le=await Qke(k.id,re);A(Le),se(Le),"notes"in re&&(S(!1),R((be=Le.notes)!=null?be:"")),await J(Le.id)}catch(Le){M((Te=Le==null?void 0:Le.message)!=null?Te:"Failed to update user")}finally{F(!1)}}},[k,J,se]),Ne=re=>{if(!k||!t||re==="user")return;const be=new Set(k.roles);be.has(re)?be.delete(re):be.add(re),be.add("user"),ue({roles:Array.from(be)})},Ee=re=>{!k||!t||F_(k.status)===re||re==="banned"&&!window.confirm(`Ban ${Wm(k)}? They will lose access to the control panel.`)||ue({status:re})},ee=re=>{R(re),S(!0)},le=()=>{!k||!t||!j||ue({notes:_.trim().length?_:null})};return P.useEffect(()=>{if(typeof window=="undefined")return;const re=be=>{const Te=be.detail;Te!=null&&Te.userId&&w(Te.userId)};return window.addEventListener("sf-admin-open-user",re),()=>{window.removeEventListener("sf-admin-open-user",re)}},[]),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:Hm,children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Cv,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:re=>i(re.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsx(fv,{label:"Role",value:e.role,onChange:re=>n(be=>({...be,role:re})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),s.jsx(fv,{label:"Status",value:e.status,onChange:re=>n(be=>({...be,status:re})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),s.jsx(fv,{label:"Provider",value:e.provider,onChange:re=>n(be=>({...be,provider:re})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[s.jsx(Tx,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[s.jsxs("div",{className:"rounded-2xl border",style:Hm,children:[s.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsxs("span",{className:"text-[#B0C4D9]",children:[o.items.length," users ",e.search?"filtered":""]}),o.loading&&s.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[s.jsx(rc,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[s.jsx("thead",{style:t6,children:s.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[s.jsx("th",{className:"px-4 py-2",children:"User ID"}),s.jsx("th",{className:"px-4 py-2",children:"Display name"}),s.jsx("th",{className:"px-4 py-2",children:"Role"}),s.jsx("th",{className:"px-4 py-2",children:"Status"}),s.jsx("th",{className:"px-4 py-2",children:"Providers"}),s.jsx("th",{className:"px-4 py-2",children:"Created"}),s.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),s.jsx("tbody",{children:o.items.map(re=>{var Te,Le,Re;const be=re.id===b;return s.jsxs("tr",{onClick:()=>w(re.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${be?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[s.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:re.userId}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n6,{url:a6(re),name:Wm(re)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:Wm(re)}),(Te=re.profile)!=null&&Te.displayName&&re.profile.displayName!==re.displayName?s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:re.profile.displayName}):null]})]})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(r6,{role:i6(re.roles)})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(dCe,{status:F_(re.status)})}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(gx,{provider:"discord",active:!!((Le=re.providers)!=null&&Le.discord)}),s.jsx(gx,{provider:"google",active:!!((Re=re.providers)!=null&&Re.google)})]})}),s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:zu(re.createdAt)}),s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:zu(re.lastLoginAt)})]},re.id)})})]}),!o.loading&&!o.items.length&&s.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),o.error&&s.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[s.jsx(Cm,{className:"h-3.5 w-3.5"}),o.error]}),s.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsx("span",{className:"text-[#8AA5C4]",children:o.cursor?"More users available":"End of list"}),s.jsx("button",{type:"button",onClick:x,disabled:!o.cursor||o.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:o.loadingMore?"Loading...":"Load more"})]})]}),s.jsx("aside",{className:"rounded-2xl border p-3",style:Hm,children:k?s.jsx(cCe,{user:k,isAdmin:t,detailLoading:L,detailError:N,notesValue:_,notesDirty:j,onNotesChange:ee,onNotesSave:le,onRoleToggle:Ne,onStatusChange:Ee,actionError:C,actionPending:T,auditEntries:U,auditLoading:H,auditError:Y,onRefreshAudit:()=>k&&J(k.id),showRawJson:D,toggleRawJson:()=>V(re=>!re)}):s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[s.jsx(b7,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function lCe({isAdmin:t,onSelectUser:e}){const[n,r]=P.useState({actor:"",target:"",action:"all"}),[i,a]=P.useState(""),[o,c]=P.useState(""),u=B_(i,350),h=B_(o,350);P.useEffect(()=>{r(L=>L.actor===u&&L.target===h?L:{...L,actor:u,target:h})},[u,h]);const[m,g]=P.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[x,b]=P.useState(0),w=P.useMemo(()=>{const L=n.action==="all"?void 0:n.action,I=n.actor.includes(":")?n.actor:void 0,N=n.target.includes(":")?n.target:void 0;return{limit:rCe,action:L,actorUserId:I,targetUserId:N}},[n]);P.useEffect(()=>{let L=!1;return g(I=>({...I,loading:!0,error:null})),M_(w).then(I=>{L||g({items:I.events,cursor:I.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(I=>{L||g(N=>{var v;return{...N,loading:!1,loadingMore:!1,error:(v=I==null?void 0:I.message)!=null?v:"Failed to load audit log"}})}),()=>{L=!0}},[w,x]);const k=async()=>{if(m.cursor){g(L=>({...L,loadingMore:!0,error:null}));try{const L=await M_({...w,cursor:m.cursor});g(I=>({items:[...I.items,...L.events],cursor:L.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(L){g(I=>{var N;return{...I,loadingMore:!1,error:(N=L==null?void 0:L.message)!=null?N:"Failed to load more events"}})}}},A=P.useMemo(()=>{const L=n.actor.trim().toLowerCase(),I=n.target.trim().toLowerCase();return m.items.filter(N=>{var R;const v=!L||N.actorUserId.toLowerCase().includes(L)||((R=N.actorDisplayName)!=null?R:"").toLowerCase().includes(L),_=!I||N.targetUserId.toLowerCase().includes(I);return v&&_})},[m.items,n.actor,n.target]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:Hm,children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Cv,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:L=>a(L.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Cv,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Target user id",value:o,onChange:L=>c(L.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsx(fv,{label:"Action",value:n.action,onChange:L=>r(I=>({...I,action:L})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("button",{type:"button",onClick:()=>b(L=>L+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[s.jsx(Tx,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),s.jsxs("div",{className:"rounded-2xl border",style:Hm,children:[s.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsxs("span",{className:"text-[#8AA5C4]",children:[A.length," events"]}),m.loading&&s.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[s.jsx(rc,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[s.jsx("thead",{style:t6,children:s.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[s.jsx("th",{className:"px-4 py-2",children:"Time"}),s.jsx("th",{className:"px-4 py-2",children:"Actor"}),s.jsx("th",{className:"px-4 py-2",children:"Target User"}),s.jsx("th",{className:"px-4 py-2",children:"Action"}),s.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),s.jsx("tbody",{children:A.map(L=>{var I;return s.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:zu(L.createdAt)}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("div",{className:"text-white",children:(I=L.actorDisplayName)!=null?I:"N/A"}),s.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:L.actorUserId})]}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(L.targetUserId),children:L.targetUserId})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(s6,{action:L.action})}),s.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:L.summary})]},L.id)})})]}),!A.length&&!m.loading&&s.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),m.error&&s.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[s.jsx(Cm,{className:"h-3.5 w-3.5"}),m.error]}),s.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsx("span",{className:"text-[#8AA5C4]",children:m.cursor?"More events available":"End of audit log"}),s.jsx("button",{type:"button",onClick:k,disabled:!m.cursor||m.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:m.loadingMore?"Loading...":"Load more"})]})]}),!t&&s.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function cCe({user:t,isAdmin:e,detailLoading:n,detailError:r,notesValue:i,notesDirty:a,onNotesChange:o,onNotesSave:c,onRoleToggle:u,onStatusChange:h,actionError:m,actionPending:g,auditEntries:x,auditLoading:b,auditError:w,onRefreshAudit:k,showRawJson:A,toggleRawJson:L}){var N,v;const I=i6(t.roles);return s.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[n&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[s.jsx(rc,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[s.jsx(Cm,{className:"h-3.5 w-3.5"}),r]}),s.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(n6,{url:a6(t),name:Wm(t),size:56}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"truncate text-base text-white",children:Wm(t)}),s.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),s.jsxs("div",{className:"mt-1 flex gap-1",children:[s.jsx(r6,{role:I}),s.jsx(gx,{provider:"discord",active:!!((N=t.providers)!=null&&N.discord)}),s.jsx(gx,{provider:"google",active:!!((v=t.providers)!=null&&v.google)})]})]})]})}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(_=>s.jsx("button",{type:"button",onClick:()=>u(_),disabled:!e||_==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(_)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:_},_))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),s.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(_=>s.jsx("button",{type:"button",onClick:()=>h(_),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${F_(t.status)===_?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:_},_))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&s.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),s.jsx("textarea",{value:i,onChange:_=>o(_.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),s.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(rc,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&s.jsx("button",{type:"button",onClick:c,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),m&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[s.jsx(Cm,{className:"h-3 w-3"}),m]})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),s.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[s.jsx(Tx,{className:"h-3 w-3"}),"Refresh"]})]}),b&&s.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[s.jsx(rc,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),w&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[s.jsx(Cm,{className:"h-3 w-3"}),w]}),!b&&!x.length&&s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),s.jsx("ul",{className:"space-y-2",children:x.map(_=>{var R;return s.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[s.jsx("span",{children:zu(_.createdAt)}),s.jsx(s6,{action:_.action})]}),s.jsx("div",{className:"mt-1 text-white",children:(R=_.actorDisplayName)!=null?R:_.actorUserId}),s.jsx("div",{className:"text-[#C8D6EC]",children:_.summary})]},_.id)})})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),s.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[s.jsx(y9,{className:"h-3 w-3"}),A?"Hide raw JSON":"Show raw JSON"]})]}),s.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[s.jsx(Gf,{label:"Created",value:zu(t.createdAt)}),s.jsx(Gf,{label:"Last login",value:zu(t.lastLoginAt)}),s.jsx(Gf,{label:"Primary provider",value:t.primaryProvider}),s.jsx(Gf,{label:"Roles",value:t.roles.join(", ")})]}),A&&s.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function s6({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return s.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function Gf({label:t,value:e}){return e?s.jsxs("div",{className:"flex justify-between gap-2",children:[s.jsx("span",{className:"text-[#6E86A6]",children:t}),s.jsx("span",{className:"text-white",children:e})]}):null}function fv({label:t,value:e,options:n,onChange:r}){return s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[#8AA5C4]",children:t}),s.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:n.map(i=>s.jsx("option",{value:i.value,children:i.label},i.value))})]})}function n6({url:t,name:e,size:n=32}){return t?s.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:n,height:n,borderColor:"#2B4C73"}}):s.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:n,height:n,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function r6({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return s.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function dCe({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:s.jsx(v7,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:s.jsx(Sd,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:s.jsx(a7,{className:"h-3 w-3"})}},{label:n,color:r,icon:i}=e[t];return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,n]})}function gx({provider:t,active:e}){const n=t==="discord"?"D":"G";return s.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:n})}function i6(t){const e=["admin","mod","creator","user"];for(const n of e)if(t.includes(n))return n;return"user"}function Wm(t){var e,n,r,i,a,o,c,u,h;return(h=(u=(a=(n=t.displayName)!=null?n:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(c=(o=t.providers)==null?void 0:o.google)==null?void 0:c.displayName)!=null?h:t.userId}function a6(t){var e,n,r,i,a,o,c;return(c=(o=(r=t.avatarUrl)!=null?r:(n=(e=t.providers)==null?void 0:e.discord)==null?void 0:n.avatarUrl)!=null?o:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?c:null}function F_(t){return t!=null?t:"active"}function zu(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function B_(t,e){const[n,r]=P.useState(t);return P.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),n}const uCe="_page_rpt6g_1",hCe="_tabs_rpt6g_17",mCe="_tab_rpt6g_17",pCe="_tabActive_rpt6g_71",gCe="_banner_rpt6g_87",fCe="_bannerSuccess_rpt6g_101",vCe="_bannerError_rpt6g_113",xCe="_card_rpt6g_125",yCe="_cardTitle_rpt6g_145",bCe="_settingsForm_rpt6g_159",_Ce="_formRow_rpt6g_173",wCe="_selectInput_rpt6g_185",jCe="_checkboxRow_rpt6g_203",SCe="_settingsFooter_rpt6g_227",NCe="_inlineStatus_rpt6g_245",kCe="_helperText_rpt6g_259",CCe="_secondaryButton_rpt6g_271",TCe="_cardSubtitle_rpt6g_297",ICe="_identityHeader_rpt6g_309",ECe="_identityAvatar_rpt6g_323",ACe="_identityName_rpt6g_337",PCe="_identityProvider_rpt6g_351",RCe="_identityForm_rpt6g_363",LCe="_nameInputWrap_rpt6g_379",DCe="_nameLabel_rpt6g_395",MCe="_nameInput_rpt6g_379",FCe="_nameSaveButton_rpt6g_427",BCe="_feedbackError_rpt6g_471",$Ce="_feedbackSuccess_rpt6g_483",OCe="_metaGrid_rpt6g_495",VCe="_metaItem_rpt6g_507",UCe="_metaLabel_rpt6g_521",zCe="_metaValue_rpt6g_535",GCe="_serviceList_rpt6g_549",HCe="_serviceRow_rpt6g_559",WCe="_serviceName_rpt6g_587",KCe="_serviceStatus_rpt6g_601",qCe="_serviceAction_rpt6g_613",QCe="_securityText_rpt6g_645",YCe="_securityNote_rpt6g_657",XCe="_logoutButton_rpt6g_669",JCe="_loadingState_rpt6g_701",ZCe="_emptyState_rpt6g_703",eTe="_emptyStateTitle_rpt6g_721",tTe="_emptyStateText_rpt6g_733",sTe="_primaryButton_rpt6g_745",et={page:uCe,tabs:hCe,tab:mCe,tabActive:pCe,banner:gCe,bannerSuccess:fCe,bannerError:vCe,card:xCe,cardTitle:yCe,settingsForm:bCe,formRow:_Ce,selectInput:wCe,checkboxRow:jCe,settingsFooter:SCe,inlineStatus:NCe,helperText:kCe,secondaryButton:CCe,cardSubtitle:TCe,identityHeader:ICe,identityAvatar:ECe,identityName:ACe,identityProvider:PCe,identityForm:RCe,nameInputWrap:LCe,nameLabel:DCe,nameInput:MCe,nameSaveButton:FCe,feedbackError:BCe,feedbackSuccess:$Ce,metaGrid:OCe,metaItem:VCe,metaLabel:UCe,metaValue:zCe,serviceList:GCe,serviceRow:HCe,serviceName:WCe,serviceStatus:KCe,serviceAction:qCe,securityText:QCe,securityNote:YCe,logoutButton:XCe,loadingState:JCe,emptyState:ZCe,emptyStateTitle:eTe,emptyStateText:tTe,primaryButton:sTe},nTe="_header_t1aqh_1",rTe="_headerTexts_t1aqh_17",iTe="_tableWrap_t1aqh_31",aTe="_table_t1aqh_31",oTe="_tableRow_t1aqh_87",lTe="_dateCell_t1aqh_95",cTe="_actionsHeader_t1aqh_103",dTe="_actionCell_t1aqh_111",uTe="_unlinkButton_t1aqh_119",hTe="_unlinkIcon_t1aqh_175",mTe="_muted_t1aqh_185",pTe="_emptyState_t1aqh_193",gTe="_emptyTitle_t1aqh_209",fTe="_emptyDescription_t1aqh_221",vTe="_emptyCta_t1aqh_233",xTe="_helpAccordion_t1aqh_277",yTe="_helpToggle_t1aqh_291",bTe="_helpToggleOpen_t1aqh_331",_Te="_helpToggleAction_t1aqh_339",wTe="_helpBody_t1aqh_351",jTe="_helpList_t1aqh_359",STe="_helpListItem_t1aqh_377",NTe="_helpFootnote_t1aqh_385",kTe="_confirmBackdrop_t1aqh_397",CTe="_confirmDialog_t1aqh_419",TTe="_confirmTitle_t1aqh_443",ITe="_confirmText_t1aqh_457",ETe="_confirmName_t1aqh_473",ATe="_confirmMeta_t1aqh_483",PTe="_errorText_t1aqh_491",RTe="_confirmActions_t1aqh_503",LTe="_cancelButton_t1aqh_517",DTe="_confirmButton_t1aqh_519",vs={header:nTe,headerTexts:rTe,tableWrap:iTe,table:aTe,tableRow:oTe,dateCell:lTe,actionsHeader:cTe,actionCell:dTe,unlinkButton:uTe,unlinkIcon:hTe,muted:mTe,emptyState:pTe,emptyTitle:gTe,emptyDescription:fTe,emptyCta:vTe,helpAccordion:xTe,helpToggle:yTe,helpToggleOpen:bTe,helpToggleAction:_Te,helpBody:wTe,helpList:jTe,helpListItem:STe,helpFootnote:NTe,confirmBackdrop:kTe,confirmDialog:CTe,confirmTitle:TTe,confirmText:ITe,confirmName:ETe,confirmMeta:ATe,errorText:PTe,confirmActions:RTe,cancelButton:LTe,confirmButton:DTe},MTe=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},w1=t=>{var n;const e=(n=t.name)==null?void 0:n.trim();return e||(t.playerId!==void 0&&t.playerId!==null?`#${t.playerId}`:"-")},FTe=({user:t,refreshSession:e,openHelp:n=!1})=>{const{t:r}=Os(),i=P.useMemo(()=>{var C;return(C=t.linkedPlayers)!=null?C:[]},[t.linkedPlayers]),[a,o]=P.useState(!1),[c,u]=P.useState(!1),[h,m]=P.useState(null),[g,x]=P.useState(null),[b,w]=P.useState(()=>n||i.length===0),k=P.useMemo(()=>`${va}/user/unlink-character`,[]);q.useEffect(()=>{n&&w(!0)},[n]),q.useEffect(()=>{i.length===0&&w(!0)},[i.length]);const A=async()=>{o(!0);try{await e({silent:!0})}catch(C){console.error("[Account] Failed to refresh linked players",C)}finally{o(!1)}},L=C=>{m(C),x(null)},I=()=>{c||(m(null),x(null))},N=async()=>{var C;if(h){if(!k){x(r("account.connectedCharacters.errors.serviceUnavailable","Auth service is not configured for unlinking."));return}u(!0),o(!0),x(null);try{const M=await fetch(k,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:h.playerId,server:h.server})});if(!M.ok){const T=await M.json().catch(()=>null),F=(T==null?void 0:T.error)||(T==null?void 0:T.message)||r("account.connectedCharacters.errors.unlink","Could not unlink character.");throw new Error(F)}await e({silent:!0}),m(null)}catch(M){const T=(C=M==null?void 0:M.message)!=null?C:r("account.connectedCharacters.errors.unlink","Could not unlink character.");x(T)}finally{u(!1),o(!1)}}},v=C=>C?C.startsWith("discord_")?r("account.connectedCharacters.method.discord","Discord bot"):C:"-",_=P.useMemo(()=>[r("account.connectedCharacters.help.steps.link",'Link a character via the Discord bot using the "!connect char" command.'),r("account.connectedCharacters.help.steps.verify","We match the character to your latest verified scan; keep your game data up to date."),r("account.connectedCharacters.help.steps.refresh","After linking, click Refresh here to sync the latest characters from the auth service."),r("account.connectedCharacters.help.steps.unlink","You can unlink any character in the Actions column; the source column shows how it was linked.")],[r]),R=()=>{const C="connected-characters-help";return s.jsxs("div",{className:vs.helpAccordion,children:[s.jsxs("button",{type:"button",className:`${vs.helpToggle} ${b?vs.helpToggleOpen:""}`,"aria-expanded":b,"aria-controls":C,onClick:()=>w(M=>!M),children:[s.jsx("span",{children:r("account.connectedCharacters.help.title","How does linking work?")}),s.jsx("span",{className:vs.helpToggleAction,children:b?r("account.connectedCharacters.help.hide","Hide"):r("account.connectedCharacters.help.show","Show")})]}),b&&s.jsxs("div",{id:C,className:vs.helpBody,children:[s.jsx("ul",{className:vs.helpList,children:_.map((M,T)=>s.jsx("li",{className:vs.helpListItem,children:M},`help-step-${T}`))}),s.jsx("p",{className:vs.helpFootnote,children:r("account.connectedCharacters.help.footnote","Tip: Click Refresh after linking or unlinking to update this table.")})]})]})},j=()=>s.jsx("div",{className:vs.tableWrap,children:s.jsxs("table",{className:vs.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:r("account.connectedCharacters.columns.character","Character")}),s.jsx("th",{children:r("account.connectedCharacters.columns.server","Server")}),s.jsx("th",{children:r("account.connectedCharacters.columns.playerId","Player ID")}),s.jsx("th",{children:r("account.connectedCharacters.columns.class","Class")}),s.jsx("th",{children:r("account.connectedCharacters.columns.level","Level")}),s.jsx("th",{children:r("account.connectedCharacters.columns.guild","Guild")}),s.jsx("th",{children:r("account.connectedCharacters.columns.lastVerified","Last linked")}),s.jsx("th",{children:r("account.connectedCharacters.columns.source","Source")}),s.jsx("th",{className:vs.actionsHeader,children:r("account.connectedCharacters.columns.actions","Actions")})]})}),s.jsx("tbody",{children:i.map((C,M)=>{var K,H,z,Y;const T=`${(K=C.server)!=null?K:"unknown"}-${(H=C.playerId)!=null?H:M}`,F=(z=C.level)!=null?z:"-",D=C.guildName||"-",V=C.class||"-",U=v(C.method);return s.jsxs("tr",{className:vs.tableRow,children:[s.jsx("td",{children:w1(C)}),s.jsx("td",{children:C.server||"-"}),s.jsx("td",{children:(Y=C.playerId)!=null?Y:"-"}),s.jsx("td",{className:C.class?void 0:vs.muted,children:V}),s.jsx("td",{className:typeof C.level!="number"?vs.muted:void 0,children:F}),s.jsx("td",{className:C.guildName?void 0:vs.muted,children:D}),s.jsx("td",{className:vs.dateCell,children:MTe(C.verifiedAt)}),s.jsx("td",{className:C.method?void 0:vs.muted,children:U}),s.jsx("td",{className:vs.actionCell,children:s.jsx("button",{type:"button",className:vs.unlinkButton,onClick:()=>L(C),title:r("account.connectedCharacters.actions.unlink","Disconnect character"),"aria-label":`${r("account.connectedCharacters.actions.unlink","Disconnect character")} ${w1(C)}`,disabled:c||a,children:s.jsx("svg",{className:vs.unlinkIcon,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M9 4h6a1 1 0 0 1 1 1v2h5v2h-2.1l-1.05 11.2A2 2 0 0 1 15.86 22H8.14a2 2 0 0 1-1.99-1.8L5.1 9H3V7h5V5a1 1 0 0 1 1-1Zm5 2V6H10v2h4Zm-6.93 3 1.02 10.8a1 1 0 0 0 1 .9h7.72a1 1 0 0 0 1-.9L18.83 9ZM10 11v7h2v-7Zm4 0v7h2v-7Z"})})})})]},T)})})]})}),S=()=>{var M;if(!h)return null;const C="unlink-dialog-title";return s.jsx("div",{className:vs.confirmBackdrop,role:"dialog","aria-modal":"true","aria-labelledby":C,children:s.jsxs("div",{className:vs.confirmDialog,children:[s.jsx("h3",{id:C,className:vs.confirmTitle,children:r("account.connectedCharacters.confirmation.title","Are you sure you want to unlink this character?")}),s.jsxs("p",{className:vs.confirmText,children:[s.jsx("span",{className:vs.confirmName,children:w1(h)}),s.jsxs("span",{className:vs.confirmMeta,children:[h.server||"-"," - #",(M=h.playerId)!=null?M:"-"]})]}),g&&s.jsx("p",{className:vs.errorText,children:g}),s.jsxs("div",{className:vs.confirmActions,children:[s.jsx("button",{type:"button",className:vs.cancelButton,onClick:I,disabled:c,children:r("account.connectedCharacters.confirmation.cancel","Cancel")}),s.jsx("button",{type:"button",className:vs.confirmButton,onClick:N,disabled:c,children:c?r("account.connectedCharacters.confirmation.confirming","Unlinking..."):r("account.connectedCharacters.confirmation.confirm","Yes, unlink")})]})]})})};return t?s.jsxs("section",{className:et.card,children:[s.jsxs("div",{className:vs.header,children:[s.jsxs("div",{className:vs.headerTexts,children:[s.jsx("h2",{className:et.cardTitle,children:r("account.connectedCharacters.title","Connected characters")}),s.jsx("p",{className:et.cardSubtitle,children:r("account.connectedCharacters.subtitle","These game characters are linked to your SFDataHub account.")})]}),s.jsx("button",{type:"button",className:et.secondaryButton,onClick:A,disabled:a,children:a?r("account.connectedCharacters.actions.refreshing","Refreshing..."):r("account.connectedCharacters.actions.refresh","Refresh")})]}),a&&s.jsx("p",{className:et.helperText,children:r("account.connectedCharacters.loading","Refreshing characters...")}),R(),!a&&i.length===0&&s.jsxs("div",{className:vs.emptyState,children:[s.jsx("p",{className:vs.emptyTitle,children:r("account.connectedCharacters.empty.title","No characters linked yet")}),s.jsx("p",{className:vs.emptyDescription,children:r("account.connectedCharacters.empty.description",'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.')}),s.jsx("button",{type:"button",className:vs.emptyCta,onClick:()=>w(!0),children:r("account.connectedCharacters.empty.cta","Click to learn how linking works")})]}),i.length>0&&j(),S()]}):null},o6="user_settings";async function II(t){if(!t)return null;try{const e=ms(Tt,o6,t),n=await mn(e);if(!n.exists())return null;const r=n.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function BTe(t,e){if(t)try{const n=ms(Tt,o6,t);await ll(n,e,{merge:!0})}catch(n){throw console.error("[UserSettings] Failed to update settings",n),n}}const l6="user_tools_state";async function $Te(t){var e;if(!t)return null;try{const n=ms(Tt,l6,t),r=await mn(n);return r.exists()&&(e=r.data())!=null?e:null}catch(n){return console.warn("[UserToolsSettings] Failed to load tools settings",n),null}}async function OTe(t,e){if(t)try{const n=ms(Tt,l6,t),r={...e,updatedAt:new Date().toISOString()};await ll(n,r,{merge:!0})}catch(n){throw console.error("[UserToolsSettings] Failed to save tools settings",n),n}}const VTe="https://i.pravatar.cc/72",Hf=`${va}/auth/account/profile`,j1=`${va}/auth/google/link/start`,EI=3,AI=32,UTe=["overview","settings","tools","connected-characters"],PI=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},zTe=()=>{const{status:t,user:e,logout:n,refreshSession:r}=xa(),i=Wr(),a=qn(),{t:o,i18n:c}=Os(),[u,h]=P.useState("overview"),[m,g]=P.useState(null),[x,b]=P.useState(null),[w,k]=P.useState(!1),[A,L]=P.useState(null),[I,N]=P.useState(!1),[v,_]=P.useState(!1),[R,j]=P.useState(null),[S,C]=P.useState(null),[M,T]=P.useState(!0),[F,D]=P.useState(!1),[V,U]=P.useState(null),[K,H]=P.useState(!1),z=P.useMemo(()=>{const fe=new URLSearchParams(a.search);return fe.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:fe.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),Y=t==="loading"||t==="idle",te=t==="authenticated"&&!!e,G=e==null?void 0:e.id,X=P.useMemo(()=>new URLSearchParams(a.search),[a.search]),J=X.get("tab"),se=X.get("openHelp")==="1",ue=P.useMemo(()=>({language:c.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[c.language]);P.useEffect(()=>{if(!G){g(null),b(null),L(null),k(!1),j(null),C(null),T(!1),D(!1),U(null),H(!1);return}let fe=!0;return(async()=>{k(!0),L(null),_(!1);try{const xe=await II(G),tt=xe?{...ue,...xe}:ue;if(!fe)return;g(tt),b(tt)}catch(xe){if(!fe)return;L(o("account.settings.error","Could not load settings."))}finally{fe&&k(!1)}})(),()=>{fe=!1}},[G,ue,o]),P.useEffect(()=>{if(!G)return;let fe=!0;const me={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{T(!0),U(null),H(!1);try{const tt=await $Te(G);if(!fe)return;const lt=tt?{...me,...tt}:me;j(lt),C(lt)}catch(tt){if(!fe)return;U(o("account.tools.loadError","Could not load tools settings."))}finally{fe&&T(!1)}})(),()=>{fe=!1}},[G,o]),P.useEffect(()=>{J&&UTe.includes(J)&&J!==u&&h(J)},[J,u]);const Ne=(fe,me)=>{const xe=new URLSearchParams(a.search);xe.set("tab",fe),me!=null&&me.openHelp?xe.set("openHelp","1"):xe.delete("openHelp");const tt=xe.toString();i({pathname:a.pathname,search:tt?`?${tt}`:""},{replace:!0})},Ee=()=>{typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):i("/login")},ee=async()=>{await n(),i("/")},le=()=>{if(!j1){window.alert("Auth service is not configured for Google linking.");return}window.location.href=j1},re=()=>s.jsx("div",{className:et.loadingState,children:"Checking session..."}),be=()=>s.jsxs("div",{className:et.emptyState,children:[s.jsx("p",{className:et.emptyStateTitle,children:"You are not signed in."}),s.jsx("p",{className:et.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),s.jsx("button",{type:"button",className:et.primaryButton,onClick:Ee,children:"Go to sign-in"})]}),Te=()=>{if(!z)return null;const fe=z.type==="success"?`${et.banner} ${et.bannerSuccess}`:`${et.banner} ${et.bannerError}`;return s.jsx("div",{className:fe,children:z.message})},Le=()=>{var bt,ft,mt;if(!e)return null;const fe=(bt=e.providers)==null?void 0:bt.discord,me=(ft=e.providers)==null?void 0:ft.google,xe=!!fe,tt=!!me,lt=!!j1,Je=lt?tt?me!=null&&me.displayName?`Connected as ${me.displayName}`:"Connected":"Not connected":"Auth service not configured",ut=[{key:"discord",name:"Discord",status:xe?`Connected as ${(mt=fe==null?void 0:fe.displayName)!=null?mt:e.displayName}`:"Not connected",actionLabel:xe?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:Je,actionLabel:tt?"Connected":"Connect",disabled:tt||!lt,onClick:tt||!lt?void 0:le},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return s.jsxs("section",{className:et.card,children:[s.jsx("h2",{className:et.cardTitle,children:"Connected services"}),s.jsx("p",{className:et.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),s.jsx("div",{className:et.serviceList,children:ut.map(ot=>s.jsxs("div",{className:et.serviceRow,children:[s.jsxs("div",{children:[s.jsx("p",{className:et.serviceName,children:ot.name}),s.jsx("p",{className:et.serviceStatus,children:ot.status})]}),s.jsx("button",{type:"button",className:et.serviceAction,disabled:ot.disabled,onClick:ot.onClick,children:ot.actionLabel})]},ot.key))})]})},Re=()=>s.jsxs("section",{className:et.card,children:[s.jsx("h2",{className:et.cardTitle,children:"Security & session"}),s.jsx("p",{className:et.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),s.jsx("p",{className:et.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),s.jsx("button",{type:"button",className:et.logoutButton,onClick:ee,children:"Log out from this device"}),s.jsx("p",{className:et.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),Oe=(fe,me)=>{m&&(g(xe=>({...xe!=null?xe:ue,[fe]:me})),_(!1))},Me=!!(m&&x&&JSON.stringify(m)!==JSON.stringify(x)),De=!!(R&&S&&JSON.stringify(R)!==JSON.stringify(S)),Fe=async()=>{if(!(!G||!m||I||!Me))try{N(!0),L(null),await BTe(G,m),b(m),_(!0)}catch(fe){L(o("account.settings.saveError","Could not save settings. Please try again."))}finally{N(!1)}},we=(fe,me)=>{R&&(j(xe=>({...xe!=null?xe:{},[fe]:me})),H(!1))},de=async()=>{if(!(!G||!R||F||!De))try{D(!0),U(null),await OTe(G,R),C(R),H(!0)}catch(fe){U(o("account.tools.save.error","Could not save settings. Please try again."))}finally{D(!1)}},Ie=()=>{var fe,me;return s.jsxs("section",{className:et.card,children:[s.jsx("h2",{className:et.cardTitle,children:o("account.settings.title","Settings")}),s.jsx("p",{className:et.cardSubtitle,children:o("account.settings.subtitle","Configure your personal preferences.")}),w&&s.jsx("p",{className:et.helperText,children:o("account.settings.loading","Loading settings...")}),A&&s.jsxs("div",{className:et.feedbackError,children:[s.jsx("p",{children:A}),s.jsx("button",{type:"button",className:et.secondaryButton,onClick:()=>{G&&(L(null),_(!1),k(!0),II(G).then(xe=>{const tt=xe?{...ue,...xe}:ue;g(tt),b(tt)}).catch(()=>{L(o("account.settings.error","Could not load settings."))}).finally(()=>k(!1)))},children:o("account.settings.retry","Retry")})]}),m&&!w&&s.jsxs("div",{className:et.settingsForm,children:[s.jsxs("div",{className:et.formRow,children:[s.jsx("label",{className:et.nameLabel,htmlFor:"settings-language",children:o("account.settings.language.label","Preferred language")}),s.jsxs("select",{id:"settings-language",className:et.selectInput,value:(fe=m.language)!=null?fe:ue.language,onChange:xe=>Oe("language",xe.target.value),children:[s.jsx("option",{value:"en",children:o("topbar.lang_en","English")}),s.jsx("option",{value:"de",children:o("topbar.lang_de","Deutsch")})]})]}),s.jsxs("div",{className:et.formRow,children:[s.jsx("label",{className:et.nameLabel,htmlFor:"settings-section",children:o("account.settings.defaultSection.label","Default section")}),s.jsxs("select",{id:"settings-section",className:et.selectInput,value:(me=m.defaultSection)!=null?me:ue.defaultSection,onChange:xe=>Oe("defaultSection",xe.target.value),children:[s.jsx("option",{value:"home",children:o("nav.home","Home")}),s.jsx("option",{value:"toplists",children:o("nav.toplists","Top Lists")}),s.jsx("option",{value:"guilds",children:o("nav.guilds","Guilds")}),s.jsx("option",{value:"tools",children:o("nav.tools","Tools")}),s.jsx("option",{value:"community",children:o("nav.community","Community")})]})]}),s.jsxs("label",{className:et.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!m.compactTables,onChange:xe=>Oe("compactTables",xe.target.checked)}),s.jsx("span",{children:o("account.settings.compactTables.label","Use compact table layout")})]}),s.jsxs("label",{className:et.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!m.showExperimentalFeatures,onChange:xe=>Oe("showExperimentalFeatures",xe.target.checked)}),s.jsx("span",{children:o("account.settings.experimental.label","Enable experimental features")})]})]}),s.jsxs("div",{className:et.settingsFooter,children:[s.jsxs("div",{className:et.inlineStatus,children:[v?s.jsx("span",{className:et.feedbackSuccess,children:o("account.settings.saved","Settings saved.")}):Me?null:s.jsx("span",{className:et.helperText,children:o("account.settings.noChanges","No changes to save.")}),I&&s.jsx("span",{className:et.helperText,children:o("account.settings.saving","Saving...")})]}),s.jsx("button",{type:"button",className:et.primaryButton,disabled:!Me||I||!m,onClick:Fe,children:o("account.settings.save","Save settings")})]})]})},Ae=()=>{const fe=[{key:"overview",label:o("account.tabs.overview","Overview")},{key:"settings",label:o("account.tabs.settings","Settings")},{key:"tools",label:o("account.tabs.tools","Tools")},{key:"connected-characters",label:o("account.tabs.connectedCharacters","Connected characters")}];return s.jsx("div",{className:et.tabs,role:"tablist","aria-label":"Account sections",children:fe.map(me=>{const xe=u===me.key;return s.jsx("button",{type:"button",className:`${et.tab} ${xe?et.tabActive:""}`,onClick:()=>{h(me.key),Ne(me.key,{openHelp:me.key==="connected-characters"&&se})},role:"tab","aria-selected":xe,children:me.label},me.key)})})},Xe=()=>{var fe;if(!e)return null;switch(u){case"overview":return s.jsxs(s.Fragment,{children:[s.jsx(GTe,{user:e,refreshSession:r}),Le(),Re()]});case"settings":return Ie();case"tools":return s.jsxs("section",{className:et.card,children:[s.jsx("h2",{className:et.cardTitle,children:o("account.tools.title","Tools settings")}),s.jsx("p",{className:et.cardSubtitle,children:o("account.tools.subtitle","Configure how tools behave for your account.")}),M&&s.jsx("p",{className:et.helperText,children:o("account.tools.loading","Loading tools settings...")}),V&&s.jsx("p",{className:et.feedbackError,children:V}),R&&!M&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:et.settingsForm,children:[s.jsxs("div",{className:et.formRow,children:[s.jsx("label",{className:et.nameLabel,htmlFor:"tools-default-set",children:o("account.tools.defaultSet.label","Default set ID")}),s.jsx("input",{id:"tools-default-set",type:"text",className:et.nameInput,value:(fe=R.defaultSetId)!=null?fe:"",onChange:me=>we("defaultSetId",me.target.value),placeholder:o("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),s.jsxs("label",{className:et.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!R.showToolsIntro,onChange:me=>we("showToolsIntro",me.target.checked)}),s.jsx("span",{children:o("account.tools.showIntro.label","Show tools intro")})]}),s.jsxs("label",{className:et.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!R.enableExperimentalTools,onChange:me=>we("enableExperimentalTools",me.target.checked)}),s.jsx("span",{children:o("account.tools.experimental.label","Enable experimental tools")})]})]}),s.jsxs("div",{className:et.settingsFooter,children:[s.jsxs("div",{className:et.inlineStatus,children:[K?s.jsx("span",{className:et.feedbackSuccess,children:o("account.tools.save.success","Settings saved.")}):De?null:s.jsx("span",{className:et.helperText,children:o("account.tools.save.noChanges","No changes to save.")}),F&&s.jsx("span",{className:et.helperText,children:o("account.tools.save.saving","Saving...")})]}),s.jsx("button",{type:"button",className:et.primaryButton,disabled:M||F||!De||!R,onClick:de,children:o("account.tools.save.cta","Save settings")})]})]})]});case"connected-characters":return s.jsx(FTe,{user:e,refreshSession:r,openHelp:se});default:return null}},oe=()=>Y?re():te?s.jsxs(s.Fragment,{children:[Ae(),Xe()]}):be();return s.jsx(as,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:s.jsxs("div",{className:et.page,children:[Te(),oe()]})})};function GTe({user:t,refreshSession:e}){var R;const[n,r]=P.useState(()=>{var j;return(j=t==null?void 0:t.displayName)!=null?j:""}),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,h]=P.useState(!1),m=(t==null?void 0:t.avatarUrl)||VTe,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",x=(R=t==null?void 0:t.displayName)!=null?R:"",b=n.trim(),w=b.length===0||b.length>=EI&&b.length<=AI,k=!!t&&b.length>0&&b!==x,A=!!(Hf&&w&&k&&!i),L=b.length>0&&!w?`Name must be between ${EI} and ${AI} characters.`:null;P.useEffect(()=>{var j;r((j=t==null?void 0:t.displayName)!=null?j:""),h(!1),c(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const I=P.useMemo(()=>{var j;return t?[{label:"SFDataHub ID",value:t.id},(j=t.roles)!=null&&j.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:PI(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:PI(t.lastLoginAt)}:null].filter(S=>!!(S!=null&&S.value)):[]},[t]),N=async()=>{var j,S;if(!A||!Hf){Hf||c("Auth service is not configured.");return}try{a(!0),c(null),h(!1);const C=await fetch(Hf,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:b})});if(!C.ok){const M=await C.json().catch(()=>null);throw new Error((j=M==null?void 0:M.error)!=null?j:"Failed to update name.")}await e(),h(!0),r(b)}catch(C){const M=(S=C==null?void 0:C.message)!=null?S:"Failed to update name.";c(M)}finally{a(!1)}},v=j=>{j.key==="Enter"&&(j.preventDefault(),A&&N())},_=()=>{A&&N()};return t?s.jsxs("section",{className:et.card,children:[s.jsxs("div",{className:et.identityHeader,children:[s.jsx("img",{src:m,alt:"",className:et.identityAvatar}),s.jsxs("div",{children:[s.jsx("p",{className:et.identityName,children:t.displayName||"Unbenannter Nutzer"}),s.jsxs("p",{className:et.identityProvider,children:[g," sign-in"]})]}),s.jsx("span",{className:et.statusBadge,children:"Verified"})]}),s.jsxs("div",{className:et.identityForm,children:[s.jsxs("div",{className:et.nameInputWrap,children:[s.jsx("label",{className:et.nameLabel,children:"Display name"}),s.jsx("input",{type:"text",className:et.nameInput,value:n,onChange:j=>r(j.target.value),onKeyDown:v,onBlur:_,placeholder:"Enter your display name"})]}),s.jsx("button",{type:"button",className:et.nameSaveButton,disabled:!A,onClick:N,children:i?"Saving...":"Save"})]}),L&&s.jsx("p",{className:et.feedbackError,children:L}),o&&s.jsx("p",{className:et.feedbackError,children:o}),u&&s.jsx("p",{className:et.feedbackSuccess,children:"Name updated."}),I.length>0&&s.jsx("div",{className:et.metaGrid,children:I.map(j=>s.jsxs("div",{className:et.metaItem,children:[s.jsx("span",{className:et.metaLabel,children:j.label}),s.jsx("span",{className:et.metaValue,children:j.value})]},j.label))})]}):null}const Mt={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function HTe(){const{t}=Os();return s.jsx("div",{style:Mt.wrap,children:s.jsxs("div",{style:Mt.grid,children:[s.jsxs("aside",{style:Mt.tile,children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),s.jsx("p",{style:Mt.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),s.jsxs("nav",{children:[s.jsx("div",{style:Mt.groupLabel,children:"Allgemein"}),s.jsx(Bs,{to:"list-views",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"List-View Switcher"}),s.jsx(Bs,{to:"rescan-widget",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Rescan Widget (auto)"}),s.jsx(Bs,{to:"upload-sim",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Upload Simulator"}),s.jsx(Bs,{to:"hud/game-buttons",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"HUD  Game Buttons"}),s.jsx(Bs,{to:"theme-maker",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Theme / Template Maker"}),s.jsx(Bs,{to:"theme-maker-pro",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Theme / Template Maker  Pro"}),s.jsx(Bs,{to:"gamified",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified",{defaultValue:"Gamified"})}),s.jsx(Bs,{to:"gamified-2",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified2",{defaultValue:"Gamified 2"})}),s.jsx(Bs,{to:"gamified-3",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified3",{defaultValue:"Gamified 3"})}),s.jsx(Bs,{to:"gamified-4",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified4",{defaultValue:"Gamified 4"})}),s.jsx(Bs,{to:"gamified-5",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified5",{defaultValue:"Gamified 5"})}),s.jsx(Bs,{to:"gamified-6",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified6",{defaultValue:"Gamified 6"})}),s.jsx(Bs,{to:"gamified-7",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified7",{defaultValue:"Gamified 7"})}),s.jsx(Bs,{to:"gamified-8",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:t("playground.tabs.gamified8",{defaultValue:"Gamified 8"})}),s.jsx("div",{style:Mt.groupLabel,children:"Templates"}),s.jsx(Bs,{to:"templates/content-shell",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"ContentShell Template"}),s.jsx(Bs,{to:"templates/blank",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Leere Vorlage"}),s.jsx(Bs,{to:"templates/blank-alt",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Leere Vorlage (Neu)"}),s.jsx(Bs,{to:"templates/blank-layout-2",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Leere Vorlage  Layout 2"}),s.jsx(Bs,{to:"templates/blank-layout-3",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Leere Vorlage  Layout 3"}),s.jsx(Bs,{to:"templates/blank-layout-4",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"Leere Vorlage  Layout 4"}),s.jsx("div",{style:Mt.groupLabel,children:"Guide Hub Demos"}),s.jsx(Bs,{to:"am-rune-bonuses-demos",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),s.jsx("div",{style:Mt.groupLabel,children:"Graphics / Portraits"}),s.jsx(Bs,{to:"portrait-maker",style:({isActive:e})=>({...Mt.link,...e?Mt.active:{}}),children:"PortraitMaker Demo"})]})]}),s.jsx("section",{style:Mt.tile,children:s.jsx(K5,{})})]})})}const WTe="_page_1kokx_1",KTe="_topBar_1kokx_17",qTe="_tabs_1kokx_31",QTe="_tab_1kokx_31",YTe="_tabActive_1kokx_63",XTe="_searchWrap_1kokx_73",JTe="_input_1kokx_85",ZTe="_stickyIcons_1kokx_105",e3e="_iconBtn_1kokx_129",t3e="_tableWrap_1kokx_161",s3e="_table_1kokx_161",n3e="_th_1kokx_181",r3e="_td_1kokx_181",i3e="_row_1kokx_201",a3e="_chips_1kokx_219",o3e="_chip_1kokx_219",l3e="_badges_1kokx_249",c3e="_badge_1kokx_249",d3e="_badgeMax_1kokx_275",u3e="_badgeAchiev_1kokx_277",h3e="_badgeX2_1kokx_279",m3e="_badgeX12_1kokx_281",p3e="_badgeX60_1kokx_283",g3e="_section_1kokx_289",f3e="_sectionHeader_1kokx_297",v3e="_cardList_1kokx_315",x3e="_card_1kokx_315",y3e="_cardMax_1kokx_353",b3e="_iconXL_1kokx_355",_3e="_split_1kokx_369",w3e="_left_1kokx_379",j3e="_leftBtn_1kokx_399",S3e="_leftBtnActive_1kokx_411",N3e="_detail_1kokx_413",k3e="_grid_1kokx_433",C3e="_tile_1kokx_443",T3e="_drawer_1kokx_457",I3e="_timeline_1kokx_487",E3e="_node_1kokx_493",A3e="_dot_1kokx_501",Ht={page:WTe,topBar:KTe,tabs:qTe,tab:QTe,tabActive:YTe,searchWrap:XTe,input:JTe,stickyIcons:ZTe,iconBtn:e3e,tableWrap:t3e,table:s3e,th:n3e,td:r3e,row:i3e,chips:a3e,chip:o3e,badges:l3e,badge:c3e,badgeMax:d3e,badgeAchiev:u3e,badgeX2:h3e,badgeX12:m3e,badgeX60:p3e,section:g3e,sectionHeader:f3e,cardList:v3e,card:x3e,cardMax:y3e,iconXL:b3e,split:_3e,left:w3e,leftBtn:j3e,leftBtnActive:S3e,detail:N3e,grid:k3e,tile:C3e,drawer:T3e,timeline:I3e,node:E3e,dot:A3e},RI=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function ga(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const n=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(n)+r}function P3e(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function R3e(t){var n,r;const e=(r=(n=t.note)==null?void 0:n.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function fx({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return s.jsx("div",{className:Ht.iconBtn,title:t||"Rune",children:e})}function u2({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return s.jsx("div",{className:Ht.iconXL,title:t||"Rune",children:e})}function L3e(t){const e=new Map;for(const n of t){const r=n.tier&&n.tier.trim()!==""?n.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(n)}return Array.from(e.entries())}function Qp({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),s.jsx("div",{className:Ht.chips,children:e.map((n,r)=>s.jsx("span",{className:Ht.chip,children:n},r))})}function Yp({r:t,isMax:e}){const n=[];e&&n.push({label:"MAX",cls:Ht.badgeMax}),P3e(t)&&n.push({label:"Achievement",cls:Ht.badgeAchiev});const r=R3e(t);return r==="x2"&&n.push({label:"x2",cls:Ht.badgeX2}),r==="x12"&&n.push({label:"x12",cls:Ht.badgeX12}),r==="x60"&&n.push({label:"x60",cls:Ht.badgeX60}),n.length===0?null:s.jsx("div",{className:Ht.badges,children:n.map((i,a)=>{var o;return s.jsx("span",{className:`${Ht.badge} ${(o=i.cls)!=null?o:""}`,children:i.label},a)})})}function D3e(t){const e=t.trim().toLowerCase();return e?RI.filter(n=>{var r;return`${n.tier} ${n.amount} ${(r=n.note)!=null?r:""}`.toLowerCase().includes(e)}):RI}function M3e({data:t}){const e=Math.max(...t.map(i=>ga(i.amount))),n=P.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ht.stickyIcons,children:n.map((i,a)=>s.jsx("div",{onClick:()=>r(i),children:s.jsx(fx,{label:i||"(no tier)"})},a))}),s.jsx("div",{className:Ht.tableWrap,children:s.jsxs("table",{className:Ht.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:Ht.th,style:{width:42}}),s.jsx("th",{className:Ht.th,style:{width:120},children:"Amount"}),s.jsx("th",{className:Ht.th,children:"Bonuses"}),s.jsx("th",{className:Ht.th,style:{width:220},children:"Tags"})]})}),s.jsx("tbody",{children:t.map((i,a)=>{const o=Math.abs(ga(i.amount)-e)<1e-6;return s.jsxs("tr",{className:Ht.row,"data-tier":i.tier||"(no tier)",children:[s.jsx("td",{className:Ht.td,children:s.jsx(fx,{label:i.tier||""})}),s.jsx("td",{className:Ht.td,children:i.amount}),s.jsx("td",{className:Ht.td,children:s.jsx(Qp,{r:i})}),s.jsx("td",{className:Ht.td,children:s.jsx(Yp,{r:i,isMax:o})})]},a)})})]})})]})}function F3e({data:t}){const e=L3e(t),n=Math.max(...t.map(r=>ga(r.amount)));return s.jsx(s.Fragment,{children:e.map(([r,i])=>s.jsxs("section",{className:Ht.section,children:[s.jsx("div",{className:Ht.sectionHeader,children:r}),s.jsx("div",{className:Ht.cardList,children:i.map((a,o)=>{const c=Math.abs(ga(a.amount)-n)<1e-6;return s.jsxs("div",{className:`${Ht.card} ${c?Ht.cardMax:""}`,children:[s.jsx(u2,{label:r}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("strong",{children:a.amount}),s.jsx(Yp,{r:a,isMax:c})]}),s.jsx(Qp,{r:a})]}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},o)})})]},r))})}function B3e({data:t}){var o;const e=Array.from(new Set(t.map(c=>c.tier||"(no tier)"))),[n,r]=P.useState((o=e[0])!=null?o:""),i=t.filter(c=>(c.tier||"(no tier)")===n),a=Math.max(...t.map(c=>ga(c.amount)));return s.jsxs("div",{className:Ht.split,children:[s.jsx("div",{className:Ht.left,children:e.map(c=>s.jsxs("button",{className:`${Ht.leftBtn} ${c===n?Ht.leftBtnActive:""}`,onClick:()=>r(c),children:[s.jsx(fx,{label:c}),s.jsx("span",{children:c})]},c))}),s.jsxs("div",{className:Ht.detail,children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(u2,{label:n}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:n}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((c,u)=>{const h=Math.abs(ga(c.amount)-a)<1e-6;return s.jsxs("div",{className:Ht.card,style:{gridTemplateColumns:"1fr auto"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("strong",{children:c.amount}),s.jsx(Yp,{r:c,isMax:h})]}),s.jsx(Qp,{r:c})]}),s.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function $3e({data:t}){const[e,n]=P.useState(null),r=Math.max(...t.map(i=>ga(i.amount)));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ht.grid,children:t.map((i,a)=>s.jsx("div",{className:Ht.tile,onClick:()=>n(i),title:i.tier||"",children:s.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[s.jsx(fx,{label:i.tier||""}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&s.jsxs("div",{className:Ht.drawer,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx(u2,{label:e.tier||""}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:e.amount}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),s.jsx("button",{className:Ht.tab,onClick:()=>n(null),children:"Close"})]}),s.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:s.jsx(Yp,{r:e,isMax:Math.abs(ga(e.amount)-r)<1e-6})}),s.jsx(Qp,{r:e})]})]})}function O3e({data:t}){const e=Math.max(...t.map(r=>ga(r.amount))),n=[...t].sort((r,i)=>ga(r.amount)-ga(i.amount));return s.jsx("div",{className:Ht.timeline,children:n.map((r,i)=>{const a=Math.abs(ga(r.amount)-e)<1e-6;return s.jsxs("div",{className:Ht.node,children:[s.jsx("div",{className:Ht.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("strong",{children:r.amount}),s.jsx(Yp,{r,isMax:a})]}),s.jsx(Qp,{r})]}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const V3e=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function U3e(){const[t,e]=P.useState("A: Compact Table"),[n,r]=P.useState(""),i=D3e(n);return s.jsxs("div",{className:Ht.page,children:[s.jsxs("div",{className:Ht.topBar,children:[s.jsx("div",{className:Ht.tabs,children:V3e.map(a=>s.jsx("button",{onClick:()=>e(a),className:`${Ht.tab} ${t===a?Ht.tabActive:""}`,children:a},a))}),s.jsx("div",{className:Ht.searchWrap,children:s.jsx("input",{className:Ht.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:n,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&s.jsx(M3e,{data:i}),t==="B: Card Track"&&s.jsx(F3e,{data:i}),t==="C: Two-Pane"&&s.jsx(B3e,{data:i}),t==="D: Icon Grid + Drawer"&&s.jsx($3e,{data:i}),t==="E: Timeline"&&s.jsx(O3e,{data:i})]})}function z3e(){return s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),s.jsx("div",{className:"mt-4 grid gap-3",children:s.jsx(Bs,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const $e={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},G3e=()=>s.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),Zc={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function H3e(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function yh(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",H3e(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function c6(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",n={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},o={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},c={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},m={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},x={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},b={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:n,crystal:r,carbon:i,chrome:a,gold:o,obsidian:c,neon:u,plasma:h,aurora:m,satin:g,matte:x,holo:b}[t.material]}function xc(t){const e={color:$e.title,borderColor:$e.border,...c6(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const Xp=({children:t})=>s.jsx("span",{className:"relative z-10",children:t});function bh({fx:t,clip:e}){return s.jsxs(s.Fragment,{children:[t.shine&&s.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:s.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&s.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&s.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&s.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&s.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((n,r)=>s.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function W3e({fx:t,children:e}){const n=yh(t),r=xc(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),s.jsx(bh,{fx:t,clip:i}),t.withIcon&&s.jsx(eE,{size:16,className:"relative z-10"}),s.jsx(Xp,{children:e})]})}function K3e({fx:t,children:e}){const n=yh(t),r=xc(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),s.jsx(bh,{fx:t,clip:i}),t.withIcon&&s.jsx(tE,{size:16,className:"relative z-10"}),s.jsx(Xp,{children:e})]})}function q3e({fx:t,children:e}){const n=yh(t),r=xc(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),s.jsx(bh,{fx:t,clip:i}),t.withIcon&&s.jsx(Sd,{size:16,className:"relative z-10"}),s.jsx(Xp,{children:e})]})}function Q3e({fx:t,children:e}){const n=yh(t),r=xc(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${$e.tile}, ${$e.active})`}}),s.jsx(bh,{fx:t,clip:i}),t.withIcon&&s.jsx(sE,{size:16,className:"relative z-10"}),s.jsx(Xp,{children:e})]})}function Y3e({fx:t,children:e}){const n=yh(t),r=xc(t);return s.jsxs("button",{disabled:t.disabled,className:`${n} rounded-full overflow-hidden`,style:r,children:[s.jsx(bh,{fx:t}),t.withIcon&&s.jsx(Cx,{size:16,className:"relative z-10"}),s.jsx(Xp,{children:e})]})}function X3e({fx:t,tabs:e}){const[n,r]=P.useState(0);return s.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:e.map((i,a)=>s.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===n?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===n?$e.active:"transparent",border:a===n&&t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[t.withIcon&&a===n&&s.jsx(Cx,{size:14,className:"inline mr-1"}),i]},a))})}function J3e({fx:t}){const e=yh(t),n=xc(t);return s.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:n,"aria-label":"Icon action",children:s.jsx(iE,{})})}const $_={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function Z3e({fx:t,setFx:e}){const n=(c,u)=>e(h=>({...h,[c]:u})),r=c=>e(u=>({...u,[c]:!u[c]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],o=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return s.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${$e.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Presets"}),Object.keys($_).map(c=>s.jsx("button",{onClick:()=>e(u=>$_[c](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:$e.btn,borderColor:$e.border,color:$e.title},children:c},c))]}),s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${$e.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Material"}),i.map(c=>s.jsx("button",{onClick:()=>n("material",c),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===c?"":"opacity-70"}`,style:{backgroundColor:t.material===c?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:c},c)),s.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:$e.title},children:"Size"}),["sm","md","lg"].map(c=>s.jsx("button",{onClick:()=>n("size",c),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===c?"":"opacity-70"}`,style:{backgroundColor:t.size===c?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:c.toUpperCase()},c)),s.jsx("button",{onClick:()=>e(c=>({...c,withIcon:!c.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:"Icon"}),s.jsx("button",{onClick:()=>e(c=>({...c,disabled:!c.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:"Disabled"})]}),s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${$e.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Core FX"}),a.map(([c,u])=>s.jsx("button",{onClick:()=>r(c),className:`px-2.5 py-1 rounded-md border text-xs ${t[c]?"":"opacity-70"}`,style:{backgroundColor:t[c]?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:u},c))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:$e.title},children:"Advanced"}),o.map(([c,u])=>s.jsx("button",{onClick:()=>r(c),className:`px-2.5 py-1 rounded-md border text-xs ${t[c]?"":"opacity-70"}`,style:{backgroundColor:t[c]?$e.active:$e.btn,borderColor:$e.border,color:$e.title},children:u},c))]}),s.jsx("button",{onClick:()=>e(Zc),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:$e.btn,borderColor:$e.border,color:$e.title},children:"Reset"})]})}function Zs({fx:t,className:e="",style:n={},children:r,clip:i}){const a=xc(t);return s.jsxs("div",{className:`relative ${e}`,style:{...a,...n},children:[s.jsx(bh,{fx:t,clip:i}),s.jsx("div",{className:"relative z-10",children:r})]})}function li({fx:t,className:e="",children:n}){return s.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:n})}function eIe({fx:t}){const[e,n]=P.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Toggle Chips"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return s.jsx(Zs,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(o=>a?o.filter(c=>c!==i):[...o,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function tIe({fx:t}){return s.jsxs(li,{fx:t,className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",style:{color:$e.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>s.jsx(Zs,{fx:t,className:"rounded-xl border p-2",style:{borderColor:$e.border},children:s.jsxs("button",{className:"relative",children:[s.jsx(iE,{size:16}),e===3&&s.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function sIe({fx:t}){return s.jsxs(Zs,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Breadcrumb HUD"}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>s.jsx(Zs,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:$e.border},children:e},e))})]})}function nIe({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Stat Tiles"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(n=>s.jsxs(Zs,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:$e.border},children:[s.jsx("div",{className:"text-[10px] opacity-80",children:n.k}),s.jsx("div",{className:"text-sm",children:n.v}),s.jsx("div",{className:"text-[11px] opacity-80",children:n.d})]},n.k))})]})}function rIe({fx:t}){const[e,n]=P.useState(.66);return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Meter / Energy Bar"}),s.jsx(Zs,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:$e.border},children:s.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),s.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsxs("button",{onClick:()=>n(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function iIe({fx:t}){return s.jsxs(li,{fx:t,className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Badge / Medal"}),s.jsxs(Zs,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:$e.border},children:[s.jsx(Sd,{size:16}),s.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function aIe({fx:t}){const[e,n]=P.useState(!1);return s.jsxs(li,{fx:t,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Toast / Notification"}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&s.jsxs(Zs,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:$e.border},children:[s.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),s.jsx("button",{onClick:()=>n(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function oIe({fx:t}){const[e,n]=P.useState(!0);return s.jsxs(li,{fx:t,className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Toggle Switch"}),s.jsxs(Zs,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:$e.border},children:[s.jsx("button",{onClick:()=>n(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),s.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function lIe({fx:t}){const[e,n]=P.useState(!1),r=["Overview","Stats","Activity","Hydra"];return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Dropdown HUD"}),s.jsx(Zs,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&s.jsx(Zs,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:$e.border},children:r.map(i=>s.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function cIe({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Radial Menu (Preview)"}),s.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[s.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"}}),e.map((n,r)=>{const i=r/e.length*Math.PI*2,a=56,o=56+Math.cos(i)*a,c=56+Math.sin(i)*a;return s.jsx(Zs,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:o,top:c,borderColor:$e.border},children:n},n)}),s.jsx(Zs,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:$e.border},children:"Menu"})]})]})}function dIe({fx:t}){const e=[1,2,3,4,5],[n,r]=P.useState(2);return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Pagination HUD"}),s.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>s.jsx(Zs,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===n?"":"opacity-80"}`,style:{borderColor:$e.border},children:s.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function uIe({fx:t}){const[e,n]=P.useState(!1);return s.jsxs(li,{fx:t,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:$e.title},children:"Modal HUD"}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&s.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:s.jsxs(Zs,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:$e.border},children:[s.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),s.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>n(!1),children:"Cancel"})}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function hIe({fx:t}){const[e,n]=P.useState("");return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Search HUD"}),s.jsx(Zs,{fx:t,className:"rounded-lg border p-2",style:{borderColor:$e.border},children:s.jsx("input",{value:e,onChange:r=>n(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function mIe({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[n,r]=P.useState("Bravo");return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"List Selectable"}),s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(Zs,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${n===i?"":"opacity-80"}`,style:{borderColor:$e.border},children:s.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function pIe({fx:t}){const e=["Init","Scan","Verify","Done"],[n,r]=P.useState(1);return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Steps"}),s.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>s.jsxs(q.Fragment,{children:[s.jsx(Zs,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=n?"":"opacity-70"}`,style:{borderColor:$e.border},children:a+1}),a<e.length-1&&s.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,n-1)),children:"Back"})}),s.jsx(Zs,{fx:t,className:"rounded-md border",style:{borderColor:$e.border},children:s.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,n+1)),children:"Next"})})]})]})}function gIe({fx:t}){const e=["","","","","",""];return s.jsxs(li,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:$e.title},children:"Dock Bar"}),s.jsx("div",{className:"flex items-center gap-2",children:e.map((n,r)=>s.jsx(Zs,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:$e.border},children:n},r))})]})}function fIe(){const[t,e]=P.useState(Zc);return s.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:$e.bg,color:$e.txt},children:[s.jsx(G3e,{}),s.jsxs("header",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(O7,{}),s.jsx("h1",{className:"text-xl font-bold",style:{color:$e.title},children:"Game Buttons Playground"}),s.jsx("span",{className:"text-xs",style:{color:$e.txt2},children:"(Materials + FX extended + Presets)"})]})}),s.jsx(Z3e,{fx:t,setFx:e})]}),s.jsxs("section",{className:"grid gap-4",children:[s.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold mb-3",style:{color:$e.title},children:"Shapes"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(W3e,{fx:t,children:[s.jsx(eE,{size:16})," Diamond"]}),s.jsxs(K3e,{fx:t,children:[s.jsx(tE,{size:16})," Hex"]}),s.jsxs(q3e,{fx:t,children:[s.jsx(Sd,{size:16})," Octagon/Shield"]}),s.jsxs(Q3e,{fx:t,children:[s.jsx(sE,{size:16})," Shard"]}),s.jsxs(Y3e,{fx:t,children:[s.jsx(Cx,{size:16})," Pill/Chip"]}),s.jsx(J3e,{fx:t})]})]}),s.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold",style:{color:$e.title},children:"Tabs"}),s.jsx(X3e,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),s.jsx("section",{className:"grid gap-4",children:s.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:$e.tile,border:t.baseBorder?`1px solid ${$e.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold mb-3",style:{color:$e.title},children:"More HUD Patterns"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[s.jsx(eIe,{fx:t}),s.jsx(tIe,{fx:t}),s.jsx(sIe,{fx:t}),s.jsx(nIe,{fx:t}),s.jsx(rIe,{fx:t}),s.jsx(iIe,{fx:t}),s.jsx(aIe,{fx:t}),s.jsx(oIe,{fx:t}),s.jsx(lIe,{fx:t}),s.jsx(cIe,{fx:t}),s.jsx(dIe,{fx:t}),s.jsx(uIe,{fx:t}),s.jsx(hIe,{fx:t}),s.jsx(mIe,{fx:t}),s.jsx(pIe,{fx:t}),s.jsx(gIe,{fx:t})]})]})}),s.jsx(vIe,{}),s.jsx("footer",{className:"text-center text-xs",style:{color:$e.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function vIe(){return P.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(Zc.material),"Material type present");const e=xc(Zc);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=c6({...Zc,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof Zc[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries($_).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...Zc});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const Km={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},LI={Arcade:{...Km,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...Km,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},yu={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},d6={display:"grid",gap:8,alignItems:"center"};function Lo({label:t,value:e,onChange:n}){return s.jsxs("label",{style:{...d6,gridTemplateColumns:"120px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value)})]})}function S1({label:t,value:e,min:n,max:r,onChange:i}){return s.jsxs("label",{style:{...d6,gridTemplateColumns:"120px 1fr 70px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"range",min:n,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),s.jsx("input",{type:"number",min:n,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function DI(){const[t,e]=q.useState(Km),n=q.useRef(null),r=u=>{const h=n.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};q.useEffect(()=>{r(t)},[t]);const i=u=>e(LI[u]),a=()=>e(Km),o=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},c=async u=>{const h=await u.text();e({...Km,...JSON.parse(h)})};return s.jsxs("div",{ref:n,style:{color:"var(--text, #FFFFFF)"},children:[s.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(LI).map(u=>s.jsx("button",{style:yu,onClick:()=>i(u),children:u},u)),s.jsx("button",{style:yu,onClick:a,children:"Default"}),s.jsx("button",{style:yu,onClick:o,children:"Export JSON"}),s.jsxs("label",{style:{...yu,display:"inline-block"},children:["Import JSON",s.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&c(u.target.files[0]),style:{display:"none"}})]})]}),s.jsx(Lo,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),s.jsx(Lo,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),s.jsx(Lo,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),s.jsx(Lo,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),s.jsx(Lo,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),s.jsx(Lo,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),s.jsx(Lo,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),s.jsx(Lo,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),s.jsx(Lo,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),s.jsx(S1,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),s.jsx(S1,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),s.jsx(S1,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),s.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),s.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),s.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[s.jsx("button",{style:{...yu,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),s.jsx("button",{style:yu,children:"Secondary"})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[s.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),s.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const O_={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},MI={"SFDataHub (Default)":{...O_},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},gy={display:"grid",gap:8,alignItems:"center"},qc={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},Qc={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function ua({label:t,value:e,onChange:n}){return s.jsxs("label",{style:{...gy,gridTemplateColumns:"140px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value)})]})}function Do({label:t,value:e,min:n,max:r,step:i=1,onChange:a,suffix:o}){return s.jsxs("label",{style:{...gy,gridTemplateColumns:"140px 1fr 70px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"range",min:n,max:r,step:i,value:e,onChange:c=>a(parseFloat(c.target.value))}),s.jsx("input",{type:"number",min:n,max:r,step:i,value:e,onChange:c=>a(parseFloat(c.target.value||"0"))})]})}function xIe({label:t,checked:e,onChange:n}){return s.jsxs("label",{style:{...gy,gridTemplateColumns:"1fr 46px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"checkbox",checked:e,onChange:r=>n(r.target.checked)})]})}function FI(){const[t,e]=q.useState(O_),n=q.useRef(null),r=h=>{const m=n.current;m&&(m.style.setProperty("--page",h.page),m.style.setProperty("--tile",h.tile),m.style.setProperty("--tile-hover",h.tileHover),m.style.setProperty("--nav",h.nav),m.style.setProperty("--active",h.active),m.style.setProperty("--text",h.text),m.style.setProperty("--text-soft",h.textSoft),m.style.setProperty("--title",h.title),m.style.setProperty("--line",h.line),m.style.setProperty("--accent",h.accent),m.style.setProperty("--success",h.success),m.style.setProperty("--warning",h.warning),m.style.setProperty("--danger",h.danger),m.style.setProperty("--radius",`${h.radius}px`),m.style.setProperty("--border",`${h.border}px`),m.style.setProperty("--gap",`${h.gap}px`),m.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),m.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),m.style.setProperty("--noise",`${h.noise}%`),m.style.setProperty("--font",h.fontFamily),m.style.setProperty("--font-size",`${h.fontSize}px`),m.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),m.style.setProperty("--glow",`${h.glow}`),m.style.setProperty("--scanlines",`${h.scanlines}`))};q.useEffect(()=>{r(t)},[t]);const i=(h,m)=>e(g=>({...g,[h]:m})),a=h=>e(m=>({...m,...MI[h]})),o=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(h),m.download="sfdatahub-theme-pro.json",m.click()},c=async h=>{try{const m=await h.text(),g=JSON.parse(m);e({...t,...g})}catch(m){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return s.jsxs("div",{ref:n,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[s.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(MI).map(h=>s.jsx("button",{style:qc,onClick:()=>a(h),children:h},h)),s.jsx("button",{style:qc,onClick:()=>e(O_),children:"Reset"}),s.jsx("button",{style:qc,onClick:o,children:"Export"}),s.jsxs("label",{style:{...qc,display:"inline-block"},children:["Import",s.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&c(h.target.files[0])})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(ua,{label:"Page",value:t.page,onChange:h=>i("page",h)}),s.jsx(ua,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),s.jsx(ua,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),s.jsx(ua,{label:"Active",value:t.active,onChange:h=>i("active",h)}),s.jsx(ua,{label:"Text",value:t.text,onChange:h=>i("text",h)}),s.jsx(ua,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),s.jsx(ua,{label:"Title",value:t.title,onChange:h=>i("title",h)}),s.jsx(ua,{label:"Line",value:t.line,onChange:h=>i("line",h)}),s.jsx(ua,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[s.jsx(ua,{label:"Success",value:t.success,onChange:h=>i("success",h)}),s.jsx(ua,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),s.jsx(ua,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(Do,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),s.jsx(Do,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),s.jsx(Do,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),s.jsx(Do,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),s.jsx(Do,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),s.jsx(Do,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsxs("label",{style:{...gy,gridTemplateColumns:"140px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),s.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),s.jsx(Do,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),s.jsx(xIe,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(Do,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),s.jsx(Do,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),s.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[s.jsxs("span",{style:Qc,children:[s.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),s.jsx("span",{style:{...Qc,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),s.jsx("span",{style:{...Qc,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),s.jsx("span",{style:{...Qc,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),s.jsxs("span",{style:Qc,children:["Radius: ",t.radius]}),s.jsxs("span",{style:Qc,children:["Shadow: ",t.shadow]}),s.jsxs("span",{style:Qc,children:["Noise: ",t.noise,"%"]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),s.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",s.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),s.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,m)=>s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[s.jsx("span",{children:h.label}),s.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),s.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:s.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},m))}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[s.jsx("button",{style:{...qc,background:"var(--tile-hover)"},children:"Open Profile"}),s.jsx("button",{style:{...qc,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,m)=>s.jsx("button",{style:{...qc,background:m===0?"var(--tile-hover)":"transparent",borderColor:m===0?"var(--active)":"var(--line)",boxShadow:m===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,m)=>s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),s.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),s.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},m))}),s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[s.jsx("div",{style:{padding:10},children:"Attribute"}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,m)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:m%2?"rgba(255,255,255,.025)":"transparent"},children:[s.jsx("div",{style:{padding:10},children:h[0]}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),s.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},m))]})]})]}),s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const ss={wrap:{color:"#F5F9FF"},intro:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:14},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:14},card:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)",minHeight:160,display:"flex",flexDirection:"column",gap:10},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},sub:{color:"#B0C4D9",fontSize:13,lineHeight:1.4},badgeRow:{display:"flex",gap:6,flexWrap:"wrap"}},Da=(t,e="#1E3A5C")=>s.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",fontSize:11,borderRadius:999,background:e,border:"1px solid rgba(255,255,255,.12)",color:"#D9E7FF",textTransform:"uppercase",letterSpacing:.4},children:t}),Bi=()=>s.jsxs("div",{style:ss.badgeRow,children:[Da("mock"),Da("concept","#234569"),Da("ui","#1F4D67")]}),BI={common:"#1f3b5d",rare:"#234f7a",epic:"#3c2f6d",legendary:"#6b3b0f"};function yIe(){const t=[{title:"Data Whisperer",rarity:"epic",status:"Unlocked"},{title:"Perfect Sync",rarity:"rare",status:"Unlocked"},{title:"Zero Downtime",rarity:"legendary",status:"Locked"},{title:"Scout Elite",rarity:"common",status:"Unlocked"},{title:"API Ranger",rarity:"rare",status:"Locked"},{title:"Schema Sleuth",rarity:"epic",status:"Unlocked"}],e=[{title:"Scan 10 servers",status:"Done",reward:"+250 XP"},{title:"Fix 3 warnings",status:"In progress",reward:"+1 reroll"},{title:"Share a dashboard",status:"Ready",reward:"Title shard"},{title:"Hit uptime streak",status:"Locked",reward:"Glow badge"}],n=[{tier:"Mythic",delta:"+2",trend:"up"},{tier:"Diamond",delta:"-1",trend:"down"},{tier:"Platinum",delta:"+4",trend:"up"},{tier:"Gold",delta:"0",trend:"flat"}],r=[{label:"Level 12",done:!0},{label:"Sync Master",done:!0},{label:"API Adept",done:!1},{label:"Data Virtuoso",done:!1}],i=[{level:1,reward:"Theme Skin",unlocked:!0},{level:4,reward:"Badge Token",unlocked:!0},{level:7,reward:"Loot Cache",unlocked:!1},{level:10,reward:"Mythic Frame",unlocked:!1}],a=[{label:"Common",value:32,color:"#1e3b5d"},{label:"Rare",value:28,color:"#1f5d77"},{label:"Epic",value:22,color:"#3c2f6d"},{label:"Legendary",value:18,color:"#6b3b0f"}],o=[{name:"Link Speed",state:"active"},{name:"Alert Vision",state:"active"},{name:"Schema Insight",state:"locked"},{name:"API Armor",state:"active"},{name:"Sync Surge",state:"active"},{name:"Data Forge",state:"locked"},{name:"Audit Ghost",state:"locked"},{name:"Chronicle",state:"locked"}];return s.jsxs("div",{style:ss.wrap,children:[s.jsxs("div",{style:ss.intro,children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:"#F5F9FF"},children:"Gamified Visuals"}),s.jsx("p",{style:ss.sub,children:"Static showcase of badges, streaks, ladders, and tracks in SFDataHub styling."})]}),Bi()]}),s.jsxs("div",{style:ss.grid,children:[s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Achievement Badges"}),s.jsx("div",{style:ss.sub,children:"Unlocked vs. locked set with rarity color tags."})]}),Bi()]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:10},children:t.map(c=>s.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,.15)",borderRadius:12,padding:10,background:"rgba(255,255,255,.02)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:6},children:c.title}),s.jsxs("div",{style:ss.badgeRow,children:[Da(c.status,c.status==="Unlocked"?"#1f4f62":"#422b2b"),Da(c.rarity,BI[c.rarity])]})]},c.title))})]}),s.jsxs("div",{style:{...ss.card,background:"linear-gradient(145deg, #143257, #0f243d)"},children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Scan Streak"}),s.jsx("div",{style:ss.sub,children:"Keep the flame alive with consistent daily scans."})]}),Bi()]}),s.jsxs("div",{style:{background:"rgba(0,0,0,.25)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Current streak"}),s.jsx("div",{style:{fontSize:32,fontWeight:800},children:"12 days "})]}),s.jsxs("div",{style:{textAlign:"right"},children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Best streak"}),s.jsx("div",{style:{fontWeight:700},children:"21 days"}),s.jsx("div",{style:{marginTop:6,background:"#0e1e33",borderRadius:999,padding:"4px 10px"},children:"+3d buffer"})]})]}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Next reward: Ember Frame at 14 days."})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Quest Log"}),s.jsx("div",{style:ss.sub,children:"Short mission stack with rewards."})]}),Bi()]}),s.jsx("div",{style:{display:"grid",gap:8},children:e.map(c=>s.jsxs("div",{style:{borderRadius:10,padding:10,background:"rgba(255,255,255,.03)",border:"1px solid rgba(255,255,255,.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:c.title}),s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:c.reward})]}),Da(c.status,c.status==="Done"?"#1f4f62":c.status==="In progress"?"#4f3b1f":"#3a2f4f")]},c.title))})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Trophy Podium"}),s.jsx("div",{style:ss.sub,children:"Top 3 snapshot with podium heights."})]}),Bi()]}),s.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:10,justifyContent:"space-around",paddingTop:8},children:[{rank:2,height:60},{rank:1,height:90},{rank:3,height:45}].map(c=>s.jsxs("div",{style:{textAlign:"center"},children:[s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["#",c.rank]}),s.jsxs("div",{style:{width:70,height:c.height,background:c.rank===1?"linear-gradient(180deg,#f5d26b,#b87b1a)":"linear-gradient(180deg,#345a8a,#203752)",borderRadius:10,border:"1px solid rgba(255,255,255,.2)",display:"grid",placeItems:"center",fontWeight:800,color:c.rank===1?"#1a1a1a":"#F5F9FF"},children:["S",c.rank]}),s.jsxs("div",{style:{marginTop:4,fontSize:12},children:["Squad ",c.rank]})]},c.rank))})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Rank Ladder"}),s.jsx("div",{style:ss.sub,children:"League rungs with movement delta."})]}),Bi()]}),s.jsx("div",{style:{display:"grid",gap:8},children:n.map(c=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,.08)",background:"rgba(255,255,255,.02)"},children:[s.jsx("div",{style:{fontWeight:700},children:c.tier}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:c.delta}),s.jsx("span",{style:{color:c.trend==="up"?"#5AD8A6":c.trend==="down"?"#E06C75":"#B0C4D9"},children:c.trend==="up"?"":c.trend==="down"?"":""})]})]},c.tier))})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Milestone Timeline"}),s.jsx("div",{style:ss.sub,children:"Linear track with unlocked markers."})]}),Bi()]}),s.jsxs("div",{style:{position:"relative",padding:"10px 4px 0"},children:[s.jsx("div",{style:{position:"absolute",top:22,left:0,right:0,height:2,background:"rgba(255,255,255,.12)"}}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r.length}, 1fr)`,gap:6,position:"relative"},children:r.map(c=>s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{width:22,height:22,margin:"0 auto",borderRadius:"50%",background:c.done?"#2d7f5f":"#2f415e",border:"2px solid rgba(255,255,255,.1)",display:"grid",placeItems:"center",fontSize:11,fontWeight:700},children:c.done?"":""}),s.jsx("div",{style:{marginTop:6,fontSize:12},children:c.label})]},c.label))})]})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Collection Ring"}),s.jsx("div",{style:ss.sub,children:"Donut visualization for scrapbook completion."})]}),Bi()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[s.jsx("div",{style:{width:120,height:120,borderRadius:"50%",background:"conic-gradient(#3c7bd9 0% 68%, #1d3051 68% 100%)",display:"grid",placeItems:"center",border:"1px solid rgba(255,255,255,.08)"},children:s.jsx("div",{style:{width:78,height:78,borderRadius:"50%",background:"#0f1e33",display:"grid",placeItems:"center",color:"#F5F9FF",fontWeight:800},children:"68%"})}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:ss.badgeRow,children:[Da("Unlocked 45/66","#1f4f62"),Da("Sets: 6","#2a3f68")]}),s.jsx("div",{style:{marginTop:10,fontSize:12,color:"#B0C4D9"},children:"Next reward at 75%: Chronicle stencil frame."})]})]})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Boss HP  Goal Bar"}),s.jsx("div",{style:ss.sub,children:"Progress toward the next major unlock."})]}),Bi()]}),s.jsxs("div",{style:{background:"#0f1f33",borderRadius:12,padding:10,border:"1px solid rgba(255,255,255,.08)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#B0C4D9"},children:[s.jsx("span",{children:"Phase 2/3"}),s.jsx("span",{children:"82% to go"})]}),s.jsx("div",{style:{height:22,borderRadius:10,overflow:"hidden",marginTop:6,border:"1px solid rgba(255,255,255,.1)"},children:s.jsx("div",{style:{width:"18%",height:"100%",background:"linear-gradient(90deg, #d95f5f, #f2a45d)",boxShadow:"0 0 12px rgba(242,164,93,.4)"}})}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Next shield break at 25% HP."})]})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Skill Tree Mini"}),s.jsx("div",{style:ss.sub,children:"Node states with locked paths."})]}),Bi()]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:8},children:o.map(c=>s.jsxs("div",{style:{background:"rgba(255,255,255,.03)",borderRadius:10,border:`1px solid ${c.state==="active"?"rgba(90,216,166,.4)":"rgba(255,255,255,.08)"}`,padding:10,boxShadow:c.state==="active"?"0 0 12px rgba(90,216,166,.25)":"none"},children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:c.state==="active"?"Unlocked":"Locked"}),s.jsx("div",{style:{fontWeight:700,marginTop:4},children:c.name})]},c.name))}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Path glow = active; darker cells stay locked."})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Season Pass Track"}),s.jsx("div",{style:ss.sub,children:"Horizontal progression with staged rewards."})]}),Bi()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginTop:4},children:[s.jsx("div",{style:{flex:1,height:10,borderRadius:999,background:"#0f1f33",position:"relative",overflow:"hidden"},children:s.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"45%",background:"linear-gradient(90deg,#2a7bbd,#54c9e7)"}})}),Da("45%","#1f4f62")]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:10,overflowX:"auto"},children:i.map(c=>s.jsxs("div",{style:{minWidth:120,background:"rgba(255,255,255,.03)",borderRadius:12,padding:10,border:`1px solid ${c.unlocked?"rgba(84,201,231,.4)":"rgba(255,255,255,.08)"}`},children:[s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Level ",c.level]}),s.jsx("div",{style:{fontWeight:700},children:c.reward}),s.jsx("div",{style:{marginTop:6},children:Da(c.unlocked?"Claimed":"Locked",c.unlocked?"#1f4f62":"#2f2f4f")})]},c.level))})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Title Plates"}),s.jsx("div",{style:ss.sub,children:"Unlockable nameplates with rarity glow."})]}),Bi()]}),s.jsx("div",{style:{display:"grid",gap:10},children:[{name:"Data Pioneer",tone:"linear-gradient(90deg,#2f5b90,#1f3d68)",rarity:"rare"},{name:"Mythic Cartographer",tone:"linear-gradient(90deg,#6b3b0f,#b87b1a)",rarity:"legendary"},{name:"Night Runner",tone:"linear-gradient(90deg,#28354f,#1a2335)",rarity:"common"}].map(c=>s.jsxs("div",{style:{borderRadius:12,padding:12,background:c.tone,border:"1px solid rgba(255,255,255,.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:800},children:c.name}),Da(c.rarity,BI[c.rarity]||"#234569")]},c.name))})]}),s.jsxs("div",{style:ss.card,children:[s.jsxs("div",{style:ss.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Loot / Rarity Mix"}),s.jsx("div",{style:ss.sub,children:"Stacked distribution snapshot."})]}),Bi()]}),s.jsx("div",{style:{height:24,borderRadius:12,overflow:"hidden",display:"flex",border:"1px solid rgba(255,255,255,.08)"},children:a.map(c=>s.jsxs("div",{style:{width:`${c.value}%`,background:c.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:11,color:"#DAE8FF",borderRight:"1px solid rgba(255,255,255,.05)"},children:[c.value,"%"]},c.label))}),s.jsx("div",{style:ss.badgeRow,children:a.map(c=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"2px 8px",borderRadius:999,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",fontSize:12},children:[s.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:c.color,display:"inline-block"}}),c.label]},c.label))})]})]})]})}const $I=[{id:"quests",title:"Quests & Objectives",description:"Logs, chains, rewards, and difficulty chips.",items:[{id:"11",categoryId:"quests",title:"Quest Log (3 steps)",subtitle:"Ordered checklist",tags:["mock"],previewId:"pv_quest_steps"},{id:"12",categoryId:"quests",title:"Daily Objectives Board",subtitle:"Checkbox grid",tags:["ui"],previewId:"pv_daily_checklist"},{id:"13",categoryId:"quests",title:"Weekly Contract Card",subtitle:"Timer + tear edge",tags:["concept"],previewId:"pv_contract_timer"},{id:"14",categoryId:"quests",title:"Bounty Card",subtitle:"Target + reward tag",tags:["mock"],previewId:"pv_bounty_target"},{id:"15",categoryId:"quests",title:"Multi-Objective Chips",subtitle:"3 tagged goals",tags:["ui"],previewId:"pv_objective_chips"},{id:"16",categoryId:"quests",title:"Quest Chain Path",subtitle:"Linked nodes",tags:["mock"],previewId:"pv_quest_chain_nodes"},{id:"17",categoryId:"quests",title:"Reward Preview Panel",subtitle:"XP + coins bundle",tags:["ui"],previewId:"pv_reward_bundle"},{id:"18",categoryId:"quests",title:"Side Quest Mini",subtitle:"Compact lane",tags:["mock"],previewId:"pv_sidequest_compact"},{id:"19",categoryId:"quests",title:"Claim Reward States",subtitle:"Enabled vs locked",tags:["ui"],previewId:"pv_claim_states"},{id:"20",categoryId:"quests",title:"Difficulty Tags",subtitle:"Easy / Hard / Insane",tags:["mock"],previewId:"pv_difficulty_tags"}]},{id:"progress",title:"Progress Bars & Gauges",description:"Boss phases, dual progress, rings, and risk arcs.",items:[{id:"21",categoryId:"progress",title:"Boss HP Goal Bar",subtitle:"Segmented phases",tags:["mock"],previewId:"pv_boss_hp_segmented"},{id:"22",categoryId:"progress",title:"Dual Progress vs Avg",subtitle:"Overlay marker",tags:["ui"],previewId:"pv_dual_progress_marker"},{id:"23",categoryId:"progress",title:"Segmented Track (10)",subtitle:"10 stops rail",tags:["concept"],previewId:"pv_segment_track_10"},{id:"24",categoryId:"progress",title:"Donut Completion",subtitle:"Ring percent",tags:["mock"],previewId:"pv_donut_completion"},{id:"25",categoryId:"progress",title:"Battery Gauge",subtitle:"Energy level",tags:["ui"],previewId:"pv_battery_gauge"},{id:"26",categoryId:"progress",title:"Thermometer Vertical",subtitle:"Heat column",tags:["mock"],previewId:"pv_thermo_vertical"},{id:"27",categoryId:"progress",title:"Level XP Bar + ticks",subtitle:"Micro ticks",tags:["ui"],previewId:"pv_xp_ticks"},{id:"28",categoryId:"progress",title:"Multi-Stat Mini Bars",subtitle:"STR/DEX/INT/CON/LCK",tags:["mock"],previewId:"pv_multibar_stats5"},{id:"29",categoryId:"progress",title:"Risk Meter",subtitle:"Arc pointer",tags:["concept"],previewId:"pv_risk_meter"},{id:"30",categoryId:"progress",title:"Perfect Run Bar",subtitle:"Checklist + bar",tags:["ui"],previewId:"pv_perfect_run"}]},{id:"rankings",title:"Rankings & Leagues",description:"Podiums, ladders, deltas, and history.",items:[{id:"31",categoryId:"rankings",title:"Trophy Podium Top 3",subtitle:"Height podium",tags:["mock"],previewId:"pv_podium_top3"},{id:"32",categoryId:"rankings",title:"Rank Ladder Rungs",subtitle:"Rung climb",tags:["ui"],previewId:"pv_ladder_rungs"},{id:"33",categoryId:"rankings",title:"League Tier Card",subtitle:"Bronze -> Diamond",tags:["concept"],previewId:"pv_league_tiers"},{id:"34",categoryId:"rankings",title:"Rank Delta Chip",subtitle:"Up/down pill",tags:["ui"],previewId:"pv_delta_chip"},{id:"35",categoryId:"rankings",title:"Percentile Gauge",subtitle:"Needle gauge",tags:["mock"],previewId:"pv_percentile_gauge"},{id:"36",categoryId:"rankings",title:"Rival Slot (nearest)",subtitle:"You vs nearest",tags:["concept"],previewId:"pv_rival_slot"},{id:"37",categoryId:"rankings",title:"Promotion Zone Highlight",subtitle:"Green band",tags:["ui"],previewId:"pv_promo_zone"},{id:"38",categoryId:"rankings",title:"Relegation Warning",subtitle:"Red band",tags:["mock"],previewId:"pv_relegation_zone"},{id:"39",categoryId:"rankings",title:"Top 5 Mini List",subtitle:"Ranked list",tags:["ui"],previewId:"pv_top5_list"},{id:"40",categoryId:"rankings",title:"Rank History Step",subtitle:"Step chart",tags:["mock"],previewId:"pv_rank_step_history"}]},{id:"duels",title:"Comparisons & Duels",description:"Splits, overlays, and matchup meters.",items:[{id:"41",categoryId:"duels",title:"Stat Split Compare",subtitle:"Two columns",tags:["mock"],previewId:"pv_split_compare"},{id:"42",categoryId:"duels",title:"You vs Avg Bars",subtitle:"Overlay bars",tags:["ui"],previewId:"pv_you_vs_avg_bars"},{id:"43",categoryId:"duels",title:"Best of 3 Dots",subtitle:"Round tracker",tags:["mock"],previewId:"pv_bestof3_dots"},{id:"44",categoryId:"duels",title:"Duel Outcome Card",subtitle:"Win/Loss plate",tags:["ui"],previewId:"pv_duel_outcome"},{id:"45",categoryId:"duels",title:"Advantage Meter",subtitle:"Arrow to winner",tags:["concept"],previewId:"pv_advantage_meter"},{id:"46",categoryId:"duels",title:"KPI Side-by-side",subtitle:"Four KPI tiles",tags:["mock"],previewId:"pv_kpi_tiles_4"},{id:"47",categoryId:"duels",title:"Delta Breakdown Chips",subtitle:"Pos/neg split",tags:["ui"],previewId:"pv_delta_chips_breakdown"},{id:"48",categoryId:"duels",title:"Mirror Match",subtitle:"Symmetric view",tags:["mock"],previewId:"pv_mirror_neutral"},{id:"49",categoryId:"duels",title:"Radar Mock",subtitle:"Polygon radar",tags:["concept"],previewId:"pv_radar_polygon"},{id:"50",categoryId:"duels",title:"Gap to Next",subtitle:"Distance marker",tags:["ui"],previewId:"pv_gap_to_next"}]},{id:"guild",title:"Guild & Social",description:"Roles, readiness, and alliance visuals.",items:[{id:"61",categoryId:"guild",title:"Guild Role Badges",subtitle:"Role chips",tags:["mock"],previewId:"pv_guild_roles"},{id:"62",categoryId:"guild",title:"Contribution Per Member",subtitle:"Member bars",tags:["ui"],previewId:"pv_contrib_bars"},{id:"63",categoryId:"guild",title:"Member Spotlight",subtitle:"Highlight lane",tags:["concept"],previewId:"pv_spotlight_card"},{id:"64",categoryId:"guild",title:"Guild Power Composite",subtitle:"Gauge blend",tags:["mock"],previewId:"pv_guild_power_meter"},{id:"65",categoryId:"guild",title:"Recruitment Slots",subtitle:"Open vs filled",tags:["ui"],previewId:"pv_slots_open_filled"},{id:"66",categoryId:"guild",title:"War Readiness Panel",subtitle:"Status chips",tags:["mock"],previewId:"pv_war_readiness"},{id:"67",categoryId:"guild",title:"Activity Pulse Spark",subtitle:"Pulse waveform",tags:["concept"],previewId:"pv_activity_pulse"},{id:"68",categoryId:"guild",title:"Alliance Link Card",subtitle:"Linked hubs",tags:["mock"],previewId:"pv_alliance_link"},{id:"69",categoryId:"guild",title:"Pinned Announcement",subtitle:"Pinned note",tags:["ui"],previewId:"pv_pinned_announcement"},{id:"70",categoryId:"guild",title:"Trophy Shelf",subtitle:"Shelf icons",tags:["mock"],previewId:"pv_trophy_shelf"}]}],ds=({label:t})=>s.jsx("span",{className:"g2-pill",children:t}),Xt=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g2-bar tone-${e}`,style:{width:t,height:n}}),OI={pv_quest_steps:()=>s.jsx("div",{className:"g2-preview g2-steps",children:[1,2,3].map(t=>s.jsxs("div",{className:"g2-step-row",children:[s.jsx("span",{className:"g2-step-dot"}),s.jsx(Xt,{width:`${70-t*10}%`,tone:t===3?"muted":"accent"})]},t))}),pv_daily_checklist:()=>s.jsx("div",{className:"g2-preview g2-checklist",children:["Login","Scan","Share","Claim"].map((t,e)=>s.jsxs("div",{className:"g2-check-row",children:[s.jsx("span",{className:`g2-checkbox ${e<2?"checked":""}`}),s.jsx("span",{className:"g2-check-label",children:t}),s.jsx(Xt,{width:`${40+e*10}%`,tone:"accent",height:5})]},t))}),pv_contract_timer:()=>s.jsxs("div",{className:"g2-preview g2-contract",children:[s.jsxs("div",{className:"g2-contract-top",children:[s.jsx(Xt,{width:"80%",tone:"accent"}),s.jsx(ds,{label:"7d"})]}),s.jsxs("div",{className:"g2-contract-body",children:[s.jsx(Xt,{width:"100%",tone:"muted",height:6}),s.jsx(Xt,{width:"65%",tone:"warning",height:6})]}),s.jsx("div",{className:"g2-contract-tear"})]}),pv_bounty_target:()=>s.jsxs("div",{className:"g2-preview g2-row",children:[s.jsxs("div",{className:"g2-target",children:[s.jsx("div",{className:"g2-target-ring"}),s.jsx("div",{className:"g2-target-dot"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"60%",tone:"accent"}),s.jsx(Xt,{width:"45%",tone:"success"}),s.jsx(ds,{label:"Reward"})]})]}),pv_objective_chips:()=>s.jsxs("div",{className:"g2-preview g2-chip-stack",children:[s.jsx(ds,{label:"Win 2 matches"}),s.jsx(ds,{label:"Scan 3"}),s.jsx(ds,{label:"Share once"})]}),pv_quest_chain_nodes:()=>s.jsx("div",{className:"g2-preview g2-node-chain",children:[0,1,2,3,4].map(t=>s.jsxs(q.Fragment,{children:[s.jsx("div",{className:`g2-node ${t<3?"active":""}`}),t<4?s.jsx("div",{className:"g2-node-connector"}):null]},t))}),pv_reward_bundle:()=>s.jsxs("div",{className:"g2-preview g2-row g2-space-between",children:[s.jsx("div",{className:"g2-loot g2-loot-gem"}),s.jsx("div",{className:"g2-loot g2-loot-coin"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"70%",tone:"accent"}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(ds,{label:"+250 XP"}),s.jsx(ds,{label:"+2 keys"})]})]})]}),pv_sidequest_compact:()=>s.jsxs("div",{className:"g2-preview g2-row g2-sidequest",children:[s.jsx("div",{className:"g2-sidequest-tag",children:"Side"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"60%",tone:"accent"}),s.jsx(Xt,{width:"35%",tone:"muted"})]}),s.jsx("div",{className:"g2-arrow-right"})]}),pv_claim_states:()=>s.jsxs("div",{className:"g2-preview g2-claims",children:[s.jsx("div",{className:"g2-claim-btn enabled",children:"Claim"}),s.jsx("div",{className:"g2-claim-btn disabled",children:"Locked"})]}),pv_difficulty_tags:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(ds,{label:"Easy"}),s.jsx(ds,{label:"Hard"}),s.jsx(ds,{label:"Insane"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"40%",tone:"success"}),s.jsx(Xt,{width:"60%",tone:"warning"}),s.jsx(Xt,{width:"80%",tone:"danger"})]})]}),pv_boss_hp_segmented:()=>s.jsxs("div",{className:"g2-preview g2-bossbar",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g2-boss-segment ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g2-marker",style:{left:"72%"}})]}),pv_dual_progress_marker:()=>s.jsxs("div",{className:"g2-preview g2-col g2-gap-xs",children:[s.jsx(Xt,{width:"85%",tone:"accent",height:10}),s.jsxs("div",{className:"g2-dual-overlay",children:[s.jsx(Xt,{width:"60%",tone:"success",height:8}),s.jsx("div",{className:"g2-marker",style:{left:"60%"}}),s.jsx("div",{className:"g2-marker muted",style:{left:"85%"}})]})]}),pv_segment_track_10:()=>s.jsx("div",{className:"g2-preview g2-segment-track",children:Array.from({length:10}).map((t,e)=>s.jsx("div",{className:`g2-segment ${e<6?"active":""}`},e))}),pv_donut_completion:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsxs("div",{className:"g2-donut",children:[s.jsx("div",{className:"g2-donut-fill"}),s.jsx("div",{className:"g2-donut-hole",children:"72%"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"50%",tone:"accent"}),s.jsx(Xt,{width:"40%",tone:"muted"})]})]}),pv_battery_gauge:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsxs("div",{className:"g2-battery",children:[s.jsx("div",{className:"g2-battery-cap"}),s.jsx("div",{className:"g2-battery-fill"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(ds,{label:"82%"}),s.jsx(Xt,{width:"70%",tone:"accent"})]})]}),pv_thermo_vertical:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-thermo",children:s.jsx("div",{className:"g2-thermo-fill"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"40%",tone:"warning"}),s.jsx(Xt,{width:"30%",tone:"muted"})]})]}),pv_xp_ticks:()=>s.jsxs("div",{className:"g2-preview g2-col",children:[s.jsxs("div",{className:"g2-xpbar",children:[s.jsx("div",{className:"g2-xp-fill"}),Array.from({length:8}).map((t,e)=>s.jsx("span",{className:"g2-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsx(ds,{label:"Level 42"})]}),pv_multibar_stats5:()=>s.jsx("div",{className:"g2-preview g2-stats5",children:["STR","DEX","INT","CON","LCK"].map((t,e)=>s.jsxs("div",{className:"g2-stat-row",children:[s.jsx("span",{className:"g2-stat-label",children:t}),s.jsx(Xt,{width:`${40+e*10}%`,tone:e%2===0?"accent":"success",height:6})]},t))}),pv_risk_meter:()=>s.jsxs("div",{className:"g2-preview g2-risk",children:[s.jsx("div",{className:"g2-risk-arc",children:s.jsx("div",{className:"g2-risk-pointer"})}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(ds,{label:"Risk"}),s.jsx(ds,{label:"68%"})]})]}),pv_perfect_run:()=>s.jsxs("div",{className:"g2-preview g2-perfect",children:[s.jsx(Xt,{width:"100%",tone:"success",height:12}),s.jsx("div",{className:"g2-checklist tiny",children:["No deaths","No errors","All chests"].map(t=>s.jsxs("div",{className:"g2-check-row",children:[s.jsx("span",{className:"g2-checkbox checked"}),s.jsx("span",{className:"g2-check-label",children:t})]},t))})]}),pv_podium_top3:()=>s.jsx("div",{className:"g2-preview g2-podium",children:[{h:50,tone:"silver"},{h:70,tone:"gold"},{h:40,tone:"bronze"}].map((t,e)=>s.jsxs("div",{className:`g2-podium-col ${t.tone}`,style:{height:t.h},children:["#",e+1]},e))}),pv_ladder_rungs:()=>s.jsx("div",{className:"g2-preview g2-ladder",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g2-rung ${e===2?"active":""}`},e))}),pv_league_tiers:()=>s.jsxs("div",{className:"g2-preview g2-row g2-league",children:[s.jsx("div",{className:"g2-league-shield"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"70%",tone:"accent"}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(ds,{label:"Bronze"}),s.jsx(ds,{label:"Diamond"})]})]})]}),pv_delta_chip:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(ds,{label:"^ +12"}),s.jsx(ds,{label:"v -3"}),s.jsx(Xt,{width:"50%",tone:"accent"})]}),pv_percentile_gauge:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-percent-gauge",children:s.jsx("div",{className:"g2-percent-needle"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(ds,{label:"Top 5%"}),s.jsx(Xt,{width:"40%",tone:"accent"})]})]}),pv_rival_slot:()=>s.jsxs("div",{className:"g2-preview g2-rival",children:[s.jsxs("div",{className:"g2-vs-block",children:[s.jsx(Xt,{width:"60%",tone:"accent"}),s.jsx(ds,{label:"You"})]}),s.jsx("div",{className:"g2-vs-mid",children:"VS"}),s.jsxs("div",{className:"g2-vs-block rival",children:[s.jsx(Xt,{width:"55%",tone:"warning"}),s.jsx(ds,{label:"Rival"})]})]}),pv_promo_zone:()=>s.jsxs("div",{className:"g2-preview g2-zone promo",children:[s.jsx("div",{className:"g2-zone-band"}),s.jsx("div",{className:"g2-zone-label",children:"Promotion Zone"})]}),pv_relegation_zone:()=>s.jsxs("div",{className:"g2-preview g2-zone danger",children:[s.jsx("div",{className:"g2-zone-band"}),s.jsx("div",{className:"g2-zone-label",children:"Relegation"})]}),pv_top5_list:()=>s.jsx("div",{className:"g2-preview g2-list",children:["Alpha","Bravo","Charlie","Delta","Echo"].map((t,e)=>s.jsxs("div",{className:"g2-list-row",children:[s.jsx("span",{className:"g2-list-num",children:e+1}),s.jsx(Xt,{width:`${70-e*8}%`,tone:e<2?"accent":"muted",height:6})]},t))}),pv_rank_step_history:()=>s.jsxs("div",{className:"g2-preview g2-rank-history",children:[Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g2-rank-node",style:{bottom:`${e*8}%`,left:`${e*16}%`}},e)),s.jsx("div",{className:"g2-rank-line"})]}),pv_split_compare:()=>s.jsxs("div",{className:"g2-preview g2-split",children:[s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"70%",tone:"accent"}),s.jsx(Xt,{width:"40%",tone:"accent"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"60%",tone:"warning"}),s.jsx(Xt,{width:"50%",tone:"warning"})]})]}),pv_you_vs_avg_bars:()=>s.jsxs("div",{className:"g2-preview g2-col",children:[s.jsxs("div",{className:"g2-overlay-bars",children:[s.jsx(Xt,{width:"80%",tone:"accent",height:10}),s.jsx(Xt,{width:"55%",tone:"muted",height:10})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(ds,{label:"You"}),s.jsx(ds,{label:"Server Avg"})]})]}),pv_bestof3_dots:()=>s.jsx("div",{className:"g2-preview g2-row g2-gap-sm",children:[0,1,2].map(t=>s.jsx("div",{className:`g2-round-dot ${t<2?"won":""}`},t))}),pv_duel_outcome:()=>s.jsxs("div",{className:"g2-preview g2-duel",children:[s.jsx("div",{className:"g2-shield win",children:"Win"}),s.jsx("div",{className:"g2-shield loss",children:"Loss"})]}),pv_advantage_meter:()=>s.jsxs("div",{className:"g2-preview g2-meter",children:[s.jsxs("div",{className:"g2-meter-track",children:[s.jsx("div",{className:"g2-meter-fill"}),s.jsx("div",{className:"g2-meter-pointer",style:{left:"62%"}})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(ds,{label:"Advantage"}),s.jsx(ds,{label:"+12%"})]})]}),pv_kpi_tiles_4:()=>s.jsx("div",{className:"g2-preview g2-kpi-grid",children:["KPI","CTR","UPT","LTV"].map((t,e)=>s.jsxs("div",{className:"g2-kpi-tile",children:[s.jsx("div",{className:"g2-kpi-label",children:t}),s.jsx(Xt,{width:`${40+e*10}%`,tone:"accent"})]},t))}),pv_delta_chips_breakdown:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(ds,{label:"+18"}),s.jsx(ds,{label:"-5"}),s.jsx(ds,{label:"+2"}),s.jsx(ds,{label:"-1"})]}),pv_mirror_neutral:()=>s.jsxs("div",{className:"g2-preview g2-mirror",children:[s.jsx("div",{className:"g2-mirror-half",children:s.jsx(Xt,{width:"60%",tone:"accent"})}),s.jsx("div",{className:"g2-divider"}),s.jsx("div",{className:"g2-mirror-half",children:s.jsx(Xt,{width:"60%",tone:"warning"})})]}),pv_radar_polygon:()=>s.jsx("div",{className:"g2-preview g2-radar",children:s.jsxs("svg",{viewBox:"0 0 120 120",children:[s.jsx("polygon",{points:"60,15 100,50 90,105 30,105 20,50",className:"g2-radar-bg"}),s.jsx("polygon",{points:"60,30 90,55 80,90 40,90 30,55",className:"g2-radar-fill"})]})}),pv_gap_to_next:()=>s.jsxs("div",{className:"g2-preview g2-gap-bar",children:[s.jsx(Xt,{width:"80%",tone:"accent",height:8}),s.jsx("div",{className:"g2-marker",style:{left:"65%"}}),s.jsx("div",{className:"g2-gap-label",children:"Gap: 12 pts"})]}),pv_guild_roles:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(ds,{label:"Leader"}),s.jsx(ds,{label:"Officer"}),s.jsx(ds,{label:"Member"})]}),pv_contrib_bars:()=>s.jsx("div",{className:"g2-preview g2-col g2-gap-xs",children:["Ava","Ben","Caro"].map((t,e)=>s.jsxs("div",{className:"g2-contrib-row",children:[s.jsx("span",{className:"g2-contrib-name",children:t}),s.jsx(Xt,{width:`${50+e*15}%`,tone:"accent",height:6})]},t))}),pv_spotlight_card:()=>s.jsxs("div",{className:"g2-preview g2-spotlight",children:[s.jsx("div",{className:"g2-spotlight-glow"}),s.jsx(Xt,{width:"70%",tone:"accent"}),s.jsx(ds,{label:"Spotlight"})]}),pv_guild_power_meter:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-power-donut",children:s.jsx("div",{className:"g2-power-fill"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Xt,{width:"60%",tone:"success"}),s.jsx(Xt,{width:"40%",tone:"warning"})]})]}),pv_slots_open_filled:()=>s.jsx("div",{className:"g2-preview g2-slots",children:[0,1,2,3].map(t=>s.jsx("div",{className:`g2-slot-card ${t<2?"open":"filled"}`},t))}),pv_war_readiness:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(ds,{label:"Ready"}),s.jsx(ds,{label:"Armor"}),s.jsx(ds,{label:"Supplies"}),s.jsx(Xt,{width:"50%",tone:"accent"})]}),pv_activity_pulse:()=>s.jsx("div",{className:"g2-preview g2-pulse",children:Array.from({length:14}).map((t,e)=>s.jsx("div",{className:"g2-pulse-bar",style:{height:`${10+e%5*8}px`}},e))}),pv_alliance_link:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-link-node"}),s.jsx("div",{className:"g2-link-chain"}),s.jsx("div",{className:"g2-link-node"})]}),pv_pinned_announcement:()=>s.jsxs("div",{className:"g2-preview g2-pinned",children:[s.jsx("div",{className:"g2-pin"}),s.jsx(Xt,{width:"70%",tone:"accent"}),s.jsx(Xt,{width:"40%",tone:"muted"})]}),pv_trophy_shelf:()=>s.jsxs("div",{className:"g2-preview g2-shelf",children:[s.jsx("div",{className:"g2-trophies",children:[0,1,2].map(t=>s.jsx("div",{className:"g2-trophy"},t))}),s.jsx("div",{className:"g2-shelf-wood"})]})},bIe=t=>OI[t]?OI[t]():s.jsx("div",{className:"g2-preview",children:s.jsx(Xt,{width:"60%",tone:"accent"})});function _Ie(){return s.jsxs("div",{className:"g2-root",children:[s.jsxs("header",{className:"g2-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 2"}),s.jsx("p",{className:"g2-sub",children:"50 unique mock widgets mapped to the original playground list. All static and scoped."})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(ds,{label:"mock"}),s.jsx(ds,{label:"concept"}),s.jsx(ds,{label:"ui"})]})]}),s.jsx("nav",{className:"g2-toc",children:$I.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g2-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g2-sections",children:$I.map(t=>s.jsxs("details",{className:"g2-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g2-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g2-section-title",children:t.title}),s.jsx("div",{className:"g2-section-sub",children:t.description})]}),s.jsxs("span",{className:"g2-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g2-grid",children:t.items.map(e=>s.jsxs("div",{className:"g2-card",children:[s.jsxs("div",{className:"g2-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g2-card-title",children:e.title}),s.jsx("div",{className:"g2-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g2-pill-row",children:(e.tags||["mock"]).map(n=>s.jsx(ds,{label:n},n))})]}),bIe(e.previewId)]},e.id))})]},t.id))})]})}const VI=[{id:"badges",title:"Badges & Titles",description:"Unlocks, nameplates, and medal visuals.",items:[{id:"1",categoryId:"badges",title:"Achievement Unlocked",subtitle:"Shimmer check",tags:["mock","ui"],previewId:"g3_badge_unlock_ring"},{id:"2",categoryId:"badges",title:"Locked Badge Mask",subtitle:"Silhouette lock",tags:["mock"],previewId:"g3_badge_lock_mask"},{id:"3",categoryId:"badges",title:"Rarity Fan",subtitle:"Common to mythic fan",tags:["concept"],previewId:"g3_rarity_fan"},{id:"4",categoryId:"badges",title:"Mastery Tiers",subtitle:"I-V concentric",tags:["ui"],previewId:"g3_mastery_tiers"},{id:"5",categoryId:"badges",title:"Title Plate Frame",subtitle:"Nameplate glow",tags:["mock"],previewId:"g3_title_plate"},{id:"6",categoryId:"badges",title:"Medal Banner",subtitle:"Bronze/Silver/Gold bar",tags:["ui"],previewId:"g3_medal_banner"},{id:"7",categoryId:"badges",title:"Badge Glow Card",subtitle:"Starburst pop",tags:["concept"],previewId:"g3_badge_glow"},{id:"8",categoryId:"badges",title:"Approved Stamp",subtitle:"Circular stamp",tags:["mock"],previewId:"g3_stamp_card"},{id:"9",categoryId:"badges",title:"Showcase Strip",subtitle:"Static carousel",tags:["ui"],previewId:"g3_showcase_strip"},{id:"10",categoryId:"badges",title:"First Scan Popover",subtitle:"Speech bubble",tags:["mock"],previewId:"g3_first_popover"}]},{id:"progress",title:"Progress & Gauges",description:"Bars, gauges, and segmented tracks.",items:[{id:"11",categoryId:"progress",title:"Boss Segments",subtitle:"Phase chunks",tags:["mock"],previewId:"g3_boss_segments"},{id:"12",categoryId:"progress",title:"Dual Progress",subtitle:"You vs avg marker",tags:["ui"],previewId:"g3_dual_progress"},{id:"13",categoryId:"progress",title:"Segment Rail",subtitle:"10-block rail",tags:["concept"],previewId:"g3_segment_rail"},{id:"14",categoryId:"progress",title:"Donut Completion",subtitle:"Ring percent",tags:["mock"],previewId:"g3_donut_completion"},{id:"15",categoryId:"progress",title:"Battery Meter",subtitle:"Energy cell",tags:["ui"],previewId:"g3_battery_meter"},{id:"16",categoryId:"progress",title:"Thermo Column",subtitle:"Vertical fill",tags:["mock"],previewId:"g3_thermo_column"},{id:"17",categoryId:"progress",title:"XP With Ticks",subtitle:"Micro ticks",tags:["ui"],previewId:"g3_xp_ticks"},{id:"18",categoryId:"progress",title:"Stat Stack",subtitle:"Five attributes",tags:["mock"],previewId:"g3_stat_stack"},{id:"19",categoryId:"progress",title:"Risk Arc",subtitle:"Arc meter",tags:["concept"],previewId:"g3_risk_arc"},{id:"20",categoryId:"progress",title:"Perfect Run",subtitle:"Checklist + bar",tags:["ui"],previewId:"g3_perfect_run"}]},{id:"rankings",title:"Rankings & Competitive",description:"Podiums, ladders, deltas, and rivals.",items:[{id:"21",categoryId:"rankings",title:"Podium Trio",subtitle:"Top 3 heights",tags:["mock"],previewId:"g3_podium_trio"},{id:"22",categoryId:"rankings",title:"Ladder Rungs",subtitle:"Rung climb",tags:["ui"],previewId:"g3_ladder_rungs"},{id:"23",categoryId:"rankings",title:"League Shield",subtitle:"Tier shield",tags:["concept"],previewId:"g3_league_shield"},{id:"24",categoryId:"rankings",title:"Delta Chips",subtitle:"Up/Down pills",tags:["ui"],previewId:"g3_delta_chips"},{id:"25",categoryId:"rankings",title:"Percent Gauge",subtitle:"Needle gauge",tags:["mock"],previewId:"g3_percent_gauge"},{id:"26",categoryId:"rankings",title:"Rival Split",subtitle:"You vs rival",tags:["concept"],previewId:"g3_rival_split"},{id:"27",categoryId:"rankings",title:"Promotion Band",subtitle:"Green band",tags:["ui"],previewId:"g3_promo_band"},{id:"28",categoryId:"rankings",title:"Relegation Band",subtitle:"Red band",tags:["mock"],previewId:"g3_relegation_band"},{id:"29",categoryId:"rankings",title:"Top Five Rows",subtitle:"Ranked rows",tags:["ui"],previewId:"g3_top_five"},{id:"30",categoryId:"rankings",title:"Rank Steps",subtitle:"Step chart",tags:["mock"],previewId:"g3_rank_steps"}]},{id:"collections",title:"Collections & Inventory",description:"Binders, stickers, and milestones.",items:[{id:"31",categoryId:"collections",title:"Binder Slots",subtitle:"Grid slots",tags:["mock"],previewId:"g3_binder_slots"},{id:"32",categoryId:"collections",title:"Set Progress",subtitle:"3 of 5 lit",tags:["ui"],previewId:"g3_set_progress"},{id:"33",categoryId:"collections",title:"Missing Checklist",subtitle:"Remaining shards",tags:["mock"],previewId:"g3_missing_list"},{id:"34",categoryId:"collections",title:"Rarity Rows",subtitle:"Tier lines",tags:["concept"],previewId:"g3_rarity_rows"},{id:"35",categoryId:"collections",title:"Legendary Spread",subtitle:"Book spread",tags:["ui"],previewId:"g3_legendary_spread"},{id:"36",categoryId:"collections",title:"Pet Album",subtitle:"Avatar minis",tags:["mock"],previewId:"g3_pet_album"},{id:"37",categoryId:"collections",title:"Sticker Sheet",subtitle:"Sticker grid",tags:["concept"],previewId:"g3_sticker_sheet"},{id:"38",categoryId:"collections",title:"Duplicate Dial",subtitle:"Count dial",tags:["ui"],previewId:"g3_duplicate_dial"},{id:"39",categoryId:"collections",title:"Trade/Lock Tags",subtitle:"State chips",tags:["mock"],previewId:"g3_trade_lock"},{id:"40",categoryId:"collections",title:"Collection Timeline",subtitle:"Milestone nodes",tags:["ui"],previewId:"g3_collection_timeline"}]},{id:"micro",title:"Micro Interactions",description:"Toasts, tabs, ribbons, and overlays.",items:[{id:"41",categoryId:"micro",title:"Unlock Glow",subtitle:"Glowing card",tags:["mock"],previewId:"g3_unlock_glow"},{id:"42",categoryId:"micro",title:"Inspect Tooltip",subtitle:"Hover tip",tags:["ui"],previewId:"g3_inspect_tooltip"},{id:"43",categoryId:"micro",title:"Confetti Burst",subtitle:"Sprinkled dots",tags:["concept"],previewId:"g3_confetti_burst"},{id:"44",categoryId:"micro",title:"Corner Ribbon",subtitle:"New ribbon",tags:["mock"],previewId:"g3_corner_ribbon"},{id:"45",categoryId:"micro",title:"Locked Blur",subtitle:"Frosted overlay",tags:["ui"],previewId:"g3_locked_blur"},{id:"46",categoryId:"micro",title:"Pulse Progress",subtitle:"Animated pulse",tags:["concept"],previewId:"g3_pulse_progress"},{id:"47",categoryId:"micro",title:"Mini Tabs",subtitle:"Inline tab pills",tags:["ui"],previewId:"g3_mini_tabs"},{id:"48",categoryId:"micro",title:"Expandable Block",subtitle:"Details reveal",tags:["mock"],previewId:"g3_expand_block"},{id:"49",categoryId:"micro",title:"Toast Message",subtitle:"Inline toast",tags:["ui"],previewId:"g3_toast_message"},{id:"50",categoryId:"micro",title:"Quest Failed",subtitle:"Warning slab",tags:["mock"],previewId:"g3_quest_failed"}]}],ur=({label:t})=>s.jsx("span",{className:"g3-pill",children:t}),Ps=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g3-bar tone-${e}`,style:{width:t,height:n}}),Wf=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g3-dot tone-${t}`,style:{width:e,height:e}}),wIe=t=>{const e=jIe[t];return e?e():s.jsx("div",{className:"g3-preview g3-fallback"})},jIe={g3_badge_unlock_ring:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-icon ring success",children:s.jsx("span",{className:"g3-checkmark"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Ps,{width:"80%",tone:"success"}),s.jsxs("div",{className:"g3-pill-row",children:[s.jsx(ur,{label:"Unlocked"}),s.jsx(ur,{label:"+150 XP"})]})]})]}),g3_badge_lock_mask:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-icon ring muted",children:s.jsx("div",{className:"g3-lock-hole"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx("div",{className:"g3-mask-figure"}),s.jsx(Ps,{width:"60%",tone:"muted"})]})]}),g3_rarity_fan:()=>s.jsx("div",{className:"g3-preview g3-row g3-gap-sm",children:["muted","accent","success","warning","danger"].map(t=>s.jsx("div",{className:`g3-diamond tone-${t}`},t))}),g3_mastery_tiers:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-ring-stack",children:[1,2,3].map(t=>s.jsx("div",{className:`g3-ring-${t}`},t))}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Ps,{width:"65%"}),s.jsxs("div",{className:"g3-dot-row",children:[s.jsx(Wf,{}),s.jsx(Wf,{tone:"success"}),s.jsx(Wf,{tone:"warning"})]})]})]}),g3_title_plate:()=>s.jsxs("div",{className:"g3-preview g3-plate",children:[s.jsx("div",{className:"g3-plate-left"}),s.jsx("div",{className:"g3-plate-text",children:"Title"}),s.jsx("div",{className:"g3-plate-right"})]}),g3_medal_banner:()=>s.jsxs("div",{className:"g3-preview g3-row g3-space-between",children:[s.jsx("div",{className:"g3-medal bronze"}),s.jsx("div",{className:"g3-medal silver"}),s.jsx("div",{className:"g3-medal gold"})]}),g3_badge_glow:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-starburst"}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Ps,{width:"70%"}),s.jsx(Ps,{width:"45%",tone:"success"})]})]}),g3_stamp_card:()=>s.jsxs("div",{className:"g3-preview g3-stamp-card",children:[s.jsx("div",{className:"g3-stamp-ring",children:"APPROVED"}),s.jsx(Ps,{width:"60%"})]}),g3_showcase_strip:()=>s.jsxs("div",{className:"g3-preview g3-carousel",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g3-slide ${t===1?"active":""}`},t)),s.jsx("div",{className:"g3-dot-row",children:[0,1,2,3].map(t=>s.jsx(Wf,{tone:t===1?"accent":"muted"},t))})]}),g3_first_popover:()=>s.jsxs("div",{className:"g3-preview g3-pop",children:[s.jsxs("div",{className:"g3-pop-bubble",children:[s.jsx("div",{className:"g3-pop-title",children:"First scan"}),s.jsx(Ps,{width:"70%"})]}),s.jsx("div",{className:"g3-pop-arrow"})]}),g3_boss_segments:()=>s.jsxs("div",{className:"g3-preview g3-bossbar",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g3-boss-segment ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g3-marker",style:{left:"72%"}})]}),g3_dual_progress:()=>s.jsxs("div",{className:"g3-preview g3-col",children:[s.jsx(Ps,{width:"85%"}),s.jsxs("div",{className:"g3-dual",children:[s.jsx(Ps,{width:"60%",tone:"success",height:8}),s.jsx("div",{className:"g3-marker",style:{left:"60%"}}),s.jsx("div",{className:"g3-marker muted",style:{left:"85%"}})]})]}),g3_segment_rail:()=>s.jsx("div",{className:"g3-preview g3-rail",children:Array.from({length:10}).map((t,e)=>s.jsx("div",{className:`g3-rail-segment ${e<6?"active":""}`},e))}),g3_donut_completion:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsxs("div",{className:"g3-donut",children:[s.jsx("div",{className:"g3-donut-fill"}),s.jsx("div",{className:"g3-donut-hole",children:"72%"})]}),s.jsx(Ps,{width:"50%"})]}),g3_battery_meter:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsxs("div",{className:"g3-battery",children:[s.jsx("div",{className:"g3-battery-cap"}),s.jsx("div",{className:"g3-battery-fill"})]}),s.jsx(ur,{label:"82%"})]}),g3_thermo_column:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-thermo",children:s.jsx("div",{className:"g3-thermo-fill"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Ps,{width:"40%",tone:"warning"}),s.jsx(Ps,{width:"30%",tone:"muted"})]})]}),g3_xp_ticks:()=>s.jsxs("div",{className:"g3-preview g3-col",children:[s.jsxs("div",{className:"g3-xpbar",children:[s.jsx("div",{className:"g3-xp-fill"}),Array.from({length:8}).map((t,e)=>s.jsx("span",{className:"g3-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsx(ur,{label:"Lvl 42"})]}),g3_stat_stack:()=>s.jsx("div",{className:"g3-preview g3-stats",children:["STR","DEX","INT","CON","LCK"].map((t,e)=>s.jsxs("div",{className:"g3-stat-row",children:[s.jsx("span",{className:"g3-stat-label",children:t}),s.jsx(Ps,{width:`${40+e*10}%`,tone:e%2===0?"accent":"success"})]},t))}),g3_risk_arc:()=>s.jsxs("div",{className:"g3-preview g3-risk",children:[s.jsx("div",{className:"g3-risk-arc",children:s.jsx("div",{className:"g3-risk-pointer"})}),s.jsx(ur,{label:"68%"})]}),g3_perfect_run:()=>s.jsxs("div",{className:"g3-preview g3-perfect",children:[s.jsx(Ps,{width:"100%",tone:"success"}),s.jsx("div",{className:"g3-checklist tiny",children:["No deaths","No errors","All chests"].map(t=>s.jsxs("div",{className:"g3-check-row",children:[s.jsx("span",{className:"g3-checkbox checked"}),s.jsx("span",{className:"g3-check-label",children:t})]},t))})]}),g3_podium_trio:()=>s.jsx("div",{className:"g3-preview g3-podium",children:[{h:50,tone:"silver"},{h:70,tone:"gold"},{h:40,tone:"bronze"}].map((t,e)=>s.jsxs("div",{className:`g3-podium-col ${t.tone}`,style:{height:t.h},children:["#",e+1]},e))}),g3_ladder_rungs:()=>s.jsx("div",{className:"g3-preview g3-ladder",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g3-rung ${e===2?"active":""}`},e))}),g3_league_shield:()=>s.jsxs("div",{className:"g3-preview g3-row g3-league",children:[s.jsx("div",{className:"g3-league-shield"}),s.jsx(Ps,{width:"70%"})]}),g3_delta_chips:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[s.jsx(ur,{label:"^ +12"}),s.jsx(ur,{label:"v -3"}),s.jsx(Ps,{width:"50%"})]}),g3_percent_gauge:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-percent",children:s.jsx("div",{className:"g3-percent-needle"})}),s.jsx(ur,{label:"Top 5%"})]}),g3_rival_split:()=>s.jsxs("div",{className:"g3-preview g3-rival",children:[s.jsxs("div",{className:"g3-vs",children:[s.jsx(Ps,{width:"60%"}),s.jsx(ur,{label:"You"})]}),s.jsx("div",{className:"g3-vs-mid",children:"VS"}),s.jsxs("div",{className:"g3-vs rival",children:[s.jsx(Ps,{width:"55%",tone:"warning"}),s.jsx(ur,{label:"Rival"})]})]}),g3_promo_band:()=>s.jsxs("div",{className:"g3-preview g3-zone promo",children:[s.jsx("div",{className:"g3-zone-band"}),s.jsx("div",{className:"g3-zone-label",children:"Promotion"})]}),g3_relegation_band:()=>s.jsxs("div",{className:"g3-preview g3-zone danger",children:[s.jsx("div",{className:"g3-zone-band"}),s.jsx("div",{className:"g3-zone-label",children:"Relegation"})]}),g3_top_five:()=>s.jsx("div",{className:"g3-preview g3-list",children:["Alpha","Bravo","Charlie","Delta","Echo"].map((t,e)=>s.jsxs("div",{className:"g3-list-row",children:[s.jsx("span",{className:"g3-list-num",children:e+1}),s.jsx(Ps,{width:`${70-e*8}%`,tone:e<2?"accent":"muted"})]},t))}),g3_rank_steps:()=>s.jsxs("div",{className:"g3-preview g3-rank-steps",children:[Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g3-step-dot",style:{bottom:`${e*8}%`,left:`${e*16}%`}},e)),s.jsx("div",{className:"g3-step-line"})]}),g3_binder_slots:()=>s.jsx("div",{className:"g3-preview g3-grid-cards",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g3-slot ${e<3?"filled":""}`},e))}),g3_set_progress:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g3-piece ${e<3?"active":""}`},e)),s.jsx(ur,{label:"3 / 5"})]}),g3_missing_list:()=>s.jsx("div",{className:"g3-preview g3-checklist",children:["Shard A","Shard B","Shard C"].map((t,e)=>s.jsxs("div",{className:"g3-check-row",children:[s.jsx("span",{className:`g3-checkbox ${e===2?"":"checked"}`}),s.jsx("span",{className:"g3-check-label",children:t})]},t))}),g3_rarity_rows:()=>s.jsxs("div",{className:"g3-preview g3-col g3-gap-xs",children:[s.jsx(Ps,{width:"90%",tone:"muted"}),s.jsx(Ps,{width:"70%",tone:"accent"}),s.jsx(Ps,{width:"50%",tone:"success"}),s.jsx(Ps,{width:"40%",tone:"warning"}),s.jsx(Ps,{width:"30%",tone:"danger"})]}),g3_legendary_spread:()=>s.jsxs("div",{className:"g3-preview g3-book",children:[s.jsx("div",{className:"g3-book-page left"}),s.jsx("div",{className:"g3-book-page right"})]}),g3_pet_album:()=>s.jsx("div",{className:"g3-preview g3-pet-grid",children:Array.from({length:6}).map((t,e)=>s.jsxs("div",{className:"g3-pet-avatar",children:[s.jsx("span",{className:"g3-pet-ear"}),s.jsx("span",{className:"g3-pet-ear"})]},e))}),g3_sticker_sheet:()=>s.jsx("div",{className:"g3-preview g3-sticker-sheet",children:Array.from({length:4}).map((t,e)=>s.jsx("div",{className:"g3-sticker"},e))}),g3_duplicate_dial:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-counter",children:s.jsx("div",{className:"g3-counter-needle"})}),s.jsx(ur,{label:"x4"})]}),g3_trade_lock:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[s.jsx(ur,{label:"Tradeable"}),s.jsx(ur,{label:"Locked"}),s.jsx(Ps,{width:"40%"})]}),g3_collection_timeline:()=>s.jsxs("div",{className:"g3-preview g3-timeline",children:[[10,25,50,100].map((t,e)=>s.jsx("div",{className:"g3-timeline-node",style:{left:`${e*25}%`},children:s.jsx("span",{className:"g3-timeline-label",children:t})},t)),s.jsx("div",{className:"g3-timeline-line"})]}),g3_unlock_glow:()=>s.jsx("div",{className:"g3-preview g3-glow-card",children:s.jsx(Ps,{width:"60%",tone:"success"})}),g3_inspect_tooltip:()=>s.jsxs("div",{className:"g3-preview g3-tooltip-card",children:[s.jsx("div",{className:"g3-tooltip-box",children:"Inspect"}),s.jsx("div",{className:"g3-tooltip-tail"})]}),g3_confetti_burst:()=>s.jsx("div",{className:"g3-preview g3-confetti",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:"g3-confetti-dot"},e))}),g3_corner_ribbon:()=>s.jsxs("div",{className:"g3-preview g3-corner",children:[s.jsx("div",{className:"g3-corner-ribbon",children:"New"}),s.jsx(Ps,{width:"60%"})]}),g3_locked_blur:()=>s.jsxs("div",{className:"g3-preview g3-locked",children:[s.jsx("div",{className:"g3-locked-mask"}),s.jsx("div",{className:"g3-lock-hole"})]}),g3_pulse_progress:()=>s.jsx("div",{className:"g3-preview g3-pulse-bar",children:s.jsx("div",{className:"g3-pulse-fill"})}),g3_mini_tabs:()=>s.jsxs("div",{className:"g3-preview g3-col g3-gap-xs",children:[s.jsxs("div",{className:"g3-tabs",children:[s.jsx("div",{className:"g3-tab active",children:"One"}),s.jsx("div",{className:"g3-tab",children:"Two"}),s.jsx("div",{className:"g3-tab",children:"Three"})]}),s.jsx(Ps,{width:"70%"})]}),g3_expand_block:()=>s.jsxs("div",{className:"g3-preview g3-details",children:[s.jsx("div",{className:"g3-details-summary",children:"Details"}),s.jsxs("div",{className:"g3-details-body",children:[s.jsx(Ps,{width:"60%",tone:"muted"}),s.jsx(Ps,{width:"40%",tone:"muted"})]})]}),g3_toast_message:()=>s.jsxs("div",{className:"g3-preview g3-toast",children:[s.jsx("div",{className:"g3-toast-dot"}),s.jsx(Ps,{width:"70%"})]}),g3_quest_failed:()=>s.jsxs("div",{className:"g3-preview g3-failed",children:[s.jsx("div",{className:"g3-warning-icon"}),s.jsxs("div",{className:"g3-col",children:[s.jsx(Ps,{width:"60%",tone:"danger"}),s.jsx(Ps,{width:"40%",tone:"muted"})]})]})};function SIe(){return s.jsxs("div",{className:"g3-root",children:[s.jsxs("header",{className:"g3-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 3"}),s.jsx("p",{className:"g3-sub",children:"50 unique mock previews across 5 categories. All static and scoped to this page."})]}),s.jsxs("div",{className:"g3-pill-row",children:[s.jsx(ur,{label:"mock"}),s.jsx(ur,{label:"concept"}),s.jsx(ur,{label:"ui"})]})]}),s.jsx("nav",{className:"g3-toc",children:VI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g3-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g3-sections",children:VI.map(t=>s.jsxs("details",{className:"g3-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g3-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g3-section-title",children:t.title}),s.jsx("div",{className:"g3-section-sub",children:t.description})]}),s.jsxs("span",{className:"g3-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g3-grid",children:t.items.map(e=>s.jsxs("div",{className:"g3-card",children:[s.jsxs("div",{className:"g3-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g3-card-title",children:e.title}),s.jsx("div",{className:"g3-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g3-pill-row",children:(e.tags||["mock"]).map(n=>s.jsx(ur,{label:n},n))})]}),wIe(e.previewId)]},e.id))})]},t.id))})]})}const UI=[{id:"controls",title:"Controls & Navigation",description:"Chips, toggles, sliders, and small navigation rails.",items:[{id:"1",categoryId:"controls",title:"Segmented Toggle Bar",subtitle:"3 states, active glow",tags:["UI"],previewId:"pv_ui_seg_toggle_3"},{id:"2",categoryId:"controls",title:"Icon Tab Rail",subtitle:"mini tabs with badges",tags:["UI"],previewId:"pv_ui_icon_tabs_badges"},{id:"3",categoryId:"controls",title:"Filter Chips Row",subtitle:"wrap + selected state",tags:["UI"],previewId:"pv_ui_filter_chips_wrap"},{id:"4",categoryId:"controls",title:"Sort Pill Switch",subtitle:"ASC/DESC pill",tags:["UI"],previewId:"pv_ui_sort_pill"},{id:"5",categoryId:"controls",title:"Search Field + Hint",subtitle:"inline hint + icon",tags:["UI"],previewId:"pv_ui_search_hint"},{id:"6",categoryId:"controls",title:"Dropdown Menu Stack",subtitle:"3 options + separators",tags:["UI"],previewId:"pv_ui_dropdown_stack"},{id:"7",categoryId:"controls",title:"Range Slider Track",subtitle:"ticks + thumb",tags:["UI"],previewId:"pv_ui_slider_ticks"},{id:"8",categoryId:"controls",title:"Stepper Control",subtitle:"prev/next + step dots",tags:["UI"],previewId:"pv_ui_stepper_dots"},{id:"9",categoryId:"controls",title:"Compact Pagination",subtitle:"1..5 + next",tags:["UI"],previewId:"pv_ui_pagination_compact"},{id:"10",categoryId:"controls",title:"Sticky Subnav",subtitle:"active underline",tags:["UI"],previewId:"pv_ui_sticky_subnav"}]},{id:"cards",title:"Cards, Frames, Overlays",description:"Mini cards, ribbons, overlays, and tooltip shells.",items:[{id:"11",categoryId:"cards",title:"Card Header Ribbon",subtitle:"angled label",tags:["UI"],previewId:"pv_ui_ribbon_header"},{id:"12",categoryId:"cards",title:"Corner Tag Overlay",subtitle:"top-right chip",tags:["UI"],previewId:"pv_ui_corner_tag"},{id:"13",categoryId:"cards",title:"Locked Overlay Blur",subtitle:"frosted lock",tags:["UI"],previewId:"pv_ui_locked_blur2"},{id:"14",categoryId:"cards",title:"Tooltip Bubble",subtitle:"arrow + shadow",tags:["UI"],previewId:"pv_ui_tooltip_bubble"},{id:"15",categoryId:"cards",title:"Popover Panel",subtitle:"title + actions",tags:["UI"],previewId:"pv_ui_popover_panel"},{id:"16",categoryId:"cards",title:"Modal Mini Mock",subtitle:"header/body/footer",tags:["UI"],previewId:"pv_ui_modal_mini"},{id:"17",categoryId:"cards",title:"Drawer Slide Mock",subtitle:"right drawer",tags:["UI"],previewId:"pv_ui_drawer_right"},{id:"18",categoryId:"cards",title:"Toast Stack",subtitle:"3 toasts",tags:["UI"],previewId:"pv_ui_toast_stack3"},{id:"19",categoryId:"cards",title:"Inline Callout",subtitle:"info box",tags:["UI"],previewId:"pv_ui_callout_inline"},{id:"20",categoryId:"cards",title:"Badge Cluster",subtitle:"3 badge styles",tags:["UI"],previewId:"pv_ui_badge_cluster"}]},{id:"progress",title:"Progress & Meters",description:"Bars, dials, ladders, and dual markers.",items:[{id:"21",categoryId:"progress",title:"XP Bar with Ticks",subtitle:"level ticks",tags:["UI"],previewId:"pv_ui_xp_ticks2"},{id:"22",categoryId:"progress",title:"Dual Marker Bar",subtitle:"avg marker line",tags:["UI"],previewId:"pv_ui_dual_marker_bar"},{id:"23",categoryId:"progress",title:"Donut + Label",subtitle:"% inside ring",tags:["UI"],previewId:"pv_ui_donut_label"},{id:"24",categoryId:"progress",title:"Segmented Track 12",subtitle:"filled segments",tags:["UI"],previewId:"pv_ui_segment_track_12"},{id:"25",categoryId:"progress",title:"Vertical Thermometer",subtitle:"fill + cap",tags:["UI"],previewId:"pv_ui_thermo_cap"},{id:"26",categoryId:"progress",title:"Battery Gauge",subtitle:"4 cells",tags:["UI"],previewId:"pv_ui_battery_cells"},{id:"27",categoryId:"progress",title:"Multi Stat Microbars",subtitle:"5 bars",tags:["UI"],previewId:"pv_ui_microbars_5"},{id:"28",categoryId:"progress",title:"Streak Chain Meter",subtitle:"linked dots",tags:["UI"],previewId:"pv_ui_streak_chain"},{id:"29",categoryId:"progress",title:"Risk Dial",subtitle:"semi arc gauge",tags:["UI"],previewId:"pv_ui_risk_semi_dial"},{id:"30",categoryId:"progress",title:"Goal Ladder",subtitle:"milestones steps",tags:["UI"],previewId:"pv_ui_goal_ladder"}]},{id:"lists",title:"Lists & Tables",description:"Leaderboard rows, KPIs, timelines, and accordions.",items:[{id:"31",categoryId:"lists",title:"Mini Leaderboard",subtitle:"top 5 rows",tags:["UI"],previewId:"pv_ui_leaderboard_5"},{id:"32",categoryId:"lists",title:"Two-Column KPI List",subtitle:"label/value",tags:["UI"],previewId:"pv_ui_kpi_list_2col"},{id:"33",categoryId:"lists",title:"Table Row Hover",subtitle:"highlight row mock",tags:["UI"],previewId:"pv_ui_table_hover"},{id:"34",categoryId:"lists",title:"Rank Delta Row",subtitle:" chips in row",tags:["UI"],previewId:"pv_ui_rank_delta_row"},{id:"35",categoryId:"lists",title:"Avatar List Compact",subtitle:"3 entries",tags:["UI"],previewId:"pv_ui_avatar_list3"},{id:"36",categoryId:"lists",title:"Timeline Row",subtitle:"dots + text",tags:["UI"],previewId:"pv_ui_timeline_row"},{id:"37",categoryId:"lists",title:"Split Panel List",subtitle:"left labels, right values",tags:["UI"],previewId:"pv_ui_split_panel_list"},{id:"38",categoryId:"lists",title:"Chip List with Counts",subtitle:"chips + numbers",tags:["UI"],previewId:"pv_ui_chip_counts"},{id:"39",categoryId:"lists",title:"Accordion List",subtitle:"3 items expanded",tags:["UI"],previewId:"pv_ui_accordion3"},{id:"40",categoryId:"lists",title:"Activity Spark Row",subtitle:"sparkline + value",tags:["UI"],previewId:"pv_ui_spark_row"}]},{id:"animated",title:"Animated/Interactive UI",description:"Pulses, flips, shimmer, and motion stripes.",items:[{id:"41",categoryId:"animated",title:"Pulse Progress",subtitle:"subtle animated fill",tags:["UI"],previewId:"pv_ui_pulse_progress2"},{id:"42",categoryId:"animated",title:"Unlock Glow",subtitle:"animated border glow",tags:["UI"],previewId:"pv_ui_unlock_glow2"},{id:"43",categoryId:"animated",title:"Shimmer Skeleton",subtitle:"loading skeleton",tags:["UI"],previewId:"pv_ui_skeleton_shimmer"},{id:"44",categoryId:"animated",title:"Confetti Dots",subtitle:"sprinkle burst",tags:["UI"],previewId:"pv_ui_confetti_dots2"},{id:"45",categoryId:"animated",title:"Hover Lift Card",subtitle:"lift + shadow",tags:["UI"],previewId:"pv_ui_hover_lift"},{id:"46",categoryId:"animated",title:"Scan Ping Indicator",subtitle:"radial ping",tags:["UI"],previewId:"pv_ui_ping_indicator"},{id:"47",categoryId:"animated",title:"Badge Pop Animation",subtitle:"scale pop",tags:["UI"],previewId:"pv_ui_badge_pop"},{id:"48",categoryId:"animated",title:"Toggle Flip",subtitle:"switch animation",tags:["UI"],previewId:"pv_ui_toggle_flip"},{id:"49",categoryId:"animated",title:"Progress Stripe Motion",subtitle:"moving stripes",tags:["UI"],previewId:"pv_ui_stripe_motion"},{id:"50",categoryId:"animated",title:"Notification Bell Pulse",subtitle:"tiny pulse ring",tags:["UI"],previewId:"pv_ui_bell_pulse"}]}],Zr=({label:t})=>s.jsx("span",{className:"g4-pill",children:t}),ns=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g4-bar tone-${e}`,style:{width:t,height:n}}),NIe={pv_ui_seg_toggle_3:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm",children:["Stats","Roster","Logs"].map((t,e)=>s.jsx("div",{className:`g4-seg ${e===1?"active":""}`,children:t},t))}),pv_ui_icon_tabs_badges:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm",children:[{icon:"",badge:2},{icon:"",badge:4,active:!0},{icon:"",badge:1}].map(t=>s.jsxs("div",{className:`g4-icon-tab ${t.active?"active":""}`,children:[s.jsx("span",{className:"g4-icon",children:t.icon}),s.jsx("span",{className:"g4-badge",children:t.badge})]},t.icon))}),pv_ui_filter_chips_wrap:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xs g4-wrap",children:["All","PVE","PVP","Guild","Trades","Events"].map((t,e)=>s.jsx("span",{className:`g4-chip ${e===2?"active":""}`,children:t},t))}),pv_ui_sort_pill:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-space-between",children:[s.jsxs("div",{className:"g4-pill-toggle",children:[s.jsx("span",{className:"on",children:"ASC"}),s.jsx("span",{className:"off",children:"DESC"})]}),s.jsxs("div",{className:"g4-sort-arrows",children:[s.jsx("div",{className:"g4-arrow up"}),s.jsx("div",{className:"g4-arrow down"})]})]}),pv_ui_search_hint:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsxs("div",{className:"g4-search",children:[s.jsx("span",{className:"g4-search-icon",children:""}),s.jsx("input",{className:"g4-search-input",value:"search players",readOnly:!0})]}),s.jsx("span",{className:"g4-hint",children:"Press / to focus"})]}),pv_ui_dropdown_stack:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Newest","Top Rated","Favorites"].map((t,e)=>s.jsxs("div",{className:"g4-menu-row",children:[s.jsx("span",{children:t}),e===0&&s.jsx("span",{className:"g4-check",children:""})]},t))}),pv_ui_slider_ticks:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xs",children:[s.jsxs("div",{className:"g4-slider",children:[s.jsxs("div",{className:"g4-slider-track",children:[s.jsx("div",{className:"g4-slider-fill",style:{width:"64%"}}),s.jsx("div",{className:"g4-slider-thumb",style:{left:"64%"}})]}),s.jsx("div",{className:"g4-slider-ticks",children:Array.from({length:7}).map((t,e)=>s.jsx("span",{},e))})]}),s.jsxs("div",{className:"g4-slider-labels",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"64"}),s.jsx("span",{children:"100"})]})]}),pv_ui_stepper_dots:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsx("button",{className:"g4-btn ghost",children:"Prev"}),s.jsx("div",{className:"g4-row g4-gap-xs g4-center",children:Array.from({length:5}).map((t,e)=>s.jsx("span",{className:`g4-step-dot ${e<2?"done":e===2?"active":""}`},e))}),s.jsx("button",{className:"g4-btn solid",children:"Next"})]}),pv_ui_pagination_compact:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-xs g4-center",children:[[1,2,3,4,5].map(t=>s.jsx("span",{className:`g4-page ${t===3?"active":""}`,children:t},t)),s.jsx("span",{className:"g4-page ghost",children:"Next"})]}),pv_ui_sticky_subnav:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm g4-sticky",children:["Overview","Teams","History","Files"].map((t,e)=>s.jsxs("div",{className:`g4-subtab ${e===1?"active":""}`,children:[t,e===1&&s.jsx("div",{className:"g4-underline"})]},t))}),pv_ui_ribbon_header:()=>s.jsxs("div",{className:"g4-preview g4-card-slab",children:[s.jsx("div",{className:"g4-ribbon",children:"NEW"}),s.jsxs("div",{className:"g4-col g4-gap-xs",children:[s.jsx(ns,{width:"70%"}),s.jsx(ns,{width:"50%",tone:"muted"})]})]}),pv_ui_corner_tag:()=>s.jsxs("div",{className:"g4-preview g4-card-slab",children:[s.jsx("div",{className:"g4-corner-tag",children:"UI"}),s.jsx(ns,{width:"60%"}),s.jsx(ns,{width:"40%",tone:"muted"})]}),pv_ui_locked_blur2:()=>s.jsxs("div",{className:"g4-preview g4-locked",children:[s.jsx("div",{className:"g4-locked-blur"}),s.jsx("div",{className:"g4-lock-icon",children:""}),s.jsx(ns,{width:"50%",tone:"muted"})]}),pv_ui_tooltip_bubble:()=>s.jsxs("div",{className:"g4-preview g4-tooltip",children:[s.jsxs("div",{className:"g4-tooltip-body",children:[s.jsx(ns,{width:"70%"}),s.jsx(ns,{width:"40%",tone:"muted"})]}),s.jsx("div",{className:"g4-tooltip-arrow"})]}),pv_ui_popover_panel:()=>s.jsxs("div",{className:"g4-preview g4-popover",children:[s.jsxs("div",{className:"g4-popover-head",children:[s.jsx(ns,{width:"50%"}),s.jsxs("div",{className:"g4-row g4-gap-xs",children:[s.jsx("span",{className:"g4-dot tone-muted"}),s.jsx("span",{className:"g4-dot tone-muted"})]})]}),s.jsx(ns,{width:"80%",tone:"muted"}),s.jsx(ns,{width:"60%",tone:"muted"})]}),pv_ui_modal_mini:()=>s.jsxs("div",{className:"g4-preview g4-modal",children:[s.jsxs("div",{className:"g4-modal-head",children:[s.jsx(ns,{width:"50%"}),s.jsx("span",{className:"g4-close",children:""})]}),s.jsxs("div",{className:"g4-modal-body",children:[s.jsx(ns,{width:"90%",tone:"muted"}),s.jsx(ns,{width:"70%",tone:"muted"})]}),s.jsxs("div",{className:"g4-modal-foot",children:[s.jsx("button",{className:"g4-btn ghost",children:"Cancel"}),s.jsx("button",{className:"g4-btn solid",children:"Save"})]})]}),pv_ui_drawer_right:()=>s.jsxs("div",{className:"g4-preview g4-drawer",children:[s.jsxs("div",{className:"g4-drawer-body",children:[s.jsx(ns,{width:"65%"}),s.jsx(ns,{width:"40%",tone:"muted"})]}),s.jsxs("div",{className:"g4-drawer-panel",children:[s.jsx("div",{className:"g4-panel-handle"}),s.jsx(ns,{width:"70%"}),s.jsx(ns,{width:"50%",tone:"muted"})]})]}),pv_ui_toast_stack3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Synced","New invite","Warning"].map((t,e)=>s.jsxs("div",{className:`g4-toast ${e===2?"warn":""}`,children:[s.jsx("span",{className:"g4-dot tone-success"}),s.jsx("span",{children:t})]},t))}),pv_ui_callout_inline:()=>s.jsxs("div",{className:"g4-preview g4-callout",children:[s.jsx("div",{className:"g4-callout-icon",children:"i"}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(ns,{width:"60%"}),s.jsx(ns,{width:"40%",tone:"muted"})]})]}),pv_ui_badge_cluster:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-xs",children:[s.jsx(Zr,{label:"Beta"}),s.jsx(Zr,{label:"Live"}),s.jsx(Zr,{label:"Pro"})]}),pv_ui_xp_ticks2:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xs",children:[s.jsxs("div",{className:"g4-xpbar",children:[s.jsx("div",{className:"g4-xp-fill",style:{width:"78%"}}),Array.from({length:9}).map((t,e)=>s.jsx("span",{className:"g4-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsxs("div",{className:"g4-row g4-gap-xs",children:[s.jsx(Zr,{label:"Lvl 56"}),s.jsx(Zr,{label:"78%"})]})]}),pv_ui_dual_marker_bar:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsxs("div",{className:"g4-bar-line",children:[s.jsx(ns,{width:"92%"}),s.jsx("div",{className:"g4-marker",style:{left:"64%"}}),s.jsx("div",{className:"g4-marker muted",style:{left:"82%"}})]}),s.jsxs("div",{className:"g4-row g4-gap-sm g4-center",children:[s.jsx(Zr,{label:"You"}),s.jsx(Zr,{label:"Avg"})]})]}),pv_ui_donut_label:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-donut",children:[s.jsx("div",{className:"g4-donut-fill"}),s.jsx("div",{className:"g4-donut-hole",children:"64%"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(ns,{width:"60%"}),s.jsx(ns,{width:"40%",tone:"muted"})]})]}),pv_ui_segment_track_12:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xxs g4-seg-track",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:`g4-track-seg ${e<8?"active":""}`},e))}),pv_ui_thermo_cap:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-thermo",children:[s.jsx("div",{className:"g4-thermo-fill",style:{height:"70%"}}),s.jsx("div",{className:"g4-thermo-cap"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(ns,{width:"50%",tone:"warning"}),s.jsx(ns,{width:"30%",tone:"muted"})]})]}),pv_ui_battery_cells:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-battery",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g4-battery-cell ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g4-battery-cap"})]}),s.jsx(Zr,{label:"75%"})]}),pv_ui_microbars_5:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["ATK","SPD","HP","DEF","LCK"].map((t,e)=>s.jsxs("div",{className:"g4-row g4-gap-xs g4-center",children:[s.jsx("span",{className:"g4-stat-label",children:t}),s.jsx(ns,{width:`${40+e*12}%`,tone:e%2===0?"accent":"success",height:6})]},t))}),pv_ui_streak_chain:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xxs g4-center",children:Array.from({length:8}).map((t,e)=>s.jsxs(q.Fragment,{children:[s.jsx("span",{className:`g4-chain-dot ${e<5?"active":""}`}),e<7&&s.jsx("div",{className:"g4-chain-link"})]},e))}),pv_ui_risk_semi_dial:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsx("div",{className:"g4-semi-dial",children:s.jsx("div",{className:"g4-dial-needle",style:{transform:"rotate(30deg)"}})}),s.jsx(Zr,{label:"Risk 34%"})]}),pv_ui_goal_ladder:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs g4-ladder",children:[1,2,3,4].map((t,e)=>s.jsxs("div",{className:`g4-ladder-step ${e<2?"done":""}`,children:[s.jsx("span",{className:"g4-ladder-rung"}),s.jsx(ns,{width:`${40+e*10}%`,tone:"accent",height:6})]},t))}),pv_ui_leaderboard_5:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Aster","Bloom","Cinder","Dawn","Echo"].map((t,e)=>s.jsxs("div",{className:`g4-row g4-gap-sm g4-leader-row ${e===0?"active":""}`,children:[s.jsx("span",{className:"g4-rank-num",children:e+1}),s.jsx(ns,{width:`${70-e*8}%`,tone:e<2?"accent":"muted",height:6}),s.jsx(Zr,{label:"+12"})]},t))}),pv_ui_kpi_list_2col:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:[["Win rate","62%"],["Uptime","99.1%"],["Scan time","4.3s"]].map(([t,e])=>s.jsxs("div",{className:"g4-row g4-space-between g4-center",children:[s.jsx("span",{className:"g4-label",children:t}),s.jsx("span",{className:"g4-value",children:e})]},t))}),pv_ui_table_hover:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Row A","Row B","Row C"].map((t,e)=>s.jsx("div",{className:`g4-table-row ${e===1?"hover":""}`,children:s.jsx(ns,{width:"60%",tone:"muted",height:6})},t))}),pv_ui_rank_delta_row:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx(Zr,{label:" +6"}),s.jsx(Zr,{label:" -2"}),s.jsx(ns,{width:"50%",tone:"accent"})]}),pv_ui_avatar_list3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Aria","Bex","Cole"].map((t,e)=>s.jsxs("div",{className:"g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-avatar",children:t[0]}),s.jsx(ns,{width:`${50+e*10}%`,tone:"accent",height:6})]},t))}),pv_ui_timeline_row:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:["Step 1","Step 2","Step 3"].map((t,e)=>s.jsxs("div",{className:"g4-col g4-center g4-gap-xxs",children:[s.jsx("span",{className:`g4-timeline-dot ${e<=1?"active":""}`}),s.jsx("span",{className:"g4-mini-label",children:t})]},t))}),pv_ui_split_panel_list:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx("span",{className:"g4-label",children:"Power"}),s.jsx("span",{className:"g4-label",children:"Speed"}),s.jsx("span",{className:"g4-label",children:"Luck"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(ns,{width:"60%"}),s.jsx(ns,{width:"40%",tone:"warning"}),s.jsx(ns,{width:"30%",tone:"success"})]})]}),pv_ui_chip_counts:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xs g4-wrap",children:[["Tanks","12"],["Healers","5"],["DPS","18"],["Support","7"]].map(([t,e],n)=>s.jsxs("span",{className:`g4-chip ${n===2?"active":""}`,children:[t," ",s.jsx("span",{className:"g4-count",children:e})]},t))}),pv_ui_accordion3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Summary","Details","Meta"].map((t,e)=>s.jsxs("div",{className:`g4-accordion ${e===0?"open":""}`,children:[s.jsxs("div",{className:"g4-accordion-head",children:[s.jsx("span",{children:t}),s.jsx("span",{className:"g4-chevron"})]}),e===0&&s.jsxs("div",{className:"g4-accordion-body",children:[s.jsx(ns,{width:"70%",tone:"muted"}),s.jsx(ns,{width:"40%",tone:"muted"})]})]},t))}),pv_ui_spark_row:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsx("div",{className:"g4-sparkline",children:Array.from({length:12}).map((t,e)=>s.jsx("span",{style:{height:`${8+e%5*6}px`}},e))}),s.jsx(Zr,{label:"72%"})]}),pv_ui_pulse_progress2:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsx("div",{className:"g4-pulse-bar",children:s.jsx("div",{className:"g4-pulse-fill",style:{width:"68%"}})}),s.jsx("span",{className:"g4-mini-label",children:"Syncing"})]}),pv_ui_unlock_glow2:()=>s.jsxs("div",{className:"g4-preview g4-glow-card",children:[s.jsx("div",{className:"g4-lock-icon",children:""}),s.jsx(ns,{width:"60%"})]}),pv_ui_skeleton_shimmer:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsx("div",{className:"g4-skeleton shimmer"}),s.jsx("div",{className:"g4-skeleton shimmer short"})]}),pv_ui_confetti_dots2:()=>s.jsx("div",{className:"g4-preview g4-confetti",children:Array.from({length:14}).map((t,e)=>s.jsx("span",{className:"g4-confetti-dot"},e))}),pv_ui_hover_lift:()=>s.jsxs("div",{className:"g4-preview g4-hover-card",children:[s.jsx(ns,{width:"70%"}),s.jsx(ns,{width:"50%",tone:"muted"})]}),pv_ui_ping_indicator:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsx("div",{className:"g4-ping",children:s.jsx("span",{className:"g4-ping-dot"})}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(ns,{width:"50%"}),s.jsx(ns,{width:"30%",tone:"muted"})]})]}),pv_ui_badge_pop:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-pop-badge",children:"UI"}),s.jsx(ns,{width:"60%"})]}),pv_ui_toggle_flip:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-toggle",children:s.jsx("div",{className:"g4-toggle-thumb"})}),s.jsx("span",{className:"g4-mini-label",children:"Flip"})]}),pv_ui_stripe_motion:()=>s.jsx("div",{className:"g4-preview g4-stripes",children:s.jsx("div",{className:"g4-stripe-fill",style:{width:"72%"}})}),pv_ui_bell_pulse:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-bell",children:s.jsx("span",{className:"g4-bell-ping"})}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(ns,{width:"55%"}),s.jsx(ns,{width:"35%",tone:"muted"})]})]})},kIe=t=>{const e=NIe[t];return e?e():s.jsx("div",{className:"g4-preview g4-fallback"})};function CIe(){return s.jsxs("div",{className:"g4-root",children:[s.jsxs("header",{className:"g4-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 4"}),s.jsx("p",{className:"g4-sub",children:"50 UI mini-previews focused on controls, overlays, meters, tables, and animated bits."})]}),s.jsx("div",{className:"g4-pill-row",children:s.jsx(Zr,{label:"UI"})})]}),s.jsx("nav",{className:"g4-toc",children:UI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g4-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g4-sections",children:UI.map(t=>s.jsxs("details",{className:"g4-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g4-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g4-section-title",children:t.title}),s.jsx("div",{className:"g4-section-sub",children:t.description})]}),s.jsxs("span",{className:"g4-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g4-grid",children:t.items.map(e=>s.jsxs("div",{className:"g4-card",children:[s.jsxs("div",{className:"g4-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g4-card-title",children:e.title}),s.jsx("div",{className:"g4-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g4-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(Zr,{label:n},n))})]}),kIe(e.previewId)]},e.id))})]},t.id))})]})}const zI=[{id:"meta",title:"Meta Systems",description:"Loops, ladders, and macro-structure sketches.",items:[{id:"1",categoryId:"meta",title:"Prestige Loop Diagram",subtitle:"reset + boost",tags:["CONCEPT"],previewId:"pv_cpt_prestige_loop"},{id:"2",categoryId:"meta",title:"Seasonal Arc Map",subtitle:"startend path",tags:["CONCEPT"],previewId:"pv_cpt_season_arc"},{id:"3",categoryId:"meta",title:"Progress Economy Flow",subtitle:"earnspendupgrade",tags:["CONCEPT"],previewId:"pv_cpt_economy_flow"},{id:"4",categoryId:"meta",title:"Skill Synergy Web",subtitle:"nodes + links",tags:["CONCEPT"],previewId:"pv_cpt_synergy_web"},{id:"5",categoryId:"meta",title:"Difficulty Curve",subtitle:"soft curve concept",tags:["CONCEPT"],previewId:"pv_cpt_difficulty_curve"},{id:"6",categoryId:"meta",title:"Reward Probability Bands",subtitle:"bands/tiers",tags:["CONCEPT"],previewId:"pv_cpt_prob_bands"},{id:"7",categoryId:"meta",title:"Milestone Radar",subtitle:"milestones ring",tags:["CONCEPT"],previewId:"pv_cpt_milestone_radar"},{id:"8",categoryId:"meta",title:"Collection Completion Map",subtitle:"zones filled",tags:["CONCEPT"],previewId:"pv_cpt_collection_map"},{id:"9",categoryId:"meta",title:"Engagement Flywheel",subtitle:"cycle arrows",tags:["CONCEPT"],previewId:"pv_cpt_flywheel"},{id:"10",categoryId:"meta",title:"Reputation Ladder",subtitle:"tiers + gates",tags:["CONCEPT"],previewId:"pv_cpt_reputation_ladder"}]},{id:"planning",title:"Planning & Strategy",description:"Allocation, risks, paths, and scenarios.",items:[{id:"11",categoryId:"planning",title:"Optimization Triangle",subtitle:"choose 2 of 3",tags:["CONCEPT"],previewId:"pv_cpt_opt_triangle"},{id:"12",categoryId:"planning",title:"Resource Allocation Bars",subtitle:"split budget",tags:["CONCEPT"],previewId:"pv_cpt_allocation_bars"},{id:"13",categoryId:"planning",title:"Upgrade Path Tree",subtitle:"branch choices",tags:["CONCEPT"],previewId:"pv_cpt_upgrade_tree"},{id:"14",categoryId:"planning",title:"Risk/Reward Matrix",subtitle:"4 quadrants",tags:["CONCEPT"],previewId:"pv_cpt_risk_reward_matrix"},{id:"15",categoryId:"planning",title:"Time-to-Goal Estimator",subtitle:"ETA blocks",tags:["CONCEPT"],previewId:"pv_cpt_eta_blocks"},{id:"16",categoryId:"planning",title:"Rival Distance Map",subtitle:"gaps + targets",tags:["CONCEPT"],previewId:"pv_cpt_rival_distance_map"},{id:"17",categoryId:"planning",title:"Power Spike Timeline",subtitle:"spike markers",tags:["CONCEPT"],previewId:"pv_cpt_power_spike_timeline"},{id:"18",categoryId:"planning",title:"Weekly Strategy Board",subtitle:"3 focus cards",tags:["CONCEPT"],previewId:"pv_cpt_weekly_board"},{id:"19",categoryId:"planning",title:"Breakpoint Indicators",subtitle:"threshold lines",tags:["CONCEPT"],previewId:"pv_cpt_breakpoints"},{id:"20",categoryId:"planning",title:"Scenario Switcher",subtitle:"A/B/C outcomes",tags:["CONCEPT"],previewId:"pv_cpt_scenarios_abc"}]},{id:"social",title:"Social Concepts",description:"Guild health, equity, coverage, and momentum ideas.",items:[{id:"21",categoryId:"social",title:"Guild Health Dashboard",subtitle:"pillars concept",tags:["CONCEPT"],previewId:"pv_cpt_guild_health"},{id:"22",categoryId:"social",title:"Contribution Equity Meter",subtitle:"fairness bar",tags:["CONCEPT"],previewId:"pv_cpt_equity_meter"},{id:"23",categoryId:"social",title:"Role Coverage Grid",subtitle:"roles coverage",tags:["CONCEPT"],previewId:"pv_cpt_role_coverage"},{id:"24",categoryId:"social",title:"Alliance Network Graph",subtitle:"nodes network",tags:["CONCEPT"],previewId:"pv_cpt_alliance_graph"},{id:"25",categoryId:"social",title:"Recruitment Funnel",subtitle:"stages funnel",tags:["CONCEPT"],previewId:"pv_cpt_recruit_funnel"},{id:"26",categoryId:"social",title:"Activity Rhythm Wheel",subtitle:"cycle wheel",tags:["CONCEPT"],previewId:"pv_cpt_rhythm_wheel"},{id:"27",categoryId:"social",title:"Leadership Heat Zones",subtitle:"zones concept",tags:["CONCEPT"],previewId:"pv_cpt_leadership_zones"},{id:"28",categoryId:"social",title:"Social Momentum Score",subtitle:"momentum line",tags:["CONCEPT"],previewId:"pv_cpt_social_momentum"},{id:"29",categoryId:"social",title:"Collaboration Contract",subtitle:"agreement card",tags:["CONCEPT"],previewId:"pv_cpt_collab_contract"},{id:"30",categoryId:"social",title:"Community Challenge Pool",subtitle:"pool + goals",tags:["CONCEPT"],previewId:"pv_cpt_challenge_pool"}]},{id:"insights",title:"Insights Concepts",description:"Signals, outliers, archetypes, and opportunity maps.",items:[{id:"31",categoryId:"insights",title:"Trend vs Noise Lens",subtitle:"signal filter",tags:["CONCEPT"],previewId:"pv_cpt_signal_noise"},{id:"32",categoryId:"insights",title:"Outlier Detector Panel",subtitle:"flagged dots",tags:["CONCEPT"],previewId:"pv_cpt_outlier_panel"},{id:"33",categoryId:"insights",title:"Consistency Index",subtitle:"stability meter",tags:["CONCEPT"],previewId:"pv_cpt_consistency_index"},{id:"34",categoryId:"insights",title:"Growth Regimes",subtitle:"phases blocks",tags:["CONCEPT"],previewId:"pv_cpt_growth_regimes"},{id:"35",categoryId:"insights",title:"Player Archetypes",subtitle:"3 archetype cards",tags:["CONCEPT"],previewId:"pv_cpt_archetypes"},{id:"36",categoryId:"insights",title:"Benchmark Stack",subtitle:"compare layers",tags:["CONCEPT"],previewId:"pv_cpt_benchmark_stack"},{id:"37",categoryId:"insights",title:"KPI Storyboard",subtitle:"3-step insight",tags:["CONCEPT"],previewId:"pv_cpt_kpi_storyboard"},{id:"38",categoryId:"insights",title:"Efficiency Frontier",subtitle:"frontier curve",tags:["CONCEPT"],previewId:"pv_cpt_efficiency_frontier"},{id:"39",categoryId:"insights",title:"Progress Forecast Bands",subtitle:"band forecast",tags:["CONCEPT"],previewId:"pv_cpt_forecast_bands"},{id:"40",categoryId:"insights",title:"Opportunity Radar",subtitle:"radar points",tags:["CONCEPT"],previewId:"pv_cpt_opportunity_radar"}]},{id:"loops",title:"Gamification Loops",description:"Cadence, multipliers, chains, caps, and rewards.",items:[{id:"41",categoryId:"loops",title:"Daily/Weekly Loop",subtitle:"cadence map",tags:["CONCEPT"],previewId:"pv_cpt_cadence_loop"},{id:"42",categoryId:"loops",title:"Reward Multipliers",subtitle:"stacked multipliers",tags:["CONCEPT"],previewId:"pv_cpt_multiplier_stack"},{id:"43",categoryId:"loops",title:"Quest Chain System",subtitle:"chain gates",tags:["CONCEPT"],previewId:"pv_cpt_chain_gates"},{id:"44",categoryId:"loops",title:"Badge Progression",subtitle:"ranked badges",tags:["CONCEPT"],previewId:"pv_cpt_badge_progression"},{id:"45",categoryId:"loops",title:"Streak Protection",subtitle:"shield mechanic",tags:["CONCEPT"],previewId:"pv_cpt_streak_shield"},{id:"46",categoryId:"loops",title:"Catch-up Mechanic",subtitle:"boost for low",tags:["CONCEPT"],previewId:"pv_cpt_catchup"},{id:"47",categoryId:"loops",title:"Event Spike Model",subtitle:"event peaks",tags:["CONCEPT"],previewId:"pv_cpt_event_spikes"},{id:"48",categoryId:"loops",title:"Soft Cap Concept",subtitle:"diminishing returns",tags:["CONCEPT"],previewId:"pv_cpt_soft_cap"},{id:"49",categoryId:"loops",title:"Reward Choice Wheel",subtitle:"choose 1 of 3",tags:["CONCEPT"],previewId:"pv_cpt_choice_wheel"},{id:"50",categoryId:"loops",title:"Meta Progress Passport",subtitle:"stamps journey",tags:["CONCEPT"],previewId:"pv_cpt_passport"}]}],ed=({label:t})=>s.jsx("span",{className:"g5-pill",children:t}),Ul=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g5-bar tone-${e}`,style:{width:t,height:n}}),N1=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g5-dot tone-${t}`,style:{width:e,height:e}}),TIe={pv_cpt_prestige_loop:()=>s.jsx("div",{className:"g5-preview g5-loop",children:["Earn","Reset","Boost"].map((t,e)=>s.jsxs("div",{className:"g5-loop-node",children:[s.jsx("span",{className:"g5-loop-label",children:t}),s.jsx("div",{className:`g5-loop-arrow ${e===2?"end":""}`})]},t))}),pv_cpt_season_arc:()=>s.jsxs("div",{className:"g5-preview g5-arc",children:[s.jsx("div",{className:"g5-arc-track",children:s.jsx("div",{className:"g5-arc-progress",style:{width:"70%"}})}),s.jsxs("div",{className:"g5-row g5-space-between g5-mini",children:[s.jsx("span",{children:"Start"}),s.jsx("span",{children:"Season"}),s.jsx("span",{children:"Final"})]})]}),pv_cpt_economy_flow:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-flow-card",children:"Earn"}),s.jsx("div",{className:"g5-flow-arrow"}),s.jsx("div",{className:"g5-flow-card alt",children:"Spend"}),s.jsx("div",{className:"g5-flow-arrow"}),s.jsx("div",{className:"g5-flow-card",children:"Upgrade"})]}),pv_cpt_synergy_web:()=>s.jsxs("div",{className:"g5-preview g5-web",children:[s.jsx("div",{className:"g5-web-node center"}),Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g5-web-node arm-${e}`},e))]}),pv_cpt_difficulty_curve:()=>s.jsxs("div",{className:"g5-preview g5-curve",children:[s.jsx("div",{className:"g5-curve-line"}),s.jsx("div",{className:"g5-dot tone-accent",style:{left:"25%"}}),s.jsx("div",{className:"g5-dot tone-warning",style:{left:"70%"}})]}),pv_cpt_prob_bands:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Common","Rare","Epic"].map((t,e)=>s.jsxs("div",{className:"g5-band",children:[s.jsx("span",{className:"g5-band-label",children:t}),s.jsx("div",{className:`g5-band-fill tone-${e===2?"warning":"accent"}`,style:{width:`${40+e*20}%`}})]},t))}),pv_cpt_milestone_radar:()=>s.jsxs("div",{className:"g5-preview g5-radar",children:[s.jsx("div",{className:"g5-radar-ring outer"}),s.jsx("div",{className:"g5-radar-ring inner"}),s.jsx(N1,{tone:"warning",size:10}),s.jsx(N1,{tone:"accent",size:8}),s.jsx(N1,{tone:"success",size:8})]}),pv_cpt_collection_map:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g5-zone ${e<3?"filled":""}`},e))}),pv_cpt_flywheel:()=>s.jsxs("div",{className:"g5-preview g5-flywheel",children:[s.jsx("div",{className:"g5-flywheel-ring"}),s.jsx("div",{className:"g5-flywheel-arrow a1"}),s.jsx("div",{className:"g5-flywheel-arrow a2"}),s.jsx("div",{className:"g5-flywheel-arrow a3"})]}),pv_cpt_reputation_ladder:()=>s.jsx("div",{className:"g5-preview g5-ladder",children:[0,1,2,3].map(t=>s.jsxs("div",{className:`g5-tier ${t<2?"active":""}`,children:["Tier ",t+1]},t))}),pv_cpt_opt_triangle:()=>s.jsxs("div",{className:"g5-preview g5-triangle",children:[s.jsx("div",{className:"g5-tri-corner top",children:"Speed"}),s.jsx("div",{className:"g5-tri-corner left",children:"Quality"}),s.jsx("div",{className:"g5-tri-corner right",children:"Cost"}),s.jsx("div",{className:"g5-tri-fill"})]}),pv_cpt_allocation_bars:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Gold","Gems","Energy"].map((t,e)=>s.jsxs("div",{className:"g5-row g5-gap-sm g5-center",children:[s.jsx("span",{className:"g5-label",children:t}),s.jsx(Ul,{width:`${30+e*15}%`,tone:e===1?"warning":"accent",height:6})]},t))}),pv_cpt_upgrade_tree:()=>s.jsxs("div",{className:"g5-preview g5-tree",children:[s.jsx("div",{className:"g5-tree-node root"}),s.jsxs("div",{className:"g5-tree-branch left",children:[s.jsx("div",{className:"g5-tree-node"}),s.jsx("div",{className:"g5-tree-node"})]}),s.jsxs("div",{className:"g5-tree-branch right",children:[s.jsx("div",{className:"g5-tree-node"}),s.jsx("div",{className:"g5-tree-node"})]})]}),pv_cpt_risk_reward_matrix:()=>s.jsxs("div",{className:"g5-preview g5-matrix",children:[s.jsx("div",{className:"g5-matrix-quad high",children:"High Reward"}),s.jsx("div",{className:"g5-matrix-quad",children:"Low Reward"}),s.jsx("div",{className:"g5-matrix-quad",children:"Low Risk"}),s.jsx("div",{className:"g5-matrix-quad warn",children:"High Risk"})]}),pv_cpt_eta_blocks:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-xs",children:["10d","20d","30d"].map((t,e)=>s.jsx("div",{className:`g5-eta-block ${e===2?"active":""}`,children:t},t))}),pv_cpt_rival_distance_map:()=>s.jsxs("div",{className:"g5-preview g5-row g5-center g5-gap-sm",children:[s.jsx("div",{className:"g5-distance",children:s.jsxs("div",{className:"g5-distance-line",children:[s.jsx("div",{className:"g5-distance-marker you",style:{left:"22%"}}),s.jsx("div",{className:"g5-distance-marker rival",style:{left:"62%"}})]})}),s.jsx(ed,{label:"Gap 40%"})]}),pv_cpt_power_spike_timeline:()=>s.jsxs("div",{className:"g5-preview g5-col g5-gap-xxs",children:[s.jsx("div",{className:"g5-spike-line",children:[20,60,80].map((t,e)=>s.jsx("div",{className:"g5-spike",style:{left:`${t}%`},children:s.jsx("div",{className:`g5-spike-pin ${e===2?"strong":""}`})},t))}),s.jsx("div",{className:"g5-mini",children:"Power spikes"})]}),pv_cpt_weekly_board:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:["Focus","Risks","Wins"].map(t=>s.jsxs("div",{className:"g5-cardlet",children:[s.jsx(Ul,{width:"60%"}),s.jsx(Ul,{width:"40%",tone:"muted"})]},t))}),pv_cpt_breakpoints:()=>s.jsx("div",{className:"g5-preview g5-breakpoints",children:[25,50,75].map(t=>s.jsx("div",{className:"g5-breakpoint",style:{left:`${t}%`},children:s.jsx("span",{children:t})},t))}),pv_cpt_scenarios_abc:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:["A","B","C"].map((t,e)=>s.jsxs("div",{className:`g5-scenario ${e===1?"active":""}`,children:[s.jsx("div",{className:"g5-scenario-title",children:t}),s.jsx(Ul,{width:`${40+e*10}%`,tone:"accent"})]},t))}),pv_cpt_guild_health:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[[50,70,40].map((t,e)=>s.jsx("div",{className:"g5-pillar",children:s.jsx("div",{className:"g5-pillar-fill",style:{height:`${t}%`}})},e)),s.jsx(ed,{label:"Guild Health"})]}),pv_cpt_equity_meter:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-meter",children:s.jsx("div",{className:"g5-meter-fill",style:{width:"56%"}})}),s.jsx("span",{className:"g5-mini",children:"Fair"})]}),pv_cpt_role_coverage:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:["Tank","Heal","DPS"].map((t,e)=>s.jsxs("div",{className:"g5-role",children:[s.jsx("div",{className:"g5-role-bar",style:{width:`${40+e*15}%`}}),s.jsx("span",{className:"g5-mini",children:t})]},t))}),pv_cpt_alliance_graph:()=>s.jsxs("div",{className:"g5-preview g5-network",children:[[0,1,2,3,4].map(t=>s.jsx("div",{className:`g5-node n${t}`},t)),s.jsx("div",{className:"g5-link l1"}),s.jsx("div",{className:"g5-link l2"}),s.jsx("div",{className:"g5-link l3"})]}),pv_cpt_recruit_funnel:()=>s.jsxs("div",{className:"g5-preview g5-funnel",children:[s.jsx("div",{className:"g5-funnel-layer big"}),s.jsx("div",{className:"g5-funnel-layer mid"}),s.jsx("div",{className:"g5-funnel-layer small"})]}),pv_cpt_rhythm_wheel:()=>s.jsx("div",{className:"g5-preview g5-wheel",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:`g5-wheel-dot ${e%2===0?"active":""}`},e))}),pv_cpt_leadership_zones:()=>s.jsxs("div",{className:"g5-preview g5-zones",children:[s.jsx("div",{className:"g5-zone-block warm"}),s.jsx("div",{className:"g5-zone-block cool"}),s.jsx("div",{className:"g5-zone-block neutral"})]}),pv_cpt_social_momentum:()=>s.jsxs("div",{className:"g5-preview g5-linechart",children:[s.jsx("div",{className:"g5-line-path"}),s.jsx("div",{className:"g5-line-marker",style:{left:"70%"}})]}),pv_cpt_collab_contract:()=>s.jsxs("div",{className:"g5-preview g5-contract",children:[s.jsx(Ul,{width:"70%"}),s.jsx(Ul,{width:"40%",tone:"muted"}),s.jsx("div",{className:"g5-signature"})]}),pv_cpt_challenge_pool:()=>s.jsxs("div",{className:"g5-preview g5-pool",children:[s.jsx("div",{className:"g5-pool-water"}),s.jsx("div",{className:"g5-goal-chip",children:"Goal A"}),s.jsx("div",{className:"g5-goal-chip",children:"Goal B"})]}),pv_cpt_signal_noise:()=>s.jsxs("div",{className:"g5-preview g5-signal",children:[s.jsx("div",{className:"g5-signal-band strong"}),s.jsx("div",{className:"g5-signal-band weak"}),s.jsx("div",{className:"g5-filter"})]}),pv_cpt_outlier_panel:()=>s.jsx("div",{className:"g5-preview g5-scatter",children:Array.from({length:8}).map((t,e)=>s.jsx("span",{className:`g5-scatter-dot ${e===7?"alert":""}`},e))}),pv_cpt_consistency_index:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-gauge",children:s.jsx("div",{className:"g5-gauge-fill",style:{width:"72%"}})}),s.jsx(ed,{label:"Stable"})]}),pv_cpt_growth_regimes:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Launch","Scale","Mature"].map((t,e)=>s.jsxs("div",{className:"g5-phase",children:[s.jsx("div",{className:`g5-phase-box ${e===1?"active":""}`}),s.jsx("span",{className:"g5-mini",children:t})]},t))}),pv_cpt_archetypes:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:["Explorer","Achiever","Social"].map(t=>s.jsxs("div",{className:"g5-arch-card",children:[s.jsx(Ul,{width:"60%"}),s.jsx("div",{className:"g5-arch-badge",children:t[0]})]},t))}),pv_cpt_benchmark_stack:()=>s.jsxs("div",{className:"g5-preview g5-stack",children:[s.jsx("div",{className:"g5-stack-layer"}),s.jsx("div",{className:"g5-stack-layer mid"}),s.jsx("div",{className:"g5-stack-layer top"})]}),pv_cpt_kpi_storyboard:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:[1,2,3].map(t=>s.jsxs("div",{className:"g5-story-card",children:[s.jsxs("span",{className:"g5-story-step",children:["Step ",t]}),s.jsx(Ul,{width:"50%"})]},t))}),pv_cpt_efficiency_frontier:()=>s.jsxs("div",{className:"g5-preview g5-frontier",children:[s.jsx("div",{className:"g5-frontier-curve"}),s.jsx("div",{className:"g5-frontier-dot"})]}),pv_cpt_forecast_bands:()=>s.jsxs("div",{className:"g5-preview g5-bands",children:[s.jsx("div",{className:"g5-band-line upper"}),s.jsx("div",{className:"g5-band-line lower"}),s.jsx("div",{className:"g5-band-fill"})]}),pv_cpt_opportunity_radar:()=>s.jsx("div",{className:"g5-preview g5-radar-grid",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:"g5-radar-dot"},e))}),pv_cpt_cadence_loop:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-loop-mini daily",children:"Daily"}),s.jsx("div",{className:"g5-loop-mini weekly active",children:"Weekly"}),s.jsx("div",{className:"g5-loop-mini monthly",children:"Monthly"})]}),pv_cpt_multiplier_stack:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:[1,2,3].map(t=>s.jsxs("div",{className:"g5-multiplier",children:[s.jsxs("span",{children:["x",t]}),s.jsx("div",{className:"g5-multi-bar",style:{width:`${t*20+30}%`}})]},t))}),pv_cpt_chain_gates:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-xs g5-center",children:["Q1","Q2","Q3","Boss"].map((t,e)=>s.jsxs(q.Fragment,{children:[s.jsx("div",{className:`g5-gate ${e===3?"final":""}`,children:t}),e<3&&s.jsx("div",{className:"g5-gate-line"})]},t))}),pv_cpt_badge_progression:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:["Bronze","Silver","Gold"].map((t,e)=>s.jsx("div",{className:`g5-badge ${e===2?"shine":""}`,children:t[0]},t))}),pv_cpt_streak_shield:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-shield",children:"Streak"}),s.jsx(ed,{label:"Protected"})]}),pv_cpt_catchup:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-boost-bar",children:s.jsx("div",{className:"g5-boost-fill",style:{width:"45%"}})}),s.jsx(ed,{label:"+Catch Up"})]}),pv_cpt_event_spikes:()=>s.jsxs("div",{className:"g5-preview g5-col g5-gap-xxs",children:[s.jsx("div",{className:"g5-spike-line",children:Array.from({length:5}).map((t,e)=>s.jsx("div",{className:"g5-spike event",style:{left:`${e*20}%`,height:`${10+e*8}px`}},e))}),s.jsx("span",{className:"g5-mini",children:"Events"})]}),pv_cpt_soft_cap:()=>s.jsxs("div",{className:"g5-preview g5-softcap",children:[s.jsx("div",{className:"g5-softcap-line"}),s.jsx("div",{className:"g5-softcap-cap",style:{left:"65%"}})]}),pv_cpt_choice_wheel:()=>s.jsx("div",{className:"g5-preview g5-wheel-choice",children:["A","B","C"].map((t,e)=>s.jsx("div",{className:`g5-choice ${e===0?"active":""}`,children:t},t))}),pv_cpt_passport:()=>s.jsx("div",{className:"g5-preview g5-passport",children:["Zone 1","Zone 2","Zone 3"].map((t,e)=>s.jsx("div",{className:`g5-stamp ${e<2?"filled":""}`,children:t},t))})},IIe=t=>{const e=TIe[t];return e?e():s.jsx("div",{className:"g5-preview g5-fallback"})};function EIe(){return s.jsxs("div",{className:"g5-root",children:[s.jsxs("header",{className:"g5-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 5"}),s.jsx("p",{className:"g5-sub",children:"50 concept sketches across macro systems, planning, social, insights, and loops."})]}),s.jsx("div",{className:"g5-pill-row",children:s.jsx(ed,{label:"CONCEPT"})})]}),s.jsx("nav",{className:"g5-toc",children:zI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g5-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g5-sections",children:zI.map(t=>s.jsxs("details",{className:"g5-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g5-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g5-section-title",children:t.title}),s.jsx("div",{className:"g5-section-sub",children:t.description})]}),s.jsxs("span",{className:"g5-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g5-grid",children:t.items.map(e=>s.jsxs("div",{className:"g5-card",children:[s.jsxs("div",{className:"g5-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g5-card-title",children:e.title}),s.jsx("div",{className:"g5-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g5-pill-row",children:(e.tags||["CONCEPT"]).map(n=>s.jsx(ed,{label:n},n))})]}),IIe(e.previewId)]},e.id))})]},t.id))})]})}const GI=[{id:"profile",title:"Profile Widgets",description:"Compact profile cards, KPIs, and progression snippets.",items:[{id:"1",categoryId:"profile",title:"Hero Panel Mini",subtitle:"avatar + 3 KPIs",tags:["MOCK"],previewId:"pv_mock_hero_panel_mini"},{id:"2",categoryId:"profile",title:"Attribute Bars Card",subtitle:"5 bars + markers",tags:["MOCK"],previewId:"pv_mock_attr_bars"},{id:"3",categoryId:"profile",title:"Scan Freshness Badge",subtitle:"age + color",tags:["MOCK"],previewId:"pv_mock_scan_freshness"},{id:"4",categoryId:"profile",title:"Profile Tabs Strip",subtitle:"overview/scans/etc",tags:["MOCK"],previewId:"pv_mock_profile_tabs"},{id:"5",categoryId:"profile",title:"Linked Characters Row",subtitle:"tabs switch",tags:["MOCK"],previewId:"pv_mock_linked_chars"},{id:"6",categoryId:"profile",title:"Snapshot Compare Card",subtitle:"then vs now",tags:["MOCK"],previewId:"pv_mock_snapshot_compare"},{id:"7",categoryId:"profile",title:"Rank Delta Inline",subtitle:"rank + arrows",tags:["MOCK"],previewId:"pv_mock_rank_inline"},{id:"8",categoryId:"profile",title:"Scrapbook Completion Tile",subtitle:"% + ring",tags:["MOCK"],previewId:"pv_mock_scrapbook_tile"},{id:"9",categoryId:"profile",title:"Legendary Counter Card",subtitle:"count + rarity",tags:["MOCK"],previewId:"pv_mock_legendary_counter"},{id:"10",categoryId:"profile",title:"Progress History Mini",subtitle:"tiny history list",tags:["MOCK"],previewId:"pv_mock_history_mini"}]},{id:"guild",title:"Guild Widgets",description:"Guild header, queues, planner tiles, and readiness snapshots.",items:[{id:"11",categoryId:"guild",title:"Guild Header Mock",subtitle:"emblem + KPIs",tags:["MOCK"],previewId:"pv_mock_guild_header"},{id:"12",categoryId:"guild",title:"Member List Row",subtitle:"role + last scan",tags:["MOCK"],previewId:"pv_mock_member_row"},{id:"13",categoryId:"guild",title:"Recruitment Card",subtitle:"open slots",tags:["MOCK"],previewId:"pv_mock_recruitment"},{id:"14",categoryId:"guild",title:"Fusion Planner Tile",subtitle:"two guild compare",tags:["MOCK"],previewId:"pv_mock_fusion_tile"},{id:"15",categoryId:"guild",title:"Waitlist Panel",subtitle:"queue preview",tags:["MOCK"],previewId:"pv_mock_waitlist_panel"},{id:"16",categoryId:"guild",title:"Guild Activity Panel",subtitle:"last 7d",tags:["MOCK"],previewId:"pv_mock_guild_activity"},{id:"17",categoryId:"guild",title:"Guild Benchmarks",subtitle:"avg markers",tags:["MOCK"],previewId:"pv_mock_guild_benchmarks"},{id:"18",categoryId:"guild",title:"War Readiness Mock",subtitle:"ready/not",tags:["MOCK"],previewId:"pv_mock_war_readiness2"},{id:"19",categoryId:"guild",title:"Treasury Summary",subtitle:"treasury KPIs",tags:["MOCK"],previewId:"pv_mock_treasury_summary"},{id:"20",categoryId:"guild",title:"Guild Notes Card",subtitle:"pinned notes",tags:["MOCK"],previewId:"pv_mock_guild_notes"}]},{id:"tables",title:"Top Lists / Tables",description:"Tables, filters, timers, pagination, and compare bars.",items:[{id:"21",categoryId:"tables",title:"Toplist Table Card",subtitle:"header + rows",tags:["MOCK"],previewId:"pv_mock_toplist_table"},{id:"22",categoryId:"tables",title:"Rank Change Column",subtitle:" deltas",tags:["MOCK"],previewId:"pv_mock_rank_change_col"},{id:"23",categoryId:"tables",title:"Server Filter Sidebar",subtitle:"filters stack",tags:["MOCK"],previewId:"pv_mock_server_filters"},{id:"24",categoryId:"tables",title:"Class Filter Chips",subtitle:"class chips",tags:["MOCK"],previewId:"pv_mock_class_chips"},{id:"25",categoryId:"tables",title:"Snapshot Timer Pill",subtitle:"next refresh",tags:["MOCK"],previewId:"pv_mock_snapshot_timer"},{id:"26",categoryId:"tables",title:"Pagination Footer Mock",subtitle:"page controls",tags:["MOCK"],previewId:"pv_mock_pagination_footer"},{id:"27",categoryId:"tables",title:"Sticky Header Mock",subtitle:"sticky header row",tags:["MOCK"],previewId:"pv_mock_sticky_header"},{id:"28",categoryId:"tables",title:"Row Expand Detail",subtitle:"expand drawer",tags:["MOCK"],previewId:"pv_mock_row_expand"},{id:"29",categoryId:"tables",title:"Export Button Strip",subtitle:"CSV/Excel",tags:["MOCK"],previewId:"pv_mock_export_strip"},{id:"30",categoryId:"tables",title:"Compare Selected Rows",subtitle:"compare bar",tags:["MOCK"],previewId:"pv_mock_compare_bar"}]},{id:"upload",title:"Upload / Import UX",description:"Queues, validation, progress, notices, and summaries.",items:[{id:"31",categoryId:"upload",title:"Upload Queue Card",subtitle:"pending items",tags:["MOCK"],previewId:"pv_mock_upload_queue"},{id:"32",categoryId:"upload",title:"Dedup Result Toast",subtitle:"created/duplicate",tags:["MOCK"],previewId:"pv_mock_dedup_toast"},{id:"33",categoryId:"upload",title:"Dry-Run Validation Panel",subtitle:"errors list",tags:["MOCK"],previewId:"pv_mock_validation_panel"},{id:"34",categoryId:"upload",title:"Progress Upload Meter",subtitle:"step progress",tags:["MOCK"],previewId:"pv_mock_upload_progress"},{id:"35",categoryId:"upload",title:"Selected Entities Counter",subtitle:"players/guilds",tags:["MOCK"],previewId:"pv_mock_selected_counter"},{id:"36",categoryId:"upload",title:"Token TTL Notice",subtitle:"1015min",tags:["MOCK"],previewId:"pv_mock_ttl_notice"},{id:"37",categoryId:"upload",title:"Privacy Preview Box",subtitle:"what gets sent",tags:["MOCK"],previewId:"pv_mock_privacy_preview"},{id:"38",categoryId:"upload",title:"Error Log Card",subtitle:"recent errors",tags:["MOCK"],previewId:"pv_mock_error_log"},{id:"39",categoryId:"upload",title:"Retry/Backoff Banner",subtitle:"rate limit",tags:["MOCK"],previewId:"pv_mock_retry_banner"},{id:"40",categoryId:"upload",title:"Success Summary Panel",subtitle:"import summary",tags:["MOCK"],previewId:"pv_mock_success_summary"}]},{id:"admin",title:"Admin/Control Panel Mocks",description:"Roles, feature toggles, access groups, and moderation queues.",items:[{id:"41",categoryId:"admin",title:"Roles Context Menu",subtitle:"role switch UI",tags:["MOCK"],previewId:"pv_mock_roles_menu"},{id:"42",categoryId:"admin",title:"Feature Gate Table",subtitle:"toggles rows",tags:["MOCK"],previewId:"pv_mock_feature_table"},{id:"43",categoryId:"admin",title:"Access Group Card",subtitle:"group members",tags:["MOCK"],previewId:"pv_mock_access_group"},{id:"44",categoryId:"admin",title:"Audit Log Row",subtitle:"who changed what",tags:["MOCK"],previewId:"pv_mock_audit_row"},{id:"45",categoryId:"admin",title:"Error Monitor Tile",subtitle:"status lights",tags:["MOCK"],previewId:"pv_mock_error_monitor"},{id:"46",categoryId:"admin",title:"API Status Card",subtitle:"endpoint health",tags:["MOCK"],previewId:"pv_mock_api_status"},{id:"47",categoryId:"admin",title:"Seed Token Warning",subtitle:"internal endpoint",tags:["MOCK"],previewId:"pv_mock_seed_warning"},{id:"48",categoryId:"admin",title:"Moderation Queue",subtitle:"approve/deny",tags:["MOCK"],previewId:"pv_mock_mod_queue"},{id:"49",categoryId:"admin",title:"Feedback Inbox Card",subtitle:"decision buttons",tags:["MOCK"],previewId:"pv_mock_feedback_inbox"},{id:"50",categoryId:"admin",title:"Release Toggle Panel",subtitle:"staging/prod",tags:["MOCK"],previewId:"pv_mock_release_toggle"}]}],Cs=({label:t})=>s.jsx("span",{className:"g6-pill",children:t}),rs=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g6-bar tone-${e}`,style:{width:t,height:n}}),HI=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g6-dot tone-${t}`,style:{width:e,height:e}}),AIe={pv_mock_hero_panel_mini:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-avatar big",children:"A"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"70%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Cs,{label:"XP 42k"}),s.jsx(Cs,{label:"Lvl 58"}),s.jsx(Cs,{label:"WR 62%"})]})]})]}),pv_mock_attr_bars:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["STR","DEX","INT","VIT","LCK"].map((t,e)=>s.jsxs("div",{className:"g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-label",children:t}),s.jsx(rs,{width:`${35+e*12}%`,tone:e%2===0?"accent":"warning",height:6}),s.jsx(HI,{tone:"muted"})]},t))}),pv_mock_scan_freshness:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge fresh",children:"3h ago"}),s.jsx(rs,{width:"50%"})]}),pv_mock_profile_tabs:()=>s.jsx("div",{className:"g6-preview g6-row g6-gap-xs",children:["Overview","Scans","Gear","Notes"].map((t,e)=>s.jsx("div",{className:`g6-tab ${e===1?"active":""}`,children:t},t))}),pv_mock_linked_chars:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[["Main","Alt 1","Alt 2"].map((t,e)=>s.jsx("div",{className:`g6-chip ${e===0?"active":""}`,children:t},t)),s.jsx("div",{className:"g6-arrow-right"})]}),pv_mock_snapshot_compare:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Then"}),s.jsx(rs,{width:"40%",tone:"muted"})]}),s.jsx("div",{className:"g6-compare-arrow"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Now"}),s.jsx(rs,{width:"70%",tone:"accent"})]})]}),pv_mock_rank_inline:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Cs,{label:"#24"}),s.jsx(Cs,{label:" 3"}),s.jsx(Cs,{label:" 1"})]}),pv_mock_scrapbook_tile:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-ring",children:[s.jsx("div",{className:"g6-ring-fill"}),s.jsx("div",{className:"g6-ring-hole",children:"68%"})]}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsx(rs,{width:"35%",tone:"muted"})]})]}),pv_mock_legendary_counter:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-legendary",children:"12"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Legendary"}),s.jsx(rs,{width:"70%",tone:"warning"})]})]}),pv_mock_history_mini:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["+12 Lvl","+2 shards","Joined guild"].map((t,e)=>s.jsxs("div",{className:"g6-history-row",children:[s.jsx(HI,{tone:"accent",size:8}),s.jsx("span",{children:t}),s.jsxs("span",{className:"g6-time",children:[e+1,"d"]})]},t))}),pv_mock_guild_header:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-emblem"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Cs,{label:"Lvl 12"}),s.jsx(Cs,{label:"42 members"})]})]})]}),pv_mock_member_row:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-avatar",children:"M"}),s.jsx(rs,{width:"50%"}),s.jsx(Cs,{label:"Officer"}),s.jsx(Cs,{label:"Scan 1d"})]}),pv_mock_recruitment:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Cs,{label:"Open 3"}),s.jsx(Cs,{label:"Role: DPS"})]})]}),pv_mock_fusion_tile:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"40%"}),s.jsx(Cs,{label:"Guild A"})]}),s.jsx("div",{className:"g6-merge"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"40%"}),s.jsx(Cs,{label:"Guild B"})]})]}),pv_mock_waitlist_panel:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Rae","Noah","Ivy"].map((t,e)=>s.jsxs("div",{className:"g6-wait-row",children:[s.jsx("span",{className:"g6-badge muted",children:e+1}),s.jsx(rs,{width:`${40+e*15}%`})]},t))}),pv_mock_guild_activity:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-heat",children:Array.from({length:7}).map((t,e)=>s.jsx("span",{style:{height:`${10+e*4}px`}},e))}),s.jsx(Cs,{label:"7d"})]}),pv_mock_guild_benchmarks:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Avg","Target","You"].map((t,e)=>s.jsxs("div",{className:"g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-mini",children:t}),s.jsx("div",{className:"g6-marker-line",children:s.jsx("div",{className:"g6-marker",style:{left:`${30+e*20}%`}})})]},t))}),pv_mock_war_readiness2:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx(Cs,{label:"Ready"}),s.jsx(Cs,{label:"Needs Gear"}),s.jsx(Cs,{label:"Needs Scans"})]}),pv_mock_treasury_summary:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Gold"}),s.jsx(rs,{width:"70%",tone:"warning"})]}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Gems"}),s.jsx(rs,{width:"50%",tone:"accent"})]})]}),pv_mock_guild_notes:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("div",{className:"g6-note-pin"}),s.jsx(rs,{width:"65%"}),s.jsx(rs,{width:"40%",tone:"muted"})]}),pv_mock_toplist_table:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-table-head",children:[s.jsx(rs,{width:"30%"}),s.jsx(rs,{width:"20%"}),s.jsx(rs,{width:"25%"})]}),Array.from({length:3}).map((t,e)=>s.jsx("div",{className:"g6-table-row",children:s.jsx(rs,{width:`${60-e*10}%`,tone:"muted",height:6})},e))]}),pv_mock_rank_change_col:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx(Cs,{label:" 8"}),s.jsx(Cs,{label:" 2"}),s.jsx(rs,{width:"40%"})]}),pv_mock_server_filters:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["EU","US","INT"].map((t,e)=>s.jsxs("div",{className:"g6-filter-row",children:[s.jsx("input",{type:"checkbox",checked:e===0,readOnly:!0}),s.jsx("span",{children:t})]},t))}),pv_mock_class_chips:()=>s.jsx("div",{className:"g6-preview g6-row g6-gap-xs g6-wrap",children:["Warrior","Mage","Hunter","Cleric"].map((t,e)=>s.jsx("span",{className:`g6-chip ${e===2?"active":""}`,children:t},t))}),pv_mock_snapshot_timer:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Cs,{label:"Refresh in 03:12"}),s.jsx("div",{className:"g6-ring tiny",children:s.jsx("div",{className:"g6-ring-fill"})})]}),pv_mock_pagination_footer:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-page",children:"Prev"}),[1,2,3].map(t=>s.jsx("span",{className:`g6-page ${t===2?"active":""}`,children:t},t)),s.jsx("span",{className:"g6-page",children:"Next"})]}),pv_mock_sticky_header:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-sticky-head",children:[s.jsx(rs,{width:"40%"}),s.jsx(rs,{width:"20%",tone:"muted"})]}),s.jsx("div",{className:"g6-table-row",children:s.jsx(rs,{width:"70%",tone:"muted",height:6})})]}),pv_mock_row_expand:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-expand-row",children:[s.jsx("span",{className:"g6-chevron"}),s.jsx(rs,{width:"50%"})]}),s.jsxs("div",{className:"g6-expand-body",children:[s.jsx(rs,{width:"60%",tone:"muted"}),s.jsx(rs,{width:"40%",tone:"muted"})]})]}),pv_mock_export_strip:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs",children:[s.jsx("button",{className:"g6-btn ghost",children:"CSV"}),s.jsx("button",{className:"g6-btn ghost",children:"Excel"}),s.jsx("button",{className:"g6-btn solid",children:"Export"})]}),pv_mock_compare_bar:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(rs,{width:"60%",tone:"accent"}),s.jsx(Cs,{label:"2 selected"})]}),pv_mock_upload_queue:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["players.csv","guilds.csv"].map(t=>s.jsxs("div",{className:"g6-queue-row",children:[s.jsx(rs,{width:"50%"}),s.jsx("span",{className:"g6-mini",children:t})]},t))}),pv_mock_dedup_toast:()=>s.jsxs("div",{className:"g6-preview g6-toast",children:[s.jsx("span",{className:"g6-dot tone-success"}),s.jsx("span",{children:"3 created / 1 duplicate"})]}),pv_mock_validation_panel:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Missing name","Invalid server","Bad class"].map(t=>s.jsxs("div",{className:"g6-error-row",children:[s.jsx("span",{className:"g6-badge warn",children:"!"}),s.jsx("span",{children:t})]},t))}),pv_mock_upload_progress:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("div",{className:"g6-steps",children:[1,2,3,4].map((t,e)=>s.jsx("div",{className:`g6-step ${e<2?"done":e===2?"active":""}`},t))}),s.jsx(rs,{width:"65%"})]}),pv_mock_selected_counter:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Cs,{label:"Players 32"}),s.jsx(Cs,{label:"Guilds 4"}),s.jsx(Cs,{label:"Servers 2"})]}),pv_mock_ttl_notice:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge warn",children:"TTL 12m"}),s.jsx(rs,{width:"50%",tone:"warning"})]}),pv_mock_privacy_preview:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Sending"}),s.jsx(rs,{width:"60%"}),s.jsx(rs,{width:"40%",tone:"muted"})]}),pv_mock_error_log:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Timeout","Bad payload"].map(t=>s.jsxs("div",{className:"g6-error-row",children:[s.jsx("span",{className:"g6-badge danger",children:"!"}),s.jsx("span",{children:t})]},t))}),pv_mock_retry_banner:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge warn",children:"Rate limit"}),s.jsx("button",{className:"g6-btn ghost",children:"Retry"}),s.jsx("button",{className:"g6-btn ghost",children:"Backoff"})]}),pv_mock_success_summary:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"70%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(Cs,{label:"Created 42"}),s.jsx(Cs,{label:"Duplicates 3"})]})]}),pv_mock_roles_menu:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Viewer","Editor","Admin"].map((t,e)=>s.jsxs("div",{className:`g6-menu-row ${e===2?"active":""}`,children:[s.jsx("span",{children:t}),e===2&&s.jsx("span",{className:"g6-check",children:""})]},t))}),pv_mock_feature_table:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Feature A","Feature B","Feature C"].map((t,e)=>s.jsxs("div",{className:"g6-feature-row",children:[s.jsx(rs,{width:"40%"}),s.jsx("div",{className:`g6-toggle ${e===1?"on":""}`,children:s.jsx("div",{className:"g6-toggle-thumb"})})]},t))}),pv_mock_access_group:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx("div",{className:"g6-avatar small",children:"A"}),s.jsx("div",{className:"g6-avatar small",children:"B"}),s.jsx("div",{className:"g6-avatar small",children:"C"})]})]}),pv_mock_audit_row:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(rs,{width:"40%"}),s.jsx(Cs,{label:"by Admin"}),s.jsx(Cs,{label:"2h ago"})]}),pv_mock_error_monitor:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[["OK","WARN","FAIL"].map((t,e)=>s.jsx("div",{className:`g6-status ${e===2?"danger":e===1?"warn":"ok"}`},t)),s.jsx(rs,{width:"40%"})]}),pv_mock_api_status:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Cs,{label:"/api/status"}),s.jsx("div",{className:"g6-dot tone-success"}),s.jsx("div",{className:"g6-mini",children:"200 OK"})]}),pv_mock_seed_warning:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge danger",children:"Internal"}),s.jsx(rs,{width:"50%",tone:"danger"})]}),pv_mock_mod_queue:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Report #45","Report #46"].map(t=>s.jsxs("div",{className:"g6-mod-row",children:[s.jsx(rs,{width:"50%"}),s.jsxs("div",{className:"g6-row g6-gap-xxs",children:[s.jsx("button",{className:"g6-btn ghost",children:"Approve"}),s.jsx("button",{className:"g6-btn ghost",children:"Deny"})]})]},t))}),pv_mock_feedback_inbox:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(rs,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx("button",{className:"g6-btn ghost",children:"Keep"}),s.jsx("button",{className:"g6-btn ghost",children:"Discard"})]})]}),pv_mock_release_toggle:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Cs,{label:"Staging"}),s.jsx("div",{className:"g6-toggle on",children:s.jsx("div",{className:"g6-toggle-thumb"})}),s.jsx(Cs,{label:"Prod"})]})},PIe=t=>{const e=AIe[t];return e?e():s.jsx("div",{className:"g6-preview g6-fallback"})};function RIe(){return s.jsxs("div",{className:"g6-root",children:[s.jsxs("header",{className:"g6-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 6"}),s.jsx("p",{className:"g6-sub",children:"50 mock UI widgets spanning profile, guild, tables, upload, and admin snippets."})]}),s.jsx("div",{className:"g6-pill-row",children:s.jsx(Cs,{label:"MOCK"})})]}),s.jsx("nav",{className:"g6-toc",children:GI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g6-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g6-sections",children:GI.map(t=>s.jsxs("details",{className:"g6-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g6-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g6-section-title",children:t.title}),s.jsx("div",{className:"g6-section-sub",children:t.description})]}),s.jsxs("span",{className:"g6-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g6-grid",children:t.items.map(e=>s.jsxs("div",{className:"g6-card",children:[s.jsxs("div",{className:"g6-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g6-card-title",children:e.title}),s.jsx("div",{className:"g6-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g6-pill-row",children:(e.tags||["MOCK"]).map(n=>s.jsx(Cs,{label:n},n))})]}),PIe(e.previewId)]},e.id))})]},t.id))})]})}const WI=[{id:"progress",title:"Animated Progress",description:"Animated stripes, sweeps, counters, and wave fills.",items:[{id:"1",categoryId:"progress",title:"Stripe Motion Bar",subtitle:"moving stripes",tags:["UI"],previewId:"pv_ui7_stripe_motion2"},{id:"2",categoryId:"progress",title:"Gradient Sweep Fill",subtitle:"slow sweep",tags:["UI"],previewId:"pv_ui7_gradient_sweep"},{id:"3",categoryId:"progress",title:"Tick-Up Counter",subtitle:"odometer style",tags:["UI"],previewId:"pv_ui7_tickup_counter"},{id:"4",categoryId:"progress",title:"Milestone Pop",subtitle:"pop at thresholds",tags:["UI"],previewId:"pv_ui7_milestone_pop"},{id:"5",categoryId:"progress",title:"Ring Spinner Progress",subtitle:"rotating arc",tags:["UI"],previewId:"pv_ui7_ring_spinner"},{id:"6",categoryId:"progress",title:"Pulse Marker Line",subtitle:"avg marker pulse",tags:["UI"],previewId:"pv_ui7_marker_pulse"},{id:"7",categoryId:"progress",title:"Step Fill Animation",subtitle:"segment fill",tags:["UI"],previewId:"pv_ui7_step_fill"},{id:"8",categoryId:"progress",title:"Wave Fill Gauge",subtitle:"wave in bar",tags:["UI"],previewId:"pv_ui7_wave_fill"},{id:"9",categoryId:"progress",title:"Micro Spark Animate",subtitle:"spark drawing",tags:["UI"],previewId:"pv_ui7_spark_draw"},{id:"10",categoryId:"progress",title:"Heat Glow Cells",subtitle:"glow on cells",tags:["UI"],previewId:"pv_ui7_heat_glow_cells"}]},{id:"hover",title:"Hover/Focus States",description:"Focus rings, tilts, bounces, outlines, and menus.",items:[{id:"11",categoryId:"hover",title:"Focus Ring Showcase",subtitle:"focus styles",tags:["UI"],previewId:"pv_ui7_focus_rings"},{id:"12",categoryId:"hover",title:"Hover Tilt Card",subtitle:"subtle tilt",tags:["UI"],previewId:"pv_ui7_hover_tilt"},{id:"13",categoryId:"hover",title:"Glow Border on Hover",subtitle:"outer glow",tags:["UI"],previewId:"pv_ui7_hover_glow_border"},{id:"14",categoryId:"hover",title:"Icon Bounce Hover",subtitle:"bounce icon",tags:["UI"],previewId:"pv_ui7_icon_bounce"},{id:"15",categoryId:"hover",title:"Tooltip Follow Mock",subtitle:"offset tooltip",tags:["UI"],previewId:"pv_ui7_tooltip_follow"},{id:"16",categoryId:"hover",title:"Pressed Button Depth",subtitle:"down state",tags:["UI"],previewId:"pv_ui7_button_depth"},{id:"17",categoryId:"hover",title:"Selection Outline",subtitle:"selected frame",tags:["UI"],previewId:"pv_ui7_select_outline"},{id:"18",categoryId:"hover",title:"Drag Handle Mock",subtitle:"grab dots",tags:["UI"],previewId:"pv_ui7_drag_handle"},{id:"19",categoryId:"hover",title:"Context Menu Hover",subtitle:"menu highlight",tags:["UI"],previewId:"pv_ui7_context_hover"},{id:"20",categoryId:"hover",title:"Keyboard Nav Dots",subtitle:"tab order hint",tags:["UI"],previewId:"pv_ui7_keynav_dots"}]},{id:"decor",title:"Decorative UI",description:"Glass headers, neon lines, patterns, and status clusters.",items:[{id:"21",categoryId:"decor",title:"Glass Panel Header",subtitle:"frosted header",tags:["UI"],previewId:"pv_ui7_glass_header"},{id:"22",categoryId:"decor",title:"Neon Accent Line",subtitle:"accent stroke",tags:["UI"],previewId:"pv_ui7_neon_accent"},{id:"23",categoryId:"decor",title:"Pattern Background Card",subtitle:"subtle pattern",tags:["UI"],previewId:"pv_ui7_pattern_bg"},{id:"24",categoryId:"decor",title:"Corner Cut Card",subtitle:"cut corners",tags:["UI"],previewId:"pv_ui7_corner_cut"},{id:"25",categoryId:"decor",title:"Divider Variants",subtitle:"3 divider styles",tags:["UI"],previewId:"pv_ui7_dividers"},{id:"26",categoryId:"decor",title:"Tag Pill Variants",subtitle:"solid/outline",tags:["UI"],previewId:"pv_ui7_tag_variants"},{id:"27",categoryId:"decor",title:"Icon Badge Stack",subtitle:"icon + badge",tags:["UI"],previewId:"pv_ui7_icon_badges"},{id:"28",categoryId:"decor",title:"Mini Banner Strip",subtitle:"announcement strip",tags:["UI"],previewId:"pv_ui7_banner_strip"},{id:"29",categoryId:"decor",title:"Progress Notches",subtitle:"notched bar",tags:["UI"],previewId:"pv_ui7_notches_bar"},{id:"30",categoryId:"decor",title:"Status Dot Cluster",subtitle:"3 statuses",tags:["UI"],previewId:"pv_ui7_status_cluster"}]},{id:"micro",title:"Micro-layouts",description:"Mini cards, headers, grids, and stacked chips.",items:[{id:"31",categoryId:"micro",title:"KPI + Mini Chart",subtitle:"two-column",tags:["UI"],previewId:"pv_ui7_kpi_minichart"},{id:"32",categoryId:"micro",title:"Split Header Actions",subtitle:"actions right",tags:["UI"],previewId:"pv_ui7_header_actions"},{id:"33",categoryId:"micro",title:"Compact Card Grid",subtitle:"22 grid",tags:["UI"],previewId:"pv_ui7_compact_grid"},{id:"34",categoryId:"micro",title:"Sticky Mini Footer",subtitle:"footer tools",tags:["UI"],previewId:"pv_ui7_sticky_footer"},{id:"35",categoryId:"micro",title:"Inline Editable Field",subtitle:"edit pencil",tags:["UI"],previewId:"pv_ui7_inline_edit"},{id:"36",categoryId:"micro",title:"Multi-line Subtitle Clamp",subtitle:"clamp demo",tags:["UI"],previewId:"pv_ui7_clamp_demo"},{id:"37",categoryId:"micro",title:"Icon List with Counts",subtitle:"icon + num",tags:["UI"],previewId:"pv_ui7_icon_counts"},{id:"38",categoryId:"micro",title:"Dual Badge Header",subtitle:"two tags",tags:["UI"],previewId:"pv_ui7_dual_badge"},{id:"39",categoryId:"micro",title:"Avatar Stack",subtitle:"overlapping",tags:["UI"],previewId:"pv_ui7_avatar_stack"},{id:"40",categoryId:"micro",title:"Chips + Progress Row",subtitle:"mixed row",tags:["UI"],previewId:"pv_ui7_chips_progress_row"}]},{id:"states",title:"Feedback & States",description:"Success, warning, error, empty, loading, sync, offline, locked.",items:[{id:"41",categoryId:"states",title:"Success Glow Toast",subtitle:"success state",tags:["UI"],previewId:"pv_ui7_success_toast"},{id:"42",categoryId:"states",title:"Warning Banner",subtitle:"attention state",tags:["UI"],previewId:"pv_ui7_warning_banner"},{id:"43",categoryId:"states",title:"Error Inline Panel",subtitle:"error state",tags:["UI"],previewId:"pv_ui7_error_panel"},{id:"44",categoryId:"states",title:"Empty State Illustration",subtitle:"empty",tags:["UI"],previewId:"pv_ui7_empty_state"},{id:"45",categoryId:"states",title:"Loading Dots",subtitle:"3 dots",tags:["UI"],previewId:"pv_ui7_loading_dots"},{id:"46",categoryId:"states",title:"Sync Indicator",subtitle:"sync badge",tags:["UI"],previewId:"pv_ui7_sync_indicator"},{id:"47",categoryId:"states",title:"Offline Mode Chip",subtitle:"offline badge",tags:["UI"],previewId:"pv_ui7_offline_chip"},{id:"48",categoryId:"states",title:"Disabled Overlay",subtitle:"disabled state",tags:["UI"],previewId:"pv_ui7_disabled_overlay"},{id:"49",categoryId:"states",title:"New Ribbon + Glow",subtitle:"new state",tags:["UI"],previewId:"pv_ui7_new_ribbon_glow"},{id:"50",categoryId:"states",title:"Locked State Stamp",subtitle:"locked stamp",tags:["UI"],previewId:"pv_ui7_locked_stamp"}]}],so=({label:t})=>s.jsx("span",{className:"g7-pill",children:t}),Vs=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g7-bar tone-${e}`,style:{width:t,height:n}}),k1=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g7-dot tone-${t}`,style:{width:e,height:e}}),LIe={pv_ui7_stripe_motion2:()=>s.jsx("div",{className:"g7-preview g7-stripes",children:s.jsx("div",{className:"g7-stripe-fill",style:{width:"78%"}})}),pv_ui7_gradient_sweep:()=>s.jsx("div",{className:"g7-preview g7-gradient",children:s.jsx("div",{className:"g7-gradient-fill"})}),pv_ui7_tickup_counter:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-odometer",children:["0","1","2"].map((t,e)=>s.jsx("span",{className:`g7-odo-digit ${e===2?"active":""}`,children:t},e))}),s.jsx(so,{label:"Counter"})]}),pv_ui7_milestone_pop:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[20,50,80].map((t,e)=>s.jsxs("div",{className:"g7-milestone",children:[s.jsx("div",{className:`g7-milestone-dot ${e===1?"pop":""}`}),s.jsx("span",{className:"g7-mini",children:t})]},t))}),pv_ui7_ring_spinner:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-spinner",children:s.jsx("div",{className:"g7-spinner-arc"})}),s.jsx(Vs,{width:"50%"})]}),pv_ui7_marker_pulse:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx("div",{className:"g7-marker-line",children:s.jsx("div",{className:"g7-marker",style:{left:"62%"}})}),s.jsx("span",{className:"g7-mini",children:"Average"})]}),pv_ui7_step_fill:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-stepper",children:Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g7-step ${e<3?"filled":""}`},e))}),pv_ui7_wave_fill:()=>s.jsx("div",{className:"g7-preview g7-wave",children:s.jsx("div",{className:"g7-wave-fill"})}),pv_ui7_spark_draw:()=>s.jsx("div",{className:"g7-preview g7-spark",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g7-spark-bar",style:{height:`${8+e%4*6}px`}},e))}),pv_ui7_heat_glow_cells:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g7-heat-cell ${e>=3?"glow":""}`},e))}),pv_ui7_focus_rings:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-focus"}),s.jsx("div",{className:"g7-focus strong"}),s.jsx("div",{className:"g7-focus dashed"})]}),pv_ui7_hover_tilt:()=>s.jsxs("div",{className:"g7-preview g7-tilt-card",children:[s.jsx(Vs,{width:"70%"}),s.jsx(Vs,{width:"40%",tone:"muted"})]}),pv_ui7_hover_glow_border:()=>s.jsx("div",{className:"g7-preview g7-glow-border",children:s.jsx(Vs,{width:"60%"})}),pv_ui7_icon_bounce:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-bounce",children:""}),s.jsx(Vs,{width:"40%"})]}),pv_ui7_tooltip_follow:()=>s.jsxs("div",{className:"g7-preview g7-tooltip-follow",children:[s.jsx("div",{className:"g7-target"}),s.jsx("div",{className:"g7-follow-tip",children:s.jsx(Vs,{width:"50%"})})]}),pv_ui7_button_depth:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("button",{className:"g7-press-btn",children:"Press"}),s.jsx("button",{className:"g7-press-btn pressed",children:"Pressed"})]}),pv_ui7_select_outline:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-outline-card active",children:s.jsx(Vs,{width:"60%"})}),s.jsx("div",{className:"g7-outline-card",children:s.jsx(Vs,{width:"40%"})})]}),pv_ui7_drag_handle:()=>s.jsxs("div",{className:"g7-preview g7-row g7-center g7-gap-sm",children:[s.jsx("div",{className:"g7-drag-handle",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{},e))}),s.jsx(Vs,{width:"50%"})]}),pv_ui7_context_hover:()=>s.jsx("div",{className:"g7-preview g7-col g7-gap-xxs",children:["Edit","Duplicate","Archive"].map((t,e)=>s.jsx("div",{className:`g7-menu-row ${e===1?"hover":""}`,children:t},t))}),pv_ui7_keynav_dots:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[Array.from({length:4}).map((t,e)=>s.jsx("span",{className:`g7-keydot ${e===0?"active":""}`},e)),s.jsx("span",{className:"g7-mini",children:"Tab order"})]}),pv_ui7_glass_header:()=>s.jsxs("div",{className:"g7-preview g7-glass",children:[s.jsx("div",{className:"g7-glass-bar"}),s.jsx(Vs,{width:"50%"})]}),pv_ui7_neon_accent:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-neon-line"}),s.jsx(Vs,{width:"40%"})]}),pv_ui7_pattern_bg:()=>s.jsxs("div",{className:"g7-preview g7-pattern",children:[s.jsx(Vs,{width:"60%"}),s.jsx(Vs,{width:"30%",tone:"muted"})]}),pv_ui7_corner_cut:()=>s.jsxs("div",{className:"g7-preview g7-corner-card",children:[s.jsx(Vs,{width:"70%"}),s.jsx(Vs,{width:"40%",tone:"muted"})]}),pv_ui7_dividers:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xs",children:[s.jsx("div",{className:"g7-divider solid"}),s.jsx("div",{className:"g7-divider dashed"}),s.jsx("div",{className:"g7-divider dotted"})]}),pv_ui7_tag_variants:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs",children:[s.jsx(so,{label:"Solid"}),s.jsx("span",{className:"g7-pill ghost",children:"Outline"}),s.jsx("span",{className:"g7-pill muted",children:"Muted"})]}),pv_ui7_icon_badges:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsxs("div",{className:"g7-icon-badge",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"g7-badge-num",children:"3"})]}),s.jsx(Vs,{width:"50%"})]}),pv_ui7_banner_strip:()=>s.jsxs("div",{className:"g7-preview g7-banner",children:[s.jsx("span",{children:"Announcement"}),s.jsx(so,{label:"Live"})]}),pv_ui7_notches_bar:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-notches",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:`g7-notch ${e<5?"active":""}`},e))}),pv_ui7_status_cluster:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx(k1,{tone:"success"}),s.jsx(k1,{tone:"warning"}),s.jsx(k1,{tone:"danger"}),s.jsx("span",{className:"g7-mini",children:"Status"})]}),pv_ui7_kpi_minichart:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm",children:[s.jsxs("div",{className:"g7-col g7-gap-xxs",children:[s.jsx("span",{className:"g7-mini",children:"KPI"}),s.jsx(Vs,{width:"60%"})]}),s.jsx("div",{className:"g7-mini-chart",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{style:{height:`${10+e*4}px`}},e))})]}),pv_ui7_header_actions:()=>s.jsxs("div",{className:"g7-preview g7-row g7-space-between g7-center",children:[s.jsx(Vs,{width:"40%"}),s.jsxs("div",{className:"g7-row g7-gap-xs",children:[s.jsx("button",{className:"g7-btn ghost",children:"Action"}),s.jsx("button",{className:"g7-btn solid",children:"Primary"})]})]}),pv_ui7_compact_grid:()=>s.jsx("div",{className:"g7-preview g7-grid g7-grid-2",children:Array.from({length:4}).map((t,e)=>s.jsxs("div",{className:"g7-mini-card",children:[s.jsx(Vs,{width:"50%"}),s.jsx(Vs,{width:"30%",tone:"muted"})]},e))}),pv_ui7_sticky_footer:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx(Vs,{width:"70%"}),s.jsxs("div",{className:"g7-sticky-footer",children:[s.jsx("button",{className:"g7-btn ghost",children:"Cancel"}),s.jsx("button",{className:"g7-btn solid",children:"Save"})]})]}),pv_ui7_inline_edit:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("input",{className:"g7-inline",value:"Editable text",readOnly:!0}),s.jsx("span",{className:"g7-pencil"})]}),pv_ui7_clamp_demo:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx("div",{className:"g7-clamp",children:"Very long subtitle that is clamped after two lines for readability."}),s.jsx(Vs,{width:"40%"})]}),pv_ui7_icon_counts:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:["","",""].map((t,e)=>s.jsxs("div",{className:"g7-icon-count",children:[s.jsx("span",{children:t}),s.jsx("span",{className:"g7-badge-num",children:e+2})]},t))}),pv_ui7_dual_badge:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs g7-center",children:[s.jsx(so,{label:"Pro"}),s.jsx(so,{label:"UI"}),s.jsx(Vs,{width:"40%"})]}),pv_ui7_avatar_stack:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs g7-center",children:[s.jsx("div",{className:"g7-stack",children:["A","B","C"].map((t,e)=>s.jsx("span",{className:"g7-stack-avatar",style:{left:`${e*12}px`},children:t},t))}),s.jsx("span",{className:"g7-mini",children:"+5"})]}),pv_ui7_chips_progress_row:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx(so,{label:"UI"}),s.jsx(so,{label:"Motion"}),s.jsx("div",{className:"g7-pulse-bar",children:s.jsx("div",{className:"g7-pulse-fill",style:{width:"64%"}})})]}),pv_ui7_success_toast:()=>s.jsxs("div",{className:"g7-preview g7-toast success",children:[s.jsx("span",{className:"g7-dot tone-success"}),s.jsx("span",{children:"Saved successfully"})]}),pv_ui7_warning_banner:()=>s.jsx("div",{className:"g7-preview g7-banner warn",children:s.jsx("span",{children:"Warning: changes pending"})}),pv_ui7_error_panel:()=>s.jsxs("div",{className:"g7-preview g7-error",children:[s.jsx("div",{className:"g7-error-icon",children:"!"}),s.jsxs("div",{className:"g7-col g7-gap-xxs",children:[s.jsx(Vs,{width:"60%",tone:"danger"}),s.jsx(Vs,{width:"40%",tone:"muted"})]})]}),pv_ui7_empty_state:()=>s.jsxs("div",{className:"g7-preview g7-empty",children:[s.jsx("div",{className:"g7-ghost"}),s.jsx(Vs,{width:"50%",tone:"muted"})]}),pv_ui7_loading_dots:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-center",children:Array.from({length:3}).map((t,e)=>s.jsx("span",{className:"g7-loading-dot"},e))}),pv_ui7_sync_indicator:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-sync",children:s.jsx("div",{className:"g7-sync-arc"})}),s.jsx(so,{label:"Syncing"})]}),pv_ui7_offline_chip:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-chip offline",children:"Offline"}),s.jsx(Vs,{width:"40%",tone:"muted"})]}),pv_ui7_disabled_overlay:()=>s.jsxs("div",{className:"g7-preview g7-disabled",children:[s.jsx(Vs,{width:"60%"}),s.jsx("div",{className:"g7-disabled-mask"})]}),pv_ui7_new_ribbon_glow:()=>s.jsxs("div",{className:"g7-preview g7-ribbon-card",children:[s.jsx("div",{className:"g7-ribbon",children:"New"}),s.jsx("div",{className:"g7-ribbon-glow"}),s.jsx(Vs,{width:"60%"})]}),pv_ui7_locked_stamp:()=>s.jsxs("div",{className:"g7-preview g7-stamp",children:[s.jsx("div",{className:"g7-stamp-ring",children:"LOCKED"}),s.jsx(Vs,{width:"40%"})]})},DIe=t=>{const e=LIe[t];return e?e():s.jsx("div",{className:"g7-preview g7-fallback"})};function MIe(){return s.jsxs("div",{className:"g7-root",children:[s.jsxs("header",{className:"g7-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 7"}),s.jsx("p",{className:"g7-sub",children:"50 animated UI micro-previews covering motion, hover states, decorative bits, and feedback."})]}),s.jsx("div",{className:"g7-pill-row",children:s.jsx(so,{label:"UI"})})]}),s.jsx("nav",{className:"g7-toc",children:WI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g7-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g7-sections",children:WI.map(t=>s.jsxs("details",{className:"g7-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g7-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g7-section-title",children:t.title}),s.jsx("div",{className:"g7-section-sub",children:t.description})]}),s.jsxs("span",{className:"g7-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g7-grid",children:t.items.map(e=>s.jsxs("div",{className:"g7-card",children:[s.jsxs("div",{className:"g7-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g7-card-title",children:e.title}),s.jsx("div",{className:"g7-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g7-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(so,{label:n},n))})]}),DIe(e.previewId)]},e.id))})]},t.id))})]})}const KI=[{id:"progress",title:"Animated Progress",description:"Pulses, stripes, sweeps, and counters that move on their own.",items:[{id:"1",categoryId:"progress",title:"Pulse Progress Bar",subtitle:"soft pulse fill",tags:["UI"],previewId:"pv_anim_pulse_bar"},{id:"2",categoryId:"progress",title:"Stripe Motion Fill",subtitle:"striped motion",tags:["UI"],previewId:"pv_anim_stripes_fill"},{id:"3",categoryId:"progress",title:"Gradient Sweep Meter",subtitle:"sweeping sheen",tags:["UI"],previewId:"pv_anim_gradient_sweep"},{id:"4",categoryId:"progress",title:"Segments Filling Track",subtitle:"sequential fill",tags:["UI"],previewId:"pv_anim_segments_fill"},{id:"5",categoryId:"progress",title:"Ring Spinner Progress",subtitle:"rotating arc",tags:["UI"],previewId:"pv_anim_ring_spinner"},{id:"6",categoryId:"progress",title:"Wave Fill Gauge",subtitle:"wave motion",tags:["UI"],previewId:"pv_anim_wave_fill"},{id:"7",categoryId:"progress",title:"Tick-Up Counter",subtitle:"rolling digits",tags:["UI"],previewId:"pv_anim_tickup_counter"},{id:"8",categoryId:"progress",title:"Marker Line Pulse",subtitle:"pulsing marker",tags:["UI"],previewId:"pv_anim_marker_pulse"},{id:"9",categoryId:"progress",title:"Notched Bar Scroll",subtitle:"notches glide",tags:["UI"],previewId:"pv_anim_notches_scroll"},{id:"10",categoryId:"progress",title:"Microbars Breathing",subtitle:"bars breathe",tags:["UI"],previewId:"pv_anim_microbars_breathe"}]},{id:"glow",title:"Glows, Unlocks, Highlights",description:"Shimmers, spotlights, confetti, and soft neon pulses.",items:[{id:"11",categoryId:"glow",title:"Unlock Glow Border",subtitle:"glowing frame",tags:["UI"],previewId:"pv_anim_unlock_glow_border"},{id:"12",categoryId:"glow",title:"Shimmer Skeleton",subtitle:"loading shimmer",tags:["UI"],previewId:"pv_anim_skeleton_shimmer"},{id:"13",categoryId:"glow",title:"New Ribbon Shine",subtitle:"ribbon sweep",tags:["UI"],previewId:"pv_anim_ribbon_shine"},{id:"14",categoryId:"glow",title:"Badge Pop Loop",subtitle:"pop animation",tags:["UI"],previewId:"pv_anim_badge_pop"},{id:"15",categoryId:"glow",title:"Spotlight Sweep",subtitle:"light sweep",tags:["UI"],previewId:"pv_anim_spotlight_sweep"},{id:"16",categoryId:"glow",title:"Confetti Drift",subtitle:"floating dots",tags:["UI"],previewId:"pv_anim_confetti_drift"},{id:"17",categoryId:"glow",title:"Spark Particles",subtitle:"spark drizzle",tags:["UI"],previewId:"pv_anim_spark_particles"},{id:"18",categoryId:"glow",title:"Aura Halo Ring",subtitle:"halo pulse",tags:["UI"],previewId:"pv_anim_halo_ring"},{id:"19",categoryId:"glow",title:"Hover Lift (auto demo)",subtitle:"auto float",tags:["UI"],previewId:"pv_anim_hover_lift_demo"},{id:"20",categoryId:"glow",title:"Soft Neon Pulse Line",subtitle:"neon flicker",tags:["UI"],previewId:"pv_anim_neon_line_pulse"}]},{id:"controls",title:"Animated Controls & Navigation",description:"Auto-animating toggles, tabs, tooltips, and badges.",items:[{id:"21",categoryId:"controls",title:"Toggle Flip Motion",subtitle:"thumb flip",tags:["UI"],previewId:"pv_anim_toggle_flip"},{id:"22",categoryId:"controls",title:"Segmented Toggle Slide",subtitle:"sliding highlight",tags:["UI"],previewId:"pv_anim_seg_toggle_slide"},{id:"23",categoryId:"controls",title:"Tabs Underline Slide",subtitle:"underline glide",tags:["UI"],previewId:"pv_anim_tabs_underline"},{id:"24",categoryId:"controls",title:"Dropdown Open Bounce",subtitle:"bouncy menu",tags:["UI"],previewId:"pv_anim_dropdown_bounce"},{id:"25",categoryId:"controls",title:"Tooltip Appear/Float",subtitle:"float reveal",tags:["UI"],previewId:"pv_anim_tooltip_float"},{id:"26",categoryId:"controls",title:"Button Press Depth Loop",subtitle:"press cycle",tags:["UI"],previewId:"pv_anim_button_depth"},{id:"27",categoryId:"controls",title:"Loading Dots",subtitle:"dot bounce",tags:["UI"],previewId:"pv_anim_loading_dots"},{id:"28",categoryId:"controls",title:"Sync Spinner Badge",subtitle:"badge spinner",tags:["UI"],previewId:"pv_anim_sync_spinner"},{id:"29",categoryId:"controls",title:"Notification Bell Pulse",subtitle:"bell ring",tags:["UI"],previewId:"pv_anim_bell_pulse"},{id:"30",categoryId:"controls",title:"Chip Select Ripple",subtitle:"ripple effect",tags:["UI"],previewId:"pv_anim_chip_ripple"}]},{id:"charts",title:"Animated Micro-Charts",description:"Drawing sparks, morphing radar, wobbling histograms, glowing grids.",items:[{id:"31",categoryId:"charts",title:"Sparkline Draw",subtitle:"line drawing",tags:["UI"],previewId:"pv_anim_spark_draw"},{id:"32",categoryId:"charts",title:"Step Line March",subtitle:"step march",tags:["UI"],previewId:"pv_anim_step_march"},{id:"33",categoryId:"charts",title:"Bar Grow Cycle",subtitle:"bars grow",tags:["UI"],previewId:"pv_anim_bar_grow_cycle"},{id:"34",categoryId:"charts",title:"Radar Polygon Morph",subtitle:"morphing radar",tags:["UI"],previewId:"pv_anim_radar_morph"},{id:"35",categoryId:"charts",title:"Donut Arc Sweep",subtitle:"arc sweep",tags:["UI"],previewId:"pv_anim_donut_sweep"},{id:"36",categoryId:"charts",title:"Histogram Wobble",subtitle:"wobble bars",tags:["UI"],previewId:"pv_anim_hist_wobble"},{id:"37",categoryId:"charts",title:"Delta Arrow Float",subtitle:"floating delta",tags:["UI"],previewId:"pv_anim_delta_arrow_float"},{id:"38",categoryId:"charts",title:"Timeline Dot Travel",subtitle:"dot travels",tags:["UI"],previewId:"pv_anim_timeline_dot"},{id:"39",categoryId:"charts",title:"Heat Cells Glow Cycle",subtitle:"cells glow",tags:["UI"],previewId:"pv_anim_heat_glow_cycle"},{id:"40",categoryId:"charts",title:"Grid Scanline",subtitle:"scanline sweep",tags:["UI"],previewId:"pv_anim_grid_scanline"}]},{id:"states",title:"Feedback & States",description:"Toasts, banners, pings, overlays, and queue motion.",items:[{id:"41",categoryId:"states",title:"Success Toast Slide-In",subtitle:"toast slides",tags:["UI"],previewId:"pv_anim_toast_slidein"},{id:"42",categoryId:"states",title:"Warning Banner Shake",subtitle:"gentle shake",tags:["UI"],previewId:"pv_anim_banner_shake"},{id:"43",categoryId:"states",title:"Error Pulse Border",subtitle:"border pulse",tags:["UI"],previewId:"pv_anim_error_pulse"},{id:"44",categoryId:"states",title:"Offline Chip Blink",subtitle:"chip blink",tags:["UI"],previewId:"pv_anim_offline_blink"},{id:"45",categoryId:"states",title:"Locked Overlay Fade",subtitle:"overlay fade",tags:["UI"],previewId:"pv_anim_locked_fade"},{id:"46",categoryId:"states",title:"Progress Complete Burst",subtitle:"burst ring",tags:["UI"],previewId:"pv_anim_complete_burst"},{id:"47",categoryId:"states",title:"Attention Ping Indicator",subtitle:"ping pulses",tags:["UI"],previewId:"pv_anim_ping_indicator"},{id:"48",categoryId:"states",title:"Tooltip Hint Nudge",subtitle:"hint nudge",tags:["UI"],previewId:"pv_anim_hint_nudge"},{id:"49",categoryId:"states",title:"Queue Item Slide",subtitle:"slide loop",tags:["UI"],previewId:"pv_anim_queue_slide"},{id:"50",categoryId:"states",title:'"New Data" Glow Dot',subtitle:"dot glow",tags:["UI"],previewId:"pv_anim_newdata_dot"}]}],Du=({label:t})=>s.jsx("span",{className:"g8-pill",children:t}),rn=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g8-bar tone-${e}`,style:{width:t,height:n}}),FIe={pv_anim_pulse_bar:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-animated",children:s.jsx("div",{className:"g8-track-fill pulse",style:{width:"76%"}})}),s.jsxs("div",{className:"g8-mini-row",children:[s.jsx(Du,{label:"UI"}),s.jsx("span",{className:"g8-mini",children:"Live"})]})]}),pv_anim_stripes_fill:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-stripes g8-animated"}),s.jsx(rn,{width:"60%",tone:"muted",height:6})]}),pv_anim_gradient_sweep:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-sweep g8-animated"}),s.jsx("span",{className:"g8-mini",children:"Gradient sweep"})]}),pv_anim_segments_fill:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-seg-track",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:`g8-seg ${e<6?"g8-animated fill":""}`,style:{animationDelay:`${e*.15}s`}},e))}),pv_anim_ring_spinner:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-ring g8-animated",children:s.jsx("div",{className:"g8-ring-arc"})}),s.jsx(rn,{width:"50%"})]}),pv_anim_wave_fill:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-wave g8-animated"}),s.jsx("span",{className:"g8-mini",children:"Wave fill"})]}),pv_anim_tickup_counter:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-odometer g8-animated",children:["0","1","2"].map((t,e)=>s.jsx("span",{className:`g8-odo-digit ${e===2?"active":""}`,children:t},e))}),s.jsx(Du,{label:"Counter"})]}),pv_anim_marker_pulse:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-marker-line",children:s.jsx("div",{className:"g8-marker g8-animated",style:{left:"64%"}})}),s.jsx("span",{className:"g8-mini",children:"Avg marker"})]}),pv_anim_notches_scroll:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-notches g8-animated",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:"g8-notch"},e))}),pv_anim_microbars_breathe:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xs g8-center",children:["ATK","SPD","HP","LCK"].map((t,e)=>s.jsxs("div",{className:"g8-col g8-gap-xxs g8-center",children:[s.jsx("span",{className:"g8-mini",children:t}),s.jsx("div",{className:`g8-microbar g8-animated ${e%2===0?"alt":""}`})]},t))}),pv_anim_unlock_glow_border:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsxs("div",{className:"g8-glow-card g8-animated",children:[s.jsx(rn,{width:"60%"}),s.jsx(rn,{width:"40%",tone:"muted"})]}),s.jsx(Du,{label:"Unlocked"})]}),pv_anim_skeleton_shimmer:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-skeleton g8-animated"}),s.jsx("div",{className:"g8-skeleton short g8-animated"})]}),pv_anim_ribbon_shine:()=>s.jsxs("div",{className:"g8-preview g8-ribbon-card",children:[s.jsx("div",{className:"g8-ribbon g8-animated",children:"NEW"}),s.jsx(rn,{width:"65%"}),s.jsx(rn,{width:"40%",tone:"muted"})]}),pv_anim_badge_pop:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-badge-pop g8-animated",children:"UI"}),s.jsx(rn,{width:"50%"})]}),pv_anim_spotlight_sweep:()=>s.jsxs("div",{className:"g8-preview g8-spotlight g8-animated",children:[s.jsx("div",{className:"g8-spot-sheen"}),s.jsx(rn,{width:"60%"})]}),pv_anim_confetti_drift:()=>s.jsx("div",{className:"g8-preview g8-confetti",children:Array.from({length:14}).map((t,e)=>s.jsx("span",{className:"g8-confetti-dot g8-animated",style:{animationDelay:`${e*.08}s`}},e))}),pv_anim_spark_particles:()=>s.jsx("div",{className:"g8-preview g8-sparks",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g8-spark g8-animated",style:{animationDelay:`${e*.12}s`}},e))}),pv_anim_halo_ring:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-halo g8-animated",children:s.jsx("div",{className:"g8-halo-ring"})}),s.jsx(rn,{width:"40%"})]}),pv_anim_hover_lift_demo:()=>s.jsxs("div",{className:"g8-preview g8-hover-card g8-animated",children:[s.jsx(rn,{width:"70%"}),s.jsx(rn,{width:"45%",tone:"muted"})]}),pv_anim_neon_line_pulse:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-neon-line g8-animated"}),s.jsx(rn,{width:"40%"})]}),pv_anim_toggle_flip:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-toggle g8-animated",children:s.jsx("div",{className:"g8-toggle-thumb"})}),s.jsx("span",{className:"g8-mini",children:"Auto flip"})]}),pv_anim_seg_toggle_slide:()=>s.jsx("div",{className:"g8-preview g8-seg-toggle",children:s.jsxs("div",{className:"g8-seg-rail",children:[s.jsx("div",{className:"g8-seg-slider g8-animated"}),s.jsxs("div",{className:"g8-seg-labels",children:[s.jsx("span",{children:"One"}),s.jsx("span",{children:"Two"}),s.jsx("span",{children:"Three"})]})]})}),pv_anim_tabs_underline:()=>s.jsxs("div",{className:"g8-preview g8-tabs",children:[s.jsx("div",{className:"g8-tab-row",children:["Overview","Stats","Logs"].map((t,e)=>s.jsx("span",{className:`g8-tab ${e===1?"active":""}`,children:t},t))}),s.jsx("div",{className:"g8-underline g8-animated"})]}),pv_anim_dropdown_bounce:()=>s.jsxs("div",{className:"g8-preview g8-dropdown",children:[s.jsx("div",{className:"g8-drop-head",children:"Select"}),s.jsxs("div",{className:"g8-drop-menu g8-animated",children:[s.jsx("div",{className:"g8-drop-item",children:"Option A"}),s.jsx("div",{className:"g8-drop-item",children:"Option B"}),s.jsx("div",{className:"g8-drop-item",children:"Option C"})]})]}),pv_anim_tooltip_float:()=>s.jsxs("div",{className:"g8-preview g8-tooltip",children:[s.jsx("div",{className:"g8-tooltip-target"}),s.jsx("div",{className:"g8-tooltip-box g8-animated",children:s.jsx(rn,{width:"60%"})})]}),pv_anim_button_depth:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("button",{className:"g8-press-btn g8-animated",children:"Press"}),s.jsx("button",{className:"g8-press-btn alt g8-animated",children:"Hold"})]}),pv_anim_loading_dots:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-center",children:Array.from({length:3}).map((t,e)=>s.jsx("span",{className:"g8-loading-dot g8-animated",style:{animationDelay:`${e*.15}s`}},e))}),pv_anim_sync_spinner:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-sync g8-animated",children:s.jsx("div",{className:"g8-sync-arc"})}),s.jsx(Du,{label:"Syncing"})]}),pv_anim_bell_pulse:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-bell g8-animated",children:s.jsx("span",{className:"g8-bell-ring"})}),s.jsx(rn,{width:"50%"})]}),pv_anim_chip_ripple:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-xs g8-center",children:[s.jsx("span",{className:"g8-chip g8-animated",children:"UI"}),s.jsx("span",{className:"g8-chip",children:"Mock"})]}),pv_anim_spark_draw:()=>s.jsx("div",{className:"g8-preview g8-sparkline",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g8-spark-bar g8-animated",style:{animationDelay:`${e*.08}s`}},e))}),pv_anim_step_march:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-stepper",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g8-step g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_bar_grow_cycle:()=>s.jsx("div",{className:"g8-preview g8-col g8-gap-xxs",children:["A","B","C"].map((t,e)=>s.jsxs("div",{className:"g8-grow-row",children:[s.jsx("span",{className:"g8-mini",children:t}),s.jsx("div",{className:"g8-grow-bar g8-animated",style:{animationDelay:`${e*.15}s`}})]},t))}),pv_anim_radar_morph:()=>s.jsxs("div",{className:"g8-preview g8-radar",children:[s.jsx("div",{className:"g8-radar-shape g8-animated"}),s.jsx("div",{className:"g8-radar-ring outer"}),s.jsx("div",{className:"g8-radar-ring inner"})]}),pv_anim_donut_sweep:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-donut g8-animated",children:s.jsx("div",{className:"g8-donut-hole",children:"68%"})}),s.jsx(rn,{width:"40%"})]}),pv_anim_hist_wobble:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-center g8-hist",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:"g8-hist-bar g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_delta_arrow_float:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-delta g8-animated",children:""}),s.jsx(rn,{width:"50%"})]}),pv_anim_timeline_dot:()=>s.jsxs("div",{className:"g8-preview g8-timeline",children:[s.jsx("div",{className:"g8-timeline-line"}),s.jsx("div",{className:"g8-timeline-dot g8-animated"})]}),pv_anim_heat_glow_cycle:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-heatline",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:"g8-heat-cell g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_grid_scanline:()=>s.jsxs("div",{className:"g8-preview g8-grid-scan",children:[s.jsx("div",{className:"g8-scanline g8-animated"}),s.jsx("div",{className:"g8-grid-bg"})]}),pv_anim_toast_slidein:()=>s.jsxs("div",{className:"g8-preview g8-toast g8-animated",children:[s.jsx("span",{className:"g8-dot tone-success"}),s.jsx("span",{children:"Saved"})]}),pv_anim_banner_shake:()=>s.jsx("div",{className:"g8-preview g8-banner g8-animated",children:s.jsx("span",{children:"Warning: check inputs"})}),pv_anim_error_pulse:()=>s.jsxs("div",{className:"g8-preview g8-error g8-animated",children:[s.jsx("div",{className:"g8-error-icon",children:"!"}),s.jsxs("div",{className:"g8-col g8-gap-xxs",children:[s.jsx(rn,{width:"60%",tone:"danger"}),s.jsx(rn,{width:"40%",tone:"muted"})]})]}),pv_anim_offline_blink:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-chip offline g8-animated",children:"Offline"}),s.jsx(rn,{width:"40%",tone:"muted"})]}),pv_anim_locked_fade:()=>s.jsxs("div",{className:"g8-preview g8-locked",children:[s.jsx(rn,{width:"60%"}),s.jsx("div",{className:"g8-locked-mask g8-animated"})]}),pv_anim_complete_burst:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-burst g8-animated"}),s.jsx(rn,{width:"40%"})]}),pv_anim_ping_indicator:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-ping g8-animated",children:s.jsx("span",{className:"g8-ping-dot"})}),s.jsx(rn,{width:"50%"})]}),pv_anim_hint_nudge:()=>s.jsxs("div",{className:"g8-preview g8-tooltip-hint",children:[s.jsx("div",{className:"g8-hint-box g8-animated",children:s.jsx(rn,{width:"50%"})}),s.jsx("div",{className:"g8-hint-arrow"})]}),pv_anim_queue_slide:()=>s.jsx("div",{className:"g8-preview g8-queue",children:["Item 1","Item 2","Item 3"].map((t,e)=>s.jsx("div",{className:`g8-queue-row g8-animated ${e===1?"active":""}`,style:{animationDelay:`${e*.18}s`},children:s.jsx(rn,{width:`${50+e*10}%`})},t))}),pv_anim_newdata_dot:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-newdot g8-animated"}),s.jsx(rn,{width:"50%"})]})},BIe=t=>{const e=FIe[t];return e?e():s.jsx("div",{className:"g8-preview g8-fallback"})};function $Ie(){return s.jsxs("div",{className:"g8-root",children:[s.jsxs("header",{className:"g8-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 8"}),s.jsx("p",{className:"g8-sub",children:"50 animated UI micro-demos with CSS motion. All scoped to this tab and honor reduced motion."})]}),s.jsx("div",{className:"g8-pill-row",children:s.jsx(Du,{label:"UI"})})]}),s.jsx("nav",{className:"g8-toc",children:KI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g8-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g8-sections",children:KI.map(t=>s.jsxs("details",{className:"g8-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g8-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g8-section-title",children:t.title}),s.jsx("div",{className:"g8-section-sub",children:t.description})]}),s.jsxs("span",{className:"g8-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g8-grid",children:t.items.map(e=>s.jsxs("div",{className:"g8-card",children:[s.jsxs("div",{className:"g8-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g8-card-title",children:e.title}),s.jsx("div",{className:"g8-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g8-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(Du,{label:n},n))})]}),BIe(e.previewId)]},e.id))})]},t.id))})]})}const qI=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function OIe(t=120){const e=[];for(let n=1;n<=t;n++)e.push({id:String(n),name:`Player ${n}`,className:qI[n%qI.length],level:200+n%50,guild:n%3===0?`Guild ${n%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const C1={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function QI(){const[t,e]=P.useState("rows"),[n,r]=P.useState(0),[i,a]=P.useState(""),[o,c]=P.useState(60),u=P.useMemo(()=>OIe(240),[]),h=P.useMemo(()=>u.filter(m=>m.level>=n).filter(m=>m.name.toLowerCase().includes(i.toLowerCase())).slice(0,o),[u,n,i,o]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[s.jsxs("select",{value:t,onChange:m=>e(m.target.value),children:[s.jsx("option",{value:"rows",children:"Compact Rows"}),s.jsx("option",{value:"cards",children:"Card Grid"}),s.jsx("option",{value:"masonry",children:"Masonry"})]}),s.jsx("input",{placeholder:"Search",value:i,onChange:m=>a(m.target.value)}),s.jsxs("label",{children:["Min Level ",s.jsx("input",{type:"number",value:n,onChange:m=>r(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]}),s.jsxs("label",{children:["Limit ",s.jsx("input",{type:"number",value:o,onChange:m=>c(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&s.jsx("div",{style:{...C1,padding:0,overflow:"hidden"},children:h.map(m=>{var g;return s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontWeight:700},children:[m.name," ",s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:m.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),s.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="cards"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>{var g;return s.jsxs("div",{style:C1,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:700},children:m.name}),s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),s.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),s.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="masonry"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>s.jsxs("div",{style:{...C1,height:140+parseInt(m.id)%3*40},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:700},children:m.name}),s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),s.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},m.id))})]})}function YI(t=24){const e=[];for(let n=1;n<=t;n++)e.push({id:String(n),name:`Player ${n}`,server:`EU${1+n%3}`,lastScanMinsAgo:60+n*7%240});return e}function XI(){const[t,e]=P.useState(120),[n,r]=P.useState(()=>YI(24));P.useEffect(()=>{const a=setInterval(()=>{r(o=>{if(!o.length)return o;const c=Math.floor(Math.random()*o.length),u=[...o];return u[c]={...u[c],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),P.useEffect(()=>{const a=setInterval(()=>{r(o=>o.map(c=>({...c,lastScanMinsAgo:c.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=P.useMemo(()=>n.filter(a=>a.lastScanMinsAgo>t),[n,t]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[s.jsxs("label",{children:["Freshness TTL (min) ",s.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),s.jsx("button",{onClick:()=>r(YI(24)),children:"Reset Demo Data"})]}),s.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),s.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[s.jsx("div",{children:"Player"}),s.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[s.jsxs("div",{children:[a.name," ",s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),s.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&s.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function VIe(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),n=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:n}}function JI(){const[t,e]=P.useState("idle"),[n,r]=P.useState(null),[i,a]=P.useState(!1),o=P.useCallback(async c=>{var h;c.preventDefault(),a(!1);const u=(h=c.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const m=await u.text(),{isHar:g,isSf:x}=VIe(m);if(e("parsing"),await new Promise(b=>setTimeout(b,600)),!g&&!x){e("error"),r({isHar:g,isSf:x,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:x,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":x?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(m.length/2500)} (rough).`})}catch(m){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(m==null?void 0:m.message)||"Parse failed"})}}},[]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),s.jsx("div",{onDragOver:c=>{c.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:o,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),s.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Status:"})," ",t]}),n?s.jsxs("ul",{children:[s.jsxs("li",{children:["isHar: ",String(n.isHar)]}),s.jsxs("li",{children:["isSf: ",String(n.isSf)]}),s.jsxs("li",{children:["sizeKB: ",n.sizeKB]}),n.error&&s.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",n.error]}),n.summary&&s.jsxs("li",{children:["summary: ",n.summary]})]}):s.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const UIe="_wrap_hxkkn_3",zIe="_left_hxkkn_17",GIe="_right_hxkkn_25",HIe="_canvasCard_hxkkn_33",WIe="_hint_hxkkn_83",KIe="_panel_hxkkn_95",qIe="_panelTitle_hxkkn_109",QIe="_panelBody_hxkkn_121",Mo={wrap:UIe,left:zIe,right:GIe,canvasCard:HIe,hint:WIe,panel:KIe,panelTitle:qIe,panelBody:QIe},YIe=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],XIe=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function JIe(){const[t,e]=P.useState("Canvas ist vorbereitet (526526)."),n=P.useRef(null),[r,i]=P.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,o]=P.useState(!0);P.useEffect(()=>{const m=document.getElementById("PortraitCanvas");if(!m){e("Fehler: Canvas nicht gefunden.");return}try{n.current&&typeof n.current.dispose=="function"&&n.current.dispose()}catch(b){}let g=console.error;a&&(console.error=(...b)=>{var k;const w=String((k=b==null?void 0:b[0])!=null?k:"");w.includes("Failed to load URL")&&w.includes("PortraitMaker-res/portraits/")||g(...b)});let x=null;try{x=new E5(m,{...r}),n.current=x,e("Rendering")}catch(b){a&&(console.error=g),g("Error initializing PortraitMaker:",b),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return x&&(x.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{x&&typeof x.dispose=="function"&&x.dispose()}finally{a&&(console.error=g)}}},[r,a]);const c=()=>{const m=document.getElementById("PortraitCanvas");if(!m)return;const g=m.toDataURL("image/png"),x=document.createElement("a");x.href=g,x.download="portrait.png",x.click()},u=m=>{i(g=>({...g,genderName:m,beard:m==="female"?0:g.beard}))},h=r.special!==0;return s.jsxs("div",{className:Mo.wrap,children:[s.jsx("div",{className:Mo.left,children:s.jsxs("div",{className:Mo.canvasCard,children:[s.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),s.jsx("div",{className:Mo.hint,children:t})]})}),s.jsx("div",{className:Mo.right,children:s.jsxs("div",{className:Mo.panel,children:[s.jsx("h2",{className:Mo.panelTitle,children:"Controls"}),s.jsx("div",{className:Mo.panelBody,children:s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",s.jsx("input",{type:"number",value:r.special,onChange:m=>i(g=>({...g,special:Number(m.target.value||0)})),style:{width:100}})]}),s.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[s.jsxs("label",{children:["Gender:",s.jsxs("select",{value:r.genderName,onChange:m=>u(m.target.value),children:[s.jsx("option",{value:"male",children:"male"}),s.jsx("option",{value:"female",children:"female"})]})]}),s.jsxs("label",{children:["Class:",s.jsx("input",{type:"number",min:1,value:r.class,onChange:m=>i(g=>({...g,class:Number(m.target.value||0)})),style:{width:80}})]}),s.jsxs("label",{children:["Race:",s.jsx("input",{type:"number",min:1,value:r.race,onChange:m=>i(g=>({...g,race:Number(m.target.value||0)})),style:{width:80}})]})]}),s.jsxs("label",{children:["Background:",s.jsx("select",{value:r.background,onChange:m=>i(g=>({...g,background:m.target.value})),children:YIe.map(m=>s.jsx("option",{value:m,children:m===""?"transparent":m},m))})]}),s.jsxs("label",{children:["Frame:",s.jsx("select",{value:r.frame,onChange:m=>i(g=>({...g,frame:m.target.value})),children:XIe.map(m=>s.jsx("option",{value:m,children:m===""?"none":m},m))})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:m=>i(g=>({...g,showBorder:m.target.checked}))}),"showBorder"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:a,onChange:m=>o(m.target.checked)}),"Mute 404 logs (Playground)"]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:s.jsx("button",{onClick:c,children:"Export PNG"})}),h&&s.jsxs("div",{className:Mo.hint,children:["Hinweis: Bei ",s.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const ZIe=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],e5e=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],t5e=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function s5e(){return s.jsx(as,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:s.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),s.jsx("ul",{className:"mt-2 space-y-2",children:ZIe.map(t=>s.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[s.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),s.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),s.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[s.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),s.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),s.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:s.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),s.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:e5e.map(t=>s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),s.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),s.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),s.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:t5e.map(t=>s.jsx("li",{children:t},t))})]})]}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),s.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),s.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),s.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>s.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),s.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),s.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>s.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),s.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),s.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const n5e={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function r5e(){return s.jsx(as,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:s.jsx("div",{className:"flex w-full justify-center pt-10",children:s.jsx(gL,{config:n5e,label:"Playground Avatar"})})})}const i5e=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function a5e(){return s.jsx(as,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:s.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:i5e.map(t=>s.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),s.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),s.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const o5e="_avatarFrameMask_1pzs8_5",l5e="_avatarFrameOverlay_1pzs8_7",ZI={avatarFrameMask:o5e,avatarFrameOverlay:l5e},c5e=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function d5e(){return s.jsx(as,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:s.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[s.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:c5e.map(t=>s.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[s.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),s.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),s.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),s.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),s.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:ZI.avatarFrameMask,children:s.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),s.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:ZI.avatarFrameOverlay,children:s.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const u5e=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function h5e(){return s.jsx(as,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:s.jsx("div",{className:"flex w-full flex-col gap-4",children:u5e.map(t=>s.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,s.jsx("span",{children:"Leer"})]}),s.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),s.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function m5e(){return s.jsx(as,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),s.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),s.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),s.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const ae={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},p5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},g5e={maxWidth:1200,margin:"0 auto"},f5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function v5e(){return s.jsx("div",{style:p5e,children:s.jsxs("div",{style:g5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"HAR Import Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:f5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),s.jsxs("div",{style:{border:`1px dashed ${ae.line}`,borderRadius:12,padding:24,textAlign:"center",background:ae.tileAlt},children:["Drop .har file here or"," ",s.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),s.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const x5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},y5e={maxWidth:1200,margin:"0 auto"},b5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function _5e(){return s.jsx("div",{style:x5e,children:s.jsxs("div",{style:y5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"JSON/CSV Import Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:b5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsxs("label",{children:["Upload JSON ",s.jsx("input",{type:"file",accept:".json"})]}),s.jsxs("label",{children:["Upload CSV ",s.jsx("input",{type:"file",accept:".csv"})]})]}),s.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const w5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},j5e={maxWidth:1200,margin:"0 auto"},S5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function N5e(){return s.jsx("div",{style:w5e,children:s.jsxs("div",{style:j5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Index Schema Viewer Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:S5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const k5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},C5e={maxWidth:1200,margin:"0 auto"},T5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function I5e(){return s.jsx("div",{style:k5e,children:s.jsxs("div",{style:C5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Player Profile (Contained) Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:T5e,children:[s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${ae.line}`}}),s.jsxs("div",{children:[s.jsx("h3",{style:{margin:"4px 0",color:ae.title},children:"NightRaven"}),s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>s.jsx("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const E5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},A5e={maxWidth:1200,margin:"0 auto"},P5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function R5e(){return s.jsx("div",{style:E5e,children:s.jsxs("div",{style:A5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Guild Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:P5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[s.jsx("b",{style:{color:ae.title},children:"Ravens"}),s.jsx("span",{children:"Avg Lvl 465"}),s.jsx("span",{children:"Fresh scans 82%"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[s.jsx("b",{style:{color:ae.title},children:"Arcana"}),s.jsx("span",{children:"Avg Lvl 458"}),s.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const L5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},D5e={maxWidth:1200,margin:"0 auto"},M5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function F5e(){return s.jsx("div",{style:L5e,children:s.jsxs("div",{style:D5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Server Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:M5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const B5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},$5e={maxWidth:1200,margin:"0 auto"},O5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function V5e(){return s.jsx("div",{style:B5e,children:s.jsxs("div",{style:$5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Rankings Views Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:O5e,children:[s.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>s.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${ae.line}`,borderRadius:10},children:t},t))}),s.jsx("div",{style:{border:`1px solid ${ae.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[s.jsx("b",{style:{color:ae.title},children:t.name}),s.jsx("span",{children:t.delta}),s.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const U5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},z5e={maxWidth:1200,margin:"0 auto"},G5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function H5e(){return s.jsx("div",{style:U5e,children:s.jsxs("div",{style:z5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"KPI Dashboard Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsx("div",{style:G5e,children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>s.jsx("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const W5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},K5e={maxWidth:1200,margin:"0 auto"},q5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function Q5e(){return s.jsx("div",{style:W5e,children:s.jsxs("div",{style:K5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Progression Tracker Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:q5e,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),s.jsx("div",{style:{height:160,border:`1px dashed ${ae.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const Y5e={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},X5e={maxWidth:1200,margin:"0 auto"},J5e={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function Z5e(){return s.jsx("div",{style:Y5e,children:s.jsxs("div",{style:X5e,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Legendary & Pets Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsx("div",{style:J5e,children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:"Legendary Tracker"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Shadow Bow "}),s.jsx("li",{children:"Mythic Ring "})]})]}),s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:"Pets"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Firewolf 4/5"}),s.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const eEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},tEe={maxWidth:1200,margin:"0 auto"},sEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function nEe(){return s.jsx("div",{style:eEe,children:s.jsxs("div",{style:tEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Community Scans Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:sEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>s.jsx("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const rEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},iEe={maxWidth:1200,margin:"0 auto"},aEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function oEe(){return s.jsx("div",{style:rEe,children:s.jsxs("div",{style:iEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Creator Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:aEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const lEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},cEe={maxWidth:1200,margin:"0 auto"},dEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function uEe(){return s.jsx("div",{style:lEe,children:s.jsxs("div",{style:cEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Feedback Form Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:dEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),s.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[s.jsx("span",{children:"Category"}),s.jsxs("select",{style:{background:"#152A42",color:ae.text,border:`1px solid ${ae.line}`,borderRadius:8,padding:"6px 8px"},children:[s.jsx("option",{children:"UI"}),s.jsx("option",{children:"Data"}),s.jsx("option",{children:"Bug"})]})]}),s.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[s.jsx("span",{children:"Message"}),s.jsx("textarea",{rows:4,style:{background:"#152A42",color:ae.text,border:`1px solid ${ae.line}`,borderRadius:8,padding:"6px 8px"}})]}),s.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${ae.line}`,borderRadius:10},children:"Send"})]})})]})})}const hEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},mEe={maxWidth:1200,margin:"0 auto"},pEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function gEe(){return s.jsx("div",{style:hEe,children:s.jsxs("div",{style:mEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Feedback Admin Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:pEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),s.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("span",{children:t}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),s.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const fEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},vEe={maxWidth:1200,margin:"0 auto"},xEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function yEe(){return s.jsx("div",{style:fEe,children:s.jsxs("div",{style:vEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Tutorials Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:xEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),s.jsxs("ol",{children:[s.jsx("li",{children:"Step highlights"}),s.jsx("li",{children:"Progress bar"}),s.jsx("li",{children:"Badges"})]})]})})]})})}const bEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},_Ee={maxWidth:1200,margin:"0 auto"},wEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function jEe(){return s.jsx("div",{style:bEe,children:s.jsxs("div",{style:_Ee,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Wiki & FAQ Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:wEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),s.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${ae.line}`,borderRadius:10}}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"How to import HAR?"}),s.jsx("li",{children:"What data is stored?"})]})]})})]})})}const SEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},NEe={maxWidth:1200,margin:"0 auto"},kEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function CEe(){return s.jsx("div",{style:SEe,children:s.jsxs("div",{style:NEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Settings Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:kEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("label",{children:["Language",s.jsxs("select",{style:{marginLeft:8},children:[s.jsx("option",{children:"EN"}),s.jsx("option",{children:"DE"})]})]}),s.jsxs("label",{children:["Theme",s.jsxs("select",{style:{marginLeft:8},children:[s.jsx("option",{children:"Dark"}),s.jsx("option",{children:"Custom"})]})]}),s.jsxs("label",{children:["Notifications",s.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),s.jsxs("label",{children:["Privacy",s.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const TEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},IEe={maxWidth:1200,margin:"0 auto"},EEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function AEe(){return s.jsx("div",{style:TEe,children:s.jsxs("div",{style:IEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"ToS & Privacy Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:EEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),s.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${ae.line}`,borderRadius:10,padding:10,marginTop:8},children:s.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),s.jsxs("label",{style:{marginTop:8},children:[s.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const PEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},REe={maxWidth:1200,margin:"0 auto"},LEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function DEe(){return s.jsx("div",{style:PEe,children:s.jsxs("div",{style:REe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Transparency Viewer Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:LEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),s.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${ae.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const MEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},FEe={maxWidth:1200,margin:"0 auto"},BEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function $Ee(){return s.jsx("div",{style:MEe,children:s.jsxs("div",{style:FEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"PWA Update Flow Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:BEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),s.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const OEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},VEe={maxWidth:1200,margin:"0 auto"},UEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function zEe(){return s.jsx("div",{style:OEe,children:s.jsxs("div",{style:VEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"PWA Install Prompt Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:UEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[s.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${ae.line}`,borderRadius:20}}),s.jsxs("div",{children:[s.jsx("b",{style:{color:ae.title},children:"Install SFDataHub"}),s.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),s.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const GEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},HEe={maxWidth:1200,margin:"0 auto"},WEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function KEe(){return s.jsx("div",{style:GEe,children:s.jsxs("div",{style:HEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Connect Manual Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:WEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10,marginTop:8},children:[s.jsx("b",{style:{color:ae.title},children:"View source"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const qEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},QEe={maxWidth:1200,margin:"0 auto"},YEe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function XEe(){return s.jsx("div",{style:qEe,children:s.jsxs("div",{style:QEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Connect Userscript Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:YEe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx("div",{children:"Install/Enable check"}),s.jsx("div",{children:"Events preview"})]})]})})]})})}const JEe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},ZEe={maxWidth:1200,margin:"0 auto"},eAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function tAe(){return s.jsx("div",{style:JEe,children:s.jsxs("div",{style:ZEe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Exports Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:eAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:"CSV/Excel"}),s.jsx("div",{children:"Tabs, widths, locales"})]}),s.jsxs("div",{style:{background:ae.tileAlt,border:`1px solid ${ae.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:ae.title},children:"JSON API"}),s.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const sAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},nAe={maxWidth:1200,margin:"0 auto"},rAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function iAe(){return s.jsx("div",{style:sAe,children:s.jsxs("div",{style:nAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Deeplinks Demo Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:rAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),s.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${ae.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const aAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},oAe={maxWidth:1200,margin:"0 auto"},lAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function cAe(){return s.jsx("div",{style:aAe,children:s.jsxs("div",{style:oAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Servers Editor Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:lAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[s.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),s.jsxs("select",{children:[s.jsx("option",{children:"Active"}),s.jsx("option",{children:"Disabled"})]}),s.jsx("button",{children:"Add"})]})]})})]})})}const dAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},uAe={maxWidth:1200,margin:"0 auto"},hAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function mAe(){return s.jsx("div",{style:dAe,children:s.jsxs("div",{style:uAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Jobs & Queues Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:hAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),s.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const pAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},gAe={maxWidth:1200,margin:"0 auto"},fAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function vAe(){return s.jsx("div",{style:pAe,children:s.jsxs("div",{style:gAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Feature Flags Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:fAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[s.jsx("span",{children:"Beta: New Rankings"}),s.jsx("label",{children:s.jsx("input",{type:"checkbox",defaultChecked:!0})}),s.jsx("span",{children:"Widgets v2"}),s.jsx("label",{children:s.jsx("input",{type:"checkbox"})})]})]})})]})})}const xAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},yAe={maxWidth:1200,margin:"0 auto"},bAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function _Ae(){return s.jsx("div",{style:xAe,children:s.jsxs("div",{style:yAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Table Performance Lab Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:bAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),s.jsx("div",{style:{height:160,border:`1px dashed ${ae.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const wAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},jAe={maxWidth:1200,margin:"0 auto"},SAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function NAe(){return s.jsx("div",{style:wAe,children:s.jsxs("div",{style:jAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:SAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),s.jsx("div",{style:{height:180,border:`1px dashed ${ae.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const kAe={minHeight:"100vh",background:ae.page,color:ae.text,padding:"24px 16px"},CAe={maxWidth:1200,margin:"0 auto"},TAe={background:ae.tile,border:`1px solid ${ae.line}`,borderRadius:12,padding:12};function IAe(){return s.jsx("div",{style:kAe,children:s.jsxs("div",{style:CAe,children:[s.jsx("h1",{style:{color:ae.title,marginTop:0},children:"Accessibility Pass Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:TAe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"Focus ring visible"}),s.jsx("li",{children:"Skip links"}),s.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const EAe=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function AAe({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:n,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:o}){const{t:c}=Os(),[u,h]=P.useState(null);P.useEffect(()=>{const L=EAe(r);if(!L){h(null);return}const I=()=>{const v=Date.now(),_=Math.max(0,Math.floor((L-v)/1e3));h(_)};I();const N=window.setInterval(I,1e3);return()=>window.clearInterval(N)},[r]);const m=u!==null&&u>0,g=!t||a||!e||m,x=P.useMemo(()=>{if(u===null||u<=0)return null;const L=Math.floor(u/60),I=u%60;return`${String(L).padStart(2,"0")}:${String(I).padStart(2,"0")}`},[u]),b=a?c("tools.sync.saving"):x?c("tools.sync.cooldownLabel",{time:x}):c("tools.sync.buttonSave"),w=P.useMemo(()=>c(e?"tools.sync.statusUnsynced":n?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,n,c]),k=P.useMemo(()=>{if(e)return null;if(n){const L=typeof n=="string"?new Date(n):n;return`${c("tools.sync.lastSyncLabel")}: ${L.toLocaleTimeString()}`}return c("tools.sync.noChanges")},[e,n,c]),A=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return s.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[s.jsx("button",{type:"button",disabled:g,onClick:i,className:A,children:b}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:w}),k&&s.jsx("p",{className:"text-sm text-slate-200",children:k}),o&&s.jsx("p",{className:"text-sm text-rose-400",children:o})]})]})})}const Kf=3,u6="sfdatahub.tools.sets.v1",e5=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],bu=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],PAe=300*1e3;async function RAe(t,e){const n=ms(ol(Tt,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",n.path);const r={version:1,updatedAt:Vi(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await ll(n,r,{merge:!1})}const LAe=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(u6);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function DAe(){var Fe,we;const{t}=Os(),{user:e,status:n,loginWithDiscord:r}=xa(),i=n==="authenticated"&&!!e,a=P.useMemo(()=>LAe(),[]),o=P.useMemo(()=>{var de;return(de=a==null?void 0:a.sets)!=null&&de.length?a.sets.slice(0,Kf):e5},[a]),c=P.useMemo(()=>{var Ie,Ae,Xe,oe;const de=a==null?void 0:a.activeSetId;return de&&o.some(fe=>fe.id===de)?de:(oe=(Xe=(Ie=o[0])==null?void 0:Ie.id)!=null?Xe:(Ae=e5[0])==null?void 0:Ae.id)!=null?oe:"set-main-dh"},[a,o]),u=P.useMemo(()=>{var Ie,Ae;const de=a==null?void 0:a.activeToolId;return de&&bu.some(Xe=>Xe.id===de)?de:(Ae=(Ie=bu[0])==null?void 0:Ie.id)!=null?Ae:"gemSim"},[a]),[h,m]=P.useState(o),[g,x]=P.useState(c),[b,w]=P.useState(u),[k,A]=P.useState(null),[L,I]=P.useState(""),[N,v]=P.useState(""),[_,R]=P.useState(!1),[j,S]=P.useState(null),[C,M]=P.useState(null),[T,F]=P.useState(!1),[D,V]=P.useState(null),U=P.useRef(null),K=P.useRef(!0);P.useEffect(()=>{if(typeof window!="undefined")try{const de={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:b};window.localStorage.setItem(u6,JSON.stringify(de))}catch(de){console.warn("Failed to persist tools state",de)}},[h,g,b]),P.useEffect(()=>{if(!i){R(!1),K.current=!0;return}if(K.current){K.current=!1;return}R(!0)},[i,h,g,b]);const H=P.useMemo(()=>{var de;return(de=h.find(Ie=>Ie.id===g))!=null?de:h[0]},[g,h]),z=P.useMemo(()=>{var de;return(de=bu.find(Ie=>Ie.id===b))!=null?de:bu[0]},[b]),Y=(Fe=H==null?void 0:H.tools)==null?void 0:Fe.gemSim,te=(we=H==null?void 0:H.tools)==null?void 0:we.dungeonPauseOpenXP,G=h.length,X=G>=Kf,J=()=>{if(X)return;const de=G+1,Ie=t("tools.sets.defaultName","New Set"),Ae={id:`set-${Date.now()}`,name:`${Ie} ${de}`,classLabel:"Class TBD",serverLabel:"Server TBD"};m(Xe=>[...Xe,Ae]),x(Ae.id)},se=()=>{r()},ue=()=>{if(!H){console.warn("No active set to export.");return}const de={version:1,type:"toolSet",set:H},Ie=new Blob([JSON.stringify(de,null,2)],{type:"application/json"}),Ae=URL.createObjectURL(Ie),Xe=document.createElement("a"),oe=H.name.toLowerCase().replace(/\s+/g,"-");Xe.href=Ae,Xe.download=`sfdatahub-set-${oe}.json`,Xe.click(),URL.revokeObjectURL(Ae)},Ne=()=>{var de;(de=U.current)==null||de.click()},Ee=de=>{var fe,me;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Ie=t("tools.sets.deleteConfirmTitle"),Ae=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Ie}

${Ae}`))return;const Xe=h.filter(xe=>xe.id!==de),oe=de===g?(me=(fe=Xe[0])==null?void 0:fe.id)!=null?me:null:g;m(Xe),oe&&x(oe)},ee=de=>{const Ie=h.find(Ae=>Ae.id===de);Ie&&(A(de),I(Ie.name),v(""))},le=()=>{A(null),I(""),v("")},re=()=>{if(!k)return;const de=L.trim();if(!de){v(t("tools.sets.renameErrorEmpty"));return}m(Ie=>Ie.map(Ae=>Ae.id===k?{...Ae,name:de}:Ae)),A(null),I(""),v("")},be=async de=>{var Ae,Xe;const Ie=(Xe=(Ae=de.target)==null?void 0:Ae.files)==null?void 0:Xe[0];if(Ie)try{if(h.length>=Kf){alert(t("tools.sets.importErrorMaxReached"));return}const oe=await Ie.text(),fe=JSON.parse(oe);if((fe==null?void 0:fe.version)!==1||(fe==null?void 0:fe.type)!=="toolSet"||typeof(fe==null?void 0:fe.set)!="object")throw new Error("invalid payload");const{set:me}=fe;if(typeof(me==null?void 0:me.name)!="string"||typeof(me==null?void 0:me.classLabel)!="string"||typeof(me==null?void 0:me.serverLabel)!="string")throw new Error("invalid set");const xe={...me,id:`imported-${Date.now()}`,name:me.name,classLabel:me.classLabel,serverLabel:me.serverLabel};m(tt=>[...tt,xe]),x(xe.id)}catch(oe){console.error("Failed to import set",oe),alert(t("tools.sets.importErrorInvalid"))}finally{de.target.value=""}},Te=de=>{g&&(m(Ie=>Ie.map(Ae=>{var oe;if(Ae.id!==g)return Ae;const Xe={...(oe=Ae.tools)!=null?oe:{},gemSim:de};return{...Ae,tools:Xe}})),R(!0))},Le=de=>{g&&(m(Ie=>Ie.map(Ae=>{var oe;if(Ae.id!==g)return Ae;const Xe={...(oe=Ae.tools)!=null?oe:{},dungeonPauseOpenXP:de};return{...Ae,tools:Xe}})),R(!0))},Re=`${G}/${Kf}`,Oe=t(z.labelKey,z.defaultLabel),Me=t(z.descriptionKey,z.defaultDescription),De=async()=>{if(!i)return;const de=e==null?void 0:e.id;if(!(!de||T||C!==null&&C>Date.now())&&_){F(!0),V(null);try{await RAe(de,{sets:h,activeSetId:g,activeToolId:b});const Ae=Date.now(),Xe=Ae+PAe;R(!1),S(new Date(Ae)),M(Xe)}catch(Ae){console.error("Failed to sync tools state",Ae),V(t("tools.sync.error"))}finally{F(!1)}}};return s.jsx(as,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:s.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),s.jsx("span",{className:"text-xs text-slate-400",children:Re})]}),s.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(de=>{const Ie=de.id===g;return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>x(de.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Ie?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-slate-50",children:de.name}),s.jsx("span",{role:"button",tabIndex:0,onClick:Ae=>{Ae.stopPropagation(),ee(de.id)},onKeyDown:Ae=>{(Ae.key==="Enter"||Ae.key===" ")&&(Ae.preventDefault(),Ae.stopPropagation(),ee(de.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:s.jsx(Q7,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"text-xs text-emerald-200/90",children:de.classLabel}),s.jsx("div",{className:"text-xs text-slate-400",children:de.serverLabel}),Ie&&s.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&s.jsx("button",{type:"button",onClick:Ae=>{Ae.stopPropagation(),Ee(de.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},de.id)}),s.jsxs("button",{type:"button",onClick:J,disabled:X,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",X?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[s.jsx("span",{className:"text-lg",children:"+"}),s.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[s.jsx("button",{type:"button",onClick:ue,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),s.jsx("button",{type:"button",onClick:Ne,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),s.jsx("input",{ref:U,type:"file",accept:"application/json",className:"hidden",onChange:be})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[s.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),s.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:bu.map(de=>{const Ie=de.id===b,Ae=t(de.labelKey,de.defaultLabel);return s.jsxs("button",{type:"button",onClick:()=>w(de.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Ie?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[s.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),s.jsx("span",{children:Ae})]},de.id)})})]}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),s.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(de=>s.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),s.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:de})]},de))})]}),s.jsx(AAe,{isLoggedIn:i,hasUnsyncedChanges:_,lastSyncedAt:j,cooldownUntil:C,onSyncClick:De,isSaving:T,syncError:D})]}):s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),s.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),s.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(de=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),s.jsx("span",{children:de})]},de))})]}),s.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:s.jsx("button",{type:"button",onClick:se,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:Oe}),s.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(H==null?void 0:H.name)||"kein Set"]})]}),s.jsx("div",{className:"flex gap-2",children:bu.map(de=>s.jsx("div",{className:["h-2 w-8 rounded-full transition",b===de.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},de.id))})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsx("div",{className:"text-sm text-slate-300",children:Me}),s.jsx("div",{className:"mt-4",children:b==="gemSim"?s.jsx(r2,{initialState:Y,onStateChange:Te}):b==="dungeonPauseOpenXP"?s.jsx(i2,{initialState:te,onStateChange:Le},g):s.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",s.jsx("br",{}),"(z. B. ",Oe,")"]})})]}),s.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),s.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:H==null?void 0:H.name}),s.jsx("div",{className:"text-sm text-emerald-200/90",children:H==null?void 0:H.classLabel}),s.jsx("div",{className:"text-xs text-slate-400",children:H==null?void 0:H.serverLabel})]}),s.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",s.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),k&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:le}),s.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),s.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),s.jsx("input",{value:L,onChange:de=>I(de.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),N&&s.jsx("p",{className:"mt-2 text-xs text-rose-400",children:N}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:le,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),s.jsx("button",{type:"button",onClick:re,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const T1=50,MAe=3,FAe=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),I1=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function BAe(){var _,R;const[t]=sr(),e=(R=(_=t.get("q"))==null?void 0:_.trim())!=null?R:"",n=FAe(e),[r,i]=q.useState([]),[a,o]=q.useState([]),[c,u]=q.useState(null),[h,m]=q.useState(null),[g,x]=q.useState(!1),[b,w]=q.useState(!1),[k,A]=q.useState(!1),[L,I]=q.useState(null),N=async j=>{const S=Mn("Search:results");try{const C=Dn(Fp(Tt,"latest"),Hi("nameFold"),Zl(n),ec(n+""),...j?[GG(j)]:[],pr(T1)),M=await Tn(S,{},()=>Cn(C)),T=M.docs.length?M.docs[M.docs.length-1]:null,F=[],D=[];M.forEach(V=>{var Y,te,G,X,J,se,ue,Ne,Ee,ee,le,re,be,Te,Le,Re,Oe,Me,De,Fe,we,de,Ie,Ae,Xe,oe,fe,me,xe,tt,lt,Je;const U=V.data(),K=(Y=V.ref.parent)==null?void 0:Y.parent,H=(te=K==null?void 0:K.parent)==null?void 0:te.id,z=(G=K==null?void 0:K.id)!=null?G:V.id;H==="players"?F.push({id:z,name:(se=(J=U.name)!=null?J:(X=U.values)==null?void 0:X.Name)!=null?se:null,server:(Ee=(Ne=U.server)!=null?Ne:(ue=U.values)==null?void 0:ue.Server)!=null?Ee:null,className:(re=(le=U.className)!=null?le:(ee=U.values)==null?void 0:ee.Class)!=null?re:null,level:I1((Te=U.level)!=null?Te:(be=U.values)==null?void 0:be.Level)}):H==="guilds"&&D.push({id:z,name:(Oe=(Re=U.name)!=null?Re:(Le=U.values)==null?void 0:Le.Name)!=null?Oe:null,server:(Fe=(De=U.server)!=null?De:(Me=U.values)==null?void 0:Me.Server)!=null?Fe:null,memberCount:I1((Ae=(de=U.memberCount)!=null?de:(we=U.values)==null?void 0:we["Guild Member Count"])!=null?Ae:(Ie=U.values)==null?void 0:Ie.GuildMemberCount),hofRank:I1((Je=(tt=(me=(oe=U.hofRank)!=null?oe:(Xe=U.values)==null?void 0:Xe["Hall of Fame Rank"])!=null?me:(fe=U.values)==null?void 0:fe.HoF)!=null?tt:(xe=U.values)==null?void 0:xe.Rank)!=null?Je:(lt=U.values)==null?void 0:lt["Guild Rank"])})}),i(V=>[...V,...F]),o(V=>[...V,...D]),u(T),m(T),x(M.docs.length===T1),w(M.docs.length===T1)}finally{dn(S)}};q.useEffect(()=>{if(n.length<MAe){I("Type at least 3 characters to search.");return}I(null),i([]),o([]),u(null),m(null),x(!1),w(!1),A(!0),N().catch(j=>I((j==null?void 0:j.message)||"Search failed")).finally(()=>A(!1))},[n]);const v=()=>{k||(A(!0),N(c||h).catch(j=>I((j==null?void 0:j.message)||"Search failed")).finally(()=>A(!1)))};return s.jsxs(as,{title:"Search",subtitle:e?`Results for ${e}`:"",children:[L&&s.jsx("p",{style:{color:"#ff9c9c",marginBottom:12},children:L}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[s.jsxs("section",{children:[s.jsx("h3",{children:"Players"}),r.map(j=>{var S,C,M;return s.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[s.jsx("div",{style:{fontWeight:700},children:(S=j.name)!=null?S:j.id}),s.jsxs("div",{style:{opacity:.8},children:[(C=j.className)!=null?C:"?","  ",(M=j.server)!=null?M:"?","  ",j.level!=null?`Lvl ${j.level}`:"Lvl ?"]})]},j.id)})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Guilds"}),a.map(j=>{var S,C;return s.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[s.jsx("div",{style:{fontWeight:700},children:(S=j.name)!=null?S:j.id}),s.jsxs("div",{style:{opacity:.8},children:[(C=j.server)!=null?C:"?"," "," ",j.memberCount!=null?`${j.memberCount} members`:"Members ?"," "," ",j.hofRank!=null?`HoF #${j.hofRank}`:"HoF ?"]})]},j.id)})]})]}),(g||b)&&s.jsx("div",{style:{marginTop:16},children:s.jsx("button",{type:"button",onClick:v,disabled:k,style:{padding:"10px 14px"},children:k?"Loading":"Load more"})})]})}const $Ae="_backdrop_19xh2_1",OAe="_panel_19xh2_19",VAe="_header_19xh2_43",UAe="_tabs_19xh2_63",zAe="_tabBtn_19xh2_75",GAe="_tabActive_19xh2_97",HAe="_closeBtn_19xh2_101",WAe="_content_19xh2_123",eo={backdrop:$Ae,panel:OAe,header:VAe,tabs:UAe,tabBtn:zAe,tabActive:GAe,closeBtn:HAe,content:WAe},Vr=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const n=Number(e);return Number.isFinite(n)?n:0},t5=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),_u=(t,e)=>{if(!t||typeof t!="object")return;const n=t5(e);for(const r of Object.keys(t))if(t5(r)===n)return t[r]},KAe=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let n=e.match(/EU(\d+)/);return n?{group:"EU",serverKey:`EU${n[1]}`}:(n=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/),n?{group:"EU",serverKey:`EU${n[1]||n[2]}`}:(n=e.match(/^S(\d+)$/),n?{group:"EU",serverKey:`EU${n[1]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(n=e.match(/F(\d+)/),n?{group:"FUSION",serverKey:`F${n[1]}`}:{group:"ALL",serverKey:"all"})))},qAe={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Intelligence",Mage:"Base Intelligence","Battle Mage":"Base Strength",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},Xl=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,h6=t=>{const e={str:Vr(Xl(t,"Base Strength")),dex:Vr(Xl(t,"Base Dexterity")),intl:Vr(Xl(t,"Base Intelligence")),con:Vr(Xl(t,"Base Constitution")),luck:Vr(Xl(t,"Base Luck"))},n=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:n}},QAe=(t,e)=>{var Y,te;const{playerId:n,identifier:r,name:i,className:a,level:o,server:c,guildIdentifier:u,guildName:h,timestamp:m,updatedAt:g,values:x={}}=t||{},b=Vr(o),{group:w,serverKey:k}=KAe(c),A=h6(x),L=Vr(_u(x,"Base")),I=Vr(_u(x,"Base Constitution")),N=(Y=qAe[String(a!=null?a:"")])!=null?Y:"Base Intelligence",v=Vr(Xl(x,N)),_=L+I,R=A.con,j=b>0?_/b:0,S=Vr(_u(x,"Attribute")),C=Vr(_u(x,"Constitution")),M=S+C,T=Vr(_u(x,"XP")),F=Vr(_u(x,"XP Total")),D=Vr(Xl(x,"Gem Mine")),V=Vr(Xl(x,"Treasury")),U=e?e():null,K=String(n!=null?n:"").trim(),z=(typeof r=="string"?r.trim():"")||(K&&k?`${k.toLowerCase()}_p${K}`:"");return{playerId:String(n!=null?n:""),identifier:z||null,name:String(i!=null?i:""),class:String(a!=null?a:""),level:b,group:w,serverKey:k,guildId:u?String(u):"",guildName:h?String(h):"",sum:_,main:v,con:R,ratio:j,mainTotal:S,conTotal:C,sumTotal:M,xpProgress:T,xpTotal:F,mine:D,treasury:V,timestamp:Vr(m),updatedAtFromLatest:(te=g!=null?g:U)!=null?te:null}},$i=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},YAe=["latestScanAtSec"],XAe=t=>{if(typeof t=="number")return Number.isFinite(t)?t>1e12?Math.floor(t/1e3):t:null;if(typeof t=="string"){const e=t.trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e)}return null},vx=t=>{for(const e of YAe)if(Object.prototype.hasOwnProperty.call(t,e))return{sec:XAe(t[e]),field:e};return{sec:null,field:null}},m6=(t,e,n)=>{if(!Number.isFinite(e))return t;const r=n!=null?n:"latestScanAtSec";return t[r]===e?t:{...t,[r]:e}},JAe=t=>{var u,h,m,g,x,b,w,k,A,L,I,N,v,_,R,j,S,C,M,T,F,D;const e=t.lastScanRaw!=null?String(t.lastScanRaw).trim():"",n=String((u=t.timestampSec)!=null?u:"").trim(),r=(e||n).trim(),i=String((h=t.playerId)!=null?h:"").trim(),a=String((m=t.server)!=null?m:"").trim(),c=(typeof t.identifier=="string"?t.identifier.trim():"")||(i&&a?`${a.toLowerCase()}_p${i}`:"");return{playerId:String((g=t.playerId)!=null?g:""),identifier:c||null,server:String((x=t.server)!=null?x:""),name:String((b=t.name)!=null?b:""),class:String((A=(k=(w=t.derived)==null?void 0:w.class)!=null?k:t.className)!=null?A:""),guild:t.guildName?String(t.guildName):null,lastScan:r||null,latestScanAtSec:$i(t.timestampSec),level:$i((I=t.level)!=null?I:(L=t.derived)==null?void 0:L.level),con:$i((N=t.derived)==null?void 0:N.con),main:$i((v=t.derived)==null?void 0:v.main),mainTotal:$i((_=t.derived)==null?void 0:_.mainTotal),conTotal:$i((R=t.derived)==null?void 0:R.conTotal),sumTotal:$i((j=t.derived)==null?void 0:j.sumTotal),xpProgress:$i((S=t.derived)==null?void 0:S.xpProgress),xpTotal:$i((C=t.derived)==null?void 0:C.xpTotal),mine:$i((M=t.derived)==null?void 0:M.mine),ratio:$i((T=t.derived)==null?void 0:T.ratio),sum:$i((F=t.derived)==null?void 0:F.sum),treasury:$i((D=t.derived)==null?void 0:D.treasury)}},zi=t=>String(t!=null?t:"").trim(),p6=t=>zi(t).toUpperCase(),gs=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),vv=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),s5=t=>{const e=vv(t);if(!e)return[];const n=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(n))},n5=t=>{const e=new Set;for(const n of t)for(let r=1;r<=n.length;r++)e.add(n.slice(0,r));return Array.from(e)},r5=t=>{var n;const e=String((n=t==null?void 0:t.code)!=null?n:"").toLowerCase();return e.includes("permission")||e.includes("already")||e.includes("failed-precondition")},g6=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},ZAe=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=e.replace(/[\s,\.]/g,""),r=Number(n);return Number.isFinite(r)?r:null},e4e=1,t4e=200,s4e=t=>t==null?"non_numeric":t<e4e||t>t4e?"out_of_range":"ok",i5=t=>{const e=g6(t);return Number.isFinite(e!=null?e:NaN)?Math.trunc(e):null},n4e=t=>{const e=gs(t);for(const[n,r]of Object.entries(f6))if(gs(r)===e)return Number(n);return null},a5=t=>{var a;const e=t==null?"":String(t).trim();if(!e)return{classId:null,className:null};const n=Number(e);if(Number.isInteger(n)&&!Number.isNaN(n)){const o=n;return{classId:o,className:(a=f6[o])!=null?a:String(o)}}return{classId:n4e(e),className:e}},Us={PLAYERS:{IDENTIFIER:gs("Identifier"),PID:gs("ID"),GUILD_IDENTIFIER:gs("Guild Identifier"),SERVER:gs("Server"),NAME:gs("Name"),TIMESTAMP:gs("Timestamp"),LEVEL:gs("Level"),CLASS:gs("Class"),GUILD:gs("Guild")},GUILDS:{GUILD_IDENTIFIER:gs("Guild Identifier"),SERVER:gs("Server"),NAME:gs("Name"),MEMBER_COUNT:gs("Guild Member Count"),TIMESTAMP:gs("Timestamp"),HOF:gs("Hall of Fame Rank"),HOF_ALT:gs("HoF"),RANK:gs("Rank"),GUILD_RANK:gs("Guild Rank")}},f6={1:"Warrior",2:"Mage",3:"Scout",4:"Assassin",5:"Battle Mage",6:"Berserker",7:"Demon Hunter",8:"Bard"},v6=[Us.PLAYERS.LEVEL,gs("Level"),gs("Lvl"),gs("Stufe")],x6=[Us.PLAYERS.CLASS,gs("Class"),gs("ClassID"),gs("Class ID"),gs("CharClass"),gs("Klasse")],h2=t=>{const e=new Map;return t.forEach(n=>{const r=gs(n);e.has(r)||e.set(r,n)}),e},Mu=t=>{const e=new Set;for(const n of t)Object.keys(n).forEach(r=>e.add(r));return Array.from(e)},Ui=(t,e,n)=>{const r=e.get(n);return r&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:pa(t,n)},V_=(t,e,n)=>n.map(r=>Ui(t,e,r)).find(r=>r!=null&&String(r)!==""),rd=t=>String(t!=null?t:"").replace(/\u00a0/g," ").trim().replace(/\s+/g," ").replace(/:+$/,"").toLowerCase().replace(/[\s-]+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_+|_+$/g,""),r4e=t=>{const e=new Map;return t.forEach(n=>{var a;const r=rd(n);if(!r)return;const i=(a=e.get(r))!=null?a:[];i.push(n),e.set(r,i)}),e},i4e=["guild_member_count","guild_membercount","guildmembercount","member_count","membercount","guild_members"],m2=t=>{const e=r4e(t),n=[];for(const r of i4e){const i=e.get(r);if(i)for(const a of i)n.includes(a)||n.push(a)}return n},y6=(t,e)=>{const n=e!=null?e:m2(t);if(!n.length)return null;const r=rd("Guild Member Count"),i=n.find(a=>rd(a)===r);return i||(n.length===1,n[0])},a4e=new Set([gs("Strength"),gs("Dexterity"),gs("Intelligence"),gs("Constitution"),gs("Luck"),gs("Attribute")]),o4e=["equipment"],l4e=t=>a4e.has(t)||o4e.some(e=>t.includes(e)),pa=(t,e)=>{for(const n of Object.keys(t))if(gs(n)===e)return t[n]},c4e=/^[a-z]{1,4}\d+$/i,d4e=/^([a-z]{1,4}\d+)[_.-]?(net|eu)$/i,u4e=/^([a-z]{1,4}\d+)\.sfgame\.(net|eu)$/i,xv=t=>{const e=String(t!=null?t:"").trim().toUpperCase();if(!e)return e;const n=e.match(/^S(\d+)$/);return n?`EU${n[1]}`:e},h4e=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase();if(c4e.test(n))return xv(n);const r=n.match(d4e);if(r)return xv(r[1]);const i=n.match(u4e);return i?xv(i[1]):e},b6=t=>{var i;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/);if(!n)return null;const r=(i=n[1])==null?void 0:i.trim();return r?h4e(r):null},m4e=t=>{var r;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/);return n&&(r=n[2])!=null?r:null},_6=(t,e,n,r,i)=>{var h;const a=(m,g,x,b)=>{const w=ZAe(g),k=s4e(w);return{header:m,headerIndex:m?n.indexOf(m):-1,rawValue:g,parsedValue:w,validationResult:k,isValid:k==="ok",fallbackUsed:b,source:x}};if(r){const m=a(r,t[r],"primary",!1);if(m.isValid)return m}for(const m of i){if(m===r)continue;const g=a(m,t[m],"alias",!0);if(g.isValid)return g}const o=(h=e.get(Us.GUILDS.MEMBER_COUNT))!=null?h:null,c=o?t[o]:pa(t,Us.GUILDS.MEMBER_COUNT);return a(o,c,o?"lookup":"none",!0)};function xx(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(n){const i=Number(n[1]),a=Number(n[2])-1,o=Number(n[3]),c=Number(n[4]),u=Number(n[5]),h=n[6]?Number(n[6]):0,m=new Date(o,a,i,c,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function o5(t){const e=new Date(t*1e3),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=n.getUTCDay()||7;n.setUTCDate(n.getUTCDate()+4-r);const i=new Date(Date.UTC(n.getUTCFullYear(),0,1)),a=Math.ceil(((+n-+i)/864e5+1)/7),o=n.getUTCFullYear(),c=a.toString().padStart(2,"0");return`${o}-W${c}`}function l5(t){const e=new Date(t*1e3),n=new Date(e),r=(n.getDay()+6)%7;n.setHours(0,0,0,0),n.setDate(n.getDate()-r);const i=Math.floor(n.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function c5(t){const e=new Date(t*1e3),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${n}-${r}`}function d5(t){const e=new Date(t*1e3),n=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(n.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function w6(t){const e=[",",";","	","|"];let n=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(n=i,r=a)}return n}const p4e="sf_debug_guild_csv_parse",g4e=()=>typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(p4e)==="1",qf=(t,e=260)=>t.length<=e?t:`${t.slice(0,Math.max(0,e-3))}...`,f4e=t=>{const e={},n=[",",";","	","|"];for(const r of n){let i=0;for(let a=0;a<t.length;a++)t[a]===r&&i++;e[r==="	"?"\\t":r]=i}return e},v4e=(t,e,n)=>{var D,V,U,K,H,z,Y,te,G,X,J,se;if(!g4e())return;const i=(D=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`)[0])!=null?D:"",a=i.replace(/^\uFEFF/,""),o=i.startsWith("\uFEFF"),c=i.includes(""),u=w6(a),h=f4e(a),m=e.headers.map(rd),g={};e.headers.forEach((ue,Ne)=>{var le;const Ee=rd(ue);if(!Ee)return;const ee=(le=g[Ee])!=null?le:[];ee.push(Ne),g[Ee]=ee});const x=e.headers.find(ue=>rd(ue)===rd("Guild Identifier")),b=x?e.headers.indexOf(x):-1,w=m2(e.headers),k=y6(e.headers,w),A=k?e.headers.indexOf(k):-1,L=h2(e.headers),I=e.rows[0],N=I?Ui(I,L,Us.GUILDS.GUILD_IDENTIFIER):null,v=I?_6(I,L,e.headers,k,w):null,_=(V=v==null?void 0:v.rawValue)!=null?V:null,R=(U=v==null?void 0:v.parsedValue)!=null?U:null,j=(H=(K=e.meta)==null?void 0:K.headerCount)!=null?H:e.headers.length,S=(te=(Y=(z=e.meta)==null?void 0:z.rowTokenCounts)==null?void 0:Y[0])!=null?te:null,C=S!=null&&j>0?S<j:null,M=(X=(G=e.meta)==null?void 0:G.paddedRowCount)!=null?X:0,T=(se=(J=e.meta)==null?void 0:J.truncatedRowCount)!=null?se:0,F=[];i||F.push("missing header line"),e.headers.length||F.push("no headers parsed"),e.rows.length===0&&F.push("no data rows after parse"),x||F.push("missing guild identifier header"),k||F.push("missing guild member count header"),e.rows.length>0&&n.rows.length===0&&F.push(`all rows filtered (missingIdentifier=${n.stats.missingIdentifier}, badTimestamp=${n.stats.badTimestamp}, missingServer=${n.stats.missingServer})`),!F.length&&n.rows.length===0&&F.push("no parsed guild rows"),console.groupCollapsed("[GuildCsvParse] Debug"),console.log("headerLine",{length:i.length,hasBom:o,hasNbsp:c,delimiter:u,delimiterCounts:h,sample:qf(i)}),console.log("headers",{raw:e.headers,normalized:m,headerIndexMap:g}),console.log("requiredHeaders",{guildIdentifier:x,guildIdentifierIndex:b,memberCount:k,memberCountIndex:A,memberCountCandidates:w}),console.log("rowAlignment",{headerCount:j,sampleRowTokenCount:S,sampleRowPadded:C,paddedRowCount:M,truncatedRowCount:T}),console.log("rows",{parsedRows:e.rows.length,guildRows:n.rows.length,stats:n.stats}),console.log("sample",{guildIdentifier:N==null?null:qf(String(N)),memberCountRaw:_==null?null:qf(String(_)),memberCount:R}),v&&console.log("memberCountResolution",{primaryHeader:k,primaryIndex:A,resolvedHeader:v.header,resolvedIndex:v.headerIndex,rawValueAtIndex:v.rawValue==null?null:qf(String(v.rawValue)),parsedMemberCount:v.parsedValue,validationResult:v.validationResult,fallbackUsed:v.fallbackUsed,source:v.source}),F.length&&console.warn("[GuildCsvParse] Issues",F),console.groupEnd()};function yx(t){var x;const n=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!n.length)return{headers:[],rows:[],meta:{headerCount:0,rowTokenCounts:[],paddedRowCount:0,truncatedRowCount:0}};const r=w6((x=n[0])!=null?x:""),i=b=>{const w=[];let k="",A=!1;for(let L=0;L<b.length;L++){const I=b[L];I==='"'?A&&b[L+1]==='"'?(k+='"',L++):A=!A:I===r&&!A?(w.push(k),k=""):k+=I}return w.push(k),w},o=(n[0]?i(n[0]).map(zi):[]).map((b,w)=>b||`col${w}`),c=o.length,u=[],h=[];let m=0,g=0;for(let b=1;b<n.length;b++){if(!n[b])continue;const w=i(n[b]);if(w.every(L=>zi(L)===""))continue;const k=w.length;k<c?(w.push(...Array(c-k).fill("")),m++):k>c&&g++,h.push(k);const A={};for(let L=0;L<c;L++)A[o[L]]=w[L]!=null?zi(w[L]):"";u.push(A)}return{headers:o,rows:u,meta:{headerCount:c,rowTokenCounts:h,paddedRowCount:m,truncatedRowCount:g}}}function x4e(t){const e={};for(let n=0;n<t.length;n++){const r=gs(t[n]);v6.includes(r)&&e.levelIndex==null&&(e.levelIndex=n),x6.includes(r)&&e.classIndex==null&&(e.classIndex=n)}if(e.levelIndex==null){const n=t.findIndex(r=>r.trim()==="Level");n>=0&&(e.levelIndex=n)}if(e.classIndex==null){const n=t.findIndex(r=>r.trim()==="Class");n>=0&&(e.classIndex=n)}return e}function j6(t,e){const n=e&&e.length?e:Mu(t),r=h2(n),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[],o=x4e(n);for(const c of t){const u=Ui(c,r,Us.PLAYERS.IDENTIFIER),h=zi(u);if(!h){i.missingIdentifier++;continue}const m=Ui(c,r,Us.PLAYERS.PID),g=zi(m||m4e(h));if(!g){i.missingIdentifier++;continue}const x=xx(Ui(c,r,Us.PLAYERS.TIMESTAMP));if(x==null){i.badTimestamp++;continue}const b=b6(h),w=Ui(c,r,Us.PLAYERS.SERVER),k=w&&zi(w)!==""?p6(w):void 0,A=b!=null?b:h?void 0:k;if(!A){i.missingServer++;continue}const L=Ui(c,r,Us.PLAYERS.NAME),I=L!=null&&zi(L)!==""?String(L):null,N=Ui(c,r,Us.PLAYERS.GUILD_IDENTIFIER),v=N!=null&&zi(N)!==""?String(N):null,_=Ui(c,r,Us.PLAYERS.GUILD),R=_!=null&&zi(_)!==""?String(_):null,j=o.levelIndex!=null?i5(c[n[o.levelIndex]]):i5(V_(c,r,v6)),S=o.classIndex!=null?a5(c[n[o.classIndex]]):a5(V_(c,r,x6));a.push({playerId:g,identifier:h,server:A,name:I,timestampSec:x,guildIdentifier:v,guildName:R,level:j,classId:S.classId,className:S.className,raw:c})}return{rows:a,stats:i,headers:n}}function S6(t,e){const n=e&&e.length?e:Mu(t),r=h2(n),i=m2(n),a=y6(n,i),o={missingIdentifier:0,badTimestamp:0,missingServer:0},c=[];for(const u of t){const h=Ui(u,r,Us.GUILDS.GUILD_IDENTIFIER),m=zi(h);if(!m){o.missingIdentifier++;continue}const g=xx(Ui(u,r,Us.GUILDS.TIMESTAMP));if(g==null){o.badTimestamp++;continue}const x=Ui(u,r,Us.GUILDS.SERVER),b=x&&zi(x)!==""?p6(x):void 0;if(!b){o.missingServer++;continue}const w=Ui(u,r,Us.GUILDS.NAME),k=w!=null&&zi(w)!==""?String(w):null,A=_6(u,r,n,a,i),L=A.isValid?A.parsedValue:null,I=g6(V_(u,r,[Us.GUILDS.HOF,Us.GUILDS.HOF_ALT,Us.GUILDS.RANK,Us.GUILDS.GUILD_RANK]));c.push({guildIdentifier:m,server:b,name:k,timestampSec:g,memberCount:L,hofRank:I,raw:u})}return{rows:c,stats:o,headers:n}}function y4e(t){const e=yx(t);return j6(e.rows,e.headers).rows}function b4e(t){const e=yx(t),n=S6(e.rows,e.headers);return v4e(t,e,n),n.rows}const _4e="stats_cache_player_derived",w4e="stats_cache_guild_derived",N6=40,u5=120,E1=500,A1=500,Ms=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},Fo=t=>{if(t==null)return 0;const e=String(t).replace(/[^0-9]/g,"");if(!e)return 0;const n=Number(e);return Number.isFinite(n)?n:0},Bo=(t,e)=>{if(!(!t||typeof t!="object")){for(const n of e)if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}},$o={honor:["Guild Honor"],hydra:["Guild Hydra"],instructor:["Guild Instructor"],knights:["Guild Knights"],knights15Plus:["Guild Knights 15+"],memberCount:["Guild Member Count"],portalFloor:["Guild Portal Floor"],raids:["Guild Raids"],treasury:["Guild Treasure","Guild Treasury"]},j4e=t=>({honor:Fo(Bo(t,$o.honor)),hydra:Fo(Bo(t,$o.hydra)),instructor:Fo(Bo(t,$o.instructor)),knights:Fo(Bo(t,$o.knights)),knights15Plus:Fo(Bo(t,$o.knights15Plus)),memberCount:Fo(Bo(t,$o.memberCount)),portalFloor:Fo(Bo(t,$o.portalFloor)),raids:Fo(Bo(t,$o.raids)),treasury:Fo(Bo(t,$o.treasury))}),k6=t=>`snapshot_${t}_player_derived`,p2=t=>`snapshot_${t}_guild_derived`,C6=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase(),r=n.match(/^eu(\d+)$/);if(r)return`EU${r[1]}`;const i=n.match(/^f(\d+)$/);return i?`F${i[1]}`:xv(e)},S4e=t=>{var r;if(!t)return null;if(/^[a-z][a-z0-9+.-]*:\/\//i.test(t))try{const i=new URL(t).hostname;if(i)return i.toLowerCase()}catch(i){}let e=t.replace(/^[a-z]+:\/\//i,"");if(e=(r=e.split(/[/?#]/)[0])!=null?r:"",e=e.replace(/\s+/g,"").trim(),!e)return null;let n=e.toLowerCase().replace(/:\d+$/,"");return n=n.replace(/^\.+|\.+$/g,""),n||null},qm=t=>{var o;const e=String(t!=null?t:"").replace(/\u00a0/g," ").trim();if(!e)return{input:e,normalizedInput:e,hostname:null,subdomain:null,canonicalCode:null};const n=(()=>{var u;let c=e.toLowerCase();return c.includes("_")&&c.endsWith("_net")&&(c=(u=c.split("_")[0])!=null?u:c),c})().trim(),r=S4e(n),i=r&&(o=r.split(".")[0])!=null?o:"",a=i?C6(i):null;return{input:e,normalizedInput:n,hostname:r,subdomain:i||null,canonicalCode:a}},yv=t=>{var i;const e=qm(t),n=(i=e.canonicalCode)!=null?i:e.subdomain?C6(e.subdomain):null,r=e.hostname&&e.hostname.includes(".")?e.hostname:null;return n&&r?{code:n,host:r}:n?{code:n}:r?{host:r}:{}},bv=(t,e)=>{var r,i;const n=yv(e);if(n.code){const a=(i=(r=t.get(n.code))!=null?r:t.get(n.code.toLowerCase()))!=null?i:t.get(n.code.toUpperCase());if(a)return a}if(n.host){const a=t.get(n.host);if(a)return a}return null},N4e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};async function _v(t){var i,a;const e=new Map,n=new Set,r=[];for(const o of t){const c=yv(o);c.code&&n.add(c.code),c.host&&r.push({host:c.host,code:(i=c.code)!=null?i:null})}if(r.length===0&&n.size===0)return e;try{const o=ol(Tt,"servers");for(const x of n){const b=ms(Tt,"servers",x),w=await In(null,b,()=>mn(b),{label:"ImportCsv:serversHostMap"});if(w.exists()){const k=w.data(),A=(a=yv(k==null?void 0:k.host).host)!=null?a:null;A&&e.set(A,w.id),e.set(x.toLowerCase(),w.id),e.set(x.toUpperCase(),w.id)}}const c=new Set,u=x=>x?e.has(x)||e.has(x.toLowerCase())||e.has(x.toUpperCase()):!1;for(const x of r)x.host&&(u(x.code)||c.add(x.host));const h=N4e(Array.from(c),10);for(const x of h){const b=Dn(o,ji("host","in",x));(await Tn(null,{path:o.path},()=>Cn(b),{label:"ImportCsv:serversHostMap"})).forEach(k=>{var I;const A=k.data(),L=(I=yv(A==null?void 0:A.host).host)!=null?I:null;L&&e.set(L,k.id),e.set(k.id.toLowerCase(),k.id),e.set(k.id.toUpperCase(),k.id)})}const m=Array.from(c).filter(x=>!e.has(x));m.length&&console.warn("[ImportCsv] Server hosts not mapped",{hosts:m});const g=Array.from(n).filter(x=>!e.has(x.toLowerCase()));g.length&&console.warn("[ImportCsv] Server codes not mapped",{codes:g})}catch(o){console.warn("[ImportCsv] Failed to load server host map",{error:o})}return e}async function wv(t,e,n,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:n});for(let i=0;i<t.length;i+=e){const a=JG(Tt),o=t.slice(i,i+e);for(const c of o)c.apply(a);r==null||r({phase:"write",current:Math.min(i+o.length,t.length),total:t.length,pass:n}),await gH(()=>a.commit(),{label:`ImportCsv:${n}`,path:`batch:${n}`}),o.forEach(c=>{var u,h;ph({path:c.path,op:(u=c.op)!=null?u:"setDoc",docCount:1,label:(h=c.label)!=null?h:`ImportCsv:${n}`})}),await new Promise(c=>setTimeout(c,12))}r==null||r({phase:"done",current:1,total:1,pass:n})}async function h5(t,e,n){var m,g,x;const r=[];if(!t.length)return r;let i=0,a=0,o=0,c=0;const u=b=>{e==null||e({phase:b,current:b==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:o,error:c,kind:n})};u("prepare");const h=Tt.bulkWriter;if(typeof h=="function"){const b=h.call(Tt,{throttling:!0}),w=()=>{i++,u("write")};for(const{ref:k,data:A,key:L}of t)b.create(k,A).then(()=>{a++,ph({path:k.path,op:"setDoc",docCount:1,label:"ImportCsv:scansBulk"}),r.push({key:L,status:"created"}),w()}).catch(I=>{var v,_;const N=String((v=I==null?void 0:I.code)!=null?v:"").toLowerCase();N.includes("already")&&N.includes("exist")?(o++,r.push({key:L,status:"duplicate"})):(c++,r.push({key:L,status:"error",message:String((_=I==null?void 0:I.message)!=null?_:I)})),w()});try{await b.close()}catch(k){console.warn("[ImportCsv] bulkWriter close with errors",{error:k})}return u("done"),r}for(const{ref:b,data:w,key:k}of t){try{await ij(b,()=>ll(b,w),{label:"ImportCsv:scansFallback"}),a++,r.push({key:k,status:"created"})}catch(A){const L=String((m=A==null?void 0:A.code)!=null?m:"").toLowerCase();L.includes("permission")||L.includes("already")?(o++,r.push({key:k,status:"duplicate",message:String((g=A==null?void 0:A.message)!=null?g:A)})):(c++,r.push({key:k,status:"error",message:String((x=A==null?void 0:A.message)!=null?x:A)}))}i++,u("write")}return u("done"),r}async function k4e(t,e){if(!t.length)return;const n=t.length,r=Tt.bulkWriter;if(typeof r=="function"){const a=r.call(Tt,{throttling:!0});e==null||e({phase:"prepare",current:0,total:n,pass:"latest"});for(const{ref:o,data:c}of t)a.set(o,c,{merge:!0});e==null||e({phase:"write",current:n,total:n,pass:"latest"}),await a.close(),t.forEach(({ref:o})=>ph({path:o.path,op:"setDoc",docCount:1,label:"ImportCsv:latestBulk"})),e==null||e({phase:"done",current:1,total:1,pass:"latest"});return}const i=t.map(({ref:a,data:o})=>({path:a.path,op:"setDoc",label:"ImportCsv:latest",apply:c=>c.set(a,o,{merge:!0})}));await wv(i,N6,"latest",e)}async function C4e(t,e){var a,o,c,u;if(!e.length)return{skipped:[],skippedMissingTs:0,applied:0,wrote:!1};const n=String(t||"all").trim()||"all",r=ms(Tt,`${_4e}/${k6(n)}`),i=await I4(()=>x4(Tt,async h=>{var R,j,S,C,M,T,F;const m=await In(null,r,()=>h.get(r),{label:"ImportCsv:derivedSnapshot"}),g=m.exists()?(R=m.data())==null?void 0:R.players:null,x=new Map;if(Array.isArray(g))for(const D of g){if(!D||typeof D!="object")continue;const V=String((j=D.playerId)!=null?j:"");V&&x.set(V,D)}const b=()=>{var U;let D=null,V=Number.POSITIVE_INFINITY;for(const[K,H]of x.entries()){const z=(U=Ms(H.sum))!=null?U:0;z<V&&(V=z,D=K)}return{minId:D,minSum:V}},w=[];let k=0;const A=new Set;for(const D of e){const V=String((S=D.playerId)!=null?S:"");if(!V)continue;const U=vx(D),K=U.sec;if(K==null){k+=1;continue}const H=x.get(V),z=H?vx(H):{sec:null,field:null};if(H&&K!=null&&z.sec!=null&&K<z.sec){w.push({playerId:V,server:n,incoming:K,stored:z.sec});continue}const Y=m6(D,K,(C=z.field)!=null?C:U.field);if(H){x.set(V,Y),A.add(V);continue}if(x.size<E1){x.set(V,Y),A.add(V);continue}const te=(M=Ms(Y.sum))!=null?M:0,{minId:G,minSum:X}=b();G&&te>X&&(x.delete(G),x.set(V,Y),A.add(V))}if(A.size===0)return{skipped:w,skippedMissingTs:k,applied:0,wrote:!1};const L=Array.from(x.values());L.sort((D,V)=>{var K,H,z,Y;const U=((K=Ms(V.sum))!=null?K:0)-((H=Ms(D.sum))!=null?H:0);return U!==0?U:String((z=D.playerId)!=null?z:"").localeCompare(String((Y=V.playerId)!=null?Y:""))}),L.length>E1&&(L.length=E1);const I=m.exists()?(T=m.data())==null?void 0:T.meta:null,N=Number((F=I==null?void 0:I.pendingSincePublish)!=null?F:0),v=(Number.isFinite(N)?N:0)+A.size,_={...I&&typeof I=="object"?I:{},pendingSincePublish:v};return h.set(r,{server:n,updatedAt:Vi(),players:L,meta:_},{merge:!0}),{skipped:w,skippedMissingTs:k,applied:A.size,wrote:!0}}),{label:"ImportCsv:derivedSnapshot",path:r.path});if((a=i==null?void 0:i.skipped)!=null&&a.length)for(const h of i.skipped)console.info("[ImportCsv] skip derived update: older scan",{...h,path:r.path,function:"upsertPlayerDerivedServerSnapshot"});return{skipped:(o=i==null?void 0:i.skipped)!=null?o:[],skippedMissingTs:(c=i==null?void 0:i.skippedMissingTs)!=null?c:0,applied:(u=i==null?void 0:i.applied)!=null?u:0,wrote:!!(i!=null&&i.wrote)}}async function T6(t,e){var a,o,c,u;if(!e.length)return{skipped:[],skippedMissingTs:0,applied:0,wrote:!1};const n=String(t||"all").trim()||"all",r=ms(Tt,`${w4e}/${p2(n)}`),i=await I4(()=>x4(Tt,async h=>{var j,S,C,M,T,F;const m=await In(null,r,()=>h.get(r),{label:"ImportCsv:guildDerivedSnapshot"}),g=m.exists()?(j=m.data())==null?void 0:j.guilds:null,x=new Map;if(Array.isArray(g))for(const D of g){if(!D||typeof D!="object")continue;const V=String((S=D.guildId)!=null?S:"");V&&x.set(V,D)}const b=D=>{var V,U,K;return(K=Ms((U=(V=D.sumAvg)!=null?V:D.avgSumBaseTotal)!=null?U:D.sum))!=null?K:0},w=()=>{let D=null,V=Number.POSITIVE_INFINITY;for(const[U,K]of x.entries()){const H=b(K);H<V&&(V=H,D=U)}return{minId:D,minSum:V}},k=[];let A=0;const L=new Set;for(const D of e){const V=String((C=D.guildId)!=null?C:"");if(!V)continue;const U=vx(D),K=U.sec;if(K==null){A+=1;continue}const H=x.get(V),z=H?vx(H):{sec:null,field:null};if(H&&K!=null&&z.sec!=null&&K<z.sec){k.push({guildId:V,server:n,incoming:K,stored:z.sec});continue}const Y=m6(D,K,(M=z.field)!=null?M:U.field);if(H){x.set(V,Y),L.add(V);continue}if(x.size<A1){x.set(V,Y),L.add(V);continue}const te=b(Y),{minId:G,minSum:X}=w();G&&te>X&&(x.delete(G),x.set(V,Y),L.add(V))}if(L.size===0)return{skipped:k,skippedMissingTs:A,applied:0,wrote:!1};const I=Array.from(x.values()).map(D=>{var V;return D.sumAvg==null?{...D,sumAvg:Ms((V=D.avgSumBaseTotal)!=null?V:D.sum)}:D});I.sort((D,V)=>{var K,H;const U=b(V)-b(D);return U!==0?U:String((K=D.guildId)!=null?K:"").localeCompare(String((H=V.guildId)!=null?H:""))}),I.length>A1&&(I.length=A1);const N=m.exists()?(T=m.data())==null?void 0:T.meta:null,v=Number((F=N==null?void 0:N.pendingSincePublish)!=null?F:0),_=(Number.isFinite(v)?v:0)+L.size,R={...N&&typeof N=="object"?N:{},pendingSincePublish:_};return h.set(r,{server:n,updatedAt:Vi(),guilds:I,meta:R},{merge:!0}),{skipped:k,skippedMissingTs:A,applied:L.size,wrote:!0}}),{label:"ImportCsv:guildDerivedSnapshot",path:r.path});if((a=i==null?void 0:i.skipped)!=null&&a.length)for(const h of i.skipped)console.info("[ImportCsv] skip derived update: older scan",{...h,path:r.path,function:"upsertGuildDerivedServerSnapshot"});return{skipped:(o=i==null?void 0:i.skipped)!=null?o:[],skippedMissingTs:(c=i==null?void 0:i.skippedMissingTs)!=null?c:0,applied:(u=i==null?void 0:i.applied)!=null?u:0,wrote:!!(i!=null&&i.wrote)}}async function T4e(t,e){var o,c,u,h,m,g,x,b,w,k,A;if(!t.size)return;const n=new Map;for(const[L,I]of t.entries()){const N=qm(I.server),v=(o=N.canonicalCode)!=null?o:null,_=bv(e,v!=null?v:I.server);if(!_){I.server&&console.warn("[ImportCsv] Guild derived snapshot skipped (server host not mapped)",{guildId:L,server:I.server,input:N.input,normalizedInput:N.normalizedInput,serverCode:v,hostname:N.hostname,subdomain:N.subdomain,canonicalCode:N.canonicalCode});continue}const R={guildId:String(L),guildIdentifier:String(L),server:_,name:String((c=I.name)!=null?c:L),memberCount:(u=Ms(I.memberCount))!=null?u:0,hofRank:Ms(I.hofRank),honor:(h=Ms(I.honor))!=null?h:0,hydra:(m=Ms(I.hydra))!=null?m:0,instructor:(g=Ms(I.instructor))!=null?g:0,knights:(x=Ms(I.knights))!=null?x:0,knights15Plus:(b=Ms(I.knights15Plus))!=null?b:0,portalFloor:(w=Ms(I.portalFloor))!=null?w:0,raids:(k=Ms(I.raids))!=null?k:0,treasury:(A=Ms(I.treasury))!=null?A:0,lastScan:I.lastScan?String(I.lastScan):null,latestScanAtSec:Ms(I.timestampSec),sum:null,sumAvg:Ms(I.avgSumBaseTotal),count:Ms(I.count),avgLevel:Ms(I.avgLevel),avgTreasury:Ms(I.avgTreasury),avgMine:Ms(I.avgMine),avgBaseMain:Ms(I.avgBaseMain),avgConBase:Ms(I.avgConBase),avgSumBaseTotal:Ms(I.avgSumBaseTotal),avgAttrTotal:Ms(I.avgAttrTotal),avgConTotal:Ms(I.avgConTotal),avgTotalStats:Ms(I.avgTotalStats)};n.has(_)||n.set(_,[]),n.get(_).push(R)}const r=Array.from(n.keys()),i=Array.from(n.values()).reduce((L,I)=>L+I.length,0);r.length&&console.log("[ImportCsv] Guild derived snapshot flush pending",{count:r.length,servers:r,entries:i});const a=[];for(const[L,I]of n.entries())try{await T6(L,I),a.push(p2(L))}catch(N){console.warn("[ImportCsv] Guild derived snapshot upsert failed",{serverKey:L,error:N})}r.length&&console.log("[ImportCsv] Guild derived snapshot flush done",{count:a.length,docs:a})}function m5(t,e){const n={};for(const r of e){const i=gs(r);if(l4e(i)){let a=null,o;for(const c of t){const u=c.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,o=u)}n[r]=o!=null?o:""}else{let a="";for(let o=t.length-1;o>=0;o--){const c=t[o].row[r];if(c!=null&&String(c)!==""){a=c;break}}n[r]=a}}return n}async function p5(t,e){var h;const n=t.path,r=e==null?void 0:e.get(n);if(r)return r.prevSec;const i=await In(null,t,()=>mn(t),{label:"ImportCsv:latestPrev"});if(!i.exists())return e==null||e.set(n,{prevSec:0,exists:!1}),0;const a=i.data();let o=null;if(((h=a==null?void 0:a.values)==null?void 0:h.Timestamp)!=null){const m=xx(a.values.Timestamp);m!=null&&(o=m)}if(o==null&&(a==null?void 0:a.timestampRaw)!=null){const m=xx(a.timestampRaw);m!=null&&(o=m)}o==null&&typeof(a==null?void 0:a.ts)=="number"&&(o=a.ts);const c=a==null?void 0:a.timestamp;if(o==null&&typeof c=="number"&&(o=c>9999999999?Math.floor(c/1e3):c),o==null&&typeof c=="string"){const m=Date.parse(c);Number.isFinite(m)&&(o=Math.floor(m/1e3))}const u=o!=null?o:0;return e==null||e.set(n,{prevSec:u,exists:!0}),u}async function g5(t,e){var g,x,b,w,k,A,L,I,N,v,_,R,j,S,C;const n=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},o=[],c=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');const u=e.onProgress?(M=>{var T;return(T=e.onProgress)==null?void 0:T.call(e,{...M,kind:e.kind})}):void 0,h=new Map;if(e.kind==="players"){const M=[],T=[],F=[],D=new Map;let V=[],U=[];if(e.rows&&Array.isArray(e.rows))V=e.rows,U=Mu(V);else if(e.raw&&typeof e.raw=="string"){const le=yx(e.raw);V=le.rows,U=le.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:K,stats:H,headers:z}=j6(V,U);a.skippedMissingIdentifier+=H.missingIdentifier,a.skippedBadTs+=H.badTimestamp,a.skippedMissingServer+=H.missingServer;const Y=z.length?z:Mu(V),te=new Map;for(const le of K){const re=`${le.playerId}__${le.server}__${le.timestampSec}`;M.push({key:re,ref:ms(Tt,`players/${le.identifier}/scans/${le.timestampSec}`),data:{playerId:le.playerId,server:le.server,timestamp:le.timestampSec,timestampRaw:pa(le.raw,Us.PLAYERS.TIMESTAMP),name:le.name,values:le.raw,createdAt:Vi()}}),te.has(le.identifier)||te.set(le.identifier,[]),te.get(le.identifier).push({row:le.raw,ts:le.timestampSec,parsed:le})}const G=await h5(M,u,"players");o.push(...G),a.writtenScanPlayers=G.filter(le=>le.status==="created").length;let X=e.serverHostMap?new Map(e.serverHostMap):new Map;if(!e.serverHostMap)X=await _v(K.map(le=>le.server));else if(K.length>0&&K.some(re=>!bv(X,re.server))){const re=await _v(K.map(be=>be.server));for(const[be,Te]of re.entries())X.has(be)||X.set(be,Te)}!X.size&&K.length>0&&console.warn("[ImportCsv] Server host map empty; derived snapshots will be skipped.");for(const[le,re]of te){re.sort((mt,ot)=>mt.ts-ot.ts);const be=re[re.length-1],Te=be.parsed,Le=Te.playerId,Re=Te.server,Oe=Te.name,Me=(g=Te.level)!=null?g:null,De=(x=Te.className)!=null?x:null,Fe=(b=Te.guildName)!=null?b:null,we=Te.guildIdentifier,de=Oe!=null?Oe:"",Ie=s5(de),Ae=n5(Ie),Xe=ms(Tt,`players/${le}/latest/latest`),oe=await p5(Xe,h),fe=be.ts>oe,me=fe?Vi():null;fe&&(T.push({ref:Xe,data:{playerId:Le,server:Re,timestamp:be.ts,timestampRaw:pa(be.row,Us.PLAYERS.TIMESTAMP),name:Oe,values:be.row,updatedAt:me,nameFold:vv(de),nameTokens:Ie,nameNgrams:Ae,level:Me,className:De,guildName:Fe,guildNameFold:Fe?vv(Fe):null}}),a.writtenLatestPlayers++);const xe=qm(Re),tt=(w=xe.canonicalCode)!=null?w:null,lt={playerId:Le,identifier:le,name:Oe,className:De,level:Me,server:tt!=null?tt:Re,guildIdentifier:we||void 0,guildName:Fe||void 0,values:be.row,timestamp:be.ts,updatedAt:me!=null?me:void 0},Je=QAe(lt,Vi),ut=X.size>0?bv(X,tt!=null?tt:Re):null;if(!ut&&X.size>0&&console.warn("[ImportCsv] Derived snapshot skipped (server host not mapped)",{playerId:Le,server:Re,input:xe.input,normalizedInput:xe.normalizedInput,serverCode:tt,hostname:xe.hostname,subdomain:xe.subdomain,canonicalCode:xe.canonicalCode}),ut){const mt=pa(be.row,Us.PLAYERS.TIMESTAMP),ot=JAe({playerId:Le,identifier:le,server:ut,name:Oe,className:De,guildName:Fe,level:Me,lastScanRaw:mt,timestampSec:be.ts,derived:Je});D.has(ut)||D.set(ut,[]),D.get(ut).push(ot)}const bt=new Map,ft=new Map;for(const mt of re){const ot=o5(mt.ts),os=c5(mt.ts);bt.has(ot)||bt.set(ot,[]),ft.has(os)||ft.set(os,[]),bt.get(ot).push(mt),ft.get(os).push(mt)}for(const[mt,ot]of bt){ot.sort((Ve,dt)=>Ve.ts-dt.ts);const os=m5(ot,Y),gt=l5(ot[ot.length-1].ts),ne=ot[ot.length-1],Ue=ms(Tt,`players/${le}/history_weekly/${mt}`);F.push({path:Ue.path,op:"setDoc",label:"ImportCsv:historyWeekly",apply:Ve=>{Ve.set(Ue,{playerId:Le,weekId:mt,periodStartSec:gt.start,periodEndSec:gt.end,lastTs:ne.ts,lastTimestampRaw:pa(ne.row,Us.PLAYERS.TIMESTAMP),server:ne.parsed.server,name:ne.parsed.name,values:os,updatedAt:Vi()},{merge:!0})}}),a.writtenWeeklyPlayers++}for(const[mt,ot]of ft){ot.sort((Ve,dt)=>Ve.ts-dt.ts);const os=m5(ot,Y),gt=d5(ot[ot.length-1].ts),ne=ot[ot.length-1],Ue=ms(Tt,`players/${le}/history_monthly/${mt}`);F.push({path:Ue.path,op:"setDoc",label:"ImportCsv:historyMonthly",apply:Ve=>{Ve.set(Ue,{playerId:Le,monthId:mt,periodStartSec:gt.start,periodEndSec:gt.end,lastTs:ne.ts,lastTimestampRaw:pa(ne.row,Us.PLAYERS.TIMESTAMP),server:ne.parsed.server,name:ne.parsed.name,values:os,updatedAt:Vi()},{merge:!0})}}),a.writtenMonthlyPlayers++}}await k4e(T,u);const J=Array.from(D.keys()),se=Array.from(D.values()).reduce((le,re)=>le+re.length,0);let ue=0,Ne=0,Ee=0;J.length&&console.log("[ImportCsv] Derived snapshot flush pending",{count:J.length,servers:J,entries:se});const ee=[];for(const[le,re]of D.entries())try{const be=await C4e(le,re);ue+=be.applied,Ne+=be.skipped.length,Ee+=be.skippedMissingTs,be.wrote&&ee.push(k6(le))}catch(be){console.warn("[ImportCsv] Derived snapshot upsert failed",{serverKey:le,error:be})}J.length&&(ue===0?console.log("[ImportCsv] Derived snapshot flush skipped (no applied writes)",{servers:J,skippedOlder:Ne,missingTimestamp:Ee}):console.log("[ImportCsv] Derived snapshot flush done",{count:ee.length,docs:ee,appliedWrites:ue,skippedOlder:Ne,missingTimestamp:Ee})),await wv(F,u5,"history",u)}if(e.kind==="guilds"){const M=[],T=[],F=[],D=!e.skipGuildDerived,V=new Map;let U=[],K=[];if(e.rows&&Array.isArray(e.rows))U=e.rows,K=Mu(U);else if(e.raw&&typeof e.raw=="string"){const J=yx(e.raw);U=J.rows,K=J.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:H,stats:z,headers:Y}=S6(U,K);a.skippedMissingGuildIdentifier+=z.missingIdentifier,a.skippedBadTsGuild+=z.badTimestamp,a.skippedMissingServer+=z.missingServer,Y.length||Mu(U);const te=new Map;for(const J of H){const se=`${J.guildIdentifier}__${J.server}__${J.timestampSec}`;M.push({key:se,ref:ms(Tt,`guilds/${J.guildIdentifier}/scans/${J.timestampSec}`),data:{guildIdentifier:J.guildIdentifier,server:J.server,timestamp:J.timestampSec,timestampRaw:pa(J.raw,Us.GUILDS.TIMESTAMP),name:J.name,values:J.raw,createdAt:Vi()}}),te.has(J.guildIdentifier)||te.set(J.guildIdentifier,[]),te.get(J.guildIdentifier).push({row:J.raw,ts:J.timestampSec,parsed:J})}const G=await h5(M,u,"guilds");c.push(...G),a.writtenScanGuilds=G.filter(J=>J.status==="created").length;const X=D?(k=e.serverHostMap)!=null?k:await _v(H.map(J=>J.server)):new Map;D&&!X.size&&H.length>0&&console.warn("[ImportCsv] Server host map empty; guild derived snapshots will be skipped.");for(const[J,se]of te){se.sort((De,Fe)=>De.ts-Fe.ts);const ue=se[se.length-1],Ne=ue.parsed,Ee=(A=Ne.name)!=null?A:"",ee=s5(Ee),le=n5(ee),re=(L=Ne.memberCount)!=null?L:null,be=(I=Ne.hofRank)!=null?I:null,Te=ms(Tt,`guilds/${J}/latest/latest`),Le=await p5(Te,h);if(ue.ts>Le&&(T.push({path:Te.path,op:"setDoc",label:"ImportCsv:guildLatest",apply:De=>{De.set(Te,{guildIdentifier:J,server:Ne.server,timestamp:ue.ts,timestampRaw:pa(ue.row,Us.GUILDS.TIMESTAMP),name:Ne.name,values:ue.row,updatedAt:Vi(),nameFold:vv(Ee),nameTokens:ee,nameNgrams:le,memberCount:re,hofRank:be},{merge:!0})}}),a.writtenLatestGuilds++),D){const De=X.size>0?bv(X,(N=qm(Ne.server).canonicalCode)!=null?N:Ne.server):null;if(!De&&X.size>0){const Fe=qm(Ne.server);console.warn("[ImportCsv] Guild derived snapshot skipped (server host not mapped)",{guildId:J,server:Ne.server,input:Fe.input,normalizedInput:Fe.normalizedInput,serverCode:(v=Fe.canonicalCode)!=null?v:null,hostname:Fe.hostname,subdomain:Fe.subdomain,canonicalCode:Fe.canonicalCode})}if(De){const Fe=pa(ue.row,Us.GUILDS.TIMESTAMP),de=((Fe!=null?String(Fe).trim():"")||String((_=ue.ts)!=null?_:"")).trim(),Ie=h6((R=ue.row)!=null?R:{}),Ae=j4e((j=ue.row)!=null?j:null),Xe=Ae.memberCount>0?Ae.memberCount:(S=Ms(re))!=null?S:0,oe={guildId:String(J),guildIdentifier:String(J),server:De,name:String((C=Ne.name)!=null?C:J),memberCount:Xe,hofRank:Ms(be),honor:Ae.honor,hydra:Ae.hydra,instructor:Ae.instructor,knights:Ae.knights,knights15Plus:Ae.knights15Plus,portalFloor:Ae.portalFloor,raids:Ae.raids,treasury:Ae.treasury,lastScan:de||null,latestScanAtSec:ue.ts,sum:Ms(Ie.sum),sumAvg:Ms(Ie.sum)};V.has(De)||V.set(De,[]),V.get(De).push(oe)}}const Oe=new Map,Me=new Map;for(const De of se){const Fe=o5(De.ts),we=c5(De.ts);Oe.has(Fe)||Oe.set(Fe,[]),Me.has(we)||Me.set(we,[]),Oe.get(Fe).push(De),Me.get(we).push(De)}for(const[De,Fe]of Oe){Fe.sort((Ae,Xe)=>Ae.ts-Xe.ts);const we=l5(Fe[Fe.length-1].ts),de=Fe[Fe.length-1],Ie=ms(Tt,`guilds/${J}/history_weekly/${De}`);F.push({path:Ie.path,op:"setDoc",label:"ImportCsv:historyWeekly",apply:Ae=>{Ae.set(Ie,{guildIdentifier:J,weekId:De,periodStartSec:we.start,periodEndSec:we.end,lastTs:de.ts,lastTimestampRaw:pa(de.row,Us.GUILDS.TIMESTAMP),server:de.parsed.server,name:de.parsed.name,values:de.row,updatedAt:Vi()},{merge:!0})}}),a.writtenWeeklyGuilds++}for(const[De,Fe]of Me){Fe.sort((Ae,Xe)=>Ae.ts-Xe.ts);const we=d5(Fe[Fe.length-1].ts),de=Fe[Fe.length-1],Ie=ms(Tt,`guilds/${J}/history_monthly/${De}`);F.push({path:Ie.path,op:"setDoc",label:"ImportCsv:historyMonthly",apply:Ae=>{Ae.set(Ie,{guildIdentifier:J,monthId:De,periodStartSec:we.start,periodEndSec:we.end,lastTs:de.ts,lastTimestampRaw:pa(de.row,Us.GUILDS.TIMESTAMP),server:de.parsed.server,name:de.parsed.name,values:de.row,updatedAt:Vi()},{merge:!0})}}),a.writtenMonthlyGuilds++}}try{await wv(T,N6,"latest",u)}catch(J){if(r5(J))console.warn("[ImportCsv] guild latest write skipped (duplicate/permission)",{error:J});else throw J}try{await wv(F,u5,"history",u)}catch(J){if(r5(J))console.warn("[ImportCsv] guild history write skipped (duplicate/permission)",{error:J});else throw J}if(D){const J=Array.from(V.keys()),se=Array.from(V.values()).reduce((le,re)=>le+re.length,0);J.length&&console.log("[ImportCsv] Guild derived snapshot flush pending",{count:J.length,servers:J,entries:se});let ue=0,Ne=0,Ee=0;const ee=[];for(const[le,re]of V.entries())try{const be=await T6(le,re);ue+=be.applied,Ne+=be.skipped.length,Ee+=be.skippedMissingTs,be.wrote&&ee.push(p2(le))}catch(be){console.warn("[ImportCsv] Guild derived snapshot upsert failed",{serverKey:le,error:be})}J.length&&(ue===0?console.log("[ImportCsv] Guild derived snapshot flush skipped (no applied writes)",{servers:J,skippedOlder:Ne,missingTimestamp:Ee}):console.log("[ImportCsv] Guild derived snapshot flush done",{count:ee.length,docs:ee,appliedWrites:ue,skippedOlder:Ne,missingTimestamp:Ee}))}}const m=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:m-n,playerResults:o,guildResults:c}}const Vt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),I4e=t=>String(t!=null?t:"").trim(),U_=t=>I4e(t).toUpperCase(),z_=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function Nn(t,e){for(const n of Object.keys(t))if(Vt(n)===e)return t[n]}function to(t,e){for(const n of e){const r=Nn(t,n);if(r!=null&&String(r)!=="")return r}}function Go(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function md(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(n){const i=Number(n[1]),a=Number(n[2])-1,o=Number(n[3]),c=Number(n[4]),u=Number(n[5]),h=n[6]?Number(n[6]):0,m=new Date(o,a,i,c,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const Oo=t=>{if(t==null)return 0;const e=String(t).replace(/[^0-9]/g,"");if(!e)return 0;const n=Number(e);return Number.isFinite(n)?n:0},Vo=(t,e)=>{if(!(!t||typeof t!="object")){for(const n of e)if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}},Uo={honor:["Guild Honor"],hydra:["Guild Hydra"],instructor:["Guild Instructor"],knights:["Guild Knights"],knights15Plus:["Guild Knights 15+"],memberCount:["Guild Member Count"],portalFloor:["Guild Portal Floor"],raids:["Guild Raids"],treasury:["Guild Treasure","Guild Treasury"]},E4e=t=>({honor:Oo(Vo(t,Uo.honor)),hydra:Oo(Vo(t,Uo.hydra)),instructor:Oo(Vo(t,Uo.instructor)),knights:Oo(Vo(t,Uo.knights)),knights15Plus:Oo(Vo(t,Uo.knights15Plus)),memberCount:Oo(Vo(t,Uo.memberCount)),portalFloor:Oo(Vo(t,Uo.portalFloor)),raids:Oo(Vo(t,Uo.raids)),treasury:Oo(Vo(t,Uo.treasury))}),zn={GUILD_IDENTIFIER:Vt("Guild Identifier"),SERVER:Vt("Server"),NAME:Vt("Name"),TIMESTAMP:Vt("Timestamp"),LEVEL:Vt("Level"),CLASS:Vt("Class"),GUILD:Vt("Guild"),GUILD_ROLE:[Vt("Role"),Vt("Guild Role")],TREASURY:[Vt("Treasury"),Vt("Fortress Treasury"),Vt("Treasury Level"),Vt("Festungsschatzkammer")],MINE:[Vt("Mine"),Vt("Gem Mine"),Vt("Mine Level"),Vt("Festungsmine")],BASE_MAIN:[Vt("Base"),Vt("Base Attribute"),Vt("BaseMain"),Vt("Basis Attribut")],CON_BASE:[Vt("Con Base"),Vt("Constitution Base"),Vt("Base Constitution"),Vt("Basis Konstitution"),Vt("conbase")],ATTR_TOT:[Vt("Attribute"),Vt("Attr Total"),Vt("Attribut"),Vt("Attribut Gesamt")],CON_TOT:[Vt("Constitution"),Vt("Constitution Total"),Vt("Konstitution"),Vt("Konstitution Gesamt")],LAST_ACTIVE:[Vt("Last Active"),Vt("LastActivity"),Vt("Letzte Aktivitt")],GUILD_JOINED:[Vt("Guild Joined"),Vt("Joined Guild"),Vt("Gildenbeitritt")]},wi={GUILD_IDENTIFIER:Vt("Guild Identifier"),SERVER:Vt("Server"),NAME:Vt("Name"),TIMESTAMP:Vt("Timestamp"),MEMBER_COUNT:Vt("Guild Member Count"),HOF:Vt("Hall of Fame Rank"),HOF_ALT:Vt("Hall of Fame"),RANK:Vt("Rank"),GUILD_RANK:Vt("Guild Rank")};function f5(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function A4e(t){let e=5381;for(let n=0;n<t.length;n++)e=e*33^t.charCodeAt(n);return(e>>>0).toString(36)}function P4e(t){var n;const e=new Map;for(const r of t){const i=String((n=Nn(r,wi.GUILD_IDENTIFIER))!=null?n:"").trim(),a=Nn(r,wi.SERVER),o=Nn(r,wi.NAME);if(!i||!a||!o)continue;const c=`${U_(a)}__${z_(String(o))}`;e.set(c,i)}return e}function R4e(t){var N,v;const e=Nn(t,zn.TIMESTAMP),n=md(e),r=to(t,zn.LAST_ACTIVE),i=md(r),a=to(t,zn.GUILD_JOINED),o=md(a),c=Go(Nn(t,zn.LEVEL)),u=(()=>{const _=Nn(t,zn.CLASS);return _!=null&&String(_).trim()!==""?String(_):null})(),h=(()=>{const _=to(t,zn.GUILD_ROLE);return _!=null&&String(_).trim()!==""?String(_):null})(),m=Go(to(t,zn.TREASURY)),g=Go(to(t,zn.MINE)),x=Go(to(t,zn.BASE_MAIN)),b=Go(to(t,zn.CON_BASE)),w=Go(to(t,zn.ATTR_TOT)),k=Go(to(t,zn.CON_TOT)),A=x!=null&&b!=null?x+b:null,L=w!=null&&k!=null?w+k:null,I=(()=>{const _=Nn(t,zn.NAME);return _!=null&&String(_).trim()!==""?String(_):null})();return{id:String((v=(N=t==null?void 0:t.ID)!=null?N:t==null?void 0:t.Identifier)!=null?v:""),name:I,class:u,role:h,level:c,treasury:m,mine:g,baseMain:x,conBase:b,sumBaseTotal:A,attrTotal:w,conTotal:k,totalStats:L,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:n!=null?n*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:o!=null?o*1e3:null}}function zo(t,e){const n=t.map(r=>r[e]).filter(r=>typeof r=="number");return n.length?n.reduce((r,i)=>r+i,0)/n.length:null}const L4e=t=>{const e=t==null?void 0:t.code;if(!e)return!1;const n=String(e).toLowerCase();return n==="permission-denied"||n==="already-exists"||n==="failed-precondition"};async function D4e(t){var c,u,h;const e=ms(Tt,`guilds/${t}/latest/latest`),n=await In(null,e,()=>mn(e),{label:"ImportGuildSnapshots:latest"});if(!n.exists())return{sec:null,raw:null,values:null};const r=n.data()||{},i=(h=(u=r.timestampRaw)!=null?u:(c=r.values)==null?void 0:c.Timestamp)!=null?h:null,a=r.values&&typeof r.values=="object"?r.values:null;let o=null;return typeof r.timestamp=="number"?o=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(o=md(i)),{sec:o,raw:i,values:a}}async function M4e(t){const e=ms(Tt,`guilds/${t}/snapshots/members_summary`),n=await In(null,e,()=>mn(e),{label:"ImportGuildSnapshots:prevSnapshot"});if(!n.exists())return 0;const r=n.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=md(r.updatedAt);if(i!=null)return i}return 0}async function F4e(t,e){var h,m,g,x,b,w,k,A,L,I,N;const n=P4e(e||[]),r=new Map,i=new Map,a=new Map;for(const v of e||[]){const _=String((h=Nn(v,wi.GUILD_IDENTIFIER))!=null?h:"").trim();if(!_)continue;const R=md(Nn(v,wi.TIMESTAMP));if(R==null)continue;a.set(`${_}__${R}`,v);const j=i.get(_);(!j||R>j.tsSec)&&i.set(_,{row:v,tsSec:R})}const o=new Set;for(const v of e||[]){const _=String((m=Nn(v,wi.GUILD_IDENTIFIER))!=null?m:"").trim();_&&o.add(_)}for(const v of t||[]){const _=Nn(v,zn.SERVER);let R=String((g=Nn(v,zn.GUILD_IDENTIFIER))!=null?g:"").trim();if(!R){const j=(x=Nn(v,zn.GUILD))!=null?x:v.Guild;if(j&&_){const S=`${U_(_)}__${z_(String(j))}`,C=n.get(S);C&&(R=C)}}R&&o.add(R)}let c=0,u=null;for(const v of o){const{sec:_,raw:R,values:j}=await D4e(v),S=E4e(j);if(_==null)continue;const C=await M4e(v),M=_>C,T=new Map;for(const Re of t||[]){const Oe=Nn(Re,zn.SERVER);let Me=String((b=Nn(Re,zn.GUILD_IDENTIFIER))!=null?b:"").trim();if(!Me){const we=(w=Nn(Re,zn.GUILD))!=null?w:Re.Guild;if(we&&Oe){const de=`${U_(Oe)}__${z_(String(we))}`,Ie=n.get(de);Ie&&(Me=Ie)}}if(Me!==v)continue;const De=md(Nn(Re,zn.TIMESTAMP));if(De==null||De!==_)continue;const Fe=String((A=(k=Re==null?void 0:Re.ID)!=null?k:Re==null?void 0:Re.Identifier)!=null?A:"").trim();Fe&&(T.has(Fe)||T.set(Fe,Re))}const F=Array.from(T.values()),D=[];for(const Re of F)D.push(R4e(Re));D.sort((Re,Oe)=>{var Fe,we;const Me=f5(Re.role),De=f5(Oe.role);return Me!==De?Me-De:((Fe=Re.name)!=null?Fe:"").toLowerCase().localeCompare(((we=Oe.name)!=null?we:"").toLowerCase())});const V=zo(D,"level"),U=zo(D,"treasury"),K=zo(D,"mine"),H=zo(D,"baseMain"),z=zo(D,"conBase"),Y=zo(D,"sumBaseTotal"),te=zo(D,"attrTotal"),G=zo(D,"conTotal"),X=zo(D,"totalStats"),J=JSON.stringify({gid:v,tsSec:_,members:D.map(Re=>{var Oe,Me,De,Fe,we,de,Ie,Ae,Xe,oe,fe,me,xe;return{id:Re.id,name:(Oe=Re.name)!=null?Oe:"",class:(Me=Re.class)!=null?Me:"",role:(De=Re.role)!=null?De:"",level:(Fe=Re.level)!=null?Fe:null,treasury:(we=Re.treasury)!=null?we:null,mine:(de=Re.mine)!=null?de:null,baseMain:(Ie=Re.baseMain)!=null?Ie:null,conBase:(Ae=Re.conBase)!=null?Ae:null,sumBaseTotal:(Xe=Re.sumBaseTotal)!=null?Xe:null,attrTotal:(oe=Re.attrTotal)!=null?oe:null,conTotal:(fe=Re.conTotal)!=null?fe:null,totalStats:(me=Re.totalStats)!=null?me:null,guildJoinedMs:(xe=Re.guildJoinedMs)!=null?xe:null}})}),se=A4e(J);if(M){const Re=ms(Tt,`guilds/${v}/snapshots/members_summary`);try{await ij(Re,()=>ll(Re,{guildId:v,count:D.length,updatedAt:R!=null?R:String(_),updatedAtMs:_*1e3,hash:se,avgLevel:V,avgTreasury:U,avgMine:K,avgBaseMain:H,avgConBase:z,avgSumBaseTotal:Y,avgAttrTotal:te,avgConTotal:G,avgTotalStats:X,members:D,updatedAtServer:Vi()},{merge:!0}),{label:"ImportGuildSnapshots:summary"}),c++}catch(Oe){if(L4e(Oe)){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows duplicate/permission",{gid:v,error:Oe});continue}console.error("[ImportSelectionToDb] writeGuildSnapshotsFromRows fatal",{gid:v,error:Oe}),u=u||Oe;continue}}const ue=(N=(I=a.get(`${v}__${_}`))!=null?I:(L=i.get(v))==null?void 0:L.row)!=null?N:null,Ne=ue?Nn(ue,wi.SERVER):null,Ee=ue?Nn(ue,wi.NAME):null,ee=ue?Nn(ue,wi.MEMBER_COUNT):null,le=ue?to(ue,[wi.HOF,wi.HOF_ALT,wi.RANK,wi.GUILD_RANK]):null,re=ue?Nn(ue,wi.TIMESTAMP):R,be=re!=null?String(re).trim():R!=null?R:String(_),Te=Go(ee),Le=S.memberCount>0?S.memberCount:Te!=null?Te:0;r.set(v,{guildId:v,server:Ne!=null&&String(Ne).trim()!==""?String(Ne).trim():null,name:Ee!=null&&String(Ee).trim()!==""?String(Ee).trim():null,memberCount:Le,hofRank:Go(le),honor:S.honor,hydra:S.hydra,instructor:S.instructor,knights:S.knights,knights15Plus:S.knights15Plus,portalFloor:S.portalFloor,raids:S.raids,treasury:S.treasury,lastScan:be||null,timestampSec:_,count:D.length,avgLevel:V,avgTreasury:U,avgMine:K,avgBaseMain:H,avgConBase:z,avgSumBaseTotal:Y,avgAttrTotal:te,avgConTotal:G,avgTotalStats:X})}if(u)throw u;return{guildsProcessed:o.size,snapshotsWritten:c,aggregatesByGuildId:r}}function B4e(t){const e=new Date(t),n=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${n}-${r}`}async function $4e(t,e,n,r){var u,h,m;const i=ms(Tt,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await mn(i);if(!a.exists())return await ll(i,n,{merge:!1}),{first:n,firstTsMs:(u=n.updatedAtMs)!=null?u:n.timestamp?n.timestamp*1e3:r};const o=a.data(),c=(h=o.updatedAtMs)!=null?h:o.timestamp?o.timestamp*1e3:r;return r<c?(await ll(i,n,{merge:!1}),{first:n,firstTsMs:(m=n.updatedAtMs)!=null?m:n.timestamp?n.timestamp*1e3:r}):{first:o,firstTsMs:c}}async function O4e(t,e,n){const r=ms(Tt,`guilds/${t}/history_monthly/${e}`);await ll(r,n,{merge:!0})}function V4e(t){var I,N,v,_,R,j,S,C,M,T,F,D,V;const{guildId:e,monthKey:n,server:r,first:i,firstTsMs:a,latest:o,latestTsMs:c}=t,u=a!=null?Math.floor((c-a)/864e5):null,h=u!=null&&u<=40,m={available:h};h||(m.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:n,label:new Date(`${n}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(c).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(c/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:m};if(!h||!i)return g;const x=new Map;for(const U of i.members||[])U.playerId&&x.set(U.playerId,U);const b=[],w=[],k=[],A=[],L=[];for(const U of o.members||[]){if(!U.playerId)continue;const K=x.get(U.playerId)||null,H=(I=U.sumBaseTotal)!=null?I:null,z=(N=K==null?void 0:K.sumBaseTotal)!=null?N:null,Y=H!=null&&z!=null?H-z:0,te=(v=U.totalStats)!=null?v:null,G=(_=K==null?void 0:K.totalStats)!=null?_:null,X=te!=null&&G!=null?te-G:0;b.push({playerId:U.playerId,name:(R=U.name)!=null?R:null,class:(j=U.class)!=null?j:null,levelLatest:(S=U.level)!=null?S:null,baseLatest:H,baseDelta:Y}),w.push({playerId:U.playerId,name:(C=U.name)!=null?C:null,base:H,stamDelta:null,shoDelta:null}),k.push({playerId:U.playerId,name:(M=U.name)!=null?M:null,stats:H,delta:Y}),A.push({playerId:U.playerId,name:(T=U.name)!=null?T:null,total:te,delta:X}),L.push({playerId:U.playerId,name:(F=U.name)!=null?F:null,class:(D=U.class)!=null?D:null,stats:(V=U.baseMain)!=null?V:null,delta:(K==null?void 0:K.baseMain)!=null&&U.baseMain!=null?U.baseMain-K.baseMain:0})}return b.sort((U,K)=>{var H,z;return((H=K.baseDelta)!=null?H:-1/0)-((z=U.baseDelta)!=null?z:-1/0)}),k.sort((U,K)=>{var H,z;return((H=K.stats)!=null?H:-1/0)-((z=U.stats)!=null?z:-1/0)}),A.sort((U,K)=>{var H,z;return((H=K.total)!=null?H:-1/0)-((z=U.total)!=null?z:-1/0)}),w.sort((U,K)=>{var H,z;return((H=K.base)!=null?H:-1/0)-((z=U.base)!=null?z:-1/0)}),L.sort((U,K)=>{var H,z;return((H=K.stats)!=null?H:-1/0)-((z=U.stats)!=null?z:-1/0)}),{...g,mostBaseGained:b.slice(0,50),sumBaseStats:w.slice(0,50),highestBaseStats:k.slice(0,50),highestTotalStats:A.slice(0,50),mainAndCon:L.slice(0,50)}}const Jo=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),sc=(t,e)=>{for(const n of Object.keys(t))if(Jo(n)===e)return t[n]},U4e=t=>String(t!=null?t:"").trim().toLowerCase(),v5=(t,e)=>{for(const n of t){const r=sc(n,Jo("Server")),i=U4e(r);i&&e.add(i)}},bx=t=>String(t!=null?t:"").trim(),z4e=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=Number(e);return Number.isFinite(n)?n:null},G4e=(t,e)=>{var a,o;const n=new Map,r=new Map;for(const c of t){const u=bx(sc(c,Jo("Guild Identifier")));u&&n.set(u,((a=n.get(u))!=null?a:0)+1)}for(const c of e){const u=bx(sc(c,Jo("Guild Identifier")));if(!u)continue;const h=z4e(sc(c,Jo("Guild Member Count")));h==null||h<=0||r.set(u,h)}const i=new Set;for(const[c,u]of r.entries())((o=n.get(c))!=null?o:0)===u&&i.add(c);return{uploadableGuildIds:i,playerCountByGuildId:n,guildMemberCountByGuildId:r}};async function I6(t,e){var A,L;Yx("ImportSelection");const n=new Set;v5(t.playersRows,n),v5(t.guildsRows,n);const r=n.size>0?await _v(Array.from(n)):new Map,{uploadableGuildIds:i}=G4e(t.playersRows,t.guildsRows),a=t.guildsRows.filter(I=>{const N=bx(sc(I,Jo("Guild Identifier")));return N?i.has(N):!1}),o=t.playersRows.filter(I=>{const N=bx(sc(I,Jo("Guild Identifier")));return N?i.has(N):!1}),{playersRows:c}=t,u=a,h=[];let m=[],g=[],x=!0;const b=e!=null&&e.onProgress?(I,N)=>{var v;return(v=e.onProgress)==null?void 0:v.call(e,{...I,kind:N})}:void 0;if(u.length>0)try{const I=await g5(null,{kind:"guilds",rows:u,onProgress:b?N=>b(N,"guilds"):void 0,serverHostMap:r,skipGuildDerived:!0});h.push(I),Array.isArray(I.guildResults)&&(g=I.guildResults)}catch(I){console.error("[ImportSelectionToDb] guild import error",I),x=!1}try{const I=await g5(null,{kind:"players",rows:c,onProgress:b?N=>b(N,"players"):void 0,serverHostMap:r});h.push(I),Array.isArray(I.playerResults)&&(m=I.playerResults)}catch(I){console.error("[ImportSelectionToDb] player import error",I),x=!1}let w=null;if(u.length>0&&o.length>0)try{w=(await F4e(o,u)).aggregatesByGuildId}catch(I){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",I),x=!1}if(w&&w.size>0)try{await T4e(w,r)}catch(I){console.warn("[ImportSelectionToDb] guild derived snapshot flush skipped",I),x=!1}const k=new Set;for(const I of u){const N=sc(I,Jo("Guild Identifier"));N&&k.add(String(N))}for(const I of o){const N=sc(I,Jo("Guild Identifier"));N&&k.add(String(N))}for(const I of k){const N=Mn("ImportCsv:guildLatest"),v=ms(Tt,`guilds/${I}/snapshots/members_summary`);let _;try{_=await In(N,v,()=>mn(v))}finally{dn(N)}if(!_.exists())continue;const R=_.data(),j=Number((A=R.updatedAtMs)!=null?A:R.timestamp?R.timestamp*1e3:Date.now()),S=B4e(j);let C=null,M=null;try{const F=await $4e(I,S,R,j);C=F.first,M=F.firstTsMs}catch(F){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:I,monthKey:S,error:F})}const T=V4e({guildId:I,monthKey:S,server:(L=R.server)!=null?L:null,first:C,firstTsMs:M,latest:R,latestTsMs:j});try{await O4e(I,S,T)}catch(F){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:I,monthKey:S,error:F})}}return Xx("ImportSelection"),Jx("ImportSelection"),{ok:x,players:m,guilds:g,reports:h}}const P1=t=>String(t!=null?t:"").trim(),ei=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),H4e=t=>String(t!=null?t:"").trim().replace(/\s+/g," ").replace(/:+$/,"").toLowerCase();function W4e(t){const e=[",",";","	","|"];let n=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(n=i,r=a)}return n}function G_(t){var u;const n=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!n.length)return{headers:[],rows:[],delimiter:","};const r=W4e((u=n[0])!=null?u:""),i=h=>{const m=[];let g="",x=!1;for(let b=0;b<h.length;b++){const w=h[b];w==='"'?x&&h[b+1]==='"'?(g+='"',b++):x=!x:w===r&&!x?(m.push(g),g=""):g+=w}return m.push(g),m},o=(n[0]?i(n[0]).map(P1):[]).map((h,m)=>h||`col${m}`),c=[];for(let h=1;h<n.length;h++){if(!n[h])continue;const m=i(n[h]);if(m.every(x=>P1(x)===""))continue;const g={};for(let x=0;x<o.length;x++)g[o[x]]=m[x]!=null?P1(m[x]):"";c.push(g)}return{headers:o,rows:c,delimiter:r}}const Hn={PLAYERS:{IDENTIFIER:ei("Identifier"),PID:ei("ID"),GUILD_IDENTIFIER:ei("Guild Identifier"),TIMESTAMP:ei("Timestamp"),NAME:ei("Name"),SERVER:ei("Server"),OWN:ei("Own")},GUILDS:{GUILD_IDENTIFIER:ei("Guild Identifier"),GUILD_MEMBER_COUNT:ei("Guild Member Count"),NAME:ei("Name"),TIMESTAMP:ei("Timestamp"),SERVER:ei("Server")}},E6=(t,e)=>{const n=new Set(t.map(ei));return e.every(r=>n.has(r))},Fa=(t,e)=>{for(const n of Object.keys(t))if(ei(n)===e)return t[n]},K4e=t=>{const e=new Map;return t.forEach(n=>{var a;const r=H4e(n);if(!r)return;const i=(a=e.get(r))!=null?a:[];i.push(n),e.set(r,i)}),e},q4e=t=>{const e=K4e(t),n=["guild member count","guild membercount","member count","guild members"];for(const r of n){const i=e.get(r);if(i&&i.length===1)return i[0]}return null},Q4e=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=e.replace(/[\s,\.]/g,""),r=Number(n);return Number.isFinite(r)?r:null};function Y4e(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function x5(t){const e=t.map(ei),n=a=>e.includes(a);let r=0,i=0;return n(Hn.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),n(Hn.PLAYERS.IDENTIFIER)&&(r+=2),n(Hn.PLAYERS.TIMESTAMP)&&(r+=1),n(Hn.GUILDS.GUILD_IDENTIFIER)&&(i+=2),n(Hn.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),n(Hn.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||n(Hn.PLAYERS.IDENTIFIER)?"players":"guilds"}function H_(t,e){const n=Y4e(t);if(n!=="unknown"){const i=x5(e);return i!=="unknown"&&i!==n?{kind:n,via:"filename",warn:`Per Dateiname als "${n}" klassifiziert, Header deuten auf "${i}".`}:{kind:n,via:"filename"}}const r=x5(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function A6(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=Date.parse(e);return Number.isFinite(n)?Math.floor(n/1e3):null}function X4e(t,e){var r;const n=[];if(!E6(e,[Hn.PLAYERS.GUILD_IDENTIFIER]))return n;for(const i of t){const a=Fa(i,Hn.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const o=Fa(i,Hn.PLAYERS.IDENTIFIER),c=o!=null?String(o).trim():"",u=b6(c),h=Fa(i,Hn.PLAYERS.SERVER),m=h&&String(h).trim()!==""?String(h).trim().toUpperCase():void 0,g=u!=null?u:c?void 0:m;n.push({guildIdentifier:String(a),id:Fa(i,Hn.PLAYERS.IDENTIFIER)||void 0,name:Fa(i,Hn.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(Fa(i,Hn.PLAYERS.OWN)).toLowerCase()),server:g,tsSec:(r=A6(Fa(i,Hn.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return n}function J4e(t,e){const n=[];if(!E6(e,[Hn.GUILDS.GUILD_IDENTIFIER]))return n;const r=q4e(e);for(const i of t){const a=Fa(i,Hn.GUILDS.GUILD_IDENTIFIER),o=r?i[r]:Fa(i,Hn.GUILDS.GUILD_MEMBER_COUNT),c=Q4e(o);if(!a||c==null)continue;const u=A6(Fa(i,Hn.GUILDS.TIMESTAMP));n.push({guildIdentifier:String(a),name:Fa(i,Hn.GUILDS.NAME)||void 0,memberCount:c,tsSec:u!=null?u:void 0})}return n}function P6(t){var h,m,g,x,b,w,k,A,L,I,N,v,_,R;let e=[],n=[];for(const j of t){const S=G_(j.text),{kind:C}=H_(j.name,S.headers);C==="players"?e=e.concat(y4e(j.text)):C==="guilds"&&(n=n.concat(b4e(j.text)))}const r=[],i=new Map,a=new Map;for(const j of e){const S={playerId:j.playerId,name:(h=j.name)!=null?h:"",server:j.server,guildId:(m=j.guildIdentifier)!=null?m:void 0,level:(g=j.level)!=null?g:void 0,className:(x=j.className)!=null?x:void 0,scanTimestampSec:j.timestampSec,values:j.raw};r.push(S);const C=String((b=j.guildIdentifier)!=null?b:"").trim();C&&(i.has(C)||i.set(C,[]),i.get(C).push(S),a.set(C,((w=a.get(C))!=null?w:0)+1))}const o=[],c=new Map;for(const j of n){const S=String((k=j.guildIdentifier)!=null?k:"").trim();if(!S)continue;const C=Number((A=j.memberCount)!=null?A:NaN);!Number.isFinite(C)||C<=0||c.set(S,C)}const u=new Set;for(const[j,S]of c.entries())((L=a.get(j))!=null?L:0)===S&&u.add(j);for(const j of n){const S=String((I=j.guildIdentifier)!=null?I:"").trim();if(!u.has(S))continue;const C=(N=i.get(S))!=null?N:[];o.push({guildId:S,name:(v=j.name)!=null?v:S,server:j.server,memberCount:(_=j.memberCount)!=null?_:C.length,scanTimestampSec:j.timestampSec,values:j.raw,members:C.map(M=>({playerId:M.playerId,name:M.name,level:M.level,className:M.className}))}),i.delete(S)}return{filename:(R=t[0])==null?void 0:R.name,players:r,guilds:o}}function Z4e(t,e){var A,L,I,N,v,_;const n=[],r=new Map;for(const R of t){const j=R.id||"",S=(A=R.server)==null?void 0:A.toUpperCase();if(j){const C=`${S!=null?S:"NO"}::${j}`;r.has(C)||r.set(C,{server:S,id:j,name:R.name||"",own:!!R.own})}}const i=r.size,a=t.length,o=Array.from(r.values()).filter(R=>R.own).length,c=new Map;for(const R of r.values())R.server&&c.set(R.server,((L=c.get(R.server))!=null?L:0)+1);const u=Array.from(c.entries()).map(([R,j])=>({server:R,players:j})).sort((R,j)=>j.players-R.players),h=u.length,m=new Map;for(const R of t)m.set(R.guildIdentifier,((I=m.get(R.guildIdentifier))!=null?I:0)+1);const g=new Set,x=new Map;for(const R of e)g.add(R.guildIdentifier),x.set(R.guildIdentifier,{name:R.name||"",declared:R.memberCount});for(const R of m.keys())g.add(R);let b=0;const w=[];for(const R of g){const j=(N=x.get(R))==null?void 0:N.declared,S=(v=m.get(R))!=null?v:0,C=j!=null&&S===j;C&&b++,w.push({id:R,name:((_=x.get(R))==null?void 0:_.name)||"",declaredCount:j!=null?j:0,playersCount:S,full:C})}[...x.values()].some(R=>Number.isFinite(R.declared))||n.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),w.sort((R,j)=>R.name?R.name.localeCompare(j.name):R.id.localeCompare(j.id));const k=Array.from(r.values()).sort((R,j)=>(R.server||"")===(j.server||"")?R.name.localeCompare(j.name):(R.server||"").localeCompare(j.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:o,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:b,notes:n,playersList:k,guildsList:w}}function R6({mode:t="db",onBuildUploadSession:e}){const[n,r]=P.useState([]),[i,a]=P.useState(null),[o,c]=P.useState(!1),[u,h]=P.useState(null),[m,g]=P.useState(!1),[x,b]=P.useState(null),[w,k]=P.useState([]),[A,L]=P.useState(null);P.useEffect(()=>{const T=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=T}},[]);const I=P.useCallback(async T=>{var F;c(!0),h(null),a(null),k([]),b(null);try{const D=Array.from(T).slice(0,2),V=[];let U=[],K=[];for(const H of D){const z=H,Y=await z.text(),te=G_(Y),{kind:G,warn:X}=H_(z.name,te.headers);V.push({name:z.name,size:z.size||Y.length,rows:te.rows.length,delimiter:te.delimiter,text:Y,kind:G,warn:X}),G==="players"?U=U.concat(X4e(te.rows,te.headers)):G==="guilds"&&(K=K.concat(J4e(te.rows,te.headers)))}r(V),a(Z4e(U,K))}catch(D){h(String((F=D==null?void 0:D.message)!=null?F:D))}finally{c(!1)}},[]),N=P.useCallback(async T=>{!T||T.length===0||await I(T)},[I]),v=P.useCallback(async T=>{T.preventDefault();const F=T.dataTransfer.files;!F||!F.length||await I(F)},[I]),_=P.useCallback(()=>{const T=n.map(F=>({name:F.name,text:F.text}));return P6(T)},[n]);async function R(){var T;if(n.length){g(!0),L({phase:"prepare",current:0,total:0}),b(null),k([]);try{let F=[],D=[];for(const U of n){const K=G_(U.text),{kind:H}=H_(U.name,K.headers);H==="players"&&(F=F.concat(K.rows)),H==="guilds"&&(D=D.concat(K.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!F.length,hasGuildsCsv:!!D.length,playersRows:F.length,guildsRows:D.length}),!D.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!F.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const V=await I6({playersRows:F,guildsRows:D},{onProgress:U=>L(U)});L({phase:"done",current:1,total:1}),k(V.reports),b("Import abgeschlossen.")}catch(F){console.error("[UploadCenter] Import error:",F),b(`Fehler beim Import: ${(T=F==null?void 0:F.message)!=null?T:F}`)}finally{g(!1),setTimeout(()=>L(null),1200)}}}const j=P.useCallback(async()=>{var T;if(!(t!=="session"||!e||!n.length)){g(!0),b(null),k([]),h(null),L(null);try{const F=_();e(F),b("Session prepared locally.")}catch(F){console.error("[UploadCenter] Session build error:",F),b(`Fehler beim Import: ${(T=F==null?void 0:F.message)!=null?T:F}`)}finally{g(!1)}}},[t,e,n,_]),S=P.useMemo(()=>n.map(T=>`${T.name} (${T.rows} rows, ${T.delimiter}, ${T.kind}${T.warn?" ":""})`),[n]),C=P.useMemo(()=>n.reduce((T,F)=>T+F.rows,0),[n]),M=A?Math.floor(100*A.current/Math.max(1,A.total||1)):0;return s.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[s.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[s.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[S.map((T,F)=>s.jsx("span",{className:"uc-chip",title:n[F].warn||"",children:T},F)),n.length>0&&s.jsxs("span",{className:"uc-chip",children:["Total: ",C," rows"]})]}),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[A&&t==="db"&&s.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[s.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:s.jsx("div",{style:{width:`${M}%`,height:"100%",background:"#2E75F0"}})}),s.jsxs("span",{style:{color:"#D6E4F7"},children:[M,"%"]})]}),s.jsx("button",{onClick:t==="session"?j:R,disabled:!n.length||!i||m||t==="session"&&!e,className:"uc-btn",children:m?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),x&&s.jsx("span",{style:{color:x.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:x})]})]}),s.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[s.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),s.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:T=>N(T.target.files),disabled:o})]}),s.jsx("div",{onDragOver:T=>T.preventDefault(),onDrop:v,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),o&&s.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&s.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[s.jsx("b",{children:"Fehler:"})," ",u]}),i&&s.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[s.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:s.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),s.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[s.jsx(fm,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),s.jsx(fm,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),s.jsx(fm,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),s.jsx(fm,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),s.jsx(fm,{label:"Verschiedene Server",value:i.servers})]}),s.jsxs("div",{style:{marginTop:12},children:[s.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Server"}),s.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),s.jsx("tbody",{children:i.perServer.map(T=>s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:T.server}),s.jsx("td",{style:{textAlign:"right"},children:T.players})]},T.server))})]})]}),s.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[s.jsxs("details",{children:[s.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),s.jsx("div",{style:{marginTop:8},children:s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Server"}),s.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),s.jsx("th",{style:{textAlign:"left"},children:"Name"}),s.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),s.jsx("tbody",{children:i.playersList.map((T,F)=>{var D,V;return s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:(D=T.server)!=null?D:""}),s.jsx("td",{children:T.id}),s.jsx("td",{children:T.name||""}),s.jsx("td",{children:T.own?"":""})]},`${(V=T.server)!=null?V:"NO"}-${T.id}-${F}`)})})]})})]}),s.jsxs("details",{open:!0,children:[s.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),s.jsx("div",{style:{marginTop:8},children:s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),s.jsx("th",{style:{textAlign:"left"},children:"Name"}),s.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),s.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),s.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),s.jsx("tbody",{children:i.guildsList.map((T,F)=>s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:T.id}),s.jsx("td",{children:T.name||""}),s.jsx("td",{style:{textAlign:"right"},children:T.declaredCount||0}),s.jsx("td",{style:{textAlign:"right"},children:T.playersCount}),s.jsx("td",{style:{textAlign:"center"},children:T.full?"":""})]},`${T.id}-${F}`))})]})})]})]}),!!i.notes.length&&s.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",s.jsx("ul",{children:i.notes.map((T,F)=>s.jsx("li",{children:T},F))})]})]})]})}function fm({label:t,value:e,hint:n}){return s.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[s.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),s.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),n&&s.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:n})]})}function ePe(){return s.jsxs("div",{children:[s.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),s.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",s.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function tPe(){const{isOpen:t,close:e,activeTab:n,setTab:r,canUse:i}=oj();return!t||!i?null:s.jsx("div",{className:eo.backdrop,onClick:e,children:s.jsxs("div",{className:eo.panel,onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:eo.header,children:[s.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),s.jsxs("div",{className:eo.tabs,children:[s.jsx("button",{type:"button",className:`${eo.tabBtn} ${n==="csv"?eo.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),s.jsx("button",{type:"button",className:`${eo.tabBtn} ${n==="json"?eo.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),s.jsx("button",{type:"button",className:eo.closeBtn,onClick:e,children:"Schlieen"})]}),s.jsx("div",{className:eo.content,children:n==="csv"?s.jsx(R6,{mode:"db"}):s.jsx(ePe,{})})]})})}const L6="sfdatahub_upload_sessions_v1",R1={sessions:[],activeSessionId:null},sPe=()=>{var t,e,n,r,i,a;if(typeof window=="undefined")return R1;try{const o=window.localStorage.getItem(L6);if(!o)return R1;const c=JSON.parse(o);if(c&&typeof c=="object"){if("version"in c&&(c==null?void 0:c.version)===1&&c.type==="uploadCenter.sessions"&&Array.isArray(c.sessions)){const u=c;return{sessions:u.sessions,activeSessionId:(n=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?n:null}}if(Array.isArray(c.sessions)){const u=c;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(o){console.warn("[UploadCenterSessions] Failed to parse persisted state",o)}return R1},D6=P.createContext(null);function nPe({children:t}){const e=P.useMemo(()=>sPe(),[]),[n,r]=P.useState(()=>e.sessions),[i,a]=P.useState(()=>e.activeSessionId),o=P.useCallback(N=>({...N,players:N.players.map(v=>({...v,status:"pending"})),guilds:N.guilds.map(v=>({...v,status:"pending"}))}),[]);P.useEffect(()=>{if(typeof window!="undefined")try{const N={version:1,type:"uploadCenter.sessions",sessions:n,activeSessionId:i};window.localStorage.setItem(L6,JSON.stringify(N))}catch(N){console.warn("[UploadCenterSessions] Failed to persist state",N)}},[n,i]);const c=P.useCallback(N=>{const v=o(N);r(_=>[..._,v]),a(v.id)},[o]),u=P.useCallback(N=>{a(N)},[]),h=P.useCallback(N=>{r(v=>{const _=v.filter(R=>R.id!==N);return a(R=>{var j,S;return R===N?(S=(j=_[0])==null?void 0:j.id)!=null?S:null:R}),_})},[]),m=P.useCallback(()=>{r([]),a(null)},[]),g=P.useCallback((N,v,_,R)=>{r(j=>j.map(S=>{if(S.id!==N)return S;if(v==="player"){const M=S.players.map(T=>T.key===_?{...T,selected:R}:T);return{...S,players:M}}const C=S.guilds.map(M=>M.key===_?{...M,selected:R}:M);return{...S,guilds:C}}))},[]),x=P.useCallback((N,v,_)=>{r(R=>R.map(j=>{if(j.id!==N)return j;if(v==="player"){const C=j.players.map(M=>({...M,selected:_}));return{...j,players:C}}const S=j.guilds.map(C=>({...C,selected:_}));return{...j,guilds:S}}))},[]),b=P.useCallback((N,v,_)=>{r(R=>R.map(j=>{if(j.id!==N)return j;const S=j.guilds.find(F=>F.key===v);if(!S)return j;const C=S.guildId,M=j.players.map(F=>F.guildId===C?{...F,selected:_}:F),T=j.guilds.map(F=>F.key===v?{...F,selected:_}:F);return{...j,players:M,guilds:T}}))},[]),w=P.useCallback((N,v,_)=>{r(R=>R.map(j=>{if(j.id!==N)return j;let S;const C=j.players.map(D=>D.key!==v?D:(S=D.guildId,{...D,selected:_}));if(!S)return{...j,players:C};const M=C.filter(D=>D.guildId===S),T=M.length>0&&M.every(D=>D.selected),F=j.guilds.map(D=>D.guildId!==S?D:_===!1?{...D,selected:!1}:T?{...D,selected:!0}:D);return{...j,players:C,guilds:F}}))},[]),k=P.useCallback((N,v)=>{r(_=>_.map(R=>{if(R.id!==N)return R;const j=R.players.map(C=>({...C,selected:v})),S=R.guilds.map(C=>{if(!v)return{...C,selected:!1};const M=j.filter(F=>F.guildId===C.guildId),T=M.length>0&&M.every(F=>F.selected);return{...C,selected:T}});return{...R,players:j,guilds:S}}))},[]),A=P.useCallback((N,v)=>{r(_=>_.map(R=>{if(R.id!==N)return R;const j=R.guilds.map(C=>({...C,selected:v})),S=R.players.map(C=>v&&C.guildId?{...C,selected:!0}:!v&&C.guildId?{...C,selected:!1}:C);return{...R,guilds:j,players:S}}))},[]),L=P.useCallback((N,v,_,R)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:N,kind:v,recordKey:_,status:R}),r(j=>j.map(S=>{if(S.id!==N)return S;if(v==="player"){const M=S.players.map(T=>T.key===_?{...T,status:R}:T);return{...S,players:M}}const C=S.guilds.map(M=>M.key===_?{...M,status:R}:M);return{...S,guilds:C}}))},[]),I=P.useMemo(()=>({sessions:n,activeSessionId:i,addSession:c,setActiveSession:u,removeSession:h,clearAllSessions:m,toggleRecordSelection:g,selectAllInSession:x,selectGuildWithPlayers:b,updateGuildSelectionFromPlayer:w,selectAllPlayersWithGuilds:k,selectAllGuildsWithPlayers:A,setRecordStatus:L}),[n,i,c,u,h,m,g,x,b,w,k,A,L]);return s.jsx(D6.Provider,{value:I,children:t})}function rPe(){const t=P.useContext(D6);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}const iPe="sfh:authNext";function aPe({route:t,featureId:e,fallback:n=null,children:r}){var k;const{isLoading:i,status:a}=xa(),{resolveRule:o,canAccessFeature:c,canAccessRule:u,loading:h}=Zx(),m=qn(),g=(k=e!=null?e:t)!=null?k:"/",x=q.useMemo(()=>o(g),[o,g]);q.useEffect(()=>{x||console.debug(`[FeatureGate] No rule found for target "${g}", allowing by default.`)},[x,g]);const b=q.useMemo(()=>!e&&!t?!0:x?u(x):c(g),[c,u,e,t,x,g]),w=q.useMemo(()=>x?!!(x.status==="logged_in"||x.minRole&&x.minRole!=="guest"||x.allowedRoles&&x.allowedRoles.length>0||x.allowedGroups&&x.allowedGroups.length>0||x.allowedUserIds&&x.allowedUserIds.length>0):!1,[x]);if(i||h)return null;if(!b){const A=a==="unauthenticated",L=m.pathname==="/login";if(w&&A&&!L){const I=`${m.pathname}${m.search||""}`,N=I.startsWith("/")&&!I.startsWith("//");typeof window!="undefined"&&window.sessionStorage&&N&&window.sessionStorage.setItem(iPe,I);const v=N?`/login?next=${encodeURIComponent(I)}`:"/login";return s.jsx(no,{to:v,replace:!0})}return s.jsx(s.Fragment,{children:n})}return s.jsx(s.Fragment,{children:r})}const y5="pending";function b5(t,e,n){const r=t.players.map(a=>{var c;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(c=a.guildId)!=null?c:void 0,level:a.level,className:a.className,values:a.values,selected:!0,status:y5}}),i=t.guilds.map(a=>{var u;const o=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,c=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:o,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:c,values:a.values,selected:!0,status:y5}});return{id:e,createdAt:n,sourceFilename:t.filename,scanUploadId:void 0,players:r,guilds:i}}const jv=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`};async function oPe(t){var n,r,i,a;if(!t)return console.warn("[UploadCenterUsage] Missing userId, returning empty usage."),{date:null,guilds:0,players:0};const e=ms(Tt,"users",t);try{const o=await In(null,e,()=>mn(e),{label:"UploadCenterUsage:get"});if(!o.exists())return console.warn("[UploadCenterUsage] User document does not exist.",{userId:t}),{date:null,guilds:0,players:0};const c=(n=o.data())==null?void 0:n.uploadCenter,u=(r=c==null?void 0:c.usage)!=null?r:{};return{date:typeof(u==null?void 0:u.date)=="string"?u.date:null,guilds:Number((i=u==null?void 0:u.guilds)!=null?i:0)||0,players:Number((a=u==null?void 0:u.players)!=null?a:0)||0}}catch(o){return console.error("[UploadCenterUsage] Failed to fetch usage data.",{userId:t,error:o}),{date:null,guilds:0,players:0}}}async function lPe(t,e,n){var b,w,k;if(!t){console.warn("[UploadCenterUsage] Missing userId, skipping usage update.");return}const r=jv(),i=ms(Tt,"users",t);let a;try{a=await In(null,i,()=>mn(i),{label:"UploadCenterUsage:update"})}catch(A){console.error("[UploadCenterUsage] Failed to fetch user document.",{userId:t,error:A});return}if(!a.exists()){console.warn("[UploadCenterUsage] User document does not exist.",{userId:t});return}const o=(b=a.data())==null?void 0:b.uploadCenter,c=o==null?void 0:o.usage,u=(c==null?void 0:c.date)===r,h=u?Number((w=c==null?void 0:c.guilds)!=null?w:0):0,m=u?Number((k=c==null?void 0:c.players)!=null?k:0):0,g=h+Number(e!=null?e:0),x=m+Number(n!=null?n:0);try{await ij(i,()=>ll(i,{uploadCenter:{...o!=null?o:{},usage:{date:r,guilds:g,players:x}}},{merge:!0}),{label:"UploadCenterUsage:updateWrite"})}catch(A){console.error("[UploadCenterUsage] Failed to update usage data.",{userId:t,error:A})}}const nc={enabled:!0,dailyGuildLimit:9999,dailyPlayerLimit:999999},_x=t=>{if(t==null||typeof t=="boolean"||typeof t=="string"&&t.trim()==="")return null;const e=Number(t);return Number.isFinite(e)&&e>=0?e:null},cPe=t=>{if(!t||typeof t!="object")return;const e={};return Object.entries(t).forEach(([n,r])=>{if(!r||typeof r!="object")return;const i=r,a=_x(i.dailyGuildLimit),o=_x(i.dailyPlayerLimit),c=i.enabled,u={};typeof c=="boolean"&&(u.enabled=c),a!==null&&(u.dailyGuildLimit=a),o!==null&&(u.dailyPlayerLimit=o),Object.keys(u).length>0&&(e[n]=u)}),Object.keys(e).length>0?e:void 0};async function dPe(t){const e=ms(Tt,"upload_quota_config","default");try{const n=await In(null,e,()=>mn(e),{label:"UploadQuota:config"});if(!n.exists())return console.warn("[UploadQuota] Missing config document. Using defaults."),nc;const r=n.data(),i=_x(r==null?void 0:r.dailyGuildLimit),a=_x(r==null?void 0:r.dailyPlayerLimit),o=cPe(r==null?void 0:r.roles),c={dailyGuildLimit:i!=null?i:nc.dailyGuildLimit,dailyPlayerLimit:a!=null?a:nc.dailyPlayerLimit};typeof(r==null?void 0:r.enabled)=="boolean"&&(c.enabled=r.enabled),o&&(c.roles=o);const u=r&&Object.prototype.hasOwnProperty.call(r,"dailyGuildLimit")&&i===null,h=r&&Object.prototype.hasOwnProperty.call(r,"dailyPlayerLimit")&&a===null;return(u||h)&&console.warn("[UploadQuota] Invalid config payload. Using defaults.",{data:r}),c}catch(n){return console.error("[UploadQuota] Failed to load quota config.",{userId:t==null?void 0:t.id,error:n}),nc}}function uPe(t,e){var a,o,c;const n=Array.isArray(e)?e.filter(u=>typeof u=="string"&&u.length>0):[],r=Number.isFinite(t.dailyGuildLimit)?t.dailyGuildLimit:nc.dailyGuildLimit,i=Number.isFinite(t.dailyPlayerLimit)?t.dailyPlayerLimit:nc.dailyPlayerLimit;for(const u of n){const h=(a=t.roles)==null?void 0:a[u];if(!h||h.enabled===!1)continue;const m=(o=h.dailyGuildLimit)!=null?o:r,g=(c=h.dailyPlayerLimit)!=null?c:i;return console.debug("[UploadQuota] Applying role override for upload limits.",{role:u,guildLimit:m,playerLimit:g}),{dailyGuildLimit:m,dailyPlayerLimit:g}}return{dailyGuildLimit:r,dailyPlayerLimit:i}}async function _5(t){var u,h,m;const e=(u=t==null?void 0:t.id)!=null?u:null,n=(m=(h=t==null?void 0:t.uploadCenter)==null?void 0:h.usage)!=null?m:{date:null,guilds:0,players:0},r=Array.isArray(t==null?void 0:t.roles)?t.roles:[],[i,a]=await Promise.all([dPe(t),e?oPe(e):Promise.resolve(null)]),o=uPe(i,r);return{config:{...i,dailyGuildLimit:o.dailyGuildLimit,dailyPlayerLimit:o.dailyPlayerLimit},usage:a!=null?a:n}}const hPe=(t,e)=>`${va}/scan-uploads/${encodeURIComponent(t)}/${e}.csv`,mPe=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function w5(t,e){const n=hPe(t,e);console.log(`[scan-uploads] Fetching ${e} CSV for scanId=${t}`);const r=await fetch(n,{method:"GET",credentials:"include",headers:{Accept:"text/csv"}});if(!r.ok)throw console.error(`[scan-uploads] Failed to fetch ${e} CSV for scanId=${t} (status ${r.status})`),await mPe(r);const i=await r.text();return console.log(`[scan-uploads] Fetched ${e} CSV for scanId=${t} (${i.length} chars)`),i}const pPe="sfdatahub:uploadCenter:scanUploads:v1:",M6=5,F6=t=>t&&"seconds"in t&&"nanoseconds"in t?{seconds:t.seconds,nanoseconds:t.nanoseconds}:null,id=t=>t?t instanceof on?t.toMillis():"seconds"in t&&"nanoseconds"in t?t.seconds*1e3+t.nanoseconds/1e6:-1/0:-1/0,gPe=t=>({...t,uploadedAt:t.uploadedAt?new on(t.uploadedAt.seconds,t.uploadedAt.nanoseconds):null}),fPe=t=>({...t,uploadedAt:F6(t.uploadedAt)}),B6=t=>{let e=null,n=-1/0;return t.forEach(r=>{var o;const i=F6("uploadedAt"in r&&(o=r.uploadedAt)!=null?o:null),a=id(i);a>n&&i&&(e=i,n=a)}),e},vPe=(t,e)=>{const n=new Map,r=i=>{const a=i.id||i.scanId;if(!a)return;const o=n.get(a);if(!o){n.set(a,i);return}const c=id(o.uploadedAt),u=id(i.uploadedAt);n.set(a,u>=c?i:o)};return t.forEach(r),e.forEach(r),Array.from(n.values()).sort((i,a)=>id(a.uploadedAt)-id(i.uploadedAt)).slice(0,M6)},xPe=(t,e)=>{if(!e)return[];const n=id(e);return t.filter(r=>id(r.uploadedAt)===n).map(r=>r.id).filter(r=>!!r)},yPe=t=>{if(typeof window=="undefined")return null;try{const e=window.localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return!n||!Array.isArray(n.items)?null:n}catch(e){return console.warn("[upload-center] Failed to read scan uploads cache",e),null}},j5=(t,e)=>{if(typeof window!="undefined")try{const n={savedAtMs:Date.now(),lastUploadedAt:B6(e),items:e.map(fPe)};window.localStorage.setItem(t,JSON.stringify(n))}catch(n){console.warn("[upload-center] Failed to persist scan uploads cache",n)}},L1=new Map,bPe=t=>{const[e,n]=P.useState([]),[r,i]=P.useState(!1),[a,o]=P.useState(null);return P.useEffect(()=>{if(!t){n([]),i(!1),o(null);return}let c=!0;const u=`${pPe}${t}`,h=yPe(u),m=h?h.items.map(gPe):[],g=(h==null?void 0:h.lastUploadedAt)||B6(m),x=xPe(m,g);o(null),m.length>0?(n(m),i(!1)):(n([]),i(!0));const b=async()=>{const k=Mn("UploadCenter:scanUploads");try{const A=ol(Tt,"scan_uploads"),L=Dn(A,ji("discordUserId","==",t),Hi("uploadedAt","desc"),pr(M6)),I=await Tn(k,{path:A.path},()=>Cn(L));if(!c)return;const N=I.docs.map(v=>({id:v.id,...v.data()}));console.log(`[upload-center] Loaded ${N.length} scan_uploads for current user (remote sessions)`),n(N),j5(u,N)}catch(A){if(!c)return;console.error("[upload-center] Failed to load scan_uploads for current user (index may be required)",A),o(A instanceof Error?A:new Error("Failed to load scan uploads")),n([])}finally{dn(k),c&&i(!1)}},w=async(k,A)=>{const L=`${t}:${k.seconds}:${k.nanoseconds}`,I=L1.get(L);if(I){await I;return}const N=Mn("UploadCenter:scanUploads"),_=(async()=>{try{const R=ol(Tt,"scan_uploads"),j=new on(k.seconds,k.nanoseconds),S=Dn(R,ji("discordUserId","==",t),Hi("uploadedAt","asc"),ji("uploadedAt",">",j)),C=await Tn(N,{path:R.path},()=>Cn(S));if(!c)return;let M=C.docs.map(T=>({id:T.id,...T.data()}));if(M.length===0&&A.length>0){const T=A.slice(0,10),F=Dn(R,ji("discordUserId","==",t),ji("uploadedAt","==",j),ji(h_(),"not-in",T),Hi(h_())),D=await Tn(N,{path:R.path},()=>Cn(F));if(!c)return;M=D.docs.map(V=>({id:V.id,...V.data()}))}if(M.length===0){console.log("[upload-center] No new scan_uploads found; using cached entries");return}n(T=>{const F=vPe(T.length?T:m,M);return j5(u,F),F})}catch(R){if(!c)return;console.error("[upload-center] Delta refresh for scan_uploads failed (index may be required)",R)}finally{dn(N)}})().finally(()=>{L1.delete(L)});L1.set(L,_),await _};return m.length>0&&g?w(g,x):b(),()=>{c=!1}},[t]),{items:e,loading:r,error:a}},$6="sfdatahub_upload_quota_v1",O6=t=>{var e,n;return{date:typeof(t==null?void 0:t.date)=="string"?t.date:null,guilds:Number((e=t==null?void 0:t.guilds)!=null?e:0)||0,players:Number((n=t==null?void 0:t.players)!=null?n:0)||0}},D1=(t,e)=>{if(typeof window=="undefined")return;const n={version:1,config:t,usage:O6(e),storedAt:new Date().toISOString()};try{window.localStorage.setItem($6,JSON.stringify(n))}catch(r){console.warn("[UploadQuotaStorage] Failed to persist quota data",r)}},_Pe=()=>{var t,e;if(typeof window=="undefined")return null;try{const n=window.localStorage.getItem($6);if(!n)return null;const r=JSON.parse(n);return!r||typeof r!="object"||r.version!==1||typeof((t=r.config)==null?void 0:t.dailyGuildLimit)!="number"||typeof((e=r.config)==null?void 0:e.dailyPlayerLimit)!="number"?null:{version:1,config:{dailyGuildLimit:Number(r.config.dailyGuildLimit)||0,dailyPlayerLimit:Number(r.config.dailyPlayerLimit)||0},usage:O6(r.usage),storedAt:typeof r.storedAt=="string"?r.storedAt:""}}catch(n){return console.warn("[UploadQuotaStorage] Failed to read quota data",n),null}},wx=(t,e)=>Math.max(t-e,0),S5=(t,e,n)=>{var o,c,u;const r=e.date===n,i=r&&(o=e.guilds)!=null?o:0,a=r&&(c=e.players)!=null?c:0;return{config:t,usageDate:(u=e.date)!=null?u:null,usedGuildsToday:i,usedPlayersToday:a,remainingGuilds:wx(t.dailyGuildLimit,i),remainingPlayers:wx(t.dailyPlayerLimit,a),today:n}},wPe=({className:t})=>{if(!t)return s.jsx("span",{title:"Unknown class",className:"text-xs text-center text-zinc-400 block",children:"Unknown"});const{url:e,fallback:n}=B4(t),r=e?Ni(e,28):void 0;return r?s.jsx("img",{src:r,alt:t,title:t,className:"mx-auto h-6 w-6 rounded-full object-contain",draggable:!1}):n?s.jsx("span",{title:t,className:"mx-auto text-center text-sm leading-none",style:{display:"block"},children:n}):s.jsx("span",{title:t,className:"text-xs text-center text-zinc-400 block",children:t})};function jPe(){return s.jsx(as,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:s.jsx(SPe,{})},"upload-center-shell")}function SPe(){var lt,Je,ut,bt,ft,mt,ot,os,gt;const{sessions:t,activeSessionId:e,addSession:n,setActiveSession:r,removeSession:i,selectGuildWithPlayers:a,updateGuildSelectionFromPlayer:o,selectAllPlayersWithGuilds:c,selectAllGuildsWithPlayers:u,setRecordStatus:h}=rPe(),{t:m}=Os(),{user:g}=xa(),x=(ut=(Je=(lt=g==null?void 0:g.providers)==null?void 0:lt.discord)==null?void 0:Je.id)!=null?ut:(g==null?void 0:g.provider)==="discord"?g.id:null,{items:b,loading:w,error:k}=bPe(x),A=!!x,L=t.find(ne=>ne.id===e)||null,I=P.useMemo(()=>new Set(t.map(ne=>ne.scanUploadId).filter(ne=>!!ne)),[t]),[N,v]=q.useState(new Set),[_,R]=P.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),[j,S]=P.useState("all"),[C,M]=P.useState("all"),[T,F]=P.useState(!1),[D,V]=P.useState(!1),[U,K]=P.useState(null),[H,z]=P.useState(null),[Y,te]=P.useState(()=>S5(nc,{date:null,guilds:0,players:0},jv())),[G,X]=P.useState(null),J=P.useCallback((ne,Ue)=>{const Ve=jv();te(S5(ne,Ue,Ve)),X(null)},[]),se=P.useCallback(async()=>{try{const ne=await _5(g!=null?g:null);J(ne.config,ne.usage),D1(ne.config,ne.usage)}catch(ne){console.error("[UploadCenter] Failed to refresh upload quota",ne),X("Could not refresh upload quota. Using last known values.")}},[J,g]);P.useEffect(()=>{var dt,qe;let ne=!0;jv();const Ue=(qe=(dt=g==null?void 0:g.uploadCenter)==null?void 0:dt.usage)!=null?qe:{date:null,guilds:0,players:0};J(nc,Ue);const Ve=_Pe();return Ve&&J(Ve.config,Ve.usage),(async()=>{try{const _t=await _5(g!=null?g:null);if(!ne)return;J(_t.config,_t.usage),D1(_t.config,_t.usage)}catch(_t){console.error("[UploadCenter] Failed to refresh upload quota",_t),ne&&X("Could not refresh upload quota. Using last known values.")}})(),()=>{ne=!1}},[g,(ft=(bt=g==null?void 0:g.uploadCenter)==null?void 0:bt.usage)==null?void 0:ft.date,(ot=(mt=g==null?void 0:g.uploadCenter)==null?void 0:mt.usage)==null?void 0:ot.guilds,(gt=(os=g==null?void 0:g.uploadCenter)==null?void 0:os.usage)==null?void 0:gt.players,J]);const ue=P.useCallback(ne=>{const Ue=`csv_${Date.now()}`,Ve=new Date().toISOString(),dt=b5(ne,Ue,Ve);n(dt),r(Ue)},[n,r]),Ne=ne=>{const Ue=new Date(ne);return Number.isNaN(Ue.getTime())?"Unknown date":Ue.toLocaleString()},Ee=ne=>{v(Ue=>{const Ve=new Set(Ue);return Ve.has(ne)?Ve.delete(ne):Ve.add(ne),Ve})},ee=ne=>{var qe,_t;const Ue="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Ve={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},dt={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return s.jsx("span",{className:`${Ue} ${(qe=Ve[ne])!=null?qe:Ve.pending}`,children:(_t=dt[ne])!=null?_t:ne})},le=ne=>{if(!ne)return"Unknown date";try{if(typeof ne.toDate=="function")return ne.toDate().toLocaleString()}catch(Ue){}return"Unknown date"},re=ne=>{var _t,Dt,Ot;const Ue="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Ve={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",stored:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",received:"bg-sky-500/10 text-sky-100 border border-sky-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},dt={pending:"PENDING",stored:"STORED",received:"RECEIVED",error:"ERROR"},qe=(_t=ne==null?void 0:ne.toLowerCase())!=null?_t:"pending";return s.jsx("span",{className:`${Ue} ${(Dt=Ve[qe])!=null?Dt:Ve.pending}`,children:(Ot=dt[qe])!=null?Ot:ne||"PENDING"})},be=P.useCallback((ne,Ue,Ve)=>{const dt=ne==="created"||ne==="duplicate";return Ve&&dt?!1:Ue==="all"?!0:Ue==="pending"?ne==="pending":Ue==="inDb"?dt:Ue==="error"?ne==="error":!0},[]),Te=P.useMemo(()=>L?L.players.filter(ne=>be(ne.status,j,T)):[],[L,be,j,T]),Le=P.useMemo(()=>L?L.guilds.filter(ne=>be(ne.status,C,D)):[],[L,be,C,D]),Re=P.useCallback(async ne=>{if(ne!=null&&ne.id){z(null),K(ne.id);try{const Ue=[],Ve=ne.queueId||ne.scanId||ne.id,dt=ne.hasPlayersCsv!==!1,qe=ne.hasGuildsCsv!==!1;if(dt){const ys=await w5(ne.id,"players");Ue.push({name:`players.scan-${Ve}.csv`,text:ys})}if(qe){const ys=await w5(ne.id,"guilds");Ue.push({name:`guilds.scan-${Ve}.csv`,text:ys})}if(!Ue.length)throw new Error("No CSV data available for this scan.");const _t=P6(Ue);_t.filename=Ve||_t.filename;const Dt=`scan_${ne.id}_${Date.now()}`,Ot=new Date().toISOString(),Ct={...b5(_t,Dt,Ot),scanUploadId:ne.id};n(Ct),r(Dt),console.log(`[upload-center] Loaded remote scan session for scanId=${ne.id} (session ${Dt})`)}catch(Ue){console.error(`[upload-center] Failed to load remote scan session for scanId=${ne==null?void 0:ne.id}`,Ue),z(Ue instanceof Error?Ue.message:"Failed to load remote scan session.")}finally{K(null)}}},[n,r]),Oe=P.useMemo(()=>{if(!L)return!1;const ne=L.players.some(Ve=>Ve.selected),Ue=L.guilds.some(Ve=>Ve.selected);return ne||Ue},[L]),Me=_.phase==="uploading"||_.phase==="finalizing",De=()=>{if(!L)return null;const ne=L.players.filter(qe=>qe.selected),Ue=L.guilds.filter(qe=>qe.selected);if(!ne.length&&!Ue.length)return null;const Ve=ne.map(qe=>{var _t,Dt,Ot,Be,Ct,ys;if(qe.values&&typeof qe.values=="object"){const ke={...qe.values};return ke.Identifier==null&&ke.ID==null&&(ke.Identifier=qe.playerId),ke["Guild Identifier"]==null&&(ke["Guild Identifier"]=(_t=qe.guildId)!=null?_t:""),ke.Timestamp==null&&(ke.Timestamp=qe.scanTimestampSec),ke.Server==null&&(ke.Server=qe.server),ke.Name==null&&(ke.Name=qe.name),ke.Class==null&&(ke.Class=(Dt=qe.className)!=null?Dt:""),ke.Level==null&&(ke.Level=(Ot=qe.level)!=null?Ot:""),ke}return{Identifier:qe.playerId,"Guild Identifier":(Be=qe.guildId)!=null?Be:"",Timestamp:qe.scanTimestampSec,Server:qe.server,Name:qe.name,Class:(Ct=qe.className)!=null?Ct:"",Level:(ys=qe.level)!=null?ys:""}}),dt=Ue.map(qe=>{var _t,Dt;if(qe.values&&typeof qe.values=="object"){const Ot={...qe.values};return Ot["Guild Identifier"]==null&&(Ot["Guild Identifier"]=qe.guildId),Ot["Guild Member Count"]==null&&(Ot["Guild Member Count"]=(_t=qe.memberCount)!=null?_t:qe.members.length),Ot.Timestamp==null&&(Ot.Timestamp=qe.scanTimestampSec),Ot.Server==null&&(Ot.Server=qe.server),Ot.Name==null&&(Ot.Name=qe.name),Ot}return{"Guild Identifier":qe.guildId,"Guild Member Count":(Dt=qe.memberCount)!=null?Dt:qe.members.length,Timestamp:qe.scanTimestampSec,Name:qe.name,Server:qe.server}});return{playersRows:Ve,guildsRows:dt}},Fe=P.useCallback((ne,Ue)=>{te(Ve=>{const dt=Ve.usedGuildsToday+ne,qe=Ve.usedPlayersToday+Ue,_t={...Ve,usedGuildsToday:dt,usedPlayersToday:qe,remainingGuilds:wx(Ve.config.dailyGuildLimit,dt),remainingPlayers:wx(Ve.config.dailyPlayerLimit,qe),usageDate:Ve.today};return D1(Ve.config,{date:Ve.today,guilds:dt,players:qe}),_t})},[]),we=P.useMemo(()=>Y.usageDate?Y.usageDate===Y.today?"Today":Y.usageDate:"No uploads yet",[Y.today,Y.usageDate]),de=Y.config.dailyPlayerLimit===0,Ie=Y.config.dailyGuildLimit===0,Ae=de?m("uploadCenter.quota.unlimited"):Y.config.dailyPlayerLimit,Xe=Ie?m("uploadCenter.quota.unlimited"):Y.config.dailyGuildLimit,oe=de?m("uploadCenter.quota.unlimited"):`${Ae} limit today`,fe=Ie?m("uploadCenter.quota.unlimited"):`${Xe} limit today`,me=de?m("uploadCenter.quota.unlimited"):Y.remainingPlayers,xe=Ie?m("uploadCenter.quota.unlimited"):Y.remainingGuilds,tt=async()=>{var nr,xr,pn;if(!L)return;const ne=De();if(!ne)return;const Ue=L.players.filter(us=>us.selected),Ve=L.guilds.filter(us=>us.selected),dt=Ue.length+Ve.length;if(!dt)return;const qe=(nr=g==null?void 0:g.id)!=null?nr:null,{config:_t,usedGuildsToday:Dt,usedPlayersToday:Ot}=Y,Be=Dt+Ve.length,Ct=Ot+Ue.length,ys=Be>_t.dailyGuildLimit,ke=Ct>_t.dailyPlayerLimit;if(ys||ke){X(`Daily quota exceeded: You can import up to ${_t.dailyGuildLimit} guilds / ${_t.dailyPlayerLimit} players per day. Today you already imported ${Dt} guilds / ${Ot} players. This selection would bring you to ${Be} guilds / ${Ct} players.`);return}X(null),R({phase:"uploading",processed:0,total:dt,created:0,duplicate:0,error:0});const Ss={processed:0,created:0,duplicate:0,error:0},Qn={processed:0,created:0,duplicate:0,error:0},Ks=()=>{const us=Math.min(Ss.processed+Qn.processed,dt),Ts=us>=dt&&dt>0?"finalizing":"uploading";R({phase:Ts,processed:us,total:dt,created:Ss.created+Qn.created,duplicate:Ss.duplicate+Qn.duplicate,error:Ss.error+Qn.error})},vr=us=>Ts=>{var rr;if((Ts==null?void 0:Ts.pass)!=="scans")return;const _n=us==="players"?Ss:Qn;typeof Ts.current=="number"&&(_n.processed=Math.min(Ts.current,(rr=Ts.total)!=null?rr:Ts.current)),typeof Ts.created=="number"&&(_n.created=Ts.created),typeof Ts.duplicate=="number"&&(_n.duplicate=Ts.duplicate),typeof Ts.error=="number"&&(_n.error=Ts.error),Ks()};try{console.log("[UploadCenter] starting selection upload",{players:Ue.length,guilds:Ve.length});const us=await I6(ne,{onProgress:Qt=>{(Qt==null?void 0:Qt.kind)==="players"?vr("players")(Qt):(Qt==null?void 0:Qt.kind)==="guilds"&&vr("guilds")(Qt)}}),Ts=L.id;let _n=!1,rr=!1;if(console.log("[UploadCenter] importSelectionToDb result",{playersSample:(xr=us==null?void 0:us.players)==null?void 0:xr.slice(0,5),guildsSample:(pn=us==null?void 0:us.guilds)==null?void 0:pn.slice(0,5),selectedPlayerKeys:Ue.slice(0,5).map(Qt=>Qt.key),selectedGuildKeys:Ve.slice(0,5).map(Qt=>Qt.key)}),((us==null?void 0:us.players)||[]).forEach(Qt=>{_n=!0,h(Ts,"player",Qt.key,Qt.status)}),((us==null?void 0:us.guilds)||[]).forEach(Qt=>{rr=!0,h(Ts,"guild",Qt.key,Qt.status)}),!_n&&!rr&&(Ue.forEach(Qt=>h(Ts,"player",Qt.key,"created")),Ve.forEach(Qt=>h(Ts,"guild",Qt.key,"created"))),Ue.length||Ve.length){if(Fe(Ve.length,Ue.length),!qe)console.warn("[UploadCenter] Cannot persist upload usage because the user ID is missing.");else try{await lPe(qe,Ve.length,Ue.length)}catch(Qt){console.error("[UploadCenter] Failed to record upload usage.",Qt)}await se()}}catch(us){console.error("[UploadCenter] Failed to upload selection",us)}finally{R(us=>({...us,phase:"done"}))}};return s.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[s.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),s.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),s.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 md:p-5",children:[s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Upload quota"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Daily limits & usage"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Values are cached locally in your browser so you can resume uploads across page reloads."})]}),s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-800/80 px-3 py-2 text-xs text-slate-200",children:["Last upload: ",we]})]}),s.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-emerald-200/80",children:"Players"}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-semibold text-emerald-50",children:me}),s.jsx("span",{className:"text-sm text-emerald-100/80",children:"remaining"})]}),s.jsxs("div",{className:"mt-1 text-xs text-emerald-100/70",children:[Y.usedPlayersToday," used / ",oe]})]}),s.jsxs("div",{className:"rounded-xl border border-sky-400/40 bg-sky-500/5 p-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-sky-200/80",children:"Guilds"}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-semibold text-sky-50",children:xe}),s.jsx("span",{className:"text-sm text-sky-100/80",children:"remaining"})]}),s.jsxs("div",{className:"mt-1 text-xs text-sky-100/70",children:[Y.usedGuildsToday," used / ",fe]})]})]}),G&&s.jsx("div",{className:"mt-3 rounded-xl border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-50",children:G})]}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[s.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),s.jsx(R6,{mode:"session",onBuildUploadSession:ue})]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):s.jsx("div",{className:"flex flex-col gap-3",children:t.map(ne=>{const Ue=ne.id===e;return s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>r(ne.id),onKeyDown:Ve=>{(Ve.key==="Enter"||Ve.key===" ")&&(Ve.preventDefault(),r(ne.id))},className:["w-full rounded-xl border px-4 py-3 text-left transition",Ue?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-semibold",children:ne.sourceFilename||"Unnamed session"}),s.jsx("span",{className:"text-xs text-slate-400",children:Ne(ne.createdAt)})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right text-xs text-slate-400",children:[s.jsxs("div",{children:["Players: ",ne.players.length]}),s.jsxs("div",{children:["Guilds: ",ne.guilds.length]})]}),s.jsx("button",{type:"button",onClick:Ve=>{Ve.stopPropagation(),window.confirm("Remove this session from the list? This will NOT delete any data from the database.")&&i(ne.id)},className:"rounded-full p-1 transition text-red-400 hover:text-red-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-300","aria-label":"Remove session",title:"Remove this session from the list",children:s.jsx(_9,{className:"h-4 w-4"})})]})]}),Ue&&s.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},ne.id)})}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"Scan uploads from Discord bot"}),H&&s.jsx("div",{className:"rounded-xl border border-amber-400/60 bg-amber-500/10 p-3 text-sm text-amber-100",children:H}),A?w?s.jsx("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Loading scan uploads..."}):k?s.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100",children:"Error loading scan uploads."}):b.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"No scan uploads from Discord bot yet."}):s.jsx("div",{className:"flex flex-col gap-3",children:b.map(ne=>{const Ue=U===ne.id,Ve=I.has(ne.id),dt=Ue||Ve;return s.jsxs("button",{type:"button",onClick:()=>{dt||Re(ne)},disabled:dt,title:Ve?"This scan is already loaded above. Remove it there to load it again.":void 0,className:["w-full rounded-xl border px-4 py-3 text-left text-slate-100 transition","border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:text-emerald-50",dt?"cursor-not-allowed opacity-70 bg-slate-700/60 text-slate-400":""].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-semibold",children:ne.queueId||ne.scanId||ne.id}),s.jsx("span",{className:"text-xs text-slate-400",children:le(ne.uploadedAt)}),ne.discordUsername&&s.jsx("span",{className:"text-xs text-slate-400",children:ne.discordUsername})]}),s.jsxs("div",{className:"text-right text-xs text-slate-400",children:[s.jsxs("div",{children:["Players CSV: ",ne.hasPlayersCsv?"yes":"no"]}),s.jsxs("div",{children:["Guilds CSV: ",ne.hasGuildsCsv?"yes":"no"]})]})]}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[re(ne.status),ne.serverCode&&s.jsxs("span",{className:"rounded-full border border-slate-600/70 bg-slate-800/60 px-2 py-0.5",children:["Server: ",ne.serverCode]}),ne.lastError&&s.jsxs("span",{className:"rounded-full border border-rose-500/60 bg-rose-500/10 px-2 py-0.5 text-rose-100",children:["Error: ",ne.lastError]}),s.jsx("span",{className:"rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-emerald-100",children:Ve?"Loaded":Ue?"Loading...":"Load into preview"})]})]},ne.id)})}):s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Link your Discord account to see bot uploads here."})]})]})}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:tt,disabled:Me||!L||!Oe,children:_.phase==="uploading"?"Uploading...":_.phase==="finalizing"?"Finalizing...":"Upload selected to DB"}),G&&s.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100",children:G}),_.total>0&&s.jsx("div",{className:"text-xs text-slate-300",children:_.phase==="uploading"?s.jsxs(s.Fragment,{children:["Uploading ",_.processed," / ",_.total," records (",Math.round(_.processed/Math.max(_.total,1)*100),"%) - ",_.created," created, ",_.duplicate," duplicates, ",_.error," errors"]}):_.phase==="finalizing"?s.jsxs(s.Fragment,{children:["Finalizing import - ",_.created," created, ",_.duplicate," duplicates, ",_.error," errors"]}):_.phase==="done"?s.jsxs(s.Fragment,{children:["Upload finished: ",_.created," created, ",_.duplicate," duplicates, ",_.error," errors"]}):null}),L?s.jsx("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:`Active session: ${L.sourceFilename||L.id} - ${L.players.length} players, ${L.guilds.length} guilds`}):s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),L&&s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),s.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",L.players.length," total,"," ",L.players.filter(ne=>ne.selected).length," selected"]})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[s.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>c(L.id,!0),children:"Select all"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>c(L.id,!1),children:"Clear selection"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[s.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ne=>s.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",j===ne?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>S(ne),children:ne==="all"?"All":ne==="pending"?"Pending":ne==="inDb"?"In DB":"Error"},ne))}),s.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:T,onChange:ne=>F(ne.target.checked)}),s.jsx("span",{children:"Hide uploaded"})]})]}),Te.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):s.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{children:Te.map(ne=>{var Ue;return s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"checkbox",checked:ne.selected,onChange:()=>o(L.id,ne.key,!ne.selected)})}),s.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ne.name||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:ne.server||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:(Ue=ne.level)!=null?Ue:""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:s.jsx(wPe,{className:ne.className})}),s.jsx("td",{className:"px-3 py-2",children:ee(ne.status)})]},ne.key)})})]})})]}),s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),s.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",L.guilds.length," total,"," ",L.guilds.filter(ne=>ne.selected).length," selected"]})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[s.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>u(L.id,!0),children:"Select all"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>u(L.id,!1),children:"Clear selection"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[s.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ne=>s.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",C===ne?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>M(ne),children:ne==="all"?"All":ne==="pending"?"Pending":ne==="inDb"?"In DB":"Error"},ne))}),s.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:D,onChange:ne=>V(ne.target.checked)}),s.jsx("span",{children:"Hide uploaded"})]})]}),Le.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):s.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{children:Le.map(ne=>{var dt;const Ue=N.has(ne.key),Ve=(dt=ne.memberCount)!=null?dt:ne.members.length;return s.jsxs(q.Fragment,{children:[s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>Ee(ne.key),"aria-expanded":Ue,children:Ue?"Collapse":"Expand"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"checkbox",checked:ne.selected,onChange:()=>a(L.id,ne.key,!ne.selected)})}),s.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ne.name||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:ne.server||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:Ve}),s.jsx("td",{className:"px-3 py-2",children:ee(ne.status)})]}),Ue&&s.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:s.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[s.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),ne.members.length===0?s.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):s.jsxs("table",{className:"w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),s.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),s.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),s.jsx("tbody",{children:ne.members.map(qe=>{var _t,Dt;return s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-2 py-1",children:qe.name||""}),s.jsx("td",{className:"px-2 py-1",children:(_t=qe.level)!=null?_t:""}),s.jsx("td",{className:"px-2 py-1",children:(Dt=qe.className)!=null?Dt:""})]},qe.key)})})]})]})})]},ne.key)})})]})})]})]})]})})]})}function NPe(){const{canUse:t}=oj();return t?s.jsx(jPe,{}):s.jsx(as,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[s.jsx(rE,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),s.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const kPe=t=>()=>s.jsx("div",{style:{padding:16},children:s.jsx("h2",{style:{color:"var(--title)"},children:t})}),Oi=kPe("Diese Unterseite existiert in der neuen Struktur nicht mehr."),N5=({tab:t})=>{const e=qn(),n=new URLSearchParams(e.search);n.set("tab",t);const r=n.toString();return s.jsx(no,{to:`/toplists${r?`?${r}`:""}`,replace:!0})},cs=(t,e,n,r=s.jsx(no,{to:"/",replace:!0}))=>s.jsx(aPe,{featureId:t,route:e,fallback:r,children:n});J8.createRoot(document.getElementById("root")).render(s.jsx(q.StrictMode,{children:s.jsx(iH,{children:s.jsx(CH,{children:s.jsx(PH,{children:s.jsxs(nPe,{children:[s.jsx(OF,{children:s.jsx(fF,{children:s.jsxs(je,{element:s.jsx($q,{}),children:[s.jsx(je,{path:"/",element:cs("main.home","/",s.jsx(yee,{}),s.jsx(no,{to:"/login",replace:!0}))}),s.jsx(je,{path:"/login",element:s.jsx(bee,{})}),s.jsx(je,{path:"/dashboard",element:cs("main.dashboard","/dashboard",s.jsx(_ee,{}))}),s.jsx(je,{path:"/dashboard/kpis",element:cs("main.dashboard","/dashboard",s.jsx(See,{}))}),s.jsx(je,{path:"/dashboard/activity",element:cs("main.dashboard","/dashboard",s.jsx(Nee,{}))}),s.jsx(je,{path:"/dashboard/progression",element:cs("main.dashboard","/dashboard",s.jsx(kee,{}))}),s.jsx(je,{path:"/discover",element:cs("main.discover","/discover",s.jsx(Cee,{}))}),s.jsx(je,{path:"/toplists",element:cs("main.toplists","/toplists",s.jsx(rre,{}))}),s.jsx(je,{path:"/sfmagazine",element:s.jsx(Pee,{})}),s.jsx(je,{path:"/sfmagazine/historybook",element:s.jsx(lte,{})}),s.jsx(je,{path:"/help",element:s.jsx(jte,{})}),s.jsx(je,{path:"/search",element:s.jsx(BAe,{})}),s.jsx(je,{path:"/players",element:s.jsx(ire,{})}),s.jsx(je,{path:"/players/rankings",element:s.jsx(are,{})}),s.jsx(je,{path:"/players/stats",element:s.jsx(ore,{})}),s.jsx(je,{path:"/players/profile",element:s.jsx(qb,{})}),s.jsx(je,{path:"/players/profile/:identifier",element:s.jsx(qb,{})}),s.jsx(je,{path:"/players/compare",element:s.jsx(Cae,{})}),s.jsx(je,{path:"/player/:identifier",element:s.jsx(qb,{})}),s.jsx(je,{path:"/guilds",element:s.jsx(Dae,{})}),s.jsx(je,{path:"/guilds/rankings",element:s.jsx(Mae,{})}),s.jsx(je,{path:"/guilds/stats",element:s.jsx(Fae,{})}),s.jsx(je,{path:"/guilds/profile",element:s.jsx(e1,{})}),s.jsx(je,{path:"/guilds/profile/:guildId",element:s.jsx(e1,{})}),s.jsx(je,{path:"/guild/:guildId",element:s.jsx(e1,{})}),s.jsx(je,{path:"/servers",element:s.jsx(jce,{})}),s.jsx(je,{path:"/servers/rankings",element:s.jsx(Sce,{})}),s.jsx(je,{path:"/servers/stats",element:s.jsx(Nce,{})}),s.jsx(je,{path:"/servers/overview",element:s.jsx(nde,{})}),s.jsx(je,{path:"/servers/profile",element:s.jsx(s1,{})}),s.jsx(je,{path:"/servers/profile/:serverId",element:s.jsx(s1,{})}),s.jsx(je,{path:"/server/:serverId",element:s.jsx(s1,{})}),s.jsx(je,{path:"/u/:profileId",element:s.jsx(hue,{})}),s.jsx(je,{path:"/guidehub/*",element:cs("main.guidehub","/guidehub",s.jsx(Jfe,{}))}),s.jsx(je,{path:"/guidehub-v2",element:cs("main.guidehub","/guidehub-v2",s.jsx(zye,{}))}),s.jsx(je,{path:"/tools",element:cs("main.tools","/tools",s.jsx(DAe,{}))}),s.jsx(je,{path:"/upload-center",element:cs("main.uploadCenter","/upload-center",s.jsx(NPe,{}),s.jsx(no,{to:"/login",replace:!0}))}),s.jsx(je,{path:"/UploadCenter",element:s.jsx(no,{to:"/upload-center",replace:!0})}),s.jsx(je,{path:"/community",element:cs("main.community","/community",s.jsx(Mbe,{}))}),s.jsx(je,{path:"/community/scans",element:cs("main.community","/community",s.jsx(UL,{}))}),s.jsx(je,{path:"/community/predictions",element:cs("main.community","/community",s.jsx(zL,{}))}),s.jsx(je,{path:"/community/creators",element:cs("main.community","/community",s.jsx(VL,{}))}),s.jsx(je,{path:"/community/feedback",element:cs("main.community","/community",s.jsx(HL,{}))}),s.jsx(je,{path:"/community/news",element:cs("main.community","/community",s.jsx(GL,{}))}),s.jsx(je,{path:"/community/records",element:cs("main.community","/community",s.jsx(WL,{}))}),s.jsx(je,{path:"/scans",element:cs("main.scans","/scans",s.jsx(Fbe,{}))}),s.jsx(je,{path:"/scans/latest",element:cs("main.scans","/scans",s.jsx(Bbe,{}))}),s.jsx(je,{path:"/scans/archive",element:cs("main.scans","/scans",s.jsx($be,{}))}),s.jsx(je,{path:"/guild-hub",element:cs("main.guildHub","/guild-hub",s.jsx(Obe,{}))}),s.jsx(je,{path:"/guild-hub/planner",element:cs("main.guildHub","/guild-hub",s.jsx(l_e,{}))}),s.jsx(je,{path:"/guild-hub/fusion-planner",element:cs("main.guildHub","/guild-hub",s.jsx(WSe,{}))}),s.jsx(je,{path:"/guild-hub/compare-guilds",element:cs("main.guildHub","/guild-hub",s.jsx(KSe,{}))}),s.jsx(je,{path:"/guild-hub/waitlist",element:cs("main.guildHub","/guild-hub",s.jsx(hke,{}))}),s.jsx(je,{path:"/guild-hub/activity",element:cs("main.guildHub","/guild-hub",s.jsx(bke,{}))}),s.jsx(je,{path:"/guild-hub/imports",element:cs("main.guildHub","/guild-hub",s.jsx(_ke,{}))}),s.jsx(je,{path:"/guild-hub/announcements",element:cs("main.guildHub","/guild-hub",s.jsx(wke,{}))}),s.jsx(je,{path:"/guild-hub/events",element:cs("main.guildHub","/guild-hub",s.jsx(jke,{}))}),s.jsx(je,{path:"/guild-hub/roles",element:cs("main.guildHub","/guild-hub",s.jsx(Ske,{}))}),s.jsx(je,{path:"/guild-hub/settings",element:cs("main.guildHub","/guild-hub",s.jsx(Nke,{}))}),s.jsx(je,{path:"/admin",element:cs("main.admin","/admin",s.jsx(Ike,{}))}),s.jsx(je,{path:"/admin/errors",element:cs("main.admin","/admin",s.jsx(Rke,{}))}),s.jsx(je,{path:"/admin/scans-uploaded",element:cs("main.admin","/admin",s.jsx(Dke,{}))}),s.jsx(je,{path:"/admin/creators-api",element:cs("main.admin","/admin",s.jsx(Hke,{}))}),s.jsx(je,{path:"/admin/users",element:cs("main.admin","/admin",s.jsx(iCe,{}))}),s.jsx(je,{path:"/settings",element:cs("main.settings","/settings",s.jsx(no,{to:"/settings/account",replace:!0}))}),s.jsx(je,{path:"/settings/account",element:cs("main.settings","/settings",s.jsx(zTe,{}))}),s.jsxs(je,{path:"/playground",element:cs("main.playground","/playground",s.jsx(HTe,{})),children:[s.jsx(je,{index:!0,element:s.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),s.jsx(je,{path:"list-views",element:s.jsx(QI,{})}),s.jsx(je,{path:"rescan-widget",element:s.jsx(XI,{})}),s.jsx(je,{path:"upload-sim",element:s.jsx(JI,{})}),s.jsx(je,{path:"theme-maker",element:s.jsx(DI,{})}),s.jsx(je,{path:"theme-maker-pro",element:s.jsx(FI,{})}),s.jsx(je,{path:"gamified",element:s.jsx(yIe,{})}),s.jsx(je,{path:"gamified-2",element:s.jsx(_Ie,{})}),s.jsx(je,{path:"gamified-3",element:s.jsx(SIe,{})}),s.jsx(je,{path:"gamified-4",element:s.jsx(CIe,{})}),s.jsx(je,{path:"gamified-5",element:s.jsx(EIe,{})}),s.jsx(je,{path:"gamified-6",element:s.jsx(RIe,{})}),s.jsx(je,{path:"gamified-7",element:s.jsx(MIe,{})}),s.jsx(je,{path:"gamified-8",element:s.jsx($Ie,{})}),s.jsx(je,{path:"am-rune-bonuses-demos",element:s.jsx(U3e,{})}),s.jsx(je,{path:"templates/content-shell",element:s.jsx(s5e,{})}),s.jsx(je,{path:"templates/blank",element:s.jsx(r5e,{})}),s.jsx(je,{path:"templates/blank-alt",element:s.jsx(a5e,{})}),s.jsx(je,{path:"templates/blank-layout-2",element:s.jsx(d5e,{})}),s.jsx(je,{path:"templates/blank-layout-3",element:s.jsx(h5e,{})}),s.jsx(je,{path:"templates/blank-layout-4",element:s.jsx(m5e,{})}),s.jsx(je,{path:"portrait-maker",element:s.jsx(JIe,{})}),s.jsx(je,{path:"hud",element:s.jsx(z3e,{})}),s.jsx(je,{path:"hud/game-buttons",element:s.jsx(fIe,{})}),s.jsx(je,{path:"core-ui/theme-maker",element:s.jsx(DI,{})}),s.jsx(je,{path:"core-ui/theme-maker-pro",element:s.jsx(FI,{})}),s.jsx(je,{path:"core-ui/list-views",element:s.jsx(QI,{})}),s.jsx(je,{path:"sync/rescan",element:s.jsx(XI,{})}),s.jsx(je,{path:"upload/sim",element:s.jsx(JI,{})}),s.jsx(je,{path:"import/har",element:s.jsx(v5e,{})}),s.jsx(je,{path:"import/json-csv",element:s.jsx(_5e,{})}),s.jsx(je,{path:"import/schema",element:s.jsx(N5e,{})}),s.jsx(je,{path:"hubs/player-contained",element:s.jsx(I5e,{})}),s.jsx(je,{path:"hubs/guilds",element:s.jsx(R5e,{})}),s.jsx(je,{path:"hubs/servers",element:s.jsx(F5e,{})}),s.jsx(je,{path:"rankings/views",element:s.jsx(V5e,{})}),s.jsx(je,{path:"analytics/kpi",element:s.jsx(H5e,{})}),s.jsx(je,{path:"analytics/progression",element:s.jsx(Q5e,{})}),s.jsx(je,{path:"analytics/legendary-pets",element:s.jsx(Z5e,{})}),s.jsx(je,{path:"community/scans",element:s.jsx(nEe,{})}),s.jsx(je,{path:"community/creators",element:s.jsx(oEe,{})}),s.jsx(je,{path:"feedback/form",element:s.jsx(uEe,{})}),s.jsx(je,{path:"feedback/admin",element:s.jsx(gEe,{})}),s.jsx(je,{path:"help/tutorials",element:s.jsx(yEe,{})}),s.jsx(je,{path:"help/wiki",element:s.jsx(jEe,{})}),s.jsx(je,{path:"legal/tos",element:s.jsx(AEe,{})}),s.jsx(je,{path:"legal/transparency",element:s.jsx(DEe,{})}),s.jsx(je,{path:"settings",element:s.jsx(CEe,{})}),s.jsx(je,{path:"pwa/update",element:s.jsx($Ee,{})}),s.jsx(je,{path:"pwa/install",element:s.jsx(zEe,{})}),s.jsx(je,{path:"connect/manual",element:s.jsx(KEe,{})}),s.jsx(je,{path:"connect/userscript",element:s.jsx(XEe,{})}),s.jsx(je,{path:"interop/exports",element:s.jsx(tAe,{})}),s.jsx(je,{path:"interop/deeplinks",element:s.jsx(iAe,{})}),s.jsx(je,{path:"admin/servers",element:s.jsx(cAe,{})}),s.jsx(je,{path:"admin/jobs",element:s.jsx(mAe,{})}),s.jsx(je,{path:"admin/flags",element:s.jsx(vAe,{})}),s.jsx(je,{path:"perf/table-lab",element:s.jsx(_Ae,{})}),s.jsx(je,{path:"mobile/filters",element:s.jsx(NAe,{})}),s.jsx(je,{path:"qa/a11y",element:s.jsx(IAe,{})})]}),s.jsx(je,{path:"/latest-scan",element:s.jsx(no,{to:"/scans/latest",replace:!0})}),s.jsx(je,{path:"/old-scans",element:s.jsx(no,{to:"/scans/archive",replace:!0})}),s.jsx(je,{path:"/favorites",element:Oi()}),s.jsx(je,{path:"/notifications",element:Oi()}),s.jsx(je,{path:"/guilds/planner",element:Oi()}),s.jsx(je,{path:"/guilds/fusion",element:Oi()}),s.jsx(je,{path:"/guilds/academy",element:Oi()}),s.jsx(je,{path:"/toplists/players",element:s.jsx(N5,{tab:"players"})}),s.jsx(je,{path:"/toplists/guilds",element:s.jsx(N5,{tab:"guilds"})}),s.jsx(je,{path:"/toplists/servers",element:Oi()}),s.jsx(je,{path:"/settings/profile",element:Oi()}),s.jsx(je,{path:"/settings/appearance",element:Oi()}),s.jsx(je,{path:"/players/search",element:Oi()}),s.jsx(je,{path:"/servers/list",element:Oi()}),s.jsx(je,{path:"/servers/trend",element:Oi()}),s.jsx(je,{path:"/scans/upload",element:Oi()}),s.jsx(je,{path:"/scans/history",element:Oi()}),s.jsx(je,{path:"*",element:s.jsx(no,{to:"/",replace:!0})})]})})}),s.jsx(tPe,{})]})})})})}));
